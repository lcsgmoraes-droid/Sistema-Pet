import{a as n}from"./vendor-utils-1771903905136.js";import{d as c}from"./index-1771903905136.js";const o=n.create({baseURL:"/api",timeout:15e3});c(o);o.interceptors.request.use(e=>{const t=localStorage.getItem("access_token"),a=localStorage.getItem("selectedTenant");if(e.headers=e.headers||{},t&&(e.headers.Authorization=`Bearer ${t}`),a)try{const s=JSON.parse(a);s!=null&&s.id&&(e.headers["X-Tenant-ID"]=s.id)}catch{}return e},e=>Promise.reject(e));o.interceptors.response.use(e=>e,e=>{var a;if((e==null?void 0:e.code)==="ERR_LOADING_SAFE_DUPLICATE")return Promise.reject(e);const t=(a=e.response)==null?void 0:a.status;return t===401&&(console.warn("Sessão inválida ou tenant não selecionado"),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),window.location.href="/login"),t===403&&console.warn("Acesso negado para este tenant"),Promise.reject(e)});export{o as a};
