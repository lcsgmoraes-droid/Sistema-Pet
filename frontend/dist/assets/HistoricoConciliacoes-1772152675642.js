import{S as y,r as d,j as e}from"./vendor-react-1772152675642.js";import{a as v}from"./index-1772152675642.js";function _(){const h=y(),[c,f]=d.useState([]),[x,m]=d.useState(!1),[s,n]=d.useState({operadora:"",status:"",data_inicio:"",data_fim:""});d.useEffect(()=>{p()},[]);const p=async()=>{m(!0);try{const a=new URLSearchParams;s.operadora&&a.append("operadora",s.operadora),s.status&&a.append("status",s.status),s.data_inicio&&a.append("data_inicio",s.data_inicio),s.data_fim&&a.append("data_fim",s.data_fim);const t=await v.get(`/conciliacao/historico?${a.toString()}`);t.data&&t.data.items&&f(t.data.items)}catch(a){console.error("Erro ao carregar histÃ³rico:",a)}finally{m(!1)}},u=a=>{if(!a)return"-";const[t,o,r]=a.split("T")[0].split("-");return`${r}/${o}/${t}`},b=(a,t)=>{var i,l;if((l=(i=t==null?void 0:t.abas)==null?void 0:i.aba2)!=null&&l.concluida&&a==="em_andamento")return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"âœ“ Aba 2 ConcluÃ­da"});const r={concluida:{cor:"bg-green-100 text-green-800",texto:"âœ“ ConcluÃ­da"},em_andamento:{cor:"bg-yellow-100 text-yellow-800",texto:"â³ Em Andamento"},reprocessada:{cor:"bg-blue-100 text-blue-800",texto:"â†» Reprocessada"},cancelada:{cor:"bg-gray-100 text-gray-800",texto:"âœ• Cancelada"}}[a]||{cor:"bg-gray-100 text-gray-800",texto:a};return e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r.cor}`,children:r.texto})},j=a=>a?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a):"-";return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ðŸ“‹ HistÃ³rico de ConciliaÃ§Ãµes"}),e.jsx("p",{className:"text-gray-600",children:"Consulte todas as conciliaÃ§Ãµes jÃ¡ realizadas"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>h("/financeiro/conciliacao-3abas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium transition-colors flex items-center gap-2",title:"Voltar para ConciliaÃ§Ã£o",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Voltar para ConciliaÃ§Ã£o"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operadora"}),e.jsxs("select",{value:s.operadora,onChange:a=>n({...s,operadora:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"Stone",children:"Stone"}),e.jsx("option",{value:"PagSeguro",children:"PagSeguro"}),e.jsx("option",{value:"Rede",children:"Rede"}),e.jsx("option",{value:"Cielo",children:"Cielo"}),e.jsx("option",{value:"Getnet",children:"Getnet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:s.status,onChange:a=>n({...s,status:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"concluida",children:"ConcluÃ­da"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"reprocessada",children:"Reprocessada"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data InÃ­cio"}),e.jsx("input",{type:"date",value:s.data_inicio,onChange:a=>n({...s,data_inicio:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:s.data_fim,onChange:a=>n({...s,data_fim:a.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:"ðŸ” Filtrar"}),e.jsx("button",{onClick:()=>{n({operadora:"",status:"",data_inicio:"",data_fim:""}),p()},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:"âœ• Limpar Filtros"})]})]}),x&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!x&&c.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[e.jsx("span",{style:{padding:"8px 10px"},children:"ID"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Data"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Operadora"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Status"}),e.jsx("span",{style:{padding:"8px 10px",textAlign:"right"},children:"Valor"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Processado"}),e.jsx("span",{style:{padding:"8px 10px"},children:"UsuÃ¡rio"})]}),c.map((a,t)=>{var o,r,i,l,g;return e.jsxs("div",{className:"hover:bg-blue-50 transition-colors",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",alignItems:"center",borderBottom:"1px solid #f0f0f0",background:t%2===0?"#fff":"#fafbfc"},children:[e.jsxs("span",{style:{padding:"8px 10px"},className:"text-sm font-mono text-gray-400",children:["#",a.id]}),e.jsx("span",{style:{padding:"8px 10px"},className:"text-sm font-medium text-gray-900",children:u(a.data_referencia)}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:a.operadora,children:a.operadora}),e.jsx("span",{style:{padding:"8px 10px"},children:b(a.status,a)}),e.jsxs("span",{style:{padding:"8px 10px",textAlign:"right"},children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:j((r=(o=a.totais)==null?void 0:o.recebimentos)==null?void 0:r.valor_total)}),((l=(i=a.totais)==null?void 0:i.recebimentos)==null?void 0:l.quantidade)&&e.jsxs("div",{className:"text-xs text-gray-400",children:[a.totais.recebimentos.quantidade," trans."]})]}),e.jsxs("span",{style:{padding:"8px 10px"},children:[e.jsx("div",{className:"text-sm text-gray-700",children:u((g=a.created_at)==null?void 0:g.split("T")[0])}),e.jsx("div",{className:"text-xs text-gray-400",children:a.created_at?new Date(a.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"-"})]}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:a.usuario_responsavel,children:a.usuario_responsavel||"-"})]},a.id)})]}),!x&&c.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ“‹"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma conciliaÃ§Ã£o encontrada"}),e.jsx("p",{className:"text-gray-500",children:"NÃ£o hÃ¡ conciliaÃ§Ãµes registradas com os filtros selecionados."})]})]})}export{_ as default};
