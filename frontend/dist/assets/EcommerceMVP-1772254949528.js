import{u as pr,S as gr,ah as ur,r as l,j as o}from"./vendor-react-1772254949528.js";import{b as hr}from"./index-1772254949528.js";import{a as mr}from"./api-1772254949528.js";const w=hr.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}});function K(...n){window.gtag&&window.gtag(...n)}function xr(n){K("event","page_view",{page_title:{loja:"Loja",carrinho:"Carrinho",checkout:"Checkout",conta:"Minha Conta",pedidos:"Meus Pedidos"}[n]||n,page_location:window.location.href})}function yr(n){K("event","view_item",{currency:"BRL",value:Ue(n),items:[Mo(n,1)]})}function Fo(n){K("event","add_to_cart",{currency:"BRL",value:Ue(n),items:[Mo(n,1)]})}function br(n){K("event","begin_checkout",{currency:"BRL",value:Number((n==null?void 0:n.total)||0),items:Ve(n)})}function jr(n,d){K("event","purchase",{transaction_id:(n==null?void 0:n.pedido_id)||"",currency:"BRL",value:Number((d==null?void 0:d.total)||0),items:Ve(d)})}function vr(n){K("event","view_cart",{currency:"BRL",value:Number((n==null?void 0:n.total)||0),items:Ve(n)})}function Ue(n){return Number((n==null?void 0:n.preco_venda)??(n==null?void 0:n.preco)??(n==null?void 0:n.preco_unitario)??0)}function Mo(n,d){return{item_id:String((n==null?void 0:n.id)||(n==null?void 0:n.produto_id)||""),item_name:(n==null?void 0:n.nome)||(n==null?void 0:n.name)||"",price:Ue(n),quantity:Number(d)}}function Ve(n){return((n==null?void 0:n.itens)||[]).map(d=>({item_id:String(d.produto_id||""),item_name:d.nome||"",price:Number(d.preco_unitario||0),quantity:Number(d.quantidade||1)}))}const Z="ecommerce_customer_token",Pe="ecommerce_customer_orders",De="ecommerce_customer_address",Oe="ecommerce_guest_cart",Lo="ecommerce_wishlist_products",Po="ecommerce_notify_requests",No="/api",H={pedido_id:null,itens:[],subtotal:0,total:0},xe={cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""};function k(n){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(n||0))}function Sr(n){if(!n)return"-";const d=new Date(n);return Number.isNaN(d.getTime())?"-":new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(d)}function Ne(n){return Number((n==null?void 0:n.preco_venda)??(n==null?void 0:n.preco)??(n==null?void 0:n.preco_promocional)??0)}function ee(n){const d=Number(n==null?void 0:n.estoque_ecommerce),h=Number(n==null?void 0:n.estoque_atual);return Number.isFinite(d)&&d>0?d:Number.isFinite(h)?h:Number.isFinite(d)?d:Number.POSITIVE_INFINITY}function ye(n){const d=ee(n);return Number.isFinite(d)&&d<=0}async function qe(n){const d=String(n||"").replace(/\D+/g,"");if(d.length!==8)return null;try{const h=await fetch(`https://viacep.com.br/ws/${d}/json/`);if(!h.ok)return null;const p=await h.json();return p!=null&&p.erro?null:{cep:d,endereco:(p==null?void 0:p.logradouro)||"",bairro:(p==null?void 0:p.bairro)||"",cidade:(p==null?void 0:p.localidade)||"",estado:(p==null?void 0:p.uf)||""}}catch{return null}}function kr(){var n;return(n=window==null?void 0:window.crypto)!=null&&n.randomUUID?window.crypto.randomUUID():`checkout-${Date.now()}-${Math.random().toString(16).slice(2)}`}function oe(n){if(!n||typeof n!="string")return"";if(/^https?:\/\//i.test(n))return n;const d=n.startsWith("/")?n:`/${n}`;return/^https?:\/\//i.test(No)?`${No.replace(/\/api\/?$/,"").replace(/\/$/,"")}${d}`:`${window.location.origin}${d}`}function qo(n){return Array.isArray(n)?n:Array.isArray(n==null?void 0:n.items)?n.items:Array.isArray(n==null?void 0:n.itens)?n.itens:Array.isArray(n==null?void 0:n.produtos)?n.produtos:[]}function Me(){try{const n=localStorage.getItem(Oe);if(!n)return{...H};const d=JSON.parse(n);if(!Array.isArray(d==null?void 0:d.itens))return{...H};const h=Number((d==null?void 0:d.subtotal)||0),p=Number((d==null?void 0:d.total)||0);return{pedido_id:null,itens:d.itens,subtotal:h,total:p}}catch{return{...H}}}function $e(n){const d=n.reduce((h,p)=>h+Number(p.preco_unitario||0)*Number(p.quantidade||0),0);return{pedido_id:null,itens:n,subtotal:d,total:d}}function _r(){try{const n=localStorage.getItem(De);if(!n)return{...xe};const d=JSON.parse(n);return typeof d=="object"&&d!==null?{...xe,...d}:{...xe,endereco:String(n||"")}}catch{const n=localStorage.getItem(De)||"";return{...xe,endereco:n}}}function wr(n){const d=[n.endereco,n.numero].filter(Boolean).join(", "),h=n.bairro?`Bairro: ${n.bairro}`:"",p=[n.cidade,n.estado].filter(Boolean).join("/"),x=n.cep?`CEP: ${n.cep}`:"",b=n.complemento?`Compl.: ${n.complemento}`:"";return[d,h,p,x,b].filter(Boolean).join(" | ")}function Y(n){const d=[];return n!=null&&n.imagem_principal&&d.push(oe(n.imagem_principal)),Array.isArray(n==null?void 0:n.imagens)&&n.imagens.forEach(h=>{typeof h=="string"&&h.trim()?d.push(oe(h.trim())):h!=null&&h.url&&typeof h.url=="string"&&d.push(oe(h.url.trim()))}),Array.from(new Set(d.filter(Boolean)))}function zr(n){const d=String(n||"");return d?d.includes("??")||d.includes("ï¿½")||/\?{2,}/.test(d):!1}function Cr(n){return String(n||"").split("-").filter(Boolean).map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}function C(n,d){var x;const h=(x=n==null?void 0:n.response)==null?void 0:x.data,p=h==null?void 0:h.detail;if(typeof p=="string"&&p.trim())return p;if(Array.isArray(p)&&p.length>0){const b=p[0];if(typeof b=="string"&&b.trim())return b;if(typeof(b==null?void 0:b.msg)=="string"&&b.msg.trim())return b.msg}if(Array.isArray(h==null?void 0:h.details)&&h.details.length>0){const b=h.details[0];if(typeof b=="string"&&b.trim())return b;if(typeof(b==null?void 0:b.msg)=="string"&&b.msg.trim())return b.msg}return typeof(h==null?void 0:h.message)=="string"&&h.message.trim()?h.message:d}const Ir=[{bg:"linear-gradient(135deg, #6366f1 0%, #4f46e5 60%, #4338ca 100%)",title:"Compre e receba no mesmo dia!",sub:"Pedidos realizados atÃ© as 16h",emoji:"ðŸš€"},{bg:"linear-gradient(135deg, #10b981 0%, #059669 60%, #047857 100%)",title:"Retire na loja",sub:"Super simples e sem custo de frete!",emoji:"ðŸª"},{bg:"linear-gradient(135deg, #f59e0b 0%, #d97706 60%, #b45309 100%)",title:"As melhores raÃ§Ãµes em Prudente",sub:"Cachorros, gatos, pÃ¡ssaros e mais ðŸ¾",emoji:"ðŸ¶"}];function Tr(){var ko,_o,wo,zo,Co,Io,Bo,Ro,Wo,To,Ao,Eo;const n=pr(),d=gr(),h=ur(),[p,x]=l.useState("loja");l.useEffect(()=>{xr(p),p==="carrinho"&&vr(f)},[p]);const[b,Ye]=l.useState(0),[$o,He]=l.useState(null),[be,re]=l.useState(!1),[A,ne]=l.useState([]),[D,ie]=l.useState(""),[P,je]=l.useState("todas"),[y,Ke]=l.useState(null),[Je,Do]=l.useState(!1),[Ge,Oo]=l.useState(!1),[ae,te]=l.useState(!1),[ve,Xe]=l.useState(!1),[Uo,Qe]=l.useState(!1),[v,se]=l.useState(localStorage.getItem(Z)||""),[a,O]=l.useState(null),[Ze,eo]=l.useState(!1),[m,j]=l.useState({nome:"",telefone:"",cpf:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",usar_endereco_entrega_diferente:!1,entrega_nome:"",entrega_cep:"",entrega_endereco:"",entrega_numero:"",entrega_complemento:"",entrega_bairro:"",entrega_cidade:"",entrega_estado:""}),[J,de]=l.useState({email:"",password:"",nome:""}),[le,Se]=l.useState({email:"",password:""}),[f,E]=l.useState(()=>Me()),[ke,oo]=l.useState(""),[F,_e]=l.useState(null),[q,ro]=l.useState(""),[N,Vo]=l.useState("entrega"),[ce,Yo]=l.useState("proprio"),[I,L]=l.useState(()=>_r()),[B,fe]=l.useState(null),[U,we]=l.useState(null),[R,Ho]=l.useState(""),[pe,Ko]=l.useState("Visa"),[ze,Jo]=l.useState(1),[Ce,no]=l.useState(""),[Ie,io]=l.useState(""),[ao,to]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(Pe)||"[]")}catch{return[]}}),[so,lo]=l.useState([]),[Be,co]=l.useState(!1),[G,Go]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(Lo)||"[]")}catch{return[]}}),[Re,Xo]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(Po)||"[]")}catch{return[]}}),[M,$]=l.useState({open:!1,product:null,email:"",loading:!1}),[fo,g]=l.useState(""),[po,S]=l.useState(""),[i,We]=l.useState(null),ge=l.useMemo(()=>{const e=[i==null?void 0:i.banner_1_url,i==null?void 0:i.banner_2_url,i==null?void 0:i.banner_3_url].filter(Boolean);return e.length>0?e.map(r=>({type:"image",url:r})):Ir.map(r=>({...r,type:"text"}))},[i==null?void 0:i.banner_1_url,i==null?void 0:i.banner_2_url,i==null?void 0:i.banner_3_url]),X=l.useMemo(()=>{const r=String((a==null?void 0:a.nome)||"").trim().includes(" "),s=String((a==null?void 0:a.telefone)||"").trim().length>=8,c=String((a==null?void 0:a.cpf)||"").replace(/\D+/g,"").length>=11,u=String((a==null?void 0:a.endereco)||"").trim().length>3;return r&&s&&c&&u},[a]),W=l.useMemo(()=>new URLSearchParams(n.search).get("tenant")||h.tenantId||"",[n.search,h.tenantId]),go=l.useMemo(()=>i!=null&&i.id?{"X-Tenant-ID":i.id}:{},[i==null?void 0:i.id]),T=l.useMemo(()=>v?{Authorization:`Bearer ${v}`}:{},[v]),Te=l.useMemo(()=>{const e=A.map(r=>(r==null?void 0:r.categoria_nome)||(r==null?void 0:r.categoria)||"Sem categoria").filter(Boolean);return["todas",...Array.from(new Set(e))]},[A]),Q=l.useMemo(()=>{const e=D.trim().toLowerCase();return A.filter(r=>{const s=String((r==null?void 0:r.nome)||"").toLowerCase(),c=String((r==null?void 0:r.codigo)||"").toLowerCase(),u=(r==null?void 0:r.categoria_nome)||(r==null?void 0:r.categoria)||"Sem categoria";return(!e||s.includes(e)||c.includes(e))&&(P==="todas"||u===P)})},[A,D,P]),uo=l.useMemo(()=>Object.fromEntries(A.map(e=>[e.id,e])),[A]),ue=(i==null?void 0:i.ecommerce_slug)||W||"",Ae=(a==null?void 0:a.nome)||(a==null?void 0:a.email)||"",ho=l.useMemo(()=>{const e=(i==null?void 0:i.name)||"";return e&&!zr(e)?e:ue?Cr(ue):"Loja online"},[i==null?void 0:i.name,ue]);l.useEffect(()=>{const r=new URLSearchParams(n.search).get("busca");r&&ie(r)},[n.search]),l.useEffect(()=>{Qo(),W&&mo()},[W]),l.useEffect(()=>{!W&&(i!=null&&i.id)&&(i.ecommerce_slug?d(`/${i.ecommerce_slug}`,{replace:!0}):Zo(i.id))},[i==null?void 0:i.id]),l.useEffect(()=>{v&&(er(),xo())},[v]),l.useEffect(()=>{i!=null&&i.cidade&&!q&&ro(i.cidade)},[i==null?void 0:i.cidade,q]),l.useEffect(()=>{v||localStorage.setItem(Oe,JSON.stringify(f||H))},[f,v]),l.useEffect(()=>{localStorage.setItem(Lo,JSON.stringify(G))},[G]),l.useEffect(()=>{localStorage.setItem(Po,JSON.stringify(Re))},[Re]),l.useEffect(()=>{const e=ge.length,r=setInterval(()=>Ye(s=>(s+1)%e),4e3);return()=>clearInterval(r)},[ge.length]),l.useEffect(()=>{if(!a)return;const e=(a==null?void 0:a.endereco_entrega_detalhado)||{};j({nome:(a==null?void 0:a.nome)||"",telefone:(a==null?void 0:a.telefone)||"",cpf:(a==null?void 0:a.cpf)||"",cep:(a==null?void 0:a.cep)||"",endereco:(a==null?void 0:a.endereco)||"",numero:(a==null?void 0:a.numero)||"",complemento:(a==null?void 0:a.complemento)||"",bairro:(a==null?void 0:a.bairro)||"",cidade:(a==null?void 0:a.cidade)||"",estado:(a==null?void 0:a.estado)||"",endereco_entrega:(a==null?void 0:a.endereco_entrega)||"",usar_endereco_entrega_diferente:!!(a!=null&&a.usar_endereco_entrega_diferente),entrega_nome:(e==null?void 0:e.entrega_nome)||"",entrega_cep:(e==null?void 0:e.entrega_cep)||"",entrega_endereco:(e==null?void 0:e.entrega_endereco)||"",entrega_numero:(e==null?void 0:e.entrega_numero)||"",entrega_complemento:(e==null?void 0:e.entrega_complemento)||"",entrega_bairro:(e==null?void 0:e.entrega_bairro)||"",entrega_cidade:(e==null?void 0:e.entrega_cidade)||"",entrega_estado:(e==null?void 0:e.entrega_estado)||""})},[a]),l.useEffect(()=>{if(!a)return;const e=(a==null?void 0:a.endereco_entrega_detalhado)||{},r=!!(a!=null&&a.usar_endereco_entrega_diferente);L({cep:r?(e==null?void 0:e.entrega_cep)||(a==null?void 0:a.cep)||"":(a==null?void 0:a.cep)||"",endereco:r?(e==null?void 0:e.entrega_endereco)||(a==null?void 0:a.endereco)||"":(a==null?void 0:a.endereco)||"",numero:r?(e==null?void 0:e.entrega_numero)||(a==null?void 0:a.numero)||"":(a==null?void 0:a.numero)||"",complemento:r?(e==null?void 0:e.entrega_complemento)||(a==null?void 0:a.complemento)||"":(a==null?void 0:a.complemento)||"",bairro:r?(e==null?void 0:e.entrega_bairro)||(a==null?void 0:a.bairro)||"":(a==null?void 0:a.bairro)||"",cidade:r?(e==null?void 0:e.entrega_cidade)||(a==null?void 0:a.cidade)||"":(a==null?void 0:a.cidade)||"",estado:r?(e==null?void 0:e.entrega_estado)||(a==null?void 0:a.estado)||"":(a==null?void 0:a.estado)||""})},[a]);async function Qo(){try{if(!W){const r=await mr.get("/ecommerce-aparencia/tenant-context");We((r==null?void 0:r.data)||null);return}const e=await w.get("/api/ecommerce/tenant-context",{params:{tenant:W}});We((e==null?void 0:e.data)||null)}catch(e){We(null),g(C(e,"Loja invÃ¡lida para e-commerce"))}}async function mo(){if(W){re(!0),g("");try{const e=await w.get("/api/ecommerce/produtos",{params:{tenant:W,limit:100,busca:D||void 0}});ne(qo(e==null?void 0:e.data))}catch(e){ne([]),g(C(e,"Erro ao carregar produtos vendÃ¡veis"))}finally{re(!1)}}}async function Zo(e){re(!0),g("");try{const r=await w.get("/api/ecommerce/produtos",{params:{tenant:e,limit:100,busca:D||void 0}});ne(qo(r==null?void 0:r.data))}catch(r){ne([]),g(C(r,"Erro ao carregar produtos vendÃ¡veis"))}finally{re(!1)}}async function er(){if(v)try{const e=await w.get("/api/ecommerce/auth/perfil",{headers:T});O(e.data)}catch{O(null),se(""),localStorage.removeItem(Z),E(Me())}}async function or(e){if(e.preventDefault(),!v){g("FaÃ§a login para atualizar seus dados.");return}const r=String(m.nome||"").trim();if(!r||!r.includes(" ")){g("Informe nome completo (nome e sobrenome).");return}if(m.usar_endereco_entrega_diferente&&![m.entrega_nome,m.entrega_endereco,m.entrega_numero,m.entrega_bairro,m.entrega_cidade,m.entrega_estado].every(c=>String(c||"").trim())){g("Preencha o endereÃ§o de entrega completo para continuar.");return}eo(!0),g(""),S("");try{const s=await w.put("/api/ecommerce/auth/perfil",m,{headers:T});O(s.data),S("Dados cadastrais atualizados com sucesso.")}catch(s){g(C(s,"Erro ao salvar dados cadastrais"))}finally{eo(!1)}}async function rr(){const e=await qe(m.cep);e&&j(r=>({...r,cep:e.cep||r.cep,endereco:e.endereco||r.endereco,bairro:e.bairro||r.bairro,cidade:e.cidade||r.cidade,estado:e.estado||r.estado}))}async function nr(){const e=await qe(m.entrega_cep);e&&j(r=>({...r,entrega_cep:e.cep||r.entrega_cep,entrega_endereco:e.endereco||r.entrega_endereco,entrega_bairro:e.bairro||r.entrega_bairro,entrega_cidade:e.cidade||r.entrega_cidade,entrega_estado:e.estado||r.entrega_estado}))}async function ir(){const e=await qe(I.cep);e&&L(r=>({...r,cep:e.cep||r.cep,endereco:e.endereco||r.endereco,bairro:e.bairro||r.bairro,cidade:e.cidade||r.cidade,estado:e.estado||r.estado}))}async function xo(e=T){if(e!=null&&e.Authorization){Qe(!0);try{const r=await w.get("/api/carrinho",{headers:e});E(r.data||{...H})}catch(r){g(C(r,"Erro ao carregar carrinho"))}finally{Qe(!1)}}}async function yo(e){var c;const r=Me();if(!((c=r==null?void 0:r.itens)!=null&&c.length))return;const s={Authorization:`Bearer ${e}`};for(const u of r.itens)await w.post("/api/carrinho/adicionar",{produto_id:u.produto_id,quantidade:u.quantidade},{headers:s});await xo(s),localStorage.removeItem(Oe)}async function ar(e){var r,s;if(e.preventDefault(),!(i!=null&&i.id)){g("Loja nÃ£o identificada na URL.");return}te(!0),g(""),S("");try{const c=await w.post("/api/ecommerce/auth/registrar",J,{headers:go}),u=(r=c==null?void 0:c.data)==null?void 0:r.access_token;if(!u)throw new Error("Token nÃ£o retornado");(s=c==null?void 0:c.data)!=null&&s.user&&O(c.data.user),localStorage.setItem(Z,u),se(u),await yo(u),de({email:"",password:"",nome:""}),S("Cadastro realizado com sucesso. Complete seus dados na aba Conta."),x("conta")}catch(c){g(C(c,"Erro ao cadastrar cliente"))}finally{te(!1)}}async function tr(e){var r,s;if(e.preventDefault(),!(i!=null&&i.id)){g("Loja nÃ£o identificada na URL.");return}te(!0),g(""),S("");try{const c=await w.post("/api/ecommerce/auth/login",le,{headers:go}),u=(r=c==null?void 0:c.data)==null?void 0:r.access_token;if(!u)throw new Error("Token nÃ£o retornado");(s=c==null?void 0:c.data)!=null&&s.user&&O(c.data.user),localStorage.setItem(Z,u),se(u),await yo(u),Se({email:"",password:""}),S("Login realizado com sucesso. Confira seus dados cadastrais."),x("conta")}catch(c){g(C(c,"Erro ao realizar login"))}finally{te(!1)}}function sr(){O(null),se(""),E({...H}),fe(null),we(null),localStorage.removeItem(Z),S("SessÃ£o encerrada.")}function bo(e){Go(r=>r.includes(e)?(S("Produto removido da sua lista de desejos."),r.filter(s=>s!==e)):(S("Produto adicionado Ã  sua lista de desejos."),[...r,e]))}function jo(e){const r=(a==null?void 0:a.email)||J.email||le.email||"";$({open:!0,product:e,email:r,loading:!1})}async function dr(e){e.preventDefault();const{product:r,email:s}=M;if(!s.trim()||!r)return;$(u=>({...u,loading:!0}));const c=(i==null?void 0:i.id)||ue||W;try{await w.post("/api/ecommerce-notify/registrar",{email:s.trim(),product_id:r.id,product_name:r.nome,tenant_id:c}),$({open:!1,product:null,email:"",loading:!1}),S("Perfeito! Te avisaremos por e-mail quando o produto voltar ao estoque. ðŸ“§"),Xo(u=>u.some(_=>_.productId===r.id&&String(_.email||"").toLowerCase()===s.trim().toLowerCase())?u:[...u,{productId:r.id,productName:r.nome,email:s.trim(),createdAt:new Date().toISOString()}])}catch{$(u=>({...u,loading:!1})),g("NÃ£o foi possÃ­vel registrar o aviso. Tente novamente.")}}async function vo(e){if(ee(e)<=0){g("Produto indisponÃ­vel no momento. Volto em breve.");return}if(!v){g("");const s=Ne(e);E(c=>{const u=Array.isArray(c==null?void 0:c.itens)?c.itens:[],_=u.find(V=>V.produto_id===e.id)?u.map(V=>V.produto_id===e.id?{...V,quantidade:Number(V.quantidade||0)+1}:V):[...u,{item_id:`guest-${e.id}`,produto_id:e.id,nome:e.nome,preco_unitario:s,quantidade:1}];return $e(_)}),S("Produto adicionado ao carrinho. FaÃ§a login no checkout para finalizar."),Fo(e);return}g("");try{const s=await w.post("/api/carrinho/adicionar",{produto_id:e.id,quantidade:1},{headers:T});E(s.data),S("Produto adicionado ao carrinho."),Fo(e)}catch(s){g(C(s,"Erro ao adicionar no carrinho"))}}async function Ee(e,r){if(!v){E(s=>{const c=Array.isArray(s==null?void 0:s.itens)?s.itens:[];if(r<=0){const z=c.filter(_=>_.item_id!==e);return $e(z)}const u=c.map(z=>z.item_id===e?{...z,quantidade:r}:z);return $e(u)});return}g("");try{if(r<=0){const c=await w.delete(`/api/carrinho/remover/${e}`,{headers:T});E(c.data);return}const s=await w.put(`/api/carrinho/atualizar/${e}`,{quantidade:r},{headers:T});E(s.data)}catch(s){g(C(s,"Erro ao atualizar carrinho"))}}async function lr(e){if(e.preventDefault(),!v){g("FaÃ§a login para aplicar cupom."),x("conta");return}if(ke.trim()){g("");try{const r=await w.post("/api/carrinho/aplicar-cupom",{codigo:ke.trim()},{headers:T});_e(r.data),S("Cupom validado.")}catch(r){_e(null),g(C(r,"Cupom invÃ¡lido"))}}}async function cr(e){var s;if(e.preventDefault(),!v){g("FaÃ§a login para continuar no checkout."),x("conta");return}if(!((s=f==null?void 0:f.itens)!=null&&s.length)){g("Adicione itens no carrinho antes de calcular o checkout.");return}const r=((i==null?void 0:i.cidade)||q||I.cidade||"").trim();if(!r||r.length<2){g("Cidade da loja nÃ£o configurada para checkout.");return}g(""),fe(null);try{const c=await w.get("/api/checkout/resumo",{headers:T,params:{cidade_destino:r,cupom:(F==null?void 0:F.codigo)||void 0}});fe(c.data),S("Resumo de checkout calculado.")}catch(c){g(C(c,"Erro ao calcular resumo do checkout"))}}async function fr(){if(!v){g("FaÃ§a login para finalizar o pedido."),x("conta");return}if(!X){g("Complete seu cadastro antes de finalizar o pedido."),x("conta");return}const e=((i==null?void 0:i.cidade)||q||I.cidade||"").trim();if(!e||e.length<2){g("Cidade da loja nÃ£o configurada para checkout.");return}const r=N==="retirada"?"RETIRADA NA LOJA":wr(I);if(N==="entrega"&&!r){g("Informe o endereÃ§o de entrega.");return}Xe(!0),g(""),S(""),we(null);try{const c=(await w.post("/api/checkout/finalizar",{cidade_destino:e,endereco_entrega:r||null,cupom:(F==null?void 0:F.codigo)||null,tipo_retirada:N==="retirada"?ce:null,forma_pagamento_nome:R==="dinheiro"?Ce?`Dinheiro (troco p/ R$ ${Ce})`:"Dinheiro":R==="pix"?"PIX":R==="debito"?`DÃ©bito ${pe}`:R==="credito"?`CrÃ©dito ${pe} ${ze}x`:null},{headers:{...T,"Idempotency-Key":kr()}})).data;if(we(c),jr(c,f),E({pedido_id:null,itens:[],subtotal:0,total:0}),fe(null),_e(null),oo(""),N==="entrega"&&localStorage.setItem(De,JSON.stringify(I)),c!=null&&c.pedido_id){const u=Array.from(new Set([c.pedido_id,...ao]));to(u),localStorage.setItem(Pe,JSON.stringify(u)),await Fe()}S("Pedido finalizado com sucesso."),x("pedidos")}catch(s){g(C(s,"Erro ao finalizar checkout"))}finally{Xe(!1)}}async function Fe(){var e;if(v){co(!0);try{const r=await w.get("/api/checkout/pedidos",{headers:T,params:{limit:20}}),s=Array.isArray((e=r==null?void 0:r.data)==null?void 0:e.pedidos)?r.data.pedidos:[];if(lo(s),s.length){const c=s.map(z=>z==null?void 0:z.pedido_id).filter(Boolean),u=Array.from(new Set([...c,...ao]));to(u),localStorage.setItem(Pe,JSON.stringify(u))}}catch(r){lo([]),g(C(r,"Erro ao carregar detalhes dos pedidos"))}finally{co(!1)}}}l.useEffect(()=>{!v||p!=="pedidos"||Fe()},[p,v]);const he=Number((f==null?void 0:f.total)||0);function So(){var e;if(!((e=f==null?void 0:f.itens)!=null&&e.length)){g("Adicione itens no carrinho antes de finalizar.");return}if(!v){g("FaÃ§a login para finalizar o pedido."),x("conta");return}if(!X){g("Complete seu cadastro (nome completo, telefone, CPF e endereÃ§o) antes de finalizar."),x("conta");return}x("checkout"),br(f)}function Le(e){const r=Y(e);Ke(e),io(r[0]||""),d(`${n.pathname}?produto=${e.id}`,{replace:!0}),yr(e)}function me(){Ke(null),d(n.pathname,{replace:!0})}l.useEffect(()=>{if(!y)return;function e(r){r.key==="Escape"&&me()}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y]),l.useEffect(()=>{if(!A.length)return;const r=new URLSearchParams(n.search).get("produto");if(!r||y)return;const s=A.find(c=>String(c.id)===String(r));s&&Le(s)},[A.length,n.search]);const t={page:{minHeight:"100vh",background:"#fafbff",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},topbar:{background:"linear-gradient(90deg,#6366f1 0%,#8b5cf6 100%)",color:"#fff",textAlign:"center",padding:"8px 20px",fontSize:12,fontWeight:500,letterSpacing:.2},header:{background:"#fff",borderBottom:"1px solid #e5e7eb",padding:"12px 20px",position:"sticky",top:0,zIndex:40,boxShadow:"0 1px 8px rgba(0,0,0,0.07)"},headerInner:{maxWidth:1280,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},logo:{fontFamily:"'Fredoka', sans-serif",fontSize:22,fontWeight:700,color:"#6366f1",display:"flex",alignItems:"center",gap:8,cursor:"pointer",userSelect:"none"},cityChip:{fontSize:11,color:"#9ca3af",borderLeft:"1px solid #e5e7eb",paddingLeft:12,fontWeight:400},headerActions:{display:"flex",gap:10,alignItems:"center"},avatarBtn:{background:"#f0f0ff",border:"1px solid #c7d2fe",borderRadius:24,padding:"7px 14px",fontSize:13,fontWeight:600,color:"#4f46e5",display:"flex",alignItems:"center",gap:6,cursor:"pointer"},loginBtn:{background:"#fff",border:"1.5px solid #d1d5db",color:"#374151",borderRadius:24,padding:"7px 16px",fontSize:13,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:6},cartBtn:{background:"#6366f1",color:"#fff",border:"none",borderRadius:12,width:42,height:42,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},cartBadge:{position:"absolute",top:-5,right:-5,background:"#ef4444",color:"#fff",borderRadius:20,minWidth:18,height:18,fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",padding:"0 3px"},floatBar:{position:"sticky",top:0,zIndex:45,background:"#4f46e5",color:"#fff",padding:"10px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},navWrap:{background:"#fff",borderBottom:"2px solid #f1f5f9"},navInner:{maxWidth:1280,margin:"0 auto",display:"flex",padding:"0 20px"},navTab:e=>({flex:"0 0 auto",background:"transparent",border:"none",borderBottom:e?"3px solid #6366f1":"3px solid transparent",color:e?"#4f46e5":"#6b7280",padding:"13px 18px",fontWeight:e?700:500,fontSize:14,cursor:"pointer",transition:"all 0.15s",marginBottom:-2}),bannerWrap:{position:"relative",overflow:"hidden",height:320,background:"#1a1a2e"},bannerDots:{position:"absolute",bottom:14,left:"50%",transform:"translateX(-50%)",display:"flex",gap:6},bannerDot:e=>({width:e?26:9,height:9,background:e?"#fff":"rgba(255,255,255,0.4)",borderRadius:5,border:"none",cursor:"pointer",padding:0,transition:"all 0.3s"}),alertError:{background:"#fef2f2",color:"#b91c1c",border:"1px solid #fecaca",borderRadius:10,padding:"10px 14px",fontSize:13,margin:"12px 20px"},alertSuccess:{background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:10,padding:"10px 14px",fontSize:13,margin:"12px 20px"},main:{maxWidth:1280,margin:"0 auto",padding:"24px 20px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16},card:e=>({border:"1px solid #f0f0f0",borderRadius:14,background:"#fff",cursor:"pointer",display:"flex",flexDirection:"column",overflow:"hidden",transition:"all 0.2s",boxShadow:e?"0 10px 32px rgba(99,102,241,0.15)":"0 1px 4px rgba(0,0,0,0.05)",transform:e?"translateY(-5px)":"none"}),cardImgWrap:{aspectRatio:"1/1",background:"#f8f8ff",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},cardBody:{padding:"12px 14px 14px",display:"flex",flexDirection:"column",gap:4,flex:1},cardName:{fontSize:13,fontWeight:600,lineHeight:1.4,color:"#111827",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},cardCat:{fontSize:11,color:"#9ca3af",fontWeight:500},cardSku:{fontSize:10,color:"#c4c4d4",letterSpacing:.3},cardStock:e=>({fontSize:11,fontWeight:600,color:e?"#d97706":"#059669"}),cardPrice:{fontSize:19,fontWeight:800,color:"#1a1a2e",letterSpacing:-.5,marginTop:"auto",paddingTop:6},addBtn:e=>({background:e?"#f3f4f6":"linear-gradient(135deg,#6366f1,#8b5cf6)",border:"none",color:e?"#9ca3af":"#fff",borderRadius:9,padding:"10px 0",fontWeight:700,fontSize:13,cursor:e?"not-allowed":"pointer",width:"100%",marginTop:6,transition:"opacity 0.15s",boxShadow:e?"none":"0 2px 8px rgba(99,102,241,0.3)"}),notifyBtn:{background:"#fff",border:"1.5px solid #f59e0b",color:"#b45309",borderRadius:9,padding:"8px 0",fontWeight:600,fontSize:12,cursor:"pointer",width:"100%",marginTop:6},wishBtn:{position:"absolute",top:8,right:8,background:"#fff",border:"none",borderRadius:"50%",width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.12)",fontSize:14},unavailBadge:{position:"absolute",top:8,left:8,background:"#fef3c7",color:"#92400e",borderRadius:6,padding:"3px 8px",fontSize:10,fontWeight:700},sidebar:{background:"#fff",borderRadius:16,border:"1px solid #eef0ff",padding:20,alignSelf:"start",position:"sticky",top:80,boxShadow:"0 2px 20px rgba(99,102,241,0.07)"},sidebarTitle:{margin:"0 0 14px",fontSize:15,fontWeight:700,color:"#1a1a2e",display:"flex",alignItems:"center",justifyContent:"space-between"},sidebarBadge:{background:"#6366f1",color:"#fff",borderRadius:20,padding:"2px 9px",fontSize:11,fontWeight:700},miniItem:{display:"flex",gap:8,alignItems:"center",borderBottom:"1px solid #f5f5fc",paddingBottom:8,marginBottom:4},miniImg:{width:42,height:42,borderRadius:8,background:"#f8f8ff",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #eef0ff"},subtotalBox:{background:"linear-gradient(135deg,#f0f0ff,#e8e8ff)",borderRadius:10,padding:"10px 12px",marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},checkoutBig:{background:"linear-gradient(135deg,#6366f1,#8b5cf6)",border:"none",color:"#fff",borderRadius:10,padding:"12px 0",fontWeight:700,fontSize:14,cursor:"pointer",width:"100%",marginTop:8,boxShadow:"0 4px 14px rgba(99,102,241,0.4)"},viewCartBtn:{background:"transparent",border:"2px solid #6366f1",color:"#6366f1",borderRadius:10,padding:"10px 0",fontWeight:700,fontSize:13,cursor:"pointer",width:"100%",marginTop:6},cartItem:{border:"1px solid #eef0ff",borderRadius:14,padding:"14px",display:"flex",gap:14,alignItems:"center",background:"#fff",boxShadow:"0 1px 6px rgba(0,0,0,0.04)"},cartItemImg:{width:80,height:80,borderRadius:10,background:"#f8fafc",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #eef0ff"},qtyBtn:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},removeBtn:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:12,padding:"4px 8px"},cartTotalRow:{border:"1px solid #eef0ff",borderRadius:12,padding:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},formCard:{background:"#fff",borderRadius:14,border:"1px solid #eef0ff",padding:"20px 24px",boxShadow:"0 1px 8px rgba(0,0,0,0.04)"},formLabel:{fontSize:12,fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:.5,marginBottom:4,display:"block"},formInput:{width:"100%",padding:"10px 12px",border:"1.5px solid #e5e7eb",borderRadius:9,fontSize:14,background:"#fafbff",outline:"none",boxSizing:"border-box",transition:"border-color 0.15s"},radioLabel:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,padding:"10px 14px",borderRadius:10,border:"1.5px solid #e5e7eb",background:"#fafbff",fontWeight:500},radioLabelActive:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,padding:"10px 14px",borderRadius:10,border:"1.5px solid #6366f1",background:"#eef2ff",fontWeight:600,color:"#4f46e5"},payBtn:e=>({padding:"10px 16px",borderRadius:10,border:e?"2px solid #6366f1":"2px solid #e5e7eb",background:e?"#eef2ff":"#fff",color:e?"#4f46e5":"#374151",fontWeight:e?700:500,cursor:"pointer",fontSize:14,display:"flex",alignItems:"center",gap:6}),resumoBox:{background:"linear-gradient(135deg,#f8f8ff,#eff0ff)",border:"1px solid #c7d2fe",borderRadius:12,padding:"14px 16px",display:"grid",gap:6},finalizarBtn:e=>({background:e?"#e5e7eb":"linear-gradient(135deg,#6366f1,#8b5cf6)",border:"none",color:e?"#9ca3af":"#fff",borderRadius:12,padding:"14px 0",fontWeight:700,fontSize:16,cursor:e?"not-allowed":"pointer",width:"100%",boxShadow:e?"none":"0 4px 14px rgba(99,102,241,0.4)"}),orderCard:{border:"1px solid #eef0ff",borderRadius:14,padding:"16px 20px",background:"#fff",boxShadow:"0 1px 6px rgba(0,0,0,0.04)",display:"grid",gap:10},statusBadge:e=>{const s={confirmado:{bg:"#dcfce7",color:"#166534"},pendente:{bg:"#fef9c3",color:"#854d0e"},cancelado:{bg:"#fee2e2",color:"#991b1b"}}[String(e).toLowerCase()]||{bg:"#f0f0f0",color:"#555"};return{background:s.bg,color:s.color,borderRadius:20,padding:"3px 10px",fontSize:11,fontWeight:700,display:"inline-flex",alignItems:"center",gap:4}},rewardBox:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:12,textAlign:"center"},accountCard:{background:"#fff",borderRadius:14,border:"1px solid #eef0ff",padding:"20px 24px",boxShadow:"0 1px 8px rgba(0,0,0,0.04)"},saveBtn:{background:"linear-gradient(135deg,#6366f1,#8b5cf6)",border:"none",color:"#fff",borderRadius:10,fontWeight:700,padding:"11px 24px",cursor:"pointer",fontSize:14},footer:{background:"#1a1a2e",color:"#9ca3af",padding:"32px 20px",marginTop:40}};return o.jsxs("div",{style:t.page,children:[o.jsx("div",{style:t.topbar,children:"ðŸ¾ Frete grÃ¡tis para compras acima de R$Â 199,00 Â |Â  Pedidos atÃ© 16h chegam no mesmo dia!"}),o.jsx("div",{style:t.header,children:o.jsxs("div",{style:t.headerInner,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[i!=null&&i.logo_url?o.jsx("img",{src:oe(i.logo_url),alt:ho,style:{height:44,maxWidth:160,objectFit:"contain"}}):o.jsxs("div",{style:t.logo,onClick:()=>x("loja"),children:[o.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8 18.5C8 19.9 7 21 5.5 21S3 19.9 3 18.5 4 16 5.5 16 8 17.1 8 18.5z"}),o.jsx("path",{d:"M21 16.5c0 1.4-1 2.5-2.5 2.5S16 17.9 16 16.5 17 14 18.5 14 21 15.1 21 16.5z"}),o.jsx("path",{d:"M5.5 7C5.5 5.6 6.5 4.5 8 4.5S10.5 5.6 10.5 7 9.5 9.5 8 9.5 5.5 8.4 5.5 7z"}),o.jsx("path",{d:"M13.5 7c0-1.4 1-2.5 2.5-2.5S18.5 5.6 18.5 7 17.5 9.5 16 9.5 13.5 8.4 13.5 7z"}),o.jsx("path",{d:"M12 20c-4 0-6-3-6-6 0-2.5 2-5 6-5s6 2.5 6 5c0 3-2 6-6 6z"})]}),ho]}),((i==null?void 0:i.cidade)||(i==null?void 0:i.uf))&&o.jsxs("span",{style:t.cityChip,children:["ðŸ“ ",(i==null?void 0:i.cidade)||"",i!=null&&i.uf?` - ${i.uf}`:""]})]}),o.jsx("div",{style:{flex:1,maxWidth:440,display:"flex"},className:"eco-search-wrap",children:o.jsxs("div",{style:{position:"relative",width:"100%"},children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"},children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("input",{value:D,onChange:e=>ie(e.target.value),placeholder:"Buscar produtos para o seu pet...",style:{...t.formInput,paddingLeft:36,borderRadius:24,fontSize:13}})]})}),o.jsxs("div",{style:t.headerActions,children:[Ae?o.jsxs("button",{onClick:()=>x("conta"),style:t.avatarBtn,children:[o.jsx("span",{style:{width:22,height:22,borderRadius:"50%",background:"#6366f1",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:800},children:Ae.charAt(0).toUpperCase()}),Ae.split(" ")[0]]}):o.jsxs("button",{onClick:()=>x("conta"),style:t.loginBtn,children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Entrar"]}),o.jsxs("button",{onClick:()=>x("carrinho"),style:t.cartBtn,children:[o.jsxs("svg",{width:"19",height:"19",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"21",r:"1"}),o.jsx("circle",{cx:"20",cy:"21",r:"1"}),o.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),((ko=f==null?void 0:f.itens)==null?void 0:ko.length)>0&&o.jsx("span",{style:t.cartBadge,children:f.itens.length})]})]})]})}),o.jsx("div",{style:t.navWrap,children:o.jsx("div",{style:t.navInner,children:[["loja","ðŸª Loja"],["carrinho",`ðŸ›’ Carrinho${(_o=f==null?void 0:f.itens)!=null&&_o.length?` (${f.itens.length})`:""}`],["pedidos","ðŸ“¦ Pedidos"],["conta","ðŸ‘¤ Conta"]].map(([e,r])=>o.jsx("button",{onClick:()=>x(e),style:t.navTab(p===e),children:r},e))})}),((wo=f==null?void 0:f.itens)==null?void 0:wo.length)>0&&p!=="carrinho"&&o.jsxs("div",{onClick:()=>x("carrinho"),style:t.floatBar,children:[o.jsxs("span",{style:{fontWeight:600,fontSize:13},children:["ðŸ›’ ",f.itens.length," item(ns) no carrinho"]}),o.jsxs("span",{style:{fontWeight:800,fontSize:13},children:[k(he)," â†’ Ver carrinho"]})]}),!W&&o.jsx("div",{style:{background:"#fef2f2",color:"#991b1b",padding:"10px 20px",fontSize:13,borderBottom:"1px solid #fecaca"},children:"âš ï¸ Use a URL no formato: /slug-da-loja"}),fo&&o.jsxs("div",{style:t.alertError,children:["âš ï¸ ",fo]}),po&&o.jsxs("div",{style:t.alertSuccess,children:["âœ“ ",po]}),p==="loja"&&o.jsxs("div",{style:t.bannerWrap,children:[ge.map((e,r)=>o.jsx("div",{style:{position:"absolute",inset:0,opacity:b===r?1:0,transition:"opacity 0.8s ease",pointerEvents:b===r?"auto":"none"},children:e.type==="image"?o.jsx("img",{src:oe(e.url),alt:`Banner ${r+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):o.jsxs("div",{style:{background:e.bg,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 48px",gap:24,height:"100%"},children:[o.jsx("span",{style:{fontSize:72,flexShrink:0,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.25))"},children:e.emoji}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"#fff",fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:34,lineHeight:1.2,textShadow:"0 2px 12px rgba(0,0,0,0.2)"},children:e.title}),o.jsx("div",{style:{color:"rgba(255,255,255,0.88)",fontSize:16,marginTop:8},children:e.sub}),o.jsx("button",{onClick:()=>x("loja"),style:{marginTop:16,background:"#fff",color:"#6366f1",border:"none",borderRadius:24,padding:"10px 24px",fontWeight:700,fontSize:14,cursor:"pointer"},children:"Ver produtos â†’"})]})]})},r)),o.jsx("div",{style:t.bannerDots,children:ge.map((e,r)=>o.jsx("button",{onClick:()=>Ye(r),style:t.bannerDot(b===r)},r))})]}),p==="loja"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 300px",gap:24,maxWidth:1280,margin:"0 auto",padding:"28px 20px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontFamily:"'Fredoka', sans-serif",fontSize:22,fontWeight:700,color:"#1a1a2e"},children:"ðŸ›ï¸ CatÃ¡logo"}),o.jsxs("p",{style:{margin:"4px 0 0",color:"#9ca3af",fontSize:13},children:[Q.length," produto",Q.length!==1?"s":""," encontrado",Q.length!==1?"s":""]})]})}),o.jsxs("div",{style:{display:"flex",gap:10,marginBottom:20,flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:1,minWidth:220,position:"relative"},children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"},children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("input",{value:D,onChange:e=>ie(e.target.value),placeholder:"O que seu pet precisa?",style:{...t.formInput,paddingLeft:36}})]}),o.jsx("select",{value:P,onChange:e=>je(e.target.value),style:{...t.formInput,width:"auto",paddingRight:30},children:Te.map(e=>o.jsx("option",{value:e,children:e==="todas"?"ðŸ¾ Todas as categorias":e},e))}),o.jsx("button",{onClick:mo,disabled:be,style:{padding:"10px 16px",border:"1.5px solid #e5e7eb",borderRadius:9,fontSize:13,fontWeight:600,background:"#fff",color:"#6366f1",cursor:"pointer"},children:be?"...":"â†º Atualizar"})]}),Te.length>2&&o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:20},children:Te.map(e=>o.jsx("button",{onClick:()=>je(e),style:{padding:"6px 14px",borderRadius:20,border:P===e?"1.5px solid #6366f1":"1.5px solid #e5e7eb",background:P===e?"#eef2ff":"#fff",color:P===e?"#4f46e5":"#6b7280",fontWeight:P===e?700:500,fontSize:12,cursor:"pointer",transition:"all 0.15s"},children:e==="todas"?"ðŸ¾ Todas":e},e))}),o.jsxs("div",{style:t.grid,children:[Q.map(e=>{const r=ee(e),s=ye(e),c=G.includes(e.id),u=Y(e)[0],z=$o===e.id;return o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Le(e),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),Le(e))},onMouseEnter:()=>He(e.id),onMouseLeave:()=>He(null),style:t.card(z),children:[o.jsxs("div",{style:t.cardImgWrap,children:[u?o.jsx("img",{src:u,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:12,background:"#fff"}}):o.jsxs("div",{style:{color:"#d1d5db",fontSize:12,display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("polyline",{points:"21 15 16 10 5 21"})]}),o.jsx("span",{children:"Sem imagem"})]}),s&&o.jsx("div",{style:t.unavailBadge,children:"IndisponÃ­vel"}),o.jsx("button",{onClick:_=>{_.stopPropagation(),bo(e.id)},title:c?"Remover da lista de desejos":"Adicionar Ã  lista de desejos",style:t.wishBtn,children:c?"â¤ï¸":"ðŸ¤"})]}),o.jsxs("div",{style:t.cardBody,children:[o.jsx("div",{style:t.cardName,children:e.nome}),o.jsx("div",{style:t.cardCat,children:(e==null?void 0:e.categoria_nome)||(e==null?void 0:e.categoria)||"Sem categoria"}),o.jsxs("div",{style:t.cardSku,children:["SKU: ",(e==null?void 0:e.codigo)||"-"]}),o.jsx("div",{style:t.cardStock(s),children:s?"âš ï¸ Volto em breve":Number.isFinite(r)?`âœ“ Em estoque: ${r}`:"âœ“ Em estoque"}),o.jsx("div",{style:t.cardPrice,children:k(Ne(e))}),o.jsx("button",{disabled:s,style:t.addBtn(s),onClick:_=>{_.stopPropagation(),vo(e)},children:s?"IndisponÃ­vel":"ðŸ›’ Adicionar"}),s&&o.jsx("button",{onClick:_=>{_.stopPropagation(),jo(e)},style:t.notifyBtn,children:"ðŸ”” Avise-me quando chegar"})]})]},e.id)}),!be&&Q.length===0&&o.jsxs("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"60px 0",color:"#9ca3af"},children:[o.jsx("div",{style:{fontSize:48,marginBottom:12},children:"ðŸ”"}),o.jsx("div",{style:{fontFamily:"'Fredoka', sans-serif",fontSize:18,fontWeight:600,color:"#374151"},children:"Nenhum produto encontrado"}),o.jsx("div",{style:{fontSize:13,marginTop:4},children:"Tente buscar por outro termo ou categoria"}),o.jsx("button",{onClick:()=>{ie(""),je("todas")},style:{marginTop:16,padding:"8px 20px",borderRadius:20,border:"1.5px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:13,fontWeight:600,color:"#6366f1"},children:"Limpar filtros"})]})]})]}),o.jsxs("aside",{style:t.sidebar,children:[o.jsxs("div",{style:t.sidebarTitle,children:[o.jsx("span",{children:"ðŸ›’ Seu carrinho"}),((zo=f==null?void 0:f.itens)==null?void 0:zo.length)>0&&o.jsx("span",{style:t.sidebarBadge,children:f.itens.length})]}),(Co=f==null?void 0:f.itens)!=null&&Co.length?o.jsxs("div",{style:{display:"grid",gap:8},children:[f.itens.slice(0,5).map(e=>{const r=uo[e.produto_id],s=r?Y(r)[0]:null;return o.jsxs("div",{style:t.miniItem,children:[o.jsx("div",{style:t.miniImg,children:s?o.jsx("img",{src:s,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:2}}):o.jsx("span",{style:{fontSize:16},children:"ðŸ“¦"})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:12,fontWeight:600,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#1a1a2e"},children:e.nome}),o.jsxs("div",{style:{fontSize:11,color:"#6366f1",fontWeight:600},children:[e.quantidade,"Ã— ",k(e.preco_unitario)]})]})]},e.item_id)}),f.itens.length>5&&o.jsxs("div",{style:{fontSize:12,color:"#9ca3af",textAlign:"center"},children:["+ ",f.itens.length-5," item(ns) a mais"]}),o.jsxs("div",{style:t.subtotalBox,children:[o.jsx("span",{style:{fontWeight:600,fontSize:14,color:"#374151"},children:"Subtotal"}),o.jsx("span",{style:{fontWeight:800,fontSize:17,color:"#1a1a2e"},children:k(he)})]}),o.jsx("button",{style:t.checkoutBig,onClick:So,children:"Finalizar compra â†’"}),o.jsx("button",{style:t.viewCartBtn,onClick:()=>x("carrinho"),children:"Ver / Editar carrinho"}),!v&&o.jsx("div",{style:{fontSize:11,color:"#9ca3af",textAlign:"center"},children:"ðŸ”’ Login solicitado apenas no fechamento"})]}):o.jsxs("div",{style:{color:"#c4c4d4",textAlign:"center",padding:"28px 0",fontSize:13},children:[o.jsx("div",{style:{fontSize:34,marginBottom:8},children:"ðŸ›’"}),o.jsx("div",{style:{fontWeight:600,color:"#9ca3af"},children:"Carrinho vazio"}),o.jsx("div",{style:{fontSize:12,marginTop:4},children:"Adicione produtos para comeÃ§ar"})]})]})]}),y&&o.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.65)",display:"flex",alignItems:"center",justifyContent:"center",padding:16,zIndex:60},onClick:()=>me(),children:o.jsxs("div",{style:{background:"#fff",width:"min(960px, 100%)",maxHeight:"90vh",overflowY:"auto",borderRadius:18,border:"1px solid #e5e7eb",boxShadow:"0 24px 80px rgba(0,0,0,0.2)",display:"grid",gridTemplateColumns:"1.1fr 1fr",gap:0},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:{background:"#f8f8ff",borderRadius:"18px 0 0 18px",padding:24,display:"flex",flexDirection:"column",gap:12},children:[o.jsx("div",{style:{borderRadius:12,background:"#fff",aspectRatio:"1/1",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #eef0ff"},children:Ie?o.jsx("img",{src:Ie,alt:y.nome,style:{width:"100%",height:"100%",objectFit:"contain"}}):o.jsx("span",{style:{color:"#9ca3af",fontSize:13},children:"Sem imagem disponÃ­vel"})}),Y(y).length>1&&o.jsx("div",{style:{display:"flex",gap:8,overflowX:"auto"},children:Y(y).map(e=>o.jsx("button",{onClick:()=>io(e),style:{border:Ie===e?"2.5px solid #6366f1":"1.5px solid #e5e7eb",borderRadius:10,width:70,height:70,overflow:"hidden",padding:0,background:"#fff",cursor:"pointer",flexShrink:0},children:o.jsx("img",{src:e,alt:"Miniatura",style:{width:"100%",height:"100%",objectFit:"contain"}})},e))})]}),o.jsxs("div",{style:{padding:28,display:"grid",alignContent:"start",gap:14},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:10},children:[o.jsx("h3",{style:{margin:0,fontFamily:"'Fredoka', sans-serif",fontSize:22,fontWeight:700,color:"#1a1a2e",lineHeight:1.3},children:y.nome}),o.jsx("button",{onClick:()=>me(),style:{background:"#f1f5f9",border:"none",borderRadius:8,width:34,height:34,cursor:"pointer",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"#6b7280"},children:"âœ•"})]}),o.jsx("div",{style:{fontSize:30,fontWeight:800,color:"#1a1a2e",letterSpacing:-1},children:k(Ne(y))}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,background:"#f8f8ff",borderRadius:10,padding:"12px 14px"},children:[o.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["Categoria: ",o.jsx("strong",{style:{color:"#1a1a2e"},children:(y==null?void 0:y.categoria_nome)||(y==null?void 0:y.categoria)||"Sem categoria"})]}),o.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["SKU: ",o.jsx("strong",{style:{color:"#1a1a2e",fontFamily:"monospace"},children:(y==null?void 0:y.codigo)||"-"})]}),o.jsx("div",{style:{fontSize:13,color:ye(y)?"#b45309":"#065f46"},children:ye(y)?"âš ï¸ Fora de estoque":`âœ“ Em estoque: ${Number.isFinite(ee(y))?ee(y):"DisponÃ­vel"}`})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4},children:[ye(y)?o.jsx("button",{onClick:()=>jo(y),style:{...t.notifyBtn,width:"auto",padding:"10px 20px",fontSize:13},children:"ðŸ”” Avise-me quando chegar"}):o.jsx("button",{onClick:()=>vo(y),style:{...t.addBtn(!1),width:"auto",padding:"12px 24px",fontSize:14},children:"ðŸ›’ Adicionar ao carrinho"}),o.jsx("button",{onClick:()=>bo(y.id),style:{background:"#fff",border:"1.5px solid #6366f1",color:"#6366f1",borderRadius:9,padding:"10px 16px",fontWeight:700,fontSize:13,cursor:"pointer"},children:G.includes(y.id)?"ðŸ’” Remover":"ðŸ¤ Salvar"}),o.jsx("button",{onClick:()=>{me(),x("carrinho")},style:{background:"#fff",border:"1.5px solid #e5e7eb",color:"#6b7280",borderRadius:9,padding:"10px 16px",fontWeight:500,fontSize:13,cursor:"pointer"},children:"Ver carrinho"})]}),o.jsx("button",{onClick:()=>{var r;const e=`${window.location.origin}${n.pathname}?produto=${y.id}`;(r=navigator.clipboard)==null||r.writeText(e).then(()=>S("Link copiado!")).catch(()=>S(`Link: ${e}`))},style:{background:"transparent",border:"1px solid #e5e7eb",color:"#9ca3af",borderRadius:8,padding:"8px 12px",cursor:"pointer",fontSize:12,justifySelf:"start"},children:"ðŸ”— Copiar link do produto"})]})]})}),p==="carrinho"&&o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"28px 16px",minHeight:200},children:[o.jsx("h2",{style:{margin:"0 0 20px",fontFamily:"'Fredoka', sans-serif",fontSize:26,fontWeight:700,color:"#1a1a2e"},children:"ðŸ›’ Meu Carrinho"}),Uo?o.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:40},children:"Carregando carrinho..."}):(Io=f==null?void 0:f.itens)!=null&&Io.length?o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:20,alignItems:"start"},children:[o.jsxs("div",{style:{display:"grid",gap:12},children:[f.itens.map(e=>{const r=uo[e.produto_id],s=r?Y(r)[0]:null;return o.jsxs("div",{style:t.cartItem,children:[o.jsx("div",{style:t.cartItemImg,children:s?o.jsx("img",{src:s,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:4}}):o.jsx("span",{style:{fontSize:28},children:"ðŸ“¦"})}),o.jsxs("div",{style:{flex:1,minWidth:0,display:"grid",gap:4},children:[o.jsx("div",{style:{fontWeight:700,fontSize:14,lineHeight:1.3,color:"#1a1a2e"},children:e.nome}),o.jsxs("div",{style:{fontSize:13,color:"#6366f1",fontWeight:700},children:[k(e.preco_unitario)," / un"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:4},children:[o.jsx("button",{onClick:()=>Ee(e.item_id,e.quantidade-1),style:t.qtyBtn,children:"âˆ’"}),o.jsx("span",{style:{fontWeight:700,fontSize:14,minWidth:26,textAlign:"center"},children:e.quantidade}),o.jsx("button",{onClick:()=>Ee(e.item_id,e.quantidade+1),style:t.qtyBtn,children:"+"}),o.jsx("button",{onClick:()=>Ee(e.item_id,0),style:t.removeBtn,children:"ðŸ—‘ Remover"})]})]}),o.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#1a1a2e",flexShrink:0},children:k(e.preco_unitario*e.quantidade)})]},e.item_id)}),o.jsxs("form",{onSubmit:lr,style:{display:"flex",gap:8,marginTop:4},children:[o.jsx("input",{value:ke,onChange:e=>oo(e.target.value),placeholder:"CÃ³digo de cupom",style:{...t.formInput,flex:1}}),o.jsx("button",{type:"submit",style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#374151",borderRadius:10,padding:"0 18px",fontWeight:600,fontSize:13,cursor:"pointer"},children:"Aplicar"})]}),F&&o.jsxs("div",{style:{fontSize:13,color:"#065f46",background:"#ecfdf5",borderRadius:8,padding:"8px 12px",fontWeight:600},children:["âœ“ Cupom ",F.codigo,": -",k(F.desconto)]})]}),o.jsxs("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:16,padding:20,boxShadow:"0 2px 12px rgba(99,102,241,0.07)"},children:[o.jsx("div",{style:{fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:16,color:"#1a1a2e",marginBottom:14},children:"Resumo do pedido"}),f.itens.map(e=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280",marginBottom:6},children:[o.jsxs("span",{children:[e.nome," Ã— ",e.quantidade]}),o.jsx("span",{children:k(e.preco_unitario*e.quantidade)})]},e.item_id)),o.jsxs("div",{style:t.cartTotalRow,children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:k(he)})]}),o.jsx("button",{onClick:So,style:{...t.checkoutBig,width:"100%",marginTop:14},children:"Ir para o checkout â†’"}),o.jsx("button",{onClick:()=>x("loja"),style:{width:"100%",marginTop:8,background:"transparent",border:"1.5px solid #e5e7eb",color:"#6b7280",borderRadius:10,padding:"10px 0",fontWeight:600,fontSize:13,cursor:"pointer"},children:"Continuar comprando"})]})]}):o.jsxs("div",{style:{textAlign:"center",padding:"48px 0",display:"grid",gap:12,justifyItems:"center"},children:[o.jsx("span",{style:{fontSize:52},children:"ðŸ›’"}),o.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#1a1a2e"},children:"Seu carrinho estÃ¡ vazio"}),o.jsx("div",{style:{fontSize:14,color:"#9ca3af"},children:"Explore nossa loja e adicione produtos!"}),o.jsx("button",{onClick:()=>x("loja"),style:{...t.checkoutBig,width:"auto",padding:"12px 28px"},children:"Ver produtos"})]})]}),p==="checkout"&&o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"28px 16px"},children:[o.jsx("h2",{style:{margin:"0 0 20px",fontFamily:"'Fredoka', sans-serif",fontSize:26,fontWeight:700,color:"#1a1a2e"},children:"ðŸ“‹ Checkout"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 360px",gap:20,alignItems:"start"},children:[o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsxs("div",{style:t.formCard,children:[o.jsx("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:12},children:"ðŸ“¦ Como quer receber?"}),o.jsxs("form",{onSubmit:cr,style:{display:"grid",gap:10},children:[o.jsx("div",{style:{display:"flex",gap:10},children:[{v:"entrega",l:"ðŸšš Entrega"},{v:"retirada",l:"ðŸª Retirada na loja"}].map(({v:e,l:r})=>o.jsxs("label",{style:N===e?t.radioLabelActive:t.radioLabel,children:[o.jsx("input",{type:"radio",name:"deliveryMode",value:e,checked:N===e,onChange:()=>Vo(e),style:{display:"none"}}),r]},e))}),N==="retirada"&&o.jsxs("div",{style:{background:"#f8f8ff",border:"1px solid #e0e7ff",borderRadius:10,padding:14,display:"grid",gap:8},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"Quem vai retirar?"}),[{v:"proprio",l:"ðŸ™‹ Eu mesmo(a)"},{v:"terceiro",l:"ðŸ¤ Outra pessoa por mim"}].map(({v:e,l:r})=>o.jsxs("label",{style:ce===e?t.radioLabelActive:t.radioLabel,children:[o.jsx("input",{type:"radio",name:"tipoRetirada",value:e,checked:ce===e,onChange:()=>Yo(e),style:{display:"none"}}),r]},e)),ce==="terceiro"&&o.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:8,padding:10,fontSize:12,color:"#92400e"},children:["â„¹ï¸ Uma ",o.jsx("strong",{children:"senha secreta de retirada"})," serÃ¡ gerada. Compartilhe com quem vai buscar."]})]}),o.jsx("input",{value:(i==null?void 0:i.cidade)||q,onChange:e=>ro(e.target.value),placeholder:"Cidade da loja",disabled:!!(i!=null&&i.cidade),style:{...t.formInput,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),N==="entrega"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{value:I.cep,onChange:e=>L(r=>({...r,cep:e.target.value})),onBlur:ir,placeholder:"CEP",style:t.formInput}),o.jsx("input",{value:I.endereco,onChange:e=>L(r=>({...r,endereco:e.target.value})),placeholder:"Rua / Avenida",style:t.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:I.numero,onChange:e=>L(r=>({...r,numero:e.target.value})),placeholder:"NÃºmero",style:t.formInput}),o.jsx("input",{value:I.complemento,onChange:e=>L(r=>({...r,complemento:e.target.value})),placeholder:"Complemento",style:t.formInput})]}),o.jsx("input",{value:I.bairro,onChange:e=>L(r=>({...r,bairro:e.target.value})),placeholder:"Bairro",style:t.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8},children:[o.jsx("input",{value:I.cidade||(i==null?void 0:i.cidade)||"",onChange:e=>L(r=>({...r,cidade:e.target.value})),placeholder:"Cidade",disabled:!!(i!=null&&i.cidade),style:{...t.formInput,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),o.jsx("input",{value:I.estado||(i==null?void 0:i.uf)||"",onChange:e=>L(r=>({...r,estado:e.target.value})),placeholder:"UF",style:t.formInput})]})]}),o.jsx("button",{type:"submit",style:t.payBtn(!0),children:"Calcular resumo"})]})]}),o.jsxs("div",{style:t.formCard,children:[o.jsx("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:12},children:"ðŸ’³ Como vai pagar?"}),(()=>{const e=[{key:"dinheiro",label:"Dinheiro",icon:"ðŸ’µ"},{key:"pix",label:"PIX",icon:"ðŸ“±"},{key:"debito",label:"DÃ©bito",icon:"ðŸ’³"},{key:"credito",label:"CrÃ©dito",icon:"ðŸ’³"}],r=["Visa","Mastercard","Elo","Outra"];return o.jsxs("div",{style:{display:"grid",gap:10},children:[o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:e.map(s=>o.jsxs("label",{style:R===s.key?t.radioLabelActive:t.radioLabel,children:[o.jsx("input",{type:"radio",name:"pagamentoTipo",value:s.key,checked:R===s.key,onChange:()=>{Ho(s.key),s.key!=="dinheiro"&&no("")},style:{display:"none"}}),s.icon," ",s.label]},s.key))}),R==="dinheiro"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13},children:[o.jsx("span",{style:{color:"#374151"},children:"Troco para R$"}),o.jsx("input",{type:"number",min:"0",placeholder:"Ex: 100",value:Ce,onChange:s=>no(s.target.value),style:{...t.formInput,width:110}})]}),(R==="debito"||R==="credito")&&o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:13,color:"#6b7280"},children:"Bandeira:"}),r.map(s=>o.jsxs("label",{style:pe===s?t.radioLabelActive:{...t.radioLabel,padding:"6px 12px",fontSize:12},children:[o.jsx("input",{type:"radio",checked:pe===s,onChange:()=>Ko(s),style:{display:"none"}})," ",s]},s))]}),R==="credito"&&o.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[o.jsx("span",{style:{fontSize:13,color:"#6b7280"},children:"Parcelas:"}),[1,2,3].map(s=>o.jsxs("label",{style:ze===s?t.radioLabelActive:{...t.radioLabel,padding:"6px 14px"},children:[o.jsx("input",{type:"radio",checked:ze===s,onChange:()=>Jo(s),style:{display:"none"}})," ",s,"x"]},s))]})]})})()]})]}),o.jsxs("div",{style:t.resumoBox,children:[o.jsx("div",{style:{fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:16,color:"#1a1a2e",marginBottom:14},children:"Resumo do pedido"}),B?o.jsxs("div",{style:{display:"grid",gap:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsxs("span",{children:["Itens (",B.itens_count,")"]}),o.jsx("span",{children:k(B.subtotal)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsx("span",{children:"Frete"}),o.jsx("span",{children:k((Bo=B==null?void 0:B.frete)==null?void 0:Bo.valor_frete)})]}),((Ro=B==null?void 0:B.cupom)==null?void 0:Ro.desconto)>0&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#065f46"},children:[o.jsx("span",{children:"Desconto"}),o.jsxs("span",{children:["-",k(B.cupom.desconto)]})]}),o.jsxs("div",{style:t.cartTotalRow,children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:k(B.total)})]})]}):(Wo=f==null?void 0:f.itens)!=null&&Wo.length?o.jsxs("div",{children:[f.itens.map(e=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280",marginBottom:6},children:[o.jsxs("span",{children:[e.nome," Ã— ",e.quantidade]}),o.jsx("span",{children:k(e.preco_unitario*e.quantidade)})]},e.item_id)),o.jsxs("div",{style:t.cartTotalRow,children:[o.jsx("span",{children:"Total estimado"}),o.jsx("span",{children:k(he)})]})]}):null,o.jsx("button",{onClick:fr,disabled:ve||!(i!=null&&i.cidade||q)||!((To=f==null?void 0:f.itens)!=null&&To.length)||!X,style:t.finalizarBtn(ve||!(i!=null&&i.cidade||q)||!((Ao=f==null?void 0:f.itens)!=null&&Ao.length)||!X),children:ve?"Finalizando...":"âœ“ Finalizar pedido"}),!X&&o.jsx("div",{style:{fontSize:12,color:"#b45309",background:"#fffbeb",borderRadius:8,padding:"8px 10px",marginTop:6},children:"âš ï¸ Complete seu cadastro (nome, telefone, CPF e endereÃ§o) na aba Conta para finalizar."}),(U==null?void 0:U.pedido_id)&&o.jsxs("div",{style:{background:"#ecfdf5",border:"1.5px solid #6ee7b7",borderRadius:12,padding:14,marginTop:8,display:"grid",gap:6},children:[o.jsx("div",{style:{fontWeight:700,color:"#065f46",fontSize:14},children:"âœ“ Pedido confirmado!"}),o.jsxs("div",{style:{fontSize:13,color:"#374151"},children:["NÃºmero: ",o.jsx("strong",{children:U.pedido_id})]}),U.palavra_chave_retirada&&o.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:12,textAlign:"center",marginTop:4},children:[o.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c2d12",marginBottom:4},children:"ðŸ”‘ SENHA DE RETIRADA"}),o.jsx("div",{style:{fontSize:24,fontWeight:800,letterSpacing:3,color:"#ea580c"},children:U.palavra_chave_retirada}),o.jsx("div",{style:{fontSize:11,color:"#92400e",marginTop:4},children:"Compartilhe com quem vai retirar"})]})]})]})]})]}),p==="pedidos"&&o.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:"28px 16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,flexWrap:"wrap",gap:10},children:[o.jsx("h2",{style:{margin:0,fontFamily:"'Fredoka', sans-serif",fontSize:26,fontWeight:700,color:"#1a1a2e"},children:"ðŸ“¦ Meus Pedidos"}),o.jsx("button",{onClick:Fe,disabled:Be,style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#374151",borderRadius:10,padding:"8px 16px",fontWeight:600,fontSize:13,cursor:"pointer"},children:Be?"Atualizando...":"â†» Atualizar"})]}),Be?o.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:40},children:"Carregando pedidos..."}):so.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"48px 0",display:"grid",gap:10,justifyItems:"center"},children:[o.jsx("span",{style:{fontSize:48},children:"ðŸ“‹"}),o.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#1a1a2e"},children:"Nenhum pedido ainda"}),o.jsx("div",{style:{fontSize:13,color:"#9ca3af"},children:"Seus pedidos aparecerÃ£o aqui apÃ³s a compra."}),o.jsx("button",{onClick:()=>x("loja"),style:{...t.checkoutBig,width:"auto",padding:"10px 24px"},children:"Ir Ã s compras"})]}):o.jsx("div",{style:{display:"grid",gap:14},children:so.map(e=>{const s={pendente:"#f59e0b",confirmado:"#3b82f6",enviado:"#8b5cf6",entregue:"#10b981",cancelado:"#ef4444"}[(e.status||"").toLowerCase()]||"#6b7280";return o.jsxs("div",{style:t.orderCard,children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,flexWrap:"wrap"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:700,fontSize:14,color:"#1a1a2e",marginBottom:2},children:["Pedido ",e.pedido_id]}),o.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:e.created_at?new Date(e.created_at).toLocaleString("pt-BR"):"-"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[o.jsx("span",{style:{...t.statusBadge(e.status),background:s+"20",color:s,border:`1px solid ${s}40`},children:e.status||"Pendente"}),o.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#1a1a2e"},children:k(e.total)})]})]}),e.palavra_chave_retirada&&o.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:10,textAlign:"center",marginTop:8},children:[o.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c2d12",marginBottom:2},children:"ðŸ”‘ SENHA DE RETIRADA"}),o.jsx("div",{style:{fontSize:20,fontWeight:800,letterSpacing:3,color:"#ea580c"},children:e.palavra_chave_retirada}),o.jsx("div",{style:{fontSize:10,color:"#92400e",marginTop:2},children:"Apresente na loja para retirar"})]}),Array.isArray(e.itens)&&e.itens.length>0&&o.jsx("div",{style:{marginTop:10,borderTop:"1px solid #f1f5f9",paddingTop:10,display:"grid",gap:6},children:e.itens.map((c,u)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsxs("span",{children:[c.nome||"Produto"," Ã— ",c.quantidade]}),o.jsx("span",{children:k(c.subtotal)})]},`${e.pedido_id}-${c.produto_id||u}`))}),e.data_pagamento&&o.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:["Pago em: ",Sr(e.data_pagamento)]})]},e.pedido_id)})})]}),p==="conta"&&o.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:"28px 16px"},children:[o.jsx("h2",{style:{margin:"0 0 20px",fontFamily:"'Fredoka', sans-serif",fontSize:26,fontWeight:700,color:"#1a1a2e"},children:"ðŸ‘¤ Minha Conta"}),v?o.jsx("div",{style:{display:"grid",gap:16},children:o.jsxs("div",{style:t.accountCard,children:[o.jsxs("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:4},children:["OlÃ¡, ",(a==null?void 0:a.nome)||m.nome||"cliente","! ðŸ‘‹"]}),o.jsxs("div",{style:{fontSize:13,color:"#9ca3af",marginBottom:14},children:[a==null?void 0:a.email," â€¢ Lista de desejos: ",G.length," â€¢ Avisos: ",Re.length]}),o.jsxs("form",{onSubmit:or,style:{display:"grid",gap:10},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151",marginBottom:2},children:"Dados pessoais"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:m.nome,onChange:e=>j(r=>({...r,nome:e.target.value})),placeholder:"Nome completo",style:t.formInput}),o.jsx("input",{value:(a==null?void 0:a.email)||"",disabled:!0,placeholder:"Email",style:{...t.formInput,background:"#f8fafc",color:"#9ca3af"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:m.telefone,onChange:e=>j(r=>({...r,telefone:e.target.value})),placeholder:"Telefone",style:t.formInput}),o.jsx("input",{value:m.cpf,onChange:e=>j(r=>({...r,cpf:e.target.value})),placeholder:"CPF",style:t.formInput})]}),o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151",marginTop:6,marginBottom:2},children:"EndereÃ§o principal"}),o.jsx("input",{value:m.cep,onChange:e=>j(r=>({...r,cep:e.target.value})),onBlur:rr,placeholder:"CEP",style:t.formInput}),o.jsx("input",{value:m.endereco,onChange:e=>j(r=>({...r,endereco:e.target.value})),placeholder:"Rua / Avenida",style:t.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr",gap:8},children:[o.jsx("input",{value:m.numero,onChange:e=>j(r=>({...r,numero:e.target.value})),placeholder:"NÃºmero",style:t.formInput}),o.jsx("input",{value:m.complemento,onChange:e=>j(r=>({...r,complemento:e.target.value})),placeholder:"Complemento",style:t.formInput})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 100px",gap:8},children:[o.jsx("input",{value:m.bairro,onChange:e=>j(r=>({...r,bairro:e.target.value})),placeholder:"Bairro",style:t.formInput}),o.jsx("input",{value:m.cidade,onChange:e=>j(r=>({...r,cidade:e.target.value})),placeholder:"Cidade",style:t.formInput}),o.jsx("input",{value:m.estado,onChange:e=>j(r=>({...r,estado:e.target.value})),placeholder:"UF",style:t.formInput})]}),o.jsx("button",{type:"button",onClick:()=>j(e=>({...e,usar_endereco_entrega_diferente:!e.usar_endereco_entrega_diferente})),style:{justifySelf:"start",background:"transparent",border:"1.5px solid #e5e7eb",color:"#6366f1",borderRadius:8,padding:"8px 14px",fontWeight:600,fontSize:13,cursor:"pointer"},children:m.usar_endereco_entrega_diferente?"âˆ’ Remover endereÃ§o alternativo":"+ Adicionar endereÃ§o de entrega diferente"}),m.usar_endereco_entrega_diferente&&o.jsxs("div",{style:{display:"grid",gap:8,background:"#f8f8ff",border:"1px solid #e0e7ff",borderRadius:12,padding:14},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"EndereÃ§o de entrega alternativo"}),o.jsx("input",{value:m.entrega_nome,onChange:e=>j(r=>({...r,entrega_nome:e.target.value})),placeholder:"Nome para entrega",style:t.formInput}),o.jsx("input",{value:m.entrega_cep,onChange:e=>j(r=>({...r,entrega_cep:e.target.value})),onBlur:nr,placeholder:"CEP",style:t.formInput}),o.jsx("input",{value:m.entrega_endereco,onChange:e=>j(r=>({...r,entrega_endereco:e.target.value})),placeholder:"Rua / Avenida",style:t.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr",gap:8},children:[o.jsx("input",{value:m.entrega_numero,onChange:e=>j(r=>({...r,entrega_numero:e.target.value})),placeholder:"NÃºmero",style:t.formInput}),o.jsx("input",{value:m.entrega_complemento,onChange:e=>j(r=>({...r,entrega_complemento:e.target.value})),placeholder:"Complemento",style:t.formInput})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 100px",gap:8},children:[o.jsx("input",{value:m.entrega_bairro,onChange:e=>j(r=>({...r,entrega_bairro:e.target.value})),placeholder:"Bairro",style:t.formInput}),o.jsx("input",{value:m.entrega_cidade,onChange:e=>j(r=>({...r,entrega_cidade:e.target.value})),placeholder:"Cidade",style:t.formInput}),o.jsx("input",{value:m.entrega_estado,onChange:e=>j(r=>({...r,entrega_estado:e.target.value})),placeholder:"UF",style:t.formInput})]})]}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("button",{type:"submit",disabled:Ze,style:t.saveBtn,children:Ze?"Salvando...":"âœ“ Salvar cadastro"}),o.jsx("button",{type:"button",onClick:sr,style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#ef4444",borderRadius:10,padding:"10px 20px",fontWeight:600,fontSize:14,cursor:"pointer"},children:"Sair da conta"})]})]})]})}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[o.jsxs("div",{style:t.accountCard,children:[o.jsx("div",{style:{fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:20,color:"#1a1a2e",marginBottom:14},children:"Criar conta"}),o.jsxs("form",{onSubmit:ar,autoComplete:"off",style:{display:"grid",gap:10},children:[o.jsx("input",{name:"ecommerce_register_nome",autoComplete:"off",value:J.nome,onChange:e=>de(r=>({...r,nome:e.target.value})),placeholder:"Nome completo",style:t.formInput}),o.jsx("input",{name:"ecommerce_register_email",autoComplete:"off",value:J.email,onChange:e=>de(r=>({...r,email:e.target.value})),placeholder:"Email",type:"email",style:t.formInput}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{name:"ecommerce_register_password",autoComplete:"new-password",value:J.password,onChange:e=>de(r=>({...r,password:e.target.value})),placeholder:"Senha",type:Je?"text":"password",style:{...t.formInput,paddingRight:80,width:"100%",boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>Do(e=>!e),style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#6b7280"},children:Je?"Ocultar":"ðŸ‘ Ver"})]}),o.jsx("button",{type:"submit",disabled:ae,style:t.saveBtn,children:ae?"Criando...":"Criar minha conta"})]})]}),o.jsxs("div",{style:t.accountCard,children:[o.jsx("div",{style:{fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:20,color:"#1a1a2e",marginBottom:14},children:"Entrar"}),o.jsxs("form",{onSubmit:tr,autoComplete:"off",style:{display:"grid",gap:10},children:[o.jsx("input",{name:"ecommerce_login_email",autoComplete:"off",value:le.email,onChange:e=>Se(r=>({...r,email:e.target.value})),placeholder:"Email",type:"email",style:t.formInput}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{name:"ecommerce_login_password",autoComplete:"new-password",value:le.password,onChange:e=>Se(r=>({...r,password:e.target.value})),placeholder:"Senha",type:Ge?"text":"password",style:{...t.formInput,paddingRight:80,width:"100%",boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>Oo(e=>!e),style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#6b7280"},children:Ge?"Ocultar":"ðŸ‘ Ver"})]}),o.jsx("button",{type:"submit",disabled:ae,style:t.saveBtn,children:ae?"Entrando...":"Entrar"})]})]})]})]}),M.open&&o.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:16},onClick:()=>$({open:!1,product:null,email:"",loading:!1}),children:o.jsxs("div",{style:{background:"#fff",borderRadius:18,padding:28,maxWidth:380,width:"100%",boxShadow:"0 24px 80px rgba(0,0,0,0.25)",border:"1px solid #e5e7eb"},onClick:e=>e.stopPropagation(),children:[o.jsx("div",{style:{fontSize:32,marginBottom:8},children:"ðŸ””"}),o.jsx("h3",{style:{margin:"0 0 8px",fontSize:18,fontWeight:700,color:"#1a1a2e",fontFamily:"'Fredoka', sans-serif"},children:"Avise-me quando chegar"}),o.jsxs("p",{style:{margin:"0 0 18px",fontSize:14,color:"#6b7280"},children:[o.jsx("strong",{children:(Eo=M.product)==null?void 0:Eo.nome})," estÃ¡ sem estoque agora. Informe seu email e te avisamos quando voltar!"]}),o.jsxs("form",{onSubmit:dr,style:{display:"flex",flexDirection:"column",gap:12},children:[o.jsx("input",{type:"email",required:!0,placeholder:"seu@email.com",value:M.email,autoFocus:!0,onChange:e=>$(r=>({...r,email:e.target.value})),style:t.formInput}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",onClick:()=>$({open:!1,product:null,email:"",loading:!1}),style:{flex:1,padding:"10px 0",borderRadius:10,border:"1.5px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:M.loading,style:{flex:2,padding:"10px 0",borderRadius:10,border:"none",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",fontSize:14,fontWeight:700,cursor:"pointer",opacity:M.loading?.7:1},children:M.loading?"Registrandoâ€¦":"ðŸ”” Me avise!"})]})]})]})}),o.jsxs("footer",{style:t.footer,children:[o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:28},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontFamily:"'Fredoka', sans-serif",fontWeight:700,fontSize:20,color:"#fff",marginBottom:8},children:["ðŸ¾ ",(i==null?void 0:i.nome_fantasia)||(i==null?void 0:i.nome)||"Pet Store"]}),o.jsx("div",{style:{fontSize:13,color:"rgba(255,255,255,0.65)",lineHeight:1.6},children:"Produtos de qualidade para o seu pet com carinho e dedicaÃ§Ã£o. Compre online com facilidade!"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:13,fontWeight:700,color:"rgba(255,255,255,0.85)",marginBottom:10,textTransform:"uppercase",letterSpacing:1},children:"NavegaÃ§Ã£o"}),[{l:"ðŸ›ï¸ Loja",v:"loja"},{l:"ðŸ›’ Carrinho",v:"carrinho"},{l:"ðŸ“¦ Pedidos",v:"pedidos"},{l:"ðŸ‘¤ Conta",v:"conta"}].map(({l:e,v:r})=>o.jsx("button",{onClick:()=>x(r),style:{display:"block",background:"none",border:"none",color:"rgba(255,255,255,0.65)",fontSize:13,cursor:"pointer",padding:"3px 0",textAlign:"left"},children:e},r))]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:13,fontWeight:700,color:"rgba(255,255,255,0.85)",marginBottom:10,textTransform:"uppercase",letterSpacing:1},children:"Contato"}),(i==null?void 0:i.whatsapp)&&o.jsx("a",{href:`https://wa.me/55${i.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noreferrer",style:{display:"block",color:"rgba(255,255,255,0.65)",fontSize:13,textDecoration:"none",marginBottom:4},children:"ðŸ“± WhatsApp"}),(i==null?void 0:i.email)&&o.jsxs("a",{href:`mailto:${i.email}`,style:{display:"block",color:"rgba(255,255,255,0.65)",fontSize:13,textDecoration:"none"},children:["âœ‰ï¸ ",i.email]}),(i==null?void 0:i.cidade)&&o.jsxs("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:12,marginTop:8},children:["ðŸ“ ",i.cidade,i.uf?`, ${i.uf}`:""]})]})]}),o.jsxs("div",{style:{maxWidth:1100,margin:"20px auto 0",paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:12,color:"rgba(255,255,255,0.4)",textAlign:"center"},children:["Â© ",new Date().getFullYear()," ",(i==null?void 0:i.nome_fantasia)||(i==null?void 0:i.nome)||"Pet Store",". Todos os direitos reservados."]})]})]})}export{Tr as default};
