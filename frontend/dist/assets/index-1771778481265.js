function t7(t,r){for(var a=0;a<r.length;a++){const s=r[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z6={exports:{}},Wf={},q6={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=Symbol.for("react.element"),r7=Symbol.for("react.portal"),a7=Symbol.for("react.fragment"),s7=Symbol.for("react.strict_mode"),n7=Symbol.for("react.profiler"),o7=Symbol.for("react.provider"),i7=Symbol.for("react.context"),l7=Symbol.for("react.forward_ref"),c7=Symbol.for("react.suspense"),d7=Symbol.for("react.memo"),u7=Symbol.for("react.lazy"),Lw=Symbol.iterator;function m7(t){return t===null||typeof t!="object"?null:(t=Lw&&t[Lw]||t["@@iterator"],typeof t=="function"?t:null)}var V6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U6=Object.assign,W6={};function eu(t,r,a){this.props=t,this.context=r,this.refs=W6,this.updater=a||V6}eu.prototype.isReactComponent={};eu.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H6(){}H6.prototype=eu.prototype;function P1(t,r,a){this.props=t,this.context=r,this.refs=W6,this.updater=a||V6}var T1=P1.prototype=new H6;T1.constructor=P1;U6(T1,eu.prototype);T1.isPureReactComponent=!0;var Bw=Array.isArray,K6=Object.prototype.hasOwnProperty,O1={current:null},G6={key:!0,ref:!0,__self:!0,__source:!0};function X6(t,r,a){var s,n={},o=null,i=null;if(r!=null)for(s in r.ref!==void 0&&(i=r.ref),r.key!==void 0&&(o=""+r.key),r)K6.call(r,s)&&!G6.hasOwnProperty(s)&&(n[s]=r[s]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:qx,type:t,key:o,ref:i,props:n,_owner:O1.current}}function x7(t,r){return{$$typeof:qx,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function F1(t){return typeof t=="object"&&t!==null&&t.$$typeof===qx}function p7(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return r[a]})}var zw=/\/+/g;function bb(t,r){return typeof t=="object"&&t!==null&&t.key!=null?p7(""+t.key):r.toString(36)}function fp(t,r,a,s,n){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case qx:case r7:i=!0}}if(i)return i=t,n=n(i),t=s===""?"."+bb(i,0):s,Bw(n)?(a="",t!=null&&(a=t.replace(zw,"$&/")+"/"),fp(n,r,a,"",function(d){return d})):n!=null&&(F1(n)&&(n=x7(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(zw,"$&/")+"/")+t)),r.push(n)),1;if(i=0,s=s===""?".":s+":",Bw(t))for(var l=0;l<t.length;l++){o=t[l];var c=s+bb(o,l);i+=fp(o,r,a,c,n)}else if(c=m7(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=s+bb(o,l++),i+=fp(o,r,a,c,n);else if(o==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return i}function N0(t,r,a){if(t==null)return t;var s=[],n=0;return fp(t,s,"","",function(o){return r.call(a,o,n++)}),s}function h7(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var ns={current:null},gp={transition:null},f7={ReactCurrentDispatcher:ns,ReactCurrentBatchConfig:gp,ReactCurrentOwner:O1};function Y6(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:N0,forEach:function(t,r,a){N0(t,function(){r.apply(this,arguments)},a)},count:function(t){var r=0;return N0(t,function(){r++}),r},toArray:function(t){return N0(t,function(r){return r})||[]},only:function(t){if(!F1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wt.Component=eu;Wt.Fragment=a7;Wt.Profiler=n7;Wt.PureComponent=P1;Wt.StrictMode=s7;Wt.Suspense=c7;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f7;Wt.act=Y6;Wt.cloneElement=function(t,r,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=U6({},t.props),n=t.key,o=t.ref,i=t._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,i=O1.current),r.key!==void 0&&(n=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in r)K6.call(r,c)&&!G6.hasOwnProperty(c)&&(s[c]=r[c]===void 0&&l!==void 0?l[c]:r[c])}var c=arguments.length-2;if(c===1)s.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:qx,type:t.type,key:n,ref:o,props:s,_owner:i}};Wt.createContext=function(t){return t={$$typeof:i7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o7,_context:t},t.Consumer=t};Wt.createElement=X6;Wt.createFactory=function(t){var r=X6.bind(null,t);return r.type=t,r};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(t){return{$$typeof:l7,render:t}};Wt.isValidElement=F1;Wt.lazy=function(t){return{$$typeof:u7,_payload:{_status:-1,_result:t},_init:h7}};Wt.memo=function(t,r){return{$$typeof:d7,type:t,compare:r===void 0?null:r}};Wt.startTransition=function(t){var r=gp.transition;gp.transition={};try{t()}finally{gp.transition=r}};Wt.unstable_act=Y6;Wt.useCallback=function(t,r){return ns.current.useCallback(t,r)};Wt.useContext=function(t){return ns.current.useContext(t)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(t){return ns.current.useDeferredValue(t)};Wt.useEffect=function(t,r){return ns.current.useEffect(t,r)};Wt.useId=function(){return ns.current.useId()};Wt.useImperativeHandle=function(t,r,a){return ns.current.useImperativeHandle(t,r,a)};Wt.useInsertionEffect=function(t,r){return ns.current.useInsertionEffect(t,r)};Wt.useLayoutEffect=function(t,r){return ns.current.useLayoutEffect(t,r)};Wt.useMemo=function(t,r){return ns.current.useMemo(t,r)};Wt.useReducer=function(t,r,a){return ns.current.useReducer(t,r,a)};Wt.useRef=function(t){return ns.current.useRef(t)};Wt.useState=function(t){return ns.current.useState(t)};Wt.useSyncExternalStore=function(t,r,a){return ns.current.useSyncExternalStore(t,r,a)};Wt.useTransition=function(){return ns.current.useTransition()};Wt.version="18.3.1";q6.exports=Wt;var j=q6.exports;const pe=mr(j),g7=t7({__proto__:null,default:pe},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b7=j,v7=Symbol.for("react.element"),y7=Symbol.for("react.fragment"),j7=Object.prototype.hasOwnProperty,N7=b7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w7={key:!0,ref:!0,__self:!0,__source:!0};function Q6(t,r,a){var s,n={},o=null,i=null;a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(i=r.ref);for(s in r)j7.call(r,s)&&!w7.hasOwnProperty(s)&&(n[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:v7,type:t,key:o,ref:i,props:n,_owner:N7.current}}Wf.Fragment=y7;Wf.jsx=Q6;Wf.jsxs=Q6;z6.exports=Wf;var e=z6.exports,Iv={},J6={exports:{}},Bs={},Z6={exports:{}},e5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(D,W){var R=D.length;D.push(W);e:for(;0<R;){var B=R-1>>>1,O=D[B];if(0<n(O,W))D[B]=W,D[R]=O,R=B;else break e}}function a(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var W=D[0],R=D.pop();if(R!==W){D[0]=R;e:for(var B=0,O=D.length,L=O>>>1;B<L;){var E=2*(B+1)-1,M=D[E],z=E+1,le=D[z];if(0>n(M,R))z<O&&0>n(le,M)?(D[B]=le,D[z]=R,B=z):(D[B]=M,D[E]=R,B=E);else if(z<O&&0>n(le,R))D[B]=le,D[z]=R,B=z;else break e}}return W}function n(D,W){var R=D.sortIndex-W.sortIndex;return R!==0?R:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,x=3,h=!1,b=!1,p=!1,f=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var W=a(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=D)s(d),W.sortIndex=W.expirationTime,r(c,W);else break;W=a(d)}}function N(D){if(p=!1,y(D),!b)if(a(c)!==null)b=!0,I(_);else{var W=a(d);W!==null&&Y(N,W.startTime-D)}}function _(D,W){b=!1,p&&(p=!1,v(C),C=-1),h=!0;var R=x;try{for(y(W),m=a(c);m!==null&&(!(m.expirationTime>W)||D&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,x=m.priorityLevel;var O=B(m.expirationTime<=W);W=t.unstable_now(),typeof O=="function"?m.callback=O:m===a(c)&&s(c),y(W)}else s(c);m=a(c)}if(m!==null)var L=!0;else{var E=a(d);E!==null&&Y(N,E.startTime-W),L=!1}return L}finally{m=null,x=R,h=!1}}var w=!1,S=null,C=-1,k=5,F=-1;function q(){return!(t.unstable_now()-F<k)}function A(){if(S!==null){var D=t.unstable_now();F=D;var W=!0;try{W=S(!0,D)}finally{W?T():(w=!1,S=null)}}else w=!1}var T;if(typeof g=="function")T=function(){g(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,K=U.port2;U.port1.onmessage=A,T=function(){K.postMessage(null)}}else T=function(){f(A,0)};function I(D){S=D,w||(w=!0,T())}function Y(D,W){C=f(function(){D(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){b||h||(b=!0,I(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(D){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var R=x;x=W;try{return D()}finally{x=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=x;x=D;try{return W()}finally{x=R}},t.unstable_scheduleCallback=function(D,W,R){var B=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?B+R:B):R=B,D){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=R+O,D={id:u++,callback:W,priorityLevel:D,startTime:R,expirationTime:O,sortIndex:-1},R>B?(D.sortIndex=R,r(d,D),a(c)===null&&D===a(d)&&(p?(v(C),C=-1):p=!0,Y(N,R-B))):(D.sortIndex=O,r(c,D),b||h||(b=!0,I(_))),D},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(D){var W=x;return function(){var R=x;x=W;try{return D.apply(this,arguments)}finally{x=R}}}})(e5);Z6.exports=e5;var _7=Z6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S7=j,Is=_7;function at(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t5=new Set,Cm={};function ec(t,r){xd(t,r),xd(t+"Capture",r)}function xd(t,r){for(Cm[t]=r,t=0;t<r.length;t++)t5.add(r[t])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lv=Object.prototype.hasOwnProperty,C7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qw={},Vw={};function k7(t){return Lv.call(Vw,t)?!0:Lv.call(qw,t)?!1:C7.test(t)?Vw[t]=!0:(qw[t]=!0,!1)}function E7(t,r,a,s){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return s?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A7(t,r,a,s){if(r===null||typeof r>"u"||E7(t,r,a,s))return!0;if(s)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function os(t,r,a,s,n,o,i){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=t,this.type=r,this.sanitizeURL=o,this.removeEmptyString=i}var Da={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Da[t]=new os(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Da[r]=new os(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Da[t]=new os(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Da[t]=new os(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Da[t]=new os(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Da[t]=new os(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Da[t]=new os(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Da[t]=new os(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Da[t]=new os(t,5,!1,t.toLowerCase(),null,!1,!1)});var R1=/[\-:]([a-z])/g;function $1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(R1,$1);Da[r]=new os(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(R1,$1);Da[r]=new os(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(R1,$1);Da[r]=new os(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Da[t]=new os(t,1,!1,t.toLowerCase(),null,!1,!1)});Da.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Da[t]=new os(t,1,!1,t.toLowerCase(),null,!0,!0)});function D1(t,r,a,s){var n=Da.hasOwnProperty(r)?Da[r]:null;(n!==null?n.type!==0:s||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(A7(r,a,n,s)&&(a=null),s||n===null?k7(r)&&(a===null?t.removeAttribute(r):t.setAttribute(r,""+a)):n.mustUseProperty?t[n.propertyName]=a===null?n.type===3?!1:"":a:(r=n.attributeName,s=n.attributeNamespace,a===null?t.removeAttribute(r):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,s?t.setAttributeNS(s,r,a):t.setAttribute(r,a))))}var qo=S7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w0=Symbol.for("react.element"),Pc=Symbol.for("react.portal"),Tc=Symbol.for("react.fragment"),M1=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),r5=Symbol.for("react.provider"),a5=Symbol.for("react.context"),I1=Symbol.for("react.forward_ref"),zv=Symbol.for("react.suspense"),qv=Symbol.for("react.suspense_list"),L1=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),s5=Symbol.for("react.offscreen"),Uw=Symbol.iterator;function Cu(t){return t===null||typeof t!="object"?null:(t=Uw&&t[Uw]||t["@@iterator"],typeof t=="function"?t:null)}var Dr=Object.assign,vb;function Xu(t){if(vb===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);vb=r&&r[1]||""}return`
`+vb+t}var yb=!1;function jb(t,r){if(!t||yb)return"";yb=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(d){var s=d}Reflect.construct(t,[],r)}else{try{r.call()}catch(d){s=d}t.call(r.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),o=s.stack.split(`
`),i=n.length-1,l=o.length-1;1<=i&&0<=l&&n[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||n[i]!==o[l]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{yb=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Xu(t):""}function P7(t){switch(t.tag){case 5:return Xu(t.type);case 16:return Xu("Lazy");case 13:return Xu("Suspense");case 19:return Xu("SuspenseList");case 0:case 2:case 15:return t=jb(t.type,!1),t;case 11:return t=jb(t.type.render,!1),t;case 1:return t=jb(t.type,!0),t;default:return""}}function Vv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tc:return"Fragment";case Pc:return"Portal";case Bv:return"Profiler";case M1:return"StrictMode";case zv:return"Suspense";case qv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a5:return(t.displayName||"Context")+".Consumer";case r5:return(t._context.displayName||"Context")+".Provider";case I1:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L1:return r=t.displayName||null,r!==null?r:Vv(t.type)||"Memo";case si:r=t._payload,t=t._init;try{return Vv(t(r))}catch{}}return null}function T7(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vv(r);case 8:return r===M1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n5(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function O7(t){var r=n5(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),s=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function _0(t){t._valueTracker||(t._valueTracker=O7(t))}function o5(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),s="";return t&&(s=n5(t)?t.checked?"true":"false":t.value),t=s,t!==a?(r.setValue(t),!0):!1}function $p(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uv(t,r){var a=r.checked;return Dr({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Ww(t,r){var a=r.defaultValue==null?"":r.defaultValue,s=r.checked!=null?r.checked:r.defaultChecked;a=Ai(r.value!=null?r.value:a),t._wrapperState={initialChecked:s,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function i5(t,r){r=r.checked,r!=null&&D1(t,"checked",r,!1)}function Wv(t,r){i5(t,r);var a=Ai(r.value),s=r.type;if(a!=null)s==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Hv(t,r.type,a):r.hasOwnProperty("defaultValue")&&Hv(t,r.type,Ai(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Hw(t,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!(s!=="submit"&&s!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,a||r===t.value||(t.value=r),t.defaultValue=r}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Hv(t,r,a){(r!=="number"||$p(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var Yu=Array.isArray;function Xc(t,r,a,s){if(t=t.options,r){r={};for(var n=0;n<a.length;n++)r["$"+a[n]]=!0;for(a=0;a<t.length;a++)n=r.hasOwnProperty("$"+t[a].value),t[a].selected!==n&&(t[a].selected=n),n&&s&&(t[a].defaultSelected=!0)}else{for(a=""+Ai(a),r=null,n=0;n<t.length;n++){if(t[n].value===a){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}r!==null||t[n].disabled||(r=t[n])}r!==null&&(r.selected=!0)}}function Kv(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(at(91));return Dr({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kw(t,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(at(92));if(Yu(a)){if(1<a.length)throw Error(at(93));a=a[0]}r=a}r==null&&(r=""),a=r}t._wrapperState={initialValue:Ai(a)}}function l5(t,r){var a=Ai(r.value),s=Ai(r.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),r.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),s!=null&&(t.defaultValue=""+s)}function Gw(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function c5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gv(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?c5(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var S0,d5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,s,n){MSApp.execUnsafeLocalFunction(function(){return t(r,a,s,n)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(S0=S0||document.createElement("div"),S0.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=S0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function km(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var tm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F7=["Webkit","ms","Moz","O"];Object.keys(tm).forEach(function(t){F7.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),tm[r]=tm[t]})});function u5(t,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||tm.hasOwnProperty(t)&&tm[t]?(""+r).trim():r+"px"}function m5(t,r){t=t.style;for(var a in r)if(r.hasOwnProperty(a)){var s=a.indexOf("--")===0,n=u5(a,r[a],s);a==="float"&&(a="cssFloat"),s?t.setProperty(a,n):t[a]=n}}var R7=Dr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xv(t,r){if(r){if(R7[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(at(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(at(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(at(61))}if(r.style!=null&&typeof r.style!="object")throw Error(at(62))}}function Yv(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=null;function B1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jv=null,Yc=null,Qc=null;function Xw(t){if(t=Wx(t)){if(typeof Jv!="function")throw Error(at(280));var r=t.stateNode;r&&(r=Yf(r),Jv(t.stateNode,t.type,r))}}function x5(t){Yc?Qc?Qc.push(t):Qc=[t]:Yc=t}function p5(){if(Yc){var t=Yc,r=Qc;if(Qc=Yc=null,Xw(t),r)for(t=0;t<r.length;t++)Xw(r[t])}}function h5(t,r){return t(r)}function f5(){}var Nb=!1;function g5(t,r,a){if(Nb)return t(r,a);Nb=!0;try{return h5(t,r,a)}finally{Nb=!1,(Yc!==null||Qc!==null)&&(f5(),p5())}}function Em(t,r){var a=t.stateNode;if(a===null)return null;var s=Yf(a);if(s===null)return null;a=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(at(231,r,typeof a));return a}var Zv=!1;if(Eo)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){Zv=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{Zv=!1}function $7(t,r,a,s,n,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{r.apply(a,d)}catch(u){this.onError(u)}}var rm=!1,Dp=null,Mp=!1,ey=null,D7={onError:function(t){rm=!0,Dp=t}};function M7(t,r,a,s,n,o,i,l,c){rm=!1,Dp=null,$7.apply(D7,arguments)}function I7(t,r,a,s,n,o,i,l,c){if(M7.apply(this,arguments),rm){if(rm){var d=Dp;rm=!1,Dp=null}else throw Error(at(198));Mp||(Mp=!0,ey=d)}}function tc(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function b5(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Yw(t){if(tc(t)!==t)throw Error(at(188))}function L7(t){var r=t.alternate;if(!r){if(r=tc(t),r===null)throw Error(at(188));return r!==t?null:t}for(var a=t,s=r;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return Yw(n),t;if(o===s)return Yw(n),r;o=o.sibling}throw Error(at(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(at(189))}}if(a.alternate!==s)throw Error(at(190))}if(a.tag!==3)throw Error(at(188));return a.stateNode.current===a?t:r}function v5(t){return t=L7(t),t!==null?y5(t):null}function y5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=y5(t);if(r!==null)return r;t=t.sibling}return null}var j5=Is.unstable_scheduleCallback,Qw=Is.unstable_cancelCallback,B7=Is.unstable_shouldYield,z7=Is.unstable_requestPaint,Wr=Is.unstable_now,q7=Is.unstable_getCurrentPriorityLevel,z1=Is.unstable_ImmediatePriority,N5=Is.unstable_UserBlockingPriority,Ip=Is.unstable_NormalPriority,V7=Is.unstable_LowPriority,w5=Is.unstable_IdlePriority,Hf=null,Gn=null;function U7(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:K7,W7=Math.log,H7=Math.LN2;function K7(t){return t>>>=0,t===0?32:31-(W7(t)/H7|0)|0}var C0=64,k0=4194304;function Qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lp(t,r){var a=t.pendingLanes;if(a===0)return 0;var s=0,n=t.suspendedLanes,o=t.pingedLanes,i=a&268435455;if(i!==0){var l=i&~n;l!==0?s=Qu(l):(o&=i,o!==0&&(s=Qu(o)))}else i=a&~n,i!==0?s=Qu(i):o!==0&&(s=Qu(o));if(s===0)return 0;if(r!==0&&r!==s&&!(r&n)&&(n=s&-s,o=r&-r,n>=o||n===16&&(o&4194240)!==0))return r;if(s&4&&(s|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=s;0<r;)a=31-Sn(r),n=1<<a,s|=t[a],r&=~n;return s}function G7(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X7(t,r){for(var a=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Sn(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=G7(l,r)):c<=r&&(t.expiredLanes|=l),o&=~l}}function ty(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _5(){var t=C0;return C0<<=1,!(C0&4194240)&&(C0=64),t}function wb(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Vx(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Sn(r),t[r]=a}function Y7(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<a;){var n=31-Sn(a),o=1<<n;r[n]=0,s[n]=-1,t[n]=-1,a&=~o}}function q1(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var s=31-Sn(a),n=1<<s;n&r|t[s]&r&&(t[s]|=r),a&=~n}}var dr=0;function S5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C5,V1,k5,E5,A5,ry=!1,E0=[],vi=null,yi=null,ji=null,Am=new Map,Pm=new Map,ii=[],Q7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jw(t,r){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Am.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pm.delete(r.pointerId)}}function Eu(t,r,a,s,n,o){return t===null||t.nativeEvent!==o?(t={blockedOn:r,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},r!==null&&(r=Wx(r),r!==null&&V1(r)),t):(t.eventSystemFlags|=s,r=t.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),t)}function J7(t,r,a,s,n){switch(r){case"focusin":return vi=Eu(vi,t,r,a,s,n),!0;case"dragenter":return yi=Eu(yi,t,r,a,s,n),!0;case"mouseover":return ji=Eu(ji,t,r,a,s,n),!0;case"pointerover":var o=n.pointerId;return Am.set(o,Eu(Am.get(o)||null,t,r,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Pm.set(o,Eu(Pm.get(o)||null,t,r,a,s,n)),!0}return!1}function P5(t){var r=dl(t.target);if(r!==null){var a=tc(r);if(a!==null){if(r=a.tag,r===13){if(r=b5(a),r!==null){t.blockedOn=r,A5(t.priority,function(){k5(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bp(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=ay(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var s=new a.constructor(a.type,a);Qv=s,a.target.dispatchEvent(s),Qv=null}else return r=Wx(a),r!==null&&V1(r),t.blockedOn=a,!1;r.shift()}return!0}function Zw(t,r,a){bp(t)&&a.delete(r)}function Z7(){ry=!1,vi!==null&&bp(vi)&&(vi=null),yi!==null&&bp(yi)&&(yi=null),ji!==null&&bp(ji)&&(ji=null),Am.forEach(Zw),Pm.forEach(Zw)}function Au(t,r){t.blockedOn===r&&(t.blockedOn=null,ry||(ry=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,Z7)))}function Tm(t){function r(n){return Au(n,t)}if(0<E0.length){Au(E0[0],t);for(var a=1;a<E0.length;a++){var s=E0[a];s.blockedOn===t&&(s.blockedOn=null)}}for(vi!==null&&Au(vi,t),yi!==null&&Au(yi,t),ji!==null&&Au(ji,t),Am.forEach(r),Pm.forEach(r),a=0;a<ii.length;a++)s=ii[a],s.blockedOn===t&&(s.blockedOn=null);for(;0<ii.length&&(a=ii[0],a.blockedOn===null);)P5(a),a.blockedOn===null&&ii.shift()}var Jc=qo.ReactCurrentBatchConfig,Bp=!0;function eD(t,r,a,s){var n=dr,o=Jc.transition;Jc.transition=null;try{dr=1,U1(t,r,a,s)}finally{dr=n,Jc.transition=o}}function tD(t,r,a,s){var n=dr,o=Jc.transition;Jc.transition=null;try{dr=4,U1(t,r,a,s)}finally{dr=n,Jc.transition=o}}function U1(t,r,a,s){if(Bp){var n=ay(t,r,a,s);if(n===null)Fb(t,r,s,zp,a),Jw(t,s);else if(J7(n,t,r,a,s))s.stopPropagation();else if(Jw(t,s),r&4&&-1<Q7.indexOf(t)){for(;n!==null;){var o=Wx(n);if(o!==null&&C5(o),o=ay(t,r,a,s),o===null&&Fb(t,r,s,zp,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else Fb(t,r,s,null,a)}}var zp=null;function ay(t,r,a,s){if(zp=null,t=B1(s),t=dl(t),t!==null)if(r=tc(t),r===null)t=null;else if(a=r.tag,a===13){if(t=b5(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return zp=t,null}function T5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q7()){case z1:return 1;case N5:return 4;case Ip:case V7:return 16;case w5:return 536870912;default:return 16}default:return 16}}var ui=null,W1=null,vp=null;function O5(){if(vp)return vp;var t,r=W1,a=r.length,s,n="value"in ui?ui.value:ui.textContent,o=n.length;for(t=0;t<a&&r[t]===n[t];t++);var i=a-t;for(s=1;s<=i&&r[a-s]===n[o-s];s++);return vp=n.slice(t,1<s?1-s:void 0)}function yp(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function A0(){return!0}function e_(){return!1}function zs(t){function r(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(a=t[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?A0:e_,this.isPropagationStopped=e_,this}return Dr(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=A0)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=A0)},persist:function(){},isPersistent:A0}),r}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H1=zs(tu),Ux=Dr({},tu,{view:0,detail:0}),rD=zs(Ux),_b,Sb,Pu,Kf=Dr({},Ux,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pu&&(Pu&&t.type==="mousemove"?(_b=t.screenX-Pu.screenX,Sb=t.screenY-Pu.screenY):Sb=_b=0,Pu=t),_b)},movementY:function(t){return"movementY"in t?t.movementY:Sb}}),t_=zs(Kf),aD=Dr({},Kf,{dataTransfer:0}),sD=zs(aD),nD=Dr({},Ux,{relatedTarget:0}),Cb=zs(nD),oD=Dr({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),iD=zs(oD),lD=Dr({},tu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cD=zs(lD),dD=Dr({},tu,{data:0}),r_=zs(dD),uD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pD(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=xD[t])?!!r[t]:!1}function K1(){return pD}var hD=Dr({},Ux,{key:function(t){if(t.key){var r=uD[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=yp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K1,charCode:function(t){return t.type==="keypress"?yp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fD=zs(hD),gD=Dr({},Kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a_=zs(gD),bD=Dr({},Ux,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K1}),vD=zs(bD),yD=Dr({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jD=zs(yD),ND=Dr({},Kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wD=zs(ND),_D=[9,13,27,32],G1=Eo&&"CompositionEvent"in window,am=null;Eo&&"documentMode"in document&&(am=document.documentMode);var SD=Eo&&"TextEvent"in window&&!am,F5=Eo&&(!G1||am&&8<am&&11>=am),s_=" ",n_=!1;function R5(t,r){switch(t){case"keyup":return _D.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oc=!1;function CD(t,r){switch(t){case"compositionend":return $5(r);case"keypress":return r.which!==32?null:(n_=!0,s_);case"textInput":return t=r.data,t===s_&&n_?null:t;default:return null}}function kD(t,r){if(Oc)return t==="compositionend"||!G1&&R5(t,r)?(t=O5(),vp=W1=ui=null,Oc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return F5&&r.locale!=="ko"?null:r.data;default:return null}}var ED={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o_(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ED[t.type]:r==="textarea"}function D5(t,r,a,s){x5(s),r=qp(r,"onChange"),0<r.length&&(a=new H1("onChange","change",null,a,s),t.push({event:a,listeners:r}))}var sm=null,Om=null;function AD(t){K5(t,0)}function Gf(t){var r=$c(t);if(o5(r))return t}function PD(t,r){if(t==="change")return r}var M5=!1;if(Eo){var kb;if(Eo){var Eb="oninput"in document;if(!Eb){var i_=document.createElement("div");i_.setAttribute("oninput","return;"),Eb=typeof i_.oninput=="function"}kb=Eb}else kb=!1;M5=kb&&(!document.documentMode||9<document.documentMode)}function l_(){sm&&(sm.detachEvent("onpropertychange",I5),Om=sm=null)}function I5(t){if(t.propertyName==="value"&&Gf(Om)){var r=[];D5(r,Om,t,B1(t)),g5(AD,r)}}function TD(t,r,a){t==="focusin"?(l_(),sm=r,Om=a,sm.attachEvent("onpropertychange",I5)):t==="focusout"&&l_()}function OD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gf(Om)}function FD(t,r){if(t==="click")return Gf(r)}function RD(t,r){if(t==="input"||t==="change")return Gf(r)}function $D(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Pn=typeof Object.is=="function"?Object.is:$D;function Fm(t,r){if(Pn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!Lv.call(r,n)||!Pn(t[n],r[n]))return!1}return!0}function c_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d_(t,r){var a=c_(t);t=0;for(var s;a;){if(a.nodeType===3){if(s=t+a.textContent.length,t<=r&&s>=r)return{node:a,offset:r-t};t=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=c_(a)}}function L5(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?L5(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function B5(){for(var t=window,r=$p();r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=$p(t.document)}return r}function X1(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function DD(t){var r=B5(),a=t.focusedElem,s=t.selectionRange;if(r!==a&&a&&a.ownerDocument&&L5(a.ownerDocument.documentElement,a)){if(s!==null&&X1(a)){if(r=s.start,t=s.end,t===void 0&&(t=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(t,a.value.length);else if(t=(r=a.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var n=a.textContent.length,o=Math.min(s.start,n);s=s.end===void 0?o:Math.min(s.end,n),!t.extend&&o>s&&(n=s,s=o,o=n),n=d_(a,o);var i=d_(a,s);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),t.removeAllRanges(),o>s?(t.addRange(r),t.extend(i.node,i.offset)):(r.setEnd(i.node,i.offset),t.addRange(r)))}}for(r=[],t=a;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)t=r[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MD=Eo&&"documentMode"in document&&11>=document.documentMode,Fc=null,sy=null,nm=null,ny=!1;function u_(t,r,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ny||Fc==null||Fc!==$p(s)||(s=Fc,"selectionStart"in s&&X1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),nm&&Fm(nm,s)||(nm=s,s=qp(sy,"onSelect"),0<s.length&&(r=new H1("onSelect","select",null,r,a),t.push({event:r,listeners:s}),r.target=Fc)))}function P0(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Rc={animationend:P0("Animation","AnimationEnd"),animationiteration:P0("Animation","AnimationIteration"),animationstart:P0("Animation","AnimationStart"),transitionend:P0("Transition","TransitionEnd")},Ab={},z5={};Eo&&(z5=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function Xf(t){if(Ab[t])return Ab[t];if(!Rc[t])return t;var r=Rc[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in z5)return Ab[t]=r[a];return t}var q5=Xf("animationend"),V5=Xf("animationiteration"),U5=Xf("animationstart"),W5=Xf("transitionend"),H5=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,r){H5.set(t,r),ec(r,[t])}for(var Pb=0;Pb<m_.length;Pb++){var Tb=m_[Pb],ID=Tb.toLowerCase(),LD=Tb[0].toUpperCase()+Tb.slice(1);Di(ID,"on"+LD)}Di(q5,"onAnimationEnd");Di(V5,"onAnimationIteration");Di(U5,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(W5,"onTransitionEnd");xd("onMouseEnter",["mouseout","mouseover"]);xd("onMouseLeave",["mouseout","mouseover"]);xd("onPointerEnter",["pointerout","pointerover"]);xd("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ju));function x_(t,r,a){var s=t.type||"unknown-event";t.currentTarget=a,I7(s,r,void 0,t),t.currentTarget=null}function K5(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var s=t[a],n=s.event;s=s.listeners;e:{var o=void 0;if(r)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;x_(n,l,d),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;x_(n,l,d),o=c}}}if(Mp)throw t=ey,Mp=!1,ey=null,t}function wr(t,r){var a=r[dy];a===void 0&&(a=r[dy]=new Set);var s=t+"__bubble";a.has(s)||(G5(r,t,2,!1),a.add(s))}function Ob(t,r,a){var s=0;r&&(s|=4),G5(a,t,s,r)}var T0="_reactListening"+Math.random().toString(36).slice(2);function Rm(t){if(!t[T0]){t[T0]=!0,t5.forEach(function(a){a!=="selectionchange"&&(BD.has(a)||Ob(a,!1,t),Ob(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[T0]||(r[T0]=!0,Ob("selectionchange",!1,r))}}function G5(t,r,a,s){switch(T5(r)){case 1:var n=eD;break;case 4:n=tD;break;default:n=U1}a=n.bind(null,r,a,t),n=void 0,!Zv||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(r,a,{capture:!0,passive:n}):t.addEventListener(r,a,!0):n!==void 0?t.addEventListener(r,a,{passive:n}):t.addEventListener(r,a,!1)}function Fb(t,r,a,s,n){var o=s;if(!(r&1)&&!(r&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;l!==null;){if(i=dl(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}g5(function(){var d=o,u=B1(a),m=[];e:{var x=H5.get(t);if(x!==void 0){var h=H1,b=t;switch(t){case"keypress":if(yp(a)===0)break e;case"keydown":case"keyup":h=fD;break;case"focusin":b="focus",h=Cb;break;case"focusout":b="blur",h=Cb;break;case"beforeblur":case"afterblur":h=Cb;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=t_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=sD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=vD;break;case q5:case V5:case U5:h=iD;break;case W5:h=jD;break;case"scroll":h=rD;break;case"wheel":h=wD;break;case"copy":case"cut":case"paste":h=cD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=a_}var p=(r&4)!==0,f=!p&&t==="scroll",v=p?x!==null?x+"Capture":null:x;p=[];for(var g=d,y;g!==null;){y=g;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,v!==null&&(N=Em(g,v),N!=null&&p.push($m(g,N,y)))),f)break;g=g.return}0<p.length&&(x=new h(x,b,null,a,u),m.push({event:x,listeners:p}))}}if(!(r&7)){e:{if(x=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",x&&a!==Qv&&(b=a.relatedTarget||a.fromElement)&&(dl(b)||b[Ao]))break e;if((h||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,h?(b=a.relatedTarget||a.toElement,h=d,b=b?dl(b):null,b!==null&&(f=tc(b),b!==f||b.tag!==5&&b.tag!==6)&&(b=null)):(h=null,b=d),h!==b)){if(p=t_,N="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(p=a_,N="onPointerLeave",v="onPointerEnter",g="pointer"),f=h==null?x:$c(h),y=b==null?x:$c(b),x=new p(N,g+"leave",h,a,u),x.target=f,x.relatedTarget=y,N=null,dl(u)===d&&(p=new p(v,g+"enter",b,a,u),p.target=y,p.relatedTarget=f,N=p),f=N,h&&b)t:{for(p=h,v=b,g=0,y=p;y;y=gc(y))g++;for(y=0,N=v;N;N=gc(N))y++;for(;0<g-y;)p=gc(p),g--;for(;0<y-g;)v=gc(v),y--;for(;g--;){if(p===v||v!==null&&p===v.alternate)break t;p=gc(p),v=gc(v)}p=null}else p=null;h!==null&&p_(m,x,h,p,!1),b!==null&&f!==null&&p_(m,f,b,p,!0)}}e:{if(x=d?$c(d):window,h=x.nodeName&&x.nodeName.toLowerCase(),h==="select"||h==="input"&&x.type==="file")var _=PD;else if(o_(x))if(M5)_=RD;else{_=OD;var w=TD}else(h=x.nodeName)&&h.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(_=FD);if(_&&(_=_(t,d))){D5(m,_,a,u);break e}w&&w(t,x,d),t==="focusout"&&(w=x._wrapperState)&&w.controlled&&x.type==="number"&&Hv(x,"number",x.value)}switch(w=d?$c(d):window,t){case"focusin":(o_(w)||w.contentEditable==="true")&&(Fc=w,sy=d,nm=null);break;case"focusout":nm=sy=Fc=null;break;case"mousedown":ny=!0;break;case"contextmenu":case"mouseup":case"dragend":ny=!1,u_(m,a,u);break;case"selectionchange":if(MD)break;case"keydown":case"keyup":u_(m,a,u)}var S;if(G1)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Oc?R5(t,a)&&(C="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(C="onCompositionStart");C&&(F5&&a.locale!=="ko"&&(Oc||C!=="onCompositionStart"?C==="onCompositionEnd"&&Oc&&(S=O5()):(ui=u,W1="value"in ui?ui.value:ui.textContent,Oc=!0)),w=qp(d,C),0<w.length&&(C=new r_(C,t,null,a,u),m.push({event:C,listeners:w}),S?C.data=S:(S=$5(a),S!==null&&(C.data=S)))),(S=SD?CD(t,a):kD(t,a))&&(d=qp(d,"onBeforeInput"),0<d.length&&(u=new r_("onBeforeInput","beforeinput",null,a,u),m.push({event:u,listeners:d}),u.data=S))}K5(m,r)})}function $m(t,r,a){return{instance:t,listener:r,currentTarget:a}}function qp(t,r){for(var a=r+"Capture",s=[];t!==null;){var n=t,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Em(t,a),o!=null&&s.unshift($m(t,o,n)),o=Em(t,r),o!=null&&s.push($m(t,o,n))),t=t.return}return s}function gc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p_(t,r,a,s,n){for(var o=r._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,n?(c=Em(a,o),c!=null&&i.unshift($m(a,c,l))):n||(c=Em(a,o),c!=null&&i.push($m(a,c,l)))),a=a.return}i.length!==0&&t.push({event:r,listeners:i})}var zD=/\r\n?/g,qD=/\u0000|\uFFFD/g;function h_(t){return(typeof t=="string"?t:""+t).replace(zD,`
`).replace(qD,"")}function O0(t,r,a){if(r=h_(r),h_(t)!==r&&a)throw Error(at(425))}function Vp(){}var oy=null,iy=null;function ly(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cy=typeof setTimeout=="function"?setTimeout:void 0,VD=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,UD=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(WD)}:cy;function WD(t){setTimeout(function(){throw t})}function Rb(t,r){var a=r,s=0;do{var n=a.nextSibling;if(t.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){t.removeChild(n),Tm(r);return}s--}else a!=="$"&&a!=="$?"&&a!=="$!"||s++;a=n}while(a);Tm(r)}function Ni(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function g_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}var ru=Math.random().toString(36).slice(2),qn="__reactFiber$"+ru,Dm="__reactProps$"+ru,Ao="__reactContainer$"+ru,dy="__reactEvents$"+ru,HD="__reactListeners$"+ru,KD="__reactHandles$"+ru;function dl(t){var r=t[qn];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ao]||a[qn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=g_(t);t!==null;){if(a=t[qn])return a;t=g_(t)}return r}t=a,a=t.parentNode}return null}function Wx(t){return t=t[qn]||t[Ao],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $c(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(at(33))}function Yf(t){return t[Dm]||null}var uy=[],Dc=-1;function Mi(t){return{current:t}}function Cr(t){0>Dc||(t.current=uy[Dc],uy[Dc]=null,Dc--)}function jr(t,r){Dc++,uy[Dc]=t.current,t.current=r}var Pi={},Ka=Mi(Pi),ms=Mi(!1),Pl=Pi;function pd(t,r){var a=t.type.contextTypes;if(!a)return Pi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in a)n[o]=r[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),n}function xs(t){return t=t.childContextTypes,t!=null}function Up(){Cr(ms),Cr(Ka)}function b_(t,r,a){if(Ka.current!==Pi)throw Error(at(168));jr(Ka,r),jr(ms,a)}function X5(t,r,a){var s=t.stateNode;if(r=r.childContextTypes,typeof s.getChildContext!="function")return a;s=s.getChildContext();for(var n in s)if(!(n in r))throw Error(at(108,T7(t)||"Unknown",n));return Dr({},a,s)}function Wp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,Pl=Ka.current,jr(Ka,t),jr(ms,ms.current),!0}function v_(t,r,a){var s=t.stateNode;if(!s)throw Error(at(169));a?(t=X5(t,r,Pl),s.__reactInternalMemoizedMergedChildContext=t,Cr(ms),Cr(Ka),jr(Ka,t)):Cr(ms),jr(ms,a)}var po=null,Qf=!1,$b=!1;function Y5(t){po===null?po=[t]:po.push(t)}function GD(t){Qf=!0,Y5(t)}function Ii(){if(!$b&&po!==null){$b=!0;var t=0,r=dr;try{var a=po;for(dr=1;t<a.length;t++){var s=a[t];do s=s(!0);while(s!==null)}po=null,Qf=!1}catch(n){throw po!==null&&(po=po.slice(t+1)),j5(z1,Ii),n}finally{dr=r,$b=!1}}return null}var Mc=[],Ic=0,Hp=null,Kp=0,Js=[],Zs=0,Tl=null,fo=1,go="";function rl(t,r){Mc[Ic++]=Kp,Mc[Ic++]=Hp,Hp=t,Kp=r}function Q5(t,r,a){Js[Zs++]=fo,Js[Zs++]=go,Js[Zs++]=Tl,Tl=t;var s=fo;t=go;var n=32-Sn(s)-1;s&=~(1<<n),a+=1;var o=32-Sn(r)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,fo=1<<32-Sn(r)+n|a<<n|s,go=o+t}else fo=1<<o|a<<n|s,go=t}function Y1(t){t.return!==null&&(rl(t,1),Q5(t,1,0))}function Q1(t){for(;t===Hp;)Hp=Mc[--Ic],Mc[Ic]=null,Kp=Mc[--Ic],Mc[Ic]=null;for(;t===Tl;)Tl=Js[--Zs],Js[Zs]=null,go=Js[--Zs],Js[Zs]=null,fo=Js[--Zs],Js[Zs]=null}var Rs=null,Fs=null,Pr=!1,yn=null;function J5(t,r){var a=tn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function y_(t,r){switch(t.tag){case 5:var a=t.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Rs=t,Fs=Ni(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Rs=t,Fs=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Tl!==null?{id:fo,overflow:go}:null,t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=tn(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,Rs=t,Fs=null,!0):!1;default:return!1}}function my(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xy(t){if(Pr){var r=Fs;if(r){var a=r;if(!y_(t,r)){if(my(t))throw Error(at(418));r=Ni(a.nextSibling);var s=Rs;r&&y_(t,r)?J5(s,a):(t.flags=t.flags&-4097|2,Pr=!1,Rs=t)}}else{if(my(t))throw Error(at(418));t.flags=t.flags&-4097|2,Pr=!1,Rs=t}}}function j_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rs=t}function F0(t){if(t!==Rs)return!1;if(!Pr)return j_(t),Pr=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ly(t.type,t.memoizedProps)),r&&(r=Fs)){if(my(t))throw Z5(),Error(at(418));for(;r;)J5(t,r),r=Ni(r.nextSibling)}if(j_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(at(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(r===0){Fs=Ni(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}t=t.nextSibling}Fs=null}}else Fs=Rs?Ni(t.stateNode.nextSibling):null;return!0}function Z5(){for(var t=Fs;t;)t=Ni(t.nextSibling)}function hd(){Fs=Rs=null,Pr=!1}function J1(t){yn===null?yn=[t]:yn.push(t)}var XD=qo.ReactCurrentBatchConfig;function Tu(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(at(309));var s=a.stateNode}if(!s)throw Error(at(147,t));var n=s,o=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(i){var l=n.refs;i===null?delete l[o]:l[o]=i},r._stringRef=o,r)}if(typeof t!="string")throw Error(at(284));if(!a._owner)throw Error(at(290,t))}return t}function R0(t,r){throw t=Object.prototype.toString.call(r),Error(at(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function N_(t){var r=t._init;return r(t._payload)}function eE(t){function r(v,g){if(t){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function a(v,g){if(!t)return null;for(;g!==null;)r(v,g),g=g.sibling;return null}function s(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function n(v,g){return v=Ci(v,g),v.index=0,v.sibling=null,v}function o(v,g,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function i(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,g,y,N){return g===null||g.tag!==6?(g=qb(y,v.mode,N),g.return=v,g):(g=n(g,y),g.return=v,g)}function c(v,g,y,N){var _=y.type;return _===Tc?u(v,g,y.props.children,N,y.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===si&&N_(_)===g.type)?(N=n(g,y.props),N.ref=Tu(v,g,y),N.return=v,N):(N=kp(y.type,y.key,y.props,null,v.mode,N),N.ref=Tu(v,g,y),N.return=v,N)}function d(v,g,y,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Vb(y,v.mode,N),g.return=v,g):(g=n(g,y.children||[]),g.return=v,g)}function u(v,g,y,N,_){return g===null||g.tag!==7?(g=yl(y,v.mode,N,_),g.return=v,g):(g=n(g,y),g.return=v,g)}function m(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=qb(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case w0:return y=kp(g.type,g.key,g.props,null,v.mode,y),y.ref=Tu(v,null,g),y.return=v,y;case Pc:return g=Vb(g,v.mode,y),g.return=v,g;case si:var N=g._init;return m(v,N(g._payload),y)}if(Yu(g)||Cu(g))return g=yl(g,v.mode,y,null),g.return=v,g;R0(v,g)}return null}function x(v,g,y,N){var _=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(v,g,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case w0:return y.key===_?c(v,g,y,N):null;case Pc:return y.key===_?d(v,g,y,N):null;case si:return _=y._init,x(v,g,_(y._payload),N)}if(Yu(y)||Cu(y))return _!==null?null:u(v,g,y,N,null);R0(v,y)}return null}function h(v,g,y,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(y)||null,l(g,v,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w0:return v=v.get(N.key===null?y:N.key)||null,c(g,v,N,_);case Pc:return v=v.get(N.key===null?y:N.key)||null,d(g,v,N,_);case si:var w=N._init;return h(v,g,y,w(N._payload),_)}if(Yu(N)||Cu(N))return v=v.get(y)||null,u(g,v,N,_,null);R0(g,N)}return null}function b(v,g,y,N){for(var _=null,w=null,S=g,C=g=0,k=null;S!==null&&C<y.length;C++){S.index>C?(k=S,S=null):k=S.sibling;var F=x(v,S,y[C],N);if(F===null){S===null&&(S=k);break}t&&S&&F.alternate===null&&r(v,S),g=o(F,g,C),w===null?_=F:w.sibling=F,w=F,S=k}if(C===y.length)return a(v,S),Pr&&rl(v,C),_;if(S===null){for(;C<y.length;C++)S=m(v,y[C],N),S!==null&&(g=o(S,g,C),w===null?_=S:w.sibling=S,w=S);return Pr&&rl(v,C),_}for(S=s(v,S);C<y.length;C++)k=h(S,v,C,y[C],N),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?C:k.key),g=o(k,g,C),w===null?_=k:w.sibling=k,w=k);return t&&S.forEach(function(q){return r(v,q)}),Pr&&rl(v,C),_}function p(v,g,y,N){var _=Cu(y);if(typeof _!="function")throw Error(at(150));if(y=_.call(y),y==null)throw Error(at(151));for(var w=_=null,S=g,C=g=0,k=null,F=y.next();S!==null&&!F.done;C++,F=y.next()){S.index>C?(k=S,S=null):k=S.sibling;var q=x(v,S,F.value,N);if(q===null){S===null&&(S=k);break}t&&S&&q.alternate===null&&r(v,S),g=o(q,g,C),w===null?_=q:w.sibling=q,w=q,S=k}if(F.done)return a(v,S),Pr&&rl(v,C),_;if(S===null){for(;!F.done;C++,F=y.next())F=m(v,F.value,N),F!==null&&(g=o(F,g,C),w===null?_=F:w.sibling=F,w=F);return Pr&&rl(v,C),_}for(S=s(v,S);!F.done;C++,F=y.next())F=h(S,v,C,F.value,N),F!==null&&(t&&F.alternate!==null&&S.delete(F.key===null?C:F.key),g=o(F,g,C),w===null?_=F:w.sibling=F,w=F);return t&&S.forEach(function(A){return r(v,A)}),Pr&&rl(v,C),_}function f(v,g,y,N){if(typeof y=="object"&&y!==null&&y.type===Tc&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case w0:e:{for(var _=y.key,w=g;w!==null;){if(w.key===_){if(_=y.type,_===Tc){if(w.tag===7){a(v,w.sibling),g=n(w,y.props.children),g.return=v,v=g;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===si&&N_(_)===w.type){a(v,w.sibling),g=n(w,y.props),g.ref=Tu(v,w,y),g.return=v,v=g;break e}a(v,w);break}else r(v,w);w=w.sibling}y.type===Tc?(g=yl(y.props.children,v.mode,N,y.key),g.return=v,v=g):(N=kp(y.type,y.key,y.props,null,v.mode,N),N.ref=Tu(v,g,y),N.return=v,v=N)}return i(v);case Pc:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){a(v,g.sibling),g=n(g,y.children||[]),g.return=v,v=g;break e}else{a(v,g);break}else r(v,g);g=g.sibling}g=Vb(y,v.mode,N),g.return=v,v=g}return i(v);case si:return w=y._init,f(v,g,w(y._payload),N)}if(Yu(y))return b(v,g,y,N);if(Cu(y))return p(v,g,y,N);R0(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(a(v,g.sibling),g=n(g,y),g.return=v,v=g):(a(v,g),g=qb(y,v.mode,N),g.return=v,v=g),i(v)):a(v,g)}return f}var fd=eE(!0),tE=eE(!1),Gp=Mi(null),Xp=null,Lc=null,Z1=null;function e2(){Z1=Lc=Xp=null}function t2(t){var r=Gp.current;Cr(Gp),t._currentValue=r}function py(t,r,a){for(;t!==null;){var s=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),t===a)break;t=t.return}}function Zc(t,r){Xp=t,Z1=Lc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(ds=!0),t.firstContext=null)}function sn(t){var r=t._currentValue;if(Z1!==t)if(t={context:t,memoizedValue:r,next:null},Lc===null){if(Xp===null)throw Error(at(308));Lc=t,Xp.dependencies={lanes:0,firstContext:t}}else Lc=Lc.next=t;return r}var ul=null;function r2(t){ul===null?ul=[t]:ul.push(t)}function rE(t,r,a,s){var n=r.interleaved;return n===null?(a.next=a,r2(r)):(a.next=n.next,n.next=a),r.interleaved=a,Po(t,s)}function Po(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var ni=!1;function a2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aE(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jo(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function wi(t,r,a){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Qt&2){var n=s.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),s.pending=r,Po(t,a)}return n=s.interleaved,n===null?(r.next=r,r2(s)):(r.next=n.next,n.next=r),s.interleaved=r,Po(t,a)}function jp(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var s=r.lanes;s&=t.pendingLanes,a|=s,r.lanes=a,q1(t,a)}}function w_(t,r){var a=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=r:o=o.next=r}else n=o=r;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function Yp(t,r,a,s){var n=t.updateQueue;ni=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=n.baseState;i=0,u=d=c=null,l=o;do{var x=l.lane,h=l.eventTime;if((s&x)===x){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,p=l;switch(x=r,h=a,p.tag){case 1:if(b=p.payload,typeof b=="function"){m=b.call(h,m,x);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=p.payload,x=typeof b=="function"?b.call(h,m,x):b,x==null)break e;m=Dr({},m,x);break e;case 2:ni=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=n.effects,x===null?n.effects=[l]:x.push(l))}else h={eventTime:h,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=h,c=m):u=u.next=h,i|=x;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;x=l,l=x.next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}while(!0);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,r=n.shared.interleaved,r!==null){n=r;do i|=n.lane,n=n.next;while(n!==r)}else o===null&&(n.shared.lanes=0);Fl|=i,t.lanes=i,t.memoizedState=m}}function __(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var s=t[r],n=s.callback;if(n!==null){if(s.callback=null,s=a,typeof n!="function")throw Error(at(191,n));n.call(s)}}}var Hx={},Xn=Mi(Hx),Mm=Mi(Hx),Im=Mi(Hx);function ml(t){if(t===Hx)throw Error(at(174));return t}function s2(t,r){switch(jr(Im,r),jr(Mm,t),jr(Xn,Hx),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Gv(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Gv(r,t)}Cr(Xn),jr(Xn,r)}function gd(){Cr(Xn),Cr(Mm),Cr(Im)}function sE(t){ml(Im.current);var r=ml(Xn.current),a=Gv(r,t.type);r!==a&&(jr(Mm,t),jr(Xn,a))}function n2(t){Mm.current===t&&(Cr(Xn),Cr(Mm))}var Fr=Mi(0);function Qp(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Db=[];function o2(){for(var t=0;t<Db.length;t++)Db[t]._workInProgressVersionPrimary=null;Db.length=0}var Np=qo.ReactCurrentDispatcher,Mb=qo.ReactCurrentBatchConfig,Ol=0,$r=null,ma=null,va=null,Jp=!1,om=!1,Lm=0,YD=0;function La(){throw Error(at(321))}function i2(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Pn(t[a],r[a]))return!1;return!0}function l2(t,r,a,s,n,o){if(Ol=o,$r=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Np.current=t===null||t.memoizedState===null?e8:t8,t=a(s,n),om){o=0;do{if(om=!1,Lm=0,25<=o)throw Error(at(301));o+=1,va=ma=null,r.updateQueue=null,Np.current=r8,t=a(s,n)}while(om)}if(Np.current=Zp,r=ma!==null&&ma.next!==null,Ol=0,va=ma=$r=null,Jp=!1,r)throw Error(at(300));return t}function c2(){var t=Lm!==0;return Lm=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?$r.memoizedState=va=t:va=va.next=t,va}function nn(){if(ma===null){var t=$r.alternate;t=t!==null?t.memoizedState:null}else t=ma.next;var r=va===null?$r.memoizedState:va.next;if(r!==null)va=r,ma=t;else{if(t===null)throw Error(at(310));ma=t,t={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},va===null?$r.memoizedState=va=t:va=va.next=t}return va}function Bm(t,r){return typeof r=="function"?r(t):r}function Ib(t){var r=nn(),a=r.queue;if(a===null)throw Error(at(311));a.lastRenderedReducer=t;var s=ma,n=s.baseQueue,o=a.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}s.baseQueue=n=o,a.pending=null}if(n!==null){o=n.next,s=s.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((Ol&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=s):c=c.next=m,$r.lanes|=u,Fl|=u}d=d.next}while(d!==null&&d!==o);c===null?i=s:c.next=l,Pn(s,r.memoizedState)||(ds=!0),r.memoizedState=s,r.baseState=i,r.baseQueue=c,a.lastRenderedState=s}if(t=a.interleaved,t!==null){n=t;do o=n.lane,$r.lanes|=o,Fl|=o,n=n.next;while(n!==t)}else n===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Lb(t){var r=nn(),a=r.queue;if(a===null)throw Error(at(311));a.lastRenderedReducer=t;var s=a.dispatch,n=a.pending,o=r.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=t(o,i.action),i=i.next;while(i!==n);Pn(o,r.memoizedState)||(ds=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),a.lastRenderedState=o}return[o,s]}function nE(){}function oE(t,r){var a=$r,s=nn(),n=r(),o=!Pn(s.memoizedState,n);if(o&&(s.memoizedState=n,ds=!0),s=s.queue,d2(cE.bind(null,a,s,t),[t]),s.getSnapshot!==r||o||va!==null&&va.memoizedState.tag&1){if(a.flags|=2048,zm(9,lE.bind(null,a,s,n,r),void 0,null),Sa===null)throw Error(at(349));Ol&30||iE(a,r,n)}return n}function iE(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=$r.updateQueue,r===null?(r={lastEffect:null,stores:null},$r.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function lE(t,r,a,s){r.value=a,r.getSnapshot=s,dE(r)&&uE(t)}function cE(t,r,a){return a(function(){dE(r)&&uE(t)})}function dE(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Pn(t,a)}catch{return!0}}function uE(t){var r=Po(t,1);r!==null&&Cn(r,t,1,-1)}function S_(t){var r=Bn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bm,lastRenderedState:t},r.queue=t,t=t.dispatch=ZD.bind(null,$r,t),[r.memoizedState,t]}function zm(t,r,a,s){return t={tag:t,create:r,destroy:a,deps:s,next:null},r=$r.updateQueue,r===null?(r={lastEffect:null,stores:null},$r.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(s=a.next,a.next=t,t.next=s,r.lastEffect=t)),t}function mE(){return nn().memoizedState}function wp(t,r,a,s){var n=Bn();$r.flags|=t,n.memoizedState=zm(1|r,a,void 0,s===void 0?null:s)}function Jf(t,r,a,s){var n=nn();s=s===void 0?null:s;var o=void 0;if(ma!==null){var i=ma.memoizedState;if(o=i.destroy,s!==null&&i2(s,i.deps)){n.memoizedState=zm(r,a,o,s);return}}$r.flags|=t,n.memoizedState=zm(1|r,a,o,s)}function C_(t,r){return wp(8390656,8,t,r)}function d2(t,r){return Jf(2048,8,t,r)}function xE(t,r){return Jf(4,2,t,r)}function pE(t,r){return Jf(4,4,t,r)}function hE(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fE(t,r,a){return a=a!=null?a.concat([t]):null,Jf(4,4,hE.bind(null,r,t),a)}function u2(){}function gE(t,r){var a=nn();r=r===void 0?null:r;var s=a.memoizedState;return s!==null&&r!==null&&i2(r,s[1])?s[0]:(a.memoizedState=[t,r],t)}function bE(t,r){var a=nn();r=r===void 0?null:r;var s=a.memoizedState;return s!==null&&r!==null&&i2(r,s[1])?s[0]:(t=t(),a.memoizedState=[t,r],t)}function vE(t,r,a){return Ol&21?(Pn(a,r)||(a=_5(),$r.lanes|=a,Fl|=a,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,ds=!0),t.memoizedState=a)}function QD(t,r){var a=dr;dr=a!==0&&4>a?a:4,t(!0);var s=Mb.transition;Mb.transition={};try{t(!1),r()}finally{dr=a,Mb.transition=s}}function yE(){return nn().memoizedState}function JD(t,r,a){var s=Si(t);if(a={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null},jE(t))NE(r,a);else if(a=rE(t,r,a,s),a!==null){var n=ts();Cn(a,t,s,n),wE(a,r,s)}}function ZD(t,r,a){var s=Si(t),n={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null};if(jE(t))NE(r,n);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var i=r.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,Pn(l,i)){var c=r.interleaved;c===null?(n.next=n,r2(r)):(n.next=c.next,c.next=n),r.interleaved=n;return}}catch{}finally{}a=rE(t,r,n,s),a!==null&&(n=ts(),Cn(a,t,s,n),wE(a,r,s))}}function jE(t){var r=t.alternate;return t===$r||r!==null&&r===$r}function NE(t,r){om=Jp=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function wE(t,r,a){if(a&4194240){var s=r.lanes;s&=t.pendingLanes,a|=s,r.lanes=a,q1(t,a)}}var Zp={readContext:sn,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useInsertionEffect:La,useLayoutEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useMutableSource:La,useSyncExternalStore:La,useId:La,unstable_isNewReconciler:!1},e8={readContext:sn,useCallback:function(t,r){return Bn().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:C_,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,wp(4194308,4,hE.bind(null,r,t),a)},useLayoutEffect:function(t,r){return wp(4194308,4,t,r)},useInsertionEffect:function(t,r){return wp(4,2,t,r)},useMemo:function(t,r){var a=Bn();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var s=Bn();return r=a!==void 0?a(r):r,s.memoizedState=s.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=JD.bind(null,$r,t),[s.memoizedState,t]},useRef:function(t){var r=Bn();return t={current:t},r.memoizedState=t},useState:S_,useDebugValue:u2,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=S_(!1),r=t[0];return t=QD.bind(null,t[1]),Bn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var s=$r,n=Bn();if(Pr){if(a===void 0)throw Error(at(407));a=a()}else{if(a=r(),Sa===null)throw Error(at(349));Ol&30||iE(s,r,a)}n.memoizedState=a;var o={value:a,getSnapshot:r};return n.queue=o,C_(cE.bind(null,s,o,t),[t]),s.flags|=2048,zm(9,lE.bind(null,s,o,a,r),void 0,null),a},useId:function(){var t=Bn(),r=Sa.identifierPrefix;if(Pr){var a=go,s=fo;a=(s&~(1<<32-Sn(s)-1)).toString(32)+a,r=":"+r+"R"+a,a=Lm++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=YD++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},t8={readContext:sn,useCallback:gE,useContext:sn,useEffect:d2,useImperativeHandle:fE,useInsertionEffect:xE,useLayoutEffect:pE,useMemo:bE,useReducer:Ib,useRef:mE,useState:function(){return Ib(Bm)},useDebugValue:u2,useDeferredValue:function(t){var r=nn();return vE(r,ma.memoizedState,t)},useTransition:function(){var t=Ib(Bm)[0],r=nn().memoizedState;return[t,r]},useMutableSource:nE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1},r8={readContext:sn,useCallback:gE,useContext:sn,useEffect:d2,useImperativeHandle:fE,useInsertionEffect:xE,useLayoutEffect:pE,useMemo:bE,useReducer:Lb,useRef:mE,useState:function(){return Lb(Bm)},useDebugValue:u2,useDeferredValue:function(t){var r=nn();return ma===null?r.memoizedState=t:vE(r,ma.memoizedState,t)},useTransition:function(){var t=Lb(Bm)[0],r=nn().memoizedState;return[t,r]},useMutableSource:nE,useSyncExternalStore:oE,useId:yE,unstable_isNewReconciler:!1};function fn(t,r){if(t&&t.defaultProps){r=Dr({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}function hy(t,r,a,s){r=t.memoizedState,a=a(s,r),a=a==null?r:Dr({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Zf={isMounted:function(t){return(t=t._reactInternals)?tc(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var s=ts(),n=Si(t),o=jo(s,n);o.payload=r,a!=null&&(o.callback=a),r=wi(t,o,n),r!==null&&(Cn(r,t,n,s),jp(r,t,n))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var s=ts(),n=Si(t),o=jo(s,n);o.tag=1,o.payload=r,a!=null&&(o.callback=a),r=wi(t,o,n),r!==null&&(Cn(r,t,n,s),jp(r,t,n))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=ts(),s=Si(t),n=jo(a,s);n.tag=2,r!=null&&(n.callback=r),r=wi(t,n,s),r!==null&&(Cn(r,t,s,a),jp(r,t,s))}};function k_(t,r,a,s,n,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,i):r.prototype&&r.prototype.isPureReactComponent?!Fm(a,s)||!Fm(n,o):!0}function _E(t,r,a){var s=!1,n=Pi,o=r.contextType;return typeof o=="object"&&o!==null?o=sn(o):(n=xs(r)?Pl:Ka.current,s=r.contextTypes,o=(s=s!=null)?pd(t,n):Pi),r=new r(a,o),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zf,t.stateNode=r,r._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),r}function E_(t,r,a,s){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,s),r.state!==t&&Zf.enqueueReplaceState(r,r.state,null)}function fy(t,r,a,s){var n=t.stateNode;n.props=a,n.state=t.memoizedState,n.refs={},a2(t);var o=r.contextType;typeof o=="object"&&o!==null?n.context=sn(o):(o=xs(r)?Pl:Ka.current,n.context=pd(t,o)),n.state=t.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(hy(t,r,o,a),n.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Zf.enqueueReplaceState(n,n.state,null),Yp(t,a,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,r){try{var a="",s=r;do a+=P7(s),s=s.return;while(s);var n=a}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:r,stack:n,digest:null}}function Bb(t,r,a){return{value:t,source:null,stack:a??null,digest:r??null}}function gy(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var a8=typeof WeakMap=="function"?WeakMap:Map;function SE(t,r,a){a=jo(-1,a),a.tag=3,a.payload={element:null};var s=r.value;return a.callback=function(){th||(th=!0,ky=s),gy(t,r)},a}function CE(t,r,a){a=jo(-1,a),a.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=r.value;a.payload=function(){return s(n)},a.callback=function(){gy(t,r)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(a.callback=function(){gy(t,r),typeof s!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:i!==null?i:""})}),a}function A_(t,r,a){var s=t.pingCache;if(s===null){s=t.pingCache=new a8;var n=new Set;s.set(r,n)}else n=s.get(r),n===void 0&&(n=new Set,s.set(r,n));n.has(a)||(n.add(a),t=g8.bind(null,t,r,a),r.then(t,t))}function P_(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function T_(t,r,a,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=jo(-1,1),r.tag=2,wi(a,r,1))),a.lanes|=1),t)}var s8=qo.ReactCurrentOwner,ds=!1;function Xa(t,r,a,s){r.child=t===null?tE(r,null,a,s):fd(r,t.child,a,s)}function O_(t,r,a,s,n){a=a.render;var o=r.ref;return Zc(r,n),s=l2(t,r,a,s,o,n),a=c2(),t!==null&&!ds?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,To(t,r,n)):(Pr&&a&&Y1(r),r.flags|=1,Xa(t,r,s,n),r.child)}function F_(t,r,a,s,n){if(t===null){var o=a.type;return typeof o=="function"&&!v2(o)&&o.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=o,kE(t,r,o,s,n)):(t=kp(a.type,null,s,r,r.mode,n),t.ref=r.ref,t.return=r,r.child=t)}if(o=t.child,!(t.lanes&n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:Fm,a(i,s)&&t.ref===r.ref)return To(t,r,n)}return r.flags|=1,t=Ci(o,s),t.ref=r.ref,t.return=r,r.child=t}function kE(t,r,a,s,n){if(t!==null){var o=t.memoizedProps;if(Fm(o,s)&&t.ref===r.ref)if(ds=!1,r.pendingProps=s=o,(t.lanes&n)!==0)t.flags&131072&&(ds=!0);else return r.lanes=t.lanes,To(t,r,n)}return by(t,r,a,s,n)}function EE(t,r,a){var s=r.pendingProps,n=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(zc,ks),ks|=a;else{if(!(a&1073741824))return t=o!==null?o.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,jr(zc,ks),ks|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:a,jr(zc,ks),ks|=s}else o!==null?(s=o.baseLanes|a,r.memoizedState=null):s=a,jr(zc,ks),ks|=s;return Xa(t,r,n,a),r.child}function AE(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function by(t,r,a,s,n){var o=xs(a)?Pl:Ka.current;return o=pd(r,o),Zc(r,n),a=l2(t,r,a,s,o,n),s=c2(),t!==null&&!ds?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,To(t,r,n)):(Pr&&s&&Y1(r),r.flags|=1,Xa(t,r,a,n),r.child)}function R_(t,r,a,s,n){if(xs(a)){var o=!0;Wp(r)}else o=!1;if(Zc(r,n),r.stateNode===null)_p(t,r),_E(r,a,s),fy(r,a,s,n),s=!0;else if(t===null){var i=r.stateNode,l=r.memoizedProps;i.props=l;var c=i.context,d=a.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=xs(a)?Pl:Ka.current,d=pd(r,d));var u=a.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==d)&&E_(r,i,s,d),ni=!1;var x=r.memoizedState;i.state=x,Yp(r,s,i,n),c=r.memoizedState,l!==s||x!==c||ms.current||ni?(typeof u=="function"&&(hy(r,a,u,s),c=r.memoizedState),(l=ni||k_(r,a,l,s,x,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(r.flags|=4194308)):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=c),i.props=s,i.state=c,i.context=d,s=l):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{i=r.stateNode,aE(t,r),l=r.memoizedProps,d=r.type===r.elementType?l:fn(r.type,l),i.props=d,m=r.pendingProps,x=i.context,c=a.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=xs(a)?Pl:Ka.current,c=pd(r,c));var h=a.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||x!==c)&&E_(r,i,s,c),ni=!1,x=r.memoizedState,i.state=x,Yp(r,s,i,n);var b=r.memoizedState;l!==m||x!==b||ms.current||ni?(typeof h=="function"&&(hy(r,a,h,s),b=r.memoizedState),(d=ni||k_(r,a,d,s,x,b,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,b,c)),typeof i.componentDidUpdate=="function"&&(r.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=b),i.props=s,i.state=b,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=1024),s=!1)}return vy(t,r,a,s,o,n)}function vy(t,r,a,s,n,o){AE(t,r);var i=(r.flags&128)!==0;if(!s&&!i)return n&&v_(r,a,!1),To(t,r,o);s=r.stateNode,s8.current=r;var l=i&&typeof a.getDerivedStateFromError!="function"?null:s.render();return r.flags|=1,t!==null&&i?(r.child=fd(r,t.child,null,o),r.child=fd(r,null,l,o)):Xa(t,r,l,o),r.memoizedState=s.state,n&&v_(r,a,!0),r.child}function PE(t){var r=t.stateNode;r.pendingContext?b_(t,r.pendingContext,r.pendingContext!==r.context):r.context&&b_(t,r.context,!1),s2(t,r.containerInfo)}function $_(t,r,a,s,n){return hd(),J1(n),r.flags|=256,Xa(t,r,a,s),r.child}var yy={dehydrated:null,treeContext:null,retryLane:0};function jy(t){return{baseLanes:t,cachePool:null,transitions:null}}function TE(t,r,a){var s=r.pendingProps,n=Fr.current,o=!1,i=(r.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(n&2)!==0),l?(o=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),jr(Fr,n&1),t===null)return xy(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(i=s.children,t=s.fallback,o?(s=r.mode,o=r.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=rg(i,s,0,null),t=yl(t,s,a,null),o.return=r,t.return=r,o.sibling=t,r.child=o,r.child.memoizedState=jy(a),r.memoizedState=yy,t):m2(r,i));if(n=t.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return n8(t,r,i,s,l,n,a);if(o){o=s.fallback,i=r.mode,n=t.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&r.child!==n?(s=r.child,s.childLanes=0,s.pendingProps=c,r.deletions=null):(s=Ci(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?o=Ci(l,o):(o=yl(o,i,a,null),o.flags|=2),o.return=r,s.return=r,s.sibling=o,r.child=s,s=o,o=r.child,i=t.child.memoizedState,i=i===null?jy(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~a,r.memoizedState=yy,s}return o=t.child,t=o.sibling,s=Ci(o,{mode:"visible",children:s.children}),!(r.mode&1)&&(s.lanes=a),s.return=r,s.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=s,r.memoizedState=null,s}function m2(t,r){return r=rg({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function $0(t,r,a,s){return s!==null&&J1(s),fd(r,t.child,null,a),t=m2(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function n8(t,r,a,s,n,o,i){if(a)return r.flags&256?(r.flags&=-257,s=Bb(Error(at(422))),$0(t,r,i,s)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(o=s.fallback,n=r.mode,s=rg({mode:"visible",children:s.children},n,0,null),o=yl(o,n,i,null),o.flags|=2,s.return=r,o.return=r,s.sibling=o,r.child=s,r.mode&1&&fd(r,t.child,null,i),r.child.memoizedState=jy(i),r.memoizedState=yy,o);if(!(r.mode&1))return $0(t,r,i,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(at(419)),s=Bb(o,s,void 0),$0(t,r,i,s)}if(l=(i&t.childLanes)!==0,ds||l){if(s=Sa,s!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,Po(t,n),Cn(s,t,n,-1))}return b2(),s=Bb(Error(at(421))),$0(t,r,i,s)}return n.data==="$?"?(r.flags|=128,r.child=t.child,r=b8.bind(null,t),n._reactRetry=r,null):(t=o.treeContext,Fs=Ni(n.nextSibling),Rs=r,Pr=!0,yn=null,t!==null&&(Js[Zs++]=fo,Js[Zs++]=go,Js[Zs++]=Tl,fo=t.id,go=t.overflow,Tl=r),r=m2(r,s.children),r.flags|=4096,r)}function D_(t,r,a){t.lanes|=r;var s=t.alternate;s!==null&&(s.lanes|=r),py(t.return,r,a)}function zb(t,r,a,s,n){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function OE(t,r,a){var s=r.pendingProps,n=s.revealOrder,o=s.tail;if(Xa(t,r,s.children,a),s=Fr.current,s&2)s=s&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D_(t,a,r);else if(t.tag===19)D_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(jr(Fr,s),!(r.mode&1))r.memoizedState=null;else switch(n){case"forwards":for(a=r.child,n=null;a!==null;)t=a.alternate,t!==null&&Qp(t)===null&&(n=a),a=a.sibling;a=n,a===null?(n=r.child,r.child=null):(n=a.sibling,a.sibling=null),zb(r,!1,n,a,o);break;case"backwards":for(a=null,n=r.child,r.child=null;n!==null;){if(t=n.alternate,t!==null&&Qp(t)===null){r.child=n;break}t=n.sibling,n.sibling=a,a=n,n=t}zb(r,!0,a,null,o);break;case"together":zb(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function _p(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function To(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Fl|=r.lanes,!(a&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(at(153));if(r.child!==null){for(t=r.child,a=Ci(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Ci(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function o8(t,r,a){switch(r.tag){case 3:PE(r),hd();break;case 5:sE(r);break;case 1:xs(r.type)&&Wp(r);break;case 4:s2(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,n=r.memoizedProps.value;jr(Gp,s._currentValue),s._currentValue=n;break;case 13:if(s=r.memoizedState,s!==null)return s.dehydrated!==null?(jr(Fr,Fr.current&1),r.flags|=128,null):a&r.child.childLanes?TE(t,r,a):(jr(Fr,Fr.current&1),t=To(t,r,a),t!==null?t.sibling:null);jr(Fr,Fr.current&1);break;case 19:if(s=(a&r.childLanes)!==0,t.flags&128){if(s)return OE(t,r,a);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),jr(Fr,Fr.current),s)break;return null;case 22:case 23:return r.lanes=0,EE(t,r,a)}return To(t,r,a)}var FE,Ny,RE,$E;FE=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Ny=function(){};RE=function(t,r,a,s){var n=t.memoizedProps;if(n!==s){t=r.stateNode,ml(Xn.current);var o=null;switch(a){case"input":n=Uv(t,n),s=Uv(t,s),o=[];break;case"select":n=Dr({},n,{value:void 0}),s=Dr({},s,{value:void 0}),o=[];break;case"textarea":n=Kv(t,n),s=Kv(t,s),o=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Vp)}Xv(a,s);var i;a=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(i in l)l.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Cm.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var c=s[d];if(l=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(a||(a={}),a[i]=c[i])}else a||(o||(o=[]),o.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Cm.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&wr("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}a&&(o=o||[]).push("style",a);var d=o;(r.updateQueue=d)&&(r.flags|=4)}};$E=function(t,r,a,s){a!==s&&(r.flags|=4)};function Ou(t,r){if(!Pr)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ba(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,s=0;if(r)for(var n=t.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=a,r}function i8(t,r,a){var s=r.pendingProps;switch(Q1(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ba(r),null;case 1:return xs(r.type)&&Up(),Ba(r),null;case 3:return s=r.stateNode,gd(),Cr(ms),Cr(Ka),o2(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(F0(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,yn!==null&&(Py(yn),yn=null))),Ny(t,r),Ba(r),null;case 5:n2(r);var n=ml(Im.current);if(a=r.type,t!==null&&r.stateNode!=null)RE(t,r,a,s,n),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(r.stateNode===null)throw Error(at(166));return Ba(r),null}if(t=ml(Xn.current),F0(r)){s=r.stateNode,a=r.type;var o=r.memoizedProps;switch(s[qn]=r,s[Dm]=o,t=(r.mode&1)!==0,a){case"dialog":wr("cancel",s),wr("close",s);break;case"iframe":case"object":case"embed":wr("load",s);break;case"video":case"audio":for(n=0;n<Ju.length;n++)wr(Ju[n],s);break;case"source":wr("error",s);break;case"img":case"image":case"link":wr("error",s),wr("load",s);break;case"details":wr("toggle",s);break;case"input":Ww(s,o),wr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},wr("invalid",s);break;case"textarea":Kw(s,o),wr("invalid",s)}Xv(a,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&O0(s.textContent,l,t),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&O0(s.textContent,l,t),n=["children",""+l]):Cm.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&wr("scroll",s)}switch(a){case"input":_0(s),Hw(s,o,!0);break;case"textarea":_0(s),Gw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Vp)}s=n,r.updateQueue=s,s!==null&&(r.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c5(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=i.createElement(a,{is:s.is}):(t=i.createElement(a),a==="select"&&(i=t,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):t=i.createElementNS(t,a),t[qn]=r,t[Dm]=s,FE(t,r,!1,!1),r.stateNode=t;e:{switch(i=Yv(a,s),a){case"dialog":wr("cancel",t),wr("close",t),n=s;break;case"iframe":case"object":case"embed":wr("load",t),n=s;break;case"video":case"audio":for(n=0;n<Ju.length;n++)wr(Ju[n],t);n=s;break;case"source":wr("error",t),n=s;break;case"img":case"image":case"link":wr("error",t),wr("load",t),n=s;break;case"details":wr("toggle",t),n=s;break;case"input":Ww(t,s),n=Uv(t,s),wr("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=Dr({},s,{value:void 0}),wr("invalid",t);break;case"textarea":Kw(t,s),n=Kv(t,s),wr("invalid",t);break;default:n=s}Xv(a,n),l=n;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?m5(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&d5(t,c)):o==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&km(t,c):typeof c=="number"&&km(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cm.hasOwnProperty(o)?c!=null&&o==="onScroll"&&wr("scroll",t):c!=null&&D1(t,o,c,i))}switch(a){case"input":_0(t),Hw(t,s,!1);break;case"textarea":_0(t),Gw(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Ai(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?Xc(t,!!s.multiple,o,!1):s.defaultValue!=null&&Xc(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Vp)}switch(a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ba(r),null;case 6:if(t&&r.stateNode!=null)$E(t,r,t.memoizedProps,s);else{if(typeof s!="string"&&r.stateNode===null)throw Error(at(166));if(a=ml(Im.current),ml(Xn.current),F0(r)){if(s=r.stateNode,a=r.memoizedProps,s[qn]=r,(o=s.nodeValue!==a)&&(t=Rs,t!==null))switch(t.tag){case 3:O0(s.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&O0(s.nodeValue,a,(t.mode&1)!==0)}o&&(r.flags|=4)}else s=(a.nodeType===9?a:a.ownerDocument).createTextNode(s),s[qn]=r,r.stateNode=s}return Ba(r),null;case 13:if(Cr(Fr),s=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pr&&Fs!==null&&r.mode&1&&!(r.flags&128))Z5(),hd(),r.flags|=98560,o=!1;else if(o=F0(r),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(at(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(at(317));o[qn]=r}else hd(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Ba(r),o=!1}else yn!==null&&(Py(yn),yn=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||Fr.current&1?pa===0&&(pa=3):b2())),r.updateQueue!==null&&(r.flags|=4),Ba(r),null);case 4:return gd(),Ny(t,r),t===null&&Rm(r.stateNode.containerInfo),Ba(r),null;case 10:return t2(r.type._context),Ba(r),null;case 17:return xs(r.type)&&Up(),Ba(r),null;case 19:if(Cr(Fr),o=r.memoizedState,o===null)return Ba(r),null;if(s=(r.flags&128)!==0,i=o.rendering,i===null)if(s)Ou(o,!1);else{if(pa!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(i=Qp(t),i!==null){for(r.flags|=128,Ou(o,!1),s=i.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=a,a=r.child;a!==null;)o=a,t=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return jr(Fr,Fr.current&1|2),r.child}t=t.sibling}o.tail!==null&&Wr()>vd&&(r.flags|=128,s=!0,Ou(o,!1),r.lanes=4194304)}else{if(!s)if(t=Qp(i),t!==null){if(r.flags|=128,s=!0,a=t.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ou(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Pr)return Ba(r),null}else 2*Wr()-o.renderingStartTime>vd&&a!==1073741824&&(r.flags|=128,s=!0,Ou(o,!1),r.lanes=4194304);o.isBackwards?(i.sibling=r.child,r.child=i):(a=o.last,a!==null?a.sibling=i:r.child=i,o.last=i)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=Wr(),r.sibling=null,a=Fr.current,jr(Fr,s?a&1|2:a&1),r):(Ba(r),null);case 22:case 23:return g2(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?ks&1073741824&&(Ba(r),r.subtreeFlags&6&&(r.flags|=8192)):Ba(r),null;case 24:return null;case 25:return null}throw Error(at(156,r.tag))}function l8(t,r){switch(Q1(r),r.tag){case 1:return xs(r.type)&&Up(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return gd(),Cr(ms),Cr(Ka),o2(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return n2(r),null;case 13:if(Cr(Fr),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(at(340));hd()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Cr(Fr),null;case 4:return gd(),null;case 10:return t2(r.type._context),null;case 22:case 23:return g2(),null;case 24:return null;default:return null}}var D0=!1,qa=!1,c8=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Bc(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(s){Ir(t,r,s)}else a.current=null}function wy(t,r,a){try{a()}catch(s){Ir(t,r,s)}}var M_=!1;function d8(t,r){if(oy=Bp,t=B5(),X1(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=t,x=null;t:for(;;){for(var h;m!==a||n!==0&&m.nodeType!==3||(l=i+n),m!==o||s!==0&&m.nodeType!==3||(c=i+s),m.nodeType===3&&(i+=m.nodeValue.length),(h=m.firstChild)!==null;)x=m,m=h;for(;;){if(m===t)break t;if(x===a&&++d===n&&(l=i),x===o&&++u===s&&(c=i),(h=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=h}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(iy={focusedElem:t,selectionRange:a},Bp=!1,yt=r;yt!==null;)if(r=yt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,yt=t;else for(;yt!==null;){r=yt;try{var b=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var p=b.memoizedProps,f=b.memoizedState,v=r.stateNode,g=v.getSnapshotBeforeUpdate(r.elementType===r.type?p:fn(r.type,p),f);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=r.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(at(163))}}catch(N){Ir(r,r.return,N)}if(t=r.sibling,t!==null){t.return=r.return,yt=t;break}yt=r.return}return b=M_,M_=!1,b}function im(t,r,a){var s=r.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var o=n.destroy;n.destroy=void 0,o!==void 0&&wy(r,a,o)}n=n.next}while(n!==s)}}function eg(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var s=a.create;a.destroy=s()}a=a.next}while(a!==r)}}function _y(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof r=="function"?r(t):r.current=t}}function DE(t){var r=t.alternate;r!==null&&(t.alternate=null,DE(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[qn],delete r[Dm],delete r[dy],delete r[HD],delete r[KD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ME(t){return t.tag===5||t.tag===3||t.tag===4}function I_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ME(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sy(t,r,a){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Vp));else if(s!==4&&(t=t.child,t!==null))for(Sy(t,r,a),t=t.sibling;t!==null;)Sy(t,r,a),t=t.sibling}function Cy(t,r,a){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Cy(t,r,a),t=t.sibling;t!==null;)Cy(t,r,a),t=t.sibling}var Pa=null,gn=!1;function Qo(t,r,a){for(a=a.child;a!==null;)IE(t,r,a),a=a.sibling}function IE(t,r,a){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Hf,a)}catch{}switch(a.tag){case 5:qa||Bc(a,r);case 6:var s=Pa,n=gn;Pa=null,Qo(t,r,a),Pa=s,gn=n,Pa!==null&&(gn?(t=Pa,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Pa.removeChild(a.stateNode));break;case 18:Pa!==null&&(gn?(t=Pa,a=a.stateNode,t.nodeType===8?Rb(t.parentNode,a):t.nodeType===1&&Rb(t,a),Tm(t)):Rb(Pa,a.stateNode));break;case 4:s=Pa,n=gn,Pa=a.stateNode.containerInfo,gn=!0,Qo(t,r,a),Pa=s,gn=n;break;case 0:case 11:case 14:case 15:if(!qa&&(s=a.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&wy(a,r,i),n=n.next}while(n!==s)}Qo(t,r,a);break;case 1:if(!qa&&(Bc(a,r),s=a.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=a.memoizedProps,s.state=a.memoizedState,s.componentWillUnmount()}catch(l){Ir(a,r,l)}Qo(t,r,a);break;case 21:Qo(t,r,a);break;case 22:a.mode&1?(qa=(s=qa)||a.memoizedState!==null,Qo(t,r,a),qa=s):Qo(t,r,a);break;default:Qo(t,r,a)}}function L_(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new c8),r.forEach(function(s){var n=v8.bind(null,t,s);a.has(s)||(a.add(s),s.then(n,n))})}}function mn(t,r){var a=r.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];try{var o=t,i=r,l=i;e:for(;l!==null;){switch(l.tag){case 5:Pa=l.stateNode,gn=!1;break e;case 3:Pa=l.stateNode.containerInfo,gn=!0;break e;case 4:Pa=l.stateNode.containerInfo,gn=!0;break e}l=l.return}if(Pa===null)throw Error(at(160));IE(o,i,n),Pa=null,gn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Ir(n,r,d)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)LE(r,t),r=r.sibling}function LE(t,r){var a=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(r,t),Mn(t),s&4){try{im(3,t,t.return),eg(3,t)}catch(p){Ir(t,t.return,p)}try{im(5,t,t.return)}catch(p){Ir(t,t.return,p)}}break;case 1:mn(r,t),Mn(t),s&512&&a!==null&&Bc(a,a.return);break;case 5:if(mn(r,t),Mn(t),s&512&&a!==null&&Bc(a,a.return),t.flags&32){var n=t.stateNode;try{km(n,"")}catch(p){Ir(t,t.return,p)}}if(s&4&&(n=t.stateNode,n!=null)){var o=t.memoizedProps,i=a!==null?a.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&i5(n,o),Yv(l,i);var d=Yv(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?m5(n,m):u==="dangerouslySetInnerHTML"?d5(n,m):u==="children"?km(n,m):D1(n,u,m,d)}switch(l){case"input":Wv(n,o);break;case"textarea":l5(n,o);break;case"select":var x=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Xc(n,!!o.multiple,h,!1):x!==!!o.multiple&&(o.defaultValue!=null?Xc(n,!!o.multiple,o.defaultValue,!0):Xc(n,!!o.multiple,o.multiple?[]:"",!1))}n[Dm]=o}catch(p){Ir(t,t.return,p)}}break;case 6:if(mn(r,t),Mn(t),s&4){if(t.stateNode===null)throw Error(at(162));n=t.stateNode,o=t.memoizedProps;try{n.nodeValue=o}catch(p){Ir(t,t.return,p)}}break;case 3:if(mn(r,t),Mn(t),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Tm(r.containerInfo)}catch(p){Ir(t,t.return,p)}break;case 4:mn(r,t),Mn(t);break;case 13:mn(r,t),Mn(t),n=t.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(h2=Wr())),s&4&&L_(t);break;case 22:if(u=a!==null&&a.memoizedState!==null,t.mode&1?(qa=(d=qa)||u,mn(r,t),qa=d):mn(r,t),Mn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(m=yt=u;yt!==null;){switch(x=yt,h=x.child,x.tag){case 0:case 11:case 14:case 15:im(4,x,x.return);break;case 1:Bc(x,x.return);var b=x.stateNode;if(typeof b.componentWillUnmount=="function"){s=x,a=x.return;try{r=s,b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(p){Ir(s,a,p)}}break;case 5:Bc(x,x.return);break;case 22:if(x.memoizedState!==null){z_(m);continue}}h!==null?(h.return=x,yt=h):z_(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=u5("display",i))}catch(p){Ir(t,t.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){Ir(t,t.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:mn(r,t),Mn(t),s&4&&L_(t);break;case 21:break;default:mn(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{e:{for(var a=t.return;a!==null;){if(ME(a)){var s=a;break e}a=a.return}throw Error(at(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(km(n,""),s.flags&=-33);var o=I_(t);Cy(t,o,n);break;case 3:case 4:var i=s.stateNode.containerInfo,l=I_(t);Sy(t,l,i);break;default:throw Error(at(161))}}catch(c){Ir(t,t.return,c)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function u8(t,r,a){yt=t,BE(t)}function BE(t,r,a){for(var s=(t.mode&1)!==0;yt!==null;){var n=yt,o=n.child;if(n.tag===22&&s){var i=n.memoizedState!==null||D0;if(!i){var l=n.alternate,c=l!==null&&l.memoizedState!==null||qa;l=D0;var d=qa;if(D0=i,(qa=c)&&!d)for(yt=n;yt!==null;)i=yt,c=i.child,i.tag===22&&i.memoizedState!==null?q_(n):c!==null?(c.return=i,yt=c):q_(n);for(;o!==null;)yt=o,BE(o),o=o.sibling;yt=n,D0=l,qa=d}B_(t)}else n.subtreeFlags&8772&&o!==null?(o.return=n,yt=o):B_(t)}}function B_(t){for(;yt!==null;){var r=yt;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:qa||eg(5,r);break;case 1:var s=r.stateNode;if(r.flags&4&&!qa)if(a===null)s.componentDidMount();else{var n=r.elementType===r.type?a.memoizedProps:fn(r.type,a.memoizedProps);s.componentDidUpdate(n,a.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&__(r,o,s);break;case 3:var i=r.updateQueue;if(i!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}__(r,i,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var c=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var d=r.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Tm(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(at(163))}qa||r.flags&512&&_y(r)}catch(x){Ir(r,r.return,x)}}if(r===t){yt=null;break}if(a=r.sibling,a!==null){a.return=r.return,yt=a;break}yt=r.return}}function z_(t){for(;yt!==null;){var r=yt;if(r===t){yt=null;break}var a=r.sibling;if(a!==null){a.return=r.return,yt=a;break}yt=r.return}}function q_(t){for(;yt!==null;){var r=yt;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{eg(4,r)}catch(c){Ir(r,a,c)}break;case 1:var s=r.stateNode;if(typeof s.componentDidMount=="function"){var n=r.return;try{s.componentDidMount()}catch(c){Ir(r,n,c)}}var o=r.return;try{_y(r)}catch(c){Ir(r,o,c)}break;case 5:var i=r.return;try{_y(r)}catch(c){Ir(r,i,c)}}}catch(c){Ir(r,r.return,c)}if(r===t){yt=null;break}var l=r.sibling;if(l!==null){l.return=r.return,yt=l;break}yt=r.return}}var m8=Math.ceil,eh=qo.ReactCurrentDispatcher,x2=qo.ReactCurrentOwner,an=qo.ReactCurrentBatchConfig,Qt=0,Sa=null,ea=null,Ra=0,ks=0,zc=Mi(0),pa=0,qm=null,Fl=0,tg=0,p2=0,lm=null,cs=null,h2=0,vd=1/0,mo=null,th=!1,ky=null,_i=null,M0=!1,mi=null,rh=0,cm=0,Ey=null,Sp=-1,Cp=0;function ts(){return Qt&6?Wr():Sp!==-1?Sp:Sp=Wr()}function Si(t){return t.mode&1?Qt&2&&Ra!==0?Ra&-Ra:XD.transition!==null?(Cp===0&&(Cp=_5()),Cp):(t=dr,t!==0||(t=window.event,t=t===void 0?16:T5(t.type)),t):1}function Cn(t,r,a,s){if(50<cm)throw cm=0,Ey=null,Error(at(185));Vx(t,a,s),(!(Qt&2)||t!==Sa)&&(t===Sa&&(!(Qt&2)&&(tg|=a),pa===4&&li(t,Ra)),ps(t,s),a===1&&Qt===0&&!(r.mode&1)&&(vd=Wr()+500,Qf&&Ii()))}function ps(t,r){var a=t.callbackNode;X7(t,r);var s=Lp(t,t===Sa?Ra:0);if(s===0)a!==null&&Qw(a),t.callbackNode=null,t.callbackPriority=0;else if(r=s&-s,t.callbackPriority!==r){if(a!=null&&Qw(a),r===1)t.tag===0?GD(V_.bind(null,t)):Y5(V_.bind(null,t)),UD(function(){!(Qt&6)&&Ii()}),a=null;else{switch(S5(s)){case 1:a=z1;break;case 4:a=N5;break;case 16:a=Ip;break;case 536870912:a=w5;break;default:a=Ip}a=GE(a,zE.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function zE(t,r){if(Sp=-1,Cp=0,Qt&6)throw Error(at(327));var a=t.callbackNode;if(ed()&&t.callbackNode!==a)return null;var s=Lp(t,t===Sa?Ra:0);if(s===0)return null;if(s&30||s&t.expiredLanes||r)r=ah(t,s);else{r=s;var n=Qt;Qt|=2;var o=VE();(Sa!==t||Ra!==r)&&(mo=null,vd=Wr()+500,vl(t,r));do try{h8();break}catch(l){qE(t,l)}while(!0);e2(),eh.current=o,Qt=n,ea!==null?r=0:(Sa=null,Ra=0,r=pa)}if(r!==0){if(r===2&&(n=ty(t),n!==0&&(s=n,r=Ay(t,n))),r===1)throw a=qm,vl(t,0),li(t,s),ps(t,Wr()),a;if(r===6)li(t,s);else{if(n=t.current.alternate,!(s&30)&&!x8(n)&&(r=ah(t,s),r===2&&(o=ty(t),o!==0&&(s=o,r=Ay(t,o))),r===1))throw a=qm,vl(t,0),li(t,s),ps(t,Wr()),a;switch(t.finishedWork=n,t.finishedLanes=s,r){case 0:case 1:throw Error(at(345));case 2:al(t,cs,mo);break;case 3:if(li(t,s),(s&130023424)===s&&(r=h2+500-Wr(),10<r)){if(Lp(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){ts(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=cy(al.bind(null,t,cs,mo),r);break}al(t,cs,mo);break;case 4:if(li(t,s),(s&4194240)===s)break;for(r=t.eventTimes,n=-1;0<s;){var i=31-Sn(s);o=1<<i,i=r[i],i>n&&(n=i),s&=~o}if(s=n,s=Wr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*m8(s/1960))-s,10<s){t.timeoutHandle=cy(al.bind(null,t,cs,mo),s);break}al(t,cs,mo);break;case 5:al(t,cs,mo);break;default:throw Error(at(329))}}}return ps(t,Wr()),t.callbackNode===a?zE.bind(null,t):null}function Ay(t,r){var a=lm;return t.current.memoizedState.isDehydrated&&(vl(t,r).flags|=256),t=ah(t,r),t!==2&&(r=cs,cs=a,r!==null&&Py(r)),t}function Py(t){cs===null?cs=t:cs.push.apply(cs,t)}function x8(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!Pn(o(),n))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function li(t,r){for(r&=~p2,r&=~tg,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-Sn(r),s=1<<a;t[a]=-1,r&=~s}}function V_(t){if(Qt&6)throw Error(at(327));ed();var r=Lp(t,0);if(!(r&1))return ps(t,Wr()),null;var a=ah(t,r);if(t.tag!==0&&a===2){var s=ty(t);s!==0&&(r=s,a=Ay(t,s))}if(a===1)throw a=qm,vl(t,0),li(t,r),ps(t,Wr()),a;if(a===6)throw Error(at(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,al(t,cs,mo),ps(t,Wr()),null}function f2(t,r){var a=Qt;Qt|=1;try{return t(r)}finally{Qt=a,Qt===0&&(vd=Wr()+500,Qf&&Ii())}}function Rl(t){mi!==null&&mi.tag===0&&!(Qt&6)&&ed();var r=Qt;Qt|=1;var a=an.transition,s=dr;try{if(an.transition=null,dr=1,t)return t()}finally{dr=s,an.transition=a,Qt=r,!(Qt&6)&&Ii()}}function g2(){ks=zc.current,Cr(zc)}function vl(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,VD(a)),ea!==null)for(a=ea.return;a!==null;){var s=a;switch(Q1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Up();break;case 3:gd(),Cr(ms),Cr(Ka),o2();break;case 5:n2(s);break;case 4:gd();break;case 13:Cr(Fr);break;case 19:Cr(Fr);break;case 10:t2(s.type._context);break;case 22:case 23:g2()}a=a.return}if(Sa=t,ea=t=Ci(t.current,null),Ra=ks=r,pa=0,qm=null,p2=tg=Fl=0,cs=lm=null,ul!==null){for(r=0;r<ul.length;r++)if(a=ul[r],s=a.interleaved,s!==null){a.interleaved=null;var n=s.next,o=a.pending;if(o!==null){var i=o.next;o.next=n,s.next=i}a.pending=s}ul=null}return t}function qE(t,r){do{var a=ea;try{if(e2(),Np.current=Zp,Jp){for(var s=$r.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Jp=!1}if(Ol=0,va=ma=$r=null,om=!1,Lm=0,x2.current=null,a===null||a.return===null){pa=1,qm=r,ea=null;break}e:{var o=t,i=a.return,l=a,c=r;if(r=Ra,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=P_(i);if(h!==null){h.flags&=-257,T_(h,i,l,o,r),h.mode&1&&A_(o,d,r),r=h,c=d;var b=r.updateQueue;if(b===null){var p=new Set;p.add(c),r.updateQueue=p}else b.add(c);break e}else{if(!(r&1)){A_(o,d,r),b2();break e}c=Error(at(426))}}else if(Pr&&l.mode&1){var f=P_(i);if(f!==null){!(f.flags&65536)&&(f.flags|=256),T_(f,i,l,o,r),J1(bd(c,l));break e}}o=c=bd(c,l),pa!==4&&(pa=2),lm===null?lm=[o]:lm.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var v=SE(o,c,r);w_(o,v);break e;case 1:l=c;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(_i===null||!_i.has(y)))){o.flags|=65536,r&=-r,o.lanes|=r;var N=CE(o,l,r);w_(o,N);break e}}o=o.return}while(o!==null)}WE(a)}catch(_){r=_,ea===a&&a!==null&&(ea=a=a.return);continue}break}while(!0)}function VE(){var t=eh.current;return eh.current=Zp,t===null?Zp:t}function b2(){(pa===0||pa===3||pa===2)&&(pa=4),Sa===null||!(Fl&268435455)&&!(tg&268435455)||li(Sa,Ra)}function ah(t,r){var a=Qt;Qt|=2;var s=VE();(Sa!==t||Ra!==r)&&(mo=null,vl(t,r));do try{p8();break}catch(n){qE(t,n)}while(!0);if(e2(),Qt=a,eh.current=s,ea!==null)throw Error(at(261));return Sa=null,Ra=0,pa}function p8(){for(;ea!==null;)UE(ea)}function h8(){for(;ea!==null&&!B7();)UE(ea)}function UE(t){var r=KE(t.alternate,t,ks);t.memoizedProps=t.pendingProps,r===null?WE(t):ea=r,x2.current=null}function WE(t){var r=t;do{var a=r.alternate;if(t=r.return,r.flags&32768){if(a=l8(a,r),a!==null){a.flags&=32767,ea=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pa=6,ea=null;return}}else if(a=i8(a,r,ks),a!==null){ea=a;return}if(r=r.sibling,r!==null){ea=r;return}ea=r=t}while(r!==null);pa===0&&(pa=5)}function al(t,r,a){var s=dr,n=an.transition;try{an.transition=null,dr=1,f8(t,r,a,s)}finally{an.transition=n,dr=s}return null}function f8(t,r,a,s){do ed();while(mi!==null);if(Qt&6)throw Error(at(327));a=t.finishedWork;var n=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(at(177));t.callbackNode=null,t.callbackPriority=0;var o=a.lanes|a.childLanes;if(Y7(t,o),t===Sa&&(ea=Sa=null,Ra=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||M0||(M0=!0,GE(Ip,function(){return ed(),null})),o=(a.flags&15990)!==0,a.subtreeFlags&15990||o){o=an.transition,an.transition=null;var i=dr;dr=1;var l=Qt;Qt|=4,x2.current=null,d8(t,a),LE(a,t),DD(iy),Bp=!!oy,iy=oy=null,t.current=a,u8(a),z7(),Qt=l,dr=i,an.transition=o}else t.current=a;if(M0&&(M0=!1,mi=t,rh=n),o=t.pendingLanes,o===0&&(_i=null),U7(a.stateNode),ps(t,Wr()),r!==null)for(s=t.onRecoverableError,a=0;a<r.length;a++)n=r[a],s(n.value,{componentStack:n.stack,digest:n.digest});if(th)throw th=!1,t=ky,ky=null,t;return rh&1&&t.tag!==0&&ed(),o=t.pendingLanes,o&1?t===Ey?cm++:(cm=0,Ey=t):cm=0,Ii(),null}function ed(){if(mi!==null){var t=S5(rh),r=an.transition,a=dr;try{if(an.transition=null,dr=16>t?16:t,mi===null)var s=!1;else{if(t=mi,mi=null,rh=0,Qt&6)throw Error(at(331));var n=Qt;for(Qt|=4,yt=t.current;yt!==null;){var o=yt,i=o.child;if(yt.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(yt=d;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:im(8,u,o)}var m=u.child;if(m!==null)m.return=u,yt=m;else for(;yt!==null;){u=yt;var x=u.sibling,h=u.return;if(DE(u),u===d){yt=null;break}if(x!==null){x.return=h,yt=x;break}yt=h}}}var b=o.alternate;if(b!==null){var p=b.child;if(p!==null){b.child=null;do{var f=p.sibling;p.sibling=null,p=f}while(p!==null)}}yt=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,yt=i;else e:for(;yt!==null;){if(o=yt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:im(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,yt=v;break e}yt=o.return}}var g=t.current;for(yt=g;yt!==null;){i=yt;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,yt=y;else e:for(i=g;yt!==null;){if(l=yt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eg(9,l)}}catch(_){Ir(l,l.return,_)}if(l===i){yt=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,yt=N;break e}yt=l.return}}if(Qt=n,Ii(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Hf,t)}catch{}s=!0}return s}finally{dr=a,an.transition=r}}return!1}function U_(t,r,a){r=bd(a,r),r=SE(t,r,1),t=wi(t,r,1),r=ts(),t!==null&&(Vx(t,1,r),ps(t,r))}function Ir(t,r,a){if(t.tag===3)U_(t,t,a);else for(;r!==null;){if(r.tag===3){U_(r,t,a);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_i===null||!_i.has(s))){t=bd(a,t),t=CE(r,t,1),r=wi(r,t,1),t=ts(),r!==null&&(Vx(r,1,t),ps(r,t));break}}r=r.return}}function g8(t,r,a){var s=t.pingCache;s!==null&&s.delete(r),r=ts(),t.pingedLanes|=t.suspendedLanes&a,Sa===t&&(Ra&a)===a&&(pa===4||pa===3&&(Ra&130023424)===Ra&&500>Wr()-h2?vl(t,0):p2|=a),ps(t,r)}function HE(t,r){r===0&&(t.mode&1?(r=k0,k0<<=1,!(k0&130023424)&&(k0=4194304)):r=1);var a=ts();t=Po(t,r),t!==null&&(Vx(t,r,a),ps(t,a))}function b8(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),HE(t,a)}function v8(t,r){var a=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(at(314))}s!==null&&s.delete(r),HE(t,a)}var KE;KE=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||ms.current)ds=!0;else{if(!(t.lanes&a)&&!(r.flags&128))return ds=!1,o8(t,r,a);ds=!!(t.flags&131072)}else ds=!1,Pr&&r.flags&1048576&&Q5(r,Kp,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;_p(t,r),t=r.pendingProps;var n=pd(r,Ka.current);Zc(r,a),n=l2(null,r,s,t,n,a);var o=c2();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,xs(s)?(o=!0,Wp(r)):o=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,a2(r),n.updater=Zf,r.stateNode=n,n._reactInternals=r,fy(r,s,t,a),r=vy(null,r,s,!0,o,a)):(r.tag=0,Pr&&o&&Y1(r),Xa(null,r,n,a),r=r.child),r;case 16:s=r.elementType;e:{switch(_p(t,r),t=r.pendingProps,n=s._init,s=n(s._payload),r.type=s,n=r.tag=j8(s),t=fn(s,t),n){case 0:r=by(null,r,s,t,a);break e;case 1:r=R_(null,r,s,t,a);break e;case 11:r=O_(null,r,s,t,a);break e;case 14:r=F_(null,r,s,fn(s.type,t),a);break e}throw Error(at(306,s,""))}return r;case 0:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:fn(s,n),by(t,r,s,n,a);case 1:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:fn(s,n),R_(t,r,s,n,a);case 3:e:{if(PE(r),t===null)throw Error(at(387));s=r.pendingProps,o=r.memoizedState,n=o.element,aE(t,r),Yp(r,s,null,a);var i=r.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){n=bd(Error(at(423)),r),r=$_(t,r,s,a,n);break e}else if(s!==n){n=bd(Error(at(424)),r),r=$_(t,r,s,a,n);break e}else for(Fs=Ni(r.stateNode.containerInfo.firstChild),Rs=r,Pr=!0,yn=null,a=tE(r,null,s,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(hd(),s===n){r=To(t,r,a);break e}Xa(t,r,s,a)}r=r.child}return r;case 5:return sE(r),t===null&&xy(r),s=r.type,n=r.pendingProps,o=t!==null?t.memoizedProps:null,i=n.children,ly(s,n)?i=null:o!==null&&ly(s,o)&&(r.flags|=32),AE(t,r),Xa(t,r,i,a),r.child;case 6:return t===null&&xy(r),null;case 13:return TE(t,r,a);case 4:return s2(r,r.stateNode.containerInfo),s=r.pendingProps,t===null?r.child=fd(r,null,s,a):Xa(t,r,s,a),r.child;case 11:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:fn(s,n),O_(t,r,s,n,a);case 7:return Xa(t,r,r.pendingProps,a),r.child;case 8:return Xa(t,r,r.pendingProps.children,a),r.child;case 12:return Xa(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(s=r.type._context,n=r.pendingProps,o=r.memoizedProps,i=n.value,jr(Gp,s._currentValue),s._currentValue=i,o!==null)if(Pn(o.value,i)){if(o.children===n.children&&!ms.current){r=To(t,r,a);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=jo(-1,a&-a),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=a,c=o.alternate,c!==null&&(c.lanes|=a),py(o.return,a,r),l.lanes|=a;break}c=c.next}}else if(o.tag===10)i=o.type===r.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(at(341));i.lanes|=a,l=i.alternate,l!==null&&(l.lanes|=a),py(i,a,r),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===r){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Xa(t,r,n.children,a),r=r.child}return r;case 9:return n=r.type,s=r.pendingProps.children,Zc(r,a),n=sn(n),s=s(n),r.flags|=1,Xa(t,r,s,a),r.child;case 14:return s=r.type,n=fn(s,r.pendingProps),n=fn(s.type,n),F_(t,r,s,n,a);case 15:return kE(t,r,r.type,r.pendingProps,a);case 17:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:fn(s,n),_p(t,r),r.tag=1,xs(s)?(t=!0,Wp(r)):t=!1,Zc(r,a),_E(r,s,n),fy(r,s,n,a),vy(null,r,s,!0,t,a);case 19:return OE(t,r,a);case 22:return EE(t,r,a)}throw Error(at(156,r.tag))};function GE(t,r){return j5(t,r)}function y8(t,r,a,s){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,r,a,s){return new y8(t,r,a,s)}function v2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j8(t){if(typeof t=="function")return v2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I1)return 11;if(t===L1)return 14}return 2}function Ci(t,r){var a=t.alternate;return a===null?(a=tn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function kp(t,r,a,s,n,o){var i=2;if(s=t,typeof t=="function")v2(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Tc:return yl(a.children,n,o,r);case M1:i=8,n|=8;break;case Bv:return t=tn(12,a,r,n|2),t.elementType=Bv,t.lanes=o,t;case zv:return t=tn(13,a,r,n),t.elementType=zv,t.lanes=o,t;case qv:return t=tn(19,a,r,n),t.elementType=qv,t.lanes=o,t;case s5:return rg(a,n,o,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case r5:i=10;break e;case a5:i=9;break e;case I1:i=11;break e;case L1:i=14;break e;case si:i=16,s=null;break e}throw Error(at(130,t==null?t:typeof t,""))}return r=tn(i,a,r,n),r.elementType=t,r.type=s,r.lanes=o,r}function yl(t,r,a,s){return t=tn(7,t,s,r),t.lanes=a,t}function rg(t,r,a,s){return t=tn(22,t,s,r),t.elementType=s5,t.lanes=a,t.stateNode={isHidden:!1},t}function qb(t,r,a){return t=tn(6,t,null,r),t.lanes=a,t}function Vb(t,r,a){return r=tn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function N8(t,r,a,s,n){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wb(0),this.expirationTimes=wb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wb(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function y2(t,r,a,s,n,o,i,l,c){return t=new N8(t,r,a,l,c),r===1?(r=1,o===!0&&(r|=8)):r=0,o=tn(3,null,null,r),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},a2(o),t}function w8(t,r,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pc,key:s==null?null:""+s,children:t,containerInfo:r,implementation:a}}function XE(t){if(!t)return Pi;t=t._reactInternals;e:{if(tc(t)!==t||t.tag!==1)throw Error(at(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(xs(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(at(171))}if(t.tag===1){var a=t.type;if(xs(a))return X5(t,a,r)}return r}function YE(t,r,a,s,n,o,i,l,c){return t=y2(a,s,!0,t,n,o,i,l,c),t.context=XE(null),a=t.current,s=ts(),n=Si(a),o=jo(s,n),o.callback=r??null,wi(a,o,n),t.current.lanes=n,Vx(t,n,s),ps(t,s),t}function ag(t,r,a,s){var n=r.current,o=ts(),i=Si(n);return a=XE(a),r.context===null?r.context=a:r.pendingContext=a,r=jo(o,i),r.payload={element:t},s=s===void 0?null:s,s!==null&&(r.callback=s),t=wi(n,r,i),t!==null&&(Cn(t,n,i,o),jp(t,n,i)),i}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function j2(t,r){W_(t,r),(t=t.alternate)&&W_(t,r)}function _8(){return null}var QE=typeof reportError=="function"?reportError:function(t){console.error(t)};function N2(t){this._internalRoot=t}sg.prototype.render=N2.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(at(409));ag(t,r,null,null)};sg.prototype.unmount=N2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Rl(function(){ag(null,t,null,null)}),r[Ao]=null}};function sg(t){this._internalRoot=t}sg.prototype.unstable_scheduleHydration=function(t){if(t){var r=E5();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ii.length&&r!==0&&r<ii[a].priority;a++);ii.splice(a,0,t),a===0&&P5(t)}};function w2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function H_(){}function S8(t,r,a,s,n){if(n){if(typeof s=="function"){var o=s;s=function(){var d=sh(i);o.call(d)}}var i=YE(r,s,t,0,null,!1,!1,"",H_);return t._reactRootContainer=i,t[Ao]=i.current,Rm(t.nodeType===8?t.parentNode:t),Rl(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var d=sh(c);l.call(d)}}var c=y2(t,0,!1,null,null,!1,!1,"",H_);return t._reactRootContainer=c,t[Ao]=c.current,Rm(t.nodeType===8?t.parentNode:t),Rl(function(){ag(r,c,a,s)}),c}function og(t,r,a,s,n){var o=a._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var l=n;n=function(){var c=sh(i);l.call(c)}}ag(r,i,t,n)}else i=S8(a,r,t,n,s);return sh(i)}C5=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Qu(r.pendingLanes);a!==0&&(q1(r,a|1),ps(r,Wr()),!(Qt&6)&&(vd=Wr()+500,Ii()))}break;case 13:Rl(function(){var s=Po(t,1);if(s!==null){var n=ts();Cn(s,t,1,n)}}),j2(t,1)}};V1=function(t){if(t.tag===13){var r=Po(t,134217728);if(r!==null){var a=ts();Cn(r,t,134217728,a)}j2(t,134217728)}};k5=function(t){if(t.tag===13){var r=Si(t),a=Po(t,r);if(a!==null){var s=ts();Cn(a,t,r,s)}j2(t,r)}};E5=function(){return dr};A5=function(t,r){var a=dr;try{return dr=t,r()}finally{dr=a}};Jv=function(t,r,a){switch(r){case"input":if(Wv(t,a),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var s=a[r];if(s!==t&&s.form===t.form){var n=Yf(s);if(!n)throw Error(at(90));o5(s),Wv(s,n)}}}break;case"textarea":l5(t,a);break;case"select":r=a.value,r!=null&&Xc(t,!!a.multiple,r,!1)}};h5=f2;f5=Rl;var C8={usingClientEntryPoint:!1,Events:[Wx,$c,Yf,x5,p5,f2]},Fu={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k8={bundleType:Fu.bundleType,version:Fu.version,rendererPackageName:Fu.rendererPackageName,rendererConfig:Fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v5(t),t===null?null:t.stateNode},findFiberByHostInstance:Fu.findFiberByHostInstance||_8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var I0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!I0.isDisabled&&I0.supportsFiber)try{Hf=I0.inject(k8),Gn=I0}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C8;Bs.createPortal=function(t,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w2(r))throw Error(at(200));return w8(t,r,null,a)};Bs.createRoot=function(t,r){if(!w2(t))throw Error(at(299));var a=!1,s="",n=QE;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=y2(t,1,!1,null,null,a,!1,s,n),t[Ao]=r.current,Rm(t.nodeType===8?t.parentNode:t),new N2(r)};Bs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(at(188)):(t=Object.keys(t).join(","),Error(at(268,t)));return t=v5(r),t=t===null?null:t.stateNode,t};Bs.flushSync=function(t){return Rl(t)};Bs.hydrate=function(t,r,a){if(!ng(r))throw Error(at(200));return og(null,t,r,!0,a)};Bs.hydrateRoot=function(t,r,a){if(!w2(t))throw Error(at(405));var s=a!=null&&a.hydratedSources||null,n=!1,o="",i=QE;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),r=YE(r,null,t,1,a??null,n,!1,o,i),t[Ao]=r.current,Rm(t),s)for(t=0;t<s.length;t++)a=s[t],n=a._getVersion,n=n(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,n]:r.mutableSourceEagerHydrationData.push(a,n);return new sg(r)};Bs.render=function(t,r,a){if(!ng(r))throw Error(at(200));return og(null,t,r,!1,a)};Bs.unmountComponentAtNode=function(t){if(!ng(t))throw Error(at(40));return t._reactRootContainer?(Rl(function(){og(null,null,t,!1,function(){t._reactRootContainer=null,t[Ao]=null})}),!0):!1};Bs.unstable_batchedUpdates=f2;Bs.unstable_renderSubtreeIntoContainer=function(t,r,a,s){if(!ng(a))throw Error(at(200));if(t==null||t._reactInternals===void 0)throw Error(at(38));return og(t,r,a,!1,s)};Bs.version="18.3.1-next-f1338f8080-20240426";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),J6.exports=Bs;var E8=J6.exports,K_=E8;Iv.createRoot=K_.createRoot,Iv.hydrateRoot=K_.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Vm.apply(this,arguments)}var xi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xi||(xi={}));const G_="popstate";function A8(t){t===void 0&&(t={});function r(s,n){let{pathname:o,search:i,hash:l}=s.location;return Ty("",{pathname:o,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(s,n){return typeof n=="string"?n:nh(n)}return T8(r,a,null,t)}function Xr(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function _2(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function P8(){return Math.random().toString(36).substr(2,8)}function X_(t,r){return{usr:t.state,key:t.key,idx:r}}function Ty(t,r,a,s){return a===void 0&&(a=null),Vm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?au(r):r,{state:a,key:r&&r.key||s||P8()})}function nh(t){let{pathname:r="/",search:a="",hash:s=""}=t;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function au(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substr(a),t=t.substr(0,a));let s=t.indexOf("?");s>=0&&(r.search=t.substr(s),t=t.substr(0,s)),t&&(r.pathname=t)}return r}function T8(t,r,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=xi.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(Vm({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=xi.Pop;let f=u(),v=f==null?null:f-d;d=f,c&&c({action:l,location:p.location,delta:v})}function x(f,v){l=xi.Push;let g=Ty(p.location,f,v);d=u()+1;let y=X_(g,d),N=p.createHref(g);try{i.pushState(y,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(N)}o&&c&&c({action:l,location:p.location,delta:1})}function h(f,v){l=xi.Replace;let g=Ty(p.location,f,v);d=u();let y=X_(g,d),N=p.createHref(g);i.replaceState(y,"",N),o&&c&&c({action:l,location:p.location,delta:0})}function b(f){let v=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof f=="string"?f:nh(f);return g=g.replace(/ $/,"%20"),Xr(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let p={get action(){return l},get location(){return t(n,i)},listen(f){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(G_,m),c=f,()=>{n.removeEventListener(G_,m),c=null}},createHref(f){return r(n,f)},createURL:b,encodeLocation(f){let v=b(f);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:x,replace:h,go(f){return i.go(f)}};return p}var Y_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Y_||(Y_={}));function O8(t,r,a){return a===void 0&&(a="/"),F8(t,r,a)}function F8(t,r,a,s){let n=typeof r=="string"?au(r):r,o=S2(n.pathname||"/",a);if(o==null)return null;let i=ZE(t);R8(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=H8(o);l=V8(i[c],d)}return l}function ZE(t,r,a,s){r===void 0&&(r=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Xr(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=ki([s,c.relativePath]),u=a.concat(c);o.children&&o.children.length>0&&(Xr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ZE(o.children,r,u,d)),!(o.path==null&&!o.index)&&r.push({path:d,score:z8(d,o.index),routesMeta:u})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of eA(o.path))n(o,i,c)}),r}function eA(t){let r=t.split("/");if(r.length===0)return[];let[a,...s]=r,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=eA(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function R8(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:q8(r.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const $8=/^:[\w-]+$/,D8=3,M8=2,I8=1,L8=10,B8=-2,Q_=t=>t==="*";function z8(t,r){let a=t.split("/"),s=a.length;return a.some(Q_)&&(s+=B8),r&&(s+=M8),a.filter(n=>!Q_(n)).reduce((n,o)=>n+($8.test(o)?D8:o===""?I8:L8),s)}function q8(t,r){return t.length===r.length&&t.slice(0,-1).every((s,n)=>s===r[n])?t[t.length-1]-r[r.length-1]:0}function V8(t,r,a){let{routesMeta:s}=t,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=o==="/"?r:r.slice(o.length)||"/",m=U8({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),x=c.route;if(!m)return null;Object.assign(n,m.params),i.push({params:n,pathname:ki([o,m.pathname]),pathnameBase:Q8(ki([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=ki([o,m.pathnameBase]))}return i}function U8(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,s]=W8(t.path,t.caseSensitive,t.end),n=r.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:x,isOptional:h}=u;if(x==="*"){let p=l[m]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const b=l[m];return h&&!b?d[x]=void 0:d[x]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:t}}function W8(t,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),_2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),s]}function H8(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return _2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function S2(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,s=t.charAt(a);return s&&s!=="/"?null:t.slice(a)||"/"}const K8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G8=t=>K8.test(t);function X8(t,r){r===void 0&&(r="/");let{pathname:a,search:s="",hash:n=""}=typeof t=="string"?au(t):t,o;if(a)if(G8(a))o=a;else{if(a.includes("//")){let i=a;a=a.replace(/\/\/+/g,"/"),_2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+a))}a.startsWith("/")?o=J_(a.substring(1),"/"):o=J_(a,r)}else o=r;return{pathname:o,search:J8(s),hash:Z8(n)}}function J_(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Ub(t,r,a,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y8(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function C2(t,r){let a=Y8(t);return r?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function k2(t,r,a,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=au(t):(n=Vm({},t),Xr(!n.pathname||!n.pathname.includes("?"),Ub("?","pathname","search",n)),Xr(!n.pathname||!n.pathname.includes("#"),Ub("#","pathname","hash",n)),Xr(!n.search||!n.search.includes("#"),Ub("#","search","hash",n)));let o=t===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let m=r.length-1;if(!s&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),m-=1;n.pathname=x.join("/")}l=m>=0?r[m]:"/"}let c=X8(n,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ki=t=>t.join("/").replace(/\/\/+/g,"/"),Q8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function eM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tA=["post","put","patch","delete"];new Set(tA);const tM=["get",...tA];new Set(tM);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Um.apply(this,arguments)}const E2=j.createContext(null),rM=j.createContext(null),Li=j.createContext(null),ig=j.createContext(null),so=j.createContext({outlet:null,matches:[],isDataRoute:!1}),rA=j.createContext(null);function aM(t,r){let{relative:a}=r===void 0?{}:r;su()||Xr(!1);let{basename:s,navigator:n}=j.useContext(Li),{hash:o,pathname:i,search:l}=sA(t,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:ki([s,i])),n.createHref({pathname:c,search:l,hash:o})}function su(){return j.useContext(ig)!=null}function Vo(){return su()||Xr(!1),j.useContext(ig).location}function aA(t){j.useContext(Li).static||j.useLayoutEffect(t)}function Kt(){let{isDataRoute:t}=j.useContext(so);return t?bM():sM()}function sM(){su()||Xr(!1);let t=j.useContext(E2),{basename:r,future:a,navigator:s}=j.useContext(Li),{matches:n}=j.useContext(so),{pathname:o}=Vo(),i=JSON.stringify(C2(n,a.v7_relativeSplatPath)),l=j.useRef(!1);return aA(()=>{l.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=k2(d,JSON.parse(i),o,u.relative==="path");t==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:ki([r,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[r,s,i,o,t])}const nM=j.createContext(null);function oM(t){let r=j.useContext(so).outlet;return r&&j.createElement(nM.Provider,{value:t},r)}function rc(){let{matches:t}=j.useContext(so),r=t[t.length-1];return r?r.params:{}}function sA(t,r){let{relative:a}=r===void 0?{}:r,{future:s}=j.useContext(Li),{matches:n}=j.useContext(so),{pathname:o}=Vo(),i=JSON.stringify(C2(n,s.v7_relativeSplatPath));return j.useMemo(()=>k2(t,JSON.parse(i),o,a==="path"),[t,i,o,a])}function iM(t,r){return lM(t,r)}function lM(t,r,a,s){su()||Xr(!1);let{navigator:n}=j.useContext(Li),{matches:o}=j.useContext(so),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Vo(),u;if(r){var m;let f=typeof r=="string"?au(r):r;c==="/"||(m=f.pathname)!=null&&m.startsWith(c)||Xr(!1),u=f}else u=d;let x=u.pathname||"/",h=x;if(c!=="/"){let f=c.replace(/^\//,"").split("/");h="/"+x.replace(/^\//,"").split("/").slice(f.length).join("/")}let b=O8(t,{pathname:h}),p=xM(b&&b.map(f=>Object.assign({},f,{params:Object.assign({},l,f.params),pathname:ki([c,n.encodeLocation?n.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?c:ki([c,n.encodeLocation?n.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),o,a,s);return r&&p?j.createElement(ig.Provider,{value:{location:Um({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:xi.Pop}},p):p}function cM(){let t=gM(),r=eM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},r),a?j.createElement("pre",{style:n},a):null,null)}const dM=j.createElement(cM,null);class uM extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?j.createElement(so.Provider,{value:this.props.routeContext},j.createElement(rA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mM(t){let{routeContext:r,match:a,children:s}=t,n=j.useContext(E2);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),j.createElement(so.Provider,{value:r},s)}function xM(t,r,a,s){var n;if(r===void 0&&(r=[]),a===void 0&&(a=null),s===void 0&&(s=null),t==null){var o;if(!a)return null;if(a.errors)t=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=(n=a)==null?void 0:n.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||Xr(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:h}=a,b=m.route.loader&&x[m.route.id]===void 0&&(!h||h[m.route.id]===void 0);if(m.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,x)=>{let h,b=!1,p=null,f=null;a&&(h=l&&m.route.id?l[m.route.id]:void 0,p=m.route.errorElement||dM,c&&(d<0&&x===0?(vM("route-fallback"),b=!0,f=null):d===x&&(b=!0,f=m.route.hydrateFallbackElement||null)));let v=r.concat(i.slice(0,x+1)),g=()=>{let y;return h?y=p:b?y=f:m.route.Component?y=j.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=u,j.createElement(mM,{match:m,routeContext:{outlet:u,matches:v,isDataRoute:a!=null},children:y})};return a&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?j.createElement(uM,{location:a.location,revalidation:a.revalidation,component:p,error:h,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var nA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nA||{}),oA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oA||{});function pM(t){let r=j.useContext(E2);return r||Xr(!1),r}function hM(t){let r=j.useContext(rM);return r||Xr(!1),r}function fM(t){let r=j.useContext(so);return r||Xr(!1),r}function iA(t){let r=fM(),a=r.matches[r.matches.length-1];return a.route.id||Xr(!1),a.route.id}function gM(){var t;let r=j.useContext(rA),a=hM(),s=iA();return r!==void 0?r:(t=a.errors)==null?void 0:t[s]}function bM(){let{router:t}=pM(nA.UseNavigateStable),r=iA(oA.UseNavigateStable),a=j.useRef(!1);return aA(()=>{a.current=!0}),j.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Um({fromRouteId:r},o)))},[t,r])}const Z_={};function vM(t,r,a){Z_[t]||(Z_[t]=!0)}function yM(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Oy(t){let{to:r,replace:a,state:s,relative:n}=t;su()||Xr(!1);let{future:o,static:i}=j.useContext(Li),{matches:l}=j.useContext(so),{pathname:c}=Vo(),d=Kt(),u=k2(r,C2(l,o.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return j.useEffect(()=>d(JSON.parse(m),{replace:a,state:s,relative:n}),[d,m,n,a,s]),null}function jM(t){return oM(t.context)}function ft(t){Xr(!1)}function NM(t){let{basename:r="/",children:a=null,location:s,navigationType:n=xi.Pop,navigator:o,static:i=!1,future:l}=t;su()&&Xr(!1);let c=r.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:o,static:i,future:Um({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=au(s));let{pathname:u="/",search:m="",hash:x="",state:h=null,key:b="default"}=s,p=j.useMemo(()=>{let f=S2(u,c);return f==null?null:{location:{pathname:f,search:m,hash:x,state:h,key:b},navigationType:n}},[c,u,m,x,h,b,n]);return p==null?null:j.createElement(Li.Provider,{value:d},j.createElement(ig.Provider,{children:a,value:p}))}function wM(t){let{children:r,location:a}=t;return iM(Fy(r),a)}new Promise(()=>{});function Fy(t,r){r===void 0&&(r=[]);let a=[];return j.Children.forEach(t,(s,n)=>{if(!j.isValidElement(s))return;let o=[...r,n];if(s.type===j.Fragment){a.push.apply(a,Fy(s.props.children,o));return}s.type!==ft&&Xr(!1),!s.props.index||!s.props.children||Xr(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Fy(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ry(){return Ry=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Ry.apply(this,arguments)}function _M(t,r){if(t==null)return{};var a={},s=Object.keys(t),n,o;for(o=0;o<s.length;o++)n=s[o],!(r.indexOf(n)>=0)&&(a[n]=t[n]);return a}function SM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CM(t,r){return t.button===0&&(!r||r==="_self")&&!SM(t)}function $y(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,a)=>{let s=t[a];return r.concat(Array.isArray(s)?s.map(n=>[a,n]):[[a,s]])},[]))}function kM(t,r){let a=$y(t);return r&&r.forEach((s,n)=>{a.has(n)||r.getAll(n).forEach(o=>{a.append(n,o)})}),a}const EM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AM="6";try{window.__reactRouterVersion=AM}catch{}const PM="startTransition",e4=g7[PM];function TM(t){let{basename:r,children:a,future:s,window:n}=t,o=j.useRef();o.current==null&&(o.current=A8({window:n,v5Compat:!0}));let i=o.current,[l,c]=j.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=j.useCallback(m=>{d&&e4?e4(()=>c(m)):c(m)},[c,d]);return j.useLayoutEffect(()=>i.listen(u),[i,u]),j.useEffect(()=>yM(s),[s]),j.createElement(NM,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const OM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$l=j.forwardRef(function(r,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=r,x=_M(r,EM),{basename:h}=j.useContext(Li),b,p=!1;if(typeof d=="string"&&FM.test(d)&&(b=d,OM))try{let y=new URL(window.location.href),N=d.startsWith("//")?new URL(y.protocol+d):new URL(d),_=S2(N.pathname,h);N.origin===y.origin&&_!=null?d=_+N.search+N.hash:p=!0}catch{}let f=aM(d,{relative:n}),v=RM(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:m});function g(y){s&&s(y),y.defaultPrevented||v(y)}return j.createElement("a",Ry({},x,{href:b||f,onClick:p||o?s:g,ref:a,target:c}))});var t4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(t4||(t4={}));var r4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(r4||(r4={}));function RM(t,r){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=r===void 0?{}:r,c=Kt(),d=Vo(),u=sA(t,{relative:i});return j.useCallback(m=>{if(CM(m,a)){m.preventDefault();let x=s!==void 0?s:nh(d)===nh(u);c(t,{replace:x,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,s,n,a,t,o,i,l])}function lg(t){let r=j.useRef($y(t)),a=j.useRef(!1),s=Vo(),n=j.useMemo(()=>kM(s.search,a.current?null:r.current),[s.search]),o=Kt(),i=j.useCallback((l,c)=>{const d=$y(typeof l=="function"?l(n):l);a.current=!0,o("?"+d,c)},[o,n]);return[n,i]}let $M={data:""},DM=t=>{if(typeof window=="object"){let r=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(t||document.head).appendChild(r),r.firstChild}return t||$M},MM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IM=/\/\*[^]*?\*\/|  +/g,a4=/\n+/g,ci=(t,r)=>{let a="",s="",n="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+i+";":s+=o[1]=="f"?ci(i,o):o+"{"+ci(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=ci(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=ci.p?ci.p(o,i):o+":"+i+";")}return a+(r&&n?r+"{"+n+"}":n)+s},lo={},lA=t=>{if(typeof t=="object"){let r="";for(let a in t)r+=a+lA(t[a]);return r}return t},LM=(t,r,a,s,n)=>{let o=lA(t),i=lo[o]||(lo[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!lo[i]){let c=o!==t?t:(d=>{let u,m,x=[{}];for(;u=MM.exec(d.replace(IM,""));)u[4]?x.shift():u[3]?(m=u[3].replace(a4," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][u[1]]=u[2].replace(a4," ").trim();return x[0]})(t);lo[i]=ci(n?{["@keyframes "+i]:c}:c,a?"":"."+i)}let l=a&&lo.g?lo.g:null;return a&&(lo.g=lo[i]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(lo[i],r,s,l),i},BM=(t,r,a)=>t.reduce((s,n,o)=>{let i=r[o];if(i&&i.call){let l=i(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":ci(l,""):l===!1?"":l}return s+n+(i??"")},"");function cg(t){let r=this||{},a=t.call?t(r.p):t;return LM(a.unshift?a.raw?BM(a,[].slice.call(arguments,1),r.p):a.reduce((s,n)=>Object.assign(s,n&&n.call?n(r.p):n),{}):a,DM(r.target),r.g,r.o,r.k)}let cA,Dy,My;cg.bind({g:1});let Oo=cg.bind({k:1});function zM(t,r,a,s){ci.p=r,cA=t,Dy=a,My=s}function Bi(t,r){let a=this||{};return function(){let s=arguments;function n(o,i){let l=Object.assign({},o),c=l.className||n.className;a.p=Object.assign({theme:Dy&&Dy()},l),a.o=/ *go\d+/.test(c),l.className=cg.apply(a,s)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),My&&d[0]&&My(l),cA(d,l)}return n}}var qM=t=>typeof t=="function",oh=(t,r)=>qM(t)?t(r):t,VM=(()=>{let t=0;return()=>(++t).toString()})(),dA=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),UM=20,A2="default",uA=(t,r)=>{let{toastLimit:a}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:s}=r;return uA(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=r;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Ep=[],mA={toasts:[],pausedAt:void 0,settings:{toastLimit:UM}},Wn={},xA=(t,r=A2)=>{Wn[r]=uA(Wn[r]||mA,t),Ep.forEach(([a,s])=>{a===r&&s(Wn[r])})},pA=t=>Object.keys(Wn).forEach(r=>xA(t,r)),WM=t=>Object.keys(Wn).find(r=>Wn[r].toasts.some(a=>a.id===t)),dg=(t=A2)=>r=>{xA(r,t)},HM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},KM=(t={},r=A2)=>{let[a,s]=j.useState(Wn[r]||mA),n=j.useRef(Wn[r]);j.useEffect(()=>(n.current!==Wn[r]&&s(Wn[r]),Ep.push([r,s]),()=>{let i=Ep.findIndex(([l])=>l===r);i>-1&&Ep.splice(i,1)}),[r]);let o=a.toasts.map(i=>{var l,c,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||HM[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...a,toasts:o}},GM=(t,r="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||VM()}),Kx=t=>(r,a)=>{let s=GM(r,t,a);return dg(s.toasterId||WM(s.id))({type:2,toast:s}),s.id},be=(t,r)=>Kx("blank")(t,r);be.error=Kx("error");be.success=Kx("success");be.loading=Kx("loading");be.custom=Kx("custom");be.dismiss=(t,r)=>{let a={type:3,toastId:t};r?dg(r)(a):pA(a)};be.dismissAll=t=>be.dismiss(void 0,t);be.remove=(t,r)=>{let a={type:4,toastId:t};r?dg(r)(a):pA(a)};be.removeAll=t=>be.remove(void 0,t);be.promise=(t,r,a)=>{let s=be.loading(r.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let o=r.success?oh(r.success,n):void 0;return o?be.success(o,{id:s,...a,...a==null?void 0:a.success}):be.dismiss(s),n}).catch(n=>{let o=r.error?oh(r.error,n):void 0;o?be.error(o,{id:s,...a,...a==null?void 0:a.error}):be.dismiss(s)}),t};var XM=1e3,YM=(t,r="default")=>{let{toasts:a,pausedAt:s}=KM(t,r),n=j.useRef(new Map).current,o=j.useCallback((m,x=XM)=>{if(n.has(m))return;let h=setTimeout(()=>{n.delete(m),i({type:4,toastId:m})},x);n.set(m,h)},[]);j.useEffect(()=>{if(s)return;let m=Date.now(),x=a.map(h=>{if(h.duration===1/0)return;let b=(h.duration||0)+h.pauseDuration-(m-h.createdAt);if(b<0){h.visible&&be.dismiss(h.id);return}return setTimeout(()=>be.dismiss(h.id,r),b)});return()=>{x.forEach(h=>h&&clearTimeout(h))}},[a,s,r]);let i=j.useCallback(dg(r),[r]),l=j.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=j.useCallback((m,x)=>{i({type:1,toast:{id:m,height:x}})},[i]),d=j.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=j.useCallback((m,x)=>{let{reverseOrder:h=!1,gutter:b=8,defaultPosition:p}=x||{},f=a.filter(y=>(y.position||p)===(m.position||p)&&y.height),v=f.findIndex(y=>y.id===m.id),g=f.filter((y,N)=>N<v&&y.visible).length;return f.filter(y=>y.visible).slice(...h?[g+1]:[0,g]).reduce((y,N)=>y+(N.height||0)+b,0)},[a]);return j.useEffect(()=>{a.forEach(m=>{if(m.dismissed)o(m.id,m.removeDelay);else{let x=n.get(m.id);x&&(clearTimeout(x),n.delete(m.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},QM=Oo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,JM=Oo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ZM=Oo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,eI=Bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${QM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${JM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ZM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tI=Oo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rI=Bi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${tI} 1s linear infinite;
`,aI=Oo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,sI=Oo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,nI=Bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${sI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,oI=Bi("div")`
  position: absolute;
`,iI=Bi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lI=Oo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cI=Bi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dI=({toast:t})=>{let{icon:r,type:a,iconTheme:s}=t;return r!==void 0?typeof r=="string"?j.createElement(cI,null,r):r:a==="blank"?null:j.createElement(iI,null,j.createElement(rI,{...s}),a!=="loading"&&j.createElement(oI,null,a==="error"?j.createElement(eI,{...s}):j.createElement(nI,{...s})))},uI=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mI=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,xI="0%{opacity:0;} 100%{opacity:1;}",pI="0%{opacity:1;} 100%{opacity:0;}",hI=Bi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fI=Bi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gI=(t,r)=>{let a=t.includes("top")?1:-1,[s,n]=dA()?[xI,pI]:[uI(a),mI(a)];return{animation:r?`${Oo(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Oo(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},bI=j.memo(({toast:t,position:r,style:a,children:s})=>{let n=t.height?gI(t.position||r||"top-center",t.visible):{opacity:0},o=j.createElement(dI,{toast:t}),i=j.createElement(fI,{...t.ariaProps},oh(t.message,t));return j.createElement(hI,{className:t.className,style:{...n,...a,...t.style}},typeof s=="function"?s({icon:o,message:i}):j.createElement(j.Fragment,null,o,i))});zM(j.createElement);var vI=({id:t,className:r,style:a,onHeightUpdate:s,children:n})=>{let o=j.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return j.createElement("div",{ref:o,className:r,style:a},n)},yI=(t,r)=>{let a=t.includes("top"),s=a?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:dA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(a?1:-1)}px)`,...s,...n}},jI=cg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,L0=16,NI=({reverseOrder:t,position:r="top-center",toastOptions:a,gutter:s,children:n,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=YM(a,o);return j.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:L0,left:L0,right:L0,bottom:L0,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let m=u.position||r,x=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:r}),h=yI(m,x);return j.createElement(vI,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?jI:"",style:h},u.type==="custom"?oh(u.message,u):n?n(u):j.createElement(bI,{toast:u,position:m}))}))},ze=be;function hA(t,r){return function(){return t.apply(r,arguments)}}const{toString:wI}=Object.prototype,{getPrototypeOf:P2}=Object,{iterator:ug,toStringTag:fA}=Symbol,mg=(t=>r=>{const a=wI.call(r);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Fn=t=>(t=t.toLowerCase(),r=>mg(r)===t),xg=t=>r=>typeof r===t,{isArray:nu}=Array,yd=xg("undefined");function Gx(t){return t!==null&&!yd(t)&&t.constructor!==null&&!yd(t.constructor)&&hs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const gA=Fn("ArrayBuffer");function _I(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&gA(t.buffer),r}const SI=xg("string"),hs=xg("function"),bA=xg("number"),Xx=t=>t!==null&&typeof t=="object",CI=t=>t===!0||t===!1,Ap=t=>{if(mg(t)!=="object")return!1;const r=P2(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(fA in t)&&!(ug in t)},kI=t=>{if(!Xx(t)||Gx(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},EI=Fn("Date"),AI=Fn("File"),PI=Fn("Blob"),TI=Fn("FileList"),OI=t=>Xx(t)&&hs(t.pipe),FI=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||hs(t.append)&&((r=mg(t))==="formdata"||r==="object"&&hs(t.toString)&&t.toString()==="[object FormData]"))},RI=Fn("URLSearchParams"),[$I,DI,MI,II]=["ReadableStream","Request","Response","Headers"].map(Fn),LI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yx(t,r,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),nu(t))for(s=0,n=t.length;s<n;s++)r.call(null,t[s],s,t);else{if(Gx(t))return;const o=a?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(s=0;s<i;s++)l=o[s],r.call(null,t[l],l,t)}}function vA(t,r){if(Gx(t))return null;r=r.toLowerCase();const a=Object.keys(t);let s=a.length,n;for(;s-- >0;)if(n=a[s],r===n.toLowerCase())return n;return null}const xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yA=t=>!yd(t)&&t!==xl;function Iy(){const{caseless:t,skipUndefined:r}=yA(this)&&this||{},a={},s=(n,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;const i=t&&vA(a,o)||o;Ap(a[i])&&Ap(n)?a[i]=Iy(a[i],n):Ap(n)?a[i]=Iy({},n):nu(n)?a[i]=n.slice():(!r||!yd(n))&&(a[i]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Yx(arguments[n],s);return a}const BI=(t,r,a,{allOwnKeys:s}={})=>(Yx(r,(n,o)=>{a&&hs(n)?Object.defineProperty(t,o,{value:hA(n,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,o,{value:n,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),t),zI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qI=(t,r,a,s)=>{t.prototype=Object.create(r.prototype,s),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:r.prototype}),a&&Object.assign(t.prototype,a)},VI=(t,r,a,s)=>{let n,o,i;const l={};if(r=r||{},t==null)return r;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)i=n[o],(!s||s(i,t,r))&&!l[i]&&(r[i]=t[i],l[i]=!0);t=a!==!1&&P2(t)}while(t&&(!a||a(t,r))&&t!==Object.prototype);return r},UI=(t,r,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=r.length;const s=t.indexOf(r,a);return s!==-1&&s===a},WI=t=>{if(!t)return null;if(nu(t))return t;let r=t.length;if(!bA(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=t[r];return a},HI=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&P2(Uint8Array)),KI=(t,r)=>{const s=(t&&t[ug]).call(t);let n;for(;(n=s.next())&&!n.done;){const o=n.value;r.call(t,o[0],o[1])}},GI=(t,r)=>{let a;const s=[];for(;(a=t.exec(r))!==null;)s.push(a);return s},XI=Fn("HTMLFormElement"),YI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,n){return s.toUpperCase()+n}),s4=(({hasOwnProperty:t})=>(r,a)=>t.call(r,a))(Object.prototype),QI=Fn("RegExp"),jA=(t,r)=>{const a=Object.getOwnPropertyDescriptors(t),s={};Yx(a,(n,o)=>{let i;(i=r(n,o,t))!==!1&&(s[o]=i||n)}),Object.defineProperties(t,s)},JI=t=>{jA(t,(r,a)=>{if(hs(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=t[a];if(hs(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},ZI=(t,r)=>{const a={},s=n=>{n.forEach(o=>{a[o]=!0})};return nu(t)?s(t):s(String(t).split(r)),a},eL=()=>{},tL=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function rL(t){return!!(t&&hs(t.append)&&t[fA]==="FormData"&&t[ug])}const aL=t=>{const r=new Array(10),a=(s,n)=>{if(Xx(s)){if(r.indexOf(s)>=0)return;if(Gx(s))return s;if(!("toJSON"in s)){r[n]=s;const o=nu(s)?[]:{};return Yx(s,(i,l)=>{const c=a(i,n+1);!yd(c)&&(o[l]=c)}),r[n]=void 0,o}}return s};return a(t,0)},sL=Fn("AsyncFunction"),nL=t=>t&&(Xx(t)||hs(t))&&hs(t.then)&&hs(t.catch),NA=((t,r)=>t?setImmediate:r?((a,s)=>(xl.addEventListener("message",({source:n,data:o})=>{n===xl&&o===a&&s.length&&s.shift()()},!1),n=>{s.push(n),xl.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",hs(xl.postMessage)),oL=typeof queueMicrotask<"u"?queueMicrotask.bind(xl):typeof process<"u"&&process.nextTick||NA,iL=t=>t!=null&&hs(t[ug]),$e={isArray:nu,isArrayBuffer:gA,isBuffer:Gx,isFormData:FI,isArrayBufferView:_I,isString:SI,isNumber:bA,isBoolean:CI,isObject:Xx,isPlainObject:Ap,isEmptyObject:kI,isReadableStream:$I,isRequest:DI,isResponse:MI,isHeaders:II,isUndefined:yd,isDate:EI,isFile:AI,isBlob:PI,isRegExp:QI,isFunction:hs,isStream:OI,isURLSearchParams:RI,isTypedArray:HI,isFileList:TI,forEach:Yx,merge:Iy,extend:BI,trim:LI,stripBOM:zI,inherits:qI,toFlatObject:VI,kindOf:mg,kindOfTest:Fn,endsWith:UI,toArray:WI,forEachEntry:KI,matchAll:GI,isHTMLForm:XI,hasOwnProperty:s4,hasOwnProp:s4,reduceDescriptors:jA,freezeMethods:JI,toObjectSet:ZI,toCamelCase:YI,noop:eL,toFiniteNumber:tL,findKey:vA,global:xl,isContextDefined:yA,isSpecCompliantForm:rL,toJSONObject:aL,isAsyncFn:sL,isThenable:nL,setImmediate:NA,asap:oL,isIterable:iL};let Ft=class wA extends Error{static from(r,a,s,n,o,i){const l=new wA(r.message,a||r.code,s,n,o);return l.cause=r,l.name=r.name,i&&Object.assign(l,i),l}constructor(r,a,s,n,o){super(r),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),s&&(this.config=s),n&&(this.request=n),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}};Ft.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ft.ERR_BAD_OPTION="ERR_BAD_OPTION";Ft.ECONNABORTED="ECONNABORTED";Ft.ETIMEDOUT="ETIMEDOUT";Ft.ERR_NETWORK="ERR_NETWORK";Ft.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ft.ERR_DEPRECATED="ERR_DEPRECATED";Ft.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ft.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ft.ERR_CANCELED="ERR_CANCELED";Ft.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ft.ERR_INVALID_URL="ERR_INVALID_URL";const lL=null;function Ly(t){return $e.isPlainObject(t)||$e.isArray(t)}function _A(t){return $e.endsWith(t,"[]")?t.slice(0,-2):t}function n4(t,r,a){return t?t.concat(r).map(function(n,o){return n=_A(n),!a&&o?"["+n+"]":n}).join(a?".":""):r}function cL(t){return $e.isArray(t)&&!t.some(Ly)}const dL=$e.toFlatObject($e,{},null,function(r){return/^is[A-Z]/.test(r)});function pg(t,r,a){if(!$e.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,a=$e.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,f){return!$e.isUndefined(f[p])});const s=a.metaTokens,n=a.visitor||u,o=a.dots,i=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(r);if(!$e.isFunction(n))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if($e.isDate(b))return b.toISOString();if($e.isBoolean(b))return b.toString();if(!c&&$e.isBlob(b))throw new Ft("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(b)||$e.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,p,f){let v=b;if(b&&!f&&typeof b=="object"){if($e.endsWith(p,"{}"))p=s?p:p.slice(0,-2),b=JSON.stringify(b);else if($e.isArray(b)&&cL(b)||($e.isFileList(b)||$e.endsWith(p,"[]"))&&(v=$e.toArray(b)))return p=_A(p),v.forEach(function(y,N){!($e.isUndefined(y)||y===null)&&r.append(i===!0?n4([p],N,o):i===null?p:p+"[]",d(y))}),!1}return Ly(b)?!0:(r.append(n4(f,p,o),d(b)),!1)}const m=[],x=Object.assign(dL,{defaultVisitor:u,convertValue:d,isVisitable:Ly});function h(b,p){if(!$e.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(b),$e.forEach(b,function(v,g){(!($e.isUndefined(v)||v===null)&&n.call(r,v,$e.isString(g)?g.trim():g,p,x))===!0&&h(v,p?p.concat(g):[g])}),m.pop()}}if(!$e.isObject(t))throw new TypeError("data must be an object");return h(t),r}function o4(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function T2(t,r){this._pairs=[],t&&pg(t,this,r)}const SA=T2.prototype;SA.append=function(r,a){this._pairs.push([r,a])};SA.toString=function(r){const a=r?function(s){return r.call(this,s,o4)}:o4;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function uL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function CA(t,r,a){if(!r)return t;const s=a&&a.encode||uL,n=$e.isFunction(a)?{serialize:a}:a,o=n&&n.serialize;let i;if(o?i=o(r,n):i=$e.isURLSearchParams(r)?r.toString():new T2(r,n).toString(s),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class i4{constructor(){this.handlers=[]}use(r,a,s){return this.handlers.push({fulfilled:r,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){$e.forEach(this.handlers,function(s){s!==null&&r(s)})}}const O2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},mL=typeof URLSearchParams<"u"?URLSearchParams:T2,xL=typeof FormData<"u"?FormData:null,pL=typeof Blob<"u"?Blob:null,hL={isBrowser:!0,classes:{URLSearchParams:mL,FormData:xL,Blob:pL},protocols:["http","https","file","blob","url","data"]},F2=typeof window<"u"&&typeof document<"u",By=typeof navigator=="object"&&navigator||void 0,fL=F2&&(!By||["ReactNative","NativeScript","NS"].indexOf(By.product)<0),gL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bL=F2&&window.location.href||"http://localhost",vL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:F2,hasStandardBrowserEnv:fL,hasStandardBrowserWebWorkerEnv:gL,navigator:By,origin:bL},Symbol.toStringTag,{value:"Module"})),Ua={...vL,...hL};function yL(t,r){return pg(t,new Ua.classes.URLSearchParams,{visitor:function(a,s,n,o){return Ua.isNode&&$e.isBuffer(a)?(this.append(s,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function jL(t){return $e.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function NL(t){const r={},a=Object.keys(t);let s;const n=a.length;let o;for(s=0;s<n;s++)o=a[s],r[o]=t[o];return r}function kA(t){function r(a,s,n,o){let i=a[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=a.length;return i=!i&&$e.isArray(n)?n.length:i,c?($e.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!l):((!n[i]||!$e.isObject(n[i]))&&(n[i]=[]),r(a,s,n[i],o)&&$e.isArray(n[i])&&(n[i]=NL(n[i])),!l)}if($e.isFormData(t)&&$e.isFunction(t.entries)){const a={};return $e.forEachEntry(t,(s,n)=>{r(jL(s),n,a,0)}),a}return null}function wL(t,r,a){if($e.isString(t))try{return(r||JSON.parse)(t),$e.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(t)}const Qx={transitional:O2,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const s=a.getContentType()||"",n=s.indexOf("application/json")>-1,o=$e.isObject(r);if(o&&$e.isHTMLForm(r)&&(r=new FormData(r)),$e.isFormData(r))return n?JSON.stringify(kA(r)):r;if($e.isArrayBuffer(r)||$e.isBuffer(r)||$e.isStream(r)||$e.isFile(r)||$e.isBlob(r)||$e.isReadableStream(r))return r;if($e.isArrayBufferView(r))return r.buffer;if($e.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return yL(r,this.formSerializer).toString();if((l=$e.isFileList(r))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return pg(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||n?(a.setContentType("application/json",!1),wL(r)):r}],transformResponse:[function(r){const a=this.transitional||Qx.transitional,s=a&&a.forcedJSONParsing,n=this.responseType==="json";if($e.isResponse(r)||$e.isReadableStream(r))return r;if(r&&$e.isString(r)&&(s&&!this.responseType||n)){const i=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?Ft.from(l,Ft.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ua.classes.FormData,Blob:Ua.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],t=>{Qx.headers[t]={}});const _L=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SL=t=>{const r={};let a,s,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),a=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!a||r[a]&&_L[a])&&(a==="set-cookie"?r[a]?r[a].push(s):r[a]=[s]:r[a]=r[a]?r[a]+", "+s:s)}),r},l4=Symbol("internals");function Ru(t){return t&&String(t).trim().toLowerCase()}function Pp(t){return t===!1||t==null?t:$e.isArray(t)?t.map(Pp):String(t)}function CL(t){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(t);)r[s[1]]=s[2];return r}const kL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Wb(t,r,a,s,n){if($e.isFunction(s))return s.call(this,r,a);if(n&&(r=a),!!$e.isString(r)){if($e.isString(s))return r.indexOf(s)!==-1;if($e.isRegExp(s))return s.test(r)}}function EL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,s)=>a.toUpperCase()+s)}function AL(t,r){const a=$e.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+a,{value:function(n,o,i){return this[s].call(this,r,n,o,i)},configurable:!0})})}let fs=class{constructor(r){r&&this.set(r)}set(r,a,s){const n=this;function o(l,c,d){const u=Ru(c);if(!u)throw new Error("header name must be a non-empty string");const m=$e.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=Pp(l))}const i=(l,c)=>$e.forEach(l,(d,u)=>o(d,u,c));if($e.isPlainObject(r)||r instanceof this.constructor)i(r,a);else if($e.isString(r)&&(r=r.trim())&&!kL(r))i(SL(r),a);else if($e.isObject(r)&&$e.isIterable(r)){let l={},c,d;for(const u of r){if(!$e.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?$e.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,a)}else r!=null&&o(a,r,s);return this}get(r,a){if(r=Ru(r),r){const s=$e.findKey(this,r);if(s){const n=this[s];if(!a)return n;if(a===!0)return CL(n);if($e.isFunction(a))return a.call(this,n,s);if($e.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Ru(r),r){const s=$e.findKey(this,r);return!!(s&&this[s]!==void 0&&(!a||Wb(this,this[s],s,a)))}return!1}delete(r,a){const s=this;let n=!1;function o(i){if(i=Ru(i),i){const l=$e.findKey(s,i);l&&(!a||Wb(s,s[l],l,a))&&(delete s[l],n=!0)}}return $e.isArray(r)?r.forEach(o):o(r),n}clear(r){const a=Object.keys(this);let s=a.length,n=!1;for(;s--;){const o=a[s];(!r||Wb(this,this[o],o,r,!0))&&(delete this[o],n=!0)}return n}normalize(r){const a=this,s={};return $e.forEach(this,(n,o)=>{const i=$e.findKey(s,o);if(i){a[i]=Pp(n),delete a[o];return}const l=r?EL(o):String(o).trim();l!==o&&delete a[o],a[l]=Pp(n),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return $e.forEach(this,(s,n)=>{s!=null&&s!==!1&&(a[n]=r&&$e.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const s=new this(r);return a.forEach(n=>s.set(n)),s}static accessor(r){const s=(this[l4]=this[l4]={accessors:{}}).accessors,n=this.prototype;function o(i){const l=Ru(i);s[l]||(AL(n,i),s[l]=!0)}return $e.isArray(r)?r.forEach(o):o(r),this}};fs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(fs.prototype,({value:t},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[a]=s}}});$e.freezeMethods(fs);function Hb(t,r){const a=this||Qx,s=r||a,n=fs.from(s.headers);let o=s.data;return $e.forEach(t,function(l){o=l.call(a,o,n.normalize(),r?r.status:void 0)}),n.normalize(),o}function EA(t){return!!(t&&t.__CANCEL__)}let Jx=class extends Ft{constructor(r,a,s){super(r??"canceled",Ft.ERR_CANCELED,a,s),this.name="CanceledError",this.__CANCEL__=!0}};function AA(t,r,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?t(a):r(new Ft("Request failed with status code "+a.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function PL(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function TL(t,r){t=t||10;const a=new Array(t),s=new Array(t);let n=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),u=s[o];i||(i=d),a[n]=c,s[n]=d;let m=o,x=0;for(;m!==n;)x+=a[m++],m=m%t;if(n=(n+1)%t,n===o&&(o=(o+1)%t),d-i<r)return;const h=u&&d-u;return h?Math.round(x*1e3/h):void 0}}function OL(t,r){let a=0,s=1e3/r,n,o;const i=(d,u=Date.now())=>{a=u,n=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-a;m>=s?i(d,u):(n=d,o||(o=setTimeout(()=>{o=null,i(n)},s-m)))},()=>n&&i(n)]}const ih=(t,r,a=3)=>{let s=0;const n=TL(50,250);return OL(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,d=n(c),u=i<=l;s=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(m)},a)},c4=(t,r)=>{const a=t!=null;return[s=>r[0]({lengthComputable:a,total:t,loaded:s}),r[1]]},d4=t=>(...r)=>$e.asap(()=>t(...r)),FL=Ua.hasStandardBrowserEnv?((t,r)=>a=>(a=new URL(a,Ua.origin),t.protocol===a.protocol&&t.host===a.host&&(r||t.port===a.port)))(new URL(Ua.origin),Ua.navigator&&/(msie|trident)/i.test(Ua.navigator.userAgent)):()=>!0,RL=Ua.hasStandardBrowserEnv?{write(t,r,a,s,n,o,i){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(r)}`];$e.isNumber(a)&&l.push(`expires=${new Date(a).toUTCString()}`),$e.isString(s)&&l.push(`path=${s}`),$e.isString(n)&&l.push(`domain=${n}`),o===!0&&l.push("secure"),$e.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function $L(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function DL(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function PA(t,r,a){let s=!$L(r);return t&&(s||a==!1)?DL(t,r):r}const u4=t=>t instanceof fs?{...t}:t;function Dl(t,r){r=r||{};const a={};function s(d,u,m,x){return $e.isPlainObject(d)&&$e.isPlainObject(u)?$e.merge.call({caseless:x},d,u):$e.isPlainObject(u)?$e.merge({},u):$e.isArray(u)?u.slice():u}function n(d,u,m,x){if($e.isUndefined(u)){if(!$e.isUndefined(d))return s(void 0,d,m,x)}else return s(d,u,m,x)}function o(d,u){if(!$e.isUndefined(u))return s(void 0,u)}function i(d,u){if($e.isUndefined(u)){if(!$e.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,m){if(m in r)return s(d,u);if(m in t)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,m)=>n(u4(d),u4(u),m,!0)};return $e.forEach(Object.keys({...t,...r}),function(u){if(u==="__proto__"||u==="constructor"||u==="prototype")return;const m=$e.hasOwnProp(c,u)?c[u]:n,x=m(t[u],r[u],u);$e.isUndefined(x)&&m!==l||(a[u]=x)}),a}const TA=t=>{const r=Dl({},t);let{data:a,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=fs.from(i),r.url=CA(PA(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),$e.isFormData(a)){if(Ua.hasStandardBrowserEnv||Ua.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if($e.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&i.set(u,m)})}}if(Ua.hasStandardBrowserEnv&&(s&&$e.isFunction(s)&&(s=s(r)),s||s!==!1&&FL(r.url))){const c=n&&o&&RL.read(o);c&&i.set(n,c)}return r},ML=typeof XMLHttpRequest<"u",IL=ML&&function(t){return new Promise(function(a,s){const n=TA(t);let o=n.data;const i=fs.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,m,x,h,b;function p(){h&&h(),b&&b(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let f=new XMLHttpRequest;f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout;function v(){if(!f)return;const y=fs.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:y,config:t,request:f};AA(function(S){a(S),p()},function(S){s(S),p()},_),f=null}"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(s(new Ft("Request aborted",Ft.ECONNABORTED,t,f)),f=null)},f.onerror=function(N){const _=N&&N.message?N.message:"Network Error",w=new Ft(_,Ft.ERR_NETWORK,t,f);w.event=N||null,s(w),f=null},f.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const _=n.transitional||O2;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),s(new Ft(N,_.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,t,f)),f=null},o===void 0&&i.setContentType(null),"setRequestHeader"in f&&$e.forEach(i.toJSON(),function(N,_){f.setRequestHeader(_,N)}),$e.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),l&&l!=="json"&&(f.responseType=n.responseType),d&&([x,b]=ih(d,!0),f.addEventListener("progress",x)),c&&f.upload&&([m,h]=ih(c),f.upload.addEventListener("progress",m),f.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(u=y=>{f&&(s(!y||y.type?new Jx(null,t,f):y),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const g=PL(n.url);if(g&&Ua.protocols.indexOf(g)===-1){s(new Ft("Unsupported protocol "+g+":",Ft.ERR_BAD_REQUEST,t));return}f.send(o||null)})},LL=(t,r)=>{const{length:a}=t=t?t.filter(Boolean):[];if(r||a){let s=new AbortController,n;const o=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Ft?u:new Jx(u instanceof Error?u.message:u))}};let i=r&&setTimeout(()=>{i=null,o(new Ft(`timeout of ${r}ms exceeded`,Ft.ETIMEDOUT))},r);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>$e.asap(l),c}},BL=function*(t,r){let a=t.byteLength;if(a<r){yield t;return}let s=0,n;for(;s<a;)n=s+r,yield t.slice(s,n),s=n},zL=async function*(t,r){for await(const a of qL(t))yield*BL(a,r)},qL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:a,value:s}=await r.read();if(a)break;yield s}}finally{await r.cancel()}},m4=(t,r,a,s)=>{const n=zL(t,r);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let m=u.byteLength;if(a){let x=o+=m;a(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},x4=64*1024,{isFunction:B0}=$e,VL=(({Request:t,Response:r})=>({Request:t,Response:r}))($e.global),{ReadableStream:p4,TextEncoder:h4}=$e.global,f4=(t,...r)=>{try{return!!t(...r)}catch{return!1}},UL=t=>{t=$e.merge.call({skipUndefined:!0},VL,t);const{fetch:r,Request:a,Response:s}=t,n=r?B0(r):typeof fetch=="function",o=B0(a),i=B0(s);if(!n)return!1;const l=n&&B0(p4),c=n&&(typeof h4=="function"?(b=>p=>b.encode(p))(new h4):async b=>new Uint8Array(await new a(b).arrayBuffer())),d=o&&l&&f4(()=>{let b=!1;const p=new a(Ua.origin,{body:new p4,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!p}),u=i&&l&&f4(()=>$e.isReadableStream(new s("").body)),m={stream:u&&(b=>b.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!m[b]&&(m[b]=(p,f)=>{let v=p&&p[b];if(v)return v.call(p);throw new Ft(`Response type '${b}' is not supported`,Ft.ERR_NOT_SUPPORT,f)})});const x=async b=>{if(b==null)return 0;if($e.isBlob(b))return b.size;if($e.isSpecCompliantForm(b))return(await new a(Ua.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if($e.isArrayBufferView(b)||$e.isArrayBuffer(b))return b.byteLength;if($e.isURLSearchParams(b)&&(b=b+""),$e.isString(b))return(await c(b)).byteLength},h=async(b,p)=>{const f=$e.toFiniteNumber(b.getContentLength());return f??x(p)};return async b=>{let{url:p,method:f,data:v,signal:g,cancelToken:y,timeout:N,onDownloadProgress:_,onUploadProgress:w,responseType:S,headers:C,withCredentials:k="same-origin",fetchOptions:F}=TA(b),q=r||fetch;S=S?(S+"").toLowerCase():"text";let A=LL([g,y&&y.toAbortSignal()],N),T=null;const U=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let K;try{if(w&&d&&f!=="get"&&f!=="head"&&(K=await h(C,v))!==0){let B=new a(p,{method:"POST",body:v,duplex:"half"}),O;if($e.isFormData(v)&&(O=B.headers.get("content-type"))&&C.setContentType(O),B.body){const[L,E]=c4(K,ih(d4(w)));v=m4(B.body,x4,L,E)}}$e.isString(k)||(k=k?"include":"omit");const I=o&&"credentials"in a.prototype,Y={...F,signal:A,method:f.toUpperCase(),headers:C.normalize().toJSON(),body:v,duplex:"half",credentials:I?k:void 0};T=o&&new a(p,Y);let D=await(o?q(T,F):q(p,Y));const W=u&&(S==="stream"||S==="response");if(u&&(_||W&&U)){const B={};["status","statusText","headers"].forEach(M=>{B[M]=D[M]});const O=$e.toFiniteNumber(D.headers.get("content-length")),[L,E]=_&&c4(O,ih(d4(_),!0))||[];D=new s(m4(D.body,x4,L,()=>{E&&E(),U&&U()}),B)}S=S||"text";let R=await m[$e.findKey(m,S)||"text"](D,b);return!W&&U&&U(),await new Promise((B,O)=>{AA(B,O,{data:R,headers:fs.from(D.headers),status:D.status,statusText:D.statusText,config:b,request:T})})}catch(I){throw U&&U(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Ft("Network Error",Ft.ERR_NETWORK,b,T,I&&I.response),{cause:I.cause||I}):Ft.from(I,I&&I.code,b,T,I&&I.response)}}},WL=new Map,OA=t=>{let r=t&&t.env||{};const{fetch:a,Request:s,Response:n}=r,o=[s,n,a];let i=o.length,l=i,c,d,u=WL;for(;l--;)c=o[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:UL(r)),u=d;return d};OA();const R2={http:lL,xhr:IL,fetch:{get:OA}};$e.forEach(R2,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const g4=t=>`- ${t}`,HL=t=>$e.isFunction(t)||t===null||t===!1;function KL(t,r){t=$e.isArray(t)?t:[t];const{length:a}=t;let s,n;const o={};for(let i=0;i<a;i++){s=t[i];let l;if(n=s,!HL(s)&&(n=R2[(l=String(s)).toLowerCase()],n===void 0))throw new Ft(`Unknown adapter '${l}'`);if(n&&($e.isFunction(n)||(n=n.get(r))))break;o[l||"#"+i]=n}if(!n){const i=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?i.length>1?`since :
`+i.map(g4).join(`
`):" "+g4(i[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n}const FA={getAdapter:KL,adapters:R2};function Kb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jx(null,t)}function b4(t){return Kb(t),t.headers=fs.from(t.headers),t.data=Hb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FA.getAdapter(t.adapter||Qx.adapter,t)(t).then(function(s){return Kb(t),s.data=Hb.call(t,t.transformResponse,s),s.headers=fs.from(s.headers),s},function(s){return EA(s)||(Kb(t),s&&s.response&&(s.response.data=Hb.call(t,t.transformResponse,s.response),s.response.headers=fs.from(s.response.headers))),Promise.reject(s)})}const RA="1.13.5",hg={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{hg[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const v4={};hg.transitional=function(r,a,s){function n(o,i){return"[Axios v"+RA+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(r===!1)throw new Ft(n(i," has been removed"+(a?" in "+a:"")),Ft.ERR_DEPRECATED);return a&&!v4[i]&&(v4[i]=!0,console.warn(n(i," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(o,i,l):!0}};hg.spelling=function(r){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function GL(t,r,a){if(typeof t!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const o=s[n],i=r[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new Ft("option "+o+" must be "+c,Ft.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ft("Unknown option "+o,Ft.ERR_BAD_OPTION)}}const Tp={assertOptions:GL,validators:hg},Us=Tp.validators;let jl=class{constructor(r){this.defaults=r||{},this.interceptors={request:new i4,response:new i4}}async request(r,a){try{return await this._request(r,a)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=Dl(this.defaults,a);const{transitional:s,paramsSerializer:n,headers:o}=a;s!==void 0&&Tp.assertOptions(s,{silentJSONParsing:Us.transitional(Us.boolean),forcedJSONParsing:Us.transitional(Us.boolean),clarifyTimeoutError:Us.transitional(Us.boolean),legacyInterceptorReqResOrdering:Us.transitional(Us.boolean)},!1),n!=null&&($e.isFunction(n)?a.paramsSerializer={serialize:n}:Tp.assertOptions(n,{encode:Us.function,serialize:Us.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Tp.assertOptions(a,{baseUrl:Us.spelling("baseURL"),withXsrfToken:Us.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let i=o&&$e.merge(o.common,o[a.method]);o&&$e.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),a.headers=fs.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(p){if(typeof p.runWhen=="function"&&p.runWhen(a)===!1)return;c=c&&p.synchronous;const f=a.transitional||O2;f&&f.legacyInterceptorReqResOrdering?l.unshift(p.fulfilled,p.rejected):l.push(p.fulfilled,p.rejected)});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,m=0,x;if(!c){const b=[b4.bind(this),void 0];for(b.unshift(...l),b.push(...d),x=b.length,u=Promise.resolve(a);m<x;)u=u.then(b[m++],b[m++]);return u}x=l.length;let h=a;for(;m<x;){const b=l[m++],p=l[m++];try{h=b(h)}catch(f){p.call(this,f);break}}try{u=b4.call(this,h)}catch(b){return Promise.reject(b)}for(m=0,x=d.length;m<x;)u=u.then(d[m++],d[m++]);return u}getUri(r){r=Dl(this.defaults,r);const a=PA(r.baseURL,r.url,r.allowAbsoluteUrls);return CA(a,r.params,r.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(r){jl.prototype[r]=function(a,s){return this.request(Dl(s||{},{method:r,url:a,data:(s||{}).data}))}});$e.forEach(["post","put","patch"],function(r){function a(s){return function(o,i,l){return this.request(Dl(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}jl.prototype[r]=a(),jl.prototype[r+"Form"]=a(!0)});let XL=class $A{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const s=this;this.promise.then(n=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](n);s._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(n);return i.cancel=function(){s.unsubscribe(o)},i},r(function(o,i,l){s.reason||(s.reason=new Jx(o,i,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=s=>{r.abort(s)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new $A(function(n){r=n}),cancel:r}}};function YL(t){return function(a){return t.apply(null,a)}}function QL(t){return $e.isObject(t)&&t.isAxiosError===!0}const zy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(zy).forEach(([t,r])=>{zy[r]=t});function DA(t){const r=new jl(t),a=hA(jl.prototype.request,r);return $e.extend(a,jl.prototype,r,{allOwnKeys:!0}),$e.extend(a,r,null,{allOwnKeys:!0}),a.create=function(n){return DA(Dl(t,n))},a}const Vr=DA(Qx);Vr.Axios=jl;Vr.CanceledError=Jx;Vr.CancelToken=XL;Vr.isCancel=EA;Vr.VERSION=RA;Vr.toFormData=pg;Vr.AxiosError=Ft;Vr.Cancel=Vr.CanceledError;Vr.all=function(r){return Promise.all(r)};Vr.spread=YL;Vr.isAxiosError=QL;Vr.mergeConfig=Dl;Vr.AxiosHeaders=fs;Vr.formToJSON=t=>kA($e.isHTMLForm(t)?new FormData(t):t);Vr.getAdapter=FA.getAdapter;Vr.HttpStatusCode=zy;Vr.default=Vr;const{Axios:X_e,AxiosError:Y_e,CanceledError:Q_e,isCancel:J_e,CancelToken:Z_e,VERSION:e4e,all:t4e,Cancel:r4e,isAxiosError:a4e,spread:s4e,toFormData:n4e,AxiosHeaders:o4e,HttpStatusCode:i4e,formToJSON:l4e,getAdapter:c4e,mergeConfig:d4e}=Vr,JL=1200;let ZL=0,lh=0;const e9=new Set,td=new Map,qy=new Map,ch=new Map,y4=new WeakSet,MA=()=>{const t=c9();e9.forEach(r=>r(t))},t9=t=>{const r=Date.now(),a=Math.max(t*3,5e3);ch.forEach((s,n)=>{r-s>a&&ch.delete(n)})},$2=t=>(t.method||"get").toLowerCase(),r9=t=>{if(t==null)return"";if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return"[unserializable-data]"}},a9=t=>{if(t==null)return"";try{return JSON.stringify(t)}catch{return"[unserializable-params]"}},s9=(t,r)=>{if(r)return`key:${r}`;const a=$2(t).toUpperCase(),s=t.baseURL||"",n=t.url||"",o=a9(t.params),i=r9(t.data);return`${a}|${s}|${n}|${o}|${i}`},n9=(t,r)=>{if(r!=null&&r.key)return r.key;const a=$2(t).toUpperCase(),s=t.url||"";if(s)return`${a} ${s}`},o9=(t,r)=>typeof(r==null?void 0:r.preventDuplicate)=="boolean"?r.preventDuplicate:$2(t)!=="get",i9=(t,r)=>{const a=new Error("Requisio duplicada bloqueada pelo loading-safe.");return a.code="ERR_LOADING_SAFE_DUPLICATE",a.isLoadingSafeDuplicate=!0,a.config=t,a.operationKey=r,a},l9=t=>{const r=t.loadingSafe,a=n9(t,r),s=(r==null?void 0:r.trackGlobal)!==!1,n=o9(t,r),o=(r==null?void 0:r.duplicateWindowMs)??JL;if(n){const l=s9(t,r==null?void 0:r.key);t9(o);const c=ch.get(l),d=Date.now();if(typeof c=="number"&&d-c<o)return{duplicateError:i9(t,a)};ch.set(l,d)}const i=++ZL;if(t.__loadingSafeRequestId=i,qy.set(i,{key:a,trackGlobal:s}),s&&(lh+=1),a){const l=td.get(a)||0;td.set(a,l+1)}return MA(),{duplicateError:null}},j4=t=>{if(!t)return;const r=t.__loadingSafeRequestId;if(!r)return;const a=qy.get(r);if(qy.delete(r),delete t.__loadingSafeRequestId,!!a){if(a.trackGlobal&&(lh=Math.max(0,lh-1)),a.key){const s=td.get(a.key)||0;s<=1?td.delete(a.key):td.set(a.key,s-1)}MA()}},c9=()=>({activeRequests:lh,activeOperationKeys:Array.from(td.keys())}),IA=t=>(y4.has(t)||(y4.add(t),t.interceptors.request.use(r=>{const{duplicateError:a}=l9(r);return a?Promise.reject(a):r},r=>Promise.reject(r)),t.interceptors.response.use(r=>(j4(r.config),r),r=>(j4(r==null?void 0:r.config),Promise.reject(r)))),t),d9=!1,u9=!0,LA="/api",m9="production",dh=LA;console.log("");console.log(" [API Config] Configurao do Axios carregada");console.log("");console.log("  Mode:",m9);console.log("  isDevelopment:",d9);console.log("  isProduction:",u9);console.log("  VITE_API_URL (configurado):",LA);console.log("  API_URL (final):",dh);console.log("  Origem:",window.location.origin);console.log("");dh.startsWith("http://")&&(console.warn(' [API Config] Em produo, prefira URL relativa "/api" para evitar CORS/hosts fixos.'),console.warn("   Valor atual:",dh));const V=Vr.create({baseURL:dh,headers:{"Content-Type":"application/json"}});IA(V);V.interceptors.request.use(t=>{const r=localStorage.getItem("access_token"),a=localStorage.getItem("selectedTenant");if(console.log(" [API Interceptor]",{url:t.url,baseURL:t.baseURL,fullURL:`${t.baseURL}${t.url}`,hasToken:!!r,tokenPreview:r?`${r.substring(0,20)}...`:"NO TOKEN",headers:t.headers}),r?(t.headers.Authorization=`Bearer ${r}`,console.log(" Token adicionado ao header Authorization")):console.warn(" Nenhum token encontrado no localStorage"),a)try{const s=JSON.parse(a),n=s==null?void 0:s.id;n&&(t.headers["X-Tenant-ID"]=n)}catch{console.warn(" selectedTenant invlido no localStorage")}return t},t=>(console.error(" [API Interceptor] Erro na requisio:",t),Promise.reject(t)));V.interceptors.response.use(t=>(console.log(" [API Response]",{status:t.status,url:t.config.url,dataPreview:JSON.stringify(t.data).substring(0,100)}),t),t=>{var a,s,n,o,i,l,c,d,u,m;const r=(a=t.response)==null?void 0:a.status;return console.error(" [API Response Error]",{status:r,url:(s=t.config)==null?void 0:s.url,fullURL:`${(n=t.config)==null?void 0:n.baseURL}${(o=t.config)==null?void 0:o.url}`,errorData:(i=t.response)==null?void 0:i.data,headers:(l=t.response)==null?void 0:l.headers,requestHeaders:(c=t.config)==null?void 0:c.headers}),r===401&&(console.warn(" Status 401: Sesso invlida ou tenant no selecionado"),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),window.location.href="/login"),r===403&&(console.warn(" Status 403: Acesso negado para este tenant"),console.log(" Detalhes do erro 403:",{message:((u=(d=t.response)==null?void 0:d.data)==null?void 0:u.detail)||t.message,token:((m=localStorage.getItem("access_token"))==null?void 0:m.substring(0,20))+"..."})),Promise.reject(t)});const BA=j.createContext(),ou=()=>{const t=j.useContext(BA);if(!t)throw new Error("useAuth deve ser usado dentro de AuthProvider");return t},x9=({children:t})=>{const[r,a]=j.useState(null),[s,n]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const m=localStorage.getItem("access_token"),x=localStorage.getItem("user");m&&x?(a(JSON.parse(x)),await o()):n(!1)}catch(m){console.error("Erro ao inicializar auth:",m),n(!1)}})()},[]);const o=async()=>{try{const u=await V.get("/auth/me-multitenant");a(u.data),localStorage.setItem("user",JSON.stringify(u.data)),n(!1)}catch(u){console.error("Erro ao buscar usurio:",u),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),localStorage.removeItem("user"),a(null),n(!1)}},d={user:r,loading:s,login:async(u,m)=>{var x,h;try{console.log(" Iniciando login para:",u);const b=await V.post("/auth/login-multitenant",{email:u,password:m}),{access_token:p,tenants:f}=b.data;if(console.log(" Login fase 1 OK - Tenants:",f.length),f&&f.length>0){localStorage.setItem("tempToken",p),console.log(" Selecionando tenant:",f[0].name);const g=(await V.post("/auth/select-tenant",{tenant_id:f[0].id},{headers:{Authorization:`Bearer ${p}`}})).data.access_token;localStorage.setItem("access_token",g),localStorage.setItem("selectedTenant",JSON.stringify(f[0])),console.log(" Tenant selecionado OK");const y=await V.get("/auth/me-multitenant");return a(y.data),localStorage.setItem("user",JSON.stringify(y.data)),console.log(" Login completo! Redirecionando..."),{success:!0}}else return console.error(" Nenhum tenant disponvel"),{success:!1,error:"Nenhuma empresa disponvel para este usurio"}}catch(b){return console.error("Erro no login:",b),{success:!1,error:((h=(x=b.response)==null?void 0:x.data)==null?void 0:h.detail)||"Erro ao fazer login"}}},register:async(u,m,x)=>{var h,b;try{const p=await V.post("/auth/register",{email:u,password:m,nome:x}),{access_token:f}=p.data;localStorage.setItem("access_token",f);const v=await V.get("/auth/me-multitenant");return a(v.data),localStorage.setItem("user",JSON.stringify(v.data)),{success:!0}}catch(p){return console.error("Erro no registro:",p),{success:!1,error:((b=(h=p.response)==null?void 0:h.data)==null?void 0:b.detail)||"Erro ao criar conta"}}},logout:async()=>{try{await V.post("/auth/logout-multitenant")}catch(u){console.error("Erro ao fazer logout:",u)}finally{localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),localStorage.removeItem("user"),localStorage.removeItem("selectedTenant"),localStorage.removeItem("tempToken"),a(null),window.location.href="/login"}},isAuthenticated:!!r};return e.jsx(BA.Provider,{value:d,children:t})},Yt=({children:t,permission:r,requiredPermissions:a})=>{var i,l;const{isAuthenticated:s,loading:n,user:o}=ou();if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!s)return e.jsx(Oy,{to:"/login",replace:!0});if(r||a){const c=(o==null?void 0:o.permissions)||[];if(((l=(i=o==null?void 0:o.role)==null?void 0:i.name)==null?void 0:l.toLowerCase())==="admin")return t;if(r&&!c.includes(r))return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Voc no tem permisso para acessar esta pgina."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Permisso necessria: ",r]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar"})]})});if(a&&a.length>0&&!a.every(m=>c.includes(m)))return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Voc no tem permisso para acessar esta pgina."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Permisses necessrias: ",a.join(", ")]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar"})]})})}return t};var zA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N4=pe.createContext&&pe.createContext(zA),p9=["attr","size","title"];function h9(t,r){if(t==null)return{};var a=f9(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function f9(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function uh(){return uh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},uh.apply(this,arguments)}function w4(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function mh(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?w4(Object(a),!0).forEach(function(s){g9(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w4(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function g9(t,r,a){return r=b9(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function b9(t){var r=v9(t,"string");return typeof r=="symbol"?r:r+""}function v9(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function qA(t){return t&&t.map((r,a)=>pe.createElement(r.tag,mh({key:a},r.attr),qA(r.child)))}function wt(t){return r=>pe.createElement(y9,uh({attr:mh({},t.attr)},r),qA(t.child))}function y9(t){var r=a=>{var{attr:s,size:n,title:o}=t,i=h9(t,p9),l=n||a.size||"1em",c;return a.className&&(c=a.className),t.className&&(c=(c?c+" ":"")+t.className),pe.createElement("svg",uh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,i,{className:c,style:mh(mh({color:t.color||a.color},a.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&pe.createElement("title",null,o),t.children)};return N4!==void 0?pe.createElement(N4.Consumer,null,a=>r(a)):r(zA)}function _4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function fr(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function VA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function jd(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function xh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function UA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function ph(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function WA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function j9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function N9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function kn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Ti(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Wm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function ac(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function HA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function Ml(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function KA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function w9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(t)}function Il(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function _9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function hh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function rs(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function Oi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Vy(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function fh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function S9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function D2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function M2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function C9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Ll(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function k9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function S4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(t)}function Uy(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function E9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function I2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function A9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function C4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function pi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Zx(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function GA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function gs(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Hm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Bl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function XA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function P9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function dm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function YA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function zl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function T9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function O9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(t)}function Fo(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function fg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(t)}function sc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function rd(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function F9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function Yn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function QA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function Wy(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Ro(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function um(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),bt=(t,r)=>{const a=j.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>j.createElement("svg",{ref:u,...R9,width:n,height:n,stroke:s,strokeWidth:i?Number(o)*24/Number(n):o,className:["lucide",`lucide-${$9(t)}`,l].join(" "),...d},[...r.map(([m,x])=>j.createElement(m,x)),...Array.isArray(c)?c:[c]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=bt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=bt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=bt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=bt("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=bt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=bt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=bt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=bt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=bt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=bt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=bt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=bt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=bt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=bt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=bt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=bt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=bt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=bt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=bt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=bt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=bt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=bt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=bt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=bt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=bt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=bt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=bt("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=bt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=bt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=bt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=bt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=bt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=bt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=bt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=bt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=bt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=bt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=bt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=bt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=bt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=bt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=bt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=bt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=bt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=bt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=bt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Y9({onClick:t}){const[r,a]=j.useState(window.innerWidth<768),[s,n]=j.useState(!1),[o,i]=j.useState(!1),[l,c]=j.useState({x:0,y:0}),[d,u]=j.useState({x:0,y:0});j.useEffect(()=>{const _=()=>{a(window.innerWidth<768)};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const m=(_,w)=>{const S=window.innerWidth-(w?60:200),C=window.innerHeight-(w?60:300);return{x:Math.max(20,Math.min(_.x,S)),y:Math.max(20,Math.min(_.y,C))}},[x,h]=j.useState(()=>{if(window.innerWidth<768)return{x:window.innerWidth-70,y:80};const _=localStorage.getItem("calc_button_pos"),w={x:window.innerWidth-150,y:window.innerHeight-150};if(_)try{const S=JSON.parse(_);return m(S,!0)}catch{return w}return w}),[b,p]=j.useState(()=>localStorage.getItem("calc_button_minimizado")==="true"),f=_=>{if(r)return;if(_.target.closest('button[title="Expandir"], button[title="Minimizar"]')){_.stopPropagation();return}n(!0),i(!1),u({x:_.clientX,y:_.clientY}),c({x:_.clientX-x.x,y:_.clientY-x.y})},v=_=>{if(s){Math.sqrt(Math.pow(_.clientX-d.x,2)+Math.pow(_.clientY-d.y,2))>5&&i(!0);const S=_.clientX-l.x,C=_.clientY-l.y,k=window.innerWidth-(b?60:200),F=window.innerHeight-(b?60:300),q={x:Math.max(20,Math.min(S,k)),y:Math.max(20,Math.min(C,F))};h(q)}},g=()=>{s&&(n(!1),localStorage.setItem("calc_button_pos",JSON.stringify(x)))};j.useEffect(()=>{if(s)return document.addEventListener("mousemove",v),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",g)}},[s]);const y=_=>{console.log(" Clique detectado, hasDragged:",o),o?console.log(" Ignorando clique (foi arraste)"):(console.log(" Abrindo calculadora..."),t())},N=_=>{_.stopPropagation();const w=!b;if(!w){const S=m(x,!1);(S.x!==x.x||S.y!==x.y)&&(h(S),localStorage.setItem("calc_button_pos",JSON.stringify(S)))}p(w),localStorage.setItem("calc_button_minimizado",w.toString())};return j.useEffect(()=>{const _=()=>{if(window.innerWidth<768)h({x:window.innerWidth-70,y:80});else{const S=m(x,b);(S.x!==x.x||S.y!==x.y)&&(h(S),localStorage.setItem("calc_button_pos",JSON.stringify(S)))}};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[x,b]),e.jsx("div",{className:"fixed z-50",style:{left:`${x.x}px`,top:`${x.y}px`},children:b?e.jsxs("div",{className:`relative group ${r?"":"cursor-move"}`,onMouseDown:r?void 0:f,children:[e.jsx("button",{onClick:y,onMouseDown:_=>_.stopPropagation(),className:`calc-button-main\r
              flex items-center justify-center\r
              w-12 h-12 md:w-12 md:h-12\r
              bg-gradient-to-br from-orange-500 to-orange-600\r
              hover:from-orange-600 hover:to-orange-700\r
              text-white\r
              rounded-full\r
              shadow-lg hover:shadow-xl\r
              transition-all duration-200\r
              hover:scale-110\r
              active:scale-95\r
              pointer-events-auto\r
            `,title:"Calculadora de Rao",children:e.jsx(Nl,{size:20})}),!r&&e.jsx("button",{onClick:N,onMouseDown:_=>_.stopPropagation(),className:`\r
                absolute -bottom-1 -right-1\r
                bg-blue-600 hover:bg-blue-700\r
                text-white\r
                w-6 h-6\r
                rounded-full\r
                flex items-center justify-center\r
                opacity-0 group-hover:opacity-100\r
                transition-opacity\r
                shadow-md\r
              `,title:"Expandir",children:e.jsx(U9,{size:12})})]}):e.jsxs("div",{className:`\r
            flex flex-col gap-2\r
            bg-white\r
            rounded-2xl\r
            shadow-2xl\r
            p-3\r
            border-2 border-orange-500\r
            min-w-[140px]\r
          `,style:{cursor:s?"grabbing":"default"},children:[e.jsxs("div",{className:`flex items-center justify-between gap-2 drag-handle ${r?"":"cursor-move"}`,onMouseDown:r?void 0:f,children:[e.jsxs("div",{className:"flex items-center gap-2 pointer-events-none",children:[e.jsx("div",{className:`\r
                w-10 h-10\r
                bg-gradient-to-br from-orange-500 to-orange-600\r
                rounded-full\r
                flex items-center justify-center\r
                text-white\r
              `,children:e.jsx(Nl,{size:20})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Calculadora"})]}),e.jsx("button",{onClick:N,className:`\r
                p-1 hover:bg-gray-100 \r
                rounded-lg transition-colors\r
                pointer-events-auto\r
              `,title:"Minimizar",children:e.jsx(W9,{size:16,className:"text-gray-500"})})]}),e.jsx("button",{onClick:y,className:`calc-button-main\r
              w-full\r
              px-4 py-2\r
              bg-gradient-to-r from-orange-500 to-orange-600\r
              hover:from-orange-600 hover:to-orange-700\r
              text-white\r
              rounded-lg\r
              font-medium text-sm\r
              transition-all\r
              hover:shadow-lg\r
            `,children:" Calcular Rao"}),!r&&e.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:"Arraste para mover"})]})})}function lP(t){var n,o;if(!t)return!1;if(t.peso_embalagem&&t.peso_embalagem>0)return!0;const r=((n=t.classificacao_racao)==null?void 0:n.toLowerCase())||"",a=t.categoria_id||t.category_id,s=((o=t.categoria_nome)==null?void 0:o.toLowerCase())||"";return r&&r!=="no  rao"||s.includes("rao")||s.includes("racao")||a===5}function Q9({isOpen:t=!1,onClose:r=()=>{},itensCarrinho:a=[],clienteId:s=null}){var z,le,Q,ne,re;const o=Vo().pathname==="/pdv",[i,l]=j.useState(window.innerWidth<768);j.useEffect(()=>{const ae=()=>{l(window.innerWidth<768)};return window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[]);const[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState(null),[b,p]=j.useState(!1),[f,v]=j.useState(null),[g,y]=j.useState(null),[N,_]=j.useState(!1),[w,S]=j.useState(""),[C,k]=j.useState([]),[F,q]=j.useState(!1),[A,T]=j.useState({peso_pet_kg:"",idade_meses:"",nivel_atividade:"normal"}),[U,K]=j.useState(!1),[I,Y]=j.useState({x:0,y:0}),[D,W]=j.useState({x:0,y:0}),R=j.useRef(null),B=o?(()=>{try{const ae=sessionStorage.getItem("pdv_calculadora_data");if(console.log(" Calculadora Universal - Dados do PDV:",ae),ae){const{itens:ie}=JSON.parse(ae),ve=(ie||[]).filter(_e=>lP(_e));return console.log(" Raes encontradas:",ve),ve}}catch(ae){console.error("Erro ao ler dados do PDV:",ae)}return[]})():[];j.useEffect(()=>{if(!o&&w.length>=2){const ae=setTimeout(async()=>{q(!0);try{const ie=await V.get("/produtos/",{params:{busca:w}}),_e=(ie.data.items||ie.data.produtos||[]).filter(me=>me.peso_embalagem&&me.peso_embalagem>0);k(_e)}catch(ie){console.error("Erro ao buscar raes:",ie)}finally{q(!1)}},300);return()=>clearTimeout(ae)}else k([])},[w,o]),j.useEffect(()=>{t||Y({x:0,y:0})},[t]),j.useEffect(()=>{if(!t)return;const ae=ie=>{ie.key==="Escape"&&r()};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[t,r]),j.useEffect(()=>{if(t&&o&&B.length>0){const ae=B[B.length-1];d(ae.produto_id),m(ae),ae.pet_id&&O(ae.pet_id)}},[t,B.length,o]);const O=async ae=>{try{const ve=(await V.get(`/pets/${ae}`)).data;h(ve),T({...A,peso_pet_kg:ve.peso_kg||ve.peso||"",idade_meses:ve.idade_meses||ve.idade_aproximada||""})}catch(ie){console.error("Erro ao buscar pet:",ie)}},L=async()=>{if(console.log(" Iniciando clculo..."),console.log(" Rao selecionada:",u),console.log(" Formulrio:",A),!u){console.log(" Nenhuma rao selecionada"),ze.error("Selecione uma rao");return}if(!A.peso_pet_kg){console.log(" Peso do pet no informado"),ze.error("Informe o peso do pet");return}try{p(!0),y(null),v(null);const ie={produto_id:u.produto_id||u.id,peso_pet_kg:parseFloat(A.peso_pet_kg),idade_meses:A.idade_meses?parseInt(A.idade_meses):null,nivel_atividade:A.nivel_atividade};console.log(" Enviando payload:",ie);const ve=await V.post("/produtos/calculadora-racao",ie);if(console.log(" Resposta recebida:",ve.data),ve.data){const _e={duracao_pacote_dias:ve.data.duracao_dias,duracao_meses:ve.data.duracao_meses,consumo_diario_gramas:ve.data.quantidade_diaria_g,custo_por_kg:ve.data.custo_por_kg,custo_diario:ve.data.custo_por_dia,custo_mensal:ve.data.custo_mensal};v(_e),ze.success("Clculo realizado!")}}catch(ie){console.error(" Erro ao calcular:",ie),ze.error("Erro ao calcular. Tente novamente.")}finally{p(!1)}},E=ae=>{d(ae.id),m(ae),S(`${ae.nome} - ${ae.peso_embalagem}kg`),_(!1)},M=ae=>{i||ae.target.closest("button")||ae.target.closest("input")||ae.target.closest("select")||(K(!0),W({x:ae.clientX-I.x,y:ae.clientY-I.y}))};return j.useEffect(()=>{const ae=ve=>{var _e,me;if(U){const Se=window.innerWidth,Ne=window.innerHeight,ot=((_e=R.current)==null?void 0:_e.offsetWidth)||800,Ke=((me=R.current)==null?void 0:me.offsetHeight)||600,lt=(Se+ot)/2-60,ke=-lt,Ie=(Ne+Ke)/2-60,Ae=-Ie,it=ve.clientX-D.x,gt=ve.clientY-D.y;Y({x:Math.min(lt,Math.max(ke,it)),y:Math.min(Ie,Math.max(Ae,gt))})}},ie=()=>{K(!1)};if(U)return window.addEventListener("mousemove",ae),window.addEventListener("mouseup",ie),()=>{window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",ie)}},[U,D]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start md:items-center justify-center z-50 p-0 md:p-4 overflow-y-auto",onClick:r,children:e.jsxs("div",{ref:R,className:`
          bg-white 
          ${i?"w-full min-h-screen rounded-none":"rounded-xl w-full max-w-2xl max-h-[90vh]"} 
          shadow-2xl overflow-hidden flex flex-col
        `,onClick:ae=>ae.stopPropagation(),style:i?{}:{transform:`translate(${I.x}px, ${I.y}px)`,cursor:U?"grabbing":"default"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",onMouseDown:i?void 0:M,style:{cursor:i?"default":U?"grabbing":"grab"},children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Calculadora de Rao"}),e.jsx("p",{className:"text-xs md:text-sm text-orange-100",children:o?"Raes do carrinho":"Buscar rao manualmente"})]})]}),e.jsx("button",{onClick:r,className:"p-1.5 md:p-2 hover:bg-orange-400 rounded-lg transition-colors",children:e.jsx(Vt,{size:i?20:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:[o?"Rao do Carrinho":"Buscar Rao"," *"]}),o?B.length>0?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:(u==null?void 0:u.produto_nome)||"",readOnly:!0,className:"w-full px-4 py-3 pr-10 bg-gray-50 border-2 border-gray-300 rounded-lg text-gray-700 font-medium cursor-pointer",placeholder:"Nenhuma rao no carrinho"}),e.jsx("button",{type:"button",onClick:()=>_(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(ql,{size:20,className:`transition-transform ${N?"rotate-180":""}`})}),N&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-gray-300 rounded-lg shadow-xl z-10 max-h-48 overflow-y-auto",children:B.map((ae,ie)=>e.jsxs("button",{type:"button",onClick:()=>{d(ae.produto_id),m(ae),_(!1),ae.pet_id&&O(ae.pet_id)},className:`w-full px-4 py-3 text-left hover:bg-orange-50 transition-colors ${ae.produto_id===c?"bg-orange-100 border-l-4 border-l-orange-600":""}`,children:[e.jsx("div",{className:"font-medium",children:ae.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ae.peso_embalagem,"kg  R$ ",ae.preco_unitario.toFixed(2),ae.pet_id&&"   Pet vinculado"]})]},ie))})]}):e.jsx("div",{className:"px-4 py-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg text-yellow-700",children:"Adicione raes ao carrinho para calcular"}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:w,onChange:ae=>S(ae.target.value),onFocus:()=>C.length>0&&_(!0),placeholder:"Digite para buscar rao...",className:"w-full px-4 py-3 pr-20 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200"}),F?e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Hy,{size:20,className:"animate-spin text-orange-500"})}):C.length>0&&e.jsx("button",{type:"button",onClick:()=>_(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(ql,{size:20,className:`transition-transform ${N?"rotate-180":""}`})})]}),N&&C.length>0&&e.jsx("div",{className:"bg-white border-2 border-gray-300 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:C.map(ae=>{var ie;return e.jsxs("button",{type:"button",onClick:()=>E(ae),className:`w-full px-4 py-3 text-left hover:bg-orange-50 transition-colors border-b last:border-b-0 ${ae.id===c?"bg-orange-100 border-l-4 border-l-orange-600":""}`,children:[e.jsx("div",{className:"font-medium",children:ae.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ae.peso_embalagem,"kg  R$ ",(ie=ae.preco_venda)==null?void 0:ie.toFixed(2),ae.classificacao_racao&&`  ${ae.classificacao_racao}`]})]},ae.id)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Peso do Pet (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:A.peso_pet_kg,onChange:ae=>T({...A,peso_pet_kg:ae.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Ex: 8.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Idade (meses)"}),e.jsx("input",{type:"number",value:A.idade_meses,onChange:ae=>T({...A,idade_meses:ae.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Ex: 24"})]})]}),o&&x&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:x.nome})]}),e.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Dados carregados automaticamente do cadastro"})]}),f&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-800 flex items-center gap-2",children:[e.jsx("span",{children:""})," Resultados do Clculo"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Durao"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.floor(f.duracao_pacote_dias)," dias"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(z=f.duracao_meses)==null?void 0:z.toFixed(1)," meses"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Consumo dirio"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(le=f.consumo_diario_gramas)==null?void 0:le.toFixed(0),"g"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo/kg"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(Q=f.custo_por_kg)==null?void 0:Q.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo/dia"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(ne=f.custo_diario)==null?void 0:ne.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 col-span-1 sm:col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo mensal"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(re=f.custo_mensal)==null?void 0:re.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t px-4 md:px-6 py-3 md:py-4 flex flex-col-reverse sm:flex-row justify-end gap-2 md:gap-3",children:[e.jsx("button",{onClick:r,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Fechar"}),e.jsx("button",{onClick:L,disabled:b,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Hy,{size:20,className:"animate-spin"}),"Calculando..."]}):e.jsx(e.Fragment,{children:" Calcular Consumo"})})]})]})}):null}const J9=()=>{var g,y,N,_;const t=Vo(),{user:r,logout:a}=ou(),[s,n]=j.useState(window.innerWidth<768);j.useEffect(()=>{const w=()=>{n(window.innerWidth<768)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const o=w=>{var C,k;return r?((C=r.role)==null?void 0:C.name)==="admin"||((k=r.role)==null?void 0:k.name)==="Admin"?!0:!r.permissions||!Array.isArray(r.permissions)?!1:r.permissions.includes(w):!1},[i,l]=j.useState(()=>{if(window.innerWidth<768)return!1;const w=localStorage.getItem("sidebar_open");return w!==null?JSON.parse(w):t.pathname!=="/pdv"}),[c,d]=j.useState({}),[u,m]=j.useState(()=>{const w=localStorage.getItem("sidebar_visible");return w!==null?JSON.parse(w):!0}),[x,h]=j.useState(!1),b=()=>{s&&l(!1)};j.useEffect(()=>{s||localStorage.setItem("sidebar_open",JSON.stringify(i))},[i,s]),j.useEffect(()=>{s||localStorage.setItem("sidebar_visible",JSON.stringify(u))},[u,s]),j.useEffect(()=>{s&&l(!1)},[t.pathname,s]),j.useEffect(()=>{s&&i&&l(!1)},[s,i]);const f=[{path:"/dashboard",icon:C9,label:"Dashboard",permission:"relatorios.gerencial"},{path:"/dashboard-gerencial",icon:ph,label:" Dashboard Gerencial",highlight:!0,permission:"relatorios.gerencial"},{path:"/clientes",icon:QA,label:"Pessoas",permission:"clientes.visualizar"},{path:"/pets",icon:Hr,label:" Pets",highlight:!0,permission:"clientes.visualizar"},{path:"/produtos",icon:Zx,label:"Produtos",permission:"produtos.visualizar",submenu:[{path:"/produtos",label:"Listar Produtos",permission:"produtos.visualizar"},{path:"/produtos/relatorio",label:"Relatrio de Movimentaes",permission:"produtos.visualizar"},{path:"/estoque/alertas",label:"Alertas de Estoque",permission:"produtos.visualizar"}]},{path:"/lembretes",icon:WA,label:"Lembretes",badge:!0,permission:null},{path:"/calculadora-racao",icon:T9,label:"Calculadora de Rao",permission:null},{path:"/pdv",icon:zl,label:"PDV (Vendas)",permission:"vendas.criar"},{path:"/ecommerce",icon:zl,label:"E-commerce MVP",permission:"vendas.visualizar"},{path:"/notas-fiscais",icon:S9,label:"Notas Fiscais",permission:"vendas.visualizar"},{path:"/compras",icon:j9,label:"Compras",permission:"compras.gerenciar",submenu:[{path:"/compras/pedidos",label:"Pedidos de Compra",permission:"compras.pedidos"},{path:"/compras/entrada-xml",label:"Entrada por XML",permission:"compras.entrada_xml"},{path:"/compras/bling",label:"Sinc. Bling",permission:"compras.sincronizacao_bling"}]},{path:"/financeiro",icon:sc,label:"Financeiro/Contbil",permission:"relatorios.financeiro",submenu:[{path:"/financeiro",label:"Dashboard",permission:"financeiro.dashboard"},{path:"/financeiro/vendas",label:"Vendas",permission:"financeiro.vendas"},{path:"/financeiro/fluxo-caixa",label:"Fluxo de Caixa",permission:"financeiro.fluxo_caixa"},{path:"/financeiro/dre",label:"DRE",permission:"financeiro.dre"},{path:"/financeiro/contas-pagar",label:"Contas a Pagar",permission:"financeiro.contas_pagar"},{path:"/financeiro/contas-receber",label:"Contas a Receber",permission:"financeiro.contas_receber"},{path:"/financeiro/conciliacao-bancaria",label:"Conciliao Bancria",permission:"financeiro.conciliacao_bancaria"},{path:"/financeiro/conciliacao-3abas",label:"Conciliao 3 Abas",highlight:!0,permission:"financeiro.conciliacao_cartao"}]},{path:"/comissoes",icon:rs,label:"Comisses",permission:"relatorios.financeiro",submenu:[{path:"/comissoes",label:"Configurao",permission:"comissoes.configurar"},{path:"/comissoes/demonstrativo",label:"Demonstrativo",permission:"comissoes.demonstrativo"},{path:"/comissoes/abertas",label:"Comisses em Aberto",permission:"comissoes.abertas"},{path:"/comissoes/fechamentos",label:"Histrico de Fechamentos",permission:"comissoes.fechamentos"},{path:"/comissoes/relatorios",label:" Relatrios Analticos",permission:"comissoes.relatorios"}]},{path:"/entregas",icon:rd,label:"Entregas",permission:"vendas.visualizar",submenu:[{path:"/entregas/abertas",label:"Entregas em Aberto",permission:"entregas.abertas"},{path:"/entregas/rotas",label:"Rotas de Entrega",permission:"entregas.rotas"},{path:"/entregas/historico",label:" Histrico",permission:"entregas.historico"},{path:"/entregas/financeiro",label:" Dashboard Financeiro",permission:"entregas.dashboard"}]},{path:"/cadastros",icon:dm,label:"Cadastros",permission:"configuracoes.editar",submenu:[{path:"/cadastros/cargos",label:"Cargos",permission:"cadastros.cargos"},{path:"/cadastros/categorias",label:"Categorias de Produtos",permission:"cadastros.categorias_produtos"},{path:"/cadastros/categorias-financeiras",label:"Categorias Financeiras",permission:"cadastros.categorias_financeiras"},{path:"/cadastros/especies-racas",label:"Espcies e Raas",permission:"cadastros.especies_racas"},{path:"/cadastros/opcoes-racao",label:"Opes de Rao",permission:"produtos.editar"},{path:"/cadastros/financeiro/bancos",label:"Bancos",permission:"cadastros.bancos"},{path:"/cadastros/financeiro/formas-pagamento",label:"Formas de Pagamento",permission:"cadastros.formas_pagamento"},{path:"/cadastros/financeiro/operadoras",label:"Operadoras de Carto",permission:"cadastros.operadoras"}]},{path:"/rh",icon:N9,label:"Recursos Humanos",permission:"usuarios.manage",submenu:[{path:"/rh/funcionarios",label:"Funcionrios",permission:"rh.funcionarios"}]},{path:"/ia",icon:_9,label:"Inteligncia Artificial",permission:null,submenu:[{path:"/ia/chat",label:"Chat IA",permission:null},{path:"/ia/fluxo-caixa",label:"Fluxo de Caixa Preditivo",permission:"ia.fluxo_caixa"},{path:"/ia/whatsapp",label:"Bot WhatsApp",permission:"ia.whatsapp"},{path:"/ia/alertas-racao",label:" Alertas Raes",permission:"produtos.editar"}]},{path:"/admin",icon:YA,label:"Administrao",permission:"usuarios.manage",submenu:[{path:"/admin/usuarios",label:"Usurios",permission:"usuarios.manage"},{path:"/admin/roles",label:"Roles & Permisses",permission:"usuarios.manage"}]},{path:"/configuracoes",icon:dm,label:"Configuraes",permission:"configuracoes.editar",submenu:[{path:"/configuracoes/fiscal",label:"Configurao da Empresa",permission:"configuracoes.empresa"},{path:"/configuracoes/entregas",label:"Entregas",permission:"configuracoes.entregas"},{path:"/configuracoes/custos-moto",label:"Custos da Moto",permission:"configuracoes.custos_moto"},{path:"/configuracoes/estoque",label:"Estoque"},{path:"/configuracoes/simples/fechamento",label:"Fechamento Mensal",permission:"configuracoes.fechamento_mensal"}]}].filter(w=>{if(w.submenu&&Array.isArray(w.submenu)){const S=w.submenu.filter(C=>C.permission?o(C.permission):!0);if(S.length===0)return!1;w.submenu=S}return w.permission?o(w.permission):!0}),v=w=>t.pathname===w;return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s&&i&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-0 z-40 md:hidden pointer-events-none",onClick:()=>l(!1)}),u&&e.jsxs("aside",{className:`${s?`fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ${i?"translate-x-0":"-translate-x-full"}`:`${i?"w-64":"w-20"} transition-all duration-300`} bg-gradient-to-b from-indigo-50 to-purple-50 border-r border-indigo-100 flex flex-col shadow-lg`,children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-indigo-100 bg-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[!s&&e.jsx("button",{onClick:()=>l(!i),className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 hover:from-indigo-500 hover:to-purple-600 flex items-center justify-center shadow-md transition-all cursor-pointer",title:i?"Recolher menu":"Expandir menu",children:e.jsx(C4,{className:"text-white w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-gray-800",children:"Pet Shop Pro"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Central de Gesto"})]})]}),e.jsx("button",{onClick:()=>s?l(!1):m(!1),className:"p-2 hover:bg-indigo-100 rounded-lg transition-colors",title:s?"Fechar menu":"Esconder menu completamente",children:s?e.jsx(Ro,{className:"w-6 h-6 text-indigo-600"}):e.jsx(Hr,{className:"w-5 h-5 text-indigo-600"})})]}),e.jsx("nav",{className:"flex-1 py-2 md:py-4 overflow-y-auto overflow-x-hidden",children:Array.isArray(f)&&f.map(w=>e.jsx("div",{children:w.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{d(S=>({...S,[w.path]:!S[w.path]}))},className:`w-full flex items-center justify-between gap-2 md:gap-3 px-3 md:px-4 py-2.5 md:py-3 mx-1 md:mx-2 rounded-lg transition-all text-sm md:text-base ${t.pathname.startsWith(w.path)?"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-white/60"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx(w.icon,{className:"text-base md:text-lg flex-shrink-0"}),i&&e.jsx("span",{className:"font-medium text-xs md:text-sm",children:w.label})]}),i&&(c[w.path]?e.jsx(ac,{className:"text-xs md:text-sm text-gray-400"}):e.jsx(Ml,{className:"text-xs md:text-sm text-gray-400"}))]}),c[w.path]&&i&&e.jsx("div",{className:"mt-1 mb-2 space-y-0.5 md:space-y-1",children:Array.isArray(w.submenu)&&w.submenu.map(S=>e.jsx($l,{to:S.path,onClick:b,className:`flex items-center gap-2 md:gap-3 px-3 md:px-4 py-1.5 md:py-2 mx-1 md:mx-2 ml-8 md:ml-12 rounded-lg transition-all text-xs md:text-sm ${v(S.path)?"bg-white text-indigo-600 shadow-sm font-medium":"text-gray-600 hover:bg-white/50"}`,children:e.jsx("span",{children:S.label})},S.path))})]}):e.jsxs($l,{to:w.path,onClick:b,className:`flex items-center gap-2 md:gap-3 px-3 md:px-4 py-2.5 md:py-3 mx-1 md:mx-2 my-0.5 md:my-1 rounded-lg transition-all text-sm md:text-base ${v(w.path)?"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-white/60"}`,title:i?"":w.label,children:[e.jsx(w.icon,{className:"text-base md:text-lg flex-shrink-0"}),i&&e.jsxs("div",{className:"flex items-center justify-between flex-1",children:[e.jsx("span",{className:"font-medium text-xs md:text-sm",children:w.label}),w.badge&&e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]})]})},w.path))}),e.jsx("div",{className:"border-t border-indigo-100 bg-white/30",children:e.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-3 mx-2 my-2 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600 transition-all text-left",title:i?"":"Sair",children:[e.jsx(E9,{className:"text-lg"}),i&&e.jsx("span",{className:"font-medium text-sm",children:"Sair"})]})})]}),!u&&!s&&e.jsx("button",{onClick:()=>m(!0),className:"fixed left-0 top-4 z-50 p-3 bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white rounded-r-xl shadow-lg transition-all",title:"Mostrar menu",children:e.jsx(Hr,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-3 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[s&&u&&e.jsx("button",{onClick:()=>l(!i),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors md:hidden","aria-label":"Toggle menu",children:e.jsx(C4,{className:"w-6 h-6 text-gray-700"})}),s&&!u&&e.jsx("button",{onClick:()=>m(!0),className:"p-2 rounded-lg hover:bg-indigo-100 transition-colors md:hidden","aria-label":"Mostrar menu",children:e.jsx(Hr,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 ml-auto",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(r==null?void 0:r.nome)||(r==null?void 0:r.email)}),e.jsx("p",{className:"text-xs text-gray-500",children:r==null?void 0:r.email})]}),e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold text-sm md:text-base",children:((y=(g=r==null?void 0:r.nome)==null?void 0:g[0])==null?void 0:y.toUpperCase())||((_=(N=r==null?void 0:r.email)==null?void 0:N[0])==null?void 0:_.toUpperCase())})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-3 md:p-6",children:e.jsx(jM,{})})]}),e.jsx(Y9,{onClick:()=>{console.log(" Layout: Abrindo calculadora..."),h(!0)}}),x&&e.jsx(Q9,{isOpen:x,onClose:()=>{console.log(" Layout: Fechando calculadora..."),h(!1)}})]})},Z9=()=>{const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(!1),[c,d]=j.useState(!1),{login:u}=ou(),m=Kt(),x=async h=>{var b,p;h.preventDefault(),o(""),d(!0);try{const f=await u(t,a);if(f.success){const v=localStorage.getItem("user");if(v){const g=JSON.parse(v),y=(p=(b=g.role)==null?void 0:b.name)==null?void 0:p.toLowerCase();console.log(" Role do usurio:",y),console.log(" Permisses:",g.permissions),y==="caixa"?(console.log(" Usurio caixa - Navegando para /pdv"),m("/pdv")):y==="admin"||y==="gerente"?(console.log(" Usurio gerencial - Navegando para /dashboard"),m("/dashboard")):(console.log(" Redirecionando para /lembretes"),m("/lembretes"))}else m("/lembretes")}else console.error(" Login falhou:",f.error),o(f.error||"Erro desconhecido ao fazer login")}catch(f){console.error(" Erro inesperado:",f),o("Erro inesperado ao fazer login")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(Hr,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pet Shop Pro"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Gesto Completo"})]}),n&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(fr,{className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:n})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(I2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:t,onChange:h=>r(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:i?"text":"password",value:a,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),"              ",e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:i?e.jsx(Vy,{}):e.jsx(fh,{})}),"            "]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Entrando...":"Entrar"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["No tem uma conta?"," ",e.jsx($l,{to:"/register",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Criar conta"})]})})]})})},eB=()=>{const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState(!1),[b,p]=j.useState(!1),{register:f}=ou(),v=Kt(),g=async y=>{if(y.preventDefault(),d(""),n!==i){d("As senhas no coincidem");return}if(n.length<6){d("A senha deve ter no mnimo 6 caracteres");return}p(!0);const N=await f(a,n,t);N.success?v("/dashboard"):d(N.error),p(!1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(Hr,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Criar Conta"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comece a usar o Pet Shop Pro"})]}),c&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(fr,{className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:y=>r(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"Seu nome",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(I2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:a,onChange:y=>s(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:u?"text":"password",value:n,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:u?e.jsx(Vy,{}):e.jsx(fh,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:x?"text":"password",value:i,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:x?e.jsx(Vy,{}):e.jsx(fh,{})})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Criando conta...":"Criar Conta"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["J tem uma conta?"," ",e.jsx($l,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Fazer login"})]})})]})})};function tB({isOpen:t,onClose:r,onSuccess:a}){var f,v;const[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState("upload"),m=g=>{const y=g.target.files[0];y&&(y.name.endsWith(".xlsx")||y.name.endsWith(".xls")?(n(y),c(null)):(ze.error("Arquivo deve ser Excel (.xlsx ou .xls)"),g.target.value=""))},x=async()=>{try{const g=localStorage.getItem("token"),y=await V.get("/pessoas/template-importacao",{headers:{Authorization:`Bearer ${g}`},responseType:"blob"}),N=window.URL.createObjectURL(new Blob([y.data])),_=document.createElement("a");_.href=N,_.setAttribute("download",`template_pessoas_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(_),_.click(),_.remove(),window.URL.revokeObjectURL(N),ze.success("Template baixado com sucesso!")}catch(g){console.error("Erro ao baixar template:",g),ze.error("Erro ao baixar template")}},h=async()=>{var g,y,N,_;if(!s){ze.error("Selecione um arquivo para importar");return}i(!0),u("processando");try{const w=new FormData;w.append("file",s);const S=await V.post("/pessoas/importar",w);c(S.data),u("resultado");const C=(((g=S.data.criados)==null?void 0:g.length)||0)+(((y=S.data.atualizados)==null?void 0:y.length)||0);C>0&&(ze.success(`${C} pessoas processadas com sucesso!`),a&&a()),S.data.total_erros>0&&ze.error(`${S.data.total_erros} pessoas com erro`)}catch(w){console.error("Erro ao importar:",w),ze.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao importar pessoas"),u("upload")}finally{i(!1)}},b=()=>{n(null),c(null),u("upload")},p=()=>{b(),r()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-purple-600 to-purple-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Importao de Pessoas em Lote"})]}),e.jsx("button",{onClick:p,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Como funciona"]}),e.jsxs("ul",{className:"text-sm text-purple-800 space-y-1 ml-7",children:[e.jsx("li",{children:"1. Baixe o template Excel clicando no boto abaixo"}),e.jsx("li",{children:"2. Preencha os dados das pessoas (clientes, fornecedores, veterinrios)"}),e.jsx("li",{children:"3. Salve o arquivo e faa o upload aqui"}),e.jsx("li",{children:"4. Pessoas novas sero criadas, existentes sero atualizadas (baseado no CPF/CNPJ)"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Baixar Template Excel"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a Planilha Preenchida"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-12 h-12 mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Clique para selecionar"})," ou arraste o arquivo"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Apenas arquivos Excel (.xlsx, .xls)"}),s&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-purple-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:s.name})]})]}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls",onChange:m})]})})]})]}),d==="processando"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Processando planilha..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Isso pode levar alguns segundos"})]}),d==="resultado"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.total_processados||0}),e.jsx("div",{className:"text-sm text-blue-800 mt-1",children:"Total Processado"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:((f=l.criados)==null?void 0:f.length)||0}),e.jsx("div",{className:"text-sm text-green-800 mt-1",children:"Criados"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:((v=l.atualizados)==null?void 0:v.length)||0}),e.jsx("div",{className:"text-sm text-yellow-800 mt-1",children:"Atualizados"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.total_erros||0}),e.jsx("div",{className:"text-sm text-red-800 mt-1",children:"Erros"})]})]}),l.criados&&l.criados.length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Pessoas Criadas (",l.criados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.criados.map((g,y)=>e.jsxs("li",{className:"text-green-800",children:["Linha ",g.linha,": ",e.jsx("span",{className:"font-medium",children:g.nome})," (",g.tipo,")"]},y))})})]}),l.atualizados&&l.atualizados.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Pessoas Atualizadas (",l.atualizados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.atualizados.map((g,y)=>e.jsxs("li",{className:"text-yellow-800",children:["Linha ",g.linha,": ",e.jsx("span",{className:"font-medium",children:g.nome})," (",g.tipo,")"]},y))})})]}),l.erros&&l.erros.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Erros (",l.erros.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-2",children:l.erros.map((g,y)=>e.jsxs("li",{className:"text-red-800",children:[e.jsxs("strong",{children:["Linha ",g.linha]})," (",g.nome||"?","): ",g.erro]},y))})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:h,disabled:!s||o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Pessoas"]})})]}),d==="resultado"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Importar Novamente"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Concluir"})]})]})]})}):null}var cP={exports:{}},rB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aB=rB,sB=aB;function dP(){}function uP(){}uP.resetWarningCache=dP;var nB=function(){function t(s,n,o,i,l,c){if(c!==sB){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function r(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:uP,resetWarningCache:dP};return a.PropTypes=a,a};cP.exports=nB();var oB=cP.exports;const Ht=mr(oB),iB={venda:zl,conta_receber:rs,pet_cadastro:Hr,pet_atualizacao:Hr,pedido_compra:Zx,conta_pagar:rs,recebimento:rd,vacina:kn,consulta:kn,whatsapp:pi},T4={green:"bg-green-100 text-green-700 border-green-300",yellow:"bg-yellow-100 text-yellow-700 border-yellow-300",red:"bg-red-100 text-red-700 border-red-300",blue:"bg-blue-100 text-blue-700 border-blue-300",purple:"bg-purple-100 text-purple-700 border-purple-300",gray:"bg-gray-100 text-gray-700 border-gray-300"},z2=({clienteId:t,fornecedorId:r,tipo:a="cliente",limit:s=5,showHeader:n=!0,onVerMais:o})=>{const[i,l]=j.useState([]),[c,d]=j.useState(!0),[u,m]=j.useState(""),x=a==="fornecedor"?r:t,h=a==="fornecedor"?`/clientes/fornecedor/${x}/timeline`:`/clientes/${x}/timeline`;j.useEffect(()=>{x&&b()},[x,s,a]);const b=async()=>{var v,g,y;try{d(!0),m("");const N=await V.get(`${h}?limit=${s}`);l(N.data)}catch(N){((v=N.response)==null?void 0:v.status)===500||((g=N.response)==null?void 0:g.status)===404?(console.warn("Timeline no disponvel:",(y=N.response)==null?void 0:y.status),l([]),m("")):(console.error("Erro ao carregar timeline:",N),m("Erro ao carregar timeline"))}finally{d(!1)}},p=v=>{const g=new Date(v),y=new Date,N=new Date(y);return N.setDate(N.getDate()-1),g.toDateString()===y.toDateString()?`Hoje s ${g.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}`:g.toDateString()===N.toDateString()?`Ontem s ${g.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}`:g.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},f=v=>{console.log("Evento clicado:",v)};return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Carregando timeline..."})]})}):u?e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(fr,{}),u]}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kn,{className:"mx-auto text-gray-300 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum evento registrado"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Eventos do cliente aparecero aqui conforme forem acontecendo"})]}):e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(kn,{className:"text-blue-600"}),"Linha do Tempo"]}),o&&e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Ver completa "})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[19px] top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-6",children:i.map((v,g)=>{const y=iB[v.tipo_evento]||kn,N=T4[v.cor_badge]||T4.gray;return e.jsxs("div",{className:"relative pl-12 group",children:[e.jsx("div",{className:"absolute left-0 top-0 w-10 h-10 rounded-full bg-white border-2 border-gray-200 flex items-center justify-center group-hover:border-blue-400 transition-colors",children:e.jsx(y,{className:"text-gray-600 group-hover:text-blue-600 transition-colors",size:18})}),e.jsxs("div",{onClick:()=>f(v),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:v.titulo}),e.jsx("p",{className:"text-sm text-gray-600",children:v.descricao})]}),e.jsx("span",{className:`ml-3 px-2 py-1 text-xs font-medium rounded border ${N} whitespace-nowrap`,children:v.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Il,{size:12}),p(v.data_evento)]}),v.pet_id&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(Hr,{size:12}),"Pet relacionado"]})]})]})]},`${v.tipo_evento}-${v.evento_id}-${g}`)})})]}),i.length>=s&&o&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium underline",children:"Ver todos os eventos "})})]})};z2.propTypes={clienteId:Ht.number,fornecedorId:Ht.number,tipo:Ht.oneOf(["cliente","fornecedor"]),limit:Ht.number,showHeader:Ht.bool,onVerMais:Ht.func};const Sd={VIP:{color:"purple",bgClass:"bg-purple-100",textClass:"text-purple-800",borderClass:"border-purple-300",icon:UA,descricao:"Cliente de alto valor",emoji:""},Recorrente:{color:"blue",bgClass:"bg-blue-100",textClass:"text-blue-800",borderClass:"border-blue-300",icon:sc,descricao:"Compra com frequncia",emoji:""},Novo:{color:"green",bgClass:"bg-green-100",textClass:"text-green-800",borderClass:"border-green-300",icon:Yn,descricao:"Cliente recente",emoji:""},Inativo:{color:"gray",bgClass:"bg-gray-100",textClass:"text-gray-800",borderClass:"border-gray-300",icon:Il,descricao:"Sem compras recentes",emoji:""},Endividado:{color:"red",bgClass:"bg-red-100",textClass:"text-red-800",borderClass:"border-red-300",icon:fr,descricao:"Alto saldo devedor",emoji:""},Risco:{color:"orange",bgClass:"bg-orange-100",textClass:"text-orange-800",borderClass:"border-orange-300",icon:fg,descricao:"Diminuio de frequncia",emoji:""},Regular:{color:"gray",bgClass:"bg-gray-100",textClass:"text-gray-600",borderClass:"border-gray-200",icon:Yn,descricao:"Cliente regular",emoji:""}};function lB({segmento:t,size:r="sm",showIcon:a=!1}){if(!t)return null;const s=Sd[t]||Sd.Regular,n=s.icon,o={xs:"text-xs px-2 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"};return e.jsxs("span",{className:`inline-flex items-center gap-1 font-medium rounded-full ${s.bgClass} ${s.textClass} ${o[r]}`,title:s.descricao,children:[a&&e.jsx(n,{size:r==="xs"?10:r==="sm"?12:14}),s.emoji," ",t]})}function cB({tag:t}){const r=Sd[t]||Sd.Regular;return e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-md ${r.bgClass} ${r.textClass}`,title:r.descricao,children:[r.emoji," ",t]})}function V0(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}function dB({clienteId:t,compact:r=!1}){const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{t&&u()},[t]);const u=async()=>{var v;try{o(!0),l(null);const g=await V.get(`/segmentacao/clientes/${t}`);s(g.data)}catch(g){((v=g.response)==null?void 0:v.status)===404?l("not_calculated"):(l("Erro ao carregar segmentao"),console.error("Erro ao carregar segmentao:",g))}finally{o(!1)}},m=async()=>{try{d(!0);const v=await V.post(`/segmentacao/clientes/${t}/recalcular`);s(v.data),l(null)}catch(v){console.error("Erro ao recalcular segmento:",v),alert("Erro ao recalcular segmento. Tente novamente.")}finally{d(!1)}};if(n)return e.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]});if(i==="not_calculated")return e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fr,{className:"text-yellow-600 mt-1",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"Segmentao no calculada"}),e.jsx("p",{className:"text-sm text-yellow-800 mb-4",children:"Este cliente ainda no foi segmentado. Clique abaixo para calcular."}),e.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(Hm,{className:c?"animate-spin":""}),c?"Calculando...":"Calcular segmento"]})]})]})});if(i&&i!=="not_calculated")return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-800",children:i})});if(!a)return null;const x=Sd[a.segmento]||Sd.Regular,h=x.icon,b=a.metricas||{},p={purple:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-300",blue:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",green:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",gray:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-300",red:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-300",orange:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-300"},f=p[x.color]||p.gray;return r?e.jsx(lB,{segmento:a.segmento,size:"sm"}):e.jsxs("div",{className:`${f} rounded-xl p-6 shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 ${x.bgClass} rounded-lg`,children:e.jsx(h,{className:x.textClass,size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[x.emoji," Segmentao: ",e.jsx("span",{className:x.textClass,children:a.segmento})]}),e.jsx("p",{className:"text-sm text-gray-600",children:x.descricao})]})]}),e.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 disabled:bg-gray-100 border border-gray-300 text-gray-700 rounded-lg transition-colors text-sm",title:"Recalcular segmento",children:[e.jsx(Hm,{size:14,className:c?"animate-spin":""}),c?"Calculando...":"Atualizar"]})]}),a.tags&&a.tags.length>1&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Tambm se enquadra em:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.filter(v=>v!==a.segmento).map(v=>e.jsx(cB,{tag:v},v))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rs,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Total 90 dias"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:V0(b.total_compras_90d||0)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(zl,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Compras 90d"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:b.compras_90d||0})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(sc,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Ticket mdio"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:V0(b.ticket_medio||0)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Il,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"ltima compra"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:b.ultima_compra_dias===9999?"Nunca":`${b.ultima_compra_dias} dias`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total em aberto:"}),e.jsx("span",{className:`font-semibold ${b.total_em_aberto>0?"text-red-600":"text-green-600"}`,children:V0(b.total_em_aberto||0)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Cliente h:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:b.primeira_compra_dias>0?`${b.primeira_compra_dias} dias`:"Sem compras"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total histrico:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:V0(b.total_historico||0)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total de compras:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:b.total_compras_historico||0})]})]}),a.updated_at&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300/50",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["Atualizado em: ",new Date(a.updated_at).toLocaleString("pt-BR")]})})]})}const uB={RISCO:{color:"red",bgClass:"bg-red-50",borderClass:"border-red-200",tagClass:"bg-red-100 text-red-700",label:" Risco"},OPORTUNIDADE:{color:"green",bgClass:"bg-green-50",borderClass:"border-green-200",tagClass:"bg-green-100 text-green-700",label:" Oportunidade"},ATENCAO:{color:"yellow",bgClass:"bg-yellow-50",borderClass:"border-yellow-200",tagClass:"bg-yellow-100 text-yellow-700",label:" Ateno"}};function mB(t,r,a,s){const n=[],o=new Date;if((r==null?void 0:r.segmento)==="VIP"&&(r==null?void 0:r.dias_desde_ultima_compra)>20&&n.push({tipo:"RISCO",icone:VA,titulo:"VIP em risco de churn",descricao:`Sem compras h ${r.dias_desde_ultima_compra} dias. Cliente VIP precisa de ateno especial.`,prioridade:10}),(r==null?void 0:r.dias_desde_ultima_compra)>90&&n.push({tipo:"RISCO",icone:Il,titulo:"Cliente inativo h muito tempo",descricao:`ltima compra foi h ${r.dias_desde_ultima_compra} dias. Considere campanha de reativao.`,prioridade:8}),(r==null?void 0:r.saldo_devedor)>0&&(r==null?void 0:r.total_90d)>0&&(r==null?void 0:r.dias_desde_ultima_compra)<30){const i=r.saldo_devedor/r.total_90d*100;i>50&&n.push({tipo:"ATENCAO",icone:rs,titulo:"Alto endividamento com atividade recente",descricao:`Saldo devedor de R$ ${r.saldo_devedor.toFixed(2)} (${i.toFixed(0)}% das compras). Avaliar condies.`,prioridade:9})}if((r==null?void 0:r.segmento)==="Novo"&&(r==null?void 0:r.ticket_medio)>200&&n.push({tipo:"OPORTUNIDADE",icone:sc,titulo:"Novo cliente de alto valor",descricao:`Ticket mdio de R$ ${r.ticket_medio.toFixed(2)}. Potencial para se tornar VIP.`,prioridade:7}),s||n.push({tipo:"ATENCAO",icone:pi,titulo:"WhatsApp no registrado",descricao:"Adicione o nmero para facilitar comunicao e envio de promoes.",prioridade:5}),a&&a.length>0){const i=a.filter(l=>{if(!l.ultima_consulta)return!0;const c=new Date(l.ultima_consulta);return Math.floor((o-c)/(1e3*60*60*24))>60});if(i.length>0){const l=i[0].nome;n.push({tipo:"OPORTUNIDADE",icone:M2,titulo:`Pet ${l} sem consulta h mais de 60 dias`,descricao:`${i.length===1?"Considere":`${i.length} pets precisam de`} check-up ou retorno.`,prioridade:6})}}return(r==null?void 0:r.segmento)==="Recorrente"&&(r==null?void 0:r.dias_desde_ultima_compra)>30&&n.push({tipo:"ATENCAO",icone:Il,titulo:"Cliente recorrente com atraso",descricao:`Costuma comprar regularmente, mas est h ${r.dias_desde_ultima_compra} dias sem aparecer.`,prioridade:7}),(r==null?void 0:r.saldo_credito)>0&&n.push({tipo:"OPORTUNIDADE",icone:rs,titulo:"Cliente tem crdito disponvel",descricao:`R$ ${r.saldo_credito.toFixed(2)} de crdito pode ser usado. Incentive o uso.`,prioridade:4}),n.sort((i,l)=>l.prioridade-i.prioridade).slice(0,3)}function xB({clienteId:t,cliente:r,metricas:a}){const[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState([]);j.useEffect(()=>{t&&d()},[t,a]);const d=async()=>{try{i(!0);let u=(r==null?void 0:r.pets)||[];if(u.length===0&&t)try{u=(await V.get(`/clientes/${t}`)).data.pets||[]}catch(h){console.error("Erro ao carregar pets:",h)}c(u);const m=(r==null?void 0:r.celular)&&r.celular.trim()!=="",x=mB(r,a,u,m);n(x)}catch(u){console.error("Erro ao calcular insights:",u),n([])}finally{i(!1)}};return o?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(um,{className:"text-yellow-500",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"})]}),e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:"Analisando cliente..."})]})]}):!s||s.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(um,{className:"text-yellow-500",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(Ll,{size:20}),e.jsx("p",{className:"font-medium",children:" Cliente em dia!"})]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Nenhuma ao prioritria no momento"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-300 rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[e.jsx(um,{className:"text-yellow-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:[s.length," ",s.length===1?"insight":"insights"]})]}),e.jsx("div",{className:"space-y-3",children:s.map((u,m)=>{const x=uB[u.tipo],h=u.icone;return e.jsx("div",{className:`${x.bgClass} border ${x.borderClass} rounded-lg p-4 transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(h,{className:`text-${x.color}-600`,size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:u.titulo}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${x.tagClass}`,children:x.label})]}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:u.descricao})]})]})},m)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-yellow-200",children:e.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(Ll,{size:12}),"Insights calculados automaticamente com base no histrico do cliente"]})})]})}const pB=()=>{var Nt,At,Mt,ut,X;const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(""),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[m,x]=j.useState(null),[h,b]=j.useState(""),[p,f]=j.useState("todos"),[v,g]=j.useState(1),[y,N]=j.useState(0),[_,w]=j.useState(20),[S,C]=j.useState(!1),[k,F]=j.useState(1),[q,A]=j.useState([]),[T,U]=j.useState(null),[K,I]=j.useState(""),[Y,D]=j.useState(null),[W,R]=j.useState(!1),[B,O]=j.useState(!1),[L,E]=j.useState([]),[M,z]=j.useState({}),[le,Q]=j.useState(null),[ne,re]=j.useState(null),[ae,ie]=j.useState(null),[ve,_e]=j.useState(!1),[me,Se]=j.useState({tipo_cadastro:"cliente",tipo_pessoa:"PF",nome:"",cpf:"",email:"",telefone:"",celular:"",celular_whatsapp:!0,cnpj:"",inscricao_estadual:"",razao_social:"",nome_fantasia:"",responsavel:"",crmv:"",parceiro_ativo:!1,parceiro_desde:"",parceiro_observacoes:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",endereco_entrega_2:"",is_entregador:!1,entregador_ativo:!0,entregador_padrao:!1,tipo_vinculo_entrega:"",controla_rh:!1,gera_conta_pagar_custo_entrega:!1,media_entregas_configurada:"",custo_rh_ajustado:"",modelo_custo_entrega:"",taxa_fixa_entrega:"",valor_por_km_entrega:"",moto_propria:!0,tipo_acerto_entrega:"",dia_semana_acerto:"",dia_mes_acerto:"",is_terceirizado:!1,recebe_repasse:!1,gera_conta_pagar:!1,observacoes:"",tags:""}),[Ne,ot]=j.useState([]),[Ke,lt]=j.useState(null),[ke,Ie]=j.useState(!1),[Ae,it]=j.useState({nome:"",especie:"",raca:"",sexo:"",data_nascimento:"",cor:"",peso:"",observacoes:"",castrado:!1,porte:"",microchip:"",alergias:"",doencas_cronicas:"",medicamentos_continuos:"",historico_clinico:"",foto_url:"",idade_aproximada:""}),gt=[{number:1,title:"Informaes do cliente"},{number:2,title:"Contatos"},{number:3,title:"Endereo"},{number:4,title:"Informaes complementares"},{number:5,title:"Animais"},{number:6,title:"Financeiro"}];j.useEffect(()=>{Ct()},[p,v,_]),j.useEffect(()=>{const P=setTimeout(()=>{v!==1?g(1):Ct()},500);return()=>clearTimeout(P)},[o]),j.useEffect(()=>{Ae&&Ae.especie?Dt(Ae.especie):E([])},[Ae==null?void 0:Ae.especie]),j.useEffect(()=>{if(ne&&q.length>0){const P=q.findIndex(H=>H.id===ne);P!==-1&&(st(P),re(null))}},[q,ne]);const Dt=async P=>{try{const H=await V.get(`/clientes/racas?especie=${P}`);E(H.data)}catch(H){console.error("Erro ao carregar raas:",H),E([])}},Ct=async()=>{try{n(!0);const P=(v-1)*_,H=new URLSearchParams({skip:P.toString(),limit:_.toString()});p!=="todos"&&H.append("tipo_cadastro",p),o&&o.trim()&&H.append("search",o.trim());const Z=`/clientes/?${H.toString()}`,oe=await V.get(Z);oe.data.items?(a(oe.data.items),N(oe.data.total)):(a(oe.data),N(oe.data.length))}catch(P){b("Erro ao carregar pessoas"),console.error(P)}finally{n(!1)}},Lt=async P=>{const H=P.replace(/\D/g,"");if(H.length===8){C(!0),I(""),b("");try{const oe=await(await fetch(`https://viacep.com.br/ws/${H}/json/`)).json();if(oe.erro){I("CEP no encontrado");return}Se(de=>({...de,endereco:oe.logradouro||"",bairro:oe.bairro||"",cidade:oe.localidade||"",estado:oe.uf||"",cep:P}))}catch(Z){console.error("Erro ao buscar CEP:",Z)}finally{C(!1)}}},$t=(P=null)=>{lt(P!==null?{...Ne[P],index:P}:{tipo:"entrega",apelido:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""}),Ie(!0)},ge=()=>{Ie(!1),lt(null)},De=async P=>{if(!(!P||P.length!==9)){C(!0);try{const Z=await(await fetch(`https://viacep.com.br/ws/${P.replace("-","")}/json/`)).json();if(Z.erro){alert("CEP no encontrado");return}lt(oe=>({...oe,endereco:Z.logradouro||"",bairro:Z.bairro||"",cidade:Z.localidade||"",estado:Z.uf||""}))}catch(H){console.error("Erro ao buscar CEP:",H),alert("Erro ao buscar CEP")}finally{C(!1)}}},Le=()=>{if(!Ke.cep||!Ke.endereco||!Ke.cidade){alert("Preencha pelo menos CEP, Endereo e Cidade");return}const P=[...Ne];Ke.index!==void 0?(P[Ke.index]={...Ke},delete P[Ke.index].index):P.push({...Ke}),ot(P),ge()},ct=P=>{if(confirm("Deseja realmente remover este endereo?")){const H=Ne.filter((Z,oe)=>oe!==P);ot(H)}},tt=async()=>{var P,H,Z,oe,de;b("");try{const se=[];if((!me.nome||me.nome.trim()==="")&&se.push("Nome"),me.tipo_pessoa==="PJ"&&((!me.cnpj||me.cnpj.trim()==="")&&se.push("CNPJ"),(!me.razao_social||me.razao_social.trim()==="")&&se.push("Razo Social")),me.tipo_pessoa==="PF"&&me.tipo_cadastro==="cliente"&&(!me.cpf||me.cpf.trim()),se.length>0){const Ue=` Faltam os seguintes campos obrigatrios:

`+se.map(Je=>` ${Je}`).join(`
`);alert(Ue),b(Ue);return}if(me.is_entregador){if(!me.tipo_acerto_entrega){alert("Informe o tipo de acerto do entregador (semanal, quinzenal ou mensal)");return}if(me.tipo_acerto_entrega==="semanal"&&!me.dia_semana_acerto){alert("Informe o dia da semana para o acerto semanal");return}if(me.tipo_acerto_entrega==="mensal"&&!me.dia_mes_acerto){alert("Informe o dia do ms para o acerto mensal");return}if(me.tipo_acerto_entrega==="mensal"){const Ue=parseInt(me.dia_mes_acerto);if(Ue<1||Ue>28){alert("O dia do ms deve estar entre 1 e 28");return}}}const{celular_whatsapp:fe,tags:he,...we}=me;we.is_entregador&&(we.tipo_cadastro==="funcionario"?(we.tipo_vinculo_entrega="funcionario",we.is_terceirizado=!1):we.tipo_cadastro==="fornecedor"&&(we.is_terceirizado=!0,we.tipo_vinculo_entrega="terceirizado")),we.enderecos_adicionais=Ne.length>0?Ne:null,Object.keys(we).forEach(Ue=>{we[Ue]===""&&(we[Ue]=null)}),we.tipo_cadastro==="todos"&&(we.tipo_cadastro="cliente");let Ee;m?(await V.put(`/clientes/${m.id}`,we),Ee=m.id):Ee=(await V.post("/clientes/",we)).data.id;for(const Ue of q){const Je=Ue.id,et={...Ue};delete et.id,delete et.created_at,delete et.updated_at,delete et.cliente_id,delete et.user_id,delete et.ativo,delete et.codigo,Object.keys(et).forEach(Ze=>{et[Ze]===""&&(et[Ze]=null)}),et.peso!==null&&et.peso!==void 0&&(et.peso=parseFloat(et.peso)||null),Je?(console.log(`Atualizando pet ${Je}:`,et),await V.put(`/clientes/pets/${Je}`,et)):(console.log("Criando novo pet:",et),await V.post(`/clientes/${Ee}/pets`,et))}Ct(),ue()}catch(se){const fe=(H=(P=se.response)==null?void 0:P.data)==null?void 0:H.details;console.error("Erro completo:",(Z=se.response)==null?void 0:Z.data),console.error("Detalhes de validao:",fe);const he={nome:"Nome",cpf:"CPF",cnpj:"CNPJ",razao_social:"Razo Social",nome_fantasia:"Nome Fantasia",inscricao_estadual:"Inscrio Estadual",responsavel:"Responsvel",telefone:"Telefone",celular:"Celular",email:"E-mail",cep:"CEP",endereco:"Endereo",numero:"Nmero",bairro:"Bairro",cidade:"Cidade",estado:"Estado",tipo_pessoa:"Tipo de Pessoa",tipo_cadastro:"Tipo de Cadastro",crmv:"CRMV",tipo_acerto_entrega:"Tipo de Acerto",dia_semana_acerto:"Dia da Semana para Acerto",dia_mes_acerto:"Dia do Ms para Acerto",tipo_vinculo_entrega:"Tipo de Vnculo"};let we="";if(fe&&Array.isArray(fe)){const Ue=[];fe.forEach(Je=>{const et=Je.loc[Je.loc.length-1],Ze=he[et]||et;Je.type==="missing"||Je.type==="value_error.missing"?Ue.push(Ze):Je.msg&&Ue.push(`${Ze}: ${Je.msg}`),console.error(`Campo: ${Ze} | Tipo: ${Je.type} | Mensagem: ${Je.msg}`)}),Ue.length>0&&(we=` Faltam os seguintes campos obrigatrios:

`+Ue.map(Je=>` ${Je}`).join(`
`))}const Ee=we||((de=(oe=se.response)==null?void 0:oe.data)==null?void 0:de.message)||"Erro ao salvar cliente";b(Ee),we&&alert(we)}},xe=async P=>{var H,Z;if(confirm("Tem certeza que deseja excluir este cliente?"))try{console.log("Excluindo cliente ID:",P);const oe=await V.delete(`/clientes/${P}`);console.log("Cliente excludo com sucesso:",oe),await Ct()}catch(oe){console.error("Erro ao excluir cliente:",oe),console.error("Resposta do erro:",oe.response),b(((Z=(H=oe.response)==null?void 0:H.data)==null?void 0:Z.detail)||"Erro ao excluir cliente")}},Fe=async P=>{var H,Z;if(confirm("Tem certeza que deseja excluir este pet?"))try{console.log("Excluindo pet ID:",P),await V.delete(`/clientes/pets/${P}`),console.log("Pet excludo com sucesso"),z({}),await Ct(),console.log("Lista de clientes atualizada")}catch(oe){console.error("Erro ao excluir pet:",oe),alert(((Z=(H=oe.response)==null?void 0:H.data)==null?void 0:Z.detail)||"Erro ao excluir pet")}},Ye=async P=>{var H;if(P)try{_e(!0);const Z=await V.get(`/financeiro/cliente/${P}/resumo`);ie(Z.data.resumo)}catch(Z){((H=Z.response)==null?void 0:H.status)!==404&&console.error("Erro ao carregar resumo financeiro:",Z),ie(null)}finally{_e(!1)}},te=(P=null,H=null,Z=null)=>{if(P)x(P),console.log(" Cliente carregado do backend:",{id:P.id,nome:P.nome,is_entregador:P.is_entregador,entregador_padrao:P.entregador_padrao,entregador_padrao_tipo:typeof P.entregador_padrao}),Se({tipo_cadastro:P.tipo_cadastro||"cliente",tipo_pessoa:P.tipo_pessoa||"PF",nome:P.nome,cpf:P.cpf||"",email:P.email||"",telefone:P.telefone||"",celular:P.celular||"",celular_whatsapp:!0,cnpj:P.cnpj||"",inscricao_estadual:P.inscricao_estadual||"",razao_social:P.razao_social||"",nome_fantasia:P.nome_fantasia||"",responsavel:P.responsavel||"",crmv:P.crmv||"",parceiro_ativo:P.parceiro_ativo||!1,parceiro_desde:P.parceiro_desde||"",parceiro_observacoes:P.parceiro_observacoes||"",cep:P.cep||"",endereco:P.endereco||"",numero:P.numero||"",complemento:P.complemento||"",bairro:P.bairro||"",cidade:P.cidade||"",estado:P.estado||"",endereco_entrega:P.endereco_entrega||"",endereco_entrega_2:P.endereco_entrega_2||"",is_entregador:P.is_entregador||!1,entregador_ativo:P.entregador_ativo!==void 0?P.entregador_ativo:!0,entregador_padrao:P.entregador_padrao||!1,tipo_vinculo_entrega:P.tipo_vinculo_entrega||"",controla_rh:P.controla_rh||!1,gera_conta_pagar_custo_entrega:P.gera_conta_pagar_custo_entrega||!1,media_entregas_configurada:P.media_entregas_configurada||"",custo_rh_ajustado:P.custo_rh_ajustado||"",modelo_custo_entrega:P.modelo_custo_entrega||"",taxa_fixa_entrega:P.taxa_fixa_entrega||"",valor_por_km_entrega:P.valor_por_km_entrega||"",moto_propria:P.moto_propria!==void 0?P.moto_propria:!0,tipo_acerto_entrega:P.tipo_acerto_entrega||"",dia_semana_acerto:P.dia_semana_acerto||"",dia_mes_acerto:P.dia_mes_acerto||"",is_terceirizado:P.is_terceirizado||!1,recebe_repasse:P.recebe_repasse||!1,gera_conta_pagar:P.gera_conta_pagar||!1,observacoes:P.observacoes||"",tags:""}),A(P.pets||[]),ot(P.enderecos_adicionais||[]),Ye(P.id),Z?(re(Z),F(5)):(F(1),re(null));else{x(null);const oe=H||(p==="todos"?"cliente":p);Se({tipo_cadastro:oe,tipo_pessoa:oe==="fornecedor"?"PJ":"PF",nome:"",cpf:"",email:"",telefone:"",celular:"",celular_whatsapp:!0,cnpj:"",inscricao_estadual:"",razao_social:"",nome_fantasia:"",responsavel:"",crmv:"",parceiro_ativo:!1,parceiro_desde:"",parceiro_observacoes:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",is_entregador:!1,entregador_ativo:!0,tipo_vinculo_entrega:"",controla_rh:!1,media_entregas_configurada:"",custo_rh_ajustado:"",modelo_custo_entrega:"",taxa_fixa_entrega:"",valor_por_km_entrega:"",moto_propria:!0,is_terceirizado:!1,recebe_repasse:!1,gera_conta_pagar:!1,observacoes:"",tags:""}),A([]),ot([]),F(1)}c(!0),b("")},ue=()=>{c(!1),x(null),F(1),A([]),D(null),R(!1),O(!1),Q(null),re(null),ie(null)},Oe=async()=>{try{const P=new URLSearchParams;if(me.cpf&&P.append("cpf",me.cpf),me.cnpj&&P.append("cnpj",me.cnpj),me.telefone&&P.append("telefone",me.telefone),me.celular&&P.append("celular",me.celular),me.crmv&&P.append("crmv",me.crmv),m&&P.append("cliente_id",m.id),P.toString()){const H=await V.get(`/clientes/verificar-duplicata/campo?${P.toString()}`);if(H.data.duplicado)return D(H.data),R(!0),!0}return!1}catch(P){return console.error("Erro ao verificar duplicata:",P),!1}},ce=async()=>{if(k<6){if(b(""),I(""),k===1&&await Oe()||k===2&&await Oe())return;F(k+1)}},je=P=>["cpf","cnpj","crmv"].includes(P),Re=()=>{O(!0)},He=async()=>{var P,H;try{n(!0);const Z=(m==null?void 0:m.codigo)||(r.length>0?Math.max(...r.map(oe=>oe.codigo))+1:1);await V.put(`/clientes/${Y.cliente.id}/remover-campo`,null,{params:{campo:Y.campo,novo_cliente_codigo:Z}}),O(!1),R(!1),D(null),F(k+1)}catch(Z){b(((H=(P=Z.response)==null?void 0:P.data)==null?void 0:H.detail)||"Erro ao remover campo duplicado")}finally{n(!1)}},J=()=>{O(!1)},ye=()=>{ue();const P=document.getElementById(`cliente-${Y.cliente.id}`);P&&(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("ring-4","ring-yellow-400"),setTimeout(()=>{P.classList.remove("ring-4","ring-yellow-400")},3e3))},Pe=()=>{const P=r.find(H=>H.id===Y.cliente.id);P&&(R(!1),D(null),O(!1),te(P))},We=()=>{k>1&&(b(""),I(""),F(k-1))},st=P=>{const H=q[P];it({nome:H.nome||"",especie:H.especie||"",raca:H.raca||"",sexo:H.sexo||"",data_nascimento:H.data_nascimento||"",cor:H.cor||"",peso:H.peso||"",observacoes:H.observacoes||"",castrado:H.castrado||!1,porte:H.porte||"",microchip:H.microchip||"",alergias:H.alergias||"",doencas_cronicas:H.doencas_cronicas||"",medicamentos_continuos:H.medicamentos_continuos||"",historico_clinico:H.historico_clinico||"",foto_url:H.foto_url||"",idade_aproximada:H.idade_aproximada||""}),U(P),H!=null&&H.id&&Q(H.id)},xt=r.filter(P=>{var H,Z,oe,de;return((H=P.codigo)==null?void 0:H.includes(o))||P.nome.toLowerCase().includes(o.toLowerCase())||((Z=P.cpf)==null?void 0:Z.includes(o))||((oe=P.email)==null?void 0:oe.toLowerCase().includes(o.toLowerCase()))||((de=P.celular)==null?void 0:de.includes(o))});function pt({clienteId:P}){const[H,Z]=j.useState([]),[oe,de]=j.useState(!0);j.useEffect(()=>{P&&se()},[P]);const se=async()=>{try{de(!0);const fe=await V.get(`/whatsapp/clientes/${P}/whatsapp/ultimas?limit=5`);Z(fe.data)}catch(fe){console.error("Erro ao carregar mensagens:",fe),Z([])}finally{de(!1)}};return oe?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Carregando mensagens..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(pi,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"Nenhuma mensagem registrada ainda"}),e.jsx("p",{className:"text-xs mt-1",children:"As mensagens enviadas e recebidas aparecero aqui"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"ltimas 5 mensagens:"}),H.map(fe=>e.jsxs("div",{className:`p-3 rounded-lg border ${fe.direcao==="enviada"?"bg-green-50 border-green-200 ml-6":"bg-blue-50 border-blue-200 mr-6"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold ${fe.direcao==="enviada"?"text-green-700":"text-blue-700"}`,children:fe.direcao==="enviada"?" Enviada":" Recebida"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${fe.status==="lido"?"bg-green-200 text-green-800":fe.status==="enviado"?"bg-yellow-200 text-yellow-800":fe.status==="recebido"?"bg-blue-200 text-blue-800":"bg-red-200 text-red-800"}`,children:fe.status})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(fe.created_at).toLocaleString("pt-BR")})]}),e.jsx("p",{className:"text-sm text-gray-700",children:fe.preview||fe.conteudo})]},fe.id))]})}return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cadastros"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerenciamento de clientes, fornecedores, veterinrios, funcionrios e pets"})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{f("todos"),g(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="todos"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Todos"}),e.jsx("button",{onClick:()=>{f("cliente"),g(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="cliente"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Clientes"}),e.jsx("button",{onClick:()=>{f("fornecedor"),g(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="fornecedor"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Fornecedores"}),e.jsx("button",{onClick:()=>{f("veterinario"),g(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="veterinario"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Veterinrios"}),e.jsx("button",{onClick:()=>{f("funcionario"),g(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="funcionario"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Funcionrios"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(XA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por cdigo, nome, CPF/CNPJ, email ou telefone...",value:o,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(F9,{})," Importar Excel"]}),e.jsxs("button",{onClick:()=>te(null,p),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(gs,{})," Novo ",p==="cliente"?"Cliente":p==="fornecedor"?"Fornecedor":p==="veterinario"?"Veterinrio":p==="funcionario"?"Funcionrio":"Cadastro"]})]})]}),h&&!l&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(fr,{}),e.jsx("span",{children:h})]}),!s&&y>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-t-lg flex items-center justify-between mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(v-1)*_+1," a ",Math.min(v*_,y)," de ",y," pessoas"]}),e.jsxs("select",{value:_,onChange:P=>{w(Number(P.target.value)),g(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(1),disabled:v===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>g(P=>Math.max(P-1,1)),disabled:v===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Math.ceil(y/_),5)},(P,H)=>{const Z=Math.ceil(y/_);let oe;return Z<=5||v<=3?oe=H+1:v>=Z-2?oe=Z-4+H:oe=v-2+H,e.jsx("button",{onClick:()=>g(oe),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${v===oe?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:oe},oe)})}),e.jsx("button",{onClick:()=>g(P=>Math.min(P+1,Math.ceil(y/_))),disabled:v===Math.ceil(y/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>g(Math.ceil(y/_)),disabled:v===Math.ceil(y/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[xt.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CPF/CNPJ"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Celular"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pets"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segmento"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:xt.map(P=>{var H;return e.jsxs(j.Fragment,{children:[e.jsxs("tr",{id:`cliente-${P.id}`,onClick:()=>te(P),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 font-medium",children:P.codigo}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.nome}),P.tipo_pessoa==="PJ"&&P.razao_social&&e.jsx("span",{className:"text-xs text-gray-500",children:P.razao_social}),P.parceiro_ativo&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-0.5 rounded-full w-fit",children:[e.jsx(rs,{size:12}),"Parceiro"]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:P.tipo_pessoa==="PF"?P.cpf||"-":P.cnpj||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:P.celular||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",onClick:Z=>Z.stopPropagation(),children:e.jsxs("button",{onClick:()=>z({...M,[P.id]:!M[P.id]}),className:"flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900 transition-colors",children:[e.jsx(Hr,{size:16,className:"text-gray-400"}),e.jsx("span",{children:((H=P.pets)==null?void 0:H.length)||0}),P.pets&&P.pets.length>0&&e.jsx(xh,{size:14,className:`transform transition-transform ${M[P.id]?"rotate-90":""}`})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",onClick:Z=>Z.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[P.celular&&e.jsx("button",{onClick:()=>{const Z=P.celular.replace(/\D/g,"");window.open(`https://wa.me/55${Z}`,"_blank")},className:"text-green-600 hover:text-green-900 transition-colors",title:"Abrir WhatsApp",children:e.jsx(pi,{size:16})}),e.jsx("button",{onClick:()=>te(P),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Editar",children:e.jsx(Oi,{size:16})}),e.jsx("button",{onClick:()=>xe(P.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Excluir",children:e.jsx(Fo,{size:16})})]})})]}),M[P.id]&&P.pets&&P.pets.length>0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-3 bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:["Pets de ",P.nome,":"]}),P.pets.map(Z=>e.jsxs("div",{className:`bg-white rounded-lg p-3 flex justify-between items-start border border-gray-200 ${le===Z.id?"ring-2 ring-blue-400 shadow-lg bg-blue-50":""}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nome"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Z.nome})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Espcie/Raa"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[Z.especie," ",Z.raca&&`- ${Z.raca}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Sexo"}),e.jsx("p",{className:"text-sm text-gray-700",children:Z.sexo||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nascimento"}),e.jsx("p",{className:"text-sm text-gray-700",children:Z.data_nascimento?new Date(Z.data_nascimento).toLocaleDateString("pt-BR"):"-"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{Q(Z.id),te(P,null,Z.id)},className:"text-blue-600 hover:text-blue-900 p-1 transition-colors",title:"Editar pet",children:e.jsx(Oi,{size:14})}),e.jsx("button",{onClick:()=>Fe(Z.id),className:"text-red-600 hover:text-red-900 p-1 transition-colors",title:"Excluir pet",children:e.jsx(Fo,{size:14})})]})]},Z.id))]})})})]},P.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Yn,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]}),!s&&y>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(v-1)*_+1," a ",Math.min(v*_,y)," de ",y," pessoas"]}),e.jsxs("select",{value:_,onChange:P=>{w(Number(P.target.value)),g(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(1),disabled:v===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>g(P=>Math.max(P-1,1)),disabled:v===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Math.ceil(y/_),5)},(P,H)=>{const Z=Math.ceil(y/_);let oe;return Z<=5||v<=3?oe=H+1:v>=Z-2?oe=Z-4+H:oe=v-2+H,e.jsx("button",{onClick:()=>g(oe),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${v===oe?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:oe},oe)})}),e.jsx("button",{onClick:()=>g(P=>Math.min(P+1,Math.ceil(y/_))),disabled:v===Math.ceil(y/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>g(Math.ceil(y/_)),disabled:v===Math.ceil(y/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m?`Editar ${m.tipo_cadastro==="cliente"?"Cliente":m.tipo_cadastro==="fornecedor"?"Fornecedor":"Veterinrio"}`:`Adicionar ${me.tipo_cadastro==="cliente"?"Cliente":me.tipo_cadastro==="fornecedor"?"Fornecedor":"Veterinrio"}`}),e.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ro,{size:24})})]}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:gt.map((P,H)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("button",{onClick:()=>F(P.number),className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm transition-all hover:scale-110 cursor-pointer ${k>P.number?"bg-green-500 text-white hover:bg-green-600":k===P.number?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400"}`,type:"button",title:`Ir para: ${P.title}`,children:k>P.number?e.jsx(Wm,{}):P.number}),e.jsx("span",{className:"text-xs mt-1 text-center hidden md:block",children:P.title})]}),H<gt.length-1&&e.jsx("div",{className:`h-0.5 flex-1 ${k>P.number?"bg-green-500":"bg-gray-300"}`})]},P.number))}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[k,"/6"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(fr,{}),e.jsx("span",{children:h})]}),W&&Y&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-2 border-yellow-400 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fr,{className:"text-yellow-600 mt-1",size:24}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:" Cliente j cadastrado!"}),e.jsxs("p",{className:"text-sm text-yellow-800 mb-3",children:["J existe um cliente com o mesmo ",e.jsx("strong",{children:Y.campo})," cadastrado:"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-yellow-300 mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Y.cliente.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cdigo: ",Y.cliente.codigo]}),Y.cliente.cpf&&e.jsxs("p",{className:"text-sm text-gray-600",children:["CPF: ",Y.cliente.cpf]}),Y.cliente.celular&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Celular: ",Y.cliente.celular]}),Y.cliente.telefone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Telefone: ",Y.cliente.telefone]})]}),je(Y.campo)?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 mb-2",children:" No  possvel criar novo cadastro"}),e.jsxs("p",{className:"text-sm text-red-800 mb-2",children:[Y.campo.toUpperCase(),"  um documento nico e j est cadastrado."]}),e.jsx("p",{className:"text-sm text-red-700",children:"Voc pode editar o cadastro existente ou visualiz-lo."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Pe,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Editar cadastro existente"}),e.jsx("button",{onClick:ye,className:"flex-1 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Ver cadastro"})]})]}):B?e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 mb-2",children:" Ateno!"}),e.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["O ",e.jsx("strong",{children:Y.campo})," ser removido do cadastro do cliente ",e.jsx("strong",{children:Y.cliente.nome})," (Cdigo ",Y.cliente.codigo,") e uma observao ser adicionada informando a transferncia."]}),e.jsxs("p",{className:"text-xs text-red-700 mb-3",children:['No cadastro antigo ficar registrado: "Sem nmero por cadastro novo do cliente cdigo ',(m==null?void 0:m.codigo)||(r.length>0?Math.max(...r.map(P=>P.codigo))+1:1),'"']}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:He,disabled:s,className:"flex-1 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:s?"Processando...":"Confirmar e continuar"}),e.jsx("button",{onClick:J,disabled:s,className:"flex-1 px-3 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Cancelar"})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ye,className:"flex-1 px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Ver cadastro existente"}),e.jsxs("button",{onClick:Re,className:"flex-1 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:["Transferir ",Y.campo]})]})]})]})}),k===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes do cadastro"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de cadastro *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"cliente",checked:me.tipo_cadastro==="cliente",onChange:P=>{Se({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PF"})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Cliente"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"fornecedor",checked:me.tipo_cadastro==="fornecedor",onChange:P=>{Se({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PJ"})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Fornecedor"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"veterinario",checked:me.tipo_cadastro==="veterinario",onChange:P=>Se({...me,tipo_cadastro:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Veterinrio"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"funcionario",checked:me.tipo_cadastro==="funcionario",onChange:P=>Se({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PF"}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Funcionrio"})]})]})]}),(me.tipo_cadastro==="funcionario"||me.tipo_cadastro==="fornecedor")&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:" entregador"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-auto",children:[e.jsx("input",{type:"checkbox",checked:me.is_entregador||!1,onChange:P=>Se({...me,is_entregador:P.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),me.is_entregador&&e.jsxs("div",{className:"ml-5 mt-2 space-y-2 border-l-2 border-blue-300 pl-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.entregador_padrao||!1,onChange:P=>Se({...me,entregador_padrao:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Entregador padro"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"(pr-selecionado nas rotas)"})]}),me.tipo_cadastro==="funcionario"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.controla_rh||!1,onChange:P=>{const H=P.target.checked;Se({...me,controla_rh:H,modelo_custo_entrega:H?"":me.modelo_custo_entrega,taxa_fixa_entrega:H?"":me.taxa_fixa_entrega,valor_por_km_entrega:H?"":me.valor_por_km_entrega,gera_conta_pagar_custo_entrega:!1})},className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Controla RH"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"Custo rateado na folha (no gera contas a pagar)"})]})]}),me.controla_rh&&e.jsx("div",{className:"ml-5 pl-3 border-l-2 border-blue-300",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Mdia de entregas por ms"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 mb-1",children:"Define o rateio inicial do custo do funcionrio por entrega. Ser ajustado automaticamente no final do ms."}),e.jsx("input",{type:"number",min:"1",step:"1",value:me.media_entregas_configurada||"",onChange:P=>Se({...me,media_entregas_configurada:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 100 entregas/ms"}),e.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:" Exemplo: Se o custo mensal  R$ 3.000 e mdia  100 entregas, cada entrega custar R$ 30,00 inicialmente"})]})}),!me.controla_rh&&e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer ml-5 pl-2 border-l border-gray-300",children:[e.jsx("input",{type:"checkbox",checked:me.gera_conta_pagar_custo_entrega||!1,onChange:P=>Se({...me,gera_conta_pagar_custo_entrega:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Gerar contas a pagar por entrega"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"Marque se este funcionrio recebe por KM ou taxa fixa a cada entrega"})]})]})]}),(me.tipo_cadastro==="fornecedor"||me.tipo_cadastro==="funcionario"&&!me.controla_rh)&&e.jsxs("div",{className:"space-y-2",children:[me.tipo_cadastro==="fornecedor"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-1.5 text-[10px] text-yellow-800",children:[" ",e.jsx("strong",{children:"Terceirizado"})," - Sempre gera contas a pagar"]}),me.tipo_cadastro==="funcionario"&&!me.controla_rh&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-1.5 text-[10px] text-blue-800",children:[" ",e.jsx("strong",{children:"Funcionrio sem RH"})," - ",me.gera_conta_pagar_custo_entrega?"Gera CP por entrega":"No gera CP"]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.modelo_custo_entrega==="taxa_fixa",onChange:P=>Se({...me,modelo_custo_entrega:P.target.checked?"taxa_fixa":"",valor_por_km_entrega:""}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Taxa Fixa"}),me.modelo_custo_entrega==="taxa_fixa"&&e.jsx("input",{type:"number",step:"0.01",min:"0",value:me.taxa_fixa_entrega||"",onChange:P=>Se({...me,taxa_fixa_entrega:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-1 focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 15.00"})]})]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.modelo_custo_entrega==="por_km",onChange:P=>Se({...me,modelo_custo_entrega:P.target.checked?"por_km":"",taxa_fixa_entrega:""}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Valor por KM"}),me.modelo_custo_entrega==="por_km"&&e.jsx("input",{type:"number",step:"0.01",min:"0",value:me.valor_por_km_entrega||"",onChange:P=>Se({...me,valor_por_km_entrega:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-1 focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 2.50"})]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.moto_propria||!1,onChange:P=>Se({...me,moto_propria:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:me.moto_propria?" Moto prpria":" Moto da loja"})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:" Acerto Financeiro"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Periodicidade"}),e.jsxs("select",{value:me.tipo_acerto_entrega||"",onChange:P=>Se({...me,tipo_acerto_entrega:P.target.value,dia_semana_acerto:"",dia_mes_acerto:""}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"quinzenal",children:"Quinzenal (dias 1 e 15)"}),e.jsx("option",{value:"mensal",children:"Mensal"})]})]}),me.tipo_acerto_entrega==="semanal"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Dia da semana"}),e.jsxs("select",{value:me.dia_semana_acerto||"",onChange:P=>Se({...me,dia_semana_acerto:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"1",children:"Segunda"}),e.jsx("option",{value:"2",children:"Tera"}),e.jsx("option",{value:"3",children:"Quarta"}),e.jsx("option",{value:"4",children:"Quinta"}),e.jsx("option",{value:"5",children:"Sexta"}),e.jsx("option",{value:"6",children:"Sbado"}),e.jsx("option",{value:"7",children:"Domingo"})]})]}),me.tipo_acerto_entrega==="mensal"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Dia do ms (1 a 28)"}),e.jsx("input",{type:"number",min:"1",max:"28",value:me.dia_mes_acerto||"",onChange:P=>Se({...me,dia_mes_acerto:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 5"})]}),me.tipo_acerto_entrega==="quinzenal"&&e.jsxs("div",{className:"bg-blue-50 p-1.5 rounded text-[10px] text-blue-700",children:[" Acerto nos dias ",e.jsx("strong",{children:"1"})," e ",e.jsx("strong",{children:"15"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"text-green-600",size:20}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativar como parceiro (comisses)"}),me.parceiro_ativo&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-600 text-white rounded-full text-xs font-semibold animate-fade-in",children:[e.jsx(Wm,{size:14,className:"font-bold"}),e.jsx("span",{children:"Parceiro habilitado para comisso"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.parceiro_ativo,onChange:P=>Se({...me,parceiro_ativo:P.target.checked,parceiro_desde:P.target.checked&&!me.parceiro_desde?new Date().toISOString().split("T")[0]:me.parceiro_desde||""}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-7",children:"Ao ativar, esta pessoa poder receber comisses de vendas, independente do tipo de cadastro"}),me.parceiro_ativo&&e.jsxs("div",{className:"mt-3 ml-7",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Observaes do parceiro (opcional)"}),e.jsx("textarea",{value:me.parceiro_observacoes,onChange:P=>Se({...me,parceiro_observacoes:P.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",placeholder:"Ex: Especialista em produtos de higiene...",rows:"2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:me.tipo_pessoa==="PJ"?"Tipo de pessoa jurdica *":"Tipo de pessoa *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"PF",checked:me.tipo_pessoa==="PF",onChange:P=>Se({...me,tipo_pessoa:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Pessoa Fsica"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"PJ",checked:me.tipo_pessoa==="PJ",onChange:P=>Se({...me,tipo_pessoa:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Pessoa Jurdica"})]})]})]}),me.tipo_pessoa==="PF"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome completo *"}),e.jsx("input",{type:"text",value:me.nome,onChange:P=>Se({...me,nome:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Digite o nome completo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),e.jsx("input",{type:"text",value:me.cpf,onChange:P=>{Se({...me,cpf:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"000.000.000-00",maxLength:"14"})]}),me.tipo_cadastro==="veterinario"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CRMV"}),e.jsx("input",{type:"text",value:me.crmv,onChange:P=>{Se({...me,crmv:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"CRMV XX 1234",maxLength:"20"})]})]}),me.tipo_pessoa==="PJ"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razo Social *"}),e.jsx("input",{type:"text",value:me.razao_social,onChange:P=>Se({...me,razao_social:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Razo social da empresa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia *"}),e.jsx("input",{type:"text",value:me.nome,onChange:P=>Se({...me,nome:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Nome fantasia da empresa",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",value:me.cnpj,onChange:P=>{Se({...me,cnpj:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00.000.000/0000-00",maxLength:"18"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",value:me.inscricao_estadual,onChange:P=>Se({...me,inscricao_estadual:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"IE"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsvel / Contato"}),e.jsx("input",{type:"text",value:me.responsavel,onChange:P=>Se({...me,responsavel:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Nome do responsvel ou contato"})]})]})]}),k===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contatos"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular *"}),e.jsx("input",{type:"text",value:me.celular,onChange:P=>{Se({...me,celular:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"(00) 00000-0000"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Este nmero  WhatsApp?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:me.celular_whatsapp===!0,onChange:()=>Se({...me,celular_whatsapp:!0}),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Sim"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:me.celular_whatsapp===!1,onChange:()=>Se({...me,celular_whatsapp:!1}),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone fixo"}),e.jsx("input",{type:"text",value:me.telefone,onChange:P=>{Se({...me,telefone:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",value:me.email,onChange:P=>Se({...me,email:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"email@exemplo.com"})]})]}),k===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Endereo"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:me.cep,onChange:P=>{const H=P.target.value;Se({...me,cep:H}),H.replace(/\D/g,"").length===8&&Lt(H)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000",maxLength:"9"}),e.jsx("button",{type:"button",onClick:()=>Lt(me.cep),disabled:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:S?"Buscando...":"Buscar"})]}),K&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:K}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite o CEP para preencher o endereo automaticamente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo"}),e.jsx("input",{type:"text",value:me.endereco,onChange:P=>Se({...me,endereco:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:me.numero,onChange:P=>Se({...me,numero:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:me.complemento,onChange:P=>Se({...me,complemento:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:me.bairro,onChange:P=>Se({...me,bairro:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),e.jsx("input",{type:"text",value:me.cidade,onChange:P=>Se({...me,cidade:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:me.estado,onChange:P=>Se({...me,estado:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]})]}),k===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes complementares"}),e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Endereos Adicionais"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cadastre mltiplos endereos para entrega, cobrana, etc."})]}),e.jsxs("button",{type:"button",onClick:()=>$t(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Endereo"]})]}),Ne.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:Ne.map((P,H)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${P.tipo==="entrega"?"bg-blue-100 text-blue-800":P.tipo==="cobranca"?"bg-green-100 text-green-800":P.tipo==="comercial"?"bg-purple-100 text-purple-800":P.tipo==="residencial"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:P.tipo==="entrega"?" Entrega":P.tipo==="cobranca"?" Cobrana":P.tipo==="comercial"?" Comercial":P.tipo==="residencial"?" Residencial":" Trabalho"}),e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["+",H+1]})]}),P.apelido&&e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:P.apelido}),e.jsxs("p",{className:"text-sm text-gray-700",children:[P.endereco,", ",P.numero,P.complemento&&` - ${P.complemento}`]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[P.bairro,", ",P.cidade,"/",P.estado]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CEP: ",P.cep]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{type:"button",onClick:()=>$t(H),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>ct(H),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},H))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[e.jsxs("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Nenhum endereo adicional cadastrado"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marcaes / Tags"}),e.jsx("input",{type:"text",value:me.tags,onChange:P=>Se({...me,tags:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Bom pagador, Cliente fiel, VIP"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separe por vrgula para mltiplas tags"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:me.observacoes,onChange:P=>Se({...me,observacoes:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",rows:"4",placeholder:"Informaes adicionais sobre o cliente..."})]})]}),k===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Hr,{className:"text-blue-600",size:24}),"Pets do Cliente"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use o mdulo dedicado para gerenciar pets com informaes completas"})]})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Hr,{className:"text-blue-600 flex-shrink-0 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Gesto Profissional de Pets"}),e.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:["Agora os pets possuem um ",e.jsx("strong",{children:"mdulo dedicado"})," com funcionalidades completas: histrico mdico, vacinas, consultas, servios e muito mais."]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 mb-4",children:[e.jsx("li",{children:" Cadastro completo com campos veterinrios"}),e.jsx("li",{children:" Histrico de sade e medicaes"}),e.jsx("li",{children:" Controle de vacinas e consultas"}),e.jsx("li",{children:" Timeline de eventos"}),e.jsx("li",{children:" Preparado para uso clnico real"})]})]})]})}),q.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Pets cadastrados (",q.length,")"]}),e.jsx("div",{className:"space-y-2",children:q.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hr,{className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:[P.especie," ",P.raca&&` ${P.raca}`]})]})]}),P.id&&e.jsx("button",{onClick:()=>t(`/pets/${P.id}`),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors",children:"Ver Detalhes"})]},P.id||P.nome))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{m!=null&&m.id?t(`/pets?cliente_id=${m.id}`):alert(" Salve o cliente primeiro para gerenciar pets")},className:"flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all font-semibold shadow-md",children:[e.jsx(Hr,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:" Gerenciar Pets"}),e.jsx("div",{className:"text-xs font-normal opacity-90",children:"Mdulo completo de gesto"})]})]}),e.jsxs("button",{type:"button",onClick:()=>{m!=null&&m.id?t("/pets/novo",{state:{clienteId:m.id}}):alert(" Salve o cliente primeiro para adicionar pets")},className:"flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg transition-all font-semibold shadow-md",children:[e.jsx(gs,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:" Adicionar Pet"}),e.jsx("div",{className:"text-xs font-normal opacity-90",children:"Cadastro completo"})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Dica:"})," Pets podem ser adicionados agora ou depois. Todas as informaes mdicas e histrico ficam no mdulo dedicado de pets."]})}),!m&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[" ",e.jsx("strong",{children:"Ateno:"})," Salve o cliente primeiro (etapa 6) para poder gerenciar seus pets."]})})]}),k===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(rs,{className:"text-green-600"}),"Informaes Financeiras"]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:" Saldo de Crdito"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",m!=null&&m.credito?parseFloat(m.credito).toFixed(2).replace(".",","):"0,00"]}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Disponvel para uso em compras"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",disabled:!m,onClick:async()=>{var oe,de;if(!m){alert("Salve o cliente primeiro antes de adicionar crdito");return}const P=prompt("Digite o valor a adicionar ao crdito:");if(!P||isNaN(parseFloat(P)))return;const H=parseFloat(P);if(H<=0){alert("Valor deve ser maior que zero");return}const Z=prompt("Motivo da adio de crdito:","Ajuste manual");if(Z)try{const se=await V.post(`/clientes/${m.id}/credito/adicionar`,{valor:H,motivo:Z});alert(` ${se.data.message}

Crdito anterior: R$ ${se.data.credito_anterior.toFixed(2)}
Valor adicionado: R$ ${se.data.valor_adicionado.toFixed(2)}
Novo saldo: R$ ${se.data.credito_atual.toFixed(2)}`),x({...m,credito:se.data.credito_atual}),Ct()}catch(se){console.error("Erro ao adicionar crdito:",se),alert(" Erro ao adicionar crdito: "+(((de=(oe=se.response)==null?void 0:oe.data)==null?void 0:de.detail)||se.message))}},children:[e.jsx(sc,{})," Adicionar Crdito"]}),e.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",disabled:!m,onClick:async()=>{var de,se;if(!m){alert("Salve o cliente primeiro antes de remover crdito");return}const P=parseFloat(m.credito||0);if(P<=0){alert("Cliente no possui crdito para remover");return}const H=prompt(`Digite o valor a remover (mx: R$ ${P.toFixed(2)}):`);if(!H||isNaN(parseFloat(H)))return;const Z=parseFloat(H);if(Z<=0){alert("Valor deve ser maior que zero");return}if(Z>P){alert(`Valor excede o crdito disponvel (R$ ${P.toFixed(2)})`);return}const oe=prompt("Motivo da remoo de crdito:","Ajuste manual");if(oe)try{const fe=await V.post(`/clientes/${m.id}/credito/remover`,{valor:Z,motivo:oe});alert(` ${fe.data.message}

Crdito anterior: R$ ${fe.data.credito_anterior.toFixed(2)}
Valor removido: R$ ${fe.data.valor_removido.toFixed(2)}
Novo saldo: R$ ${fe.data.credito_atual.toFixed(2)}`),x({...m,credito:fe.data.credito_atual}),Ct()}catch(fe){console.error("Erro ao remover crdito:",fe),alert(" Erro ao remover crdito: "+(((se=(de=fe.response)==null?void 0:de.data)==null?void 0:se.detail)||fe.message))}},children:[e.jsx(fg,{})," Remover Crdito"]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(hh,{}),"Resumo Financeiro (ltimos 90 dias)"]}),m?e.jsx("div",{className:"space-y-4",children:ve?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 text-sm",children:"Carregando resumo..."})]}):e.jsxs(e.Fragment,{children:[ae?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" Total Comprado"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",((Nt=ae.total_vendas)==null?void 0:Nt.toFixed(2).replace(".",","))||"0,00"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ae.quantidade_vendas||0," vendas"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${ae.tem_debitos_vencidos?"bg-red-50 border-red-300":ae.tem_debitos?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,children:[e.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[ae.tem_debitos_vencidos?"":""," Em Aberto"]}),e.jsxs("p",{className:`text-2xl font-bold ${ae.tem_debitos_vencidos?"text-red-600":ae.tem_debitos?"text-orange-600":"text-green-600"}`,children:["R$ ",((At=ae.total_em_aberto)==null?void 0:At.toFixed(2).replace(".",","))||"0,00"]}),ae.tem_debitos_vencidos&&e.jsxs("p",{className:"text-xs text-red-600 font-semibold mt-1",children:["R$ ",((Mt=ae.total_vencido)==null?void 0:Mt.toFixed(2).replace(".",","))||"0,00"," vencido"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" Ticket Mdio"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",((ut=ae.ticket_medio)==null?void 0:ut.toFixed(2).replace(".",","))||"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"por compra"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" ltima Compra"}),ae.ultima_compra?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-700",children:["R$ ",((X=ae.ultima_compra.valor)==null?void 0:X.toFixed(2).replace(".",","))||"0,00"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(ae.ultima_compra.data).toLocaleDateString("pt-BR")," ","(h ",ae.ultima_compra.dias_atras," dias)"]})]}):e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Nenhuma compra"})]})]})}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx("p",{className:"mb-2",children:" Nenhuma informao financeira"}),e.jsx("p",{className:"text-sm",children:"Dados aparecero aps a primeira venda"})]}),e.jsxs("button",{type:"button",onClick:()=>t(`/clientes/${m.id}/financeiro`),className:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 font-semibold shadow-md",children:[e.jsx(hh,{})," Ver Histrico Financeiro Completo",ae&&e.jsxs("span",{className:"text-xs bg-white bg-opacity-20 px-2 py-1 rounded",children:[ae.total_transacoes_historico||0," transaes"]})]})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-blue-800 text-sm",children:" Salve o cliente primeiro para visualizar o resumo financeiro"})})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Dica:"})," O crdito pode ser gerado automaticamente nas devolues de produtos e utilizado como forma de pagamento no PDV."]})}),m&&e.jsx(dB,{clienteId:m.id}),m&&e.jsx(xB,{clienteId:m.id,cliente:m,metricas:ae}),m&&m.celular&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"text-green-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" WhatsApp"})]}),e.jsxs("button",{type:"button",onClick:()=>{const P=m.celular.replace(/\D/g,"");window.open(`https://wa.me/55${P}`,"_blank")},className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(pi,{}),"Abrir conversa"]})]}),e.jsx(pt,{clienteId:m.id})]}),m&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsx(z2,{clienteId:m.tipo_cadastro==="cliente"?m.id:null,fornecedorId:m.tipo_cadastro==="fornecedor"?m.id:null,tipo:m.tipo_cadastro==="fornecedor"?"fornecedor":"cliente",limit:5,showHeader:!0,onVerMais:()=>t(`/clientes/${m.id}/timeline`)})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-between",children:[e.jsxs("button",{onClick:We,disabled:k===1,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(jd,{})," Voltar"]}),k<6?e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:["Avanar ",e.jsx(xh,{})]}):e.jsxs("button",{onClick:tt,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Bl,{})," Salvar Cliente"]})]})]})}),ke&&Ke&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Ke.index!==void 0?"Editar Endereo":"Adicionar Novo Endereo"}),e.jsx("button",{onClick:ge,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Endereo *"}),e.jsxs("select",{value:Ke.tipo,onChange:P=>lt({...Ke,tipo:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"entrega",children:" Entrega"}),e.jsx("option",{value:"cobranca",children:" Cobrana"}),e.jsx("option",{value:"comercial",children:" Comercial"}),e.jsx("option",{value:"residencial",children:" Residencial"}),e.jsx("option",{value:"trabalho",children:" Trabalho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apelido (opcional)"}),e.jsx("input",{type:"text",value:Ke.apelido,onChange:P=>lt({...Ke,apelido:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Casa da me, Escritrio, Loja"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Ke.cep,onChange:P=>{const H=P.target.value.replace(/\D/g,""),Z=H.length>5?`${H.slice(0,5)}-${H.slice(5,8)}`:H;lt({...Ke,cep:Z})},onBlur:P=>De(P.target.value),maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000"}),S&&e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo *"}),e.jsx("input",{type:"text",value:Ke.endereco,onChange:P=>lt({...Ke,endereco:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:Ke.numero,onChange:P=>lt({...Ke,numero:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:Ke.complemento,onChange:P=>lt({...Ke,complemento:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco, Sala..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:Ke.bairro,onChange:P=>lt({...Ke,bairro:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Centro, Jardim..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{type:"text",value:Ke.cidade,onChange:P=>lt({...Ke,cidade:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"So Paulo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:Ke.estado,onChange:P=>lt({...Ke,estado:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"* Campos obrigatrios"})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:ge,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:Le,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Endereo"})]})]})}),e.jsx(tB,{isOpen:d,onClose:()=>{u(!1),fetchClientes()}}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        .animate-fade-in {
          animation: fadeIn 0.3s ease-out;
        }
      `})]})},mP=(t={})=>V.get("/produtos/categorias",{params:t}),xP=(t={})=>V.get("/produtos/marcas",{params:t}),hB=(t={})=>V.get("/produtos/departamentos",{params:t}),pP=(t={})=>V.get("/produtos/",{params:t}),hP=(t={})=>V.get("/produtos/vendaveis",{params:t}),O4=t=>V.get(`/produtos/${t}`),Xb=t=>V.get(`/produtos/${t}/variacoes`),F4=t=>V.post("/produtos/",t),fB=(t,r)=>V.put(`/produtos/${t}`,r),Gy=t=>V.delete(`/produtos/${t}`),gB=(t="")=>V.post("/produtos/gerar-sku",{prefixo:t}),bB=t=>V.post("/produtos/gerar-codigo-barras",{sku:t}),U0=t=>V.get(`/produtos/${t}/lotes`),vB=(t,r)=>V.post(`/produtos/${t}/entrada`,r),yB=(t,r,a)=>V.put(`/produtos/${t}/lotes/${r}`,a),jB=(t,r)=>V.delete(`/produtos/${t}/lotes/${r}`),NB=(t,r)=>V.post(`/produtos/${t}/imagens`,r,{headers:{"Content-Type":"multipart/form-data"}}),wB=t=>V.delete(`/produtos/imagens/${t}`),Yb=t=>V.get(`/produtos/${t}/fornecedores`),_B=(t,r)=>V.post(`/produtos/${t}/fornecedores`,r),SB=(t,r)=>V.put(`/produtos/fornecedores/${t}`,r),CB=t=>V.delete(`/produtos/fornecedores/${t}`),kB=(t={})=>V.get("/produtos/relatorio/movimentacoes",{params:t}),EB=(t,r)=>t*(1+r/100),R4=(t,r)=>!t||t===0?0:(r-t)/t*100,_l=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),Xy=t=>t?new Date(t).toLocaleDateString("pt-BR"):"-";function AB({isOpen:t,onClose:r,onSuccess:a}){const[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState("upload"),m=f=>{const v=f.target.files[0];v&&(v.name.endsWith(".xlsx")||v.name.endsWith(".xls")?(n(v),c(null)):(ze.error("Arquivo deve ser Excel (.xlsx ou .xls)"),f.target.value=""))},x=async()=>{try{const f=localStorage.getItem("token"),v=await V.get("/produtos/template-importacao",{headers:{Authorization:`Bearer ${f}`},responseType:"blob"}),g=window.URL.createObjectURL(new Blob([v.data])),y=document.createElement("a");y.href=g,y.setAttribute("download",`template_produtos_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(g),ze.success("Template baixado com sucesso!")}catch(f){console.error("Erro ao baixar template:",f),ze.error("Erro ao baixar template")}},h=async()=>{var f,v;if(!s){ze.error("Selecione um arquivo para importar");return}i(!0),u("processando");try{const g=new FormData;g.append("file",s);const y=await V.post("/produtos/importar",g);c(y.data),u("resultado"),y.data.total_sucesso>0&&(ze.success(`${y.data.total_sucesso} produtos processados com sucesso!`),a&&a()),y.data.total_erros>0&&ze.error(`${y.data.total_erros} produtos com erro`)}catch(g){console.error("Erro ao importar:",g),ze.error(((v=(f=g.response)==null?void 0:f.data)==null?void 0:v.detail)||"Erro ao importar produtos"),u("upload")}finally{i(!1)}},b=()=>{n(null),c(null),u("upload")},p=()=>{b(),r()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Importao de Produtos em Lote"})]}),e.jsx("button",{onClick:p,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Como funciona"]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 ml-7",children:[e.jsx("li",{children:"1. Baixe o template Excel clicando no boto abaixo"}),e.jsx("li",{children:"2. Preencha os dados dos produtos na planilha"}),e.jsx("li",{children:"3. Salve o arquivo e faa o upload aqui"}),e.jsx("li",{children:"4. Produtos novos sero criados, existentes sero atualizados (baseado no SKU)"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Baixar Template Excel"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a Planilha Preenchida"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-12 h-12 mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Clique para selecionar"})," ou arraste o arquivo"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Apenas arquivos Excel (.xlsx, .xls)"}),s&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:s.name})]})]}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls",onChange:m})]})})]})]}),d==="processando"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Processando planilha..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Isso pode levar alguns segundos"})]}),d==="resultado"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.total_processado}),e.jsx("div",{className:"text-sm text-blue-800 mt-1",children:"Total Processado"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:l.total_criados}),e.jsx("div",{className:"text-sm text-green-800 mt-1",children:"Criados"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:l.total_atualizados}),e.jsx("div",{className:"text-sm text-yellow-800 mt-1",children:"Atualizados"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.total_erros}),e.jsx("div",{className:"text-sm text-red-800 mt-1",children:"Erros"})]})]}),l.detalhes.criados.length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Produtos Criados (",l.detalhes.criados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.detalhes.criados.map((f,v)=>e.jsxs("li",{className:"text-green-800",children:["Linha ",f.linha,": ",e.jsx("span",{className:"font-medium",children:f.sku})," - ",f.nome]},v))})})]}),l.detalhes.atualizados.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Produtos Atualizados (",l.detalhes.atualizados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.detalhes.atualizados.map((f,v)=>e.jsxs("li",{className:"text-yellow-800",children:["Linha ",f.linha,": ",e.jsx("span",{className:"font-medium",children:f.sku})," - ",f.nome]},v))})})]}),l.detalhes.erros.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Erros (",l.detalhes.erros.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-2",children:l.detalhes.erros.map((f,v)=>e.jsxs("li",{className:"text-red-800",children:[e.jsxs("strong",{children:["Linha ",f.linha]})," (",f.sku,"): ",f.erro]},v))})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:h,disabled:!s||o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Produtos"]})})]}),d==="resultado"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Importar Novamente"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Concluir"})]})]})]})}):null}const $u=[{key:"checkbox",label:"",visible:!0,renderHeader:t=>e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:t.produtos.length>0&&t.selecionados.length===t.produtos.length,onChange:t.handleSelecionarTodos,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:r.selecionados.includes(t.id),onChange:a=>r.handleSelecionar(t.id,a.nativeEvent),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"})})},{key:"imagem",label:"Imagem",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagem"}),renderCell:(t,r)=>{const a=t.tipo_produto==="VARIACAO";return e.jsx("td",{className:`px-4 py-3 ${a?"pl-12":""}`,children:e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200 flex-shrink-0",children:t.imagem_principal?e.jsx("img",{src:t.imagem_principal.startsWith("http")?t.imagem_principal:`${window.location.origin}${t.imagem_principal}`,alt:t.nome,className:"w-full h-full object-cover object-center",onError:s=>{console.error("Erro ao carregar imagem:",t.imagem_principal),s.target.style.display="none",s.target.parentElement.innerHTML='<svg class="w-6 h-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>'}}):e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}},{key:"descricao",label:"Descrio",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),renderCell:(t,r)=>{const a=t.tipo_produto==="VARIACAO",s=t.tipo_produto==="PAI",n=t.tipo_produto==="KIT",o=(r.kitsExpandidos||[]).includes(t.id),i=(r.paisExpandidos||[]).includes(t.id);return e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex-1 ${a?"pl-6":""}`,children:[e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("svg",{className:"w-4 h-4 text-blue-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s&&e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),r.togglePaiExpandido(t.id)},className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mr-1",title:i?"Ocultar variaes":"Ver variaes",children:e.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),n&&e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),r.toggleKitExpandido(t.id)},className:`flex items-center transition-colors mr-1 ${t.tipo_kit==="VIRTUAL"?"text-indigo-600 hover:text-indigo-700":"text-green-600 hover:text-green-700"}`,title:o?"Ocultar composio":"Ver composio",children:e.jsx("svg",{className:`w-4 h-4 transition-transform ${o?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.nome,s&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(Pai ",t.total_variacoes||0,")"]}),n&&t.tipo_kit==="VIRTUAL"&&e.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Kit  Virtual)"}),n&&t.tipo_kit==="FISICO"&&e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(Kit  Fsico)"}),t.data_descontinuacao&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:" Descontinuado"})]})]}),t.descricao&&e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs mt-1",children:t.descricao})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),r.copiarTexto(t.nome,"Nome")},className:"text-gray-400 hover:text-gray-600",title:"Copiar nome",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})}},{key:"codigo",label:"Cdigo",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 font-mono",children:t.codigo||t.sku}),t.codigo_barras&&e.jsx("div",{className:"text-xs text-gray-500 font-mono",children:t.codigo_barras})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.copiarTexto(t.codigo||t.sku,"SKU")},className:"text-gray-400 hover:text-gray-600",title:"Copiar SKU",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})},{key:"unidade",label:"Unidade",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unidade"}),renderCell:t=>e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"text-sm text-gray-700",children:t.unidade||"UN"})})},{key:"custo",label:"Custo",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-900",children:_l(t.preco_custo)})})},{key:"preco_venda",label:"PV",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PV"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-right",children:r.editandoPreco===t.id?e.jsxs("div",{className:"flex items-center gap-1 justify-end",onClick:a=>a.stopPropagation(),children:[e.jsx("input",{type:"number",step:"0.01",value:r.novoPreco,onChange:a=>r.setNovoPreco(a.target.value),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>r.handleSalvarPreco(t.id),className:"text-green-600 hover:text-green-800",title:"Salvar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:r.handleCancelarEdicaoPreco,className:"text-red-600 hover:text-red-800",title:"Cancelar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-sm font-semibold text-green-600",children:_l(t.preco_venda)}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.handleEditarPreco(t.id,t.preco_venda)},className:"text-blue-600 hover:text-blue-800",title:"Editar preo",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})})},{key:"validade",label:"Validade",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validade"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:r.getValidadeMaisProxima(t)})},{key:"estoque",label:"Estoque",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),renderCell:(t,r)=>{const a=t.tipo_produto==="KIT"&&t.tipo_kit==="VIRTUAL",s=a?t.estoque_virtual??0:t.estoque_atual||0;return e.jsx("td",{className:"px-4 py-3 text-center",children:t.controlar_estoque?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-sm ${r.getCorEstoque(t)}`,children:s}),a&&e.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"estoque virtual"})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})})}},{key:"acoes",label:"Aes",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-center",onClick:a=>a.stopPropagation(),children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),console.log("Produto:",t.nome,"Controla estoque:",t.controlar_estoque,"Estoque atual:",t.estoque_atual),r.navigate(`/produtos/${t.id}/movimentacoes`)},className:`rounded hover:opacity-80 transition-opacity ${t.controlar_estoque===!0&&(t.estoque_atual||0)>0?"text-green-600 hover:text-green-800":t.controlar_estoque===!0&&(t.estoque_atual||0)===0?"text-red-600 hover:text-red-800":"text-gray-400 hover:text-gray-600"}`,title:"Ver movimentaes de estoque",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.navigate(`/produtos/${t.id}/editar`)},className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.handleExcluir(t.id)},className:"text-red-600 hover:text-red-800 transition-colors",title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}];function PB(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!0),[d,u]=j.useState([]),[m,x]=j.useState(null),[h,b]=j.useState(null),[p,f]=j.useState(""),[v,g]=j.useState([]),[y,N]=j.useState([]),[_,w]=j.useState(()=>{const xe=localStorage.getItem("produtos_colunas_visiveis");return xe?JSON.parse(xe):null}),[S,C]=j.useState(!1),[k,F]=j.useState([]),[q,A]=j.useState(!1),[T,U]=j.useState({marca_id:"",categoria_id:"",departamento_id:""}),[K,I]=j.useState([]),[Y,D]=j.useState(!1),[W,R]=j.useState({busca:"",categoria_id:"",marca_id:"",estoque_baixo:!1,em_promocao:!1}),[B,O]=j.useState(1),[L,E]=j.useState(20),M=j.useMemo(()=>{if(!r||r.length===0)return[];const xe=[],Fe=r.filter(ue=>ue.tipo_produto==="PAI"),Ye=r.filter(ue=>ue.tipo_produto==="VARIACAO"),te=r.filter(ue=>ue.tipo_produto!=="PAI"&&ue.tipo_produto!=="VARIACAO");return xe.push(...te),Fe.forEach(ue=>{if(xe.push(ue),y.includes(ue.id)){const Oe=Ye.filter(ce=>ce.produto_pai_id===ue.id);xe.push(...Oe)}}),xe},[r,y]),z=j.useMemo(()=>{let xe=[...M];if(W.busca.trim()){const Fe=W.busca.toLowerCase();xe=xe.filter(Ye=>Ye.nome&&Ye.nome.toLowerCase().includes(Fe)||Ye.codigo&&Ye.codigo.toLowerCase().includes(Fe))}return W.categoria_id&&(xe=xe.filter(Fe=>Fe.categoria_id==W.categoria_id)),W.marca_id&&(xe=xe.filter(Fe=>Fe.marca_id==W.marca_id)),W.estoque_baixo&&(xe=xe.filter(Fe=>{const Ye=Fe.tipo_produto==="KIT"&&Fe.tipo_kit==="VIRTUAL"?Fe.estoque_virtual??0:Fe.estoque_atual||0,te=Fe.estoque_minimo||0;return Fe.controlar_estoque&&Ye<=te})),W.em_promocao&&(xe=xe.filter(Fe=>Fe.promocao_ativa===!0)),xe},[M,W]),{produtosPaginados:le,totalPaginas:Q,totalItens:ne}=j.useMemo(()=>{const xe=Math.ceil(z.length/L),Fe=(B-1)*L,Ye=Fe+L;return{produtosPaginados:z.slice(Fe,Ye),totalPaginas:xe,totalItens:z.length}},[z,B,L]),re=le;j.useEffect(()=>{O(1)},[W]),j.useEffect(()=>{ae(),ie(),ve(),_e()},[]);const ae=async()=>{try{c(!0);const xe={};Object.keys(W).forEach(te=>{const ue=W[te];ue!==""&&ue!==null&&ue!==void 0&&(xe[te]=ue)});const Fe=await pP(xe);let Ye;if(Array.isArray(Fe.data))Ye=Fe.data;else if(Fe.data.itens)Ye=Fe.data.itens;else if(Fe.data.produtos)Ye=Fe.data.produtos;else if(Fe.data.data)Ye=Fe.data.data;else{const te=Object.keys(Fe.data).filter(ue=>Array.isArray(Fe.data[ue]));te.length>0?Ye=Fe.data[te[0]]:Ye=[]}a(Ye)}catch(xe){console.error("Erro ao carregar produtos:",xe),alert("Erro ao carregar produtos")}finally{c(!1)}},ie=async()=>{try{const xe=await mP();n(xe.data)}catch(xe){console.error("Erro ao carregar categorias:",xe)}},ve=async()=>{try{const xe=await xP();i(xe.data)}catch(xe){console.error("Erro ao carregar marcas:",xe)}},_e=async()=>{try{const xe=await V.get("/produtos/departamentos");I(xe.data)}catch(xe){console.error("Erro ao carregar departamentos:",xe)}},me=(xe,Fe)=>{R(Ye=>({...Ye,[xe]:Fe}))},Se=(xe,Fe)=>{if(!xe){console.error("Erro: ID do produto  undefined ou null");return}if(Fe!=null&&Fe.shiftKey&&m!==null){const Ye=re.findIndex(ue=>ue.id===m),te=re.findIndex(ue=>ue.id===xe);if(Ye!==-1&&te!==-1){const ue=Math.min(Ye,te),Oe=Math.max(Ye,te),ce=re.slice(ue,Oe+1).map(je=>je.id);u(je=>{const Re=new Set(je);return ce.forEach(He=>Re.add(He)),Array.from(Re)}),x(xe);return}}u(Ye=>Ye.includes(xe)?Ye.filter(te=>te!==xe):[...Ye,xe]),x(xe)},Ne=()=>{d.length===re.length?u([]):u(re.map(xe=>xe.id))},ot=async xe=>{if(confirm("Deseja realmente excluir este produto?"))try{await Gy(xe),alert("Produto excludo com sucesso!"),ae()}catch(Fe){console.error("Erro ao excluir produto:",Fe),alert("Erro ao excluir produto")}},Ke=async()=>{if(confirm(`Deseja realmente excluir ${d.length} produtos?`))try{await Promise.all(d.map(xe=>Gy(xe))),alert("Produtos excludos com sucesso!"),u([]),ae()}catch(xe){console.error("Erro ao excluir produtos:",xe),alert("Erro ao excluir produtos")}},lt=(xe,Fe)=>{navigator.clipboard.writeText(xe),ze.success(`${Fe} copiado!`)},ke=(xe,Fe)=>{b(xe),f(Fe.toString())},Ie=async xe=>{try{await V.patch(`/produtos/${xe}?preco_venda=${p}`,{}),ze.success("Preo atualizado!"),b(null),ae()}catch(Fe){console.error("Erro ao atualizar preo:",Fe),ze.error("Erro ao atualizar preo")}},Ae=()=>{b(null)},it=()=>{if(d.length===0){ze.error("Selecione pelo menos um produto");return}U({marca_id:"",categoria_id:"",departamento_id:""}),A(!0)},gt=async()=>{try{if(Object.values(T).filter(Ye=>Ye!=="").length===0){ze.error("Preencha pelo menos um campo para atualizar");return}const Fe={};T.marca_id&&(Fe.marca_id=parseInt(T.marca_id)),T.categoria_id&&(Fe.categoria_id=parseInt(T.categoria_id)),T.departamento_id&&(Fe.departamento_id=parseInt(T.departamento_id)),await V.patch("/produtos/atualizar-lote",{produto_ids:d,...Fe}),ze.success(`${d.length} produto(s) atualizado(s) com sucesso!`),A(!1),u([]),ae()}catch(xe){console.error("Erro ao atualizar produtos:",xe),ze.error("Erro ao atualizar produtos")}},Dt=xe=>{if(!xe.controlar_estoque)return"text-gray-500";const Fe=xe.tipo_produto==="KIT"&&xe.tipo_kit==="VIRTUAL"?xe.estoque_virtual??0:xe.estoque_atual||0,Ye=xe.estoque_minimo||0;return Fe<=0?"text-red-600 font-semibold":Fe<=Ye?"text-yellow-600 font-medium":"text-gray-700"},Ct=xe=>{if(!xe.lotes||xe.lotes.length===0)return"-";const Fe=xe.lotes.filter(Oe=>Oe.data_validade).sort((Oe,ce)=>new Date(Oe.data_validade)-new Date(ce.data_validade));if(Fe.length===0)return"-";const Ye=Fe[0].data_validade,te=Math.floor((new Date(Ye)-new Date)/(1e3*60*60*24));let ue="text-gray-700";return te<0?ue="text-red-600 font-bold":te<=30?ue="text-orange-600 font-semibold":te<=90&&(ue="text-yellow-600"),e.jsx("span",{className:ue,children:Xy(Ye)})},Lt=xe=>{g(Fe=>Fe.includes(xe)?Fe.filter(Ye=>Ye!==xe):[...Fe,xe])},$t=xe=>{N(Fe=>Fe.includes(xe)?Fe.filter(Ye=>Ye!==xe):[...Fe,xe])},ge=()=>{const xe=_||$u.map(Fe=>Fe.key);F(xe),C(!0)},De=xe=>{F(Fe=>Fe.includes(xe)?Fe.filter(Ye=>Ye!==xe):[...Fe,xe])},Le=()=>{localStorage.setItem("produtos_colunas_visiveis",JSON.stringify(k)),w(k),C(!1),ze.success("Preferncias de colunas salvas!")},ct=()=>{localStorage.removeItem("produtos_colunas_visiveis"),w(null),F($u.map(xe=>xe.key)),ze.success("Colunas restauradas para o padro!")},tt=xe=>_?_.includes(xe.key):!0;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Produtos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie seu estoque de produtos"})]}),e.jsxs("div",{className:"flex gap-2",children:[d.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:it,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[" Editar em Lote (",d.length,")"]}),e.jsxs("button",{onClick:Ke,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:["Excluir Selecionados (",d.length,")"]})]}),e.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Excel"]}),e.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center gap-2",title:"Configurar colunas visveis",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Colunas"]}),e.jsx("button",{onClick:()=>t("/produtos/novo"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"+ Novo Produto"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Buscar por cdigo, nome ou cdigo de barras...",value:W.busca,onChange:xe=>me("busca",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:W.categoria_id,onChange:xe=>me("categoria_id",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Categorias"}),s.map(xe=>e.jsxs("option",{value:xe.id,children:[xe.categoria_pai_id?"   ":"",xe.nome]},xe.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:W.marca_id,onChange:xe=>me("marca_id",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Marcas"}),o.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:W.estoque_baixo,onChange:xe=>me("estoque_baixo",xe.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Estoque Baixo"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:W.em_promocao,onChange:xe=>me("em_promocao",xe.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Em Promoo"})]})]})]})}),!l&&ne>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-t-lg flex items-center justify-between mt-6 mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(B-1)*L+1," a ",Math.min(B*L,ne)," de ",ne," produtos"]}),e.jsxs("select",{value:L,onChange:xe=>{E(Number(xe.target.value)),O(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(1),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>O(xe=>Math.max(xe-1,1)),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Q,5)},(xe,Fe)=>{let Ye;return Q<=5||B<=3?Ye=Fe+1:B>=Q-2?Ye=Q-4+Fe:Ye=B-2+Fe,e.jsx("button",{onClick:()=>O(Ye),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${B===Ye?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Ye},Ye)})}),e.jsx("button",{onClick:()=>O(xe=>Math.min(xe+1,Q)),disabled:B===Q,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>O(Q),disabled:B===Q,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:$u.filter(tt).map(xe=>e.jsx(pe.Fragment,{children:xe.renderHeader({produtos:re,selecionados:d,handleSelecionarTodos:Ne})},xe.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-500",children:"Carregando produtos..."})}):re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-500",children:"Nenhum produto encontrado"})}):re.map((xe,Fe)=>{if(!xe||!xe.id)return console.error(`Produto invlido no ndice ${Fe}:`,xe),null;const Ye=xe.tipo_produto==="KIT",te=v.includes(xe.id);return e.jsxs(pe.Fragment,{children:[e.jsx("tr",{className:`hover:bg-gray-50 transition-colors cursor-pointer ${xe.tipo_produto==="VARIACAO"?"bg-blue-50/30":""} ${Ye?"bg-amber-50/30":""}`,onClick:ue=>{ue.target.closest("button, input, a, svg")||t(`/produtos/${xe.id}/editar`)},children:$u.filter(tt).map(ue=>e.jsx(pe.Fragment,{children:ue.renderCell(xe,{selecionados:d,handleSelecionar:Se,kitsExpandidos:v,toggleKitExpandido:Lt,paisExpandidos:y,togglePaiExpandido:$t,copiarTexto:lt,editandoPreco:h,novoPreco:p,setNovoPreco:f,handleSalvarPreco:Ie,handleCancelarEdicaoPreco:Ae,handleEditarPreco:ke,getValidadeMaisProxima:Ct,getCorEstoque:Dt,navigate:t,handleExcluir:ot})},ue.key))}),Ye&&te&&xe.composicao_kit&&xe.composicao_kit.length>0&&e.jsx("tr",{className:"bg-amber-50/50 border-l-4 border-amber-400",children:e.jsx("td",{colSpan:"10",className:"px-4 py-3",children:e.jsxs("div",{className:"ml-12",children:[e.jsxs("div",{className:"text-xs font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"COMPOSIO DO KIT:"]}),e.jsx("div",{className:"grid gap-1",children:xe.composicao_kit.map((ue,Oe)=>e.jsxs("div",{className:"flex items-center gap-3 text-xs bg-white rounded px-3 py-2 border border-amber-200",children:[e.jsxs("span",{className:"font-mono font-semibold text-amber-700 min-w-[40px]",children:[ue.quantidade,"x"]}),e.jsx("span",{className:"flex-1 text-gray-700",children:ue.produto_nome||ue.nome||`Produto #${ue.produto_id||ue.produto_componente_id}`}),ue.produto_estoque!==void 0&&e.jsxs("span",{className:"text-gray-500",children:["Estoque: ",e.jsx("span",{className:ue.produto_estoque>0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:ue.produto_estoque})]})]},Oe))})]})})},`kit-${xe.id}`)]},xe.id)})})]})}),!l&&ne>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(B-1)*L+1," a ",Math.min(B*L,ne)," de ",ne," produtos"]}),e.jsxs("select",{value:L,onChange:xe=>{E(Number(xe.target.value)),O(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(1),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>O(xe=>Math.max(xe-1,1)),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Q,5)},(xe,Fe)=>{let Ye;return Q<=5||B<=3?Ye=Fe+1:B>=Q-2?Ye=Q-4+Fe:Ye=B-2+Fe,e.jsx("button",{onClick:()=>O(Ye),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${B===Ye?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Ye},Ye)})}),e.jsx("button",{onClick:()=>O(xe=>Math.min(xe+1,Q)),disabled:B===Q,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>O(Q),disabled:B===Q,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),!l&&d.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-between items-center text-sm text-gray-600",children:e.jsxs("span",{children:[d.length," produto",d.length>1?"s":""," selecionado",d.length>1?"s":""]})})})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar em Lote"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Atualizar ",e.jsx("strong",{children:d.length})," produto(s) selecionado(s)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),e.jsxs("select",{value:T.marca_id,onChange:xe=>U({...T,marca_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),o.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:T.categoria_id,onChange:xe=>U({...T,categoria_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),s.map(xe=>e.jsxs("option",{value:xe.id,children:[xe.categoria_pai_id?"   ":"",xe.nome]},xe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:T.departamento_id,onChange:xe=>U({...T,departamento_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),K.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:gt,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Alteraes"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurar Colunas"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Selecione quais colunas deseja visualizar na tabela:"}),e.jsx("div",{className:"space-y-2",children:$u.map(xe=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:k.includes(xe.key),onChange:()=>De(xe.key),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:xe.label||xe.key})]},xe.key))})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between gap-3",children:[e.jsx("button",{onClick:ct,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Restaurar Padro"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:Le,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"})]})]})]})}),e.jsx(AB,{isOpen:Y,onClose:()=>D(!1),onSuccess:()=>{ae(),D(!1)}})]})}const TB=({value:t,onChange:r,pesoEmbalagem:a})=>{const[s,n]=j.useState("filhote_peso_adulto"),[o,i]=j.useState([]),[l,c]=j.useState(!1),d=j.useRef(null),[u]=j.useState([{id:"2m",label:"2 meses"},{id:"3m",label:"3 meses"},{id:"4m",label:"4 meses"},{id:"6m",label:"6 meses"},{id:"8m",label:"8 meses"},{id:"10m",label:"10 meses"},{id:"12m",label:"12 meses"},{id:"15m",label:"15 meses"},{id:"18m",label:"18 meses"},{id:"adulto",label:"Adulto"}]);j.useEffect(()=>{if(t&&!l)try{const N=typeof t=="string"?JSON.parse(t):t;if(console.log(" Carregando tabela:",N),N.tipo&&n(N.tipo),N.dados){const _=Object.entries(N.dados).map(([w,S])=>({peso:w,consumos:S}));i(_)}c(!0)}catch(N){console.error("Erro ao carregar tabela:",N),c(!0)}},[t,l]);const m=()=>{switch(s){case"filhote_peso_adulto":return"Peso Adulto Esperado";case"adulto":return"Peso Atual";default:return"Peso"}},x=()=>{switch(s){case"filhote_peso_adulto":return"Ex: 5kg, 10kg, 15kg, 20kg";case"adulto":return"Ex: 5kg, 10kg, 15kg, 20kg";default:return""}},h=()=>{const N={peso:"",consumos:{}},_=[...o,N];i(_)},b=N=>{const _=o.filter((w,S)=>S!==N);i(_),g(_)},p=(N,_)=>{const w=[...o];w[N].peso=_,i(w)},f=(N,_,w)=>{const S=[...o];S[N].consumos||(S[N].consumos={});const C=parseFloat(w)||0;S[N].consumos[_]=C,i(S)},v=N=>{if(!a||!N)return"-";const _=a*1e3;return`${Math.floor(_/N)}d`},g=j.useCallback(N=>{if(!l){console.log(" Aguardando carregamento inicial...");return}const _=N||o,w={};_.forEach(k=>{k.peso&&(w[k.peso]=k.consumos)});const S={tipo:s,dados:w},C=JSON.stringify(S);if(d.current===C){console.log(" Ignorando - j est salvo");return}console.log(" Salvando tabela:",S),d.current=C,r(C)},[o,s,r,l]),y=()=>{g(),alert(" Tabela de consumo salva com sucesso!")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:" Tabela de Consumo da Embalagem"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Preencha a tabela com as informaes da embalagem. A IA usar esses dados para calcular durao e custo-benefcio."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Tabela da Embalagem:"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"filhote_peso_adulto",checked:s==="filhote_peso_adulto",onChange:N=>n(N.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:" Filhote (Peso Adulto Esperado)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"adulto",checked:s==="adulto",onChange:N=>n(N.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:" Adulto (Peso Atual)"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-semibold text-gray-700 w-32",children:m()}),u.map(N=>e.jsxs("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-semibold text-gray-700 min-w-[90px]",children:[N.label,e.jsx("div",{className:"text-[10px] text-gray-500 font-normal",children:"g/dia | dias"})]},N.id)),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-sm font-semibold text-gray-700 w-16",children:"Aes"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:u.length+2,className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:[e.jsx(fr,{className:"inline-block mr-2"}),'Nenhuma linha adicionada. Clique em "Adicionar Linha" para comear.']})}):o.map((N,_)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{type:"text",value:N.peso,onChange:w=>p(_,w.target.value),onBlur:()=>g(),placeholder:x(),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})}),u.map(w=>{var k;const S=((k=N.consumos)==null?void 0:k[w.id])||"",C=v(S);return e.jsxs("td",{className:"border border-gray-300 px-1 py-1",children:[e.jsx("input",{type:"number",value:S,onChange:F=>f(_,w.id,F.target.value),onBlur:()=>g(),placeholder:"0",className:"w-full px-2 py-1 text-sm text-center border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"text-[10px] text-center text-gray-500 mt-0.5",children:C})]},w.id)}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>b(_),className:"text-red-600 hover:text-red-800 p-1",title:"Remover linha",children:e.jsx(Fo,{size:16})})})]},_))})]})}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(gs,{size:16}),"Adicionar Linha"]}),e.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Bl,{size:16}),"Salvar Tabela"]})]}),a&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Peso da embalagem:"})," ",a,"kg (",a*1e3,"g)",e.jsx("br",{}),"A durao (dias)  calculada automaticamente: ",e.jsx("code",{children:"peso_embalagem  consumo_dirio"})]})})]})},Ws=t=>{if(t===""||t===null||t===void 0)return 0;const a=t.toString().replace(/[^\d.,]/g,"").replace(",","."),s=parseFloat(a);return isNaN(s)?0:s};function $4(){var ar,Ur,qs,$n,Dn,is,Go,ls,f0,g0,b0,v0,Xo,Gi,_u;const t=Kt(),{id:r}=rc(),[a]=lg(),s=!!r,[n,o]=j.useState(1),[i,l]=j.useState({codigo:"",sku:"",nome:"",codigo_barras:"",categoria_id:"",marca_id:"",departamento_id:"",tipo:"produto",unidade:"UN",descricao:"",preco_custo:"",preco_venda:"",preco_promocional:"",data_inicio_promocao:"",data_fim_promocao:"",markup:"",tipo_produto:"SIMPLES",produto_pai_id:null,tipo_kit:null,e_kit_fisico:!1,composicao_kit:[],produto_predecessor_id:null,motivo_descontinuacao:"",controle_lote:!0,estoque_minimo:"",estoque_maximo:"",tributacao:{origem:null,herdado_da_empresa:!1,origem_mercadoria:"0",ncm:"",cest:"",cfop:"",cst_icms:"",icms_aliquota:"",icms_st:!1,pis_aliquota:"",cofins_aliquota:""},origem:"0",ncm:"",cest:"",cfop:"",aliquota_icms:"",aliquota_pis:"",aliquota_cofins:"",tem_recorrencia:!1,tipo_recorrencia:"monthly",intervalo_dias:"",numero_doses:"",observacoes_recorrencia:"",especie_compativel:"both",classificacao_racao:"",peso_embalagem:"",tabela_nutricional:"",tabela_consumo:"",categoria_racao:"",especies_indicadas:"both",linha_racao_id:"",porte_animal_id:"",fase_publico_id:"",tipo_tratamento_id:"",sabor_proteina_id:"",apresentacao_peso_id:""}),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState([]),[b,p]=j.useState([]),[f,v]=j.useState([]),[g,y]=j.useState([]),[N,_]=j.useState([]),[w,S]=j.useState([]),[C,k]=j.useState([]),[F,q]=j.useState([]),[A,T]=j.useState([]),[U,K]=j.useState([]),[I,Y]=j.useState([]),[D,W]=j.useState([]),[R,B]=j.useState([]),[O,L]=j.useState({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]}),[E,M]=j.useState(!1),[z,le]=j.useState([]),[Q,ne]=j.useState(""),[re,ae]=j.useState(""),[ie,ve]=j.useState(0),[_e,me]=j.useState(!1),[Se,Ne]=j.useState([]),[ot,Ke]=j.useState(""),[lt,ke]=j.useState(null),[Ie,Ae]=j.useState(null),[it,gt]=j.useState(null),[Dt,Ct]=j.useState(!1),[Lt,$t]=j.useState(!1),[ge,De]=j.useState(!1),[Le,ct]=j.useState(!1),[tt,xe]=j.useState({quantidade:"",nome_lote:"",data_fabricacao:"",data_validade:"",preco_custo:""}),[Fe,Ye]=j.useState(!1),[te,ue]=j.useState({preco_custo:!1,markup:!1,preco_venda:!1,preco_promocional:!1}),[Oe,ce]=j.useState(null),[je,Re]=j.useState(!1),[He,J]=j.useState(null),[ye,Pe]=j.useState({fornecedor_id:"",codigo_fornecedor:"",preco_custo:"",prazo_entrega:"",estoque_fornecedor:"",e_principal:!1});j.useEffect(()=>{st(),s&&Nt()},[r]),j.useEffect(()=>{if(!s&&i.nome){const G=i.nome.toLowerCase();(G.includes("racao")||G.includes("rao"))&&i.classificacao_racao!=="sim"&&l(Xe=>({...Xe,classificacao_racao:"sim"}))}},[i.nome,s,i.classificacao_racao]),j.useEffect(()=>{if(!Dt&&s){const G=a.get("aba");G&&o(parseInt(G))}},[Dt,a,s]),j.useEffect(()=>{s&&i.tipo_produto==="VARIACAO"&&n===8&&o(1)},[i.tipo_produto,n,s]),j.useEffect(()=>{s&&n===8&&i.tipo_produto==="PAI"&&We()},[n,s,i.tipo_produto]);const We=async()=>{try{const G=await Xb(r);B(G.data)}catch(G){console.error("Erro ao carregar variaes:",G)}},st=async()=>{try{const[G,Te,Xe,vt]=await Promise.all([mP(),xP(),hB(),V.get("/clientes/",{params:{tipo_cadastro:"fornecedor",apenas_ativos:!0}})]);d(G.data);const nt=pt(G.data);m(nt),h(Te.data),p(Xe.data),S(vt.data),xt()}catch(G){console.error("Erro ao carregar dados auxiliares:",G)}},xt=async()=>{try{const[G,Te,Xe,vt,nt,sr]=await Promise.allSettled([V.get("/opcoes-racao/linhas",{params:{apenas_ativos:!0}}),V.get("/opcoes-racao/portes",{params:{apenas_ativos:!0}}),V.get("/opcoes-racao/fases",{params:{apenas_ativos:!0}}),V.get("/opcoes-racao/tratamentos",{params:{apenas_ativos:!0}}),V.get("/opcoes-racao/sabores",{params:{apenas_ativos:!0}}),V.get("/opcoes-racao/apresentacoes",{params:{apenas_ativos:!0}})]),Or=(rr,Yr)=>{var un;return rr.status==="fulfilled"?Array.isArray((un=rr.value)==null?void 0:un.data)?rr.value.data:[]:(console.error(`Erro ao carregar opo de rao (${Yr}):`,rr.reason),[])};k(Or(G,"linhas")),q(Or(Te,"portes")),T(Or(Xe,"fases")),K(Or(vt,"tratamentos")),Y(Or(nt,"sabores")),W(Or(sr,"apresentacoes"))}catch(G){console.error("Erro ao carregar opes de rao:",G)}},pt=(G,Te=null,Xe=0)=>{let vt=[];return G.filter(sr=>sr.categoria_pai_id===Te).forEach(sr=>{const Or="".repeat(Xe),rr=Xe>0?" ":"";vt.push({...sr,nomeFormatado:Or+rr+sr.nome,nivel:Xe});const Yr=pt(G,sr.id,Xe+1);vt=vt.concat(Yr)}),vt},Nt=async()=>{var G,Te,Xe;try{Ct(!0),Ae(null),gt(null);const nt=(await O4(r)).data;let sr="";if(nt.preco_custo&&nt.preco_venda&&nt.preco_custo>0&&(sr=R4(nt.preco_custo,nt.preco_venda).toFixed(2)),l({...nt,sku:nt.codigo||"",codigo:nt.codigo||"",nome:nt.nome||"",codigo_barras:nt.codigo_barras||"",categoria_id:nt.categoria_id||"",marca_id:nt.marca_id||"",departamento_id:nt.departamento_id||"",unidade:nt.unidade||"UN",descricao:nt.descricao_curta||"",tipo:nt.tipo||"produto",preco_custo:nt.preco_custo||"",preco_venda:nt.preco_venda||"",preco_promocional:nt.preco_promocional||"",data_inicio_promocao:nt.promocao_inicio||"",data_fim_promocao:nt.promocao_fim||"",estoque_minimo:nt.estoque_minimo||"",estoque_maximo:nt.estoque_maximo||"",controle_lote:nt.controle_lote??!0,markup:sr,tipo_produto:nt.tipo_produto||"SIMPLES",produto_pai_id:nt.produto_pai_id||null,tipo_kit:nt.tipo_kit||null,e_kit_fisico:nt.e_kit_fisico||!1,composicao_kit:nt.composicao_kit||[],origem:nt.origem||"0",ncm:nt.ncm||"",cest:nt.cest||"",cfop:nt.cfop||"",aliquota_icms:nt.aliquota_icms||"",aliquota_pis:nt.aliquota_pis||"",aliquota_cofins:nt.aliquota_cofins||"",tem_recorrencia:nt.tem_recorrencia||!1,tipo_recorrencia:nt.tipo_recorrencia||"monthly",intervalo_dias:nt.intervalo_dias||"",numero_doses:nt.numero_doses||"",especie_compativel:nt.especie_compativel||"both",observacoes_recorrencia:nt.observacoes_recorrencia||"",classificacao_racao:nt.classificacao_racao||"",peso_embalagem:nt.peso_embalagem||"",tabela_nutricional:nt.tabela_nutricional||"",tabela_consumo:nt.tabela_consumo||"",categoria_racao:nt.categoria_racao||"",especies_indicadas:nt.especies_indicadas||"both",linha_racao_id:nt.linha_racao_id||"",porte_animal_id:nt.porte_animal_id||"",fase_publico_id:nt.fase_publico_id||"",tipo_tratamento_id:nt.tipo_tratamento_id||"",sabor_proteina_id:nt.sabor_proteina_id||"",apresentacao_peso_id:nt.apresentacao_peso_id||""}),nt.produto_predecessor_id)try{const rr=await O4(nt.produto_predecessor_id);Ae({id:rr.data.id,codigo:rr.data.codigo,nome:rr.data.nome,motivo_descontinuacao:nt.motivo_descontinuacao,data_descontinuacao:(G=nt.predecessor)==null?void 0:G.data_descontinuacao})}catch(rr){console.error("Erro ao carregar predecessor:",rr)}if(nt.data_descontinuacao)try{const rr=await V.get("/produtos/",{params:{produto_predecessor_id:nt.id,ativo:null}}),Yr=Array.isArray(rr.data)?rr.data:rr.data.items||[];if(Yr&&Yr.length>0){const un=Yr[0];gt({id:un.id,codigo:un.codigo,nome:un.nome,motivo_descontinuacao:nt.motivo_descontinuacao,data_descontinuacao:nt.data_descontinuacao})}}catch(rr){console.error(" Erro ao carregar sucessor:",rr)}try{const rr=await V.get(`/produtos/${r}/imagens`);y(rr.data||[])}catch(rr){console.error("Erro ao carregar imagens:",rr),y([])}if(nt.controle_lote){const rr=await U0(r);v(rr.data)}const Or=await Yb(r);_(Or.data),await At(nt)}catch(vt){console.error(" Erro ao carregar produto:",vt),alert("Erro ao carregar produto: "+(((Xe=(Te=vt.response)==null?void 0:Te.data)==null?void 0:Xe.detail)||vt.message))}finally{Ct(!1)}},At=async G=>{try{const Te=G.tipo_produto==="KIT",{data:Xe}=Te?await V.get(`/produtos/${G.id}/kit/fiscal`):await V.get(`/produtos/${G.id}/fiscal`);l(vt=>({...vt,tributacao:{origem:Xe.origem,herdado_da_empresa:Xe.herdado_da_empresa,origem_mercadoria:Xe.origem_mercadoria??"0",ncm:Xe.ncm??"",cest:Xe.cest??"",cfop:Xe.cfop??"",cst_icms:Xe.cst_icms??"",icms_aliquota:Xe.icms_aliquota??"",icms_st:Xe.icms_st??!1,pis_aliquota:Xe.pis_aliquota??"",cofins_aliquota:Xe.cofins_aliquota??""}}))}catch(Te){console.error("Erro ao carregar fiscal:",Te)}},Mt=async G=>{const Te={origem_mercadoria:i.tributacao.origem_mercadoria,ncm:i.tributacao.ncm,cest:i.tributacao.cest,cfop:i.tributacao.cfop,cst_icms:i.tributacao.cst_icms,icms_aliquota:i.tributacao.icms_aliquota,icms_st:i.tributacao.icms_st,pis_aliquota:i.tributacao.pis_aliquota,cofins_aliquota:i.tributacao.cofins_aliquota};G.tipo_produto==="KIT"?await V.put(`/produtos/${G.id}/kit/fiscal`,Te):await V.put(`/produtos/${G.id}/fiscal`,Te)},ut=(G,Te)=>{l(Xe=>{const vt={...Xe,[G]:Te};if(G==="preco_custo"||G==="preco_venda"){const nt=Ws(G==="preco_custo"?Te:Xe.preco_custo),sr=Ws(G==="preco_venda"?Te:Xe.preco_venda);if(nt&&sr&&nt>0){const Or=R4(nt,sr);vt.markup=Or.toFixed(2)}}if(G==="markup"){const nt=Ws(Xe.preco_custo),sr=Ws(Te);if(nt&&nt>0&&sr>=0){const Or=EB(nt,sr);vt.preco_venda=Or.toFixed(2)}}return vt})},X=async()=>{try{const G=await gB("PROD");l(Te=>({...Te,sku:G.data.sku})),alert("SKU gerado com sucesso!")}catch(G){console.error("Erro ao gerar SKU:",G),alert("Erro ao gerar SKU")}},P=async()=>{if(!i.sku){alert("Gere ou informe um SKU primeiro!");return}try{const G=await bB(i.sku);l(Te=>({...Te,codigo_barras:G.data.codigo_barras})),alert("Cdigo de barras gerado com sucesso!")}catch(G){console.error("Erro ao gerar cdigo de barras:",G),alert("Erro ao gerar cdigo de barras")}},H=async()=>{var G,Te;if(!tt.quantidade||!tt.preco_custo){alert("Preencha quantidade e preo de custo!");return}try{const Xe=tt.nome_lote||`LOTE-${Date.now()}`,vt=tt.data_fabricacao?new Date(tt.data_fabricacao+"T00:00:00").toISOString():null,nt=tt.data_validade?new Date(tt.data_validade+"T23:59:59").toISOString():null;await vB(r,{nome_lote:Xe,quantidade:parseFloat(tt.quantidade),preco_custo:parseFloat(tt.preco_custo),data_fabricacao:vt,data_validade:nt,observacoes:tt.observacoes||null}),alert("Entrada de estoque realizada com sucesso!"),ct(!1),xe({quantidade:"",nome_lote:"",data_fabricacao:"",data_validade:"",preco_custo:""});const sr=await U0(r);v(sr.data)}catch(Xe){console.error("Erro ao registrar entrada:",Xe),alert(((Te=(G=Xe.response)==null?void 0:G.data)==null?void 0:Te.detail)||"Erro ao registrar entrada de estoque")}},Z=G=>{var Te,Xe;ce({id:G.id,nome_lote:G.nome_lote,quantidade_inicial:G.quantidade_inicial,data_fabricacao:((Te=G.data_fabricacao)==null?void 0:Te.split("T")[0])||"",data_validade:((Xe=G.data_validade)==null?void 0:Xe.split("T")[0])||"",custo_unitario:G.custo_unitario}),Ye(!0)},oe=async()=>{var G,Te;try{const Xe=Oe.data_fabricacao?new Date(Oe.data_fabricacao+"T00:00:00").toISOString():null,vt=Oe.data_validade?new Date(Oe.data_validade+"T23:59:59").toISOString():null,nt={nome_lote:Oe.nome_lote,quantidade_inicial:parseFloat(Oe.quantidade_inicial),data_fabricacao:Xe,data_validade:vt,custo_unitario:parseFloat(Oe.custo_unitario)};await yB(r,Oe.id,nt),alert("Lote atualizado com sucesso!"),Ye(!1),ce(null);const sr=await U0(r);v(sr.data)}catch(Xe){console.error("Erro ao atualizar lote:",Xe),alert(((Te=(G=Xe.response)==null?void 0:G.data)==null?void 0:Te.detail)||"Erro ao atualizar lote")}},de=async G=>{var Te,Xe;if(window.confirm(`Deseja realmente excluir o lote ${G.nome_lote}?

Quantidade: ${G.quantidade_disponivel} unidades
Isso remover o registro de entrada do estoque.`))try{await jB(r,G.id),alert("Lote excludo com sucesso!");const vt=await U0(r);v(vt.data)}catch(vt){console.error("Erro ao excluir lote:",vt),alert(((Xe=(Te=vt.response)==null?void 0:Te.data)==null?void 0:Xe.detail)||"Erro ao excluir lote")}},se=async G=>{var nt,sr,Or,rr;const Te=Array.from(G.target.files);if(Te.length===0)return;const Xe=["image/jpeg","image/png","image/webp"],vt=5*1024*1024;for(const Yr of Te){if(!Xe.includes(Yr.type)){alert(`${Yr.name}: Apenas JPG, PNG e WebP so permitidos`);return}if(Yr.size>vt){alert(`${Yr.name}: Imagem deve ter no mximo 5MB`);return}}try{De(!0);const Yr=[];for(const Vs of Te){const y0=new FormData;y0.append("file",Vs);try{const hc=await NB(r,y0);Yr.push(hc.data)}catch(hc){console.error(`Erro ao enviar ${Vs.name}:`,hc),alert(`Erro ao enviar ${Vs.name}: ${((sr=(nt=hc.response)==null?void 0:nt.data)==null?void 0:sr.detail)||"Erro desconhecido"}`)}}const un=await V.get(`/produtos/${r}/imagens`);y(un.data||[]),alert(`${Yr.length} imagem(ns) enviada(s) com sucesso!`)}catch(Yr){console.error("Erro ao enviar imagens:",Yr),alert(((rr=(Or=Yr.response)==null?void 0:Or.data)==null?void 0:rr.detail)||"Erro ao enviar imagens")}finally{De(!1),G.target.value=""}},fe=async G=>{if(confirm("Deseja realmente excluir esta imagem?"))try{await wB(G);const Te=await V.get(`/produtos/${r}/imagens`);y(Te.data||[]),alert("Imagem excluda com sucesso!")}catch(Te){console.error("Erro ao excluir imagem:",Te),alert("Erro ao excluir imagem")}},he=async G=>{try{await V.put(`/produtos/imagens/${G}`,{principal:!0});const Te=await V.get(`/produtos/${r}/imagens`);y(Te.data||[]),alert("Imagem principal atualizada!")}catch(Te){console.error("Erro ao definir imagem principal:",Te),alert("Erro ao definir imagem principal")}},we=()=>{J(null),Pe({fornecedor_id:"",codigo_fornecedor:"",preco_custo:"",prazo_entrega:"",estoque_fornecedor:"",e_principal:!1}),Re(!0)},Ee=G=>{J(G),Pe({fornecedor_id:G.fornecedor_id,codigo_fornecedor:G.codigo_fornecedor||"",preco_custo:G.preco_custo||"",prazo_entrega:G.prazo_entrega||"",estoque_fornecedor:G.estoque_fornecedor||"",e_principal:G.e_principal||!1}),Re(!0)},Ue=async()=>{var G,Te;if(!ye.fornecedor_id){alert("Selecione um fornecedor");return}try{const Xe={...ye,preco_custo:ye.preco_custo?parseFloat(ye.preco_custo):null,prazo_entrega:ye.prazo_entrega?parseInt(ye.prazo_entrega):null,estoque_fornecedor:ye.estoque_fornecedor?parseFloat(ye.estoque_fornecedor):null};He?(await SB(He.id,Xe),alert("Fornecedor atualizado!")):(await _B(r,Xe),alert("Fornecedor vinculado!"));const vt=await Yb(r);_(vt.data),Re(!1)}catch(Xe){console.error("Erro ao salvar fornecedor:",Xe),alert(((Te=(G=Xe.response)==null?void 0:G.data)==null?void 0:Te.detail)||"Erro ao salvar fornecedor")}},Je=async G=>{if(confirm("Deseja realmente desvincular este fornecedor?"))try{await CB(G);const Te=await Yb(r);_(Te.data),alert("Fornecedor desvinculado!")}catch(Te){console.error("Erro ao desvincular fornecedor:",Te),alert("Erro ao desvincular fornecedor")}},et=async()=>{try{const G=await V.get("/produtos/",{params:{apenas_ativos:!0,tipo_produto:"SIMPLES"}});le(G.data.items||[])}catch(G){console.error("Erro ao carregar produtos:",G),le([])}},Ze=()=>{if(!Q||!re||re<=0){alert("Selecione um produto e informe a quantidade!");return}if(i.composicao_kit.find(vt=>vt.produto_id===parseInt(Q))){alert("Este produto j foi adicionado ao kit!");return}const Te=z.find(vt=>vt.id===parseInt(Q)),Xe={produto_componente_id:Te.id,produto_id:Te.id,produto_nome:Te.nome,produto_sku:Te.codigo,quantidade:parseFloat(re),estoque_componente:Te.estoque_atual||0};l(vt=>({...vt,composicao_kit:[...vt.composicao_kit,Xe]})),ne(""),ae(""),Pt([...i.composicao_kit,Xe])},ht=G=>{const Te=i.composicao_kit.filter(Xe=>Xe.produto_id!==G);l(Xe=>({...Xe,composicao_kit:Te})),Pt(Te)},Pt=G=>{if(!G||G.length===0){ve(0);return}const Te=G.map(vt=>{const nt=vt.estoque_componente||0,sr=vt.quantidade||1;return Math.floor(nt/sr)}),Xe=Math.min(...Te);ve(Xe>=0?Xe:0)};j.useEffect(()=>{const G=i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit;n===9&&G&&(et(),i.composicao_kit&&i.composicao_kit.length>0&&Pt(i.composicao_kit))},[n,i.tipo_produto,i.tipo_kit]);const er=async G=>{var Te,Xe;if(G.preventDefault(),!i.nome){alert("Preencha o campo Nome");return}if(i.tipo_produto!=="PAI"&&!i.preco_venda){alert("Preencha o Preo de Venda");return}if(!i.codigo&&!i.sku){alert("Preencha o campo SKU/Cdigo");return}try{$t(!0);const vt={codigo:i.codigo||i.sku,nome:i.nome,descricao_curta:i.descricao||null,codigo_barras:i.codigo_barras||null,unidade:i.unidade||"UN",preco_custo:i.preco_custo?parseFloat(i.preco_custo):0,preco_venda:parseFloat(i.preco_venda),preco_promocional:i.preco_promocional?parseFloat(i.preco_promocional):null,promocao_inicio:i.data_inicio_promocao||null,promocao_fim:i.data_fim_promocao||null,controle_lote:i.controle_lote||!1,estoque_minimo:i.estoque_minimo?parseInt(i.estoque_minimo):0,estoque_maximo:i.estoque_maximo?parseInt(i.estoque_maximo):null,categoria_id:i.categoria_id?parseInt(i.categoria_id):null,marca_id:i.marca_id?parseInt(i.marca_id):null,departamento_id:i.departamento_id?parseInt(i.departamento_id):null,tipo_produto:i.tipo_produto||"SIMPLES",produto_pai_id:i.produto_pai_id||null,tipo_kit:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.e_kit_fisico?"FISICO":"VIRTUAL":null,e_kit_fisico:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.e_kit_fisico:null,composicao_kit:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.composicao_kit:null,produto_predecessor_id:i.produto_predecessor_id||null,motivo_descontinuacao:i.motivo_descontinuacao||null,tem_recorrencia:i.tem_recorrencia||!1,tipo_recorrencia:i.tem_recorrencia?i.tipo_recorrencia:null,intervalo_dias:i.tem_recorrencia&&i.intervalo_dias?parseInt(i.intervalo_dias):null,numero_doses:i.tem_recorrencia&&i.numero_doses?parseInt(i.numero_doses):null,especie_compativel:i.tem_recorrencia?i.especie_compativel:null,observacoes_recorrencia:i.tem_recorrencia?i.observacoes_recorrencia:null,classificacao_racao:i.classificacao_racao||null,peso_embalagem:i.peso_embalagem?parseFloat(i.peso_embalagem):null,tabela_nutricional:i.tabela_nutricional||null,tabela_consumo:i.tabela_consumo||null,categoria_racao:i.categoria_racao||null,especies_indicadas:i.especies_indicadas||null,linha_racao_id:i.linha_racao_id?parseInt(i.linha_racao_id):null,porte_animal_id:i.porte_animal_id?parseInt(i.porte_animal_id):null,fase_publico_id:i.fase_publico_id?parseInt(i.fase_publico_id):null,tipo_tratamento_id:i.tipo_tratamento_id?parseInt(i.tipo_tratamento_id):null,sabor_proteina_id:i.sabor_proteina_id?parseInt(i.sabor_proteina_id):null,apresentacao_peso_id:i.apresentacao_peso_id?parseInt(i.apresentacao_peso_id):null};if(console.log(" Enviando dados para API:",vt),s)await Mt({id:r,tipo_produto:i.tipo_produto}),await fB(r,vt),alert("Produto atualizado com sucesso!"),t("/produtos");else{const sr=(await F4(vt)).data.id;i.tipo_produto==="PAI"?(alert("Produto PAI criado com sucesso! Agora cadastre as variaes."),t(`/produtos/${sr}/editar?aba=variacoes`)):(alert("Produto cadastrado com sucesso!"),t("/produtos"))}}catch(vt){console.error("Erro ao salvar produto:",vt),alert(((Xe=(Te=vt.response)==null?void 0:Te.data)==null?void 0:Xe.detail)||"Erro ao salvar produto")}finally{$t(!1)}};return Dt?e.jsx("div",{className:"p-6 flex justify-center items-center h-96",children:e.jsx("div",{className:"text-gray-600",children:"Carregando produto..."})}):s&&!i.nome?e.jsx("div",{className:"p-6 flex justify-center items-center h-96",children:e.jsx("div",{className:"text-gray-600",children:"Carregando dados..."})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{i.tipo_produto==="VARIACAO"&&i.produto_pai_id?t(`/produtos/${i.produto_pai_id}/editar?aba=8`):t("/produtos")},className:"text-blue-600 hover:text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Editar Produto":"Novo Produto"}),s&&i.codigo&&e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"SKU:"}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-lg font-mono",children:i.codigo})]}),i.nome&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descrio:"}),e.jsx("span",{className:"text-gray-600",children:i.nome})]})]})]}),e.jsxs("a",{href:"/cadastros/categorias",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 border border-blue-200 flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Gerenciar Categorias"]})]})}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:[{id:1,label:"Caractersticas"},{id:2,label:"Imagens"},{id:3,label:"Estoque/Lotes"},{id:4,label:"Fornecedores"},{id:5,label:"Tributao"},{id:6,label:" Recorrncia"},{id:7,label:" Rao"},...i.tipo_produto==="PAI"?[{id:8,label:" Variaes"}]:[],...i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?[{id:9,label:" Composio"}]:[]].map(G=>e.jsx("button",{onClick:()=>o(G.id),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${n===G.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:G.label},G.id))})}),s&&Ie&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-5 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Este produto  continuao de outro"})}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Este produto substitui:"," ",e.jsxs("button",{type:"button",onClick:()=>t(`/produtos/${Ie.id}/editar`),className:"font-bold text-blue-700 hover:text-blue-900 hover:underline",children:[Ie.codigo," - ",Ie.nome]})]}),Ie.motivo_descontinuacao&&e.jsxs("div",{className:"bg-white/70 rounded-md px-3 py-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Motivo da substituio:"})," ",e.jsx("span",{className:"text-gray-900",children:Ie.motivo_descontinuacao})]})]})]})}),s&&it&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 p-5 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Este produto foi descontinuado"})}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Descontinuado em"," ",e.jsx("span",{className:"font-semibold",children:new Date(it.data_descontinuacao).toLocaleDateString("pt-BR")})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Substitudo por:"," ",e.jsxs("button",{type:"button",onClick:()=>t(`/produtos/${it.id}/editar`),className:"font-bold text-red-700 hover:text-red-900 hover:underline",children:[it.codigo," - ",it.nome]})]}),it.motivo_descontinuacao&&e.jsxs("div",{className:"bg-white/70 rounded-md px-3 py-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Motivo:"})," ",e.jsx("span",{className:"text-gray-900",children:it.motivo_descontinuacao})]})]})]})}),e.jsxs("form",{onSubmit:er,children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.sku,onChange:G=>ut("sku",G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: PROD0001"}),e.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:"Gerar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo de Barras"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.codigo_barras,onChange:G=>ut("codigo_barras",G.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"EAN-13"}),e.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:"Gerar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Produto *"}),e.jsx("input",{type:"text",value:i.nome,onChange:G=>ut("nome",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Rao Golden para Ces Adultos 15kg",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:i.categoria_id,onChange:G=>ut("categoria_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),u.map(G=>e.jsx("option",{value:G.id,children:G.nomeFormatado},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),e.jsxs("select",{value:i.marca_id,onChange:G=>ut("marca_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),x.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:i.departamento_id,onChange:G=>ut("departamento_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),b.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:i.tipo,onChange:G=>ut("tipo",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"produto",children:"Produto"}),e.jsx("option",{value:"servico",children:"Servio"}),e.jsx("option",{value:"ambos",children:"Produto e Servio"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),e.jsxs("select",{value:i.unidade,onChange:G=>ut("unidade",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"UN",children:"UN - Unidade"}),e.jsx("option",{value:"KG",children:"KG - Quilograma"}),e.jsx("option",{value:"G",children:"G - Grama"}),e.jsx("option",{value:"L",children:"L - Litro"}),e.jsx("option",{value:"ML",children:"ML - Mililitro"}),e.jsx("option",{value:"M",children:"M - Metro"}),e.jsx("option",{value:"CX",children:"CX - Caixa"}),e.jsx("option",{value:"PCT",children:"PCT - Pacote"})]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:i.descricao,onChange:G=>ut("descricao",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Descrio detalhada do produto..."})]})]}),i.tipo_produto!=="PAI"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsx("input",{type:"text",value:te.preco_custo?i.preco_custo||"":i.preco_custo?`R$ ${Ws(i.preco_custo).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:G=>{const Te=G.target.value.replace(/[^\d.,]/g,"").replace(",",".");ut("preco_custo",Te)},onFocus:G=>{ue(Te=>({...Te,preco_custo:!0})),G.target.select()},onBlur:G=>{ue(Xe=>({...Xe,preco_custo:!1}));const Te=Ws(G.target.value);ut("preco_custo",Te>0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Markup"}),e.jsx("input",{type:"text",value:te.markup?i.markup||"":i.markup?`${Ws(i.markup).toFixed(2).replace(".",",")}%`:"0,00%",onChange:G=>{const Te=G.target.value.replace(/[^\d.,]/g,"").replace(",",".");ut("markup",Te)},onFocus:G=>{ue(Te=>({...Te,markup:!0})),G.target.select()},onBlur:G=>{ue(Xe=>({...Xe,markup:!1}));const Te=Ws(G.target.value);ut("markup",Te>=0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00%"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"text",value:te.preco_venda?i.preco_venda||"":i.preco_venda?`R$ ${Ws(i.preco_venda).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:G=>{const Te=G.target.value.replace(/[^\d.,]/g,"").replace(",",".");ut("preco_venda",Te)},onFocus:G=>{ue(Te=>({...Te,preco_venda:!0})),G.target.select()},onBlur:G=>{ue(Xe=>({...Xe,preco_venda:!1}));const Te=Ws(G.target.value);ut("preco_venda",Te>0?Te.toFixed(2):"")},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Promocional"}),e.jsx("input",{type:"text",value:te.preco_promocional?i.preco_promocional||"":i.preco_promocional?`R$ ${Ws(i.preco_promocional).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:G=>{const Te=G.target.value.replace(/[^\d.,]/g,"").replace(",",".");ut("preco_promocional",Te)},onFocus:G=>{ue(Te=>({...Te,preco_promocional:!0})),G.target.select()},onBlur:G=>{ue(Xe=>({...Xe,preco_promocional:!1}));const Te=Ws(G.target.value);ut("preco_promocional",Te>0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]})]}),i.preco_promocional&&i.tipo_produto!=="PAI"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incio da Promoo"}),e.jsx("input",{type:"date",value:i.data_inicio_promocao,onChange:G=>ut("data_inicio_promocao",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fim da Promoo"}),e.jsx("input",{type:"date",value:i.data_fim_promocao,onChange:G=>ut("data_fim_promocao",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),!s&&e.jsx("div",{className:"border-t pt-6 mt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Evoluo do Produto"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_e,onChange:G=>{me(G.target.checked),G.target.checked||(ke(null),ut("produto_predecessor_id",null),ut("motivo_descontinuacao",""))},className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Este produto substitui outro"})]})]}),_e&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 border-amber-300",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Buscar Produto Anterior"}),e.jsx("input",{type:"text",placeholder:"Digite o nome ou cdigo do produto...",value:ot,onChange:async G=>{if(Ke(G.target.value),G.target.value.length>=2)try{const Te=await V.get("/produtos/",{params:{busca:G.target.value,page_size:10}});Ne(Te.data.items||[])}catch(Te){console.error("Erro ao buscar produtos:",Te)}else Ne([])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),Se.length>0&&e.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto border border-gray-300 rounded-lg",children:Se.map(G=>{var Te;return e.jsxs("div",{onClick:()=>{ke(G),ut("produto_predecessor_id",G.id),Ke(""),Ne([])},className:"p-3 hover:bg-amber-50 cursor-pointer border-b border-gray-200 last:border-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",G.codigo," | Preo: R$ ",(Te=G.preco_venda)==null?void 0:Te.toFixed(2)]})]},G.id)})}),lt&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-300 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:" Produto Selecionado:"}),e.jsx("div",{className:"font-semibold text-gray-900 mt-1",children:lt.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",lt.codigo]})]}),e.jsx("button",{type:"button",onClick:()=>{ke(null),ut("produto_predecessor_id",null)},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),lt&&e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 border-amber-300",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Motivo da Substituio"}),e.jsxs("select",{value:i.motivo_descontinuacao,onChange:G=>ut("motivo_descontinuacao",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent mb-2",children:[e.jsx("option",{value:"",children:"Selecione o motivo..."}),e.jsx("option",{value:"Mudana de embalagem",children:"Mudana de embalagem"}),e.jsx("option",{value:"Mudana de peso/gramatura",children:"Mudana de peso/gramatura"}),e.jsx("option",{value:"Reformulao do produto",children:"Reformulao do produto"}),e.jsx("option",{value:"Mudana de fornecedor",children:"Mudana de fornecedor"}),e.jsx("option",{value:"Upgrade de linha",children:"Upgrade de linha"}),e.jsx("option",{value:"Outro",children:"Outro (descrever abaixo)"})]}),i.motivo_descontinuacao==="Outro"&&e.jsx("textarea",{value:i.motivo_descontinuacao,onChange:G=>ut("motivo_descontinuacao",G.target.value),placeholder:"Descreva o motivo...",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[e.jsx("strong",{children:" O que acontecer:"}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:['O produto "',e.jsx("strong",{children:lt.nome}),'" ser marcado como ',e.jsx("strong",{children:"descontinuado"})]}),e.jsx("li",{children:"Todo o histrico de vendas ser mantido e poder ser consultado"}),e.jsx("li",{children:"Voc poder gerar relatrios consolidados somando ambos os produtos"})]})]})]})]}),!_e&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Marque esta opo se este produto substitui outro j cadastrado (ex: mudana de embalagem de 350g para 300g). Isso permite manter o histrico consolidado de vendas."})]})}),!s&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Tipo do Produto"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Escolha o tipo de produto que est cadastrando:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="SIMPLES"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_simples",name:"tipo_produto",value:"SIMPLES",checked:i.tipo_produto==="SIMPLES",onChange:G=>{ut("tipo_produto","SIMPLES"),l(Te=>({...Te,composicao_kit:[],e_kit_fisico:!1}))},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_simples",className:"font-medium text-gray-900 cursor-pointer",children:" Produto Simples"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Produto nico, vendvel, com controle de estoque prprio."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="PAI"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_variacoes",name:"tipo_produto",value:"PAI",checked:i.tipo_produto==="PAI",onChange:G=>{ut("tipo_produto","PAI"),l(Te=>({...Te,preco_custo:"",preco_venda:"",preco_promocional:"",composicao_kit:[],e_kit_fisico:!1}))},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_variacoes",className:"font-medium text-gray-900 cursor-pointer",children:" Produto com Variaes"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Produto agrupador (no vendvel). Ter variaes com SKU, preo e estoque prprios.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Camiseta (produto pai)  P, M, G (variaes)"})]}),i.tipo_produto==="PAI"&&!s&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Salve o produto primeiro"}),' para depois cadastrar as variaes na aba "Variaes".']}),i.tipo_produto==="PAI"&&s&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:' Produto salvo! V para a aba " Variaes" para cadastrar as variaes.'})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="KIT"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_kit",name:"tipo_produto",value:"KIT",checked:i.tipo_produto==="KIT",onChange:G=>{ut("tipo_produto","KIT"),o(9)},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_kit",className:"font-medium text-gray-900 cursor-pointer",children:" Produto com Composio (Kit)"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Kit composto por outros produtos existentes.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Kit Banho (shampoo + condicionador + toalha)"})]}),i.tipo_produto==="KIT"&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[" ",e.jsx("strong",{children:'Aba " Composio" aberta!'})," V para a aba Composio para definir se o kit ter estoque virtual ou fsico e adicionar os produtos que o compem."]})]})]})]})]})}),s&&i.tipo_produto==="VARIACAO"&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Composio (Kit)"]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 border-gray-300",children:[e.jsx("input",{type:"checkbox",id:"variacao_e_kit",checked:!!i.tipo_kit,onChange:G=>{G.target.checked?(ut("tipo_kit","VIRTUAL"),ut("e_kit_fisico",!1),o(9)):(ut("tipo_kit",null),ut("composicao_kit",[]),ut("e_kit_fisico",!1))},className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"variacao_e_kit",className:"font-medium text-gray-900 cursor-pointer text-lg",children:" Esta variao  um KIT (possui composio)"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Marque esta opo se esta variao  composta por outros produtos.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Camiseta P - Kit (camiseta + brinde)"})]}),i.tipo_kit&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[" ",e.jsx("strong",{children:"Variao configurada como KIT!"}),' V para a aba " Composio" para definir os produtos que compem este kit.']})]})]})]})})]}),n===2&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens do Produto"}),e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:[ge?"Enviando...":"+ Adicionar Imagens",e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:se,disabled:ge,className:"hidden",multiple:!0})]})]}),g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Nenhuma imagem cadastrada"}),e.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Imagem" para enviar fotos do produto'})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:g.map(G=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:`http://localhost:8000${G.url}`,alt:"Imagem do produto",className:"w-full h-48 object-cover"}),G.e_principal&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Principal"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[!G.e_principal&&e.jsx("button",{type:"button",onClick:()=>he(G.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",title:"Definir como principal",children:" Principal"}),e.jsx("button",{type:"button",onClick:()=>fe(G.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",title:"Excluir",children:" Excluir"})]})]},G.id))}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Dica:"}),' A primeira imagem marcada como "Principal" ser exibida na listagem de produtos. Formatos aceitos: JPG, PNG, WebP (mx. 5MB).']})})]}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Salve o produto primeiro para adicionar imagens"})]})}),n===3&&e.jsx("div",{className:"space-y-6",children:i.tipo_produto==="PAI"?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-blue-300 rounded-lg bg-blue-50",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("p",{className:"mt-4 text-lg font-medium text-blue-900",children:"Produto com Variaes"}),e.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:["Produtos PAI no possuem estoque prprio.",e.jsx("br",{}),"O controle de estoque  feito individualmente nas variaes."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.controle_lote,onChange:G=>ut("controle_lote",G.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Controlar Estoque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:i.estoque_minimo,onChange:G=>ut("estoque_minimo",G.target.value),disabled:!i.controle_lote,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:i.estoque_maximo,onChange:G=>ut("estoque_maximo",G.target.value),disabled:!i.controle_lote,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",placeholder:"0"})]})]}),s&&i.controle_lote&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lotes (FIFO)"}),e.jsx("button",{type:"button",onClick:()=>ct(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"+ Nova Entrada"})]}),f.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum lote cadastrado"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lote"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Disponvel"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fabricao"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Validade"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo Unit."}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(G=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:G.nome_lote||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:G.quantidade_disponivel}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Xy(G.data_fabricacao)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Xy(G.data_validade)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:_l(G.custo_unitario)}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Z(G),className:"text-blue-600 hover:text-blue-800",title:"Editar lote",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>de(G),className:"text-red-600 hover:text-red-800",title:"Excluir lote",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},G.id))})]})})]}),!s&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Salve o produto primeiro para gerenciar lotes"})]})}),n===4&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Fornecedores do Produto"}),e.jsx("button",{type:"button",onClick:we,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Adicionar Fornecedor"})]}),N.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Nenhum fornecedor vinculado"}),e.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Fornecedor" para vincular fornecedores a este produto'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Preo Custo"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Prazo (dias)"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Principal"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(G=>e.jsxs("tr",{className:G.ativo?"":"opacity-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.fornecedor_nome}),e.jsx("p",{className:"text-xs text-gray-500",children:G.fornecedor_cpf_cnpj})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:G.codigo_fornecedor||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:G.preco_custo?_l(G.preco_custo):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:G.prazo_entrega||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:G.estoque_fornecedor||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:G.e_principal&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Principal"})}),e.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>Ee(G),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Editar"}),e.jsx("button",{type:"button",onClick:()=>Je(G.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]})]},G.id))})]})})]}):e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsx("p",{className:"text-gray-600",children:"Salve o produto primeiro para vincular fornecedores"})})}),n===5&&e.jsxs("div",{className:"space-y-6",children:[s&&i.tributacao&&e.jsxs("div",{className:"mb-4 flex gap-2",children:[i.tributacao.origem==="produto_legado"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-800",children:" Legado"}),(i.tributacao.origem==="produto_fiscal_v2"||i.tributacao.origem==="kit_fiscal_v2")&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-200 text-yellow-800",children:" Personalizado"}),i.tributacao.herdado_da_empresa&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-800",children:" Herdado da empresa"})]}),s&&((ar=i.tributacao)==null?void 0:ar.herdado_da_empresa)===!0&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Esta configurao fiscal est sendo herdada da empresa. Para editar, personalize o fiscal deste produto."}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",onClick:()=>l(G=>({...G,tributacao:{...G.tributacao,herdado_da_empresa:!1}})),children:" Personalizar fiscal deste produto"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Origem",e.jsx("span",{className:"tooltip-icon",title:"Define se o produto  nacional ou importado. Impacta o clculo do ICMS.",children:""})]}),e.jsxs("select",{value:((Ur=i.tributacao)==null?void 0:Ur.origem_mercadoria)||"0",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,origem_mercadoria:G.target.value}})),disabled:((qs=i.tributacao)==null?void 0:qs.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"0",children:"0 - Nacional"}),e.jsx("option",{value:"1",children:"1 - Estrangeira (Importao direta)"}),e.jsx("option",{value:"2",children:"2 - Estrangeira (Adquirida no mercado interno)"}),e.jsx("option",{value:"3",children:"3 - Nacional (> 40% contedo importado)"}),e.jsx("option",{value:"4",children:"4 - Nacional (Conforme processo produtivo bsico)"}),e.jsx("option",{value:"5",children:"5 - Nacional (< 40% contedo importado)"}),e.jsx("option",{value:"6",children:"6 - Estrangeira (Importao direta sem similar)"}),e.jsx("option",{value:"7",children:"7 - Estrangeira (Mercado interno sem similar)"}),e.jsx("option",{value:"8",children:"8 - Nacional (> 70% contedo importado)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["NCM",e.jsx("span",{className:"tooltip-icon",title:"Nomenclatura Comum do Mercosul. Classificao fiscal do produto, base para impostos.",children:""})]}),e.jsx("input",{type:"text",value:(($n=i.tributacao)==null?void 0:$n.ncm)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,ncm:G.target.value}})),disabled:((Dn=i.tributacao)==null?void 0:Dn.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"00000000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CEST",e.jsx("span",{className:"tooltip-icon",title:"Cdigo Especificador da Substituio Tributria. Para produtos sujeitos a ICMS ST.",children:""})]}),e.jsx("input",{type:"text",value:((is=i.tributacao)==null?void 0:is.cest)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,cest:G.target.value}})),disabled:((Go=i.tributacao)==null?void 0:Go.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0000000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CFOP",e.jsx("span",{className:"tooltip-icon",title:"Cdigo Fiscal de Operaes e Prestaes. Define a natureza da operao de venda.",children:""})]}),e.jsx("input",{type:"text",value:((ls=i.tributacao)==null?void 0:ls.cfop)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,cfop:G.target.value}})),disabled:((f0=i.tributacao)==null?void 0:f0.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota ICMS (%)",e.jsx("span",{className:"tooltip-icon",title:"Imposto sobre Circulao de Mercadorias. Alquota estadual aplicada na venda. Impacta o preo final.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((g0=i.tributacao)==null?void 0:g0.icms_aliquota)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,icms_aliquota:G.target.value}})),disabled:((b0=i.tributacao)==null?void 0:b0.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota PIS (%)",e.jsx("span",{className:"tooltip-icon",title:"Programa de Integrao Social. Contribuio federal sobre a venda. Geralmente 1,65%.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((v0=i.tributacao)==null?void 0:v0.pis_aliquota)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,pis_aliquota:G.target.value}})),disabled:((Xo=i.tributacao)==null?void 0:Xo.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota COFINS (%)",e.jsx("span",{className:"tooltip-icon",title:"Contribuio para Financiamento da Seguridade Social. Contribuio federal sobre a venda. Geralmente 7,6%.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((Gi=i.tributacao)==null?void 0:Gi.cofins_aliquota)||"",onChange:G=>l(Te=>({...Te,tributacao:{...Te.tributacao,cofins_aliquota:G.target.value}})),disabled:((_u=i.tributacao)==null?void 0:_u.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]})]})]}),n===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Sistema de Recorrncia (Fase 1)"}),e.jsxs("div",{className:"mt-2 text-sm text-purple-700",children:[e.jsx("p",{children:"Configure produtos que precisam ser recomprados periodicamente (vacinas, antipulgas, raes)."}),e.jsx("p",{className:"mt-1",children:"O sistema criar lembretes automticos para notificar clientes 7 dias antes."})]})]})]})}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"tem_recorrencia",checked:i.tem_recorrencia,onChange:G=>ut("tem_recorrencia",G.target.checked),className:"h-5 w-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"tem_recorrencia",className:"ml-3",children:[e.jsx("span",{className:"text-base font-medium text-gray-900",children:"Produto com Recorrncia"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ativar lembretes automticos para este produto"})]})]}),i.tem_recorrencia&&e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recorrncia *"}),e.jsxs("select",{value:i.tipo_recorrencia,onChange:G=>{ut("tipo_recorrencia",G.target.value),G.target.value==="daily"?ut("intervalo_dias","1"):G.target.value==="weekly"?ut("intervalo_dias","7"):G.target.value==="monthly"?ut("intervalo_dias","30"):G.target.value==="yearly"&&ut("intervalo_dias","365")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"daily",children:"Diria"}),e.jsx("option",{value:"weekly",children:"Semanal (7 dias)"}),e.jsx("option",{value:"monthly",children:"Mensal (30 dias)"}),e.jsx("option",{value:"yearly",children:"Anual (365 dias)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (em dias) *"}),e.jsx("input",{type:"number",min:"1",value:i.intervalo_dias,onChange:G=>ut("intervalo_dias",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 30 (para Nexgard)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplos: Nexgard = 30, Vacina Anual = 365"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Doses (opcional)"}),e.jsx("input",{type:"number",min:"1",value:i.numero_doses,onChange:G=>ut("numero_doses",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 3 (para vacina com 3 doses)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Se vazio, ser recorrente indefinidamente. Se preenchido (ex: 3), o sistema finalizar aps a ltima dose."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compatibilidade por Espcie"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"both",checked:i.especie_compativel==="both",onChange:G=>ut("especie_compativel",G.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ces e Gatos"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"dog",checked:i.especie_compativel==="dog",onChange:G=>ut("especie_compativel",G.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Apenas Ces"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"cat",checked:i.especie_compativel==="cat",onChange:G=>ut("especie_compativel",G.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Apenas Gatos"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes / Instrues"}),e.jsx("textarea",{value:i.observacoes_recorrencia,onChange:G=>ut("observacoes_recorrencia",G.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Aplicar mensalmente no mesmo dia. No atrasar mais de 5 dias."})]}),i.intervalo_dias&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-900 mb-2",children:" Preview do Lembrete"}),e.jsxs("div",{className:"text-sm text-purple-700 space-y-1",children:[e.jsxs("p",{children:[" Cliente ser notificado ",e.jsx("strong",{children:"7 dias antes"})," da prxima dose"]}),e.jsxs("p",{children:[" Intervalo configurado: ",e.jsxs("strong",{children:[i.intervalo_dias," dias"]})]}),e.jsx("p",{children:" Aps a compra, um novo lembrete ser criado automaticamente"}),i.especie_compativel!=="both"&&e.jsx("p",{className:"mt-2 text-purple-800",children:" Sistema validar se o pet  compatvel na hora da venda"})]})]})]})]}),n===7&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Calculadora de Rao (Fase 2)"}),e.jsxs("div",{className:"mt-2 text-sm text-orange-700",children:[e.jsx("p",{children:"Configure informaes de rao para usar na calculadora de durao e custo."}),e.jsx("p",{className:"mt-1",children:"A IA usar esses dados para recomendar raes aos clientes."})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" rao?"}),e.jsxs("select",{value:i.classificacao_racao||"nao",onChange:G=>{const Te=G.target.value;l(Xe=>({...Xe,classificacao_racao:Te,linha_racao_id:Te==="sim"?Xe.linha_racao_id:"",porte_animal_id:Te==="sim"?Xe.porte_animal_id:"",fase_publico_id:Te==="sim"?Xe.fase_publico_id:"",tipo_tratamento_id:Te==="sim"?Xe.tipo_tratamento_id:"",sabor_proteina_id:Te==="sim"?Xe.sabor_proteina_id:"",apresentacao_peso_id:Te==="sim"?Xe.apresentacao_peso_id:"",peso_embalagem:Te==="sim"?Xe.peso_embalagem:"",categoria_racao:Te==="sim"?Xe.categoria_racao:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"nao",children:"No"}),e.jsx("option",{value:"sim",children:"Sim"})]})]})}),i.classificacao_racao==="sim"&&e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-4",children:" Informaes Detalhadas da Rao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Linha"}),e.jsxs("select",{value:i.linha_racao_id,onChange:G=>ut("linha_racao_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),C.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte do Animal"}),e.jsxs("select",{value:i.porte_animal_id,onChange:G=>ut("porte_animal_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),F.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fase/Pblico"}),e.jsxs("select",{value:i.fase_publico_id,onChange:G=>{const Te=G.target.value,Xe=A.find(vt=>String(vt.id)===String(Te));l(vt=>({...vt,fase_publico_id:Te,categoria_racao:Xe?Xe.nome:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),A.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tratamento ",e.jsx("span",{className:"text-gray-400",children:"(Opcional)"})]}),e.jsxs("select",{value:i.tipo_tratamento_id,onChange:G=>ut("tipo_tratamento_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Nenhum"}),U.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sabor/Protena"}),e.jsxs("select",{value:i.sabor_proteina_id,onChange:G=>ut("sabor_proteina_id",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),I.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apresentao (Peso)"}),e.jsxs("select",{value:i.apresentacao_peso_id,onChange:G=>{const Te=G.target.value,Xe=D.find(vt=>String(vt.id)===String(Te));l(vt=>({...vt,apresentacao_peso_id:Te,peso_embalagem:Xe?String(Xe.peso_kg):vt.peso_embalagem}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),D.map(G=>e.jsxs("option",{value:G.id,children:[G.peso_kg,"kg"]},G.id))]})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-3",children:[" ",e.jsx("strong",{children:"Dica:"})," Essas informaes ajudam a IA a recomendar a rao ideal para cada pet no PDV. Voc pode gerenciar as opes disponveis em ",e.jsx("strong",{children:"Cadastros > Opes de Rao"}),"."]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Espcies Indicadas"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"both",checked:i.especies_indicadas==="both",onChange:G=>ut("especies_indicadas",G.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ambos"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"dog",checked:i.especies_indicadas==="dog",onChange:G=>ut("especies_indicadas",G.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ces"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"cat",checked:i.especies_indicadas==="cat",onChange:G=>ut("especies_indicadas",G.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Gatos"})]})]})]})}),e.jsx("input",{type:"hidden",value:i.tabela_nutricional}),e.jsx("div",{children:e.jsx(TB,{value:i.tabela_consumo,onChange:G=>ut("tabela_consumo",G),pesoEmbalagem:parseFloat(i.peso_embalagem)||null})}),i.peso_embalagem&&i.classificacao_racao&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-orange-900 mb-2",children:" Preview da Calculadora"}),e.jsxs("div",{className:"text-sm text-orange-700 space-y-1",children:[e.jsxs("p",{children:[" Peso: ",e.jsxs("strong",{children:[i.peso_embalagem,"kg"]})]}),e.jsxs("p",{children:[" Classificao: ",e.jsx("strong",{children:i.classificacao_racao.replace("_"," ")})]}),i.categoria_racao&&e.jsxs("p",{children:[" Categoria: ",e.jsx("strong",{children:i.categoria_racao})]}),i.tabela_consumo&&e.jsx("p",{className:"text-green-600",children:" Tabela de consumo configurada"}),!i.tabela_consumo&&e.jsx("p",{className:"text-yellow-600",children:" Sem tabela de consumo (usar clculo genrico)"}),e.jsx("p",{className:"mt-2 text-orange-800",children:" Use a Calculadora de Rao para ver durao e custo/dia"})]})]})]}),n===8&&i.tipo_produto==="PAI"&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["Variaes do Produto: ",i.nome]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Cadastre as variaes deste produto. Cada variao  um produto vendvel independente com seu prprio SKU, preo e estoque."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-md font-semibold",children:"Variaes Cadastradas"}),e.jsx("button",{type:"button",onClick:()=>M(!E),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:E?" Cancelar":" Nova Variao"})]}),E&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:[e.jsx("h5",{className:"font-semibold mb-3",children:"Cadastrar Nova Variao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",value:O.sku,onChange:G=>L({...O,sku:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: PROD001-P"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Complementar *"}),e.jsx("input",{type:"text",value:O.nome,onChange:G=>L({...O,nome:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: Tamanho P"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo de Barras"}),e.jsx("input",{type:"text",value:O.codigo_barras,onChange:G=>L({...O,codigo_barras:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"EAN-13"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsx("input",{type:"number",step:"0.01",value:O.preco_custo,onChange:G=>L({...O,preco_custo:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"number",step:"0.01",value:O.preco_venda,onChange:G=>L({...O,preco_venda:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:O.estoque_minimo,onChange:G=>L({...O,estoque_minimo:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O.e_kit,onChange:G=>L({...O,e_kit:G.target.checked}),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" Esta variao  um KIT (possui composio)"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Se marcado, voc poder definir a composio do kit aps salvar a variao."})]})]})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{M(!1),L({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{var G,Te;if(!O.sku||!O.nome||!O.preco_venda){alert("Preencha SKU, Nome e Preo de Venda");return}try{const Xe={codigo:O.sku,nome:`${i.nome} - ${O.nome}`,codigo_barras:O.codigo_barras||null,preco_custo:parseFloat(O.preco_custo)||0,preco_venda:parseFloat(O.preco_venda),estoque_minimo:parseInt(O.estoque_minimo)||0,tipo_produto:"VARIACAO",produto_pai_id:parseInt(r),categoria_id:i.categoria_id||null,marca_id:i.marca_id||null,unidade:i.unidade||"UN"};O.e_kit&&(Xe.tipo_kit="VIRTUAL",Xe.e_kit_fisico=!1,Xe.composicao_kit=[]),await F4(Xe),alert("Variao cadastrada com sucesso!"),M(!1),L({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]});const vt=await Xb(r);B(vt.data)}catch(Xe){console.error("Erro ao cadastrar variao:",Xe),alert(((Te=(G=Xe.response)==null?void 0:G.data)==null?void 0:Te.detail)||"Erro ao cadastrar variao")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Salvar Variao"})]})]}),R.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"Nenhuma variao cadastrada ainda."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Clique em "Nova Variao" para comear.'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo de Barras"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(G=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:G.codigo}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:G.nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:G.codigo_barras||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:["R$ ",(G.preco_custo||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-900 font-semibold",children:["R$ ",G.preco_venda.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx("span",{className:`font-semibold ${G.estoque_atual<=G.estoque_minimo?"text-red-600":"text-green-600"}`,children:G.estoque_atual||0})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{type:"button",onClick:()=>t(`/produtos/${G.id}/editar`),className:"text-blue-600 hover:text-blue-800 mr-2",title:"Editar",children:""}),e.jsx("button",{type:"button",onClick:async()=>{if(confirm(`Deseja excluir a variao ${G.nome}?`))try{await Gy(G.id),alert("Variao excluda com sucesso!");const Te=await Xb(r);B(Te.data||[])}catch(Te){console.error("Erro ao excluir variao:",Te),alert("Erro ao excluir variao")}},className:"text-red-600 hover:text-red-800",title:"Excluir",children:""})]})]},G.id))})]})})]})]}):e.jsxs("div",{className:"text-center py-16 border-2 border-dashed border-yellow-300 rounded-lg bg-yellow-50",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("p",{className:"mt-4 text-xl font-semibold text-yellow-900",children:"Aba Bloqueada"}),e.jsx("p",{className:"mt-2 text-sm text-yellow-800",children:"Salve o produto primeiro para habilitar o cadastro de variaes."}),e.jsx("p",{className:"mt-4 text-xs text-yellow-700",children:"Aps salvar, voc ser redirecionado automaticamente para cadastrar as variaes."})]})}),n===9&&(i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Tipo de Estoque do Kit"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{onClick:()=>ut("e_kit_fisico",!1),className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${i.e_kit_fisico?"border-gray-300 bg-white hover:border-blue-300":"border-blue-500 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"tipo_estoque_kit",checked:!i.e_kit_fisico,onChange:()=>ut("e_kit_fisico",!1),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Estoque Virtual"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["O estoque  calculado ",e.jsx("strong",{children:"automaticamente"})," com base nos componentes disponveis."]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:" No permite movimentao manual"}),e.jsx("div",{children:" Estoque = menor disponibilidade dos componentes"}),e.jsx("div",{children:" Ideal para kits montados sob demanda"})]})]})]})}),e.jsx("div",{onClick:()=>ut("e_kit_fisico",!0),className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${i.e_kit_fisico?"border-green-500 bg-green-50":"border-gray-300 bg-white hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"tipo_estoque_kit",checked:i.e_kit_fisico,onChange:()=>ut("e_kit_fisico",!0),className:"mt-1 h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Estoque Fsico"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["O kit possui estoque ",e.jsx("strong",{children:"prprio e independente"})," dos componentes."]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:" Permite movimentao manual"}),e.jsx("div",{children:" Entrada: diminui componentes (montou kits)"}),e.jsx("div",{children:" Ideal para kits pr-montados"})]})]})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Composio do Kit"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Defina quais produtos compem este kit e as quantidades necessrias de cada um."}),!i.e_kit_fisico&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[e.jsx("strong",{children:" Estoque Virtual Ativo"}),e.jsx("br",{}),"O estoque deste kit ser calculado automaticamente baseado nos componentes.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Estoque do kit = menor disponibilidade entre os componentes (considerando as quantidades necessrias)"})]}),i.e_kit_fisico&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[e.jsx("strong",{children:" Estoque Fsico Ativo"}),e.jsx("br",{}),e.jsx("strong",{children:"Entrada no kit:"})," Os componentes sero automaticamente DIMINUDOS (unitrios viraram kit).",e.jsx("br",{}),e.jsx("strong",{children:"Sada manual:"})," Voc poder escolher se os componentes voltam ao estoque (desfez o kit) ou no (perda/roubo)."]})]})]})}),!i.e_kit_fisico&&i.composicao_kit.length>0&&e.jsx("div",{className:"bg-white border-2 border-green-300 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Estoque Virtual do Kit"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calculado automaticamente"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600",children:ie}),e.jsx("p",{className:"text-xs text-gray-500",children:"kits disponveis"})]})]})}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-5 bg-gray-50",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Adicionar Produto ao Kit"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsxs("select",{value:Q,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione um produto..."}),z.map(G=>e.jsxs("option",{value:G.id,children:["[",G.codigo,"] ",G.nome," - Estoque: ",G.estoque_atual||0]},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:re,onChange:G=>ae(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1"})]})]}),e.jsxs("button",{type:"button",onClick:Ze,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar ao Kit"]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Produtos no Kit (",i.composicao_kit.length,")"]}),i.composicao_kit.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Nenhum produto adicionado ao kit ainda"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Kits Possveis"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.composicao_kit.map((G,Te)=>{const Xe=Math.floor(G.estoque_componente/G.quantidade),vt=Xe===ie&&ie>0;return e.jsxs("tr",{className:`hover:bg-gray-50 ${vt?"bg-yellow-50":""}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:G.produto_sku||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[G.produto_nome,vt&&e.jsx("span",{className:"ml-2 text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded",children:" LIMITADOR"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-900 font-semibold",children:G.quantidade}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:G.estoque_componente||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsx("span",{className:`font-semibold ${Xe===0?"text-red-600":Xe<5?"text-yellow-600":"text-green-600"}`,children:Xe})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>ht(G.produto_id),className:"text-red-600 hover:text-red-800",title:"Remover do kit",children:""})})]},G.produto_id)})})]})})]}),i.composicao_kit.length>0&&ie===0&&!i.e_kit_fisico&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Kit sem estoque disponvel!"}),e.jsx("p",{className:"mt-1",children:"Pelo menos um dos componentes est sem estoque suficiente para montar o kit."})]})]})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/produtos"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:Lt,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:Lt?"Salvando...":s?"Atualizar":"Cadastrar"})]})]}),Le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Nova Entrada de Estoque"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:tt.quantidade,onChange:G=>xe({...tt,quantidade:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex justify-between items-center",children:[e.jsx("span",{children:"Nmero do Lote"}),e.jsx("button",{type:"button",onClick:()=>{const G=`LOTE-${new Date().toISOString().split("T")[0].replace(/-/g,"")}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`;xe({...tt,nome_lote:G})},className:"text-xs text-blue-600 hover:text-blue-800",children:"Gerar Sugesto"})]}),e.jsx("input",{type:"text",value:tt.nome_lote,onChange:G=>xe({...tt,nome_lote:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-20260105-001 (deixe vazio para gerar automaticamente)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fabricao"}),e.jsx("input",{type:"date",value:tt.data_fabricacao,onChange:G=>xe({...tt,data_fabricacao:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Validade"}),e.jsx("input",{type:"date",value:tt.data_validade,onChange:G=>xe({...tt,data_validade:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:tt.preco_custo,onChange:G=>xe({...tt,preco_custo:G.target.value}),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>ct(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Registrar Entrada"})]})]})}),Fe&&Oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Editar Lote"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Lote *"}),e.jsx("input",{type:"text",value:Oe.nome_lote,onChange:G=>ce({...Oe,nome_lote:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do lote"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:Oe.quantidade_inicial,onChange:G=>ce({...Oe,quantidade_inicial:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fabricao"}),e.jsx("input",{type:"date",value:Oe.data_fabricacao,onChange:G=>ce({...Oe,data_fabricacao:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Validade"}),e.jsx("input",{type:"date",value:Oe.data_validade,onChange:G=>ce({...Oe,data_validade:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Unitrio *"}),e.jsx("input",{type:"number",step:"0.01",value:Oe.custo_unitario,onChange:G=>ce({...Oe,custo_unitario:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{Ye(!1),ce(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:oe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar Alteraes"})]})]})}),je&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:He?"Editar Fornecedor":"Adicionar Fornecedor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor *"}),e.jsxs("select",{value:ye.fornecedor_id,onChange:G=>Pe({...ye,fornecedor_id:G.target.value}),disabled:!!He,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Selecione..."}),w.map(G=>e.jsx("option",{value:G.id,children:G.nome},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo no Fornecedor"}),e.jsx("input",{type:"text",value:ye.codigo_fornecedor,onChange:G=>Pe({...ye,codigo_fornecedor:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"SKU-FORNECEDOR-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:ye.preco_custo,onChange:G=>Pe({...ye,preco_custo:G.target.value}),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0,00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prazo de Entrega (dias)"}),e.jsx("input",{type:"number",value:ye.prazo_entrega,onChange:G=>Pe({...ye,prazo_entrega:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque no Fornecedor"}),e.jsx("input",{type:"number",step:"0.01",value:ye.estoque_fornecedor,onChange:G=>Pe({...ye,estoque_fornecedor:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:ye.e_principal,onChange:G=>Pe({...ye,e_principal:G.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fornecedor Principal"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>Re(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar"})]})]})})]})}function OB(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState({totalEntradas:0,totalSaidas:0,valorTotal:0}),[d,u]=j.useState({data_inicio:h("mes"),data_fim:b(),produto_id:"",tipo_movimentacao:""}),[m,x]=j.useState("mes");j.useEffect(()=>{p()},[]),j.useEffect(()=>{f()},[d]);function h(w){const S=new Date,C=new Date(S);switch(w){case"mes":C.setDate(1);break;case"3meses":C.setMonth(S.getMonth()-3);break;case"6meses":C.setMonth(S.getMonth()-6);break;case"ano":C.setMonth(0),C.setDate(1);break;default:return""}return C.toISOString().split("T")[0]}function b(){return new Date().toISOString().split("T")[0]}const p=async()=>{try{const w=await pP();w.data&&Array.isArray(w.data.items)?n(w.data.items):Array.isArray(w.data)?n(w.data):(console.warn("Resposta de produtos no  um array:",w.data),n([]))}catch(w){console.error("Erro ao carregar produtos:",w),n([])}},f=async()=>{var w,S,C;try{i(!0);const F=(await kB(d)).data;let q=[];F&&Array.isArray(F.movimentacoes)?q=F.movimentacoes:Array.isArray(F)?q=F:console.warn("Resposta de movimentaes no  um array:",F),a(q);const A=q.reduce((T,U)=>(T.totalEntradas+=U.entrada||0,T.totalSaidas+=U.saida||0,T.valorTotal+=U.valor_total||0,T),{totalEntradas:0,totalSaidas:0,valorTotal:0});c(A)}catch(k){console.error("Erro ao carregar relatrio:",k),console.error("Detalhes do erro:",(w=k.response)==null?void 0:w.data),alert(`Erro ao carregar relatrio: ${((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.detail)||k.message}`),a([])}finally{i(!1)}},v=w=>{x(w),w==="personalizado"||u({...d,data_inicio:h(w),data_fim:b()})},g=(w,S)=>{u(C=>({...C,[w]:S}))},y=()=>{const w=["Data","Produto","Cdigo","Entrada","Sada","Estoque","Tipo","Valor","Usurio","N Pedido","Lanamento"],S=r.map(q=>[q.data||"",q.produto_nome||"",q.codigo||"",q.entrada||0,q.saida||0,q.estoque||0,q.tipo||"",_l(q.valor_total||0),q.usuario||"",q.numero_pedido||"",q.lancamento||""]);let C=w.join(";")+`
`;S.forEach(q=>{C+=q.join(";")+`
`});const k=new Blob([C],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(k),F.download=`relatorio_movimentacoes_${new Date().toISOString().split("T")[0]}.csv`,F.click()},N=r.reduce((w,S)=>{const k=new Date(S.data_movimentacao).toLocaleDateString("pt-BR",{month:"short",year:"numeric"});return w[k]||(w[k]=[]),w[k].push(S),w},{}),_=w=>({entrada:"bg-green-100 text-green-800",saida:"bg-red-100 text-red-800",ajuste:"bg-yellow-100 text-yellow-800",transferencia:"bg-blue-100 text-blue-800"})[w]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatrio de Movimentaes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Histrico completo de entradas e sadas de estoque"})]}),e.jsx("button",{onClick:()=>t("/produtos"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Voltar"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"ltimo Ms",value:"mes"},{label:"3 Meses",value:"3meses"},{label:"6 Meses",value:"6meses"},{label:"Este Ano",value:"ano"},{label:"Personalizado",value:"personalizado"}].map(w=>e.jsx("button",{onClick:()=>v(w.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m===w.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w.label},w.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:d.data_inicio,onChange:w=>g("data_inicio",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:d.data_fim,onChange:w=>g("data_fim",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsxs("select",{value:d.produto_id,onChange:w=>g("produto_id",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Produtos"}),s.map(w=>e.jsxs("option",{value:w.id,children:[w.codigo||w.sku," - ",w.nome]},w.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:d.tipo_movimentacao,onChange:w=>g("tipo_movimentacao",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Tipos"}),e.jsx("option",{value:"entrada",children:"Entrada"}),e.jsx("option",{value:"saida",children:"Sada"}),e.jsx("option",{value:"ajuste",children:"Ajuste"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Entradas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.totalEntradas.toFixed(2)})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Sadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.totalSaidas.toFixed(2)})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_l(l.valorTotal)})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:y,disabled:r.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exportar CSV"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Carregando relatrio..."}):r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada no perodo selecionado"}):e.jsx("div",{className:"overflow-x-auto",children:Object.entries(N).map(([w,S])=>e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-semibold text-gray-700 border-b border-gray-200",children:[w.charAt(0).toUpperCase()+w.slice(1)," (",S.length," movimentaes)"]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N Pedido"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((C,k)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:C.data}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.produto_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-700 font-mono",children:C.codigo||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-green-600",children:C.entrada>0?C.entrada:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-red-600",children:C.saida>0?C.saida:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:C.estoque||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(C.tipo)}`,children:C.tipo})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:_l(C.valor_total||0)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:C.usuario||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:C.numero_pedido?e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 underline font-mono text-sm",title:"Clique para ver o pedido",children:["#",C.numero_pedido]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},k))})]})]},w))}),!o&&r.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",r.length," movimentaes no perodo"]})})]})]})}const FB=()=>V.get("/estoque/alertas/pendentes"),RB=(t={})=>V.get("/estoque/alertas/todos",{params:t}),$B=()=>V.get("/estoque/alertas/dashboard"),DB=(t,r,a=null)=>V.put(`/estoque/alertas/${t}/resolver`,{status:r,observacao:a}),MB=t=>V.post("/estoque/alertas/verificar-estoque-negativo",{itens:t});function IB(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState("pendentes");j.useEffect(()=>{m()},[d]);const m=async()=>{c(!0);try{if(d==="pendentes"){const p=await FB();a(p.data)}else if(d==="historico"){const p=await RB();n(p.data)}else if(d==="dashboard"){const p=await $B();i(p.data)}}catch(p){console.error("Erro ao carregar alertas:",p),ze.error("Erro ao carregar alertas de estoque")}finally{c(!1)}},x=async(p,f,v=null)=>{if(f==="resolvido"&&v){t(`/produtos?produto_id=${v}`),ze.info("Redirecionando para ajustar o estoque do produto...");return}try{await DB(p,f),ze.success("Alerta ignorado com sucesso"),m()}catch(g){console.error("Erro ao ignorar alerta:",g),ze.error("Erro ao processar alerta")}},h=p=>{const f={CRITICO:"bg-red-100 text-red-800 border-red-300",ALTO:"bg-orange-100 text-orange-800 border-orange-300",MEDIO:"bg-yellow-100 text-yellow-800 border-yellow-300",BAIXO:"bg-blue-100 text-blue-800 border-blue-300"};return f[p]||f.MEDIO},b=p=>new Date(p).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ta,{className:"text-red-500"}),"Alertas de Estoque Negativo"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitoramento em tempo real de produtos com estoque crtico"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>u("pendentes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="pendentes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{size:18}),"Pendentes",r.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:r.length})]})}),e.jsx("button",{onClick:()=>u("dashboard"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ca,{size:18}),"Dashboard"]})}),e.jsx("button",{onClick:()=>u("historico"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="historico"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{size:18}),"Histrico"]})})]})})}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:m,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[e.jsx(Gr,{size:18,className:l?"animate-spin":""}),"Atualizar"]})}),l?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(Gr,{className:"animate-spin mx-auto text-gray-400",size:48}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[d==="pendentes"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(Xt,{className:"mx-auto text-green-500",size:64}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mt-4",children:"Nenhum alerta pendente!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Todos os produtos esto com estoque adequado."})]}):r.map(p=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.produto_nome}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${h(p.criticidade)}`,children:p.criticidade})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estoque Anterior"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p.estoque_anterior})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estoque Resultante"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:p.estoque_resultante})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantidade Vendida"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p.quantidade_vendida})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Venda"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:p.venda_codigo?`#${p.venda_codigo}`:p.venda_id?`ID: ${p.venda_id}`:"N/A"})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Data:"})," ",b(p.data_alerta)]}),p.observacao&&e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Observao:"})," ",p.observacao]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>x(p.id,"resolvido",p.produto_id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",title:"Ir para o produto e fazer ajuste de estoque",children:[e.jsx($s,{size:16}),"Ajustar Estoque"]}),e.jsxs("button",{onClick:()=>x(p.id,"ignorado"),className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",title:"Ignorar este alerta (aceitar estoque negativo)",children:[e.jsx(Qn,{size:16}),"Ignorar"]})]})]})},p.id))}),d==="dashboard"&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total de Alertas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.total_alertas})]}),e.jsx(ta,{className:"text-gray-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:o.alertas_pendentes})]}),e.jsx(ta,{className:"text-red-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Crticos"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:o.alertas_criticos})]}),e.jsx(Ca,{className:"text-orange-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Resolvidos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o.alertas_resolvidos})]}),e.jsx(Xt,{className:"text-green-400",size:40})]})})]}),o.produtos_estoque_negativo&&o.produtos_estoque_negativo.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx($s,{className:"text-red-500"}),"Produtos com Estoque Negativo Atual"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Atual"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alertas Pendentes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.produtos_estoque_negativo.map((p,f)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-red-600",children:p.estoque_atual}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:p.alertas_pendentes})]},f))})]})})]})]}),d==="historico"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criticidade"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Ant."}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Res."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venda"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"Nenhum alerta registrado"})}):s.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b(p.data_alerta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(p.criticidade)}`,children:p.criticidade})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:p.estoque_anterior}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-red-600",children:p.estoque_resultante}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.resolvido?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.resolvido?"Resolvido":"Pendente"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-blue-600 font-medium",children:p.venda_codigo?`#${p.venda_codigo}`:p.venda_id?`ID: ${p.venda_id}`:"N/A"})]},p.id))})]})})})]})]})}function LB(){const[t,r]=j.useState([]),[a,s]=j.useState(!1),[n,o]=j.useState("pendente");j.useEffect(()=>{i();const x=setInterval(i,6e4);return()=>clearInterval(x)},[]);const i=async()=>{s(!0);try{const x=await V.get("/api/lembretes/pendentes");r(x.data.lembretes||[])}catch(x){console.error("Erro ao carregar lembretes:",x),ze.error("Erro ao carregar lembretes")}finally{s(!1)}},l=async x=>{try{await V.post(`/api/lembretes/${x}/completar`,{}),ze.success("Lembrete marcado como completado"),i()}catch{ze.error("Erro ao completar lembrete")}},c=async x=>{try{await V.post(`/api/lembretes/${x}/renovar`,{}),ze.success("Lembrete renovado com sucesso"),i()}catch{ze.error("Erro ao renovar lembrete")}},d=async x=>{if(window.confirm("Tem certeza que deseja cancelar este lembrete?"))try{await V.delete(`/api/lembretes/${x}`),ze.success("Lembrete cancelado"),i()}catch{ze.error("Erro ao cancelar lembrete")}},u=t.filter(x=>x.dias_restantes<=7),m=t.filter(x=>x.dias_restantes<0);return e.jsxs("div",{className:"lembretes-container",children:[e.jsxs("div",{className:"lembretes-header",children:[e.jsx("h1",{children:" Lembretes de Recorrncia"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.length}),e.jsx("span",{className:"stat-label",children:"Total de Lembretes"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("span",{className:"stat-number",children:u.length}),e.jsx("span",{className:"stat-label",children:"Prximos em 7 dias"})]}),e.jsxs("div",{className:"stat-card danger",children:[e.jsx("span",{className:"stat-number",children:m.length}),e.jsx("span",{className:"stat-label",children:"Vencidos"})]})]})]}),a&&e.jsx("div",{className:"loading",children:"Carregando lembretes..."}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(WA,{size:48}),e.jsx("h2",{children:"Nenhum lembrete pendente"}),e.jsx("p",{children:"Lembretes sero criados automaticamente para produtos recorrentes."})]}):e.jsxs("div",{className:"lembretes-list",children:[m.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title danger",children:" Vencidos"}),m.map(x=>e.jsx(Qb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]}),u.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title warning",children:" Prximos em at 7 dias"}),u.map(x=>e.jsx(Qb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]}),t.filter(x=>x.dias_restantes>7).length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:" Prximos (mais de 7 dias)"}),t.filter(x=>x.dias_restantes>7).map(x=>e.jsx(Qb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]})]})]})}function Qb({lembrete:t,onCompletar:r,onRenovar:a,onCancelar:s}){const n=t.dias_restantes,o=new Date(t.data_proxima_dose),i=n<0?"vencido":n<=7?"proximo":"futuro",l=t.dose_total&&t.dose_total>0,c=l?t.dose_atual/t.dose_total*100:0;return e.jsxs("div",{className:`lembrete-card ${i}`,children:[e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{children:t.produto_nome}),e.jsxs("div",{className:"badges",children:[l&&e.jsxs("span",{className:"dose-badge",children:["Dose ",t.dose_atual,"/",t.dose_total]}),e.jsx("span",{className:`status-badge ${i}`,children:n<0?"VENCIDO":`${Math.abs(n)}d`})]})]}),l&&e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${c}%`}})}),e.jsxs("div",{className:"card-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Pet:"}),e.jsx("span",{className:"value",children:t.pet_nome})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Data:"}),e.jsx("span",{className:"value",children:o.toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Quantidade:"}),e.jsx("span",{className:"value",children:t.quantidade})]}),t.preco_estimado&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Preo Est.:"}),e.jsxs("span",{className:"value",children:["R$ ",t.preco_estimado.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>r(t.id),title:"Marcar como completado",children:[e.jsx(Ti,{})," Comprado"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>a(t.id),title:"Renovar lembrete",children:[e.jsx(Hm,{})," Renovar"]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>s(t.id),title:"Cancelar lembrete",children:e.jsx(Fo,{})})]})]})}function BB(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState({pet_id:"",pet_nome:"",produto_id:"",produto_nome:"",categoria_racao:"",peso_pet_kg:"",idade_meses:"",nivel_atividade:"normal",classificacao:"",especies:"dog",produto_comparar_id:"",produto_comparar_nome:""}),[c,d]=j.useState(null),[u,m]=j.useState([]);j.useEffect(()=>{x(),h()},[]);const x=async()=>{var v,g,y;try{console.log(" Iniciando carregamento de produtos...");const N=await V.get("/produtos/");console.log(" Resposta da API:",{status:N.status,dataType:typeof N.data,isArray:Array.isArray(N.data),dataPreview:typeof N.data=="string"?N.data.substring(0,200):"object"});let _=N.data;if(typeof _=="string"){console.warn(" API retornou string, tentando parsear JSON...");try{_=JSON.parse(_)}catch(C){console.error(" Erro ao parsear JSON:",C),console.error(" Contedo recebido:",_.substring(0,500)),ze.error("Erro: resposta da API invlida");return}}const w=Array.isArray(_)?_:_.items||_.produtos||[];console.log(" Total de produtos recebidos:",w.length),console.log(" Estrutura da resposta:",Array.isArray(_)?"Array direto":`Objeto com keys: ${Object.keys(_).join(", ")}`),w.length>0&&console.log(" Estrutura do primeiro produto:",w[0]);const S=w.filter(C=>C.peso_embalagem&&C.peso_embalagem>0);console.log(" Raes encontradas:",S.length),console.log(" Total de produtos:",w.length),S.length>0?console.log(" IDs das raes:",S.map(C=>`${C.id}-${C.nome}`)):console.log(" Produtos sem peso_embalagem:",w.slice(0,5).map(C=>({id:C.id,nome:C.nome,peso_embalagem:C.peso_embalagem,categoria_racao:C.categoria_racao,classificacao_racao:C.classificacao_racao}))),r(S),S.length===0&&w.length>0?(console.warn(" Produtos encontrados, mas nenhum tem peso de embalagem configurado"),ze.error(`${w.length} produtos encontrados, mas nenhum tem PESO DE EMBALAGEM configurado. Edite os produtos de rao e preencha o campo "Peso da Embalagem (kg)".`,{duration:6e3})):S.length===0&&(console.log(" Nenhum produto encontrado"),ze.error("Nenhum produto encontrado. Cadastre produtos primeiro."))}catch(N){console.error(" Erro ao carregar produtos:",N),console.error(" Detalhes:",((v=N.response)==null?void 0:v.data)||N.message),ze.error(`Erro ao carregar produtos: ${((y=(g=N.response)==null?void 0:g.data)==null?void 0:y.detail)||N.message}`)}},h=async()=>{try{const v=await V.get("/clientes/pets/todos"),g=Array.isArray(v.data)?v.data:[];s(g),console.log(" Pets carregados:",g.length)}catch(v){console.error(" Erro ao carregar pets:",v)}},b=v=>{const g=a.find(y=>y.id===parseInt(v));if(g){let y="";if(g.data_nascimento){const _=new Date(g.data_nascimento),S=Math.abs(new Date-_);y=Math.floor(S/(1e3*60*60*24*30.44)).toString()}const N=g.especie==="Cachorro"?"dog":g.especie==="Gato"?"cat":i.especies;l({...i,pet_id:v,pet_nome:`${g.nome} - ${g.especie} ${g.peso?`(${g.peso}kg)`:""}`,peso_pet_kg:g.peso||"",idade_meses:y,especies:N}),ze.success(`Pet ${g.nome} selecionado!`)}else l({...i,pet_id:"",peso_pet_kg:"",idade_meses:""})},p=async()=>{var v,g;if(!i.peso_pet_kg){ze.error("Informe o peso do pet");return}if(i.categoria_racao==="filhote"&&!i.idade_meses){ze.error(" Idade  obrigatria para raes de filhote!");return}try{o(!0);const y=await V.post("/api/produtos/calculadora-racao",{produto_id:i.produto_id?parseInt(i.produto_id):null,peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade});d(y.data),m([]),ze.success("Clculo realizado!")}catch(y){console.error("Erro:",y),ze.error(((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao calcular")}finally{o(!1)}},f=async()=>{var v,g;if(!i.peso_pet_kg){ze.error("Informe o peso do pet");return}try{if(o(!0),i.produto_comparar_id){const N=(await V.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_comparar_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade})).data;if(i.produto_id){const _=await V.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade});if(_.data.produto_id===N.produto_id)m([_.data]),ze.success("Mostrando clculo da rao selecionada");else{const w=[_.data,N];m(w),ze.success("Comparando 2 raes selecionadas!")}}else m([N]),ze.success("Mostrando clculo da rao selecionada")}else{const y={peso_pet_kg:parseFloat(i.peso_pet_kg),nivel_atividade:i.nivel_atividade};i.idade_meses&&(y.idade_meses=parseInt(i.idade_meses)),i.classificacao&&(y.classificacao=i.classificacao),i.especies&&(y.especies=i.especies);let _=(await V.post("/api/produtos/comparar-racoes",null,{params:y})).data.racoes||[];if(i.produto_id){_=_.filter(F=>F.produto_id!==parseInt(i.produto_id));const k=(await V.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade})).data;_.sort((F,q)=>F.custo_por_dia-q.custo_por_dia),_=[k,..._]}const w=_.slice(0,10);m(w),_.length===0&&ze.error("Nenhuma rao encontrada com esses filtros. Tente outros critrios.")}}catch(y){console.error("Erro:",y),ze.error(((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao comparar")}finally{o(!1)}};return e.jsxs("div",{className:"calculadora-racao-container",children:[e.jsxs("div",{className:"header",children:[e.jsx("h1",{children:" Calculadora de Rao"}),e.jsx("p",{children:"Calcule durao, custo/dia e compare produtos"})]}),e.jsxs("div",{className:"calculadora-grid",children:[e.jsxs("div",{className:"form-card",children:[e.jsx("h2",{children:" Dados do Pet"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Buscar Pet Cadastrado"}),e.jsx("input",{type:"text",list:"pets-list",value:i.pet_nome||"",onChange:v=>{const g=v.target.value;l({...i,pet_nome:g});const y=a.find(N=>`${N.nome} - ${N.especie} ${N.peso?`(${N.peso}kg)`:""}`===g);y&&b(y.id)},placeholder:"Digite ou selecione um pet",className:"pet-select"}),e.jsx("datalist",{id:"pets-list",children:a.map(v=>e.jsx("option",{value:`${v.nome} - ${v.especie} ${v.peso?`(${v.peso}kg)`:""}`},v.id))}),e.jsx("small",{className:"form-hint",children:" Digite ou selecione um pet para preencher automaticamente peso e idade"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Peso do Pet (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:i.peso_pet_kg,onChange:v=>l({...i,peso_pet_kg:v.target.value}),placeholder:"Ex: 8.5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Idade (meses)",i.categoria_racao==="filhote"&&e.jsx("span",{style:{color:"#ff6b6b"},children:" *"})]}),e.jsx("input",{type:"number",value:i.idade_meses,onChange:v=>l({...i,idade_meses:v.target.value}),placeholder:i.categoria_racao==="filhote"?"Obrigatrio para filhotes!":"Ex: 24 (opcional)",required:i.categoria_racao==="filhote",style:i.categoria_racao==="filhote"?{borderColor:"#ff6b6b",borderWidth:"2px"}:{}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nvel de Atividade"}),e.jsxs("select",{value:i.nivel_atividade,onChange:v=>l({...i,nivel_atividade:v.target.value}),children:[e.jsx("option",{value:"baixo",children:"Baixo"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"alto",children:"Alto"})]})]}),e.jsx("hr",{}),e.jsx("h3",{children:" Rao"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Selecionar Rao"}),e.jsx("input",{type:"text",list:"racoes-list",value:i.produto_nome||"",onChange:v=>{const g=v.target.value;l({...i,produto_nome:g});const y=t.find(N=>`${N.nome} - ${N.peso_embalagem}kg - R$ ${N.preco_venda}`===g);y&&l({...i,produto_id:y.id,produto_nome:g,categoria_racao:y.categoria_racao||""})},placeholder:"Digite ou selecione uma rao"}),e.jsx("datalist",{id:"racoes-list",children:t.map(v=>e.jsx("option",{value:`${v.nome} - ${v.peso_embalagem}kg - R$ ${v.preco_venda}`},v.id))}),i.categoria_racao==="filhote"&&e.jsx("small",{className:"form-hint",style:{color:"#ff6b6b",fontWeight:"bold"},children:" Rao de filhote - idade  obrigatria!"})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{onClick:p,disabled:n,className:"btn-primary",children:n?"Calculando...":" Calcular"})}),e.jsx("hr",{}),e.jsx("h3",{children:" Comparar Raes"}),e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:" Dica:"})," Escolha UMA das opes abaixo:",e.jsx("br",{})," Selecione uma rao especfica para ver como ela se compara",e.jsx("br",{})," OU use os filtros gerais para ver todas de uma categoria"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Comparar Rao Especfica"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",list:"racoes-comparar-list",value:i.produto_comparar_nome||"",onChange:v=>{const g=v.target.value;if(g===""){l({...i,produto_comparar_id:"",produto_comparar_nome:""});return}l({...i,produto_comparar_nome:g,classificacao:""});const y=t.find(N=>`${N.nome} - ${N.classificacao_racao} - R$ ${N.preco_venda}`===g);y&&l({...i,produto_comparar_id:y.id,produto_comparar_nome:g,classificacao:""})},placeholder:"Digite ou selecione uma rao",disabled:i.classificacao!=="",style:{flex:1}}),i.produto_comparar_nome&&e.jsx("button",{type:"button",onClick:()=>l({...i,produto_comparar_id:"",produto_comparar_nome:""}),className:"btn-clear",title:"Limpar seleo",children:""})]}),e.jsx("datalist",{id:"racoes-comparar-list",children:t.map(v=>e.jsx("option",{value:`${v.nome} - ${v.classificacao_racao} - R$ ${v.preco_venda}`},v.id))}),i.classificacao&&e.jsx("small",{className:"form-warning",children:" Limpe o filtro de classificao para usar esta opo"}),!i.produto_comparar_id&&!i.classificacao&&e.jsx("small",{className:"form-hint",children:" Deixe vazio para comparar por classificao abaixo"})]}),e.jsx("div",{className:"divider-text",children:"OU"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Filtro por Classificao"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("select",{value:i.classificacao,onChange:v=>l({...i,classificacao:v.target.value,produto_comparar_id:"",produto_comparar_nome:""}),disabled:i.produto_comparar_id!=="",style:{flex:1},children:[e.jsx("option",{value:"",children:"Todas as classificaes"}),e.jsx("option",{value:"super_premium",children:"Super Premium"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"especial",children:"Especial"}),e.jsx("option",{value:"standard",children:"Standard"})]}),i.classificacao&&e.jsx("button",{type:"button",onClick:()=>l({...i,classificacao:""}),className:"btn-clear",title:"Limpar filtro",children:""})]}),i.produto_comparar_id&&e.jsx("small",{className:"form-warning",children:" Limpe a rao especfica acima para usar este filtro"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Espcie"}),e.jsxs("select",{value:i.especies,onChange:v=>l({...i,especies:v.target.value}),children:[e.jsx("option",{value:"dog",children:" Ces"}),e.jsx("option",{value:"cat",children:" Gatos"}),e.jsx("option",{value:"both",children:"Ambos"})]})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{onClick:f,disabled:n,className:"btn-secondary",children:n?"Comparando...":" Comparar Todas"})})]}),e.jsxs("div",{children:[c&&e.jsxs("div",{className:"result-card",children:[e.jsx("h2",{children:" Resultado do Clculo"}),e.jsxs("div",{className:"result-header",children:[e.jsx("h3",{children:c.produto_nome}),c.classificacao&&e.jsx("span",{className:`badge badge-${c.classificacao}`,children:c.classificacao.replace("_"," ")})]}),e.jsxs("div",{className:"result-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Peso Embalagem"}),e.jsxs("span",{className:"value",children:[c.peso_embalagem_kg," kg"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Preo"}),e.jsxs("span",{className:"value",children:["R$ ",c.preco.toFixed(2)]})]})]}),e.jsxs("div",{className:"result-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Durao"}),e.jsxs("p",{children:[c.duracao_dias," dias (",c.duracao_meses," meses)"]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Consumo dirio"}),e.jsxs("p",{children:[c.quantidade_diaria_g,"g"]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo/kg"}),e.jsxs("p",{children:["R$ ",c.custo_por_kg.toFixed(2)]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo/dia"}),e.jsxs("p",{children:["R$ ",c.custo_por_dia.toFixed(2)]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo mensal"}),e.jsxs("p",{children:["R$ ",c.custo_mensal.toFixed(2)]})]})]})]})]}),u.length>0&&e.jsxs("div",{className:"comparativo-card",children:[e.jsxs("h2",{children:[" Comparativo de Raes (",u.length,")"]}),e.jsx("p",{className:"subtitle",children:"Ordenado por melhor custo-benefcio (menor custo dirio)"}),e.jsx("div",{className:"comparativo-list",children:(()=>{const v=Math.min(...u.map(g=>g.custo_por_dia));return u.map((g,y)=>{const N=i.produto_id&&g.produto_id===parseInt(i.produto_id),_=g.custo_por_dia===v;return e.jsxs("div",{className:`comparativo-item ${_?"melhor":""} ${N?"selecionada":""}`,style:{position:"relative"},children:[N&&e.jsx("span",{className:"badge-selecionada",style:{position:"absolute",left:"10px",top:"10px",zIndex:10,fontSize:"11px",padding:"4px 8px",whiteSpace:"nowrap"},children:" Selecionada"}),_&&e.jsx("span",{className:"badge-melhor",children:" Melhor Custo-Benefcio"}),e.jsxs("div",{className:"item-header",children:[e.jsxs("div",{children:[e.jsx("h4",{children:g.produto_nome}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginTop:"4px"},children:[g.classificacao&&e.jsx("span",{className:`badge badge-${g.classificacao}`,children:g.classificacao.replace("_"," ")}),e.jsxs("span",{style:{fontSize:"13px",color:"#64748b",backgroundColor:"#f1f5f9",padding:"2px 8px",borderRadius:"4px"},children:[" ",g.quantidade_diaria_g,"g/dia"]})]})]}),e.jsxs("div",{className:"item-price",children:["R$ ",g.preco.toFixed(2)]})]}),e.jsxs("div",{className:"item-stats",children:[e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Peso"}),e.jsxs("span",{children:[g.peso_embalagem_kg,"kg"]})]}),e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Durao"}),e.jsxs("span",{children:[g.duracao_dias,"d"]})]}),e.jsxs("div",{className:"stat-small highlight",children:[e.jsx("span",{className:"label",children:"Custo/dia"}),e.jsxs("span",{children:["R$ ",g.custo_por_dia.toFixed(2)]})]}),e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Custo/ms"}),e.jsxs("span",{children:["R$ ",g.custo_mensal.toFixed(2)]})]})]}),_&&u.length>1&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#ecfdf5",borderLeft:"3px solid #10b981",borderRadius:"4px"},children:[e.jsx("p",{style:{margin:"0 0 6px 0",fontSize:"13px",fontWeight:"600",color:"#065f46"},children:" Por que esta  a melhor opo?"}),e.jsxs("p",{style:{margin:"0",fontSize:"13px",color:"#047857",lineHeight:"1.5"},children:["Apesar de ",g.classificacao==="premium"||g.classificacao==="super_premium"?`ter um preo mais alto (R$ ${g.preco.toFixed(2)})`:`custar R$ ${g.preco.toFixed(2)}`,", esta rao ",g.classificacao==="super_premium"?"super premium  muito concentrada em nutrientes":g.classificacao==="premium"?"premium tem melhor densidade nutricional":"tem excelente eficincia alimentar",", ento seu pet consome apenas ",e.jsxs("strong",{children:[g.quantidade_diaria_g,"g por dia"]}),".",u[1]&&e.jsxs(e.Fragment,{children:[" Em comparao, a segunda opo requer ",e.jsxs("strong",{children:[u[1].quantidade_diaria_g,"g/dia"]}),", resultando em um custo dirio ",e.jsxs("strong",{children:["R$ ",(u[1].custo_por_dia-g.custo_por_dia).toFixed(2)," maior"]}),"(R$ ",g.custo_por_dia.toFixed(2)," vs R$ ",u[1].custo_por_dia.toFixed(2),")."]})]})]})]},g.produto_id)})})()})]})]})]})]})}const zB=()=>{var q;const t=Kt(),[r]=lg(),a=r.get("cliente_id"),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!0),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,b]=j.useState(a||""),[p,f]=j.useState(""),[v,g]=j.useState(""),[y,N]=j.useState(!1);j.useEffect(()=>{_(),w()},[h,p,v]);const _=async()=>{try{c(!0);const A=new URLSearchParams;m&&A.append("busca",m),h&&A.append("cliente_id",h),p&&A.append("especie",p),v&&A.append("ativo",v==="ativo"?"true":"false");const T=await V.get(`/pets?${A.toString()}`);n(T.data),u("")}catch(A){console.error("Erro ao carregar pets:",A),u("Erro ao carregar pets")}finally{c(!1)}},w=async()=>{try{const A=await V.get("/clientes/");i(A.data)}catch(A){console.error("Erro ao carregar clientes:",A)}},S=A=>{A.preventDefault(),_()},C=()=>{x(""),b(""),f(""),g("")},k=A=>{if(!A)return null;const T=new Date,U=new Date(A),K=T.getFullYear()-U.getFullYear(),I=T.getMonth()-U.getMonth();return K===0?`${I} ${I===1?"ms":"meses"}`:`${K} ${K===1?"ano":"anos"}`},F=async A=>{try{A.ativo?await V.delete(`/pets/${A.id}?soft_delete=true`):await V.post(`/pets/${A.id}/ativar`),_()}catch(T){console.error("Erro ao alterar status do pet:",T),alert("Erro ao alterar status do pet")}};return l?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando pets..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Hr,{className:"text-blue-600",size:36}),"Gerenciamento de Pets"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:h?`Pets do cliente: ${((q=o.find(A=>A.id===parseInt(h)))==null?void 0:q.nome)||""}`:"Gesto completa dos animais de estimao"})]}),e.jsxs("button",{onClick:()=>t("/pets/novo"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(gs,{size:20}),"Adicionar Pet"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(XA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, raa, microchip ou cdigo...",value:m,onChange:A=>x(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Buscar"}),e.jsxs("button",{type:"button",onClick:()=>N(!y),className:"px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(D2,{}),"Filtros"]})]}),y&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente (Tutor)"}),e.jsxs("select",{value:h,onChange:A=>b(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os clientes"}),o.map(A=>e.jsx("option",{value:A.id,children:A.nome},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie"}),e.jsxs("select",{value:p,onChange:A=>f(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todas as espcies"}),e.jsx("option",{value:"Co",children:"Co"}),e.jsx("option",{value:"Gato",children:"Gato"}),e.jsx("option",{value:"Ave",children:"Ave"}),e.jsx("option",{value:"Roedor",children:"Roedor"}),e.jsx("option",{value:"Rptil",children:"Rptil"}),e.jsx("option",{value:"Outro",children:"Outro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:v,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"ativo",children:"Ativos"}),e.jsx("option",{value:"inativo",children:"Inativos"})]})]}),e.jsx("div",{className:"col-span-3 flex justify-end",children:e.jsxs("button",{type:"button",onClick:C,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(Ro,{}),"Limpar filtros"]})})]})]})}),d&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(fr,{}),d]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Hr,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum pet encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m||h||p||v?"Tente ajustar os filtros ou fazer uma nova busca":"Comece adicionando o primeiro pet"}),e.jsxs("button",{onClick:()=>t("/pets/novo"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(gs,{}),"Adicionar Primeiro Pet"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(A=>e.jsx("div",{className:`bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md ${A.ativo?"border-gray-200":"border-red-200 bg-gray-50"}`,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:A.nome}),A.ativo?e.jsx(Ti,{className:"text-green-500",size:16}):e.jsx(Wy,{className:"text-red-500",size:16})]}),e.jsx("p",{className:"text-sm text-gray-500",children:A.codigo})]}),A.foto_url&&e.jsx("img",{src:A.foto_url,alt:A.nome,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Espcie:"}),e.jsx("span",{className:"text-gray-900",children:A.especie})]}),A.raca&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Raa:"}),e.jsx("span",{className:"text-gray-900",children:A.raca})]}),A.sexo&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sexo:"}),e.jsx("span",{className:"text-gray-900",children:A.sexo})]}),A.data_nascimento&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Idade:"}),e.jsx("span",{className:"text-gray-900",children:k(A.data_nascimento)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tutor:"}),e.jsx("span",{className:"text-blue-600",children:A.cliente_nome})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>t(`/pets/${A.id}`),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(fh,{size:16}),"Ver Detalhes"]}),e.jsx("button",{onClick:()=>t(`/pets/${A.id}/editar`),className:"px-3 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Oi,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>F(A),className:`px-3 py-2 border rounded-lg transition-colors ${A.ativo?"border-red-300 hover:bg-red-50 text-red-600":"border-green-300 hover:bg-green-50 text-green-600"}`,title:A.ativo?"Desativar":"Reativar",children:A.ativo?e.jsx(Wy,{size:16}):e.jsx(Ti,{size:16})})]})]})},A.id))}),s.length>0&&e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Total: ",e.jsx("strong",{children:s.length})," pet(s) encontrado(s)",v===""&&e.jsxs(e.Fragment,{children:["  ",e.jsx("strong",{className:"text-green-600",children:s.filter(A=>A.ativo).length})," ativo(s)","  ",e.jsx("strong",{className:"text-red-600",children:s.filter(A=>!A.ativo).length})," inativo(s)"]})]})]})};function qB(t){if(!t)return null;const r=typeof t=="string"?new Date(t):t,a=new Date,s=a.getFullYear()-r.getFullYear(),n=a.getMonth()-r.getMonth();return s*12+n}function mm(t){if(!t)return"-";const r=Math.floor(t/12),a=t%12;return r===0?`${t} ${t===1?"ms":"meses"}`:a===0?`${r} ${r===1?"ano":"anos"}`:`${r} ${r===1?"ano":"anos"} e ${a} ${a===1?"ms":"meses"}`}function VB(t){if(!t)return null;const r=t.toString().toLowerCase().trim();if(/^\d+$/.test(r))return parseInt(r);const a=/(\d+(?:[.,]\d+)?)\s*anos?\s*(?:e\s*)?(\d+)?\s*meses?/i,s=r.match(a);if(s){const c=parseFloat(s[1].replace(",",".")),d=s[2]?parseInt(s[2]):0;return Math.round(c*12)+d}const n=/(\d+(?:[.,]\d+)?)\s*anos?/i,o=r.match(n);if(o){const c=parseFloat(o[1].replace(",","."));return Math.round(c*12)}const i=/(\d+)\s*meses?/i,l=r.match(i);return l?parseInt(l[1]):null}const UB=()=>{const{petId:t}=rc(),r=Kt(),[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(""),[c,d]=j.useState("geral");j.useEffect(()=>{u()},[t]);const u=async()=>{try{o(!0);const p=await V.get(`/pets/${t}`);s(p.data),l("")}catch(p){console.error("Erro ao carregar pet:",p),l("Erro ao carregar informaes do pet")}finally{o(!1)}},m=p=>{if(!p)return null;const f=new Date,v=new Date(p),g=f.getFullYear()-v.getFullYear(),y=f.getMonth()-v.getMonth();return g===0?`${y} ${y===1?"ms":"meses"}`:y<0?`${g-1} anos e ${12+y} meses`:y===0?`${g} ${g===1?"ano":"anos"}`:`${g} anos e ${y} ${y===1?"ms":"meses"}`},x=p=>p?new Date(p).toLocaleDateString("pt-BR"):"-",h=async()=>{try{a.ativo?await V.delete(`/pets/${a.id}?soft_delete=true`):await V.post(`/pets/${a.id}/ativar`),u()}catch(p){console.error("Erro ao alterar status do pet:",p),alert("Erro ao alterar status do pet")}};if(n)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});if(i||!a)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(fr,{}),i||"Pet no encontrado"]}),e.jsxs("button",{onClick:()=>r("/pets"),className:"mt-4 flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(jd,{}),"Voltar para lista de pets"]})]});const b=[{id:"geral",label:"Dados Gerais",icon:w9},{id:"saude",label:"Sade",icon:M2},{id:"vacinas",label:"Vacinas",icon:_4},{id:"consultas",label:"Consultas",icon:kn},{id:"servicos",label:"Servios",icon:Hr}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/pets"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(jd,{}),"Voltar para Gerenciamento de Pets"]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[a.foto_url?e.jsx("img",{src:a.foto_url,alt:a.nome,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center border-4 border-gray-200",children:e.jsx(Hr,{className:"text-blue-600",size:48})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.nome}),a.ativo?e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Ti,{size:14}),"Ativo"]}):e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Wy,{size:14}),"Inativo"]})]}),e.jsxs("p",{className:"text-gray-500 mb-1",children:[a.especie," ",a.raca&&` ${a.raca}`," ",a.sexo&&` ${a.sexo}`]}),e.jsx("p",{className:"text-sm text-gray-400",children:a.codigo}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(Yn,{size:16}),e.jsx("span",{className:"font-medium",children:"Tutor:"}),e.jsx("span",{className:"text-blue-600",children:a.cliente_nome})]}),a.cliente_celular&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(GA,{size:16}),e.jsx("span",{children:a.cliente_celular})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>r(`/pets/${a.id}/editar`),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(Oi,{}),"Editar"]}),e.jsx("button",{onClick:h,className:`px-4 py-2 border-2 rounded-lg transition-colors font-medium ${a.ativo?"border-red-300 text-red-600 hover:bg-red-50":"border-green-300 text-green-600 hover:bg-green-50"}`,children:a.ativo?"Desativar":"Reativar"})]})]})})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("div",{className:"flex gap-4",children:b.map(p=>{const f=p.icon;return e.jsxs("button",{onClick:()=>d(p.id),className:`flex items-center gap-2 px-4 py-3 font-medium border-b-2 transition-colors ${c===p.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(f,{size:18}),p.label]},p.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[c==="geral"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes Gerais"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:a.codigo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie"}),e.jsx("p",{className:"text-gray-900",children:a.especie})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raa"}),e.jsx("p",{className:"text-gray-900",children:a.raca||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexo"}),e.jsx("p",{className:"text-gray-900",children:a.sexo||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Castrado"}),e.jsx("p",{className:"text-gray-900",children:a.castrado?"Sim":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Nascimento"}),e.jsx("p",{className:"text-gray-900",children:x(a.data_nascimento)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idade"}),e.jsx("p",{className:"text-gray-900",children:a.idade_meses?mm(a.idade_meses):a.idade_aproximada?mm(a.idade_aproximada):a.data_nascimento?m(a.data_nascimento):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso"}),e.jsx("p",{className:"text-gray-900",children:a.peso?`${a.peso} kg`:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte"}),e.jsx("p",{className:"text-gray-900",children:a.porte||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor/Pelagem"}),e.jsx("p",{className:"text-gray-900",children:a.cor||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Microchip"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:a.microchip||"-"})]})]}),a.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:a.observacoes})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 text-sm text-gray-500",children:[e.jsxs("p",{children:["Cadastrado em: ",x(a.created_at)]}),e.jsxs("p",{children:["ltima atualizao: ",x(a.updated_at)]})]})]}),c==="saude"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes de Sade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alergias"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.alergias||"Nenhuma alergia registrada"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doenas Crnicas"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.doencas_cronicas||"Nenhuma doena crnica registrada"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medicamentos Contnuos"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.medicamentos_continuos||"Nenhum medicamento contnuo registrado"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Histrico Clnico"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:a.historico_clinico||"Nenhum histrico clnico registrado"})})]})]})]}),c==="vacinas"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Carteira de Vacinao"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Registrar Vacina"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(_4,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar o histrico de vacinas do pet"})]})]}),c==="consultas"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histrico de Consultas"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Nova Consulta"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(kn,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar consultas veterinrias"})]})]}),c==="servicos"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histrico de Servios"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Registrar Servio"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Hr,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar banho, tosa e outros servios"})]})]})]})]})};function WB({value:t,onChange:r,name:a="idade",label:s="Idade",className:n="",mostrarDataNascimento:o=!0,required:i=!1}){const[l,c]=j.useState("texto"),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,b]=j.useState("");j.useEffect(()=>{t&&typeof t=="number"&&u(mm(t))},[t]);const p=y=>{const N=y.target.value;u(N),N||(b(""),r(null))},f=()=>{if(!d){b(""),r(null);return}const y=VB(d);if(y!==null){const N=mm(y);u(N),b(` ${N}`),r(y)}else b(" Formato invlido. Ex: 12 meses, 2 anos, 1.5 anos"),r(null)},v=y=>{const N=y.target.value;if(x(N),!N){b(""),r(null);return}const _=qB(N);_!==null?(b(` ${mm(_)}`),r(_)):(b(" Data invlida"),r(null))},g=()=>{c(l==="texto"?"data":"texto"),u(""),x(""),b(""),r(null)};return e.jsxs("div",{className:n,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[s,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o&&e.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 hover:text-blue-800 underline",children:l==="texto"?" Usar data de nascimento":" Digitar idade"})]}),l==="texto"?e.jsxs("div",{children:[e.jsx("input",{type:"text",name:a,value:d,onChange:p,onBlur:f,placeholder:"Ex: 12 meses, 2 anos, 1.5 anos, 2anos6meses",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:i}),h&&e.jsx("p",{className:`text-xs mt-1 ${h.startsWith("")?"text-green-600":"text-orange-600"}`,children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite a idade e pressione Tab ou clique fora do campo"})]}):e.jsxs("div",{children:[e.jsx("input",{type:"date",name:a,value:m,onChange:v,max:new Date().toISOString().split("T")[0],className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:i}),h&&e.jsx("p",{className:`text-xs mt-1 ${h.startsWith("")?"text-green-600":"text-orange-600"}`,children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Data de nascimento do pet"})]})]})}const HB=({tipo:t,especieId:r,especieNome:a,onSuccess:s,onClose:n})=>{const[o,i]=j.useState(""),[l,c]=j.useState(!1),[d,u]=j.useState(""),m=async x=>{var h,b;if(x.preventDefault(),u(""),!o||o.trim()===""){u(`O nome ${t==="especie"?"da espcie":"da raa"}  obrigatrio`);return}try{c(!0);let p;if(t==="especie")p=await V.post("/cadastros/especies",{nome:o.trim(),ativo:!0});else{if(!r){u("Selecione uma espcie primeiro");return}p=await V.post("/cadastros/racas",{nome:o.trim(),especie_id:r,ativo:!0})}s&&s(p.data),n()}catch(p){console.error("Erro ao salvar:",p),u(((b=(h=p.response)==null?void 0:h.data)==null?void 0:b.detail)||"Erro ao salvar")}finally{c(!1)}};return e.jsx("div",{className:"quick-modal-overlay",onClick:n,children:e.jsxs("div",{className:"quick-modal-content",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"quick-modal-header",children:[e.jsxs("h3",{children:[t==="especie"?" Nova Espcie":" Nova Raa",t==="raca"&&a&&e.jsxs("span",{className:"quick-subtitle",children:[" - ",a]})]}),e.jsx("button",{className:"quick-btn-close",onClick:n,children:e.jsx(Ro,{})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"quick-modal-body",children:[d&&e.jsxs("div",{className:"quick-alert quick-alert-danger",children:[e.jsx(fr,{})," ",d]}),e.jsxs("div",{className:"quick-form-group",children:[e.jsxs("label",{children:["Nome ",t==="especie"?"da Espcie":"da Raa"," *"]}),e.jsx("input",{type:"text",value:o,onChange:x=>i(x.target.value),placeholder:t==="especie"?"Ex: Co, Gato, Ave...":"Ex: Labrador, SRD, Siams...",required:!0,autoFocus:!0,disabled:l})]}),e.jsx("div",{className:"quick-info",children:e.jsxs("p",{children:[" ",t==="especie"?"Esta espcie ficar disponvel para todos os pets":`Esta raa ser adicionada  espcie "${a}"`]})})]}),e.jsxs("div",{className:"quick-modal-footer",children:[e.jsx("button",{type:"button",className:"quick-btn quick-btn-secondary",onClick:n,disabled:l,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"quick-btn quick-btn-primary",disabled:l,children:[e.jsx(Bl,{})," ",l?"Salvando...":"Salvar"]})]})]})]})})},D4=()=>{var W,R;const{petId:t}=rc(),r=Kt(),a=Vo(),s=!!t,n=(W=a.state)==null?void 0:W.clienteId,[o,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,b]=j.useState([]),[p,f]=j.useState([]),[v,g]=j.useState([]),[y,N]=j.useState(!1),[_,w]=j.useState(null),[S,C]=j.useState({cliente_id:n||"",nome:"",especie:"",raca:"",sexo:"",castrado:!1,data_nascimento:"",idade_aproximada:"",peso:"",cor:"",porte:"",microchip:"",alergias:"",doencas_cronicas:"",medicamentos_continuos:"",historico_clinico:"",observacoes:"",foto_url:"",ativo:!0});j.useEffect(()=>{(async()=>{await k(),await F(),s&&await A()})()},[t]),j.useEffect(()=>{S.especie?q(S.especie):g([])},[S.especie]);const k=async()=>{try{const B=await V.get("/clientes/");b(B.data)}catch(B){console.error("Erro ao carregar clientes:",B)}},F=async()=>{try{const B=await V.get("/cadastros/especies",{params:{ativo:!0}});f(B.data)}catch(B){console.error("Erro ao carregar espcies:",B)}},q=async B=>{try{const O=await V.get("/cadastros/racas",{params:{ativo:!0,especie_id:B}});g(O.data)}catch(O){console.error("Erro ao carregar raas:",O),g([])}},A=async()=>{try{i(!0);const O=(await V.get(`/pets/${t}`)).data,L=p.find(E=>E.nome===O.especie);C({cliente_id:O.cliente_id||"",nome:O.nome||"",especie:L?L.id.toString():"",raca:O.raca||"",sexo:O.sexo||"",castrado:O.castrado||!1,data_nascimento:"",idade_aproximada:O.idade_meses||O.idade_aproximada||"",peso:O.peso||"",cor:O.cor||"",porte:O.porte||"",microchip:O.microchip||"",alergias:O.alergias||"",doencas_cronicas:O.doencas_cronicas||"",medicamentos_continuos:O.medicamentos_continuos||"",historico_clinico:O.historico_clinico||"",observacoes:O.observacoes||"",foto_url:O.foto_url||"",ativo:O.ativo!==void 0?O.ativo:!0})}catch(B){console.error("Erro ao carregar pet:",B),u("Erro ao carregar informaes do pet")}finally{i(!1)}},T=B=>{const{name:O,value:L,type:E,checked:M}=B.target;C(z=>({...z,[O]:E==="checkbox"?M:L}))},U=B=>{w(B),N(!0)},K=()=>{N(!1),w(null)},I=B=>{_==="especie"?F().then(()=>{C(O=>({...O,especie:B.id.toString()}))}):_==="raca"&&S.especie&&q(S.especie).then(()=>{C(O=>({...O,raca:B.nome}))})},Y=()=>S.nome.trim()?S.especie?S.cliente_id?!0:(u("Cliente (tutor)  obrigatrio"),!1):(u("Espcie  obrigatria"),!1):(u("Nome do pet  obrigatrio"),!1),D=async B=>{var O,L;if(B.preventDefault(),u(""),x(""),!!Y())try{c(!0);const E=p.find(z=>z.id===parseInt(S.especie)),M={...S,especie:(E==null?void 0:E.nome)||S.especie,cliente_id:parseInt(S.cliente_id),peso:S.peso?parseFloat(S.peso):null,idade_aproximada:S.idade_aproximada?parseInt(S.idade_aproximada):null,data_nascimento:S.data_nascimento||null};if(s)await V.put(`/pets/${t}`,M),x("Pet atualizado com sucesso!"),setTimeout(()=>r(`/pets/${t}`),1500);else{const z=await V.post("/pets",M);x("Pet cadastrado com sucesso!"),setTimeout(()=>r(`/pets/${z.data.id}`),1500)}}catch(E){console.error("Erro ao salvar pet:",E),u(((L=(O=E.response)==null?void 0:O.data)==null?void 0:L.detail)||"Erro ao salvar pet")}finally{c(!1)}};return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r(s?`/pets/${t}`:"/pets"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(jd,{}),s?"Voltar para detalhes do pet":"Voltar para lista de pets"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Hr,{className:"text-blue-600",size:36}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Editar Pet":"Cadastrar Novo Pet"})]}),e.jsx("p",{className:"text-gray-600",children:s?"Atualize as informaes do pet":"Preencha os dados do animal de estimao"})]}),d&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(fr,{}),d]}),m&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Ti,{}),m]}),n&&e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Ti,{}),e.jsx("span",{children:" Tutor pr-selecionado automaticamente! Voc pode alterar se necessrio."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dados Bsicos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente (Tutor) *"}),e.jsxs("select",{name:"cliente_id",value:S.cliente_id,onChange:T,required:!0,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none ${n?"border-blue-400 bg-blue-50":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o tutor..."}),h.map(B=>e.jsxs("option",{value:B.id,children:[B.nome," ",B.cpf&&`- CPF: ${B.cpf}`]},B.id))]}),n&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" Tutor selecionado automaticamente"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Pet *"}),e.jsx("input",{type:"text",name:"nome",value:S.nome,onChange:T,required:!0,placeholder:"Ex: Rex, Miau, Tot",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie *"}),e.jsxs("div",{className:"field-with-action",children:[e.jsxs("select",{name:"especie",value:S.especie,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),p.map(B=>e.jsx("option",{value:B.id,children:B.nome},B.id))]}),e.jsxs("button",{type:"button",className:"btn-add-quick",onClick:()=>U("especie"),title:"Adicionar nova espcie",children:[e.jsx(gs,{})," Nova"]})]}),p.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Nenhuma espcie cadastrada. Cadastre em Cadastros  Espcies e Raas."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raa"}),e.jsxs("div",{className:"field-with-action",children:[e.jsxs("select",{name:"raca",value:S.raca,onChange:T,disabled:!S.especie,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:S.especie?"Selecione uma raa...":"Selecione uma espcie primeiro"}),v.map(B=>e.jsx("option",{value:B.nome,children:B.nome},B.id))]}),e.jsxs("button",{type:"button",className:"btn-add-quick",onClick:()=>U("raca"),title:"Adicionar nova raa",disabled:!S.especie,children:[e.jsx(gs,{})," Nova"]})]}),S.especie&&v.length===0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Nenhuma raa cadastrada para ",S.especie,". Cadastre em Cadastros  Espcies e Raas."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexo"}),e.jsxs("select",{name:"sexo",value:S.sexo,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Macho",children:"Macho"}),e.jsx("option",{value:"Fmea",children:"Fmea"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"castrado",id:"castrado",checked:S.castrado,onChange:T,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"castrado",className:"text-sm font-medium text-gray-700",children:"Pet castrado"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Caractersticas Fsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(WB,{value:S.idade_aproximada,onChange:B=>C(O=>({...O,idade_aproximada:B,data_nascimento:""})),name:"idade_aproximada",label:"Idade do Pet",mostrarDataNascimento:!0,className:"col-span-2"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg)"}),e.jsx("input",{type:"number",name:"peso",value:S.peso,onChange:T,step:"0.1",min:"0",placeholder:"Ex: 5.5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte"}),e.jsxs("select",{name:"porte",value:S.porte,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Mini",children:"Mini"}),e.jsx("option",{value:"Pequeno",children:"Pequeno"}),e.jsx("option",{value:"Mdio",children:"Mdio"}),e.jsx("option",{value:"Grande",children:"Grande"}),e.jsx("option",{value:"Gigante",children:"Gigante"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor/Pelagem"}),e.jsx("input",{type:"text",name:"cor",value:S.cor,onChange:T,placeholder:"Ex: Preto, Branco, Caramelo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Microchip"}),e.jsx("input",{type:"text",name:"microchip",value:S.microchip,onChange:T,placeholder:"Nmero do microchip",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-mono text-sm"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Foto"}),e.jsx("input",{type:"url",name:"foto_url",value:S.foto_url,onChange:T,placeholder:"https://exemplo.com/foto-do-pet.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes de Sade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alergias"}),e.jsx("textarea",{name:"alergias",value:S.alergias,onChange:T,rows:"3",placeholder:"Descreva alergias conhecidas (alimentares, medicamentos, etc)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doenas Crnicas"}),e.jsx("textarea",{name:"doencas_cronicas",value:S.doencas_cronicas,onChange:T,rows:"3",placeholder:"Descreva doenas crnicas diagnosticadas",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medicamentos Contnuos"}),e.jsx("textarea",{name:"medicamentos_continuos",value:S.medicamentos_continuos,onChange:T,rows:"3",placeholder:"Liste medicamentos de uso contnuo com dosagem",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Histrico Clnico"}),e.jsx("textarea",{name:"historico_clinico",value:S.historico_clinico,onChange:T,rows:"4",placeholder:"Descreva o histrico clnico do pet (cirurgias, tratamentos anteriores, etc)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Observaes Adicionais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes Gerais"}),e.jsx("textarea",{name:"observacoes",value:S.observacoes,onChange:T,rows:"4",placeholder:"Informaes adicionais, comportamento, preferncias, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"ativo",id:"ativo",checked:S.ativo,onChange:T,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm font-medium text-gray-700",children:"Pet ativo no sistema"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"submit",disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bl,{}),s?"Salvar Alteraes":"Cadastrar Pet"]})}),e.jsx("button",{type:"button",onClick:()=>r(s?`/pets/${t}`:"/pets"),disabled:l,className:"px-6 py-3 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors font-medium disabled:opacity-50",children:"Cancelar"})]})]}),y&&e.jsx(HB,{tipo:_,especieId:_==="raca"?parseInt(S.especie):null,especieNome:_==="raca"?(R=p.find(B=>B.id===parseInt(S.especie)))==null?void 0:R.nome:null,onSuccess:I,onClose:K})]})},M4=async(t={})=>(await V.get("/vendas",{params:t})).data,W0=async t=>(await V.get(`/vendas/${t}`)).data,fP=async t=>(await V.post("/vendas",t)).data,KB=async(t,r)=>(await V.post(`/vendas/${t}/finalizar`,{pagamentos:r})).data,GB=async(t={})=>{const r=await V.get("/clientes/",{params:t});return r.data.items||r.data.clientes||r.data||[]},Du=async t=>(await V.get(`/clientes/${t}`)).data,XB=({status:t,className:r=""})=>{if(!t)return null;const a={verde:{cor:"bg-green-500",borda:"border-green-500",texto:"text-green-700",fundo:"bg-green-50",icone:"",mensagem:"Margem Saudvel",descricao:"Venda em condies ideais"},amarelo:{cor:"bg-yellow-500",borda:"border-yellow-500",texto:"text-yellow-700",fundo:"bg-yellow-50",icone:"",mensagem:"Margem em Alerta",descricao:"Ateno com parcelamento e descontos"},vermelho:{cor:"bg-red-500",borda:"border-red-500",texto:"text-red-700",fundo:"bg-red-50",icone:"",mensagem:"Margem Crtica",descricao:"Evite mais descontos ou parcelamentos longos"}},s=a[t]||a.verde;return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${s.borda} ${s.fundo} ${r}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.cor} animate-pulse`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`text-sm font-semibold ${s.texto}`,children:[s.icone," ",s.mensagem]}),e.jsx("div",{className:"text-xs text-gray-600",children:s.descricao})]})]})},YB=["Visa","Mastercard","Elo","American Express","Hipercard","Outros"];function QB({venda:t,onClose:r,onConfirmar:a,onVendaAtualizada:s,onAnalisarVenda:n}){var $t;const[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState([]),[h,b]=j.useState(null),[p,f]=j.useState(null),[v,g]=j.useState(""),[y,N]=j.useState(""),[_,w]=j.useState(1),[S,C]=j.useState(""),[k,F]=j.useState(!1),[q,A]=j.useState(!1),[T,U]=j.useState(""),[K,I]=j.useState(0),[Y,D]=j.useState(!1),[W,R]=j.useState(null),[B,O]=j.useState(null),[L,E]=j.useState(!1),[M,z]=j.useState(""),[le,Q]=j.useState(""),[ne,re]=j.useState({}),[ae,ie]=j.useState(!1),[ve,_e]=j.useState(null),me=j.useRef(null);j.useEffect(()=>{(async()=>{try{const De=await V.get("/financeiro/formas-pagamento");u(De.data)}catch(De){console.error("Erro ao carregar formas:",De)}})()},[]),j.useEffect(()=>{(async()=>{try{const De=await V.get("/operadoras-cartao?apenas_ativas=true");x(De.data);const Le=De.data.find(ct=>ct.padrao);Le&&b(Le)}catch(De){console.error("Erro ao carregar operadoras:",De)}})()},[]),j.useEffect(()=>{(async()=>{var De;if(t.id){A(!0);try{const Le=await V.get(`/vendas/${t.id}/pagamentos`);c(Le.data.pagamentos||[]),I(Le.data.total_pago||0)}catch(Le){console.error("Erro ao buscar pagamentos:",Le),((De=Le.response)==null?void 0:De.status)!==404&&U("Erro ao carregar pagamentos existentes")}finally{A(!1)}}})()},[t.id,t.status]),j.useEffect(()=>{p!=null&&p.permite_parcelamento&&me.current&&setTimeout(()=>{var ge;(ge=me.current)==null||ge.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},[p==null?void 0:p.permite_parcelamento]);const Se=t.total,Ne=o.reduce((ge,De)=>ge+De.valor,0)+K,ot=Se-Ne,Ke=S?parseFloat(S)-ot:0,lt=async()=>{var ge,De,Le;E(!0);try{const ct=[{forma_pagamento_id:1,valor:t.total,parcelas:1}],tt=(t.itens||[]).map(Fe=>({produto_id:Fe.produto_id,quantidade:Fe.quantidade,preco_venda:Fe.preco_unitario||Fe.preco_venda||0,custo:Fe.custo||null})),xe=await V.post("/formas-pagamento/analisar-venda",{items:tt,formas_pagamento:ct,desconto:t.desconto_valor||0,taxa_entrega:((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0});(Le=(De=xe.data)==null?void 0:De.resultado)!=null&&Le.cor_indicador&&(O(xe.data.resultado.cor_indicador),console.log(" Status inicial calculado:",xe.data.resultado.cor_indicador))}catch(ct){console.error(" Erro ao calcular status inicial:",ct),O(null)}finally{E(!1)}},ke=async()=>{var ge,De,Le;if(!(o.length===0&&l.length===0)){E(!0);try{const ct=[...l,...o],tt=(t.itens||[]).map(Fe=>({produto_id:Fe.produto_id,quantidade:Fe.quantidade,preco_venda:Fe.preco_unitario||Fe.preco_venda||0,custo:Fe.custo||null})),xe=await V.post("/formas-pagamento/analisar-venda",{items:tt,formas_pagamento:ct,desconto:t.desconto_valor||0,taxa_entrega:((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0});(Le=(De=xe.data)==null?void 0:De.resultado)!=null&&Le.cor_indicador&&O(xe.data.resultado.cor_indicador)}catch(ct){console.error("Erro ao calcular status de margem:",ct),O(null)}finally{E(!1)}}};j.useEffect(()=>{const ge=setTimeout(()=>{ke()},500);return()=>clearTimeout(ge)},[o,_]),j.useEffect(()=>{console.log(" Modal de pagamento aberto - Calculando status inicial..."),lt()},[]),j.useEffect(()=>{if(d&&d.length>0){const ge=d.filter(De=>De.permite_parcelamento);ge.length>0&&Object.keys(ne).length===0&&(console.log(" Simulando parcelamentos ao carregar formas..."),Ie(ge[0]))}},[d]);const Ie=async ge=>{var ct,tt,xe;if(!ge||!ge.permite_parcelamento){console.log(" Forma de pagamento invlida ou no permite parcelamento");return}const De=(ge==null?void 0:ge.parcelas_maximas)??12,Le=ge.id;console.log(` Simulando parcelamentos para ${ge.nome} (at ${De}x)...`),ie(!0);try{const Fe={},Ye=(t.itens||[]).map(ue=>({produto_id:ue.produto_id,quantidade:ue.quantidade,preco_venda:ue.preco_unitario||ue.preco_venda||0,custo:ue.custo||null}));for(let ue=1;ue<=De;ue++){const Oe=[{forma_pagamento_id:Le,valor:t.total,parcelas:ue}];try{const ce=await V.post("/formas-pagamento/analisar-venda",{items:Ye,formas_pagamento:Oe,desconto:t.desconto_valor||0,taxa_entrega:((ct=t.entrega)==null?void 0:ct.taxa_entrega_total)||0});(xe=(tt=ce.data)==null?void 0:tt.resultado)!=null&&xe.cor_indicador&&(Fe[ue]={cor:ce.data.resultado.cor_indicador,classificacao:ce.data.resultado.cor_indicador})}catch(ce){console.error(`Erro ao simular ${ue}x:`,ce),Fe[ue]={cor:null,classificacao:"verde"}}}re(ue=>({...ue,[Le]:Fe}));const te=Ae(Fe,De);_e(te),console.log(" Simulaes concludas:",Fe),console.log(" Faixas calculadas:",te)}catch(Fe){console.error(" Erro ao simular parcelamentos:",Fe)}finally{ie(!1)}},Ae=(ge,De)=>{const Le={saudavel:{min:1,max:0},alerta:{min:0,max:0},proibido:{min:0,max:De}};let ct=0,tt=De+1;for(let xe=1;xe<=De;xe++){const Fe=ge[xe];Fe&&(Fe.cor==="verde"?ct=xe:Fe.cor==="vermelho"&&xe<tt&&(tt=xe))}return Le.saudavel.max=ct,Le.alerta.min=ct+1,Le.alerta.max=tt-1,Le.proibido.min=tt,Le};j.useEffect(()=>{if(p!=null&&p.permite_parcelamento)if(!ne[p.id])Ie(p);else{const ge=ne[p.id],De=Ae(ge,(p==null?void 0:p.parcelas_maximas)??12);_e(De),console.log(" Reutilizando simulao existente")}else if(!p){const ge=Object.keys(ne)[0];if(ge&&d.length>0){const De=d.find(Le=>Le.id===parseInt(ge));if(De){const Le=Ae(ne[ge],(De==null?void 0:De.parcelas_maximas)??12);_e(Le)}}}},[p==null?void 0:p.id]);const it=()=>{var tt;if(!p){U("Selecione uma forma de pagamento");return}const ge=parseFloat(S)||0;if(ge<=0){U("Informe o valor recebido");return}if(p.id==="credito_cliente"&&ge>p.credito_disponivel){U(`Valor excede o crdito disponvel (R$ ${p.credito_disponivel.toFixed(2)})`);return}if(["cartao_credito","cartao_debito"].includes(p.tipo)&&!v){U("Selecione a bandeira do carto");return}if(["cartao_credito","cartao_debito"].includes(p.tipo)&&!h){U("Selecione a operadora do carto");return}if(h&&_>h.max_parcelas){U(`A operadora ${h.nome} permite no mximo ${h.max_parcelas}x`);return}console.log(" DEBUG formaPagamentoSelecionada:",p);const De={forma_pagamento:p.nome,forma_id:p.id,forma_pagamento_id:p.id,nome:p.nome,valor:Math.min(ge,ot),bandeira:["cartao_credito","cartao_debito"].includes(p.tipo)?v:null,nsu_cartao:["cartao_credito","cartao_debito"].includes(p.tipo)&&y?y:null,operadora_id:(h==null?void 0:h.id)||null,numero_parcelas:p.permite_parcelamento?_:1,parcelas:p.permite_parcelamento?_:1,valor_recebido:ge,troco:p.tipo==="dinheiro"&&Ke>0?Ke:null,is_credito_cliente:p.nome==="Crdito Cliente"||p.tipo==="credito_cliente"};console.log(" DEBUG novoPagamento:",De);let Le="verde";if(p!=null&&p.permite_parcelamento&&ne[p.id]){const xe=(tt=ne[p.id])==null?void 0:tt[_];Le=(xe==null?void 0:xe.cor)??"verde",console.log(` Reutilizando simulao do backend: ${_}x = cor ${Le}`)}if(B==="vermelho"||Le==="vermelho"){if(!M||M.trim().length<10){Q(" Justificativa obrigatria para margem crtica (mnimo 10 caracteres)"),U("Por favor, preencha a justificativa abaixo");return}const xe=t.observacoes?`${t.observacoes}

 JUSTIFICATIVA (Margem Crtica): ${M}`:` JUSTIFICATIVA (Margem Crtica): ${M}`;t.observacoes=xe}i([...o,De]),f(null),C(""),g(""),b(m.find(xe=>xe.padrao)||null),N(""),w(1),U(""),Q("")},gt=ge=>{i(o.filter((De,Le)=>Le!==ge))},Dt=async ge=>{var De,Le;if(confirm("Deseja realmente excluir este pagamento?")){F(!0),U("");try{console.log(` Excluindo pagamento ID ${ge}...`),await V.delete(`/vendas/pagamentos/${ge}`),console.log(" Pagamento excludo com sucesso!");const ct=await V.get(`/vendas/${t.id}/pagamentos`);c(ct.data.pagamentos||[]),I(ct.data.total_pago||0),ct.data.pagamentos.length===0&&s&&await s(),U("")}catch(ct){console.error(" Erro ao excluir pagamento:",ct),console.error("   Response:",ct.response),console.error("   Message:",ct.message),ct.message&&ct.message.includes("CORS")?U(" Erro de CORS: O backend precisa ser reiniciado. Feche e abra novamente o servidor backend."):U(((Le=(De=ct.response)==null?void 0:De.data)==null?void 0:Le.detail)||ct.message||"Erro ao excluir pagamento")}finally{F(!1)}}},Ct=async()=>{var ge,De,Le,ct,tt,xe,Fe,Ye;if(o.length===0){U("Adicione pelo menos uma forma de pagamento");return}F(!0),U("");try{const te=t.itens.filter(ce=>ce.tipo==="produto"&&ce.produto_id).map(ce=>({produto_id:ce.produto_id,quantidade:ce.quantidade}));if(te.length>0){const je=(await MB(te)).data||[];if(je.length>0){const Re=je.map(J=>` ${J.produto_nome}: estoque atual ${J.estoque_atual}, aps venda ficar ${J.estoque_resultante}`).join(`
`);if(!window.confirm(` ATENO: Os seguintes produtos ficaro com ESTOQUE NEGATIVO:

${Re}

Deseja continuar mesmo assim?`)){F(!1);return}}}let ue=t.id;if(!ue){const ce=((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0,je=((De=t.entrega)==null?void 0:De.taxa_loja)||0,Re=((Le=t.entrega)==null?void 0:Le.taxa_entregador)||0,He=ce>0?(je/ce*100).toFixed(2):100,J=ce>0?(Re/ce*100).toFixed(2):0;ue=(await fP({cliente_id:(ct=t.cliente)==null?void 0:ct.id,funcionario_id:t.funcionario_id,itens:t.itens,desconto_valor:t.desconto_valor,desconto_percentual:t.desconto_percentual,observacoes:t.observacoes,tem_entrega:t.tem_entrega,taxa_entrega:ce,percentual_taxa_loja:parseFloat(He),percentual_taxa_entregador:parseFloat(J),entregador_id:t.entregador_id,endereco_entrega:(tt=t.entrega)==null?void 0:tt.endereco_completo,observacoes_entrega:(xe=t.entrega)==null?void 0:xe.observacoes_entrega})).id}const Oe=await KB(ue,o);R(ue),(Oe==null?void 0:Oe.status)==="finalizada"||(Oe==null?void 0:Oe.status)==="pago_nf"?D(!0):a()}catch(te){console.error("Erro ao finalizar venda:",te),U(((Ye=(Fe=te.response)==null?void 0:Fe.data)==null?void 0:Ye.detail)||"Erro ao finalizar venda")}finally{F(!1)}},Lt=async ge=>{var De,Le;F(!0),U("");try{await V.post("/nfe/emitir",{venda_id:W,tipo_nota:ge}),alert(`${ge==="nfe"?"NF-e":"NFC-e"} emitida com sucesso!`),a()}catch(ct){console.error("Erro ao emitir nota:",ct),alert(((Le=(De=ct.response)==null?void 0:De.data)==null?void 0:Le.detail)||"Erro ao emitir nota fiscal. Voc pode emiti-la depois na tela de vendas."),a()}finally{F(!1)}};return Y?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Xt,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Venda Finalizada!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deseja emitir nota fiscal?"})]})]}),e.jsxs("div",{className:"space-y-3",children:[($t=t.cliente)!=null&&$t.cnpj?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Lt("nfe"),disabled:k,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NF-e (Empresa)"})]}),e.jsxs("button",{onClick:()=>Lt("nfce"),disabled:k,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NFC-e (Cupom)"})]})]}):e.jsxs("button",{onClick:()=>Lt("nfce"),disabled:k,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NFC-e"})]}),e.jsx("button",{onClick:a,disabled:k,className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"No emitir agora"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Voc pode emitir a nota fiscal depois na tela de vendas"})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Nd,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Registrar Recebimento"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione as formas de pagamento"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!1,e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Selecione a forma de pagamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.cliente&&t.cliente.credito>0&&e.jsxs("button",{onClick:()=>{f({id:"credito_cliente",nome:"Crdito Cliente",tipo:"credito_cliente",icone:"",credito_disponivel:parseFloat(t.cliente.credito)}),w(1),g(""),N(""),C(Math.min(parseFloat(t.cliente.credito),ot).toFixed(2))},className:`p-4 rounded-lg border-2 transition-all ${(p==null?void 0:p.id)==="credito_cliente"?"border-purple-500 bg-purple-50":"border-purple-200 bg-purple-50/50 hover:border-purple-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:`text-sm font-medium ${(p==null?void 0:p.id)==="credito_cliente"?"text-purple-900":"text-purple-700"}`,children:"Crdito Cliente"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-1 font-semibold",children:["R$ ",parseFloat(t.cliente.credito).toFixed(2).replace(".",",")]})]}),d.map(ge=>{const De=(p==null?void 0:p.id)===ge.id;return e.jsxs("button",{onClick:()=>{f(ge),w(1),g(""),N("")},className:`p-4 rounded-lg border-2 transition-all ${De?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:ge.icone||""}),e.jsx("div",{className:`text-sm font-medium ${De?"text-blue-900":"text-gray-700"}`,children:ge.nome}),ge.taxa_percentual>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Taxa: ",ge.taxa_percentual,"%"]})]},ge.id)})]})]}),p&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[p.id==="credito_cliente"&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-800 mb-2",children:[e.jsx(_d,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Crdito Disponvel"})]}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:["R$ ",p.credito_disponivel.toFixed(2).replace(".",",")]}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:" No gera movimentao de caixa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:p.id==="credito_cliente"?"Valor a Utilizar":"Valor Recebido"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:S,onChange:ge=>{C(ge.target.value)},onBlur:ge=>{const De=parseFloat(ge.target.value)||0;if(p.id==="credito_cliente"){const Le=Math.min(p.credito_disponivel,ot);De>Le&&(C(Le.toFixed(2)),U(`Valor ajustado para o crdito disponvel: R$ ${Le.toFixed(2)}`),setTimeout(()=>U(""),3e3))}},placeholder:ot.toFixed(2),max:p.id==="credito_cliente"?Math.min(p.credito_disponivel,ot):void 0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),p.id==="credito_cliente"&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Mximo: R$ ",Math.min(p.credito_disponivel,ot).toFixed(2)]})]}),p.tipo==="dinheiro"&&S&&e.jsx("div",{className:`rounded-lg p-3 ${Ke>0?"bg-yellow-50 border border-yellow-200":"bg-gray-100"}`,children:e.jsx("div",{className:"text-sm font-medium",children:e.jsxs("span",{className:Ke>0?"text-yellow-800":"text-gray-600",children:["Troco: R$ ",Ke.toFixed(2)]})})}),(p==null?void 0:p.tipo)&&["cartao_credito","cartao_debito"].includes(p.tipo)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operadora *"}),e.jsxs("select",{value:(h==null?void 0:h.id)||"",onChange:ge=>{const De=m.find(Le=>Le.id===parseInt(ge.target.value));b(De),De&&_>De.max_parcelas&&w(De.max_parcelas)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),m.map(ge=>e.jsxs("option",{value:ge.id,children:[ge.nome," (",ge.max_parcelas,"x mx)"]},ge.id))]}),h&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mximo de ",h.max_parcelas," parcelas"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bandeira"}),e.jsxs("select",{value:v,onChange:ge=>g(ge.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),YB.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["NSU (Nmero Sequencial nico)",e.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(Opcional - para conciliao)"})]}),e.jsx("input",{type:"text",value:y,onChange:ge=>N(ge.target.value),placeholder:"Ex: 123456789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(p==null?void 0:p.permite_parcelamento)&&e.jsxs("div",{ref:me,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero de Parcelas"}),e.jsx("select",{value:_,onChange:ge=>w(parseInt(ge.target.value)),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return De==="verde"?"border-gray-300 bg-white":De==="amarelo"?"border-yellow-400 bg-yellow-50 text-yellow-900":"border-red-400 bg-red-50 text-red-900"})()}`,children:Array.from({length:(h==null?void 0:h.max_parcelas)||p.parcelas_maximas||12},(ge,De)=>De+1).map(ge=>{var xe;const De=parseFloat(S)||ot,Le=De/ge,ct=(xe=ne[p.id])==null?void 0:xe[ge],tt=(ct==null?void 0:ct.cor)||"verde";return e.jsxs("option",{value:ge,className:tt==="verde"?"":tt==="amarelo"?"bg-yellow-100 text-yellow-900":"bg-red-100 text-red-900",children:[tt==="vermelho"?" ":tt==="amarelo"?" ":"",ge,"x de R$ ",Le.toFixed(2)," ",S?`(Total: R$ ${De.toFixed(2)})`:""]},ge)})}),S&&_>1&&e.jsxs("div",{className:`mt-2 p-3 border rounded-lg ${(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return De==="verde"?"bg-blue-50 border-blue-200":De==="amarelo"?"bg-yellow-50 border-yellow-300":"bg-red-50 border-red-300"})()}`,children:[e.jsx("p",{className:`text-sm font-medium ${(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return De==="verde"?"text-blue-800":De==="amarelo"?"text-yellow-800":"text-red-800"})()}`,children:(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return e.jsxs(e.Fragment,{children:[De==="vermelho"&&" ",De==="amarelo"&&" "," ",_,"x de R$ ",(parseFloat(S)/_).toFixed(2)]})})()}),e.jsxs("p",{className:`text-xs mt-1 ${(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return De==="verde"?"text-blue-600":De==="amarelo"?"text-yellow-700":"text-red-700"})()}`,children:["Valor total parcelado: R$ ",parseFloat(S).toFixed(2),(()=>{var Le;const ge=(Le=ne[p.id])==null?void 0:Le[_],De=(ge==null?void 0:ge.cor)||B||"verde";return De==="amarelo"?" - Requer ateno":De==="vermelho"?" - Requer justificativa":""})()]})]})]}),e.jsx("button",{onClick:it,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Adicionar Pagamento"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Resumo da Venda"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total da Venda:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",Se.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Valor Pago:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",Ne.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-600 text-lg font-semibold border-t pt-3",children:[e.jsx("span",{children:"Restante:"}),e.jsxs("span",{children:["R$ ",ot.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Formas de Pagamento"}),l.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:[" Pagamentos Registrados (",l.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.map((ge,De)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ge.forma_pagamento==="dinheiro"?" Dinheiro":ge.forma_pagamento==="pix"?" PIX":ge.forma_pagamento==="credito"?" Carto de Crdito":ge.forma_pagamento==="debito"?" Carto de Dbito":ge.forma_pagamento==="boleto"?" Boleto":ge.forma_pagamento}),e.jsxs("span",{className:"px-2 py-0.5 bg-green-200 text-green-800 text-xs rounded-full font-medium",children:["Pagamento ",De+1]})]}),ge.bandeira&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Bandeira: ",ge.bandeira]}),ge.nsu_cartao&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 font-mono",children:[" NSU: ",ge.nsu_cartao]}),ge.numero_parcelas&&ge.numero_parcelas>1&&e.jsxs("div",{className:"text-sm text-blue-600 mt-1 font-medium",children:[" Parcelado em ",ge.numero_parcelas,"x de R$ ",(parseFloat(ge.valor)/ge.numero_parcelas).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[" ",new Date(ge.data_pagamento).toLocaleString("pt-BR")]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-700 text-lg",children:["R$ ",parseFloat(ge.valor).toFixed(2)]}),ge.troco&&parseFloat(ge.troco)>0&&e.jsxs("div",{className:"text-xs text-yellow-600",children:["Troco: R$ ",parseFloat(ge.troco).toFixed(2)]})]}),e.jsx("button",{onClick:()=>Dt(ge.id),disabled:k,className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"Excluir pagamento",children:e.jsx($o,{className:"w-4 h-4"})})]})]},ge.id))})]}),o.length===0&&l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg border-2 border-dashed",children:[e.jsx(_d,{className:"w-12 h-12 mx-auto mb-2 opacity-40"}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma forma de pagamento adicionada"}),e.jsx("p",{className:"text-xs mt-1",children:"Selecione uma forma acima para comear"})]}):o.length>0?e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:" Novos Pagamentos (a confirmar)"}),e.jsx("div",{className:"space-y-3",children:o.map((ge,De)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ge.nome}),e.jsx("span",{className:"px-2 py-0.5 bg-blue-200 text-blue-800 text-xs rounded-full font-medium",children:"Novo"})]}),ge.bandeira&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Bandeira: ",ge.bandeira]}),ge.nsu_cartao&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 font-mono",children:[" NSU: ",ge.nsu_cartao]}),ge.numero_parcelas>1&&e.jsxs("div",{className:"text-sm text-blue-600 mt-1 font-medium",children:[" ",ge.numero_parcelas,"x de R$ ",(ge.valor/ge.numero_parcelas).toFixed(2)]}),ge.troco&&ge.troco>0&&e.jsxs("div",{className:"text-sm text-yellow-600 mt-1",children:[" Troco: R$ ",ge.troco.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"font-semibold text-blue-700 text-lg",children:["R$ ",ge.valor.toFixed(2)]}),e.jsx("button",{onClick:()=>gt(De),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Remover",children:e.jsx(Vt,{className:"w-5 h-5"})})]})]},De))})]}):null]}),B&&e.jsx(XB,{status:B,loading:L}),ve&&Object.keys(ne).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{children:"Parcelamento Recomendado"})]}),ae?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"Analisando opes..."})]}):e.jsxs("div",{className:"space-y-2",children:[ve.saudavel.max>0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-100 border border-green-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-green-900",children:[ve.saudavel.min===ve.saudavel.max?`${ve.saudavel.max}x`:`${ve.saudavel.min}x a ${ve.saudavel.max}x`,e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Saudvel"})]}),e.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Margem adequada, sem restries"})]})]}),ve.alerta.max>=ve.alerta.min&&ve.alerta.min>0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-100 border border-yellow-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-yellow-900",children:[ve.alerta.min===ve.alerta.max?`${ve.alerta.max}x`:`${ve.alerta.min}x a ${ve.alerta.max}x`,e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Ateno"})]}),e.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Margem prxima ao mnimo, evite se possvel"})]})]}),ve.proibido.min<=((p==null?void 0:p.parcelas_maximas)??12)&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-red-100 border border-red-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-red-900",children:[ve.proibido.min,"x ou mais",e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Exige justificativa"})]}),e.jsx("div",{className:"text-xs text-red-700 mt-1",children:"Margem crtica, justificativa obrigatria"})]})]})]})]}),(()=>{var ct,tt;let ge="verde";return p!=null&&p.permite_parcelamento&&((ct=ne[p.id])!=null&&ct[_])&&(ge=((tt=ne[p.id][_])==null?void 0:tt.cor)??"verde"),B==="vermelho"||ge==="vermelho"||M&&M.trim().length>0?e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[e.jsx(Bt,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-900",children:" Justificativa Obrigatria"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Esta venda tem margem crtica. Informe o motivo para prosseguir."})]})]}),e.jsx("textarea",{value:M,onChange:xe=>{z(xe.target.value),xe.target.value.trim().length>=10&&Q("")},placeholder:"Ex: Cliente especial, promoo de lanamento, acordo comercial...",className:`w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-red-500 resize-none ${le?"border-red-500":"border-red-300"}`,rows:3}),le&&e.jsx("p",{className:"text-xs text-red-700 font-medium mt-2",children:le}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:" Mnimo 10 caracteres"})]}):null})()]})]})}),e.jsxs("div",{className:"border-t p-6 bg-gray-50",children:[T&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:T})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:r,disabled:k,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:Ct,disabled:k||o.length===0,className:"flex items-center space-x-2 px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"})]})})]})]})]})})}const JB=async t=>(await V.post("/caixas/abrir",t)).data,ZB=async()=>(await V.get("/caixas/aberto")).data,ez=async(t={})=>(await V.get("/caixas",{params:t})).data,q2=async(t,r)=>(await V.post(`/caixas/${t}/movimentacao`,r)).data,tz=async(t,r)=>(await V.post(`/caixas/${t}/fechar`,r)).data,rz=async t=>(await V.post(`/caixas/${t}/reabrir`)).data,gP=async t=>(await V.get(`/caixas/${t}/resumo`)).data;function az({onClose:t,onSucesso:r}){const[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState({n2:0,n5:0,n10:0,n20:0,n50:0,n100:0,n200:0,moedas:0}),[u,m]=j.useState(!1),[x,h]=j.useState(!1),[b,p]=j.useState(""),f=()=>c.n200*200+c.n100*100+c.n50*50+c.n20*20+c.n10*10+c.n5*5+c.n2*2+parseFloat(c.moedas||0),v=()=>{const N=f();s(N.toFixed(2)),m(!1)},g=()=>{d({n2:0,n5:0,n10:0,n20:0,n50:0,n100:0,n200:0,moedas:0})},y=async()=>{var _,w;const N=parseFloat(a);if(!N||N<0){p("Informe um valor vlido para abertura");return}h(!0),p("");try{await JB({valor_abertura:N,conta_origem_nome:n||"Dinheiro em mos",observacoes_abertura:i}),r()}catch(S){console.error("Erro ao abrir caixa:",S),p(((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao abrir caixa")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(fa,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Abrir Caixa"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Informe o valor inicial do caixa"})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor de Abertura *"}),e.jsxs("button",{type:"button",onClick:()=>m(!u),className:"flex items-center space-x-1 px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg transition-colors",children:[e.jsx(Nl,{className:"w-4 h-4"}),e.jsx("span",{children:"Auxiliar Contagem"})]})]}),u&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 flex items-center",children:[e.jsx(Nl,{className:"w-5 h-5 mr-2 text-blue-600"}),"Auxiliar de Contagem"]}),e.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-blue-100 rounded-lg transition-colors",type:"button",children:e.jsx(Vt,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-gray-200 hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 2"}),e.jsx("input",{type:"number",min:"0",value:c.n2,onChange:N=>d({...c,n2:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-gray-600",children:["R$ ",(c.n2*2).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-purple-200 hover:border-purple-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 5"}),e.jsx("input",{type:"number",min:"0",value:c.n5,onChange:N=>d({...c,n5:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",(c.n5*5).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-red-200 hover:border-red-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 10"}),e.jsx("input",{type:"number",min:"0",value:c.n10,onChange:N=>d({...c,n10:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-red-500 focus:ring-2 focus:ring-red-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["R$ ",(c.n10*10).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-yellow-200 hover:border-yellow-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 20"}),e.jsx("input",{type:"number",min:"0",value:c.n20,onChange:N=>d({...c,n20:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["R$ ",(c.n20*20).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-blue-200 hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 50"}),e.jsx("input",{type:"number",min:"0",value:c.n50,onChange:N=>d({...c,n50:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",(c.n50*50).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-green-200 hover:border-green-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 100"}),e.jsx("input",{type:"number",min:"0",value:c.n100,onChange:N=>d({...c,n100:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-green-500 focus:ring-2 focus:ring-green-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",(c.n100*100).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-orange-200 hover:border-orange-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 200"}),e.jsx("input",{type:"number",min:"0",value:c.n200,onChange:N=>d({...c,n200:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["R$ ",(c.n200*200).toFixed(2)]})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-blue-300",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-amber-200 hover:border-amber-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:" Moedas"})}),e.jsxs("span",{className:"text-lg font-bold text-amber-600",children:["R$ ",parseFloat(c.moedas||0).toFixed(2)]})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.moedas,onChange:N=>d({...c,moedas:parseFloat(N.target.value)||0}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-200",placeholder:"0.00"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 mb-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"TOTAL CONTADO"}),e.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$ ",f().toFixed(2)]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 px-4 py-3 border-2 border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-semibold transition-colors",children:" Limpar"}),e.jsx("button",{type:"button",onClick:v,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold shadow-md transition-colors",children:" Aplicar"})]})]}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:a,onChange:N=>s(N.target.value),placeholder:"0,00",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg font-semibold",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conta de Origem"}),e.jsxs("select",{value:n,onChange:N=>o(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Dinheiro em mos",children:"Dinheiro em mos"}),e.jsx("option",{value:"Caixa geral",children:"Caixa geral"}),e.jsx("option",{value:"Banco",children:"Banco"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:i,onChange:N=>l(N.target.value),rows:3,placeholder:"Ex: Troco do dia anterior...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t p-6 bg-gray-50",children:[b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:t,disabled:x,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:y,disabled:x||!a,className:"px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Abrindo...":"Abrir Caixa"})]})]})]})})}function sz({caixaId:t,onClose:r,onSucesso:a}){const[s,n]=j.useState(""),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!1),[m,x]=j.useState(""),h=async()=>{var p,f;const b=parseFloat(s);if(!b||b<=0){x("Informe um valor vlido");return}u(!0);try{await q2(t,{tipo:"suprimento",valor:b,forma_pagamento:"Dinheiro",conta_origem_nome:o||"No informado",descricao:l}),a()}catch(v){x(((f=(p=v.response)==null?void 0:p.data)==null?void 0:f.detail)||"Erro ao adicionar suprimento")}finally{u(!1)}};return e.jsx(V2,{titulo:"Suprimento para o caixa",icone:sa,corIcone:"green",onClose:r,erro:m,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conta de origem*"}),e.jsxs("select",{value:o,onChange:b=>i(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Dinheiro em mos",children:"Dinheiro em mos"}),e.jsx("option",{value:"Caixa geral",children:"Caixa geral"}),e.jsx("option",{value:"Banco",children:"Banco"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:s,onChange:b=>n(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio*"}),e.jsx("textarea",{value:l,onChange:b=>c(b.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Motivo do suprimento..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:r,disabled:d,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:h,disabled:d,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:d?"Salvando...":"Salvar"})]})]})})}function nz({caixaId:t,saldoAtual:r,onClose:a,onSucesso:s}){const[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState(""),b=async()=>{var f,v;const p=parseFloat(n);if(!p||p<=0){h("Informe um valor vlido");return}m(!0);try{await q2(t,{tipo:"sangria",valor:p,forma_pagamento:"Dinheiro",conta_destino_nome:i||"No informado",descricao:c}),s()}catch(g){h(((v=(f=g.response)==null?void 0:f.data)==null?void 0:v.detail)||"Erro ao adicionar sangria")}finally{m(!1)}};return e.jsx(V2,{titulo:"Sangria no caixa",icone:Ca,corIcone:"orange",onClose:a,erro:x,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Em caixa:"})," R$ ",r.toFixed(2)]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor da Sangria*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:n,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a conta de destino*"}),e.jsxs("select",{value:i,onChange:p=>l(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Cofre",children:"Cofre"}),e.jsx("option",{value:"Banco",children:"Banco"}),e.jsx("option",{value:"Outro caixa",children:"Outro caixa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),e.jsx("textarea",{value:c,onChange:p=>d(p.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Motivo da sangria..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:a,disabled:u,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:b,disabled:u,className:"flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:u?"Salvando...":"Salvar"})]})]})})}function oz({caixaId:t,onClose:r,onSucesso:a}){const[s,n]=j.useState(""),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState("Dinheiro"),[m,x]=j.useState(""),[h,b]=j.useState(""),[p,f]=j.useState(!1),[v,g]=j.useState(""),y=["gua e Luz","Aluguel","Telefone/Internet","Material de Limpeza","Material de Escritrio","Manuteno","Outros"],N=async()=>{var w,S;const _=parseFloat(l);if(!_||_<=0){g("Informe um valor vlido");return}if(!s){g("Selecione uma categoria");return}f(!0);try{await q2(t,{tipo:"despesa",valor:_,categoria:s,descricao:o,forma_pagamento:d,fornecedor_nome:m,documento:h}),a()}catch(C){g(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao adicionar despesa")}finally{f(!1)}};return e.jsx(V2,{titulo:"Despesa no caixa",icone:qc,corIcone:"red",onClose:r,erro:v,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria*"}),e.jsxs("select",{value:s,onChange:_=>n(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),y.map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio*"}),e.jsx("input",{type:"text",value:o,onChange:_=>i(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Conta de luz - Janeiro"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de pagamento*"}),e.jsxs("select",{value:d,onChange:_=>u(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"PIX",children:"PIX"}),e.jsx("option",{value:"Carto de Crdito",children:"Carto de Crdito"}),e.jsx("option",{value:"Carto de Dbito",children:"Carto de Dbito"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:l,onChange:_=>c(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor"}),e.jsx("input",{type:"text",value:m,onChange:_=>x(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documento / NF"}),e.jsx("input",{type:"text",value:h,onChange:_=>b(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:r,disabled:p,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:N,disabled:p,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:p?"Salvando...":"Salvar"})]})]})})}function V2({titulo:t,icone:r,corIcone:a,children:s,onClose:n,erro:o}){const i={green:"bg-green-100 text-green-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 ${i[a]} rounded-full flex items-center justify-center`,children:e.jsx(r,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[o&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:o})]}),s]})]})})}function iz({caixaId:t,onClose:r,onSuccess:a}){const[s,n]=j.useState(null),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!0),[m,x]=j.useState(!1),[h,b]=j.useState(!1),[p,f]=j.useState({n100:0,n50:0,n20:0,n10:0,n5:0,n2:0,moedas:0});j.useEffect(()=>{v()},[t]);const v=async()=>{try{const C=await gP(t);console.log(" Resumo do caixa recebido:",C),console.log(" vendas_por_forma_pagamento:",C.vendas_por_forma_pagamento),n(C),i(C.totais.saldo_atual.toFixed(2))}catch(C){console.error("Erro ao carregar resumo:",C),alert("Erro ao carregar dados do caixa")}finally{u(!1)}},g=()=>!s||!o?0:parseFloat(o)-s.totais.saldo_atual,y=()=>p.n100*100+p.n50*50+p.n20*20+p.n10*10+p.n5*5+p.n2*2+parseFloat(p.moedas||0),N=()=>{const C=y();i(C.toFixed(2)),b(!1)},_=()=>{f({n100:0,n50:0,n20:0,n10:0,n5:0,n2:0,moedas:0})},w=async()=>{var k,F;if(!o){alert("Informe o valor contado no caixa");return}const C=g();if(!(Math.abs(C)>.01&&!window.confirm(`Diferena de R$ ${Math.abs(C).toFixed(2)} ${C>0?"a mais":"a menos"}

Deseja continuar com o fechamento?`))){x(!0);try{await tz(t,{valor_informado:parseFloat(o),observacoes_fechamento:l||null}),alert("Caixa fechado com sucesso!"),a(),r()}catch(q){console.error("Erro ao fechar caixa:",q),alert(((F=(k=q.response)==null?void 0:k.data)==null?void 0:F.detail)||"Erro ao fechar caixa")}finally{x(!1)}}};if(d)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})});if(!s)return null;const S=g();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-red-600 to-orange-600 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[e.jsx(qc,{className:"w-7 h-7 mr-3"}),"Fechar Caixa"]}),e.jsxs("p",{className:"text-red-100 mt-1",children:["Caixa #",s.caixa.numero_caixa," - ",s.caixa.usuario_nome]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 border-2 border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(Nl,{className:"w-5 h-5 mr-2 text-gray-700"}),"Resumo do Movimento"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Valor de Abertura"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.caixa.valor_abertura.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(s.caixa.data_abertura).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-700 mb-1",children:[e.jsx(qc,{className:"w-4 h-4 mr-1"}),"Entradas"]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+ R$ ",s.totais.vendas.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Movimento de entrada"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-blue-700 mb-1",children:[e.jsx(sa,{className:"w-4 h-4 mr-1"}),"Suprimentos"]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["+ R$ ",s.totais.suprimentos.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-orange-700 mb-1",children:[e.jsx(Ca,{className:"w-4 h-4 mr-1"}),"Sangrias"]}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["- R$ ",s.totais.sangrias.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-red-700 mb-1",children:[e.jsx(fa,{className:"w-4 h-4 mr-1"}),"Despesas"]}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["- R$ ",s.totais.despesas.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Valor Contado no Caixa *"}),e.jsxs("button",{type:"button",onClick:()=>b(!h),className:"flex items-center space-x-1 px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border border-blue-200",title:"Auxiliar na contagem de notas",children:[e.jsx(Nl,{className:"w-4 h-4"}),e.jsx("span",{children:"Auxiliar Contagem"})]})]}),h&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 flex items-center",children:[e.jsx(Nl,{className:"w-5 h-5 mr-2 text-blue-600"}),"Auxiliar de Contagem"]}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(Vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-gray-200 hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 2"}),e.jsx("input",{type:"number",min:"0",value:p.n2,onChange:C=>f({...p,n2:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-gray-600",children:["R$ ",(p.n2*2).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-purple-200 hover:border-purple-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 5"}),e.jsx("input",{type:"number",min:"0",value:p.n5,onChange:C=>f({...p,n5:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",(p.n5*5).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-red-200 hover:border-red-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 10"}),e.jsx("input",{type:"number",min:"0",value:p.n10,onChange:C=>f({...p,n10:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-red-500 focus:ring-2 focus:ring-red-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["R$ ",(p.n10*10).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-yellow-200 hover:border-yellow-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 20"}),e.jsx("input",{type:"number",min:"0",value:p.n20,onChange:C=>f({...p,n20:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["R$ ",(p.n20*20).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-blue-200 hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 50"}),e.jsx("input",{type:"number",min:"0",value:p.n50,onChange:C=>f({...p,n50:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",(p.n50*50).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-green-200 hover:border-green-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 100"}),e.jsx("input",{type:"number",min:"0",value:p.n100,onChange:C=>f({...p,n100:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-green-500 focus:ring-2 focus:ring-green-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",(p.n100*100).toFixed(2)]})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-blue-300",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-amber-200 hover:border-amber-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:" Moedas"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:p.moedas,onChange:C=>f({...p,moedas:parseFloat(C.target.value)||0}),className:"w-32 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-200",placeholder:"0.00"})]}),e.jsxs("span",{className:"text-lg font-bold text-amber-600",children:["R$ ",(p.moedas||0).toFixed(2)]})]})})}),e.jsxs("div",{className:"mt-5 pt-5 border-t-2 border-blue-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 mb-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"TOTAL CONTADO"}),e.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$ ",y().toFixed(2)]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:_,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold transition-colors",children:" Limpar"}),e.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-bold shadow-md transition-all",children:" Aplicar"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(fa,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-3 text-lg font-semibold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",autoFocus:!0})]}),o&&Math.abs(S)>.01&&e.jsx("div",{className:`mt-3 p-4 rounded-lg border-2 ${S>0?"bg-blue-50 border-blue-300":"bg-yellow-50 border-yellow-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:[S>0?"Sobra":"Falta",":"]}),e.jsxs("span",{className:`text-xl font-bold ${S>0?"text-blue-600":"text-yellow-700"}`,children:["R$ ",Math.abs(S).toFixed(2)]})]})}),o&&Math.abs(S)<=.01&&e.jsx("div",{className:"mt-3 p-4 rounded-lg border-2 bg-green-50 border-green-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-700 font-semibold",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{children:"Caixa conferido - Valores corretos!"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:l,onChange:C=>c(C.target.value),placeholder:"Adicione observaes sobre o fechamento...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),s.vendas_por_forma_pagamento&&Object.keys(s.vendas_por_forma_pagamento).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center",children:[e.jsx(qc,{className:"w-4 h-4 mr-1.5 text-blue-600"}),"Vendas por Forma de Pagamento (Informativo)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s.vendas_por_forma_pagamento).map(([C,k])=>{const F=C==="Dinheiro";return e.jsx("div",{className:`bg-white rounded-lg p-3 border ${F?"border-green-300 bg-green-50":"border-gray-200"} hover:shadow-sm transition-shadow cursor-pointer`,title:"Clique para ver detalhes das vendas",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C==="Dinheiro"?"bg-green-500":C==="PIX"?"bg-purple-500":C.includes("Dbito")?"bg-blue-500":C.includes("Crdito")?"bg-orange-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:C}),F&&e.jsx("span",{className:"text-xs bg-green-600 text-white px-1.5 py-0.5 rounded",children:"CAIXA"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[k.quantidade," venda",k.quantidade!==1?"s":""]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["R$ ",k.total.toFixed(2)]})})]})},C)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 text-xs text-gray-600",children:[" ",e.jsx("strong",{children:"Dica:"})," Apenas ",e.jsx("strong",{children:"Dinheiro"})," afeta o saldo fsico do caixa. Demais formas vo para banco/financeiro."]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,disabled:m,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{onClick:w,disabled:m||!o,className:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white rounded-lg font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Fechando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qc,{className:"w-5 h-5"}),e.jsx("span",{children:"Fechar Caixa"})]})})]})]})]})})}function lz({caixaId:t,onClose:r,onSucesso:a}){var L;const[s,n]=j.useState(1),[o,i]=j.useState([]),[l,c]=j.useState(null),[d,u]=j.useState({}),[m,x]=j.useState({}),[h,b]=j.useState(""),[p,f]=j.useState(!1),[v,g]=j.useState(!1),[y,N]=j.useState(""),[_,w]=j.useState({}),[S,C]=j.useState({}),[k,F]=j.useState({}),[q,A]=j.useState({busca:"",data_inicio:"",data_fim:"",status:"finalizada"});j.useEffect(()=>{T()},[q]);const T=async()=>{g(!0),N("");try{const E={per_page:50,...q},M=await V.get("/vendas",{params:E});i(M.data.vendas||[])}catch(E){console.error("Erro ao buscar vendas:",E),N("Erro ao carregar vendas")}finally{g(!1)}},U=async E=>{var M,z;g(!0),N("");try{const le=await V.get(`/vendas/${E.id}`);c(le.data);const Q={};le.data.itens.forEach(ne=>{Q[ne.id]=ne.quantidade}),x(Q),n(2)}catch(le){console.error("Erro ao buscar venda:",le),N(((z=(M=le.response)==null?void 0:M.data)==null?void 0:z.detail)||"Erro ao carregar detalhes da venda")}finally{g(!1)}},K=E=>{const M=d[E];u(z=>({...z,[E]:!z[E]})),M&&(w(z=>{const le={...z};return delete le[E],le}),C(z=>{const le={...z};return delete le[E],le}),F(z=>{const le={...z};return delete le[E],le}))},I=(E,M)=>{const le=l.itens.find(ne=>ne.id===E).quantidade,Q=Math.min(Math.max(0,parseFloat(M)||0),le);x(ne=>({...ne,[E]:Q}))},Y=E=>E.tipo_produto==="KIT"&&E.composicao_kit&&E.composicao_kit.length>0,D=(E,M)=>{if(w(z=>({...z,[E]:M})),M==="componentes"){const z=l.itens.find(le=>le.id===E);if(z&&z.composicao_kit){const le={},Q={};z.composicao_kit.forEach((ne,re)=>{le[re]=!1,Q[re]=ne.quantidade*z.quantidade}),C(ne=>({...ne,[E]:le})),F(ne=>({...ne,[E]:Q}))}}},W=(E,M)=>{C(z=>{var le;return{...z,[E]:{...z[E]||{},[M]:!((le=z[E])!=null&&le[M])}}})},R=(E,M,z)=>{const le=l.itens.find(ae=>ae.id===E),ne=le.composicao_kit[M].quantidade*le.quantidade,re=Math.min(Math.max(0,parseFloat(z)||0),ne);F(ae=>({...ae,[E]:{...ae[E]||{},[M]:re}}))},B=async()=>{var le,Q;if(Object.keys(d).filter(ne=>d[ne]).filter(ne=>{const re=l.itens.find(ae=>ae.id===parseInt(ne));return Y(re)&&!_[ne]}).length>0){N("Para itens KIT, voc deve escolher entre devolver o KIT inteiro ou selecionar componentes");return}const M=[];if(Object.keys(d).filter(ne=>d[ne]).forEach(ne=>{const re=parseInt(ne),ae=l.itens.find(ie=>ie.id===re);if(Y(ae)){const ie=_[ne];if(ie==="kit_inteiro")M.push({item_id:re,quantidade:m[ne]});else if(ie==="componentes"){const ve=S[ne]||{},_e=k[ne]||{},me=Object.keys(ve).filter(Se=>ve[Se]).map(Se=>parseInt(Se));if(me.length===0){N(`Voc deve selecionar pelo menos um componente do KIT "${ae.produto_nome}"`);return}me.forEach(Se=>{const Ne=ae.composicao_kit[Se],ot=_e[Se]||0;if(ot<=0){N(`Quantidade do componente "${Ne.produto_nome}" deve ser maior que zero`);return}M.push({produto_id:Ne.produto_id,quantidade:ot,preco_unitario:ae.preco_unitario/ae.composicao_kit.reduce((Ke,lt)=>Ke+lt.quantidade,0)*Ne.quantidade,is_componente_kit:!0,kit_item_id:re})})}}else M.push({item_id:re,quantidade:m[ne]})}),M.length===0){N("Selecione pelo menos um item para devoluo");return}if(M.some(ne=>ne.quantidade<=0)){N("Todas as quantidades devem ser maiores que zero");return}if(!h.trim()){N("Informe o motivo da devoluo");return}g(!0),N("");try{await V.post(`/vendas/${l.id}/devolucao`,{caixa_id:t,itens:M,motivo:h,gerar_credito:p}),alert("Devoluo registrada com sucesso!"),a()}catch(ne){console.error("Erro ao registrar devoluo:",ne),N(((Q=(le=ne.response)==null?void 0:le.data)==null?void 0:Q.detail)||"Erro ao registrar devoluo")}finally{g(!1)}},O=()=>{if(!l)return 0;let E=0;return Object.keys(d).filter(M=>d[M]).forEach(M=>{const z=l.itens.find(le=>le.id===parseInt(M));if(Y(z)){const le=_[M];if(le==="kit_inteiro"){const Q=m[M]||0;E+=z.preco_unitario*Q}else if(le==="componentes"){const Q=S[M]||{},ne=k[M]||{},re=z.composicao_kit.reduce((ae,ie)=>ae+ie.quantidade,0);Object.keys(Q).filter(ae=>Q[ae]).forEach(ae=>{const ie=z.composicao_kit[ae],ve=ne[ae]||0,_e=z.preco_unitario/re*ie.quantidade,me=ve/ie.quantidade;E+=_e*me})}}else{const le=m[M]||0;E+=z.preco_unitario*le}}),E};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(nP,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Devoluo"}),e.jsx("p",{className:"text-sm text-gray-500",children:s===1?"Selecione a venda":"Selecionar itens para devoluo"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsx("input",{type:"text",value:q.busca,onChange:E=>A({...q,busca:E.target.value}),placeholder:"Nmero da venda, cliente...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:q.data_inicio,onChange:E=>A({...q,data_inicio:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:q.data_fim,onChange:E=>A({...q,data_fim:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})}),v?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando vendas..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Bt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma venda encontrada"})]}):e.jsx("div",{className:"space-y-2",children:o.map(E=>{var M;return e.jsx("button",{onClick:()=>U(E),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:["Venda #",E.numero_venda||E.id]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Cliente: ",((M=E.cliente)==null?void 0:M.nome)||"Consumidor Final"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:E.data_criacao?new Date(E.data_criacao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data no disponvel"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["R$ ",E.total.toFixed(2)]}),e.jsx("div",{className:`text-xs mt-1 px-2 py-1 rounded ${E.status==="finalizada"?"bg-green-100 text-green-800":E.status==="baixa_parcial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:E.status==="finalizada"?"Finalizada":E.status==="baixa_parcial"?"Parcial":"Aberta"})]})]})},E.id)})}),y&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:y})]})]}),s===2&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["Venda #",l.numero_venda||l.id]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{className:"ml-2 font-medium",children:l.data_criacao?new Date(l.data_criacao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data no disponvel"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cliente:"}),e.jsx("span",{className:"ml-2 font-medium",children:((L=l.cliente)==null?void 0:L.nome)||"Consumidor Final"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"ml-2 font-medium text-green-600",children:["R$ ",l.total.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Itens da Venda"}),e.jsx("div",{className:"space-y-2",children:l.itens.map(E=>{const M=Y(E),z=_[E.id];return e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${d[E.id]?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"checkbox",checked:d[E.id]||!1,onChange:()=>K(E.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:E.produto_nome}),M&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded",children:[e.jsx(tP,{className:"w-3 h-3"}),"KIT"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Preo unitrio: R$ ",E.preco_unitario.toFixed(2)," | Qtd vendida: ",E.quantidade]}),d[E.id]&&M&&e.jsxs("div",{className:"mt-4 bg-white border-2 border-purple-300 rounded-lg p-4",children:[e.jsxs("div",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5 text-purple-600"}),"Como deseja devolver este KIT?"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:`modo-kit-${E.id}`,checked:z==="kit_inteiro",onChange:()=>D(E.id,"kit_inteiro"),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 group-hover:text-blue-700 transition-colors",children:" Devolver KIT Inteiro"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Devolve o KIT completo como uma unidade"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:`modo-kit-${E.id}`,checked:z==="componentes",onChange:()=>D(E.id,"componentes"),className:"mt-1 w-4 h-4 text-purple-600 focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 group-hover:text-purple-700 transition-colors",children:" Selecionar Componentes"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Escolha quais componentes do KIT devolver"})]})]})]})]}),d[E.id]&&!M&&e.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantidade a devolver:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:E.quantidade,value:m[E.id],onChange:le=>I(E.id,le.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Subtotal: R$ ",(E.preco_unitario*(m[E.id]||0)).toFixed(2)]})]}),d[E.id]&&M&&z==="kit_inteiro"&&e.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantidade de KITs a devolver:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:E.quantidade,value:m[E.id],onChange:le=>I(E.id,le.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Subtotal: R$ ",(E.preco_unitario*(m[E.id]||0)).toFixed(2)]})]}),d[E.id]&&M&&z==="componentes"&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-3",children:"Selecione os componentes a devolver:"}),e.jsx("div",{className:"space-y-3",children:E.composicao_kit.map((le,Q)=>{var ae,ie;const ne=(ae=S[E.id])==null?void 0:ae[Q],re=le.quantidade*E.quantidade;return e.jsx("div",{className:`border rounded-lg p-3 transition-colors ${ne?"border-purple-500 bg-white":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:ne||!1,onChange:()=>W(E.id,Q),className:"mt-1 w-4 h-4 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:le.produto_nome})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Qtd no KIT: ",le.quantidade," | Qtd total disponvel: ",re]}),ne&&e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Quantidade:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:re,value:((ie=k[E.id])==null?void 0:ie[Q])||0,onChange:ve=>R(E.id,Q,ve.target.value),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"})]})]})]})},Q)})})]})]})]})},E.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Devoluo *"}),e.jsx("textarea",{value:h,onChange:E=>b(E.target.value),placeholder:"Descreva o motivo da devoluo...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-5",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-800 mb-3",children:" Tipo de Devoluo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",checked:!p,onChange:()=>f(!1),className:"mt-1 w-5 h-5 text-green-600 focus:ring-2 focus:ring-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 group-hover:text-green-700 transition-colors",children:" Devolver em Dinheiro"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"O valor ser devolvido em dinheiro e registrado como sada de caixa"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",checked:p,onChange:()=>f(!0),className:"mt-1 w-5 h-5 text-purple-600 focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 group-hover:text-purple-700 transition-colors",children:" Gerar Crdito para o Cliente"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"O valor ser convertido em crdito para uso em futuras compras (sem movimentao de caixa)"})]})]})]}),p&&!(l!=null&&l.cliente_id)&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-300 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ateno:"})," Esta venda no possui cliente vinculado. Para gerar crdito,  necessrio ter um cliente cadastrado."]})]})})]}),e.jsx("div",{className:`border-2 rounded-lg p-4 ${p?"bg-purple-50 border-purple-300":"bg-orange-50 border-orange-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:p?"Crdito a Gerar:":"Total da Devoluo:"}),p&&(l==null?void 0:l.cliente)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Cliente: ",e.jsx("strong",{children:l.cliente.nome})]})]}),e.jsxs("span",{className:`text-2xl font-bold ${p?"text-purple-600":"text-orange-600"}`,children:["R$ ",O().toFixed(2)]})]})}),y&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:y})]})]})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s===1?r:()=>{n(1),c(null),u({}),x({}),b(""),N("")},disabled:v,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:s===1?"Cancelar":"Voltar"}),s===2&&e.jsx("button",{onClick:B,disabled:v||Object.values(d).filter(Boolean).length===0,className:"flex items-center gap-2 px-8 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(eP,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirmar Devoluo"})]})})]})})]})})}function cz({caixaId:t,onClose:r}){const[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{c()},[t]);const c=async()=>{try{l(!0);const m=await V.get(`/caixas/${t}/movimentacoes`);s(m.data.movimentacoes),o(m.data.caixa)}catch(m){console.error("Erro ao carregar movimentaes:",m),ze.error("Erro ao carregar movimentaes do caixa")}finally{l(!1)}},d=m=>{const x=new Date(m);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(x)},u=m=>({venda:"Venda",suprimento:"Suprimento",sangria:"Sangria",despesa:"Despesa",devolucao:"Devoluo",transferencia:"Transferncia"})[m]||m;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:" Extrato do Caixa"}),n&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Caixa #",n.id," - ",n.nome," | Status: ",n.status]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:c,className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Atualizar",children:e.jsx(Gr,{className:`w-5 h-5 text-gray-600 ${i?"animate-spin":""}`})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma movimentao registrada"})]}):e.jsx("div",{className:"space-y-3",children:a.map(m=>e.jsx("div",{className:`p-4 rounded-lg border-2 ${m.natureza==="entrada"?"bg-green-50 border-green-200":m.natureza==="saida"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"text-3xl",children:m.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:u(m.tipo)}),m.forma_pagamento&&e.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded border",children:m.forma_pagamento})]}),m.descricao&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:m.descricao}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-600",children:[e.jsxs("span",{children:[" ",d(m.data_movimento)]}),e.jsxs("span",{children:[" ",m.usuario_nome]}),m.venda_id&&e.jsxs("span",{children:[" Venda #",m.venda_numero||m.venda_id]}),m.documento&&e.jsxs("span",{children:[" ",m.documento]})]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-2xl font-bold ${m.natureza==="entrada"?"text-green-600":m.natureza==="saida"?"text-red-600":"text-gray-600"}`,children:[m.natureza==="entrada"&&"+",m.natureza==="saida"&&"-","R$ ",m.valor.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:m.natureza==="entrada"?e.jsxs("span",{className:"flex items-center gap-1 justify-end",children:[e.jsx(sa,{className:"w-3 h-3"})," Entrada"]}):m.natureza==="saida"?e.jsxs("span",{className:"flex items-center gap-1 justify-end",children:[e.jsx(Ca,{className:"w-3 h-3"})," Sada"]}):"Neutro"})]})]})},m.id))})}),e.jsx("div",{className:"border-t p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[a.length," movimentao(es) encontrada(s)"]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Fechar"})]})})]})})}function dz({onAbrirCaixa:t}){var y,N,_;const[r,a]=j.useState(null),[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState(!0),[m,x]=j.useState(!1),[h,b]=j.useState(!1);j.useEffect(()=>{f();const w=setInterval(f,3e4);return()=>clearInterval(w)},[]),j.useEffect(()=>{const w=()=>{x(!1)};if(m)return document.addEventListener("mouseup",w),()=>document.removeEventListener("mouseup",w)},[m]);const p=()=>{i(!1),b(!1),x(!1)},f=async()=>{try{const w=await ZB();if(a(w),w){const S=await gP(w.id);n(S)}}catch(w){console.error("Erro ao carregar caixa:",w)}finally{u(!1)}},v=()=>{c(null),f()},g=async()=>{await t(),setTimeout(f,500)};return d?e.jsx("div",{className:"px-4 py-2 bg-gray-100 rounded-lg",children:e.jsx("div",{className:"animate-pulse h-10 bg-gray-200 rounded"})}):r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center space-x-3 px-4 py-2 bg-white border-2 border-green-500 rounded-lg hover:bg-green-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Caixa #",r.numero_caixa]})]}),e.jsx(ql,{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:p}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Caixa #",r.numero_caixa]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:r.usuario_nome})]}),e.jsx("button",{onClick:p,className:"p-1 hover:bg-white rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Vl,{className:"w-4 h-4 mr-1"}),"Aberto em ",new Date(r.data_abertura).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Saldo Atual"}),e.jsx("div",{className:`text-sm font-bold ${m?"text-green-600":"text-gray-400"}`,children:m?`R$ ${((N=(y=s==null?void 0:s.totais)==null?void 0:y.saldo_atual)==null?void 0:N.toFixed(2))||"0,00"}`:""})]}),e.jsx("button",{onMouseDown:()=>x(!0),className:"p-1 hover:bg-blue-100 rounded transition-colors",children:m?e.jsx(Ym,{className:"w-4 h-4 text-blue-600"}):e.jsx(gh,{className:"w-4 h-4 text-gray-400"})})]})]})]}),s&&e.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"Resumo do Movimento"}),e.jsx("button",{onClick:()=>b(!h),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:h?e.jsx(Ym,{className:"w-4 h-4 text-blue-600"}):e.jsx(gh,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Abertura"}),e.jsx("div",{className:`font-semibold ${h?"text-gray-900":"text-gray-300"}`,children:h?`R$ ${r.valor_abertura.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Entradas"}),e.jsx("div",{className:`font-semibold ${h?"text-green-600":"text-green-300"}`,children:h?`+ R$ ${s.totais.vendas.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Suprimentos"}),e.jsx("div",{className:`font-semibold ${h?"text-green-600":"text-green-300"}`,children:h?`+ R$ ${s.totais.suprimentos.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Sangrias"}),e.jsx("div",{className:`font-semibold ${h?"text-orange-600":"text-orange-300"}`,children:h?`- R$ ${s.totais.sangrias.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Despesas"}),e.jsx("div",{className:`font-semibold ${h?"text-red-600":"text-red-300"}`,children:h?`- R$ ${s.totais.despesas.toFixed(2)}`:""})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{c("suprimento"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-green-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(sa,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Suprimento"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Adicionar dinheiro ao caixa"})]})]}),e.jsxs("button",{onClick:()=>{c("sangria"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-orange-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Ca,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Sangria"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Retirar dinheiro do caixa"})]})]}),e.jsxs("button",{onClick:()=>{c("despesa"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-red-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(qc,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Despesa"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Registrar pagamento de despesa"})]})]}),e.jsxs("button",{onClick:()=>{c("devolucao"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-purple-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(nP,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Devoluo"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Estornar venda e devolver ao estoque"})]})]}),e.jsxs("button",{onClick:()=>{c("movimentacoes"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-blue-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(V9,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Extrato do Caixa"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ver todas as movimentaes"})]})]})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsx("button",{onClick:()=>{c("fechar"),i(!1)},className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Fechar Caixa"})})]})]})]}),l==="suprimento"&&e.jsx(sz,{caixaId:r.id,onClose:()=>c(null),onSucesso:v}),l==="sangria"&&e.jsx(nz,{caixaId:r.id,saldoAtual:((_=s==null?void 0:s.totais)==null?void 0:_.saldo_atual)||0,onClose:()=>c(null),onSucesso:v}),l==="despesa"&&e.jsx(oz,{caixaId:r.id,onClose:()=>c(null),onSucesso:v}),l==="fechar"&&e.jsx(iz,{caixaId:r.id,onClose:()=>c(null),onSuccess:()=>{c(null),f()}}),l==="devolucao"&&e.jsx(lz,{caixaId:r.id,onClose:()=>c(null),onSucesso:v}),l==="movimentacoes"&&e.jsx(cz,{caixaId:r.id,onClose:()=>c(null)})]}):e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(fa,{className:"w-5 h-5"}),e.jsx("span",{children:"Abrir Caixa"})]})}function uz({venda:t,onClose:r}){var s,n;const a=()=>{window.print()};return t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors print:hidden",children:[e.jsx(Ky,{className:"w-5 h-5"}),e.jsx("span",{children:"Imprimir Cupom"})]}),e.jsx("style",{children:`
        @media print {
          /* Esconder tudo exceto o cupom */
          body * {
            visibility: hidden;
          }
          .cupom-impressao, .cupom-impressao * {
            visibility: visible;
          }
          .cupom-impressao {
            position: absolute;
            left: 0;
            top: 0;
            width: 80mm;
            margin: 0;
            padding: 0;
          }
          
          /* Reset de margens para impresso */
          @page {
            size: 80mm auto;
            margin: 5mm;
          }
        }
      `}),e.jsxs("div",{className:"cupom-impressao hidden print:block",style:{width:"80mm",fontFamily:"monospace"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:"PET SHOP PRO"}),e.jsx("div",{style:{fontSize:"12px"},children:"Central de Gest\\u00e3o"}),e.jsx("div",{style:{fontSize:"10px",marginTop:"5px"},children:new Date().toLocaleString("pt-BR")})]}),e.jsxs("div",{style:{borderTop:"1px dashed #000",marginBottom:"10px",paddingTop:"10px"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},children:["VENDA #",t.numero_venda||t.id]}),e.jsxs("div",{style:{fontSize:"11px"},children:[e.jsxs("div",{children:["Data: ",t.data_venda?new Date(t.data_venda).toLocaleString("pt-BR"):new Date().toLocaleString("pt-BR")]}),t.cliente&&e.jsxs("div",{children:["Cliente: ",t.cliente.nome||t.cliente_nome]}),t.pet&&e.jsxs("div",{children:["Pet: ",t.pet.nome]})]})]}),e.jsx("div",{style:{borderTop:"1px dashed #000",marginBottom:"10px",paddingTop:"10px"},children:e.jsxs("table",{style:{width:"100%",fontSize:"10px",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #000"},children:[e.jsx("th",{style:{textAlign:"left",paddingBottom:"5px"},children:"Item"}),e.jsx("th",{style:{textAlign:"center",paddingBottom:"5px"},children:"Qtd"}),e.jsx("th",{style:{textAlign:"right",paddingBottom:"5px"},children:"Valor"})]})}),e.jsx("tbody",{children:(s=t.itens)==null?void 0:s.map((o,i)=>e.jsxs("tr",{children:[e.jsxs("td",{style:{paddingTop:"5px",paddingBottom:"5px"},children:[o.produto_nome,e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"9px",color:"#666"},children:[o.quantidade," x R$ ",o.preco_unitario.toFixed(2),o.desconto_valor>0&&e.jsxs("span",{style:{color:"#ff8c00"},children:[" ","com R$ ",o.desconto_valor.toFixed(2)," de desconto"]})]})]}),e.jsx("td",{style:{textAlign:"center",paddingTop:"5px",paddingBottom:"5px"},children:o.quantidade}),e.jsxs("td",{style:{textAlign:"right",paddingTop:"5px",paddingBottom:"5px"},children:["R$ ",o.subtotal.toFixed(2)]})]},i))})]})}),e.jsxs("div",{style:{borderTop:"1px dashed #000",paddingTop:"10px",fontSize:"11px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Total bruto:"}),e.jsxs("span",{children:["R$ ",(t.subtotal+t.desconto_valor).toFixed(2)]})]}),t.desconto_valor>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#ff8c00"},children:[e.jsxs("span",{children:[(t.desconto_valor/(t.subtotal+t.desconto_valor)*100).toFixed(2),"% de desconto:"]}),e.jsxs("span",{children:["R$ ",t.desconto_valor.toFixed(2)]})]}),t.tem_entrega&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsxs("span",{children:["R$ ",(((n=t.entrega)==null?void 0:n.taxa_entrega_total)||0).toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #000",fontSize:"14px",fontWeight:"bold"},children:[e.jsx("span",{children:"TOTAL:"}),e.jsxs("span",{children:["R$ ",t.total.toFixed(2)]})]})]}),t.pagamentos&&t.pagamentos.length>0&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"PAGAMENTOS:"}),t.pagamentos.map((o,i)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"3px"},children:[e.jsx("span",{children:o.forma_pagamento}),e.jsxs("span",{children:["R$ ",o.valor.toFixed(2)]})]},i))]}),t.tem_entrega&&t.entrega&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"ENTREGA:"}),e.jsx("div",{children:t.entrega.endereco_completo}),t.entrega.observacoes_entrega&&e.jsxs("div",{style:{marginTop:"3px",fontStyle:"italic"},children:["Obs: ",t.entrega.observacoes_entrega]})]}),t.observacoes&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"OBSERVA\\u00c7\\u00d5ES:"}),e.jsx("div",{children:t.observacoes})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"15px",paddingTop:"10px",borderTop:"1px dashed #000",fontSize:"10px"},children:[e.jsx("div",{children:"Obrigado pela preferencia!"}),e.jsx("div",{style:{marginTop:"5px"},children:"Volte sempre!"})]})]})]}):null}function mz({clienteId:t,clienteNome:r,onClose:a,onSucesso:s}){const[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState(!0),[u,m]=j.useState(!1),[x,h]=j.useState(""),[b,p]=j.useState("dinheiro"),[f,v]=j.useState(""),[g,y]=j.useState(""),[N,_]=j.useState({total_vendas:0,total_em_aberto:0}),[w,S]=j.useState("antiga");j.useEffect(()=>{C()},[t]);const C=async()=>{try{d(!0);const K=await V.get(`/clientes/${t}/vendas-em-aberto`);o(K.data.vendas||[]),_(K.data.resumo||{total_vendas:0,total_em_aberto:0})}catch(K){console.error("Erro ao carregar vendas em aberto:",K),be.error("Erro ao carregar vendas em aberto")}finally{d(!1)}},k=K=>{l(I=>I.includes(K)?I.filter(Y=>Y!==K):[...I,K])},F=()=>{i.length===n.length?l([]):l(n.map(K=>K.id))},q=K=>{const I=new Date,Y=new Date(K),D=Math.abs(I-Y);return Math.ceil(D/(1e3*60*60*24))},A=[...n].sort((K,I)=>w==="antiga"?new Date(K.data_venda)-new Date(I.data_venda):new Date(I.data_venda)-new Date(K.data_venda)),T=n.filter(K=>i.includes(K.id)).reduce((K,I)=>K+parseFloat(I.saldo_devedor),0),U=async()=>{var K,I,Y,D;if(i.length===0){be.error("Selecione ao menos uma venda");return}if(!x||parseFloat(x)<=0){be.error("Informe um valor vlido");return}if(parseFloat(x)>T){be.error("Valor do pagamento no pode ser maior que o total selecionado");return}try{m(!0),console.log("Enviando requisio:",{vendas_ids:i,valor_total:parseFloat(x),forma_pagamento:b,numero_transacao:f||null,observacoes:g||null});const W=await V.post(`/clientes/${t}/baixar-vendas-lote`,{vendas_ids:i,valor_total:parseFloat(x),forma_pagamento:b,numero_transacao:f||null,observacoes:g||null});if(console.log("Resposta completa:",W),console.log("Response.data:",W.data),!W.data)throw new Error("Resposta vazia do servidor");const{vendas_quitadas:R,vendas_parciais:B,total_vendas_afetadas:O,valor_total_baixado:L}=W.data;let E=` Total baixado: R$ ${L.toFixed(2)}
`;R.length>0&&(E+=`
 ${R.length} venda(s) quitada(s):`,R.forEach(M=>{E+=`
   ${M.numero_venda}: R$ ${M.valor_baixado.toFixed(2)}`})),B.length>0&&(E+=`

 ${B.length} venda(s) parcial:`,B.forEach(M=>{E+=`
   ${M.numero_venda}:`,E+=`
    Baixado: R$ ${M.valor_baixado.toFixed(2)}`,E+=`
    Falta: R$ ${M.saldo_restante.toFixed(2)}`})),be.success(E,{duration:6e3}),s&&s(),a()}catch(W){console.error("Erro completo:",W),console.error("Erro response:",W.response),console.error("Erro response data:",(K=W.response)==null?void 0:K.data),console.error("Erro response status:",(I=W.response)==null?void 0:I.status);const R=((D=(Y=W.response)==null?void 0:Y.data)==null?void 0:D.detail)||W.message||"Erro ao baixar vendas";be.error(R)}finally{m(!1)}};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(wd,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando vendas..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendas em Aberto"}),e.jsx("p",{className:"text-gray-600 mt-1",children:r})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:N.total_vendas})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total em Aberto"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["R$ ",N.total_em_aberto.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-xl font-medium text-gray-900",children:"Nenhuma venda em aberto!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Este cliente no possui dbitos pendentes."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:F,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:i.length===n.length?"Desmarcar todas":"Selecionar todas"}),e.jsxs("button",{onClick:()=>S(w==="antiga"?"recente":"antiga"),className:"text-sm text-gray-600 hover:text-gray-700 flex items-center gap-1 font-medium",children:[" ",w==="antiga"?" Mais Antigas":" Mais Recentes"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[i.length," de ",n.length," selecionada(s)"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e.jsx("input",{type:"checkbox",checked:i.length===n.length,onChange:F,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pago"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Saldo Devedor"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Dias"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(K=>{const I=q(K.data_venda),Y=I>30;return e.jsxs("tr",{className:`hover:bg-gray-50 ${i.includes(K.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:i.includes(K.id),onChange:()=>k(K.id),className:"rounded border-gray-300"})}),e.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:["#",K.numero_venda]}),e.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:new Date(K.data_venda).toLocaleDateString("pt-BR")}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-900",children:["R$ ",parseFloat(K.total).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right text-green-600",children:["R$ ",parseFloat(K.total_pago).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["R$ ",parseFloat(K.saldo_devedor).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Y?"bg-red-100 text-red-800":I>15?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[I," ",I===1?"dia":"dias"]})})]},K.id)})})]})}),i.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registrar Pagamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Total Selecionado"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",T.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor do Pagamento *"}),e.jsx("input",{type:"number",step:"0.01",value:x,onChange:K=>h(K.target.value),placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsxs("select",{value:b,onChange:K=>p(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"debito",children:"Carto de Dbito"}),e.jsx("option",{value:"credito",children:"Carto de Crdito"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),(b==="pix"||b==="transferencia")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero da Transao"}),e.jsx("input",{type:"text",value:f,onChange:K=>v(K.target.value),placeholder:"Cdigo/ID da transao",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:g,onChange:K=>y(K.target.value),rows:"2",placeholder:"Informaes adicionais sobre o pagamento...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-start space-x-2 mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Bt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Ateno:"})," O valor ser aplicado automaticamente da venda mais antiga para a mais recente. Se o valor for insuficiente para quitar todas as vendas selecionadas, a ltima venda ficar parcialmente paga."]})]}),e.jsx("button",{onClick:U,disabled:u||!x||parseFloat(x)<=0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx(wd,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(fa,{className:"w-5 h-5"}),e.jsx("span",{children:"Baixar Vendas Selecionadas"})]})})]})]})})]})})}function xz({clienteId:t,clienteNome:r,onClose:a}){var x,h,b;const[s,n]=j.useState(null),[o,i]=j.useState(!0),[l,c]=j.useState("todos");j.useEffect(()=>{d()},[t]);const d=async()=>{try{i(!0);const p=await V.get(`/clientes/${t}/historico-compras`);n(p.data)}catch(p){console.error("Erro ao carregar histrico:",p),be.error("Erro ao carregar histrico do cliente")}finally{i(!1)}},u=p=>{const f={finalizada:"bg-green-100 text-green-800",baixa_parcial:"bg-yellow-100 text-yellow-800",pendente:"bg-blue-100 text-blue-800",cancelada:"bg-red-100 text-red-800",finalizada_devolucao_parcial:"bg-orange-100 text-orange-800",finalizada_devolucao_total:"bg-gray-100 text-gray-800"},v={finalizada:"Finalizada",baixa_parcial:"Baixa Parcial",pendente:"Pendente",cancelada:"Cancelada",finalizada_devolucao_parcial:"Dev. Parcial",finalizada_devolucao_total:"Dev. Total"};return e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${f[p]||"bg-gray-100 text-gray-800"}`,children:v[p]||p})},m=((x=s==null?void 0:s.vendas)==null?void 0:x.filter(p=>l==="todos"?!0:p.status===l))||[];return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(wd,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando histrico..."})]})})}):s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Histrico de Compras"}),e.jsx("p",{className:"text-gray-600 mt-1",children:r})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(A4,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Compras"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_compras})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(fa,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Gasto"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.valor_total_gasto.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Ticket Mdio"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.ticket_medio.toFixed(2)]})]})]})})]}),s.ultima_compra&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 shadow-sm flex items-center space-x-2 text-sm",children:[e.jsx(zi,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["ltima compra: ",new Date(s.ultima_compra).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})]})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrar por status:"}),e.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"todos",children:["Todos (",((h=s.vendas)==null?void 0:h.length)||0,")"]}),e.jsx("option",{value:"finalizada",children:"Finalizadas"}),e.jsx("option",{value:"baixa_parcial",children:"Baixa Parcial"}),e.jsx("option",{value:"pendente",children:"Pendentes"}),e.jsx("option",{value:"cancelada",children:"Canceladas"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A4,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Nenhuma venda encontrada"}),e.jsx("p",{className:"text-gray-600 mt-2",children:l==="todos"?"Este cliente ainda no realizou compras.":"No h vendas com este status."})]}):e.jsx("div",{className:"space-y-3",children:m.map(p=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Venda #",p.numero_venda]}),u(p.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Data:"}),e.jsx("div",{className:"font-medium text-gray-900",children:new Date(p.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:["R$ ",p.subtotal.toFixed(2)]})]}),p.desconto_valor>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Desconto:"}),e.jsxs("div",{className:"font-medium text-red-600",children:["- R$ ",p.desconto_valor.toFixed(2)]})]}),p.taxa_entrega>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Taxa Entrega:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:["R$ ",p.taxa_entrega.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Total:"}),e.jsxs("div",{className:"font-bold text-gray-900 text-lg",children:["R$ ",p.total.toFixed(2)]})]}),p.saldo_devedor>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Saldo Devedor:"}),e.jsxs("div",{className:"font-bold text-red-600",children:["R$ ",p.saldo_devedor.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Itens:"}),e.jsx("div",{className:"font-medium text-gray-900",children:p.total_itens})]}),p.vendedor_nome&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Vendedor:"}),e.jsx("div",{className:"font-medium text-gray-900",children:p.vendedor_nome})]})]})]})})},p.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsxs("span",{children:["Mostrando ",m.length," de ",((b=s.vendas)==null?void 0:b.length)||0," vendas"]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Fechar"})]})})]})}):null}function pz({clienteId:t}){const[r,a]=j.useState(!1),[s,n]=j.useState(null),[o,i]=j.useState(null),[l,c]=j.useState(""),[d,u]=j.useState([]),[m,x]=j.useState(!1),h=j.useRef(null),[b,p]=j.useState({resumo:!1,pets:!1,compras:!1,oportunidades:!1,sugestoes:!1,relacionados:!1,sazonalidade:!1,chat:!1});j.useEffect(()=>{t&&f()},[t]);const f=async()=>{var A,T;try{a(!0),i(null);const U=await V.get(`/clientes/${t}/info-pdv`);n(U.data)}catch(U){console.error("Erro ao carregar informaes do cliente:",U),i(((T=(A=U.response)==null?void 0:A.data)==null?void 0:T.detail)||"Erro ao carregar dados")}finally{a(!1)}},v=A=>{p(T=>({...T,[A]:!T[A]}))},g=async()=>{if(!l.trim())return;const A=l;c(""),u(T=>[...T,{tipo:"user",texto:A}]);try{x(!0);const T=await V.post(`/clientes/${t}/chat-pdv`,{mensagem:A});u(U=>[...U,{tipo:"ia",texto:T.data.resposta,ia_disponivel:T.data.ia_disponivel}]),setTimeout(()=>{var U;return(U=h.current)==null?void 0:U.scrollIntoView({behavior:"smooth"})},100)}catch(T){console.error("Erro no chat:",T),u(U=>[...U,{tipo:"erro",texto:"Erro ao processar mensagem. Tente novamente."}])}finally{x(!1)}},y=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),g())};if(!t)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 text-center text-gray-500",children:[e.jsx(Yn,{className:"mx-auto text-4xl mb-2"}),e.jsx("p",{children:"Selecione um cliente para ver informaes"})]});if(r)return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})});if(o)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[e.jsx(fr,{className:"inline mr-2"}),o]});if(!s)return null;const{cliente:N,resumo_financeiro:_,pets:w,ultimas_compras:S,oportunidades:C,sugestoes:k,produtos_relacionados:F,padroes_sazonais:q}=s;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 border-b",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:N.nome}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[N.cpf_cnpj&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Yn,{className:"text-xs"}),N.cpf_cnpj]}),N.telefone&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(GA,{className:"text-xs"}),N.telefone]}),N.email&&e.jsxs("p",{className:"flex items-center gap-1 truncate",children:[e.jsx(I2,{className:"text-xs"}),N.email]}),N.endereco&&e.jsxs("p",{className:"flex items-center gap-1 text-xs",children:[e.jsx(A9,{className:"text-xs"}),N.endereco,", ",N.bairro," - ",N.cidade,"/",N.estado]})]})]})})}),e.jsxs(ei,{titulo:"Resumo Financeiro",icone:e.jsx(rs,{}),expandido:b.resumo,onToggle:()=>v("resumo"),badge:_.numero_compras,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Gasto"}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:["R$ ",_.total_gasto.toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Ticket Mdio"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["R$ ",_.ticket_medio.toFixed(2)]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"N Compras"}),e.jsx("p",{className:"text-lg font-bold text-purple-700",children:_.numero_compras})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-orange-600 font-medium mb-1",children:"Maior Compra"}),e.jsxs("p",{className:"text-lg font-bold text-orange-700",children:["R$ ",_.maior_compra.valor.toFixed(2)]}),_.maior_compra.data&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_.maior_compra.data})]})]}),_.ultima_compra.data&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Il,{className:"text-xs"}),"ltima compra: ",_.ultima_compra.data," - R$ ",_.ultima_compra.valor.toFixed(2)]})})]}),w&&w.length>0&&e.jsx(ei,{titulo:"Pets Registrados",icone:e.jsx(Yn,{}),expandido:b.pets,onToggle:()=>v("pets"),badge:w.length,children:e.jsx("div",{className:"space-y-2",children:w.map(A=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold",children:A.nome[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:A.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:[A.especie," ",A.raca&&` ${A.raca}`,A.peso&&`  ${A.peso}kg`,A.idade_anos!==null&&`  ${A.idade_anos} anos`]})]})]},A.id))})}),C&&C.length>0&&e.jsx(ei,{titulo:"Oportunidades de Venda",icone:e.jsx(fr,{}),expandido:b.oportunidades,onToggle:()=>v("oportunidades"),badge:C.length,badgeColor:"bg-orange-500",children:e.jsx("div",{className:"space-y-2",children:C.map((A,T)=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${A.urgencia==="alta"?"bg-red-50 border-red-400":"bg-yellow-50 border-yellow-400"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:A.produto_nome}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:A.mensagem})]}),A.urgencia==="alta"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:"Urgente"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Atrasado ",A.dias_atraso," dias"]})]},T))})}),k&&k.length>0&&e.jsx(ei,{titulo:"Produtos Favoritos",icone:e.jsx(sc,{}),expandido:b.sugestoes,onToggle:()=>v("sugestoes"),badge:k.length,children:e.jsx("div",{className:"space-y-2",children:k.map((A,T)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:A.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Comprado ",A.vezes_comprado,"x",A.ultima_compra&&`  ltima: ${A.ultima_compra}`]})]}),e.jsxs("p",{className:"font-bold text-indigo-600 ml-2",children:["R$ ",A.preco.toFixed(2)]})]},T))})}),S&&S.length>0&&e.jsx(ei,{titulo:"ltimas Compras",icone:e.jsx(zl,{}),expandido:b.compras,onToggle:()=>v("compras"),badge:S.length,children:e.jsx("div",{className:"space-y-3",children:S.map((A,T)=>e.jsxs("div",{className:"border-l-4 border-indigo-300 pl-3 py-2 bg-gray-50 rounded-r-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[A.data,"  Venda #",A.numero_venda]}),e.jsxs("p",{className:"font-bold text-indigo-600",children:["R$ ",A.valor_total.toFixed(2)]})]})}),A.produtos&&A.produtos.length>0&&e.jsx("div",{className:"space-y-1 mt-2",children:A.produtos.map((U,K)=>e.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(Zx,{className:"text-xs"}),U.quantidade,"x ",U.nome," - R$ ",U.valor.toFixed(2)]},K))})]},T))})}),F&&F.length>0&&e.jsx(ei,{titulo:"Produtos Comprados Juntos",icone:e.jsx(k9,{}),expandido:b.relacionados,onToggle:()=>v("relacionados"),badge:F.length,badgeColor:"bg-purple-500",children:e.jsx("div",{className:"space-y-2",children:F.map((A,T)=>e.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-xs font-semibold text-purple-600",children:[A.vezes_juntos,"x comprados juntos"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-800",children:A.produto1.nome}),e.jsxs("span",{className:"text-purple-600 font-bold",children:["R$ ",A.produto1.preco.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-800",children:A.produto2.nome}),e.jsxs("span",{className:"text-purple-600 font-bold",children:["R$ ",A.produto2.preco.toFixed(2)]})]})]}),e.jsx("p",{className:"text-xs text-purple-600 mt-2 italic",children:" Sugesto: Oferecer combo!"})]},T))})}),q&&q.length>0&&e.jsx(ei,{titulo:"Padres de Compra",icone:e.jsx(ph,{}),expandido:b.sazonalidade,onToggle:()=>v("sazonalidade"),badge:q.length,badgeColor:"bg-green-500",children:e.jsx("div",{className:"space-y-2",children:q.map((A,T)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-green-700",children:A.mes_ano}),e.jsxs("span",{className:"text-sm text-green-600",children:[A.numero_compras," compras"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-bold text-green-700 ml-1",children:["R$ ",A.total_gasto.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ticket mdio:"}),e.jsxs("span",{className:"font-bold text-green-700 ml-1",children:["R$ ",A.ticket_medio.toFixed(2)]})]})]})]},T))})}),e.jsx(ei,{titulo:"Chat IA - Assistente de Vendas",icone:e.jsx(pi,{}),expandido:b.chat,onToggle:()=>v("chat"),badgeColor:"bg-blue-500",children:e.jsxs("div",{className:"space-y-3",children:[d.length===0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Perguntas sugeridas:"}),["Quais os produtos favoritos?","Quando foi a ltima compra?","Quais pets ele tem?","Quanto j gastou total?"].map((A,T)=>e.jsx("button",{onClick:()=>{c(A),setTimeout(()=>g(),100)},className:"w-full text-left px-3 py-2 text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors",children:A},T))]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[d.map((A,T)=>e.jsx("div",{className:`flex ${A.tipo==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] px-3 py-2 rounded-lg text-sm ${A.tipo==="user"?"bg-blue-600 text-white":A.tipo==="erro"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-800"}`,children:[A.texto,A.tipo==="ia"&&!A.ia_disponivel&&e.jsx("p",{className:"text-xs mt-1 opacity-70",children:" Modo bsico (IA no configurada)"})]})},T)),e.jsx("div",{ref:h})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:A=>c(A.target.value),onKeyPress:y,placeholder:"Digite sua pergunta...",disabled:m,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),e.jsx("button",{onClick:g,disabled:m||!l.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(P9,{className:"w-4 h-4"})})]})]})})]})}function ei({titulo:t,icone:r,expandido:a,onToggle:s,badge:n,badgeColor:o="bg-indigo-500",children:i}){return e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:r}),e.jsx("h4",{className:"font-semibold text-gray-800",children:t}),n!==void 0&&e.jsx("span",{className:`${o} text-white text-xs px-2 py-1 rounded-full`,children:n})]}),a?e.jsx(KA,{className:"text-gray-400"}):e.jsx(ac,{className:"text-gray-400"})]}),a&&e.jsx("div",{className:"px-4 pb-4",children:i})]})}const hz=({mostrar:t,onFechar:r,dados:a,carregando:s})=>{if(j.useEffect(()=>{const l=c=>{c.key==="Escape"&&t&&r()};if(t)return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[t,r]),!t)return null;const n=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l||0),o=l=>{switch(l){case"verde":return"bg-green-100 border-green-500 text-green-800";case"amarelo":return"bg-yellow-100 border-yellow-500 text-yellow-800";case"vermelho":return"bg-red-100 border-red-500 text-red-800";default:return"bg-gray-100 border-gray-500 text-gray-800"}},i=l=>{switch(l){case"success":return e.jsx(Ti,{className:"text-green-500"});case"error":return e.jsx(fr,{className:"text-red-500"});case"warning":return e.jsx(fr,{className:"text-yellow-500"});case"info":return e.jsx(Ll,{className:"text-blue-500"});default:return e.jsx(Ll,{className:"text-gray-500"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 flex flex-col animate-slide-in-right",children:[e.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-blue-600 to-blue-700 text-white flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ph,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-bold",children:"Anlise da Venda"})]}),e.jsx("button",{onClick:r,className:"hover:bg-white hover:bg-opacity-20 p-1 rounded transition-colors",children:e.jsx(Ro,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(rs,{className:"text-blue-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Composio Financeira"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total dos Produtos"}),e.jsx("span",{className:"font-semibold",children:n(a.composicao.total_produtos)})]}),a.composicao.desconto>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"(-) Descontos Aplicados"}),e.jsxs("span",{className:"font-semibold",children:[n(a.composicao.desconto),e.jsxs("span",{className:"text-xs ml-1",children:["(",(a.composicao.desconto/a.composicao.total_produtos*100).toFixed(1),"%)"]})]})]}),a.composicao.taxa_entrega>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"(-) Taxa de Entrega"}),e.jsx("span",{className:"font-semibold",children:n(a.composicao.taxa_entrega)})]}),e.jsx("div",{className:"border-t-2 border-blue-600 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-blue-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:n(a.composicao.subtotal)})]})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(fg,{className:"text-orange-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Dedues"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.deducoes.comissao.valor>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Comisso do Vendedor (",a.deducoes.comissao.percentual,"%)"]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.comissao.valor)})]}),a.detalhamento_taxas&&a.detalhamento_taxas.length>0&&e.jsx(e.Fragment,{children:a.detalhamento_taxas.map((l,c)=>e.jsxs(pe.Fragment,{children:[l.taxa_percentual>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-gray-600",children:["Taxa ",l.forma," (",l.taxa_percentual,"%)"]}),e.jsx("span",{className:"text-xs text-gray-500",children:n(l.valor_pagamento)})]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(l.valor_taxa_percentual)})]}),l.taxa_fixa>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-gray-600",children:["Taxa Fixa ",l.forma]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["R$ ",l.taxa_fixa.toFixed(2)]})]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(l.valor_taxa_fixa)})]})]},c))}),(!a.detalhamento_taxas||a.detalhamento_taxas.length===0)&&a.deducoes.taxa_percentual>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa Percentual"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.taxa_percentual)})]}),(!a.detalhamento_taxas||a.detalhamento_taxas.length===0)&&a.deducoes.taxa_fixa>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa Fixa"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.taxa_fixa)})]}),a.deducoes.impostos.valor>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Impostos Estimados (",a.deducoes.impostos.percentual,"%)"]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.impostos.valor)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Custo dos Produtos"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.custos)})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold text-gray-700",children:[e.jsx("span",{children:"Total de Dedues"}),e.jsx("span",{className:"text-red-600",children:n(a.deducoes.total_deducoes)})]})})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border-2 ${o(a.resultado.cor_indicador)}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ph,{className:"w-5 h-5"}),e.jsx("h4",{className:"font-bold",children:"Resultado Final"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold",children:"Lucro Lquido Estimado"}),e.jsx("span",{className:"text-2xl font-bold",children:n(a.resultado.lucro_liquido)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"Margem Lquida"}),e.jsxs("span",{className:"text-xl font-bold",children:[a.resultado.margem_liquida.toFixed(2),"%"]})]})]})]}),a.alertas&&a.alertas.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(fr,{className:"text-purple-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Alertas e Sugestes"})]}),e.jsx("div",{className:"space-y-2",children:a.alertas.map((l,c)=>e.jsxs("div",{className:`flex items-start gap-2 p-2 rounded text-sm ${l.tipo==="success"?"bg-green-50":l.tipo==="error"?"bg-red-50":l.tipo==="warning"?"bg-yellow-50":"bg-blue-50"}`,children:[e.jsx("span",{className:"flex-shrink-0 mt-0.5",children:i(l.tipo)}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"mr-1",children:l.icone}),l.mensagem]})]},c))})]}),a.detalhamento_comissoes&&a.detalhamento_comissoes.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:"Detalhamento de Comisses"}),e.jsx("div",{className:"space-y-2 text-sm",children:a.detalhamento_comissoes.map((l,c)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-700",children:l.produto}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.percentual,"% de comisso"]})]}),e.jsx("span",{className:"font-semibold text-blue-600",children:n(l.valor)})]},c))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fr,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Erro ao carregar anlise"})]})})}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Fechar"}),e.jsx("span",{className:"text-xs text-gray-300",children:"(ESC)"})]})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})};function fz({itensCarrinho:t=[],onClose:r=()=>{},isOpen:a=!1,racaoIdFechada:s=null}){const[n,o]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState(!1),b=t.filter(v=>lP(v));j.useEffect(()=>{a&&(console.log(" Modal: Raes encontradas:",b.length),b.forEach((v,g)=>{console.log(`  ${g+1}. ${v.produto_nome} - peso_embalagem: ${v.peso_embalagem}`)}))},[a,b.length]),j.useEffect(()=>{if(a&&b.length>0){const v=b[b.length-1];s!==v.produto_id&&(o(v.produto_id),d(null),m(null),l(!1))}},[a,b.length,s]);const p=b.find(v=>v.produto_id===n),f=async()=>{if(!p){m("Rao no selecionada");return}if(!(p.peso_embalagem||p.peso_pacote_kg)||!p.preco_unitario){console.error(" Modal: Dados da rao incompletos",{peso_embalagem:p.peso_embalagem,peso_pacote_kg:p.peso_pacote_kg,preco_unitario:p.preco_unitario}),m("Dados da rao incompletos");return}try{l(!0),m(null),d(null);const g=p.peso_embalagem||p.peso_pacote_kg||1,y={especie:"cao",peso_kg:15,fase:"adulto",porte:"medio",tipo_racao:"premium",peso_pacote_kg:parseFloat(g),preco_pacote:parseFloat(p.preco_unitario)||0};console.log(" Modal: Enviando payload:",y);const N=await V.post("/internal/racao/calcular",y);N.data?d(N.data):m("Sem resposta do servidor")}catch(g){console.error("Erro ao calcular:",g),m(null)}finally{l(!1)}};return!a||b.length===0?(a&&b.length===0&&console.warn(" Modal: isOpen=true mas racoes.length=0"),null):(console.log(" Modal: Renderizando com",b.length,"raes"),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Calculadora de Rao"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Informaes rpidas"})]})]}),e.jsx("button",{onClick:()=>{r()},className:"p-1 hover:bg-blue-400 rounded-lg transition-colors",title:"Fechar",children:e.jsx(Vt,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[b.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Selecionar Rao"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(!x),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-left flex items-center justify-between hover:border-blue-500 transition-colors",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:(p==null?void 0:p.produto_nome)||"Selecione uma rao"}),e.jsx(ql,{size:20,className:`text-gray-500 transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:b.map((v,g)=>e.jsxs("button",{onClick:()=>{o(v.produto_id),h(!1),d(null)},className:`w-full px-4 py-3 text-left border-b last:border-b-0 hover:bg-blue-50 transition-colors ${v.produto_id===n?"bg-blue-100 border-l-4 border-l-blue-600":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:v.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[v.peso_embalagem||v.peso_pacote_kg?`${v.peso_embalagem||v.peso_pacote_kg}kg`:"","  R$ ",(v.preco_unitario||0).toFixed(2)]})]},g))})]})]}),p&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:p.produto_nome}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pacote:"}),e.jsx("span",{className:"font-medium",children:p.peso_pacote_kg?`${p.peso_pacote_kg}kg`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Preo:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["R$ ",(p.preco_unitario||0).toFixed(2)]})]})]})]}),e.jsx("button",{onClick:f,disabled:i||!p,className:`w-full py-3 rounded-lg font-semibold transition-colors ${i||!p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer"}`,children:i?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Hy,{size:18,className:"animate-spin"}),"Calculando..."]}):" Calcular Consumo"}),c&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 space-y-3 border border-green-200",children:[e.jsx("h3",{className:"font-bold text-green-900 text-center",children:" Clculo Realizado"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Consumo Dirio"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(c.consumo_diario_gramas||0).toFixed(0),"g"]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Durao"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(c.duracao_pacote_dias||0).toFixed(1),"d"]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/Dia"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_diario||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/Ms"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_mensal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100 col-span-2",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/kg"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_por_kg||0).toFixed(2)]})]})]})]}),u&&e.jsx("div",{className:"bg-yellow-50 rounded-lg p-3 text-sm text-yellow-700 border border-yellow-200",children:" No foi possvel calcular. Tente novamente."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 text-xs text-gray-600 border border-gray-200 italic",children:" Valores calculados com base em dados padro. Para anlises personalizadas, utilize a calculadora completa."})]}),e.jsx("div",{className:"bg-gray-50 border-t px-6 py-3 flex justify-end gap-3 flex-shrink-0",children:e.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium transition-colors",children:"Fechar"})})]})}))}function gz({isOpen:t,onClose:r,clienteId:a,produtoId:s=null,onPendenciaAdicionada:n=()=>{}}){const[o,i]=j.useState("listar"),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState(!1),[h,b]=j.useState(""),[p,f]=j.useState([]),[v,g]=j.useState(!1),[y,N]=j.useState(null),_=j.useRef(null),[w,S]=j.useState({produto_id:s||"",quantidade_desejada:1,prioridade:"media",observacoes:""});j.useEffect(()=>{t&&a&&(C(),s||k())},[t,a]),j.useEffect(()=>{if(h.trim()==="")f(d);else{const D=d.filter(W=>{var R;return W.nome.toLowerCase().includes(h.toLowerCase())||((R=W.codigo)==null?void 0:R.toLowerCase().includes(h.toLowerCase()))});f(D)}},[h,d]),j.useEffect(()=>{const D=W=>{_.current&&!_.current.contains(W.target)&&g(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const C=async()=>{try{x(!0);const W=(await V.get(`/pendencias-estoque/cliente/${a}`)).data;c(Array.isArray(W==null?void 0:W.pendencias)?W.pendencias:[])}catch(D){console.error("Erro ao carregar pendncias:",D),ze.error("Erro ao carregar lista de espera"),c([])}finally{x(!1)}},k=async()=>{var D;try{const W=await V.get("/produtos/",{params:{page:1,page_size:1e3,ativo:!0}}),R=Array.isArray((D=W.data)==null?void 0:D.items)?W.data.items:[];console.log("Produtos carregados:",R.length,R),u(R),f(R)}catch(W){console.error("Erro ao carregar produtos:",W),ze.error("Erro ao carregar produtos"),u([]),f([])}},F=D=>{N(D),b(D.nome),S({...w,produto_id:D.id}),g(!1)},q=()=>{N(null),b(""),S({...w,produto_id:""}),f(d)},A=async()=>{var W,R;if(!w.produto_id){ze.error("Selecione um produto");return}const D={baixa:0,media:1,alta:2};try{x(!0),await V.post("/pendencias-estoque/",{cliente_id:a,produto_id:parseInt(w.produto_id),quantidade_desejada:parseFloat(w.quantidade_desejada),prioridade:D[w.prioridade]||1,observacoes:w.observacoes||null}),ze.success("Cliente adicionado  lista de espera!"),S({produto_id:"",quantidade_desejada:1,prioridade:"media",observacoes:""}),q(),i("listar"),C(),n()}catch(B){console.error("Erro ao adicionar pendncia:",B),ze.error(((R=(W=B.response)==null?void 0:W.data)==null?void 0:R.detail)||"Erro ao adicionar  lista de espera")}finally{x(!1)}},T=async D=>{if(confirm("Deseja realmente cancelar esta pendncia?"))try{await V.delete(`/pendencias-estoque/${D}`),ze.success("Pendncia cancelada"),C()}catch(W){console.error("Erro ao cancelar pendncia:",W),ze.error("Erro ao cancelar pendncia")}},U=async(D,W)=>{try{await V.put(`/pendencias-estoque/${D}`,{prioridade:parseInt(W)}),ze.success("Prioridade atualizada"),C()}catch(R){console.error("Erro ao alterar prioridade:",R),ze.error("Erro ao alterar prioridade")}};if(!t)return null;const K=D=>{switch(D){case 2:return"text-red-600 bg-red-50";case 1:return"text-yellow-600 bg-yellow-50";case 0:return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},I=D=>{switch(D){case 2:return"ALTA";case 1:return"MDIA";case 0:return"BAIXA";default:return"N/A"}},Y=D=>{switch(D){case"pendente":return e.jsx(Vl,{className:"w-4 h-4 text-yellow-500"});case"notificado":return e.jsx(JA,{className:"w-4 h-4 text-blue-500"});case"finalizado":return e.jsx(Xt,{className:"w-4 h-4 text-green-500"});default:return e.jsx(Bt,{className:"w-4 h-4 text-gray-500"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bt,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Lista de Espera - Produtos Sem Estoque"})]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-200 transition-colors",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>i("listar"),className:`flex-1 px-4 py-3 font-medium transition-colors ${o==="listar"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:["Lista de Espera (",l.length,")"]}),e.jsx("button",{onClick:()=>i("adicionar"),className:`flex-1 px-4 py-3 font-medium transition-colors ${o==="adicionar"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:"Adicionar Pendncia"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="listar"?e.jsx("div",{className:"space-y-3",children:m?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Carregando..."}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma pendncia registrada"}),e.jsx("button",{onClick:()=>i("adicionar"),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Adicionar primeira pendncia"})]}):l.map(D=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Y(D.status),e.jsx("h3",{className:"font-semibold text-gray-900",children:D.produto_nome||"Produto no encontrado"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${K(D.prioridade)}`,children:I(D.prioridade)})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[D.produto_codigo&&e.jsxs("p",{children:["Cdigo: ",e.jsx("span",{className:"font-medium",children:D.produto_codigo})]}),e.jsxs("p",{children:["Quantidade: ",D.quantidade_desejada," un."]}),D.valor_referencia&&e.jsxs("p",{children:["Valor ref.: R$ ",parseFloat(D.valor_referencia).toFixed(2)]}),e.jsxs("p",{children:["Status: ",e.jsx("span",{className:"font-medium",children:D.status})]}),e.jsxs("p",{children:["Registrado em: ",new Date(D.data_registro).toLocaleDateString("pt-BR")]}),D.data_notificacao&&e.jsxs("p",{children:["Notificado em: ",new Date(D.data_notificacao).toLocaleDateString("pt-BR")]}),D.observacoes&&e.jsxs("p",{className:"italic",children:["Obs: ",D.observacoes]})]})]}),e.jsx("div",{className:"flex flex-col gap-2 ml-4",children:D.status==="pendente"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:D.prioridade,onChange:W=>U(D.id,W.target.value),className:"text-xs border rounded px-2 py-1",children:[e.jsx("option",{value:"0",children:"Baixa"}),e.jsx("option",{value:"1",children:"Mdia"}),e.jsx("option",{value:"2",children:"Alta"})]}),e.jsx("button",{onClick:()=>T(D.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Cancelar pendncia",children:e.jsx($o,{className:"w-4 h-4"})})]})})]})},D.id))}):e.jsxs("div",{className:"space-y-4 max-w-lg mx-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produto *"}),s?e.jsx("input",{type:"text",value:"Produto selecionado",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-50"}):e.jsxs("div",{ref:_,className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:h,onChange:D=>b(D.target.value),onFocus:()=>g(!0),placeholder:"Digite para buscar o produto...",className:"w-full pl-10 pr-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),h&&e.jsx("button",{type:"button",onClick:q,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Vt,{className:"w-4 h-4"})})]}),v&&p.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[p.slice(0,50).map(D=>e.jsxs("button",{type:"button",onClick:()=>F(D),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.nome}),e.jsxs("div",{className:"text-sm text-gray-500",children:[D.codigo&&`Cdigo: ${D.codigo}  `,"Estoque: ",D.estoque_atual||0,D.preco_venda&&`  R$ ${parseFloat(D.preco_venda).toFixed(2)}`]})]},D.id)),p.length>50&&e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-500 text-center bg-gray-50",children:["Mostrando 50 de ",p.length," produtos. Continue digitando para refinar."]})]}),v&&h&&p.length===0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Nenhum produto encontrado"})}),y&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:" Produto selecionado"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:y.nome})]})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade Desejada *"}),e.jsx("input",{type:"number",min:"1",value:w.quantidade_desejada,onChange:D=>S({...w,quantidade_desejada:parseInt(D.target.value)||1}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),e.jsxs("select",{value:w.prioridade,onChange:D=>S({...w,prioridade:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"baixa",children:"Baixa - No tem pressa"}),e.jsx("option",{value:"media",children:"Mdia - Normal"}),e.jsx("option",{value:"alta",children:"Alta - Urgente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:w.observacoes,onChange:D=>S({...w,observacoes:D.target.value}),rows:"3",placeholder:"Ex: Cliente pediu para avisar assim que chegar...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" O cliente ser notificado automaticamente via WhatsApp"})," quando o produto entrar no estoque."]})}),e.jsx("button",{onClick:A,disabled:m,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"Adicionando...":"Adicionar  Lista de Espera"})]})})]})})}function I4(t){return t?t.variation_attributes&&typeof t.variation_attributes=="object"?Object.entries(t.variation_attributes).map(([a,s])=>`${a.charAt(0).toUpperCase()+a.slice(1)}: ${s}`).join(" | "):t.variation_signature?t.variation_signature.split("|").map(a=>{const[s,n]=a.split(":");return s&&n?`${s.charAt(0).toUpperCase()+s.slice(1)}: ${n}`:a}).join(" | "):"":""}function bz(){var vw,yw,jw,Nw,ww,_w,Sw,Cw,kw;const t=Kt(),[r]=lg(),{user:a}=ou(),s=(a==null?void 0:a.is_admin)===!0,[n,o]=j.useState({cliente:null,pet:null,itens:[],subtotal:0,desconto_valor:0,desconto_percentual:0,total:0,observacoes:"",funcionario_id:null,entregador_id:null,tem_entrega:!1,entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}}),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState([]),[x,h]=j.useState([]),[b,p]=j.useState(!1),[f,v]=j.useState(!1),[g,y]=j.useState(!1),[N,_]=j.useState(!1),[w,S]=j.useState(!1),[C,k]=j.useState(!1),[F,q]=j.useState(0),[A,T]=j.useState(null),[U,K]=j.useState([]),[I,Y]=j.useState("24h"),[D,W]=j.useState("todas"),[R,B]=j.useState(!1),[O,L]=j.useState(""),[E,M]=j.useState(!1),[z,le]=j.useState(!1),[Q,ne]=j.useState(""),[re,ae]=j.useState(0),[ie,ve]=j.useState(!1),[_e,me]=j.useState(!1),[Se,Ne]=j.useState(null),[ot,Ke]=j.useState(!1),[lt,ke]=j.useState(!1),[Ie,Ae]=j.useState(null),[it,gt]=j.useState(!1),[Dt,Ct]=j.useState("valor"),[Lt,$t]=j.useState(0),[ge,De]=j.useState(!1),[Le,ct]=j.useState(null),[tt,xe]=j.useState([]),[Fe,Ye]=j.useState(""),[te,ue]=j.useState(null),[Oe,ce]=j.useState([]),[je,Re]=j.useState(null),[He,J]=j.useState(0);j.useEffect(()=>{o(ee=>({...ee,funcionario_id:(Le==null?void 0:Le.id)||null}))},[Le]),j.useEffect(()=>{console.log(" Sincronizando entregador_id:",(je==null?void 0:je.id)||null),o(ee=>({...ee,entregador_id:(je==null?void 0:je.id)||null}))},[je]);const[ye,Pe]=j.useState(!1),[We,st]=j.useState(null),[xt,pt]=j.useState(!1),[Nt,At]=j.useState({}),[Mt,ut]=j.useState(()=>{const ee=localStorage.getItem("pdv_painel_vendas_aberto");return ee?JSON.parse(ee):!1}),[X,P]=j.useState(()=>{const ee=localStorage.getItem("pdv_painel_cliente_aberto");return ee?JSON.parse(ee):!1}),[H,Z]=j.useState(!1),[oe,de]=j.useState([]),[se,fe]=j.useState({}),[he,we]=j.useState(0),[Ee,Ue]=j.useState(!1),[Je,et]=j.useState(null),Ze=j.useRef(null);j.useEffect(()=>{localStorage.setItem("pdv_painel_vendas_aberto",JSON.stringify(Mt))},[Mt]),j.useEffect(()=>{n.cliente&&ar()},[n.cliente]),j.useEffect(()=>{var ee;n.itens&&n.itens.length>0?sessionStorage.setItem("pdv_calculadora_data",JSON.stringify({itens:n.itens,clienteId:((ee=n.cliente)==null?void 0:ee.id)||null})):sessionStorage.removeItem("pdv_calculadora_data")},[n.itens,n.cliente]),j.useEffect(()=>{localStorage.setItem("pdv_painel_cliente_aberto",JSON.stringify(X))},[X]),j.useEffect(()=>{ht();const ee=setInterval(()=>{ht()},3e4);return()=>clearInterval(ee)},[re]);const ht=async()=>{try{const ee=await V.get("/caixas/aberto");ve(!!ee.data)}catch{ve(!1)}};j.useEffect(()=>{Pt()},[]);const Pt=async()=>{try{const ee=await V.get("/clientes/",{params:{is_entregador:!0,incluir_inativos:!1,limit:100}});let Ce=ee.data.items||ee.data.clientes||ee.data||[];Array.isArray(Ce)||(console.error(" Resposta da API no  um array:",Ce),Ce=[]),ce(Ce);const Be=Ce.find(Me=>Me.entregador_padrao===!0);Be&&(Re(Be),o(Me=>({...Me,entregador_id:Be.id})),er(Be))}catch(ee){console.error("Erro ao carregar entregadores:",ee),ze.error("Erro ao carregar lista de entregadores")}},er=async ee=>{if(!ee){J(0);return}let Ce=0;if(ee.modelo_custo_entrega==="taxa_fixa"&&ee.taxa_fixa_entrega)Ce=Number(ee.taxa_fixa_entrega);else if(ee.modelo_custo_entrega==="por_km"&&ee.valor_por_km_entrega)Ce=0;else if(ee.modelo_custo_entrega==="rateio_rh"&&ee.controla_rh)try{Ce=(await V.get(`/entregadores/${ee.id}/custo-operacional`)).data.custo_por_entrega||0}catch(Be){console.error("Erro ao buscar custo RH:",Be),Ce=ee.custo_rh_ajustado||0}else try{Ce=(await V.get("/configuracoes/entregas")).data.taxa_fixa||0}catch(Be){console.error("Erro ao buscar configurao de entrega:",Be),Ce=10}J(Ce)};j.useEffect(()=>{n.tem_entrega&&je?er(je):J(0)},[je,n.tem_entrega]);const ar=async()=>{if(!n.cliente){q(0);return}try{const Ce=(await V.get(`/pendencias-estoque/cliente/${n.cliente.id}`)).data.filter(Be=>Be.status==="pendente"||Be.status==="notificado");q(Ce.length)}catch{q(0)}},Ur=async ee=>{if(!ee||!n.cliente){de([]);return}try{const Be=(await V.get(`/internal/pdv/oportunidades/${ee}`)).data;Be&&Array.isArray(Be.oportunidades)?de(Be.oportunidades):de([])}catch{de([])}},qs=async(ee,Ce)=>{try{const Be={opportunity_id:Ce.id,event_type:ee,user_id:a==null?void 0:a.id,contexto:"PDV",extra_data:{produto_origem_id:Ce.produto_origem_id||null,produto_sugerido_id:Ce.produto_sugerido_id||null,tipo_oportunidade:Ce.tipo||null,venda_id:n.id||null}};V.post("/internal/pdv/eventos-oportunidade",Be).catch(()=>{})}catch{}};async function $n(ee){try{const Ce={produto_id:ee.produto_id,preco_unitario:ee.preco_unitario,quantidade:ee.quantidade},{data:Be}=await V.post("/pdv/fiscal/calcular",Ce);return Be}catch(Ce){return console.error("Erro ao calcular fiscal:",Ce),null}}j.useEffect(()=>{async function ee(){let Ce=0;const Be={};for(const Me of n.itens){const Qe=await $n(Me);Qe&&(Be[Me.produto_id]=Qe,Ce+=Number(Qe.total_impostos))}fe(Be),we(Ce.toFixed(2))}n.itens&&n.itens.length>0?ee():(fe({}),we(0))},[n.itens]),j.useEffect(()=>{Xo()},[I,D,R,O]),j.useEffect(()=>{const ee=r.get("venda");ee&&Gi(parseInt(ee))},[r]),j.useEffect(()=>{const ee=sessionStorage.getItem("abrirVenda"),Ce=sessionStorage.getItem("abrirModalPagamento");ee&&Ce==="true"&&(sessionStorage.removeItem("abrirVenda"),sessionStorage.removeItem("abrirModalPagamento"),Gi(parseInt(ee),!0))},[]);const Dn=()=>{Ne({tipo:"entrega",apelido:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""}),me(!0)},is=()=>{me(!1),Ne(null)},Go=async ee=>{if(!(!ee||ee.length!==9)){Ke(!0);try{const Be=await(await fetch(`https://viacep.com.br/ws/${ee.replace("-","")}/json/`)).json();if(Be.erro){alert("CEP no encontrado");return}Ne(Me=>({...Me,endereco:Be.logradouro||"",bairro:Be.bairro||"",cidade:Be.localidade||"",estado:Be.uf||""}))}catch(Ce){console.error("Erro ao buscar CEP:",Ce),alert("Erro ao buscar CEP")}finally{Ke(!1)}}},ls=async()=>{if(!Se.cep||!Se.endereco||!Se.cidade){alert("Preencha pelo menos CEP, Endereo e Cidade");return}if(!n.cliente||!n.cliente.id){alert("Selecione um cliente primeiro");return}try{const ee=await Du(n.cliente.id),Ce=ee.enderecos_adicionais||[];Ce.push({...Se}),await V.put(`/clientes/${n.cliente.id}`,{...ee,enderecos_adicionais:Ce});const Be=await Du(n.cliente.id);o({...n,cliente:Be}),alert("Endereo adicionado com sucesso!"),is()}catch(ee){console.error("Erro ao salvar endereo:",ee),alert("Erro ao salvar endereo. Tente novamente.")}},f0=ee=>{Ae({...ee,preco:ee.preco_unitario,descontoValor:ee.desconto_valor||0,descontoPercentual:ee.desconto_percentual||0,tipoDesconto:"valor"}),ke(!0)},g0=()=>{const ee=n.itens.map(Ce=>{if(Ce.produto_id===Ie.produto_id){const Be=Ie.preco,Me=Ce.quantidade,Qe=Be*Me;let _t=0,Tt=0;Ie.tipoDesconto==="valor"?(_t=parseFloat(Ie.descontoValor)||0,Tt=Qe>0?_t/Qe*100:0):(Tt=parseFloat(Ie.descontoPercentual)||0,_t=Qe*Tt/100);const Gt=Be-_t/Me,Er=Qe-_t;return{...Ce,desconto_valor:_t,desconto_percentual:Tt,tipo_desconto_aplicado:Ie.tipoDesconto,preco_com_desconto:Gt,subtotal:Er}}return Ce});Or(ee),ke(!1),Ae(null)},b0=()=>{gt(!0)},v0=(ee,Ce)=>{var Gt;const Be=n.subtotal;let Me=0,Qe=0;ee==="valor"?(Me=parseFloat(Ce)||0,Qe=Be>0?Me/Be*100:0):(Qe=parseFloat(Ce)||0,Me=Be*Qe/100);const _t=n.tem_entrega&&((Gt=n.entrega)==null?void 0:Gt.taxa_entrega_total)||0,Tt=Be-Me+_t;o({...n,desconto_valor:Me,desconto_percentual:Qe,total:Tt}),gt(!1)},Xo=async()=>{try{const ee=new Date;let Ce;I==="24h"?Ce=new Date(ee.getTime()-24*60*60*1e3):I==="7d"?Ce=new Date(ee.getTime()-7*24*60*60*1e3):Ce=new Date(ee.getTime()-30*24*60*60*1e3);const Be={data_inicio:Ce.toISOString().split("T")[0],data_fim:ee.toISOString().split("T")[0],per_page:50};O.trim()?(Be.busca=O.trim(),delete Be.data_inicio,delete Be.data_fim):(D==="pago"?Be.status="finalizada":D==="aberta"&&(Be.status="aberta"),R===!0&&(Be.tem_entrega=!0)),console.log(" Parmetros de busca de vendas:",Be);const Me=await M4(Be);K(Me.vendas||[])}catch(ee){console.error("Erro ao carregar vendas:",ee)}},Gi=async(ee,Ce=!1)=>{var Be;try{M(!0);const Me=await W0(ee);if(!Me){alert("Venda no encontrada");return}let Qe=null;if(Me.cliente_id)try{Qe=await Du(Me.cliente_id)}catch(qt){console.error("Erro ao buscar cliente:",qt)}let _t=[],Tt=0;try{const qt=await V.get(`/vendas/${ee}/pagamentos`);_t=qt.data.pagamentos||[],Tt=qt.data.total_pago||0}catch(qt){console.error("Erro ao buscar pagamentos:",qt)}console.log(" Venda carregada - funcionario_id:",Me.funcionario_id);let Gt=null;if(Me.funcionario_id)try{const ia=((Be=(await V.get("/comissoes/configuracoes/funcionarios")).data)==null?void 0:Be.data)||[];console.log(" Funcionrios disponveis:",ia),Gt=ia.find(ws=>ws.id===Me.funcionario_id),Gt?(De(!0),ct(Gt),console.log(" Funcionrio comisso carregado:",Gt)):console.warn(" Funcionrio ID",Me.funcionario_id,"no encontrado na lista")}catch(qt){console.error("Erro ao carregar funcionrio de comisso:",qt)}else console.log(" Venda sem funcionario_id - limpando estados de comisso"),De(!1),ct(null),Ye("");const Er={id:Me.id,numero_venda:Me.numero_venda,status:Me.status,data_venda:Me.data_venda,cliente:Qe,pet:null,itens:Me.itens||[],subtotal:Me.subtotal||0,desconto_valor:Me.desconto_valor||0,desconto_percentual:Me.desconto_percentual||0,total:Me.total||0,observacoes:Me.observacoes||"",funcionario_id:Me.funcionario_id||null,entregador_id:Me.entregador_id||null,tem_entrega:Me.tem_entrega||!1,entrega:Me.entrega||{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""},pagamentos:_t,total_pago:Tt};if(o(Er),le(!0),Me.entregador_id){console.log(" Venda tem entregador_id:",Me.entregador_id);try{const ia=(await V.get(`/clientes/${Me.entregador_id}`)).data;ia&&ia.is_entregador?(console.log(" Entregador carregado:",ia.nome),Re(ia),er(ia)):console.warn(" Cliente ID",Me.entregador_id,"no  um entregador vlido")}catch(qt){console.error(" Erro ao carregar entregador:",qt);const ia=Oe.find(ws=>ws.id===Me.entregador_id);ia&&(console.log(" Entregador encontrado no array (fallback):",ia.nome),Re(ia),er(ia))}}else console.log(" Venda sem entregador_id - limpando entregadorSelecionado"),Re(null);Ce&&setTimeout(()=>{p(!0)},500)}catch(Me){console.error("Erro ao carregar venda:",Me),alert("Erro ao carregar venda: "+(Me.message||"Erro desconhecido"))}finally{M(!1)}},_u=async()=>{var ee;if(Q.trim())try{M(!0);const Ce=Q.replace(/\D/g,"");if(!Ce){alert("Digite um nmero de venda vlido"),M(!1);return}console.log(" Buscando venda com nmero:",Ce);const Be=await M4({busca:Ce,per_page:50});if(console.log(" Vendas encontradas:",(ee=Be.vendas)==null?void 0:ee.length),!Be.vendas||Be.vendas.length===0){alert(`Nenhuma venda encontrada com "${Ce}"`),M(!1);return}if(Be.vendas.length===1){await Gi(Be.vendas[0].id),ne("");return}const Me=Be.vendas.slice(0,10).map((Tt,Gt)=>`${Gt+1}. ${Tt.numero_venda} - ${Tt.cliente_nome||"Sem cliente"} - ${Tt.status}`).join(`
`),Qe=prompt(`Encontradas ${Be.vendas.length} vendas. Digite o nmero da opo:

${Me}`),_t=parseInt(Qe)-1;_t>=0&&_t<Be.vendas.length&&(await Gi(Be.vendas[_t].id),ne(""))}catch(Ce){console.error("Erro ao buscar venda:",Ce),alert("Erro ao buscar venda: "+(Ce.message||"Erro desconhecido"))}finally{M(!1)}};j.useEffect(()=>{if(i.length>=2){const ee=setTimeout(async()=>{try{const Ce=await GB({search:i});m(Ce||[])}catch(Ce){console.error("Erro ao buscar clientes:",Ce),m([])}},300);return()=>clearTimeout(ee)}else m([])},[i]),j.useEffect(()=>{if(c.length>=2){const ee=setTimeout(async()=>{try{const Be=(await hP({busca:c})).data.items||[];h(Be)}catch(Ce){console.error("Erro ao buscar produtos:",Ce),h([])}},300);return()=>clearTimeout(ee)}else h([])},[c]);const G=async ee=>{o({...n,cliente:ee,pet:null}),l(""),m([]);try{const Ce=await V.get(`/clientes/${ee.id}/vendas-em-aberto`);Ce.data.resumo.total_vendas>0?T(Ce.data.resumo):T(null)}catch(Ce){console.error("Erro ao verificar vendas em aberto:",Ce),T(null)}},Te=ee=>{o({...n,pet:ee})},Xe=ee=>{var Me,Qe;if(!ie){alert(" No  possvel adicionar produtos sem caixa aberto. Abra um caixa primeiro.");return}console.log(" Produto sendo adicionado:",{nome:ee.nome,categoria_id:ee.categoria_id,categoria_nome:ee.categoria_nome,peso_embalagem:ee.peso_embalagem,classificacao_racao:ee.classificacao_racao});const Ce=n.itens.find(_t=>_t.produto_id===ee.id);let Be;Ce?Be=n.itens.map(_t=>_t.produto_id===ee.id?{..._t,quantidade:_t.quantidade+1,subtotal:(_t.quantidade+1)*_t.preco_unitario}:_t):Be=[...n.itens,{tipo:"produto",produto_id:ee.id,produto_nome:ee.nome,quantidade:1,preco_unitario:parseFloat(ee.preco_venda),desconto_item:0,subtotal:parseFloat(ee.preco_venda),pet_id:((Me=n.pet)==null?void 0:Me.id)||null,tipo_produto:ee.tipo_produto,tipo_kit:ee.tipo_kit,composicao_kit:ee.composicao_kit||[],categoria_id:ee.categoria_id,categoria_nome:ee.categoria_nome,peso_pacote_kg:ee.peso_liquido||ee.peso_bruto,peso_embalagem:ee.peso_embalagem,classificacao_racao:ee.classificacao_racao}],Or(Be),d(""),h([]),(Qe=Ze.current)==null||Qe.focus()},vt=(ee,Ce)=>{const Be=n.itens.map((Me,Qe)=>{if(Qe===ee){const _t=Math.max(1,Me.quantidade+Ce),Tt=_t*Me.preco_unitario;let Gt=Me.desconto_valor||0;Me.tipo_desconto_aplicado==="percentual"&&Me.desconto_percentual>0&&(Gt=Tt*Me.desconto_percentual/100);const Er=Tt-Gt;return{...Me,quantidade:_t,desconto_valor:Gt,subtotal:Er}}return Me});Or(Be)},nt=ee=>{const Ce=n.itens.filter((Be,Me)=>Me!==ee);Or(Ce)},sr=ee=>{At(Ce=>({...Ce,[ee]:!Ce[ee]}))},Or=ee=>{var Gt;const Ce=ee.reduce((Er,qt)=>Er+qt.subtotal,0),Be=ee.reduce((Er,qt)=>Er+(qt.desconto_valor||0),0),Me=Ce+Be,Qe=Me>0?Be/Me*100:0,_t=n.tem_entrega&&((Gt=n.entrega)==null?void 0:Gt.taxa_entrega_total)||0,Tt=Ce+_t;o({...n,itens:ee,subtotal:Ce,desconto_valor:Be,desconto_percentual:Qe,total:Tt})},rr=async()=>{var ee,Ce,Be,Me,Qe,_t,Tt,Gt,Er,qt,ia,ws,Xi,fc,j0,Ew,Aw,Pw,Tw,Ow,Fw,Rw,$w,Dw;if(n.itens.length===0){alert("Adicione pelo menos um produto ou servio");return}if(!ie){alert(" No  possvel salvar venda sem caixa aberto. Abra um caixa primeiro.");return}if(!E){M(!0);try{if(n.id){await V.put(`/vendas/${n.id}`,{cliente_id:(ee=n.cliente)==null?void 0:ee.id,funcionario_id:n.funcionario_id,itens:n.itens.map(Ga=>{var Su;return{tipo:Ga.tipo,produto_id:Ga.produto_id,servico_descricao:Ga.servico_descricao,quantidade:Ga.quantidade,preco_unitario:Ga.preco_unitario||Ga.preco_venda,desconto_item:0,subtotal:Ga.subtotal,lote_id:Ga.lote_id,pet_id:Ga.pet_id||((Su=n.pet)==null?void 0:Su.id)}}),desconto_valor:0,desconto_percentual:0,observacoes:n.observacoes,tem_entrega:n.tem_entrega,taxa_entrega:((Ce=n.entrega)==null?void 0:Ce.taxa_entrega_total)||0,endereco_entrega:(Be=n.entrega)==null?void 0:Be.endereco_completo,observacoes_entrega:(Me=n.entrega)==null?void 0:Me.observacoes_entrega,distancia_km:(Qe=n.entrega)==null?void 0:Qe.distancia_km,valor_por_km:(_t=n.entrega)==null?void 0:_t.valor_por_km,loja_origem:(Tt=n.entrega)==null?void 0:Tt.loja_origem,entregador_id:n.entregador_id}),console.log(" DEBUG - Payload sendo enviado:",{tem_entrega:n.tem_entrega,entregador_id:n.entregador_id,vendaAtual_completo:n});let Ia=0;try{Ia=(await V.get(`/vendas/${n.id}/pagamentos`)).data.total_pago||0}catch(Ga){console.error("Erro ao buscar pagamentos:",Ga)}const Yi=n.total;let Yo="aberta";Ia>=Yi-.01?Yo="finalizada":Ia>0&&(Yo="baixa_parcial"),n.status!==Yo&&(await V.patch(`/vendas/${n.id}/status`,{status:Yo}),console.log(` Status atualizado: ${n.status}  ${Yo}`)),alert("Venda atualizada com sucesso!"),Vs()}else{console.log(" CRIANDO VENDA - Verso 2.0 - DESCONTOS ZERADOS"),console.log("Desconto valor:",0),console.log("Desconto percentual:",0),console.log(" Checkbox Venda Comissionada:",ge),console.log(" Funcionrio Comisso:",Le),console.log(" Funcionrio ID enviado:",(Le==null?void 0:Le.id)||null),ge&&!Le&&console.error(" ERRO: Checkbox marcado mas funcionrio no selecionado!");const Ia=((Gt=n.entrega)==null?void 0:Gt.taxa_entrega_total)||0,Yi=((Er=n.entrega)==null?void 0:Er.taxa_loja)||0,Yo=((qt=n.entrega)==null?void 0:qt.taxa_entregador)||0,Ga=Ia>0?Yi/Ia*100:100,Su=Ia>0?Yo/Ia*100:0,Mw={cliente_id:(ia=n.cliente)==null?void 0:ia.id,funcionario_id:n.funcionario_id,itens:n.itens.map(io=>{var Iw;return{tipo:io.tipo,produto_id:io.produto_id,servico_descricao:io.servico_descricao,quantidade:io.quantidade,preco_unitario:io.preco_unitario||io.preco_venda,desconto_item:0,subtotal:io.subtotal,lote_id:io.lote_id,pet_id:io.pet_id||((Iw=n.pet)==null?void 0:Iw.id)}}),desconto_valor:0,desconto_percentual:0,observacoes:n.observacoes,tem_entrega:n.tem_entrega,taxa_entrega:((ws=n.entrega)==null?void 0:ws.taxa_entrega_total)||0,percentual_taxa_loja:Ga,percentual_taxa_entregador:Su,endereco_entrega:(Xi=n.entrega)==null?void 0:Xi.endereco_completo,observacoes_entrega:(fc=n.entrega)==null?void 0:fc.observacoes_entrega,distancia_km:(j0=n.entrega)==null?void 0:j0.distancia_km,valor_por_km:(Ew=n.entrega)==null?void 0:Ew.valor_por_km,loja_origem:(Aw=n.entrega)==null?void 0:Aw.loja_origem,entregador_id:n.entregador_id};console.log(" PAYLOAD COMPLETO antes de enviar:",JSON.stringify(Mw,null,2)),console.log(" Dados de entrega:",{tem_entrega:n.tem_entrega,entregador_id:n.entregador_id,entregadorSelecionado:je==null?void 0:je.id,vendaAtual_completo:n}),console.log(" Percentuais calculados:",{taxaTotal:Ia,taxaLoja:Yi,taxaEntregador:Yo,percentualLoja:`${Ga.toFixed(2)}%`,percentualEntregador:`${Su.toFixed(2)}%`}),await fP(Mw),alert("Venda salva com sucesso!"),Vs()}Xo()}catch(Ia){console.error(" Erro ao salvar venda:",Ia),console.error(" Resposta do servidor:",(Pw=Ia.response)==null?void 0:Pw.data),console.error(" Status:",(Tw=Ia.response)==null?void 0:Tw.status),console.error(" Headers:",(Ow=Ia.response)==null?void 0:Ow.headers);const Yi=((Rw=(Fw=Ia.response)==null?void 0:Fw.data)==null?void 0:Rw.detail)||((Dw=($w=Ia.response)==null?void 0:$w.data)==null?void 0:Dw.message)||"Erro ao salvar venda";console.error(" Detalhes do erro:",Yi),alert(`Erro ao salvar venda: ${Yi}`)}finally{M(!1)}}},Yr=async ee=>{var Ce;console.log(" DEBUG formasPagamento recebidas:",ee),pt(!0),Pe(!0);try{console.log(" Enviando anlise com mltiplas formas:",ee);const Be=await V.post("/formas-pagamento/analisar-venda",{items:n.itens.map(Me=>({produto_id:Me.produto_id,quantidade:Me.quantidade,preco_venda:Me.preco_unitario||Me.preco_venda,custo:Me.custo})),desconto:n.desconto_valor||0,taxa_entrega:((Ce=n.entrega)==null?void 0:Ce.taxa_entrega_total)||0,formas_pagamento:ee,vendedor_id:n.funcionario_id});console.log(" Resposta da anlise:",Be.data),st(Be.data)}catch(Be){console.error("Erro ao buscar anlise:",Be),alert("Erro ao carregar anlise da venda"),Pe(!1)}finally{pt(!1)}},un=()=>{if(n.itens.length===0){alert("Adicione pelo menos um produto ou servio");return}if(n.status==="finalizada"||n.status==="pago_nf"){alert('Esta venda est finalizada. Clique em "Reabrir Venda" para modificar.');return}p(!0)},Vs=()=>{o({cliente:null,pet:null,itens:[],subtotal:0,desconto_valor:0,desconto_percentual:0,total:0,observacoes:"",funcionario_id:null,entregador_id:(je==null?void 0:je.id)||null,tem_entrega:!1,entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}}),De(!1),ct(null),Ye(""),le(!1)},y0=async ee=>{var Ce,Be,Me;try{const Qe=await W0(ee.id);let _t=null;Qe.cliente_id&&(_t=await Du(Qe.cliente_id));let Tt=[],Gt=0;try{const qt=await V.get(`/vendas/${ee.id}/pagamentos`);Tt=qt.data.pagamentos||[],Gt=qt.data.total_pago||0}catch(qt){console.error("Erro ao buscar pagamentos:",qt)}if(console.log(" Venda carregada - funcionario_id:",Qe.funcionario_id),Qe.funcionario_id)try{const ws=(((Ce=(await V.get("/comissoes/configuracoes/funcionarios")).data)==null?void 0:Ce.data)||[]).find(Xi=>Xi.id===Qe.funcionario_id);ws?(De(!0),ct(ws),console.log(" Funcionrio comisso carregado:",ws)):console.warn(" Funcionrio ID",Qe.funcionario_id,"no encontrado na lista")}catch(qt){console.error("Erro ao carregar funcionrio de comisso:",qt)}else console.log(" Venda sem funcionario_id - limpando estados de comisso"),De(!1),ct(null),Ye("");const Er={id:Qe.id,numero_venda:Qe.numero_venda,data_venda:Qe.data_venda,cliente:_t,pet:null,itens:Qe.itens||[],subtotal:parseFloat(Qe.subtotal||Qe.total),desconto_valor:parseFloat(Qe.desconto_valor||0),desconto_percentual:parseFloat(Qe.desconto_percentual||0),total:parseFloat(Qe.total),observacoes:Qe.observacoes||"",status:Qe.status,tem_entrega:Qe.tem_entrega||!1,entregador_id:Qe.entregador_id||null,entrega:{endereco_completo:Qe.endereco_entrega||"",endereco_id:Qe.endereco_id||null,taxa_entrega_total:parseFloat(parseFloat(Qe.taxa_entrega||0).toFixed(2)),taxa_loja:parseFloat(parseFloat(((Be=Qe.entrega)==null?void 0:Be.taxa_loja)||0).toFixed(2)),taxa_entregador:parseFloat(parseFloat(((Me=Qe.entrega)==null?void 0:Me.taxa_entregador)||0).toFixed(2)),observacoes_entrega:Qe.observacoes_entrega||"",distancia_km:Qe.distancia_km||0,valor_por_km:Qe.valor_por_km||0,loja_origem:Qe.loja_origem||"",status_entrega:Qe.status_entrega||"pendente"},pagamentos:Tt,total_pago:Gt};o(Er),le(!0),window.scrollTo({top:0,behavior:"smooth"})}catch(Qe){console.error("Erro ao reabrir venda:",Qe),alert("Erro ao carregar os dados da venda")}},hc=()=>{le(!1)},J$=async()=>{if(!n.id){Vs();return}if(te&&n.status!==te)try{M(!0),await V.patch(`/vendas/${n.id}/status`,{status:te}),console.log(` Status restaurado para: ${te} (alteraes descartadas)`)}catch(ee){console.error("Erro ao restaurar status:",ee)}finally{M(!1)}ue(null),Vs()},Z$=async()=>{var Ce,Be;if(!(!n.id||!window.confirm(`Deseja realmente excluir esta venda?

Esta ao no pode ser desfeita e o estoque ser devolvido.`)))try{M(!0),await V.delete(`/vendas/${n.id}`),Vs(),Xo(),alert("Venda excluda com sucesso!")}catch(Me){console.error("Erro ao excluir venda:",Me);const Qe=(Be=(Ce=Me.response)==null?void 0:Ce.data)==null?void 0:Be.detail;if(Qe&&typeof Qe=="object"){let _t=` ${Qe.erro||"Erro ao excluir venda"}

`;_t+=`${Qe.mensagem||""}

`,Qe.solucao&&(_t+=` Soluo:
${Qe.solucao}

`),Qe.passos&&Array.isArray(Qe.passos)&&(_t+=` Passos para resolver:
`,Qe.passos.forEach(Tt=>{_t+=`${Tt}
`})),Qe.rota_id&&(_t+=`
 Rota ID: ${Qe.rota_id}`,Qe.rota_status&&(_t+=` (${Qe.rota_status})`)),alert(_t)}else alert(typeof Qe=="string"?Qe:"Erro ao excluir venda. Verifique se no h vnculos pendentes.")}finally{M(!1)}},e7=async()=>{var Ce,Be;if(!(!n.id||!window.confirm(`Deseja reabrir esta venda?

Os pagamentos sero mantidos e o status mudar para "aberta".`))){ue(n.status);try{M(!0),await V.post(`/vendas/${n.id}/reabrir`);const Me=await W0(n.id);let Qe=null;Me.cliente_id&&(Qe=await Du(Me.cliente_id)),o({id:Me.id,numero_venda:Me.numero_venda,data_venda:Me.data_venda,cliente:Qe,pet:null,itens:Me.itens||[],subtotal:parseFloat(Me.subtotal||Me.total),desconto_valor:parseFloat(Me.desconto_valor||0),desconto_percentual:parseFloat(Me.desconto_percentual||0),total:parseFloat(Me.total),observacoes:Me.observacoes||"",status:"aberta",tem_entrega:Me.tem_entrega||!1,entrega:{endereco_completo:Me.endereco_entrega||"",endereco_id:Me.endereco_id||null,taxa_entrega_total:parseFloat(parseFloat(Me.taxa_entrega||0).toFixed(2)),taxa_loja:parseFloat(parseFloat(Me.taxa_loja||0).toFixed(2)),taxa_entregador:parseFloat(parseFloat(Me.taxa_entregador||0).toFixed(2)),observacoes_entrega:Me.observacoes_entrega||"",distancia_km:Me.distancia_km||0,valor_por_km:Me.valor_por_km||0,loja_origem:Me.loja_origem||"",status_entrega:Me.status_entrega||"pendente"}}),le(!1),alert(`Venda reaberta com sucesso! Agora voc pode edit-la.

ATENO: Se voc no fizer alteraes e sair, a venda voltar ao status anterior.`)}catch(Me){console.error("Erro ao reabrir venda:",Me),alert(((Be=(Ce=Me.response)==null?void 0:Ce.data)==null?void 0:Be.detail)||"Erro ao reabrir venda")}finally{M(!1)}}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vh,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ponto de Venda"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar venda (Ex: 0011)",value:Q,onChange:ee=>ne(ee.target.value),onKeyPress:ee=>{ee.key==="Enter"&&Q.trim()&&_u()},className:"pl-10 pr-4 py-2 w-64 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"}),e.jsx(wl,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]}),e.jsx("button",{onClick:_u,disabled:!Q.trim()||E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Buscar"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[n.cliente&&e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-orange-50 border-2 border-orange-400 rounded-lg transition-colors relative",title:"Lista de espera - Produtos sem estoque",children:[e.jsx(JA,{className:"w-5 h-5 text-orange-500"}),F>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:F})]}),n.cliente&&e.jsxs("button",{onClick:()=>{Z(!0),n.id&&Ur(n.id)},className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-yellow-50 border-2 border-yellow-400 rounded-lg transition-colors",title:"Ver oportunidades de venda",children:[e.jsx(P4,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),oe.length>0&&e.jsx("span",{className:"font-semibold text-yellow-600",children:Math.min(oe.length,6)})]}),e.jsx(dz,{onAbrirCaixa:()=>y(!0)},re),e.jsxs("button",{onClick:()=>t("/meus-caixas"),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg transition-colors",title:"Ver histrico de caixas",children:[e.jsx(_d,{className:"w-5 h-5"}),e.jsx("span",{children:"Meus Caixas"})]}),!z&&n.id&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:J$,disabled:E,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancelar Edio"})]}),e.jsxs("button",{onClick:Z$,disabled:E,className:"flex items-center space-x-2 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx($o,{className:"w-5 h-5"}),e.jsx("span",{children:"Excluir"})]})]}),e.jsxs("button",{onClick:rr,disabled:E||z||!ie,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Salvar venda atual":" Caixa fechado - Abra o caixa para salvar vendas",children:[e.jsx(Jm,{className:"w-5 h-5"}),e.jsx("span",{children:"Salvar"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs("button",{onClick:un,disabled:E||n.status==="finalizada"||n.status==="pago_nf"||!ie,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Registrar pagamento da venda":" Caixa fechado - Abra o caixa para registrar recebimentos",children:[e.jsx(Nd,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]})]})]})}),!ie&&!z&&e.jsx("div",{className:"bg-red-50 border-b border-red-200 px-6 py-3",children:e.jsx("div",{className:"flex items-center justify-center max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-800",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-lg",children:" CAIXA FECHADO"}),e.jsx("span",{className:"text-sm",children:"-  necessrio abrir o caixa para registrar vendas e recebimentos"})]})})}),n.id&&n.numero_venda&&e.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-1.5",children:e.jsxs("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Venda:"}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white px-2 py-0.5 rounded border border-blue-300",children:[e.jsxs("span",{className:"font-bold text-blue-700 text-sm",children:["#",n.numero_venda]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.numero_venda);const ee=event.target.closest("button"),Ce=ee.innerHTML;ee.innerHTML="",ee.classList.add("text-green-600"),setTimeout(()=>{ee.innerHTML=Ce,ee.classList.remove("text-green-600")},1500)},className:"text-blue-600 hover:text-blue-800 transition-colors text-xs",title:"Copiar nmero da venda",children:""})]})]}),n.data_venda&&e.jsx("span",{className:"text-xs text-blue-600",children:(()=>{const ee=n.data_venda;if(typeof ee=="string"&&ee.includes("T")){const[Ce]=ee.split("T"),[Be,Me,Qe]=Ce.split("-");return`${Qe}/${Me}/${Be}`}return new Date(ee).toLocaleDateString("pt-BR")})()})]})}),z&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Modo Visualizao - Venda ",n.status==="finalizada"?"Finalizada":n.status==="baixa_parcial"?"com Baixa Parcial":"Aberta"]}),e.jsx("span",{className:"text-sm",children:"(Clique em Editar para modificar)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(uz,{venda:n}),e.jsxs("button",{onClick:()=>{le(!1),Vs()},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Voltar"]}),(n.status==="finalizada"||n.status==="baixa_parcial")&&e.jsxs("button",{onClick:e7,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Reabrir Venda"]}),n.status==="aberta"&&e.jsx("button",{onClick:hc,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors",children:"Editar"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(jh,{className:"w-5 h-5 mr-2 text-blue-600"}),"Cliente"]}),n.cliente&&!z&&e.jsx("button",{onClick:()=>o({...n,cliente:null,pet:null}),className:"text-sm text-red-600 hover:text-red-700",children:"Remover"})]}),n.cliente?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-blue-900",children:n.cliente.nome}),e.jsxs("div",{className:"text-sm text-blue-700 mt-1",children:[n.cliente.cpf&&`CPF: ${n.cliente.cpf}`,n.cliente.telefone&&`  Tel: ${n.cliente.telefone}`]})]})}),n.cliente.credito>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_d,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Crdito Disponvel:"})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",parseFloat(n.cliente.credito||0).toFixed(2).replace(".",",")]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" Este crdito pode ser usado como forma de pagamento"})]}),A&&A.total_vendas>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-300",children:e.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-yellow-900",children:[A.total_vendas," venda(s) em aberto"]}),e.jsxs("div",{className:"text-xs text-yellow-700",children:["Total: R$ ",A.total_em_aberto.toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>_(!0),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs font-medium rounded transition-colors",children:"Ver Vendas"})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300 flex gap-2",children:[e.jsxs("button",{onClick:()=>S(!0),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:[e.jsx(q9,{className:"w-4 h-4"}),"Histrico"]}),!z&&e.jsx("button",{onClick:()=>{o({...n,cliente:null,pet:null}),T(null)},className:"px-4 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Trocar"})]})]}),n.cliente.pets&&n.cliente.pets.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pet (opcional)"}),e.jsxs("select",{value:((vw=n.pet)==null?void 0:vw.id)||"",onChange:ee=>{const Ce=n.cliente.pets.find(Be=>Be.id===parseInt(ee.target.value));Te(Ce||null)},disabled:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Sem pet especfico"}),n.cliente.pets.map(ee=>e.jsxs("option",{value:ee.id,children:[ee.codigo," - ",ee.nome," (",ee.especie,ee.raca&&` - ${ee.raca}`,")"]},ee.id))]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:i,onChange:ee=>l(ee.target.value),placeholder:"Digite nome, CPF ou telefone do cliente...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:z}),e.jsx(wl,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"})]}),e.jsxs("button",{onClick:()=>v(!0),disabled:z,className:"flex items-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wn,{className:"w-5 h-5"}),e.jsx("span",{children:"Novo"})]})]}),u.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:u.map(ee=>e.jsxs("button",{onClick:()=>G(ee),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ee.nome}),e.jsxs("div",{className:"text-sm text-gray-500",children:[ee.cpf&&`CPF: ${ee.cpf}`,ee.telefone&&`  ${ee.telefone}`]}),ee.pets&&ee.pets.length>0&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[ee.pets.length," pet(s)"]})]},ee.id))})]}),i.length>=2&&u.length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"Nenhum cliente encontrado"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx($s,{className:"w-5 h-5 mr-2 text-blue-600"}),"Produtos e Servios"]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{ref:Ze,type:"text",value:c,onChange:ee=>d(ee.target.value),placeholder:"Digite o nome do produto, cdigo de barras ou servio...",disabled:z,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",autoFocus:!z}),e.jsx(wl,{className:"w-5 h-5 text-gray-400 absolute right-3"})]}),x.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(ee=>e.jsx("button",{onClick:()=>Xe(ee),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b last:border-b-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:ee.nome}),ee.tipo_produto==="VARIACAO"&&I4(ee)&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium mt-0.5",children:[" ",I4(ee)]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[ee.codigo&&`Cd: ${ee.codigo}`,ee.tipo_produto==="KIT"&&ee.tipo_kit==="VIRTUAL"?ee.estoque_virtual!==void 0&&`  Estoque: ${ee.estoque_virtual}`:ee.estoque_atual!==void 0&&`  Estoque: ${ee.estoque_atual}`]})]}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["R$ ",parseFloat(ee.preco_venda).toFixed(2)]})]})},ee.id))})]}),n.itens.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx($s,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum item adicionado"}),e.jsx("p",{className:"text-sm mt-1",children:"Busque e adicione produtos ou servios"})]}):e.jsx("div",{className:"space-y-3",children:n.itens.map((ee,Ce)=>{var _t;const Be=ee.tipo_produto==="KIT",Me=Nt[Ce],Qe=Be&&ee.composicao_kit&&ee.composicao_kit.length>0;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-400 space-y-3 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>!z&&f0(ee),children:[e.jsxs("div",{className:"flex-1 flex items-start gap-2",children:[Qe&&e.jsx("button",{onClick:Tt=>{Tt.stopPropagation(),sr(Ce)},className:"mt-1 text-gray-500 hover:text-blue-600 transition-colors",children:Me?e.jsx(ql,{className:"w-5 h-5"}):e.jsx(ad,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ee.produto_nome}),Be&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[e.jsx(tP,{className:"w-3 h-3"}),"KIT"]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[ee.quantidade," Unidade",ee.quantidade!==1?"s":""," x R$ ",ee.preco_unitario.toFixed(2),ee.desconto_valor>0&&e.jsxs("span",{className:"text-orange-600 ml-1",children:["com R$ ",ee.desconto_valor.toFixed(2)," de desconto"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",onClick:Tt=>Tt.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-white border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>vt(Ce,-1),disabled:z,className:"p-2 hover:bg-gray-100 rounded-l-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(gg,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:ee.quantidade,onChange:Tt=>{const Gt=parseFloat(Tt.target.value)||0,Er=n.itens.map((qt,ia)=>{if(ia===Ce){const ws=Math.max(.001,Gt),Xi=ws*qt.preco_unitario;let fc=qt.desconto_valor||0;qt.tipo_desconto_aplicado==="percentual"&&qt.desconto_percentual>0&&(fc=Xi*qt.desconto_percentual/100);const j0=Xi-fc;return{...qt,quantidade:ws,desconto_valor:fc,subtotal:j0}}return qt});Or(Er)},disabled:z,step:"0.001",min:"0.001",className:"w-20 px-2 py-1 text-center font-medium border-none focus:ring-0 disabled:bg-gray-50"}),e.jsx("button",{onClick:()=>vt(Ce,1),disabled:z,className:"p-2 hover:bg-gray-100 rounded-r-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(wn,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 w-24 text-right",children:["R$ ",ee.subtotal.toFixed(2)]}),e.jsx("button",{onClick:()=>nt(Ce),disabled:z,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx($o,{className:"w-5 h-5"})})]})]}),Qe&&Me&&e.jsxs("div",{className:"ml-7 mt-3 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Composio do KIT"}),e.jsx("div",{className:"space-y-1.5",children:ee.composicao_kit.map((Tt,Gt)=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-1.5 px-2 rounded hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:Tt.produto_nome})]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:[Tt.quantidade,"x"]})]},Gt))}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Componentes apenas informativos (no editveis)"})]}),((_t=n.cliente)==null?void 0:_t.pets)&&n.cliente.pets.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",onClick:Tt=>Tt.stopPropagation(),children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 w-16",children:"Pet:"}),e.jsxs("select",{value:ee.pet_id||"",onChange:Tt=>{const Gt=n.itens.map((Er,qt)=>qt===Ce?{...Er,pet_id:Tt.target.value?parseInt(Tt.target.value):null}:Er);o({...n,itens:Gt})},disabled:z,className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"No especificado"}),n.cliente.pets.map(Tt=>e.jsxs("option",{value:Tt.id,children:[Tt.codigo," - ",Tt.nome]},Tt.id))]})]})]},Ce)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Observaes"}),e.jsx("textarea",{value:n.observacoes||"",onChange:ee=>o({...n,observacoes:ee.target.value}),placeholder:"Observaes da venda (opcional)...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:3})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Entrega"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.tem_entrega,onChange:ee=>{var Qe;const Ce=ee.target.checked,Be=Ce&&((Qe=n.entrega)==null?void 0:Qe.taxa_entrega_total)||0,Me=n.subtotal+Be;o({...n,tem_entrega:Ce,total:Me,entrega:Ce?n.entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}})},disabled:z,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tem entrega?"})]})]}),n.tem_entrega&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo Completo *"}),n.cliente&&e.jsxs("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Endereos cadastrados:"}),e.jsxs("button",{type:"button",onClick:ee=>{ee.preventDefault(),ee.stopPropagation(),Dn()},disabled:z,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(wn,{size:14}),"Adicionar Endereo"]})]}),e.jsxs("div",{className:"space-y-2",children:[(n.cliente.endereco||n.cliente.cidade)&&e.jsxs("button",{type:"button",onClick:ee=>{ee.preventDefault(),ee.stopPropagation();const Ce=`${n.cliente.endereco}${n.cliente.numero?", "+n.cliente.numero:""}${n.cliente.complemento?" - "+n.cliente.complemento:""}, ${n.cliente.bairro}, ${n.cliente.cidade}/${n.cliente.estado}`;o({...n,entrega:{...n.entrega,endereco_completo:Ce}})},disabled:z,className:"w-full text-left px-3 py-2 bg-white hover:bg-blue-100 border border-blue-300 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"font-medium text-blue-700",children:" Cadastro Principal:"})," ",e.jsxs("span",{className:"text-gray-700",children:[n.cliente.endereco,", ",n.cliente.numero," - ",n.cliente.bairro]})]}),n.cliente.enderecos_adicionais&&n.cliente.enderecos_adicionais.map((ee,Ce)=>e.jsxs("button",{type:"button",onClick:Be=>{Be.preventDefault(),Be.stopPropagation();const Me=`${ee.endereco}, ${ee.numero}${ee.complemento?" - "+ee.complemento:""}, ${ee.bairro}, ${ee.cidade}/${ee.estado}`;o({...n,entrega:{...n.entrega,endereco_completo:Me}})},disabled:z,className:"w-full text-left px-3 py-2 bg-white hover:bg-blue-100 border border-blue-300 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded mr-2 ${ee.tipo==="entrega"?"bg-blue-100 text-blue-800":ee.tipo==="cobranca"?"bg-green-100 text-green-800":ee.tipo==="comercial"?"bg-purple-100 text-purple-800":ee.tipo==="residencial"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:[ee.tipo==="entrega"?"":ee.tipo==="cobranca"?"":ee.tipo==="comercial"?"":ee.tipo==="residencial"?"":""," ",ee.apelido||ee.tipo]}),e.jsxs("span",{className:"text-gray-700",children:[ee.endereco,", ",ee.numero," - ",ee.bairro]})]},Ce)),!n.cliente.endereco&&(!n.cliente.enderecos_adicionais||n.cliente.enderecos_adicionais.length===0)&&e.jsx("p",{className:"text-sm text-gray-600 italic",children:'Nenhum endereo cadastrado. Clique em "+ Adicionar Endereo"'})]})]}),e.jsx("textarea",{value:((yw=n.entrega)==null?void 0:yw.endereco_completo)??"",onChange:ee=>o({...n,entrega:{...n.entrega,endereco_completo:ee.target.value}}),placeholder:"Rua, nmero, complemento, bairro, cidade...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entregador"}),e.jsxs("select",{value:(je==null?void 0:je.id)||"",onChange:ee=>{const Ce=Oe.find(Be=>Be.id===parseInt(ee.target.value));Re(Ce),o({...n,entregador_id:(Ce==null?void 0:Ce.id)||null}),Ce&&er(Ce)},disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Selecione um entregador"}),Oe.map(ee=>e.jsxs("option",{value:ee.id,children:[ee.nome_fantasia||ee.nome,ee.entregador_padrao&&" (Padro)"]},ee.id))]}),je&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Modelo: ",je.modelo_custo_entrega==="taxa_fixa"?" Taxa Fixa":je.modelo_custo_entrega==="por_km"?" Por KM":je.modelo_custo_entrega==="rateio_rh"?" Rateio RH":" Configurao Global"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa de Entrega Total"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:((jw=n.entrega)==null?void 0:jw.taxa_entrega_total)??0,onChange:ee=>{var Er;const Ce=parseFloat(ee.target.value)||0,Be=parseFloat(Ce.toFixed(2)),Me=((Er=n.entrega)==null?void 0:Er.taxa_loja)||0,Qe=parseFloat((Ce-Me).toFixed(2)),_t={...n,entrega:{...n.entrega,taxa_entrega_total:Be,taxa_loja:parseFloat(Me.toFixed(2)),taxa_entregador:Qe}},Tt=_t.tem_entrega?Be:0,Gt=parseFloat((_t.subtotal+Tt).toFixed(2));o({..._t,total:Gt})},disabled:z,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa Loja"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:((Nw=n.entrega)==null?void 0:Nw.taxa_entrega_total)??0,value:parseFloat((((ww=n.entrega)==null?void 0:ww.taxa_loja)??0).toFixed(2)),onChange:ee=>{var _t;const Ce=parseFloat(ee.target.value)||0,Be=((_t=n.entrega)==null?void 0:_t.taxa_entrega_total)||0,Me=parseFloat(Ce.toFixed(2)),Qe=parseFloat((Be-Ce).toFixed(2));o({...n,entrega:{...n.entrega,taxa_loja:Me,taxa_entregador:Qe}})},disabled:z,className:"w-full pl-12 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa Entregador"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:((_w=n.entrega)==null?void 0:_w.taxa_entrega_total)??0,value:parseFloat((((Sw=n.entrega)==null?void 0:Sw.taxa_entregador)??0).toFixed(2)),onChange:ee=>{var _t;const Ce=parseFloat(ee.target.value)||0,Be=((_t=n.entrega)==null?void 0:_t.taxa_entrega_total)||0,Me=parseFloat(Ce.toFixed(2)),Qe=parseFloat((Be-Ce).toFixed(2));o({...n,entrega:{...n.entrega,taxa_entregador:Me,taxa_loja:Qe}})},disabled:z,className:"w-full pl-12 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Preencha a taxa total e depois divida entre loja e entregador. Ao alterar uma, a outra  calculada automaticamente."}),je&&He>0&&e.jsxs("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600",children:""}),e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"Custo Operacional"})]}),e.jsxs("span",{className:"text-sm font-semibold text-amber-700",children:["R$ ",He.toFixed(2)]})]}),e.jsxs("p",{className:"text-xs text-amber-600 mt-1 italic",children:[je.nome_fantasia||je.nome," -",je.modelo_custo_entrega==="taxa_fixa"&&" Taxa Fixa",je.modelo_custo_entrega==="por_km"&&" Valor por KM",je.modelo_custo_entrega==="rateio_rh"&&" Rateio de RH"," ","(no aparece no cupom)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes da Entrega"}),e.jsx("textarea",{value:((Cw=n.entrega)==null?void 0:Cw.observacoes_entrega)??"",onChange:ee=>o({...n,entrega:{...n.entrega,observacoes_entrega:ee.target.value}}),placeholder:"Horrio preferencial, ponto de referncia...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:2})]})]})]}),n.itens.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total bruto:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",(n.subtotal+n.desconto_valor).toFixed(2)]})]}),n.desconto_valor>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-orange-600",children:[(n.desconto_valor/(n.subtotal+n.desconto_valor)*100).toFixed(2),"% de desconto:"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-orange-600",children:["R$ ",n.desconto_valor.toFixed(2)]}),e.jsx("button",{onClick:b0,disabled:z,className:"p-1 text-blue-600 hover:bg-blue-50 rounded disabled:opacity-50",title:"Aplicar desconto",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.tem_entrega&&e.jsxs("div",{className:"flex justify-between text-blue-600",children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["+ R$ ",(((kw=n.entrega)==null?void 0:kw.taxa_entrega_total)||0).toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total da Venda:"}),e.jsxs("span",{children:["R$ ",n.total.toFixed(2)]})]})}),he>0&&e.jsxs("div",{className:"flex justify-between text-sm text-blue-600 bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium",children:"Total de Impostos:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",he]})]}),n.total_pago>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-green-600 border-t pt-3",children:[e.jsx("span",{className:"font-medium",children:"(-) Valor Pago:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",n.total_pago.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-2xl font-bold border-t-2 pt-3",children:[e.jsx("span",{className:n.total-n.total_pago>0?"text-orange-600":"text-green-600",children:n.total-n.total_pago>0?"Saldo Restante:":"Totalmente Pago:"}),e.jsxs("span",{className:n.total-n.total_pago>0?"text-orange-600":"text-green-600",children:["R$ ",Math.max(0,n.total-n.total_pago).toFixed(2)]})]})]}),!n.total_pago&&e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-2xl font-bold text-gray-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",n.total.toFixed(2)]})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Comisso"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ge,onChange:ee=>{De(ee.target.checked),ee.target.checked||ct(null)},disabled:z,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Venda comissionada?"})]})]}),ge&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Funcionrio/Veterinrio * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(apenas com comisso configurada)"})]}),Le?e.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-300 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:Le.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-900",children:Le.nome}),e.jsx("div",{className:"text-sm text-green-700 capitalize",children:Le.cargo})]})]}),e.jsx("button",{onClick:()=>{ct(null),Ye("")},disabled:z,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors disabled:cursor-not-allowed",title:"Remover seleo",children:e.jsx(Vt,{size:20})})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:Fe,placeholder:"Buscar funcionrio ou veterinrio...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",onFocus:async()=>{if(!z)try{const ee=await V.get("/comissoes/configuracoes/funcionarios");xe(ee.data.data||[])}catch(ee){console.error("Erro ao buscar funcionrios:",ee)}},onChange:async ee=>{const Ce=ee.target.value;Ye(Ce);try{const Me=(await V.get("/comissoes/configuracoes/funcionarios")).data.data||[],Qe=Ce?Me.filter(_t=>_t.nome.toLowerCase().includes(Ce.toLowerCase())):Me;xe(Qe)}catch(Be){console.error("Erro ao buscar funcionrios:",Be)}}}),tt.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 rounded-lg max-h-48 overflow-y-auto",children:tt.map(ee=>e.jsxs("button",{onClick:()=>{ct(ee),xe([]),Ye("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:ee.nome}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:ee.cargo})]},ee.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" A comisso ser calculada automaticamente conforme configurado no mdulo de comisses"})]})]})]}),n.itens.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[!ie&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:' Caixa fechado - Use o boto "Abrir Caixa" no topo da pgina para continuar'})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.itens.length>0&&!n.id&&e.jsxs("button",{onClick:()=>{window.confirm("Descartar venda atual sem salvar?")&&Vs()},disabled:E||z,className:"flex items-center space-x-2 px-4 py-3 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-red-200",title:"Descartar venda atual e comear uma nova",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Nova Venda"})]}),e.jsxs("button",{onClick:rr,disabled:E||z||!ie,className:"flex items-center space-x-2 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Salvar venda atual":" Caixa fechado - Abra o caixa para salvar vendas",children:[e.jsx(Jm,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Salvar Venda"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs("button",{onClick:un,disabled:E||n.status==="finalizada"||n.status==="pago_nf"||!ie,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Registrar pagamento da venda":" Caixa fechado - Abra o caixa para registrar recebimentos",children:[e.jsx(Nd,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]})]})]})]})]}),n.cliente&&X&&e.jsx("div",{className:"w-80 bg-gray-50 border-l flex flex-col overflow-hidden",children:e.jsx(pz,{clienteId:n.cliente.id})}),n.cliente&&e.jsx("button",{onClick:()=>P(!X),className:"fixed right-0 top-1/2 -translate-y-1/2 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-l-lg shadow-lg transition-all z-10",style:{right:X?"320px":"0"},title:X?"Recolher informaes do cliente":"Expandir informaes do cliente",children:X?e.jsx(ad,{className:"w-5 h-5"}):e.jsx(jh,{className:"w-5 h-5"})}),Mt&&e.jsxs("div",{className:"w-52 bg-white border-l flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-900 flex items-center",children:[e.jsx(Vl,{className:"w-4 h-4 mr-2 text-blue-600"}),"Vendas Recentes"]}),e.jsx("button",{onClick:()=>ut(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Fechar painel",children:e.jsx(Vt,{className:"w-4 h-4 text-gray-500"})})]}),e.jsx("div",{className:"flex space-x-1 mb-3",children:["24h","7d","30d"].map(ee=>e.jsxs("button",{onClick:()=>Y(ee),className:`flex-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors ${I===ee?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ee==="24h"&&"ltimas 24h",ee==="7d"&&"7 dias",ee==="30d"&&"30 dias"]},ee))}),e.jsx("div",{className:"flex space-x-1 mb-2",children:[{id:"todas",label:"Todas"},{id:"pago",label:"Pago"},{id:"aberta",label:"Aberta"}].map(ee=>e.jsx("button",{onClick:()=>W(ee.id),className:`flex-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors ${D===ee.id?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ee.label},ee.id))}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:ee=>B(ee.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Apenas com entrega"})]}),e.jsx("div",{className:"px-2 pb-2",children:e.jsx("input",{type:"text",value:O,onChange:ee=>L(ee.target.value),placeholder:"Buscar por nmero...",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:U.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Bt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"Nenhuma venda encontrada"})]}):U.map(ee=>e.jsxs("div",{onClick:()=>y0(ee),className:"bg-gray-50 rounded-lg p-2.5 border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:ee.cliente_nome||"Cliente no informado"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["#",ee.numero_venda]})]}),e.jsxs("div",{className:"text-right ml-2 flex-shrink-0",children:[ee.status==="baixa_parcial"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[10px] text-gray-500",children:"Pago"}),e.jsxs("div",{className:"text-xs font-semibold text-green-600",children:["R$ ",(ee.valor_pago||0).toFixed(2)]}),e.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5",children:["de R$ ",(ee.total||0).toFixed(2)]})]}):e.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["R$ ",(ee.total||0).toFixed(2)]}),e.jsxs("div",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded-full mt-1 inline-block ${ee.status==="pago_nf"?"bg-emerald-100 text-emerald-700":ee.status==="finalizada"?"bg-green-100 text-green-700":ee.status==="baixa_parcial"?"bg-blue-100 text-blue-700":ee.status==="aberta"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[ee.status==="pago_nf"&&"Pago NF",ee.status==="finalizada"&&"Pago",ee.status==="baixa_parcial"&&"Parcial",ee.status==="aberta"&&"Aberta",ee.status==="cancelada"&&"Cancelada"]})]})]}),e.jsx("div",{className:"text-[10px] text-gray-500",children:(()=>{const Ce=ee.data_venda;if(typeof Ce=="string"&&Ce.includes("T")){const[Be,Me]=Ce.split("T"),Qe=Me.split("-")[0].split("+")[0],[_t,Tt,Gt]=Be.split("-"),[Er,qt]=Qe.split(":");return`${Gt}/${Tt} ${Er}:${qt}`}return new Date(Ce).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})()})]},ee.id))})]}),H&&n.cliente&&e.jsx("div",{className:"fixed inset-0 z-40",children:e.jsxs("div",{className:"absolute top-0 right-0 w-80 h-full bg-gray-50 border-l border-gray-300 shadow-lg flex flex-col animate-in slide-in-from-right duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-300 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P4,{className:"w-4 h-4 text-gray-600"}),e.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Oportunidades"})]}),e.jsx("button",{onClick:()=>Z(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx(Vt,{className:"w-4 h-4 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[oe.slice(0,5).map(ee=>e.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:ee.titulo}),e.jsx("p",{className:"text-xs text-gray-700 mb-2 leading-relaxed",children:ee.descricao_curta}),e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs mt-2",children:[e.jsxs("button",{onClick:()=>{qs("oportunidade_convertida",ee),console.log("Adicionar ao carrinho:",ee.id)},className:"flex items-center gap-1 text-green-500 hover:text-green-600 transition-colors whitespace-nowrap font-medium",title:"Adicionar ao carrinho",children:[e.jsx(wn,{className:"w-3 h-3"}),e.jsx("span",{children:"Adicionar"})]}),e.jsx("button",{onClick:()=>{qs("oportunidade_refinada",ee),console.log("Buscar alternativa:",ee.id)},className:"text-orange-600 hover:text-orange-700 transition-colors whitespace-nowrap flex-1 text-center font-medium",title:"Ver alternativa",children:"Alternativa"}),e.jsxs("button",{onClick:()=>{qs("oportunidade_rejeitada",ee),de(Ce=>Ce.filter(Be=>Be.id!==ee.id))},className:"flex items-center gap-1 text-red-500 hover:text-red-600 transition-colors whitespace-nowrap font-medium",title:"Ignorar sugesto",children:[e.jsx("span",{children:"Ignorar"}),e.jsx(Vt,{className:"w-3 h-3"})]})]})]},ee.id)),oe.length===0&&e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:e.jsx("p",{className:"text-xs",children:"Nenhuma oportunidade disponvel"})})]}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-white",children:e.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:oe.length>0?`${Math.min(oe.length,6)} oportunidades`:""})})]})}),e.jsx("button",{onClick:()=>ut(!Mt),className:"fixed right-0 bottom-20 bg-blue-600 hover:bg-blue-700 text-white rounded-l-lg shadow-lg transition-all z-10 flex items-center gap-1",style:{right:Mt?"208px":"0",padding:Mt?"6px":"6px 8px"},title:Mt?"Recolher vendas recentes":"Expandir vendas recentes",children:Mt?e.jsx(ad,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(z9,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:"Vendas"})]})}),b&&e.jsx(QB,{venda:n,onClose:()=>p(!1),onAnalisarVenda:s?Yr:null,onConfirmar:async()=>{if(p(!1),z&&n.id)try{const Ce=(await V.get(`/vendas/${n.id}`)).data;let Be=[],Me=0;try{const Qe=await V.get(`/vendas/${n.id}/pagamentos`);Be=Qe.data.pagamentos||[],Me=Qe.data.total_pago||0}catch(Qe){console.error("Erro ao buscar pagamentos:",Qe)}o({...Ce,pagamentos:Be,total_pago:Me}),console.log(" Venda recarregada:",Ce)}catch(ee){console.error("Erro ao recarregar venda:",ee)}else Vs();Xo(),ae(ee=>ee+1)},onVendaAtualizada:async()=>{if(n.id){const ee=await W0(n.id);let Ce=[],Be=0;try{const Me=await V.get(`/vendas/${n.id}/pagamentos`);Ce=Me.data.pagamentos||[],Be=Me.data.total_pago||0}catch(Me){console.error("Erro ao buscar pagamentos:",Me)}o({...ee,pagamentos:Ce,total_pago:Be}),le(ee.status==="finalizada"||ee.status==="baixa_parcial"),Xo()}}}),g&&e.jsx(az,{onClose:()=>y(!1),onSucesso:()=>{y(!1),ae(ee=>ee+1),ve(!0)}}),Ee&&e.jsx(fz,{isOpen:Ee,itensCarrinho:n.itens,racaoIdFechada:Je,onClose:()=>{const ee=n.itens.filter(Ce=>{const Be=(Ce.categoria_nome||"").toLowerCase();return Be.includes("rao")||Be.includes("racao")});ee.length>0&&et(ee[ee.length-1].produto_id),Ue(!1)}}),C&&n.cliente&&e.jsx(gz,{isOpen:C,onClose:()=>k(!1),clienteId:n.cliente.id,onPendenciaAdicionada:()=>ar()}),f&&e.jsx(vz,{onClose:()=>v(!1),onClienteCriado:ee=>{G(ee),v(!1)}}),_e&&Se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Adicionar Novo Endereo ao Cliente"}),e.jsx("button",{onClick:is,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Vt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Endereo *"}),e.jsxs("select",{value:Se.tipo,onChange:ee=>Ne({...Se,tipo:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"entrega",children:" Entrega"}),e.jsx("option",{value:"cobranca",children:" Cobrana"}),e.jsx("option",{value:"comercial",children:" Comercial"}),e.jsx("option",{value:"residencial",children:" Residencial"}),e.jsx("option",{value:"trabalho",children:" Trabalho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apelido (opcional)"}),e.jsx("input",{type:"text",value:Se.apelido,onChange:ee=>Ne({...Se,apelido:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Casa da me, Escritrio, Loja"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Se.cep,onChange:ee=>{const Ce=ee.target.value.replace(/\D/g,""),Be=Ce.length>5?`${Ce.slice(0,5)}-${Ce.slice(5,8)}`:Ce;Ne({...Se,cep:Be})},onBlur:ee=>Go(ee.target.value),maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000"}),ot&&e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo *"}),e.jsx("input",{type:"text",value:Se.endereco,onChange:ee=>Ne({...Se,endereco:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:Se.numero,onChange:ee=>Ne({...Se,numero:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:Se.complemento,onChange:ee=>Ne({...Se,complemento:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco, Sala..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:Se.bairro,onChange:ee=>Ne({...Se,bairro:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Centro, Jardim..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{type:"text",value:Se.cidade,onChange:ee=>Ne({...Se,cidade:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"So Paulo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:Se.estado,onChange:ee=>Ne({...Se,estado:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"* Campos obrigatrios"})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:is,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:ls,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Endereo"})]})]})}),lt&&Ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Alterar item da venda"}),e.jsx("button",{onClick:()=>ke(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Vt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:Ie.produto_nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cdigo: ",Ie.produto_codigo]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Preo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:Ie.preco,onChange:ee=>Ae({...Ie,preco:parseFloat(ee.target.value)||0}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",step:"0.001",value:Ie.quantidade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtotal"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"R$"}),e.jsx("input",{type:"text",value:(Ie.preco*Ie.quantidade).toFixed(2),readOnly:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de desconto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ae({...Ie,tipoDesconto:"valor",descontoPercentual:0}),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Ie.tipoDesconto==="valor"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"R$"}),e.jsx("button",{onClick:()=>Ae({...Ie,tipoDesconto:"percentual",descontoValor:0}),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Ie.tipoDesconto==="percentual"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor do desconto"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:Ie.tipoDesconto==="valor"?"R$":"%"}),e.jsx("input",{type:"number",step:"0.01",value:Ie.tipoDesconto==="valor"?Ie.descontoValor:Ie.descontoPercentual,onChange:ee=>{const Ce=parseFloat(ee.target.value)||0;Ie.tipoDesconto==="valor"?Ae({...Ie,descontoValor:Ce}):Ae({...Ie,descontoPercentual:Ce})},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Total bruto"}),e.jsxs("span",{className:"font-medium",children:["R$ ",(Ie.preco*Ie.quantidade).toFixed(2)]})]}),(Ie.descontoValor>0||Ie.descontoPercentual>0)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm text-red-600 mt-1",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",Ie.tipoDesconto==="valor"?Ie.descontoValor.toFixed(2):(Ie.preco*Ie.quantidade*Ie.descontoPercentual/100).toFixed(2)]})]}),e.jsx("div",{className:"flex justify-between text-sm text-orange-600 mt-1",children:e.jsxs("span",{children:[Ie.tipoDesconto==="percentual"&&`${Ie.descontoPercentual.toFixed(2)}% de desconto`,Ie.tipoDesconto==="valor"&&`${(Ie.descontoValor/(Ie.preco*Ie.quantidade)*100).toFixed(2)}% de desconto`]})})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2 pt-2 border-t border-blue-200",children:[e.jsx("span",{children:"Total lquido"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",(Ie.preco*Ie.quantidade-(Ie.tipoDesconto==="valor"?Ie.descontoValor:Ie.preco*Ie.quantidade*Ie.descontoPercentual/100)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-between gap-3",children:[e.jsx("button",{onClick:()=>ke(!1),className:"flex-1 px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fechar"}),e.jsx("button",{onClick:()=>{n.itens.map(ee=>(ee.produto_id===Ie.produto_id&&nt(n.itens.indexOf(ee)),ee)).filter(Boolean),ke(!1)},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Remover"}),e.jsx("button",{onClick:g0,className:"flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Salvar"})]})]})}),it&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" Aplicar desconto"}),e.jsx("button",{onClick:()=>gt(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Vt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total bruto"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",n.subtotal.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de desconto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ct("valor"),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Dt==="valor"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"R$"}),e.jsx("button",{onClick:()=>Ct("percentual"),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Dt==="percentual"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:Dt==="valor"?"R$":"%"}),e.jsx("input",{type:"number",step:"0.01",value:Lt,onChange:ee=>$t(parseFloat(ee.target.value)||0),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-700",children:"Desconto"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["- R$ ",Dt==="valor"?Lt.toFixed(2):(n.subtotal*Lt/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-baseline border-t border-blue-200 pt-2 mt-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total lquido"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",(Dt==="valor"?n.subtotal-Lt:n.subtotal-n.subtotal*Lt/100).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>gt(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fechar"}),e.jsx("button",{onClick:()=>v0(Dt,Lt),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Aplicar"})]})]})}),N&&n.cliente&&e.jsx(mz,{clienteId:n.cliente.id,clienteNome:n.cliente.nome,onClose:()=>_(!1),onSucesso:()=>{V.get(`/clientes/${n.cliente.id}/vendas-em-aberto`).then(ee=>{ee.data.resumo.total_vendas>0?T(ee.data.resumo):T(null)}).catch(()=>T(null))}}),w&&n.cliente&&e.jsx(xz,{clienteId:n.cliente.id,clienteNome:n.cliente.nome,onClose:()=>S(!1)}),s&&e.jsx(hz,{mostrar:ye,onFechar:()=>Pe(!1),dados:We,carregando:xt})]})})}function vz({onClose:t,onClienteCriado:r}){const[a,s]=j.useState({nome:"",telefone:"",cpf:"",email:""}),[n,o]=j.useState(!1),[i,l]=j.useState(""),c=async d=>{if(d.preventDefault(),!a.nome||!a.telefone){l("Nome e telefone so obrigatrios");return}o(!0),l("");try{const u=await V.post("/clientes",{...a,tipo_cadastro:"cliente",tipo_pessoa:"PF"});r(u.data)}catch(u){console.error("Erro:",u),l("Erro ao cadastrar cliente")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Cadastro Rpido"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[i&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),e.jsx("input",{type:"text",value:a.nome,onChange:d=>s({...a,nome:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:a.telefone,onChange:d=>s({...a,telefone:d.target.value}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF"}),e.jsx("input",{type:"text",value:a.cpf,onChange:d=>s({...a,cpf:d.target.value}),placeholder:"000.000.000-00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),e.jsx("input",{type:"email",value:a.email,onChange:d=>s({...a,email:d.target.value}),placeholder:"cliente@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Cadastrando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-5 h-5"}),e.jsx("span",{children:"Cadastrar"})]})})]})]})]})})}function yz(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({data_inicio:"",data_fim:"",status:""});j.useEffect(()=>{l()},[o]);const l=async()=>{try{n(!0);const x={};o.data_inicio&&(x.data_inicio=o.data_inicio),o.data_fim&&(x.data_fim=o.data_fim),o.status&&(x.status_filter=o.status);const h=await ez(x);a(h)}catch(x){console.error("Erro ao carregar caixas:",x),alert("Erro ao carregar histrico de caixas")}finally{n(!1)}},c=async x=>{var h,b;if(confirm("Deseja realmente reabrir este caixa?"))try{await rz(x),alert("Caixa reaberto com sucesso!"),t("/pdv")}catch(p){console.error("Erro ao reabrir caixa:",p),alert(((b=(h=p.response)==null?void 0:h.data)==null?void 0:b.detail)||"Erro ao reabrir caixa")}},d=async(x,h)=>{try{const b=localStorage.getItem("token"),p=await fetch(`http://localhost:8000/caixas/${x}/pdf`,{headers:{Authorization:`Bearer ${b}`}});if(!p.ok)throw new Error("Erro ao gerar PDF");const f=await p.blob(),v=window.URL.createObjectURL(f),g=document.createElement("a");g.href=v,g.download=`Caixa_${h}_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(v),document.body.removeChild(g),alert("PDF baixado com sucesso!")}catch(b){console.error("Erro ao baixar PDF:",b),alert("Erro ao gerar PDF do caixa")}},u=x=>{const h={aberto:{cor:"bg-green-100 text-green-800",icone:Xt,texto:"Aberto"},fechado:{cor:"bg-gray-100 text-gray-800",icone:Qn,texto:"Fechado"}},b=h[x]||h.fechado,p=b.icone;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${b.cor}`,children:[e.jsx(p,{className:"w-4 h-4"}),b.texto]})},m=(x,h)=>{const b=h-x;return{valor:Math.abs(b),tipo:b>0?"sobra":b<0?"falta":"ok"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meus Caixas"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Histrico e gesto dos seus caixas"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:o.data_inicio,onChange:x=>i({...o,data_inicio:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:o.data_fim,onChange:x=>i({...o,data_fim:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o.status,onChange:x=>i({...o,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"aberto",children:"Aberto"}),e.jsx("option",{value:"fechado",children:"Fechado"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>i({data_inicio:"",data_fim:"",status:""}),className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Limpar Filtros"})})]})}),s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando caixas..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[e.jsx(Bt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum caixa encontrado"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.map(x=>{const h=x.status==="fechado"&&x.valor_esperado?m(x.valor_esperado,x.valor_informado):null;return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(fa,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Caixa #",x.numero_caixa]}),e.jsx("p",{className:"text-sm text-gray-600",children:x.usuario_nome})]})]}),u(x.status)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(zi,{className:"w-4 h-4"}),e.jsxs("span",{children:["Abertura: ",new Date(x.data_abertura).toLocaleString("pt-BR")]})]}),x.data_fechamento&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Vl,{className:"w-4 h-4"}),e.jsxs("span",{children:["Fechamento: ",new Date(x.data_fechamento).toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Abertura"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["R$ ",x.valor_abertura.toFixed(2)]})]}),x.status==="fechado"&&x.valor_esperado&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Esperado"}),e.jsxs("div",{className:"text-lg font-semibold text-blue-900",children:["R$ ",x.valor_esperado.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Informado"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:["R$ ",x.valor_informado.toFixed(2)]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h.tipo==="ok"?"bg-gray-50":h.tipo==="sobra"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Diferena"}),e.jsxs("div",{className:`text-lg font-semibold ${h.tipo==="ok"?"text-gray-900":h.tipo==="sobra"?"text-green-900":"text-red-900"}`,children:[h.tipo==="sobra"&&"+",h.tipo==="falta"&&"-","R$ ",h.valor.toFixed(2)]})]})]})]}),(x.observacoes_abertura||x.observacoes_fechamento)&&e.jsxs("div",{className:"border-t pt-4 mb-4",children:[x.observacoes_abertura&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Obs. Abertura:"})," ",x.observacoes_abertura]}),x.observacoes_fechamento&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Obs. Fechamento:"})," ",x.observacoes_fechamento]})]}),x.status==="fechado"&&e.jsxs("div",{className:"border-t pt-4 flex gap-3",children:[e.jsxs("button",{onClick:()=>c(x.id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Gr,{className:"w-4 h-4"}),"Reabrir Caixa"]}),e.jsxs("button",{onClick:()=>d(x.id,x.numero_caixa),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Xm,{className:"w-4 h-4"}),"Baixar PDF"]})]})]})},x.id)})})]})}function jz(){var K,I,Y;const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(""),[x,h]=j.useState(""),[b,p]=j.useState(null),[f,v]=j.useState(null),[g,y]=j.useState(""),[N,_]=j.useState(!1),w=[{value:"",label:"Todas"},{value:"Autorizada",label:"Autorizada"},{value:"Emitida DANFE",label:"Emitida DANFE"},{value:"Cancelada",label:"Cancelada"},{value:"Pendente",label:"Pendente"}];j.useEffect(()=>{S()},[n,i,c]);const S=async()=>{try{s(!0),h("");const D=new URLSearchParams;n&&D.append("situacao",n),i&&D.append("data_inicial",i),c&&D.append("data_final",c);const W=await V.get(`/nfe/?${D.toString()}`);r(W.data.notas||[])}catch(D){console.error("Erro ao carregar notas:",D),h("Erro ao carregar notas fiscais")}finally{s(!1)}},C=async(D,W)=>{try{const R=await V.get(`/nfe/${D}/danfe`,{responseType:"blob"}),B=window.URL.createObjectURL(new Blob([R.data])),O=document.createElement("a");O.href=B,O.setAttribute("download",`danfe_${W}.pdf`),document.body.appendChild(O),O.click(),O.remove()}catch(R){console.error("Erro ao baixar DANFE:",R),alert("Erro ao baixar DANFE")}},k=async(D,W)=>{try{const R=await V.get(`/nfe/${D}/xml`),B=new Blob([R.data.xml],{type:"application/xml"}),O=window.URL.createObjectURL(B),L=document.createElement("a");L.href=O,L.setAttribute("download",`nfe_${W}.xml`),document.body.appendChild(L),L.click(),L.remove()}catch(R){console.error("Erro ao baixar XML:",R),alert("Erro ao baixar XML")}},F=async()=>{var D,W;if(!g||g.length<15){alert("A justificativa deve ter no mnimo 15 caracteres");return}try{_(!0),await V.post(`/nfe/${f.id}/cancelar`,{justificativa:g}),alert("Nota fiscal cancelada com sucesso!"),v(null),y(""),S()}catch(R){console.error("Erro ao cancelar nota:",R),alert(((W=(D=R.response)==null?void 0:D.data)==null?void 0:W.detail)||"Erro ao cancelar nota fiscal")}finally{_(!1)}},q=async(D,W)=>{var R,B;if(confirm(`Deseja realmente excluir a nota ${W}?

Isso apenas remove os dados da nota do sistema, no cancela no Bling/SEFAZ.`))try{await V.delete(`/nfe/${D}`),alert("Nota fiscal excluda com sucesso!"),S()}catch(O){console.error("Erro ao excluir nota:",O),alert(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao excluir nota fiscal")}},A=D=>{switch(D==null?void 0:D.toLowerCase()){case"autorizada":case"emitida danfe":return"bg-green-100 text-green-800";case"cancelada":return"bg-red-100 text-red-800";case"pendente":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},T=D=>{switch(D==null?void 0:D.toLowerCase()){case"autorizada":case"emitida danfe":return e.jsx(Xt,{className:"w-4 h-4"});case"cancelada":return e.jsx(Vt,{className:"w-4 h-4"});case"pendente":return e.jsx(Bt,{className:"w-4 h-4"});default:return e.jsx(bs,{className:"w-4 h-4"})}},U=t.filter(D=>{var R,B,O,L,E,M;if(!u)return!0;const W=u.toLowerCase();return((R=D.numero)==null?void 0:R.toLowerCase().includes(W))||((B=D.serie)==null?void 0:B.toLowerCase().includes(W))||((L=(O=D.cliente)==null?void 0:O.nome)==null?void 0:L.toLowerCase().includes(W))||((M=(E=D.cliente)==null?void 0:E.cpf_cnpj)==null?void 0:M.toLowerCase().includes(W))});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bs,{className:"w-8 h-8 text-blue-600"}),"Notas Fiscais de Sada"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie suas NF-e e NFC-e emitidas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Qm,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"font-semibold text-gray-800",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(wl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nmero, cliente...",value:u,onChange:D=>m(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{children:e.jsx("input",{type:"date",value:i,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{children:e.jsx("input",{type:"date",value:c,onChange:D=>d(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("select",{value:n,onChange:D=>o(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:w.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6 flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),x]}),a?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando notas fiscais..."})]}):U.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(bs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Nenhuma nota encontrada"}),e.jsx("p",{className:"text-gray-600",children:u||n||i||c?"Tente ajustar os filtros":"Emita sua primeira nota fiscal em uma venda"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Emisso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Situao"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(D=>{var W,R,B,O;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.numero}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Srie ",D.serie]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:D.data_emissao?new Date(D.data_emissao).toLocaleDateString("pt-BR"):"-"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((W=D.cliente)==null?void 0:W.nome)||"Cliente no informado"}),e.jsx("div",{className:"text-sm text-gray-500",children:((R=D.cliente)==null?void 0:R.cpf_cnpj)||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${A(D.status)}`,children:[T(D.status),D.status||"Pendente"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",D.valor.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[(((B=D.status)==null?void 0:B.toLowerCase())==="autorizada"||((O=D.status)==null?void 0:O.toLowerCase())==="emitida danfe")&&e.jsx("button",{onClick:()=>v(D),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Cancelar NF-e",children:e.jsx(Qn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>q(D.venda_id,D.numero),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Excluir nota do sistema",children:e.jsx($o,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C(D.id,D.numero),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Baixar DANFE",children:e.jsx(Ky,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(D.id,D.numero),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded",title:"Baixar XML",children:e.jsx(Xm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p(D),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Ver Detalhes",children:e.jsx(Ym,{className:"w-5 h-5"})})]})})]},D.id)})})]})}),!a&&U.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[U.length," ",U.length===1?"nota encontrada":"notas encontradas"]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Detalhes da Nota Fiscal #",b.numero]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Vt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nmero"}),e.jsx("p",{className:"text-gray-900",children:b.numero})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Srie"}),e.jsx("p",{className:"text-gray-900",children:b.serie})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Modelo"}),e.jsx("p",{className:"text-gray-900",children:b.modelo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Tipo"}),e.jsx("p",{className:"text-gray-900",children:b.tipo==="nfe"?"NF-e":"NFC-e"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Chave de Acesso"}),e.jsx("p",{className:"text-gray-900 text-xs break-all",children:b.chave||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:(K=b.cliente)==null?void 0:K.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"CPF/CNPJ"}),e.jsx("p",{className:"text-gray-900",children:(I=b.cliente)==null?void 0:I.cpf_cnpj})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),e.jsxs("p",{className:"text-gray-900 text-lg font-bold",children:["R$ ",b.valor.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Situao"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${A(b.status)}`,children:[T(b.status),b.status]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs("button",{onClick:()=>C(b.id,b.numero),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Ky,{className:"w-5 h-5"}),"Baixar DANFE"]}),e.jsxs("button",{onClick:()=>k(b.id,b.numero),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Xm,{className:"w-5 h-5"}),"Baixar XML"]})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:[e.jsxs("div",{className:"bg-red-50 border-b px-6 py-4 flex items-center gap-3",children:[e.jsx(Qn,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Cancelar Nota Fiscal"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Ateno:"})," O cancelamento de uma nota fiscal  irreversvel e ser enviado para a SEFAZ."]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Nota:"})," #",f.numero," - Srie ",f.serie]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Cliente:"})," ",(Y=f.cliente)==null?void 0:Y.nome]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Justificativa do Cancelamento *"}),e.jsx("textarea",{value:g,onChange:D=>y(D.target.value),placeholder:"Digite o motivo do cancelamento (mnimo 15 caracteres)",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.length,"/15 caracteres"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{v(null),y("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:N,children:"Voltar"}),e.jsx("button",{onClick:F,disabled:N||g.length<15,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Cancelando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-5 h-5"}),"Confirmar Cancelamento"]})})]})]})]})})]})}const Nz=()=>{const{clienteId:t}=rc(),r=Kt(),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState({tipo_evento:"",pet_id:""}),[u,m]=j.useState(!1);j.useEffect(()=>{x(),h()},[t]);const x=async()=>{try{const p=await V.get(`/clientes/${t}`);s(p.data)}catch(p){console.error("Erro ao carregar cliente:",p)}finally{l(!1)}},h=async()=>{try{const p=await V.get(`/pets/cliente/${t}`);o(p.data)}catch(p){console.error("Erro ao carregar pets:",p)}},b=()=>{d({tipo_evento:"",pet_id:""})};return i?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):a?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/clientes"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(jd,{}),"Voltar para clientes"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Timeline de ",a.nome]}),e.jsx("p",{className:"text-gray-600",children:"Histrico completo de eventos e interaes"})]}),e.jsxs("button",{onClick:()=>m(!u),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(D2,{}),"Filtros"]})]}),u&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),e.jsxs("select",{value:c.tipo_evento,onChange:p=>d({...c,tipo_evento:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"venda",children:" Vendas"}),e.jsx("option",{value:"conta_receber",children:" Contas a Receber"}),e.jsx("option",{value:"pet_cadastro",children:" Cadastro de Pet"}),e.jsx("option",{value:"pet_atualizacao",children:" Atualizao de Pet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pet"}),e.jsxs("select",{value:c.pet_id,onChange:p=>d({...c,pet_id:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",disabled:n.length===0,children:[e.jsx("option",{value:"",children:"Todos os pets"}),n.map(p=>e.jsxs("option",{value:p.id,children:[p.nome," - ",p.especie]},p.id))]})]}),e.jsx("div",{className:"col-span-2 flex justify-end gap-2",children:e.jsxs("button",{onClick:b,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(Ro,{}),"Limpar filtros"]})})]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(z2,{clienteId:parseInt(t),limit:100,showHeader:!1})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:"Cliente no encontrado"})})};function wz(){const{id:t}=rc(),r=Kt(),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState([]),[x,h]=j.useState(null),[b,p]=j.useState("entrada"),[f,v]=j.useState({quantidade:"",custo_unitario:"",observacao:"",lote:"",data_validade:"",data_fabricacao:""});j.useEffect(()=>{g()},[t]);const g=async()=>{var I,Y,D;try{l(!0),console.log("Carregando produto ID:",t);const W=await V.get(`/produtos/${t}`);console.log("Produto carregado:",W.data),s(W.data);const R=await V.get(`/estoque/movimentacoes/produto/${t}`);console.log("Movimentaes carregadas:",R.data),o(R.data)}catch(W){console.error("Erro ao carregar dados:",W),console.error("Detalhes do erro:",(I=W.response)==null?void 0:I.data),ze.error(((D=(Y=W.response)==null?void 0:Y.data)==null?void 0:D.detail)||"Erro ao carregar dados do produto")}finally{l(!1)}},y=(I,Y=null)=>{var D,W;if((a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"&&!Y){ze.error(` KIT VIRTUAL no permite movimentao manual de estoque.

O estoque deste kit  calculado automaticamente com base nos componentes.

Para alterar o estoque, movimente os produtos componentes individualmente.`,{duration:6e3});return}p(I),h(Y),v(Y?{quantidade:((D=Y.quantidade)==null?void 0:D.toString())||"",custo_unitario:((W=Y.custo_unitario)==null?void 0:W.toString())||"",observacao:Y.observacao||"",lote:Y.lote_id||"",data_validade:"",data_fabricacao:""}:{quantidade:"",custo_unitario:I==="entrada"&&(a==null?void 0:a.preco_custo)||"",observacao:"",lote:"",data_validade:"",data_fabricacao:"",retornar_componentes:!1}),d(!0)},N=()=>{u.length===n.length?m([]):m(n.map(I=>I.id))},_=I=>{u.includes(I)?m(u.filter(Y=>Y!==I)):m([...u,I])},w=async()=>{var I,Y;if(u.length===0){ze.error("Selecione pelo menos um lanamento");return}if(confirm(`Deseja realmente excluir ${u.length} lanamento(s)?`))try{const W=(await Promise.all(u.map(R=>V.delete(`/estoque/movimentacoes/${R}`)))).flatMap(R=>R.data.componentes_estornados||[]);W.length>0?ze.success(`${u.length} lanamento(s) excludo(s)!
 ${W.length} componente(s) estornado(s)`,{duration:5e3}):ze.success(`${u.length} lanamento(s) excludo(s)`),m([]),g()}catch(D){console.error("Erro ao excluir:",D),ze.error(((Y=(I=D.response)==null?void 0:I.data)==null?void 0:Y.detail)||"Erro ao excluir lanamentos")}},S=async I=>{var Y,D,W;I.preventDefault();try{if(x){const L={quantidade:parseFloat(f.quantidade),custo_unitario:f.custo_unitario?parseFloat(f.custo_unitario):null,observacao:f.observacao||null};await V.patch(`/estoque/movimentacoes/${x.id}`,L),ze.success("Lanamento atualizado com sucesso!"),d(!1),h(null),g();return}let R="/estoque/",B={produto_id:parseInt(t),quantidade:parseFloat(f.quantidade),custo_unitario:f.custo_unitario?parseFloat(f.custo_unitario):null,observacao:f.observacao||null};if(b==="entrada")R+="entrada",B.tipo="entrada",B.motivo="compra",B.numero_lote=f.lote||null,B.data_validade=f.data_validade||null,B.data_fabricacao=f.data_fabricacao||null;else if(b==="saida")R+="saida",B.tipo="saida",B.motivo="saida_manual",B.numero_lote=f.lote||null,B.data_validade=f.data_validade||null,(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&(B.retornar_componentes=f.retornar_componentes===!0);else if(b==="balanco"){const L=parseFloat(f.quantidade),E=(a==null?void 0:a.estoque_atual)||0,M=L-E;R+=M>=0?"entrada":"saida",B.tipo=M>=0?"entrada":"saida",B.quantidade=Math.abs(M),B.motivo="balanco"}const O=await V.post(R,B);if(console.log("Response da entrada:",O.data),b==="entrada"&&O.data){const{custo_anterior:L,custo_unitario:E,variacao_preco:M}=O.data;if(M&&L!==null&&L!==void 0){let z="Lanamento registrado!";M==="aumento"?(z+=`  Custo aumentou de R$ ${L==null?void 0:L.toFixed(2)} para R$ ${E==null?void 0:E.toFixed(2)}`,ze.error(z,{duration:5e3})):M==="reducao"?(z+=`  Custo reduziu de R$ ${L==null?void 0:L.toFixed(2)} para R$ ${E==null?void 0:E.toFixed(2)}`,ze.success(z,{duration:5e3})):M==="estavel"&&(z+=` Custo mantido em R$ ${E==null?void 0:E.toFixed(2)}`,ze(z,{icon:"",duration:3e3}))}else E?ze.success(`Lanamento registrado! Custo: R$ ${E==null?void 0:E.toFixed(2)}`,{duration:3e3}):ze.success("Lanamento registrado com sucesso!")}else if((Y=O.data)!=null&&Y.componentes_sensibilizados&&O.data.componentes_sensibilizados.length>0){const L=O.data.componentes_sensibilizados.length;ze.success(`Lanamento registrado com sucesso!
 ${L} componente(s) sensibilizado(s)`,{duration:4e3})}else ze.success("Lanamento registrado com sucesso!");d(!1),g()}catch(R){console.error("Erro ao registrar lanamento:",R),ze.error(((W=(D=R.response)==null?void 0:D.data)==null?void 0:W.detail)||"Erro ao registrar lanamento")}},C=I=>{if(!I)return"-";const Y=new Date(I);return new Date(Y.getTime()-3*60*60*1e3).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"America/Sao_Paulo"})},k=I=>({compra:"Compra",venda:"Venda",venda_online:"Venda Online",ajuste:"Ajuste",saida_manual:"Sada Manual",devolucao:"Devoluo",perda:"Perda",transferencia:"Transferncia",balanco:"Balano"})[I]||I,F=I=>I.referencia_tipo==="venda"?I.documento&&(I.documento.length===44||I.documento.startsWith("NF"))?{texto:`NF ${I.documento}`,icone:"nf-venda",cor:"text-red-600",link:null}:{texto:`Pedido #${I.referencia_id}`,icone:"pedido",cor:"text-orange-600",link:`/pdv?vendaId=${I.referencia_id}`}:I.motivo==="balanco"?{texto:"Balano",icone:"balanco",cor:"text-blue-600",link:null}:I.tipo==="saida"?{texto:"Sada Manual",icone:"manual",cor:"text-red-600",link:null}:I.tipo==="entrada"&&I.documento&&I.documento.length===44?{texto:`NF ${I.documento.substring(25,34)}`,icone:"nf-entrada",cor:"text-green-600",link:null}:I.tipo==="entrada"&&I.documento?{texto:I.documento,icone:"documento",cor:"text-blue-600",link:`/pdv?vendaId=${I.documento}`}:I.tipo==="entrada"?{texto:"Entrada Manual",icone:"manual",cor:"text-green-600",link:null}:{texto:"Manual",icone:"manual",cor:"text-gray-500",link:null},q=n.filter(I=>I.tipo==="entrada").reduce((I,Y)=>I+parseFloat(Y.quantidade||0),0),A=n.filter(I=>I.tipo==="saida").reduce((I,Y)=>I+parseFloat(Y.quantidade||0),0);if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-gray-500",children:"Carregando..."})});if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-red-500",children:"Produto no encontrado"})});const T=a.estoque_atual||0,U=a.estoque_minimo||0,K=T>U?"text-green-600":T===0?"text-red-600":"text-yellow-600";return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"&&e.jsx("div",{className:"mb-6 bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-indigo-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-indigo-900 mb-1",children:" KIT VIRTUAL - Estoque Calculado Automaticamente"}),e.jsxs("p",{className:"text-sm text-indigo-800",children:["Este  um produto do tipo ",e.jsx("strong",{children:"KIT VIRTUAL"}),". O estoque  calculado automaticamente com base nos componentes que o compem.",e.jsx("br",{}),e.jsx("strong",{children:"No  possvel movimentar o estoque do kit diretamente."})," Para alterar o estoque, movimente os produtos componentes individualmente."]})]})]})}),(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:" KIT FSICO - Estoque Prprio com Sensibilizao"}),e.jsxs("p",{className:"text-sm text-green-800",children:["Este  um produto do tipo ",e.jsx("strong",{children:"KIT FSICO"}),". Possui estoque prprio e independente.",e.jsx("br",{}),e.jsx("strong",{children:"Importante:"})," Ao movimentar o estoque do kit, os estoques dos componentes tambm sero automaticamente sensibilizados na mesma proporo."]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${T>U?"bg-green-100":T===0?"bg-red-100":"bg-yellow-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${K}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>r("/produtos"),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.nome})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Cdigo: ",e.jsx("span",{className:"font-mono",children:a.codigo||a.sku})]}),a.codigo_barras&&e.jsxs("div",{children:["EAN: ",e.jsx("span",{className:"font-mono",children:a.codigo_barras})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Entradas"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:q.toFixed(2)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium mb-1",children:"Total Sadas"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:A.toFixed(2)})]}),e.jsxs("div",{className:`rounded-lg p-3 ${T>U?"bg-blue-50":T===0?"bg-red-50":"bg-yellow-50"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${T>U?"text-blue-600":T===0?"text-red-600":"text-yellow-600"}`,children:"Saldo Atual"}),e.jsxs("div",{className:`text-2xl font-bold ${T>U?"text-blue-700":T===0?"text-red-700":"text-yellow-700"}`,children:[T.toFixed(2)," ",a.unidade||"UN"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"Estoque Mn/Mx"}),e.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[U.toFixed(0)," / ",(a.estoque_maximo||0).toFixed(0)]})]})]}),e.jsx("div",{className:"relative group",children:e.jsxs("button",{onClick:()=>{(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"?ze.error(`KIT VIRTUAL no permite movimentao manual.

Movimente os componentes individualmente.`,{duration:4e3}):d(!0)},disabled:(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL",className:`px-6 py-2 rounded-lg transition-colors flex items-center gap-2 ${(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Incluir lanamento"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lanamentos"}),u.length>0&&e.jsxs("button",{onClick:w,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir (",u.length,")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 w-12",children:e.jsx("input",{type:"checkbox",checked:u.length===n.length&&n.length>0,onChange:N,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data e Hora"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrada"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preo Venda"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preo Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lote"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Observao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma movimentao registrada"})}):n.map((I,Y)=>{const D=F(I),W=Y>0?n[Y-1]:null,R=W&&I.referencia_tipo==="venda"&&W.referencia_tipo==="venda"&&I.referencia_id===W.referencia_id;return e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${R?"border-l-4 border-l-blue-500 bg-blue-50":""}`,onClick:()=>y(I.tipo,I),children:[e.jsx("td",{className:"px-4 py-3 w-12",onClick:B=>B.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:u.includes(I.id),onChange:()=>_(I.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:C(I.created_at)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:I.tipo==="entrada"?e.jsx("span",{className:"text-green-600 font-semibold",children:parseFloat(I.quantidade).toFixed(2)}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:I.tipo==="saida"?e.jsx("span",{className:"text-red-600 font-semibold",children:parseFloat(I.quantidade).toFixed(2)}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900",children:a.preco_venda?`R$ ${a.preco_venda.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:I.custo_unitario?I.variacao_custo?e.jsxs("div",{className:"relative group inline-block",title:`Custo anterior: R$ ${I.variacao_custo.custo_anterior.toFixed(2)}
Custo atual: R$ ${I.variacao_custo.custo_atual.toFixed(2)}
Diferena: R$ ${I.variacao_custo.diferenca_valor.toFixed(2)} (${I.variacao_custo.diferenca_percentual>0?"+":""}${I.variacao_custo.diferenca_percentual.toFixed(1)}%)`,children:[e.jsxs("span",{className:`font-semibold ${I.variacao_custo.tipo==="aumento"?"text-red-600":I.variacao_custo.tipo==="reducao"?"text-green-600":"text-gray-900"}`,children:["R$ ",I.custo_unitario.toFixed(2)]}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-50",children:e.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Variao de Custo"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Anterior: R$ ",I.variacao_custo.custo_anterior.toFixed(2)]}),e.jsxs("div",{children:["Atual: R$ ",I.variacao_custo.custo_atual.toFixed(2)]}),e.jsxs("div",{className:I.variacao_custo.tipo==="aumento"?"text-red-400":"text-green-400",children:[I.variacao_custo.tipo==="aumento"?"":""," R$ ",Math.abs(I.variacao_custo.diferenca_valor).toFixed(2)," (",I.variacao_custo.diferenca_percentual>0?"+":"",I.variacao_custo.diferenca_percentual.toFixed(1),"%)"]})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"border-4 border-transparent border-t-gray-900"})})]})})]}):e.jsxs("span",{className:"text-gray-900",children:["R$ ",I.custo_unitario.toFixed(2)]}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:I.lote_info?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:I.lote_info.nome}),I.lote_info.consumido_acumulado!==void 0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",I.lote_info.consumido_acumulado.toFixed(0),"/",I.lote_info.total_lote.toFixed(0),")"]})]}):I.lote_nome?I.lote_nome:"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",onClick:B=>B.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx("span",{className:"text-blue-600",title:"Mesmo pedido/venda",children:""}),D.link?e.jsx("a",{href:D.link,onClick:B=>{B.preventDefault(),B.stopPropagation(),r(D.link)},className:`${D.cor} font-medium hover:underline cursor-pointer`,children:D.texto}):e.jsx("span",{className:`${D.cor} font-medium`,children:D.texto})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[I.motivo&&I.motivo!=="compra"&&I.motivo!=="venda"&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:k(I.motivo)}),I.observacao]})})]},I.id)})})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x?"Editar Lanamento":"Novo Lanamento"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[!x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p("entrada"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="entrada"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Entrada"}),e.jsx("button",{type:"button",onClick:()=>p("saida"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="saida"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sada"}),e.jsx("button",{type:"button",onClick:()=>p("balanco"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="balanco"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Balano"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:b==="balanco"?"Saldo Total *":"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:f.quantidade,onChange:I=>v({...f,quantidade:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),b==="balanco"&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Estoque atual: ",T,". Digite o novo saldo total."]})]}),b==="entrada"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Compra"}),e.jsx("input",{type:"number",step:"0.01",value:f.custo_unitario,onChange:I=>v({...f,custo_unitario:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nmero do Lote ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:f.lote,onChange:I=>v({...f,lote:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-001"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Validade ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:f.data_validade,onChange:I=>v({...f,data_validade:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Fabricao ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:f.data_fabricacao,onChange:I=>v({...f,data_fabricacao:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),b==="saida"&&e.jsxs(e.Fragment,{children:[(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&e.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"retornar_componentes",checked:f.retornar_componentes===!0,onChange:I=>v({...f,retornar_componentes:I.target.checked}),className:"mt-1 h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"retornar_componentes",className:"block text-sm font-semibold text-gray-900 cursor-pointer",children:" Desmontar kit e retornar componentes ao estoque"}),e.jsxs("p",{className:"text-xs text-gray-700 mt-1",children:[e.jsx("strong",{children:"Marque esta opo"})," se voc desmontou o kit e quer devolver os produtos unitrios ao estoque."]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[e.jsx("strong",{children:"Deixe desmarcado"})," se houve perda, roubo ou venda do kit montado."]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nmero do Lote ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:f.lote,onChange:I=>v({...f,lote:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-001"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe vazio para usar FIFO automtico"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Validade ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:f.data_validade,onChange:I=>v({...f,data_validade:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observao"}),e.jsx("textarea",{value:f.observacao,onChange:I=>v({...f,observacao:I.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes sobre este lanamento..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Incluir"})]})]})]})})]})}const _z=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState("todos"),[u,m]=j.useState("");j.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{const N=await V.get("/produtos/");r(N.data.items||[])}catch(N){console.error("Erro ao carregar produtos:",N),be.error("Erro ao carregar produtos"),r([])}finally{o(!1)}},h=async()=>{var N,_;o(!0);try{const w=u?{descricao:u}:{},S=await V.get("/bling-sync/produtos",{params:w});s(S.data||[]),be.success(` ${(S.data||[]).length} produtos encontrados no Bling`)}catch(w){console.error("Erro ao buscar no Bling:",w),be.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao buscar produtos no Bling"),s([])}finally{o(!1)}},b=async(N,_)=>{var w,S;try{await V.post("/bling-sync/vincular",{produto_id:N,bling_id:_}),be.success(" Produto vinculado ao Bling com sucesso!"),x()}catch(C){be.error(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao vincular produto")}},p=async N=>{var _,w;l(!0);try{const S=await V.post(`/bling-sync/sincronizar-estoque/${N}`,{});be.success(` Estoque sincronizado!
Sistema: ${S.data.estoque_local}  Bling: ${S.data.estoque_bling}`,{duration:4e3}),x()}catch(S){be.error(((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao sincronizar estoque")}finally{l(!1)}},f=async()=>{l(!0);const N=t.filter(S=>S.bling_id);if(N.length===0){be.error("Nenhum produto vinculado ao Bling"),l(!1);return}let _=0,w=0;for(const S of N)try{await V.post(`/bling-sync/sincronizar-estoque/${S.id}`,{}),_++}catch(C){w++,console.error(`Erro ao sincronizar produto ${S.id}:`,C)}be.success(` Sincronizao concluda!
${_} produtos atualizados${w>0?`, ${w} erros`:""}`,{duration:5e3}),carregarDados(),l(!1)},v=async()=>{var N,_;o(!0);try{const w=await V.post("/bling-sync/reconciliar",{});be.success(` Reconciliao concluda!
${w.data.total_processados} produtos processados
${w.data.diferencas_encontradas} diferenas encontradas`,{duration:5e3}),x()}catch(w){be.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao reconciliar estoques")}finally{o(!1)}},g=t.filter(N=>c==="sincronizados"?N.bling_id:c==="nao_sincronizados"?!N.bling_id:!0),y={total:t.length,sincronizados:t.filter(N=>N.bling_id).length,naoSincronizados:t.filter(N=>!N.bling_id).length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Sincronizao Bling"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie a integrao dos produtos com o Bling ERP"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.sincronizados}),e.jsx("div",{className:"text-sm text-gray-600",children:"Vinculados ao Bling"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y.naoSincronizados}),e.jsx("div",{className:"text-sm text-gray-600",children:"No Vinculados"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[y.total>0?(y.sincronizados/y.total*100).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Taxa de Sincronizao"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:" Aes Rpidas"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:f,disabled:i||y.sincronizados===0,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:i?" Sincronizando...":` Sincronizar Todos (${y.sincronizados})`}),e.jsx("button",{onClick:v,disabled:n||y.sincronizados===0,className:"flex-1 bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?" Reconciliando...":" Reconciliar Estoques"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:[e.jsx("strong",{children:"Sincronizar:"})," Atualiza o estoque do Bling com os valores do sistema.",e.jsx("strong",{className:"ml-4",children:"Reconciliar:"})," Compara e identifica diferenas entre os estoques."]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:" Buscar Produtos no Bling"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:u,onChange:N=>m(N.target.value),placeholder:"Digite o nome do produto (deixe vazio para buscar todos)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyPress:N=>N.key==="Enter"&&h()}),e.jsx("button",{onClick:h,disabled:n,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400",children:n?" Buscando...":" Buscar"})]}),a.length>0&&e.jsxs("div",{className:"mt-4 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-2 font-semibold border-b",children:[a.length," produtos encontrados no Bling"]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:a.map(N=>e.jsxs("div",{className:"px-4 py-3 border-b hover:bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N.descricao}),e.jsxs("div",{className:"text-sm text-gray-600",children:["ID Bling: ",N.id," | Cdigo: ",N.codigo," | Estoque: ",N.estoque]})]}),e.jsxs("select",{onChange:_=>_.target.value&&b(parseInt(_.target.value),N.id),className:"px-3 py-2 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Vincular ao produto..."}),t.filter(_=>!_.bling_id).map(_=>e.jsxs("option",{value:_.id,children:[_.codigo," - ",_.nome]},_.id))]})]},N.id))})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>d("todos"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="todos"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todos (",y.total,")"]}),e.jsxs("button",{onClick:()=>d("sincronizados"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="sincronizados"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Sincronizados (",y.sincronizados,")"]}),e.jsxs("button",{onClick:()=>d("nao_sincronizados"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="nao_sincronizados"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" No Sincronizados (",y.naoSincronizados,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Estoque Local"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"ID Bling"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:n&&g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:" Carregando produtos..."})}):g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Nenhum produto encontrado com os filtros selecionados"})}):g.map(N=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm",children:N.codigo})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold",children:N.nome}),N.categoria&&e.jsx("div",{className:"text-xs text-gray-500",children:N.categoria})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`font-semibold ${(N.estoque_atual||0)<=(N.estoque_minimo||0)?"text-red-600":"text-green-600"}`,children:N.estoque_atual||0})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:N.bling_id}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold",children:" VINCULADO"}):e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs font-semibold",children:" NO VINCULADO"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("button",{onClick:()=>p(N.id),disabled:i,className:"text-blue-600 hover:text-blue-800 font-semibold text-sm disabled:text-gray-400",title:"Sincronizar estoque com Bling",children:" Sync"}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})})]},N.id))})]})})]})},Sz=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[x,h]=j.useState(null),[b,p]=j.useState(null),[f,v]=j.useState(!1),[g,y]=j.useState(!1),[N,_]=j.useState(null),[w,S]=j.useState({email:"",whatsapp:"",formatos:{pdf:!0,excel:!1}}),[C,k]=j.useState(!1),[F,q]=j.useState([]),[A,T]=j.useState(!1),[U,K]=j.useState(90),[I,Y]=j.useState(30),[D,W]=j.useState(!1),[R,B]=j.useState(!0),[O,L]=j.useState([]),[E,M]=j.useState({}),[z,le]=j.useState({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),[Q,ne]=j.useState({produto_id:"",quantidade_pedida:"",preco_unitario:""}),[re,ae]=j.useState(""),[ie,ve]=j.useState("");j.useEffect(()=>{_e()},[]);const _e=async()=>{try{const[ce,je]=await Promise.all([V.get("/pedidos-compra/"),V.get("/clientes/?tipo_cadastro=fornecedor&apenas_ativos=true")]),Re=Array.isArray(ce.data)?ce.data:ce.data.items||ce.data.pedidos||[],He=Array.isArray(je.data)?je.data:je.data.items||je.data.clientes||[];r(Re),s(He)}catch(ce){console.error("Erro ao carregar dados:",ce),be.error("Erro ao carregar dados")}},me=async ce=>{if(!ce){o([]);return}try{const je=await V.get(`/produtos/?fornecedor_id=${ce}`);let Re;Array.isArray(je.data)?Re=je.data:je.data.items?Re=je.data.items:je.data.produtos?Re=je.data.produtos:Re=[],Re.length===0&&be.warning(" Este fornecedor no possui produtos vinculados. Edite os produtos para vincular ao fornecedor."),o(Re)}catch(je){console.error("Erro ao carregar produtos:",je),be.error("Erro ao carregar produtos do fornecedor")}},Se=ce=>{const je=n.find(Re=>Re.id===parseInt(ce));je&&(ve(je.nome),je.preco_custo?ne({...Q,produto_id:ce,preco_unitario:je.preco_custo.toFixed(2)}):ne({...Q,produto_id:ce}))},Ne=()=>{if(!Q.produto_id||!Q.quantidade_pedida||!Q.preco_unitario){be.error("Preencha todos os campos do item");return}const ce=n.find(ye=>ye.id===parseInt(Q.produto_id)),je=parseFloat(Q.quantidade_pedida),Re=parseFloat(Q.preco_unitario),He=parseInt(Q.produto_id),J=z.itens.findIndex(ye=>ye.produto_id===He);if(J!==-1){const ye=z.itens[J];if(window.confirm(` O produto "${ce.nome}" j est no pedido!

Quantidade atual: ${ye.quantidade_pedida}
Preo atual: R$ ${ye.preco_unitario.toFixed(2)}

Nova quantidade: ${je}
Novo preo: R$ ${Re.toFixed(2)}

Deseja SOMAR a quantidade ao item existente?

 OK = Somar quantidade (${ye.quantidade_pedida} + ${je} = ${ye.quantidade_pedida+je})
 CANCELAR = No adicionar`)){const We=[...z.itens];We[J]={...ye,quantidade_pedida:ye.quantidade_pedida+je,preco_unitario:Re,total:(ye.quantidade_pedida+je)*Re},le({...z,itens:We}),be.success(` Quantidade somada! Total: ${ye.quantidade_pedida+je}`)}else be.info("Adio cancelada");ve(""),ne({produto_id:"",quantidade_pedida:"",preco_unitario:""});return}le({...z,itens:[...z.itens,{produto_id:He,produto_nome:ce.nome,quantidade_pedida:je,preco_unitario:Re,desconto_item:0,total:je*Re}]}),ve(""),ne({produto_id:"",quantidade_pedida:"",preco_unitario:""})},ot=ce=>{le({...z,itens:z.itens.filter((je,Re)=>Re!==ce)})},Ke=()=>{const ce=z.itens.reduce((He,J)=>He+J.total,0),je=parseFloat(z.valor_frete||0),Re=parseFloat(z.valor_desconto||0);return ce+je-Re},lt=async()=>{if(!z.fornecedor_id){be.error("Selecione um fornecedor primeiro");return}T(!0);try{const ce=await V.get(`/pedidos-compra/sugestao/${z.fornecedor_id}`,{params:{periodo_dias:U,dias_cobertura:I,apenas_criticos:D,incluir_alerta:R}});q(ce.data.sugestoes||[]),L([]),M({}),ce.data.sugestoes.length===0?be.info("Nenhuma sugesto encontrada com os filtros aplicados"):be.success(`${ce.data.sugestoes.length} produtos analisados`)}catch(ce){console.error("Erro ao buscar sugestes:",ce),be.error("Erro ao gerar sugestes")}finally{T(!1)}},ke=ce=>{L(je=>je.includes(ce)?je.filter(Re=>Re!==ce):[...je,ce])},Ie=(ce,je)=>{M(Re=>({...Re,[ce]:parseFloat(je)||0}))},Ae=ce=>E[ce.produto_id]!==void 0?E[ce.produto_id]:ce.quantidade_sugerida,it=()=>{k(!1),L([]),M({})},gt=()=>{const ce=F.filter(je=>je.prioridade==="CRTICO"&&je.quantidade_sugerida>0).map(je=>je.produto_id);L(ce)},Dt=()=>{if(O.length===0){be.error("Selecione pelo menos um produto");return}const je=F.filter(Re=>O.includes(Re.produto_id)).map(Re=>{const He=Ae(Re);return{produto_id:Re.produto_id,produto_nome:Re.produto_nome,quantidade_pedida:Math.ceil(He),preco_unitario:Re.preco_unitario,desconto_item:0,total:Math.ceil(He)*Re.preco_unitario}});le({...z,itens:[...z.itens,...je]}),be.success(`${je.length} produtos adicionados ao pedido`),it()},Ct=async ce=>{var je,Re;if(ce.preventDefault(),z.itens.length===0){be.error("Adicione pelo menos 1 item ao pedido");return}l(!0);try{const He={...z,data_prevista_entrega:z.data_prevista_entrega?`${z.data_prevista_entrega}T12:00:00`:null};await V.post("/pedidos-compra/",He),be.success(" Pedido criado com sucesso!"),d(!1),le({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),_e()}catch(He){be.error(((Re=(je=He.response)==null?void 0:je.data)==null?void 0:Re.detail)||"Erro ao criar pedido")}finally{l(!1)}},Lt=async ce=>{_(ce),S({email:"",whatsapp:"",formatos:{pdf:!0,excel:!1}}),y(!0)},$t=async()=>{var ce,je;if(!w.email&&!w.whatsapp){be.error("Informe um e-mail ou WhatsApp");return}if(!w.formatos.pdf&&!w.formatos.excel){be.error("Selecione pelo menos um formato (PDF ou Excel)");return}try{await V.post(`/pedidos-compra/${N}/enviar`,{email:w.email,whatsapp:w.whatsapp,formatos:w.formatos}),be.success(" Pedido marcado como enviado!"),y(!1),_e()}catch(Re){be.error(((je=(ce=Re.response)==null?void 0:ce.data)==null?void 0:je.detail)||"Erro ao enviar pedido")}},ge=async()=>{var ce,je;try{await V.post(`/pedidos-compra/${N}/enviar`,{envio_manual:!0}),be.success(" Pedido marcado como enviado manualmente!"),y(!1),_e()}catch(Re){be.error(((je=(ce=Re.response)==null?void 0:ce.data)==null?void 0:je.detail)||"Erro ao marcar pedido")}},De=async ce=>{var je,Re;try{await V.post(`/pedidos-compra/${ce}/confirmar`,{}),be.success(" Pedido confirmado!"),_e()}catch(He){be.error(((Re=(je=He.response)==null?void 0:je.data)==null?void 0:Re.detail)||"Erro ao confirmar pedido")}},Le=async ce=>{try{const je=await V.get(`/pedidos-compra/${ce}/export/pdf`,{responseType:"blob"}),Re=window.URL.createObjectURL(new Blob([je.data])),He=document.createElement("a");He.href=Re,He.setAttribute("download",`pedido_${ce}.pdf`),document.body.appendChild(He),He.click(),He.remove(),be.success(" PDF exportado com sucesso!")}catch{be.error("Erro ao exportar PDF")}},ct=async ce=>{try{const je=await V.get(`/pedidos-compra/${ce}/export/excel`,{responseType:"blob"}),Re=window.URL.createObjectURL(new Blob([je.data])),He=document.createElement("a");He.href=Re,He.setAttribute("download",`pedido_${ce}.xlsx`),document.body.appendChild(He),He.click(),He.remove(),be.success(" Excel exportado com sucesso!")}catch{be.error("Erro ao exportar Excel")}},tt=async ce=>{try{const je=await V.get(`/pedidos-compra/${ce.id}`);p(je.data),v(!0)}catch{be.error("Erro ao carregar detalhes do pedido")}},xe=async ce=>{var je,Re;if(confirm(" Deseja reverter o status deste pedido para a etapa anterior?"))try{const He=await V.post(`/pedidos-compra/${ce}/reverter`,{});be.success(` Status revertido: ${He.data.status_anterior}  ${He.data.status_atual}`),_e()}catch(He){be.error(((Re=(je=He.response)==null?void 0:je.data)==null?void 0:Re.detail)||"Erro ao reverter status")}},Fe=async ce=>{var je,Re,He;if(ce.status!=="rascunho"){be.error(" Apenas pedidos em rascunho podem ser editados");return}try{const ye=(await V.get(`/pedidos-compra/${ce.id}`)).data;m(!0),h(ye),le({fornecedor_id:((je=ye.fornecedor_id)==null?void 0:je.toString())||"",data_prevista_entrega:ye.data_prevista_entrega?new Date(ye.data_prevista_entrega).toISOString().split("T")[0]:"",valor_frete:((Re=ye.valor_frete)==null?void 0:Re.toString())||"0",valor_desconto:((He=ye.valor_desconto)==null?void 0:He.toString())||"0",observacoes:ye.observacoes||"",itens:ye.itens.map(Pe=>({produto_id:Pe.produto_id,produto_nome:Pe.produto_nome||`Produto ${Pe.produto_id}`,quantidade_pedida:Pe.quantidade_pedida,preco_unitario:Pe.preco_unitario,desconto_item:Pe.desconto_item||0,total:Pe.quantidade_pedida*Pe.preco_unitario-(Pe.desconto_item||0)}))}),ye.fornecedor_id&&me(ye.fornecedor_id),d(!0),be.success(" Modo de edio ativado")}catch{be.error("Erro ao carregar pedido para edio")}},Ye=async ce=>{var je,Re;if(ce.preventDefault(),z.itens.length===0){be.error(" Adicione pelo menos um item ao pedido");return}try{l(!0);const He={...z,fornecedor_id:parseInt(z.fornecedor_id),valor_frete:parseFloat(z.valor_frete),valor_desconto:parseFloat(z.valor_desconto),data_prevista_entrega:z.data_prevista_entrega?`${z.data_prevista_entrega}T12:00:00`:null,itens:z.itens.map(J=>({produto_id:J.produto_id,quantidade_pedida:parseFloat(J.quantidade_pedida),preco_unitario:parseFloat(J.preco_unitario),desconto_item:parseFloat(J.desconto_item||0)}))};await V.put(`/pedidos-compra/${x.id}`,He),be.success(" Pedido atualizado com sucesso!"),d(!1),m(!1),h(null),le({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),_e()}catch(He){be.error(((Re=(je=He.response)==null?void 0:je.data)==null?void 0:Re.detail)||"Erro ao atualizar pedido")}finally{l(!1)}},te=async ce=>{try{const je=await V.get(`/pedidos-compra/${ce.id}`);p(je.data),v(!0)}catch{be.error("Erro ao carregar detalhes do pedido")}},ue=async ce=>{var je,Re;try{await V.post(`/pedidos-compra/${b.id}/receber`,{itens:ce}),be.success(" Recebimento processado com sucesso!"),v(!1),p(null),_e()}catch(He){be.error(((Re=(je=He.response)==null?void 0:je.data)==null?void 0:Re.detail)||"Erro ao processar recebimento")}},Oe=ce=>{const je={rascunho:"bg-gray-200 text-gray-800",enviado:"bg-blue-200 text-blue-800",confirmado:"bg-green-200 text-green-800",recebido_parcial:"bg-yellow-200 text-yellow-800",recebido_total:"bg-green-500 text-white",cancelado:"bg-red-200 text-red-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${je[ce]||"bg-gray-200"}`,children:ce.replace("_"," ").toUpperCase()})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Pedidos de Compra"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie seus pedidos aos fornecedores"})]}),e.jsx("button",{onClick:()=>d(!c),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:c?" Cancelar":" Novo Pedido"})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:u?" Editar Pedido":"Novo Pedido de Compra"}),e.jsx("button",{type:"button",onClick:()=>{d(!1),m(!1),h(null)},className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("form",{onSubmit:u?Ye:Ct,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor *"}),e.jsx("input",{list:"fornecedores-list",value:re,onChange:ce=>{const je=ce.target.value;ae(je);const Re=a.find(He=>He.nome===je);Re?(le({...z,fornecedor_id:Re.id.toString(),itens:[]}),ne({produto_id:"",quantidade_pedida:"",preco_unitario:""}),me(Re.id)):(le({...z,fornecedor_id:"",itens:[]}),o([]))},placeholder:"Digite ou selecione o fornecedor",required:!!z.fornecedor_id,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("datalist",{id:"fornecedores-list",children:a.map(ce=>e.jsx("option",{value:ce.nome,children:ce.cpf_cnpj?`- ${ce.cpf_cnpj}`:""},ce.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite ou selecione um fornecedor para carregar seus produtos"}),z.fornecedor_id&&e.jsx("button",{type:"button",onClick:()=>{k(!0),lt()},className:"mt-2 w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 transition-all flex items-center justify-center gap-2",children:" Sugesto Inteligente de Pedido"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Prevista Entrega"}),e.jsx("input",{type:"date",value:z.data_prevista_entrega,onChange:ce=>le({...z,data_prevista_entrega:ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Itens do Pedido"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsx("input",{list:"produtos-list",value:ie,onChange:ce=>{const je=ce.target.value;ve(je);const Re=n.find(He=>He.nome===je);Re?Se(Re.id.toString()):ne({...Q,produto_id:""})},placeholder:z.fornecedor_id?"Digite ou selecione o produto":"Selecione um fornecedor primeiro",disabled:!z.fornecedor_id,className:"col-span-2 px-4 py-2 border border-gray-300 rounded-lg disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),e.jsx("datalist",{id:"produtos-list",children:n.map(ce=>e.jsx("option",{value:ce.nome,children:`SKU: ${ce.sku||ce.codigo||"N/A"} | Barras: ${ce.codigo_barras||"N/A"} | Estoque: ${ce.estoque_atual||0}`},ce.id))}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Quantidade",value:Q.quantidade_pedida,onChange:ce=>ne({...Q,quantidade_pedida:ce.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"Preo",value:Q.preco_unitario,onChange:ce=>ne({...Q,preco_unitario:ce.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:Ne,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:""})]})]}),z.itens.length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold",children:"Produto"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Preo"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Total"}),e.jsx("th",{className:"px-4 py-2"})]})}),e.jsx("tbody",{children:z.itens.map((ce,je)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2",children:ce.produto_nome}),e.jsx("td",{className:"px-4 py-2 text-right",children:ce.quantidade_pedida}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["R$ ",ce.preco_unitario.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2 text-right font-semibold",children:["R$ ",ce.total.toFixed(2)]}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{type:"button",onClick:()=>ot(je),className:"text-red-600 hover:text-red-800",children:""})})]},je))})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frete (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:z.valor_frete,onChange:ce=>le({...z,valor_frete:ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desconto (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:z.valor_desconto,onChange:ce=>le({...z,valor_desconto:ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",Ke().toFixed(2)]})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400",children:i?" Processando...":u?" Salvar Alteraes":" Criar Pedido"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Nmero"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:t.map(ce=>e.jsxs("tr",{className:`border-t hover:bg-gray-50 ${ce.status==="rascunho"?"cursor-pointer":""}`,onClick:()=>ce.status==="rascunho"&&Fe(ce),title:ce.status==="rascunho"?"Clique para editar":"",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ce.numero_pedido,ce.foi_alterado_apos_envio&&e.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded font-semibold",title:"Este pedido foi alterado aps o envio",children:" Alterado"})]})}),e.jsx("td",{className:"px-4 py-3",children:ce.fornecedor_id}),e.jsx("td",{className:"px-4 py-3",children:new Date(ce.data_pedido).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",ce.valor_final.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:Oe(ce.status)}),e.jsx("td",{className:"px-4 py-3 text-center",onClick:je=>je.stopPropagation(),children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>tt(ce),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-xs font-semibold",title:"Ver detalhes completos do pedido",children:" Ver"}),e.jsx("button",{onClick:()=>Le(ce.id),className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-xs font-semibold",title:"Exportar PDF",children:" PDF"}),e.jsx("button",{onClick:()=>ct(ce.id),className:"px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-xs font-semibold",title:"Exportar Excel",children:" Excel"}),ce.status==="rascunho"&&e.jsx("button",{onClick:()=>Lt(ce.id),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-semibold",title:"Enviar pedido ao fornecedor",children:" Enviar"}),ce.status==="enviado"&&e.jsx("button",{onClick:()=>De(ce.id),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-semibold",title:"Confirmar recebimento do pedido pelo fornecedor",children:" Confirmar"}),(ce.status==="confirmado"||ce.status==="recebido_parcial")&&e.jsx("button",{onClick:()=>te(ce),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-semibold",title:"Registrar entrada de produtos no estoque",children:" Receber"}),ce.status!=="rascunho"&&ce.status!=="recebido_total"&&e.jsx("button",{onClick:()=>xe(ce.id),className:"px-2 py-1 bg-orange-100 text-orange-700 rounded hover:bg-orange-200 text-xs font-semibold",title:"Reverter para status anterior",children:" Reverter"})]})})]},ce.id))})]})}),f&&b&&e.jsx(Cz,{pedido:b,onClose:()=>{v(!1),p(null)},onReceber:ue}),g&&e.jsx(kz,{pedidoId:N,onClose:()=>y(!1),onEnviar:$t,onEnvioManual:ge,dadosEnvio:w,setDadosEnvio:S}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:" Sugesto Inteligente de Pedido"}),e.jsx("p",{className:"text-purple-100",children:"Anlise baseada em vendas e estoque atual"})]}),e.jsx("button",{onClick:it,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2",children:""})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-purple-100 mb-1",children:"Perodo de Anlise"}),e.jsxs("select",{value:U,onChange:ce=>K(parseInt(ce.target.value)),className:"w-full px-3 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-purple-300",children:[e.jsx("option",{value:30,children:"ltimos 30 dias"}),e.jsx("option",{value:60,children:"ltimos 60 dias"}),e.jsx("option",{value:90,children:"ltimos 90 dias"}),e.jsx("option",{value:180,children:"ltimos 180 dias"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-purple-100 mb-1",children:"Cobertura de Estoque"}),e.jsxs("select",{value:I,onChange:ce=>Y(parseInt(ce.target.value)),className:"w-full px-3 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-purple-300",children:[e.jsx("option",{value:15,children:"15 dias"}),e.jsx("option",{value:30,children:"30 dias"}),e.jsx("option",{value:45,children:"45 dias"}),e.jsx("option",{value:60,children:"60 dias"}),e.jsx("option",{value:90,children:"90 dias"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:ce=>W(ce.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Apenas Crticos"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:ce=>B(ce.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Incluir Alertas"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:lt,disabled:A,className:"w-full bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 disabled:opacity-50",children:A?" Analisando...":" Atualizar"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Analisando produtos e calculando sugestes..."})]})}):F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma sugesto encontrada com os filtros aplicados"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Tente ajustar os filtros acima"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsx("button",{onClick:gt,className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold hover:bg-red-200",children:" Selecionar Todos Crticos"}),e.jsx("div",{className:"flex-1"}),e.jsxs("span",{className:"text-gray-600",children:[O.length," de ",F.length," produtos selecionados"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:e.jsx("input",{type:"checkbox",onChange:ce=>{ce.target.checked?L(F.map(je=>je.produto_id)):L([])},checked:O.length===F.length,className:"w-4 h-4 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Prioridade"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Consumo/dia"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Dias Restantes"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Qtd Sugerida"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Preo Unit."}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Tendncia"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(ce=>e.jsxs("tr",{className:`hover:bg-gray-50 ${O.includes(ce.produto_id)?"bg-purple-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:O.includes(ce.produto_id),onChange:()=>ke(ce.produto_id),className:"w-4 h-4 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ce.prioridade==="CRTICO"?"bg-red-100 text-red-700":ce.prioridade==="ALERTA"?"bg-yellow-100 text-yellow-700":ce.prioridade==="ATENO"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:ce.prioridade})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:ce.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",ce.produto_sku||"N/A"," | Barras: ",ce.produto_codigo_barras||"N/A"]}),ce.observacao&&e.jsx("div",{className:"text-xs text-gray-600 mt-1 italic",children:ce.observacao})]})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("div",{className:"font-medium",children:ce.estoque_atual}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Mn: ",ce.estoque_minimo]})]}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:ce.consumo_diario.toFixed(2)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:`font-semibold ${ce.dias_estoque&&ce.dias_estoque<7?"text-red-600":ce.dias_estoque&&ce.dias_estoque<14?"text-yellow-600":"text-green-600"}`,children:ce.dias_estoque?`${ce.dias_estoque} dias`:""})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",min:"0",step:"1",value:Math.ceil(Ae(ce)),onChange:je=>Ie(ce.produto_id,je.target.value),className:"w-20 px-2 py-1 text-right font-bold text-purple-600 border rounded focus:ring-2 focus:ring-purple-300"})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:["R$ ",ce.preco_unitario.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",(Ae(ce)*ce.preco_unitario).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`text-xs ${ce.tendencia==="CRESCIMENTO"?"text-green-600":ce.tendencia==="QUEDA"?"text-red-600":"text-gray-600"}`,children:[ce.tendencia==="CRESCIMENTO"?"":ce.tendencia==="QUEDA"?"":ce.tendencia==="ESTVEL"?"":"",ce.tendencia]})})]},ce.produto_id))})]})})]})}),!A&&F.length>0&&e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Resumo da Sugesto:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[" ",e.jsx("strong",{children:F.filter(ce=>ce.prioridade==="CRTICO").length})," crticos"]}),e.jsxs("div",{children:[" ",e.jsx("strong",{children:F.filter(ce=>ce.prioridade==="ALERTA").length})," em alerta"]}),e.jsxs("div",{children:[" Total: ",e.jsxs("strong",{children:["R$ ",F.filter(ce=>O.includes(ce.produto_id)).reduce((ce,je)=>ce+Ae(je)*je.preco_unitario,0).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:it,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100",children:"Cancelar"}),e.jsxs("button",{onClick:Dt,disabled:O.length===0,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[" Adicionar ",O.length," Produtos ao Pedido"]})]})]})})]})})]})},Cz=({pedido:t,onClose:r,onReceber:a})=>{const[s,n]=j.useState(t.itens.map(i=>({item_id:i.id,quantidade_recebida:i.quantidade_pedida-i.quantidade_recebida,max:i.quantidade_pedida-i.quantidade_recebida}))),o=()=>{const i=s.filter(l=>l.quantidade_recebida>0).map(l=>({item_id:l.item_id,quantidade_recebida:parseFloat(l.quantidade_recebida)}));if(i.length===0){be.error("Informe a quantidade recebida de pelo menos 1 item");return}a(i)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[" Receber Pedido ",t.numero_pedido]}),e.jsx("div",{className:"space-y-4",children:t.itens.map((i,l)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold mb-2",children:i.produto_nome}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Pedido:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.quantidade_pedida})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"J Recebido:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.quantidade_recebida})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Pendente:"}),e.jsx("span",{className:"ml-2 font-semibold text-orange-600",children:i.quantidade_pedida-i.quantidade_recebida})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade a Receber"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:s[l].max,value:s[l].quantidade_recebida,onChange:c=>{const d=parseFloat(c.target.value)||0,u=[...s];u[l].quantidade_recebida=Math.min(d,u[l].max),n(u)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]},i.id))}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:o,className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700",children:" Confirmar Recebimento"}),e.jsx("button",{onClick:r,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:" Cancelar"})]})]})})},kz=({pedidoId:t,onClose:r,onEnviar:a,onEnvioManual:s,dadosEnvio:n,setDadosEnvio:o})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Enviar Pedido ao Fornecedor"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail do Fornecedor"}),e.jsx("input",{type:"email",value:n.email,onChange:i=>o({...n,email:i.target.value}),placeholder:"fornecedor@exemplo.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["WhatsApp (futuro)",e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Em breve)"})]}),e.jsx("input",{type:"tel",value:n.whatsapp,onChange:i=>o({...n,whatsapp:i.target.value}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formatos para Envio"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.formatos.pdf,onChange:i=>o({...n,formatos:{...n.formatos,pdf:i.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm",children:" PDF"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.formatos.excel,onChange:i=>o({...n,formatos:{...n.formatos,excel:i.target.checked}}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"ml-2 text-sm",children:" Excel"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx("button",{onClick:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:" Enviar por E-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou"})})]}),e.jsx("button",{onClick:s,className:"w-full bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:" J enviei manualmente"}),e.jsx("button",{onClick:r,className:"w-full border border-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-50",children:" Cancelar"})]})]})]})}),Ez=()=>{var Re,He;const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,b]=j.useState(!1),[p,f]=j.useState(!1),[v,g]=j.useState(!1),[y,N]=j.useState(null),[_,w]=j.useState(!1),[S,C]=j.useState([]),[k,F]=j.useState(null),[q,A]=j.useState(!1),[T,U]=j.useState(!1),[K,I]=j.useState(null),[Y,D]=j.useState({}),[W,R]=j.useState("todos"),[B,O]=j.useState("loja"),[L,E]=j.useState({}),[M,z]=j.useState(!1),[le,Q]=j.useState(null),[ne,re]=j.useState(null),[ae,ie]=j.useState(!1),[ve,_e]=j.useState({sku:"",nome:"",descricao:"",preco_custo:"",preco_venda:"",margem_lucro:"",estoque_minimo:10,estoque_maximo:100}),[me,Se]=j.useState({});j.useEffect(()=>{console.log(" [EntradaXML] Componente montado, iniciando carregamento..."),Ne()},[]);const Ne=async()=>{var J,ye,Pe,We,st,xt,pt,Nt,At;console.log(" [EntradaXML] Carregando dados...");try{const Mt=localStorage.getItem("token");console.log(" [EntradaXML] Token obtido:",Mt?"SIM":"NO");const ut={Authorization:`Bearer ${Mt}`};console.log(" [EntradaXML] Fazendo requisies para:",{notasEntrada:"/notas-entrada/",produtos:"/produtos/"});const[X,P]=await Promise.all([V.get("/notas-entrada/",{headers:ut}),V.get("/produtos/",{headers:ut,params:{ativo:null}})]);console.log(" [EntradaXML] Dados carregados:",{notasEntrada:((J=X.data)==null?void 0:J.length)||0,produtos:((Pe=(ye=P.data)==null?void 0:ye.items)==null?void 0:Pe.length)||((We=P.data)==null?void 0:We.length)||0});const H=((st=P.data)==null?void 0:st.items)||P.data,Z=H.filter(de=>de.ativo===!0).length,oe=H.filter(de=>de.ativo===!1).length;console.log(" [EntradaXML] Produtos por status:",{ativos:Z,inativos:oe,total:H.length}),a(X.data),n(H)}catch(Mt){console.error(" [EntradaXML] ERRO ao carregar dados:"),console.error("  - Mensagem:",Mt.message),console.error("  - Response:",(xt=Mt.response)==null?void 0:xt.data),console.error("  - Status:",(pt=Mt.response)==null?void 0:pt.status),console.error("  - Stack:",Mt.stack),be.error(`Erro ao carregar dados: ${((At=(Nt=Mt.response)==null?void 0:Nt.data)==null?void 0:At.detail)||Mt.message}`)}},ot=async J=>{var We,st,xt,pt,Nt;const ye=J.target.files[0];if(console.log(" [EntradaXML] Upload iniciado"),console.log("  - Arquivo selecionado:",ye==null?void 0:ye.name),console.log("  - Tamanho:",ye==null?void 0:ye.size,"bytes"),console.log("  - Tipo:",ye==null?void 0:ye.type),!ye){console.warn(" [EntradaXML] Nenhum arquivo selecionado");return}if(!ye.name.toLowerCase().endsWith(".xml")){console.error(" [EntradaXML] Arquivo no  XML:",ye.name),be.error(" Por favor, selecione um arquivo XML");return}c(!0);const Pe=new FormData;Pe.append("file",ye),console.log(" [EntradaXML] Enviando arquivo para:","/notas-entrada/upload"),console.log(" [EntradaXML] FormData preparado:",ye.name,ye.size,"bytes");try{const At=await V.post("/notas-entrada/upload",Pe,{headers:{"Content-Type":"multipart/form-data"}});console.log(" [EntradaXML] Upload bem-sucedido!"),console.log("  - Response data:",At.data);const Mt=At.data.produtos_vinculados||0,ut=At.data.itens_total||0;console.log(` [EntradaXML] Produtos vinculados: ${Mt}/${ut}`),At.data.fornecedor_criado_automaticamente&&be.success(` Novo fornecedor cadastrado: ${At.data.fornecedor}`,{duration:4e3}),At.data.produtos_reativados>0&&be.success(` ${At.data.produtos_reativados} produto(s) inativo(s) reativado(s) automaticamente`,{duration:4e3}),be.success(` NF-e ${At.data.numero_nota} processada! ${Mt}/${ut} produtos vinculados automaticamente`,{duration:5e3}),Ne(),J.target.value=""}catch(At){console.error(" [EntradaXML] ERRO no upload:"),console.error("  - Mensagem:",At.message),console.error("  - Response data:",(We=At.response)==null?void 0:We.data),console.error("  - Status:",(st=At.response)==null?void 0:st.status),console.error("  - Headers:",(xt=At.response)==null?void 0:xt.headers),console.error("  - Stack completo:",At.stack);const Mt=((Nt=(pt=At.response)==null?void 0:pt.data)==null?void 0:Nt.detail)||At.message||"Erro ao processar XML da NF-e";console.error("  - Mensagem para usurio:",Mt),be.error(` ${Mt}`)}finally{c(!1),console.log(" [EntradaXML] Upload finalizado")}},Ke=async J=>{var st,xt;const ye=Array.from(J.target.files);if(console.log(" [EntradaXML] Upload em lote iniciado -",ye.length,"arquivos"),ye.length===0){console.warn(" [EntradaXML] Nenhum arquivo selecionado");return}const Pe=ye.filter(pt=>!pt.name.toLowerCase().endsWith(".xml"));if(Pe.length>0){be.error(` ${Pe.length} arquivo(s) no so XML: ${Pe.map(pt=>pt.name).join(", ")}`);return}f(!0),g(!0),N(null);const We=new FormData;ye.forEach(pt=>{We.append("files",pt)}),console.log(" [EntradaXML] Enviando",ye.length,"arquivos para:","/notas-entrada/upload-lote");try{const pt=await V.post("/notas-entrada/upload-lote",We);console.log(" [EntradaXML] Upload em lote bem-sucedido!"),console.log("  - Response:",pt.data),N(pt.data),pt.data.sucessos>0&&be.success(` ${pt.data.sucessos}/${pt.data.total_arquivos} nota(s) processada(s) com sucesso!`,{duration:5e3}),pt.data.erros>0&&be.error(` ${pt.data.erros}/${pt.data.total_arquivos} nota(s) com erro`,{duration:5e3}),Ne(),J.target.value=""}catch(pt){console.error(" [EntradaXML] ERRO no upload em lote:",pt),be.error(` Erro ao processar lote: ${((xt=(st=pt.response)==null?void 0:st.data)==null?void 0:xt.detail)||pt.message}`),g(!1)}finally{f(!1)}},lt=async J=>{try{const ye=await V.get(`/notas-entrada/${J}`);ye.data.itens&&ye.data.itens.sort((Pe,We)=>Pe.id-We.id),u(ye.data),x(!0),O(ye.data.tipo_rateio||"loja")}catch{be.error("Erro ao carregar detalhes da nota")}},ke=async J=>{try{const ye=await V.get(`/notas-entrada/${J}`);u(ye.data),b(!0)}catch{be.error("Erro ao carregar nota")}},Ie=async(J,ye,Pe)=>{var We,st;try{await V.post(`/notas-entrada/${J}/itens/${ye}/vincular?produto_id=${parseInt(Pe)}`),be.success(" Produto vinculado com sucesso!");const xt=await V.get(`/notas-entrada/${J}`);xt.data.itens&&xt.data.itens.sort((pt,Nt)=>pt.id-Nt.id),u(xt.data)}catch(xt){console.error(" Erro ao vincular produto:",xt),be.error(((st=(We=xt.response)==null?void 0:We.data)==null?void 0:st.detail)||"Erro ao vincular produto")}},Ae=async(J,ye)=>{var Pe,We;try{await V.post(`/notas-entrada/${J}/rateio`,{tipo_rateio:ye}),be.success(` Nota configurada: ${ye==="online"?"100% Online":ye==="loja"?"100% Loja Fsica":"Rateio Parcial"}`);const st=await V.get(`/notas-entrada/${J}`);u(st.data),O(ye)}catch(st){console.error(" Erro ao salvar tipo de rateio:",st),be.error(((We=(Pe=st.response)==null?void 0:Pe.data)==null?void 0:We.detail)||"Erro ao salvar tipo de rateio")}},it=async(J,ye,Pe)=>{var We,st;try{const xt=await V.post(`/notas-entrada/${J}/itens/${ye}/rateio`,{quantidade_online:parseFloat(Pe)||0});be.success(" Quantidade online configurada!");const pt=xt.data.nota_totais;be.success(`Nota: ${pt.percentual_online.toFixed(1)}% Online (R$ ${pt.valor_online.toFixed(2)}) | ${pt.percentual_loja.toFixed(1)}% Loja (R$ ${pt.valor_loja.toFixed(2)})`),u(Nt=>({...Nt,percentual_online:pt.percentual_online,percentual_loja:pt.percentual_loja,valor_online:pt.valor_online,valor_loja:pt.valor_loja,itens:Nt.itens.map(At=>At.id===ye?{...At,quantidade_online:parseFloat(Pe)||0}:At)})),E(Nt=>({...Nt,[ye]:parseFloat(Pe)||0}))}catch(xt){console.error(" Erro ao salvar quantidade online:",xt),be.error(((st=(We=xt.response)==null?void 0:We.data)==null?void 0:st.detail)||"Erro ao salvar")}},gt=async J=>{var ye,Pe;try{const We=await V.get(`/notas-entrada/${J}/preview-processamento`);I(We.data),U(!0),x(!1);const st={};We.data.itens.forEach(xt=>{xt.produto_vinculado&&(st[xt.produto_vinculado.produto_id]={preco_venda:xt.produto_vinculado.preco_venda_atual,margem:xt.produto_vinculado.margem_atual})}),D(st)}catch(We){be.error(((Pe=(ye=We.response)==null?void 0:ye.data)==null?void 0:Pe.detail)||"Erro ao carregar preview")}},Dt=gt,Ct=async()=>{var J,ye;i(!0);try{const Pe=[];Object.entries(Y).forEach(([st,xt])=>{const pt=K.itens.find(Nt=>Nt.produto_vinculado&&Nt.produto_vinculado.produto_id==st);pt&&pt.produto_vinculado&&xt.preco_venda!==pt.produto_vinculado.preco_venda_atual&&Pe.push({produto_id:parseInt(st),preco_venda:xt.preco_venda})}),Pe.length>0&&await V.post(`/notas-entrada/${K.nota_id}/atualizar-precos`,Pe);const We=await V.post(`/notas-entrada/${K.nota_id}/processar`,{});be.success(` Nota processada! ${We.data.itens_processados} itens lanados no estoque`,{duration:5e3}),x(!1),u(null),U(!1),I(null),Ne()}catch(Pe){be.error(((ye=(J=Pe.response)==null?void 0:J.data)==null?void 0:ye.detail)||"Erro ao processar nota")}finally{i(!1)}},Lt=(J,ye)=>ye>=100?J*2:J/(1-ye/100),$t=(J,ye)=>J<=0?0:(J-ye)/J*100,ge=(J,ye,Pe)=>{const We=$t(ye,Pe);D(st=>({...st,[J]:{preco_venda:ye,margem:We}}))},De=(J,ye,Pe)=>{const We=Lt(Pe,ye);D(st=>({...st,[J]:{preco_venda:We,margem:ye}}))},Le=async(J,ye)=>{var Pe,We;if(confirm(`Tem certeza que deseja excluir a nota ${ye}?`)){i(!0);try{await V.delete(`/notas-entrada/${J}`),be.success(" Nota excluda com sucesso!"),m&&(x(!1),u(null)),Ne()}catch(st){be.error(((We=(Pe=st.response)==null?void 0:Pe.data)==null?void 0:We.detail)||"Erro ao excluir nota")}finally{i(!1)}}},ct=async(J,ye)=>{A(!0),F({id:J,nome:ye}),w(!0);try{const Pe=await V.get(`/produtos/${J}/historico-precos`);C(Pe.data)}catch{be.error("Erro ao carregar histrico de preos"),w(!1)}finally{A(!1)}},tt=async(J,ye)=>{var Pe,We;if(confirm(` Tem certeza que deseja REVERTER a entrada da nota ${ye}?

Isso ir:
 Remover as quantidades do estoque
 Excluir os lotes criados
 Estornar as contas a pagar lanadas
 Restaurar o status da nota para pendente`)){i(!0);try{const st=await V.post(`/notas-entrada/${J}/reverter`,{});be.success(` Entrada revertida! ${st.data.itens_revertidos} produtos ajustados`,{duration:5e3}),m&&(x(!1),u(null)),Ne()}catch(st){be.error(((We=(Pe=st.response)==null?void 0:Pe.data)==null?void 0:We.detail)||"Erro ao reverter entrada")}finally{i(!1)}}},xe=async(J,ye)=>{var Pe,We;try{await V.post(`/notas-entrada/${J}/itens/${ye}/desvincular`),be.success(" Produto desvinculado!");const st=await V.get(`/notas-entrada/${J}`);st.data.itens&&st.data.itens.sort((xt,pt)=>xt.id-pt.id),u(st.data)}catch(st){be.error(((We=(Pe=st.response)==null?void 0:Pe.data)==null?void 0:We.detail)||"Erro ao desvincular produto")}},Fe=J=>{var de;const ye=((de=J.produto_vinculado)==null?void 0:de.produto_nome)||J.produto_nome;if(!ye)return[];const Pe=[],We=J.descricao_nf||J.descricao||"",st=ye||"";if(!We||!st)return[];const xt=We.toLowerCase(),pt=st.toLowerCase(),Nt=/(\d+(?:[.,]\d+)?)\s*(kg|g|ml|l|un|und|unid)/gi,At=[...xt.matchAll(Nt)],Mt=[...pt.matchAll(Nt)];if(At.length>0&&Mt.length>0){const se=At[0][0],fe=Mt[0][0];se!==fe&&Pe.push(`Peso/Tamanho diferente: NF="${se}" vs Produto="${fe}"`)}const ut=["preto","branco","vermelho","azul","verde","amarelo","rosa","roxo","laranja","marrom","cinza"],X=ut.find(se=>xt.includes(se)),P=ut.find(se=>pt.includes(se));X&&P&&X!==P&&Pe.push(`Cor diferente: NF="${X}" vs Produto="${P}"`);const H=["frango","carne","peixe","cordeiro","salmao","salmo","atum","vegetais"],Z=H.find(se=>xt.includes(se)),oe=H.find(se=>pt.includes(se));return Z&&oe&&Z!==oe&&Pe.push(`Sabor diferente: NF="${Z}" vs Produto="${oe}"`),(xt.includes("cao")||xt.includes("cachorro")||xt.includes("dog"))&&(pt.includes("gato")||pt.includes("cat"))&&Pe.push(" Animal diferente: NF para CACHORRO mas produto  para GATO"),(xt.includes("gato")||xt.includes("cat"))&&(pt.includes("cao")||pt.includes("cachorro")||pt.includes("dog"))&&Pe.push(" Animal diferente: NF para GATO mas produto  para CACHORRO"),Pe},Ye=async J=>{Q(J),z(!0),ie(!0),_e({sku:"",nome:"",descricao:"",preco_custo:"",preco_venda:"",margem_lucro:"",estoque_minimo:10,estoque_maximo:100});try{const ye=await V.get(`/notas-entrada/${d.id}/itens/${J.id}/sugerir-sku`);re(ye.data);let Pe=ye.data.sku_proposto||J.codigo_produto||"PROD-"+J.id;ye.data.ja_existe&&ye.data.sugestoes&&ye.data.sugestoes.length>0&&(Pe=(ye.data.sugestoes.find(st=>st.padrao)||ye.data.sugestoes[0]).sku),_e({sku:Pe,nome:J.descricao||J.descricao_produto||"Produto sem nome",descricao:J.descricao||J.descricao_produto||"",preco_custo:J.valor_unitario.toString(),preco_venda:(J.valor_unitario*1.5).toFixed(2),margem_lucro:"50",estoque_minimo:10,estoque_maximo:100}),console.log(" Formulrio preenchido:",{sku:Pe,nome:J.descricao,preco_custo:J.valor_unitario})}catch(ye){be.error("Erro ao buscar sugestes de SKU"),console.error("Erro ao buscar SKU:",ye),_e({sku:J.codigo_produto||"PROD-"+J.id,nome:J.descricao||"Produto sem nome",descricao:J.descricao||"",preco_custo:J.valor_unitario.toString(),preco_venda:(J.valor_unitario*1.5).toFixed(2),margem_lucro:"50",estoque_minimo:10,estoque_maximo:100})}finally{ie(!1)}},te=async()=>{var J,ye;try{i(!0);const Pe={...ve,preco_custo:parseFloat(ve.preco_custo)||0,preco_venda:parseFloat(ve.preco_venda)||0,margem_lucro:parseFloat(ve.margem_lucro)||0,estoque_minimo:parseInt(ve.estoque_minimo)||10,estoque_maximo:parseInt(ve.estoque_maximo)||100},We=await V.post(`/notas-entrada/${d.id}/itens/${le.id}/criar-produto`,Pe);be.success(` Produto ${We.data.produto.codigo} criado e vinculado!`),z(!1),Q(null),re(null),await Ne();const st=await V.get(`/notas-entrada/${d.id}`);u(st.data)}catch(Pe){be.error(((ye=(J=Pe.response)==null?void 0:J.data)==null?void 0:ye.detail)||"Erro ao criar produto"),console.error(Pe)}finally{i(!1)}},ue=async()=>{var We;const J=d.itens.filter(st=>!st.produto_id);if(J.length===0){be.success("Todos os produtos j esto vinculados!");return}if(!window.confirm(`Criar ${J.length} produto(s) automaticamente?

Padres aplicados:
 Estoque mnimo: 10
 Estoque mximo: 100
 Margem de lucro: 50%

Voc poder editar os produtos depois no cadastro.`))return;let Pe;try{i(!0);let st=0,xt=0;Pe=be.loading(` Criando ${J.length} produtos...`);for(const Nt of J)try{const At=await V.get(`/notas-entrada/${d.id}/itens/${Nt.id}/sugerir-sku`);let Mt=At.data.sku_proposto||Nt.codigo_produto||`PROD-${Nt.id}`;At.data.ja_existe&&((We=At.data.sugestoes)==null?void 0:We.length)>0&&(Mt=(At.data.sugestoes.find(P=>P.padrao)||At.data.sugestoes[0]).sku);const ut={sku:Mt,nome:Nt.descricao||"Produto sem nome",descricao:Nt.descricao||"",preco_custo:parseFloat(Nt.valor_unitario)||0,preco_venda:parseFloat((Nt.valor_unitario*1.5).toFixed(2)),margem_lucro:50,estoque_minimo:10,estoque_maximo:100};await V.post(`/notas-entrada/${d.id}/itens/${Nt.id}/criar-produto`,ut),st++}catch(At){console.error(`Erro ao criar produto do item ${Nt.id}:`,At),xt++}st>0&&be.success(` ${st} produto(s) criado(s) com sucesso!`),xt>0&&be.error(` ${xt} erro(s) ao criar produtos`),await Ne();const pt=await V.get(`/notas-entrada/${d.id}`);u(pt.data)}catch(st){be.error("Erro ao criar produtos em lote"),console.error(st)}finally{Pe&&be.dismiss(Pe),i(!1)}},Oe=(J,ye)=>J===0?0:((ye-J)/J*100).toFixed(2),ce=J=>{const ye={pendente:"bg-yellow-200 text-yellow-800",processada:"bg-green-200 text-green-800",cancelada:"bg-red-200 text-red-800",erro:"bg-red-300 text-red-900"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${ye[J]||"bg-gray-200"}`,children:J.toUpperCase()})},je=J=>{if(!J)return e.jsx("span",{className:"text-gray-400 text-sm",children:"No vinculado"});const ye=J>=90?"alta":J>=70?"media":"baixa",Pe={alta:"bg-green-100 text-green-800",media:"bg-yellow-100 text-yellow-800",baixa:"bg-orange-100 text-orange-800"};return e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Pe[ye]}`,children:[J.toFixed(1),"% ",ye==="alta"?"":ye==="media"?"":""]})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Entrada por NF-e (XML)"}),e.jsx("p",{className:"text-gray-600",children:"Importe notas fiscais eletrnicas e vincule produtos automaticamente"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:l?" Processando XML...":"Selecione o arquivo XML da NF-e"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"O sistema ir processar automaticamente os dados da nota fiscal"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs("label",{className:"inline-block",children:[e.jsx("input",{type:"file",accept:".xml",onChange:ot,disabled:l||p,className:"hidden"}),e.jsx("span",{className:`
                px-6 py-3 rounded-lg font-semibold cursor-pointer inline-block
                ${l||p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}
              `,children:l?" Processando...":" Upload nico"})]}),e.jsxs("label",{className:"inline-block",children:[e.jsx("input",{type:"file",accept:".xml",multiple:!0,onChange:Ke,disabled:l||p,className:"hidden"}),e.jsx("span",{className:`
                px-6 py-3 rounded-lg font-semibold cursor-pointer inline-block
                ${l||p?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}
              `,children:p?" Processando Lote...":" Upload Mltiplo"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Formatos aceitos: XML de NF-e (padro SEFAZ)"})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Notas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.filter(J=>J.status==="pendente").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pendentes"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(J=>J.status==="processada").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Processadas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["R$ ",r.filter(J=>J.status==="processada").reduce((J,ye)=>J+(ye.valor_total||0),0).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Valor Processado"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Notas Fiscais Importadas"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Chave NF-e"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data Emisso"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Itens"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma nota fiscal importada ainda. Faa o upload de um XML acima."})}):r.map(J=>e.jsxs("tr",{onClick:()=>ke(J.id),className:"border-t hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"font-mono text-xs",children:[J.chave_acesso.substring(0,20),"..."]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold",children:J.fornecedor_nome}),e.jsx("div",{className:"text-xs text-gray-500",children:J.fornecedor_cnpj})]}),e.jsx("td",{className:"px-4 py-3",children:new Date(J.data_emissao).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",(J.valor_total||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-semibold",children:[J.produtos_vinculados+J.produtos_nao_vinculados," itens"]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:ce(J.status)}),e.jsx("td",{className:"px-4 py-3 text-center",onClick:ye=>ye.stopPropagation(),children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[J.status==="pendente"&&e.jsx("button",{onClick:()=>lt(J.id),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-semibold text-sm",title:"Vincular produtos",children:" Vincular"}),J.entrada_estoque_realizada?e.jsx("button",{onClick:()=>tt(J.id,J.numero_nota),className:"text-orange-600 hover:text-orange-800 font-semibold text-sm",title:"Reverter entrada no estoque",children:" Reverter"}):e.jsx("button",{onClick:()=>Le(J.id,J.numero_nota),className:"text-red-600 hover:text-red-800 font-semibold text-sm",title:"Excluir nota",children:" Excluir"})]})})]},J.id))})]})})]}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:" Detalhes da NF-e"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Chave: ",d.chave_acesso]})]}),e.jsx("button",{onClick:()=>{x(!1),u(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Fornecedor:"}),e.jsx("div",{className:"font-semibold",children:d.fornecedor_nome}),e.jsx("div",{className:"text-xs text-gray-500",children:d.fornecedor_cnpj}),d.fornecedor_id&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:" Cadastrado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Emisso:"}),e.jsx("div",{className:"font-semibold",children:new Date(d.data_emissao).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),e.jsxs("div",{className:"font-bold text-lg text-green-600",children:["R$ ",(d.valor_total||0).toFixed(2)]})]})]})}),d.fornecedor_id&&d.fornecedor_criado_automaticamente&&e.jsx("div",{className:"px-6 py-2 bg-blue-50 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:d.fornecedor_nome})," foi cadastrado automaticamente."]}),e.jsx("button",{onClick:()=>t(`/clientes/${d.fornecedor_id}`),className:"px-3 py-1 bg-blue-600 text-white rounded font-medium hover:bg-blue-700 text-xs",children:" Completar Cadastro"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-xl text-gray-800",children:[" Produtos da Nota (",d.itens.length,")"]}),d.status==="pendente"&&d.itens.some(J=>!J.produto_id)&&e.jsxs("button",{onClick:ue,disabled:o,className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 flex items-center gap-2 text-sm",title:"Cria automaticamente todos os produtos no vinculados com os padres: Estoque mn: 10, mx: 100, Margem: 50%",children:[e.jsx("span",{children:" Criar Todos No Vinculados"}),e.jsx("span",{className:"text-xs bg-purple-800 px-2 py-0.5 rounded",children:d.itens.filter(J=>!J.produto_id).length})]})]}),e.jsx("div",{className:"space-y-3",children:d.itens.map(J=>{const ye=Fe(J),Pe=ye.length>0;return e.jsxs("div",{className:"border-2 border-gray-400 rounded-lg overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-0",children:[e.jsxs("div",{className:"bg-blue-50 border-r-2 border-gray-300 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"NF-e"}),je(J.confianca_vinculo)]}),e.jsx("div",{className:"font-semibold text-base mb-2 text-blue-900",children:J.descricao}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cdigo:"}),e.jsx("span",{className:"font-mono font-semibold",children:J.codigo_produto})]}),J.ean&&J.ean!=="SEM GTIN"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"EAN:"}),e.jsx("span",{className:"font-mono font-semibold",children:J.ean})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"NCM:"}),e.jsx("span",{className:"font-mono font-semibold",children:J.ncm})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1.5 mt-1.5",children:[e.jsx("span",{className:"text-gray-600",children:"Qtd:"}),e.jsx("span",{className:"font-semibold",children:J.quantidade})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Unit.:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",J.valor_unitario.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",J.valor_total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"CFOP:"}),e.jsx("span",{className:"font-semibold",children:J.cfop})]})]}),(J.lote||J.data_validade)&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[J.lote&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:" Lote:"}),e.jsx("div",{className:"font-semibold text-purple-800",children:J.lote})]}),J.data_validade&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:" Validade:"}),e.jsx("div",{className:"font-semibold text-orange-800",children:new Date(J.data_validade).toLocaleDateString("pt-BR")})]})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center bg-gray-100 px-2 py-4",children:J.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>xe(d.id,J.id),className:"text-3xl text-green-600 hover:text-red-600 transition-colors mb-2",title:" Vinculado - Clique para desvincular",children:""}),Pe&&e.jsx("div",{className:"bg-red-100 border-2 border-red-500 rounded-lg p-2 max-w-[200px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:"font-bold text-red-700 text-xs mb-1",children:"DIVERGNCIA!"}),e.jsx("div",{className:"text-[10px] text-red-600 space-y-0.5",children:ye.map((We,st)=>e.jsxs("div",{children:[" ",We]},st))})]})})]}):e.jsx("div",{className:"text-3xl text-gray-400",title:" No vinculado",children:""})}),e.jsx("div",{className:`p-4 ${J.produto_id?"bg-green-50":"bg-gray-50"}`,children:e.jsx("div",{className:`p-4 ${J.produto_id?"bg-green-50":"bg-gray-50"}`,children:d.status==="pendente"?e.jsx(e.Fragment,{children:J.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold",children:" PRODUTO SISTEMA"})}),e.jsx("div",{className:"font-semibold text-base mb-3 text-green-900",children:J.produto_nome}),e.jsx("div",{className:"text-xs text-green-700 mb-3 italic",children:" Para alterar o vnculo, selecione outro produto ou clique no  para desvincular"}),e.jsxs("select",{value:J.produto_id,onChange:We=>{We.target.value&&We.target.value!=J.produto_id&&Ie(d.id,J.id,We.target.value)},className:"w-full px-3 py-2 border-2 border-green-400 rounded text-sm focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:J.produto_id,children:J.produto_nome}),Array.isArray(s)&&s.filter(We=>We.id!==J.produto_id).map(We=>e.jsxs("option",{value:We.id,children:[We.codigo," - ",We.nome," ",We.descricao?`| ${We.descricao.substring(0,50)}...`:""," (Est: ",We.estoque_atual||0,")"]},We.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold",children:" NO VINCULADO"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:" Pesquisar produto existente:"}),e.jsx("input",{type:"text",placeholder:"Digite nome ou SKU...",value:me[J.id]||"",onChange:We=>Se({...me,[J.id]:We.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded focus:ring-2 focus:ring-blue-500 text-sm"})]}),me[J.id]&&me[J.id].length>=2&&e.jsxs("div",{className:"border-2 border-gray-300 rounded max-h-48 overflow-y-auto bg-white",children:[Array.isArray(s)&&s.filter(We=>{var xt,pt,Nt;const st=me[J.id].toLowerCase();return((xt=We.nome)==null?void 0:xt.toLowerCase().includes(st))||((pt=We.codigo)==null?void 0:pt.toLowerCase().includes(st))||((Nt=We.descricao)==null?void 0:Nt.toLowerCase().includes(st))}).sort((We,st)=>We.ativo===st.ativo?0:We.ativo?-1:1).slice(0,15).map(We=>e.jsxs("button",{type:"button",onClick:()=>{Ie(d.id,J.id,We.id),Se({...me,[J.id]:""})},className:`w-full text-left px-3 py-2 hover:bg-blue-50 border-b border-gray-200 last:border-b-0 text-xs ${We.ativo?"":"text-red-600 font-bold"}`,children:[!We.ativo&&" ",We.codigo," - ",We.nome,!We.ativo&&" [INATIVO]",e.jsxs("span",{className:"text-gray-500 ml-1",children:["(Est: ",We.estoque_atual||0,")"]})]},`produto-${J.id}-${We.id}`)),s.filter(We=>{var xt,pt,Nt;const st=me[J.id].toLowerCase();return((xt=We.nome)==null?void 0:xt.toLowerCase().includes(st))||((pt=We.codigo)==null?void 0:pt.toLowerCase().includes(st))||((Nt=We.descricao)==null?void 0:Nt.toLowerCase().includes(st))}).length===0&&e.jsx("div",{className:"px-3 py-4 text-center text-gray-500 text-xs",children:" Nenhum produto encontrado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"text-xs text-gray-500",children:"ou"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsx("button",{onClick:()=>Ye(J),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 text-sm",children:" Criar Novo Produto"})]})]})}):e.jsx("div",{children:J.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold inline-block mb-2",children:" VINCULADO"}),e.jsx("div",{className:"font-semibold text-base text-green-900",children:J.produto_nome})]}):e.jsx("div",{className:"bg-gray-600 text-white px-2 py-1 rounded text-xs font-bold inline-block",children:" NO VINCULADO"})})})}),d.status==="pendente"&&B==="parcial"&&J.produto_id&&e.jsxs("div",{className:"col-span-3 p-4 border-t-2 border-gray-300 bg-gradient-to-r from-blue-50 via-gray-50 to-green-50",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3 flex items-center text-sm",children:" Quantidade destinada ao estoque online"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" Total NF"}),e.jsx("input",{type:"number",value:J.quantidade,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded bg-gray-100 text-base font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" Online"}),e.jsx("input",{type:"number",min:"0",max:J.quantidade,step:"0.01",value:L[J.id]??J.quantidade_online??0,onChange:We=>{const st=parseFloat(We.target.value)||0;E({...L,[J.id]:Math.min(st,J.quantidade)})},className:"w-full px-3 py-2 border-2 border-blue-400 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base font-semibold",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" Loja"}),e.jsx("input",{type:"number",value:(J.quantidade-(L[J.id]??J.quantidade_online??0)).toFixed(2),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded bg-gray-100 text-base font-semibold"})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-700 bg-white rounded-lg p-3 border border-gray-300 font-medium",children:[" Valor online: R$ ",((L[J.id]??J.quantidade_online??0)*J.valor_unitario).toFixed(2)]}),L[J.id]!==void 0&&L[J.id]!==J.quantidade_online?e.jsx("button",{onClick:()=>it(d.id,J.id,L[J.id]),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 mt-3 text-sm",children:" Salvar Distribuio"}):J.quantidade_online!==null&&J.quantidade_online!==void 0&&e.jsxs("div",{className:"mt-3 text-sm text-green-700 bg-green-50 rounded-lg p-3 border border-green-200 flex items-center justify-center font-medium",children:[" Salvo: ",J.quantidade_online," online / ",(J.quantidade-J.quantidade_online).toFixed(2)," loja"]})]})]}),d.status==="processada"&&J.produto_id&&e.jsxs("div",{className:"mt-3 pt-3 border-t bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("span",{className:"text-blue-800 font-semibold",children:" Lanado no estoque:"}),e.jsx("span",{className:"ml-2",children:J.produto_nome})]})]},J.id)})})]}),d.status==="pendente"&&e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:" Distribuio (informativo para relatrios)"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Estoque unificado  Classificao apenas para anlises"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ae(d.id,"loja"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="loja"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Loja"}),e.jsx("button",{onClick:()=>Ae(d.id,"online"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="online"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Online"}),e.jsx("button",{onClick:()=>Ae(d.id,"parcial"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="parcial"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Parcial"}),(d.percentual_online>0||d.tipo_rateio)&&e.jsxs("div",{className:"ml-auto flex gap-3 text-xs text-gray-600",children:[e.jsxs("span",{children:["Online: ",(d.percentual_online||0).toFixed(0),"%"]}),e.jsxs("span",{children:["Loja: ",(d.percentual_loja||100).toFixed(0),"%"]})]})]}),B==="parcial"&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-100 rounded p-2",children:[" Defina a quantidade destinada ao ",e.jsx("strong",{children:"estoque online"})," em cada produto acima. O sistema calcula automaticamente a % baseado nos valores."]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[d.itens.filter(J=>J.produto_id).length," de ",d.itens.length," produtos vinculados"]}),e.jsxs("div",{className:"flex gap-3",children:[d.entrada_estoque_realizada?e.jsx("button",{onClick:()=>tt(d.id,d.numero_nota),disabled:o,className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 disabled:bg-gray-400",children:o?" Revertendo...":" Reverter Entrada"}):e.jsxs(e.Fragment,{children:[!d.entrada_estoque_realizada&&e.jsx("button",{onClick:()=>Le(d.id,d.numero_nota),disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-400",children:" Excluir Nota"}),d.itens.some(J=>J.produto_id)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Dt(d.id),disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400",children:" Revisar Preos"}),e.jsx("button",{onClick:()=>gt(d.id),disabled:o,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400",children:o?" Processando...":" Processar Nota"})]})]}),e.jsx("button",{onClick:()=>{x(!1),u(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Fechar"})]})]})]})]})}),M&&le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:" Criar Novo Produto"}),e.jsx("p",{className:"text-sm text-gray-600",children:"A partir do item da NF-e"})]}),e.jsx("button",{onClick:()=>{z(!1),Q(null),re(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsx("div",{className:"px-6 py-4",children:ae?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Gerando sugestes de SKU..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:" Dados da NF-e:"}),e.jsxs("div",{className:"text-sm space-y-1 text-blue-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Descrio:"})," ",le.descricao]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Cdigo Fornecedor:"})," ",le.codigo_produto]}),e.jsxs("div",{children:[e.jsx("strong",{children:"NCM:"})," ",le.ncm]}),le.ean&&e.jsxs("div",{children:[e.jsx("strong",{children:"EAN:"})," ",le.ean]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Valor Unitrio:"})," R$ ",le.valor_unitario.toFixed(2)]})]})]}),(ne==null?void 0:ne.ja_existe)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-yellow-900 mb-2",children:['Cdigo do fornecedor "',ne.sku_proposto,'" j est em uso!']}),e.jsxs("div",{className:"text-sm text-yellow-800 mb-3",children:["Produto existente: ",e.jsx("strong",{children:ne.produto_existente.nome}),e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Um SKU alternativo foi sugerido automaticamente. Voc pode alterar se preferir."})]}),e.jsx("div",{className:"text-sm text-yellow-800 mb-2 font-semibold",children:"Outras opes de SKU disponveis:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.sugestoes.map(J=>e.jsxs("button",{onClick:()=>_e({...ve,sku:J.sku}),className:`px-3 py-1 rounded-lg text-sm font-semibold transition-all ${ve.sku===J.sku?"bg-blue-600 text-white shadow-md":"bg-white border border-blue-300 text-blue-700 hover:bg-blue-50"} ${J.padrao?"ring-2 ring-yellow-400":""}`,children:[J.sku," ",J.padrao&&""]},J.sku))})]})]})}),ne&&!ne.ja_existe&&e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"SKU disponvel!"})," O cdigo do fornecedor pode ser usado diretamente."]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["SKU / Cdigo do Produto *",e.jsx("span",{className:"text-xs text-gray-500 font-normal ml-2",children:"(Baseado no cdigo do fornecedor)"})]}),e.jsx("input",{type:"text",value:ve.sku,onChange:J=>_e({...ve,sku:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"Ex: MGZ-12345"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Voc pode editar o SKU se preferir"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Nome do Produto *"}),e.jsx("input",{type:"text",value:ve.nome,onChange:J=>_e({...ve,nome:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo do produto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:ve.descricao,onChange:J=>_e({...ve,descricao:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Descrio detalhada (opcional)"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Preo de Custo *"}),e.jsx("input",{type:"number",step:"0.01",value:ve.preco_custo,onChange:J=>{const ye=J.target.value,Pe=parseFloat(ve.margem_lucro)||0;_e({...ve,preco_custo:ye,preco_venda:ye?Lt(parseFloat(ye),Pe):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Margem (%) *"}),e.jsx("input",{type:"number",step:"0.01",value:ve.margem_lucro,onChange:J=>{const ye=J.target.value,Pe=parseFloat(ve.preco_custo)||0;_e({...ve,margem_lucro:ye,preco_venda:Pe&&ye?Lt(Pe,parseFloat(ye)):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"number",step:"0.01",value:ve.preco_venda,onChange:J=>{const ye=J.target.value,Pe=parseFloat(ve.preco_custo)||0;_e({...ve,preco_venda:ye,margem_lucro:Pe&&ye?Oe(Pe,parseFloat(ye)):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:ve.estoque_minimo,onChange:J=>_e({...ve,estoque_minimo:parseInt(J.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Estoque Mximo"}),e.jsx("input",{type:"number",value:ve.estoque_maximo,onChange:J=>_e({...ve,estoque_maximo:parseInt(J.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{z(!1),Q(null),re(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:te,disabled:o||!ve.sku||!ve.nome||!ve.preco_custo||parseFloat(ve.preco_custo)<=0||!ve.preco_venda||parseFloat(ve.preco_venda)<=0,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:o?" Criando...":" Criar e Vincular Produto"})]})]})}),h&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[" NF-e ",d.numero_nota]}),e.jsxs("p",{className:"text-blue-100 mt-1",children:["Srie: ",d.serie]})]}),e.jsx("button",{onClick:()=>{b(!1),u(null)},className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:""})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Dados da Nota"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data Emisso:"}),e.jsx("span",{className:"font-semibold",children:new Date(d.data_emissao).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{children:ce(d.status)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",d.valor_total.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Fornecedor"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Nome:"}),e.jsx("div",{className:"font-semibold",children:d.fornecedor_nome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"CNPJ:"}),e.jsx("div",{className:"font-mono text-xs",children:d.fornecedor_cnpj})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-3 bg-gray-50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Chave de Acesso"}),e.jsx("div",{className:"font-mono text-xs break-all",children:d.chave_acesso})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((Re=d.itens)==null?void 0:Re.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Itens"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.produtos_vinculados}),e.jsx("div",{className:"text-sm text-gray-600",children:"Vinculados"})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.produtos_nao_vinculados}),e.jsx("div",{className:"text-sm text-gray-600",children:"No Vinculados"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Itens da Nota"}),e.jsx("div",{className:"space-y-3",children:(He=d.itens)==null?void 0:He.map((J,ye)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:J.descricao}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cdigo: ",J.codigo_produto," | NCM: ",J.ncm]})]}),J.vinculado?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded",children:" Vinculado"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-semibold rounded",children:" No Vinculado"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-sm mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Qtd:"}),e.jsx("div",{className:"font-semibold",children:J.quantidade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unit:"}),e.jsxs("div",{className:"font-semibold",children:["R$ ",J.valor_unitario.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["R$ ",J.valor_total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"CFOP:"}),e.jsx("div",{className:"font-semibold",children:J.cfop})]})]}),(J.lote||J.data_validade)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[J.lote&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:" Lote:"}),e.jsx("div",{className:"font-semibold text-purple-800",children:J.lote})]}),J.data_validade&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:" Validade:"}),e.jsx("div",{className:"font-semibold text-orange-800",children:new Date(J.data_validade).toLocaleDateString("pt-BR")})]})]}),J.vinculado&&J.produto_nome&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" Produto vinculado: "}),e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:J.produto_nome})]})]},J.id))})]})]}),e.jsxs("div",{className:"border-t p-6 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:d.entrada_estoque_realizada?e.jsx("span",{className:"text-green-600 font-semibold",children:" Entrada realizada no estoque"}):e.jsx("span",{className:"text-orange-600 font-semibold",children:" Entrada ainda no processada"})}),e.jsxs("div",{className:"flex gap-3",children:[d.status==="pendente"&&d.produtos_vinculados>0&&!d.entrada_estoque_realizada&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{b(!1),gt(d.id)},className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold",children:" Revisar Preos e Processar"})}),d.status==="pendente"&&e.jsx("button",{onClick:()=>{b(!1),lt(d.id)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold",children:" Vincular Produtos"}),e.jsx("button",{onClick:()=>{b(!1),u(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Fechar"})]})]})]})}),T&&K&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Reviso de Preos e Custos"}),e.jsxs("p",{className:"text-purple-100 mt-1",children:["NF-e ",K.numero_nota," - ",K.fornecedor_nome]})]}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Filtrar:"}),(()=>{const J=K.itens.filter(xt=>xt.produto_vinculado!==null||xt.produto_id!==null),ye=J.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)>0}).length,Pe=J.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)<0}).length,We=J.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)===0}).length,st=J.length;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>R("todos"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${W==="todos"?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"text-base",children:""}),"Todos (",st,")"]}),ye>0&&e.jsxs("button",{onClick:()=>R("aumentou"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${W==="aumentou"?"bg-red-600 text-white shadow-md":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx("span",{className:"text-base",children:""}),ye," custo",ye>1?"s":""," maior",ye>1?"es":""]}),Pe>0&&e.jsxs("button",{onClick:()=>R("diminuiu"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${W==="diminuiu"?"bg-green-600 text-white shadow-md":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx("span",{className:"text-base",children:""}),Pe," custo",Pe>1?"s":""," menor",Pe>1?"es":""]}),We>0&&e.jsxs("button",{onClick:()=>R("igual"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${W==="igual"?"bg-gray-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"text-base",children:""}),We," sem alterao"]})]})})()]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-6",children:K.itens.filter(J=>{var We;if(!(J.produto_vinculado!==null||J.produto_id!==null))return!1;const Pe=((We=J.produto_vinculado)==null?void 0:We.variacao_custo_percentual)||J.variacao_custo_percentual||0;return W==="todos"?!0:W==="aumentou"?Pe>0:W==="diminuiu"?Pe<0:W==="igual"?Pe===0:!0}).map(J=>{const ye=J.produto_vinculado||{produto_id:J.produto_id,produto_nome:J.produto_nome,produto_codigo:J.produto_codigo,produto_ean:J.produto_ean,custo_anterior:J.custo_anterior,custo_novo:J.custo_novo,variacao_custo_percentual:J.variacao_custo_percentual,preco_venda_atual:J.preco_venda_atual,margem_atual:J.margem_atual,estoque_atual:J.estoque_atual};if(!ye.produto_id||!ye.produto_id)return null;const Pe=ye.variacao_custo_percentual||0,We=Pe>0,st=Y[ye.produto_id]||{preco_venda:ye.preco_venda_atual||0,margem:ye.margem_atual||0};return e.jsxs("div",{className:"border-2 border-gray-300 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl mb-1",children:ye.produto_nome}),e.jsxs("p",{className:"text-sm text-blue-100",children:["SKU: ",ye.produto_codigo]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{onClick:()=>ct(ye.produto_id,ye.produto_nome),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:" Histrico"}),e.jsxs("div",{className:"mt-1 text-sm",children:["Quantidade ",e.jsx("strong",{children:J.quantidade||J.quantidade_nf||0})]})]})]})}),e.jsxs("div",{className:"p-5 bg-white space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Custo Anterior"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:["R$ ",(ye.custo_anterior||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Custo Novo"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",(ye.custo_novo||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Variao"}),e.jsxs("div",{className:`text-2xl font-bold ${We?"text-red-600":Pe<0?"text-green-600":"text-gray-600"}`,children:[Pe>0?"":Pe<0?"":""," ",Math.abs(Pe).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Preo de Venda"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:st.preco_venda,onChange:xt=>ge(ye.produto_id,parseFloat(xt.target.value)||0,ye.custo_novo),className:"w-full pl-10 pr-3 py-3 border-2 border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Anterior: R$ ",ye.preco_venda_atual.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Margem de Lucro"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",value:st.margem,onChange:xt=>De(ye.produto_id,parseFloat(xt.target.value)||0,ye.custo_novo),className:"w-full pr-10 pl-3 py-3 border-2 border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Com o novo custo"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-800 mb-3",children:" Anlise Comparativa (Valores Anteriores)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Custo Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-gray-700",children:["R$ ",(ye.custo_anterior||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Preo Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["R$ ",(ye.preco_venda_atual||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Margem Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(ye.margem_atual||0).toFixed(1),"%"]})]})]})]})]})]},J.item_id)}).filter(Boolean)})}),e.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>{U(!1),I(null)},className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors",children:" Cancelar"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Valor Total da Nota"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",K.valor_total.toFixed(2)]})]}),e.jsx("button",{onClick:Ct,disabled:o,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold text-lg shadow-lg disabled:opacity-50 transition-all",children:o?" Processando...":" Confirmar e Processar Nota"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Histrico de Alteraes de Preos"}),k&&e.jsx("p",{className:"mt-2 text-purple-100",children:k.nome})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600"})}):S.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma alterao de preo registrada"})}):e.jsx("div",{className:"space-y-4",children:S.map(J=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:J.motivo==="nfe_entrada"?"":J.motivo==="nfe_revisao_precos"?"":J.motivo==="manual"?"":""}),e.jsx("span",{className:"font-semibold text-gray-800",children:J.motivo==="nfe_entrada"?"Entrada NF-e":J.motivo==="nfe_revisao_precos"?"Reviso de Preos":J.motivo==="manual"?"Ajuste Manual":J.motivo})]}),J.referencia&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:J.referencia}),J.nota_numero&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Nota: ",J.nota_numero]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-500",children:[new Date(J.data).toLocaleString("pt-BR"),J.usuario&&e.jsx("div",{className:"text-xs mt-1",children:J.usuario})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[J.preco_custo_anterior!==null&&J.preco_custo_novo!==null&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" CUSTO"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",J.preco_custo_anterior.toFixed(2)]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Novo"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["R$ ",J.preco_custo_novo.toFixed(2)]})]})]}),J.variacao_custo_percentual!==null&&J.variacao_custo_percentual!==0&&e.jsxs("div",{className:`mt-2 text-sm font-semibold text-center ${J.variacao_custo_percentual>0?"text-red-600":"text-green-600"}`,children:[J.variacao_custo_percentual>0?"":""," ",Math.abs(J.variacao_custo_percentual).toFixed(2),"%"]})]}),J.preco_venda_anterior!==null&&J.preco_venda_novo!==null&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" PREO DE VENDA"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",J.preco_venda_anterior.toFixed(2)]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Novo"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",J.preco_venda_novo.toFixed(2)]})]})]}),J.variacao_venda_percentual!==null&&J.variacao_venda_percentual!==0&&e.jsxs("div",{className:`mt-2 text-sm font-semibold text-center ${J.variacao_venda_percentual>0?"text-green-600":"text-red-600"}`,children:[J.variacao_venda_percentual>0?"":""," ",Math.abs(J.variacao_venda_percentual).toFixed(2),"%"]})]})]}),J.margem_anterior!==null&&J.margem_nova!==null&&e.jsxs("div",{className:"mt-3 bg-purple-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" MARGEM DE LUCRO"}),e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-xl font-bold",children:[J.margem_anterior.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Nova"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700",children:[J.margem_nova.toFixed(1),"%"]})]})]})]}),J.observacoes&&e.jsx("div",{className:"mt-3 text-sm text-gray-600 italic bg-gray-50 rounded p-2",children:J.observacoes})]},J.id))})}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsx("button",{onClick:()=>{w(!1),C([]),F(null)},className:"w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:"Fechar"})})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Resultado do Processamento em Lote"}),y&&e.jsxs("p",{className:"mt-2",children:[y.sucessos," sucesso(s) | ",y.erros," erro(s) | Total: ",y.total_arquivos]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[p&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-green-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Processando arquivos..."})]}),y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:y.total_arquivos}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:y.sucessos}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sucessos"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:y.erros}),e.jsx("div",{className:"text-sm text-gray-600",children:"Erros"})]})]}),e.jsx("div",{className:"space-y-3",children:y.resultados.map((J,ye)=>{var Pe;return e.jsx("div",{className:`border rounded-lg p-4 ${J.sucesso?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:J.sucesso?"":""}),e.jsx("span",{className:"font-semibold text-gray-800",children:J.arquivo})]}),J.sucesso?e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Nota:"})," ",J.numero_nota]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Fornecedor:"})," ",J.fornecedor]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Valor:"})," R$ ",(Pe=J.valor_total)==null?void 0:Pe.toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Produtos:"})," ",J.produtos_vinculados," vinculados, ",J.produtos_nao_vinculados," no vinculados"]})]}):e.jsx("p",{className:"text-sm text-red-700",children:J.mensagem})]}),e.jsxs("span",{className:"text-sm text-gray-500 ml-4",children:["#",J.ordem]})]})},ye)})})]})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsx("button",{onClick:()=>{g(!1),N(null)},disabled:p,className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold disabled:opacity-50 transition-colors",children:p?" Processando...":"Fechar"})})]})})]})};function bP(t){var r,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=bP(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function It(){for(var t,r,a=0,s="",n=arguments.length;a<n;a++)(t=arguments[a])&&(r=bP(t))&&(s&&(s+=" "),s+=r);return s}var Az=Array.isArray,Ns=Az,Pz=typeof ho=="object"&&ho&&ho.Object===Object&&ho,vP=Pz,Tz=vP,Oz=typeof self=="object"&&self&&self.Object===Object&&self,Fz=Tz||Oz||Function("return this")(),no=Fz,Rz=no,$z=Rz.Symbol,e0=$z,L4=e0,yP=Object.prototype,Dz=yP.hasOwnProperty,Mz=yP.toString,Mu=L4?L4.toStringTag:void 0;function Iz(t){var r=Dz.call(t,Mu),a=t[Mu];try{t[Mu]=void 0;var s=!0}catch{}var n=Mz.call(t);return s&&(r?t[Mu]=a:delete t[Mu]),n}var Lz=Iz,Bz=Object.prototype,zz=Bz.toString;function qz(t){return zz.call(t)}var Vz=qz,B4=e0,Uz=Lz,Wz=Vz,Hz="[object Null]",Kz="[object Undefined]",z4=B4?B4.toStringTag:void 0;function Gz(t){return t==null?t===void 0?Kz:Hz:z4&&z4 in Object(t)?Uz(t):Wz(t)}var Uo=Gz;function Xz(t){return t!=null&&typeof t=="object"}var Wo=Xz,Yz=Uo,Qz=Wo,Jz="[object Symbol]";function Zz(t){return typeof t=="symbol"||Qz(t)&&Yz(t)==Jz}var iu=Zz,eq=Ns,tq=iu,rq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aq=/^\w*$/;function sq(t,r){if(eq(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||tq(t)?!0:aq.test(t)||!rq.test(t)||r!=null&&t in Object(r)}var U2=sq;function nq(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var qi=nq;const lu=mr(qi);var oq=Uo,iq=qi,lq="[object AsyncFunction]",cq="[object Function]",dq="[object GeneratorFunction]",uq="[object Proxy]";function mq(t){if(!iq(t))return!1;var r=oq(t);return r==cq||r==dq||r==lq||r==uq}var W2=mq;const Et=mr(W2);var xq=no,pq=xq["__core-js_shared__"],hq=pq,Jb=hq,q4=function(){var t=/[^.]+$/.exec(Jb&&Jb.keys&&Jb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fq(t){return!!q4&&q4 in t}var gq=fq,bq=Function.prototype,vq=bq.toString;function yq(t){if(t!=null){try{return vq.call(t)}catch{}try{return t+""}catch{}}return""}var jP=yq,jq=W2,Nq=gq,wq=qi,_q=jP,Sq=/[\\^$.*+?()[\]{}|]/g,Cq=/^\[object .+?Constructor\]$/,kq=Function.prototype,Eq=Object.prototype,Aq=kq.toString,Pq=Eq.hasOwnProperty,Tq=RegExp("^"+Aq.call(Pq).replace(Sq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Oq(t){if(!wq(t)||Nq(t))return!1;var r=jq(t)?Tq:Cq;return r.test(_q(t))}var Fq=Oq;function Rq(t,r){return t==null?void 0:t[r]}var $q=Rq,Dq=Fq,Mq=$q;function Iq(t,r){var a=Mq(t,r);return Dq(a)?a:void 0}var nc=Iq,Lq=nc,Bq=Lq(Object,"create"),bg=Bq,V4=bg;function zq(){this.__data__=V4?V4(null):{},this.size=0}var qq=zq;function Vq(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Uq=Vq,Wq=bg,Hq="__lodash_hash_undefined__",Kq=Object.prototype,Gq=Kq.hasOwnProperty;function Xq(t){var r=this.__data__;if(Wq){var a=r[t];return a===Hq?void 0:a}return Gq.call(r,t)?r[t]:void 0}var Yq=Xq,Qq=bg,Jq=Object.prototype,Zq=Jq.hasOwnProperty;function eV(t){var r=this.__data__;return Qq?r[t]!==void 0:Zq.call(r,t)}var tV=eV,rV=bg,aV="__lodash_hash_undefined__";function sV(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=rV&&r===void 0?aV:r,this}var nV=sV,oV=qq,iV=Uq,lV=Yq,cV=tV,dV=nV;function cu(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}cu.prototype.clear=oV;cu.prototype.delete=iV;cu.prototype.get=lV;cu.prototype.has=cV;cu.prototype.set=dV;var uV=cu;function mV(){this.__data__=[],this.size=0}var xV=mV;function pV(t,r){return t===r||t!==t&&r!==r}var H2=pV,hV=H2;function fV(t,r){for(var a=t.length;a--;)if(hV(t[a][0],r))return a;return-1}var vg=fV,gV=vg,bV=Array.prototype,vV=bV.splice;function yV(t){var r=this.__data__,a=gV(r,t);if(a<0)return!1;var s=r.length-1;return a==s?r.pop():vV.call(r,a,1),--this.size,!0}var jV=yV,NV=vg;function wV(t){var r=this.__data__,a=NV(r,t);return a<0?void 0:r[a][1]}var _V=wV,SV=vg;function CV(t){return SV(this.__data__,t)>-1}var kV=CV,EV=vg;function AV(t,r){var a=this.__data__,s=EV(a,t);return s<0?(++this.size,a.push([t,r])):a[s][1]=r,this}var PV=AV,TV=xV,OV=jV,FV=_V,RV=kV,$V=PV;function du(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}du.prototype.clear=TV;du.prototype.delete=OV;du.prototype.get=FV;du.prototype.has=RV;du.prototype.set=$V;var yg=du,DV=nc,MV=no,IV=DV(MV,"Map"),K2=IV,U4=uV,LV=yg,BV=K2;function zV(){this.size=0,this.__data__={hash:new U4,map:new(BV||LV),string:new U4}}var qV=zV;function VV(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}var UV=VV,WV=UV;function HV(t,r){var a=t.__data__;return WV(r)?a[typeof r=="string"?"string":"hash"]:a.map}var jg=HV,KV=jg;function GV(t){var r=KV(this,t).delete(t);return this.size-=r?1:0,r}var XV=GV,YV=jg;function QV(t){return YV(this,t).get(t)}var JV=QV,ZV=jg;function eU(t){return ZV(this,t).has(t)}var tU=eU,rU=jg;function aU(t,r){var a=rU(this,t),s=a.size;return a.set(t,r),this.size+=a.size==s?0:1,this}var sU=aU,nU=qV,oU=XV,iU=JV,lU=tU,cU=sU;function uu(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}uu.prototype.clear=nU;uu.prototype.delete=oU;uu.prototype.get=iU;uu.prototype.has=lU;uu.prototype.set=cU;var G2=uu,NP=G2,dU="Expected a function";function X2(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(dU);var a=function(){var s=arguments,n=r?r.apply(this,s):s[0],o=a.cache;if(o.has(n))return o.get(n);var i=t.apply(this,s);return a.cache=o.set(n,i)||o,i};return a.cache=new(X2.Cache||NP),a}X2.Cache=NP;var wP=X2;const uU=mr(wP);var mU=wP,xU=500;function pU(t){var r=mU(t,function(s){return a.size===xU&&a.clear(),s}),a=r.cache;return r}var hU=pU,fU=hU,gU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bU=/\\(\\)?/g,vU=fU(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(gU,function(a,s,n,o){r.push(n?o.replace(bU,"$1"):s||a)}),r}),yU=vU;function jU(t,r){for(var a=-1,s=t==null?0:t.length,n=Array(s);++a<s;)n[a]=r(t[a],a,t);return n}var Y2=jU,W4=e0,NU=Y2,wU=Ns,_U=iu,H4=W4?W4.prototype:void 0,K4=H4?H4.toString:void 0;function _P(t){if(typeof t=="string")return t;if(wU(t))return NU(t,_P)+"";if(_U(t))return K4?K4.call(t):"";var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var SU=_P,CU=SU;function kU(t){return t==null?"":CU(t)}var SP=kU,EU=Ns,AU=U2,PU=yU,TU=SP;function OU(t,r){return EU(t)?t:AU(t,r)?[t]:PU(TU(t))}var CP=OU,FU=iu;function RU(t){if(typeof t=="string"||FU(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var Ng=RU,$U=CP,DU=Ng;function MU(t,r){r=$U(r,t);for(var a=0,s=r.length;t!=null&&a<s;)t=t[DU(r[a++])];return a&&a==s?t:void 0}var Q2=MU,IU=Q2;function LU(t,r,a){var s=t==null?void 0:IU(t,r);return s===void 0?a:s}var kP=LU;const Ds=mr(kP);function BU(t){return t==null}var zU=BU;const Rt=mr(zU);var qU=Uo,VU=Ns,UU=Wo,WU="[object String]";function HU(t){return typeof t=="string"||!VU(t)&&UU(t)&&qU(t)==WU}var KU=HU;const Ul=mr(KU);var EP={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2=Symbol.for("react.element"),Z2=Symbol.for("react.portal"),wg=Symbol.for("react.fragment"),_g=Symbol.for("react.strict_mode"),Sg=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),GU=Symbol.for("react.server_context"),Eg=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),Pg=Symbol.for("react.suspense_list"),Tg=Symbol.for("react.memo"),Og=Symbol.for("react.lazy"),XU=Symbol.for("react.offscreen"),AP;AP=Symbol.for("react.module.reference");function ln(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case J2:switch(t=t.type,t){case wg:case Sg:case _g:case Ag:case Pg:return t;default:switch(t=t&&t.$$typeof,t){case GU:case kg:case Eg:case Og:case Tg:case Cg:return t;default:return r}}case Z2:return r}}}xr.ContextConsumer=kg;xr.ContextProvider=Cg;xr.Element=J2;xr.ForwardRef=Eg;xr.Fragment=wg;xr.Lazy=Og;xr.Memo=Tg;xr.Portal=Z2;xr.Profiler=Sg;xr.StrictMode=_g;xr.Suspense=Ag;xr.SuspenseList=Pg;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(t){return ln(t)===kg};xr.isContextProvider=function(t){return ln(t)===Cg};xr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===J2};xr.isForwardRef=function(t){return ln(t)===Eg};xr.isFragment=function(t){return ln(t)===wg};xr.isLazy=function(t){return ln(t)===Og};xr.isMemo=function(t){return ln(t)===Tg};xr.isPortal=function(t){return ln(t)===Z2};xr.isProfiler=function(t){return ln(t)===Sg};xr.isStrictMode=function(t){return ln(t)===_g};xr.isSuspense=function(t){return ln(t)===Ag};xr.isSuspenseList=function(t){return ln(t)===Pg};xr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wg||t===Sg||t===_g||t===Ag||t===Pg||t===XU||typeof t=="object"&&t!==null&&(t.$$typeof===Og||t.$$typeof===Tg||t.$$typeof===Cg||t.$$typeof===kg||t.$$typeof===Eg||t.$$typeof===AP||t.getModuleId!==void 0)};xr.typeOf=ln;EP.exports=xr;var YU=EP.exports,QU=Uo,JU=Wo,ZU="[object Number]";function eW(t){return typeof t=="number"||JU(t)&&QU(t)==ZU}var PP=eW;const tW=mr(PP);var rW=PP;function aW(t){return rW(t)&&t!=+t}var sW=aW;const mu=mr(sW);var Ja=function(r){return r===0?0:r>0?1:-1},pl=function(r){return Ul(r)&&r.indexOf("%")===r.length-1},rt=function(r){return tW(r)&&!mu(r)},nW=function(r){return Rt(r)},ha=function(r){return rt(r)||Ul(r)},oW=0,oc=function(r){var a=++oW;return"".concat(r||"").concat(a)},Za=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!rt(r)&&!Ul(r))return s;var o;if(pl(r)){var i=r.indexOf("%");o=a*parseFloat(r.slice(0,i))/100}else o=+r;return mu(o)&&(o=s),n&&o>a&&(o=a),o},di=function(r){if(!r)return null;var a=Object.keys(r);return a&&a.length?r[a[0]]:null},iW=function(r){if(!Array.isArray(r))return!1;for(var a=r.length,s={},n=0;n<a;n++)if(!s[r[n]])s[r[n]]=!0;else return!0;return!1},xa=function(r,a){return rt(r)&&rt(a)?function(s){return r+s*(a-r)}:function(){return a}};function Nh(t,r,a){return!t||!t.length?null:t.find(function(s){return s&&(typeof r=="function"?r(s):Ds(s,r))===a})}var lW=function(r,a){return rt(r)&&rt(a)?r-a:Ul(r)&&Ul(a)?r.localeCompare(a):r instanceof Date&&a instanceof Date?r.getTime()-a.getTime():String(r).localeCompare(String(a))};function sd(t,r){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(r,a)||t[a]!==r[a]))return!1;for(var s in r)if({}.hasOwnProperty.call(r,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yy(t)}var cW=["viewBox","children"],dW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G4=["points","pathLength"],Zb={svg:cW,polygon:G4,polyline:G4},eN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wh=function(r,a){if(!r||typeof r=="function"||typeof r=="boolean")return null;var s=r;if(j.isValidElement(r)&&(s=r.props),!lu(s))return null;var n={};return Object.keys(s).forEach(function(o){eN.includes(o)&&(n[o]=a||function(i){return s[o](s,i)})}),n},uW=function(r,a,s){return function(n){return r(a,s,n),null}},Wl=function(r,a,s){if(!lu(r)||Yy(r)!=="object")return null;var n=null;return Object.keys(r).forEach(function(o){var i=r[o];eN.includes(o)&&typeof i=="function"&&(n||(n={}),n[o]=uW(i,a,s))}),n},mW=["children"],xW=["children"];function X4(t,r){if(t==null)return{};var a=pW(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function pW(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qy(t)}var Y4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wo=function(r){return typeof r=="string"?r:r?r.displayName||r.name||"Component":""},Q4=null,ev=null,tN=function t(r){if(r===Q4&&Array.isArray(ev))return ev;var a=[];return j.Children.forEach(r,function(s){Rt(s)||(YU.isFragment(s)?a=a.concat(t(s.props.children)):a.push(s))}),ev=a,Q4=r,a};function Ms(t,r){var a=[],s=[];return Array.isArray(r)?s=r.map(function(n){return wo(n)}):s=[wo(r)],tN(t).forEach(function(n){var o=Ds(n,"type.displayName")||Ds(n,"type.name");s.indexOf(o)!==-1&&a.push(n)}),a}function Es(t,r){var a=Ms(t,r);return a&&a[0]}var J4=function(r){if(!r||!r.props)return!1;var a=r.props,s=a.width,n=a.height;return!(!rt(s)||s<=0||!rt(n)||n<=0)},hW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],fW=function(r){return r&&r.type&&Ul(r.type)&&hW.indexOf(r.type)>=0},TP=function(r){return r&&Qy(r)==="object"&&"clipDot"in r},gW=function(r,a,s,n){var o,i=(o=Zb==null?void 0:Zb[n])!==null&&o!==void 0?o:[];return a.startsWith("data-")||!Et(r)&&(n&&i.includes(a)||dW.includes(a))||s&&eN.includes(a)},St=function(r,a,s){if(!r||typeof r=="function"||typeof r=="boolean")return null;var n=r;if(j.isValidElement(r)&&(n=r.props),!lu(n))return null;var o={};return Object.keys(n).forEach(function(i){var l;gW((l=n)===null||l===void 0?void 0:l[i],i,a,s)&&(o[i]=n[i])}),o},Jy=function t(r,a){if(r===a)return!0;var s=j.Children.count(r);if(s!==j.Children.count(a))return!1;if(s===0)return!0;if(s===1)return Z4(Array.isArray(r)?r[0]:r,Array.isArray(a)?a[0]:a);for(var n=0;n<s;n++){var o=r[n],i=a[n];if(Array.isArray(o)||Array.isArray(i)){if(!t(o,i))return!1}else if(!Z4(o,i))return!1}return!0},Z4=function(r,a){if(Rt(r)&&Rt(a))return!0;if(!Rt(r)&&!Rt(a)){var s=r.props||{},n=s.children,o=X4(s,mW),i=a.props||{},l=i.children,c=X4(i,xW);return n&&l?sd(o,c)&&Jy(n,l):!n&&!l?sd(o,c):!1}return!1},e3=function(r,a){var s=[],n={};return tN(r).forEach(function(o,i){if(fW(o))s.push(o);else if(o){var l=wo(o.type),c=a[l]||{},d=c.handler,u=c.once;if(d&&(!u||!n[l])){var m=d(o,l,i);s.push(m),n[l]=!0}}}),s},bW=function(r){var a=r&&r.type;return a&&Y4[a]?Y4[a]:null},vW=function(r,a){return tN(a).indexOf(r)},yW=["children","width","height","viewBox","className","style","title","desc"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Zy.apply(this,arguments)}function jW(t,r){if(t==null)return{};var a=NW(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function NW(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function ej(t){var r=t.children,a=t.width,s=t.height,n=t.viewBox,o=t.className,i=t.style,l=t.title,c=t.desc,d=jW(t,yW),u=n||{width:a,height:s,x:0,y:0},m=It("recharts-surface",o);return pe.createElement("svg",Zy({},St(d,!0,"svg"),{className:m,width:a,height:s,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),pe.createElement("title",null,l),pe.createElement("desc",null,c),r)}var wW=["children","className"];function tj(){return tj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},tj.apply(this,arguments)}function _W(t,r){if(t==null)return{};var a=SW(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function SW(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var Ut=pe.forwardRef(function(t,r){var a=t.children,s=t.className,n=_W(t,wW),o=It("recharts-layer",s);return pe.createElement("g",tj({className:o},St(n,!0),{ref:r}),a)}),En=function(r,a){for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o]};function CW(t,r,a){var s=-1,n=t.length;r<0&&(r=-r>n?0:n+r),a=a>n?n:a,a<0&&(a+=n),n=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(n);++s<n;)o[s]=t[s+r];return o}var kW=CW,EW=kW;function AW(t,r,a){var s=t.length;return a=a===void 0?s:a,!r&&a>=s?t:EW(t,r,a)}var PW=AW,TW="\\ud800-\\udfff",OW="\\u0300-\\u036f",FW="\\ufe20-\\ufe2f",RW="\\u20d0-\\u20ff",$W=OW+FW+RW,DW="\\ufe0e\\ufe0f",MW="\\u200d",IW=RegExp("["+MW+TW+$W+DW+"]");function LW(t){return IW.test(t)}var OP=LW;function BW(t){return t.split("")}var zW=BW,FP="\\ud800-\\udfff",qW="\\u0300-\\u036f",VW="\\ufe20-\\ufe2f",UW="\\u20d0-\\u20ff",WW=qW+VW+UW,HW="\\ufe0e\\ufe0f",KW="["+FP+"]",rj="["+WW+"]",aj="\\ud83c[\\udffb-\\udfff]",GW="(?:"+rj+"|"+aj+")",RP="[^"+FP+"]",$P="(?:\\ud83c[\\udde6-\\uddff]){2}",DP="[\\ud800-\\udbff][\\udc00-\\udfff]",XW="\\u200d",MP=GW+"?",IP="["+HW+"]?",YW="(?:"+XW+"(?:"+[RP,$P,DP].join("|")+")"+IP+MP+")*",QW=IP+MP+YW,JW="(?:"+[RP+rj+"?",rj,$P,DP,KW].join("|")+")",ZW=RegExp(aj+"(?="+aj+")|"+JW+QW,"g");function eH(t){return t.match(ZW)||[]}var tH=eH,rH=zW,aH=OP,sH=tH;function nH(t){return aH(t)?sH(t):rH(t)}var oH=nH,iH=PW,lH=OP,cH=oH,dH=SP;function uH(t){return function(r){r=dH(r);var a=lH(r)?cH(r):void 0,s=a?a[0]:r.charAt(0),n=a?iH(a,1).join(""):r.slice(1);return s[t]()+n}}var mH=uH,xH=mH,pH=xH("toUpperCase"),hH=pH;const Fg=mr(hH);function yr(t){return function(){return t}}const LP=Math.cos,_h=Math.sin,Rn=Math.sqrt,Sh=Math.PI,Rg=2*Sh,sj=Math.PI,nj=2*sj,sl=1e-6,fH=nj-sl;function BP(t){this._+=t[0];for(let r=1,a=t.length;r<a;++r)this._+=arguments[r]+t[r]}function gH(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return BP;const a=10**r;return function(s){this._+=s[0];for(let n=1,o=s.length;n<o;++n)this._+=Math.round(arguments[n]*a)/a+s[n]}}class bH{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?BP:gH(r)}moveTo(r,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,a){this._append`L${this._x1=+r},${this._y1=+a}`}quadraticCurveTo(r,a,s,n){this._append`Q${+r},${+a},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(r,a,s,n,o,i){this._append`C${+r},${+a},${+s},${+n},${this._x1=+o},${this._y1=+i}`}arcTo(r,a,s,n,o){if(r=+r,a=+a,s=+s,n=+n,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,l=this._y1,c=s-r,d=n-a,u=i-r,m=l-a,x=u*u+m*m;if(this._x1===null)this._append`M${this._x1=r},${this._y1=a}`;else if(x>sl)if(!(Math.abs(m*c-d*u)>sl)||!o)this._append`L${this._x1=r},${this._y1=a}`;else{let h=s-i,b=n-l,p=c*c+d*d,f=h*h+b*b,v=Math.sqrt(p),g=Math.sqrt(x),y=o*Math.tan((sj-Math.acos((p+x-f)/(2*v*g)))/2),N=y/g,_=y/v;Math.abs(N-1)>sl&&this._append`L${r+N*u},${a+N*m}`,this._append`A${o},${o},0,0,${+(m*h>u*b)},${this._x1=r+_*c},${this._y1=a+_*d}`}}arc(r,a,s,n,o,i){if(r=+r,a=+a,s=+s,i=!!i,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(n),c=s*Math.sin(n),d=r+l,u=a+c,m=1^i,x=i?n-o:o-n;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>sl||Math.abs(this._y1-u)>sl)&&this._append`L${d},${u}`,s&&(x<0&&(x=x%nj+nj),x>fH?this._append`A${s},${s},0,1,${m},${r-l},${a-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=u}`:x>sl&&this._append`A${s},${s},0,${+(x>=sj)},${m},${this._x1=r+s*Math.cos(o)},${this._y1=a+s*Math.sin(o)}`)}rect(r,a,s,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function rN(t){let r=3;return t.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);r=s}return t},()=>new bH(r)}function aN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zP(t){this._context=t}zP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function $g(t){return new zP(t)}function qP(t){return t[0]}function VP(t){return t[1]}function UP(t,r){var a=yr(!0),s=null,n=$g,o=null,i=rN(l);t=typeof t=="function"?t:t===void 0?qP:yr(t),r=typeof r=="function"?r:r===void 0?VP:yr(r);function l(c){var d,u=(c=aN(c)).length,m,x=!1,h;for(s==null&&(o=n(h=i())),d=0;d<=u;++d)!(d<u&&a(m=c[d],d,c))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+t(m,d,c),+r(m,d,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:yr(+c),l):t},l.y=function(c){return arguments.length?(r=typeof c=="function"?c:yr(+c),l):r},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:yr(!!c),l):a},l.curve=function(c){return arguments.length?(n=c,s!=null&&(o=n(s)),l):n},l.context=function(c){return arguments.length?(c==null?s=o=null:o=n(s=c),l):s},l}function H0(t,r,a){var s=null,n=yr(!0),o=null,i=$g,l=null,c=rN(d);t=typeof t=="function"?t:t===void 0?qP:yr(+t),r=typeof r=="function"?r:yr(r===void 0?0:+r),a=typeof a=="function"?a:a===void 0?VP:yr(+a);function d(m){var x,h,b,p=(m=aN(m)).length,f,v=!1,g,y=new Array(p),N=new Array(p);for(o==null&&(l=i(g=c())),x=0;x<=p;++x){if(!(x<p&&n(f=m[x],x,m))===v)if(v=!v)h=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=x-1;b>=h;--b)l.point(y[b],N[b]);l.lineEnd(),l.areaEnd()}v&&(y[x]=+t(f,x,m),N[x]=+r(f,x,m),l.point(s?+s(f,x,m):y[x],a?+a(f,x,m):N[x]))}if(g)return l=null,g+""||null}function u(){return UP().defined(n).curve(i).context(o)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:yr(+m),s=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:yr(+m),d):t},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:yr(+m),d):s},d.y=function(m){return arguments.length?(r=typeof m=="function"?m:yr(+m),a=null,d):r},d.y0=function(m){return arguments.length?(r=typeof m=="function"?m:yr(+m),d):r},d.y1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:yr(+m),d):a},d.lineX0=d.lineY0=function(){return u().x(t).y(r)},d.lineY1=function(){return u().x(t).y(a)},d.lineX1=function(){return u().x(s).y(r)},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:yr(!!m),d):n},d.curve=function(m){return arguments.length?(i=m,o!=null&&(l=i(o)),d):i},d.context=function(m){return arguments.length?(m==null?o=l=null:l=i(o=m),d):o},d}class WP{constructor(r,a){this._context=r,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,a){switch(r=+r,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,a,r,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,r,this._y0,r,a);break}}this._x0=r,this._y0=a}}function vH(t){return new WP(t,!0)}function yH(t){return new WP(t,!1)}const sN={draw(t,r){const a=Rn(r/Sh);t.moveTo(a,0),t.arc(0,0,a,0,Rg)}},jH={draw(t,r){const a=Rn(r/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},HP=Rn(1/3),NH=HP*2,wH={draw(t,r){const a=Rn(r/NH),s=a*HP;t.moveTo(0,-a),t.lineTo(s,0),t.lineTo(0,a),t.lineTo(-s,0),t.closePath()}},_H={draw(t,r){const a=Rn(r),s=-a/2;t.rect(s,s,a,a)}},SH=.8908130915292852,KP=_h(Sh/10)/_h(7*Sh/10),CH=_h(Rg/10)*KP,kH=-LP(Rg/10)*KP,EH={draw(t,r){const a=Rn(r*SH),s=CH*a,n=kH*a;t.moveTo(0,-a),t.lineTo(s,n);for(let o=1;o<5;++o){const i=Rg*o/5,l=LP(i),c=_h(i);t.lineTo(c*a,-l*a),t.lineTo(l*s-c*n,c*s+l*n)}t.closePath()}},tv=Rn(3),AH={draw(t,r){const a=-Rn(r/(tv*3));t.moveTo(0,a*2),t.lineTo(-tv*a,-a),t.lineTo(tv*a,-a),t.closePath()}},Hs=-.5,Ks=Rn(3)/2,oj=1/Rn(12),PH=(oj/2+1)*3,TH={draw(t,r){const a=Rn(r/PH),s=a/2,n=a*oj,o=s,i=a*oj+a,l=-o,c=i;t.moveTo(s,n),t.lineTo(o,i),t.lineTo(l,c),t.lineTo(Hs*s-Ks*n,Ks*s+Hs*n),t.lineTo(Hs*o-Ks*i,Ks*o+Hs*i),t.lineTo(Hs*l-Ks*c,Ks*l+Hs*c),t.lineTo(Hs*s+Ks*n,Hs*n-Ks*s),t.lineTo(Hs*o+Ks*i,Hs*i-Ks*o),t.lineTo(Hs*l+Ks*c,Hs*c-Ks*l),t.closePath()}};function OH(t,r){let a=null,s=rN(n);t=typeof t=="function"?t:yr(t||sN),r=typeof r=="function"?r:yr(r===void 0?64:+r);function n(){let o;if(a||(a=o=s()),t.apply(this,arguments).draw(a,+r.apply(this,arguments)),o)return a=null,o+""||null}return n.type=function(o){return arguments.length?(t=typeof o=="function"?o:yr(o),n):t},n.size=function(o){return arguments.length?(r=typeof o=="function"?o:yr(+o),n):r},n.context=function(o){return arguments.length?(a=o??null,n):a},n}function Ch(){}function kh(t,r,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+a)/6)}function GP(t){this._context=t}GP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function FH(t){return new GP(t)}function XP(t){this._context=t}XP.prototype={areaStart:Ch,areaEnd:Ch,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:kh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function RH(t){return new XP(t)}function YP(t){this._context=t}YP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:kh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function $H(t){return new YP(t)}function QP(t){this._context=t}QP.prototype={areaStart:Ch,areaEnd:Ch,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function DH(t){return new QP(t)}function t3(t){return t<0?-1:1}function r3(t,r,a){var s=t._x1-t._x0,n=r-t._x1,o=(t._y1-t._y0)/(s||n<0&&-0),i=(a-t._y1)/(n||s<0&&-0),l=(o*n+i*s)/(s+n);return(t3(o)+t3(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function a3(t,r){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-r)/2:r}function rv(t,r,a){var s=t._x0,n=t._y0,o=t._x1,i=t._y1,l=(o-s)/3;t._context.bezierCurveTo(s+l,n+l*r,o-l,i-l*a,o,i)}function Eh(t){this._context=t}Eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rv(this,this._t0,a3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var a=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,rv(this,a3(this,a=r3(this,t,r)),a);break;default:rv(this,this._t0,a=r3(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=a}}};function JP(t){this._context=new ZP(t)}(JP.prototype=Object.create(Eh.prototype)).point=function(t,r){Eh.prototype.point.call(this,r,t)};function ZP(t){this._context=t}ZP.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,a,s,n,o){this._context.bezierCurveTo(r,t,s,a,o,n)}};function MH(t){return new Eh(t)}function IH(t){return new JP(t)}function eT(t){this._context=t}eT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),a===2)this._context.lineTo(t[1],r[1]);else for(var s=s3(t),n=s3(r),o=0,i=1;i<a;++o,++i)this._context.bezierCurveTo(s[0][o],n[0][o],s[1][o],n[1][o],t[i],r[i]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function s3(t){var r,a=t.length-1,s,n=new Array(a),o=new Array(a),i=new Array(a);for(n[0]=0,o[0]=2,i[0]=t[0]+2*t[1],r=1;r<a-1;++r)n[r]=1,o[r]=4,i[r]=4*t[r]+2*t[r+1];for(n[a-1]=2,o[a-1]=7,i[a-1]=8*t[a-1]+t[a],r=1;r<a;++r)s=n[r]/o[r-1],o[r]-=s,i[r]-=s*i[r-1];for(n[a-1]=i[a-1]/o[a-1],r=a-2;r>=0;--r)n[r]=(i[r]-n[r+1])/o[r];for(o[a-1]=(t[a]+n[a-1])/2,r=0;r<a-1;++r)o[r]=2*t[r+1]-n[r+1];return[n,o]}function LH(t){return new eT(t)}function Dg(t,r){this._context=t,this._t=r}Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}break}}this._x=t,this._y=r}};function BH(t){return new Dg(t,.5)}function zH(t){return new Dg(t,0)}function qH(t){return new Dg(t,1)}function Cd(t,r){if((i=t.length)>1)for(var a=1,s,n,o=t[r[0]],i,l=o.length;a<i;++a)for(n=o,o=t[r[a]],s=0;s<l;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function ij(t){for(var r=t.length,a=new Array(r);--r>=0;)a[r]=r;return a}function VH(t,r){return t[r]}function UH(t){const r=[];return r.key=t,r}function WH(){var t=yr([]),r=ij,a=Cd,s=VH;function n(o){var i=Array.from(t.apply(this,arguments),UH),l,c=i.length,d=-1,u;for(const m of o)for(l=0,++d;l<c;++l)(i[l][d]=[0,+s(m,i[l].key,d,o)]).data=m;for(l=0,u=aN(r(i));l<c;++l)i[u[l]].index=l;return a(i,u),i}return n.keys=function(o){return arguments.length?(t=typeof o=="function"?o:yr(Array.from(o)),n):t},n.value=function(o){return arguments.length?(s=typeof o=="function"?o:yr(+o),n):s},n.order=function(o){return arguments.length?(r=o==null?ij:typeof o=="function"?o:yr(Array.from(o)),n):r},n.offset=function(o){return arguments.length?(a=o??Cd,n):a},n}function HH(t,r){if((s=t.length)>0){for(var a,s,n=0,o=t[0].length,i;n<o;++n){for(i=a=0;a<s;++a)i+=t[a][n][1]||0;if(i)for(a=0;a<s;++a)t[a][n][1]/=i}Cd(t,r)}}function KH(t,r){if((n=t.length)>0){for(var a=0,s=t[r[0]],n,o=s.length;a<o;++a){for(var i=0,l=0;i<n;++i)l+=t[i][a][1]||0;s[a][1]+=s[a][0]=-l/2}Cd(t,r)}}function GH(t,r){if(!(!((i=t.length)>0)||!((o=(n=t[r[0]]).length)>0))){for(var a=0,s=1,n,o,i;s<o;++s){for(var l=0,c=0,d=0;l<i;++l){for(var u=t[r[l]],m=u[s][1]||0,x=u[s-1][1]||0,h=(m-x)/2,b=0;b<l;++b){var p=t[r[b]],f=p[s][1]||0,v=p[s-1][1]||0;h+=f-v}c+=m,d+=h*m}n[s-1][1]+=n[s-1][0]=a,c&&(a-=d/c)}n[s-1][1]+=n[s-1][0]=a,Cd(t,r)}}function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zm(t)}var XH=["type","size","sizeType"];function lj(){return lj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},lj.apply(this,arguments)}function n3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function o3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?n3(Object(a),!0).forEach(function(s){YH(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function YH(t,r,a){return r=QH(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function QH(t){var r=JH(t,"string");return Zm(r)=="symbol"?r:r+""}function JH(t,r){if(Zm(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Zm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ZH(t,r){if(t==null)return{};var a=eK(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function eK(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var tT={symbolCircle:sN,symbolCross:jH,symbolDiamond:wH,symbolSquare:_H,symbolStar:EH,symbolTriangle:AH,symbolWye:TH},tK=Math.PI/180,rK=function(r){var a="symbol".concat(Fg(r));return tT[a]||sN},aK=function(r,a,s){if(a==="area")return r;switch(s){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*tK;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},sK=function(r,a){tT["symbol".concat(Fg(r))]=a},nN=function(r){var a=r.type,s=a===void 0?"circle":a,n=r.size,o=n===void 0?64:n,i=r.sizeType,l=i===void 0?"area":i,c=ZH(r,XH),d=o3(o3({},c),{},{type:s,size:o,sizeType:l}),u=function(){var f=rK(s),v=OH().type(f).size(aK(o,l,s));return v()},m=d.className,x=d.cx,h=d.cy,b=St(d,!0);return x===+x&&h===+h&&o===+o?pe.createElement("path",lj({},b,{className:It("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(h,")"),d:u()})):null};nN.registerSymbol=sK;function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kd(t)}function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},cj.apply(this,arguments)}function i3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function nK(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?i3(Object(a),!0).forEach(function(s){ex(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function oK(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function iK(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,aT(s.key),s)}}function lK(t,r,a){return r&&iK(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cK(t,r,a){return r=Ah(r),dK(t,rT()?Reflect.construct(r,a||[],Ah(t).constructor):r.apply(t,a))}function dK(t,r){if(r&&(kd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uK(t)}function uK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rT=function(){return!!t})()}function Ah(t){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ah(t)}function mK(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&dj(t,r)}function dj(t,r){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},dj(t,r)}function ex(t,r,a){return r=aT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function aT(t){var r=xK(t,"string");return kd(r)=="symbol"?r:r+""}function xK(t,r){if(kd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gs=32,oN=function(t){function r(){return oK(this,r),cK(this,r,arguments)}return mK(r,t),lK(r,[{key:"renderIcon",value:function(s){var n=this.props.inactiveColor,o=Gs/2,i=Gs/6,l=Gs/3,c=s.inactive?n:s.color;if(s.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:o,x2:Gs,y2:o,className:"recharts-legend-icon"});if(s.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(Gs,"M").concat(2*l,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(s.type==="rect")return pe.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(s.legendIcon)){var d=nK({},s);return delete d.legendIcon,pe.cloneElement(s.legendIcon,d)}return pe.createElement(nN,{fill:c,cx:o,cy:o,size:Gs,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,n=this.props,o=n.payload,i=n.iconSize,l=n.layout,c=n.formatter,d=n.inactiveColor,u={x:0,y:0,width:Gs,height:Gs},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,b){var p=h.formatter||c,f=It(ex(ex({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=Et(h.value)?null:h.value;En(!Et(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=h.inactive?d:h.color;return pe.createElement("li",cj({className:f,style:m,key:"legend-item-".concat(b)},Wl(s.props,h,b)),pe.createElement(ej,{width:i,height:i,viewBox:u,style:x},s.renderIcon(h)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},p?p(v,h,b):v))})}},{key:"render",value:function(){var s=this.props,n=s.payload,o=s.layout,i=s.align;if(!n||!n.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);ex(oN,"displayName","Legend");ex(oN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var pK=yg;function hK(){this.__data__=new pK,this.size=0}var fK=hK;function gK(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}var bK=gK;function vK(t){return this.__data__.get(t)}var yK=vK;function jK(t){return this.__data__.has(t)}var NK=jK,wK=yg,_K=K2,SK=G2,CK=200;function kK(t,r){var a=this.__data__;if(a instanceof wK){var s=a.__data__;if(!_K||s.length<CK-1)return s.push([t,r]),this.size=++a.size,this;a=this.__data__=new SK(s)}return a.set(t,r),this.size=a.size,this}var EK=kK,AK=yg,PK=fK,TK=bK,OK=yK,FK=NK,RK=EK;function xu(t){var r=this.__data__=new AK(t);this.size=r.size}xu.prototype.clear=PK;xu.prototype.delete=TK;xu.prototype.get=OK;xu.prototype.has=FK;xu.prototype.set=RK;var sT=xu,$K="__lodash_hash_undefined__";function DK(t){return this.__data__.set(t,$K),this}var MK=DK;function IK(t){return this.__data__.has(t)}var LK=IK,BK=G2,zK=MK,qK=LK;function Ph(t){var r=-1,a=t==null?0:t.length;for(this.__data__=new BK;++r<a;)this.add(t[r])}Ph.prototype.add=Ph.prototype.push=zK;Ph.prototype.has=qK;var nT=Ph;function VK(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}var oT=VK;function UK(t,r){return t.has(r)}var iT=UK,WK=nT,HK=oT,KK=iT,GK=1,XK=2;function YK(t,r,a,s,n,o){var i=a&GK,l=t.length,c=r.length;if(l!=c&&!(i&&c>l))return!1;var d=o.get(t),u=o.get(r);if(d&&u)return d==r&&u==t;var m=-1,x=!0,h=a&XK?new WK:void 0;for(o.set(t,r),o.set(r,t);++m<l;){var b=t[m],p=r[m];if(s)var f=i?s(p,b,m,r,t,o):s(b,p,m,t,r,o);if(f!==void 0){if(f)continue;x=!1;break}if(h){if(!HK(r,function(v,g){if(!KK(h,g)&&(b===v||n(b,v,a,s,o)))return h.push(g)})){x=!1;break}}else if(!(b===p||n(b,p,a,s,o))){x=!1;break}}return o.delete(t),o.delete(r),x}var lT=YK,QK=no,JK=QK.Uint8Array,ZK=JK;function eG(t){var r=-1,a=Array(t.size);return t.forEach(function(s,n){a[++r]=[n,s]}),a}var tG=eG;function rG(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}var iN=rG,l3=e0,c3=ZK,aG=H2,sG=lT,nG=tG,oG=iN,iG=1,lG=2,cG="[object Boolean]",dG="[object Date]",uG="[object Error]",mG="[object Map]",xG="[object Number]",pG="[object RegExp]",hG="[object Set]",fG="[object String]",gG="[object Symbol]",bG="[object ArrayBuffer]",vG="[object DataView]",d3=l3?l3.prototype:void 0,av=d3?d3.valueOf:void 0;function yG(t,r,a,s,n,o,i){switch(a){case vG:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case bG:return!(t.byteLength!=r.byteLength||!o(new c3(t),new c3(r)));case cG:case dG:case xG:return aG(+t,+r);case uG:return t.name==r.name&&t.message==r.message;case pG:case fG:return t==r+"";case mG:var l=nG;case hG:var c=s&iG;if(l||(l=oG),t.size!=r.size&&!c)return!1;var d=i.get(t);if(d)return d==r;s|=lG,i.set(t,r);var u=sG(l(t),l(r),s,n,o,i);return i.delete(t),u;case gG:if(av)return av.call(t)==av.call(r)}return!1}var jG=yG;function NG(t,r){for(var a=-1,s=r.length,n=t.length;++a<s;)t[n+a]=r[a];return t}var cT=NG,wG=cT,_G=Ns;function SG(t,r,a){var s=r(t);return _G(t)?s:wG(s,a(t))}var CG=SG;function kG(t,r){for(var a=-1,s=t==null?0:t.length,n=0,o=[];++a<s;){var i=t[a];r(i,a,t)&&(o[n++]=i)}return o}var EG=kG;function AG(){return[]}var PG=AG,TG=EG,OG=PG,FG=Object.prototype,RG=FG.propertyIsEnumerable,u3=Object.getOwnPropertySymbols,$G=u3?function(t){return t==null?[]:(t=Object(t),TG(u3(t),function(r){return RG.call(t,r)}))}:OG,DG=$G;function MG(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}var IG=MG,LG=Uo,BG=Wo,zG="[object Arguments]";function qG(t){return BG(t)&&LG(t)==zG}var VG=qG,m3=VG,UG=Wo,dT=Object.prototype,WG=dT.hasOwnProperty,HG=dT.propertyIsEnumerable,KG=m3(function(){return arguments}())?m3:function(t){return UG(t)&&WG.call(t,"callee")&&!HG.call(t,"callee")},lN=KG,Th={exports:{}};function GG(){return!1}var XG=GG;Th.exports;(function(t,r){var a=no,s=XG,n=r&&!r.nodeType&&r,o=n&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===n,l=i?a.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;t.exports=d})(Th,Th.exports);var uT=Th.exports,YG=9007199254740991,QG=/^(?:0|[1-9]\d*)$/;function JG(t,r){var a=typeof t;return r=r??YG,!!r&&(a=="number"||a!="symbol"&&QG.test(t))&&t>-1&&t%1==0&&t<r}var cN=JG,ZG=9007199254740991;function eX(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ZG}var dN=eX,tX=Uo,rX=dN,aX=Wo,sX="[object Arguments]",nX="[object Array]",oX="[object Boolean]",iX="[object Date]",lX="[object Error]",cX="[object Function]",dX="[object Map]",uX="[object Number]",mX="[object Object]",xX="[object RegExp]",pX="[object Set]",hX="[object String]",fX="[object WeakMap]",gX="[object ArrayBuffer]",bX="[object DataView]",vX="[object Float32Array]",yX="[object Float64Array]",jX="[object Int8Array]",NX="[object Int16Array]",wX="[object Int32Array]",_X="[object Uint8Array]",SX="[object Uint8ClampedArray]",CX="[object Uint16Array]",kX="[object Uint32Array]",_r={};_r[vX]=_r[yX]=_r[jX]=_r[NX]=_r[wX]=_r[_X]=_r[SX]=_r[CX]=_r[kX]=!0;_r[sX]=_r[nX]=_r[gX]=_r[oX]=_r[bX]=_r[iX]=_r[lX]=_r[cX]=_r[dX]=_r[uX]=_r[mX]=_r[xX]=_r[pX]=_r[hX]=_r[fX]=!1;function EX(t){return aX(t)&&rX(t.length)&&!!_r[tX(t)]}var AX=EX;function PX(t){return function(r){return t(r)}}var mT=PX,Oh={exports:{}};Oh.exports;(function(t,r){var a=vP,s=r&&!r.nodeType&&r,n=s&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===s,i=o&&a.process,l=function(){try{var c=n&&n.require&&n.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();t.exports=l})(Oh,Oh.exports);var TX=Oh.exports,OX=AX,FX=mT,x3=TX,p3=x3&&x3.isTypedArray,RX=p3?FX(p3):OX,xT=RX,$X=IG,DX=lN,MX=Ns,IX=uT,LX=cN,BX=xT,zX=Object.prototype,qX=zX.hasOwnProperty;function VX(t,r){var a=MX(t),s=!a&&DX(t),n=!a&&!s&&IX(t),o=!a&&!s&&!n&&BX(t),i=a||s||n||o,l=i?$X(t.length,String):[],c=l.length;for(var d in t)(r||qX.call(t,d))&&!(i&&(d=="length"||n&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||LX(d,c)))&&l.push(d);return l}var UX=VX,WX=Object.prototype;function HX(t){var r=t&&t.constructor,a=typeof r=="function"&&r.prototype||WX;return t===a}var KX=HX;function GX(t,r){return function(a){return t(r(a))}}var pT=GX,XX=pT,YX=XX(Object.keys,Object),QX=YX,JX=KX,ZX=QX,eY=Object.prototype,tY=eY.hasOwnProperty;function rY(t){if(!JX(t))return ZX(t);var r=[];for(var a in Object(t))tY.call(t,a)&&a!="constructor"&&r.push(a);return r}var aY=rY,sY=W2,nY=dN;function oY(t){return t!=null&&nY(t.length)&&!sY(t)}var t0=oY,iY=UX,lY=aY,cY=t0;function dY(t){return cY(t)?iY(t):lY(t)}var Mg=dY,uY=CG,mY=DG,xY=Mg;function pY(t){return uY(t,xY,mY)}var hY=pY,h3=hY,fY=1,gY=Object.prototype,bY=gY.hasOwnProperty;function vY(t,r,a,s,n,o){var i=a&fY,l=h3(t),c=l.length,d=h3(r),u=d.length;if(c!=u&&!i)return!1;for(var m=c;m--;){var x=l[m];if(!(i?x in r:bY.call(r,x)))return!1}var h=o.get(t),b=o.get(r);if(h&&b)return h==r&&b==t;var p=!0;o.set(t,r),o.set(r,t);for(var f=i;++m<c;){x=l[m];var v=t[x],g=r[x];if(s)var y=i?s(g,v,x,r,t,o):s(v,g,x,t,r,o);if(!(y===void 0?v===g||n(v,g,a,s,o):y)){p=!1;break}f||(f=x=="constructor")}if(p&&!f){var N=t.constructor,_=r.constructor;N!=_&&"constructor"in t&&"constructor"in r&&!(typeof N=="function"&&N instanceof N&&typeof _=="function"&&_ instanceof _)&&(p=!1)}return o.delete(t),o.delete(r),p}var yY=vY,jY=nc,NY=no,wY=jY(NY,"DataView"),_Y=wY,SY=nc,CY=no,kY=SY(CY,"Promise"),EY=kY,AY=nc,PY=no,TY=AY(PY,"Set"),hT=TY,OY=nc,FY=no,RY=OY(FY,"WeakMap"),$Y=RY,uj=_Y,mj=K2,xj=EY,pj=hT,hj=$Y,fT=Uo,pu=jP,f3="[object Map]",DY="[object Object]",g3="[object Promise]",b3="[object Set]",v3="[object WeakMap]",y3="[object DataView]",MY=pu(uj),IY=pu(mj),LY=pu(xj),BY=pu(pj),zY=pu(hj),nl=fT;(uj&&nl(new uj(new ArrayBuffer(1)))!=y3||mj&&nl(new mj)!=f3||xj&&nl(xj.resolve())!=g3||pj&&nl(new pj)!=b3||hj&&nl(new hj)!=v3)&&(nl=function(t){var r=fT(t),a=r==DY?t.constructor:void 0,s=a?pu(a):"";if(s)switch(s){case MY:return y3;case IY:return f3;case LY:return g3;case BY:return b3;case zY:return v3}return r});var qY=nl,sv=sT,VY=lT,UY=jG,WY=yY,j3=qY,N3=Ns,w3=uT,HY=xT,KY=1,_3="[object Arguments]",S3="[object Array]",K0="[object Object]",GY=Object.prototype,C3=GY.hasOwnProperty;function XY(t,r,a,s,n,o){var i=N3(t),l=N3(r),c=i?S3:j3(t),d=l?S3:j3(r);c=c==_3?K0:c,d=d==_3?K0:d;var u=c==K0,m=d==K0,x=c==d;if(x&&w3(t)){if(!w3(r))return!1;i=!0,u=!1}if(x&&!u)return o||(o=new sv),i||HY(t)?VY(t,r,a,s,n,o):UY(t,r,c,a,s,n,o);if(!(a&KY)){var h=u&&C3.call(t,"__wrapped__"),b=m&&C3.call(r,"__wrapped__");if(h||b){var p=h?t.value():t,f=b?r.value():r;return o||(o=new sv),n(p,f,a,s,o)}}return x?(o||(o=new sv),WY(t,r,a,s,n,o)):!1}var YY=XY,QY=YY,k3=Wo;function gT(t,r,a,s,n){return t===r?!0:t==null||r==null||!k3(t)&&!k3(r)?t!==t&&r!==r:QY(t,r,a,s,gT,n)}var uN=gT,JY=sT,ZY=uN,eQ=1,tQ=2;function rQ(t,r,a,s){var n=a.length,o=n,i=!s;if(t==null)return!o;for(t=Object(t);n--;){var l=a[n];if(i&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++n<o;){l=a[n];var c=l[0],d=t[c],u=l[1];if(i&&l[2]){if(d===void 0&&!(c in t))return!1}else{var m=new JY;if(s)var x=s(d,u,c,t,r,m);if(!(x===void 0?ZY(u,d,eQ|tQ,s,m):x))return!1}}return!0}var aQ=rQ,sQ=qi;function nQ(t){return t===t&&!sQ(t)}var bT=nQ,oQ=bT,iQ=Mg;function lQ(t){for(var r=iQ(t),a=r.length;a--;){var s=r[a],n=t[s];r[a]=[s,n,oQ(n)]}return r}var cQ=lQ;function dQ(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}var vT=dQ,uQ=aQ,mQ=cQ,xQ=vT;function pQ(t){var r=mQ(t);return r.length==1&&r[0][2]?xQ(r[0][0],r[0][1]):function(a){return a===t||uQ(a,t,r)}}var hQ=pQ;function fQ(t,r){return t!=null&&r in Object(t)}var gQ=fQ,bQ=CP,vQ=lN,yQ=Ns,jQ=cN,NQ=dN,wQ=Ng;function _Q(t,r,a){r=bQ(r,t);for(var s=-1,n=r.length,o=!1;++s<n;){var i=wQ(r[s]);if(!(o=t!=null&&a(t,i)))break;t=t[i]}return o||++s!=n?o:(n=t==null?0:t.length,!!n&&NQ(n)&&jQ(i,n)&&(yQ(t)||vQ(t)))}var SQ=_Q,CQ=gQ,kQ=SQ;function EQ(t,r){return t!=null&&kQ(t,r,CQ)}var AQ=EQ,PQ=uN,TQ=kP,OQ=AQ,FQ=U2,RQ=bT,$Q=vT,DQ=Ng,MQ=1,IQ=2;function LQ(t,r){return FQ(t)&&RQ(r)?$Q(DQ(t),r):function(a){var s=TQ(a,t);return s===void 0&&s===r?OQ(a,t):PQ(r,s,MQ|IQ)}}var BQ=LQ;function zQ(t){return t}var hu=zQ;function qQ(t){return function(r){return r==null?void 0:r[t]}}var VQ=qQ,UQ=Q2;function WQ(t){return function(r){return UQ(r,t)}}var HQ=WQ,KQ=VQ,GQ=HQ,XQ=U2,YQ=Ng;function QQ(t){return XQ(t)?KQ(YQ(t)):GQ(t)}var JQ=QQ,ZQ=hQ,eJ=BQ,tJ=hu,rJ=Ns,aJ=JQ;function sJ(t){return typeof t=="function"?t:t==null?tJ:typeof t=="object"?rJ(t)?eJ(t[0],t[1]):ZQ(t):aJ(t)}var oo=sJ;function nJ(t,r,a,s){for(var n=t.length,o=a+(s?1:-1);s?o--:++o<n;)if(r(t[o],o,t))return o;return-1}var yT=nJ;function oJ(t){return t!==t}var iJ=oJ;function lJ(t,r,a){for(var s=a-1,n=t.length;++s<n;)if(t[s]===r)return s;return-1}var cJ=lJ,dJ=yT,uJ=iJ,mJ=cJ;function xJ(t,r,a){return r===r?mJ(t,r,a):dJ(t,uJ,a)}var pJ=xJ,hJ=pJ;function fJ(t,r){var a=t==null?0:t.length;return!!a&&hJ(t,r,0)>-1}var gJ=fJ;function bJ(t,r,a){for(var s=-1,n=t==null?0:t.length;++s<n;)if(a(r,t[s]))return!0;return!1}var vJ=bJ;function yJ(){}var jJ=yJ,nv=hT,NJ=jJ,wJ=iN,_J=1/0,SJ=nv&&1/wJ(new nv([,-0]))[1]==_J?function(t){return new nv(t)}:NJ,CJ=SJ,kJ=nT,EJ=gJ,AJ=vJ,PJ=iT,TJ=CJ,OJ=iN,FJ=200;function RJ(t,r,a){var s=-1,n=EJ,o=t.length,i=!0,l=[],c=l;if(a)i=!1,n=AJ;else if(o>=FJ){var d=r?null:TJ(t);if(d)return OJ(d);i=!1,n=PJ,c=new kJ}else c=r?[]:l;e:for(;++s<o;){var u=t[s],m=r?r(u):u;if(u=a||u!==0?u:0,i&&m===m){for(var x=c.length;x--;)if(c[x]===m)continue e;r&&c.push(m),l.push(u)}else n(c,m,a)||(c!==l&&c.push(m),l.push(u))}return l}var $J=RJ,DJ=oo,MJ=$J;function IJ(t,r){return t&&t.length?MJ(t,DJ(r)):[]}var LJ=IJ;const E3=mr(LJ);function jT(t,r,a){return r===!0?E3(t,a):Et(r)?E3(t,r):t}function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ed(t)}var BJ=["ref"];function A3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function co(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?A3(Object(a),!0).forEach(function(s){Ig(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function zJ(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function P3(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,wT(s.key),s)}}function qJ(t,r,a){return r&&P3(t.prototype,r),a&&P3(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function VJ(t,r,a){return r=Fh(r),UJ(t,NT()?Reflect.construct(r,a||[],Fh(t).constructor):r.apply(t,a))}function UJ(t,r){if(r&&(Ed(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WJ(t)}function WJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NT=function(){return!!t})()}function Fh(t){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fh(t)}function HJ(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&fj(t,r)}function fj(t,r){return fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},fj(t,r)}function Ig(t,r,a){return r=wT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function wT(t){var r=KJ(t,"string");return Ed(r)=="symbol"?r:r+""}function KJ(t,r){if(Ed(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ed(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function GJ(t,r){if(t==null)return{};var a=XJ(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function XJ(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function YJ(t){return t.value}function QJ(t,r){if(pe.isValidElement(t))return pe.cloneElement(t,r);if(typeof t=="function")return pe.createElement(t,r);r.ref;var a=GJ(r,BJ);return pe.createElement(oN,a)}var T3=1,Ar=function(t){function r(){var a;zJ(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=VJ(this,r,[].concat(n)),Ig(a,"lastBoundingBox",{width:-1,height:-1}),a}return HJ(r,t),qJ(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>T3||Math.abs(n.height-this.lastBoundingBox.height)>T3)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,s&&s(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?co({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var n=this.props,o=n.layout,i=n.align,l=n.verticalAlign,c=n.margin,d=n.chartWidth,u=n.chartHeight,m,x;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(i==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();m={left:((d||0)-h.width)/2}}else m=i==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();x={top:((u||0)-b.height)/2}}else x=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return co(co({},m),x)}},{key:"render",value:function(){var s=this,n=this.props,o=n.content,i=n.width,l=n.height,c=n.wrapperStyle,d=n.payloadUniqBy,u=n.payload,m=co(co({position:"absolute",width:i||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return pe.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(h){s.wrapperNode=h}},QJ(o,co(co({},this.props),{},{payload:jT(u,d,YJ)})))}}],[{key:"getWithHeight",value:function(s,n){var o=co(co({},this.defaultProps),s.props),i=o.layout;return i==="vertical"&&rt(s.props.height)?{height:s.props.height}:i==="horizontal"?{width:s.props.width||n}:null}}])}(j.PureComponent);Ig(Ar,"displayName","Legend");Ig(Ar,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var O3=e0,JJ=lN,ZJ=Ns,F3=O3?O3.isConcatSpreadable:void 0;function eZ(t){return ZJ(t)||JJ(t)||!!(F3&&t&&t[F3])}var tZ=eZ,rZ=cT,aZ=tZ;function _T(t,r,a,s,n){var o=-1,i=t.length;for(a||(a=aZ),n||(n=[]);++o<i;){var l=t[o];r>0&&a(l)?r>1?_T(l,r-1,a,s,n):rZ(n,l):s||(n[n.length]=l)}return n}var ST=_T;function sZ(t){return function(r,a,s){for(var n=-1,o=Object(r),i=s(r),l=i.length;l--;){var c=i[t?l:++n];if(a(o[c],c,o)===!1)break}return r}}var nZ=sZ,oZ=nZ,iZ=oZ(),lZ=iZ,cZ=lZ,dZ=Mg;function uZ(t,r){return t&&cZ(t,r,dZ)}var CT=uZ,mZ=t0;function xZ(t,r){return function(a,s){if(a==null)return a;if(!mZ(a))return t(a,s);for(var n=a.length,o=r?n:-1,i=Object(a);(r?o--:++o<n)&&s(i[o],o,i)!==!1;);return a}}var pZ=xZ,hZ=CT,fZ=pZ,gZ=fZ(hZ),mN=gZ,bZ=mN,vZ=t0;function yZ(t,r){var a=-1,s=vZ(t)?Array(t.length):[];return bZ(t,function(n,o,i){s[++a]=r(n,o,i)}),s}var kT=yZ;function jZ(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}var NZ=jZ,R3=iu;function wZ(t,r){if(t!==r){var a=t!==void 0,s=t===null,n=t===t,o=R3(t),i=r!==void 0,l=r===null,c=r===r,d=R3(r);if(!l&&!d&&!o&&t>r||o&&i&&c&&!l&&!d||s&&i&&c||!a&&c||!n)return 1;if(!s&&!o&&!d&&t<r||d&&a&&n&&!s&&!o||l&&a&&n||!i&&n||!c)return-1}return 0}var _Z=wZ,SZ=_Z;function CZ(t,r,a){for(var s=-1,n=t.criteria,o=r.criteria,i=n.length,l=a.length;++s<i;){var c=SZ(n[s],o[s]);if(c){if(s>=l)return c;var d=a[s];return c*(d=="desc"?-1:1)}}return t.index-r.index}var kZ=CZ,ov=Y2,EZ=Q2,AZ=oo,PZ=kT,TZ=NZ,OZ=mT,FZ=kZ,RZ=hu,$Z=Ns;function DZ(t,r,a){r.length?r=ov(r,function(o){return $Z(o)?function(i){return EZ(i,o.length===1?o[0]:o)}:o}):r=[RZ];var s=-1;r=ov(r,OZ(AZ));var n=PZ(t,function(o,i,l){var c=ov(r,function(d){return d(o)});return{criteria:c,index:++s,value:o}});return TZ(n,function(o,i){return FZ(o,i,a)})}var MZ=DZ;function IZ(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}var LZ=IZ,BZ=LZ,$3=Math.max;function zZ(t,r,a){return r=$3(r===void 0?t.length-1:r,0),function(){for(var s=arguments,n=-1,o=$3(s.length-r,0),i=Array(o);++n<o;)i[n]=s[r+n];n=-1;for(var l=Array(r+1);++n<r;)l[n]=s[n];return l[r]=a(i),BZ(t,this,l)}}var qZ=zZ;function VZ(t){return function(){return t}}var UZ=VZ,WZ=nc,HZ=function(){try{var t=WZ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ET=HZ,KZ=UZ,D3=ET,GZ=hu,XZ=D3?function(t,r){return D3(t,"toString",{configurable:!0,enumerable:!1,value:KZ(r),writable:!0})}:GZ,YZ=XZ,QZ=800,JZ=16,ZZ=Date.now;function eee(t){var r=0,a=0;return function(){var s=ZZ(),n=JZ-(s-a);if(a=s,n>0){if(++r>=QZ)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var tee=eee,ree=YZ,aee=tee,see=aee(ree),nee=see,oee=hu,iee=qZ,lee=nee;function cee(t,r){return lee(iee(t,r,oee),t+"")}var dee=cee,uee=H2,mee=t0,xee=cN,pee=qi;function hee(t,r,a){if(!pee(a))return!1;var s=typeof r;return(s=="number"?mee(a)&&xee(r,a.length):s=="string"&&r in a)?uee(a[r],t):!1}var Lg=hee,fee=ST,gee=MZ,bee=dee,M3=Lg,vee=bee(function(t,r){if(t==null)return[];var a=r.length;return a>1&&M3(t,r[0],r[1])?r=[]:a>2&&M3(r[0],r[1],r[2])&&(r=[r[0]]),gee(t,fee(r,1),[])}),yee=vee;const xN=mr(yee);function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tx(t)}function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},gj.apply(this,arguments)}function jee(t,r){return See(t)||_ee(t,r)||wee(t,r)||Nee()}function Nee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(t,r){if(t){if(typeof t=="string")return I3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I3(t,r)}}function I3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function _ee(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function See(t){if(Array.isArray(t))return t}function L3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function iv(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?L3(Object(a),!0).forEach(function(s){Cee(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Cee(t,r,a){return r=kee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function kee(t){var r=Eee(t,"string");return tx(r)=="symbol"?r:r+""}function Eee(t,r){if(tx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(tx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Aee(t){return Array.isArray(t)&&ha(t[0])&&ha(t[1])?t.join(" ~ "):t}var Pee=function(r){var a=r.separator,s=a===void 0?" : ":a,n=r.contentStyle,o=n===void 0?{}:n,i=r.itemStyle,l=i===void 0?{}:i,c=r.labelStyle,d=c===void 0?{}:c,u=r.payload,m=r.formatter,x=r.itemSorter,h=r.wrapperClassName,b=r.labelClassName,p=r.label,f=r.labelFormatter,v=r.accessibilityLayer,g=v===void 0?!1:v,y=function(){if(u&&u.length){var A={padding:0,margin:0},T=(x?xN(u,x):u).map(function(U,K){if(U.type==="none")return null;var I=iv({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),Y=U.formatter||m||Aee,D=U.value,W=U.name,R=D,B=W;if(Y&&R!=null&&B!=null){var O=Y(D,W,U,K,u);if(Array.isArray(O)){var L=jee(O,2);R=L[0],B=L[1]}else R=O}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:I},ha(B)?pe.createElement("span",{className:"recharts-tooltip-item-name"},B):null,ha(B)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},R),pe.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null},N=iv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),_=iv({margin:0},d),w=!Rt(p),S=w?p:"",C=It("recharts-default-tooltip",h),k=It("recharts-tooltip-label",b);w&&f&&u!==void 0&&u!==null&&(S=f(p,u));var F=g?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",gj({className:C,style:N},F),pe.createElement("p",{className:k,style:_},pe.isValidElement(S)?S:"".concat(S)),y())};function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rx(t)}function G0(t,r,a){return r=Tee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Tee(t){var r=Oee(t,"string");return rx(r)=="symbol"?r:r+""}function Oee(t,r){if(rx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(rx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Iu="recharts-tooltip-wrapper",Fee={visibility:"hidden"};function Ree(t){var r=t.coordinate,a=t.translateX,s=t.translateY;return It(Iu,G0(G0(G0(G0({},"".concat(Iu,"-right"),rt(a)&&r&&rt(r.x)&&a>=r.x),"".concat(Iu,"-left"),rt(a)&&r&&rt(r.x)&&a<r.x),"".concat(Iu,"-bottom"),rt(s)&&r&&rt(r.y)&&s>=r.y),"".concat(Iu,"-top"),rt(s)&&r&&rt(r.y)&&s<r.y))}function B3(t){var r=t.allowEscapeViewBox,a=t.coordinate,s=t.key,n=t.offsetTopLeft,o=t.position,i=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(o&&rt(o[s]))return o[s];var u=a[s]-l-n,m=a[s]+n;if(r[s])return i[s]?u:m;if(i[s]){var x=u,h=c[s];return x<h?Math.max(m,c[s]):Math.max(u,c[s])}var b=m+l,p=c[s]+d;return b>p?Math.max(u,c[s]):Math.max(m,c[s])}function $ee(t){var r=t.translateX,a=t.translateY,s=t.useTranslate3d;return{transform:s?"translate3d(".concat(r,"px, ").concat(a,"px, 0)"):"translate(".concat(r,"px, ").concat(a,"px)")}}function Dee(t){var r=t.allowEscapeViewBox,a=t.coordinate,s=t.offsetTopLeft,n=t.position,o=t.reverseDirection,i=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,m;return i.height>0&&i.width>0&&a?(u=B3({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:s,position:n,reverseDirection:o,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),m=B3({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:s,position:n,reverseDirection:o,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),d=$ee({translateX:u,translateY:m,useTranslate3d:l})):d=Fee,{cssProperties:d,cssClasses:Ree({translateX:u,translateY:m,coordinate:a})}}function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ad(t)}function z3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function q3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?z3(Object(a),!0).forEach(function(s){vj(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Mee(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Iee(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,PT(s.key),s)}}function Lee(t,r,a){return r&&Iee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bee(t,r,a){return r=Rh(r),zee(t,AT()?Reflect.construct(r,a||[],Rh(t).constructor):r.apply(t,a))}function zee(t,r){if(r&&(Ad(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qee(t)}function qee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AT=function(){return!!t})()}function Rh(t){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rh(t)}function Vee(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&bj(t,r)}function bj(t,r){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},bj(t,r)}function vj(t,r,a){return r=PT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function PT(t){var r=Uee(t,"string");return Ad(r)=="symbol"?r:r+""}function Uee(t,r){if(Ad(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ad(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V3=1,Wee=function(t){function r(){var a;Mee(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=Bee(this,r,[].concat(n)),vj(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),vj(a,"handleKeyDown",function(i){if(i.key==="Escape"){var l,c,d,u;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=a.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=a.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),a}return Vee(r,t),Lee(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>V3||Math.abs(s.height-this.state.lastBoundingBox.height)>V3)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,n=this.props,o=n.active,i=n.allowEscapeViewBox,l=n.animationDuration,c=n.animationEasing,d=n.children,u=n.coordinate,m=n.hasPayload,x=n.isAnimationActive,h=n.offset,b=n.position,p=n.reverseDirection,f=n.useTranslate3d,v=n.viewBox,g=n.wrapperStyle,y=Dee({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:h,position:b,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:v}),N=y.cssClasses,_=y.cssProperties,w=q3(q3({transition:x&&o?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&m?"visible":"hidden",position:"absolute",top:0,left:0},g);return pe.createElement("div",{tabIndex:-1,className:N,style:w,ref:function(C){s.wrapperNode=C}},d)}}])}(j.PureComponent),Hee=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vi={isSsr:Hee()};function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pd(t)}function U3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function W3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?U3(Object(a),!0).forEach(function(s){pN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Kee(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Gee(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,OT(s.key),s)}}function Xee(t,r,a){return r&&Gee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yee(t,r,a){return r=$h(r),Qee(t,TT()?Reflect.construct(r,a||[],$h(t).constructor):r.apply(t,a))}function Qee(t,r){if(r&&(Pd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jee(t)}function Jee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TT=function(){return!!t})()}function $h(t){return $h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},$h(t)}function Zee(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&yj(t,r)}function yj(t,r){return yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},yj(t,r)}function pN(t,r,a){return r=OT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function OT(t){var r=ete(t,"string");return Pd(r)=="symbol"?r:r+""}function ete(t,r){if(Pd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Pd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function tte(t){return t.dataKey}function rte(t,r){return pe.isValidElement(t)?pe.cloneElement(t,r):typeof t=="function"?pe.createElement(t,r):pe.createElement(Pee,r)}var lr=function(t){function r(){return Kee(this,r),Yee(this,r,arguments)}return Zee(r,t),Xee(r,[{key:"render",value:function(){var s=this,n=this.props,o=n.active,i=n.allowEscapeViewBox,l=n.animationDuration,c=n.animationEasing,d=n.content,u=n.coordinate,m=n.filterNull,x=n.isAnimationActive,h=n.offset,b=n.payload,p=n.payloadUniqBy,f=n.position,v=n.reverseDirection,g=n.useTranslate3d,y=n.viewBox,N=n.wrapperStyle,_=b??[];m&&_.length&&(_=jT(b.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),p,tte));var w=_.length>0;return pe.createElement(Wee,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:x,active:o,coordinate:u,hasPayload:w,offset:h,position:f,reverseDirection:v,useTranslate3d:g,viewBox:y,wrapperStyle:N},rte(d,W3(W3({},this.props),{},{payload:_})))}}])}(j.PureComponent);pN(lr,"displayName","Tooltip");pN(lr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Vi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ate=no,ste=function(){return ate.Date.now()},nte=ste,ote=/\s/;function ite(t){for(var r=t.length;r--&&ote.test(t.charAt(r)););return r}var lte=ite,cte=lte,dte=/^\s+/;function ute(t){return t&&t.slice(0,cte(t)+1).replace(dte,"")}var mte=ute,xte=mte,H3=qi,pte=iu,K3=NaN,hte=/^[-+]0x[0-9a-f]+$/i,fte=/^0b[01]+$/i,gte=/^0o[0-7]+$/i,bte=parseInt;function vte(t){if(typeof t=="number")return t;if(pte(t))return K3;if(H3(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=H3(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=xte(t);var a=fte.test(t);return a||gte.test(t)?bte(t.slice(2),a?2:8):hte.test(t)?K3:+t}var FT=vte,yte=qi,lv=nte,G3=FT,jte="Expected a function",Nte=Math.max,wte=Math.min;function _te(t,r,a){var s,n,o,i,l,c,d=0,u=!1,m=!1,x=!0;if(typeof t!="function")throw new TypeError(jte);r=G3(r)||0,yte(a)&&(u=!!a.leading,m="maxWait"in a,o=m?Nte(G3(a.maxWait)||0,r):o,x="trailing"in a?!!a.trailing:x);function h(w){var S=s,C=n;return s=n=void 0,d=w,i=t.apply(C,S),i}function b(w){return d=w,l=setTimeout(v,r),u?h(w):i}function p(w){var S=w-c,C=w-d,k=r-S;return m?wte(k,o-C):k}function f(w){var S=w-c,C=w-d;return c===void 0||S>=r||S<0||m&&C>=o}function v(){var w=lv();if(f(w))return g(w);l=setTimeout(v,p(w))}function g(w){return l=void 0,x&&s?h(w):(s=n=void 0,i)}function y(){l!==void 0&&clearTimeout(l),d=0,s=c=n=l=void 0}function N(){return l===void 0?i:g(lv())}function _(){var w=lv(),S=f(w);if(s=arguments,n=this,c=w,S){if(l===void 0)return b(c);if(m)return clearTimeout(l),l=setTimeout(v,r),h(c)}return l===void 0&&(l=setTimeout(v,r)),i}return _.cancel=y,_.flush=N,_}var Ste=_te,Cte=Ste,kte=qi,Ete="Expected a function";function Ate(t,r,a){var s=!0,n=!0;if(typeof t!="function")throw new TypeError(Ete);return kte(a)&&(s="leading"in a?!!a.leading:s,n="trailing"in a?!!a.trailing:n),Cte(t,r,{leading:s,maxWait:r,trailing:n})}var Pte=Ate;const RT=mr(Pte);function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ax(t)}function X3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function X0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?X3(Object(a),!0).forEach(function(s){Tte(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Tte(t,r,a){return r=Ote(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ote(t){var r=Fte(t,"string");return ax(r)=="symbol"?r:r+""}function Fte(t,r){if(ax(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(ax(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Rte(t,r){return Ite(t)||Mte(t,r)||Dte(t,r)||$te()}function $te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dte(t,r){if(t){if(typeof t=="string")return Y3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Y3(t,r)}}function Y3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Mte(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Ite(t){if(Array.isArray(t))return t}var ua=j.forwardRef(function(t,r){var a=t.aspect,s=t.initialDimension,n=s===void 0?{width:-1,height:-1}:s,o=t.width,i=o===void 0?"100%":o,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,x=t.maxHeight,h=t.children,b=t.debounce,p=b===void 0?0:b,f=t.id,v=t.className,g=t.onResize,y=t.style,N=y===void 0?{}:y,_=j.useRef(null),w=j.useRef();w.current=g,j.useImperativeHandle(r,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var S=j.useState({containerWidth:n.width,containerHeight:n.height}),C=Rte(S,2),k=C[0],F=C[1],q=j.useCallback(function(T,U){F(function(K){var I=Math.round(T),Y=Math.round(U);return K.containerWidth===I&&K.containerHeight===Y?K:{containerWidth:I,containerHeight:Y}})},[]);j.useEffect(function(){var T=function(W){var R,B=W[0].contentRect,O=B.width,L=B.height;q(O,L),(R=w.current)===null||R===void 0||R.call(w,O,L)};p>0&&(T=RT(T,p,{trailing:!0,leading:!1}));var U=new ResizeObserver(T),K=_.current.getBoundingClientRect(),I=K.width,Y=K.height;return q(I,Y),U.observe(_.current),function(){U.disconnect()}},[q,p]);var A=j.useMemo(function(){var T=k.containerWidth,U=k.containerHeight;if(T<0||U<0)return null;En(pl(i)||pl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),En(!a||a>0,"The aspect(%s) must be greater than zero.",a);var K=pl(i)?T:i,I=pl(c)?U:c;a&&a>0&&(K?I=K/a:I&&(K=I*a),x&&I>x&&(I=x)),En(K>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,I,i,c,u,m,a);var Y=!Array.isArray(h)&&wo(h.type).endsWith("Chart");return pe.Children.map(h,function(D){return pe.isValidElement(D)?j.cloneElement(D,X0({width:K,height:I},Y?{style:X0({height:"100%",width:"100%",maxHeight:I,maxWidth:K},D.props.style)}:{})):D})},[a,h,c,x,m,u,k,i]);return pe.createElement("div",{id:f?"".concat(f):void 0,className:It("recharts-responsive-container",v),style:X0(X0({},N),{},{width:i,height:c,minWidth:u,minHeight:m,maxHeight:x}),ref:_},A)}),Sl=function(r){return null};Sl.displayName="Cell";function sx(t){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sx(t)}function Q3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function jj(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Q3(Object(a),!0).forEach(function(s){Lte(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Lte(t,r,a){return r=Bte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Bte(t){var r=zte(t,"string");return sx(r)=="symbol"?r:r+""}function zte(t,r){if(sx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(sx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var bc={widthCache:{},cacheCount:0},qte=2e3,Vte={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},J3="recharts_measurement_span";function Ute(t){var r=jj({},t);return Object.keys(r).forEach(function(a){r[a]||delete r[a]}),r}var xm=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||Vi.isSsr)return{width:0,height:0};var s=Ute(a),n=JSON.stringify({text:r,copyStyle:s});if(bc.widthCache[n])return bc.widthCache[n];try{var o=document.getElementById(J3);o||(o=document.createElement("span"),o.setAttribute("id",J3),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=jj(jj({},Vte),s);Object.assign(o.style,i),o.textContent="".concat(r);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return bc.widthCache[n]=c,++bc.cacheCount>qte&&(bc.cacheCount=0,bc.widthCache={}),c}catch{return{width:0,height:0}}},Wte=function(r){return{top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft}};function nx(t){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nx(t)}function Dh(t,r){return Xte(t)||Gte(t,r)||Kte(t,r)||Hte()}function Hte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kte(t,r){if(t){if(typeof t=="string")return Z3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Z3(t,r)}}function Z3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Gte(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Xte(t){if(Array.isArray(t))return t}function Yte(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function eS(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Jte(s.key),s)}}function Qte(t,r,a){return r&&eS(t.prototype,r),a&&eS(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jte(t){var r=Zte(t,"string");return nx(r)=="symbol"?r:r+""}function Zte(t,r){if(nx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(nx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ere=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$T={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},rre=Object.keys($T),Vc="NaN";function are(t,r){return t*$T[r]}var Y0=function(){function t(r,a){Yte(this,t),this.num=r,this.unit=a,this.num=r,this.unit=a,Number.isNaN(r)&&(this.unit=""),a!==""&&!ere.test(a)&&(this.num=NaN,this.unit=""),rre.includes(a)&&(this.num=are(r,a),this.unit="px")}return Qte(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var s,n=(s=tre.exec(a))!==null&&s!==void 0?s:[],o=Dh(n,3),i=o[1],l=o[2];return new t(parseFloat(i),l??"")}}])}();function DT(t){if(t.includes(Vc))return Vc;for(var r=t;r.includes("*")||r.includes("/");){var a,s=(a=tS.exec(r))!==null&&a!==void 0?a:[],n=Dh(s,4),o=n[1],i=n[2],l=n[3],c=Y0.parse(o??""),d=Y0.parse(l??""),u=i==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Vc;r=r.replace(tS,u.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var m,x=(m=rS.exec(r))!==null&&m!==void 0?m:[],h=Dh(x,4),b=h[1],p=h[2],f=h[3],v=Y0.parse(b??""),g=Y0.parse(f??""),y=p==="+"?v.add(g):v.subtract(g);if(y.isNaN())return Vc;r=r.replace(rS,y.toString())}return r}var aS=/\(([^()]*)\)/;function sre(t){for(var r=t;r.includes("(");){var a=aS.exec(r),s=Dh(a,2),n=s[1];r=r.replace(aS,DT(n))}return r}function nre(t){var r=t.replace(/\s+/g,"");return r=sre(r),r=DT(r),r}function ore(t){try{return nre(t)}catch{return Vc}}function cv(t){var r=ore(t.slice(5,-1));return r===Vc?"":r}var ire=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lre=["dx","dy","angle","className","breakAll"];function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Nj.apply(this,arguments)}function sS(t,r){if(t==null)return{};var a=cre(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function cre(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function nS(t,r){return xre(t)||mre(t,r)||ure(t,r)||dre()}function dre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ure(t,r){if(t){if(typeof t=="string")return oS(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oS(t,r)}}function oS(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function mre(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function xre(t){if(Array.isArray(t))return t}var MT=/[ \f\n\r\t\v\u2028\u2029]+/,IT=function(r){var a=r.children,s=r.breakAll,n=r.style;try{var o=[];Rt(a)||(s?o=a.toString().split(""):o=a.toString().split(MT));var i=o.map(function(c){return{word:c,width:xm(c,n).width}}),l=s?0:xm("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},pre=function(r,a,s,n,o){var i=r.maxLines,l=r.children,c=r.style,d=r.breakAll,u=rt(i),m=l,x=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(I,Y){var D=Y.word,W=Y.width,R=I[I.length-1];if(R&&(n==null||o||R.width+W+s<Number(n)))R.words.push(D),R.width+=W+s;else{var B={words:[D],width:W};I.push(B)}return I},[])},h=x(a),b=function(K){return K.reduce(function(I,Y){return I.width>Y.width?I:Y})};if(!u)return h;for(var p="",f=function(K){var I=m.slice(0,K),Y=IT({breakAll:d,style:c,children:I+p}).wordsWithComputedWidth,D=x(Y),W=D.length>i||b(D).width>Number(n);return[W,D]},v=0,g=m.length-1,y=0,N;v<=g&&y<=m.length-1;){var _=Math.floor((v+g)/2),w=_-1,S=f(w),C=nS(S,2),k=C[0],F=C[1],q=f(_),A=nS(q,1),T=A[0];if(!k&&!T&&(v=_+1),k&&T&&(g=_-1),!k&&T){N=F;break}y++}return N||h},iS=function(r){var a=Rt(r)?[]:r.toString().split(MT);return[{words:a}]},hre=function(r){var a=r.width,s=r.scaleToFit,n=r.children,o=r.style,i=r.breakAll,l=r.maxLines;if((a||s)&&!Vi.isSsr){var c,d,u=IT({breakAll:i,children:n,style:o});if(u){var m=u.wordsWithComputedWidth,x=u.spaceWidth;c=m,d=x}else return iS(n);return pre({breakAll:i,children:n,maxLines:l,style:o},c,d,a,s)}return iS(n)},lS="#808080",Hl=function(r){var a=r.x,s=a===void 0?0:a,n=r.y,o=n===void 0?0:n,i=r.lineHeight,l=i===void 0?"1em":i,c=r.capHeight,d=c===void 0?"0.71em":c,u=r.scaleToFit,m=u===void 0?!1:u,x=r.textAnchor,h=x===void 0?"start":x,b=r.verticalAnchor,p=b===void 0?"end":b,f=r.fill,v=f===void 0?lS:f,g=sS(r,ire),y=j.useMemo(function(){return hre({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:m,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,m,g.style,g.width]),N=g.dx,_=g.dy,w=g.angle,S=g.className,C=g.breakAll,k=sS(g,lre);if(!ha(s)||!ha(o))return null;var F=s+(rt(N)?N:0),q=o+(rt(_)?_:0),A;switch(p){case"start":A=cv("calc(".concat(d,")"));break;case"middle":A=cv("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=cv("calc(".concat(y.length-1," * -").concat(l,")"));break}var T=[];if(m){var U=y[0].width,K=g.width;T.push("scale(".concat((rt(K)?K/U:1)/U,")"))}return w&&T.push("rotate(".concat(w,", ").concat(F,", ").concat(q,")")),T.length&&(k.transform=T.join(" ")),pe.createElement("text",Nj({},St(k,!0),{x:F,y:q,className:It("recharts-text",S),textAnchor:h,fill:v.includes("url")?lS:v}),y.map(function(I,Y){var D=I.words.join(C?"":" ");return pe.createElement("tspan",{x:F,dy:Y===0?A:l,key:"".concat(D,"-").concat(Y)},D)}))};function Ei(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function fre(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function hN(t){let r,a,s;t.length!==2?(r=Ei,a=(l,c)=>Ei(t(l),c),s=(l,c)=>t(l)-c):(r=t===Ei||t===fre?t:gre,a=t,s=t);function n(l,c,d=0,u=l.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<0?d=m+1:u=m}while(d<u)}return d}function o(l,c,d=0,u=l.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function i(l,c,d=0,u=l.length){const m=n(l,c,d,u-1);return m>d&&s(l[m-1],c)>-s(l[m],c)?m-1:m}return{left:n,center:i,right:o}}function gre(){return 0}function LT(t){return t===null?NaN:+t}function*bre(t,r){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const vre=hN(Ei),r0=vre.right;hN(LT).center;class cS extends Map{constructor(r,a=Nre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,n]of r)this.set(s,n)}get(r){return super.get(dS(this,r))}has(r){return super.has(dS(this,r))}set(r,a){return super.set(yre(this,r),a)}delete(r){return super.delete(jre(this,r))}}function dS({_intern:t,_key:r},a){const s=r(a);return t.has(s)?t.get(s):a}function yre({_intern:t,_key:r},a){const s=r(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function jre({_intern:t,_key:r},a){const s=r(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function Nre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function wre(t=Ei){if(t===Ei)return BT;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,a)=>{const s=t(r,a);return s||s===0?s:(t(a,a)===0)-(t(r,r)===0)}}function BT(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const _re=Math.sqrt(50),Sre=Math.sqrt(10),Cre=Math.sqrt(2);function Mh(t,r,a){const s=(r-t)/Math.max(0,a),n=Math.floor(Math.log10(s)),o=s/Math.pow(10,n),i=o>=_re?10:o>=Sre?5:o>=Cre?2:1;let l,c,d;return n<0?(d=Math.pow(10,-n)/i,l=Math.round(t*d),c=Math.round(r*d),l/d<t&&++l,c/d>r&&--c,d=-d):(d=Math.pow(10,n)*i,l=Math.round(t/d),c=Math.round(r/d),l*d<t&&++l,c*d>r&&--c),c<l&&.5<=a&&a<2?Mh(t,r,a*2):[l,c,d]}function wj(t,r,a){if(r=+r,t=+t,a=+a,!(a>0))return[];if(t===r)return[t];const s=r<t,[n,o,i]=s?Mh(r,t,a):Mh(t,r,a);if(!(o>=n))return[];const l=o-n+1,c=new Array(l);if(s)if(i<0)for(let d=0;d<l;++d)c[d]=(o-d)/-i;else for(let d=0;d<l;++d)c[d]=(o-d)*i;else if(i<0)for(let d=0;d<l;++d)c[d]=(n+d)/-i;else for(let d=0;d<l;++d)c[d]=(n+d)*i;return c}function _j(t,r,a){return r=+r,t=+t,a=+a,Mh(t,r,a)[2]}function Sj(t,r,a){r=+r,t=+t,a=+a;const s=r<t,n=s?_j(r,t,a):_j(t,r,a);return(s?-1:1)*(n<0?1/-n:n)}function uS(t,r){let a;for(const s of t)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function mS(t,r){let a;for(const s of t)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function zT(t,r,a=0,s=1/0,n){if(r=Math.floor(r),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(t.length-1,s)),!(a<=r&&r<=s))return t;for(n=n===void 0?BT:wre(n);s>a;){if(s-a>600){const c=s-a+1,d=r-a+1,u=Math.log(c),m=.5*Math.exp(2*u/3),x=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),h=Math.max(a,Math.floor(r-d*m/c+x)),b=Math.min(s,Math.floor(r+(c-d)*m/c+x));zT(t,r,h,b,n)}const o=t[r];let i=a,l=s;for(Lu(t,a,r),n(t[s],o)>0&&Lu(t,a,s);i<l;){for(Lu(t,i,l),++i,--l;n(t[i],o)<0;)++i;for(;n(t[l],o)>0;)--l}n(t[a],o)===0?Lu(t,a,l):(++l,Lu(t,l,s)),l<=r&&(a=l+1),r<=l&&(s=l-1)}return t}function Lu(t,r,a){const s=t[r];t[r]=t[a],t[a]=s}function kre(t,r,a){if(t=Float64Array.from(bre(t)),!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return mS(t);if(r>=1)return uS(t);var s,n=(s-1)*r,o=Math.floor(n),i=uS(zT(t,o).subarray(0,o+1)),l=mS(t.subarray(o+1));return i+(l-i)*(n-o)}}function Ere(t,r,a=LT){if(!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return+a(t[0],0,t);if(r>=1)return+a(t[s-1],s-1,t);var s,n=(s-1)*r,o=Math.floor(n),i=+a(t[o],o,t),l=+a(t[o+1],o+1,t);return i+(l-i)*(n-o)}}function Are(t,r,a){t=+t,r=+r,a=(n=arguments.length)<2?(r=t,t=0,1):n<3?1:+a;for(var s=-1,n=Math.max(0,Math.ceil((r-t)/a))|0,o=new Array(n);++s<n;)o[s]=t+s*a;return o}function cn(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Ho(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const Cj=Symbol("implicit");function fN(){var t=new cS,r=[],a=[],s=Cj;function n(o){let i=t.get(o);if(i===void 0){if(s!==Cj)return s;t.set(o,i=r.push(o)-1)}return a[i%a.length]}return n.domain=function(o){if(!arguments.length)return r.slice();r=[],t=new cS;for(const i of o)t.has(i)||t.set(i,r.push(i)-1);return n},n.range=function(o){return arguments.length?(a=Array.from(o),n):a.slice()},n.unknown=function(o){return arguments.length?(s=o,n):s},n.copy=function(){return fN(r,a).unknown(s)},cn.apply(n,arguments),n}function ox(){var t=fN().unknown(void 0),r=t.domain,a=t.range,s=0,n=1,o,i,l=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var x=r().length,h=n<s,b=h?n:s,p=h?s:n;o=(p-b)/Math.max(1,x-c+d*2),l&&(o=Math.floor(o)),b+=(p-b-o*(x-c))*u,i=o*(1-c),l&&(b=Math.round(b),i=Math.round(i));var f=Are(x).map(function(v){return b+o*v});return a(h?f.reverse():f)}return t.domain=function(x){return arguments.length?(r(x),m()):r()},t.range=function(x){return arguments.length?([s,n]=x,s=+s,n=+n,m()):[s,n]},t.rangeRound=function(x){return[s,n]=x,s=+s,n=+n,l=!0,m()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(x){return arguments.length?(l=!!x,m()):l},t.padding=function(x){return arguments.length?(c=Math.min(1,d=+x),m()):c},t.paddingInner=function(x){return arguments.length?(c=Math.min(1,x),m()):c},t.paddingOuter=function(x){return arguments.length?(d=+x,m()):d},t.align=function(x){return arguments.length?(u=Math.max(0,Math.min(1,x)),m()):u},t.copy=function(){return ox(r(),[s,n]).round(l).paddingInner(c).paddingOuter(d).align(u)},cn.apply(m(),arguments)}function qT(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qT(r())},t}function pm(){return qT(ox.apply(null,arguments).paddingInner(1))}function gN(t,r,a){t.prototype=r.prototype=a,a.constructor=t}function VT(t,r){var a=Object.create(t.prototype);for(var s in r)a[s]=r[s];return a}function a0(){}var ix=.7,Ih=1/ix,nd="\\s*([+-]?\\d+)\\s*",lx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pre=/^#([0-9a-f]{3,8})$/,Tre=new RegExp(`^rgb\\(${nd},${nd},${nd}\\)$`),Ore=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),Fre=new RegExp(`^rgba\\(${nd},${nd},${nd},${lx}\\)$`),Rre=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${lx}\\)$`),$re=new RegExp(`^hsl\\(${lx},${Jn},${Jn}\\)$`),Dre=new RegExp(`^hsla\\(${lx},${Jn},${Jn},${lx}\\)$`),xS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gN(a0,cx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pS,formatHex:pS,formatHex8:Mre,formatHsl:Ire,formatRgb:hS,toString:hS});function pS(){return this.rgb().formatHex()}function Mre(){return this.rgb().formatHex8()}function Ire(){return UT(this).formatHsl()}function hS(){return this.rgb().formatRgb()}function cx(t){var r,a;return t=(t+"").trim().toLowerCase(),(r=Pre.exec(t))?(a=r[1].length,r=parseInt(r[1],16),a===6?fS(r):a===3?new us(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):a===8?Q0(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):a===4?Q0(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Tre.exec(t))?new us(r[1],r[2],r[3],1):(r=Ore.exec(t))?new us(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Fre.exec(t))?Q0(r[1],r[2],r[3],r[4]):(r=Rre.exec(t))?Q0(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=$re.exec(t))?vS(r[1],r[2]/100,r[3]/100,1):(r=Dre.exec(t))?vS(r[1],r[2]/100,r[3]/100,r[4]):xS.hasOwnProperty(t)?fS(xS[t]):t==="transparent"?new us(NaN,NaN,NaN,0):null}function fS(t){return new us(t>>16&255,t>>8&255,t&255,1)}function Q0(t,r,a,s){return s<=0&&(t=r=a=NaN),new us(t,r,a,s)}function Lre(t){return t instanceof a0||(t=cx(t)),t?(t=t.rgb(),new us(t.r,t.g,t.b,t.opacity)):new us}function kj(t,r,a,s){return arguments.length===1?Lre(t):new us(t,r,a,s??1)}function us(t,r,a,s){this.r=+t,this.g=+r,this.b=+a,this.opacity=+s}gN(us,kj,VT(a0,{brighter(t){return t=t==null?Ih:Math.pow(Ih,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ix:Math.pow(ix,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new us(Cl(this.r),Cl(this.g),Cl(this.b),Lh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gS,formatHex:gS,formatHex8:Bre,formatRgb:bS,toString:bS}));function gS(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}`}function Bre(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}${hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function bS(){const t=Lh(this.opacity);return`${t===1?"rgb(":"rgba("}${Cl(this.r)}, ${Cl(this.g)}, ${Cl(this.b)}${t===1?")":`, ${t})`}`}function Lh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hl(t){return t=Cl(t),(t<16?"0":"")+t.toString(16)}function vS(t,r,a,s){return s<=0?t=r=a=NaN:a<=0||a>=1?t=r=NaN:r<=0&&(t=NaN),new jn(t,r,a,s)}function UT(t){if(t instanceof jn)return new jn(t.h,t.s,t.l,t.opacity);if(t instanceof a0||(t=cx(t)),!t)return new jn;if(t instanceof jn)return t;t=t.rgb();var r=t.r/255,a=t.g/255,s=t.b/255,n=Math.min(r,a,s),o=Math.max(r,a,s),i=NaN,l=o-n,c=(o+n)/2;return l?(r===o?i=(a-s)/l+(a<s)*6:a===o?i=(s-r)/l+2:i=(r-a)/l+4,l/=c<.5?o+n:2-o-n,i*=60):l=c>0&&c<1?0:i,new jn(i,l,c,t.opacity)}function zre(t,r,a,s){return arguments.length===1?UT(t):new jn(t,r,a,s??1)}function jn(t,r,a,s){this.h=+t,this.s=+r,this.l=+a,this.opacity=+s}gN(jn,zre,VT(a0,{brighter(t){return t=t==null?Ih:Math.pow(Ih,t),new jn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ix:Math.pow(ix,t),new jn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*r,n=2*a-s;return new us(dv(t>=240?t-240:t+120,n,s),dv(t,n,s),dv(t<120?t+240:t-120,n,s),this.opacity)},clamp(){return new jn(yS(this.h),J0(this.s),J0(this.l),Lh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Lh(this.opacity);return`${t===1?"hsl(":"hsla("}${yS(this.h)}, ${J0(this.s)*100}%, ${J0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yS(t){return t=(t||0)%360,t<0?t+360:t}function J0(t){return Math.max(0,Math.min(1,t||0))}function dv(t,r,a){return(t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r)*255}const bN=t=>()=>t;function qre(t,r){return function(a){return t+a*r}}function Vre(t,r,a){return t=Math.pow(t,a),r=Math.pow(r,a)-t,a=1/a,function(s){return Math.pow(t+s*r,a)}}function Ure(t){return(t=+t)==1?WT:function(r,a){return a-r?Vre(r,a,t):bN(isNaN(r)?a:r)}}function WT(t,r){var a=r-t;return a?qre(t,a):bN(isNaN(t)?r:t)}const jS=function t(r){var a=Ure(r);function s(n,o){var i=a((n=kj(n)).r,(o=kj(o)).r),l=a(n.g,o.g),c=a(n.b,o.b),d=WT(n.opacity,o.opacity);return function(u){return n.r=i(u),n.g=l(u),n.b=c(u),n.opacity=d(u),n+""}}return s.gamma=t,s}(1);function Wre(t,r){r||(r=[]);var a=t?Math.min(r.length,t.length):0,s=r.slice(),n;return function(o){for(n=0;n<a;++n)s[n]=t[n]*(1-o)+r[n]*o;return s}}function Hre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Kre(t,r){var a=r?r.length:0,s=t?Math.min(a,t.length):0,n=new Array(s),o=new Array(a),i;for(i=0;i<s;++i)n[i]=fu(t[i],r[i]);for(;i<a;++i)o[i]=r[i];return function(l){for(i=0;i<s;++i)o[i]=n[i](l);return o}}function Gre(t,r){var a=new Date;return t=+t,r=+r,function(s){return a.setTime(t*(1-s)+r*s),a}}function Bh(t,r){return t=+t,r=+r,function(a){return t*(1-a)+r*a}}function Xre(t,r){var a={},s={},n;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(n in r)n in t?a[n]=fu(t[n],r[n]):s[n]=r[n];return function(o){for(n in a)s[n]=a[n](o);return s}}var Ej=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uv=new RegExp(Ej.source,"g");function Yre(t){return function(){return t}}function Qre(t){return function(r){return t(r)+""}}function Jre(t,r){var a=Ej.lastIndex=uv.lastIndex=0,s,n,o,i=-1,l=[],c=[];for(t=t+"",r=r+"";(s=Ej.exec(t))&&(n=uv.exec(r));)(o=n.index)>a&&(o=r.slice(a,o),l[i]?l[i]+=o:l[++i]=o),(s=s[0])===(n=n[0])?l[i]?l[i]+=n:l[++i]=n:(l[++i]=null,c.push({i,x:Bh(s,n)})),a=uv.lastIndex;return a<r.length&&(o=r.slice(a),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?Qre(c[0].x):Yre(r):(r=c.length,function(d){for(var u=0,m;u<r;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}function fu(t,r){var a=typeof r,s;return r==null||a==="boolean"?bN(r):(a==="number"?Bh:a==="string"?(s=cx(r))?(r=s,jS):Jre:r instanceof cx?jS:r instanceof Date?Gre:Hre(r)?Wre:Array.isArray(r)?Kre:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Xre:Bh)(t,r)}function vN(t,r){return t=+t,r=+r,function(a){return Math.round(t*(1-a)+r*a)}}function Zre(t,r){r===void 0&&(r=t,t=fu);for(var a=0,s=r.length-1,n=r[0],o=new Array(s<0?0:s);a<s;)o[a]=t(n,n=r[++a]);return function(i){var l=Math.max(0,Math.min(s-1,Math.floor(i*=s)));return o[l](i-l)}}function eae(t){return function(){return t}}function zh(t){return+t}var NS=[0,1];function es(t){return t}function Aj(t,r){return(r-=t=+t)?function(a){return(a-t)/r}:eae(isNaN(r)?NaN:.5)}function tae(t,r){var a;return t>r&&(a=t,t=r,r=a),function(s){return Math.max(t,Math.min(r,s))}}function rae(t,r,a){var s=t[0],n=t[1],o=r[0],i=r[1];return n<s?(s=Aj(n,s),o=a(i,o)):(s=Aj(s,n),o=a(o,i)),function(l){return o(s(l))}}function aae(t,r,a){var s=Math.min(t.length,r.length)-1,n=new Array(s),o=new Array(s),i=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++i<s;)n[i]=Aj(t[i],t[i+1]),o[i]=a(r[i],r[i+1]);return function(l){var c=r0(t,l,1,s)-1;return o[c](n[c](l))}}function s0(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Bg(){var t=NS,r=NS,a=fu,s,n,o,i=es,l,c,d;function u(){var x=Math.min(t.length,r.length);return i!==es&&(i=tae(t[0],t[x-1])),l=x>2?aae:rae,c=d=null,m}function m(x){return x==null||isNaN(x=+x)?o:(c||(c=l(t.map(s),r,a)))(s(i(x)))}return m.invert=function(x){return i(n((d||(d=l(r,t.map(s),Bh)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,zh),u()):t.slice()},m.range=function(x){return arguments.length?(r=Array.from(x),u()):r.slice()},m.rangeRound=function(x){return r=Array.from(x),a=vN,u()},m.clamp=function(x){return arguments.length?(i=x?!0:es,u()):i!==es},m.interpolate=function(x){return arguments.length?(a=x,u()):a},m.unknown=function(x){return arguments.length?(o=x,m):o},function(x,h){return s=x,n=h,u()}}function yN(){return Bg()(es,es)}function sae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qh(t,r){if(!isFinite(t)||t===0)return null;var a=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"),s=t.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+t.slice(a+1)]}function Td(t){return t=qh(Math.abs(t)),t?t[1]:NaN}function nae(t,r){return function(a,s){for(var n=a.length,o=[],i=0,l=t[0],c=0;n>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),o.push(a.substring(n-=l,n+l)),!((c+=l+1)>s));)l=t[i=(i+1)%t.length];return o.reverse().join(r)}}function oae(t){return function(r){return r.replace(/[0-9]/g,function(a){return t[+a]})}}var iae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dx(t){if(!(r=iae.exec(t)))throw new Error("invalid format: "+t);var r;return new jN({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}dx.prototype=jN.prototype;function jN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}jN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lae(t){e:for(var r=t.length,a=1,s=-1,n;a<r;++a)switch(t[a]){case".":s=n=a;break;case"0":s===0&&(s=a),n=a;break;default:if(!+t[a])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(n+1):t}var Vh;function cae(t,r){var a=qh(t,r);if(!a)return Vh=void 0,t.toPrecision(r);var s=a[0],n=a[1],o=n-(Vh=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=s.length;return o===i?s:o>i?s+new Array(o-i+1).join("0"):o>0?s.slice(0,o)+"."+s.slice(o):"0."+new Array(1-o).join("0")+qh(t,Math.max(0,r+o-1))[0]}function wS(t,r){var a=qh(t,r);if(!a)return t+"";var s=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const _S={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sae,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>wS(t*100,r),r:wS,s:cae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function SS(t){return t}var CS=Array.prototype.map,kS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dae(t){var r=t.grouping===void 0||t.thousands===void 0?SS:nae(CS.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?SS:oae(CS.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m,x){m=dx(m);var h=m.fill,b=m.align,p=m.sign,f=m.symbol,v=m.zero,g=m.width,y=m.comma,N=m.precision,_=m.trim,w=m.type;w==="n"?(y=!0,w="g"):_S[w]||(N===void 0&&(N=12),_=!0,w="g"),(v||h==="0"&&b==="=")&&(v=!0,h="0",b="=");var S=(x&&x.prefix!==void 0?x.prefix:"")+(f==="$"?a:f==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),C=(f==="$"?s:/[%p]/.test(w)?i:"")+(x&&x.suffix!==void 0?x.suffix:""),k=_S[w],F=/[defgprs%]/.test(w);N=N===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function q(A){var T=S,U=C,K,I,Y;if(w==="c")U=k(A)+U,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?c:k(Math.abs(A),N),_&&(A=lae(A)),D&&+A==0&&p!=="+"&&(D=!1),T=(D?p==="("?p:l:p==="-"||p==="("?"":p)+T,U=(w==="s"&&!isNaN(A)&&Vh!==void 0?kS[8+Vh/3]:"")+U+(D&&p==="("?")":""),F){for(K=-1,I=A.length;++K<I;)if(Y=A.charCodeAt(K),48>Y||Y>57){U=(Y===46?n+A.slice(K+1):A.slice(K))+U,A=A.slice(0,K);break}}}y&&!v&&(A=r(A,1/0));var W=T.length+A.length+U.length,R=W<g?new Array(g-W+1).join(h):"";switch(y&&v&&(A=r(R+A,R.length?g-U.length:1/0),R=""),b){case"<":A=T+A+U+R;break;case"=":A=T+R+A+U;break;case"^":A=R.slice(0,W=R.length>>1)+T+A+U+R.slice(W);break;default:A=R+T+A+U;break}return o(A)}return q.toString=function(){return m+""},q}function u(m,x){var h=Math.max(-8,Math.min(8,Math.floor(Td(x)/3)))*3,b=Math.pow(10,-h),p=d((m=dx(m),m.type="f",m),{suffix:kS[8+h/3]});return function(f){return p(b*f)}}return{format:d,formatPrefix:u}}var Z0,NN,HT;uae({thousands:",",grouping:[3],currency:["$",""]});function uae(t){return Z0=dae(t),NN=Z0.format,HT=Z0.formatPrefix,Z0}function mae(t){return Math.max(0,-Td(Math.abs(t)))}function xae(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Td(r)/3)))*3-Td(Math.abs(t)))}function pae(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Td(r)-Td(t))+1}function KT(t,r,a,s){var n=Sj(t,r,a),o;switch(s=dx(s??",f"),s.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(r));return s.precision==null&&!isNaN(o=xae(n,i))&&(s.precision=o),HT(s,i)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=pae(n,Math.max(Math.abs(t),Math.abs(r))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=mae(n))&&(s.precision=o-(s.type==="%")*2);break}}return NN(s)}function Ui(t){var r=t.domain;return t.ticks=function(a){var s=r();return wj(s[0],s[s.length-1],a??10)},t.tickFormat=function(a,s){var n=r();return KT(n[0],n[n.length-1],a??10,s)},t.nice=function(a){a==null&&(a=10);var s=r(),n=0,o=s.length-1,i=s[n],l=s[o],c,d,u=10;for(l<i&&(d=i,i=l,l=d,d=n,n=o,o=d);u-- >0;){if(d=_j(i,l,a),d===c)return s[n]=i,s[o]=l,r(s);if(d>0)i=Math.floor(i/d)*d,l=Math.ceil(l/d)*d;else if(d<0)i=Math.ceil(i*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Uh(){var t=yN();return t.copy=function(){return s0(t,Uh())},cn.apply(t,arguments),Ui(t)}function GT(t){var r;function a(s){return s==null||isNaN(s=+s)?r:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(t=Array.from(s,zh),a):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return GT(t).unknown(r)},t=arguments.length?Array.from(t,zh):[0,1],Ui(a)}function XT(t,r){t=t.slice();var a=0,s=t.length-1,n=t[a],o=t[s],i;return o<n&&(i=a,a=s,s=i,i=n,n=o,o=i),t[a]=r.floor(n),t[s]=r.ceil(o),t}function ES(t){return Math.log(t)}function AS(t){return Math.exp(t)}function hae(t){return-Math.log(-t)}function fae(t){return-Math.exp(-t)}function gae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bae(t){return t===10?gae:t===Math.E?Math.exp:r=>Math.pow(t,r)}function vae(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function PS(t){return(r,a)=>-t(-r,a)}function wN(t){const r=t(ES,AS),a=r.domain;let s=10,n,o;function i(){return n=vae(s),o=bae(s),a()[0]<0?(n=PS(n),o=PS(o),t(hae,fae)):t(ES,AS),r}return r.base=function(l){return arguments.length?(s=+l,i()):s},r.domain=function(l){return arguments.length?(a(l),i()):a()},r.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let x=n(d),h=n(u),b,p;const f=l==null?10:+l;let v=[];if(!(s%1)&&h-x<f){if(x=Math.floor(x),h=Math.ceil(h),d>0){for(;x<=h;++x)for(b=1;b<s;++b)if(p=x<0?b/o(-x):b*o(x),!(p<d)){if(p>u)break;v.push(p)}}else for(;x<=h;++x)for(b=s-1;b>=1;--b)if(p=x>0?b/o(-x):b*o(x),!(p<d)){if(p>u)break;v.push(p)}v.length*2<f&&(v=wj(d,u,f))}else v=wj(x,h,Math.min(h-x,f)).map(o);return m?v.reverse():v},r.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=dx(c)).precision==null&&(c.trim=!0),c=NN(c)),l===1/0)return c;const d=Math.max(1,s*l/r.ticks().length);return u=>{let m=u/o(Math.round(n(u)));return m*s<s-.5&&(m*=s),m<=d?c(u):""}},r.nice=()=>a(XT(a(),{floor:l=>o(Math.floor(n(l))),ceil:l=>o(Math.ceil(n(l)))})),r}function YT(){const t=wN(Bg()).domain([1,10]);return t.copy=()=>s0(t,YT()).base(t.base()),cn.apply(t,arguments),t}function TS(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function OS(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function _N(t){var r=1,a=t(TS(r),OS(r));return a.constant=function(s){return arguments.length?t(TS(r=+s),OS(r)):r},Ui(a)}function QT(){var t=_N(Bg());return t.copy=function(){return s0(t,QT()).constant(t.constant())},cn.apply(t,arguments)}function FS(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function yae(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jae(t){return t<0?-t*t:t*t}function SN(t){var r=t(es,es),a=1;function s(){return a===1?t(es,es):a===.5?t(yae,jae):t(FS(a),FS(1/a))}return r.exponent=function(n){return arguments.length?(a=+n,s()):a},Ui(r)}function CN(){var t=SN(Bg());return t.copy=function(){return s0(t,CN()).exponent(t.exponent())},cn.apply(t,arguments),t}function Nae(){return CN.apply(null,arguments).exponent(.5)}function RS(t){return Math.sign(t)*t*t}function wae(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function JT(){var t=yN(),r=[0,1],a=!1,s;function n(o){var i=wae(t(o));return isNaN(i)?s:a?Math.round(i):i}return n.invert=function(o){return t.invert(RS(o))},n.domain=function(o){return arguments.length?(t.domain(o),n):t.domain()},n.range=function(o){return arguments.length?(t.range((r=Array.from(o,zh)).map(RS)),n):r.slice()},n.rangeRound=function(o){return n.range(o).round(!0)},n.round=function(o){return arguments.length?(a=!!o,n):a},n.clamp=function(o){return arguments.length?(t.clamp(o),n):t.clamp()},n.unknown=function(o){return arguments.length?(s=o,n):s},n.copy=function(){return JT(t.domain(),r).round(a).clamp(t.clamp()).unknown(s)},cn.apply(n,arguments),Ui(n)}function ZT(){var t=[],r=[],a=[],s;function n(){var i=0,l=Math.max(1,r.length);for(a=new Array(l-1);++i<l;)a[i-1]=Ere(t,i/l);return o}function o(i){return i==null||isNaN(i=+i)?s:r[r0(a,i)]}return o.invertExtent=function(i){var l=r.indexOf(i);return l<0?[NaN,NaN]:[l>0?a[l-1]:t[0],l<a.length?a[l]:t[t.length-1]]},o.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Ei),n()},o.range=function(i){return arguments.length?(r=Array.from(i),n()):r.slice()},o.unknown=function(i){return arguments.length?(s=i,o):s},o.quantiles=function(){return a.slice()},o.copy=function(){return ZT().domain(t).range(r).unknown(s)},cn.apply(o,arguments)}function eO(){var t=0,r=1,a=1,s=[.5],n=[0,1],o;function i(c){return c!=null&&c<=c?n[r0(s,c,0,a)]:o}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*r-(c-a)*t)/(a+1);return i}return i.domain=function(c){return arguments.length?([t,r]=c,t=+t,r=+r,l()):[t,r]},i.range=function(c){return arguments.length?(a=(n=Array.from(c)).length-1,l()):n.slice()},i.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,s[0]]:d>=a?[s[a-1],r]:[s[d-1],s[d]]},i.unknown=function(c){return arguments.length&&(o=c),i},i.thresholds=function(){return s.slice()},i.copy=function(){return eO().domain([t,r]).range(n).unknown(o)},cn.apply(Ui(i),arguments)}function tO(){var t=[.5],r=[0,1],a,s=1;function n(o){return o!=null&&o<=o?r[r0(t,o,0,s)]:a}return n.domain=function(o){return arguments.length?(t=Array.from(o),s=Math.min(t.length,r.length-1),n):t.slice()},n.range=function(o){return arguments.length?(r=Array.from(o),s=Math.min(t.length,r.length-1),n):r.slice()},n.invertExtent=function(o){var i=r.indexOf(o);return[t[i-1],t[i]]},n.unknown=function(o){return arguments.length?(a=o,n):a},n.copy=function(){return tO().domain(t).range(r).unknown(a)},cn.apply(n,arguments)}const mv=new Date,xv=new Date;function ga(t,r,a,s){function n(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return n.floor=o=>(t(o=new Date(+o)),o),n.ceil=o=>(t(o=new Date(o-1)),r(o,1),t(o),o),n.round=o=>{const i=n(o),l=n.ceil(o);return o-i<l-o?i:l},n.offset=(o,i)=>(r(o=new Date(+o),i==null?1:Math.floor(i)),o),n.range=(o,i,l)=>{const c=[];if(o=n.ceil(o),l=l==null?1:Math.floor(l),!(o<i)||!(l>0))return c;let d;do c.push(d=new Date(+o)),r(o,l),t(o);while(d<o&&o<i);return c},n.filter=o=>ga(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;r(i,-1),!o(i););else for(;--l>=0;)for(;r(i,1),!o(i););}),a&&(n.count=(o,i)=>(mv.setTime(+o),xv.setTime(+i),t(mv),t(xv),Math.floor(a(mv,xv))),n.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?n.filter(s?i=>s(i)%o===0:i=>n.count(0,i)%o===0):n)),n}const Wh=ga(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Wh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ga(r=>{r.setTime(Math.floor(r/t)*t)},(r,a)=>{r.setTime(+r+a*t)},(r,a)=>(a-r)/t):Wh);Wh.range;const bo=1e3,rn=bo*60,vo=rn*60,Do=vo*24,kN=Do*7,$S=Do*30,pv=Do*365,fl=ga(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*bo)},(t,r)=>(r-t)/bo,t=>t.getUTCSeconds());fl.range;const EN=ga(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bo)},(t,r)=>{t.setTime(+t+r*rn)},(t,r)=>(r-t)/rn,t=>t.getMinutes());EN.range;const AN=ga(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*rn)},(t,r)=>(r-t)/rn,t=>t.getUTCMinutes());AN.range;const PN=ga(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bo-t.getMinutes()*rn)},(t,r)=>{t.setTime(+t+r*vo)},(t,r)=>(r-t)/vo,t=>t.getHours());PN.range;const TN=ga(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*vo)},(t,r)=>(r-t)/vo,t=>t.getUTCHours());TN.range;const n0=ga(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*rn)/Do,t=>t.getDate()-1);n0.range;const zg=ga(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Do,t=>t.getUTCDate()-1);zg.range;const rO=ga(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Do,t=>Math.floor(t/Do));rO.range;function ic(t){return ga(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,a)=>{r.setDate(r.getDate()+a*7)},(r,a)=>(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*rn)/kN)}const qg=ic(0),Hh=ic(1),_ae=ic(2),Sae=ic(3),Od=ic(4),Cae=ic(5),kae=ic(6);qg.range;Hh.range;_ae.range;Sae.range;Od.range;Cae.range;kae.range;function lc(t){return ga(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCDate(r.getUTCDate()+a*7)},(r,a)=>(a-r)/kN)}const Vg=lc(0),Kh=lc(1),Eae=lc(2),Aae=lc(3),Fd=lc(4),Pae=lc(5),Tae=lc(6);Vg.range;Kh.range;Eae.range;Aae.range;Fd.range;Pae.range;Tae.range;const ON=ga(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ON.range;const FN=ga(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());FN.range;const Mo=ga(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Mo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ga(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,a)=>{r.setFullYear(r.getFullYear()+a*t)});Mo.range;const Io=ga(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Io.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ga(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCFullYear(r.getUTCFullYear()+a*t)});Io.range;function aO(t,r,a,s,n,o){const i=[[fl,1,bo],[fl,5,5*bo],[fl,15,15*bo],[fl,30,30*bo],[o,1,rn],[o,5,5*rn],[o,15,15*rn],[o,30,30*rn],[n,1,vo],[n,3,3*vo],[n,6,6*vo],[n,12,12*vo],[s,1,Do],[s,2,2*Do],[a,1,kN],[r,1,$S],[r,3,3*$S],[t,1,pv]];function l(d,u,m){const x=u<d;x&&([d,u]=[u,d]);const h=m&&typeof m.range=="function"?m:c(d,u,m),b=h?h.range(d,+u+1):[];return x?b.reverse():b}function c(d,u,m){const x=Math.abs(u-d)/m,h=hN(([,,f])=>f).right(i,x);if(h===i.length)return t.every(Sj(d/pv,u/pv,m));if(h===0)return Wh.every(Math.max(Sj(d,u,m),1));const[b,p]=i[x/i[h-1][2]<i[h][2]/x?h-1:h];return b.every(p)}return[l,c]}const[Oae,Fae]=aO(Io,FN,Vg,rO,TN,AN),[Rae,$ae]=aO(Mo,ON,qg,n0,PN,EN);function hv(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fv(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bu(t,r,a){return{y:t,m:r,d:a,H:0,M:0,S:0,L:0}}function Dae(t){var r=t.dateTime,a=t.date,s=t.time,n=t.periods,o=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,d=zu(n),u=qu(n),m=zu(o),x=qu(o),h=zu(i),b=qu(i),p=zu(l),f=qu(l),v=zu(c),g=qu(c),y={a:Y,A:D,b:W,B:R,c:null,d:zS,e:zS,f:nse,g:hse,G:gse,H:rse,I:ase,j:sse,L:sO,m:ose,M:ise,p:B,q:O,Q:US,s:WS,S:lse,u:cse,U:dse,V:use,w:mse,W:xse,x:null,X:null,y:pse,Y:fse,Z:bse,"%":VS},N={a:L,A:E,b:M,B:z,c:null,d:qS,e:qS,f:Nse,g:Ose,G:Rse,H:vse,I:yse,j:jse,L:oO,m:wse,M:_se,p:le,q:Q,Q:US,s:WS,S:Sse,u:Cse,U:kse,V:Ese,w:Ase,W:Pse,x:null,X:null,y:Tse,Y:Fse,Z:$se,"%":VS},_={a:F,A:q,b:A,B:T,c:U,d:LS,e:LS,f:Jae,g:IS,G:MS,H:BS,I:BS,j:Gae,L:Qae,m:Kae,M:Xae,p:k,q:Hae,Q:ese,s:tse,S:Yae,u:zae,U:qae,V:Vae,w:Bae,W:Uae,x:K,X:I,y:IS,Y:MS,Z:Wae,"%":Zae};y.x=w(a,y),y.X=w(s,y),y.c=w(r,y),N.x=w(a,N),N.X=w(s,N),N.c=w(r,N);function w(ne,re){return function(ae){var ie=[],ve=-1,_e=0,me=ne.length,Se,Ne,ot;for(ae instanceof Date||(ae=new Date(+ae));++ve<me;)ne.charCodeAt(ve)===37&&(ie.push(ne.slice(_e,ve)),(Ne=DS[Se=ne.charAt(++ve)])!=null?Se=ne.charAt(++ve):Ne=Se==="e"?" ":"0",(ot=re[Se])&&(Se=ot(ae,Ne)),ie.push(Se),_e=ve+1);return ie.push(ne.slice(_e,ve)),ie.join("")}}function S(ne,re){return function(ae){var ie=Bu(1900,void 0,1),ve=C(ie,ne,ae+="",0),_e,me;if(ve!=ae.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(re&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(_e=fv(Bu(ie.y,0,1)),me=_e.getUTCDay(),_e=me>4||me===0?Kh.ceil(_e):Kh(_e),_e=zg.offset(_e,(ie.V-1)*7),ie.y=_e.getUTCFullYear(),ie.m=_e.getUTCMonth(),ie.d=_e.getUTCDate()+(ie.w+6)%7):(_e=hv(Bu(ie.y,0,1)),me=_e.getDay(),_e=me>4||me===0?Hh.ceil(_e):Hh(_e),_e=n0.offset(_e,(ie.V-1)*7),ie.y=_e.getFullYear(),ie.m=_e.getMonth(),ie.d=_e.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),me="Z"in ie?fv(Bu(ie.y,0,1)).getUTCDay():hv(Bu(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(me+5)%7:ie.w+ie.U*7-(me+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,fv(ie)):hv(ie)}}function C(ne,re,ae,ie){for(var ve=0,_e=re.length,me=ae.length,Se,Ne;ve<_e;){if(ie>=me)return-1;if(Se=re.charCodeAt(ve++),Se===37){if(Se=re.charAt(ve++),Ne=_[Se in DS?re.charAt(ve++):Se],!Ne||(ie=Ne(ne,ae,ie))<0)return-1}else if(Se!=ae.charCodeAt(ie++))return-1}return ie}function k(ne,re,ae){var ie=d.exec(re.slice(ae));return ie?(ne.p=u.get(ie[0].toLowerCase()),ae+ie[0].length):-1}function F(ne,re,ae){var ie=h.exec(re.slice(ae));return ie?(ne.w=b.get(ie[0].toLowerCase()),ae+ie[0].length):-1}function q(ne,re,ae){var ie=m.exec(re.slice(ae));return ie?(ne.w=x.get(ie[0].toLowerCase()),ae+ie[0].length):-1}function A(ne,re,ae){var ie=v.exec(re.slice(ae));return ie?(ne.m=g.get(ie[0].toLowerCase()),ae+ie[0].length):-1}function T(ne,re,ae){var ie=p.exec(re.slice(ae));return ie?(ne.m=f.get(ie[0].toLowerCase()),ae+ie[0].length):-1}function U(ne,re,ae){return C(ne,r,re,ae)}function K(ne,re,ae){return C(ne,a,re,ae)}function I(ne,re,ae){return C(ne,s,re,ae)}function Y(ne){return i[ne.getDay()]}function D(ne){return o[ne.getDay()]}function W(ne){return c[ne.getMonth()]}function R(ne){return l[ne.getMonth()]}function B(ne){return n[+(ne.getHours()>=12)]}function O(ne){return 1+~~(ne.getMonth()/3)}function L(ne){return i[ne.getUTCDay()]}function E(ne){return o[ne.getUTCDay()]}function M(ne){return c[ne.getUTCMonth()]}function z(ne){return l[ne.getUTCMonth()]}function le(ne){return n[+(ne.getUTCHours()>=12)]}function Q(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var re=w(ne+="",y);return re.toString=function(){return ne},re},parse:function(ne){var re=S(ne+="",!1);return re.toString=function(){return ne},re},utcFormat:function(ne){var re=w(ne+="",N);return re.toString=function(){return ne},re},utcParse:function(ne){var re=S(ne+="",!0);return re.toString=function(){return ne},re}}}var DS={"-":"",_:" ",0:"0"},ka=/^\s*\d+/,Mae=/^%/,Iae=/[\\^$*+?|[\]().{}]/g;function Zt(t,r,a){var s=t<0?"-":"",n=(s?-t:t)+"",o=n.length;return s+(o<a?new Array(a-o+1).join(r)+n:n)}function Lae(t){return t.replace(Iae,"\\$&")}function zu(t){return new RegExp("^(?:"+t.map(Lae).join("|")+")","i")}function qu(t){return new Map(t.map((r,a)=>[r.toLowerCase(),a]))}function Bae(t,r,a){var s=ka.exec(r.slice(a,a+1));return s?(t.w=+s[0],a+s[0].length):-1}function zae(t,r,a){var s=ka.exec(r.slice(a,a+1));return s?(t.u=+s[0],a+s[0].length):-1}function qae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.U=+s[0],a+s[0].length):-1}function Vae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.V=+s[0],a+s[0].length):-1}function Uae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.W=+s[0],a+s[0].length):-1}function MS(t,r,a){var s=ka.exec(r.slice(a,a+4));return s?(t.y=+s[0],a+s[0].length):-1}function IS(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Wae(t,r,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a,a+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function Hae(t,r,a){var s=ka.exec(r.slice(a,a+1));return s?(t.q=s[0]*3-3,a+s[0].length):-1}function Kae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.m=s[0]-1,a+s[0].length):-1}function LS(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.d=+s[0],a+s[0].length):-1}function Gae(t,r,a){var s=ka.exec(r.slice(a,a+3));return s?(t.m=0,t.d=+s[0],a+s[0].length):-1}function BS(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.H=+s[0],a+s[0].length):-1}function Xae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.M=+s[0],a+s[0].length):-1}function Yae(t,r,a){var s=ka.exec(r.slice(a,a+2));return s?(t.S=+s[0],a+s[0].length):-1}function Qae(t,r,a){var s=ka.exec(r.slice(a,a+3));return s?(t.L=+s[0],a+s[0].length):-1}function Jae(t,r,a){var s=ka.exec(r.slice(a,a+6));return s?(t.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Zae(t,r,a){var s=Mae.exec(r.slice(a,a+1));return s?a+s[0].length:-1}function ese(t,r,a){var s=ka.exec(r.slice(a));return s?(t.Q=+s[0],a+s[0].length):-1}function tse(t,r,a){var s=ka.exec(r.slice(a));return s?(t.s=+s[0],a+s[0].length):-1}function zS(t,r){return Zt(t.getDate(),r,2)}function rse(t,r){return Zt(t.getHours(),r,2)}function ase(t,r){return Zt(t.getHours()%12||12,r,2)}function sse(t,r){return Zt(1+n0.count(Mo(t),t),r,3)}function sO(t,r){return Zt(t.getMilliseconds(),r,3)}function nse(t,r){return sO(t,r)+"000"}function ose(t,r){return Zt(t.getMonth()+1,r,2)}function ise(t,r){return Zt(t.getMinutes(),r,2)}function lse(t,r){return Zt(t.getSeconds(),r,2)}function cse(t){var r=t.getDay();return r===0?7:r}function dse(t,r){return Zt(qg.count(Mo(t)-1,t),r,2)}function nO(t){var r=t.getDay();return r>=4||r===0?Od(t):Od.ceil(t)}function use(t,r){return t=nO(t),Zt(Od.count(Mo(t),t)+(Mo(t).getDay()===4),r,2)}function mse(t){return t.getDay()}function xse(t,r){return Zt(Hh.count(Mo(t)-1,t),r,2)}function pse(t,r){return Zt(t.getFullYear()%100,r,2)}function hse(t,r){return t=nO(t),Zt(t.getFullYear()%100,r,2)}function fse(t,r){return Zt(t.getFullYear()%1e4,r,4)}function gse(t,r){var a=t.getDay();return t=a>=4||a===0?Od(t):Od.ceil(t),Zt(t.getFullYear()%1e4,r,4)}function bse(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Zt(r/60|0,"0",2)+Zt(r%60,"0",2)}function qS(t,r){return Zt(t.getUTCDate(),r,2)}function vse(t,r){return Zt(t.getUTCHours(),r,2)}function yse(t,r){return Zt(t.getUTCHours()%12||12,r,2)}function jse(t,r){return Zt(1+zg.count(Io(t),t),r,3)}function oO(t,r){return Zt(t.getUTCMilliseconds(),r,3)}function Nse(t,r){return oO(t,r)+"000"}function wse(t,r){return Zt(t.getUTCMonth()+1,r,2)}function _se(t,r){return Zt(t.getUTCMinutes(),r,2)}function Sse(t,r){return Zt(t.getUTCSeconds(),r,2)}function Cse(t){var r=t.getUTCDay();return r===0?7:r}function kse(t,r){return Zt(Vg.count(Io(t)-1,t),r,2)}function iO(t){var r=t.getUTCDay();return r>=4||r===0?Fd(t):Fd.ceil(t)}function Ese(t,r){return t=iO(t),Zt(Fd.count(Io(t),t)+(Io(t).getUTCDay()===4),r,2)}function Ase(t){return t.getUTCDay()}function Pse(t,r){return Zt(Kh.count(Io(t)-1,t),r,2)}function Tse(t,r){return Zt(t.getUTCFullYear()%100,r,2)}function Ose(t,r){return t=iO(t),Zt(t.getUTCFullYear()%100,r,2)}function Fse(t,r){return Zt(t.getUTCFullYear()%1e4,r,4)}function Rse(t,r){var a=t.getUTCDay();return t=a>=4||a===0?Fd(t):Fd.ceil(t),Zt(t.getUTCFullYear()%1e4,r,4)}function $se(){return"+0000"}function VS(){return"%"}function US(t){return+t}function WS(t){return Math.floor(+t/1e3)}var vc,lO,cO;Dse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Dse(t){return vc=Dae(t),lO=vc.format,vc.parse,cO=vc.utcFormat,vc.utcParse,vc}function Mse(t){return new Date(t)}function Ise(t){return t instanceof Date?+t:+new Date(+t)}function RN(t,r,a,s,n,o,i,l,c,d){var u=yN(),m=u.invert,x=u.domain,h=d(".%L"),b=d(":%S"),p=d("%I:%M"),f=d("%I %p"),v=d("%a %d"),g=d("%b %d"),y=d("%B"),N=d("%Y");function _(w){return(c(w)<w?h:l(w)<w?b:i(w)<w?p:o(w)<w?f:s(w)<w?n(w)<w?v:g:a(w)<w?y:N)(w)}return u.invert=function(w){return new Date(m(w))},u.domain=function(w){return arguments.length?x(Array.from(w,Ise)):x().map(Mse)},u.ticks=function(w){var S=x();return t(S[0],S[S.length-1],w??10)},u.tickFormat=function(w,S){return S==null?_:d(S)},u.nice=function(w){var S=x();return(!w||typeof w.range!="function")&&(w=r(S[0],S[S.length-1],w??10)),w?x(XT(S,w)):u},u.copy=function(){return s0(u,RN(t,r,a,s,n,o,i,l,c,d))},u}function Lse(){return cn.apply(RN(Rae,$ae,Mo,ON,qg,n0,PN,EN,fl,lO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Bse(){return cn.apply(RN(Oae,Fae,Io,FN,Vg,zg,TN,AN,fl,cO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ug(){var t=0,r=1,a,s,n,o,i=es,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:i(n===0?.5:(m=(o(m)-a)*n,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,r]=m,a=o(t=+t),s=o(r=+r),n=a===s?0:1/(s-a),d):[t,r]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(i=m,d):i};function u(m){return function(x){var h,b;return arguments.length?([h,b]=x,i=m(h,b),d):[i(0),i(1)]}}return d.range=u(fu),d.rangeRound=u(vN),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return o=m,a=m(t),s=m(r),n=a===s?0:1/(s-a),d}}function Wi(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dO(){var t=Ui(Ug()(es));return t.copy=function(){return Wi(t,dO())},Ho.apply(t,arguments)}function uO(){var t=wN(Ug()).domain([1,10]);return t.copy=function(){return Wi(t,uO()).base(t.base())},Ho.apply(t,arguments)}function mO(){var t=_N(Ug());return t.copy=function(){return Wi(t,mO()).constant(t.constant())},Ho.apply(t,arguments)}function $N(){var t=SN(Ug());return t.copy=function(){return Wi(t,$N()).exponent(t.exponent())},Ho.apply(t,arguments)}function zse(){return $N.apply(null,arguments).exponent(.5)}function xO(){var t=[],r=es;function a(s){if(s!=null&&!isNaN(s=+s))return r((r0(t,s,1)-1)/(t.length-1))}return a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let n of s)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Ei),a},a.interpolator=function(s){return arguments.length?(r=s,a):r},a.range=function(){return t.map((s,n)=>r(n/(t.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(n,o)=>kre(t,o/s))},a.copy=function(){return xO(r).domain(t)},Ho.apply(a,arguments)}function Wg(){var t=0,r=.5,a=1,s=1,n,o,i,l,c,d=es,u,m=!1,x;function h(p){return isNaN(p=+p)?x:(p=.5+((p=+u(p))-o)*(s*p<s*o?l:c),d(m?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,r,a]=p,n=u(t=+t),o=u(r=+r),i=u(a=+a),l=n===o?0:.5/(o-n),c=o===i?0:.5/(i-o),s=o<n?-1:1,h):[t,r,a]},h.clamp=function(p){return arguments.length?(m=!!p,h):m},h.interpolator=function(p){return arguments.length?(d=p,h):d};function b(p){return function(f){var v,g,y;return arguments.length?([v,g,y]=f,d=Zre(p,[v,g,y]),h):[d(0),d(.5),d(1)]}}return h.range=b(fu),h.rangeRound=b(vN),h.unknown=function(p){return arguments.length?(x=p,h):x},function(p){return u=p,n=p(t),o=p(r),i=p(a),l=n===o?0:.5/(o-n),c=o===i?0:.5/(i-o),s=o<n?-1:1,h}}function pO(){var t=Ui(Wg()(es));return t.copy=function(){return Wi(t,pO())},Ho.apply(t,arguments)}function hO(){var t=wN(Wg()).domain([.1,1,10]);return t.copy=function(){return Wi(t,hO()).base(t.base())},Ho.apply(t,arguments)}function fO(){var t=_N(Wg());return t.copy=function(){return Wi(t,fO()).constant(t.constant())},Ho.apply(t,arguments)}function DN(){var t=SN(Wg());return t.copy=function(){return Wi(t,DN()).exponent(t.exponent())},Ho.apply(t,arguments)}function qse(){return DN.apply(null,arguments).exponent(.5)}const HS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ox,scaleDiverging:pO,scaleDivergingLog:hO,scaleDivergingPow:DN,scaleDivergingSqrt:qse,scaleDivergingSymlog:fO,scaleIdentity:GT,scaleImplicit:Cj,scaleLinear:Uh,scaleLog:YT,scaleOrdinal:fN,scalePoint:pm,scalePow:CN,scaleQuantile:ZT,scaleQuantize:eO,scaleRadial:JT,scaleSequential:dO,scaleSequentialLog:uO,scaleSequentialPow:$N,scaleSequentialQuantile:xO,scaleSequentialSqrt:zse,scaleSequentialSymlog:mO,scaleSqrt:Nae,scaleSymlog:QT,scaleThreshold:tO,scaleTime:Lse,scaleUtc:Bse,tickFormat:KT},Symbol.toStringTag,{value:"Module"}));var Vse=iu;function Use(t,r,a){for(var s=-1,n=t.length;++s<n;){var o=t[s],i=r(o);if(i!=null&&(l===void 0?i===i&&!Vse(i):a(i,l)))var l=i,c=o}return c}var Hg=Use;function Wse(t,r){return t>r}var gO=Wse,Hse=Hg,Kse=gO,Gse=hu;function Xse(t){return t&&t.length?Hse(t,Gse,Kse):void 0}var Yse=Xse;const hi=mr(Yse);function Qse(t,r){return t<r}var bO=Qse,Jse=Hg,Zse=bO,ene=hu;function tne(t){return t&&t.length?Jse(t,ene,Zse):void 0}var rne=tne;const Kg=mr(rne);var ane=Y2,sne=oo,nne=kT,one=Ns;function ine(t,r){var a=one(t)?ane:nne;return a(t,sne(r))}var lne=ine,cne=ST,dne=lne;function une(t,r){return cne(dne(t,r),1)}var mne=une;const xne=mr(mne);var pne=uN;function hne(t,r){return pne(t,r)}var fne=hne;const Kl=mr(fne);var gu=1e9,gne={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IN,Tr=!0,on="[DecimalError] ",kl=on+"Invalid argument: ",MN=on+"Exponent out of range: ",bu=Math.floor,ol=Math.pow,bne=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Os,ba=1e7,Sr=7,vO=9007199254740991,Gh=bu(vO/Sr),jt={};jt.absoluteValue=jt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};jt.comparedTo=jt.cmp=function(t){var r,a,s,n,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(s=o.d.length,n=t.d.length,r=0,a=s<n?s:n;r<a;++r)if(o.d[r]!==t.d[r])return o.d[r]>t.d[r]^o.s<0?1:-1;return s===n?0:s>n^o.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var t=this,r=t.d.length-1,a=(r-t.e)*Sr;if(r=t.d[r],r)for(;r%10==0;r/=10)a--;return a<0?0:a};jt.dividedBy=jt.div=function(t){return _o(this,new this.constructor(t))};jt.dividedToIntegerBy=jt.idiv=function(t){var r=this,a=r.constructor;return gr(_o(r,new a(t),0,1),a.precision)};jt.equals=jt.eq=function(t){return!this.cmp(t)};jt.exponent=function(){return ra(this)};jt.greaterThan=jt.gt=function(t){return this.cmp(t)>0};jt.greaterThanOrEqualTo=jt.gte=function(t){return this.cmp(t)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(t){return this.cmp(t)<0};jt.lessThanOrEqualTo=jt.lte=function(t){return this.cmp(t)<1};jt.logarithm=jt.log=function(t){var r,a=this,s=a.constructor,n=s.precision,o=n+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(Os))throw Error(on+"NaN");if(a.s<1)throw Error(on+(a.s?"NaN":"-Infinity"));return a.eq(Os)?new s(0):(Tr=!1,r=_o(ux(a,o),ux(t,o),o),Tr=!0,gr(r,n))};jt.minus=jt.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?NO(r,t):yO(r,(t.s=-t.s,t))};jt.modulo=jt.mod=function(t){var r,a=this,s=a.constructor,n=s.precision;if(t=new s(t),!t.s)throw Error(on+"NaN");return a.s?(Tr=!1,r=_o(a,t,0,1).times(t),Tr=!0,a.minus(r)):gr(new s(a),n)};jt.naturalExponential=jt.exp=function(){return jO(this)};jt.naturalLogarithm=jt.ln=function(){return ux(this)};jt.negated=jt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};jt.plus=jt.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?yO(r,t):NO(r,(t.s=-t.s,t))};jt.precision=jt.sd=function(t){var r,a,s,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kl+t);if(r=ra(n)+1,s=n.d.length-1,a=s*Sr+1,s=n.d[s],s){for(;s%10==0;s/=10)a--;for(s=n.d[0];s>=10;s/=10)a++}return t&&r>a?r:a};jt.squareRoot=jt.sqrt=function(){var t,r,a,s,n,o,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(on+"NaN")}for(t=ra(l),Tr=!1,n=Math.sqrt(+l),n==0||n==1/0?(r=Hn(l.d),(r.length+t)%2==0&&(r+="0"),n=Math.sqrt(r),t=bu((t+1)/2)-(t<0||t%2),n==1/0?r="5e"+t:(r=n.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),s=new c(r)):s=new c(n.toString()),a=c.precision,n=i=a+3;;)if(o=s,s=o.plus(_o(l,o,i+2)).times(.5),Hn(o.d).slice(0,i)===(r=Hn(s.d)).slice(0,i)){if(r=r.slice(i-3,i+1),n==i&&r=="4999"){if(gr(o,a+1,0),o.times(o).eq(l)){s=o;break}}else if(r!="9999")break;i+=4}return Tr=!0,gr(s,a)};jt.times=jt.mul=function(t){var r,a,s,n,o,i,l,c,d,u=this,m=u.constructor,x=u.d,h=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,a=u.e+t.e,c=x.length,d=h.length,c<d&&(o=x,x=h,h=o,i=c,c=d,d=i),o=[],i=c+d,s=i;s--;)o.push(0);for(s=d;--s>=0;){for(r=0,n=c+s;n>s;)l=o[n]+h[s]*x[n-s-1]+r,o[n--]=l%ba|0,r=l/ba|0;o[n]=(o[n]+r)%ba|0}for(;!o[--i];)o.pop();return r?++a:o.shift(),t.d=o,t.e=a,Tr?gr(t,m.precision):t};jt.toDecimalPlaces=jt.todp=function(t,r){var a=this,s=a.constructor;return a=new s(a),t===void 0?a:(to(t,0,gu),r===void 0?r=s.rounding:to(r,0,8),gr(a,t+ra(a)+1,r))};jt.toExponential=function(t,r){var a,s=this,n=s.constructor;return t===void 0?a=Gl(s,!0):(to(t,0,gu),r===void 0?r=n.rounding:to(r,0,8),s=gr(new n(s),t+1,r),a=Gl(s,!0,t+1)),a};jt.toFixed=function(t,r){var a,s,n=this,o=n.constructor;return t===void 0?Gl(n):(to(t,0,gu),r===void 0?r=o.rounding:to(r,0,8),s=gr(new o(n),t+ra(n)+1,r),a=Gl(s.abs(),!1,t+ra(s)+1),n.isneg()&&!n.isZero()?"-"+a:a)};jt.toInteger=jt.toint=function(){var t=this,r=t.constructor;return gr(new r(t),ra(t)+1,r.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(t){var r,a,s,n,o,i,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Os);if(l=new c(l),!l.s){if(t.s<1)throw Error(on+"Infinity");return l}if(l.eq(Os))return l;if(s=c.precision,t.eq(Os))return gr(l,s);if(r=t.e,a=t.d.length-1,i=r>=a,o=l.s,i){if((a=u<0?-u:u)<=vO){for(n=new c(Os),r=Math.ceil(s/Sr+4),Tr=!1;a%2&&(n=n.times(l),GS(n.d,r)),a=bu(a/2),a!==0;)l=l.times(l),GS(l.d,r);return Tr=!0,t.s<0?new c(Os).div(n):gr(n,s)}}else if(o<0)throw Error(on+"NaN");return o=o<0&&t.d[Math.max(r,a)]&1?-1:1,l.s=1,Tr=!1,n=t.times(ux(l,s+d)),Tr=!0,n=jO(n),n.s=o,n};jt.toPrecision=function(t,r){var a,s,n=this,o=n.constructor;return t===void 0?(a=ra(n),s=Gl(n,a<=o.toExpNeg||a>=o.toExpPos)):(to(t,1,gu),r===void 0?r=o.rounding:to(r,0,8),n=gr(new o(n),t,r),a=ra(n),s=Gl(n,t<=a||a<=o.toExpNeg,t)),s};jt.toSignificantDigits=jt.tosd=function(t,r){var a=this,s=a.constructor;return t===void 0?(t=s.precision,r=s.rounding):(to(t,1,gu),r===void 0?r=s.rounding:to(r,0,8)),gr(new s(a),t,r)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=ra(t),a=t.constructor;return Gl(t,r<=a.toExpNeg||r>=a.toExpPos)};function yO(t,r){var a,s,n,o,i,l,c,d,u=t.constructor,m=u.precision;if(!t.s||!r.s)return r.s||(r=new u(t)),Tr?gr(r,m):r;if(c=t.d,d=r.d,i=t.e,n=r.e,c=c.slice(),o=i-n,o){for(o<0?(s=c,o=-o,l=d.length):(s=d,n=i,l=c.length),i=Math.ceil(m/Sr),l=i>l?i+1:l+1,o>l&&(o=l,s.length=1),s.reverse();o--;)s.push(0);s.reverse()}for(l=c.length,o=d.length,l-o<0&&(o=l,s=d,d=c,c=s),a=0;o;)a=(c[--o]=c[o]+d[o]+a)/ba|0,c[o]%=ba;for(a&&(c.unshift(a),++n),l=c.length;c[--l]==0;)c.pop();return r.d=c,r.e=n,Tr?gr(r,m):r}function to(t,r,a){if(t!==~~t||t<r||t>a)throw Error(kl+t)}function Hn(t){var r,a,s,n=t.length-1,o="",i=t[0];if(n>0){for(o+=i,r=1;r<n;r++)s=t[r]+"",a=Sr-s.length,a&&(o+=oi(a)),o+=s;i=t[r],s=i+"",a=Sr-s.length,a&&(o+=oi(a))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var _o=function(){function t(s,n){var o,i=0,l=s.length;for(s=s.slice();l--;)o=s[l]*n+i,s[l]=o%ba|0,i=o/ba|0;return i&&s.unshift(i),s}function r(s,n,o,i){var l,c;if(o!=i)c=o>i?1:-1;else for(l=c=0;l<o;l++)if(s[l]!=n[l]){c=s[l]>n[l]?1:-1;break}return c}function a(s,n,o){for(var i=0;o--;)s[o]-=i,i=s[o]<n[o]?1:0,s[o]=i*ba+s[o]-n[o];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,o,i){var l,c,d,u,m,x,h,b,p,f,v,g,y,N,_,w,S,C,k=s.constructor,F=s.s==n.s?1:-1,q=s.d,A=n.d;if(!s.s)return new k(s);if(!n.s)throw Error(on+"Division by zero");for(c=s.e-n.e,S=A.length,_=q.length,h=new k(F),b=h.d=[],d=0;A[d]==(q[d]||0);)++d;if(A[d]>(q[d]||0)&&--c,o==null?g=o=k.precision:i?g=o+(ra(s)-ra(n))+1:g=o,g<0)return new k(0);if(g=g/Sr+2|0,d=0,S==1)for(u=0,A=A[0],g++;(d<_||u)&&g--;d++)y=u*ba+(q[d]||0),b[d]=y/A|0,u=y%A|0;else{for(u=ba/(A[0]+1)|0,u>1&&(A=t(A,u),q=t(q,u),S=A.length,_=q.length),N=S,p=q.slice(0,S),f=p.length;f<S;)p[f++]=0;C=A.slice(),C.unshift(0),w=A[0],A[1]>=ba/2&&++w;do u=0,l=r(A,p,S,f),l<0?(v=p[0],S!=f&&(v=v*ba+(p[1]||0)),u=v/w|0,u>1?(u>=ba&&(u=ba-1),m=t(A,u),x=m.length,f=p.length,l=r(m,p,x,f),l==1&&(u--,a(m,S<x?C:A,x))):(u==0&&(l=u=1),m=A.slice()),x=m.length,x<f&&m.unshift(0),a(p,m,f),l==-1&&(f=p.length,l=r(A,p,S,f),l<1&&(u++,a(p,S<f?C:A,f))),f=p.length):l===0&&(u++,p=[0]),b[d++]=u,l&&p[0]?p[f++]=q[N]||0:(p=[q[N]],f=1);while((N++<_||p[0]!==void 0)&&g--)}return b[0]||b.shift(),h.e=c,gr(h,i?o+ra(h)+1:o)}}();function jO(t,r){var a,s,n,o,i,l,c=0,d=0,u=t.constructor,m=u.precision;if(ra(t)>16)throw Error(MN+ra(t));if(!t.s)return new u(Os);for(Tr=!1,l=m,i=new u(.03125);t.abs().gte(.1);)t=t.times(i),d+=5;for(s=Math.log(ol(2,d))/Math.LN10*2+5|0,l+=s,a=n=o=new u(Os),u.precision=l;;){if(n=gr(n.times(t),l),a=a.times(++c),i=o.plus(_o(n,a,l)),Hn(i.d).slice(0,l)===Hn(o.d).slice(0,l)){for(;d--;)o=gr(o.times(o),l);return u.precision=m,r==null?(Tr=!0,gr(o,m)):o}o=i}}function ra(t){for(var r=t.e*Sr,a=t.d[0];a>=10;a/=10)r++;return r}function gv(t,r,a){if(r>t.LN10.sd())throw Tr=!0,a&&(t.precision=a),Error(on+"LN10 precision limit exceeded");return gr(new t(t.LN10),r)}function oi(t){for(var r="";t--;)r+="0";return r}function ux(t,r){var a,s,n,o,i,l,c,d,u,m=1,x=10,h=t,b=h.d,p=h.constructor,f=p.precision;if(h.s<1)throw Error(on+(h.s?"NaN":"-Infinity"));if(h.eq(Os))return new p(0);if(r==null?(Tr=!1,d=f):d=r,h.eq(10))return r==null&&(Tr=!0),gv(p,d);if(d+=x,p.precision=d,a=Hn(b),s=a.charAt(0),o=ra(h),Math.abs(o)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)h=h.times(t),a=Hn(h.d),s=a.charAt(0),m++;o=ra(h),s>1?(h=new p("0."+a),o++):h=new p(s+"."+a.slice(1))}else return c=gv(p,d+2,f).times(o+""),h=ux(new p(s+"."+a.slice(1)),d-x).plus(c),p.precision=f,r==null?(Tr=!0,gr(h,f)):h;for(l=i=h=_o(h.minus(Os),h.plus(Os),d),u=gr(h.times(h),d),n=3;;){if(i=gr(i.times(u),d),c=l.plus(_o(i,new p(n),d)),Hn(c.d).slice(0,d)===Hn(l.d).slice(0,d))return l=l.times(2),o!==0&&(l=l.plus(gv(p,d+2,f).times(o+""))),l=_o(l,new p(m),d),p.precision=f,r==null?(Tr=!0,gr(l,f)):l;l=c,n+=2}}function KS(t,r){var a,s,n;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(a<0&&(a=s),a+=+r.slice(s+1),r=r.substring(0,s)):a<0&&(a=r.length),s=0;r.charCodeAt(s)===48;)++s;for(n=r.length;r.charCodeAt(n-1)===48;)--n;if(r=r.slice(s,n),r){if(n-=s,a=a-s-1,t.e=bu(a/Sr),t.d=[],s=(a+1)%Sr,a<0&&(s+=Sr),s<n){for(s&&t.d.push(+r.slice(0,s)),n-=Sr;s<n;)t.d.push(+r.slice(s,s+=Sr));r=r.slice(s),s=Sr-r.length}else s-=n;for(;s--;)r+="0";if(t.d.push(+r),Tr&&(t.e>Gh||t.e<-Gh))throw Error(MN+a)}else t.s=0,t.e=0,t.d=[0];return t}function gr(t,r,a){var s,n,o,i,l,c,d,u,m=t.d;for(i=1,o=m[0];o>=10;o/=10)i++;if(s=r-i,s<0)s+=Sr,n=r,d=m[u=0];else{if(u=Math.ceil((s+1)/Sr),o=m.length,u>=o)return t;for(d=o=m[u],i=1;o>=10;o/=10)i++;s%=Sr,n=s-Sr+i}if(a!==void 0&&(o=ol(10,i-n-1),l=d/o%10|0,c=r<0||m[u+1]!==void 0||d%o,c=a<4?(l||c)&&(a==0||a==(t.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?n>0?d/ol(10,i-n):0:m[u-1])%10&1||a==(t.s<0?8:7))),r<1||!m[0])return c?(o=ra(t),m.length=1,r=r-o-1,m[0]=ol(10,(Sr-r%Sr)%Sr),t.e=bu(-r/Sr)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(s==0?(m.length=u,o=1,u--):(m.length=u+1,o=ol(10,Sr-s),m[u]=n>0?(d/ol(10,i-n)%ol(10,n)|0)*o:0),c)for(;;)if(u==0){(m[0]+=o)==ba&&(m[0]=1,++t.e);break}else{if(m[u]+=o,m[u]!=ba)break;m[u--]=0,o=1}for(s=m.length;m[--s]===0;)m.pop();if(Tr&&(t.e>Gh||t.e<-Gh))throw Error(MN+ra(t));return t}function NO(t,r){var a,s,n,o,i,l,c,d,u,m,x=t.constructor,h=x.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new x(t),Tr?gr(r,h):r;if(c=t.d,m=r.d,s=r.e,d=t.e,c=c.slice(),i=d-s,i){for(u=i<0,u?(a=c,i=-i,l=m.length):(a=m,s=d,l=c.length),n=Math.max(Math.ceil(h/Sr),l)+2,i>n&&(i=n,a.length=1),a.reverse(),n=i;n--;)a.push(0);a.reverse()}else{for(n=c.length,l=m.length,u=n<l,u&&(l=n),n=0;n<l;n++)if(c[n]!=m[n]){u=c[n]<m[n];break}i=0}for(u&&(a=c,c=m,m=a,r.s=-r.s),l=c.length,n=m.length-l;n>0;--n)c[l++]=0;for(n=m.length;n>i;){if(c[--n]<m[n]){for(o=n;o&&c[--o]===0;)c[o]=ba-1;--c[o],c[n]+=ba}c[n]-=m[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(r.d=c,r.e=s,Tr?gr(r,h):r):new x(0)}function Gl(t,r,a){var s,n=ra(t),o=Hn(t.d),i=o.length;return r?(a&&(s=a-i)>0?o=o.charAt(0)+"."+o.slice(1)+oi(s):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n<0?"e":"e+")+n):n<0?(o="0."+oi(-n-1)+o,a&&(s=a-i)>0&&(o+=oi(s))):n>=i?(o+=oi(n+1-i),a&&(s=a-n-1)>0&&(o=o+"."+oi(s))):((s=n+1)<i&&(o=o.slice(0,s)+"."+o.slice(s)),a&&(s=a-i)>0&&(n+1===i&&(o+="."),o+=oi(s))),t.s<0?"-"+o:o}function GS(t,r){if(t.length>r)return t.length=r,!0}function wO(t){var r,a,s;function n(o){var i=this;if(!(i instanceof n))return new n(o);if(i.constructor=n,o instanceof n){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(kl+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return KS(i,o.toString())}else if(typeof o!="string")throw Error(kl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,bne.test(o))KS(i,o);else throw Error(kl+o)}if(n.prototype=jt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=wO,n.config=n.set=vne,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(a=s[r++])||(t[a]=this[a]);return n.config(t),n}function vne(t){if(!t||typeof t!="object")throw Error(on+"Object expected");var r,a,s,n=["precision",1,gu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<n.length;r+=3)if((s=t[a=n[r]])!==void 0)if(bu(s)===s&&s>=n[r+1]&&s<=n[r+2])this[a]=s;else throw Error(kl+a+": "+s);if((s=t[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(kl+a+": "+s);return this}var IN=wO(gne);Os=new IN(1);const pr=IN;function yne(t){return _ne(t)||wne(t)||Nne(t)||jne()}function jne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nne(t,r){if(t){if(typeof t=="string")return Pj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pj(t,r)}}function wne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _ne(t){if(Array.isArray(t))return Pj(t)}function Pj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var Sne=function(r){return r},_O={},SO=function(r){return r===_O},XS=function(r){return function a(){return arguments.length===0||arguments.length===1&&SO(arguments.length<=0?void 0:arguments[0])?a:r.apply(void 0,arguments)}},Cne=function t(r,a){return r===1?a:XS(function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];var i=n.filter(function(l){return l!==_O}).length;return i>=r?a.apply(void 0,n):t(r-i,XS(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=n.map(function(m){return SO(m)?c.shift():m});return a.apply(void 0,yne(u).concat(c))}))})},Gg=function(r){return Cne(r.length,r)},Tj=function(r,a){for(var s=[],n=r;n<a;++n)s[n-r]=n;return s},kne=Gg(function(t,r){return Array.isArray(r)?r.map(t):Object.keys(r).map(function(a){return r[a]}).map(t)}),Ene=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];if(!a.length)return Sne;var n=a.reverse(),o=n[0],i=n.slice(1);return function(){return i.reduce(function(l,c){return c(l)},o.apply(void 0,arguments))}},Oj=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},CO=function(r){var a=null,s=null;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a&&o.every(function(l,c){return l===a[c]})||(a=o,s=r.apply(void 0,o)),s}};function Ane(t){var r;return t===0?r=1:r=Math.floor(new pr(t).abs().log(10).toNumber())+1,r}function Pne(t,r,a){for(var s=new pr(t),n=0,o=[];s.lt(r)&&n<1e5;)o.push(s.toNumber()),s=s.add(a),n++;return o}var Tne=Gg(function(t,r,a){var s=+t,n=+r;return s+a*(n-s)}),One=Gg(function(t,r,a){var s=r-+t;return s=s||1/0,(a-t)/s}),Fne=Gg(function(t,r,a){var s=r-+t;return s=s||1/0,Math.max(0,Math.min(1,(a-t)/s))});const Xg={rangeStep:Pne,getDigitCount:Ane,interpolateNumber:Tne,uninterpolateNumber:One,uninterpolateTruncation:Fne};function Fj(t){return Dne(t)||$ne(t)||kO(t)||Rne()}function Rne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Dne(t){if(Array.isArray(t))return Rj(t)}function mx(t,r){return Lne(t)||Ine(t,r)||kO(t,r)||Mne()}function Mne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kO(t,r){if(t){if(typeof t=="string")return Rj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Rj(t,r)}}function Rj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Ine(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],s=!0,n=!1,o=void 0;try{for(var i=t[Symbol.iterator](),l;!(s=(l=i.next()).done)&&(a.push(l.value),!(r&&a.length===r));s=!0);}catch(c){n=!0,o=c}finally{try{!s&&i.return!=null&&i.return()}finally{if(n)throw o}}return a}}function Lne(t){if(Array.isArray(t))return t}function EO(t){var r=mx(t,2),a=r[0],s=r[1],n=a,o=s;return a>s&&(n=s,o=a),[n,o]}function AO(t,r,a){if(t.lte(0))return new pr(0);var s=Xg.getDigitCount(t.toNumber()),n=new pr(10).pow(s),o=t.div(n),i=s!==1?.05:.1,l=new pr(Math.ceil(o.div(i).toNumber())).add(a).mul(i),c=l.mul(n);return r?c:new pr(Math.ceil(c))}function Bne(t,r,a){var s=1,n=new pr(t);if(!n.isint()&&a){var o=Math.abs(t);o<1?(s=new pr(10).pow(Xg.getDigitCount(t)-1),n=new pr(Math.floor(n.div(s).toNumber())).mul(s)):o>1&&(n=new pr(Math.floor(t)))}else t===0?n=new pr(Math.floor((r-1)/2)):a||(n=new pr(Math.floor(t)));var i=Math.floor((r-1)/2),l=Ene(kne(function(c){return n.add(new pr(c-i).mul(s)).toNumber()}),Tj);return l(0,r)}function PO(t,r,a,s){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new pr(0),tickMin:new pr(0),tickMax:new pr(0)};var o=AO(new pr(r).sub(t).div(a-1),s,n),i;t<=0&&r>=0?i=new pr(0):(i=new pr(t).add(r).div(2),i=i.sub(new pr(i).mod(o)));var l=Math.ceil(i.sub(t).div(o).toNumber()),c=Math.ceil(new pr(r).sub(i).div(o).toNumber()),d=l+c+1;return d>a?PO(t,r,a,s,n+1):(d<a&&(c=r>0?c+(a-d):c,l=r>0?l:l+(a-d)),{step:o,tickMin:i.sub(new pr(l).mul(o)),tickMax:i.add(new pr(c).mul(o))})}function zne(t){var r=mx(t,2),a=r[0],s=r[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),l=EO([a,s]),c=mx(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(Fj(Tj(0,n-1).map(function(){return 1/0}))):[].concat(Fj(Tj(0,n-1).map(function(){return-1/0})),[u]);return a>s?Oj(m):m}if(d===u)return Bne(d,n,o);var x=PO(d,u,i,o),h=x.step,b=x.tickMin,p=x.tickMax,f=Xg.rangeStep(b,p.add(new pr(.1).mul(h)),h);return a>s?Oj(f):f}function qne(t,r){var a=mx(t,2),s=a[0],n=a[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=EO([s,n]),l=mx(i,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,n];if(c===d)return[c];var u=Math.max(r,2),m=AO(new pr(d).sub(c).div(u-1),o,0),x=[].concat(Fj(Xg.rangeStep(new pr(c),new pr(d).sub(new pr(.99).mul(m)),m)),[d]);return s>n?Oj(x):x}var Vne=CO(zne),Une=CO(qne),Wne="Invariant failed";function Xl(t,r){throw new Error(Wne)}var Hne=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rd(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Xh.apply(this,arguments)}function Kne(t,r){return Qne(t)||Yne(t,r)||Xne(t,r)||Gne()}function Gne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xne(t,r){if(t){if(typeof t=="string")return YS(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return YS(t,r)}}function YS(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Yne(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Qne(t){if(Array.isArray(t))return t}function Jne(t,r){if(t==null)return{};var a=Zne(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Zne(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function eoe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function toe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,FO(s.key),s)}}function roe(t,r,a){return r&&toe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aoe(t,r,a){return r=Yh(r),soe(t,TO()?Reflect.construct(r,a||[],Yh(t).constructor):r.apply(t,a))}function soe(t,r){if(r&&(Rd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return noe(t)}function noe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TO=function(){return!!t})()}function Yh(t){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Yh(t)}function ooe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&$j(t,r)}function $j(t,r){return $j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},$j(t,r)}function OO(t,r,a){return r=FO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function FO(t){var r=ioe(t,"string");return Rd(r)=="symbol"?r:r+""}function ioe(t,r){if(Rd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Rd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var o0=function(t){function r(){return eoe(this,r),aoe(this,r,arguments)}return ooe(r,t),roe(r,[{key:"render",value:function(){var s=this.props,n=s.offset,o=s.layout,i=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,m=s.yAxis,x=Jne(s,Hne),h=St(x,!1);this.props.direction==="x"&&u.type!=="number"&&Xl();var b=c.map(function(p){var f=d(p,l),v=f.x,g=f.y,y=f.value,N=f.errorVal;if(!N)return null;var _=[],w,S;if(Array.isArray(N)){var C=Kne(N,2);w=C[0],S=C[1]}else w=S=N;if(o==="vertical"){var k=u.scale,F=g+n,q=F+i,A=F-i,T=k(y-w),U=k(y+S);_.push({x1:U,y1:q,x2:U,y2:A}),_.push({x1:T,y1:F,x2:U,y2:F}),_.push({x1:T,y1:q,x2:T,y2:A})}else if(o==="horizontal"){var K=m.scale,I=v+n,Y=I-i,D=I+i,W=K(y-w),R=K(y+S);_.push({x1:Y,y1:R,x2:D,y2:R}),_.push({x1:I,y1:W,x2:I,y2:R}),_.push({x1:Y,y1:W,x2:D,y2:W})}return pe.createElement(Ut,Xh({className:"recharts-errorBar",key:"bar-".concat(_.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},h),_.map(function(B){return pe.createElement("line",Xh({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return pe.createElement(Ut,{className:"recharts-errorBars"},b)}}])}(pe.Component);OO(o0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});OO(o0,"displayName","ErrorBar");function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xx(t)}function QS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Qi(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QS(Object(a),!0).forEach(function(s){loe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function loe(t,r,a){return r=coe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function coe(t){var r=doe(t,"string");return xx(r)=="symbol"?r:r+""}function doe(t,r){if(xx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var RO=function(r){var a=r.children,s=r.formattedGraphicalItems,n=r.legendWidth,o=r.legendContent,i=Es(a,Ar);if(!i)return null;var l=Ar.defaultProps,c=l!==void 0?Qi(Qi({},l),i.props):{},d;return i.props&&i.props.payload?d=i.props&&i.props.payload:o==="children"?d=(s||[]).reduce(function(u,m){var x=m.item,h=m.props,b=h.sectors||h.data||[];return u.concat(b.map(function(p){return{type:i.props.iconType||x.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(s||[]).map(function(u){var m=u.item,x=m.type.defaultProps,h=x!==void 0?Qi(Qi({},x),m.props):{},b=h.dataKey,p=h.name,f=h.legendType,v=h.hide;return{inactive:v,dataKey:b,type:c.iconType||f||"square",color:LN(m),value:p||b,payload:h}}),Qi(Qi(Qi({},c),Ar.getWithHeight(i,n)),{},{payload:d,item:i})};function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},px(t)}function JS(t){return poe(t)||xoe(t)||moe(t)||uoe()}function uoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(t,r){if(t){if(typeof t=="string")return Dj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dj(t,r)}}function xoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function poe(t){if(Array.isArray(t))return Dj(t)}function Dj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function ZS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Lr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ZS(Object(a),!0).forEach(function(s){od(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function od(t,r,a){return r=hoe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function hoe(t){var r=foe(t,"string");return px(r)=="symbol"?r:r+""}function foe(t,r){if(px(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(px(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Kr(t,r,a){return Rt(t)||Rt(r)?a:ha(r)?Ds(t,r,a):Et(r)?r(t):a}function hm(t,r,a,s){var n=xne(t,function(l){return Kr(l,r)});if(a==="number"){var o=n.filter(function(l){return rt(l)||parseFloat(l)});return o.length?[Kg(o),hi(o)]:[1/0,-1/0]}var i=s?n.filter(function(l){return!Rt(l)}):n;return i.map(function(l){return ha(l)||l instanceof Date?l:""})}var goe=function(r){var a,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,l=(a=s==null?void 0:s.length)!==null&&a!==void 0?a:0;if(l<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,d=0;d<l;d++){var u=d>0?n[d-1].coordinate:n[l-1].coordinate,m=n[d].coordinate,x=d>=l-1?n[0].coordinate:n[d+1].coordinate,h=void 0;if(Ja(m-u)!==Ja(x-m)){var b=[];if(Ja(x-m)===Ja(c[1]-c[0])){h=x;var p=m+c[1]-c[0];b[0]=Math.min(p,(p+u)/2),b[1]=Math.max(p,(p+u)/2)}else{h=u;var f=x+c[1]-c[0];b[0]=Math.min(m,(f+m)/2),b[1]=Math.max(m,(f+m)/2)}var v=[Math.min(m,(h+m)/2),Math.max(m,(h+m)/2)];if(r>v[0]&&r<=v[1]||r>=b[0]&&r<=b[1]){i=n[d].index;break}}else{var g=Math.min(u,x),y=Math.max(u,x);if(r>(g+m)/2&&r<=(y+m)/2){i=n[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&r<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&r>(s[N].coordinate+s[N-1].coordinate)/2&&r<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&r>(s[N].coordinate+s[N-1].coordinate)/2){i=s[N].index;break}return i},LN=function(r){var a,s=r,n=s.type.displayName,o=(a=r.type)!==null&&a!==void 0&&a.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,i=o.stroke,l=o.fill,c;switch(n){case"Line":c=i;break;case"Area":case"Radar":c=i&&i!=="none"?i:l;break;default:c=l;break}return c},boe=function(r){var a=r.barSize,s=r.totalSize,n=r.stackGroups,o=n===void 0?{}:n;if(!o)return{};for(var i={},l=Object.keys(o),c=0,d=l.length;c<d;c++)for(var u=o[l[c]].stackGroups,m=Object.keys(u),x=0,h=m.length;x<h;x++){var b=u[m[x]],p=b.items,f=b.cateAxisId,v=p.filter(function(S){return wo(S.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,y=g!==void 0?Lr(Lr({},g),v[0].props):v[0].props,N=y.barSize,_=y[f];i[_]||(i[_]=[]);var w=Rt(N)?a:N;i[_].push({item:v[0],stackList:v.slice(1),barSize:Rt(w)?void 0:Za(w,s,0)})}}return i},voe=function(r){var a=r.barGap,s=r.barCategoryGap,n=r.bandSize,o=r.sizeList,i=o===void 0?[]:o,l=r.maxBarSize,c=i.length;if(c<1)return null;var d=Za(a,n,0,!0),u,m=[];if(i[0].barSize===+i[0].barSize){var x=!1,h=n/c,b=i.reduce(function(N,_){return N+_.barSize||0},0);b+=(c-1)*d,b>=n&&(b-=(c-1)*d,d=0),b>=n&&h>0&&(x=!0,h*=.9,b=c*h);var p=(n-b)/2>>0,f={offset:p-d,size:0};u=i.reduce(function(N,_){var w={item:_.item,position:{offset:f.offset+f.size+d,size:x?h:_.barSize}},S=[].concat(JS(N),[w]);return f=S[S.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){S.push({item:C,position:f})}),S},m)}else{var v=Za(s,n,0,!0);n-2*v-(c-1)*d<=0&&(d=0);var g=(n-2*v-(c-1)*d)/c;g>1&&(g>>=0);var y=l===+l?Math.min(g,l):g;u=i.reduce(function(N,_,w){var S=[].concat(JS(N),[{item:_.item,position:{offset:v+(g+d)*w+(g-y)/2,size:y}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},m)}return u},yoe=function(r,a,s,n){var o=s.children,i=s.width,l=s.margin,c=i-(l.left||0)-(l.right||0),d=RO({children:o,legendWidth:c});if(d){var u=n||{},m=u.width,x=u.height,h=d.align,b=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&b==="middle")&&h!=="center"&&rt(r[h]))return Lr(Lr({},r),{},od({},h,r[h]+(m||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&b!=="middle"&&rt(r[b]))return Lr(Lr({},r),{},od({},b,r[b]+(x||0)))}return r},joe=function(r,a,s){return Rt(a)?!0:r==="horizontal"?a==="yAxis":r==="vertical"||s==="x"?a==="xAxis":s==="y"?a==="yAxis":!0},$O=function(r,a,s,n,o){var i=a.props.children,l=Ms(i,o0).filter(function(d){return joe(n,o,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return r.reduce(function(d,u){var m=Kr(u,s);if(Rt(m))return d;var x=Array.isArray(m)?[Kg(m),hi(m)]:[m,m],h=c.reduce(function(b,p){var f=Kr(u,p,0),v=x[0]-Math.abs(Array.isArray(f)?f[0]:f),g=x[1]+Math.abs(Array.isArray(f)?f[1]:f);return[Math.min(v,b[0]),Math.max(g,b[1])]},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0])}return null},Noe=function(r,a,s,n,o){var i=a.map(function(l){return $O(r,l,s,o,n)}).filter(function(l){return!Rt(l)});return i&&i.length?i.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},DO=function(r,a,s,n,o){var i=a.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&$O(r,c,d,n)||hm(r,d,s,o)});if(s==="number")return i.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return i.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},MO=function(r,a){return r==="horizontal"&&a==="xAxis"||r==="vertical"&&a==="yAxis"||r==="centric"&&a==="angleAxis"||r==="radial"&&a==="radiusAxis"},IO=function(r,a,s,n){if(n)return r.map(function(c){return c.coordinate});var o,i,l=r.map(function(c){return c.coordinate===a&&(o=!0),c.coordinate===s&&(i=!0),c.coordinate});return o||l.push(a),i||l.push(s),l},yo=function(r,a,s){if(!r)return null;var n=r.scale,o=r.duplicateDomain,i=r.type,l=r.range,c=r.realScaleType==="scaleBand"?n.bandwidth()/2:2,d=(a||s)&&i==="category"&&n.bandwidth?n.bandwidth()/c:0;if(d=r.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ja(l[0]-l[1])*2*d:d,a&&(r.ticks||r.niceTicks)){var u=(r.ticks||r.niceTicks).map(function(m){var x=o?o.indexOf(m):m;return{coordinate:n(x)+d,value:m,offset:d}});return u.filter(function(m){return!mu(m.coordinate)})}return r.isCategorical&&r.categoricalDomain?r.categoricalDomain.map(function(m,x){return{coordinate:n(m)+d,value:m,index:x,offset:d}}):n.ticks&&!s?n.ticks(r.tickCount).map(function(m){return{coordinate:n(m)+d,value:m,offset:d}}):n.domain().map(function(m,x){return{coordinate:n(m)+d,value:o?o[m]:m,index:x,offset:d}})},bv=new WeakMap,ep=function(r,a){if(typeof a!="function")return r;bv.has(r)||bv.set(r,new WeakMap);var s=bv.get(r);if(s.has(a))return s.get(a);var n=function(){r.apply(void 0,arguments),a.apply(void 0,arguments)};return s.set(a,n),n},LO=function(r,a,s){var n=r.scale,o=r.type,i=r.layout,l=r.axisType;if(n==="auto")return i==="radial"&&l==="radiusAxis"?{scale:ox(),realScaleType:"band"}:i==="radial"&&l==="angleAxis"?{scale:Uh(),realScaleType:"linear"}:o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!s)?{scale:pm(),realScaleType:"point"}:o==="category"?{scale:ox(),realScaleType:"band"}:{scale:Uh(),realScaleType:"linear"};if(Ul(n)){var c="scale".concat(Fg(n));return{scale:(HS[c]||pm)(),realScaleType:HS[c]?c:"point"}}return Et(n)?{scale:n}:{scale:pm(),realScaleType:"point"}},eC=1e-4,BO=function(r){var a=r.domain();if(!(!a||a.length<=2)){var s=a.length,n=r.range(),o=Math.min(n[0],n[1])-eC,i=Math.max(n[0],n[1])+eC,l=r(a[0]),c=r(a[s-1]);(l<o||l>i||c<o||c>i)&&r.domain([a[0],a[s-1]])}},woe=function(r,a){if(!r)return null;for(var s=0,n=r.length;s<n;s++)if(r[s].item===a)return r[s].position;return null},_oe=function(r,a){if(!a||a.length!==2||!rt(a[0])||!rt(a[1]))return r;var s=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),o=[r[0],r[1]];return(!rt(r[0])||r[0]<s)&&(o[0]=s),(!rt(r[1])||r[1]>n)&&(o[1]=n),o[0]>n&&(o[0]=n),o[1]<s&&(o[1]=s),o},Soe=function(r){var a=r.length;if(!(a<=0))for(var s=0,n=r[0].length;s<n;++s)for(var o=0,i=0,l=0;l<a;++l){var c=mu(r[l][s][1])?r[l][s][0]:r[l][s][1];c>=0?(r[l][s][0]=o,r[l][s][1]=o+c,o=r[l][s][1]):(r[l][s][0]=i,r[l][s][1]=i+c,i=r[l][s][1])}},Coe=function(r){var a=r.length;if(!(a<=0))for(var s=0,n=r[0].length;s<n;++s)for(var o=0,i=0;i<a;++i){var l=mu(r[i][s][1])?r[i][s][0]:r[i][s][1];l>=0?(r[i][s][0]=o,r[i][s][1]=o+l,o=r[i][s][1]):(r[i][s][0]=0,r[i][s][1]=0)}},koe={sign:Soe,expand:HH,none:Cd,silhouette:KH,wiggle:GH,positive:Coe},Eoe=function(r,a,s){var n=a.map(function(l){return l.props.dataKey}),o=koe[s],i=WH().keys(n).value(function(l,c){return+Kr(l,c,0)}).order(ij).offset(o);return i(r)},Aoe=function(r,a,s,n,o,i){if(!r)return null;var l=i?a.reverse():a,c={},d=l.reduce(function(m,x){var h,b=(h=x.type)!==null&&h!==void 0&&h.defaultProps?Lr(Lr({},x.type.defaultProps),x.props):x.props,p=b.stackId,f=b.hide;if(f)return m;var v=b[s],g=m[v]||{hasStack:!1,stackGroups:{}};if(ha(p)){var y=g.stackGroups[p]||{numericAxisId:s,cateAxisId:n,items:[]};y.items.push(x),g.hasStack=!0,g.stackGroups[p]=y}else g.stackGroups[oc("_stackId_")]={numericAxisId:s,cateAxisId:n,items:[x]};return Lr(Lr({},m),{},od({},v,g))},c),u={};return Object.keys(d).reduce(function(m,x){var h=d[x];if(h.hasStack){var b={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,f){var v=h.stackGroups[f];return Lr(Lr({},p),{},od({},f,{numericAxisId:s,cateAxisId:n,items:v.items,stackedData:Eoe(r,v.items,o)}))},b)}return Lr(Lr({},m),{},od({},x,h))},u)},zO=function(r,a){var s=a.realScaleType,n=a.type,o=a.tickCount,i=a.originalDomain,l=a.allowDecimals,c=s||a.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&n==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var d=r.domain();if(!d.length)return null;var u=Vne(d,o,l);return r.domain([Kg(u),hi(u)]),{niceTicks:u}}if(o&&n==="number"){var m=r.domain(),x=Une(m,o,l);return{niceTicks:x}}return null};function Qh(t){var r=t.axis,a=t.ticks,s=t.bandSize,n=t.entry,o=t.index,i=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Rt(n[r.dataKey])){var l=Nh(a,"value",n[r.dataKey]);if(l)return l.coordinate+s/2}return a[o]?a[o].coordinate+s/2:null}var c=Kr(n,Rt(i)?r.dataKey:i);return Rt(c)?null:r.scale(c)}var tC=function(r){var a=r.axis,s=r.ticks,n=r.offset,o=r.bandSize,i=r.entry,l=r.index;if(a.type==="category")return s[l]?s[l].coordinate+n:null;var c=Kr(i,a.dataKey,a.domain[l]);return Rt(c)?null:a.scale(c)-o/2+n},Poe=function(r){var a=r.numericAxis,s=a.scale.domain();if(a.type==="number"){var n=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return n<=0&&o>=0?0:o<0?o:n}return s[0]},Toe=function(r,a){var s,n=(s=r.type)!==null&&s!==void 0&&s.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,o=n.stackId;if(ha(o)){var i=a[o];if(i){var l=i.items.indexOf(r);return l>=0?i.stackedData[l]:null}}return null},Ooe=function(r){return r.reduce(function(a,s){return[Kg(s.concat([a[0]]).filter(rt)),hi(s.concat([a[1]]).filter(rt))]},[1/0,-1/0])},qO=function(r,a,s){return Object.keys(r).reduce(function(n,o){var i=r[o],l=i.stackedData,c=l.reduce(function(d,u){var m=Ooe(u.slice(a,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},rC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mj=function(r,a,s){if(Et(r))return r(a,s);if(!Array.isArray(r))return a;var n=[];if(rt(r[0]))n[0]=s?r[0]:Math.min(r[0],a[0]);else if(rC.test(r[0])){var o=+rC.exec(r[0])[1];n[0]=a[0]-o}else Et(r[0])?n[0]=r[0](a[0]):n[0]=a[0];if(rt(r[1]))n[1]=s?r[1]:Math.max(r[1],a[1]);else if(aC.test(r[1])){var i=+aC.exec(r[1])[1];n[1]=a[1]+i}else Et(r[1])?n[1]=r[1](a[1]):n[1]=a[1];return n},Jh=function(r,a,s){if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!s||n>0)return n}if(r&&a&&a.length>=2){for(var o=xN(a,function(m){return m.coordinate}),i=1/0,l=1,c=o.length;l<c;l++){var d=o[l],u=o[l-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return s?void 0:0},sC=function(r,a,s){return!r||!r.length||Kl(r,Ds(s,"type.defaultProps.domain"))?a:r},VO=function(r,a){var s=r.type.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,n=s.dataKey,o=s.name,i=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Lr(Lr({},St(r,!1)),{},{dataKey:n,unit:i,formatter:l,name:o||n,color:LN(r),value:Kr(a,n),type:c,payload:a,chartType:d,hide:u})};function hx(t){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hx(t)}function nC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function xo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nC(Object(a),!0).forEach(function(s){UO(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function UO(t,r,a){return r=Foe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Foe(t){var r=Roe(t,"string");return hx(r)=="symbol"?r:r+""}function Roe(t,r){if(hx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(hx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function $oe(t,r){return Loe(t)||Ioe(t,r)||Moe(t,r)||Doe()}function Doe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Moe(t,r){if(t){if(typeof t=="string")return oC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oC(t,r)}}function oC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Ioe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Loe(t){if(Array.isArray(t))return t}var Zh=Math.PI/180,Boe=function(r){return r*180/Math.PI},Nr=function(r,a,s,n){return{x:r+Math.cos(-Zh*n)*s,y:a+Math.sin(-Zh*n)*s}},WO=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},zoe=function(r,a,s,n,o){var i=r.width,l=r.height,c=r.startAngle,d=r.endAngle,u=Za(r.cx,i,i/2),m=Za(r.cy,l,l/2),x=WO(i,l,s),h=Za(r.innerRadius,x,0),b=Za(r.outerRadius,x,x*.8),p=Object.keys(a);return p.reduce(function(f,v){var g=a[v],y=g.domain,N=g.reversed,_;if(Rt(g.range))n==="angleAxis"?_=[c,d]:n==="radiusAxis"&&(_=[h,b]),N&&(_=[_[1],_[0]]);else{_=g.range;var w=_,S=$oe(w,2);c=S[0],d=S[1]}var C=LO(g,o),k=C.realScaleType,F=C.scale;F.domain(y).range(_),BO(F);var q=zO(F,xo(xo({},g),{},{realScaleType:k})),A=xo(xo(xo({},g),q),{},{range:_,radius:b,realScaleType:k,scale:F,cx:u,cy:m,innerRadius:h,outerRadius:b,startAngle:c,endAngle:d});return xo(xo({},f),{},UO({},v,A))},{})},qoe=function(r,a){var s=r.x,n=r.y,o=a.x,i=a.y;return Math.sqrt(Math.pow(s-o,2)+Math.pow(n-i,2))},Voe=function(r,a){var s=r.x,n=r.y,o=a.cx,i=a.cy,l=qoe({x:s,y:n},{x:o,y:i});if(l<=0)return{radius:l};var c=(s-o)/l,d=Math.acos(c);return n>i&&(d=2*Math.PI-d),{radius:l,angle:Boe(d),angleInRadian:d}},Uoe=function(r){var a=r.startAngle,s=r.endAngle,n=Math.floor(a/360),o=Math.floor(s/360),i=Math.min(n,o);return{startAngle:a-i*360,endAngle:s-i*360}},Woe=function(r,a){var s=a.startAngle,n=a.endAngle,o=Math.floor(s/360),i=Math.floor(n/360),l=Math.min(o,i);return r+l*360},iC=function(r,a){var s=r.x,n=r.y,o=Voe({x:s,y:n},a),i=o.radius,l=o.angle,c=a.innerRadius,d=a.outerRadius;if(i<c||i>d)return!1;if(i===0)return!0;var u=Uoe(a),m=u.startAngle,x=u.endAngle,h=l,b;if(m<=x){for(;h>x;)h-=360;for(;h<m;)h+=360;b=h>=m&&h<=x}else{for(;h>m;)h-=360;for(;h<x;)h+=360;b=h>=x&&h<=m}return b?xo(xo({},a),{},{radius:i,angle:Woe(h,a)}):null},HO=function(r){return!j.isValidElement(r)&&!Et(r)&&typeof r!="boolean"?r.className:""};function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fx(t)}var Hoe=["offset"];function Koe(t){return Qoe(t)||Yoe(t)||Xoe(t)||Goe()}function Goe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xoe(t,r){if(t){if(typeof t=="string")return Ij(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ij(t,r)}}function Yoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qoe(t){if(Array.isArray(t))return Ij(t)}function Ij(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Joe(t,r){if(t==null)return{};var a=Zoe(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Zoe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function lC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ca(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?lC(Object(a),!0).forEach(function(s){eie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function eie(t,r,a){return r=tie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function tie(t){var r=rie(t,"string");return fx(r)=="symbol"?r:r+""}function rie(t,r){if(fx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(fx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function gx(){return gx=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},gx.apply(this,arguments)}var aie=function(r){var a=r.value,s=r.formatter,n=Rt(r.children)?a:r.children;return Et(s)?s(n):n},sie=function(r,a){var s=Ja(a-r),n=Math.min(Math.abs(a-r),360);return s*n},nie=function(r,a,s){var n=r.position,o=r.viewBox,i=r.offset,l=r.className,c=o,d=c.cx,u=c.cy,m=c.innerRadius,x=c.outerRadius,h=c.startAngle,b=c.endAngle,p=c.clockWise,f=(m+x)/2,v=sie(h,b),g=v>=0?1:-1,y,N;n==="insideStart"?(y=h+g*i,N=p):n==="insideEnd"?(y=b-g*i,N=!p):n==="end"&&(y=b+g*i,N=p),N=v<=0?N:!N;var _=Nr(d,u,f,y),w=Nr(d,u,f,y+(N?1:-1)*359),S="M".concat(_.x,",").concat(_.y,`
    A`).concat(f,",").concat(f,",0,1,").concat(N?0:1,`,
    `).concat(w.x,",").concat(w.y),C=Rt(r.id)?oc("recharts-radial-line-"):r.id;return pe.createElement("text",gx({},s,{dominantBaseline:"central",className:It("recharts-radial-bar-label",l)}),pe.createElement("defs",null,pe.createElement("path",{id:C,d:S})),pe.createElement("textPath",{xlinkHref:"#".concat(C)},a))},oie=function(r){var a=r.viewBox,s=r.offset,n=r.position,o=a,i=o.cx,l=o.cy,c=o.innerRadius,d=o.outerRadius,u=o.startAngle,m=o.endAngle,x=(u+m)/2;if(n==="outside"){var h=Nr(i,l,d+s,x),b=h.x,p=h.y;return{x:b,y:p,textAnchor:b>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var f=(c+d)/2,v=Nr(i,l,f,x),g=v.x,y=v.y;return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},iie=function(r){var a=r.viewBox,s=r.parentViewBox,n=r.offset,o=r.position,i=a,l=i.x,c=i.y,d=i.width,u=i.height,m=u>=0?1:-1,x=m*n,h=m>0?"end":"start",b=m>0?"start":"end",p=d>=0?1:-1,f=p*n,v=p>0?"end":"start",g=p>0?"start":"end";if(o==="top"){var y={x:l+d/2,y:c-m*n,textAnchor:"middle",verticalAnchor:h};return ca(ca({},y),s?{height:Math.max(c-s.y,0),width:d}:{})}if(o==="bottom"){var N={x:l+d/2,y:c+u+x,textAnchor:"middle",verticalAnchor:b};return ca(ca({},N),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(o==="left"){var _={x:l-f,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return ca(ca({},_),s?{width:Math.max(_.x-s.x,0),height:u}:{})}if(o==="right"){var w={x:l+d+f,y:c+u/2,textAnchor:g,verticalAnchor:"middle"};return ca(ca({},w),s?{width:Math.max(s.x+s.width-w.x,0),height:u}:{})}var S=s?{width:d,height:u}:{};return o==="insideLeft"?ca({x:l+f,y:c+u/2,textAnchor:g,verticalAnchor:"middle"},S):o==="insideRight"?ca({x:l+d-f,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},S):o==="insideTop"?ca({x:l+d/2,y:c+x,textAnchor:"middle",verticalAnchor:b},S):o==="insideBottom"?ca({x:l+d/2,y:c+u-x,textAnchor:"middle",verticalAnchor:h},S):o==="insideTopLeft"?ca({x:l+f,y:c+x,textAnchor:g,verticalAnchor:b},S):o==="insideTopRight"?ca({x:l+d-f,y:c+x,textAnchor:v,verticalAnchor:b},S):o==="insideBottomLeft"?ca({x:l+f,y:c+u-x,textAnchor:g,verticalAnchor:h},S):o==="insideBottomRight"?ca({x:l+d-f,y:c+u-x,textAnchor:v,verticalAnchor:h},S):lu(o)&&(rt(o.x)||pl(o.x))&&(rt(o.y)||pl(o.y))?ca({x:l+Za(o.x,d),y:c+Za(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):ca({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},lie=function(r){return"cx"in r&&rt(r.cx)};function ja(t){var r=t.offset,a=r===void 0?5:r,s=Joe(t,Hoe),n=ca({offset:a},s),o=n.viewBox,i=n.position,l=n.value,c=n.children,d=n.content,u=n.className,m=u===void 0?"":u,x=n.textBreakAll;if(!o||Rt(l)&&Rt(c)&&!j.isValidElement(d)&&!Et(d))return null;if(j.isValidElement(d))return j.cloneElement(d,n);var h;if(Et(d)){if(h=j.createElement(d,n),j.isValidElement(h))return h}else h=aie(n);var b=lie(o),p=St(n,!0);if(b&&(i==="insideStart"||i==="insideEnd"||i==="end"))return nie(n,h,p);var f=b?oie(n):iie(n);return pe.createElement(Hl,gx({className:It("recharts-label",m)},p,f,{breakAll:x}),h)}ja.displayName="Label";var KO=function(r){var a=r.cx,s=r.cy,n=r.angle,o=r.startAngle,i=r.endAngle,l=r.r,c=r.radius,d=r.innerRadius,u=r.outerRadius,m=r.x,x=r.y,h=r.top,b=r.left,p=r.width,f=r.height,v=r.clockWise,g=r.labelViewBox;if(g)return g;if(rt(p)&&rt(f)){if(rt(m)&&rt(x))return{x:m,y:x,width:p,height:f};if(rt(h)&&rt(b))return{x:h,y:b,width:p,height:f}}return rt(m)&&rt(x)?{x:m,y:x,width:0,height:0}:rt(a)&&rt(s)?{cx:a,cy:s,startAngle:o||n||0,endAngle:i||n||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:v}:r.viewBox?r.viewBox:{}},cie=function(r,a){return r?r===!0?pe.createElement(ja,{key:"label-implicit",viewBox:a}):ha(r)?pe.createElement(ja,{key:"label-implicit",viewBox:a,value:r}):j.isValidElement(r)?r.type===ja?j.cloneElement(r,{key:"label-implicit",viewBox:a}):pe.createElement(ja,{key:"label-implicit",content:r,viewBox:a}):Et(r)?pe.createElement(ja,{key:"label-implicit",content:r,viewBox:a}):lu(r)?pe.createElement(ja,gx({viewBox:a},r,{key:"label-implicit"})):null:null},die=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&s&&!r.label)return null;var n=r.children,o=KO(r),i=Ms(n,ja).map(function(c,d){return j.cloneElement(c,{viewBox:a||o,key:"label-".concat(d)})});if(!s)return i;var l=cie(r.label,a||o);return[l].concat(Koe(i))};ja.parseViewBox=KO;ja.renderCallByParent=die;function uie(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var mie=uie;const xie=mr(mie);function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bx(t)}var pie=["valueAccessor"],hie=["data","dataKey","clockWise","id","textBreakAll"];function fie(t){return yie(t)||vie(t)||bie(t)||gie()}function gie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bie(t,r){if(t){if(typeof t=="string")return Lj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lj(t,r)}}function vie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yie(t){if(Array.isArray(t))return Lj(t)}function Lj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ef.apply(this,arguments)}function cC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function dC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?cC(Object(a),!0).forEach(function(s){jie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function jie(t,r,a){return r=Nie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Nie(t){var r=wie(t,"string");return bx(r)=="symbol"?r:r+""}function wie(t,r){if(bx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(bx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function uC(t,r){if(t==null)return{};var a=_ie(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function _ie(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var Sie=function(r){return Array.isArray(r.value)?xie(r.value):r.value};function Zn(t){var r=t.valueAccessor,a=r===void 0?Sie:r,s=uC(t,pie),n=s.data,o=s.dataKey,i=s.clockWise,l=s.id,c=s.textBreakAll,d=uC(s,hie);return!n||!n.length?null:pe.createElement(Ut,{className:"recharts-label-list"},n.map(function(u,m){var x=Rt(o)?a(u,m):Kr(u&&u.payload,o),h=Rt(l)?{}:{id:"".concat(l,"-").concat(m)};return pe.createElement(ja,ef({},St(u,!0),d,h,{parentViewBox:u.parentViewBox,value:x,textBreakAll:c,viewBox:ja.parseViewBox(Rt(i)?u:dC(dC({},u),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}Zn.displayName="LabelList";function Cie(t,r){return t?t===!0?pe.createElement(Zn,{key:"labelList-implicit",data:r}):pe.isValidElement(t)||Et(t)?pe.createElement(Zn,{key:"labelList-implicit",data:r,content:t}):lu(t)?pe.createElement(Zn,ef({data:r},t,{key:"labelList-implicit"})):null:null}function kie(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,n=Ms(s,Zn).map(function(i,l){return j.cloneElement(i,{data:r,key:"labelList-".concat(l)})});if(!a)return n;var o=Cie(t.label,r);return[o].concat(fie(n))}Zn.renderCallByParent=kie;function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vx(t)}function Bj(){return Bj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Bj.apply(this,arguments)}function mC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function xC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?mC(Object(a),!0).forEach(function(s){Eie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Eie(t,r,a){return r=Aie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Aie(t){var r=Pie(t,"string");return vx(r)=="symbol"?r:r+""}function Pie(t,r){if(vx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(vx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Tie=function(r,a){var s=Ja(a-r),n=Math.min(Math.abs(a-r),359.999);return s*n},tp=function(r){var a=r.cx,s=r.cy,n=r.radius,o=r.angle,i=r.sign,l=r.isExternal,c=r.cornerRadius,d=r.cornerIsExternal,u=c*(l?1:-1)+n,m=Math.asin(c/u)/Zh,x=d?o:o+i*m,h=Nr(a,s,u,x),b=Nr(a,s,n,x),p=d?o-i*m:o,f=Nr(a,s,u*Math.cos(m*Zh),p);return{center:h,circleTangency:b,lineTangency:f,theta:m}},GO=function(r){var a=r.cx,s=r.cy,n=r.innerRadius,o=r.outerRadius,i=r.startAngle,l=r.endAngle,c=Tie(i,l),d=i+c,u=Nr(a,s,o,i),m=Nr(a,s,o,d),x="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(n>0){var h=Nr(a,s,n,i),b=Nr(a,s,n,d);x+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else x+="L ".concat(a,",").concat(s," Z");return x},Oie=function(r){var a=r.cx,s=r.cy,n=r.innerRadius,o=r.outerRadius,i=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,u=r.endAngle,m=Ja(u-d),x=tp({cx:a,cy:s,radius:o,angle:d,sign:m,cornerRadius:i,cornerIsExternal:c}),h=x.circleTangency,b=x.lineTangency,p=x.theta,f=tp({cx:a,cy:s,radius:o,angle:u,sign:-m,cornerRadius:i,cornerIsExternal:c}),v=f.circleTangency,g=f.lineTangency,y=f.theta,N=c?Math.abs(d-u):Math.abs(d-u)-p-y;if(N<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):GO({cx:a,cy:s,innerRadius:n,outerRadius:o,startAngle:d,endAngle:u});var _="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var w=tp({cx:a,cy:s,radius:n,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),S=w.circleTangency,C=w.lineTangency,k=w.theta,F=tp({cx:a,cy:s,radius:n,angle:u,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),q=F.circleTangency,A=F.lineTangency,T=F.theta,U=c?Math.abs(d-u):Math.abs(d-u)-k-T;if(U<0&&i===0)return"".concat(_,"L").concat(a,",").concat(s,"Z");_+="L".concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(U>180),",").concat(+(m>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(a,",").concat(s,"Z");return _},Fie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XO=function(r){var a=xC(xC({},Fie),r),s=a.cx,n=a.cy,o=a.innerRadius,i=a.outerRadius,l=a.cornerRadius,c=a.forceCornerRadius,d=a.cornerIsExternal,u=a.startAngle,m=a.endAngle,x=a.className;if(i<o||u===m)return null;var h=It("recharts-sector",x),b=i-o,p=Za(l,b,0,!0),f;return p>0&&Math.abs(u-m)<360?f=Oie({cx:s,cy:n,innerRadius:o,outerRadius:i,cornerRadius:Math.min(p,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):f=GO({cx:s,cy:n,innerRadius:o,outerRadius:i,startAngle:u,endAngle:m}),pe.createElement("path",Bj({},St(a,!0),{className:h,d:f,role:"img"}))};function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},yx(t)}function zj(){return zj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},zj.apply(this,arguments)}function pC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function hC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?pC(Object(a),!0).forEach(function(s){Rie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Rie(t,r,a){return r=$ie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function $ie(t){var r=Die(t,"string");return yx(r)=="symbol"?r:r+""}function Die(t,r){if(yx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(yx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var fC={curveBasisClosed:RH,curveBasisOpen:$H,curveBasis:FH,curveBumpX:vH,curveBumpY:yH,curveLinearClosed:DH,curveLinear:$g,curveMonotoneX:MH,curveMonotoneY:IH,curveNatural:LH,curveStep:BH,curveStepAfter:qH,curveStepBefore:zH},rp=function(r){return r.x===+r.x&&r.y===+r.y},Vu=function(r){return r.x},Uu=function(r){return r.y},Mie=function(r,a){if(Et(r))return r;var s="curve".concat(Fg(r));return(s==="curveMonotone"||s==="curveBump")&&a?fC["".concat(s).concat(a==="vertical"?"Y":"X")]:fC[s]||$g},Iie=function(r){var a=r.type,s=a===void 0?"linear":a,n=r.points,o=n===void 0?[]:n,i=r.baseLine,l=r.layout,c=r.connectNulls,d=c===void 0?!1:c,u=Mie(s,l),m=d?o.filter(function(p){return rp(p)}):o,x;if(Array.isArray(i)){var h=d?i.filter(function(p){return rp(p)}):i,b=m.map(function(p,f){return hC(hC({},p),{},{base:h[f]})});return l==="vertical"?x=H0().y(Uu).x1(Vu).x0(function(p){return p.base.x}):x=H0().x(Vu).y1(Uu).y0(function(p){return p.base.y}),x.defined(rp).curve(u),x(b)}return l==="vertical"&&rt(i)?x=H0().y(Uu).x1(Vu).x0(i):rt(i)?x=H0().x(Vu).y1(Uu).y0(i):x=UP().x(Vu).y(Uu),x.defined(rp).curve(u),x(m)},El=function(r){var a=r.className,s=r.points,n=r.path,o=r.pathRef;if((!s||!s.length)&&!n)return null;var i=s&&s.length?Iie(r):n;return j.createElement("path",zj({},St(r,!1),wh(r),{className:It("recharts-curve",a),d:i,ref:o}))};const{getOwnPropertyNames:Lie,getOwnPropertySymbols:Bie}=Object,{hasOwnProperty:zie}=Object.prototype;function vv(t,r){return function(s,n,o){return t(s,n,o)&&r(s,n,o)}}function ap(t){return function(a,s,n){if(!a||!s||typeof a!="object"||typeof s!="object")return t(a,s,n);const{cache:o}=n,i=o.get(a),l=o.get(s);if(i&&l)return i===s&&l===a;o.set(a,s),o.set(s,a);const c=t(a,s,n);return o.delete(a),o.delete(s),c}}function qie(t){return t!=null?t[Symbol.toStringTag]:void 0}function gC(t){return Lie(t).concat(Bie(t))}const Vie=Object.hasOwn||((t,r)=>zie.call(t,r));function cc(t,r){return t===r||!t&&!r&&t!==t&&r!==r}const Uie="__v",Wie="__o",Hie="_owner",{getOwnPropertyDescriptor:bC,keys:vC}=Object;function Kie(t,r){return t.byteLength===r.byteLength&&tf(new Uint8Array(t),new Uint8Array(r))}function Gie(t,r,a){let s=t.length;if(r.length!==s)return!1;for(;s-- >0;)if(!a.equals(t[s],r[s],s,s,t,r,a))return!1;return!0}function Xie(t,r){return t.byteLength===r.byteLength&&tf(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}function Yie(t,r){return cc(t.getTime(),r.getTime())}function Qie(t,r){return t.name===r.name&&t.message===r.message&&t.cause===r.cause&&t.stack===r.stack}function Jie(t,r){return t===r}function yC(t,r,a){const s=t.size;if(s!==r.size)return!1;if(!s)return!0;const n=new Array(s),o=t.entries();let i,l,c=0;for(;(i=o.next())&&!i.done;){const d=r.entries();let u=!1,m=0;for(;(l=d.next())&&!l.done;){if(n[m]){m++;continue}const x=i.value,h=l.value;if(a.equals(x[0],h[0],c,m,t,r,a)&&a.equals(x[1],h[1],x[0],h[0],t,r,a)){u=n[m]=!0;break}m++}if(!u)return!1;c++}return!0}const Zie=cc;function ele(t,r,a){const s=vC(t);let n=s.length;if(vC(r).length!==n)return!1;for(;n-- >0;)if(!YO(t,r,a,s[n]))return!1;return!0}function Wu(t,r,a){const s=gC(t);let n=s.length;if(gC(r).length!==n)return!1;let o,i,l;for(;n-- >0;)if(o=s[n],!YO(t,r,a,o)||(i=bC(t,o),l=bC(r,o),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function tle(t,r){return cc(t.valueOf(),r.valueOf())}function rle(t,r){return t.source===r.source&&t.flags===r.flags}function jC(t,r,a){const s=t.size;if(s!==r.size)return!1;if(!s)return!0;const n=new Array(s),o=t.values();let i,l;for(;(i=o.next())&&!i.done;){const c=r.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!n[u]&&a.equals(i.value,l.value,i.value,l.value,t,r,a)){d=n[u]=!0;break}u++}if(!d)return!1}return!0}function tf(t,r){let a=t.byteLength;if(r.byteLength!==a||t.byteOffset!==r.byteOffset)return!1;for(;a-- >0;)if(t[a]!==r[a])return!1;return!0}function ale(t,r){return t.hostname===r.hostname&&t.pathname===r.pathname&&t.protocol===r.protocol&&t.port===r.port&&t.hash===r.hash&&t.username===r.username&&t.password===r.password}function YO(t,r,a,s){return(s===Hie||s===Wie||s===Uie)&&(t.$$typeof||r.$$typeof)?!0:Vie(r,s)&&a.equals(t[s],r[s],s,s,t,r,a)}const sle="[object ArrayBuffer]",nle="[object Arguments]",ole="[object Boolean]",ile="[object DataView]",lle="[object Date]",cle="[object Error]",dle="[object Map]",ule="[object Number]",mle="[object Object]",xle="[object RegExp]",ple="[object Set]",hle="[object String]",fle={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},gle="[object URL]",ble=Object.prototype.toString;function vle({areArrayBuffersEqual:t,areArraysEqual:r,areDataViewsEqual:a,areDatesEqual:s,areErrorsEqual:n,areFunctionsEqual:o,areMapsEqual:i,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:h,unknownTagComparators:b}){return function(f,v,g){if(f===v)return!0;if(f==null||v==null)return!1;const y=typeof f;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?l(f,v,g):y==="function"?o(f,v,g):!1;const N=f.constructor;if(N!==v.constructor)return!1;if(N===Object)return c(f,v,g);if(Array.isArray(f))return r(f,v,g);if(N===Date)return s(f,v,g);if(N===RegExp)return u(f,v,g);if(N===Map)return i(f,v,g);if(N===Set)return m(f,v,g);const _=ble.call(f);if(_===lle)return s(f,v,g);if(_===xle)return u(f,v,g);if(_===dle)return i(f,v,g);if(_===ple)return m(f,v,g);if(_===mle)return typeof f.then!="function"&&typeof v.then!="function"&&c(f,v,g);if(_===gle)return h(f,v,g);if(_===cle)return n(f,v,g);if(_===nle)return c(f,v,g);if(fle[_])return x(f,v,g);if(_===sle)return t(f,v,g);if(_===ile)return a(f,v,g);if(_===ole||_===ule||_===hle)return d(f,v,g);if(b){let w=b[_];if(!w){const S=qie(f);S&&(w=b[S])}if(w)return w(f,v,g)}return!1}}function yle({circular:t,createCustomConfig:r,strict:a}){let s={areArrayBuffersEqual:Kie,areArraysEqual:a?Wu:Gie,areDataViewsEqual:Xie,areDatesEqual:Yie,areErrorsEqual:Qie,areFunctionsEqual:Jie,areMapsEqual:a?vv(yC,Wu):yC,areNumbersEqual:Zie,areObjectsEqual:a?Wu:ele,arePrimitiveWrappersEqual:tle,areRegExpsEqual:rle,areSetsEqual:a?vv(jC,Wu):jC,areTypedArraysEqual:a?vv(tf,Wu):tf,areUrlsEqual:ale,unknownTagComparators:void 0};if(r&&(s=Object.assign({},s,r(s))),t){const n=ap(s.areArraysEqual),o=ap(s.areMapsEqual),i=ap(s.areObjectsEqual),l=ap(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:n,areMapsEqual:o,areObjectsEqual:i,areSetsEqual:l})}return s}function jle(t){return function(r,a,s,n,o,i,l){return t(r,a,l)}}function Nle({circular:t,comparator:r,createState:a,equals:s,strict:n}){if(a)return function(l,c){const{cache:d=t?new WeakMap:void 0,meta:u}=a();return r(l,c,{cache:d,equals:s,meta:u,strict:n})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:n})};const o={cache:void 0,equals:s,meta:void 0,strict:n};return function(l,c){return r(l,c,o)}}const wle=Hi();Hi({strict:!0});Hi({circular:!0});Hi({circular:!0,strict:!0});Hi({createInternalComparator:()=>cc});Hi({strict:!0,createInternalComparator:()=>cc});Hi({circular:!0,createInternalComparator:()=>cc});Hi({circular:!0,createInternalComparator:()=>cc,strict:!0});function Hi(t={}){const{circular:r=!1,createInternalComparator:a,createState:s,strict:n=!1}=t,o=yle(t),i=vle(o),l=a?a(i):jle(i);return Nle({circular:r,comparator:i,createState:s,equals:l,strict:n})}function _le(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,s=function n(o){a<0&&(a=o),o-a>r?(t(o),a=-1):_le(n)};requestAnimationFrame(s)}function qj(t){"@babel/helpers - typeof";return qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qj(t)}function Sle(t){return Ale(t)||Ele(t)||kle(t)||Cle()}function Cle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kle(t,r){if(t){if(typeof t=="string")return wC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wC(t,r)}}function wC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Ele(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ale(t){if(Array.isArray(t))return t}function Ple(){var t={},r=function(){return null},a=!1,s=function n(o){if(!a){if(Array.isArray(o)){if(!o.length)return;var i=o,l=Sle(i),c=l[0],d=l.slice(1);if(typeof c=="number"){NC(n.bind(null,d),c);return}n(c),NC(n.bind(null,d));return}qj(o)==="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:function(){a=!0},start:function(o){a=!1,s(o)},subscribe:function(o){return r=o,function(){r=function(){return null}}}}}function jx(t){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jx(t)}function _C(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function SC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?_C(Object(a),!0).forEach(function(s){QO(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_C(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function QO(t,r,a){return r=Tle(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Tle(t){var r=Ole(t,"string");return jx(r)==="symbol"?r:String(r)}function Ole(t,r){if(jx(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(jx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Fle=function(r,a){return[Object.keys(r),Object.keys(a)].reduce(function(s,n){return s.filter(function(o){return n.includes(o)})})},Rle=function(r){return r},$le=function(r){return r.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},fm=function(r,a){return Object.keys(a).reduce(function(s,n){return SC(SC({},s),{},QO({},n,r(n,a[n])))},{})},CC=function(r,a,s){return r.map(function(n){return"".concat($le(n)," ").concat(a,"ms ").concat(s)}).join(",")};function Dle(t,r){return Lle(t)||Ile(t,r)||JO(t,r)||Mle()}function Mle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ile(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Lle(t){if(Array.isArray(t))return t}function Ble(t){return Vle(t)||qle(t)||JO(t)||zle()}function zle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JO(t,r){if(t){if(typeof t=="string")return Vj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vj(t,r)}}function qle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vle(t){if(Array.isArray(t))return Vj(t)}function Vj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var rf=1e-4,ZO=function(r,a){return[0,3*r,3*a-6*r,3*r-3*a+1]},eF=function(r,a){return r.map(function(s,n){return s*Math.pow(a,n)}).reduce(function(s,n){return s+n})},kC=function(r,a){return function(s){var n=ZO(r,a);return eF(n,s)}},Ule=function(r,a){return function(s){var n=ZO(r,a),o=[].concat(Ble(n.map(function(i,l){return i*l}).slice(1)),[0]);return eF(o,s)}},EC=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var n=a[0],o=a[1],i=a[2],l=a[3];if(a.length===1)switch(a[0]){case"linear":n=0,o=0,i=1,l=1;break;case"ease":n=.25,o=.1,i=.25,l=1;break;case"ease-in":n=.42,o=0,i=1,l=1;break;case"ease-out":n=.42,o=0,i=.58,l=1;break;case"ease-in-out":n=0,o=0,i=.58,l=1;break;default:{var c=a[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(f){return parseFloat(f)}),u=Dle(d,4);n=u[0],o=u[1],i=u[2],l=u[3]}}}var m=kC(n,i),x=kC(o,l),h=Ule(n,i),b=function(v){return v>1?1:v<0?0:v},p=function(v){for(var g=v>1?1:v,y=g,N=0;N<8;++N){var _=m(y)-g,w=h(y);if(Math.abs(_-g)<rf||w<rf)return x(y);y=b(y-_/w)}return x(y)};return p.isStepper=!1,p},Wle=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.stiff,s=a===void 0?100:a,n=r.damping,o=n===void 0?8:n,i=r.dt,l=i===void 0?17:i,c=function(u,m,x){var h=-(u-m)*s,b=x*o,p=x+(h-b)*l/1e3,f=x*l/1e3+u;return Math.abs(f-m)<rf&&Math.abs(p)<rf?[m,0]:[f,p]};return c.isStepper=!0,c.dt=l,c},Hle=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var n=a[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EC(n);case"spring":return Wle();default:if(n.split("(")[0]==="cubic-bezier")return EC(n)}return typeof n=="function"?n:null};function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nx(t)}function AC(t){return Xle(t)||Gle(t)||tF(t)||Kle()}function Kle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xle(t){if(Array.isArray(t))return Wj(t)}function PC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Aa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?PC(Object(a),!0).forEach(function(s){Uj(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):PC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Uj(t,r,a){return r=Yle(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Yle(t){var r=Qle(t,"string");return Nx(r)==="symbol"?r:String(r)}function Qle(t,r){if(Nx(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Nx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Jle(t,r){return tce(t)||ece(t,r)||tF(t,r)||Zle()}function Zle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tF(t,r){if(t){if(typeof t=="string")return Wj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wj(t,r)}}function Wj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function ece(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function tce(t){if(Array.isArray(t))return t}var af=function(r,a,s){return r+(a-r)*s},Hj=function(r){var a=r.from,s=r.to;return a!==s},rce=function t(r,a,s){var n=fm(function(o,i){if(Hj(i)){var l=r(i.from,i.to,i.velocity),c=Jle(l,2),d=c[0],u=c[1];return Aa(Aa({},i),{},{from:d,velocity:u})}return i},a);return s<1?fm(function(o,i){return Hj(i)?Aa(Aa({},i),{},{velocity:af(i.velocity,n[o].velocity,s),from:af(i.from,n[o].from,s)}):i},a):t(r,n,s-1)};const ace=function(t,r,a,s,n){var o=Fle(t,r),i=o.reduce(function(f,v){return Aa(Aa({},f),{},Uj({},v,[t[v],r[v]]))},{}),l=o.reduce(function(f,v){return Aa(Aa({},f),{},Uj({},v,{from:t[v],velocity:0,to:r[v]}))},{}),c=-1,d,u,m=function(){return null},x=function(){return fm(function(v,g){return g.from},l)},h=function(){return!Object.values(l).filter(Hj).length},b=function(v){d||(d=v);var g=v-d,y=g/a.dt;l=rce(a,l,y),n(Aa(Aa(Aa({},t),r),x())),d=v,h()||(c=requestAnimationFrame(m))},p=function(v){u||(u=v);var g=(v-u)/s,y=fm(function(_,w){return af.apply(void 0,AC(w).concat([a(g)]))},i);if(n(Aa(Aa(Aa({},t),r),y)),g<1)c=requestAnimationFrame(m);else{var N=fm(function(_,w){return af.apply(void 0,AC(w).concat([a(1)]))},i);n(Aa(Aa(Aa({},t),r),N))}};return m=a.isStepper?b:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$d(t)}var sce=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nce(t,r){if(t==null)return{};var a=oce(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function oce(t,r){if(t==null)return{};var a={},s=Object.keys(t),n,o;for(o=0;o<s.length;o++)n=s[o],!(r.indexOf(n)>=0)&&(a[n]=t[n]);return a}function yv(t){return dce(t)||cce(t)||lce(t)||ice()}function ice(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lce(t,r){if(t){if(typeof t=="string")return Kj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Kj(t,r)}}function cce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dce(t){if(Array.isArray(t))return Kj(t)}function Kj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function TC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function xn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?TC(Object(a),!0).forEach(function(s){Zu(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):TC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Zu(t,r,a){return r=rF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function uce(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function mce(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,rF(s.key),s)}}function xce(t,r,a){return r&&mce(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rF(t){var r=pce(t,"string");return $d(r)==="symbol"?r:String(r)}function pce(t,r){if($d(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if($d(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hce(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Gj(t,r)}function Gj(t,r){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Gj(t,r)}function fce(t){var r=gce();return function(){var s=sf(t),n;if(r){var o=sf(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return Xj(this,n)}}function Xj(t,r){if(r&&($d(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yj(t)}function Yj(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sf(t){return sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},sf(t)}var Tn=function(t){hce(a,t);var r=fce(a);function a(s,n){var o;uce(this,a),o=r.call(this,s,n);var i=o.props,l=i.isActive,c=i.attributeName,d=i.from,u=i.to,m=i.steps,x=i.children,h=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Yj(o)),o.changeStyle=o.changeStyle.bind(Yj(o)),!l||h<=0)return o.state={style:{}},typeof x=="function"&&(o.state={style:u}),Xj(o);if(m&&m.length)o.state={style:m[0].style};else if(d){if(typeof x=="function")return o.state={style:d},Xj(o);o.state={style:c?Zu({},c,d):d}}else o.state={style:{}};return o}return xce(a,[{key:"componentDidMount",value:function(){var n=this.props,o=n.isActive,i=n.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var o=this.props,i=o.isActive,l=o.canBegin,c=o.attributeName,d=o.shouldReAnimate,u=o.to,m=o.from,x=this.state.style;if(l){if(!i){var h={style:c?Zu({},c,u):u};this.state&&x&&(c&&x[c]!==u||!c&&x!==u)&&this.setState(h);return}if(!(wle(n.to,u)&&n.canBegin&&n.isActive)){var b=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=b||d?m:n.to;if(this.state&&x){var f={style:c?Zu({},c,p):p};(c&&x[c]!==p||!c&&x!==p)&&this.setState(f)}this.runAnimation(xn(xn({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var o=this,i=n.from,l=n.to,c=n.duration,d=n.easing,u=n.begin,m=n.onAnimationEnd,x=n.onAnimationStart,h=ace(i,l,Hle(d),c,this.changeStyle),b=function(){o.stopJSAnimation=h()};this.manager.start([x,u,b,c,m])}},{key:"runStepAnimation",value:function(n){var o=this,i=n.steps,l=n.begin,c=n.onAnimationStart,d=i[0],u=d.style,m=d.duration,x=m===void 0?0:m,h=function(p,f,v){if(v===0)return p;var g=f.duration,y=f.easing,N=y===void 0?"ease":y,_=f.style,w=f.properties,S=f.onAnimationEnd,C=v>0?i[v-1]:f,k=w||Object.keys(_);if(typeof N=="function"||N==="spring")return[].concat(yv(p),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:g,easing:N}),g]);var F=CC(k,g,N),q=xn(xn(xn({},C.style),_),{},{transition:F});return[].concat(yv(p),[q,g,S]).filter(Rle)};return this.manager.start([c].concat(yv(i.reduce(h,[u,Math.max(x,l)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=Ple());var o=n.begin,i=n.duration,l=n.attributeName,c=n.to,d=n.easing,u=n.onAnimationStart,m=n.onAnimationEnd,x=n.steps,h=n.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof h=="function"||d==="spring"){this.runJSAnimation(n);return}if(x.length>1){this.runStepAnimation(n);return}var p=l?Zu({},l,c):c,f=CC(Object.keys(p),i,d);b.start([u,o,xn(xn({},p),{},{transition:f}),i,m])}},{key:"render",value:function(){var n=this.props,o=n.children;n.begin;var i=n.duration;n.attributeName,n.easing;var l=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var c=nce(n,sce),d=j.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!l||d===0||i<=0)return o;var m=function(h){var b=h.props,p=b.style,f=p===void 0?{}:p,v=b.className,g=j.cloneElement(h,xn(xn({},c),{},{style:xn(xn({},f),u),className:v}));return g};return d===1?m(j.Children.only(o)):pe.createElement("div",null,j.Children.map(o,function(x){return m(x)}))}}]),a}(j.PureComponent);Tn.displayName="Animate";Tn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Tn.propTypes={from:Ht.oneOfType([Ht.object,Ht.string]),to:Ht.oneOfType([Ht.object,Ht.string]),attributeName:Ht.string,duration:Ht.number,begin:Ht.number,easing:Ht.oneOfType([Ht.string,Ht.func]),steps:Ht.arrayOf(Ht.shape({duration:Ht.number.isRequired,style:Ht.object.isRequired,easing:Ht.oneOfType([Ht.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ht.func]),properties:Ht.arrayOf("string"),onAnimationEnd:Ht.func})),children:Ht.oneOfType([Ht.node,Ht.func]),isActive:Ht.bool,canBegin:Ht.bool,onAnimationEnd:Ht.func,shouldReAnimate:Ht.bool,onAnimationStart:Ht.func,onAnimationReStart:Ht.func};function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wx(t)}function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},nf.apply(this,arguments)}function bce(t,r){return Nce(t)||jce(t,r)||yce(t,r)||vce()}function vce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yce(t,r){if(t){if(typeof t=="string")return OC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return OC(t,r)}}function OC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function jce(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Nce(t){if(Array.isArray(t))return t}function FC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function RC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?FC(Object(a),!0).forEach(function(s){wce(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):FC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function wce(t,r,a){return r=_ce(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function _ce(t){var r=Sce(t,"string");return wx(r)=="symbol"?r:r+""}function Sce(t,r){if(wx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var $C=function(r,a,s,n,o){var i=Math.min(Math.abs(s)/2,Math.abs(n)/2),l=n>=0?1:-1,c=s>=0?1:-1,d=n>=0&&s>=0||n<0&&s<0?1:0,u;if(i>0&&o instanceof Array){for(var m=[0,0,0,0],x=0,h=4;x<h;x++)m[x]=o[x]>i?i:o[x];u="M".concat(r,",").concat(a+l*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(r+c*m[0],",").concat(a)),u+="L ".concat(r+s-c*m[1],",").concat(a),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(r+s,",").concat(a+l*m[1])),u+="L ".concat(r+s,",").concat(a+n-l*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(r+s-c*m[2],",").concat(a+n)),u+="L ".concat(r+c*m[3],",").concat(a+n),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(r,",").concat(a+n-l*m[3])),u+="Z"}else if(i>0&&o===+o&&o>0){var b=Math.min(i,o);u="M ".concat(r,",").concat(a+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(r+c*b,",").concat(a,`
            L `).concat(r+s-c*b,",").concat(a,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(r+s,",").concat(a+l*b,`
            L `).concat(r+s,",").concat(a+n-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(r+s-c*b,",").concat(a+n,`
            L `).concat(r+c*b,",").concat(a+n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(r,",").concat(a+n-l*b," Z")}else u="M ".concat(r,",").concat(a," h ").concat(s," v ").concat(n," h ").concat(-s," Z");return u},Cce=function(r,a){if(!r||!a)return!1;var s=r.x,n=r.y,o=a.x,i=a.y,l=a.width,c=a.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(o,o+l),u=Math.max(o,o+l),m=Math.min(i,i+c),x=Math.max(i,i+c);return s>=d&&s<=u&&n>=m&&n<=x}return!1},kce={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BN=function(r){var a=RC(RC({},kce),r),s=j.useRef(),n=j.useState(-1),o=bce(n,2),i=o[0],l=o[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=a.x,d=a.y,u=a.width,m=a.height,x=a.radius,h=a.className,b=a.animationEasing,p=a.animationDuration,f=a.animationBegin,v=a.isAnimationActive,g=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var y=It("recharts-rectangle",h);return g?pe.createElement(Tn,{canBegin:i>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:b,isActive:g},function(N){var _=N.width,w=N.height,S=N.x,C=N.y;return pe.createElement(Tn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:v,easing:b},pe.createElement("path",nf({},St(a,!0),{className:y,d:$C(S,C,_,w,x),ref:s})))}):pe.createElement("path",nf({},St(a,!0),{className:y,d:$C(c,d,u,m,x)}))},Ece=["points","className","baseLinePoints","connectNulls"];function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Uc.apply(this,arguments)}function Ace(t,r){if(t==null)return{};var a=Pce(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Pce(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function DC(t){return Rce(t)||Fce(t)||Oce(t)||Tce()}function Tce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oce(t,r){if(t){if(typeof t=="string")return Qj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qj(t,r)}}function Fce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rce(t){if(Array.isArray(t))return Qj(t)}function Qj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var MC=function(r){return r&&r.x===+r.x&&r.y===+r.y},$ce=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return r.forEach(function(s){MC(s)?a[a.length-1].push(s):a[a.length-1].length>0&&a.push([])}),MC(r[0])&&a[a.length-1].push(r[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},gm=function(r,a){var s=$ce(r);a&&(s=[s.reduce(function(o,i){return[].concat(DC(o),DC(i))},[])]);var n=s.map(function(o){return o.reduce(function(i,l,c){return"".concat(i).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(n,"Z"):n},Dce=function(r,a,s){var n=gm(r,s);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(gm(a.reverse(),s).slice(1))},Mce=function(r){var a=r.points,s=r.className,n=r.baseLinePoints,o=r.connectNulls,i=Ace(r,Ece);if(!a||!a.length)return null;var l=It("recharts-polygon",s);if(n&&n.length){var c=i.stroke&&i.stroke!=="none",d=Dce(a,n,o);return pe.createElement("g",{className:l},pe.createElement("path",Uc({},St(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",stroke:"none",d})),c?pe.createElement("path",Uc({},St(i,!0),{fill:"none",d:gm(a,o)})):null,c?pe.createElement("path",Uc({},St(i,!0),{fill:"none",d:gm(n,o)})):null)}var u=gm(a,o);return pe.createElement("path",Uc({},St(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",className:l,d:u}))};function Jj(){return Jj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Jj.apply(this,arguments)}var i0=function(r){var a=r.cx,s=r.cy,n=r.r,o=r.className,i=It("recharts-dot",o);return a===+a&&s===+s&&n===+n?j.createElement("circle",Jj({},St(r,!1),wh(r),{className:i,cx:a,cy:s,r:n})):null};function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_x(t)}var Ice=["x","y","top","left","width","height","className"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Zj.apply(this,arguments)}function IC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Lce(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?IC(Object(a),!0).forEach(function(s){Bce(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Bce(t,r,a){return r=zce(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function zce(t){var r=qce(t,"string");return _x(r)=="symbol"?r:r+""}function qce(t,r){if(_x(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(_x(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Vce(t,r){if(t==null)return{};var a=Uce(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Uce(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var Wce=function(r,a,s,n,o,i){return"M".concat(r,",").concat(o,"v").concat(n,"M").concat(i,",").concat(a,"h").concat(s)},Hce=function(r){var a=r.x,s=a===void 0?0:a,n=r.y,o=n===void 0?0:n,i=r.top,l=i===void 0?0:i,c=r.left,d=c===void 0?0:c,u=r.width,m=u===void 0?0:u,x=r.height,h=x===void 0?0:x,b=r.className,p=Vce(r,Ice),f=Lce({x:s,y:o,top:l,left:d,width:m,height:h},p);return!rt(s)||!rt(o)||!rt(m)||!rt(h)||!rt(l)||!rt(d)?null:pe.createElement("path",Zj({},St(f,!0),{className:It("recharts-cross",b),d:Wce(s,o,m,h,l,d)}))},Kce=Hg,Gce=gO,Xce=oo;function Yce(t,r){return t&&t.length?Kce(t,Xce(r),Gce):void 0}var Qce=Yce;const Jce=mr(Qce);var Zce=Hg,ede=oo,tde=bO;function rde(t,r){return t&&t.length?Zce(t,ede(r),tde):void 0}var ade=rde;const sde=mr(ade);var nde=["cx","cy","angle","ticks","axisLine"],ode=["ticks","tick","angle","tickFormatter","stroke"];function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dd(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},bm.apply(this,arguments)}function LC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Ji(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?LC(Object(a),!0).forEach(function(s){Yg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):LC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function BC(t,r){if(t==null)return{};var a=ide(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function ide(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function lde(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function zC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,sF(s.key),s)}}function cde(t,r,a){return r&&zC(t.prototype,r),a&&zC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function dde(t,r,a){return r=of(r),ude(t,aF()?Reflect.construct(r,a||[],of(t).constructor):r.apply(t,a))}function ude(t,r){if(r&&(Dd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mde(t)}function mde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!t})()}function of(t){return of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},of(t)}function xde(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e1(t,r)}function e1(t,r){return e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},e1(t,r)}function Yg(t,r,a){return r=sF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function sF(t){var r=pde(t,"string");return Dd(r)=="symbol"?r:r+""}function pde(t,r){if(Dd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Dd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Qg=function(t){function r(){return lde(this,r),dde(this,r,arguments)}return xde(r,t),cde(r,[{key:"getTickValueCoord",value:function(s){var n=s.coordinate,o=this.props,i=o.angle,l=o.cx,c=o.cy;return Nr(l,c,n,i)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,n;switch(s){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=Jce(l,function(u){return u.coordinate||0}),d=sde(l,function(u){return u.coordinate||0});return{cx:n,cy:o,startAngle:i,endAngle:i,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=s.axisLine,d=BC(s,nde),u=l.reduce(function(b,p){return[Math.min(b[0],p.coordinate),Math.max(b[1],p.coordinate)]},[1/0,-1/0]),m=Nr(n,o,u[0],i),x=Nr(n,o,u[1],i),h=Ji(Ji(Ji({},St(d,!1)),{},{fill:"none"},St(c,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return pe.createElement("line",bm({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var s=this,n=this.props,o=n.ticks,i=n.tick,l=n.angle,c=n.tickFormatter,d=n.stroke,u=BC(n,ode),m=this.getTickTextAnchor(),x=St(u,!1),h=St(i,!1),b=o.map(function(p,f){var v=s.getTickValueCoord(p),g=Ji(Ji(Ji(Ji({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},x),{},{stroke:"none",fill:d},h),{},{index:f},v),{},{payload:p});return pe.createElement(Ut,bm({className:It("recharts-polar-radius-axis-tick",HO(i)),key:"tick-".concat(p.coordinate)},Wl(s.props,p,f)),r.renderTickItem(i,g,c?c(p.value,f):p.value))});return pe.createElement(Ut,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var s=this.props,n=s.ticks,o=s.axisLine,i=s.tick;return!n||!n.length?null:pe.createElement(Ut,{className:It("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),ja.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,n,o){var i;return pe.isValidElement(s)?i=pe.cloneElement(s,n):Et(s)?i=s(n):i=pe.createElement(Hl,bm({},n,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(j.PureComponent);Yg(Qg,"displayName","PolarRadiusAxis");Yg(Qg,"axisType","radiusAxis");Yg(Qg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Md(t){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Md(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ll.apply(this,arguments)}function qC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Zi(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?qC(Object(a),!0).forEach(function(s){Jg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function hde(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function VC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,oF(s.key),s)}}function fde(t,r,a){return r&&VC(t.prototype,r),a&&VC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gde(t,r,a){return r=lf(r),bde(t,nF()?Reflect.construct(r,a||[],lf(t).constructor):r.apply(t,a))}function bde(t,r){if(r&&(Md(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vde(t)}function vde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nF=function(){return!!t})()}function lf(t){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},lf(t)}function yde(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&t1(t,r)}function t1(t,r){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},t1(t,r)}function Jg(t,r,a){return r=oF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function oF(t){var r=jde(t,"string");return Md(r)=="symbol"?r:r+""}function jde(t,r){if(Md(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Md(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Nde=Math.PI/180,UC=1e-5,Zg=function(t){function r(){return hde(this,r),gde(this,r,arguments)}return yde(r,t),fde(r,[{key:"getTickLineCoord",value:function(s){var n=this.props,o=n.cx,i=n.cy,l=n.radius,c=n.orientation,d=n.tickSize,u=d||8,m=Nr(o,i,l,s.coordinate),x=Nr(o,i,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(s){var n=this.props.orientation,o=Math.cos(-s.coordinate*Nde),i;return o>UC?i=n==="outer"?"start":"end":o<-UC?i=n==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.radius,l=s.axisLine,c=s.axisLineType,d=Zi(Zi({},St(this.props,!1)),{},{fill:"none"},St(l,!1));if(c==="circle")return pe.createElement(i0,ll({className:"recharts-polar-angle-axis-line"},d,{cx:n,cy:o,r:i}));var u=this.props.ticks,m=u.map(function(x){return Nr(n,o,i,x.coordinate)});return pe.createElement(Mce,ll({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var s=this,n=this.props,o=n.ticks,i=n.tick,l=n.tickLine,c=n.tickFormatter,d=n.stroke,u=St(this.props,!1),m=St(i,!1),x=Zi(Zi({},u),{},{fill:"none"},St(l,!1)),h=o.map(function(b,p){var f=s.getTickLineCoord(b),v=s.getTickTextAnchor(b),g=Zi(Zi(Zi({textAnchor:v},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:b,x:f.x2,y:f.y2});return pe.createElement(Ut,ll({className:It("recharts-polar-angle-axis-tick",HO(i)),key:"tick-".concat(b.coordinate)},Wl(s.props,b,p)),l&&pe.createElement("line",ll({className:"recharts-polar-angle-axis-tick-line"},x,f)),i&&r.renderTickItem(i,g,c?c(b.value,p):b.value))});return pe.createElement(Ut,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var s=this.props,n=s.ticks,o=s.radius,i=s.axisLine;return o<=0||!n||!n.length?null:pe.createElement(Ut,{className:It("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,n,o){var i;return pe.isValidElement(s)?i=pe.cloneElement(s,n):Et(s)?i=s(n):i=pe.createElement(Hl,ll({},n,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(j.PureComponent);Jg(Zg,"displayName","PolarAngleAxis");Jg(Zg,"axisType","angleAxis");Jg(Zg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var wde=pT,_de=wde(Object.getPrototypeOf,Object),Sde=_de,Cde=Uo,kde=Sde,Ede=Wo,Ade="[object Object]",Pde=Function.prototype,Tde=Object.prototype,iF=Pde.toString,Ode=Tde.hasOwnProperty,Fde=iF.call(Object);function Rde(t){if(!Ede(t)||Cde(t)!=Ade)return!1;var r=kde(t);if(r===null)return!0;var a=Ode.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&iF.call(a)==Fde}var $de=Rde;const Dde=mr($de);var Mde=Uo,Ide=Wo,Lde="[object Boolean]";function Bde(t){return t===!0||t===!1||Ide(t)&&Mde(t)==Lde}var zde=Bde;const qde=mr(zde);function Sx(t){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sx(t)}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},cf.apply(this,arguments)}function Vde(t,r){return Kde(t)||Hde(t,r)||Wde(t,r)||Ude()}function Ude(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wde(t,r){if(t){if(typeof t=="string")return WC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return WC(t,r)}}function WC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Hde(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Kde(t){if(Array.isArray(t))return t}function HC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function KC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?HC(Object(a),!0).forEach(function(s){Gde(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):HC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Gde(t,r,a){return r=Xde(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Xde(t){var r=Yde(t,"string");return Sx(r)=="symbol"?r:r+""}function Yde(t,r){if(Sx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Sx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var GC=function(r,a,s,n,o){var i=s-n,l;return l="M ".concat(r,",").concat(a),l+="L ".concat(r+s,",").concat(a),l+="L ".concat(r+s-i/2,",").concat(a+o),l+="L ".concat(r+s-i/2-n,",").concat(a+o),l+="L ".concat(r,",").concat(a," Z"),l},Qde={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jde=function(r){var a=KC(KC({},Qde),r),s=j.useRef(),n=j.useState(-1),o=Vde(n,2),i=o[0],l=o[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&l(y)}catch{}},[]);var c=a.x,d=a.y,u=a.upperWidth,m=a.lowerWidth,x=a.height,h=a.className,b=a.animationEasing,p=a.animationDuration,f=a.animationBegin,v=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||x!==+x||u===0&&m===0||x===0)return null;var g=It("recharts-trapezoid",h);return v?pe.createElement(Tn,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:x,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:x,x:c,y:d},duration:p,animationEasing:b,isActive:v},function(y){var N=y.upperWidth,_=y.lowerWidth,w=y.height,S=y.x,C=y.y;return pe.createElement(Tn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:b},pe.createElement("path",cf({},St(a,!0),{className:g,d:GC(S,C,N,_,w),ref:s})))}):pe.createElement("g",null,pe.createElement("path",cf({},St(a,!0),{className:g,d:GC(c,d,u,m,x)})))},Zde=["option","shapeType","propTransformer","activeClassName","isActive"];function Cx(t){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cx(t)}function eue(t,r){if(t==null)return{};var a=tue(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function tue(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function XC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function df(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?XC(Object(a),!0).forEach(function(s){rue(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):XC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function rue(t,r,a){return r=aue(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function aue(t){var r=sue(t,"string");return Cx(r)=="symbol"?r:r+""}function sue(t,r){if(Cx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Cx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function nue(t,r){return df(df({},r),t)}function oue(t,r){return t==="symbols"}function YC(t){var r=t.shapeType,a=t.elementProps;switch(r){case"rectangle":return pe.createElement(BN,a);case"trapezoid":return pe.createElement(Jde,a);case"sector":return pe.createElement(XO,a);case"symbols":if(oue(r))return pe.createElement(nN,a);break;default:return null}}function iue(t){return j.isValidElement(t)?t.props:t}function lF(t){var r=t.option,a=t.shapeType,s=t.propTransformer,n=s===void 0?nue:s,o=t.activeClassName,i=o===void 0?"recharts-active-shape":o,l=t.isActive,c=eue(t,Zde),d;if(j.isValidElement(r))d=j.cloneElement(r,df(df({},c),iue(r)));else if(Et(r))d=r(c);else if(Dde(r)&&!qde(r)){var u=n(r,c);d=pe.createElement(YC,{shapeType:a,elementProps:u})}else{var m=c;d=pe.createElement(YC,{shapeType:a,elementProps:m})}return l?pe.createElement(Ut,{className:i},d):d}function eb(t,r){return r!=null&&"trapezoids"in t.props}function tb(t,r){return r!=null&&"sectors"in t.props}function kx(t,r){return r!=null&&"points"in t.props}function lue(t,r){var a,s,n=t.x===(r==null||(a=r.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===r.x,o=t.y===(r==null||(s=r.labelViewBox)===null||s===void 0?void 0:s.y)||t.y===r.y;return n&&o}function cue(t,r){var a=t.endAngle===r.endAngle,s=t.startAngle===r.startAngle;return a&&s}function due(t,r){var a=t.x===r.x,s=t.y===r.y,n=t.z===r.z;return a&&s&&n}function uue(t,r){var a;return eb(t,r)?a=lue:tb(t,r)?a=cue:kx(t,r)&&(a=due),a}function mue(t,r){var a;return eb(t,r)?a="trapezoids":tb(t,r)?a="sectors":kx(t,r)&&(a="points"),a}function xue(t,r){if(eb(t,r)){var a;return(a=r.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(tb(t,r)){var s;return(s=r.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return kx(t,r)?r.payload:{}}function pue(t){var r=t.activeTooltipItem,a=t.graphicalItem,s=t.itemData,n=mue(a,r),o=xue(a,r),i=s.filter(function(c,d){var u=Kl(o,c),m=a.props[n].filter(function(b){var p=uue(a,r);return p(b,r)}),x=a.props[n].indexOf(m[m.length-1]),h=d===x;return u&&h}),l=s.indexOf(i[i.length-1]);return l}var Fp;function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Id(t)}function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Wc.apply(this,arguments)}function QC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function br(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QC(Object(a),!0).forEach(function(s){en(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function hue(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function JC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,dF(s.key),s)}}function fue(t,r,a){return r&&JC(t.prototype,r),a&&JC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gue(t,r,a){return r=uf(r),bue(t,cF()?Reflect.construct(r,a||[],uf(t).constructor):r.apply(t,a))}function bue(t,r){if(r&&(Id(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vue(t)}function vue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!t})()}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},uf(t)}function yue(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&r1(t,r)}function r1(t,r){return r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},r1(t,r)}function en(t,r,a){return r=dF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function dF(t){var r=jue(t,"string");return Id(r)=="symbol"?r:r+""}function jue(t,r){if(Id(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Id(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var On=function(t){function r(a){var s;return hue(this,r),s=gue(this,r,[a]),en(s,"pieRef",null),en(s,"sectorRefs",[]),en(s,"id",oc("recharts-pie-")),en(s,"handleAnimationEnd",function(){var n=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Et(n)&&n()}),en(s,"handleAnimationStart",function(){var n=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Et(n)&&n()}),s.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},s}return yue(r,t),fue(r,[{key:"isActiveIndex",value:function(s){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(s)!==-1:s===n}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,l=o.labelLine,c=o.dataKey,d=o.valueKey,u=St(this.props,!1),m=St(i,!1),x=St(l,!1),h=i&&i.offsetRadius||20,b=s.map(function(p,f){var v=(p.startAngle+p.endAngle)/2,g=Nr(p.cx,p.cy,p.outerRadius+h,v),y=br(br(br(br({},u),p),{},{stroke:"none"},m),{},{index:f,textAnchor:r.getTextAnchor(g.x,p.cx)},g),N=br(br(br(br({},u),p),{},{fill:"none",stroke:p.fill},x),{},{index:f,points:[Nr(p.cx,p.cy,p.outerRadius,v),g]}),_=c;return Rt(c)&&Rt(d)?_="value":Rt(c)&&(_=d),pe.createElement(Ut,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(f)},l&&r.renderLabelLineItem(l,N,"line"),r.renderLabelItem(i,y,Kr(p,_)))});return pe.createElement(Ut,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(s){var n=this,o=this.props,i=o.activeShape,l=o.blendStroke,c=o.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var m=n.isActiveIndex(u),x=c&&n.hasActiveIndex()?c:null,h=m?i:x,b=br(br({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return pe.createElement(Ut,Wc({ref:function(f){f&&!n.sectorRefs.includes(f)&&n.sectorRefs.push(f)},tabIndex:-1,className:"recharts-pie-sector"},Wl(n.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),pe.createElement(lF,Wc({option:h,isActive:m,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,n=this.props,o=n.sectors,i=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,m=this.state,x=m.prevSectors,h=m.prevIsAnimationActive;return pe.createElement(Tn,{begin:l,duration:c,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var p=b.t,f=[],v=o&&o[0],g=v.startAngle;return o.forEach(function(y,N){var _=x&&x[N],w=N>0?Ds(y,"paddingAngle",0):0;if(_){var S=xa(_.endAngle-_.startAngle,y.endAngle-y.startAngle),C=br(br({},y),{},{startAngle:g+w,endAngle:g+S(p)+w});f.push(C),g=C.endAngle}else{var k=y.endAngle,F=y.startAngle,q=xa(0,k-F),A=q(p),T=br(br({},y),{},{startAngle:g+w,endAngle:g+A+w});f.push(T),g=T.endAngle}}),pe.createElement(Ut,null,s.renderSectorsStatically(f))})}},{key:"attachKeyboardHandlers",value:function(s){var n=this;s.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[i].focus(),n.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[l].focus(),n.setState({sectorToFocus:l});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,n=s.sectors,o=s.isAnimationActive,i=this.state.prevSectors;return o&&n&&n.length&&(!i||!Kl(i,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,n=this.props,o=n.hide,i=n.sectors,l=n.className,c=n.label,d=n.cx,u=n.cy,m=n.innerRadius,x=n.outerRadius,h=n.isAnimationActive,b=this.state.isAnimationFinished;if(o||!i||!i.length||!rt(d)||!rt(u)||!rt(m)||!rt(x))return null;var p=It("recharts-pie",l);return pe.createElement(Ut,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){s.pieRef=v}},this.renderSectors(),c&&this.renderLabels(i),ja.renderCallByParent(this.props,null,!1),(!h||b)&&Zn.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return n.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:s.sectors!==n.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,n){return s>n?"start":s<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,n,o){if(pe.isValidElement(s))return pe.cloneElement(s,n);if(Et(s))return s(n);var i=It("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return pe.createElement(El,Wc({},n,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(s,n,o){if(pe.isValidElement(s))return pe.cloneElement(s,n);var i=o;if(Et(s)&&(i=s(n),pe.isValidElement(i)))return i;var l=It("recharts-pie-label-text",typeof s!="boolean"&&!Et(s)?s.className:"");return pe.createElement(Hl,Wc({},n,{alignmentBaseline:"middle",className:l}),i)}}])}(j.PureComponent);Fp=On;en(On,"displayName","Pie");en(On,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Vi.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});en(On,"parseDeltaAngle",function(t,r){var a=Ja(r-t),s=Math.min(Math.abs(r-t),360);return a*s});en(On,"getRealPieData",function(t){var r=t.data,a=t.children,s=St(t,!1),n=Ms(a,Sl);return r&&r.length?r.map(function(o,i){return br(br(br({payload:o},s),o),n&&n[i]&&n[i].props)}):n&&n.length?n.map(function(o){return br(br({},s),o.props)}):[]});en(On,"parseCoordinateOfPie",function(t,r){var a=r.top,s=r.left,n=r.width,o=r.height,i=WO(n,o),l=s+Za(t.cx,n,n/2),c=a+Za(t.cy,o,o/2),d=Za(t.innerRadius,i,0),u=Za(t.outerRadius,i,i*.8),m=t.maxRadius||Math.sqrt(n*n+o*o)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});en(On,"getComposedData",function(t){var r=t.item,a=t.offset,s=r.type.defaultProps!==void 0?br(br({},r.type.defaultProps),r.props):r.props,n=Fp.getRealPieData(s);if(!n||!n.length)return null;var o=s.cornerRadius,i=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,m=s.valueKey,x=s.tooltipType,h=Math.abs(s.minAngle),b=Fp.parseCoordinateOfPie(s,a),p=Fp.parseDeltaAngle(i,l),f=Math.abs(p),v=d;Rt(d)&&Rt(m)?(En(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Rt(d)&&(En(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=m);var g=n.filter(function(C){return Kr(C,v,0)!==0}).length,y=(f>=360?g:g-1)*c,N=f-g*h-y,_=n.reduce(function(C,k){var F=Kr(k,v,0);return C+(rt(F)?F:0)},0),w;if(_>0){var S;w=n.map(function(C,k){var F=Kr(C,v,0),q=Kr(C,u,k),A=(rt(F)?F:0)/_,T;k?T=S.endAngle+Ja(p)*c*(F!==0?1:0):T=i;var U=T+Ja(p)*((F!==0?h:0)+A*N),K=(T+U)/2,I=(b.innerRadius+b.outerRadius)/2,Y=[{name:q,value:F,payload:C,dataKey:v,type:x}],D=Nr(b.cx,b.cy,I,K);return S=br(br(br({percent:A,cornerRadius:o,name:q,tooltipPayload:Y,midAngle:K,middleRadius:I,tooltipPosition:D},C),b),{},{value:Kr(C,v),startAngle:T,endAngle:U,payload:C,paddingAngle:Ja(p)*c}),S})}return br(br({},b),{},{sectors:w,data:n})});var Nue=Math.ceil,wue=Math.max;function _ue(t,r,a,s){for(var n=-1,o=wue(Nue((r-t)/(a||1)),0),i=Array(o);o--;)i[s?o:++n]=t,t+=a;return i}var Sue=_ue,Cue=FT,ZC=1/0,kue=17976931348623157e292;function Eue(t){if(!t)return t===0?t:0;if(t=Cue(t),t===ZC||t===-ZC){var r=t<0?-1:1;return r*kue}return t===t?t:0}var uF=Eue,Aue=Sue,Pue=Lg,jv=uF;function Tue(t){return function(r,a,s){return s&&typeof s!="number"&&Pue(r,a,s)&&(a=s=void 0),r=jv(r),a===void 0?(a=r,r=0):a=jv(a),s=s===void 0?r<a?1:-1:jv(s),Aue(r,a,s,t)}}var Oue=Tue,Fue=Oue,Rue=Fue(),$ue=Rue;const mf=mr($ue);function Ex(t){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ex(t)}function ek(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function tk(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ek(Object(a),!0).forEach(function(s){mF(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ek(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function mF(t,r,a){return r=Due(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Due(t){var r=Mue(t,"string");return Ex(r)=="symbol"?r:r+""}function Mue(t,r){if(Ex(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ex(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Iue=["Webkit","Moz","O","ms"],Lue=function(r,a){var s=r.replace(/(\w)/,function(o){return o.toUpperCase()}),n=Iue.reduce(function(o,i){return tk(tk({},o),{},mF({},i+s,a))},{});return n[r]=a,n};function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ld(t)}function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},xf.apply(this,arguments)}function rk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Nv(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?rk(Object(a),!0).forEach(function(s){Ss(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Bue(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ak(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,pF(s.key),s)}}function zue(t,r,a){return r&&ak(t.prototype,r),a&&ak(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function que(t,r,a){return r=pf(r),Vue(t,xF()?Reflect.construct(r,a||[],pf(t).constructor):r.apply(t,a))}function Vue(t,r){if(r&&(Ld(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uue(t)}function Uue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xF=function(){return!!t})()}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},pf(t)}function Wue(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&a1(t,r)}function a1(t,r){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},a1(t,r)}function Ss(t,r,a){return r=pF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function pF(t){var r=Hue(t,"string");return Ld(r)=="symbol"?r:r+""}function Hue(t,r){if(Ld(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ld(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kue=function(r){var a=r.data,s=r.startIndex,n=r.endIndex,o=r.x,i=r.width,l=r.travellerWidth;if(!a||!a.length)return{};var c=a.length,d=pm().domain(mf(0,c)).range([o,o+i-l]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(n),scale:d,scaleValues:u}},sk=function(r){return r.changedTouches&&!!r.changedTouches.length},Bd=function(t){function r(a){var s;return Bue(this,r),s=que(this,r,[a]),Ss(s,"handleDrag",function(n){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(n):s.state.isSlideMoving&&s.handleSlideDrag(n)}),Ss(s,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&s.handleDrag(n.changedTouches[0])}),Ss(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=s.props,o=n.endIndex,i=n.onDragEnd,l=n.startIndex;i==null||i({endIndex:o,startIndex:l})}),s.detachDragEndListener()}),Ss(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Ss(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Ss(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Ss(s,"handleSlideDragStart",function(n){var o=sk(n)?n.changedTouches[0]:n;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return Wue(r,t),zue(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var n=s.startX,o=s.endX,i=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,m=Math.min(n,o),x=Math.max(n,o),h=r.getIndexInRange(i,m),b=r.getIndexInRange(i,x);return{startIndex:h-h%c,endIndex:b===u?u:b-b%c}}},{key:"getTextOfTick",value:function(s){var n=this.props,o=n.data,i=n.tickFormatter,l=n.dataKey,c=Kr(o[s],l,s);return Et(i)?i(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var n=this.state,o=n.slideMoveStartX,i=n.startX,l=n.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,x=c.startIndex,h=c.endIndex,b=c.onChange,p=s.pageX-o;p>0?p=Math.min(p,d+u-m-l,d+u-m-i):p<0&&(p=Math.max(p,d-i,d-l));var f=this.getIndex({startX:i+p,endX:l+p});(f.startIndex!==x||f.endIndex!==h)&&b&&b(f),this.setState({startX:i+p,endX:l+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,n){var o=sk(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var n=this.state,o=n.brushMoveStartX,i=n.movingTravellerId,l=n.endX,c=n.startX,d=this.state[i],u=this.props,m=u.x,x=u.width,h=u.travellerWidth,b=u.onChange,p=u.gap,f=u.data,v={startX:this.state.startX,endX:this.state.endX},g=s.pageX-o;g>0?g=Math.min(g,m+x-h-d):g<0&&(g=Math.max(g,m-d)),v[i]=d+g;var y=this.getIndex(v),N=y.startIndex,_=y.endIndex,w=function(){var C=f.length-1;return i==="startX"&&(l>c?N%p===0:_%p===0)||l<c&&_===C||i==="endX"&&(l>c?_%p===0:N%p===0)||l>c&&_===C};this.setState(Ss(Ss({},i,d+g),"brushMoveStartX",s.pageX),function(){b&&w()&&b(y)})}},{key:"handleTravellerMoveKeyboard",value:function(s,n){var o=this,i=this.state,l=i.scaleValues,c=i.startX,d=i.endX,u=this.state[n],m=l.indexOf(u);if(m!==-1){var x=m+s;if(!(x===-1||x>=l.length)){var h=l[x];n==="startX"&&h>=d||n==="endX"&&h<=c||this.setState(Ss({},n,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.fill,d=s.stroke;return pe.createElement("rect",{stroke:d,fill:c,x:n,y:o,width:i,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,m=j.Children.only(d);return m?pe.cloneElement(m,{x:n,y:o,width:i,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,n){var o,i,l=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,x=c.traveller,h=c.ariaLabel,b=c.data,p=c.startIndex,f=c.endIndex,v=Math.max(s,this.props.x),g=Nv(Nv({},St(this.props,!1)),{},{x:v,y:d,width:u,height:m}),y=h||"Min value: ".concat((o=b[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=b[f])===null||i===void 0?void 0:i.name);return pe.createElement(Ut,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,n))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(x,g))}},{key:"renderSlide",value:function(s,n){var o=this.props,i=o.y,l=o.height,c=o.stroke,d=o.travellerWidth,u=Math.min(s,n)+d,m=Math.max(Math.abs(n-s)-d,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:i,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,n=s.startIndex,o=s.endIndex,i=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,m=u.startX,x=u.endX,h=5,b={pointerEvents:"none",fill:d};return pe.createElement(Ut,{className:"recharts-brush-texts"},pe.createElement(Hl,xf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-h,y:i+l/2},b),this.getTextOfTick(n)),pe.createElement(Hl,xf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+c+h,y:i+l/2},b),this.getTextOfTick(o)))}},{key:"render",value:function(){var s=this.props,n=s.data,o=s.className,i=s.children,l=s.x,c=s.y,d=s.width,u=s.height,m=s.alwaysShowText,x=this.state,h=x.startX,b=x.endX,p=x.isTextActive,f=x.isSlideMoving,v=x.isTravellerMoving,g=x.isTravellerFocused;if(!n||!n.length||!rt(l)||!rt(c)||!rt(d)||!rt(u)||d<=0||u<=0)return null;var y=It("recharts-brush",o),N=pe.Children.count(i)===1,_=Lue("userSelect","none");return pe.createElement(Ut,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(h,b),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(b,"endX"),(p||f||v||g||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var n=s.x,o=s.y,i=s.width,l=s.height,c=s.stroke,d=Math.floor(o+l/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:n,y:o,width:i,height:l,fill:c,stroke:"none"}),pe.createElement("line",{x1:n+1,y1:d,x2:n+i-1,y2:d,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:n+1,y1:d+2,x2:n+i-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,n){var o;return pe.isValidElement(s)?o=pe.cloneElement(s,n):Et(s)?o=s(n):o=r.renderDefaultTraveller(n),o}},{key:"getDerivedStateFromProps",value:function(s,n){var o=s.data,i=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,m=s.endIndex;if(o!==n.prevData||d!==n.prevUpdateId)return Nv({prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i},o&&o.length?Kue({data:o,width:i,x:l,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(n.scale&&(i!==n.prevWidth||l!==n.prevX||c!==n.prevTravellerWidth)){n.scale.range([l,l+i-c]);var x=n.scale.domain().map(function(h){return n.scale(h)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i,startX:n.scale(s.startIndex),endX:n.scale(s.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(s,n){for(var o=s.length,i=0,l=o-1;l-i>1;){var c=Math.floor((i+l)/2);s[c]>n?l=c:i=c}return n>=s[l]?l:i}}])}(j.PureComponent);Ss(Bd,"displayName","Brush");Ss(Bd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Gue=mN;function Xue(t,r){var a;return Gue(t,function(s,n,o){return a=r(s,n,o),!a}),!!a}var Yue=Xue,Que=oT,Jue=oo,Zue=Yue,eme=Ns,tme=Lg;function rme(t,r,a){var s=eme(t)?Que:Zue;return a&&tme(t,r,a)&&(r=void 0),s(t,Jue(r))}var ame=rme;const sme=mr(ame);var eo=function(r,a){var s=r.alwaysShow,n=r.ifOverflow;return s&&(n="extendDomain"),n===a},nk=ET;function nme(t,r,a){r=="__proto__"&&nk?nk(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a}var ome=nme,ime=ome,lme=CT,cme=oo;function dme(t,r){var a={};return r=cme(r),lme(t,function(s,n,o){ime(a,n,r(s,n,o))}),a}var ume=dme;const mme=mr(ume);function xme(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}var pme=xme,hme=mN;function fme(t,r){var a=!0;return hme(t,function(s,n,o){return a=!!r(s,n,o),a}),a}var gme=fme,bme=pme,vme=gme,yme=oo,jme=Ns,Nme=Lg;function wme(t,r,a){var s=jme(t)?bme:vme;return a&&Nme(t,r,a)&&(r=void 0),s(t,yme(r))}var _me=wme;const hF=mr(_me);var Sme=["x","y"];function Ax(t){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ax(t)}function s1(){return s1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},s1.apply(this,arguments)}function ok(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Hu(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ok(Object(a),!0).forEach(function(s){Cme(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ok(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Cme(t,r,a){return r=kme(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function kme(t){var r=Eme(t,"string");return Ax(r)=="symbol"?r:r+""}function Eme(t,r){if(Ax(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ax(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ame(t,r){if(t==null)return{};var a=Pme(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Pme(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Tme(t,r){var a=t.x,s=t.y,n=Ame(t,Sme),o="".concat(a),i=parseInt(o,10),l="".concat(s),c=parseInt(l,10),d="".concat(r.height||n.height),u=parseInt(d,10),m="".concat(r.width||n.width),x=parseInt(m,10);return Hu(Hu(Hu(Hu(Hu({},r),n),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:x,name:r.name,radius:r.radius})}function ik(t){return pe.createElement(lF,s1({shapeType:"rectangle",propTransformer:Tme,activeClassName:"recharts-active-bar"},t))}var Ome=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,n){if(typeof r=="number")return r;var o=rt(s)||nW(s);return o?r(s,n):(o||Xl(),a)}},Fme=["value","background"],fF;function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zd(t)}function Rme(t,r){if(t==null)return{};var a=$me(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function $me(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},hf.apply(this,arguments)}function lk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Zr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?lk(Object(a),!0).forEach(function(s){fi(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Dme(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ck(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,bF(s.key),s)}}function Mme(t,r,a){return r&&ck(t.prototype,r),a&&ck(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ime(t,r,a){return r=ff(r),Lme(t,gF()?Reflect.construct(r,a||[],ff(t).constructor):r.apply(t,a))}function Lme(t,r){if(r&&(zd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bme(t)}function Bme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gF=function(){return!!t})()}function ff(t){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ff(t)}function zme(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&n1(t,r)}function n1(t,r){return n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},n1(t,r)}function fi(t,r,a){return r=bF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function bF(t){var r=qme(t,"string");return zd(r)=="symbol"?r:r+""}function qme(t,r){if(zd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mr=function(t){function r(){var a;Dme(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=Ime(this,r,[].concat(n)),fi(a,"state",{isAnimationFinished:!1}),fi(a,"id",oc("recharts-bar-")),fi(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),i&&i()}),fi(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),i&&i()}),a}return zme(r,t),Mme(r,[{key:"renderRectanglesStatically",value:function(s){var n=this,o=this.props,i=o.shape,l=o.dataKey,c=o.activeIndex,d=o.activeBar,u=St(this.props,!1);return s&&s.map(function(m,x){var h=x===c,b=h?d:i,p=Zr(Zr(Zr({},u),m),{},{isActive:h,option:b,index:x,dataKey:l,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return pe.createElement(Ut,hf({className:"recharts-bar-rectangle"},Wl(n.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),pe.createElement(ik,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,n=this.props,o=n.data,i=n.layout,l=n.isAnimationActive,c=n.animationBegin,d=n.animationDuration,u=n.animationEasing,m=n.animationId,x=this.state.prevData;return pe.createElement(Tn,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var b=h.t,p=o.map(function(f,v){var g=x&&x[v];if(g){var y=xa(g.x,f.x),N=xa(g.y,f.y),_=xa(g.width,f.width),w=xa(g.height,f.height);return Zr(Zr({},f),{},{x:y(b),y:N(b),width:_(b),height:w(b)})}if(i==="horizontal"){var S=xa(0,f.height),C=S(b);return Zr(Zr({},f),{},{y:f.y+f.height-C,height:C})}var k=xa(0,f.width),F=k(b);return Zr(Zr({},f),{},{width:F})});return pe.createElement(Ut,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,n=s.data,o=s.isAnimationActive,i=this.state.prevData;return o&&n&&n.length&&(!i||!Kl(i,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var s=this,n=this.props,o=n.data,i=n.dataKey,l=n.activeIndex,c=St(this.props.background,!1);return o.map(function(d,u){d.value;var m=d.background,x=Rme(d,Fme);if(!m)return null;var h=Zr(Zr(Zr(Zr(Zr({},x),{},{fill:"#eee"},m),c),Wl(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:i,index:u,className:"recharts-bar-background-rectangle"});return pe.createElement(ik,hf({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},h))})}},{key:"renderErrorBar",value:function(s,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=Ms(u,o0);if(!m)return null;var x=d==="vertical"?i[0].height/2:i[0].width/2,h=function(f,v){var g=Array.isArray(f.value)?f.value[1]:f.value;return{x:f.x,y:f.y,value:g,errorVal:Kr(f,v)}},b={clipPath:s?"url(#clipPath-".concat(n,")"):null};return pe.createElement(Ut,b,m.map(function(p){return pe.cloneElement(p,{key:"error-bar-".concat(n,"-").concat(p.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,offset:x,dataPointFormatter:h})}))}},{key:"render",value:function(){var s=this.props,n=s.hide,o=s.data,i=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,m=s.width,x=s.height,h=s.isAnimationActive,b=s.background,p=s.id;if(n||!o||!o.length)return null;var f=this.state.isAnimationFinished,v=It("recharts-bar",i),g=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,N=g||y,_=Rt(p)?this.id:p;return pe.createElement(Ut,{className:v},g||y?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(_)},pe.createElement("rect",{x:g?d:d-m/2,y:y?u:u-x/2,width:g?m:m*2,height:y?x:x*2}))):null,pe.createElement(Ut,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(_,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,_),(!h||f)&&Zn.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:n.curData}:s.data!==n.curData?{curData:s.data}:null}}])}(j.PureComponent);fF=Mr;fi(Mr,"displayName","Bar");fi(Mr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Vi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});fi(Mr,"getComposedData",function(t){var r=t.props,a=t.item,s=t.barPosition,n=t.bandSize,o=t.xAxis,i=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,x=t.offset,h=woe(s,a);if(!h)return null;var b=r.layout,p=a.type.defaultProps,f=p!==void 0?Zr(Zr({},p),a.props):a.props,v=f.dataKey,g=f.children,y=f.minPointSize,N=b==="horizontal"?i:o,_=d?N.scale.domain():null,w=Poe({numericAxis:N}),S=Ms(g,Sl),C=m.map(function(k,F){var q,A,T,U,K,I;d?q=_oe(d[u+F],_):(q=Kr(k,v),Array.isArray(q)||(q=[w,q]));var Y=Ome(y,fF.defaultProps.minPointSize)(q[1],F);if(b==="horizontal"){var D,W=[i.scale(q[0]),i.scale(q[1])],R=W[0],B=W[1];A=tC({axis:o,ticks:l,bandSize:n,offset:h.offset,entry:k,index:F}),T=(D=B??R)!==null&&D!==void 0?D:void 0,U=h.size;var O=R-B;if(K=Number.isNaN(O)?0:O,I={x:A,y:i.y,width:U,height:i.height},Math.abs(Y)>0&&Math.abs(K)<Math.abs(Y)){var L=Ja(K||Y)*(Math.abs(Y)-Math.abs(K));T-=L,K+=L}}else{var E=[o.scale(q[0]),o.scale(q[1])],M=E[0],z=E[1];if(A=M,T=tC({axis:i,ticks:c,bandSize:n,offset:h.offset,entry:k,index:F}),U=z-M,K=h.size,I={x:o.x,y:T,width:o.width,height:K},Math.abs(Y)>0&&Math.abs(U)<Math.abs(Y)){var le=Ja(U||Y)*(Math.abs(Y)-Math.abs(U));U+=le}}return Zr(Zr(Zr({},k),{},{x:A,y:T,width:U,height:K,value:d?q:q[1],payload:k,background:I},S&&S[F]&&S[F].props),{},{tooltipPayload:[VO(a,k)],tooltipPosition:{x:A+U/2,y:T+K/2}})});return Zr({data:C,layout:b},x)});function Px(t){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Px(t)}function Vme(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function dk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,vF(s.key),s)}}function Ume(t,r,a){return r&&dk(t.prototype,r),a&&dk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function uk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function bn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?uk(Object(a),!0).forEach(function(s){rb(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):uk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function rb(t,r,a){return r=vF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function vF(t){var r=Wme(t,"string");return Px(r)=="symbol"?r:r+""}function Wme(t,r){if(Px(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Px(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var zN=function(r,a,s,n,o){var i=r.width,l=r.height,c=r.layout,d=r.children,u=Object.keys(a),m={left:s.left,leftMirror:s.left,right:i-s.right,rightMirror:i-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},x=!!Es(d,Mr);return u.reduce(function(h,b){var p=a[b],f=p.orientation,v=p.domain,g=p.padding,y=g===void 0?{}:g,N=p.mirror,_=p.reversed,w="".concat(f).concat(N?"Mirror":""),S,C,k,F,q;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var A=v[1]-v[0],T=1/0,U=p.categoricalDomain.sort(lW);if(U.forEach(function(E,M){M>0&&(T=Math.min((E||0)-(U[M-1]||0),T))}),Number.isFinite(T)){var K=T/A,I=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(S=K*I/2),p.padding==="no-gap"){var Y=Za(r.barCategoryGap,K*I),D=K*I/2;S=D-Y-(D-Y)/I*Y}}}n==="xAxis"?C=[s.left+(y.left||0)+(S||0),s.left+s.width-(y.right||0)-(S||0)]:n==="yAxis"?C=c==="horizontal"?[s.top+s.height-(y.bottom||0),s.top+(y.top||0)]:[s.top+(y.top||0)+(S||0),s.top+s.height-(y.bottom||0)-(S||0)]:C=p.range,_&&(C=[C[1],C[0]]);var W=LO(p,o,x),R=W.scale,B=W.realScaleType;R.domain(v).range(C),BO(R);var O=zO(R,bn(bn({},p),{},{realScaleType:B}));n==="xAxis"?(q=f==="top"&&!N||f==="bottom"&&N,k=s.left,F=m[w]-q*p.height):n==="yAxis"&&(q=f==="left"&&!N||f==="right"&&N,k=m[w]-q*p.width,F=s.top);var L=bn(bn(bn({},p),O),{},{realScaleType:B,x:k,y:F,scale:R,width:n==="xAxis"?s.width:p.width,height:n==="yAxis"?s.height:p.height});return L.bandSize=Jh(L,O),!p.hide&&n==="xAxis"?m[w]+=(q?-1:1)*L.height:p.hide||(m[w]+=(q?-1:1)*L.width),bn(bn({},h),{},rb({},b,L))},{})},yF=function(r,a){var s=r.x,n=r.y,o=a.x,i=a.y;return{x:Math.min(s,o),y:Math.min(n,i),width:Math.abs(o-s),height:Math.abs(i-n)}},Hme=function(r){var a=r.x1,s=r.y1,n=r.x2,o=r.y2;return yF({x:a,y:s},{x:n,y:o})},jF=function(){function t(r){Vme(this,t),this.scale=r}return Ume(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.bandAware,o=s.position;if(a!==void 0){if(o)switch(o){case"start":return this.scale(a);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(a)+l}default:return this.scale(a)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}return this.scale(a)}}},{key:"isInRange",value:function(a){var s=this.range(),n=s[0],o=s[s.length-1];return n<=o?a>=n&&a<=o:a>=o&&a<=n}}],[{key:"create",value:function(a){return new t(a)}}])}();rb(jF,"EPS",1e-4);var qN=function(r){var a=Object.keys(r).reduce(function(s,n){return bn(bn({},s),{},rb({},n,jF.create(r[n])))},{});return bn(bn({},a),{},{apply:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,l=o.position;return mme(n,function(c,d){return a[d].apply(c,{bandAware:i,position:l})})},isInRange:function(n){return hF(n,function(o,i){return a[i].isInRange(o)})}})};function Kme(t){return(t%180+180)%180}var Gme=function(r){var a=r.width,s=r.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Kme(n),i=o*Math.PI/180,l=Math.atan(s/a),c=i>l&&i<Math.PI-l?s/Math.sin(i):a/Math.cos(i);return Math.abs(c)},Xme=oo,Yme=t0,Qme=Mg;function Jme(t){return function(r,a,s){var n=Object(r);if(!Yme(r)){var o=Xme(a);r=Qme(r),a=function(l){return o(n[l],l,n)}}var i=t(r,a,s);return i>-1?n[o?r[i]:i]:void 0}}var Zme=Jme,exe=uF;function txe(t){var r=exe(t),a=r%1;return r===r?a?r-a:r:0}var rxe=txe,axe=yT,sxe=oo,nxe=rxe,oxe=Math.max;function ixe(t,r,a){var s=t==null?0:t.length;if(!s)return-1;var n=a==null?0:nxe(a);return n<0&&(n=oxe(s+n,0)),axe(t,sxe(r),n)}var lxe=ixe,cxe=Zme,dxe=lxe,uxe=cxe(dxe),mxe=uxe;const xxe=mr(mxe);var pxe=uU(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),VN=j.createContext(void 0),UN=j.createContext(void 0),NF=j.createContext(void 0),wF=j.createContext({}),_F=j.createContext(void 0),SF=j.createContext(0),CF=j.createContext(0),mk=function(r){var a=r.state,s=a.xAxisMap,n=a.yAxisMap,o=a.offset,i=r.clipPathId,l=r.children,c=r.width,d=r.height,u=pxe(o);return pe.createElement(VN.Provider,{value:s},pe.createElement(UN.Provider,{value:n},pe.createElement(wF.Provider,{value:o},pe.createElement(NF.Provider,{value:u},pe.createElement(_F.Provider,{value:i},pe.createElement(SF.Provider,{value:d},pe.createElement(CF.Provider,{value:c},l)))))))},hxe=function(){return j.useContext(_F)},kF=function(r){var a=j.useContext(VN);a==null&&Xl();var s=a[r];return s==null&&Xl(),s},fxe=function(){var r=j.useContext(VN);return di(r)},gxe=function(){var r=j.useContext(UN),a=xxe(r,function(s){return hF(s.domain,Number.isFinite)});return a||di(r)},EF=function(r){var a=j.useContext(UN);a==null&&Xl();var s=a[r];return s==null&&Xl(),s},bxe=function(){var r=j.useContext(NF);return r},vxe=function(){return j.useContext(wF)},WN=function(){return j.useContext(CF)},HN=function(){return j.useContext(SF)};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qd(t)}function yxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function jxe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,PF(s.key),s)}}function Nxe(t,r,a){return r&&jxe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wxe(t,r,a){return r=gf(r),_xe(t,AF()?Reflect.construct(r,a||[],gf(t).constructor):r.apply(t,a))}function _xe(t,r){if(r&&(qd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sxe(t)}function Sxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AF=function(){return!!t})()}function gf(t){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},gf(t)}function Cxe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&o1(t,r)}function o1(t,r){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},o1(t,r)}function xk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function pk(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xk(Object(a),!0).forEach(function(s){KN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function KN(t,r,a){return r=PF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function PF(t){var r=kxe(t,"string");return qd(r)=="symbol"?r:r+""}function kxe(t,r){if(qd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(qd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Exe(t,r){return Oxe(t)||Txe(t,r)||Pxe(t,r)||Axe()}function Axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pxe(t,r){if(t){if(typeof t=="string")return hk(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hk(t,r)}}function hk(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Txe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Oxe(t){if(Array.isArray(t))return t}function i1(){return i1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},i1.apply(this,arguments)}var Fxe=function(r,a){var s;return pe.isValidElement(r)?s=pe.cloneElement(r,a):Et(r)?s=r(a):s=pe.createElement("line",i1({},a,{className:"recharts-reference-line-line"})),s},Rxe=function(r,a,s,n,o,i,l,c,d){var u=o.x,m=o.y,x=o.width,h=o.height;if(s){var b=d.y,p=r.y.apply(b,{position:i});if(eo(d,"discard")&&!r.y.isInRange(p))return null;var f=[{x:u+x,y:p},{x:u,y:p}];return c==="left"?f.reverse():f}if(a){var v=d.x,g=r.x.apply(v,{position:i});if(eo(d,"discard")&&!r.x.isInRange(g))return null;var y=[{x:g,y:m+h},{x:g,y:m}];return l==="top"?y.reverse():y}if(n){var N=d.segment,_=N.map(function(w){return r.apply(w,{position:i})});return eo(d,"discard")&&sme(_,function(w){return!r.isInRange(w)})?null:_}return null};function $xe(t){var r=t.x,a=t.y,s=t.segment,n=t.xAxisId,o=t.yAxisId,i=t.shape,l=t.className,c=t.alwaysShow,d=hxe(),u=kF(n),m=EF(o),x=bxe();if(!d||!x)return null;En(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=qN({x:u.scale,y:m.scale}),b=ha(r),p=ha(a),f=s&&s.length===2,v=Rxe(h,b,p,f,x,t.position,u.orientation,m.orientation,t);if(!v)return null;var g=Exe(v,2),y=g[0],N=y.x,_=y.y,w=g[1],S=w.x,C=w.y,k=eo(t,"hidden")?"url(#".concat(d,")"):void 0,F=pk(pk({clipPath:k},St(t,!0)),{},{x1:N,y1:_,x2:S,y2:C});return pe.createElement(Ut,{className:It("recharts-reference-line",l)},Fxe(i,F),ja.renderCallByParent(t,Hme({x1:N,y1:_,x2:S,y2:C})))}var GN=function(t){function r(){return yxe(this,r),wxe(this,r,arguments)}return Cxe(r,t),Nxe(r,[{key:"render",value:function(){return pe.createElement($xe,this.props)}}])}(pe.Component);KN(GN,"displayName","ReferenceLine");KN(GN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function l1(){return l1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},l1.apply(this,arguments)}function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vd(t)}function fk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function gk(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?fk(Object(a),!0).forEach(function(s){ab(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):fk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Dxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Mxe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,OF(s.key),s)}}function Ixe(t,r,a){return r&&Mxe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lxe(t,r,a){return r=bf(r),Bxe(t,TF()?Reflect.construct(r,a||[],bf(t).constructor):r.apply(t,a))}function Bxe(t,r){if(r&&(Vd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zxe(t)}function zxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TF=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},bf(t)}function qxe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&c1(t,r)}function c1(t,r){return c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},c1(t,r)}function ab(t,r,a){return r=OF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function OF(t){var r=Vxe(t,"string");return Vd(r)=="symbol"?r:r+""}function Vxe(t,r){if(Vd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Vd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uxe=function(r){var a=r.x,s=r.y,n=r.xAxis,o=r.yAxis,i=qN({x:n.scale,y:o.scale}),l=i.apply({x:a,y:s},{bandAware:!0});return eo(r,"discard")&&!i.isInRange(l)?null:l},sb=function(t){function r(){return Dxe(this,r),Lxe(this,r,arguments)}return qxe(r,t),Ixe(r,[{key:"render",value:function(){var s=this.props,n=s.x,o=s.y,i=s.r,l=s.alwaysShow,c=s.clipPathId,d=ha(n),u=ha(o);if(En(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=Uxe(this.props);if(!m)return null;var x=m.x,h=m.y,b=this.props,p=b.shape,f=b.className,v=eo(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=gk(gk({clipPath:v},St(this.props,!0)),{},{cx:x,cy:h});return pe.createElement(Ut,{className:It("recharts-reference-dot",f)},r.renderDot(p,g),ja.renderCallByParent(this.props,{x:x-i,y:h-i,width:2*i,height:2*i}))}}])}(pe.Component);ab(sb,"displayName","ReferenceDot");ab(sb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ab(sb,"renderDot",function(t,r){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,r):Et(t)?a=t(r):a=pe.createElement(i0,l1({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),a});function d1(){return d1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},d1.apply(this,arguments)}function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ud(t)}function bk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function vk(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?bk(Object(a),!0).forEach(function(s){nb(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Wxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Hxe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,RF(s.key),s)}}function Kxe(t,r,a){return r&&Hxe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gxe(t,r,a){return r=vf(r),Xxe(t,FF()?Reflect.construct(r,a||[],vf(t).constructor):r.apply(t,a))}function Xxe(t,r){if(r&&(Ud(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yxe(t)}function Yxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FF=function(){return!!t})()}function vf(t){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},vf(t)}function Qxe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&u1(t,r)}function u1(t,r){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},u1(t,r)}function nb(t,r,a){return r=RF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function RF(t){var r=Jxe(t,"string");return Ud(r)=="symbol"?r:r+""}function Jxe(t,r){if(Ud(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ud(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zxe=function(r,a,s,n,o){var i=o.x1,l=o.x2,c=o.y1,d=o.y2,u=o.xAxis,m=o.yAxis;if(!u||!m)return null;var x=qN({x:u.scale,y:m.scale}),h={x:r?x.x.apply(i,{position:"start"}):x.x.rangeMin,y:s?x.y.apply(c,{position:"start"}):x.y.rangeMin},b={x:a?x.x.apply(l,{position:"end"}):x.x.rangeMax,y:n?x.y.apply(d,{position:"end"}):x.y.rangeMax};return eo(o,"discard")&&(!x.isInRange(h)||!x.isInRange(b))?null:yF(h,b)},ob=function(t){function r(){return Wxe(this,r),Gxe(this,r,arguments)}return Qxe(r,t),Kxe(r,[{key:"render",value:function(){var s=this.props,n=s.x1,o=s.x2,i=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;En(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=ha(n),x=ha(o),h=ha(i),b=ha(l),p=this.props.shape;if(!m&&!x&&!h&&!b&&!p)return null;var f=Zxe(m,x,h,b,this.props);if(!f&&!p)return null;var v=eo(this.props,"hidden")?"url(#".concat(u,")"):void 0;return pe.createElement(Ut,{className:It("recharts-reference-area",c)},r.renderRect(p,vk(vk({clipPath:v},St(this.props,!0)),f)),ja.renderCallByParent(this.props,f))}}])}(pe.Component);nb(ob,"displayName","ReferenceArea");nb(ob,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});nb(ob,"renderRect",function(t,r){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,r):Et(t)?a=t(r):a=pe.createElement(BN,d1({},r,{className:"recharts-reference-area-rect"})),a});function $F(t,r,a){if(r<1)return[];if(r===1&&a===void 0)return t;for(var s=[],n=0;n<t.length;n+=r)s.push(t[n]);return s}function e0e(t,r,a){var s={width:t.width+r.width,height:t.height+r.height};return Gme(s,a)}function t0e(t,r,a){var s=a==="width",n=t.x,o=t.y,i=t.width,l=t.height;return r===1?{start:s?n:o,end:s?n+i:o+l}:{start:s?n+i:o+l,end:s?n:o}}function yf(t,r,a,s,n){if(t*r<t*s||t*r>t*n)return!1;var o=a();return t*(r-t*o/2-s)>=0&&t*(r+t*o/2-n)<=0}function r0e(t,r){return $F(t,r+1)}function a0e(t,r,a,s,n){for(var o=(s||[]).slice(),i=r.start,l=r.end,c=0,d=1,u=i,m=function(){var b=s==null?void 0:s[c];if(b===void 0)return{v:$F(s,d)};var p=c,f,v=function(){return f===void 0&&(f=a(b,p)),f},g=b.coordinate,y=c===0||yf(t,g,v,u,l);y||(c=0,u=i,d+=1),y&&(u=g+t*(v()/2+n),c+=d)},x;d<=o.length;)if(x=m(),x)return x.v;return[]}function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tx(t)}function yk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function za(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?yk(Object(a),!0).forEach(function(s){s0e(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function s0e(t,r,a){return r=n0e(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function n0e(t){var r=o0e(t,"string");return Tx(r)=="symbol"?r:r+""}function o0e(t,r){if(Tx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Tx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function i0e(t,r,a,s,n){for(var o=(s||[]).slice(),i=o.length,l=r.start,c=r.end,d=function(x){var h=o[x],b,p=function(){return b===void 0&&(b=a(h,x)),b};if(x===i-1){var f=t*(h.coordinate+t*p()/2-c);o[x]=h=za(za({},h),{},{tickCoord:f>0?h.coordinate-f*t:h.coordinate})}else o[x]=h=za(za({},h),{},{tickCoord:h.coordinate});var v=yf(t,h.tickCoord,p,l,c);v&&(c=h.tickCoord-t*(p()/2+n),o[x]=za(za({},h),{},{isShow:!0}))},u=i-1;u>=0;u--)d(u);return o}function l0e(t,r,a,s,n,o){var i=(s||[]).slice(),l=i.length,c=r.start,d=r.end;if(o){var u=s[l-1],m=a(u,l-1),x=t*(u.coordinate+t*m/2-d);i[l-1]=u=za(za({},u),{},{tickCoord:x>0?u.coordinate-x*t:u.coordinate});var h=yf(t,u.tickCoord,function(){return m},c,d);h&&(d=u.tickCoord-t*(m/2+n),i[l-1]=za(za({},u),{},{isShow:!0}))}for(var b=o?l-1:l,p=function(g){var y=i[g],N,_=function(){return N===void 0&&(N=a(y,g)),N};if(g===0){var w=t*(y.coordinate-t*_()/2-c);i[g]=y=za(za({},y),{},{tickCoord:w<0?y.coordinate-w*t:y.coordinate})}else i[g]=y=za(za({},y),{},{tickCoord:y.coordinate});var S=yf(t,y.tickCoord,_,c,d);S&&(c=y.tickCoord+t*(_()/2+n),i[g]=za(za({},y),{},{isShow:!0}))},f=0;f<b;f++)p(f);return i}function XN(t,r,a){var s=t.tick,n=t.ticks,o=t.viewBox,i=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!n||!n.length||!s)return[];if(rt(c)||Vi.isSsr)return r0e(n,typeof c=="number"&&rt(c)?c:0);var x=[],h=l==="top"||l==="bottom"?"width":"height",b=u&&h==="width"?xm(u,{fontSize:r,letterSpacing:a}):{width:0,height:0},p=function(y,N){var _=Et(d)?d(y.value,N):y.value;return h==="width"?e0e(xm(_,{fontSize:r,letterSpacing:a}),b,m):xm(_,{fontSize:r,letterSpacing:a})[h]},f=n.length>=2?Ja(n[1].coordinate-n[0].coordinate):1,v=t0e(o,f,h);return c==="equidistantPreserveStart"?a0e(f,v,p,n,i):(c==="preserveStart"||c==="preserveStartEnd"?x=l0e(f,v,p,n,i,c==="preserveStartEnd"):x=i0e(f,v,p,n,i),x.filter(function(g){return g.isShow}))}var c0e=["viewBox"],d0e=["viewBox"],u0e=["ticks"];function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wd(t)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Hc.apply(this,arguments)}function jk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function la(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?jk(Object(a),!0).forEach(function(s){YN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function wv(t,r){if(t==null)return{};var a=m0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function m0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function x0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Nk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,MF(s.key),s)}}function p0e(t,r,a){return r&&Nk(t.prototype,r),a&&Nk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function h0e(t,r,a){return r=jf(r),f0e(t,DF()?Reflect.construct(r,a||[],jf(t).constructor):r.apply(t,a))}function f0e(t,r){if(r&&(Wd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g0e(t)}function g0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DF=function(){return!!t})()}function jf(t){return jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},jf(t)}function b0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&m1(t,r)}function m1(t,r){return m1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},m1(t,r)}function YN(t,r,a){return r=MF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function MF(t){var r=v0e(t,"string");return Wd(r)=="symbol"?r:r+""}function v0e(t,r){if(Wd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Wd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vu=function(t){function r(a){var s;return x0e(this,r),s=h0e(this,r,[a]),s.state={fontSize:"",letterSpacing:""},s}return b0e(r,t),p0e(r,[{key:"shouldComponentUpdate",value:function(s,n){var o=s.viewBox,i=wv(s,c0e),l=this.props,c=l.viewBox,d=wv(l,d0e);return!sd(o,c)||!sd(i,d)||!sd(n,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var n=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var n=this.props,o=n.x,i=n.y,l=n.width,c=n.height,d=n.orientation,u=n.tickSize,m=n.mirror,x=n.tickMargin,h,b,p,f,v,g,y=m?-1:1,N=s.tickSize||u,_=rt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":h=b=s.coordinate,f=i+ +!m*c,p=f-y*N,g=p-y*x,v=_;break;case"left":p=f=s.coordinate,b=o+ +!m*l,h=b-y*N,v=h-y*x,g=_;break;case"right":p=f=s.coordinate,b=o+ +m*l,h=b+y*N,v=h+y*x,g=_;break;default:h=b=s.coordinate,f=i+ +m*c,p=f+y*N,g=p+y*x,v=_;break}return{line:{x1:h,y1:p,x2:b,y2:f},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,n=s.orientation,o=s.mirror,i;switch(n){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,n=s.orientation,o=s.mirror,i="end";switch(n){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,m=la(la(la({},St(this.props,!1)),St(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var x=+(c==="top"&&!d||c==="bottom"&&d);m=la(la({},m),{},{x1:n,y1:o+x*l,x2:n+i,y2:o+x*l})}else{var h=+(c==="left"&&!d||c==="right"&&d);m=la(la({},m),{},{x1:n+h*i,y1:o,x2:n+h*i,y2:o+l})}return pe.createElement("line",Hc({},m,{className:It("recharts-cartesian-axis-line",Ds(u,"className"))}))}},{key:"renderTicks",value:function(s,n,o){var i=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,m=l.tickFormatter,x=l.unit,h=XN(la(la({},this.props),{},{ticks:s}),n,o),b=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=St(this.props,!1),v=St(u,!1),g=la(la({},f),{},{fill:"none"},St(c,!1)),y=h.map(function(N,_){var w=i.getTickLineCoord(N),S=w.line,C=w.tick,k=la(la(la(la({textAnchor:b,verticalAnchor:p},f),{},{stroke:"none",fill:d},v),C),{},{index:_,payload:N,visibleTicksCount:h.length,tickFormatter:m});return pe.createElement(Ut,Hc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Wl(i.props,N,_)),c&&pe.createElement("line",Hc({},g,S,{className:It("recharts-cartesian-axis-tick-line",Ds(c,"className"))})),u&&r.renderTickItem(u,k,"".concat(Et(m)?m(N.value,_):N.value).concat(x||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var s=this,n=this.props,o=n.axisLine,i=n.width,l=n.height,c=n.ticksGenerator,d=n.className,u=n.hide;if(u)return null;var m=this.props,x=m.ticks,h=wv(m,u0e),b=x;return Et(c)&&(b=x&&x.length>0?c(this.props):c(h)),i<=0||l<=0||!b||!b.length?null:pe.createElement(Ut,{className:It("recharts-cartesian-axis",d),ref:function(f){s.layerReference=f}},o&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),ja.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,n,o){var i,l=It(n.className,"recharts-cartesian-axis-tick-value");return pe.isValidElement(s)?i=pe.cloneElement(s,la(la({},n),{},{className:l})):Et(s)?i=s(la(la({},n),{},{className:l})):i=pe.createElement(Hl,Hc({},n,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(j.Component);YN(vu,"displayName","CartesianAxis");YN(vu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var y0e=["x1","y1","x2","y2","key"],j0e=["offset"];function Yl(t){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yl(t)}function wk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Va(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wk(Object(a),!0).forEach(function(s){N0e(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function N0e(t,r,a){return r=w0e(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function w0e(t){var r=_0e(t,"string");return Yl(r)=="symbol"?r:r+""}function _0e(t,r){if(Yl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Yl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function gl(){return gl=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},gl.apply(this,arguments)}function _k(t,r){if(t==null)return{};var a=S0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function S0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var C0e=function(r){var a=r.fill;if(!a||a==="none")return null;var s=r.fillOpacity,n=r.x,o=r.y,i=r.width,l=r.height,c=r.ry;return pe.createElement("rect",{x:n,y:o,ry:c,width:i,height:l,stroke:"none",fill:a,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function IF(t,r){var a;if(pe.isValidElement(t))a=pe.cloneElement(t,r);else if(Et(t))a=t(r);else{var s=r.x1,n=r.y1,o=r.x2,i=r.y2,l=r.key,c=_k(r,y0e),d=St(c,!1);d.offset;var u=_k(d,j0e);a=pe.createElement("line",gl({},u,{x1:s,y1:n,x2:o,y2:i,fill:"none",key:l}))}return a}function k0e(t){var r=t.x,a=t.width,s=t.horizontal,n=s===void 0?!0:s,o=t.horizontalPoints;if(!n||!o||!o.length)return null;var i=o.map(function(l,c){var d=Va(Va({},t),{},{x1:r,y1:l,x2:r+a,y2:l,key:"line-".concat(c),index:c});return IF(n,d)});return pe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function E0e(t){var r=t.y,a=t.height,s=t.vertical,n=s===void 0?!0:s,o=t.verticalPoints;if(!n||!o||!o.length)return null;var i=o.map(function(l,c){var d=Va(Va({},t),{},{x1:l,y1:r,x2:l,y2:r+a,key:"line-".concat(c),index:c});return IF(n,d)});return pe.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function A0e(t){var r=t.horizontalFill,a=t.fillOpacity,s=t.x,n=t.y,o=t.width,i=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!r||!r.length)return null;var u=l.map(function(x){return Math.round(x+n-n)}).sort(function(x,h){return x-h});n!==u[0]&&u.unshift(0);var m=u.map(function(x,h){var b=!u[h+1],p=b?n+i-x:u[h+1]-x;if(p<=0)return null;var f=h%r.length;return pe.createElement("rect",{key:"react-".concat(h),y:x,x:s,height:p,width:o,stroke:"none",fill:r[f],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function P0e(t){var r=t.vertical,a=r===void 0?!0:r,s=t.verticalFill,n=t.fillOpacity,o=t.x,i=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!a||!s||!s.length)return null;var u=d.map(function(x){return Math.round(x+o-o)}).sort(function(x,h){return x-h});o!==u[0]&&u.unshift(0);var m=u.map(function(x,h){var b=!u[h+1],p=b?o+l-x:u[h+1]-x;if(p<=0)return null;var f=h%s.length;return pe.createElement("rect",{key:"react-".concat(h),x,y:i,width:p,height:c,stroke:"none",fill:s[f],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var T0e=function(r,a){var s=r.xAxis,n=r.width,o=r.height,i=r.offset;return IO(XN(Va(Va(Va({},vu.defaultProps),s),{},{ticks:yo(s,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.left,i.left+i.width,a)},O0e=function(r,a){var s=r.yAxis,n=r.width,o=r.height,i=r.offset;return IO(XN(Va(Va(Va({},vu.defaultProps),s),{},{ticks:yo(s,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.top,i.top+i.height,a)},yc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ya(t){var r,a,s,n,o,i,l=WN(),c=HN(),d=vxe(),u=Va(Va({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:yc.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:yc.fill,horizontal:(s=t.horizontal)!==null&&s!==void 0?s:yc.horizontal,horizontalFill:(n=t.horizontalFill)!==null&&n!==void 0?n:yc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:yc.vertical,verticalFill:(i=t.verticalFill)!==null&&i!==void 0?i:yc.verticalFill,x:rt(t.x)?t.x:d.left,y:rt(t.y)?t.y:d.top,width:rt(t.width)?t.width:d.width,height:rt(t.height)?t.height:d.height}),m=u.x,x=u.y,h=u.width,b=u.height,p=u.syncWithTicks,f=u.horizontalValues,v=u.verticalValues,g=fxe(),y=gxe();if(!rt(h)||h<=0||!rt(b)||b<=0||!rt(m)||m!==+m||!rt(x)||x!==+x)return null;var N=u.verticalCoordinatesGenerator||T0e,_=u.horizontalCoordinatesGenerator||O0e,w=u.horizontalPoints,S=u.verticalPoints;if((!w||!w.length)&&Et(_)){var C=f&&f.length,k=_({yAxis:y?Va(Va({},y),{},{ticks:C?f:y.ticks}):void 0,width:l,height:c,offset:d},C?!0:p);En(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Yl(k),"]")),Array.isArray(k)&&(w=k)}if((!S||!S.length)&&Et(N)){var F=v&&v.length,q=N({xAxis:g?Va(Va({},g),{},{ticks:F?v:g.ticks}):void 0,width:l,height:c,offset:d},F?!0:p);En(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Yl(q),"]")),Array.isArray(q)&&(S=q)}return pe.createElement("g",{className:"recharts-cartesian-grid"},pe.createElement(C0e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),pe.createElement(k0e,gl({},u,{offset:d,horizontalPoints:w,xAxis:g,yAxis:y})),pe.createElement(E0e,gl({},u,{offset:d,verticalPoints:S,xAxis:g,yAxis:y})),pe.createElement(A0e,gl({},u,{horizontalPoints:w})),pe.createElement(P0e,gl({},u,{verticalPoints:S})))}ya.displayName="CartesianGrid";var F0e=["type","layout","connectNulls","ref"],R0e=["key"];function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hd(t)}function Sk(t,r){if(t==null)return{};var a=$0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function $0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},vm.apply(this,arguments)}function Ck(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function _s(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ck(Object(a),!0).forEach(function(s){vn(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ck(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function jc(t){return L0e(t)||I0e(t)||M0e(t)||D0e()}function D0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M0e(t,r){if(t){if(typeof t=="string")return x1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x1(t,r)}}function I0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L0e(t){if(Array.isArray(t))return x1(t)}function x1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function B0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function kk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,BF(s.key),s)}}function z0e(t,r,a){return r&&kk(t.prototype,r),a&&kk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function q0e(t,r,a){return r=Nf(r),V0e(t,LF()?Reflect.construct(r,a||[],Nf(t).constructor):r.apply(t,a))}function V0e(t,r){if(r&&(Hd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U0e(t)}function U0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LF=function(){return!!t})()}function Nf(t){return Nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Nf(t)}function W0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p1(t,r)}function p1(t,r){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},p1(t,r)}function vn(t,r,a){return r=BF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function BF(t){var r=H0e(t,"string");return Hd(r)=="symbol"?r:r+""}function H0e(t,r){if(Hd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Hd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var as=function(t){function r(){var a;B0e(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=q0e(this,r,[].concat(n)),vn(a,"state",{isAnimationFinished:!0,totalLength:0}),vn(a,"generateSimpleStrokeDasharray",function(i,l){return"".concat(l,"px ").concat(i-l,"px")}),vn(a,"getStrokeDasharray",function(i,l,c){var d=c.reduce(function(v,g){return v+g});if(!d)return a.generateSimpleStrokeDasharray(l,i);for(var u=Math.floor(i/d),m=i%d,x=l-i,h=[],b=0,p=0;b<c.length;p+=c[b],++b)if(p+c[b]>m){h=[].concat(jc(c.slice(0,b)),[m-p]);break}var f=h.length%2===0?[0,x]:[x];return[].concat(jc(r.repeat(c,u)),jc(h),f).map(function(v){return"".concat(v,"px")}).join(", ")}),vn(a,"id",oc("recharts-line-")),vn(a,"pathRef",function(i){a.mainCurve=i}),vn(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),vn(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return W0e(r,t),z0e(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=Ms(u,o0);if(!m)return null;var x=function(p,f){return{x:p.x,y:p.y,value:p.value,errorVal:Kr(p.payload,f)}},h={clipPath:s?"url(#clipPath-".concat(n,")"):null};return pe.createElement(Ut,h,m.map(function(b){return pe.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,dataPointFormatter:x})}))}},{key:"renderDots",value:function(s,n,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,m=St(this.props,!1),x=St(c,!0),h=d.map(function(p,f){var v=_s(_s(_s({key:"dot-".concat(f),r:3},m),x),{},{index:f,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return r.renderDotItem(c,v)}),b={clipPath:s?"url(#clipPath-".concat(n?"":"dots-").concat(o,")"):null};return pe.createElement(Ut,vm({className:"recharts-line-dots",key:"dots"},b),h)}},{key:"renderCurveStatically",value:function(s,n,o,i){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var m=Sk(l,F0e),x=_s(_s(_s({},St(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(o,")"):null,points:s},i),{},{type:c,layout:d,connectNulls:u});return pe.createElement(El,vm({},x,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,n){var o=this,i=this.props,l=i.points,c=i.strokeDasharray,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,x=i.animationEasing,h=i.animationId,b=i.animateNewValues,p=i.width,f=i.height,v=this.state,g=v.prevPoints,y=v.totalLength;return pe.createElement(Tn,{begin:u,duration:m,isActive:d,easing:x,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var _=N.t;if(g){var w=g.length/l.length,S=l.map(function(A,T){var U=Math.floor(T*w);if(g[U]){var K=g[U],I=xa(K.x,A.x),Y=xa(K.y,A.y);return _s(_s({},A),{},{x:I(_),y:Y(_)})}if(b){var D=xa(p*2,A.x),W=xa(f/2,A.y);return _s(_s({},A),{},{x:D(_),y:W(_)})}return _s(_s({},A),{},{x:A.x,y:A.y})});return o.renderCurveStatically(S,s,n)}var C=xa(0,y),k=C(_),F;if(c){var q="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});F=o.getStrokeDasharray(k,y,q)}else F=o.generateSimpleStrokeDasharray(y,k);return o.renderCurveStatically(l,s,n,{strokeDasharray:F})})}},{key:"renderCurve",value:function(s,n){var o=this.props,i=o.points,l=o.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&i&&i.length&&(!d&&u>0||!Kl(d,i))?this.renderCurveWithAnimation(s,n):this.renderCurveStatically(i,s,n)}},{key:"render",value:function(){var s,n=this.props,o=n.hide,i=n.dot,l=n.points,c=n.className,d=n.xAxis,u=n.yAxis,m=n.top,x=n.left,h=n.width,b=n.height,p=n.isAnimationActive,f=n.id;if(o||!l||!l.length)return null;var v=this.state.isAnimationFinished,g=l.length===1,y=It("recharts-line",c),N=d&&d.allowDataOverflow,_=u&&u.allowDataOverflow,w=N||_,S=Rt(f)?this.id:f,C=(s=St(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=C.r,F=k===void 0?3:k,q=C.strokeWidth,A=q===void 0?2:q,T=TP(i)?i:{},U=T.clipDot,K=U===void 0?!0:U,I=F*2+A;return pe.createElement(Ut,{className:y},N||_?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:N?x:x-h/2,y:_?m:m-b/2,width:N?h:h*2,height:_?b:b*2})),!K&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},pe.createElement("rect",{x:x-I/2,y:m-I/2,width:h+I,height:b+I}))):null,!g&&this.renderCurve(w,S),this.renderErrorBar(w,S),(g||i)&&this.renderDots(w,K,S),(!p||v)&&Zn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:n.curPoints}:s.points!==n.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,n){for(var o=s.length%2!==0?[].concat(jc(s),[0]):s,i=[],l=0;l<n;++l)i=[].concat(jc(i),jc(o));return i}},{key:"renderDotItem",value:function(s,n){var o;if(pe.isValidElement(s))o=pe.cloneElement(s,n);else if(Et(s))o=s(n);else{var i=n.key,l=Sk(n,R0e),c=It("recharts-line-dot",typeof s!="boolean"?s.className:"");o=pe.createElement(i0,vm({key:i},l,{className:c}))}return o}}])}(j.PureComponent);vn(as,"displayName","Line");vn(as,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Vi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});vn(as,"getComposedData",function(t){var r=t.props,a=t.xAxis,s=t.yAxis,n=t.xAxisTicks,o=t.yAxisTicks,i=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=r.layout,m=c.map(function(x,h){var b=Kr(x,i);return u==="horizontal"?{x:Qh({axis:a,ticks:n,bandSize:l,entry:x,index:h}),y:Rt(b)?null:s.scale(b),value:b,payload:x}:{x:Rt(b)?null:a.scale(b),y:Qh({axis:s,ticks:o,bandSize:l,entry:x,index:h}),value:b,payload:x}});return _s({points:m,layout:u},d)});var K0e=["layout","type","stroke","connectNulls","isRange","ref"],G0e=["key"],zF;function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Kd(t)}function qF(t,r){if(t==null)return{};var a=X0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function X0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},bl.apply(this,arguments)}function Ek(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ai(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ek(Object(a),!0).forEach(function(s){Kn(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ek(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Y0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ak(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,UF(s.key),s)}}function Q0e(t,r,a){return r&&Ak(t.prototype,r),a&&Ak(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function J0e(t,r,a){return r=wf(r),Z0e(t,VF()?Reflect.construct(r,a||[],wf(t).constructor):r.apply(t,a))}function Z0e(t,r){if(r&&(Kd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return epe(t)}function epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!t})()}function wf(t){return wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wf(t)}function tpe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h1(t,r)}function h1(t,r){return h1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},h1(t,r)}function Kn(t,r,a){return r=UF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function UF(t){var r=rpe(t,"string");return Kd(r)=="symbol"?r:r+""}function rpe(t,r){if(Kd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lo=function(t){function r(){var a;Y0e(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=J0e(this,r,[].concat(n)),Kn(a,"state",{isAnimationFinished:!0}),Kn(a,"id",oc("recharts-area-")),Kn(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Et(i)&&i()}),Kn(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Et(i)&&i()}),a}return tpe(r,t),Q0e(r,[{key:"renderDots",value:function(s,n,o){var i=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(i&&!l)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,x=St(this.props,!1),h=St(d,!0),b=u.map(function(f,v){var g=ai(ai(ai({key:"dot-".concat(v),r:3},x),h),{},{index:v,cx:f.x,cy:f.y,dataKey:m,value:f.value,payload:f.payload,points:u});return r.renderDotItem(d,g)}),p={clipPath:s?"url(#clipPath-".concat(n?"":"dots-").concat(o,")"):null};return pe.createElement(Ut,bl({className:"recharts-area-dots"},p),b)}},{key:"renderHorizontalRect",value:function(s){var n=this.props,o=n.baseLine,i=n.points,l=n.strokeWidth,c=i[0].x,d=i[i.length-1].x,u=s*Math.abs(c-d),m=hi(i.map(function(x){return x.y||0}));return rt(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(hi(o.map(function(x){return x.y||0})),m)),rt(m)?pe.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var n=this.props,o=n.baseLine,i=n.points,l=n.strokeWidth,c=i[0].y,d=i[i.length-1].y,u=s*Math.abs(c-d),m=hi(i.map(function(x){return x.x||0}));return rt(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(hi(o.map(function(x){return x.x||0})),m)),rt(m)?pe.createElement("rect",{x:0,y:c<d?c:c-u,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,n,o,i){var l=this.props,c=l.layout,d=l.type,u=l.stroke,m=l.connectNulls,x=l.isRange;l.ref;var h=qF(l,K0e);return pe.createElement(Ut,{clipPath:o?"url(#clipPath-".concat(i,")"):null},pe.createElement(El,bl({},St(h,!0),{points:s,connectNulls:m,type:d,baseLine:n,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&pe.createElement(El,bl({},St(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),u!=="none"&&x&&pe.createElement(El,bl({},St(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(s,n){var o=this,i=this.props,l=i.points,c=i.baseLine,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,x=i.animationEasing,h=i.animationId,b=this.state,p=b.prevPoints,f=b.prevBaseLine;return pe.createElement(Tn,{begin:u,duration:m,isActive:d,easing:x,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var g=v.t;if(p){var y=p.length/l.length,N=l.map(function(C,k){var F=Math.floor(k*y);if(p[F]){var q=p[F],A=xa(q.x,C.x),T=xa(q.y,C.y);return ai(ai({},C),{},{x:A(g),y:T(g)})}return C}),_;if(rt(c)&&typeof c=="number"){var w=xa(f,c);_=w(g)}else if(Rt(c)||mu(c)){var S=xa(f,0);_=S(g)}else _=c.map(function(C,k){var F=Math.floor(k*y);if(f[F]){var q=f[F],A=xa(q.x,C.x),T=xa(q.y,C.y);return ai(ai({},C),{},{x:A(g),y:T(g)})}return C});return o.renderAreaStatically(N,_,s,n)}return pe.createElement(Ut,null,pe.createElement("defs",null,pe.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.renderClipRect(g))),pe.createElement(Ut,{clipPath:"url(#animationClipPath-".concat(n,")")},o.renderAreaStatically(l,c,s,n)))})}},{key:"renderArea",value:function(s,n){var o=this.props,i=o.points,l=o.baseLine,c=o.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,x=d.totalLength;return c&&i&&i.length&&(!u&&x>0||!Kl(u,i)||!Kl(m,l))?this.renderAreaWithAnimation(s,n):this.renderAreaStatically(i,l,s,n)}},{key:"render",value:function(){var s,n=this.props,o=n.hide,i=n.dot,l=n.points,c=n.className,d=n.top,u=n.left,m=n.xAxis,x=n.yAxis,h=n.width,b=n.height,p=n.isAnimationActive,f=n.id;if(o||!l||!l.length)return null;var v=this.state.isAnimationFinished,g=l.length===1,y=It("recharts-area",c),N=m&&m.allowDataOverflow,_=x&&x.allowDataOverflow,w=N||_,S=Rt(f)?this.id:f,C=(s=St(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=C.r,F=k===void 0?3:k,q=C.strokeWidth,A=q===void 0?2:q,T=TP(i)?i:{},U=T.clipDot,K=U===void 0?!0:U,I=F*2+A;return pe.createElement(Ut,{className:y},N||_?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:N?u:u-h/2,y:_?d:d-b/2,width:N?h:h*2,height:_?b:b*2})),!K&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},pe.createElement("rect",{x:u-I/2,y:d-I/2,width:h+I,height:b+I}))):null,g?null:this.renderArea(w,S),(i||g)&&this.renderDots(w,K,S),(!p||v)&&Zn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:s.points!==n.curPoints||s.baseLine!==n.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(j.PureComponent);zF=Lo;Kn(Lo,"displayName","Area");Kn(Lo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Vi.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Kn(Lo,"getBaseValue",function(t,r,a,s){var n=t.layout,o=t.baseValue,i=r.props.baseValue,l=i??o;if(rt(l)&&typeof l=="number")return l;var c=n==="horizontal"?s:a,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Kn(Lo,"getComposedData",function(t){var r=t.props,a=t.item,s=t.xAxis,n=t.yAxis,o=t.xAxisTicks,i=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,x=t.offset,h=r.layout,b=d&&d.length,p=zF.getBaseValue(r,a,s,n),f=h==="horizontal",v=!1,g=m.map(function(N,_){var w;b?w=d[u+_]:(w=Kr(N,c),Array.isArray(w)?v=!0:w=[p,w]);var S=w[1]==null||b&&Kr(N,c)==null;return f?{x:Qh({axis:s,ticks:o,bandSize:l,entry:N,index:_}),y:S?null:n.scale(w[1]),value:w,payload:N}:{x:S?null:s.scale(w[1]),y:Qh({axis:n,ticks:i,bandSize:l,entry:N,index:_}),value:w,payload:N}}),y;return b||v?y=g.map(function(N){var _=Array.isArray(N.value)?N.value[0]:null;return f?{x:N.x,y:_!=null&&N.y!=null?n.scale(_):null}:{x:_!=null?s.scale(_):null,y:N.y}}):y=f?n.scale(p):s.scale(p),ai({points:g,baseLine:y,layout:h,isRange:v},x)});Kn(Lo,"renderDotItem",function(t,r){var a;if(pe.isValidElement(t))a=pe.cloneElement(t,r);else if(Et(t))a=t(r);else{var s=It("recharts-area-dot",typeof t!="boolean"?t.className:""),n=r.key,o=qF(r,G0e);a=pe.createElement(i0,bl({},o,{key:n,className:s}))}return a});function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gd(t)}function ape(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function spe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,KF(s.key),s)}}function npe(t,r,a){return r&&spe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ope(t,r,a){return r=_f(r),ipe(t,WF()?Reflect.construct(r,a||[],_f(t).constructor):r.apply(t,a))}function ipe(t,r){if(r&&(Gd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lpe(t)}function lpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WF=function(){return!!t})()}function _f(t){return _f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_f(t)}function cpe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&f1(t,r)}function f1(t,r){return f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},f1(t,r)}function HF(t,r,a){return r=KF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function KF(t){var r=dpe(t,"string");return Gd(r)=="symbol"?r:r+""}function dpe(t,r){if(Gd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Gd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function g1(){return g1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},g1.apply(this,arguments)}function upe(t){var r=t.xAxisId,a=WN(),s=HN(),n=kF(r);return n==null?null:j.createElement(vu,g1({},n,{className:It("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(i){return yo(i,!0)}}))}var zr=function(t){function r(){return ape(this,r),ope(this,r,arguments)}return cpe(r,t),npe(r,[{key:"render",value:function(){return j.createElement(upe,this.props)}}])}(j.Component);HF(zr,"displayName","XAxis");HF(zr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xd(t)}function mpe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function xpe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,YF(s.key),s)}}function ppe(t,r,a){return r&&xpe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hpe(t,r,a){return r=Sf(r),fpe(t,GF()?Reflect.construct(r,a||[],Sf(t).constructor):r.apply(t,a))}function fpe(t,r){if(r&&(Xd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gpe(t)}function gpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GF=function(){return!!t})()}function Sf(t){return Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Sf(t)}function bpe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b1(t,r)}function b1(t,r){return b1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},b1(t,r)}function XF(t,r,a){return r=YF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function YF(t){var r=vpe(t,"string");return Xd(r)=="symbol"?r:r+""}function vpe(t,r){if(Xd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Xd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},v1.apply(this,arguments)}var ype=function(r){var a=r.yAxisId,s=WN(),n=HN(),o=EF(a);return o==null?null:j.createElement(vu,v1({},o,{className:It("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:s,height:n},ticksGenerator:function(l){return yo(l,!0)}}))},Rr=function(t){function r(){return mpe(this,r),hpe(this,r,arguments)}return bpe(r,t),ppe(r,[{key:"render",value:function(){return j.createElement(ype,this.props)}}])}(j.Component);XF(Rr,"displayName","YAxis");XF(Rr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Pk(t){return _pe(t)||wpe(t)||Npe(t)||jpe()}function jpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Npe(t,r){if(t){if(typeof t=="string")return y1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y1(t,r)}}function wpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _pe(t){if(Array.isArray(t))return y1(t)}function y1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var j1=function(r,a,s,n,o){var i=Ms(r,GN),l=Ms(r,sb),c=[].concat(Pk(i),Pk(l)),d=Ms(r,ob),u="".concat(n,"Id"),m=n[0],x=a;if(c.length&&(x=c.reduce(function(p,f){if(f.props[u]===s&&eo(f.props,"extendDomain")&&rt(f.props[m])){var v=f.props[m];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},x)),d.length){var h="".concat(m,"1"),b="".concat(m,"2");x=d.reduce(function(p,f){if(f.props[u]===s&&eo(f.props,"extendDomain")&&rt(f.props[h])&&rt(f.props[b])){var v=f.props[h],g=f.props[b];return[Math.min(p[0],v,g),Math.max(p[1],v,g)]}return p},x)}return o&&o.length&&(x=o.reduce(function(p,f){return rt(f)?[Math.min(p[0],f),Math.max(p[1],f)]:p},x)),x},QF={exports:{}};(function(t){var r=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function n(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function o(c,d,u,m,x){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new n(u,m||c,x),b=a?a+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],h]:c._events[b].push(h):(c._events[b]=h,c._eventsCount++),c}function i(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)r.call(u,m)&&d.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,h=m.length,b=new Array(h);x<h;x++)b[x]=m[x].fn;return b},l.prototype.listenerCount=function(d){var u=a?a+d:d,m=this._events[u];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,u,m,x,h,b){var p=a?a+d:d;if(!this._events[p])return!1;var f=this._events[p],v=arguments.length,g,y;if(f.fn){switch(f.once&&this.removeListener(d,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,m),!0;case 4:return f.fn.call(f.context,u,m,x),!0;case 5:return f.fn.call(f.context,u,m,x,h),!0;case 6:return f.fn.call(f.context,u,m,x,h,b),!0}for(y=1,g=new Array(v-1);y<v;y++)g[y-1]=arguments[y];f.fn.apply(f.context,g)}else{var N=f.length,_;for(y=0;y<N;y++)switch(f[y].once&&this.removeListener(d,f[y].fn,void 0,!0),v){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,u);break;case 3:f[y].fn.call(f[y].context,u,m);break;case 4:f[y].fn.call(f[y].context,u,m,x);break;default:if(!g)for(_=1,g=new Array(v-1);_<v;_++)g[_-1]=arguments[_];f[y].fn.apply(f[y].context,g)}}return!0},l.prototype.on=function(d,u,m){return o(this,d,u,m,!1)},l.prototype.once=function(d,u,m){return o(this,d,u,m,!0)},l.prototype.removeListener=function(d,u,m,x){var h=a?a+d:d;if(!this._events[h])return this;if(!u)return i(this,h),this;var b=this._events[h];if(b.fn)b.fn===u&&(!x||b.once)&&(!m||b.context===m)&&i(this,h);else{for(var p=0,f=[],v=b.length;p<v;p++)(b[p].fn!==u||x&&!b[p].once||m&&b[p].context!==m)&&f.push(b[p]);f.length?this._events[h]=f.length===1?f[0]:f:i(this,h)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&i(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,t.exports=l})(QF);var Spe=QF.exports;const Cpe=mr(Spe);var _v=new Cpe,Sv="recharts.syncMouseEvents";function Ox(t){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ox(t)}function kpe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Epe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,JF(s.key),s)}}function Ape(t,r,a){return r&&Epe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cv(t,r,a){return r=JF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function JF(t){var r=Ppe(t,"string");return Ox(r)=="symbol"?r:r+""}function Ppe(t,r){if(Ox(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ox(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tpe=function(){function t(){kpe(this,t),Cv(this,"activeIndex",0),Cv(this,"coordinateList",[]),Cv(this,"layout","horizontal")}return Ape(t,[{key:"setDetails",value:function(a){var s,n=a.coordinateList,o=n===void 0?null:n,i=a.container,l=i===void 0?null:i,c=a.layout,d=c===void 0?null:c,u=a.offset,m=u===void 0?null:u,x=a.mouseHandlerCallback,h=x===void 0?null:x;this.coordinateList=(s=o??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),o=n.x,i=n.y,l=n.height,c=this.coordinateList[this.activeIndex].coordinate,d=((a=window)===null||a===void 0?void 0:a.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=o+c+d,x=i+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])}();function Ope(t,r,a){if(a==="number"&&r===!0&&Array.isArray(t)){var s=t==null?void 0:t[0],n=t==null?void 0:t[1];if(s&&n&&rt(s)&&rt(n))return!0}return!1}function Fpe(t,r,a,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-n:a.left+.5,y:t==="horizontal"?a.top+.5:r.y-n,width:t==="horizontal"?s:a.width-1,height:t==="horizontal"?a.height-1:s}}function ZF(t){var r=t.cx,a=t.cy,s=t.radius,n=t.startAngle,o=t.endAngle,i=Nr(r,a,s,n),l=Nr(r,a,s,o);return{points:[i,l],cx:r,cy:a,radius:s,startAngle:n,endAngle:o}}function Rpe(t,r,a){var s,n,o,i;if(t==="horizontal")s=r.x,o=s,n=a.top,i=a.top+a.height;else if(t==="vertical")n=r.y,i=n,s=a.left,o=a.left+a.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var l=r.cx,c=r.cy,d=r.innerRadius,u=r.outerRadius,m=r.angle,x=Nr(l,c,d,m),h=Nr(l,c,u,m);s=x.x,n=x.y,o=h.x,i=h.y}else return ZF(r);return[{x:s,y:n},{x:o,y:i}]}function Fx(t){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fx(t)}function Tk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function sp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Tk(Object(a),!0).forEach(function(s){$pe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Tk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function $pe(t,r,a){return r=Dpe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Dpe(t){var r=Mpe(t,"string");return Fx(r)=="symbol"?r:r+""}function Mpe(t,r){if(Fx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Fx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ipe(t){var r,a,s=t.element,n=t.tooltipEventType,o=t.isActive,i=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,h=(r=s.props.cursor)!==null&&r!==void 0?r:(a=s.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!s||!h||!o||!i||x!=="ScatterChart"&&n!=="axis")return null;var b,p=El;if(x==="ScatterChart")b=i,p=Hce;else if(x==="BarChart")b=Fpe(m,i,c,u),p=BN;else if(m==="radial"){var f=ZF(i),v=f.cx,g=f.cy,y=f.radius,N=f.startAngle,_=f.endAngle;b={cx:v,cy:g,startAngle:N,endAngle:_,innerRadius:y,outerRadius:y},p=XO}else b={points:Rpe(m,i,c)},p=El;var w=sp(sp(sp(sp({stroke:"#ccc",pointerEvents:"none"},c),b),St(h,!1)),{},{payload:l,payloadIndex:d,className:It("recharts-tooltip-cursor",h.className)});return j.isValidElement(h)?j.cloneElement(h,w):j.createElement(p,w)}var Lpe=["item"],Bpe=["children","className","width","height","style","compact","title","desc"];function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yd(t)}function Kc(){return Kc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Kc.apply(this,arguments)}function Ok(t,r){return Vpe(t)||qpe(t,r)||tR(t,r)||zpe()}function zpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qpe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Vpe(t){if(Array.isArray(t))return t}function Fk(t,r){if(t==null)return{};var a=Upe(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Upe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Wpe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Hpe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,rR(s.key),s)}}function Kpe(t,r,a){return r&&Hpe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gpe(t,r,a){return r=Cf(r),Xpe(t,eR()?Reflect.construct(r,a||[],Cf(t).constructor):r.apply(t,a))}function Xpe(t,r){if(r&&(Yd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ype(t)}function Ype(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eR=function(){return!!t})()}function Cf(t){return Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Cf(t)}function Qpe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&N1(t,r)}function N1(t,r){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},N1(t,r)}function Qd(t){return ehe(t)||Zpe(t)||tR(t)||Jpe()}function Jpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tR(t,r){if(t){if(typeof t=="string")return w1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w1(t,r)}}function Zpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ehe(t){if(Array.isArray(t))return w1(t)}function w1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Rk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Ve(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Rk(Object(a),!0).forEach(function(s){kt(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function kt(t,r,a){return r=rR(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function rR(t){var r=the(t,"string");return Yd(r)=="symbol"?r:r+""}function the(t,r){if(Yd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Yd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var rhe={xAxis:["bottom","top"],yAxis:["left","right"]},ahe={width:"100%",height:"100%"},aR={x:0,y:0};function np(t){return t}var she=function(r,a){return a==="horizontal"?r.x:a==="vertical"?r.y:a==="centric"?r.angle:r.radius},nhe=function(r,a,s,n){var o=a.find(function(u){return u&&u.index===s});if(o){if(r==="horizontal")return{x:o.coordinate,y:n.y};if(r==="vertical")return{x:n.x,y:o.coordinate};if(r==="centric"){var i=o.coordinate,l=n.radius;return Ve(Ve(Ve({},n),Nr(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var c=o.coordinate,d=n.angle;return Ve(Ve(Ve({},n),Nr(n.cx,n.cy,c,d)),{},{angle:d,radius:c})}return aR},ib=function(r,a){var s=a.graphicalItems,n=a.dataStartIndex,o=a.dataEndIndex,i=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Qd(l),Qd(d)):l},[]);return i.length>0?i:r&&r.length&&rt(n)&&rt(o)?r.slice(n,o+1):[]};function sR(t){return t==="number"?[0,"auto"]:void 0}var _1=function(r,a,s,n){var o=r.graphicalItems,i=r.tooltipAxis,l=ib(a,r);return s<0||!o||!o.length||s>=l.length?null:o.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:a;m&&r.dataStartIndex+r.dataEndIndex!==0&&r.dataEndIndex-r.dataStartIndex>=s&&(m=m.slice(r.dataStartIndex,r.dataEndIndex+1));var x;if(i.dataKey&&!i.allowDuplicatedCategory){var h=m===void 0?l:m;x=Nh(h,i.dataKey,n)}else x=m&&m[s]||l[s];return x?[].concat(Qd(c),[VO(d,x)]):c},[])},$k=function(r,a,s,n){var o=n||{x:r.chartX,y:r.chartY},i=she(o,s),l=r.orderedTooltipTicks,c=r.tooltipAxis,d=r.tooltipTicks,u=goe(i,l,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,x=_1(r,a,u,m),h=nhe(s,l,u,o);return{activeTooltipIndex:u,activeLabel:m,activePayload:x,activeCoordinate:h}}return null},ohe=function(r,a){var s=a.axes,n=a.graphicalItems,o=a.axisType,i=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.layout,m=r.children,x=r.stackOffset,h=MO(u,o);return s.reduce(function(b,p){var f,v=p.type.defaultProps!==void 0?Ve(Ve({},p.type.defaultProps),p.props):p.props,g=v.type,y=v.dataKey,N=v.allowDataOverflow,_=v.allowDuplicatedCategory,w=v.scale,S=v.ticks,C=v.includeHidden,k=v[i];if(b[k])return b;var F=ib(r.data,{graphicalItems:n.filter(function(O){var L,E=i in O.props?O.props[i]:(L=O.type.defaultProps)===null||L===void 0?void 0:L[i];return E===k}),dataStartIndex:c,dataEndIndex:d}),q=F.length,A,T,U;Ope(v.domain,N,g)&&(A=Mj(v.domain,null,N),h&&(g==="number"||w!=="auto")&&(U=hm(F,y,"category")));var K=sR(g);if(!A||A.length===0){var I,Y=(I=v.domain)!==null&&I!==void 0?I:K;if(y){if(A=hm(F,y,g),g==="category"&&h){var D=iW(A);_&&D?(T=A,A=mf(0,q)):_||(A=sC(Y,A,p).reduce(function(O,L){return O.indexOf(L)>=0?O:[].concat(Qd(O),[L])},[]))}else if(g==="category")_?A=A.filter(function(O){return O!==""&&!Rt(O)}):A=sC(Y,A,p).reduce(function(O,L){return O.indexOf(L)>=0||L===""||Rt(L)?O:[].concat(Qd(O),[L])},[]);else if(g==="number"){var W=Noe(F,n.filter(function(O){var L,E,M=i in O.props?O.props[i]:(L=O.type.defaultProps)===null||L===void 0?void 0:L[i],z="hide"in O.props?O.props.hide:(E=O.type.defaultProps)===null||E===void 0?void 0:E.hide;return M===k&&(C||!z)}),y,o,u);W&&(A=W)}h&&(g==="number"||w!=="auto")&&(U=hm(F,y,"category"))}else h?A=mf(0,q):l&&l[k]&&l[k].hasStack&&g==="number"?A=x==="expand"?[0,1]:qO(l[k].stackGroups,c,d):A=DO(F,n.filter(function(O){var L=i in O.props?O.props[i]:O.type.defaultProps[i],E="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return L===k&&(C||!E)}),g,u,!0);if(g==="number")A=j1(m,A,k,o,S),Y&&(A=Mj(Y,A,N));else if(g==="category"&&Y){var R=Y,B=A.every(function(O){return R.indexOf(O)>=0});B&&(A=R)}}return Ve(Ve({},b),{},kt({},k,Ve(Ve({},v),{},{axisType:o,domain:A,categoricalDomain:U,duplicateDomain:T,originalDomain:(f=v.domain)!==null&&f!==void 0?f:K,isCategorical:h,layout:u})))},{})},ihe=function(r,a){var s=a.graphicalItems,n=a.Axis,o=a.axisType,i=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.layout,m=r.children,x=ib(r.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),h=x.length,b=MO(u,o),p=-1;return s.reduce(function(f,v){var g=v.type.defaultProps!==void 0?Ve(Ve({},v.type.defaultProps),v.props):v.props,y=g[i],N=sR("number");if(!f[y]){p++;var _;return b?_=mf(0,h):l&&l[y]&&l[y].hasStack?(_=qO(l[y].stackGroups,c,d),_=j1(m,_,y,o)):(_=Mj(N,DO(x,s.filter(function(w){var S,C,k=i in w.props?w.props[i]:(S=w.type.defaultProps)===null||S===void 0?void 0:S[i],F="hide"in w.props?w.props.hide:(C=w.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===y&&!F}),"number",u),n.defaultProps.allowDataOverflow),_=j1(m,_,y,o)),Ve(Ve({},f),{},kt({},y,Ve(Ve({axisType:o},n.defaultProps),{},{hide:!0,orientation:Ds(rhe,"".concat(o,".").concat(p%2),null),domain:_,originalDomain:N,isCategorical:b,layout:u})))}return f},{})},lhe=function(r,a){var s=a.axisType,n=s===void 0?"xAxis":s,o=a.AxisComp,i=a.graphicalItems,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.children,m="".concat(n,"Id"),x=Ms(u,o),h={};return x&&x.length?h=ohe(r,{axes:x,graphicalItems:i,axisType:n,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):i&&i.length&&(h=ihe(r,{Axis:o,graphicalItems:i,axisType:n,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),h},che=function(r){var a=di(r),s=yo(a,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:xN(s,function(n){return n.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Jh(a,s)}},Dk=function(r){var a=r.children,s=r.defaultShowTooltip,n=Es(a,Bd),o=0,i=0;return r.data&&r.data.length!==0&&(i=r.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(o=n.props.startIndex),n.props.endIndex>=0&&(i=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!s}},dhe=function(r){return!r||!r.length?!1:r.some(function(a){var s=wo(a&&a.type);return s&&s.indexOf("Bar")>=0})},Mk=function(r){return r==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:r==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:r==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},uhe=function(r,a){var s=r.props,n=r.graphicalItems,o=r.xAxisMap,i=o===void 0?{}:o,l=r.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,m=s.children,x=s.margin||{},h=Es(m,Bd),b=Es(m,Ar),p=Object.keys(c).reduce(function(_,w){var S=c[w],C=S.orientation;return!S.mirror&&!S.hide?Ve(Ve({},_),{},kt({},C,_[C]+S.width)):_},{left:x.left||0,right:x.right||0}),f=Object.keys(i).reduce(function(_,w){var S=i[w],C=S.orientation;return!S.mirror&&!S.hide?Ve(Ve({},_),{},kt({},C,Ds(_,"".concat(C))+S.height)):_},{top:x.top||0,bottom:x.bottom||0}),v=Ve(Ve({},f),p),g=v.bottom;h&&(v.bottom+=h.props.height||Bd.defaultProps.height),b&&a&&(v=yoe(v,n,s,a));var y=d-v.left-v.right,N=u-v.top-v.bottom;return Ve(Ve({brushBottom:g},v),{},{width:Math.max(y,0),height:Math.max(N,0)})},mhe=function(r,a){if(a==="xAxis")return r[a].width;if(a==="yAxis")return r[a].height},lb=function(r){var a=r.chartName,s=r.GraphicalChild,n=r.defaultTooltipEventType,o=n===void 0?"axis":n,i=r.validateTooltipEventTypes,l=i===void 0?["axis"]:i,c=r.axisComponents,d=r.legendContent,u=r.formatAxisMap,m=r.defaultProps,x=function(v,g){var y=g.graphicalItems,N=g.stackGroups,_=g.offset,w=g.updateId,S=g.dataStartIndex,C=g.dataEndIndex,k=v.barSize,F=v.layout,q=v.barGap,A=v.barCategoryGap,T=v.maxBarSize,U=Mk(F),K=U.numericAxisName,I=U.cateAxisName,Y=dhe(y),D=[];return y.forEach(function(W,R){var B=ib(v.data,{graphicalItems:[W],dataStartIndex:S,dataEndIndex:C}),O=W.type.defaultProps!==void 0?Ve(Ve({},W.type.defaultProps),W.props):W.props,L=O.dataKey,E=O.maxBarSize,M=O["".concat(K,"Id")],z=O["".concat(I,"Id")],le={},Q=c.reduce(function(ke,Ie){var Ae=g["".concat(Ie.axisType,"Map")],it=O["".concat(Ie.axisType,"Id")];Ae&&Ae[it]||Ie.axisType==="zAxis"||Xl();var gt=Ae[it];return Ve(Ve({},ke),{},kt(kt({},Ie.axisType,gt),"".concat(Ie.axisType,"Ticks"),yo(gt)))},le),ne=Q[I],re=Q["".concat(I,"Ticks")],ae=N&&N[M]&&N[M].hasStack&&Toe(W,N[M].stackGroups),ie=wo(W.type).indexOf("Bar")>=0,ve=Jh(ne,re),_e=[],me=Y&&boe({barSize:k,stackGroups:N,totalSize:mhe(Q,I)});if(ie){var Se,Ne,ot=Rt(E)?T:E,Ke=(Se=(Ne=Jh(ne,re,!0))!==null&&Ne!==void 0?Ne:ot)!==null&&Se!==void 0?Se:0;_e=voe({barGap:q,barCategoryGap:A,bandSize:Ke!==ve?Ke:ve,sizeList:me[z],maxBarSize:ot}),Ke!==ve&&(_e=_e.map(function(ke){return Ve(Ve({},ke),{},{position:Ve(Ve({},ke.position),{},{offset:ke.position.offset-Ke/2})})}))}var lt=W&&W.type&&W.type.getComposedData;lt&&D.push({props:Ve(Ve({},lt(Ve(Ve({},Q),{},{displayedData:B,props:v,dataKey:L,item:W,bandSize:ve,barPosition:_e,offset:_,stackedData:ae,layout:F,dataStartIndex:S,dataEndIndex:C}))),{},kt(kt(kt({key:W.key||"item-".concat(R)},K,Q[K]),I,Q[I]),"animationId",w)),childIndex:vW(W,v.children),item:W})}),D},h=function(v,g){var y=v.props,N=v.dataStartIndex,_=v.dataEndIndex,w=v.updateId;if(!J4({props:y}))return null;var S=y.children,C=y.layout,k=y.stackOffset,F=y.data,q=y.reverseStackOrder,A=Mk(C),T=A.numericAxisName,U=A.cateAxisName,K=Ms(S,s),I=Aoe(F,K,"".concat(T,"Id"),"".concat(U,"Id"),k,q),Y=c.reduce(function(O,L){var E="".concat(L.axisType,"Map");return Ve(Ve({},O),{},kt({},E,lhe(y,Ve(Ve({},L),{},{graphicalItems:K,stackGroups:L.axisType===T&&I,dataStartIndex:N,dataEndIndex:_}))))},{}),D=uhe(Ve(Ve({},Y),{},{props:y,graphicalItems:K}),g==null?void 0:g.legendBBox);Object.keys(Y).forEach(function(O){Y[O]=u(y,Y[O],D,O.replace("Map",""),a)});var W=Y["".concat(U,"Map")],R=che(W),B=x(y,Ve(Ve({},Y),{},{dataStartIndex:N,dataEndIndex:_,updateId:w,graphicalItems:K,stackGroups:I,offset:D}));return Ve(Ve({formattedGraphicalItems:B,graphicalItems:K,offset:D,stackGroups:I},R),Y)},b=function(f){function v(g){var y,N,_;return Wpe(this,v),_=Gpe(this,v,[g]),kt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),kt(_,"accessibilityManager",new Tpe),kt(_,"handleLegendBBoxUpdate",function(w){if(w){var S=_.state,C=S.dataStartIndex,k=S.dataEndIndex,F=S.updateId;_.setState(Ve({legendBBox:w},h({props:_.props,dataStartIndex:C,dataEndIndex:k,updateId:F},Ve(Ve({},_.state),{},{legendBBox:w}))))}}),kt(_,"handleReceiveSyncEvent",function(w,S,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(S)}}),kt(_,"handleBrushChange",function(w){var S=w.startIndex,C=w.endIndex;if(S!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var k=_.state.updateId;_.setState(function(){return Ve({dataStartIndex:S,dataEndIndex:C},h({props:_.props,dataStartIndex:S,dataEndIndex:C,updateId:k},_.state))}),_.triggerSyncEvent({dataStartIndex:S,dataEndIndex:C})}}),kt(_,"handleMouseEnter",function(w){var S=_.getMouseInfo(w);if(S){var C=Ve(Ve({},S),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var k=_.props.onMouseEnter;Et(k)&&k(C,w)}}),kt(_,"triggeredAfterMouseMove",function(w){var S=_.getMouseInfo(w),C=S?Ve(Ve({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var k=_.props.onMouseMove;Et(k)&&k(C,w)}),kt(_,"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),kt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),kt(_,"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),kt(_,"handleMouseLeave",function(w){_.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};_.setState(S),_.triggerSyncEvent(S);var C=_.props.onMouseLeave;Et(C)&&C(S,w)}),kt(_,"handleOuterEvent",function(w){var S=bW(w),C=Ds(_.props,"".concat(S));if(S&&Et(C)){var k,F;/.*touch.*/i.test(S)?F=_.getMouseInfo(w.changedTouches[0]):F=_.getMouseInfo(w),C((k=F)!==null&&k!==void 0?k:{},w)}}),kt(_,"handleClick",function(w){var S=_.getMouseInfo(w);if(S){var C=Ve(Ve({},S),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var k=_.props.onClick;Et(k)&&k(C,w)}}),kt(_,"handleMouseDown",function(w){var S=_.props.onMouseDown;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleMouseUp",function(w){var S=_.props.onMouseUp;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),kt(_,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),kt(_,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),kt(_,"handleDoubleClick",function(w){var S=_.props.onDoubleClick;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleContextMenu",function(w){var S=_.props.onContextMenu;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"triggerSyncEvent",function(w){_.props.syncId!==void 0&&_v.emit(Sv,_.props.syncId,w,_.eventEmitterSymbol)}),kt(_,"applySyncEvent",function(w){var S=_.props,C=S.layout,k=S.syncMethod,F=_.state.updateId,q=w.dataStartIndex,A=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(Ve({dataStartIndex:q,dataEndIndex:A},h({props:_.props,dataStartIndex:q,dataEndIndex:A,updateId:F},_.state)));else if(w.activeTooltipIndex!==void 0){var T=w.chartX,U=w.chartY,K=w.activeTooltipIndex,I=_.state,Y=I.offset,D=I.tooltipTicks;if(!Y)return;if(typeof k=="function")K=k(D,w);else if(k==="value"){K=-1;for(var W=0;W<D.length;W++)if(D[W].value===w.activeLabel){K=W;break}}var R=Ve(Ve({},Y),{},{x:Y.left,y:Y.top}),B=Math.min(T,R.x+R.width),O=Math.min(U,R.y+R.height),L=D[K]&&D[K].value,E=_1(_.state,_.props.data,K),M=D[K]?{x:C==="horizontal"?D[K].coordinate:B,y:C==="horizontal"?O:D[K].coordinate}:aR;_.setState(Ve(Ve({},w),{},{activeLabel:L,activeCoordinate:M,activePayload:E,activeTooltipIndex:K}))}else _.setState(w)}),kt(_,"renderCursor",function(w){var S,C=_.state,k=C.isTooltipActive,F=C.activeCoordinate,q=C.activePayload,A=C.offset,T=C.activeTooltipIndex,U=C.tooltipAxisBandSize,K=_.getTooltipEventType(),I=(S=w.props.active)!==null&&S!==void 0?S:k,Y=_.props.layout,D=w.key||"_recharts-cursor";return pe.createElement(Ipe,{key:D,activeCoordinate:F,activePayload:q,activeTooltipIndex:T,chartName:a,element:w,isActive:I,layout:Y,offset:A,tooltipAxisBandSize:U,tooltipEventType:K})}),kt(_,"renderPolarAxis",function(w,S,C){var k=Ds(w,"type.axisType"),F=Ds(_.state,"".concat(k,"Map")),q=w.type.defaultProps,A=q!==void 0?Ve(Ve({},q),w.props):w.props,T=F&&F[A["".concat(k,"Id")]];return j.cloneElement(w,Ve(Ve({},T),{},{className:It(k,T.className),key:w.key||"".concat(S,"-").concat(C),ticks:yo(T,!0)}))}),kt(_,"renderPolarGrid",function(w){var S=w.props,C=S.radialLines,k=S.polarAngles,F=S.polarRadius,q=_.state,A=q.radiusAxisMap,T=q.angleAxisMap,U=di(A),K=di(T),I=K.cx,Y=K.cy,D=K.innerRadius,W=K.outerRadius;return j.cloneElement(w,{polarAngles:Array.isArray(k)?k:yo(K,!0).map(function(R){return R.coordinate}),polarRadius:Array.isArray(F)?F:yo(U,!0).map(function(R){return R.coordinate}),cx:I,cy:Y,innerRadius:D,outerRadius:W,key:w.key||"polar-grid",radialLines:C})}),kt(_,"renderLegend",function(){var w=_.state.formattedGraphicalItems,S=_.props,C=S.children,k=S.width,F=S.height,q=_.props.margin||{},A=k-(q.left||0)-(q.right||0),T=RO({children:C,formattedGraphicalItems:w,legendWidth:A,legendContent:d});if(!T)return null;var U=T.item,K=Fk(T,Lpe);return j.cloneElement(U,Ve(Ve({},K),{},{chartWidth:k,chartHeight:F,margin:q,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),kt(_,"renderTooltip",function(){var w,S=_.props,C=S.children,k=S.accessibilityLayer,F=Es(C,lr);if(!F)return null;var q=_.state,A=q.isTooltipActive,T=q.activeCoordinate,U=q.activePayload,K=q.activeLabel,I=q.offset,Y=(w=F.props.active)!==null&&w!==void 0?w:A;return j.cloneElement(F,{viewBox:Ve(Ve({},I),{},{x:I.left,y:I.top}),active:Y,label:K,payload:Y?U:[],coordinate:T,accessibilityLayer:k})}),kt(_,"renderBrush",function(w){var S=_.props,C=S.margin,k=S.data,F=_.state,q=F.offset,A=F.dataStartIndex,T=F.dataEndIndex,U=F.updateId;return j.cloneElement(w,{key:w.key||"_recharts-brush",onChange:ep(_.handleBrushChange,w.props.onChange),data:k,x:rt(w.props.x)?w.props.x:q.left,y:rt(w.props.y)?w.props.y:q.top+q.height+q.brushBottom-(C.bottom||0),width:rt(w.props.width)?w.props.width:q.width,startIndex:A,endIndex:T,updateId:"brush-".concat(U)})}),kt(_,"renderReferenceElement",function(w,S,C){if(!w)return null;var k=_,F=k.clipPathId,q=_.state,A=q.xAxisMap,T=q.yAxisMap,U=q.offset,K=w.type.defaultProps||{},I=w.props,Y=I.xAxisId,D=Y===void 0?K.xAxisId:Y,W=I.yAxisId,R=W===void 0?K.yAxisId:W;return j.cloneElement(w,{key:w.key||"".concat(S,"-").concat(C),xAxis:A[D],yAxis:T[R],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:F})}),kt(_,"renderActivePoints",function(w){var S=w.item,C=w.activePoint,k=w.basePoint,F=w.childIndex,q=w.isRange,A=[],T=S.props.key,U=S.item.type.defaultProps!==void 0?Ve(Ve({},S.item.type.defaultProps),S.item.props):S.item.props,K=U.activeDot,I=U.dataKey,Y=Ve(Ve({index:F,dataKey:I,cx:C.x,cy:C.y,r:4,fill:LN(S.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},St(K,!1)),wh(K));return A.push(v.renderActiveDot(K,Y,"".concat(T,"-activePoint-").concat(F))),k?A.push(v.renderActiveDot(K,Ve(Ve({},Y),{},{cx:k.x,cy:k.y}),"".concat(T,"-basePoint-").concat(F))):q&&A.push(null),A}),kt(_,"renderGraphicChild",function(w,S,C){var k=_.filterFormatItem(w,S,C);if(!k)return null;var F=_.getTooltipEventType(),q=_.state,A=q.isTooltipActive,T=q.tooltipAxis,U=q.activeTooltipIndex,K=q.activeLabel,I=_.props.children,Y=Es(I,lr),D=k.props,W=D.points,R=D.isRange,B=D.baseLine,O=k.item.type.defaultProps!==void 0?Ve(Ve({},k.item.type.defaultProps),k.item.props):k.item.props,L=O.activeDot,E=O.hide,M=O.activeBar,z=O.activeShape,le=!!(!E&&A&&Y&&(L||M||z)),Q={};F!=="axis"&&Y&&Y.props.trigger==="click"?Q={onClick:ep(_.handleItemMouseEnter,w.props.onClick)}:F!=="axis"&&(Q={onMouseLeave:ep(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:ep(_.handleItemMouseEnter,w.props.onMouseEnter)});var ne=j.cloneElement(w,Ve(Ve({},k.props),Q));function re(Ie){return typeof T.dataKey=="function"?T.dataKey(Ie.payload):null}if(le)if(U>=0){var ae,ie;if(T.dataKey&&!T.allowDuplicatedCategory){var ve=typeof T.dataKey=="function"?re:"payload.".concat(T.dataKey.toString());ae=Nh(W,ve,K),ie=R&&B&&Nh(B,ve,K)}else ae=W==null?void 0:W[U],ie=R&&B&&B[U];if(z||M){var _e=w.props.activeIndex!==void 0?w.props.activeIndex:U;return[j.cloneElement(w,Ve(Ve(Ve({},k.props),Q),{},{activeIndex:_e})),null,null]}if(!Rt(ae))return[ne].concat(Qd(_.renderActivePoints({item:k,activePoint:ae,basePoint:ie,childIndex:U,isRange:R})))}else{var me,Se=(me=_.getItemByXY(_.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:ne},Ne=Se.graphicalItem,ot=Ne.item,Ke=ot===void 0?w:ot,lt=Ne.childIndex,ke=Ve(Ve(Ve({},k.props),Q),{},{activeIndex:lt});return[j.cloneElement(Ke,ke),null,null]}return R?[ne,null,null]:[ne,null]}),kt(_,"renderCustomized",function(w,S,C){return j.cloneElement(w,Ve(Ve({key:"recharts-customized-".concat(C)},_.props),_.state))}),kt(_,"renderMap",{CartesianGrid:{handler:np,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:np},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:np},YAxis:{handler:np},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((y=g.id)!==null&&y!==void 0?y:oc("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=RT(_.triggeredAfterMouseMove,(N=g.throttleDelay)!==null&&N!==void 0?N:1e3/60),_.state={},_}return Qpe(v,f),Kpe(v,[{key:"componentDidMount",value:function(){var y,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,N=y.children,_=y.data,w=y.height,S=y.layout,C=Es(N,lr);if(C){var k=C.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,q=_1(this.state,_,k,F),A=this.state.tooltipTicks[k].coordinate,T=(this.state.offset.top+w)/2,U=S==="horizontal",K=U?{x:A,y:T}:{y:A,x:T},I=this.state.formattedGraphicalItems.find(function(D){var W=D.item;return W.type.name==="Scatter"});I&&(K=Ve(Ve({},K),I.props.points[k].tooltipPosition),q=I.props.points[k].tooltipPayload);var Y={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:F,activePayload:q,activeCoordinate:K};this.setState(Y),this.renderCursor(C),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(y){Jy([Es(y.children,lr)],[Es(this.props.children,lr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Es(this.props.children,lr);if(y&&typeof y.props.shared=="boolean"){var N=y.props.shared?"axis":"item";return l.indexOf(N)>=0?N:o}return o}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var N=this.container,_=N.getBoundingClientRect(),w=Wte(_),S={chartX:Math.round(y.pageX-w.left),chartY:Math.round(y.pageY-w.top)},C=_.width/N.offsetWidth||1,k=this.inRange(S.chartX,S.chartY,C);if(!k)return null;var F=this.state,q=F.xAxisMap,A=F.yAxisMap,T=this.getTooltipEventType(),U=$k(this.state,this.props.data,this.props.layout,k);if(T!=="axis"&&q&&A){var K=di(q).scale,I=di(A).scale,Y=K&&K.invert?K.invert(S.chartX):null,D=I&&I.invert?I.invert(S.chartY):null;return Ve(Ve({},S),{},{xValue:Y,yValue:D},U)}return U?Ve(Ve({},S),U):null}},{key:"inRange",value:function(y,N){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=y/_,C=N/_;if(w==="horizontal"||w==="vertical"){var k=this.state.offset,F=S>=k.left&&S<=k.left+k.width&&C>=k.top&&C<=k.top+k.height;return F?{x:S,y:C}:null}var q=this.state,A=q.angleAxisMap,T=q.radiusAxisMap;if(A&&T){var U=di(A);return iC({x:S,y:C},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,N=this.getTooltipEventType(),_=Es(y,lr),w={};_&&N==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=wh(this.props,this.handleOuterEvent);return Ve(Ve({},S),w)}},{key:"addListener",value:function(){_v.on(Sv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){_v.removeListener(Sv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,N,_){for(var w=this.state.formattedGraphicalItems,S=0,C=w.length;S<C;S++){var k=w[S];if(k.item===y||k.props.key===y.key||N===wo(k.item.type)&&_===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,N=this.state.offset,_=N.left,w=N.top,S=N.height,C=N.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:y},pe.createElement("rect",{x:_,y:w,height:S,width:C})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(N,_){var w=Ok(_,2),S=w[0],C=w[1];return Ve(Ve({},N),{},kt({},S,C.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(N,_){var w=Ok(_,2),S=w[0],C=w[1];return Ve(Ve({},N),{},kt({},S,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[y])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(y){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[y])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(y){var N=this.state,_=N.formattedGraphicalItems,w=N.activeItem;if(_&&_.length)for(var S=0,C=_.length;S<C;S++){var k=_[S],F=k.props,q=k.item,A=q.type.defaultProps!==void 0?Ve(Ve({},q.type.defaultProps),q.props):q.props,T=wo(q.type);if(T==="Bar"){var U=(F.data||[]).find(function(D){return Cce(y,D)});if(U)return{graphicalItem:k,payload:U}}else if(T==="RadialBar"){var K=(F.data||[]).find(function(D){return iC(y,D)});if(K)return{graphicalItem:k,payload:K}}else if(eb(k,w)||tb(k,w)||kx(k,w)){var I=pue({graphicalItem:k,activeTooltipItem:w,itemData:A.data}),Y=A.activeIndex===void 0?I:A.activeIndex;return{graphicalItem:Ve(Ve({},k),{},{childIndex:Y}),payload:kx(k,w)?A.data[I]:k.props.data[I]}}}return null}},{key:"render",value:function(){var y=this;if(!J4(this))return null;var N=this.props,_=N.children,w=N.className,S=N.width,C=N.height,k=N.style,F=N.compact,q=N.title,A=N.desc,T=Fk(N,Bpe),U=St(T,!1);if(F)return pe.createElement(mk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(ej,Kc({},U,{width:S,height:C,title:q,desc:A}),this.renderClipPath(),e3(_,this.renderMap)));if(this.props.accessibilityLayer){var K,I;U.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,U.role=(I=this.props.role)!==null&&I!==void 0?I:"application",U.onKeyDown=function(D){y.accessibilityManager.keyboardEvent(D)},U.onFocus=function(){y.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return pe.createElement(mk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",Kc({className:It("recharts-wrapper",w),style:Ve({position:"relative",cursor:"default",width:S,height:C},k)},Y,{ref:function(W){y.container=W}}),pe.createElement(ej,Kc({},U,{width:S,height:C,title:q,desc:A,style:ahe}),this.renderClipPath(),e3(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);kt(b,"displayName",a),kt(b,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),kt(b,"getDerivedStateFromProps",function(f,v){var g=f.dataKey,y=f.data,N=f.children,_=f.width,w=f.height,S=f.layout,C=f.stackOffset,k=f.margin,F=v.dataStartIndex,q=v.dataEndIndex;if(v.updateId===void 0){var A=Dk(f);return Ve(Ve(Ve({},A),{},{updateId:0},h(Ve(Ve({props:f},A),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:y,prevWidth:_,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:k,prevChildren:N})}if(g!==v.prevDataKey||y!==v.prevData||_!==v.prevWidth||w!==v.prevHeight||S!==v.prevLayout||C!==v.prevStackOffset||!sd(k,v.prevMargin)){var T=Dk(f),U={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},K=Ve(Ve({},$k(v,y,S)),{},{updateId:v.updateId+1}),I=Ve(Ve(Ve({},T),U),K);return Ve(Ve(Ve({},I),h(Ve({props:f},I),v)),{},{prevDataKey:g,prevData:y,prevWidth:_,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:k,prevChildren:N})}if(!Jy(N,v.prevChildren)){var Y,D,W,R,B=Es(N,Bd),O=B&&(Y=(D=B.props)===null||D===void 0?void 0:D.startIndex)!==null&&Y!==void 0?Y:F,L=B&&(W=(R=B.props)===null||R===void 0?void 0:R.endIndex)!==null&&W!==void 0?W:q,E=O!==F||L!==q,M=!Rt(y),z=M&&!E?v.updateId:v.updateId+1;return Ve(Ve({updateId:z},h(Ve(Ve({props:f},v),{},{updateId:z,dataStartIndex:O,dataEndIndex:L}),v)),{},{prevChildren:N,dataStartIndex:O,dataEndIndex:L})}return null}),kt(b,"renderActiveDot",function(f,v,g){var y;return j.isValidElement(f)?y=j.cloneElement(f,v):Et(f)?y=f(v):y=pe.createElement(i0,v),pe.createElement(Ut,{className:"recharts-active-dot",key:g},y)});var p=j.forwardRef(function(v,g){return pe.createElement(b,Kc({},v,{ref:g}))});return p.displayName=b.displayName,p},Jd=lb({chartName:"LineChart",GraphicalChild:as,axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Rr}],formatAxisMap:zN}),zn=lb({chartName:"BarChart",GraphicalChild:Mr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Rr}],formatAxisMap:zN}),S1=lb({chartName:"PieChart",GraphicalChild:On,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Zg},{axisType:"radiusAxis",AxisComp:Qg}],formatAxisMap:zoe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),xhe=lb({chartName:"AreaChart",GraphicalChild:Lo,axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Rr}],formatAxisMap:zN});const phe=({isOpen:t,onClose:r,onSuccess:a})=>{const[s,n]=j.useState(!1),[o,i]=j.useState(!1),[l,c]=j.useState({contas_pagar:[],contas_receber:[]}),[d,u]=j.useState({}),[m,x]=j.useState(new Set),[h,b]=j.useState("todos"),[p,f]=j.useState(!1),[v,g]=j.useState([]),[y,N]=j.useState({});j.useEffect(()=>{t&&(w(),_())},[t]);const _=async()=>{try{const D=await V.get("/dre/subcategorias");g(D.data)}catch(D){console.error("Erro ao carregar categorias DRE:",D)}},w=async()=>{n(!0);try{const D=await V.get("/dre/classificar/pendentes",{params:{limit:100}});c(D.data),await S(D.data),be.success(`${D.data.total_pendentes} lanamentos pendentes encontrados`)}catch(D){console.error("Erro ao carregar pendentes:",D),be.error("Erro ao carregar lanamentos pendentes")}finally{n(!1)}},S=async D=>{const W={};for(const R of D.contas_pagar)try{const B=await V.post("/dre/classificar/sugerir",{tipo:"pagar",lancamento_id:R.id});W[`pagar_${R.id}`]=B.data}catch(B){console.error(`Erro ao buscar sugestes para pagar #${R.id}:`,B),W[`pagar_${R.id}`]=[]}for(const R of D.contas_receber)try{const B=await V.post("/dre/classificar/sugerir",{tipo:"receber",lancamento_id:R.id});W[`receber_${R.id}`]=B.data}catch(B){console.error(`Erro ao buscar sugestes para receber #${R.id}:`,B),W[`receber_${R.id}`]=[]}u(W)},C=async(D,W,R)=>{i(!0);try{await V.post("/dre/classificar/aplicar",{tipo:D,lancamento_id:W,dre_subcategoria_id:R.dre_subcategoria_id,canal:null,regra_id:R.regra_id,forma_classificacao:"sugestao_aceita"}),x(B=>new Set([...B,`${D}_${W}`])),be.success(` Classificado: ${R.subcategoria_nome}`)}catch(B){console.error("Erro ao aplicar classificao:",B),be.error("Erro ao aplicar classificao")}finally{i(!1)}},k=async()=>{f(!0);try{const D=await V.post("/dre/classificar/auto-classificar-pendentes",null,{params:{apenas_alta_confianca:!0}});be.success(` Auto-classificao concluda!
${D.data.total_classificado} de ${D.data.total_processado} lanamentos classificados`,{duration:5e3}),await w(),a&&a()}catch(D){console.error("Erro ao auto-classificar:",D),be.error("Erro ao executar auto-classificao")}finally{f(!1)}},F=async(D,W,R)=>{if(!R){be.error("Selecione uma categoria DRE");return}i(!0);try{const B=v.find(O=>O.id===parseInt(R));await V.post("/dre/classificar/aplicar",{tipo:D,lancamento_id:W,dre_subcategoria_id:parseInt(R),canal:null,regra_id:null,forma_classificacao:"manual"}),x(O=>new Set([...O,`${D}_${W}`])),N(O=>{const L={...O};return delete L[`${D}_${W}`],L}),be.success(` Classificado manualmente: ${(B==null?void 0:B.nome)||"Categoria"}`)}catch(B){console.error("Erro ao aplicar classificao manual:",B),be.error("Erro ao aplicar classificao manual")}finally{i(!1)}},q=async(D,W)=>{i(!0);try{x(R=>new Set([...R,`${D}_${W}`])),be.success(' Marcado como "No Controla DRE" (Estoque/Produtos)')}catch(R){console.error("Erro ao marcar como no-DRE:",R),be.error("Erro ao processar")}finally{i(!1)}},A=async(D,W,R,B,O)=>{if(!R){be.error("Lanamento sem fornecedor/cliente vinculado");return}const L=B||O;if(!L){be.error("ID do fornecedor/cliente no encontrado");return}if(window.confirm(`Deseja marcar "${R}" como fornecedor de produtos (No Controla DRE)?

Todos os lanamentos deste fornecedor sero automaticamente ignorados no DRE.`)){i(!0);try{await V.patch(`/clientes/${L}/controla-dre?controla_dre=false`),x(E=>new Set([...E,`${D}_${W}`])),be.success(` Fornecedor "${R}" marcado como "No Controla DRE"

Todos os lanamentos futuros sero ignorados automaticamente.`,{duration:6e3}),setTimeout(()=>w(),1e3)}catch(E){console.error("Erro ao marcar fornecedor:",E),be.error("Erro ao marcar fornecedor como No DRE")}finally{i(!1)}}},T=D=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(D||0),U=D=>D?new Date(D).toLocaleDateString("pt-BR"):"-",K=D=>D>=90?"text-green-600 bg-green-100":D>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",Y=(h==="pagar"?l.contas_pagar.map(D=>({...D,tipo:"pagar"})):h==="receber"?l.contas_receber.map(D=>({...D,tipo:"receber"})):[...l.contas_pagar.map(D=>({...D,tipo:"pagar"})),...l.contas_receber.map(D=>({...D,tipo:"receber"}))]).filter(D=>!m.has(`${D.tipo}_${D.id}`));return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2",children:" Classificar Lanamentos Pendentes"}),e.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[Y.length," lanamentos aguardando classificao DRE"]})]}),e.jsx("button",{onClick:r,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(Ro,{size:24})})]}),e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="todos"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" Todos (",l.contas_pagar.length+l.contas_receber.length,")"]}),e.jsxs("button",{onClick:()=>b("pagar"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="pagar"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" A Pagar (",l.contas_pagar.length,")"]}),e.jsxs("button",{onClick:()=>b("receber"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="receber"?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" A Receber (",l.contas_receber.length,")"]})]}),e.jsx("button",{onClick:k,disabled:p||Y.length===0,className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-2 rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:p?e.jsxs(e.Fragment,{children:[e.jsx(S4,{className:"animate-spin",size:20}),"Auto-Classificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(um,{size:20}),"Auto-Classificar (Alta Confiana)"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(S4,{className:"animate-spin text-purple-600",size:48})}):Y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(Ti,{size:64,className:"text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold",children:"Nenhum lanamento pendente!"}),e.jsx("p",{className:"text-sm mt-2",children:"Todos os lanamentos foram classificados."})]}):e.jsx("div",{className:"space-y-4",children:Y.map(D=>{const W=`${D.tipo}_${D.id}`,R=d[W]||[];return R[0],e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${D.tipo==="pagar"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:D.tipo==="pagar"?" A Pagar":" A Receber"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",D.id]})]}),e.jsx("h3",{className:"font-semibold text-gray-800 text-lg mb-1",children:D.descricao}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[D.beneficiario&&e.jsxs("span",{className:"flex items-center gap-1",children:[" ",D.beneficiario]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rs,{size:14}),T(D.valor)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kn,{size:14}),U(D.data_vencimento)]}),D.tipo_documento&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:D.tipo_documento})]})]})}),R.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(fr,{className:"text-yellow-600",size:20}),e.jsx("span",{className:"text-sm text-yellow-700 font-semibold",children:"Nenhuma sugesto automtica. Classifique manualmente."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:y[W]||"",onChange:B=>N(O=>({...O,[W]:B.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Selecione uma categoria DRE..."}),v.map(B=>e.jsxs("option",{value:B.id,children:[B.categoria_nome,"  ",B.nome]},B.id))]}),e.jsxs("button",{onClick:()=>F(D.tipo,D.id,y[W]),disabled:o||!y[W],className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:[e.jsx(Wm,{size:18}),"Classificar"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>q(D.tipo,D.id),disabled:o,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Marca apenas ESTE lanamento como No DRE",children:" Este Lanamento"}),D.beneficiario&&e.jsxs("button",{onClick:()=>A(D.tipo,D.id,D.beneficiario,D.fornecedor_id,D.cliente_id),disabled:o,className:"flex-1 flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`Marca TODOS os lanamentos de ${D.beneficiario} como No DRE`,children:[' Todo Fornecedor "',D.beneficiario,'"']})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:" Sugestes de Classificao:"}),R.slice(0,3).map((B,O)=>e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg border-2 ${O===0?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:B.subcategoria_nome}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${K(B.confianca)}`,children:[B.confianca,"% confiana"]}),O===0&&e.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white rounded-full text-xs font-bold",children:" Melhor"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:B.motivo}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Regra: ",B.regra_nome]})]}),e.jsxs("button",{onClick:()=>C(D.tipo,D.id,B),disabled:o,className:"ml-4 flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Wm,{size:18}),"Aceitar"]})]},O))]})]},W)})})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center rounded-b-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:m.size})," classificados nesta sesso"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m.size>0&&a&&a(),r()},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Fechar"}),m.size>0&&e.jsx("button",{onClick:w,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Atualizar Lista"})]})]})]})}):null},Ik=()=>{const t=Kt(),[r,a]=j.useState(!0),[s,n]=j.useState(30),[o,i]=j.useState(!1),[l,c]=j.useState({saldo_atual:0,contas_receber:{total:0,vencidas:0},contas_pagar:{total:0,vencidas:0},vendas_periodo:{quantidade:0,valor_total:0,finalizadas:0,ticket_medio:0},fluxo_periodo:{entradas:0,saidas:0,lucro:0}}),[d,u]=j.useState([]),[m,x]=j.useState({contas_receber:[],contas_pagar:[]}),h=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g||0),b=g=>new Date(g).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),p=async()=>{a(!0);try{const g=await V.get(`/dashboard/resumo?periodo_dias=${s}`);c(g.data)}catch(g){console.error("Erro ao carregar resumo:",g)}try{const g=await V.get(`/dashboard/entradas-saidas?periodo_dias=${s}`);u(g.data)}catch(g){console.error("Erro ao carregar entradas/sadas:",g)}try{const g=await V.get("/dashboard/contas-vencidas?limite=5");x(g.data)}catch(g){console.error("Erro ao carregar contas vencidas:",g)}a(!1)};if(j.useEffect(()=>{p()},[s]),r)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})});const f=[{nome:"Loja Fsica",valor:l.vendas_periodo.valor_total||0,margem:35.5,lucro:(l.vendas_periodo.valor_total||0)*.355,icon:G9,color:"blue",isMock:!1,onClick:()=>t("/financeiro/relatorio-vendas")},{nome:"Mercado Livre",valor:8450,margem:18.2,lucro:1537.9,icon:$s,color:"yellow",isMock:!0,onClick:()=>be("Integrao com Mercado Livre em breve",{icon:""})},{nome:"Shopee",valor:5230,margem:22.5,lucro:1176.75,icon:vh,color:"orange",isMock:!0,onClick:()=>be("Integrao com Shopee em breve",{icon:""})},{nome:"Amazon",valor:12890,margem:15.8,lucro:2036.62,icon:$s,color:"purple",isMock:!0,onClick:()=>be("Integrao com Amazon em breve",{icon:""})}],v=g=>{const y={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",red:"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",yellow:"from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"};return y[g]||y.blue};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Gerencial"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Viso consolidada do seu negcio"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-5 py-2.5 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("span",{className:"text-xl",children:""}),"Classificar DRE"]}),e.jsx("div",{className:"flex gap-2",children:[7,15,30,60,90].map(g=>e.jsxs("button",{onClick:()=>n(g),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s===g?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[g," dias"]},g))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{onClick:()=>t("/financeiro/fluxo-caixa"),className:`bg-gradient-to-br ${v("blue")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(fa,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:"Atual"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.saldo_atual)}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver fluxo de caixa"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/contas-receber"),className:`bg-gradient-to-br ${v("green")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(sa,{className:"w-6 h-6"})}),l.contas_receber.vencidas>0&&e.jsx(Bt,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Receber"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.contas_receber.total)}),l.contas_receber.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:[" Vencidas: ",h(l.contas_receber.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/contas-pagar"),className:`bg-gradient-to-br ${v("red")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(Ca,{className:"w-6 h-6"})}),l.contas_pagar.vencidas>0&&e.jsx(Bt,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Pagar"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.contas_pagar.total)}),l.contas_pagar.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:[" Vencidas: ",h(l.contas_pagar.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/dre"),className:`bg-gradient-to-br ${l.fluxo_periodo.lucro>=0?v("purple"):v("orange")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(bs,{className:"w-6 h-6"})}),e.jsxs("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:[s," dias"]})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:l.fluxo_periodo.lucro>=0?"Lucro":"Prejuzo"}),e.jsx("p",{className:"text-2xl font-bold",children:h(Math.abs(l.fluxo_periodo.lucro))}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver DRE completo"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Vendas por Canal"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance de cada canal de vendas"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-medium",children:"Marketplaces em preparao"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((g,y)=>e.jsxs("div",{onClick:g.onClick,className:"bg-gray-50 rounded-lg p-5 border border-gray-200 hover:shadow-md transition-all cursor-pointer transform hover:scale-105 relative",children:[g.isMock&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded",children:"Mock"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${v(g.color)} p-3 rounded-lg`,children:e.jsx(g.icon,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:g.nome})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Valor Vendido"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:h(g.valor)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Margem"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[g.margem,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Lucro Est."}),e.jsx("p",{className:"text-sm font-semibold text-green-600",children:h(g.lucro)})]})]})]})]},y))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Total consolidado:"})," ",h(f.reduce((g,y)=>g+y.valor,0))," "," | ",e.jsx("strong",{children:"Lucro total:"})," ",h(f.reduce((g,y)=>g+y.lucro,0))]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(No,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Insights Inteligentes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Alertas e sugestes automticas"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 text-center",children:[e.jsx(No,{className:"w-12 h-12 mx-auto mb-3 opacity-75"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Em breve a IA mostrar aqui:"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm opacity-90",children:[e.jsx("p",{children:" Problemas urgentes detectados"}),e.jsx("p",{children:" Oportunidades de lucro identificadas"}),e.jsx("p",{children:" Aes recomendadas para hoje"})]}),e.jsx("p",{className:"text-xs mt-4 opacity-75",children:"Sem mgica. Apenas anlise inteligente dos seus dados reais."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>t("/pdv"),className:"bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(vh,{className:"w-5 h-5"}),"Nova Venda"]}),e.jsxs("button",{onClick:()=>t("/financeiro/contas-receber"),className:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(sa,{className:"w-5 h-5"}),"Registrar Recebimento"]}),e.jsxs("button",{onClick:()=>t("/financeiro/contas-pagar"),className:"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(Ca,{className:"w-5 h-5"}),"Registrar Despesa"]}),e.jsxs("button",{onClick:()=>t("/ia/fluxo-caixa"),className:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(No,{className:"w-5 h-5"}),"Revises IA"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg mb-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:["Fluxo Financeiro (",s," dias)"]}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(Jd,{data:d,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tickFormatter:b,style:{fontSize:"12px"}}),e.jsx(Rr,{tickFormatter:g=>`R$ ${(g/1e3).toFixed(0)}k`,style:{fontSize:"12px"}}),e.jsx(lr,{formatter:g=>h(g),labelFormatter:b}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"entradas",stroke:"#10B981",strokeWidth:2,name:"Entradas"}),e.jsx(as,{type:"monotone",dataKey:"saidas",stroke:"#EF4444",strokeWidth:2,name:"Sadas"})]})})]}),(m.contas_receber.length>0||m.contas_pagar.length>0)&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-red-500"}),"Ateno: Contas Vencidas"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[m.contas_receber.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Receber (",m.contas_receber.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_receber.slice(0,3).map(g=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:g.cliente||"Sem cliente"}),e.jsx("p",{className:"font-bold text-red-600 text-sm",children:h(g.saldo)})]}),e.jsxs("p",{className:"text-xs text-red-600",children:["Venceu h ",g.dias_vencido," dias"]})]},g.id))})]}),m.contas_pagar.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Pagar (",m.contas_pagar.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_pagar.slice(0,3).map(g=>e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:g.fornecedor||"Sem fornecedor"}),e.jsx("p",{className:"font-bold text-orange-600 text-sm",children:h(g.saldo)})]}),e.jsxs("p",{className:"text-xs text-orange-600",children:["Venceu h ",g.dias_vencido," dias"]})]},g.id))})]})]})]}),e.jsx(phe,{isOpen:o,onClose:()=>i(!1)})]})},Nc=[{value:"banco",label:"Banco",icon:ZA,cor_padrao:"#dc2626"},{value:"caixa",label:"Caixa Fsico",icon:_d,cor_padrao:"#16a34a"},{value:"digital",label:"Carteira Digital",icon:Nd,cor_padrao:"#2563eb"}],hhe=["","","","","","","","","","","","","","","","","","","","","","","",""];function fhe(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(""),[u,m]=j.useState({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:"#dc2626",icone:"",instituicao_bancaria:!1,ativa:!0});j.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const f=await V.get("/contas-bancarias");r(f.data)}catch(f){console.error("Erro:",f),d("Erro ao carregar contas bancrias")}finally{s(!1)}},h=(f=null)=>{if(f)m({nome:f.nome,tipo:f.tipo,banco:f.banco||"",saldo_inicial:f.saldo_inicial,cor:f.cor||"#dc2626",icone:f.icone||"",instituicao_bancaria:f.instituicao_bancaria||!1,ativa:f.ativa}),l(f);else{const v=Nc[0];m({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:v.cor_padrao,icone:"",instituicao_bancaria:!1,ativa:!0}),l(null)}o(!0),d("")},b=async f=>{var v,g,y;f.preventDefault();try{const N={nome:u.nome.trim(),tipo:u.tipo,banco:((v=u.banco)==null?void 0:v.trim())||null,saldo_inicial:Number(u.saldo_inicial)||0,cor:u.cor,icone:u.icone||"",instituicao_bancaria:!!u.instituicao_bancaria,ativa:!!u.ativa};console.log("Enviando dados:",N),i?await V.put(`/contas-bancarias/${i.id}`,N):await V.post("/contas-bancarias",N),await x(),o(!1),d("")}catch(N){console.error("Erro completo:",N),console.error("Response:",N.response),d(((y=(g=N.response)==null?void 0:g.data)==null?void 0:y.detail)||N.message||"Erro ao salvar conta")}},p=async f=>{var v,g;if(confirm("Deseja realmente excluir esta conta?"))try{await V.delete(`/contas-bancarias/${f}`),await x()}catch(y){console.error("Erro:",y),d(((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao excluir conta")}};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastro de Bancos"}),e.jsx("p",{className:"text-gray-600",children:"Configure as contas bancrias, caixas e carteiras digitais do sistema"})]}),e.jsxs("button",{onClick:()=>h(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(wn,{className:"w-5 h-5"}),"Nova Conta"]})]})}),c&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800",children:c})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(f=>{var g,y,N;const v=((g=Nc.find(_=>_.value===f.tipo))==null?void 0:g.icon)||ZA;return e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition ${f.ativa?"border-gray-200 hover:border-blue-300":"border-gray-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:`${f.cor}20`},children:f.icone}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:f.nome}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),(y=Nc.find(_=>_.value===f.tipo))==null?void 0:y.label]})]})]}),!f.ativa&&e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Inativa"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tipo de Conta"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:(N=Nc.find(_=>_.value===f.tipo))==null?void 0:N.label}),f.banco&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:f.banco})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(f),className:"flex items-center justify-center bg-gray-100 text-gray-700 p-2 rounded-lg hover:bg-gray-200 transition",children:e.jsx(B2,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(f.id),className:"flex items-center justify-center bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-100 transition",children:e.jsx($o,{className:"w-4 h-4"})})]})]},f.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Nenhuma conta cadastrada"}),e.jsx("button",{onClick:()=>h(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Cadastrar primeira conta"})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:i?"Editar Conta":"Nova Conta"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-800 text-sm",children:c}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:u.nome,onChange:f=>m({...u,nome:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsx("select",{value:u.tipo,onChange:f=>{const v=Nc.find(g=>g.value===f.target.value);m({...u,tipo:f.target.value,cor:(v==null?void 0:v.cor_padrao)||u.cor})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Nc.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]}),u.tipo==="banco"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Banco"}),e.jsx("input",{type:"text",value:u.banco,onChange:f=>m({...u,banco:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Santander, Bradesco..."})]}),!i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:u.saldo_inicial,onChange:f=>m({...u,saldo_inicial:parseFloat(f.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:u.cor,onChange:f=>m({...u,cor:f.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone Atual"}),e.jsx("div",{className:"w-full h-10 border border-gray-300 rounded-lg flex items-center justify-center text-2xl bg-white",style:{backgroundColor:`${u.cor}10`},children:u.icone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escolher cone"}),e.jsx("div",{className:"grid grid-cols-8 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 max-h-32 overflow-y-auto",children:hhe.map((f,v)=>e.jsx("button",{type:"button",onClick:()=>m({...u,icone:f}),className:`w-10 h-10 rounded-lg flex items-center justify-center text-xl transition hover:scale-110 ${u.icone===f?"bg-blue-100 border-2 border-blue-500 ring-2 ring-blue-200":"bg-white border border-gray-200 hover:border-blue-300"}`,children:f},v))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"instituicao_bancaria",checked:u.instituicao_bancaria,onChange:f=>m({...u,instituicao_bancaria:f.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"instituicao_bancaria",className:"text-sm text-gray-700",children:" Instituio Bancria (para conciliao OFX)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativa",checked:u.ativa,onChange:f=>m({...u,ativa:f.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativa",className:"text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(Jm,{className:"w-4 h-4"}),"Salvar"]})]})]})]})})]})}const ghe=({isOpen:t,onClose:r,onSave:a})=>{const[s,n]=j.useState(!1),[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState([]),[h,b]=j.useState(30),[p,f]=j.useState(!1),[v,g]=j.useState({nome:"",tipo:"despesa",cor:"#ef4444",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),[y,N]=j.useState({descricao:"",fornecedor_id:null,categoria_id:null,dre_subcategoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null});j.useEffect(()=>{t&&_()},[t]);const _=async()=>{var I;try{const[Y,D,W]=await Promise.all([V.get("/clientes/?tipo_cadastro=fornecedor"),V.get("/categorias-financeiras/"),V.get("/dre/subcategorias")]);console.log(" Categorias recebidas:",D.data),i(Y.data);const R=D.data.filter(B=>{const O=B.tipo?B.tipo.toLowerCase():"",L=B.nome?B.nome.toLowerCase():"",E=O==="receita"||O==="entrada",M=L.includes("receita")||L.includes("venda");return!E&&!M});c(R),u(W.data||[]),console.log(" Categorias de DESPESA setadas:",R.length),console.log(" Lista completa:",R),console.log(" Subcategorias DRE carregadas:",(I=W.data)==null?void 0:I.length)}catch(Y){console.error(" Erro ao carregar dados:",Y),be.error("Erro ao carregar formulrio")}},w=()=>{if(!y.eh_parcelado||!y.total_parcelas||!y.data_vencimento||!y.valor_original){x([]);return}const I=parseFloat(y.valor_original),Y=parseInt(y.total_parcelas),D=I/Y,W=[];let R=new Date(y.data_vencimento);for(let L=0;L<Y;L++){const E=new Date(R);E.setDate(R.getDate()+L*h),W.push({numero:L+1,valor:L===Y-1?I-D*(Y-1):D,data_vencimento:E.toISOString().split("T")[0]})}const B=W.reduce((L,E)=>L+E.valor,0),O=I-B;Math.abs(O)>.01&&(W[W.length-1].valor+=O),x(W)},S=()=>{g({...v,novasSubcategorias:[...v.novasSubcategorias,{nome:"",descricao:"",ativo:!0}]})},C=(I,Y,D)=>{const W=[...v.novasSubcategorias];W[I][Y]=D,g({...v,novasSubcategorias:W})},k=I=>{const Y=v.novasSubcategorias.filter((D,W)=>W!==I);g({...v,novasSubcategorias:Y})},F=(I,Y)=>{I.key==="Tab"&&!I.shiftKey&&Y===v.novasSubcategorias.length-1&&(I.preventDefault(),S())},q=async I=>{var Y,D;if(I.preventDefault(),!v.nome){be.error("Preencha o nome da categoria");return}try{const R=(await V.post("/categorias-financeiras/",{nome:v.nome,tipo:v.tipo,cor:v.cor,icone:v.icone,descricao:v.descricao,ativo:v.ativo})).data.id;if(be.success("Categoria criada com sucesso!"),v.novasSubcategorias.length>0){const B=v.novasSubcategorias.filter(O=>O.nome.trim());for(const O of B)try{await V.post("/subcategorias/",{categoria_id:R,nome:O.nome,descricao:O.descricao,ativo:O.ativo})}catch(L){console.error("Erro ao criar subcategoria:",L)}B.length>0&&be.success(`${B.length} subcategoria(s) criada(s)!`)}await _(),N({...y,categoria_id:R}),f(!1),g({nome:"",tipo:"despesa",cor:"#ef4444",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]})}catch(W){console.error("Erro ao salvar categoria:",W),be.error(((D=(Y=W.response)==null?void 0:Y.data)==null?void 0:D.detail)||"Erro ao salvar categoria")}},A=(I,Y)=>{const D=[...m];D[I].data_vencimento=Y,x(D)},T=(I,Y)=>{const D=[...m];D[I].valor=parseFloat(Y)||0,x(D)},U=async I=>{var Y,D;if(I.preventDefault(),!y.descricao||!y.valor_original||!y.data_vencimento){be.error("Preencha todos os campos obrigatrios");return}n(!0);try{await V.post("/contas-pagar/",{...y,valor_original:parseFloat(y.valor_original),total_parcelas:y.eh_parcelado?parseInt(y.total_parcelas):1,intervalo_dias:y.tipo_recorrencia==="personalizado"?parseInt(y.intervalo_dias):null,numero_repeticoes:y.numero_repeticoes?parseInt(y.numero_repeticoes):null}),be.success(y.eh_recorrente?"Conta recorrente criada com sucesso!":"Conta criada com sucesso!"),a(),r(),K()}catch(W){console.error("Erro ao criar conta:",W),be.error(((D=(Y=W.response)==null?void 0:Y.data)==null?void 0:D.detail)||"Erro ao criar conta a pagar")}finally{n(!1)}},K=()=>{N({descricao:"",fornecedor_id:null,categoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null})};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full m-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(wn,{className:"text-red-600"}),"Nova Conta a Pagar"]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(Vt,{size:24})})]}),e.jsxs("form",{onSubmit:U,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(bs,{size:20,className:"text-blue-600"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio *"}),e.jsx("input",{type:"text",value:y.descricao,onChange:I=>N({...y,descricao:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Aluguel, Conta de luz, Fornecedor XYZ...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(jh,{size:16,className:"inline mr-1"}),"Fornecedor"]}),e.jsxs("select",{value:y.fornecedor_id||"",onChange:I=>N({...y,fornecedor_id:I.target.value?parseInt(I.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),o.map(I=>e.jsx("option",{value:I.id,children:I.nome},I.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(X9,{size:16,className:"inline mr-1"}),"Categoria"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:y.categoria_id||"",onChange:I=>N({...y,categoria_id:I.target.value?parseInt(I.target.value):null}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),l.map(I=>e.jsx("option",{value:I.id,children:I.nome},I.id))]}),e.jsxs("button",{type:"button",onClick:()=>f(!0),className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 whitespace-nowrap",title:"Adicionar nova categoria",children:[e.jsx(wn,{size:16})," Adicionar"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Subcategoria DRE (Demonstrativo de Resultado)"}),e.jsxs("select",{value:y.dre_subcategoria_id||"",onChange:I=>N({...y,dre_subcategoria_id:I.target.value?parseInt(I.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sem classificao DRE"}),d.map(I=>e.jsx("option",{value:I.id,children:I.nome},I.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Classifique para melhor anlise gerencial"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(fa,{size:16,className:"inline mr-1"}),"Valor *"]}),e.jsx("input",{type:"number",step:"0.01",value:y.valor_original,onChange:I=>N({...y,valor_original:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(zi,{size:16,className:"inline mr-1"}),"Data Vencimento *"]}),e.jsx("input",{type:"date",value:y.data_vencimento,onChange:I=>N({...y,data_vencimento:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Documento/NF"}),e.jsx("input",{type:"text",value:y.documento,onChange:I=>N({...y,documento:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Nmero do documento"})]})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_recorrente",checked:y.eh_recorrente,onChange:I=>N({...y,eh_recorrente:I.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"eh_recorrente",className:"text-lg font-semibold text-gray-700 flex items-center gap-2 cursor-pointer",children:[e.jsx(K9,{size:20,className:"text-purple-600"}),"Despesa Recorrente"]})]}),y.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recorrncia *"}),e.jsxs("select",{value:y.tipo_recorrencia,onChange:I=>N({...y,tipo_recorrencia:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"semanal",children:" Semanal (7 em 7 dias)"}),e.jsx("option",{value:"quinzenal",children:" Quinzenal (15 em 15 dias)"}),e.jsx("option",{value:"mensal",children:" Mensal"}),e.jsx("option",{value:"personalizado",children:" Personalizado"})]})]}),y.tipo_recorrencia==="personalizado"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (em dias) *"}),e.jsx("input",{type:"number",min:"1",value:y.intervalo_dias||"",onChange:I=>N({...y,intervalo_dias:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 10, 20, 45...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Repeties"}),e.jsx("input",{type:"number",min:"1",value:y.numero_repeticoes||"",onChange:I=>N({...y,numero_repeticoes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 12 (deixe vazio para infinito)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantas vezes deve se repetir (opcional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Trmino (alternativa)"}),e.jsx("input",{type:"date",value:y.data_fim_recorrencia||"",onChange:I=>N({...y,data_fim_recorrencia:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"At quando deve repetir (opcional)"})]})]}),e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Como funciona:"})," Esta conta ser criada agora e o sistema ir gerar automaticamente novas contas nos prximos perodos conforme a recorrncia configurada."]})})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_parcelado",checked:y.eh_parcelado,onChange:I=>{N({...y,eh_parcelado:I.target.checked}),I.target.checked||x([])},disabled:y.eh_recorrente,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"eh_parcelado",className:"text-lg font-semibold text-gray-700 cursor-pointer",children:" Parcelar esta conta"})]}),y.eh_parcelado&&!y.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Parcelas *"}),e.jsx("input",{type:"number",min:"2",max:"120",value:y.total_parcelas,onChange:I=>N({...y,total_parcelas:I.target.value}),onBlur:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (dias)"}),e.jsxs("select",{value:h,onChange:I=>{b(parseInt(I.target.value)),setTimeout(w,100)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7",children:"7 dias (semanal)"}),e.jsx("option",{value:"14",children:"14 dias (quinzenal)"}),e.jsx("option",{value:"15",children:"15 dias"}),e.jsx("option",{value:"21",children:"21 dias"}),e.jsx("option",{value:"30",children:"30 dias (mensal)"}),e.jsx("option",{value:"60",children:"60 dias (bimestral)"}),e.jsx("option",{value:"90",children:"90 dias (trimestral)"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:w,className:"mt-6 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:" Gerar Preview"})})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:" Preview das Parcelas"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:m.map((I,Y)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded border",children:[e.jsxs("span",{className:"font-semibold text-gray-600 min-w-[80px]",children:["Parcela ",I.numero,"/",m.length]}),e.jsx("input",{type:"number",step:"0.01",value:I.valor,onChange:D=>T(Y,D.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"}),e.jsx("input",{type:"date",value:I.data_vencimento,onChange:D=>A(Y,D.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"})]},Y))}),e.jsx("div",{className:"mt-3 p-2 bg-gray-100 rounded",children:e.jsxs("strong",{children:["Total: R$ ",m.reduce((I,Y)=>I+Y.valor,0).toFixed(2)]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:y.observacoes,onChange:I=>N({...y,observacoes:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Informaes adicionais..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{r(),K()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:s?"Salvando...":"Salvar Conta"})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Nova Categoria Financeira"}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Vt,{size:24})})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Categoria *"}),e.jsx("input",{type:"text",value:v.nome,onChange:I=>g({...v,nome:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Ex: Fornecedores, Aluguel, Salrios..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone"}),e.jsx("select",{value:v.icone,onChange:I=>g({...v,icone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:["","","","","","","","","","","",""].map(I=>e.jsx("option",{value:I,children:I},I))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:v.cor,onChange:I=>g({...v,cor:I.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:v.descricao,onChange:I=>g({...v,descricao:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"2"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategorias DRE (opcional)"}),e.jsxs("button",{type:"button",onClick:S,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(wn,{size:14})," Adicionar"]})]}),v.novasSubcategorias.length>0&&e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:v.novasSubcategorias.map((I,Y)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("input",{type:"text",value:I.nome,onChange:D=>C(Y,"nome",D.target.value),onKeyDown:D=>F(D,Y),placeholder:"Nome (Tab para adicionar mais)",className:"flex-1 px-2 py-1 border border-gray-300 rounded-md text-sm"}),e.jsx("button",{type:"button",onClick:()=>k(Y),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(Vt,{size:16})})]},Y))}),v.novasSubcategorias.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aperte Tab no ltimo campo para adicionar mais subcategorias"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Criar Categoria"})]})]})]})})]}):null},vr=t=>Array.isArray(t)?t:[],bhe=()=>{var L;const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({status:"todos",fornecedor_id:null,data_inicio:"",data_fim:"",apenas_vencidas:!1,apenas_vencer:!1,numero_nf:""}),[l,c]=j.useState([]),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,b]=j.useState(!1),[p,f]=j.useState(!1),[v,g]=j.useState([]),[y,N]=j.useState([]),[_,w]=j.useState(!1),[S,C]=j.useState({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),[k,F]=j.useState({valor_pago:0,data_pagamento:new Date().toISOString().split("T")[0],forma_pagamento_id:"",conta_bancaria_id:"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""});j.useEffect(()=>{q()},[]);const q=async()=>{try{const[E,M,z,le]=await Promise.all([V.get(`/contas-pagar/?_t=${Date.now()}`),V.get("/clientes/?tipo_cadastro=fornecedor"),V.get("/financeiro/formas-pagamento/"),V.get("/contas-bancarias?apenas_ativas=true")]);a(vr(E.data)),c(vr(M.data)),g(vr(z.data)),N(vr(le.data))}catch(E){console.error("Erro ao carregar dados:",E),be.error("Erro ao carregar contas a pagar")}finally{n(!1)}},A=async()=>{try{n(!0);const E=new URLSearchParams;o.status!=="todos"&&E.append("status",o.status),o.fornecedor_id&&E.append("fornecedor_id",o.fornecedor_id),o.data_inicio&&E.append("data_inicio",o.data_inicio),o.data_fim&&E.append("data_fim",o.data_fim),o.apenas_vencidas&&E.append("apenas_vencidas","true"),o.apenas_vencer&&E.append("apenas_vencer","true"),o.numero_nf&&E.append("numero_nf",o.numero_nf);const M=await V.get(`/contas-pagar/?${E}`);a(M.data)}catch(E){console.error("Erro ao filtrar:",E),be.error("Erro ao aplicar filtros")}finally{n(!1)}},T=E=>{u(E);const M=v.find(z=>z.id===E.forma_pagamento_id);F({valor_pago:E.valor_final-E.valor_pago,forma_pagamento_id:E.forma_pagamento_id||"",conta_bancaria_id:(M==null?void 0:M.conta_bancaria_destino_id)||"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""}),x(!0)},U=E=>{u(E),f(!0)},K=E=>{E.nota_entrada_id?t(`/compras?nota_id=${E.nota_entrada_id}`):E.nfe_numero?t(`/compras?numero=${E.nfe_numero}`):be.error("Nota fiscal no encontrada")},I=E=>{const M=new URLSearchParams;E.fornecedor_nome&&M.append("busca",E.fornecedor_nome),E.documento&&M.append("documento",E.documento),t(`/financeiro/fluxo-caixa?${M.toString()}`),be.success("Redirecionando para o Fluxo de Caixa...")},Y=E=>{const M=v.find(z=>z.id===parseInt(E));F({...k,forma_pagamento_id:parseInt(E)||"",conta_bancaria_id:(M==null?void 0:M.conta_bancaria_destino_id)||k.conta_bancaria_id||""})},D=async()=>{try{await V.post("/financeiro/formas-pagamento",{...S,taxa_percentual:0,taxa_fixa:0,prazo_dias:0,ativo:!0,permite_parcelamento:!1,parcelas_maximas:1}),be.success("Forma de pagamento criada!"),w(!1),C({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),q()}catch(E){console.error("Erro:",E),be.error("Erro ao criar forma de pagamento")}},W=async()=>{var E,M;try{await V.post(`/contas-pagar/${d.id}/pagar`,k),be.success("Pagamento registrado com sucesso!"),x(!1),q()}catch(z){console.error("Erro ao registrar pagamento:",z),be.error(((M=(E=z.response)==null?void 0:E.data)==null?void 0:M.detail)||"Erro ao registrar pagamento")}},R=E=>{if(!E)return"-";const M=E.split("T")[0].split("-");return new Date(parseInt(M[0]),parseInt(M[1])-1,parseInt(M[2])).toLocaleDateString("pt-BR")},B=E=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(E),O=E=>{const M=new Date,z=new Date(E.data_vencimento);return E.status==="pago"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:" Pago"}):z<M?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800",children:" Vencida"}):E.status==="parcial"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:" Parcial"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:" Pendente"})};return s?e.jsx("div",{className:"text-center p-8",children:"Carregando contas a pagar..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Contas a Pagar"}),e.jsx("button",{onClick:()=>b(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:" Nova Conta"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4",children:" Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.status,onChange:E=>i({...o,status:E.target.value}),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"parcial",children:"Parcial"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"vencido",children:"Vencido"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fornecedor"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.fornecedor_id||"",onChange:E=>i({...o,fornecedor_id:E.target.value||null}),children:[e.jsx("option",{value:"",children:"Todos"}),vr(l).map(E=>e.jsx("option",{value:E.id,children:E.nome},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nmero NF"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Ex: 12345",value:o.numero_nf,onChange:E=>i({...o,numero_nf:E.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_inicio,onChange:E=>i({...o,data_inicio:E.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_fim,onChange:E=>i({...o,data_fim:E.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencidas,onChange:E=>i({...o,apenas_vencidas:E.target.checked,apenas_vencer:!1})}),e.jsx("span",{className:"text-sm",children:"S Vencidas"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencer,onChange:E=>i({...o,apenas_vencer:E.target.checked,apenas_vencidas:!1})}),e.jsx("span",{className:"text-sm",children:"A Vencer"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",onClick:A,children:"Filtrar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Original"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Pago"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma conta encontrada"})}):vr(r).map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:E.id}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[E.descricao,E.eh_parcelado&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:[E.numero_parcela,"/",E.total_parcelas]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:E.fornecedor_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:R(E.data_vencimento)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(E.valor_original)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(E.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold",children:B(E.valor_final-E.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:O(E)}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[E.status!=="pago"&&e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>T(E),title:"Registrar Pagamento",children:" Pagar"}),e.jsx("button",{className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs",onClick:()=>U(E),title:"Ver Detalhes",children:""})]})]},E.id))})]})}),r.length>0&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 px-4 py-3",children:[e.jsx("strong",{children:"Total:"})," ",r.length," conta(s) |",e.jsx("strong",{className:"ml-3",children:"Saldo a Pagar:"})," ",B(r.reduce((E,M)=>E+(M.valor_final-M.valor_pago),0))]})]}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[e.jsx("h5",{className:"text-xl font-bold",children:" Registrar Pagamento"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>x(!1),children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Conta:"})," ",d.descricao,e.jsx("br",{}),e.jsx("strong",{children:"Valor Total:"})," ",B(d.valor_final),e.jsx("br",{}),e.jsx("strong",{children:"J Pago:"})," ",B(d.valor_pago),e.jsx("br",{}),e.jsx("strong",{children:"Saldo Restante:"})," ",B(d.valor_final-d.valor_pago)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor a Pagar *"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_pago,onChange:E=>F({...k,valor_pago:parseFloat(E.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data do Pagamento *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:k.data_pagamento,onChange:E=>F({...k,data_pagamento:E.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"flex-1 border border-gray-300 rounded px-3 py-2",value:k.forma_pagamento_id||"",onChange:E=>Y(E.target.value),children:[e.jsx("option",{value:"",children:"Selecione..."}),vr(v).map(E=>e.jsxs("option",{value:E.id,children:[E.icone||""," ",E.nome]},E.id))]}),e.jsx("button",{type:"button",className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>w(!0),title:"Adicionar nova forma de pagamento",children:"+"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Conta Bancria *",k.forma_pagamento_id&&((L=v.find(E=>E.id===k.forma_pagamento_id))==null?void 0:L.conta_bancaria_destino_id)&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Padro da forma selecionada)"})]}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:k.conta_bancaria_id||"",onChange:E=>F({...k,conta_bancaria_id:parseInt(E.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione a conta..."}),vr(y).map(E=>e.jsxs("option",{value:E.id,children:[E.nome," - ",B(E.saldo_atual||0)]},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Juros"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_juros,onChange:E=>F({...k,valor_juros:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Multa"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_multa,onChange:E=>F({...k,valor_multa:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Desconto"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_desconto,onChange:E=>F({...k,valor_desconto:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2",rows:"3",value:k.observacoes,onChange:E=>F({...k,observacoes:E.target.value})})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 mt-4",children:[e.jsx("strong",{children:"Valor Final do Pagamento:"})," ",B((k.valor_pago||0)+(k.valor_juros||0)+(k.valor_multa||0)-(k.valor_desconto||0))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>x(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:W,children:" Confirmar Pagamento"})]})]})}),p&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Detalhes da Conta"}),e.jsx("button",{onClick:()=>f(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Parcela"}),e.jsx("p",{className:"mt-1 text-lg",children:d.numero_parcela&&d.total_parcelas?`${d.numero_parcela}/${d.total_parcelas}`:d.documento||"nica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fornecedor"}),e.jsx("p",{className:"mt-1 text-lg",children:d.fornecedor_nome||"N/A"})]})]}),d.nfe_numero&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nota Fiscal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>K(d),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:d.nfe_numero})]}),e.jsxs("button",{onClick:()=>I(d),className:"flex items-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",title:"Ver no Fluxo de Caixa",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"text-sm",children:"Fluxo"})]})]})]}),!d.nfe_numero&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>I(d),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:"Ver no Fluxo de Caixa"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Emisso"}),e.jsx("p",{className:"mt-1",children:R(d.data_emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1",children:R(d.data_vencimento)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Original"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:B(d.valor_final||d.valor_total||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Pago"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:B(d.valor_pago||0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Restante"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-red-600",children:B((d.valor_final||d.valor_total||0)-(d.valor_pago||0))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${d.status==="pago"?"bg-green-100 text-green-800":d.status==="parcial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status==="pago"?"Pago":d.status==="parcial"?"Parcial":"Pendente"})})]})]}),d.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-gray-600",children:d.observacoes})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Nova Forma de Pagamento"}),e.jsx("button",{onClick:()=>w(!1),className:"text-white hover:bg-green-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:S.nome,onChange:E=>C({...S,nome:E.target.value}),placeholder:"Ex: PIX Santander, Dinheiro..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:S.tipo,onChange:E=>C({...S,tipo:E.target.value}),children:[e.jsx("option",{value:"dinheiro",children:" Dinheiro"}),e.jsx("option",{value:"pix",children:" PIX"}),e.jsx("option",{value:"cartao_debito",children:" Carto Dbito"}),e.jsx("option",{value:"cartao_credito",children:" Carto Crdito"}),e.jsx("option",{value:"transferencia",children:" Transferncia"}),e.jsx("option",{value:"boleto",children:" Boleto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria Padro"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:S.conta_bancaria_destino_id||"",onChange:E=>C({...S,conta_bancaria_destino_id:parseInt(E.target.value)||null}),children:[e.jsx("option",{value:"",children:"Nenhuma (selecionar manualmente)"}),vr(y).map(E=>e.jsx("option",{value:E.id,children:E.nome},E.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta conta ser pr-selecionada automaticamente ao usar esta forma"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>w(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:D,children:" Criar"})]})]})}),e.jsx(ghe,{isOpen:h,onClose:()=>b(!1),onSave:q})]})},vhe=()=>{var L;const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({status:"todos",cliente_id:null,data_inicio:"",data_fim:"",apenas_vencidas:!1,apenas_vencer:!1}),[l,c]=j.useState(""),[d,u]=j.useState("desc"),[m,x]=j.useState([]),[h,b]=j.useState(null),[p,f]=j.useState(null),[v,g]=j.useState(!1),[y,N]=j.useState(!1),[_,w]=j.useState([]),[S,C]=j.useState([]),[k,F]=j.useState({valor_recebido:0,data_recebimento:new Date().toISOString().split("T")[0],forma_pagamento_id:null,conta_bancaria_id:null,valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""});j.useEffect(()=>{q()},[]),j.useEffect(()=>{if(l.trim().length>0){const E=setTimeout(()=>{A()},500);return()=>clearTimeout(E)}else l===""&&q()},[l]);const q=async()=>{try{const M={Authorization:`Bearer ${localStorage.getItem("token")}`},[z,le,Q,ne]=await Promise.all([V.get("/contas-receber/",{headers:M}),V.get("/clientes/",{headers:M}),V.get("/financeiro/formas-pagamento/",{headers:M}),V.get("/contas-bancarias?apenas_ativas=true",{headers:M})]);console.log(" Contas carregadas:",z.data.length,"contas"),console.log(" Status das contas:",vr(z.data).map(ae=>({id:ae.id,status:ae.status,descricao:ae.descricao}))),console.log(" Todas as vendas nos contas:",vr(z.data).map(ae=>ae.numero_venda).filter(ae=>ae)),console.log(" Procurando venda 202601100007:",z.data.find(ae=>{var ie;return ae.numero_venda==="202601100007"||((ie=ae.descricao)==null?void 0:ie.includes("202601100007"))})),console.log(" Antes de setContas:",z.data);const re=[...vr(z.data)].sort((ae,ie)=>ie.id-ae.id);a(re),console.log(" Contas setadas no estado"),x(vr(le.data)),x(vr(le.data)),w(vr(Q.data)),C(vr(ne.data))}catch(E){console.error("Erro ao carregar dados:",E),be.error("Erro ao carregar contas a receber")}finally{n(!1)}},A=async()=>{try{n(!0);const E=new URLSearchParams;o.status!=="todos"&&E.append("status",o.status),o.cliente_id&&E.append("cliente_id",o.cliente_id),o.data_inicio&&E.append("data_inicio",o.data_inicio),o.data_fim&&E.append("data_fim",o.data_fim),o.apenas_vencidas&&E.append("apenas_vencidas","true"),o.apenas_vencer&&E.append("apenas_vencer","true"),l&&E.append("numero_venda",l);const M=await V.get(`/contas-receber/?${E}`);a(M.data)}catch(E){console.error("Erro ao filtrar:",E),be.error("Erro ao aplicar filtros")}finally{n(!1)}},T=E=>{sessionStorage.setItem("abrirVenda",E),sessionStorage.setItem("abrirModalPagamento","true"),be.success("Redirecionando para o PDV..."),t("/pdv")},U=E=>{const M=new URLSearchParams;E.cliente_nome&&M.append("busca",E.cliente_nome),E.documento&&M.append("documento",E.documento),t(`/financeiro/fluxo-caixa?${M.toString()}`),be.success("Redirecionando para o Fluxo de Caixa...")},K=()=>{const E=d==="desc"?"asc":"desc";u(E);const M=[...r].sort((z,le)=>E==="desc"?le.id-z.id:z.id-le.id);a(M),be.success(E==="desc"?" Ordenado: Mais recentes primeiro":" Ordenado: Mais antigas primeiro")},I=E=>{b(E),F({valor_recebido:parseFloat((E.valor_final-E.valor_recebido).toFixed(2)),data_recebimento:new Date().toISOString().split("T")[0],forma_pagamento_id:E.forma_pagamento_id||null,conta_bancaria_id:null,valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""}),g(!0)},Y=async E=>{try{const M=await V.get(`/contas-receber/${E.id}`);b(E),f(M.data),N(!0)}catch(M){console.error("Erro ao carregar detalhes:",M),be.error("Erro ao carregar detalhes da conta")}},D=E=>{t(`/pdv?venda=${E}`)},W=async()=>{var E,M;try{await V.post(`/contas-receber/${h.id}/receber`,k),be.success("Recebimento registrado com sucesso!"),g(!1),q()}catch(z){console.error("Erro ao registrar recebimento:",z),be.error(((M=(E=z.response)==null?void 0:E.data)==null?void 0:M.detail)||"Erro ao registrar recebimento")}},R=E=>{if(!E)return"-";const M=E.split("T")[0].split("-");return new Date(parseInt(M[0]),parseInt(M[1])-1,parseInt(M[2])).toLocaleDateString("pt-BR")},B=E=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(E),O=E=>{const M=new Date,z=new Date(E.data_vencimento);return E.status==="recebido"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:" Recebido"}):z<M?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800",children:" Vencida"}):E.status==="parcial"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:" Parcial"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:" Pendente"})};return s?e.jsx("div",{className:"text-center p-8",children:"Carregando contas a receber..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Contas a Receber"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:K,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",title:d==="desc"?"Clique para ver mais antigas primeiro":"Clique para ver mais recentes primeiro",children:d==="desc"?" Mais Recentes":" Mais Antigas"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:" Nova Conta"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4",children:" Filtros"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:" Buscar por Nmero da Venda"}),e.jsx("input",{type:"text",placeholder:"Digite o nmero da venda (ex: 202601100003) e pressione Enter",className:"w-full border border-gray-300 rounded px-3 py-2",value:l,onChange:E=>{const M=E.target.value.replace("#","");c(M)},onKeyPress:E=>{E.key==="Enter"&&A()}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.status,onChange:E=>i({...o,status:E.target.value}),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"parcial",children:"Parcial"}),e.jsx("option",{value:"recebido",children:"Recebido"}),e.jsx("option",{value:"vencido",children:"Vencido"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cliente"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.cliente_id||"",onChange:E=>i({...o,cliente_id:E.target.value||null}),children:[e.jsx("option",{value:"",children:"Todos"}),vr(m).map(E=>e.jsx("option",{value:E.id,children:E.nome},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_inicio,onChange:E=>i({...o,data_inicio:E.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_fim,onChange:E=>i({...o,data_fim:E.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencidas,onChange:E=>i({...o,apenas_vencidas:E.target.checked,apenas_vencer:!1})}),e.jsx("span",{className:"text-sm",children:"S Vencidas"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencer,onChange:E=>i({...o,apenas_vencer:E.target.checked,apenas_vencidas:!1})}),e.jsx("span",{className:"text-sm",children:"A Vencer"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",onClick:A,children:"Filtrar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Original"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Recebido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:vr(r).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma conta encontrada"})}):vr(r).filter(E=>{if(!l)return!0;const M=String(E.numero_venda||""),z=String(E.descricao||""),le=l.toLowerCase();return M.toLowerCase().includes(le)||z.toLowerCase().includes(le)}).map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:E.id}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[E.descricao,E.eh_parcelado&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:[E.numero_parcela,"/",E.total_parcelas]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:E.cliente_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:R(E.data_vencimento)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(E.valor_original)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(E.valor_recebido)}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold",children:B(E.valor_final-E.valor_recebido)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:O(E)}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[E.status!=="recebido"&&e.jsx(e.Fragment,{children:E.nsu&&!E.conciliado?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>t(`/conciliacao-cartao?nsu=${E.nsu}`),title:`Conciliar NSU ${E.nsu} com extrato da operadora`,children:" Conciliar"}),e.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>I(E),title:"Receber manual (caso no consiga conciliar)",children:" Manual"})]}):E.venda_id&&!E.nsu?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>{console.log("Conta:",E),E.venda_id?T(E.venda_id):I(E)},title:"Receber no PDV (movimenta caixa)",children:" PDV"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>I(E),title:"Receber manual (sem PDV)",children:" Manual"})]}):e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>I(E),title:"Registrar recebimento manual",children:" Receber Manual"})}),E.conciliado&&e.jsx("span",{className:"text-xs text-green-600 font-semibold mr-2",title:`Conciliado em ${E.data_conciliacao}`,children:" Conciliado"}),e.jsx("button",{className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs",title:"Ver Detalhes",onClick:()=>Y(E),children:""})]})]},E.id))})]})}),r.length>0&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 px-4 py-3",children:[e.jsx("strong",{children:"Total:"})," ",r.length," conta(s) |",e.jsx("strong",{className:"ml-3",children:"Saldo a Receber:"})," ",B(r.reduce((E,M)=>E+(M.valor_final-M.valor_recebido),0))]})]}),v&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[e.jsx("h5",{className:"text-xl font-bold",children:" Registrar Recebimento"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>g(!1),children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Conta:"})," ",h.descricao,e.jsx("br",{}),e.jsx("strong",{children:"Valor Total:"})," ",B(h.valor_final),e.jsx("br",{}),e.jsx("strong",{children:"J Recebido:"})," ",B(h.valor_recebido),e.jsx("br",{}),e.jsx("strong",{children:"Saldo Restante:"})," ",B(h.valor_final-h.valor_recebido)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor a Receber *"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_recebido,onChange:E=>F({...k,valor_recebido:parseFloat(E.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data do Recebimento *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:k.data_recebimento,onChange:E=>F({...k,data_recebimento:E.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:k.forma_pagamento_id||"",onChange:E=>F({...k,forma_pagamento_id:parseInt(E.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione..."}),vr(_).map(E=>e.jsx("option",{value:E.id,children:E.nome},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:k.conta_bancaria_id||"",onChange:E=>F({...k,conta_bancaria_id:parseInt(E.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione a conta..."}),vr(S).map(E=>e.jsxs("option",{value:E.id,children:[E.nome," - ",B(E.saldo_atual||0)]},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Juros"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_juros,onChange:E=>F({...k,valor_juros:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Multa"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_multa,onChange:E=>F({...k,valor_multa:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Desconto"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:k.valor_desconto,onChange:E=>F({...k,valor_desconto:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2",rows:"3",value:k.observacoes,onChange:E=>F({...k,observacoes:E.target.value})})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 mt-4",children:[e.jsx("strong",{children:"Valor Final do Recebimento:"})," ",B((k.valor_recebido||0)+(k.valor_juros||0)+(k.valor_multa||0)-(k.valor_desconto||0))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>g(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:W,children:" Confirmar Recebimento"})]})]})}),y&&h&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Detalhes da Conta"}),e.jsx("button",{onClick:()=>N(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nmero da Conta"}),e.jsx("p",{className:"mt-1 text-lg",children:h.numero_documento||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),e.jsx("p",{className:"mt-1 text-lg",children:((L=p.cliente)==null?void 0:L.nome)||"N/A"})]})]}),p.venda&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pedido/Venda"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>D(p.venda.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-semibold",children:p.venda.numero_venda})]}),e.jsxs("button",{onClick:()=>U(h),className:"flex items-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",title:"Ver no Fluxo de Caixa",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"text-sm",children:"Fluxo"})]})]})]}),!p.venda&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>U(h),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:"Ver no Fluxo de Caixa"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Emisso"}),e.jsx("p",{className:"mt-1",children:R(p.datas.emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1",children:R(p.datas.vencimento)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Original"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:B(p.valores.final)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Recebido"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:B(p.valores.recebido)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Restante"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-red-600",children:B(p.valores.saldo)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${p.status==="recebido"?"bg-green-100 text-green-800":p.status==="parcial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:p.status==="recebido"?" Recebido":p.status==="parcial"?" Parcial":" Pendente"})})]})]}),p.recebimentos&&p.recebimentos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Histrico de Recebimentos"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Data"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Valor"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Conta Bancria"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:vr(p==null?void 0:p.recebimentos).map((E,M)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm",children:R(E.data)}),e.jsx("td",{className:"px-3 py-2 text-sm font-semibold text-green-600",children:B(E.valor)}),e.jsx("td",{className:"px-3 py-2 text-sm",children:E.conta_bancaria_nome?e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:[" ",E.conta_bancaria_nome]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No informada"})})]},M))})]})})]}),p.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-gray-600",children:p.observacoes})]})]})]})})]})};function yhe({onConcluida:t,status:r}){const a=Kt(),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!1),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,b]=j.useState(null),[p,f]=j.useState(!1),[v,g]=j.useState([]),[y,N]=j.useState([]),[_,w]=j.useState(!1),[S,C]=j.useState(!1),[k,F]=j.useState("pendentes"),[q,A]=j.useState([]),[T,U]=j.useState(null),[K,I]=j.useState(!0),[Y,D]=j.useState(1),[W,R]=j.useState(1);j.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("access_token")){u("Voc precisa estar logado."),setTimeout(()=>a("/login"),2e3);return}const ie=await V.get("/operadoras-cartao?apenas_ativas=true");A(ie.data);const ve=ie.data.find(_e=>_e.padrao);ve&&U(ve)}catch(ae){console.error("Erro ao carregar operadoras:",ae),u("Erro ao carregar operadoras")}finally{I(!1)}})()},[a]),j.useEffect(()=>{T&&(B(),L())},[Y,T,k]),j.useEffect(()=>{if(k==="conciliadas"&&s.length>0&&o.length>0){const re=[];s.forEach(ae=>{var Se;const ie=ae.pagamento||((Se=ae.pagamentos)==null?void 0:Se.find(Ne=>Ne.nsu||Ne.nsu_cartao)),ve=(ie==null?void 0:ie.nsu)||(ie==null?void 0:ie.nsu_cartao)||ae.nsu;if(!ve)return;const _e=o.find(Ne=>Ne.nsu===ve);if(!_e)return;const me={...ae,numero:ae.numero||ae.numero_venda,nsu:ve,bandeira:ie==null?void 0:ie.bandeira,parcelas:ie==null?void 0:ie.parcelas,valor:(ie==null?void 0:ie.valor)??ae.total};re.push({venda_id:ae.id,status:"ok",venda_pdv:me,venda_stone:_e})}),N(re)}else N([])},[k,s,o]),j.useEffect(()=>{const re=ae=>{ae.key==="Escape"&&S&&(C(!1),g([]),w(!1))};return window.addEventListener("keydown",re),()=>window.removeEventListener("keydown",re)},[S]),j.useEffect(()=>{T&&(L(),B())},[T]);const B=async()=>{try{if(c(!0),!localStorage.getItem("access_token")){u("Voc precisa estar logado."),setTimeout(()=>a("/login"),2e3);return}const ae=await V.get("/conciliacao/aba1/vendas-pdv",{params:{status:k,operadora_id:(T==null?void 0:T.id)==="legacy"?"legacy":T==null?void 0:T.id,page:Y,limit:50}});ae.data.success&&(n(ae.data.vendas),R(ae.data.total_pages))}catch(re){console.error("Erro ao carregar vendas PDV:",re),u("Erro ao carregar vendas do PDV")}finally{c(!1)}},O=async re=>{var _e,me;const ae=re.target.files[0];if(!ae)return;if(!T){alert(` Selecione uma operadora primeiro!

As vendas da planilha sero importadas com a tag da operadora selecionada.
Isso  importante para o processo de conciliao.`),re.target.value="";return}if(T.id==="legacy"){alert(` Vendas Legacy no tm planilha!

Vendas sem operadora devem ter a operadora preenchida manualmente usando o boto "Preencher Operadora".`),re.target.value="";return}if(!window.confirm(` Confirmar Upload

Operadora selecionada: ${T.nome}

Todas as vendas da planilha "${ae.name}" sero marcadas com esta operadora.

Deseja continuar?`)){re.target.value="";return}b(ae),f(!0),u(null);const ve=new FormData;ve.append("arquivo",ae),ve.append("operadora_id",T.id);try{const Se=await V.post("/conciliacao/aba1/upload-stone",ve,{headers:{"Content-Type":"multipart/form-data"}});Se.data.success&&(await L(),await B(),alert(` Planilha importada com sucesso!

 ${Se.data.total_nsus||0} NSUs carregados
Operadora: ${T.nome}

Clique em "Processar Matches" para conciliar automaticamente.`),re.target.value="")}catch(Se){console.error("Erro no upload:",Se),u(((me=(_e=Se.response)==null?void 0:_e.data)==null?void 0:me.detail)||"Erro ao importar planilha"),re.target.value=""}finally{f(!1)}},L=async()=>{if(T){if(T.id==="legacy"){i([]);return}try{const re=await V.get("/conciliacao/aba1/stone-nao-conciliadas",{params:{operadora_id:T.id,status:k}});re.data.success&&i(re.data.nsus)}catch(re){console.error("Erro ao carregar NSUs:",re)}}},E=async()=>{var re,ae;if(!T){alert("Selecione uma operadora primeiro!");return}f(!0),u(null);try{const ie=await V.post("/conciliacao/aba1/processar-matches");ie.data.success&&(g(ie.data.matches||[]),C(!0),alert(` Matches encontrados!

 Resumo:
 ${ie.data.conferidas||0} vendas OK
 ${ie.data.corrigidas||0} com divergncias
 ${ie.data.sem_nsu||0} sem NSU
 ${ie.data.orfaos||0} NSUs rfos

 Visualize os matches abaixo e confirme para conciliar.`))}catch(ie){console.error("Erro ao processar matches:",ie),u(((ae=(re=ie.response)==null?void 0:re.data)==null?void 0:ae.detail)||"Erro ao processar matches automticos")}finally{f(!1)}},M=async()=>{var ae,ie;if(v.length===0)return;const re=v.filter(ve=>ve.status==="ok");if(re.length===0){alert(` Nenhum match OK para confirmar!

Apenas matches perfeitos (sem divergncias) podem ser conciliados.`);return}f(!0);try{const _e=(await V.get("/conciliacao/aba1/stone-nao-conciliadas",{params:{operadora_id:T==null?void 0:T.id}})).data.importacao_id,me=await V.post("/conciliacao/aba1/confirmar-matches",{importacao_id:_e,matches_confirmados:re});me.data.success&&(alert(" "+me.data.message),g([]),C(!1),await B(),await L())}catch(ve){console.error("Erro ao confirmar matches:",ve),u(((ie=(ae=ve.response)==null?void 0:ae.data)==null?void 0:ie.detail)||"Erro ao confirmar matches")}finally{f(!1)}},z=async(re,ae)=>{var ie,ve;try{const _e=await V.put("/conciliacao/aba1/atualizar-operadora",{pagamento_id:re,operadora_id:ae});if(_e.data.success)return await B(),alert(`Operadora atualizada para ${_e.data.operadora_nome}`),!0}catch(_e){return console.error("Erro ao atualizar operadora:",_e),alert(((ve=(ie=_e.response)==null?void 0:ie.data)==null?void 0:ve.detail)||"Erro ao atualizar operadora"),!1}},le=({venda:re,expandir:ae})=>{var it;const[ie,ve]=j.useState(m),[_e,me]=j.useState(!1),[Se,Ne]=j.useState(""),[ot,Ke]=j.useState(!1),[lt,ke]=j.useState(""),Ie=async()=>{var gt,Dt;if(!Se||Se.trim()===""){alert("Digite um NSU vlido");return}try{(await V.patch(`/vendas/${re.id}/pagamento/${re.pagamento.id}/nsu`,{nsu_cartao:Se.trim()})).data&&(me(!1),Ne(""),await B(),alert("NSU atualizado com sucesso!"))}catch(Ct){console.error("Erro ao salvar NSU:",Ct),alert(((Dt=(gt=Ct.response)==null?void 0:gt.data)==null?void 0:Dt.detail)||"Erro ao salvar NSU")}},Ae=async()=>{if(!lt||lt===""){alert("Selecione uma operadora");return}await z(re.pagamento.id,parseInt(lt))&&(Ke(!1),ke(""))};return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 mb-2 hover:bg-gray-50 cursor-pointer",onClick:gt=>{gt.target.tagName==="INPUT"||gt.target.tagName==="BUTTON"||m||ve(!ie)},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Venda ",re.numero_venda]}),re.pagamento.operadora_id&&!ot?e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:((it=q.find(gt=>gt.id===re.pagamento.operadora_id))==null?void 0:it.nome)||"N/A"}):ot?e.jsxs("div",{className:"flex items-center gap-1",onClick:gt=>gt.stopPropagation(),children:[e.jsxs("select",{value:lt,onChange:gt=>ke(gt.target.value),className:"border border-purple-300 rounded px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-purple-500",autoFocus:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),q.map(gt=>e.jsx("option",{value:gt.id,children:gt.nome},gt.id))]}),e.jsx("button",{onClick:Ae,className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:""}),e.jsx("button",{onClick:()=>{Ke(!1),ke("")},className:"bg-gray-400 text-white px-2 py-1 rounded text-xs hover:bg-gray-500",children:""})]}):e.jsx("button",{onClick:gt=>{gt.stopPropagation(),Ke(!0)},className:"text-xs text-purple-600 hover:text-purple-700 underline font-medium px-2 py-1 bg-purple-50 rounded",children:" Sem Operadora - Clique aqui"}),re.pagamento.nsu?e.jsxs("span",{className:"text-sm text-green-600",children:["NSU: ",re.pagamento.nsu]}):_e?e.jsxs("div",{className:"flex items-center gap-1",onClick:gt=>gt.stopPropagation(),children:[e.jsx("input",{type:"text",value:Se,onChange:gt=>Ne(gt.target.value),placeholder:"Digite o NSU",className:"border border-orange-300 rounded px-2 py-1 text-xs w-32 focus:outline-none focus:ring-1 focus:ring-orange-500",autoFocus:!0}),e.jsx("button",{onClick:Ie,className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:""}),e.jsx("button",{onClick:()=>{me(!1),Ne("")},className:"bg-gray-400 text-white px-2 py-1 rounded text-xs hover:bg-gray-500",children:""})]}):e.jsx("button",{onClick:gt=>{gt.stopPropagation(),me(!0)},className:"text-sm text-orange-600 hover:text-orange-700 underline font-medium",children:"SEM NSU - Clique para preencher"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",re.total.toFixed(2)]}),!m&&e.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ie?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(ie||m)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{children:new Date(re.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tipo:"}),e.jsx("span",{className:"capitalize",children:re.pagamento.forma})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Operadora:"}),e.jsx("span",{className:"font-medium text-blue-600",children:(T==null?void 0:T.nome)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bandeira:"}),e.jsx("span",{children:re.pagamento.bandeira||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas:"}),e.jsxs("span",{children:[re.pagamento.parcelas,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",re.pagamento.valor.toFixed(2)]})]})]})]})},Q=({nsu:re,expandir:ae})=>{var _e,me,Se;const[ie,ve]=j.useState(m);return e.jsxs("div",{className:"border border-blue-200 rounded-lg p-3 mb-2 hover:bg-blue-50 cursor-pointer",onClick:()=>!m&&ve(!ie),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("span",{className:"font-medium text-blue-900",children:["NSU: ",re.nsu]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",(_e=re.valor_liquido)==null?void 0:_e.toFixed(2)]}),!m&&e.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ie?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(ie||m)&&re.data_venda&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{children:new Date(re.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bandeira:"}),e.jsx("span",{children:re.bandeira})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas:"}),e.jsxs("span",{children:[re.parcelas,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Bruto:"}),e.jsxs("span",{children:["R$ ",(me=re.valor_bruto)==null?void 0:me.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Lquido:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["R$ ",(Se=re.valor_liquido)==null?void 0:Se.toFixed(2)]})]})]})]})},ne=({match:re,isConciliado:ae=!1})=>{var ve,_e,me;const ie={ok:"bg-green-50 border-green-300",divergencia:"bg-yellow-50 border-yellow-300",orfao:"bg-red-50 border-red-300",sem_nsu:"bg-orange-50 border-orange-300"};return e.jsxs("div",{className:`border-2 rounded-lg p-4 mb-3 ${ie[re.status]} relative`,children:[ae&&e.jsx("div",{className:"absolute top-2 right-2 px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full",children:" CONCILIADO"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"bg-white p-3 rounded border",children:re.venda_pdv?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["Venda #",re.venda_pdv.numero]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["NSU: ",re.venda_pdv.nsu||e.jsx("span",{className:"text-orange-600",children:"SEM NSU"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[re.venda_pdv.bandeira," - ",re.venda_pdv.parcelas,"x"]}),e.jsxs("div",{className:"text-xs font-semibold text-gray-800 mt-1",children:["R$ ",(ve=re.venda_pdv.valor)==null?void 0:ve.toFixed(2)]})]}):e.jsx("div",{className:"text-sm text-gray-400 italic",children:"Sem venda no PDV"})}),e.jsxs("div",{className:"flex items-center justify-center",children:[re.status==="ok"&&e.jsx("div",{className:"text-green-600 text-2xl",children:""}),re.status==="divergencia"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-yellow-600 text-xl",children:""}),e.jsx("div",{className:"text-xs text-yellow-700 font-semibold mt-1",children:(_e=re.divergencia)==null?void 0:_e.tipo})]}),re.status==="orfao"&&e.jsx("div",{className:"text-red-600 text-2xl",children:""}),re.status==="sem_nsu"&&e.jsx("div",{className:"text-orange-600 text-2xl",children:""})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:re.venda_stone?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-blue-800",children:"Planilha Operadora"}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["NSU: ",re.venda_stone.nsu]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[re.venda_stone.bandeira," - ",re.venda_stone.parcelas,"x"]}),e.jsxs("div",{className:"text-xs font-semibold text-blue-800 mt-1",children:["R$ ",(me=re.venda_stone.valor_bruto)==null?void 0:me.toFixed(2)]})]}):e.jsx("div",{className:"text-sm text-blue-300 italic",children:"Sem NSU na planilha"})})]}),re.divergencia&&e.jsx("div",{className:"mt-3 pt-3 border-t border-yellow-300",children:e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("span",{className:"font-semibold",children:"PDV:"})," ",re.divergencia.pdv," "," ",e.jsx("span",{className:"font-semibold",children:"Stone:"})," ",re.divergencia.stone]})})]})};return e.jsxs("div",{className:"flex flex-col h-full p-6 bg-gray-50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Conciliao de Vendas - Stone"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Compare vendas do PDV com a planilha da operadora"})]}),e.jsxs("div",{className:"flex gap-4 mb-4 items-center bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1",children:"Exibir:"}),e.jsxs("select",{value:k,onChange:re=>F(re.target.value),className:"border border-gray-300 rounded px-3 py-2 text-sm min-w-[180px] focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pendentes",children:" Pendentes (No Conciliadas)"}),e.jsx("option",{value:"todas",children:" Todas as Vendas"}),e.jsx("option",{value:"conciliadas",children:" Conciliadas"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1",children:"Operadora de Carto:"}),e.jsxs("select",{value:(T==null?void 0:T.id)||"",onChange:re=>{const ae=re.target.value;if(ae==="legacy")U({id:"legacy",nome:"Legacy (Sem Operadora)"});else{const ie=q.find(ve=>ve.id===parseInt(ae));U(ie)}},disabled:K,className:"border border-gray-300 rounded px-3 py-2 text-sm min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"legacy",className:"text-orange-600 font-semibold",children:" Legacy (Sem Operadora)"}),q.map(re=>e.jsxs("option",{value:re.id,children:[re.nome," ",re.padrao?"(Padro)":""]},re.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`px-4 py-2 rounded-md ${T&&T.id!=="legacy"?"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[" Upload Planilha",e.jsx("input",{type:"file",accept:".csv",onChange:O,className:"hidden",disabled:!T||T.id==="legacy"})]}),(T==null?void 0:T.id)==="legacy"&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:'Vendas Legacy no tm planilha. Use o campo "Preencher Operadora".'})]}),o.length>0&&!S&&(T==null?void 0:T.id)!=="legacy"&&e.jsx("button",{onClick:E,disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400",children:" Processar Matches"}),S&&v.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 animate-pulse",children:" Confirmar Matches OK"}),e.jsx("button",{onClick:()=>{C(!1),g([]),w(!1)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:" Cancelar"})]}),e.jsxs("label",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:()=>x(!m),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar Expandido"})]})]}),d&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:d}),S&&v.length>0||k==="conciliadas"&&y.length>0?e.jsxs("div",{className:"flex-1 overflow-hidden bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100 to-green-100 border-b",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:k==="conciliadas"?" Vendas Conciliadas":" Matches Encontrados - Revise e Confirme"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k==="conciliadas"?"Vendas PDV conciliadas com NSUs da planilha":"Matches OK no topo  Divergncias  Sem match"})]}),e.jsx("div",{className:"overflow-y-auto p-6",style:{maxHeight:"calc(100vh - 300px)"},children:k==="conciliadas"?y.length>0?y.map((re,ae)=>e.jsx(ne,{match:re,isConciliado:!0},ae)):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Nenhuma venda conciliada ainda"}):v.sort((re,ae)=>{const ie={ok:1,divergencia:2,orfao:3,sem_nsu:4};return ie[re.status]-ie[ae.status]}).map((re,ae)=>e.jsx(ne,{match:re},ae))})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-100 border-b border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-800",children:[" Vendas PDV (",s.length,")"]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Vendas com carto pendentes"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Carregando..."}):s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Nenhuma venda pendente"}):s.map(re=>e.jsx(le,{venda:re},re.id))}),W>1&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>D(re=>Math.max(1,re-1)),disabled:Y===1,className:"px-3 py-1 text-sm bg-white border rounded disabled:opacity-50",children:" Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Pgina ",Y," de ",W]}),e.jsx("button",{onClick:()=>D(re=>Math.min(W,re+1)),disabled:Y===W,className:"px-3 py-1 text-sm bg-white border rounded disabled:opacity-50",children:"Prxima "})]})]}),e.jsxs("div",{className:"flex flex-col bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-blue-100 border-b border-blue-200",children:[e.jsxs("h3",{className:"font-semibold text-blue-900",children:[T?`${T.nome} Planilha`:"Planilha","  (",o.length,")"]}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"NSUs no conciliados"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:(T==null?void 0:T.id)==="legacy"?e.jsxs("div",{className:"text-center text-orange-600 py-8 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("h4",{className:"font-bold text-lg mb-2",children:"Vendas Legacy"}),e.jsx("p",{className:"text-sm max-w-md mx-auto",children:"Vendas sem operadora no possuem planilha para conciliao automtica."}),e.jsxs("p",{className:"text-sm max-w-md mx-auto mt-2",children:["Use o boto ",e.jsx("strong",{children:'" Preencher Operadora"'})," nas vendas do lado esquerdo para associ-las a uma operadora."]})]}):o.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:h?"Processando...":`Faa upload da planilha ${(T==null?void 0:T.nome)||""}`}):o.map((re,ae)=>e.jsx(Q,{nsu:re},ae))})]})]})]})}function jhe({onConcluida:t,status:r}){var R,B,O;const[a,s]=j.useState(!1),[n,o]=j.useState({recebimentos:null,recibo:null,ofx:null}),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState([]),[b,p]=j.useState(null),[f,v]=j.useState(!0),[g,y]=j.useState(!1),[N,_]=j.useState(!1),[w,S]=j.useState(null),[C,k]=j.useState(0),[F,q]=j.useState(!1),A=()=>{console.log(" Tentando avanar para Aba 3..."),console.log("onConcluida existe?",typeof t),typeof t=="function"?(console.log(" Chamando onConcluida()"),t(),console.log(" onConcluida() foi chamado com sucesso")):(console.error(" onConcluida no  uma funo!",t),alert("Erro: Funo de callback no encontrada. Recarregue a pgina."))},T=()=>{o({recebimentos:null,recibo:null,ofx:null}),d(null),m(null),l(!1),q(!1),S(null),k(0),y(!1),_(!1),console.log(" Estado resetado")};j.useEffect(()=>{(async()=>{try{const E=await V.get("/operadoras-cartao?apenas_ativas=true");h(E.data);const M=E.data.find(z=>z.padrao);M&&p(M)}catch(E){console.error("Erro ao carregar operadoras:",E),m("Erro ao carregar operadoras")}finally{v(!1)}})()},[]),j.useEffect(()=>{const L=localStorage.getItem("conciliacao_aba2_aviso_ate");if(!L)return;const E=Number(L);Number.isFinite(E)&&Date.now()<E&&s(!0)},[]);const U=L=>{const E=Date.now()+L*24*60*60*1e3;localStorage.setItem("conciliacao_aba2_aviso_ate",String(E)),s(!0)},K=(L,E)=>{var z;const M=(z=E.target.files)==null?void 0:z[0];if(!M){console.warn(`Nenhum arquivo selecionado para ${L}`);return}console.log(` Arquivo selecionado para ${L}:`,{name:M.name,size:M.size,type:M.type,lastModified:new Date(M.lastModified).toISOString()}),o(le=>({...le,[L]:M})),m(null),d(null)},I=()=>{if(!b){m("Por favor, selecione uma operadora antes de validar.");return}if(!n.recebimentos||!n.recibo||!n.ofx){m("Por favor, faa upload dos 3 arquivos antes de validar.");return}y(!0)},Y=async()=>{var L,E,M,z,le,Q,ne,re,ae,ie,ve,_e;if(y(!1),console.log(" Iniciando validao...",{arquivos_estado:{recebimentos:!!n.recebimentos,recibo:!!n.recibo,ofx:!!n.ofx}}),!n.recebimentos||!n.recibo||!n.ofx){m("Voc precisa enviar os 3 arquivos para continuar");return}if(console.log(" Validando tipos de arquivo...",{recebimentos_isFile:n.recebimentos instanceof File,recibo_isFile:n.recibo instanceof File,ofx_isFile:n.ofx instanceof File}),!(n.recebimentos instanceof File)){console.error(" Arquivo de recebimentos no  um File vlido:",n.recebimentos),m("Arquivo de recebimentos invlido. Por favor, selecione novamente."),o(me=>({...me,recebimentos:null}));return}if(!(n.recibo instanceof File)){console.error(" Arquivo de recibo no  um File vlido:",n.recibo),m("Arquivo de recibo invlido. Por favor, selecione novamente."),o(me=>({...me,recibo:null}));return}if(!(n.ofx instanceof File)){console.error(" Arquivo OFX no  um File vlido:",n.ofx),m("Arquivo OFX invlido. Por favor, selecione novamente."),o(me=>({...me,ofx:null}));return}l(!0),m(null);try{let me,Se,Ne;console.log(" Lendo arquivos:",{recebimentos:n.recebimentos.name,recibo:n.recibo.name,ofx:n.ofx.name});try{if(me=await n.recebimentos.text(),!me||me.trim().length===0)throw new Error("Arquivo de recebimentos est vazio")}catch(ge){throw console.error("Erro ao ler recebimentos:",ge),new Error(`Erro ao ler arquivo de recebimentos: ${ge.message}`)}try{if(Se=await n.recibo.text(),!Se||Se.trim().length===0)throw new Error("Arquivo de recibo est vazio")}catch(ge){throw console.error("Erro ao ler recibo:",ge),new Error(`Erro ao ler arquivo de recibo: ${ge.message}`)}try{if(Ne=await n.ofx.text(),!Ne||Ne.trim().length===0)throw new Error("Arquivo OFX est vazio")}catch(ge){throw console.error("Erro ao ler OFX:",ge),new Error(`Erro ao ler arquivo OFX: ${ge.message}`)}console.log(" Arquivos carregados:",{recebimentos_length:me.length,recibo_length:Se.length,ofx_length:Ne.length});const ot=me.split(`
`);console.log(" Primeiras 3 linhas do arquivo de recebimentos:"),console.log("Linha 0 (header):",ot[0]),console.log("Linha 1:",ot[1]),console.log("Linha 2:",ot[2]);const Ke=Se.split(`
`);console.log(" Primeiras 3 linhas do arquivo de recibo:"),console.log("Linha 0 (header):",Ke[0]),console.log("Linha 1:",Ke[1]),console.log("Linha 2:",Ke[2]);const lt=(L=ot[0])!=null&&L.includes(";")?";":",";console.log(" Separador detectado:",lt);let ke,Ie,Ae;try{ke=me.split(`
`).slice(1).filter(ge=>ge.trim()).map((ge,De)=>{var Le,ct,tt,xe,Fe,Ye;try{const te=ge.split(lt);De===0&&(console.log(" DEBUG - Primeira linha parseada:"),console.log("Total de campos:",te.length),console.log("Campos relevantes:"),console.log("  Campo 8 (STONE ID/NSU):",te[8]),console.log("  Campo 4 (DATA DE VENCIMENTO):",te[4]),console.log("  Campo 12 (VALOR LQUIDO):",te[12]),console.log("  Campo 10 (N DA PARCELA):",te[10]),console.log("  Campo 9 (QTD DE PARCELAS):",te[9]),console.log("  Campo 16 (LTIMO STATUS):",te[16]));const ue=(Le=te[8])==null?void 0:Le.trim(),Oe=(ct=te[4])==null?void 0:ct.trim(),ce=(tt=te[12])==null?void 0:tt.trim(),je=(xe=te[10])==null?void 0:xe.trim(),Re=(Fe=te[9])==null?void 0:Fe.trim(),He=(Ye=te[16])==null?void 0:Ye.trim(),J=ce==null?void 0:ce.replace(",","."),ye=parseFloat(J||0);return De===0&&(console.log(" Converso de valor:"),console.log("  Original:",ce),console.log("  Limpo:",J),console.log("  Final:",ye),console.log("  Is NaN?",isNaN(ye))),{nsu:ue,data_recebimento:Oe,valor:ye,parcela_numero:parseInt(je||1),total_parcelas:parseInt(Re||1),tipo_recebimento:He||"Pago",lote_id:null}}catch(te){throw console.error(`Erro ao parsear linha ${De+1} de recebimentos:`,ge,te),new Error(`Erro na linha ${De+1} do arquivo de recebimentos detalhados`)}})}catch(ge){m(` Erro ao processar arquivo de recebimentos: ${ge.message}`);return}try{const ge=(E=Ke[0])!=null&&E.includes(";")?";":",";console.log(" Primeira linha do recibo:",Ke[0]),console.log(" Segunda linha do recibo:",Ke[1]),Ie=Se.split(`
`).slice(1).filter(De=>De.trim()).map((De,Le)=>{var ct,tt,xe;try{const Fe=De.split(ge);Le===0&&(console.log(" DEBUG - Recibo primeira linha parseada:"),console.log("Total de campos:",Fe.length),console.log("  Campo 0 (Valor):",Fe[0]),console.log("  Campo 13 (ID Rastrevel):",Fe[13]),console.log("  Campo 18 (Status):",Fe[18]));const Ye=(ct=Fe[0])==null?void 0:ct.trim(),te=(tt=Fe[13])==null?void 0:tt.trim(),ue=(xe=Fe[18])==null?void 0:xe.trim(),Oe=Ye==null?void 0:Ye.replace(",","."),ce=parseFloat(Oe||0);return Le===0&&(console.log(" Converso recibo:"),console.log("  Original:",Ye),console.log("  Limpo:",Oe),console.log("  Final:",ce)),{lote_id:te,valor:ce,status:ue}}catch(Fe){throw console.error(`Erro ao parsear linha ${Le+1} de recibo:`,De,Fe),new Error(`Erro na linha ${Le+1} do arquivo de recibo de lote`)}})}catch(ge){m(` Erro ao processar arquivo de recibo: ${ge.message}`);return}try{console.log(" Primeiras linhas do OFX:",Ne.split(`
`).slice(0,30).join(`
`));const ge=[],De=Ne.split(`
`);let Le=null;for(let ct=0;ct<De.length;ct++){const tt=De[ct].trim();if(tt==="<STMTTRN>")Le={};else if(tt==="</STMTTRN>"&&Le)(Le.type==="CREDIT"||Le.valor&&Le.valor>0)&&ge.push(Le),Le=null;else if(Le)if(tt.startsWith("<TRNTYPE>"))Le.type=tt.replace("<TRNTYPE>","").replace("</TRNTYPE>","");else if(tt.startsWith("<DTPOSTED>"))Le.data=tt.replace("<DTPOSTED>","").replace("</DTPOSTED>","");else if(tt.startsWith("<TRNAMT>")){const xe=tt.replace("<TRNAMT>","").replace("</TRNAMT>","");Le.valor=parseFloat(xe)}else tt.startsWith("<FITID>")?Le.id=tt.replace("<FITID>","").replace("</FITID>",""):tt.startsWith("<MEMO>")&&(Le.memo=tt.replace("<MEMO>","").replace("</MEMO>",""))}Ae=ge,console.log(" OFX parseado:",Ae.length,"transaes encontradas"),Ae.length>0&&console.log("Primeira transao:",Ae[0])}catch(ge){console.error("Erro ao parsear OFX:",ge),m(` Erro ao processar arquivo OFX: ${ge.message}`);return}if(ke.length===0){m(" Arquivo de recebimentos detalhados est vazio ou mal formatado. Verifique o formato CSV.");return}if(Ie.length===0){m(" Arquivo de recibo de lote est vazio ou mal formatado. Verifique o formato CSV.");return}if(Ae.length===0){m(" Arquivo OFX est vazio ou mal formatado. Verifique o formato.");return}const it=ke.filter(ge=>isNaN(ge.valor)||ge.valor===null);if(it.length>0){console.error(" Recebimentos com valores invlidos:",it),console.error(" Primeiras 5 linhas RAW do arquivo:"),ot.slice(0,6).forEach((ge,De)=>{console.error(`Linha ${De}:`,ge)}),m(` ${it.length} recebimentos tm valores invlidos. Verifique o formato dos valores no CSV (use vrgula ou ponto decimal). Veja o console para mais detalhes.`);return}const gt=Ie.filter(ge=>isNaN(ge.valor)||ge.valor===null);if(gt.length>0){console.error(" Lotes com valores invlidos:",gt),m(` ${gt.length} lotes tm valores invlidos. Verifique o formato dos valores no CSV.`);return}console.log(" Todos os valores validados! Enviando para API..."),console.log(" Enviando dados para API:",{recebimentos_count:ke.length,recibo_count:Ie.length,ofx_count:Ae.length,sample_recebimento:ke[0],sample_recebimento_2:ke[1],sample_recibo:Ie[0],sample_ofx:Ae[0]}),console.log(" Valores parseados (primeiros 3):"),console.log("Recebimento 1:",(M=ke[0])==null?void 0:M.valor),console.log("Recebimento 2:",(z=ke[1])==null?void 0:z.valor),console.log("Recibo 1:",(le=Ie[0])==null?void 0:le.valor),console.log("OFX 1:",(Q=Ae[0])==null?void 0:Q.valor);const Ct=(ge=>{var ct;const De={};return ge.forEach(tt=>{const xe=["data","data_recebimento","data_pagamento","Data de Pagamento","Data do Pagamento"];for(const Fe of xe)if(tt[Fe]){let Ye=tt[Fe];if(Ye.match(/^\d{2}\/\d{2}\/\d{4}$/)){const[te,ue,Oe]=Ye.split("/");Ye=`${Oe}-${ue}-${te}`}De[Ye]=(De[Ye]||0)+1;break}}),((ct=Object.entries(De).sort((tt,xe)=>xe[1]-tt[1])[0])==null?void 0:ct[0])||null})(ke);console.log(" Data de referncia detectada:",Ct);const Lt=[{nome:n.recebimentos.name,tamanho:n.recebimentos.size,tipo:"recebimentos_detalhados"},{nome:n.recibo.name,tamanho:n.recibo.size,tipo:"recibo_lote"},{nome:n.ofx.name,tamanho:n.ofx.size,tipo:"extrato_ofx"}],$t=await V.post("/conciliacao/aba2/validar-recebimentos",{recebimentos_detalhados:ke,recibo_lote:Ie,ofx_creditos:Ae,data_referencia:Ct,arquivos_info:Lt,operadora:b==null?void 0:b.nome});if(!F){const ge=b.nome,De=$t.data.operadora_detectada,Le=$t.data.confianca_deteccao||0;if(console.log(" Comparao de operadoras:",{selecionada:ge,detectada:De,confianca:Le,ignorar:F}),De&&ge!==De&&Le>=.7){S(De),k(Le),d($t.data),_(!0),l(!1);return}}d($t.data),console.log(" Resultado da validao:",{success:$t.data.success,tem_divergencias:$t.data.tem_divergencias,validado:$t.data.validado,historico_id:$t.data.historico_id,operadora_detectada:$t.data.operadora_detectada,ja_conciliado:$t.data.ja_conciliado}),$t.data.ja_conciliado&&$t.data.aviso_reprocessamento&&console.warn(" Reprocessamento detectado:",$t.data.aviso_reprocessamento),$t.data.success&&($t.data.tem_divergencias?console.log(" Tem divergncias, aguardando deciso do usurio..."):(console.log(" Validao perfeita, avanando automaticamente em 1.5s..."),setTimeout(()=>{A()},1500)))}catch(me){console.error("Erro ao validar:",me),console.error("Detalhes do erro:",(ne=me.response)==null?void 0:ne.data);const Se=((ae=(re=me.response)==null?void 0:re.data)==null?void 0:ae.detail)||((ve=(ie=me.response)==null?void 0:ie.data)==null?void 0:ve.message)||JSON.stringify((_e=me.response)==null?void 0:_e.data)||"Erro ao validar recebimentos";m(Se)}finally{l(!1)}},D=n.recebimentos&&n.recibo&&n.ofx,W=Kt();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Aba 2: Conciliao de Recebimentos"}),e.jsx("p",{className:"text-gray-600",children:"Valide que dinheiro entrou na conta (3 arquivos: detalhados, recibo, OFX)"})]}),e.jsxs("button",{onClick:()=>W("/financeiro/historico-conciliacoes"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-semibold",children:" Ver Histrico"})]})]}),a?e.jsx("button",{onClick:()=>s(!1),className:"text-xs text-blue-700 hover:text-blue-900",children:"Mostrar aviso de sequencia"}):e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Ordem recomendada:"})," Aba 1 prepara os NSUs; esta Aba 2 valida os recebimentos; a Aba 3 baixa as parcelas com seguranca."]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(30),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 30 dias"}),e.jsx("button",{onClick:()=>U(365),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 1 ano"})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm text-purple-700 mb-2",children:[e.jsx("strong",{children:"Esta aba NO conhece vendas."})," Apenas valida que o dinheiro entrou na conta. Validao em cascata: Recebimentos  Recibo  OFX (todos precisam bater)."]}),e.jsxs("details",{className:"text-xs text-purple-600 mt-2",children:[e.jsx("summary",{className:"cursor-pointer font-semibold hover:text-purple-800",children:" Formato esperado dos arquivos"}),e.jsxs("div",{className:"mt-2 space-y-2 pl-4",children:[e.jsx("p",{children:e.jsx("strong",{children:"Recebimentos Detalhados CSV da Stone:"})}),e.jsx("p",{className:"text-xs font-mono",children:"DOCUMENTO;STONECODE;CATEGORIA;DATA DA VENDA;DATA DE VENCIMENTO;DATA DE VENCIMENTO ORIGINAL;BANDEIRA;PRODUTO;STONE ID;QTD DE PARCELAS;N DA PARCELA;VALOR BRUTO;VALOR LQUIDO;DESCONTO DE MDR;DESCONTO DE ANTECIPAO;DESCONTO UNIFICADO;LTIMO STATUS;DATA DO LTIMO STATUS"}),e.jsx("p",{className:"text-xs text-purple-500",children:"Separador: ponto-e-vrgula (;) | Valores com vrgula decimal (21,012265)"}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Comprovante de Pagamentos CSV da Stone:"})}),e.jsx("p",{className:"text-xs font-mono",children:"Valor;Bandeira;Modalidade;...;Identificador Rastrevel do Pagamento;...;Status do Pagamento (19 colunas)"}),e.jsx("p",{className:"text-xs text-purple-500",children:"Separador: ponto-e-vrgula (;) | Valores com vrgula decimal (202,11)"}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"OFX:"})}),e.jsx("p",{className:"text-xs",children:"Arquivo bancrio padro OFX com tags <STMTTRN>, <TRNAMT>, <TRNTYPE>"})]})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900 mb-2",children:" Operadora de Carto:"}),e.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:L=>{const E=x.find(M=>M.id===parseInt(L.target.value));p(E),d(null),m(null),q(!1),S(null)},disabled:f||i,className:"w-full border-2 border-blue-300 rounded-lg px-4 py-3 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),x.map(L=>e.jsxs("option",{value:L.id,children:[L.nome," ",L.padrao?" (Padro)":""]},L.id))]}),b&&e.jsxs("p",{className:"mt-2 text-xs text-blue-700",children:[" Operadora selecionada: ",e.jsx("strong",{children:b.nome})]}),!b&&e.jsx("p",{className:"mt-2 text-xs text-orange-600 font-medium",children:" Selecione a operadora antes de fazer upload dos arquivos"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-blue-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-recebimentos",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"1 Recebimentos Detalhados"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:"Arquivo CSV da Stone (18 colunas)"}),e.jsx("input",{id:"file-recebimentos",type:"file",accept:".csv",onChange:L=>K("recebimentos",L),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar CSV"})]}),n.recebimentos&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.recebimentos.name]})]})]})}),e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-green-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-recibo",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"2 Recibo de Lote"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:'CSV "Comprovante de Pagamentos" (19 colunas)'}),e.jsx("input",{id:"file-recibo",type:"file",accept:".csv",onChange:L=>K("recibo",L),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar CSV"})]}),n.recibo&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.recibo.name]})]})]})}),e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-purple-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-ofx",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"3 Extrato OFX"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:"Extrato bancrio"}),e.jsx("input",{id:"file-ofx",type:"file",accept:".ofx,.xml",onChange:L=>K("ofx",L),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar OFX"})]}),n.ofx&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.ofx.name]})]})]})})]}),D&&!c&&e.jsx("button",{onClick:I,disabled:i||!b,className:`
            w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white
            ${i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}
          `,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Validando recebimentos..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{children:"Validar Cascata (3 arquivos)"})]})}),u&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})})]}),e.jsx("button",{onClick:T,className:"ml-4 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 text-xs font-medium rounded",children:"Limpar e Tentar Novamente"})]})}),c&&c.success&&e.jsxs("div",{className:"space-y-4",children:[c.ja_conciliado&&c.aviso_reprocessamento&&e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-800",children:" REPROCESSAMENTO DETECTADO"}),e.jsxs("div",{className:"mt-2 text-sm text-orange-700",children:[e.jsx("p",{children:c.aviso_reprocessamento.mensagem}),c.aviso_reprocessamento.usuario_anterior&&e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Processado anteriormente por:"})," ",c.aviso_reprocessamento.usuario_anterior]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Data: ",c.data_referencia," | Operadora: ",c.operadora_detectada]})})]})]})}),(c.operadora_detectada||c.data_referencia)&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Informaes da Conciliao"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[c.operadora_detectada&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Operadora:"})," ",c.operadora_detectada,c.confianca_deteccao&&e.jsxs("span",{className:"ml-2 text-xs",children:["(Confiana: ",(c.confianca_deteccao*100).toFixed(0),"%)"]})]}),c.data_referencia&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Data de Referncia:"})," ",new Date(c.data_referencia+"T00:00:00").toLocaleDateString("pt-BR")]}),c.historico_id&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ID do Histrico:"})," #",c.historico_id]})]})]})]})}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Resumo da Validao em Cascata"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"1 Recebimentos Detalhados"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["R$ ",(R=c.valor_total_recebimentos)==null?void 0:R.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[c.recebimentos_salvos," transaes"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"2 Comprovante (Lotes)"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["R$ ",(B=c.valor_total_lotes)==null?void 0:B.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[c.lotes_count," lotes"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"3 Extrato Bancrio (OFX)"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["R$ ",(O=c.valor_total_ofx)==null?void 0:O.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[c.ofx_count," crditos"]})]})]})]}),!c.tem_divergencias&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:" Validao Perfeita! Nenhuma divergncia encontrada."}),e.jsxs("p",{className:"mt-1 text-sm text-green-700",children:["Todas as 3 somas esto idnticas. As ",c.recebimentos_salvos," vendas foram confirmadas na conta."]})]})]})}),c.tem_divergencias&&c.divergencias&&c.divergencias.length>0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:" Divergncias Detectadas"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Foram encontradas diferenas entre os arquivos. Analise abaixo e decida se aceita ou no."}),e.jsx("div",{className:"mt-4 space-y-3",children:c.divergencias.map((L,E)=>{var ne,re,ae;const M=L.nivel==="arredondamento",z=M?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200",le=M?"text-blue-900":"text-orange-900",Q=M?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800";return e.jsxs("div",{className:`border rounded-lg p-4 ${z}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${Q}`,children:M?" Arredondamento":" Ateno"}),e.jsx("p",{className:`text-sm font-medium ${le}`,children:L.tipo==="recebimentos_vs_lotes"?"Recebimentos  Lotes":"Lotes  OFX"})]}),e.jsxs("div",{className:`text-right ${le}`,children:[e.jsxs("p",{className:"text-lg font-bold",children:["R$ ",Math.abs(L.diferenca).toFixed(2)]}),e.jsxs("p",{className:"text-xs",children:[(ne=L.percentual)==null?void 0:ne.toFixed(3),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:L.tipo==="recebimentos_vs_lotes"?"Recebimentos:":"Lotes:"}),e.jsxs("p",{className:`font-semibold ${le}`,children:["R$ ",(re=L.tipo==="recebimentos_vs_lotes"?L.soma_recebimentos:L.soma_lotes)==null?void 0:re.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:L.tipo==="recebimentos_vs_lotes"?"Lotes:":"OFX:"}),e.jsxs("p",{className:`font-semibold ${le}`,children:["R$ ",(ae=L.tipo==="recebimentos_vs_lotes"?L.soma_lotes:L.soma_ofx)==null?void 0:ae.toFixed(2)]})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 italic",children:L.mensagem})]},E)})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:c.tem_divergencias?e.jsx("p",{children:" Analise as divergncias e decida se aceita a validao"}):e.jsx("p",{children:" Validao perfeita! Pode avanar para a Aba 3."})}),e.jsxs("div",{className:"flex gap-3",children:[c.tem_divergencias&&e.jsx("button",{onClick:T,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:" Cancelar e Recomear"}),e.jsx("button",{onClick:()=>{console.log(" Boto Aceitar e Avanar clicado"),A()},className:`px-6 py-2 rounded-md font-medium transition-colors ${c.tem_divergencias?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:c.tem_divergencias?" Aceitar e Avanar ":"Avanar para Aba 3 "})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>y(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Confirmar Operadora"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Voc est prestes a validar recebimentos para a operadora:"}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-200",children:e.jsxs("p",{className:"text-lg font-bold text-blue-900",children:[" ",b==null?void 0:b.nome]})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:[" ",e.jsx("strong",{children:"Todos os lanamentos sero vinculados a esta operadora."})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"O sistema detectar automaticamente se os arquivos correspondem a esta operadora e alertar se houver divergncia."})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:Y,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:" Confirmar e Validar"}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-orange-900",children:" Divergncia de Operadora Detectada"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:e.jsx("strong",{children:"Os arquivos enviados parecem ser de uma operadora diferente da selecionada."})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 border-2 border-red-300 rounded-lg",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Operadora Selecionada:"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:b==null?void 0:b.nome})]}),e.jsxs("div",{className:"p-3 bg-green-50 border-2 border-green-300 rounded-lg",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Operadora Detectada nos Arquivos:"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:w}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["Confiana da deteco: ",(C*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:e.jsx("strong",{children:"O que voc deseja fazer?"})}),e.jsxs("ul",{className:"text-xs text-yellow-700 mt-2 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsxs("strong",{children:["Mudar para ",w,":"]})," Recomendado se os arquivos esto corretos"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:["Manter ",b==null?void 0:b.nome,":"]})," Use se voc tem certeza da operadora"]})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const L=x.find(E=>E.nome===w);L&&p(L),_(!1),setTimeout(()=>{Y()},100)},className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:text-sm",children:[" Mudar para ",w]}),e.jsxs("button",{type:"button",onClick:()=>{q(!0),_(!1),setTimeout(()=>{Y()},100)},className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm",children:["Manter ",b==null?void 0:b.nome]}),e.jsx("button",{type:"button",onClick:()=>{_(!1),l(!1),T()},className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm",children:" Cancelar Tudo"})]})]})]})})]})}function Nhe({onConcluida:t,status:r}){var k,F,q,A;const a=Kt(),[s,n]=j.useState(!1),[o,i]=j.useState(""),[l,c]=j.useState(null),[d,u]=j.useState(!1),[m,x]=j.useState(null),[h,b]=j.useState(null),[p,f]=j.useState([]),[v,g]=j.useState(null),[y,N]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const U=await V.get("/operadoras-cartao?apenas_ativas=true");f(U.data);const K=U.data.find(I=>I.padrao);K&&g(K)}catch(U){console.error("Erro ao carregar operadoras:",U),b("Erro ao carregar operadoras")}finally{N(!1)}})()},[]),j.useEffect(()=>{const T=localStorage.getItem("conciliacao_aba3_aviso_ate");if(!T)return;const U=Number(T);Number.isFinite(U)&&Date.now()<U&&n(!0)},[]);const _=T=>{const U=Date.now()+T*24*60*60*1e3;localStorage.setItem("conciliacao_aba3_aviso_ate",String(U)),n(!0)};j.useEffect(()=>{o&&v?w():c(null)},[o,v]);const w=async()=>{try{const T=await V.get("/conciliacao/aba3/preview-amarracao",{params:{data_recebimento:o,operadora:v==null?void 0:v.nome}});c(T.data)}catch(T){console.error("Erro ao buscar preview:",T),c(null)}},S=async()=>{var T,U;if(!v||!o){b("Selecione a operadora e a data primeiro");return}u(!0),b(null);try{const K=await V.post("/conciliacao/aba3/amarrar-automatico",{data_recebimento:o,operadora:v==null?void 0:v.nome});x(K.data)}catch(K){console.error("Erro ao processar:",K),b(((U=(T=K.response)==null?void 0:T.data)==null?void 0:U.detail)||"Erro ao processar amarrao")}finally{u(!1)}},C=()=>{var T,U;if(m){const K=` Conciliao finalizada com sucesso!

 Resumo:
 ${m.parcelas_liquidadas} parcelas baixadas
 Valor total: R$ ${(T=m.valor_total_liquidado)==null?void 0:T.toFixed(2)}
 Taxa de amarrao: ${(U=m.taxa_amarracao_automatica)==null?void 0:U.toFixed(1)}%`;alert(K)}t&&t(),a("/financeiro/historico-conciliacoes")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Aba 3: Amarrao Automtica"}),e.jsx("p",{className:"text-gray-600",children:"Amarrao 98% automtica: recebimentos  vendas  baixa de parcelas"})]}),s?e.jsx("button",{onClick:()=>n(!1),className:"text-xs text-blue-700 hover:text-blue-900",children:"Mostrar aviso de sequencia"}):e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Ordem recomendada:"})," Execute a Aba 1 e Aba 2 antes para garantir que a amarracao encontre todos os recebimentos."]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(30),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 30 dias"}),e.jsx("button",{onClick:()=>_(365),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 1 ano"})]})]})}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"98% automtico!"})," Se as Abas 1 e 2 foram bem feitas, esta etapa  quase instantnea. Sistema vincula recebimentos s vendas pelo NSU e baixa as parcelas automaticamente."]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operadora:"}),e.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:T=>{const U=p.find(K=>String(K.id)===T.target.value);g(U||null)},disabled:y,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Selecione a operadora"}),p.map(T=>e.jsx("option",{value:T.id,children:T.nome},T.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data dos recebimentos:"}),e.jsx("input",{type:"date",value:o,onChange:T=>i(T.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Selecione a operadora e a data dos recebimentos validados na Aba 2"})]}),l&&l.recebimentos_validados>0&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:" Preview da Amarrao"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Recebimentos validados:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:l.recebimentos_validados})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-100 rounded border-2 border-blue-400",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-900",children:" Parcelas que sero baixadas:"}),e.jsx("span",{className:"text-xl font-bold text-blue-900",children:l.parcelas_a_baixar})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-100 rounded border-2 border-green-400",children:[e.jsx("span",{className:"text-sm font-semibold text-green-900",children:" Valor total a liquidar:"}),e.jsxs("span",{className:"text-xl font-bold text-green-900",children:["R$ ",(k=l.valor_total)==null?void 0:k.toFixed(2)]})]})]})]})]})}),l&&l.recebimentos_validados===0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:" Nenhum recebimento validado encontrado para esta data. Verifique se a Aba 2 foi processada corretamente."})}),l&&l.parcelas_a_baixar>0&&!m&&e.jsx("button",{onClick:S,disabled:d,className:`
            w-full flex justify-center items-center gap-3 py-4 px-6 border-2 border-transparent rounded-lg shadow-lg text-base font-bold
            ${d?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white"}
          `,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Processando amarrao..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:[" Processar  baixar ",l.parcelas_a_baixar," parcelas"]})]})}),h&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:h})})]})}),m&&m.success&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`border-l-4 p-6 rounded-lg ${m.alerta_saude==="OK"?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:m.alerta_saude==="OK"?e.jsx("svg",{className:"h-8 w-8 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-8 w-8 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:`text-xl font-bold mb-2 ${m.alerta_saude==="OK"?"text-green-900":"text-red-900"}`,children:m.alerta_saude==="OK"?" Amarrao Concluda com Sucesso!":" Amarrao Concluda com Alertas"}),e.jsxs("p",{className:"text-sm text-gray-700 font-medium mb-4 bg-green-100 border border-green-300 rounded px-3 py-2",children:[" ",m.parcelas_liquidadas," conta(s) a receber foi(ram) baixada(s) com sucesso! Valor total: R$ ",(F=m.valor_total_liquidado)==null?void 0:F.toFixed(2)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Amarrados"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m.amarrados})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"rfos"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:m.orfaos})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Parcelas Liquidadas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.parcelas_liquidadas})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Valor Liquidado"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["R$ ",(q=m.valor_total_liquidado)==null?void 0:q.toFixed(2)]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${m.alerta_saude==="OK"?"bg-green-100 border-green-400":"bg-red-100 border-red-400"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Sade do Sistema"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Taxa de amarrao automtica"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-4xl font-bold ${m.alerta_saude==="OK"?"text-green-700":"text-red-700"}`,children:[(A=m.taxa_amarracao_automatica)==null?void 0:A.toFixed(1),"%"]}),e.jsx("p",{className:`text-sm font-medium mt-1 ${m.alerta_saude==="OK"?"text-green-700":"text-red-700"}`,children:m.alerta_saude==="OK"?" SAUDVEL":" CRTICO"})]})]}),m.alerta_saude!=="OK"&&e.jsx("p",{className:"mt-3 text-xs text-red-700 font-medium",children:" Taxa abaixo de 90% indica problema na operao. Revise a Aba 1 (conferncia de vendas)."})]})]})]})}),m.orfaos>0&&m.lista_orfaos&&e.jsxs("div",{className:"bg-white border-2 border-red-300 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-900",children:[" Recebimentos rfos (",m.orfaos,")"]}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Estes recebimentos no tm venda correspondente. Precisa resolver na Aba 1."})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:m.lista_orfaos.map((T,U)=>{var K;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-red-900",children:["NSU: ",T.nsu]}),e.jsxs("p",{className:"text-xs text-red-700",children:["Data: ",T.data,"  Valor: R$ ",(K=T.valor)==null?void 0:K.toFixed(2)]})]}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700",children:"Resolver na Aba 1"})]},U)})})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx("p",{children:" Conciliao completa! Todas as 3 abas foram processadas."})}),e.jsxs("button",{onClick:C,className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-semibold flex items-center gap-2 shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Concluir e Ver Histrico"})]})]})]})]})}function whe(){const[t,r]=j.useState(1),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState("pendente"),[u,m]=j.useState("pendente"),[x,h]=j.useState("pendente");j.useEffect(()=>{const _=localStorage.getItem("conciliacao_tabs_skip_aviso");l(_==="true")},[]),j.useEffect(()=>{console.log(" abaAtiva MUDOU PARA:",t)},[t]);const b=()=>{console.log(" Aba 1 concluda, marcando como processado"),d("processado")},p=()=>{console.log(" Aba 2 concluda, marcando como processado e avanando para Aba 3"),m("processado"),console.log(" Mudando para Aba 3 imediatamente..."),console.log(" abaAtiva ANTES de setAbaAtiva:",t),r(_=>(console.log(" abaAtiva ANTERIOR (dentro do setState):",_),console.log(" Retornando novo valor:",3),3)),console.log(" setAbaAtiva(3) executado")},f=()=>{console.log(" Aba 3 concluda, marcando como processado"),h("processado")},v=_=>{if(i||_===1){r(_);return}o(_),s(!0)},g=()=>{n&&r(n),s(!1)},y=()=>{localStorage.setItem("conciliacao_tabs_skip_aviso","true"),l(!0),n&&r(n),s(!1)},N=_=>{switch(_){case"processado":return e.jsx("span",{className:"text-green-600 text-xl",children:""});case"pendente":return e.jsx("span",{className:"text-yellow-600 text-xl",children:""});case"bloqueado":return e.jsx("span",{className:"text-gray-400 text-xl",children:""});case"erro":return e.jsx("span",{className:"text-red-600 text-xl",children:""});default:return null}};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Conciliao de Cartes - 3 Etapas"}),e.jsx("p",{className:"text-gray-600",children:"Processo completo: Vendas  Recebimentos  Amarrao (baixa automtica)"})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700 font-medium",children:["Ordem recomendada: ",e.jsx("strong",{children:"Aba 1"}),"  ",e.jsx("strong",{children:"Aba 2"}),"  ",e.jsx("strong",{children:"Aba 3"}),". As abas ficam abertas, mas a sequencia evita divergencias."]})})]})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex -mb-px space-x-8",children:[e.jsxs("button",{onClick:()=>v(1),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===1?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"1"}),e.jsx("span",{children:"Conciliao de Vendas"}),N(c),c==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Obrigatria"})]}),e.jsxs("button",{onClick:()=>v(2),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===2?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"2"}),e.jsx("span",{children:"Conciliao de Recebimentos"}),N(u),u==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Recomendada apos Aba 1"})]}),e.jsxs("button",{onClick:()=>v(3),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===3?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"3"}),e.jsx("span",{children:"Amarrao Automtica"}),N(x),x==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Recomendada apos Aba 2"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t===1&&e.jsx(yhe,{onConcluida:b,status:c}),t===2&&e.jsx(jhe,{onConcluida:p,status:u}),t===3&&e.jsx(Nhe,{onConcluida:f,status:x})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ordem recomendada das etapas"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["A sequencia ",e.jsx("strong",{children:"Aba 1  Aba 2  Aba 3"})," reduz divergencias e garante que a amarracao automatica encontre todos os recebimentos."]}),e.jsxs("div",{className:"bg-gray-50 rounded-md p-3 text-sm text-gray-700 mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 1:"})," prepara vendas e NSUs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 2:"})," valida que o dinheiro entrou."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 3:"})," baixa parcelas automaticamente."]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancelar"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:y,className:"px-3 py-2 text-sm text-blue-700 hover:text-blue-900",children:"Nao mostrar novamente"}),e.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Continuar"})]})]})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Como funciona:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 1:"})," Confere NSU, bandeira, parcelas, taxa (prepara dados)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 2:"})," Valida que dinheiro entrou na conta (3 arquivos: detalhados, recibo, OFX)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 3:"})," Vincula recebimentos s vendas e baixa parcelas automaticamente (98%!)"]})]})]})]})}function _he(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!1),[o,i]=j.useState({operadora:"",status:"",data_inicio:"",data_fim:""});j.useEffect(()=>{l()},[]);const l=async()=>{n(!0);try{const m=new URLSearchParams;o.operadora&&m.append("operadora",o.operadora),o.status&&m.append("status",o.status),o.data_inicio&&m.append("data_inicio",o.data_inicio),o.data_fim&&m.append("data_fim",o.data_fim);const x=await V.get(`/conciliacao/historico?${m.toString()}`);x.data&&x.data.items&&a(x.data.items)}catch(m){console.error("Erro ao carregar histrico:",m)}finally{n(!1)}},c=m=>{if(!m)return"-";const[x,h,b]=m.split("T")[0].split("-");return`${b}/${h}/${x}`},d=(m,x)=>{var p,f;if((f=(p=x==null?void 0:x.abas)==null?void 0:p.aba2)!=null&&f.concluida&&m==="em_andamento")return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Aba 2 Concluda"});const b={concluida:{cor:"bg-green-100 text-green-800",texto:" Concluda"},em_andamento:{cor:"bg-yellow-100 text-yellow-800",texto:" Em Andamento"},reprocessada:{cor:"bg-blue-100 text-blue-800",texto:" Reprocessada"},cancelada:{cor:"bg-gray-100 text-gray-800",texto:" Cancelada"}}[m]||{cor:"bg-gray-100 text-gray-800",texto:m};return e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b.cor}`,children:b.texto})},u=m=>m?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m):"-";return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Histrico de Conciliaes"}),e.jsx("p",{className:"text-gray-600",children:"Consulte todas as conciliaes j realizadas"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>t("/financeiro/conciliacao-3abas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium transition-colors flex items-center gap-2",title:"Voltar para Conciliao",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Voltar para Conciliao"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operadora"}),e.jsxs("select",{value:o.operadora,onChange:m=>i({...o,operadora:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"Stone",children:"Stone"}),e.jsx("option",{value:"PagSeguro",children:"PagSeguro"}),e.jsx("option",{value:"Rede",children:"Rede"}),e.jsx("option",{value:"Cielo",children:"Cielo"}),e.jsx("option",{value:"Getnet",children:"Getnet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:m=>i({...o,status:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"concluida",children:"Concluda"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"reprocessada",children:"Reprocessada"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:o.data_inicio,onChange:m=>i({...o,data_inicio:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:o.data_fim,onChange:m=>i({...o,data_fim:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:" Filtrar"}),e.jsx("button",{onClick:()=>{i({operadora:"",status:"",data_inicio:"",data_fim:""}),l()},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:" Limpar Filtros"})]})]}),s&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!s&&r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[e.jsx("span",{style:{padding:"8px 10px"},children:"ID"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Data"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Operadora"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Status"}),e.jsx("span",{style:{padding:"8px 10px",textAlign:"right"},children:"Valor"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Processado"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Usurio"})]}),r.map((m,x)=>{var h,b,p,f,v;return e.jsxs("div",{className:"hover:bg-blue-50 transition-colors",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",alignItems:"center",borderBottom:"1px solid #f0f0f0",background:x%2===0?"#fff":"#fafbfc"},children:[e.jsxs("span",{style:{padding:"8px 10px"},className:"text-sm font-mono text-gray-400",children:["#",m.id]}),e.jsx("span",{style:{padding:"8px 10px"},className:"text-sm font-medium text-gray-900",children:c(m.data_referencia)}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:m.operadora,children:m.operadora}),e.jsx("span",{style:{padding:"8px 10px"},children:d(m.status,m)}),e.jsxs("span",{style:{padding:"8px 10px",textAlign:"right"},children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u((b=(h=m.totais)==null?void 0:h.recebimentos)==null?void 0:b.valor_total)}),((f=(p=m.totais)==null?void 0:p.recebimentos)==null?void 0:f.quantidade)&&e.jsxs("div",{className:"text-xs text-gray-400",children:[m.totais.recebimentos.quantidade," trans."]})]}),e.jsxs("span",{style:{padding:"8px 10px"},children:[e.jsx("div",{className:"text-sm text-gray-700",children:c((v=m.created_at)==null?void 0:v.split("T")[0])}),e.jsx("div",{className:"text-xs text-gray-400",children:m.created_at?new Date(m.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"-"})]}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:m.usuario_responsavel,children:m.usuario_responsavel||"-"})]},m.id)})]}),!s&&r.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma conciliao encontrada"}),e.jsx("p",{className:"text-gray-500",children:"No h conciliaes registradas com os filtros selecionados."})]})]})}const Ot=Vr.create({baseURL:"/api"});IA(Ot);Ot.interceptors.request.use(t=>{const r=localStorage.getItem("access_token"),a=localStorage.getItem("selectedTenant");if(r&&(t.headers.Authorization=`Bearer ${r}`),a)try{const s=JSON.parse(a);s!=null&&s.id&&(t.headers["X-Tenant-ID"]=s.id)}catch{}return t},t=>Promise.reject(t));Ot.interceptors.response.use(t=>t,t=>{var a;const r=(a=t.response)==null?void 0:a.status;return r===401&&(console.warn("Sesso invlida ou tenant no selecionado"),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),window.location.href="/login"),r===403&&console.warn("Acesso negado para este tenant"),Promise.reject(t)});function She(){var R;const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[x,h]=j.useState(null),[b,p]=j.useState("todos"),[f,v]=j.useState(!0),[g,y]=j.useState(""),[N,_]=j.useState(""),[w,S]=j.useState(null),[C,k]=j.useState(!1);j.useEffect(()=>{F(),T()},[]),j.useEffect(()=>{i.length>0&&x&&(q(),A())},[x,b,f,g,N]);const F=async()=>{var B;try{const O=await Ot.get("/contas-bancarias",{params:{apenas_ativas:!0}});console.log(" Contas bancrias carregadas:",O.data);const L=O.data.filter(E=>E.instituicao_bancaria);l(L)}catch(O){console.error(" Erro ao carregar contas bancrias:",O),console.error("Detalhes:",(B=O.response)==null?void 0:B.data)}},q=async()=>{try{d(!0);const B={};x&&(B.conta_bancaria_id=x),b!=="todos"&&(B.status=b),B.ocultar_conciliadas=f,g&&(B.data_inicio=g),N&&(B.data_fim=N),B.limit=200;const O=await Ot.get("/conciliacao/movimentacoes",{params:B});r(O.data)}catch(B){console.error("Erro ao carregar movimentaes:",B)}finally{d(!1)}},A=async()=>{try{const B={};x&&(B.conta_bancaria_id=x);const O=await Ot.get("/conciliacao/estatisticas",{params:B});s(O.data)}catch(B){console.error("Erro ao carregar estatsticas:",B)}},T=async()=>{try{const B=await Ot.get("/conciliacao/regras");o(B.data)}catch(B){console.error("Erro ao carregar regras:",B)}},U=async B=>{var L,E;const O=B.target.files[0];if(console.log(" Upload OFX iniciado:",{file:O,contaSelecionada:x}),!!O){if(!x){alert("Selecione uma conta bancria primeiro");return}try{m(!0);const M=new FormData;M.append("arquivo",O),console.log(" Enviando arquivo para API...");const z=await Ot.post(`/api/conciliacao/upload-ofx?conta_bancaria_id=${x}`,M,{headers:{"Content-Type":"multipart/form-data"}});console.log(" Upload concludo:",z.data),alert(` OFX importado com sucesso!

 Total de transaes: ${z.data.total_transacoes}
 Pendentes: ${z.data.pendentes}
 Perodo: ${z.data.periodo_inicio||"N/A"} a ${z.data.periodo_fim||"N/A"}`),q(),A()}catch(M){console.error(" Erro ao fazer upload:",M),alert(" Erro ao processar OFX: "+(((E=(L=M.response)==null?void 0:L.data)==null?void 0:E.detail)||M.message))}finally{m(!1),B.target.value=""}}},K=async(B,O)=>{try{await Ot.post(`/api/conciliacao/movimentacoes/${B.id}/classificar`,O),q(),A(),T(),S(null)}catch(L){console.error("Erro ao classificar:",L),alert(" Erro ao classificar movimentao")}},I=(B,O)=>{const L={conciliado:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 flex items-center gap-1",children:[e.jsx(Xt,{size:12})," Conciliado"]}),sugerido:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 flex items-center gap-1",children:[e.jsx(Bt,{size:12})," Sugerido (",O,"%)"]}),pendente:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 flex items-center gap-1",children:[e.jsx(Vl,{size:12})," Pendente"]}),manual:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 flex items-center gap-1",children:[e.jsx(bh,{size:12})," Manual"]})};return L[B]||L.pendente},Y=B=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(B),D=B=>B?new Date(B).toLocaleDateString("pt-BR"):"-",W=()=>{h(null)};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Conciliao Bancria"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema inteligente de classificao automtica"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(bh,{size:18}),"Regras (",n.length,")"]}),e.jsxs("label",{className:`px-4 py-2 rounded-lg flex items-center gap-2 ${u||!x?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 cursor-pointer"} text-white`,children:[u?e.jsxs(e.Fragment,{children:[e.jsx(Gr,{size:18,className:"animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yh,{size:18}),"Upload OFX"]}),e.jsx("input",{type:"file",accept:".ofx,.OFX",onChange:U,className:"hidden",disabled:u||!x})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Xt,{size:20,className:"text-blue-600"}),"Selecione a Conta Bancria"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Escolha a conta para visualizar movimentaes e fazer upload de extrato OFX"})]}),x&&e.jsx("button",{onClick:W,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Limpar Seleo"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.map(B=>{const O=x===B.id,L=B.cor||"#3B82F6",E=O?{backgroundColor:L,borderColor:L,color:"#ffffff"}:{backgroundColor:`${L}15`,borderColor:`${L}40`,color:L};return e.jsxs("button",{onClick:()=>h(B.id),style:E,className:`border-2 rounded-lg p-4 transition-all duration-200 transform font-medium ${O?"scale-105 shadow-lg":"hover:scale-102 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[B.icone&&e.jsx("span",{className:"text-xl",children:B.icone}),e.jsx("span",{className:"font-semibold text-sm",children:B.nome})]}),O&&e.jsx(Xt,{size:20,className:"flex-shrink-0"})]}),B.banco&&e.jsx("div",{className:`text-xs mt-1 ${O?"opacity-90":"opacity-70"}`,children:B.banco})]},B.id)})}),i.length===0&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Bt,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Nenhuma instituio bancria cadastrada."})," ",'V em Financeiro  Contas Bancrias e marque o checkbox " Instituio Bancria" nas contas que so bancos reais (no caixa fsico).']})]})}),!x&&i.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Bt,{size:18,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("span",{className:"font-semibold",children:"Nenhuma conta selecionada."})," ","Clique em uma conta acima para visualizar movimentaes e fazer upload de extrato OFX."]})]})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xt,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("span",{className:"font-semibold",children:[(R=i.find(B=>B.id===x))==null?void 0:R.nome," selecionada."]})," ","Visualizando movimentaes desta conta. Pronto para upload de extrato OFX."]})]})})]}),a&&x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total_movimentacoes})]}),e.jsx(bs,{className:"text-gray-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conciliadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.conciliadas})]}),e.jsx(Xt,{className:"text-green-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sugeridas"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.sugeridas})]}),e.jsx(Bt,{className:"text-yellow-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.pendentes})]}),e.jsx(Vl,{className:"text-red-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Automao"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[a.taxa_automacao,"%"]})]}),e.jsx(sa,{className:"text-blue-400",size:24})]})})]}),x&&e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qm,{size:18,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros:"})]}),e.jsxs("select",{value:b,onChange:B=>p(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"todos",children:"Todos os status"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"sugerido",children:"Sugerido"}),e.jsx("option",{value:"conciliado",children:"Conciliado"}),e.jsx("option",{value:"manual",children:"Manual"})]}),e.jsx("input",{type:"date",value:g,onChange:B=>y(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Data incio"}),e.jsx("input",{type:"date",value:N,onChange:B=>_(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Data fim"}),e.jsxs("button",{onClick:()=>v(!f),className:`px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${f?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[f?e.jsx(gh,{size:16}):e.jsx(Ym,{size:16}),f?"Ocultar":"Mostrar"," Conciliadas"]}),e.jsxs("button",{onClick:q,className:"ml-auto px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Gr,{size:16}),"Atualizar"]})]})}),x&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vinculado"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:[e.jsx(Gr,{className:"animate-spin mx-auto mb-2",size:24}),"Carregando..."]})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada. Faa upload de um arquivo OFX."})}):t.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:D(B.data_movimento)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:B.memo||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${B.tipo==="CREDIT"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.tipo==="CREDIT"?"Crdito":"Dbito"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:e.jsxs("span",{className:B.tipo==="CREDIT"?"text-green-600":"text-red-600",children:[B.tipo==="CREDIT"?"+":"-"," ",Y(Math.abs(B.valor))]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:I(B.status_conciliacao,B.confianca_sugestao)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:B.fornecedor_nome||B.tipo_vinculo||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:B.status_conciliacao!=="conciliado"&&e.jsx("button",{onClick:()=>S(B),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Classificar"})})]},B.id))})]})})}),w&&e.jsx(Che,{movimentacao:w,onClose:()=>S(null),onClassificar:K}),C&&e.jsx(khe,{regras:n,onClose:()=>k(!1),onAtualizar:T})]})})}function Che({movimentacao:t,onClose:r,onClassificar:a}){const[s,n]=j.useState(t.tipo_vinculo||"fornecedor"),[o,i]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState("mensal"),m=x=>{x.preventDefault(),a(t,{tipo_vinculo:s,criar_regra:o,recorrente:l,periodicidade:l?d:null})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Classificar Movimentao"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.data_movimento).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor:"}),e.jsx("span",{className:"text-sm font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.valor)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Descrio:"}),e.jsx("span",{className:"text-sm font-medium truncate ml-4",children:t.memo})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Vnculo"}),e.jsxs("select",{value:s,onChange:x=>n(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"fornecedor",children:"Pagamento a Fornecedor"}),e.jsx("option",{value:"taxa",children:"Taxa Bancria"}),e.jsx("option",{value:"transferencia",children:"Transferncia Entre Contas"}),e.jsx("option",{value:"recebimento",children:"Recebimento de Cliente"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"criar_regra",checked:o,onChange:x=>i(x.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"criar_regra",className:"text-sm text-gray-700",children:"Criar regra automtica para movimentaes similares"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"recorrente",checked:l,onChange:x=>c(x.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"recorrente",className:"text-sm text-gray-700",children:"Movimentao recorrente (criar provises futuras)"})]}),l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periodicidade"}),e.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"mensal",children:"Mensal"}),e.jsx("option",{value:"anual",children:"Anual"}),e.jsx("option",{value:"trimestral",children:"Trimestral"}),e.jsx("option",{value:"semestral",children:"Semestral"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Classificar"})]})]})]})]})})}function khe({regras:t,onClose:r,onAtualizar:a}){const[s,n]=j.useState(t),o=async i=>{if(confirm("Deseja realmente desativar esta regra?"))try{await Ot.delete(`/conciliacao/regras/${i}`),a();const l=s.filter(c=>c.id!==i);n(l)}catch(l){console.error("Erro ao excluir regra:",l)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Regras de Aprendizado"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sistema aprende com suas classificaes"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"p-6",children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(bh,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Nenhuma regra criada ainda."}),e.jsx("p",{className:"text-sm mt-2",children:"Classifique movimentaes para criar regras automticas."})]}):e.jsx("div",{className:"space-y-3",children:s.map(i=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:i.padrao_memo}),i.tipo_operacao&&e.jsx("span",{className:"text-xs text-gray-600",children:i.tipo_operacao})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confiana:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${i.confianca>=80?"bg-green-500":i.confianca>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${i.confianca}%`}})}),e.jsxs("span",{className:"font-medium",children:[i.confianca,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Aplicada:"}),e.jsxs("p",{className:"font-medium mt-1",children:[i.vezes_aplicada,"x"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confirmada:"}),e.jsxs("p",{className:"font-medium mt-1",children:[i.vezes_confirmada,"x"]})]})]}),i.fornecedor_nome&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" ",i.fornecedor_nome]})]}),e.jsx("button",{onClick:()=>o(i.id),className:"ml-4 px-3 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Desativar"})]})},i.id))})})]})})}const Ehe=()=>{var y,N,_;const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState({nome:"",tipo:"dinheiro",taxa_percentual:0,taxa_fixa:0,prazo_dias:0,operadora:"",operadora_id:null,gera_contas_receber:!1,split_parcelas:!1,conta_bancaria_destino_id:null,requer_nsu:!1,tipo_cartao:"",bandeira:"",ativo:!0,permite_parcelamento:!1,parcelas_maximas:1,taxas_por_parcela:{},permite_antecipacao:!1,dias_recebimento_antecipado:null,taxa_antecipacao_percentual:null,icone:"",cor:"#3B82F6"});j.useEffect(()=>{b()},[]);const b=async()=>{try{const[w,S,C]=await Promise.all([V.get("/financeiro/formas-pagamento?apenas_ativas=false"),V.get("/contas-bancarias?apenas_ativas=true"),V.get("/operadoras-cartao?apenas_ativas=true")]);r(w.data),s(S.data),o(C.data)}catch(w){console.error("Erro ao carregar dados:",w),be.error("Erro ao carregar formas de pagamento")}finally{l(!1)}},p=(w=null)=>{if(w){m(w.id);let S={};if(w.taxas_por_parcela)try{S=typeof w.taxas_por_parcela=="string"?JSON.parse(w.taxas_por_parcela):w.taxas_por_parcela}catch(C){console.error("Erro ao parsear taxas_por_parcela:",C)}h({nome:w.nome,tipo:w.tipo,taxa_percentual:w.taxa_percentual,taxa_fixa:w.taxa_fixa,prazo_dias:w.prazo_dias,operadora:w.operadora||"",operadora_id:w.operadora_id||null,gera_contas_receber:w.gera_contas_receber,split_parcelas:w.split_parcelas,conta_bancaria_destino_id:w.conta_bancaria_destino_id,requer_nsu:w.requer_nsu,tipo_cartao:w.tipo_cartao||"",bandeira:w.bandeira||"",ativo:w.ativo,permite_parcelamento:w.permite_parcelamento,parcelas_maximas:w.parcelas_maximas,taxas_por_parcela:S,permite_antecipacao:w.permite_antecipacao||!1,dias_recebimento_antecipado:w.dias_recebimento_antecipado||null,taxa_antecipacao_percentual:w.taxa_antecipacao_percentual||null,icone:w.icone||"",cor:w.cor||"#3B82F6"})}else m(null),h({nome:"",tipo:"dinheiro",taxa_percentual:0,taxa_fixa:0,prazo_dias:0,operadora:"",operadora_id:null,gera_contas_receber:!1,split_parcelas:!1,conta_bancaria_destino_id:null,requer_nsu:!1,tipo_cartao:"",bandeira:"",ativo:!0,permite_parcelamento:!1,parcelas_maximas:1,taxas_por_parcela:{},permite_antecipacao:!1,dias_recebimento_antecipado:null,taxa_antecipacao_percentual:null,icone:"",cor:"#3B82F6"});d(!0)},f=async()=>{try{const w={...x,taxas_por_parcela:Object.keys(x.taxas_por_parcela).length>0?JSON.stringify(x.taxas_por_parcela):null};u?(await V.put(`/financeiro/formas-pagamento/${u}`,w),be.success("Forma de pagamento atualizada!")):(await V.post("/financeiro/formas-pagamento",w),be.success("Forma de pagamento criada!")),d(!1),b()}catch(w){console.error("Erro ao salvar:",w),be.error("Erro ao salvar forma de pagamento")}},v=async w=>{if(confirm("Deseja realmente excluir esta forma de pagamento?"))try{await V.delete(`/financeiro/formas-pagamento/${w}`),be.success("Forma de pagamento excluda!"),b()}catch(S){console.error("Erro ao excluir:",S),be.error("Erro ao excluir forma de pagamento")}},g=[{value:"dinheiro",label:"Dinheiro",icone:""},{value:"cartao_credito",label:"Carto de Crdito",icone:""},{value:"cartao_debito",label:"Carto de Dbito",icone:""},{value:"pix",label:"PIX",icone:""},{value:"boleto",label:"Boleto",icone:""},{value:"transferencia",label:"Transferncia",icone:""}];return i?e.jsx("div",{className:"flex justify-center items-center h-64",children:"Carregando..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Formas de Pagamento/Recebimento"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>p(),children:"+ Nova Forma"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Taxa %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Taxa Fixa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prazo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Conta Destino"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"Nenhuma forma de pagamento cadastrada"})}):t.map(w=>{var S,C,k,F;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:w.icone}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.nome}),w.operadora_id&&e.jsx("div",{className:"text-xs text-gray-500",children:((S=n.find(q=>q.id===w.operadora_id))==null?void 0:S.nome)||w.operadora||"Operadora no encontrada"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:((C=g.find(q=>q.value===w.tipo))==null?void 0:C.label)||w.tipo}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:[w.taxa_percentual,"%"]}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:["R$ ",((k=w.taxa_fixa)==null?void 0:k.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:[w.prazo_dias," dias"]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:w.conta_bancaria_destino_id?((F=a.find(q=>q.id===w.conta_bancaria_destino_id))==null?void 0:F.nome)||"N/A":e.jsx("span",{className:"text-gray-400",children:"Nenhuma"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.ativo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.ativo?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>p(w),children:""}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>v(w.id),children:""})]})})]},w.id)})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[u?"Editar":"Nova"," Forma de Pagamento"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.nome,onChange:w=>h({...x,nome:w.target.value}),placeholder:"Ex: Dinheiro, PIX, Stone Crdito..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo *"}),e.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.tipo,onChange:w=>h({...x,tipo:w.target.value}),children:g.map(w=>e.jsxs("option",{value:w.value,children:[w.icone," ",w.label]},w.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"cone"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.icone,onChange:w=>h({...x,icone:w.target.value}),placeholder:"",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa % (Ex: 2.5%)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:x.taxa_percentual,onChange:w=>h({...x,taxa_percentual:parseFloat(w.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa Fixa (R$)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:x.taxa_fixa,onChange:w=>h({...x,taxa_fixa:parseFloat(w.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prazo (dias)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.prazo_dias,onChange:w=>h({...x,prazo_dias:parseInt(w.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria Destino"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.conta_bancaria_destino_id||"",onChange:w=>h({...x,conta_bancaria_destino_id:parseInt(w.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione..."}),a.map(w=>e.jsx("option",{value:w.id,children:w.nome},w.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta conta ser usada automaticamente quando esta forma for selecionada em pagamentos/recebimentos"})]}),(x.tipo==="cartao_credito"||x.tipo==="cartao_debito")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Operadora *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.operadora_id||"",onChange:w=>{const S=parseInt(w.target.value)||null,C=n.find(F=>F.id===S);let k=(C==null?void 0:C.max_parcelas)||x.parcelas_maximas;h({...x,operadora_id:S,operadora:(C==null?void 0:C.nome)||"",parcelas_maximas:k})},children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),n.map(w=>e.jsxs("option",{value:w.id,children:[w.icone," ",w.nome," (at ",w.max_parcelas,"x)"]},w.id))]}),x.operadora_id&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Limite de parcelas desta operadora: ",(y=n.find(w=>w.id===x.operadora_id))==null?void 0:y.max_parcelas,"x"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bandeira"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.bandeira,onChange:w=>h({...x,bandeira:w.target.value}),children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"visa",children:"Visa"}),e.jsx("option",{value:"master",children:"Mastercard"}),e.jsx("option",{value:"elo",children:"Elo"}),e.jsx("option",{value:"amex",children:"American Express"}),e.jsx("option",{value:"hipercard",children:"Hipercard"})]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.ativo,onChange:w=>h({...x,ativo:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Ativo"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.gera_contas_receber,onChange:w=>h({...x,gera_contas_receber:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Gera Contas a Receber (para cartes com prazo)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.requer_nsu,onChange:w=>h({...x,requer_nsu:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Requer NSU (nmero de transao)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.permite_parcelamento,onChange:w=>h({...x,permite_parcelamento:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Permite Parcelamento"})]}),x.permite_parcelamento&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de Parcelas"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",min:"1",max:x.operadora_id&&((N=n.find(w=>w.id===x.operadora_id))==null?void 0:N.max_parcelas)||24,value:x.parcelas_maximas,onChange:w=>{const S=parseInt(w.target.value)||1,C=n.find(F=>F.id===x.operadora_id),k=(C==null?void 0:C.max_parcelas)||24;if(S>k){be.error(` Esta operadora permite no mximo ${k}x`);return}h({...x,parcelas_maximas:S})}}),x.operadora_id&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Limitado a ",(_=n.find(w=>w.id===x.operadora_id))==null?void 0:_.max_parcelas,"x pela operadora selecionada"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Taxas Especficas por Nmero de Parcelas"}),e.jsxs("p",{className:"text-xs text-blue-700 mb-3",children:["Configure taxas diferentes para cada quantidade de parcelas. Se no informado, usa a taxa base (",x.taxa_percentual,"%)."]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:Array.from({length:x.parcelas_maximas},(w,S)=>S+1).map(w=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-xs font-medium text-gray-700 w-10",children:[w,"x:"]}),e.jsx("input",{type:"number",step:"0.01",className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:x.taxa_percentual,value:x.taxas_por_parcela[w]||"",onChange:S=>{const C={...x.taxas_por_parcela};S.target.value?C[w]=parseFloat(S.target.value):delete C[w],h({...x,taxas_por_parcela:C})}}),e.jsx("span",{className:"text-xs text-gray-500",children:"%"})]},w))})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.permite_antecipacao,onChange:w=>h({...x,permite_antecipacao:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Permite Antecipao de Recebveis"})]}),x.permite_antecipacao&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dias para Recebimento Antecipado"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",min:"0",max:"30",value:x.dias_recebimento_antecipado||"",onChange:w=>h({...x,dias_recebimento_antecipado:parseInt(w.target.value)||null}),placeholder:"Ex: 1 (cai em D+1)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantos dias aps a venda o dinheiro cai na conta com antecipao (geralmente D+1)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa de Antecipao (%) - OPCIONAL"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.taxa_antecipacao_percentual||"",onChange:w=>h({...x,taxa_antecipacao_percentual:parseFloat(w.target.value)||null}),placeholder:"Ex: 0.50"}),e.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded",children:[e.jsx("p",{className:"text-xs text-amber-800 font-semibold mb-1",children:" Duas formas de configurar:"}),e.jsxs("p",{className:"text-xs text-amber-700 mb-1",children:[e.jsx("strong",{children:"1. Com taxa de antecipao:"})," Preencha este campo e a taxa ser somada automaticamente s taxas por parcela configuradas acima"]}),e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"2. Sem taxa de antecipao:"})," Deixe vazio e configure nos campos 1x a 12x acima j com o valor final (taxa normal + antecipao somadas)"]})]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>d(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:f,children:" Salvar"})]})]})})]})},Ahe=["","","","","","","","","","","","","","","","","",""];function Phe(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState({nome:"",codigo:"",max_parcelas:12,padrao:!1,ativo:!0,api_enabled:!1,api_endpoint:"",api_token_encrypted:"",cor:"#00A868",icone:""});j.useEffect(()=>{b()},[]);const b=async()=>{try{s(!0);const y=await V.get("/operadoras-cartao");r(y.data)}catch(y){console.error("Erro ao carregar operadoras:",y),be.error("Erro ao carregar operadoras de carto")}finally{s(!1)}},p=(y=null)=>{y?(h({nome:y.nome,codigo:y.codigo||"",max_parcelas:y.max_parcelas,padrao:y.padrao,ativo:y.ativo,api_enabled:y.api_enabled,api_endpoint:y.api_endpoint||"",api_token_encrypted:y.api_token_encrypted||"",cor:y.cor||"#00A868",icone:y.icone||""}),l(y)):(h({nome:"",codigo:"",max_parcelas:12,padrao:!1,ativo:!0,api_enabled:!1,api_endpoint:"",api_token_encrypted:"",cor:"#00A868",icone:""}),l(null)),o(!0),d(""),m(!1)},f=async y=>{var N,_,w,S,C,k;if(y.preventDefault(),!x.nome.trim()){be.error("Nome da operadora  obrigatrio");return}if(x.max_parcelas<1||x.max_parcelas>24){be.error("Parcelas devem estar entre 1 e 24");return}try{const F={...x,nome:x.nome.trim(),codigo:((_=(N=x.codigo)==null?void 0:N.trim())==null?void 0:_.toUpperCase())||null,api_endpoint:((w=x.api_endpoint)==null?void 0:w.trim())||null,api_token_encrypted:((S=x.api_token_encrypted)==null?void 0:S.trim())||null};i?(await V.put(`/operadoras-cartao/${i.id}`,F),be.success("Operadora atualizada com sucesso!")):(await V.post("/operadoras-cartao",F),be.success("Operadora criada com sucesso!")),o(!1),b()}catch(F){console.error("Erro ao salvar:",F);const q=((k=(C=F.response)==null?void 0:C.data)==null?void 0:k.detail)||"Erro ao salvar operadora";be.error(q),d(q)}},v=async y=>{var N,_;if(window.confirm("Deseja realmente excluir esta operadora? Ela ser desativada se houver vendas vinculadas."))try{await V.delete(`/operadoras-cartao/${y}`),be.success("Operadora removida com sucesso!"),b()}catch(w){console.error("Erro ao excluir:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao excluir operadora";be.error(S)}},g=()=>{const y=t.find(N=>N.padrao&&N.ativo);return y?e.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(eP,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-emerald-900",children:"Operadora Padro"}),e.jsxs("p",{className:"text-sm text-emerald-700",children:[e.jsx("span",{className:"font-medium",children:y.nome})," ser pr-selecionada no PDV"]})]})]})}):null};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Operadoras de Carto"}),e.jsx("p",{className:"text-gray-600",children:"Configure as operadoras de carto disponveis (Stone, Cielo, Rede, Getnet, etc)"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-900 mb-1",children:"Importante"}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:" Pelo menos uma operadora deve estar marcada como padro e ativa"}),e.jsx("li",{children:" O PDV usar a operadora padro automaticamente para vendas com carto"}),e.jsx("li",{children:" Operadoras com vendas vinculadas no podem ser excludas (apenas desativadas)"})]})]})]})}),g(),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>p(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(wn,{className:"w-4 h-4"}),"Nova Operadora"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(y=>{const N=y.icone&&!y.icone.startsWith("Fi")&&!y.icone.startsWith("Bi")?y.icone:"";return e.jsxs("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow ${y.ativo?"bg-white border-gray-200":"bg-gray-50 border-gray-300"} ${y.padrao?"ring-2 ring-emerald-500":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:`${y.cor}20`},children:N}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[y.nome,y.padrao&&e.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full",children:"Padro"})]}),y.codigo&&e.jsx("p",{className:"text-xs text-gray-500 font-mono",children:y.codigo})]})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${y.ativo?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:y.ativo?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas mximas:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[y.max_parcelas,"x"]})]}),y.api_enabled&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"API Integrada"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(y),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2 transition-colors text-sm",children:[e.jsx(B2,{className:"w-4 h-4"}),"Editar"]}),e.jsxs("button",{onClick:()=>v(y.id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2 transition-colors text-sm",children:[e.jsx($o,{className:"w-4 h-4"}),"Excluir"]})]})]},y.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(Nd,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma operadora cadastrada"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Clique em "Nova Operadora" para comear'})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i?"Editar Operadora":"Nova Operadora"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6",children:[c&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:c})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Operadora *"}),e.jsx("input",{type:"text",value:x.nome,onChange:y=>h({...x,nome:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Stone, Cielo, Rede",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo (sigla)"}),e.jsx("input",{type:"text",value:x.codigo,onChange:y=>h({...x,codigo:y.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"Ex: STONE, CIELO",maxLength:50})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mximo de Parcelas *"}),e.jsx("input",{type:"number",value:x.max_parcelas,onChange:y=>h({...x,max_parcelas:parseInt(y.target.value)||1}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"24",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entre 1 e 24 parcelas"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.padrao,onChange:y=>h({...x,padrao:y.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Operadora Padro"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.ativo,onChange:y=>h({...x,ativo:y.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Interface"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:x.cor,onChange:y=>h({...x,cor:y.target.value}),className:"w-16 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:x.cor,onChange:y=>h({...x,cor:y.target.value}),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"#00A868"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"cone"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ahe.map(y=>e.jsx("button",{type:"button",onClick:()=>h({...x,icone:y}),className:`w-10 h-10 rounded flex items-center justify-center text-xl transition-colors ${x.icone===y?"bg-blue-100 ring-2 ring-blue-500":"bg-gray-100 hover:bg-gray-200"}`,children:y},y))})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Integrao API (Opcional)"}),e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.api_enabled,onChange:y=>h({...x,api_enabled:y.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Habilitar integrao via API"})]}),x.api_enabled&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint da API"}),e.jsx("input",{type:"url",value:x.api_endpoint,onChange:y=>h({...x,api_endpoint:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"https://api.operadora.com/v1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Token de Acesso"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:x.api_token_encrypted,onChange:y=>h({...x,api_token_encrypted:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Token ser criptografado ao salvar"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(gh,{className:"w-4 h-4"}):e.jsx(Ym,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(Jm,{className:"w-4 h-4"}),i?"Salvar Alteraes":"Criar Operadora"]})]})]})]})})]})}const The=({isOpen:t,onClose:r,contexto:a})=>{const[s,n]=j.useState([]),[o,i]=j.useState(""),[l,c]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{t&&s.length===0&&n([{tipo:"ia",conteudo:`Ol! Sou seu especialista financeiro com IA. Analisando seu ${(a==null?void 0:a.tipo)||"relatrio"}...

Posso ajudar com:
 Anlise de resultados
 Sugestes de melhoria
 Comparaes de perodos
 Projees financeiras

O que deseja saber?`,timestamp:new Date}])},[t,s.length,a]),j.useEffect(()=>{u()},[s]);const u=()=>{var p;(p=d.current)==null||p.scrollIntoView({behavior:"smooth"})},m=async()=>{if(!o.trim())return;const p={tipo:"usuario",conteudo:o,timestamp:new Date};n(f=>[...f,p]),i(""),c(!0);try{const v={tipo:"ia",conteudo:(await V.post("/ia/chat",{mensagem:o,contexto:a})).data.resposta,timestamp:new Date};n(g=>[...g,v])}catch(f){console.error("Erro ao enviar mensagem:",f);const v={tipo:"ia",conteudo:"Desculpe, houve um erro ao processar sua mensagem. Tente novamente.",timestamp:new Date};n(g=>[...g,v])}finally{c(!1)}},x=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),m())},h=["Como melhorar minha margem de lucro?","Quais so os principais gastos?","Compare com o ms anterior","H despesas atpicas?"],b=p=>{i(p)};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(No,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Especialista Financeiro IA"}),e.jsx("p",{className:"text-sm text-purple-100",children:"Anlise inteligente dos seus dados"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(Vt,{size:24})})]}),a&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-indigo-200 p-3",children:e.jsxs("div",{className:"text-sm text-indigo-800",children:[" Analisando: ",e.jsx("span",{className:"font-semibold",children:a.tipo}),a.periodo&&e.jsxs("span",{className:"ml-2",children:[" ",a.periodo]}),a.valor&&e.jsxs("span",{className:"ml-2",children:[" Valor: R$ ",a.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map((p,f)=>e.jsx("div",{className:`flex ${p.tipo==="usuario"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl p-4 ${p.tipo==="usuario"?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-100 text-gray-800"}`,children:[p.tipo==="ia"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(aP,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"IA Especialista"})]}),e.jsx("p",{className:"whitespace-pre-wrap",children:p.conteudo}),e.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:p.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},f)),l&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wd,{className:"animate-spin text-purple-600",size:20}),e.jsx("span",{className:"text-gray-600",children:"Analisando..."})]})})}),e.jsx("div",{ref:d})]}),s.length<=1&&e.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:" Sugestes de perguntas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((p,f)=>e.jsx("button",{onClick:()=>b(p),className:"text-xs px-3 py-1.5 bg-white border border-purple-200 text-purple-700 rounded-full hover:bg-purple-50 transition-colors",children:p},f))})]}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-white rounded-b-2xl",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:p=>i(p.target.value),onKeyPress:x,placeholder:"Digite sua pergunta...",disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"}),e.jsx("button",{onClick:m,disabled:!o.trim()||l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:e.jsx(oP,{size:20})})]})})]})}):null},Ohe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(30),[i,l]=j.useState({media:0,desvio:0});j.useEffect(()=>{c()},[n]);const c=async()=>{s(!0);try{const p=await d();r(p)}catch(p){console.error("Erro ao carregar projees:",p)}finally{s(!1)}},d=async()=>{const p=new Date,f=new Date;f.setDate(f.getDate()-90);try{const g=(await V.get("/financeiro/movimentacoes",{params:{data_inicio:f.toISOString().split("T")[0],data_fim:p.toISOString().split("T")[0]}})).data,y=u(g,"entrada"),N=u(g,"saida"),_=await m(),w=[];let S=_;for(let C=1;C<=n;C++){const k=new Date;k.setDate(k.getDate()+C);const F=y*(.8+Math.random()*.4),q=N*(.8+Math.random()*.4),A=F,T=q;S=S+A-T;const U=Math.max(95-C*1.5,50);w.push({data:k.toISOString().split("T")[0],dataFormatada:k.toLocaleDateString("pt-BR"),entradasProjetadas:A,saidasProjetadas:T,saldoProjetado:S,nivelConfianca:U,diaSemana:k.toLocaleDateString("pt-BR",{weekday:"short"}),alerta:S<1e3?"crtico":S<5e3?"ateno":null})}return w}catch(v){return console.error("Erro ao gerar projees:",v),[]}},u=(p,f)=>{const v=p.filter(y=>y.tipo===f);return v.length===0?0:v.reduce((y,N)=>y+N.valor,0)/90},m=async()=>{try{return(await V.get("/financeiro/saldo-atual")).data.saldo||1e4}catch(p){return console.error("Erro ao buscar saldo:",p),1e4}},x=p=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p),h=p=>p==="crtico"?"bg-red-100 border-red-300 text-red-800":p==="ateno"?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-green-50 border-green-200",b=()=>{var f,v,g;const p=[];for(let y=0;y<t.length;y+=7){const N=t.slice(y,y+7),_=N.reduce((C,k)=>C+k.entradasProjetadas,0),w=N.reduce((C,k)=>C+k.saidasProjetadas,0),S=((f=N[N.length-1])==null?void 0:f.saldoProjetado)||0;p.push({numero:Math.floor(y/7)+1,dataInicio:(v=N[0])==null?void 0:v.dataFormatada,dataFim:(g=N[N.length-1])==null?void 0:g.dataFormatada,entradas:_,saidas:w,saldo:w-_,saldoFinal:S})}return p};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(No,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Calculando projees..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(sa,{className:"w-6 h-6"}),"Projees de Fluxo de Caixa"]}),e.jsx("p",{className:"text-purple-100 mt-1",children:"Previses baseadas em padres histricos e tendncias"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o(15),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===15?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"15 dias"}),e.jsx("button",{onClick:()=>o(30),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===30?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"30 dias"}),e.jsx("button",{onClick:()=>o(60),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===60?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"60 dias"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(zi,{className:"w-5 h-5 text-indigo-600"}),"Resumo Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:b().map(p=>e.jsxs("div",{className:`border rounded-lg p-4 ${p.saldoFinal<5e3?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"text-sm font-medium text-gray-600 mb-2",children:["Semana ",p.numero]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[p.dataInicio," - ",p.dataFim]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Entradas:"}),e.jsx("span",{className:"font-medium",children:x(p.entradas)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-red-600",children:"Sadas:"}),e.jsx("span",{className:"font-medium",children:x(p.saidas)})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[e.jsx("span",{children:"Saldo Final:"}),e.jsx("span",{className:p.saldoFinal<5e3?"text-yellow-600":"text-gray-800",children:x(p.saldoFinal)})]})]})]},p.numero))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(fa,{className:"w-5 h-5 text-green-600"}),"Projees Dirias Detalhadas"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Data"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Dia"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Entradas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Sadas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Saldo Projetado"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Confiana"})]})}),e.jsx("tbody",{children:t.map((p,f)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${p.alerta?h(p.alerta):""}`,children:[e.jsx("td",{className:"py-3 px-4 text-sm",children:p.dataFormatada}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:p.diaSemana}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-green-600 font-medium",children:x(p.entradasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-red-600 font-medium",children:x(p.saidasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right font-semibold",children:x(p.saldoProjetado)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.nivelConfianca>=80?"bg-green-100 text-green-800":p.nivelConfianca>=65?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:[p.nivelConfianca.toFixed(0),"%"]})})]},f))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Bt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Sobre as Projees"}),e.jsx("p",{children:"As projees so calculadas com base em padres histricos dos ltimos 90 dias. O nvel de confiana diminui com o tempo, pois eventos futuros podem alterar as tendncias."})]})]})]})},Fhe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState("todos");j.useEffect(()=>{i()},[]);const i=async()=>{s(!0);try{const g=await l();r(g)}catch(g){console.error("Erro ao carregar alertas:",g)}finally{s(!1)}},l=async()=>{const g=[],y=new Date;try{const N=await c();N<1e3?g.push({id:"saldo-critico",tipo:"saldo",severidade:"crtico",titulo:"Saldo Crtico",mensagem:`Seu saldo est abaixo de R$ 1.000,00. Saldo atual: ${b(N)}`,recomendacao:"Considere adiar pagamentos no essenciais ou antecipar recebimentos.",icone:ta,data:y.toISOString()}):N<5e3&&g.push({id:"saldo-atencao",tipo:"saldo",severidade:"ateno",titulo:"Saldo Baixo",mensagem:`Seu saldo est em nvel de ateno: ${b(N)}`,recomendacao:"Monitore suas despesas e prepare-se para possveis necessidades de caixa.",icone:Bt,data:y.toISOString()});const _=await d(7);if(_.length>0){const F=_.reduce((q,A)=>q+A.valor,0);g.push({id:"vencimentos-proximos",tipo:"vencimento",severidade:"ateno",titulo:`${_.length} Pagamentos Vencendo`,mensagem:`Voc tem ${_.length} pagamentos vencendo nos prximos 7 dias, totalizando ${b(F)}`,recomendacao:"Verifique se h saldo suficiente para cobrir estes pagamentos.",icone:zi,data:y.toISOString(),detalhes:_})}const w=await u();if(w.length>0){const F=w.reduce((q,A)=>q+A.valor,0);g.push({id:"vencimentos-atrasados",tipo:"atraso",severidade:"crtico",titulo:`${w.length} Pagamentos Atrasados`,mensagem:`Voc tem ${w.length} pagamentos em atraso, totalizando ${b(F)}`,recomendacao:"Priorize a quitao destes dbitos para evitar juros e multas.",icone:ta,data:y.toISOString(),detalhes:w})}const S=await m();S.variacao>30&&g.push({id:"gastos-anormais",tipo:"anomalia",severidade:"ateno",titulo:"Gastos Acima do Normal",mensagem:`Suas despesas aumentaram ${S.variacao.toFixed(0)}% em relao  mdia histrica`,recomendacao:"Revise seus gastos recentes e identifique possveis despesas extraordinrias.",icone:sa,data:y.toISOString(),detalhes:S});const C=await x();C.length>0&&g.push({id:"recorrencias-pendentes",tipo:"recorrencia",severidade:"info",titulo:"Despesas Recorrentes Prximas",mensagem:`${C.length} despesas recorrentes vencero em breve`,recomendacao:"Certifique-se de que h saldo para cobrir estas despesas automticas.",icone:Vl,data:y.toISOString(),detalhes:C});const k=await h(15);return k.diasAteNegativo>0&&g.push({id:"projecao-negativa",tipo:"projecao",severidade:"crtico",titulo:"Risco de Saldo Negativo",mensagem:`Com o padro atual, seu saldo pode ficar negativo em ${k.diasAteNegativo} dias`,recomendacao:"Tome medidas urgentes para aumentar receitas ou reduzir despesas.",icone:Ca,data:y.toISOString(),detalhes:k}),g.sort((F,q)=>{const A={crtico:0,ateno:1,info:2};return A[F.severidade]-A[q.severidade]})}catch(N){return console.error("Erro ao gerar alertas:",N),[]}},c=async()=>{try{return(await V.get("/financeiro/saldo-atual")).data.saldo||1e4}catch{return 1e4}},d=async g=>{try{const y=new Date,N=new Date;return N.setDate(N.getDate()+g),(await V.get("/financeiro/contas-pagar",{params:{data_inicio:y.toISOString().split("T")[0],data_fim:N.toISOString().split("T")[0],status:"pendente"}})).data||[]}catch{return[]}},u=async()=>{try{return(await V.get("/financeiro/contas-pagar",{params:{atrasadas:!0}})).data||[]}catch{return[]}},m=async()=>{try{const g=new Date,y=new Date;return y.setDate(y.getDate()-30),(await V.get("/financeiro/analise-gastos",{params:{data_inicio:y.toISOString().split("T")[0],data_fim:g.toISOString().split("T")[0]}})).data||{variacao:0}}catch{return{variacao:0}}},x=async()=>{try{return(await V.get("/financeiro/recorrencias-proximas")).data||[]}catch{return[]}},h=async g=>{try{return(await V.get("/ia/fluxo/projecao-saldo",{params:{dias:g}})).data||{diasAteNegativo:0}}catch{return{diasAteNegativo:0}}},b=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g),p=g=>{r(t.filter(y=>y.id!==g))},f=g=>{switch(g){case"crtico":return{bg:"bg-red-50",border:"border-red-300",text:"text-red-800",badge:"bg-red-100 text-red-800"};case"ateno":return{bg:"bg-yellow-50",border:"border-yellow-300",text:"text-yellow-800",badge:"bg-yellow-100 text-yellow-800"};case"info":return{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-800",badge:"bg-blue-100 text-blue-800"};default:return{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-800",badge:"bg-gray-100 text-gray-800"}}},v=t.filter(g=>n==="todos"?!0:g.severidade===n);return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(No,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Analisando alertas..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ta,{className:"w-6 h-6"}),"Alertas Inteligentes"]}),e.jsx("p",{className:"text-orange-100 mt-1",children:"Avisos automticos sobre situaes que requerem ateno"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>o("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="todos"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["Todos (",t.length,")"]}),e.jsxs("button",{onClick:()=>o("crtico"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="crtico"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["Crticos (",t.filter(g=>g.severidade==="crtico").length,")"]})]})]})}),v.length===0?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx(Xt,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Tudo em ordem!"}),e.jsx("p",{className:"text-green-700",children:"No h alertas no momento. Seu fluxo de caixa est saudvel."})]}):e.jsx("div",{className:"space-y-4",children:v.map(g=>{const y=f(g.severidade),N=g.icone;return e.jsx("div",{className:`${y.bg} border ${y.border} rounded-lg p-5 transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`${y.text} mt-1`,children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:`font-semibold ${y.text}`,children:g.titulo}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.badge}`,children:g.severidade})]}),e.jsx("p",{className:`text-sm mb-3 ${y.text}`,children:g.mensagem}),e.jsxs("div",{className:"bg-white bg-opacity-50 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Recomendao:"}),e.jsx("p",{className:"text-sm text-gray-600",children:g.recomendacao})]}),g.detalhes&&e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 hover:text-gray-900",children:"Ver detalhes"}),e.jsx("div",{className:"mt-2 pl-4 border-l-2 border-gray-300",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(g.detalhes,null,2)})})]})]})]}),e.jsx("button",{onClick:()=>p(g.id),className:"ml-4 text-gray-400 hover:text-gray-600 transition-colors",title:"Marcar como resolvido",children:e.jsx(Vt,{className:"w-5 h-5"})})]})},g.id)})})]})},Rhe=()=>{Kt();const[t,r]=j.useState(!1),[a,s]=j.useState(null),[n,o]=j.useState("movimentacoes"),[i,l]=j.useState(!1),c=()=>{const T=new Date,U=T.getFullYear(),K=String(T.getMonth()+1).padStart(2,"0"),I=String(T.getDate()).padStart(2,"0");return`${U}-${K}-${I}`},d=()=>{const T=new Date,U=T.getFullYear(),K=String(T.getMonth()+1).padStart(2,"0");return`${U}-${K}-01`},[u,m]=j.useState({data_inicio:d(),data_fim:c(),conta_bancaria_id:null,agrupamento:"dia"}),[x,h]=j.useState("todos"),[b,p]=j.useState("todos"),[f,v]=j.useState([]),[g,y]=j.useState(null),[N,_]=j.useState(!1),[w,S]=j.useState("");j.useEffect(()=>{C(),k()},[]);const C=async()=>{try{const T=await V.get("/contas-bancarias");v(T.data)}catch(T){console.error("Erro ao carregar contas bancrias:",T)}},k=async()=>{var T,U;r(!0);try{const K=new URLSearchParams({data_inicio:u.data_inicio,data_fim:u.data_fim,agrupamento:u.agrupamento});u.conta_bancaria_id&&K.append("conta_bancaria_id",u.conta_bancaria_id),w&&K.append("numero_venda",w);const I=await V.get(`/financeiro/fluxo-caixa?${K}`);s(I.data)}catch(K){console.error("Erro ao carregar fluxo de caixa:",K),alert("Erro ao carregar fluxo de caixa: "+(((U=(T=K.response)==null?void 0:T.data)==null?void 0:U.detail)||K.message))}finally{r(!1)}},F=T=>{const U=new Date;let K,I;switch(T){case"7dias":K=new Date(U.setDate(U.getDate()-7)),I=new Date;break;case"30dias":K=new Date(U.setDate(U.getDate()-30)),I=new Date;break;case"mes_atual":K=new Date(U.getFullYear(),U.getMonth(),1),I=new Date(U.getFullYear(),U.getMonth()+1,0);break;case"proximo_mes":K=new Date(U.getFullYear(),U.getMonth()+1,1),I=new Date(U.getFullYear(),U.getMonth()+2,0);break;default:return}const Y={...u,data_inicio:K.toISOString().split("T")[0],data_fim:I.toISOString().split("T")[0]};m(Y),setTimeout(()=>k(),100)},q=T=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T||0),A=T=>a?a.movimentacoes.filter(U=>{const K=new Date(U.data),I=new Date(T.data_inicio),Y=new Date(T.data_fim);if(!(K>=I&&K<=Y)||x==="entradas"&&U.tipo!=="credito"||x==="saidas"&&U.tipo!=="debito"||b==="realizado"&&U.status!=="realizado"||b==="previsto"&&U.status!=="previsto")return!1;if(w){const W=U.descricao||"",R=U.numero_venda||"",B=w.toLowerCase();return R.toLowerCase().includes(B)||W.toLowerCase().includes(B)}return!0}):[];return t&&!a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gr,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando fluxo de caixa..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" Fluxo de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Viso completa: Previsto vs Realizado"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:" Os lanamentos so criados automaticamente a partir de Contas a Pagar e Contas a Receber"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar por Nmero da Venda"}),e.jsx("input",{type:"text",placeholder:"Digite o nmero da venda (ex: 202601100007) e pressione Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:w,onChange:T=>S(T.target.value),onKeyPress:T=>{T.key==="Enter"&&k()}})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visualizao"}),e.jsxs("select",{value:u.agrupamento,onChange:T=>m({...u,agrupamento:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"dia",children:" Dirio"}),e.jsx("option",{value:"semana",children:" Semanal"}),e.jsx("option",{value:"mes",children:" Mensal"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Movimentao"}),e.jsxs("select",{value:x,onChange:T=>h(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:" Todas"}),e.jsx("option",{value:"entradas",children:" Apenas Entradas"}),e.jsx("option",{value:"saidas",children:" Apenas Sadas"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:b,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:" Todos"}),e.jsx("option",{value:"realizado",children:" Apenas Realizados"}),e.jsx("option",{value:"previsto",children:" Apenas Previstos"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:u.data_inicio,onChange:T=>m({...u,data_inicio:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:u.data_fim,onChange:T=>m({...u,data_fim:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conta Bancria"}),e.jsxs("select",{value:u.conta_bancaria_id||"",onChange:T=>m({...u,conta_bancaria_id:T.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Todas as Contas"}),vr(f).map(T=>e.jsx("option",{value:T.id,children:T.nome},T.id))]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Gr,{size:18}),"Atualizar"]})})]}),(x!=="todos"||b!=="todos")&&e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-blue-800 font-medium",children:" Filtros ativos:"}),x!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:x==="entradas"?" Apenas Entradas":" Apenas Sadas"}),b!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:b==="realizado"?" Apenas Realizados":" Apenas Previstos"})]}),e.jsx("button",{onClick:()=>{h("todos"),p("todos")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Limpar filtros"})]}),e.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap items-center",children:[e.jsx("button",{onClick:()=>F("7dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"ltimos 7 dias"}),e.jsx("button",{onClick:()=>F("30dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"ltimos 30 dias"}),e.jsx("button",{onClick:()=>F("mes_atual"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Ms Atual"}),e.jsx("button",{onClick:()=>F("proximo_mes"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Prximo Ms"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 bg-blue-50 px-3 py-2 rounded border border-blue-200",children:[e.jsx("input",{type:"checkbox",id:"apenasComLancamentos",checked:N,onChange:T=>_(T.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"apenasComLancamentos",className:"text-sm font-medium text-blue-700 cursor-pointer",children:" Apenas dias com lanamentos"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>o("movimentacoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="movimentacoes"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(fa,{className:"w-5 h-5"}),"Movimentaes"]}),e.jsxs("button",{onClick:()=>o("projecoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="projecoes"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(Gm,{className:"w-5 h-5"}),"Projees IA",e.jsx(No,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>o("alertas"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="alertas"?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(ta,{className:"w-5 h-5"}),"Alertas IA",e.jsx(No,{className:"w-4 h-4"})]})]})})}),n==="projecoes"&&e.jsx(Ohe,{}),n==="alertas"&&e.jsx(Fhe,{}),n==="movimentacoes"&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Saldo Inicial"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:q(a.saldo_inicial)})]}),e.jsx(fa,{className:"text-blue-500",size:32})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Realizado (Entradas)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:q(a.total_realizado_entradas)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Previsto: ",q(a.total_previsto_entradas)]})]}),e.jsx(sa,{className:"text-green-500",size:32})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Realizado (Sadas)"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:q(a.total_realizado_saidas)}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Previsto: ",q(a.total_previsto_saidas)]})]}),e.jsx(Ca,{className:"text-red-500",size:32})]})}),e.jsx("div",{className:`rounded-lg p-4 border-l-4 ${a.saldo_final>=0?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:a.saldo_final>=0?"#2563eb":"#dc2626"},children:"Saldo Final Realizado"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:a.saldo_final>=0?"#1d4ed8":"#b91c1c"},children:q(a.saldo_final)}),e.jsxs("p",{className:"text-xs mt-1",style:{color:a.saldo_final>=0?"#2563eb":"#dc2626"},children:["Previsto: ",q(a.saldo_previsto_final)]})]}),e.jsx(fa,{className:a.saldo_final>=0?"text-blue-500":"text-red-500",size:32})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxs("thead",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perodo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",colSpan:"2",children:" Entradas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-red-50",colSpan:"2",children:" Sadas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:" Saldo Final"}),e.jsx("th",{className:"px-6 py-3"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-6 py-2"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-blue-50",children:"Real / Previsto"}),e.jsx("th",{className:"px-4 py-2"})]})]}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:vr(a==null?void 0:a.periodos).length>0?vr(a==null?void 0:a.periodos).filter(T=>N?T.realizado_entradas>0||T.realizado_saidas>0||T.previsto_entradas>0||T.previsto_saidas>0:!0).map((T,U)=>{const K=A(T),I=T.data,Y=g===I;return e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.data}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-green-50",children:q(T.previsto_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-green-700 text-right bg-green-100",children:q(T.realizado_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-red-50",children:q(T.previsto_saidas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-red-700 text-right bg-red-100",children:q(T.realizado_saidas)}),e.jsxs("td",{className:"px-4 py-4 text-sm text-center bg-blue-50",children:[e.jsx("div",{className:`font-bold ${T.realizado_saldo>=0?"text-green-700":"text-red-700"}`,children:q(T.realizado_saldo)}),e.jsxs("div",{className:`text-xs ${T.previsto_saldo>=0?"text-green-600":"text-red-600"}`,children:["Prev: ",q(T.previsto_saldo)]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>y(Y?null:I),className:"text-blue-600 hover:text-blue-800",children:e.jsx(ad,{size:20,className:`transform transition-transform ${Y?"rotate-90":""}`})})})]}),Y&&K.length>0&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:" Movimentaes Detalhadas"}),vr(K).map((D,W)=>e.jsxs("div",{className:`flex justify-between items-center p-2 rounded ${D.status==="previsto"?"bg-yellow-50 border-l-2 border-yellow-400":"bg-white border-l-2 border-blue-400"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:D.descricao}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.categoria,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${D.status==="previsto"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:D.status==="previsto"?" Previsto":" Realizado"}),e.jsxs("span",{className:`font-bold ${D.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:[D.tipo==="entrada"?"+":"-"," ",q(D.valor)]})]})]},W))]})})})]},I)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada para o perodo selecionado"})})})]})})})]})]})};function $he(){const[t,r]=j.useState(!0),[a,s]=j.useState("resumo"),[n,o]=j.useState(new Date().toISOString().split("T")[0]),[i,l]=j.useState(new Date().toISOString().split("T")[0]),[c,d]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[u,m]=j.useState([]),[x,h]=j.useState([]),[b,p]=j.useState([]),[f,v]=j.useState([]),[g,y]=j.useState([]),[N,_]=j.useState([]),[w,S]=j.useState([]),C=()=>localStorage.getItem("access_token"),k=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A||0),F=A=>new Date(A).toLocaleDateString("pt-BR"),q=async()=>{var U,K;r(!0);const T={headers:{Authorization:`Bearer ${C()}`},params:{data_inicio:n,data_fim:i}};try{const Y=(await V.get("/vendas/relatorio",T)).data;d(Y.resumo||{}),m(Y.vendas_por_data||[]),h(Y.formas_recebimento||[]),p(Y.vendas_por_funcionario||[]),v(Y.vendas_por_tipo||[]),y(Y.vendas_por_grupo||[]),_(Y.produtos_detalhados||[]),S(Y.lista_vendas||[]),console.log(" Dados carregados:",{vendasPorData:((U=Y.vendas_por_data)==null?void 0:U.length)||0,formasRecebimento:((K=Y.formas_recebimento)==null?void 0:K.length)||0})}catch(I){console.error("Erro ao carregar relatrio:",I)}finally{r(!1)}};return j.useEffect(()=>{q()},[n,i]),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{style:{backgroundColor:"red",color:"white",padding:"20px",fontSize:"24px",fontWeight:"bold"},children:" TESTE: ARQUIVO EST SENDO CARREGADO CORRETAMENTE"}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:n,onChange:A=>o(A.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"self-center",children:"at"}),e.jsx("input",{type:"date",value:i,onChange:A=>l(A.target.value),className:"border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>s("resumo"),className:`px-4 py-2 font-medium ${a==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>s("produtos"),className:`px-4 py-2 font-medium ${a==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/servio"}),e.jsx("button",{onClick:()=>s("lista"),className:`px-4 py-2 font-medium ${a==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"})]})]}),a==="resumo"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:k(c.venda_bruta)}),e.jsx("div",{className:"text-sm",children:"Venda bruta"})]}),e.jsxs("div",{className:"bg-gray-400 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:k(c.taxa_entrega)}),e.jsx("div",{className:"text-sm",children:"Taxa de entrega"})]}),e.jsxs("div",{className:"bg-yellow-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:k(c.desconto)}),e.jsxs("div",{className:"text-sm",children:[c.percentual_desconto,"% de desconto"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:k(c.venda_liquida)}),e.jsx("div",{className:"text-sm",children:"Venda Lquida"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:k(c.em_aberto)}),e.jsx("div",{className:"text-sm",children:"Em aberto"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. Mdio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[u.map((A,T)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:F(A.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[A.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.saldo_aberto)})]},T)),u.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:u.reduce((A,T)=>A+T.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(u.reduce((A,T)=>A+T.saldo_aberto,0))})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[x.map((A,T)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_total)})]},T)),x.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(x.reduce((A,T)=>A+T.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Funcionrio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[b.map((A,T)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_liquido)})]},T)),b.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:b.reduce((A,T)=>A+T.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(b.reduce((A,T)=>A+T.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(b.reduce((A,T)=>A+T.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(b.reduce((A,T)=>A+T.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[f.map((A,T)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_liquido)})]},T)),f.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:f.reduce((A,T)=>A+T.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(f.reduce((A,T)=>A+T.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(f.reduce((A,T)=>A+T.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(f.reduce((A,T)=>A+T.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[g.map((A,T)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[A.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.valor_liquido)})]},T)),g.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(g.reduce((A,T)=>A+T.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(g.reduce((A,T)=>A+T.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(g.reduce((A,T)=>A+T.valor_liquido,0))})]})]})]})]})]})]}),a==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/Servios"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/Servios"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Lquido"})]})}),e.jsxs("tbody",{children:[N.map((A,T)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold border-b-2 border-blue-300",children:[e.jsx("td",{className:"px-4 py-2",children:A.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.total_liquido)})]},`cat-${T}`),A.subcategorias&&A.subcategorias.map((U,K)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium border-b",children:[e.jsxs("td",{className:"px-4 py-2 pl-8",children:[" ",U.subcategoria]}),e.jsx("td",{className:"px-4 py-2 text-right",children:U.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(U.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(U.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(U.total_liquido)})]},`subcat-${T}-${K}`),U.produtos.map((I,Y)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:I.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:I.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(I.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(I.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(I.valor_liquido)})]},`prod-${T}-${K}-${Y}`))]})),A.produtos&&A.produtos.map((U,K)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:U.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:U.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(U.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(U.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:k(U.valor_liquido)})]},`prod-${T}-${K}`))]})),N.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:N.reduce((A,T)=>A+T.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(N.reduce((A,T)=>A+T.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(N.reduce((A,T)=>A+T.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:k(N.reduce((A,T)=>A+T.total_liquido,0))})]})]})]})})]}),a==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Cd."}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Data e hora"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Animal"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:w.map(A=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:A.numero_venda||A.id}),e.jsx("td",{className:"px-4 py-2",children:F(A.data_venda)}),e.jsx("td",{className:"px-4 py-2",children:A.cliente_nome}),e.jsx("td",{className:"px-4 py-2",children:A.pet_nome||"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(A.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${A.status==="finalizada"?"bg-green-100 text-green-800":A.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:A.status==="finalizada"?"Baixada":A.status==="baixa_parcial"?"Parcial":"Em aberto"})})]},A.id))})]})})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var kf={};kf.version="0.18.5";var nR=1252,Dhe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],oR=function(t){Dhe.indexOf(t)!=-1&&(nR=t)};function Mhe(){oR(1252)}var Rx=function(t){oR(t)};function Ihe(){Rx(1200),Mhe()}var op=function(r){return String.fromCharCode(r)},Lk=function(r){return String.fromCharCode(r)},Ef,gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $x(t){for(var r="",a=0,s=0,n=0,o=0,i=0,l=0,c=0,d=0;d<t.length;)a=t.charCodeAt(d++),o=a>>2,s=t.charCodeAt(d++),i=(a&3)<<4|s>>4,n=t.charCodeAt(d++),l=(s&15)<<2|n>>6,c=n&63,isNaN(s)?l=c=64:isNaN(n)&&(c=64),r+=gi.charAt(o)+gi.charAt(i)+gi.charAt(l)+gi.charAt(c);return r}function Bo(t){var r="",a=0,s=0,n=0,o=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)o=gi.indexOf(t.charAt(d++)),i=gi.indexOf(t.charAt(d++)),a=o<<2|i>>4,r+=String.fromCharCode(a),l=gi.indexOf(t.charAt(d++)),s=(i&15)<<4|l>>2,l!==64&&(r+=String.fromCharCode(s)),c=gi.indexOf(t.charAt(d++)),n=(l&3)<<6|c,c!==64&&(r+=String.fromCharCode(n));return r}var tr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ko=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(r,a){return a?new Buffer(r,a):new Buffer(r)}:Buffer.from.bind(Buffer)}return function(){}}();function Ql(t){return tr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Bk(t){return tr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Nn=function(r){return tr?Ko(r,"binary"):r.split("").map(function(a){return a.charCodeAt(0)&255})};function cb(t){if(typeof ArrayBuffer>"u")return Nn(t);for(var r=new ArrayBuffer(t.length),a=new Uint8Array(r),s=0;s!=t.length;++s)a[s]=t.charCodeAt(s)&255;return r}function l0(t){if(Array.isArray(t))return t.map(function(s){return String.fromCharCode(s)}).join("");for(var r=[],a=0;a<t.length;++a)r[a]=String.fromCharCode(t[a]);return r.join("")}function Lhe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Oa=tr?function(t){return Buffer.concat(t.map(function(r){return Buffer.isBuffer(r)?r:Ko(r)}))}:function(t){if(typeof Uint8Array<"u"){var r=0,a=0;for(r=0;r<t.length;++r)a+=t[r].length;var s=new Uint8Array(a),n=0;for(r=0,a=0;r<t.length;a+=n,++r)if(n=t[r].length,t[r]instanceof Uint8Array)s.set(t[r],a);else{if(typeof t[r]=="string")throw"wtf";s.set(new Uint8Array(t[r]),a)}return s}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function Bhe(t){for(var r=[],a=0,s=t.length+250,n=Ql(t.length+255),o=0;o<t.length;++o){var i=t.charCodeAt(o);if(i<128)n[a++]=i;else if(i<2048)n[a++]=192|i>>6&31,n[a++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++o)&1023;n[a++]=240|i>>8&7,n[a++]=128|i>>2&63,n[a++]=128|l>>6&15|(i&3)<<4,n[a++]=128|l&63}else n[a++]=224|i>>12&15,n[a++]=128|i>>6&63,n[a++]=128|i&63;a>s&&(r.push(n.slice(0,a)),a=0,n=Ql(65535),s=65530)}return r.push(n.slice(0,a)),Oa(r)}var ym=/\u0000/g,ip=/[\u0001-\u0006]/g;function id(t){for(var r="",a=t.length-1;a>=0;)r+=t.charAt(a--);return r}function _n(t,r){var a=""+t;return a.length>=r?a:Br("0",r-a.length)+a}function QN(t,r){var a=""+t;return a.length>=r?a:Br(" ",r-a.length)+a}function Af(t,r){var a=""+t;return a.length>=r?a:a+Br(" ",r-a.length)}function zhe(t,r){var a=""+Math.round(t);return a.length>=r?a:Br("0",r-a.length)+a}function qhe(t,r){var a=""+t;return a.length>=r?a:Br("0",r-a.length)+a}var zk=Math.pow(2,32);function wc(t,r){if(t>zk||t<-zk)return zhe(t,r);var a=Math.round(t);return qhe(a,r)}function Pf(t,r){return r=r||0,t.length>=7+r&&(t.charCodeAt(r)|32)===103&&(t.charCodeAt(r+1)|32)===101&&(t.charCodeAt(r+2)|32)===110&&(t.charCodeAt(r+3)|32)===101&&(t.charCodeAt(r+4)|32)===114&&(t.charCodeAt(r+5)|32)===97&&(t.charCodeAt(r+6)|32)===108}var qk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],kv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Vhe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Vk={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Uhe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Tf(t,r,a){for(var s=t<0?-1:1,n=t*s,o=0,i=1,l=0,c=1,d=0,u=0,m=Math.floor(n);d<r&&(m=Math.floor(n),l=m*i+o,u=m*d+c,!(n-m<5e-8));)n=1/(n-m),o=i,i=l,c=d,d=u;if(u>r&&(d>r?(u=c,l=o):(u=d,l=i)),!a)return[0,s*l,u];var x=Math.floor(s*l/u);return[x,s*l-x*u,u]}function lp(t,r,a){if(t>2958465||t<0)return null;var s=t|0,n=Math.floor(86400*(t-s)),o=0,i=[],l={D:s,T:n,u:86400*(t-s)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),r&&r.date1904&&(s+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++s,++l.D)),s===60)i=a?[1317,10,29]:[1900,2,29],o=3;else if(s===0)i=a?[1317,8,29]:[1900,1,0],o=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],o=c.getDay(),s<60&&(o=(o+6)%7),a&&(o=Qhe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=o,l}var iR=new Date(1899,11,31,0,0,0),Whe=iR.getTime(),Hhe=new Date(1900,2,1,0,0,0);function lR(t,r){var a=t.getTime();return r?a-=1461*24*60*60*1e3:t>=Hhe&&(a+=24*60*60*1e3),(a-(Whe+(t.getTimezoneOffset()-iR.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function JN(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Khe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ghe(t){var r=t<0?12:11,a=JN(t.toFixed(12));return a.length<=r||(a=t.toPrecision(10),a.length<=r)?a:t.toExponential(5)}function Xhe(t){var r=JN(t.toFixed(11));return r.length>(t<0?12:11)||r==="0"||r==="-0"?t.toPrecision(6):r}function Yhe(t){var r=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return r>=-4&&r<=-1?a=t.toPrecision(10+r):Math.abs(r)<=9?a=Ghe(t):r===10?a=t.toFixed(10).substr(0,12):a=Xhe(t),JN(Khe(a.toUpperCase()))}function C1(t,r){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Yhe(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fi(14,lR(t,r&&r.date1904),r)}throw new Error("unsupported value in General format: "+t)}function Qhe(t,r){r[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function Jhe(t,r,a,s){var n="",o=0,i=0,l=a.y,c,d=0;switch(t){case 98:l=a.y+543;case 121:switch(r.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(r.length){case 1:case 2:c=a.m,d=r.length;break;case 3:return kv[a.m-1][1];case 5:return kv[a.m-1][0];default:return kv[a.m-1][2]}break;case 100:switch(r.length){case 1:case 2:c=a.d,d=r.length;break;case 3:return qk[a.q][0];default:return qk[a.q][1]}break;case 104:switch(r.length){case 1:case 2:c=1+(a.H+11)%12,d=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:c=a.H,d=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:c=a.M,d=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000")throw"bad second format: "+r;return a.u===0&&(r=="s"||r=="ss")?_n(a.S,r.length):(s>=2?i=s===3?1e3:100:i=s===1?10:1,o=Math.round(i*(a.S+a.u)),o>=60*i&&(o=0),r==="s"?o===0?"0":""+o/i:(n=_n(o,2+s),r==="ss"?n.substr(0,2):"."+n.substr(2,r.length-1)));case 90:switch(r){case"[h]":case"[hh]":c=a.D*24+a.H;break;case"[m]":case"[mm]":c=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":c=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+r}d=r.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?_n(c,d):"";return u}function bi(t){var r=3;if(t.length<=r)return t;for(var a=t.length%r,s=t.substr(0,a);a!=t.length;a+=r)s+=(s.length>0?",":"")+t.substr(a,r);return s}var cR=/%/g;function Zhe(t,r,a){var s=r.replace(cR,""),n=r.length-s.length;return So(t,s,a*Math.pow(10,2*n))+Br("%",n)}function efe(t,r,a){for(var s=r.length-1;r.charCodeAt(s-1)===44;)--s;return So(t,r.substr(0,s),a/Math.pow(10,3*(r.length-s)))}function dR(t,r){var a,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+dR(t,-r);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var o=Math.floor(Math.log(r)*Math.LOG10E)%n;if(o<0&&(o+=n),a=(r/Math.pow(10,o)).toPrecision(s+1+(n+o)%n),a.indexOf("e")===-1){var i=Math.floor(Math.log(r)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+o):a+="E+"+(i-o);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+o)%n)+"."+u.substr(o)+"E"})}else a=r.toExponential(s);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var uR=/# (\?+)( ?)\/( ?)(\d+)/;function tfe(t,r,a){var s=parseInt(t[4],10),n=Math.round(r*s),o=Math.floor(n/s),i=n-o*s,l=s;return a+(o===0?"":""+o)+" "+(i===0?Br(" ",t[1].length+1+t[4].length):QN(i,t[1].length)+t[2]+"/"+t[3]+_n(l,t[4].length))}function rfe(t,r,a){return a+(r===0?"":""+r)+Br(" ",t[1].length+2+t[4].length)}var mR=/^#*0*\.([0#]+)/,xR=/\).*[0#]/,pR=/\(###\) ###\\?-####/;function Ya(t){for(var r="",a,s=0;s!=t.length;++s)switch(a=t.charCodeAt(s)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(a)}return r}function Uk(t,r){var a=Math.pow(10,r);return""+Math.round(t*a)/a}function Wk(t,r){var a=t-Math.floor(t),s=Math.pow(10,r);return r<(""+Math.round(a*s)).length?0:Math.round(a*s)}function afe(t,r){return r<(""+Math.round((t-Math.floor(t))*Math.pow(10,r))).length?1:0}function sfe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Xs(t,r,a){if(t.charCodeAt(0)===40&&!r.match(xR)){var s=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Xs("n",s,a):"("+Xs("n",s,-a)+")"}if(r.charCodeAt(r.length-1)===44)return efe(t,r,a);if(r.indexOf("%")!==-1)return Zhe(t,r,a);if(r.indexOf("E")!==-1)return dR(r,a);if(r.charCodeAt(0)===36)return"$"+Xs(t,r.substr(r.charAt(1)==" "?2:1),a);var n,o,i,l,c=Math.abs(a),d=a<0?"-":"";if(r.match(/^00+$/))return d+wc(c,r.length);if(r.match(/^[#?]+$/))return n=wc(a,0),n==="0"&&(n=""),n.length>r.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(uR))return tfe(o,c,d);if(r.match(/^#+0+$/))return d+wc(c,r.length-r.indexOf("0"));if(o=r.match(mR))return n=Uk(a,o[1].length).replace(/^([^\.]+)$/,"$1."+Ya(o[1])).replace(/\.$/,"."+Ya(o[1])).replace(/\.(\d*)$/,function(b,p){return"."+p+Br("0",Ya(o[1]).length-p.length)}),r.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),o=r.match(/^(0*)\.(#*)$/))return d+Uk(c,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=r.match(/^#{1,3},##0(\.?)$/))return d+bi(wc(c,0));if(o=r.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Xs(t,r,-a):bi(""+(Math.floor(a)+afe(a,o[1].length)))+"."+_n(Wk(a,o[1].length),o[1].length);if(o=r.match(/^#,#*,#0/))return Xs(t,r.replace(/^#,#*,/,""),a);if(o=r.match(/^([0#]+)(\\?-([0#]+))+$/))return n=id(Xs(t,r.replace(/[\\-]/g,""),a)),i=0,id(id(r.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<n.length?n.charAt(i++):b==="0"?"0":""}));if(r.match(pR))return n=Xs(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(o=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(o[4].length,7),l=Tf(c,Math.pow(10,i)-1,!1),n=""+d,u=So("n",o[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+o[2]+"/"+o[3],u=Af(l[2],i),u.length<o[4].length&&(u=Ya(o[4].substr(o[4].length-u.length))+u),n+=u,n;if(o=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(o[1].length,o[4].length),7),l=Tf(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?QN(l[1],i)+o[2]+"/"+o[3]+Af(l[2],i):Br(" ",2*i+1+o[2].length+o[3].length));if(o=r.match(/^[#0?]+$/))return n=wc(a,0),r.length<=n.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var m=r.indexOf(".")-i,x=r.length-n.length-m;return Ya(r.substr(0,m)+n+r.substr(r.length-x))}if(o=r.match(/^00,000\.([#0]*0)$/))return i=Wk(a,o[1].length),a<0?"-"+Xs(t,r,-a):bi(sfe(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?_n(0,3-b.length):"")+b})+"."+_n(i,o[1].length);switch(r){case"###,##0.00":return Xs(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var h=bi(wc(c,0));return h!=="0"?d+h:"";case"###,###.00":return Xs(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return Xs(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+r+"|")}function nfe(t,r,a){for(var s=r.length-1;r.charCodeAt(s-1)===44;)--s;return So(t,r.substr(0,s),a/Math.pow(10,3*(r.length-s)))}function ofe(t,r,a){var s=r.replace(cR,""),n=r.length-s.length;return So(t,s,a*Math.pow(10,2*n))+Br("%",n)}function hR(t,r){var a,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+hR(t,-r);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var o=Math.floor(Math.log(r)*Math.LOG10E)%n;if(o<0&&(o+=n),a=(r/Math.pow(10,o)).toPrecision(s+1+(n+o)%n),!a.match(/[Ee]/)){var i=Math.floor(Math.log(r)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+o):a+="E+"+(i-o),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+o)%n)+"."+u.substr(o)+"E"})}else a=r.toExponential(s);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function In(t,r,a){if(t.charCodeAt(0)===40&&!r.match(xR)){var s=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?In("n",s,a):"("+In("n",s,-a)+")"}if(r.charCodeAt(r.length-1)===44)return nfe(t,r,a);if(r.indexOf("%")!==-1)return ofe(t,r,a);if(r.indexOf("E")!==-1)return hR(r,a);if(r.charCodeAt(0)===36)return"$"+In(t,r.substr(r.charAt(1)==" "?2:1),a);var n,o,i,l,c=Math.abs(a),d=a<0?"-":"";if(r.match(/^00+$/))return d+_n(c,r.length);if(r.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>r.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(uR))return rfe(o,c,d);if(r.match(/^#+0+$/))return d+_n(c,r.length-r.indexOf("0"));if(o=r.match(mR))return n=(""+a).replace(/^([^\.]+)$/,"$1."+Ya(o[1])).replace(/\.$/,"."+Ya(o[1])),n=n.replace(/\.(\d*)$/,function(b,p){return"."+p+Br("0",Ya(o[1]).length-p.length)}),r.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),o=r.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=r.match(/^#{1,3},##0(\.?)$/))return d+bi(""+c);if(o=r.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+In(t,r,-a):bi(""+a)+"."+Br("0",o[1].length);if(o=r.match(/^#,#*,#0/))return In(t,r.replace(/^#,#*,/,""),a);if(o=r.match(/^([0#]+)(\\?-([0#]+))+$/))return n=id(In(t,r.replace(/[\\-]/g,""),a)),i=0,id(id(r.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<n.length?n.charAt(i++):b==="0"?"0":""}));if(r.match(pR))return n=In(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(o=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(o[4].length,7),l=Tf(c,Math.pow(10,i)-1,!1),n=""+d,u=So("n",o[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+o[2]+"/"+o[3],u=Af(l[2],i),u.length<o[4].length&&(u=Ya(o[4].substr(o[4].length-u.length))+u),n+=u,n;if(o=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(o[1].length,o[4].length),7),l=Tf(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?QN(l[1],i)+o[2]+"/"+o[3]+Af(l[2],i):Br(" ",2*i+1+o[2].length+o[3].length));if(o=r.match(/^[#0?]+$/))return n=""+a,r.length<=n.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var m=r.indexOf(".")-i,x=r.length-n.length-m;return Ya(r.substr(0,m)+n+r.substr(r.length-x))}if(o=r.match(/^00,000\.([#0]*0)$/))return a<0?"-"+In(t,r,-a):bi(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?_n(0,3-b.length):"")+b})+"."+_n(0,o[1].length);switch(r){case"###,###":case"##,###":case"#,###":var h=bi(""+c);return h!=="0"?d+h:"";default:if(r.match(/\.[0#?]*$/))return In(t,r.slice(0,r.lastIndexOf(".")),a)+Ya(r.slice(r.lastIndexOf(".")))}throw new Error("unsupported format |"+r+"|")}function So(t,r,a){return(a|0)===a?In(t,r,a):Xs(t,r,a)}function ife(t){for(var r=[],a=!1,s=0,n=0;s<t.length;++s)switch(t.charCodeAt(s)){case 34:a=!a;break;case 95:case 42:case 92:++s;break;case 59:r[r.length]=t.substr(n,s-n),n=s+1}if(r[r.length]=t.substr(n),a===!0)throw new Error("Format |"+t+"| unterminated string ");return r}var fR=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function gR(t){for(var r=0,a="",s="";r<t.length;)switch(a=t.charAt(r)){case"G":Pf(t,r)&&(r+=6),r++;break;case'"':for(;t.charCodeAt(++r)!==34&&r<t.length;);++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(t.charAt(r+1)==="1"||t.charAt(r+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(r,3).toUpperCase()==="A/P"||t.substr(r,5).toUpperCase()==="AM/PM"||t.substr(r,5).toUpperCase()==="/")return!0;++r;break;case"[":for(s=a;t.charAt(r++)!=="]"&&r<t.length;)s+=t.charAt(r);if(s.match(fR))return!0;break;case".":case"0":case"#":for(;r<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++r))>-1||a=="\\"&&t.charAt(r+1)=="-"&&"0#".indexOf(t.charAt(r+2))>-1););break;case"?":for(;t.charAt(++r)===a;);break;case"*":++r,(t.charAt(r)==" "||t.charAt(r)=="*")&&++r;break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;r<t.length&&"0123456789".indexOf(t.charAt(++r))>-1;);break;case" ":++r;break;default:++r;break}return!1}function lfe(t,r,a,s){for(var n=[],o="",i=0,l="",c="t",d,u,m,x="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!Pf(t,i))throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"G",v:"General"},i+=7;break;case'"':for(o="";(m=t.charCodeAt(++i))!==34&&i<t.length;)o+=String.fromCharCode(m);n[n.length]={t:"t",v:o},++i;break;case"\\":var h=t.charAt(++i),b=h==="("||h===")"?h:"t";n[n.length]={t:b,v:h},++i;break;case"_":n[n.length]={t:"t",v:" "},i+=2;break;case"@":n[n.length]={t:"T",v:r},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(d==null&&(d=lp(r,a,t.charAt(i+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0||d==null&&(d=lp(r,a),d==null))return"";for(o=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)o+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=x),n[n.length]={t:l,v:o},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(d==null&&(d=lp(r,a)),t.substr(i,3).toUpperCase()==="A/P"?(d!=null&&(p.v=d.H>=12?"P":"A"),p.t="T",x="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(d!=null&&(p.v=d.H>=12?"PM":"AM"),p.t="T",i+=5,x="h"):t.substr(i,5).toUpperCase()==="/"?(d!=null&&(p.v=d.H>=12?"":""),p.t="T",i+=5,x="h"):(p.t="t",++i),d==null&&p.t==="T")return"";n[n.length]=p,c=l;break;case"[":for(o=l;t.charAt(i++)!=="]"&&i<t.length;)o+=t.charAt(i);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(fR)){if(d==null&&(d=lp(r,a),d==null))return"";n[n.length]={t:"Z",v:o.toLowerCase()},c=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",gR(t)||(n[n.length]={t:"t",v:o}));break;case".":if(d!=null){for(o=l;++i<t.length&&(l=t.charAt(i))==="0";)o+=l;n[n.length]={t:"s",v:o};break}case"0":case"#":for(o=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)o+=l;n[n.length]={t:"n",v:o};break;case"?":for(o=l;t.charAt(++i)===l;)o+=l;n[n.length]={t:l,v:o},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":n[n.length]={t:s===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)o+=t.charAt(i);n[n.length]={t:"D",v:o};break;case" ":n[n.length]={t:l,v:l},++i;break;case"$":n[n.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"t",v:l},++i;break}var f=0,v=0,g;for(i=n.length-1,c="t";i>=0;--i)switch(n[i].t){case"h":case"H":n[i].t=x,c="h",f<1&&(f=1);break;case"s":(g=n[i].v.match(/\.0+$/))&&(v=Math.max(v,g[0].length-1)),f<3&&(f=3);case"d":case"y":case"M":case"e":c=n[i].t;break;case"m":c==="s"&&(n[i].t="M",f<2&&(f=2));break;case"X":break;case"Z":f<1&&n[i].v.match(/[Hh]/)&&(f=1),f<2&&n[i].v.match(/[Mm]/)&&(f=2),f<3&&n[i].v.match(/[Ss]/)&&(f=3)}switch(f){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var y="",N;for(i=0;i<n.length;++i)switch(n[i].t){case"t":case"T":case" ":case"D":break;case"X":n[i].v="",n[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[i].v=Jhe(n[i].t.charCodeAt(0),n[i].v,d,v),n[i].t="t";break;case"n":case"?":for(N=i+1;n[N]!=null&&((l=n[N].t)==="?"||l==="D"||(l===" "||l==="t")&&n[N+1]!=null&&(n[N+1].t==="?"||n[N+1].t==="t"&&n[N+1].v==="/")||n[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[N].v==="/"||n[N].v===" "&&n[N+1]!=null&&n[N+1].t=="?"));)n[i].v+=n[N].v,n[N]={v:"",t:";"},++N;y+=n[i].v,i=N-1;break;case"G":n[i].t="t",n[i].v=C1(r,a);break}var _="",w,S;if(y.length>0){y.charCodeAt(0)==40?(w=r<0&&y.charCodeAt(0)===45?-r:r,S=So("n",y,w)):(w=r<0&&s>1?-r:r,S=So("n",y,w),w<0&&n[0]&&n[0].t=="t"&&(S=S.substr(1),n[0].v="-"+n[0].v)),N=S.length-1;var C=n.length;for(i=0;i<n.length;++i)if(n[i]!=null&&n[i].t!="t"&&n[i].v.indexOf(".")>-1){C=i;break}var k=n.length;if(C===n.length&&S.indexOf("E")===-1){for(i=n.length-1;i>=0;--i)n[i]==null||"n?".indexOf(n[i].t)===-1||(N>=n[i].v.length-1?(N-=n[i].v.length,n[i].v=S.substr(N+1,n[i].v.length)):N<0?n[i].v="":(n[i].v=S.substr(0,N+1),N=-1),n[i].t="t",k=i);N>=0&&k<n.length&&(n[k].v=S.substr(0,N+1)+n[k].v)}else if(C!==n.length&&S.indexOf("E")===-1){for(N=S.indexOf(".")-1,i=C;i>=0;--i)if(!(n[i]==null||"n?".indexOf(n[i].t)===-1)){for(u=n[i].v.indexOf(".")>-1&&i===C?n[i].v.indexOf(".")-1:n[i].v.length-1,_=n[i].v.substr(u+1);u>=0;--u)N>=0&&(n[i].v.charAt(u)==="0"||n[i].v.charAt(u)==="#")&&(_=S.charAt(N--)+_);n[i].v=_,n[i].t="t",k=i}for(N>=0&&k<n.length&&(n[k].v=S.substr(0,N+1)+n[k].v),N=S.indexOf(".")+1,i=C;i<n.length;++i)if(!(n[i]==null||"n?(".indexOf(n[i].t)===-1&&i!==C)){for(u=n[i].v.indexOf(".")>-1&&i===C?n[i].v.indexOf(".")+1:0,_=n[i].v.substr(0,u);u<n[i].v.length;++u)N<S.length&&(_+=S.charAt(N++));n[i].v=_,n[i].t="t",k=i}}}for(i=0;i<n.length;++i)n[i]!=null&&"n?".indexOf(n[i].t)>-1&&(w=s>1&&r<0&&i>0&&n[i-1].v==="-"?-r:r,n[i].v=So(n[i].t,n[i].v,w),n[i].t="t");var F="";for(i=0;i!==n.length;++i)n[i]!=null&&(F+=n[i].v);return F}var Hk=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Kk(t,r){if(r==null)return!1;var a=parseFloat(r[2]);switch(r[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function cfe(t,r){var a=ife(t),s=a.length,n=a[s-1].indexOf("@");if(s<4&&n>-1&&--s,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof r!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var o=r>0?a[0]:r<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[s,o];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var i=a[0].match(Hk),l=a[1].match(Hk);return Kk(r,i)?[s,a[0]]:Kk(r,l)?[s,a[1]]:[s,a[i!=null&&l!=null?2:1]]}return[s,o]}function Fi(t,r,a){a==null&&(a={});var s="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?s=a.dateNF:s=t;break;case"number":t==14&&a.dateNF?s=a.dateNF:s=(a.table!=null?a.table:qr)[t],s==null&&(s=a.table&&a.table[Vk[t]]||qr[Vk[t]]),s==null&&(s=Uhe[t]||"General");break}if(Pf(s,0))return C1(r,a);r instanceof Date&&(r=lR(r,a.date1904));var n=cfe(s,r);if(Pf(n[1]))return C1(r,a);if(r===!0)r="TRUE";else if(r===!1)r="FALSE";else if(r===""||r==null)return"";return lfe(n[1],r,a,n[0])}function bR(t,r){if(typeof r!="number"){r=+r||-1;for(var a=0;a<392;++a){if(qr[a]==null){r<0&&(r=a);continue}if(qr[a]==t){r=a;break}}r<0&&(r=391)}return qr[r]=t,r}function db(t){for(var r=0;r!=392;++r)t[r]!==void 0&&bR(t[r],r)}function ub(){qr=Vhe()}var vR=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dfe(t){var r=typeof t=="number"?qr[t]:t;return r=r.replace(vR,"(\\d+)"),new RegExp("^"+r+"$")}function ufe(t,r,a){var s=-1,n=-1,o=-1,i=-1,l=-1,c=-1;(r.match(vR)||[]).forEach(function(m,x){var h=parseInt(a[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":s=h;break;case"d":o=h;break;case"h":i=h;break;case"s":c=h;break;case"m":i>=0?l=h:n=h;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?d:s==-1&&n==-1&&o==-1?u:d+"T"+u}var mfe=function(){var t={};t.version="1.2.0";function r(){for(var S=0,C=new Array(256),k=0;k!=256;++k)S=k,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,C[k]=S;return typeof Int32Array<"u"?new Int32Array(C):C}var a=r();function s(S){var C=0,k=0,F=0,q=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)q[F]=S[F];for(F=0;F!=256;++F)for(k=S[F],C=256+F;C<4096;C+=256)k=q[C]=k>>>8^S[k&255];var A=[];for(F=1;F!=16;++F)A[F-1]=typeof Int32Array<"u"?q.subarray(F*256,F*256+256):q.slice(F*256,F*256+256);return A}var n=s(a),o=n[0],i=n[1],l=n[2],c=n[3],d=n[4],u=n[5],m=n[6],x=n[7],h=n[8],b=n[9],p=n[10],f=n[11],v=n[12],g=n[13],y=n[14];function N(S,C){for(var k=C^-1,F=0,q=S.length;F<q;)k=k>>>8^a[(k^S.charCodeAt(F++))&255];return~k}function _(S,C){for(var k=C^-1,F=S.length-15,q=0;q<F;)k=y[S[q++]^k&255]^g[S[q++]^k>>8&255]^v[S[q++]^k>>16&255]^f[S[q++]^k>>>24]^p[S[q++]]^b[S[q++]]^h[S[q++]]^x[S[q++]]^m[S[q++]]^u[S[q++]]^d[S[q++]]^c[S[q++]]^l[S[q++]]^i[S[q++]]^o[S[q++]]^a[S[q++]];for(F+=15;q<F;)k=k>>>8^a[(k^S[q++])&255];return~k}function w(S,C){for(var k=C^-1,F=0,q=S.length,A=0,T=0;F<q;)A=S.charCodeAt(F++),A<128?k=k>>>8^a[(k^A)&255]:A<2048?(k=k>>>8^a[(k^(192|A>>6&31))&255],k=k>>>8^a[(k^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,T=S.charCodeAt(F++)&1023,k=k>>>8^a[(k^(240|A>>8&7))&255],k=k>>>8^a[(k^(128|A>>2&63))&255],k=k>>>8^a[(k^(128|T>>6&15|(A&3)<<4))&255],k=k>>>8^a[(k^(128|T&63))&255]):(k=k>>>8^a[(k^(224|A>>12&15))&255],k=k>>>8^a[(k^(128|A>>6&63))&255],k=k>>>8^a[(k^(128|A&63))&255]);return~k}return t.table=a,t.bstr=N,t.buf=_,t.str=w,t}(),hr=function(){var r={};r.version="1.2.1";function a(X,P){for(var H=X.split("/"),Z=P.split("/"),oe=0,de=0,se=Math.min(H.length,Z.length);oe<se;++oe){if(de=H[oe].length-Z[oe].length)return de;if(H[oe]!=Z[oe])return H[oe]<Z[oe]?-1:1}return H.length-Z.length}function s(X){if(X.charAt(X.length-1)=="/")return X.slice(0,-1).indexOf("/")===-1?X:s(X.slice(0,-1));var P=X.lastIndexOf("/");return P===-1?X:X.slice(0,P+1)}function n(X){if(X.charAt(X.length-1)=="/")return n(X.slice(0,-1));var P=X.lastIndexOf("/");return P===-1?X:X.slice(P+1)}function o(X,P){typeof P=="string"&&(P=new Date(P));var H=P.getHours();H=H<<6|P.getMinutes(),H=H<<5|P.getSeconds()>>>1,X.write_shift(2,H);var Z=P.getFullYear()-1980;Z=Z<<4|P.getMonth()+1,Z=Z<<5|P.getDate(),X.write_shift(2,Z)}function i(X){var P=X.read_shift(2)&65535,H=X.read_shift(2)&65535,Z=new Date,oe=H&31;H>>>=5;var de=H&15;H>>>=4,Z.setMilliseconds(0),Z.setFullYear(H+1980),Z.setMonth(de-1),Z.setDate(oe);var se=P&31;P>>>=5;var fe=P&63;return P>>>=6,Z.setHours(P),Z.setMinutes(fe),Z.setSeconds(se<<1),Z}function l(X){As(X,0);for(var P={},H=0;X.l<=X.length-4;){var Z=X.read_shift(2),oe=X.read_shift(2),de=X.l+oe,se={};switch(Z){case 21589:H=X.read_shift(1),H&1&&(se.mtime=X.read_shift(4)),oe>5&&(H&2&&(se.atime=X.read_shift(4)),H&4&&(se.ctime=X.read_shift(4))),se.mtime&&(se.mt=new Date(se.mtime*1e3));break}X.l=de,P[Z]=se}return P}var c;function d(){return c||(c={})}function u(X,P){if(X[0]==80&&X[1]==75)return Oe(X,P);if((X[0]|32)==109&&(X[1]|32)==105)return st(X,P);if(X.length<512)throw new Error("CFB file size "+X.length+" < 512");var H=3,Z=512,oe=0,de=0,se=0,fe=0,he=0,we=[],Ee=X.slice(0,512);As(Ee,0);var Ue=m(Ee);switch(H=Ue[0],H){case 3:Z=512;break;case 4:Z=4096;break;case 0:if(Ue[1]==0)return Oe(X,P);default:throw new Error("Major Version: Expected 3 or 4 saw "+H)}Z!==512&&(Ee=X.slice(0,Z),As(Ee,28));var Je=X.slice(0,Z);x(Ee,H);var et=Ee.read_shift(4,"i");if(H===3&&et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+et);Ee.l+=4,se=Ee.read_shift(4,"i"),Ee.l+=4,Ee.chk("00100000","Mini Stream Cutoff Size: "),fe=Ee.read_shift(4,"i"),oe=Ee.read_shift(4,"i"),he=Ee.read_shift(4,"i"),de=Ee.read_shift(4,"i");for(var Ze=-1,ht=0;ht<109&&(Ze=Ee.read_shift(4,"i"),!(Ze<0));++ht)we[ht]=Ze;var Pt=h(X,Z);f(he,de,Pt,Z,we);var er=g(Pt,se,we,Z);er[se].name="!Directory",oe>0&&fe!==T&&(er[fe].name="!MiniFAT"),er[we[0]].name="!FAT",er.fat_addrs=we,er.ssz=Z;var ar={},Ur=[],qs=[],$n=[];y(se,er,Pt,Ur,oe,ar,qs,fe),b(qs,$n,Ur),Ur.shift();var Dn={FileIndex:qs,FullPaths:$n};return P&&P.raw&&(Dn.raw={header:Je,sectors:Pt}),Dn}function m(X){if(X[X.l]==80&&X[X.l+1]==75)return[0,0];X.chk(U,"Header Signature: "),X.l+=16;var P=X.read_shift(2,"u");return[X.read_shift(2,"u"),P]}function x(X,P){var H=9;switch(X.l+=2,H=X.read_shift(2)){case 9:if(P!=3)throw new Error("Sector Shift: Expected 9 saw "+H);break;case 12:if(P!=4)throw new Error("Sector Shift: Expected 12 saw "+H);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+H)}X.chk("0600","Mini Sector Shift: "),X.chk("000000000000","Reserved: ")}function h(X,P){for(var H=Math.ceil(X.length/P)-1,Z=[],oe=1;oe<H;++oe)Z[oe-1]=X.slice(oe*P,(oe+1)*P);return Z[H-1]=X.slice(H*P),Z}function b(X,P,H){for(var Z=0,oe=0,de=0,se=0,fe=0,he=H.length,we=[],Ee=[];Z<he;++Z)we[Z]=Ee[Z]=Z,P[Z]=H[Z];for(;fe<Ee.length;++fe)Z=Ee[fe],oe=X[Z].L,de=X[Z].R,se=X[Z].C,we[Z]===Z&&(oe!==-1&&we[oe]!==oe&&(we[Z]=we[oe]),de!==-1&&we[de]!==de&&(we[Z]=we[de])),se!==-1&&(we[se]=Z),oe!==-1&&Z!=we[Z]&&(we[oe]=we[Z],Ee.lastIndexOf(oe)<fe&&Ee.push(oe)),de!==-1&&Z!=we[Z]&&(we[de]=we[Z],Ee.lastIndexOf(de)<fe&&Ee.push(de));for(Z=1;Z<he;++Z)we[Z]===Z&&(de!==-1&&we[de]!==de?we[Z]=we[de]:oe!==-1&&we[oe]!==oe&&(we[Z]=we[oe]));for(Z=1;Z<he;++Z)if(X[Z].type!==0){if(fe=Z,fe!=we[fe])do fe=we[fe],P[Z]=P[fe]+"/"+P[Z];while(fe!==0&&we[fe]!==-1&&fe!=we[fe]);we[Z]=-1}for(P[0]+="/",Z=1;Z<he;++Z)X[Z].type!==2&&(P[Z]+="/")}function p(X,P,H){for(var Z=X.start,oe=X.size,de=[],se=Z;H&&oe>0&&se>=0;)de.push(P.slice(se*A,se*A+A)),oe-=A,se=cl(H,se*4);return de.length===0?qe(0):Oa(de).slice(0,X.size)}function f(X,P,H,Z,oe){var de=T;if(X===T){if(P!==0)throw new Error("DIFAT chain shorter than expected")}else if(X!==-1){var se=H[X],fe=(Z>>>2)-1;if(!se)return;for(var he=0;he<fe&&(de=cl(se,he*4))!==T;++he)oe.push(de);f(cl(se,Z-4),P-1,H,Z,oe)}}function v(X,P,H,Z,oe){var de=[],se=[];oe||(oe=[]);var fe=Z-1,he=0,we=0;for(he=P;he>=0;){oe[he]=!0,de[de.length]=he,se.push(X[he]);var Ee=H[Math.floor(he*4/Z)];if(we=he*4&fe,Z<4+we)throw new Error("FAT boundary crossed: "+he+" 4 "+Z);if(!X[Ee])break;he=cl(X[Ee],we)}return{nodes:de,data:t6([se])}}function g(X,P,H,Z){var oe=X.length,de=[],se=[],fe=[],he=[],we=Z-1,Ee=0,Ue=0,Je=0,et=0;for(Ee=0;Ee<oe;++Ee)if(fe=[],Je=Ee+P,Je>=oe&&(Je-=oe),!se[Je]){he=[];var Ze=[];for(Ue=Je;Ue>=0;){Ze[Ue]=!0,se[Ue]=!0,fe[fe.length]=Ue,he.push(X[Ue]);var ht=H[Math.floor(Ue*4/Z)];if(et=Ue*4&we,Z<4+et)throw new Error("FAT boundary crossed: "+Ue+" 4 "+Z);if(!X[ht]||(Ue=cl(X[ht],et),Ze[Ue]))break}de[Je]={nodes:fe,data:t6([he])}}return de}function y(X,P,H,Z,oe,de,se,fe){for(var he=0,we=Z.length?2:0,Ee=P[X].data,Ue=0,Je=0,et;Ue<Ee.length;Ue+=128){var Ze=Ee.slice(Ue,Ue+128);As(Ze,64),Je=Ze.read_shift(2),et=aw(Ze,0,Je-we),Z.push(et);var ht={name:et,type:Ze.read_shift(1),color:Ze.read_shift(1),L:Ze.read_shift(4,"i"),R:Ze.read_shift(4,"i"),C:Ze.read_shift(4,"i"),clsid:Ze.read_shift(16),state:Ze.read_shift(4,"i"),start:0,size:0},Pt=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);Pt!==0&&(ht.ct=N(Ze,Ze.l-8));var er=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);er!==0&&(ht.mt=N(Ze,Ze.l-8)),ht.start=Ze.read_shift(4,"i"),ht.size=Ze.read_shift(4,"i"),ht.size<0&&ht.start<0&&(ht.size=ht.type=0,ht.start=T,ht.name=""),ht.type===5?(he=ht.start,oe>0&&he!==T&&(P[he].name="!StreamData")):ht.size>=4096?(ht.storage="fat",P[ht.start]===void 0&&(P[ht.start]=v(H,ht.start,P.fat_addrs,P.ssz)),P[ht.start].name=ht.name,ht.content=P[ht.start].data.slice(0,ht.size)):(ht.storage="minifat",ht.size<0?ht.size=0:he!==T&&ht.start!==T&&P[he]&&(ht.content=p(ht,P[he].data,(P[fe]||{}).data))),ht.content&&As(ht.content,0),de[et]=ht,se.push(ht)}}function N(X,P){return new Date((Ts(X,P+4)/1e7*Math.pow(2,32)+Ts(X,P)/1e7-11644473600)*1e3)}function _(X,P){return d(),u(c.readFileSync(X),P)}function w(X,P){var H=P&&P.type;switch(H||tr&&Buffer.isBuffer(X)&&(H="buffer"),H||"base64"){case"file":return _(X,P);case"base64":return u(Nn(Bo(X)),P);case"binary":return u(Nn(X),P)}return u(X,P)}function S(X,P){var H=P||{},Z=H.root||"Root Entry";if(X.FullPaths||(X.FullPaths=[]),X.FileIndex||(X.FileIndex=[]),X.FullPaths.length!==X.FileIndex.length)throw new Error("inconsistent CFB structure");X.FullPaths.length===0&&(X.FullPaths[0]=Z+"/",X.FileIndex[0]={name:Z,type:5}),H.CLSID&&(X.FileIndex[0].clsid=H.CLSID),C(X)}function C(X){var P="Sh33tJ5";if(!hr.find(X,"/"+P)){var H=qe(4);H[0]=55,H[1]=H[3]=50,H[2]=54,X.FileIndex.push({name:P,type:2,content:H,size:4,L:69,R:69,C:69}),X.FullPaths.push(X.FullPaths[0]+P),k(X)}}function k(X,P){S(X);for(var H=!1,Z=!1,oe=X.FullPaths.length-1;oe>=0;--oe){var de=X.FileIndex[oe];switch(de.type){case 0:Z?H=!0:(X.FileIndex.pop(),X.FullPaths.pop());break;case 1:case 2:case 5:Z=!0,isNaN(de.R*de.L*de.C)&&(H=!0),de.R>-1&&de.L>-1&&de.R==de.L&&(H=!0);break;default:H=!0;break}}if(!(!H&&!P)){var se=new Date(1987,1,19),fe=0,he=Object.create?Object.create(null):{},we=[];for(oe=0;oe<X.FullPaths.length;++oe)he[X.FullPaths[oe]]=!0,X.FileIndex[oe].type!==0&&we.push([X.FullPaths[oe],X.FileIndex[oe]]);for(oe=0;oe<we.length;++oe){var Ee=s(we[oe][0]);Z=he[Ee],Z||(we.push([Ee,{name:n(Ee).replace("/",""),type:1,clsid:I,ct:se,mt:se,content:null}]),he[Ee]=!0)}for(we.sort(function(et,Ze){return a(et[0],Ze[0])}),X.FullPaths=[],X.FileIndex=[],oe=0;oe<we.length;++oe)X.FullPaths[oe]=we[oe][0],X.FileIndex[oe]=we[oe][1];for(oe=0;oe<we.length;++oe){var Ue=X.FileIndex[oe],Je=X.FullPaths[oe];if(Ue.name=n(Je).replace("/",""),Ue.L=Ue.R=Ue.C=-(Ue.color=1),Ue.size=Ue.content?Ue.content.length:0,Ue.start=0,Ue.clsid=Ue.clsid||I,oe===0)Ue.C=we.length>1?1:-1,Ue.size=0,Ue.type=5;else if(Je.slice(-1)=="/"){for(fe=oe+1;fe<we.length&&s(X.FullPaths[fe])!=Je;++fe);for(Ue.C=fe>=we.length?-1:fe,fe=oe+1;fe<we.length&&s(X.FullPaths[fe])!=s(Je);++fe);Ue.R=fe>=we.length?-1:fe,Ue.type=1}else s(X.FullPaths[oe+1]||"")==s(Je)&&(Ue.R=oe+1),Ue.type=2}}}function F(X,P){var H=P||{};if(H.fileType=="mad")return xt(X,H);switch(k(X),H.fileType){case"zip":return je(X,H)}var Z=function(et){for(var Ze=0,ht=0,Pt=0;Pt<et.FileIndex.length;++Pt){var er=et.FileIndex[Pt];if(er.content){var ar=er.content.length;ar>0&&(ar<4096?Ze+=ar+63>>6:ht+=ar+511>>9)}}for(var Ur=et.FullPaths.length+3>>2,qs=Ze+7>>3,$n=Ze+127>>7,Dn=qs+ht+Ur+$n,is=Dn+127>>7,Go=is<=109?0:Math.ceil((is-109)/127);Dn+is+Go+127>>7>is;)Go=++is<=109?0:Math.ceil((is-109)/127);var ls=[1,Go,is,$n,Ur,ht,Ze,0];return et.FileIndex[0].size=Ze<<6,ls[7]=(et.FileIndex[0].start=ls[0]+ls[1]+ls[2]+ls[3]+ls[4]+ls[5])+(ls[6]+7>>3),ls}(X),oe=qe(Z[7]<<9),de=0,se=0;{for(de=0;de<8;++de)oe.write_shift(1,K[de]);for(de=0;de<8;++de)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),de=0;de<3;++de)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,Z[2]),oe.write_shift(4,Z[0]+Z[1]+Z[2]+Z[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,Z[3]?Z[0]+Z[1]+Z[2]-1:T),oe.write_shift(4,Z[3]),oe.write_shift(-4,Z[1]?Z[0]-1:T),oe.write_shift(4,Z[1]),de=0;de<109;++de)oe.write_shift(-4,de<Z[2]?Z[1]+de:-1)}if(Z[1])for(se=0;se<Z[1];++se){for(;de<236+se*127;++de)oe.write_shift(-4,de<Z[2]?Z[1]+de:-1);oe.write_shift(-4,se===Z[1]-1?T:se+1)}var fe=function(et){for(se+=et;de<se-1;++de)oe.write_shift(-4,de+1);et&&(++de,oe.write_shift(-4,T))};for(se=de=0,se+=Z[1];de<se;++de)oe.write_shift(-4,Y.DIFSECT);for(se+=Z[2];de<se;++de)oe.write_shift(-4,Y.FATSECT);fe(Z[3]),fe(Z[4]);for(var he=0,we=0,Ee=X.FileIndex[0];he<X.FileIndex.length;++he)Ee=X.FileIndex[he],Ee.content&&(we=Ee.content.length,!(we<4096)&&(Ee.start=se,fe(we+511>>9)));for(fe(Z[6]+7>>3);oe.l&511;)oe.write_shift(-4,Y.ENDOFCHAIN);for(se=de=0,he=0;he<X.FileIndex.length;++he)Ee=X.FileIndex[he],Ee.content&&(we=Ee.content.length,!(!we||we>=4096)&&(Ee.start=se,fe(we+63>>6)));for(;oe.l&511;)oe.write_shift(-4,Y.ENDOFCHAIN);for(de=0;de<Z[4]<<2;++de){var Ue=X.FullPaths[de];if(!Ue||Ue.length===0){for(he=0;he<17;++he)oe.write_shift(4,0);for(he=0;he<3;++he)oe.write_shift(4,-1);for(he=0;he<12;++he)oe.write_shift(4,0);continue}Ee=X.FileIndex[de],de===0&&(Ee.start=Ee.size?Ee.start-1:T);var Je=de===0&&H.root||Ee.name;if(we=2*(Je.length+1),oe.write_shift(64,Je,"utf16le"),oe.write_shift(2,we),oe.write_shift(1,Ee.type),oe.write_shift(1,Ee.color),oe.write_shift(-4,Ee.L),oe.write_shift(-4,Ee.R),oe.write_shift(-4,Ee.C),Ee.clsid)oe.write_shift(16,Ee.clsid,"hex");else for(he=0;he<4;++he)oe.write_shift(4,0);oe.write_shift(4,Ee.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,Ee.start),oe.write_shift(4,Ee.size),oe.write_shift(4,0)}for(de=1;de<X.FileIndex.length;++de)if(Ee=X.FileIndex[de],Ee.size>=4096)if(oe.l=Ee.start+1<<9,tr&&Buffer.isBuffer(Ee.content))Ee.content.copy(oe,oe.l,0,Ee.size),oe.l+=Ee.size+511&-512;else{for(he=0;he<Ee.size;++he)oe.write_shift(1,Ee.content[he]);for(;he&511;++he)oe.write_shift(1,0)}for(de=1;de<X.FileIndex.length;++de)if(Ee=X.FileIndex[de],Ee.size>0&&Ee.size<4096)if(tr&&Buffer.isBuffer(Ee.content))Ee.content.copy(oe,oe.l,0,Ee.size),oe.l+=Ee.size+63&-64;else{for(he=0;he<Ee.size;++he)oe.write_shift(1,Ee.content[he]);for(;he&63;++he)oe.write_shift(1,0)}if(tr)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function q(X,P){var H=X.FullPaths.map(function(he){return he.toUpperCase()}),Z=H.map(function(he){var we=he.split("/");return we[we.length-(he.slice(-1)=="/"?2:1)]}),oe=!1;P.charCodeAt(0)===47?(oe=!0,P=H[0].slice(0,-1)+P):oe=P.indexOf("/")!==-1;var de=P.toUpperCase(),se=oe===!0?H.indexOf(de):Z.indexOf(de);if(se!==-1)return X.FileIndex[se];var fe=!de.match(ip);for(de=de.replace(ym,""),fe&&(de=de.replace(ip,"!")),se=0;se<H.length;++se)if((fe?H[se].replace(ip,"!"):H[se]).replace(ym,"")==de||(fe?Z[se].replace(ip,"!"):Z[se]).replace(ym,"")==de)return X.FileIndex[se];return null}var A=64,T=-2,U="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],I="00000000000000000000000000000000",Y={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:T,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:I,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function D(X,P,H){d();var Z=F(X,H);c.writeFileSync(P,Z)}function W(X){for(var P=new Array(X.length),H=0;H<X.length;++H)P[H]=String.fromCharCode(X[H]);return P.join("")}function R(X,P){var H=F(X,P);switch(P&&P.type||"buffer"){case"file":return d(),c.writeFileSync(P.filename,H),H;case"binary":return typeof H=="string"?H:W(H);case"base64":return $x(typeof H=="string"?H:W(H));case"buffer":if(tr)return Buffer.isBuffer(H)?H:Ko(H);case"array":return typeof H=="string"?Nn(H):H}return H}var B;function O(X){try{var P=X.InflateRaw,H=new P;if(H._processChunk(new Uint8Array([3,0]),H._finishFlushFlag),H.bytesRead)B=X;else throw new Error("zlib does not expose bytesRead")}catch(Z){console.error("cannot use native zlib: "+(Z.message||Z))}}function L(X,P){if(!B)return te(X,P);var H=B.InflateRaw,Z=new H,oe=Z._processChunk(X.slice(X.l),Z._finishFlushFlag);return X.l+=Z.bytesRead,oe}function E(X){return B?B.deflateRawSync(X):ge(X)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Q(X){var P=(X<<1|X<<11)&139536|(X<<5|X<<15)&558144;return(P>>16|P>>8|P)&255}for(var ne=typeof Uint8Array<"u",re=ne?new Uint8Array(256):[],ae=0;ae<256;++ae)re[ae]=Q(ae);function ie(X,P){var H=re[X&255];return P<=8?H>>>8-P:(H=H<<8|re[X>>8&255],P<=16?H>>>16-P:(H=H<<8|re[X>>16&255],H>>>24-P))}function ve(X,P){var H=P&7,Z=P>>>3;return(X[Z]|(H<=6?0:X[Z+1]<<8))>>>H&3}function _e(X,P){var H=P&7,Z=P>>>3;return(X[Z]|(H<=5?0:X[Z+1]<<8))>>>H&7}function me(X,P){var H=P&7,Z=P>>>3;return(X[Z]|(H<=4?0:X[Z+1]<<8))>>>H&15}function Se(X,P){var H=P&7,Z=P>>>3;return(X[Z]|(H<=3?0:X[Z+1]<<8))>>>H&31}function Ne(X,P){var H=P&7,Z=P>>>3;return(X[Z]|(H<=1?0:X[Z+1]<<8))>>>H&127}function ot(X,P,H){var Z=P&7,oe=P>>>3,de=(1<<H)-1,se=X[oe]>>>Z;return H<8-Z||(se|=X[oe+1]<<8-Z,H<16-Z)||(se|=X[oe+2]<<16-Z,H<24-Z)||(se|=X[oe+3]<<24-Z),se&de}function Ke(X,P,H){var Z=P&7,oe=P>>>3;return Z<=5?X[oe]|=(H&7)<<Z:(X[oe]|=H<<Z&255,X[oe+1]=(H&7)>>8-Z),P+3}function lt(X,P,H){var Z=P&7,oe=P>>>3;return H=(H&1)<<Z,X[oe]|=H,P+1}function ke(X,P,H){var Z=P&7,oe=P>>>3;return H<<=Z,X[oe]|=H&255,H>>>=8,X[oe+1]=H,P+8}function Ie(X,P,H){var Z=P&7,oe=P>>>3;return H<<=Z,X[oe]|=H&255,H>>>=8,X[oe+1]=H&255,X[oe+2]=H>>>8,P+16}function Ae(X,P){var H=X.length,Z=2*H>P?2*H:P+5,oe=0;if(H>=P)return X;if(tr){var de=Bk(Z);if(X.copy)X.copy(de);else for(;oe<X.length;++oe)de[oe]=X[oe];return de}else if(ne){var se=new Uint8Array(Z);if(se.set)se.set(X);else for(;oe<H;++oe)se[oe]=X[oe];return se}return X.length=Z,X}function it(X){for(var P=new Array(X),H=0;H<X;++H)P[H]=0;return P}function gt(X,P,H){var Z=1,oe=0,de=0,se=0,fe=0,he=X.length,we=ne?new Uint16Array(32):it(32);for(de=0;de<32;++de)we[de]=0;for(de=he;de<H;++de)X[de]=0;he=X.length;var Ee=ne?new Uint16Array(he):it(he);for(de=0;de<he;++de)we[oe=X[de]]++,Z<oe&&(Z=oe),Ee[de]=0;for(we[0]=0,de=1;de<=Z;++de)we[de+16]=fe=fe+we[de-1]<<1;for(de=0;de<he;++de)fe=X[de],fe!=0&&(Ee[de]=we[fe+16]++);var Ue=0;for(de=0;de<he;++de)if(Ue=X[de],Ue!=0)for(fe=ie(Ee[de],Z)>>Z-Ue,se=(1<<Z+4-Ue)-1;se>=0;--se)P[fe|se<<Ue]=Ue&15|de<<4;return Z}var Dt=ne?new Uint16Array(512):it(512),Ct=ne?new Uint16Array(32):it(32);if(!ne){for(var Lt=0;Lt<512;++Lt)Dt[Lt]=0;for(Lt=0;Lt<32;++Lt)Ct[Lt]=0}(function(){for(var X=[],P=0;P<32;P++)X.push(5);gt(X,Ct,32);var H=[];for(P=0;P<=143;P++)H.push(8);for(;P<=255;P++)H.push(9);for(;P<=279;P++)H.push(7);for(;P<=287;P++)H.push(8);gt(H,Dt,288)})();var $t=function(){for(var P=ne?new Uint8Array(32768):[],H=0,Z=0;H<le.length-1;++H)for(;Z<le[H+1];++Z)P[Z]=H;for(;Z<32768;++Z)P[Z]=29;var oe=ne?new Uint8Array(259):[];for(H=0,Z=0;H<z.length-1;++H)for(;Z<z[H+1];++Z)oe[Z]=H;function de(fe,he){for(var we=0;we<fe.length;){var Ee=Math.min(65535,fe.length-we),Ue=we+Ee==fe.length;for(he.write_shift(1,+Ue),he.write_shift(2,Ee),he.write_shift(2,~Ee&65535);Ee-- >0;)he[he.l++]=fe[we++]}return he.l}function se(fe,he){for(var we=0,Ee=0,Ue=ne?new Uint16Array(32768):[];Ee<fe.length;){var Je=Math.min(65535,fe.length-Ee);if(Je<10){for(we=Ke(he,we,+(Ee+Je==fe.length)),we&7&&(we+=8-(we&7)),he.l=we/8|0,he.write_shift(2,Je),he.write_shift(2,~Je&65535);Je-- >0;)he[he.l++]=fe[Ee++];we=he.l*8;continue}we=Ke(he,we,+(Ee+Je==fe.length)+2);for(var et=0;Je-- >0;){var Ze=fe[Ee];et=(et<<5^Ze)&32767;var ht=-1,Pt=0;if((ht=Ue[et])&&(ht|=Ee&-32768,ht>Ee&&(ht-=32768),ht<Ee))for(;fe[ht+Pt]==fe[Ee+Pt]&&Pt<250;)++Pt;if(Pt>2){Ze=oe[Pt],Ze<=22?we=ke(he,we,re[Ze+1]>>1)-1:(ke(he,we,3),we+=5,ke(he,we,re[Ze-23]>>5),we+=3);var er=Ze<8?0:Ze-4>>2;er>0&&(Ie(he,we,Pt-z[Ze]),we+=er),Ze=P[Ee-ht],we=ke(he,we,re[Ze]>>3),we-=3;var ar=Ze<4?0:Ze-2>>1;ar>0&&(Ie(he,we,Ee-ht-le[Ze]),we+=ar);for(var Ur=0;Ur<Pt;++Ur)Ue[et]=Ee&32767,et=(et<<5^fe[Ee])&32767,++Ee;Je-=Pt-1}else Ze<=143?Ze=Ze+48:we=lt(he,we,1),we=ke(he,we,re[Ze]),Ue[et]=Ee&32767,++Ee}we=ke(he,we,0)-1}return he.l=(we+7)/8|0,he.l}return function(he,we){return he.length<8?de(he,we):se(he,we)}}();function ge(X){var P=qe(50+Math.floor(X.length*1.1)),H=$t(X,P);return P.slice(0,H)}var De=ne?new Uint16Array(32768):it(32768),Le=ne?new Uint16Array(32768):it(32768),ct=ne?new Uint16Array(128):it(128),tt=1,xe=1;function Fe(X,P){var H=Se(X,P)+257;P+=5;var Z=Se(X,P)+1;P+=5;var oe=me(X,P)+4;P+=4;for(var de=0,se=ne?new Uint8Array(19):it(19),fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],he=1,we=ne?new Uint8Array(8):it(8),Ee=ne?new Uint8Array(8):it(8),Ue=se.length,Je=0;Je<oe;++Je)se[M[Je]]=de=_e(X,P),he<de&&(he=de),we[de]++,P+=3;var et=0;for(we[0]=0,Je=1;Je<=he;++Je)Ee[Je]=et=et+we[Je-1]<<1;for(Je=0;Je<Ue;++Je)(et=se[Je])!=0&&(fe[Je]=Ee[et]++);var Ze=0;for(Je=0;Je<Ue;++Je)if(Ze=se[Je],Ze!=0){et=re[fe[Je]]>>8-Ze;for(var ht=(1<<7-Ze)-1;ht>=0;--ht)ct[et|ht<<Ze]=Ze&7|Je<<3}var Pt=[];for(he=1;Pt.length<H+Z;)switch(et=ct[Ne(X,P)],P+=et&7,et>>>=3){case 16:for(de=3+ve(X,P),P+=2,et=Pt[Pt.length-1];de-- >0;)Pt.push(et);break;case 17:for(de=3+_e(X,P),P+=3;de-- >0;)Pt.push(0);break;case 18:for(de=11+Ne(X,P),P+=7;de-- >0;)Pt.push(0);break;default:Pt.push(et),he<et&&(he=et);break}var er=Pt.slice(0,H),ar=Pt.slice(H);for(Je=H;Je<286;++Je)er[Je]=0;for(Je=Z;Je<30;++Je)ar[Je]=0;return tt=gt(er,De,286),xe=gt(ar,Le,30),P}function Ye(X,P){if(X[0]==3&&!(X[1]&3))return[Ql(P),2];for(var H=0,Z=0,oe=Bk(P||1<<18),de=0,se=oe.length>>>0,fe=0,he=0;!(Z&1);){if(Z=_e(X,H),H+=3,Z>>>1)Z>>1==1?(fe=9,he=5):(H=Fe(X,H),fe=tt,he=xe);else{H&7&&(H+=8-(H&7));var we=X[H>>>3]|X[(H>>>3)+1]<<8;if(H+=32,we>0)for(!P&&se<de+we&&(oe=Ae(oe,de+we),se=oe.length);we-- >0;)oe[de++]=X[H>>>3],H+=8;continue}for(;;){!P&&se<de+32767&&(oe=Ae(oe,de+32767),se=oe.length);var Ee=ot(X,H,fe),Ue=Z>>>1==1?Dt[Ee]:De[Ee];if(H+=Ue&15,Ue>>>=4,!(Ue>>>8&255))oe[de++]=Ue;else{if(Ue==256)break;Ue-=257;var Je=Ue<8?0:Ue-4>>2;Je>5&&(Je=0);var et=de+z[Ue];Je>0&&(et+=ot(X,H,Je),H+=Je),Ee=ot(X,H,he),Ue=Z>>>1==1?Ct[Ee]:Le[Ee],H+=Ue&15,Ue>>>=4;var Ze=Ue<4?0:Ue-2>>1,ht=le[Ue];for(Ze>0&&(ht+=ot(X,H,Ze),H+=Ze),!P&&se<et&&(oe=Ae(oe,et+100),se=oe.length);de<et;)oe[de]=oe[de-ht],++de}}}return P?[oe,H+7>>>3]:[oe.slice(0,de),H+7>>>3]}function te(X,P){var H=X.slice(X.l||0),Z=Ye(H,P);return X.l+=Z[1],Z[0]}function ue(X,P){if(X)typeof console<"u"&&console.error(P);else throw new Error(P)}function Oe(X,P){var H=X;As(H,0);var Z=[],oe=[],de={FileIndex:Z,FullPaths:oe};S(de,{root:P.root});for(var se=H.length-4;(H[se]!=80||H[se+1]!=75||H[se+2]!=5||H[se+3]!=6)&&se>=0;)--se;H.l=se+4,H.l+=4;var fe=H.read_shift(2);H.l+=6;var he=H.read_shift(4);for(H.l=he,se=0;se<fe;++se){H.l+=20;var we=H.read_shift(4),Ee=H.read_shift(4),Ue=H.read_shift(2),Je=H.read_shift(2),et=H.read_shift(2);H.l+=8;var Ze=H.read_shift(4),ht=l(H.slice(H.l+Ue,H.l+Ue+Je));H.l+=Ue+Je+et;var Pt=H.l;H.l=Ze+4,ce(H,we,Ee,de,ht),H.l=Pt}return de}function ce(X,P,H,Z,oe){X.l+=2;var de=X.read_shift(2),se=X.read_shift(2),fe=i(X);if(de&8257)throw new Error("Unsupported ZIP encryption");for(var he=X.read_shift(4),we=X.read_shift(4),Ee=X.read_shift(4),Ue=X.read_shift(2),Je=X.read_shift(2),et="",Ze=0;Ze<Ue;++Ze)et+=String.fromCharCode(X[X.l++]);if(Je){var ht=l(X.slice(X.l,X.l+Je));(ht[21589]||{}).mt&&(fe=ht[21589].mt),((oe||{})[21589]||{}).mt&&(fe=oe[21589].mt)}X.l+=Je;var Pt=X.slice(X.l,X.l+we);switch(se){case 8:Pt=L(X,Ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+se)}var er=!1;de&8&&(he=X.read_shift(4),he==134695760&&(he=X.read_shift(4),er=!0),we=X.read_shift(4),Ee=X.read_shift(4)),we!=P&&ue(er,"Bad compressed size: "+P+" != "+we),Ee!=H&&ue(er,"Bad uncompressed size: "+H+" != "+Ee),Nt(Z,et,Pt,{unsafe:!0,mt:fe})}function je(X,P){var H=P||{},Z=[],oe=[],de=qe(1),se=H.compression?8:0,fe=0,he=0,we=0,Ee=0,Ue=0,Je=X.FullPaths[0],et=Je,Ze=X.FileIndex[0],ht=[],Pt=0;for(he=1;he<X.FullPaths.length;++he)if(et=X.FullPaths[he].slice(Je.length),Ze=X.FileIndex[he],!(!Ze.size||!Ze.content||et=="Sh33tJ5")){var er=Ee,ar=qe(et.length);for(we=0;we<et.length;++we)ar.write_shift(1,et.charCodeAt(we)&127);ar=ar.slice(0,ar.l),ht[Ue]=mfe.buf(Ze.content,0);var Ur=Ze.content;se==8&&(Ur=E(Ur)),de=qe(30),de.write_shift(4,67324752),de.write_shift(2,20),de.write_shift(2,fe),de.write_shift(2,se),Ze.mt?o(de,Ze.mt):de.write_shift(4,0),de.write_shift(-4,ht[Ue]),de.write_shift(4,Ur.length),de.write_shift(4,Ze.content.length),de.write_shift(2,ar.length),de.write_shift(2,0),Ee+=de.length,Z.push(de),Ee+=ar.length,Z.push(ar),Ee+=Ur.length,Z.push(Ur),de=qe(46),de.write_shift(4,33639248),de.write_shift(2,0),de.write_shift(2,20),de.write_shift(2,fe),de.write_shift(2,se),de.write_shift(4,0),de.write_shift(-4,ht[Ue]),de.write_shift(4,Ur.length),de.write_shift(4,Ze.content.length),de.write_shift(2,ar.length),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(4,0),de.write_shift(4,er),Pt+=de.l,oe.push(de),Pt+=ar.length,oe.push(ar),++Ue}return de=qe(22),de.write_shift(4,101010256),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,Ue),de.write_shift(2,Ue),de.write_shift(4,Pt),de.write_shift(4,Ee),de.write_shift(2,0),Oa([Oa(Z),Oa(oe),de])}var Re={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function He(X,P){if(X.ctype)return X.ctype;var H=X.name||"",Z=H.match(/\.([^\.]+)$/);return Z&&Re[Z[1]]||P&&(Z=(H=P).match(/[\.\\]([^\.\\])+$/),Z&&Re[Z[1]])?Re[Z[1]]:"application/octet-stream"}function J(X){for(var P=$x(X),H=[],Z=0;Z<P.length;Z+=76)H.push(P.slice(Z,Z+76));return H.join(`\r
`)+`\r
`}function ye(X){var P=X.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(we){var Ee=we.charCodeAt(0).toString(16).toUpperCase();return"="+(Ee.length==1?"0"+Ee:Ee)});P=P.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),P.charAt(0)==`
`&&(P="=0D"+P.slice(1)),P=P.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var H=[],Z=P.split(`\r
`),oe=0;oe<Z.length;++oe){var de=Z[oe];if(de.length==0){H.push("");continue}for(var se=0;se<de.length;){var fe=76,he=de.slice(se,se+fe);he.charAt(fe-1)=="="?fe--:he.charAt(fe-2)=="="?fe-=2:he.charAt(fe-3)=="="&&(fe-=3),he=de.slice(se,se+fe),se+=fe,se<de.length&&(he+="="),H.push(he)}}return H.join(`\r
`)}function Pe(X){for(var P=[],H=0;H<X.length;++H){for(var Z=X[H];H<=X.length&&Z.charAt(Z.length-1)=="=";)Z=Z.slice(0,Z.length-1)+X[++H];P.push(Z)}for(var oe=0;oe<P.length;++oe)P[oe]=P[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(de){return String.fromCharCode(parseInt(de.slice(1),16))});return Nn(P.join(`\r
`))}function We(X,P,H){for(var Z="",oe="",de="",se,fe=0;fe<10;++fe){var he=P[fe];if(!he||he.match(/^\s*$/))break;var we=he.match(/^(.*?):\s*([^\s].*)$/);if(we)switch(we[1].toLowerCase()){case"content-location":Z=we[2].trim();break;case"content-type":de=we[2].trim();break;case"content-transfer-encoding":oe=we[2].trim();break}}switch(++fe,oe.toLowerCase()){case"base64":se=Nn(Bo(P.slice(fe).join("")));break;case"quoted-printable":se=Pe(P.slice(fe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var Ee=Nt(X,Z.slice(H.length),se,{unsafe:!0});de&&(Ee.ctype=de)}function st(X,P){if(W(X.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var H=P&&P.root||"",Z=(tr&&Buffer.isBuffer(X)?X.toString("binary"):W(X)).split(`\r
`),oe=0,de="";for(oe=0;oe<Z.length;++oe)if(de=Z[oe],!!/^Content-Location:/i.test(de)&&(de=de.slice(de.indexOf("file")),H||(H=de.slice(0,de.lastIndexOf("/")+1)),de.slice(0,H.length)!=H))for(;H.length>0&&(H=H.slice(0,H.length-1),H=H.slice(0,H.lastIndexOf("/")+1),de.slice(0,H.length)!=H););var se=(Z[1]||"").match(/boundary="(.*?)"/);if(!se)throw new Error("MAD cannot find boundary");var fe="--"+(se[1]||""),he=[],we=[],Ee={FileIndex:he,FullPaths:we};S(Ee);var Ue,Je=0;for(oe=0;oe<Z.length;++oe){var et=Z[oe];et!==fe&&et!==fe+"--"||(Je++&&We(Ee,Z.slice(Ue,oe),H),Ue=oe)}return Ee}function xt(X,P){var H=P||{},Z=H.boundary||"SheetJS";Z="------="+Z;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Z.slice(2)+'"',"","",""],de=X.FullPaths[0],se=de,fe=X.FileIndex[0],he=1;he<X.FullPaths.length;++he)if(se=X.FullPaths[he].slice(de.length),fe=X.FileIndex[he],!(!fe.size||!fe.content||se=="Sh33tJ5")){se=se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var we=fe.content,Ee=tr&&Buffer.isBuffer(we)?we.toString("binary"):W(we),Ue=0,Je=Math.min(1024,Ee.length),et=0,Ze=0;Ze<=Je;++Ze)(et=Ee.charCodeAt(Ze))>=32&&et<128&&++Ue;var ht=Ue>=Je*4/5;oe.push(Z),oe.push("Content-Location: "+(H.root||"file:///C:/SheetJS/")+se),oe.push("Content-Transfer-Encoding: "+(ht?"quoted-printable":"base64")),oe.push("Content-Type: "+He(fe,se)),oe.push(""),oe.push(ht?ye(Ee):J(Ee))}return oe.push(Z+`--\r
`),oe.join(`\r
`)}function pt(X){var P={};return S(P,X),P}function Nt(X,P,H,Z){var oe=Z&&Z.unsafe;oe||S(X);var de=!oe&&hr.find(X,P);if(!de){var se=X.FullPaths[0];P.slice(0,se.length)==se?se=P:(se.slice(-1)!="/"&&(se+="/"),se=(se+P).replace("//","/")),de={name:n(P),type:2},X.FileIndex.push(de),X.FullPaths.push(se),oe||hr.utils.cfb_gc(X)}return de.content=H,de.size=H?H.length:0,Z&&(Z.CLSID&&(de.clsid=Z.CLSID),Z.mt&&(de.mt=Z.mt),Z.ct&&(de.ct=Z.ct)),de}function At(X,P){S(X);var H=hr.find(X,P);if(H){for(var Z=0;Z<X.FileIndex.length;++Z)if(X.FileIndex[Z]==H)return X.FileIndex.splice(Z,1),X.FullPaths.splice(Z,1),!0}return!1}function Mt(X,P,H){S(X);var Z=hr.find(X,P);if(Z){for(var oe=0;oe<X.FileIndex.length;++oe)if(X.FileIndex[oe]==Z)return X.FileIndex[oe].name=n(H),X.FullPaths[oe]=H,!0}return!1}function ut(X){k(X,!0)}return r.find=q,r.read=w,r.parse=u,r.write=R,r.writeFile=D,r.utils={cfb_new:pt,cfb_add:Nt,cfb_del:At,cfb_mov:Mt,cfb_gc:ut,ReadShift:Nm,CheckField:MR,prep_blob:As,bconcat:Oa,use_zlib:O,_deflateRaw:ge,_inflateRaw:te,consts:Y},r}();function xfe(t){return typeof t=="string"?cb(t):Array.isArray(t)?Lhe(t):t}function c0(t,r,a){if(typeof Deno<"u"){if(a&&typeof r=="string")switch(a){case"utf8":r=new TextEncoder(a).encode(r);break;case"binary":r=cb(r);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,r)}var s=a=="utf8"?Mx(r):r;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,t);if(typeof Blob<"u"){var n=new Blob([xfe(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,t);if(typeof saveAs<"u")return saveAs(n,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=o,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(r)&&(r=l0(r)),l.write(r),l.close(),r}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Ma(t){for(var r=Object.keys(t),a=[],s=0;s<r.length;++s)Object.prototype.hasOwnProperty.call(t,r[s])&&a.push(r[s]);return a}function Gk(t,r){for(var a=[],s=Ma(t),n=0;n!==s.length;++n)a[t[s[n]][r]]==null&&(a[t[s[n]][r]]=s[n]);return a}function ZN(t){for(var r=[],a=Ma(t),s=0;s!==a.length;++s)r[t[a[s]]]=a[s];return r}function mb(t){for(var r=[],a=Ma(t),s=0;s!==a.length;++s)r[t[a[s]]]=parseInt(a[s],10);return r}function pfe(t){for(var r=[],a=Ma(t),s=0;s!==a.length;++s)r[t[a[s]]]==null&&(r[t[a[s]]]=[]),r[t[a[s]]].push(a[s]);return r}var Of=new Date(1899,11,30,0,0,0);function ys(t,r){var a=t.getTime(),s=Of.getTime()+(t.getTimezoneOffset()-Of.getTimezoneOffset())*6e4;return(a-s)/(24*60*60*1e3)}var yR=new Date,hfe=Of.getTime()+(yR.getTimezoneOffset()-Of.getTimezoneOffset())*6e4,Xk=yR.getTimezoneOffset();function jR(t){var r=new Date;return r.setTime(t*24*60*60*1e3+hfe),r.getTimezoneOffset()!==Xk&&r.setTime(r.getTime()+(r.getTimezoneOffset()-Xk)*6e4),r}var Yk=new Date("2017-02-19T19:06:09.000Z"),NR=isNaN(Yk.getFullYear())?new Date("2/19/17"):Yk,ffe=NR.getFullYear()==2017;function ss(t,r){var a=new Date(t);if(ffe)return r>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):r<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(NR.getFullYear()==1917&&!isNaN(a.getFullYear())){var s=a.getFullYear();return t.indexOf(""+s)>-1||a.setFullYear(a.getFullYear()+100),a}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function xb(t,r){if(tr&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(o){return a[o]||o})}catch{}for(var s=[],n=0;n!=t.length;++n)s.push(String.fromCharCode(t[n]));return s.join("")}function js(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=js(t[a]));return r}function Br(t,r){for(var a="";a.length<r;)a+=t;return a}function Co(t){var r=Number(t);if(!isNaN(r))return isFinite(r)?r:NaN;if(!/\d/.test(t))return r;var a=1,s=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(r=Number(s))||(s=s.replace(/[(](.*)[)]/,function(n,o){return a=-a,o}),!isNaN(r=Number(s)))?r/a:r}var gfe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dx(t){var r=new Date(t),a=new Date(NaN),s=r.getYear(),n=r.getMonth(),o=r.getDate();if(isNaN(o))return a;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&gfe.indexOf(i)==-1)return a}else if(i.match(/[a-z]/))return a;return s<0||s>8099?a:(n>0||o>1)&&s!=101?r:t.match(/[^-0-9:,\/\\]/)?a:r}function zt(t,r,a){if(t.FullPaths){if(typeof a=="string"){var s;return tr?s=Ko(a):s=Bhe(a),hr.utils.cfb_add(t,r,s)}hr.utils.cfb_add(t,r,a)}else t.file(r,a)}function ew(){return hr.utils.cfb_new()}var oa=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,bfe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},tw=ZN(bfe),rw=/[&<>'"]/g,vfe=/[\u0000-\u0008\u000b-\u001f]/g;function cr(t){var r=t+"";return r.replace(rw,function(a){return tw[a]}).replace(vfe,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Qk(t){return cr(t).replace(/ /g,"_x0020_")}var wR=/[\u0000-\u001f]/g;function yfe(t){var r=t+"";return r.replace(rw,function(a){return tw[a]}).replace(/\n/g,"<br/>").replace(wR,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function jfe(t){var r=t+"";return r.replace(rw,function(a){return tw[a]}).replace(wR,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function Nfe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function wfe(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ev(t){for(var r="",a=0,s=0,n=0,o=0,i=0,l=0;a<t.length;){if(s=t.charCodeAt(a++),s<128){r+=String.fromCharCode(s);continue}if(n=t.charCodeAt(a++),s>191&&s<224){i=(s&31)<<6,i|=n&63,r+=String.fromCharCode(i);continue}if(o=t.charCodeAt(a++),s<240){r+=String.fromCharCode((s&15)<<12|(n&63)<<6|o&63);continue}i=t.charCodeAt(a++),l=((s&7)<<18|(n&63)<<12|(o&63)<<6|i&63)-65536,r+=String.fromCharCode(55296+(l>>>10&1023)),r+=String.fromCharCode(56320+(l&1023))}return r}function Jk(t){var r=Ql(2*t.length),a,s,n=1,o=0,i=0,l;for(s=0;s<t.length;s+=n)n=1,(l=t.charCodeAt(s))<128?a=l:l<224?(a=(l&31)*64+(t.charCodeAt(s+1)&63),n=2):l<240?(a=(l&15)*4096+(t.charCodeAt(s+1)&63)*64+(t.charCodeAt(s+2)&63),n=3):(n=4,a=(l&7)*262144+(t.charCodeAt(s+1)&63)*4096+(t.charCodeAt(s+2)&63)*64+(t.charCodeAt(s+3)&63),a-=65536,i=55296+(a>>>10&1023),a=56320+(a&1023)),i!==0&&(r[o++]=i&255,r[o++]=i>>>8,i=0),r[o++]=a%256,r[o++]=a>>>8;return r.slice(0,o).toString("ucs2")}function Zk(t){return Ko(t,"binary").toString("utf8")}var cp="foo bar baz",jm=tr&&(Zk(cp)==Ev(cp)&&Zk||Jk(cp)==Ev(cp)&&Jk)||Ev,Mx=tr?function(t){return Ko(t,"utf8").toString("binary")}:function(t){for(var r=[],a=0,s=0,n=0;a<t.length;)switch(s=t.charCodeAt(a++),!0){case s<128:r.push(String.fromCharCode(s));break;case s<2048:r.push(String.fromCharCode(192+(s>>6))),r.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,n=t.charCodeAt(a++)-56320+(s<<10),r.push(String.fromCharCode(240+(n>>18&7))),r.push(String.fromCharCode(144+(n>>12&63))),r.push(String.fromCharCode(128+(n>>6&63))),r.push(String.fromCharCode(128+(n&63)));break;default:r.push(String.fromCharCode(224+(s>>12))),r.push(String.fromCharCode(128+(s>>6&63))),r.push(String.fromCharCode(128+(s&63)))}return r.join("")},_fe=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(r){return[new RegExp("&"+r[0]+";","ig"),r[1]]});return function(a){for(var s=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)s=s.replace(t[n][0],t[n][1]);return s}}(),_R=/(^\s|\s$|\n)/;function Fa(t,r){return"<"+t+(r.match(_R)?' xml:space="preserve"':"")+">"+r+"</"+t+">"}function Ix(t){return Ma(t).map(function(r){return" "+r+'="'+t[r]+'"'}).join("")}function dt(t,r,a){return"<"+t+(a!=null?Ix(a):"")+(r!=null?(r.match(_R)?' xml:space="preserve"':"")+">"+r+"</"+t:"/")+">"}function k1(t,r){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(r)throw a}return""}function Sfe(t,r){switch(typeof t){case"string":var a=dt("vt:lpwstr",cr(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return dt((t|0)==t?"vt:i4":"vt:r8",cr(String(t)));case"boolean":return dt("vt:bool",t?"true":"false")}if(t instanceof Date)return dt("vt:filetime",k1(t));throw new Error("Unable to serialize "+t)}var Na={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},yu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ps={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Cfe(t,r){for(var a=1-2*(t[r+7]>>>7),s=((t[r+7]&127)<<4)+(t[r+6]>>>4&15),n=t[r+6]&15,o=5;o>=0;--o)n=n*256+t[r+o];return s==2047?n==0?a*(1/0):NaN:(s==0?s=-1022:(s-=1023,n+=Math.pow(2,52)),a*Math.pow(2,s-52)*n)}function kfe(t,r,a){var s=(r<0||1/r==-1/0?1:0)<<7,n=0,o=0,i=s?-r:r;isFinite(i)?i==0?n=o=0:(n=Math.floor(Math.log(i)/Math.LN2),o=i*Math.pow(2,52-n),n<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?n=-1022:(o-=Math.pow(2,52),n+=1023)):(n=2047,o=isNaN(r)?26985:0);for(var l=0;l<=5;++l,o/=256)t[a+l]=o&255;t[a+6]=(n&15)<<4|o&15,t[a+7]=n>>4|s}var e6=function(t){for(var r=[],a=10240,s=0;s<t[0].length;++s)if(t[0][s])for(var n=0,o=t[0][s].length;n<o;n+=a)r.push.apply(r,t[0][s].slice(n,n+a));return r},t6=tr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(r){return Buffer.isBuffer(r)?r:Ko(r)})):e6(t)}:e6,r6=function(t,r,a){for(var s=[],n=r;n<a;n+=2)s.push(String.fromCharCode(em(t,n)));return s.join("").replace(ym,"")},aw=tr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf16le",r,a).replace(ym,""):r6(t,r,a)}:r6,a6=function(t,r,a){for(var s=[],n=r;n<r+a;++n)s.push(("0"+t[n].toString(16)).slice(-2));return s.join("")},SR=tr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("hex",r,r+a):a6(t,r,a)}:a6,s6=function(t,r,a){for(var s=[],n=r;n<a;n++)s.push(String.fromCharCode(Ac(t,n)));return s.join("")},d0=tr?function(r,a,s){return Buffer.isBuffer(r)?r.toString("utf8",a,s):s6(r,a,s)}:s6,CR=function(t,r){var a=Ts(t,r);return a>0?d0(t,r+4,r+4+a-1):""},kR=CR,ER=function(t,r){var a=Ts(t,r);return a>0?d0(t,r+4,r+4+a-1):""},AR=ER,PR=function(t,r){var a=2*Ts(t,r);return a>0?d0(t,r+4,r+4+a-1):""},TR=PR,OR=function(r,a){var s=Ts(r,a);return s>0?aw(r,a+4,a+4+s):""},FR=OR,RR=function(t,r){var a=Ts(t,r);return a>0?d0(t,r+4,r+4+a):""},$R=RR,DR=function(t,r){return Cfe(t,r)},Ff=DR,sw=function(r){return Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array};tr&&(kR=function(r,a){if(!Buffer.isBuffer(r))return CR(r,a);var s=r.readUInt32LE(a);return s>0?r.toString("utf8",a+4,a+4+s-1):""},AR=function(r,a){if(!Buffer.isBuffer(r))return ER(r,a);var s=r.readUInt32LE(a);return s>0?r.toString("utf8",a+4,a+4+s-1):""},TR=function(r,a){if(!Buffer.isBuffer(r))return PR(r,a);var s=2*r.readUInt32LE(a);return r.toString("utf16le",a+4,a+4+s-1)},FR=function(r,a){if(!Buffer.isBuffer(r))return OR(r,a);var s=r.readUInt32LE(a);return r.toString("utf16le",a+4,a+4+s)},$R=function(r,a){if(!Buffer.isBuffer(r))return RR(r,a);var s=r.readUInt32LE(a);return r.toString("utf8",a+4,a+4+s)},Ff=function(r,a){return Buffer.isBuffer(r)?r.readDoubleLE(a):DR(r,a)},sw=function(r){return Buffer.isBuffer(r)||Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array});var Ac=function(t,r){return t[r]},em=function(t,r){return t[r+1]*256+t[r]},Efe=function(t,r){var a=t[r+1]*256+t[r];return a<32768?a:(65535-a+1)*-1},Ts=function(t,r){return t[r+3]*(1<<24)+(t[r+2]<<16)+(t[r+1]<<8)+t[r]},cl=function(t,r){return t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]},Afe=function(t,r){return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]};function Nm(t,r){var a="",s,n,o=[],i,l,c,d;switch(r){case"dbcs":if(d=this.l,tr&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)a+=String.fromCharCode(em(this,d)),d+=2;t*=2;break;case"utf8":a=d0(this,this.l,this.l+t);break;case"utf16le":t*=2,a=aw(this,this.l,this.l+t);break;case"wstr":return Nm.call(this,t,"dbcs");case"lpstr-ansi":a=kR(this,this.l),t=4+Ts(this,this.l);break;case"lpstr-cp":a=AR(this,this.l),t=4+Ts(this,this.l);break;case"lpwstr":a=TR(this,this.l),t=4+2*Ts(this,this.l);break;case"lpp4":t=4+Ts(this,this.l),a=FR(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ts(this,this.l),a=$R(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(i=Ac(this,this.l+t++))!==0;)o.push(op(i));a=o.join("");break;case"_wstr":for(t=0,a="";(i=em(this,this.l+t))!==0;)o.push(op(i)),t+=2;t+=2,a=o.join("");break;case"dbcs-cont":for(a="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Ac(this,d),this.l=d+1,l=Nm.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),o.join("")+l;o.push(op(em(this,d))),d+=2}a=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Ac(this,d),this.l=d+1,l=Nm.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),o.join("")+l;o.push(op(Ac(this,d))),d+=1}a=o.join("");break;default:switch(t){case 1:return s=Ac(this,this.l),this.l++,s;case 2:return s=(r==="i"?Efe:em)(this,this.l),this.l+=2,s;case 4:case-4:return r==="i"||!(this[this.l+3]&128)?(s=(t>0?cl:Afe)(this,this.l),this.l+=4,s):(n=Ts(this,this.l),this.l+=4,n);case 8:case-8:if(r==="f")return t==8?n=Ff(this,this.l):n=Ff([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:a=SR(this,this.l,t);break}}return this.l+=t,a}var Pfe=function(t,r,a){t[a]=r&255,t[a+1]=r>>>8&255,t[a+2]=r>>>16&255,t[a+3]=r>>>24&255},Tfe=function(t,r,a){t[a]=r&255,t[a+1]=r>>8&255,t[a+2]=r>>16&255,t[a+3]=r>>24&255},Ofe=function(t,r,a){t[a]=r&255,t[a+1]=r>>>8&255};function Ffe(t,r,a){var s=0,n=0;if(a==="dbcs"){for(n=0;n!=r.length;++n)Ofe(this,r.charCodeAt(n),this.l+2*n);s=2*r.length}else if(a==="sbcs"){for(r=r.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=r.length;++n)this[this.l+n]=r.charCodeAt(n)&255;s=r.length}else if(a==="hex"){for(;n<t;++n)this[this.l++]=parseInt(r.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var o=Math.min(this.l+t,this.length);for(n=0;n<Math.min(r.length,t);++n){var i=r.charCodeAt(n);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:s=1,this[this.l]=r&255;break;case 2:s=2,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255;break;case 3:s=3,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255,r>>>=8,this[this.l+2]=r&255;break;case 4:s=4,Pfe(this,r,this.l);break;case 8:if(s=8,a==="f"){kfe(this,r,this.l);break}case 16:break;case-4:s=4,Tfe(this,r,this.l);break}return this.l+=s,this}function MR(t,r){var a=SR(this,this.l,t.length>>1);if(a!==t)throw new Error(r+"Expected "+t+" saw "+a);this.l+=t.length>>1}function As(t,r){t.l=r,t.read_shift=Nm,t.chk=MR,t.write_shift=Ffe}function ro(t,r){t.l+=r}function qe(t){var r=Ql(t);return As(r,0),r}function vs(){var t=[],r=tr?256:2048,a=function(d){var u=qe(d);return As(u,0),u},s=a(r),n=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&t.push(s),s=null)},o=function(d){return s&&d<s.length-s.l?s:(n(),s=a(Math.max(d+1,r)))},i=function(){return n(),Oa(t)},l=function(d){n(),s=d,s.l==null&&(s.l=s.length),o(r)};return{next:o,push:l,end:i,_bufs:t}}function Ge(t,r,a,s){var n=+r,o;if(!isNaN(n)){s||(s=C1e[n].p||(a||[]).length||0),o=1+(n>=128?1:0)+1,s>=128&&++o,s>=16384&&++o,s>=2097152&&++o;var i=t.next(o);n<=127?i.write_shift(1,n):(i.write_shift(1,(n&127)+128),i.write_shift(1,n>>7));for(var l=0;l!=4;++l)if(s>=128)i.write_shift(1,(s&127)+128),s>>=7;else{i.write_shift(1,s);break}s>0&&sw(a)&&t.push(a)}}function wm(t,r,a){var s=js(t);if(r.s?(s.cRel&&(s.c+=r.s.c),s.rRel&&(s.r+=r.s.r)):(s.cRel&&(s.c+=r.c),s.rRel&&(s.r+=r.r)),!a||a.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function n6(t,r,a){var s=js(t);return s.s=wm(s.s,r.s,a),s.e=wm(s.e,r.s,a),s}function _m(t,r){if(t.cRel&&t.c<0)for(t=js(t);t.c<0;)t.c+=r>8?16384:256;if(t.rRel&&t.r<0)for(t=js(t);t.r<0;)t.r+=r>8?1048576:r>5?65536:16384;var a=ur(t);return!t.cRel&&t.cRel!=null&&(a=Dfe(a)),!t.rRel&&t.rRel!=null&&(a=Rfe(a)),a}function Av(t,r){return t.s.r==0&&!t.s.rRel&&t.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Wa(t.s.c)+":"+(t.e.cRel?"":"$")+Wa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(r.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+$a(t.s.r)+":"+(t.e.rRel?"":"$")+$a(t.e.r):_m(t.s,r.biff)+":"+_m(t.e,r.biff)}function nw(t){return parseInt($fe(t),10)-1}function $a(t){return""+(t+1)}function Rfe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function $fe(t){return t.replace(/\$(\d+)$/,"$1")}function ow(t){for(var r=Mfe(t),a=0,s=0;s!==r.length;++s)a=26*a+r.charCodeAt(s)-64;return a-1}function Wa(t){if(t<0)throw new Error("invalid column "+t);var r="";for(++t;t;t=Math.floor((t-1)/26))r=String.fromCharCode((t-1)%26+65)+r;return r}function Dfe(t){return t.replace(/^([A-Z])/,"$$$1")}function Mfe(t){return t.replace(/^\$([A-Z])/,"$1")}function Ife(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function wa(t){for(var r=0,a=0,s=0;s<t.length;++s){var n=t.charCodeAt(s);n>=48&&n<=57?r=10*r+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:r-1}}function ur(t){for(var r=t.c+1,a="";r;r=(r-1)/26|0)a=String.fromCharCode((r-1)%26+65)+a;return a+(t.r+1)}function Ls(t){var r=t.indexOf(":");return r==-1?{s:wa(t),e:wa(t)}:{s:wa(t.slice(0,r)),e:wa(t.slice(r+1))}}function aa(t,r){return typeof r>"u"||typeof r=="number"?aa(t.s,t.e):(typeof t!="string"&&(t=ur(t)),typeof r!="string"&&(r=ur(r)),t==r?t:t+":"+r)}function kr(t){var r={s:{c:0,r:0},e:{c:0,r:0}},a=0,s=0,n=0,o=t.length;for(a=0;s<o&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)a=26*a+n;for(r.s.c=--a,a=0;s<o&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)a=10*a+n;if(r.s.r=--a,s===o||n!=10)return r.e.c=r.s.c,r.e.r=r.s.r,r;for(++s,a=0;s!=o&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)a=26*a+n;for(r.e.c=--a,a=0;s!=o&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)a=10*a+n;return r.e.r=--a,r}function o6(t,r){var a=t.t=="d"&&r instanceof Date;if(t.z!=null)try{return t.w=Fi(t.z,a?ys(r):r)}catch{}try{return t.w=Fi((t.XF||{}).numFmtId||(a?14:0),a?ys(r):r)}catch{return""+r}}function zo(t,r,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?u0[t.v]||t.v:r==null?o6(t,t.v):o6(t,r))}function dc(t,r){var a=r&&r.sheet?r.sheet:"Sheet1",s={};return s[a]=t,{SheetNames:[a],Sheets:s}}function IR(t,r,a){var s=a||{},n=t?Array.isArray(t):s.dense,o=t||(n?[]:{}),i=0,l=0;if(o&&s.origin!=null){if(typeof s.origin=="number")i=s.origin;else{var c=typeof s.origin=="string"?wa(s.origin):s.origin;i=c.r,l=c.c}o["!ref"]||(o["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var u=kr(o["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),i==-1&&(d.e.r=i=u.e.r+1)}for(var m=0;m!=r.length;++m)if(r[m]){if(!Array.isArray(r[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=r[m].length;++x)if(!(typeof r[m][x]>"u")){var h={v:r[m][x]},b=i+m,p=l+x;if(d.s.r>b&&(d.s.r=b),d.s.c>p&&(d.s.c=p),d.e.r<b&&(d.e.r=b),d.e.c<p&&(d.e.c=p),r[m][x]&&typeof r[m][x]=="object"&&!Array.isArray(r[m][x])&&!(r[m][x]instanceof Date))h=r[m][x];else if(Array.isArray(h.v)&&(h.f=r[m][x][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(s.nullError)h.t="e",h.v=0;else if(s.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=s.dateNF||qr[14],s.cellDates?(h.t="d",h.w=Fi(h.z,ys(h.v))):(h.t="n",h.v=ys(h.v),h.w=Fi(h.z,h.v))):h.t="s";if(n)o[b]||(o[b]=[]),o[b][p]&&o[b][p].z&&(h.z=o[b][p].z),o[b][p]=h;else{var f=ur({c:p,r:b});o[f]&&o[f].z&&(h.z=o[f].z),o[f]=h}}}return d.s.c<1e7&&(o["!ref"]=aa(d)),o}function ju(t,r){return IR(null,t,r)}function Lfe(t){return t.read_shift(4,"i")}function An(t,r){return r||(r=qe(4)),r.write_shift(4,t),r}function Ha(t){var r=t.read_shift(4);return r===0?"":t.read_shift(r,"dbcs")}function _a(t,r){var a=!1;return r==null&&(a=!0,r=qe(4+2*t.length)),r.write_shift(4,t.length),t.length>0&&r.write_shift(0,t,"dbcs"),a?r.slice(0,r.l):r}function Bfe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function zfe(t,r){return r||(r=qe(4)),r.write_shift(2,0),r.write_shift(2,0),r}function iw(t,r){var a=t.l,s=t.read_shift(1),n=Ha(t),o=[],i={t:n,h:n};if(s&1){for(var l=t.read_shift(4),c=0;c!=l;++c)o.push(Bfe(t));i.r=o}else i.r=[{ich:0,ifnt:0}];return t.l=a+r,i}function qfe(t,r){var a=!1;return r==null&&(a=!0,r=qe(15+4*t.t.length)),r.write_shift(1,0),_a(t.t,r),a?r.slice(0,r.l):r}var Vfe=iw;function Ufe(t,r){var a=!1;return r==null&&(a=!0,r=qe(23+4*t.t.length)),r.write_shift(1,1),_a(t.t,r),r.write_shift(4,1),zfe({},r),a?r.slice(0,r.l):r}function dn(t){var r=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:r,iStyleRef:a}}function uc(t,r){return r==null&&(r=qe(8)),r.write_shift(-4,t.c),r.write_shift(3,t.iStyleRef||t.s),r.write_shift(1,0),r}function mc(t){var r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:r}}function xc(t,r){return r==null&&(r=qe(4)),r.write_shift(3,t.iStyleRef||t.s),r.write_shift(1,0),r}var Wfe=Ha,LR=_a;function lw(t){var r=t.read_shift(4);return r===0||r===4294967295?"":t.read_shift(r,"dbcs")}function Rf(t,r){var a=!1;return r==null&&(a=!0,r=qe(127)),r.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&r.write_shift(0,t,"dbcs"),a?r.slice(0,r.l):r}var Hfe=Ha,E1=lw,cw=Rf;function BR(t){var r=t.slice(t.l,t.l+4),a=r[0]&1,s=r[0]&2;t.l+=4;var n=s===0?Ff([0,0,0,0,r[0]&252,r[1],r[2],r[3]],0):cl(r,0)>>2;return a?n/100:n}function zR(t,r){r==null&&(r=qe(4));var a=0,s=0,n=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?s=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(s=1,a=1),s)r.write_shift(-4,((a?n:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function qR(t){var r={s:{},e:{}};return r.s.r=t.read_shift(4),r.e.r=t.read_shift(4),r.s.c=t.read_shift(4),r.e.c=t.read_shift(4),r}function Kfe(t,r){return r||(r=qe(16)),r.write_shift(4,t.s.r),r.write_shift(4,t.e.r),r.write_shift(4,t.s.c),r.write_shift(4,t.e.c),r}var pc=qR,Nu=Kfe;function wu(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Jl(t,r){return(r||qe(8)).write_shift(8,t,"f")}function Gfe(t){var r={},a=t.read_shift(1),s=a>>>1,n=t.read_shift(1),o=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,s){case 0:r.auto=1;break;case 1:r.index=n;var d=age[n];d&&(r.rgb=g6(d));break;case 2:r.rgb=g6([i,l,c]);break;case 3:r.theme=n;break}return o!=0&&(r.tint=o>0?o/32767:o/32768),r}function $f(t,r){if(r||(r=qe(8)),!t||t.auto)return r.write_shift(4,0),r.write_shift(4,0),r;t.index!=null?(r.write_shift(1,2),r.write_shift(1,t.index)):t.theme!=null?(r.write_shift(1,6),r.write_shift(1,t.theme)):(r.write_shift(1,5),r.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),r.write_shift(2,a),!t.rgb||t.theme!=null)r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);else{var s=t.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),r.write_shift(1,parseInt(s.slice(0,2),16)),r.write_shift(1,parseInt(s.slice(2,4),16)),r.write_shift(1,parseInt(s.slice(4,6),16)),r.write_shift(1,255)}return r}function Xfe(t){var r=t.read_shift(1);t.l++;var a={fBold:r&1,fItalic:r&2,fUnderline:r&4,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return a}function Yfe(t,r){r||(r=qe(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return r.write_shift(1,a),r.write_shift(1,0),r}var VR=2,Cs=3,dp=11,Df=19,up=64,Qfe=65,Jfe=71,Zfe=4108,ege=4126,Ta=80,i6={1:{n:"CodePage",t:VR},2:{n:"Category",t:Ta},3:{n:"PresentationFormat",t:Ta},4:{n:"ByteCount",t:Cs},5:{n:"LineCount",t:Cs},6:{n:"ParagraphCount",t:Cs},7:{n:"SlideCount",t:Cs},8:{n:"NoteCount",t:Cs},9:{n:"HiddenCount",t:Cs},10:{n:"MultimediaClipCount",t:Cs},11:{n:"ScaleCrop",t:dp},12:{n:"HeadingPairs",t:Zfe},13:{n:"TitlesOfParts",t:ege},14:{n:"Manager",t:Ta},15:{n:"Company",t:Ta},16:{n:"LinksUpToDate",t:dp},17:{n:"CharacterCount",t:Cs},19:{n:"SharedDoc",t:dp},22:{n:"HyperlinksChanged",t:dp},23:{n:"AppVersion",t:Cs,p:"version"},24:{n:"DigSig",t:Qfe},26:{n:"ContentType",t:Ta},27:{n:"ContentStatus",t:Ta},28:{n:"Language",t:Ta},29:{n:"Version",t:Ta},255:{},2147483648:{n:"Locale",t:Df},2147483651:{n:"Behavior",t:Df},1919054434:{}},l6={1:{n:"CodePage",t:VR},2:{n:"Title",t:Ta},3:{n:"Subject",t:Ta},4:{n:"Author",t:Ta},5:{n:"Keywords",t:Ta},6:{n:"Comments",t:Ta},7:{n:"Template",t:Ta},8:{n:"LastAuthor",t:Ta},9:{n:"RevNumber",t:Ta},10:{n:"EditTime",t:up},11:{n:"LastPrinted",t:up},12:{n:"CreatedDate",t:up},13:{n:"ModifiedDate",t:up},14:{n:"PageCount",t:Cs},15:{n:"WordCount",t:Cs},16:{n:"CharCount",t:Cs},17:{n:"Thumbnail",t:Jfe},18:{n:"Application",t:Ta},19:{n:"DocSecurity",t:Cs},255:{},2147483648:{n:"Locale",t:Df},2147483651:{n:"Behavior",t:Df},1919054434:{}};function tge(t){return t.map(function(r){return[r>>16&255,r>>8&255,r&255]})}var rge=tge([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),age=js(rge),u0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sge={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},mp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function UR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function WR(t,r){var a=pfe(sge),s=[],n;s[s.length]=oa,s[s.length]=dt("Types",null,{xmlns:Na.CT,"xmlns:xsd":Na.xsd,"xmlns:xsi":Na.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return dt("Default",null,{Extension:c[0],ContentType:c[1]})}));var o=function(c){t[c]&&t[c].length>0&&(n=t[c][0],s[s.length]=dt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:mp[c][r.bookType]||mp[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(d){s[s.length]=dt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:mp[c][r.bookType]||mp[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(d){s[s.length]=dt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:a[c][0]})})};return o("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var Jt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function HR(t){var r=t.lastIndexOf("/");return t.slice(0,r+1)+"_rels/"+t.slice(r+1)+".rels"}function ld(t){var r=[oa,dt("Relationships",null,{xmlns:Na.RELS})];return Ma(t["!id"]).forEach(function(a){r[r.length]=dt("Relationship",null,t["!id"][a])}),r.length>2&&(r[r.length]="</Relationships>",r[1]=r[1].replace("/>",">")),r.join("")}function ir(t,r,a,s,n,o){if(n||(n={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),r<0)for(r=t["!idx"];t["!id"]["rId"+r];++r);if(t["!idx"]=r+1,n.Id="rId"+r,n.Type=s,n.Target=a,[Jt.HLINK,Jt.XPATH,Jt.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),t["!id"][n.Id])throw new Error("Cannot rewrite rId "+r);return t["!id"][n.Id]=n,t[("/"+n.Target).replace("//","/")]=n,r}function nge(t){var r=[oa];r.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),r.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)r.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return r.push("</manifest:manifest>"),r.join("")}function c6(t,r,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+r+`"/>
`,`  </rdf:Description>
`].join("")}function oge(t,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+`"/>
`,`  </rdf:Description>
`].join("")}function ige(t){var r=[oa];r.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)r.push(c6(t[a][0],t[a][1])),r.push(oge("",t[a][0]));return r.push(c6("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}function KR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+kf.version+"</meta:generator></office:meta></office:document-meta>"}var Al=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Pv(t,r,a,s,n){n[t]!=null||r==null||r===""||(n[t]=r,r=cr(r),s[s.length]=a?dt(t,r,a):Fa(t,r))}function GR(t,r){var a=r||{},s=[oa,dt("cp:coreProperties",null,{"xmlns:cp":Na.CORE_PROPS,"xmlns:dc":Na.dc,"xmlns:dcterms":Na.dcterms,"xmlns:dcmitype":Na.dcmitype,"xmlns:xsi":Na.xsi})],n={};if(!t&&!a.Props)return s.join("");t&&(t.CreatedDate!=null&&Pv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:k1(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},s,n),t.ModifiedDate!=null&&Pv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:k1(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},s,n));for(var o=0;o!=Al.length;++o){var i=Al[o],l=a.Props&&a.Props[i[1]]!=null?a.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Pv(i[0],l,null,s,n)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var cd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],XR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function YR(t){var r=[],a=dt;return t||(t={}),t.Application="SheetJS",r[r.length]=oa,r[r.length]=dt("Properties",null,{xmlns:Na.EXT_PROPS,"xmlns:vt":Na.vt}),cd.forEach(function(s){if(t[s[1]]!==void 0){var n;switch(s[2]){case"string":n=cr(String(t[s[1]]));break;case"bool":n=t[s[1]]?"true":"false";break}n!==void 0&&(r[r.length]=a(s[0],n))}}),r[r.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),r[r.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(s){return"<vt:lpstr>"+cr(s)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}function QR(t){var r=[oa,dt("Properties",null,{xmlns:Na.CUST_PROPS,"xmlns:vt":Na.vt})];if(!t)return r.join("");var a=1;return Ma(t).forEach(function(n){++a,r[r.length]=dt("property",Sfe(t[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:cr(n)})}),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var d6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function lge(t,r){var a=[];return Ma(d6).map(function(s){for(var n=0;n<Al.length;++n)if(Al[n][1]==s)return Al[n];for(n=0;n<cd.length;++n)if(cd[n][1]==s)return cd[n];throw s}).forEach(function(s){if(t[s[1]]!=null){var n=r&&r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:t[s[1]];switch(s[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),a.push(Fa(d6[s[1]]||s[1],n))}}),dt("DocumentProperties",a.join(""),{xmlns:Ps.o})}function cge(t,r){var a=["Worksheets","SheetNames"],s="CustomDocumentProperties",n=[];return t&&Ma(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var i=0;i<Al.length;++i)if(o==Al[i][1])return;for(i=0;i<cd.length;++i)if(o==cd[i][1])return;for(i=0;i<a.length;++i)if(o==a[i])return;var l=t[o],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),n.push(dt(Qk(o),l,{"dt:dt":c}))}}),r&&Ma(r).forEach(function(o){if(Object.prototype.hasOwnProperty.call(r,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var i=r[o],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),n.push(dt(Qk(o),i,{"dt:dt":l}))}}),"<"+s+' xmlns="'+Ps.o+'">'+n.join("")+"</"+s+">"}function dge(t){var r=typeof t=="string"?new Date(Date.parse(t)):t,a=r.getTime()/1e3+11644473600,s=a%Math.pow(2,32),n=(a-s)/Math.pow(2,32);s*=1e7,n*=1e7;var o=s/Math.pow(2,32)|0;o>0&&(s=s%Math.pow(2,32),n+=o);var i=qe(8);return i.write_shift(4,s),i.write_shift(4,n),i}function u6(t,r){var a=qe(4),s=qe(4);switch(a.write_shift(4,t==80?31:t),t){case 3:s.write_shift(-4,r);break;case 5:s=qe(8),s.write_shift(8,r,"f");break;case 11:s.write_shift(4,r?1:0);break;case 64:s=dge(r);break;case 31:case 80:for(s=qe(4+2*(r.length+1)+(r.length%2?0:2)),s.write_shift(4,r.length+1),s.write_shift(0,r,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+r)}return Oa([a,s])}var JR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function uge(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function m6(t,r,a){var s=qe(8),n=[],o=[],i=8,l=0,c=qe(8),d=qe(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),o.push(c),n.push(d),i+=8+c.length,!r){d=qe(8),d.write_shift(4,0),n.unshift(d);var u=[qe(4)];for(u[0].write_shift(4,t.length),l=0;l<t.length;++l){var m=t[l][0];for(c=qe(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Oa(u),o.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(r&&!r[t[l][0]])&&!(JR.indexOf(t[l][0])>-1||XR.indexOf(t[l][0])>-1)&&t[l][1]!=null){var x=t[l][1],h=0;if(r){h=+r[t[l][0]];var b=a[h];if(b.p=="version"&&typeof x=="string"){var p=x.split(".");x=(+p[0]<<16)+(+p[1]||0)}c=u6(b.t,x)}else{var f=uge(x);f==-1&&(f=31,x=String(x)),c=u6(f,x)}o.push(c),d=qe(8),d.write_shift(4,r?h:2+l),n.push(d),i+=8+c.length}var v=8*(o.length+1);for(l=0;l<o.length;++l)n[l].write_shift(4,v),v+=o[l].length;return s.write_shift(4,i),s.write_shift(4,o.length),Oa([s].concat(n).concat(o))}function x6(t,r,a,s,n,o){var i=qe(n?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,hr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,n?2:1),i.write_shift(16,r,"hex"),i.write_shift(4,n?68:48);var c=m6(t,a,s);if(l.push(c),n){var d=m6(n,null,null);i.write_shift(16,o,"hex"),i.write_shift(4,68+c.length),l.push(d)}return Oa(l)}function mge(t,r){r||(r=qe(t));for(var a=0;a<t;++a)r.write_shift(1,0);return r}function xge(t,r){return t.read_shift(r)===1}function Qa(t,r){return r||(r=qe(2)),r.write_shift(2,+!!t),r}function ZR(t){return t.read_shift(2,"u")}function Qs(t,r){return r||(r=qe(2)),r.write_shift(2,t),r}function e$(t,r,a){return a||(a=qe(2)),a.write_shift(1,r=="e"?+t:+!!t),a.write_shift(1,r=="e"?1:0),a}function t$(t,r,a){var s=t.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var o=t.read_shift(1);o&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var i=s?t.read_shift(s,n):"";return i}function pge(t){var r=t.t||"",a=qe(3);a.write_shift(2,r.length),a.write_shift(1,1);var s=qe(2*r.length);s.write_shift(2*r.length,r,"utf16le");var n=[a,s];return Oa(n)}function hge(t,r,a){var s;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(r,"cpstr");if(a.biff>=12)return t.read_shift(r,"dbcs-cont")}var n=t.read_shift(1);return n===0?s=t.read_shift(r,"sbcs-cont"):s=t.read_shift(r,"dbcs-cont"),s}function fge(t,r,a){var s=t.read_shift(a&&a.biff==2?1:2);return s===0?(t.l++,""):hge(t,s,a)}function gge(t,r,a){if(a.biff>5)return fge(t,r,a);var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function r$(t,r,a){return a||(a=qe(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function p6(t,r){r||(r=qe(6+t.length*2)),r.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function bge(t){var r=qe(512),a=0,s=t.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var n=s.indexOf("#"),o=n>-1?31:23;switch(s.charAt(0)){case"#":o=28;break;case".":o&=-3;break}r.write_shift(4,2),r.write_shift(4,o);var i=[8,6815827,6619237,4849780,83];for(a=0;a<i.length;++a)r.write_shift(4,i[a]);if(o==28)s=s.slice(1),p6(s,r);else if(o&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<i.length;++a)r.write_shift(1,parseInt(i[a],16));var l=n>-1?s.slice(0,n):s;for(r.write_shift(4,2*(l.length+1)),a=0;a<l.length;++a)r.write_shift(2,l.charCodeAt(a));r.write_shift(2,0),o&8&&p6(n>-1?s.slice(n+1):"",r)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<i.length;++a)r.write_shift(1,parseInt(i[a],16));for(var c=0;s.slice(c*3,c*3+3)=="../"||s.slice(c*3,c*3+3)=="..\\";)++c;for(r.write_shift(2,c),r.write_shift(4,s.length-3*c+1),a=0;a<s.length-3*c;++a)r.write_shift(1,s.charCodeAt(a+3*c)&255);for(r.write_shift(1,0),r.write_shift(2,65535),r.write_shift(2,57005),a=0;a<6;++a)r.write_shift(4,0)}return r.slice(0,r.l)}function Zl(t,r,a,s){return s||(s=qe(6)),s.write_shift(2,t),s.write_shift(2,r),s.write_shift(2,a||0),s}function vge(t,r,a){var s=a.biff>8?4:2,n=t.read_shift(s),o=t.read_shift(s,"i"),i=t.read_shift(s,"i");return[n,o,i]}function yge(t){var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),n=t.read_shift(2);return{s:{c:s,r},e:{c:n,r:a}}}function a$(t,r){return r||(r=qe(8)),r.write_shift(2,t.s.r),r.write_shift(2,t.e.r),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c),r}function dw(t,r,a){var s=1536,n=16;switch(a.bookType){case"biff8":break;case"biff5":s=1280,n=8;break;case"biff4":s=4,n=6;break;case"biff3":s=3,n=6;break;case"biff2":s=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=qe(n);return o.write_shift(2,s),o.write_shift(2,r),n>4&&o.write_shift(2,29282),n>6&&o.write_shift(2,1997),n>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function jge(t,r){var a=!r||r.biff==8,s=qe(a?112:54);for(s.write_shift(r.biff==8?2:1,7),a&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(a?0:536870912));s.l<s.length;)s.write_shift(1,a?0:32);return s}function Nge(t,r){var a=!r||r.biff>=8?2:1,s=qe(8+a*t.name.length);s.write_shift(4,t.pos),s.write_shift(1,t.hs||0),s.write_shift(1,t.dt),s.write_shift(1,t.name.length),r.biff>=8&&s.write_shift(1,1),s.write_shift(a*t.name.length,t.name,r.biff<8?"sbcs":"utf16le");var n=s.slice(0,s.l);return n.l=s.l,n}function wge(t,r){var a=qe(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var s=[],n=0;n<t.length;++n)s[n]=pge(t[n]);var o=Oa([a].concat(s));return o.parts=[a.length].concat(s.map(function(i){return i.length})),o}function _ge(){var t=qe(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Sge(t){var r=qe(18),a=1718;return t&&t.RTL&&(a|=64),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,64),r.write_shift(4,0),r.write_shift(4,0),r}function Cge(t,r){var a=t.name||"Arial",s=r&&r.biff==5,n=s?15+a.length:16+2*a.length,o=qe(n);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,a.length),s||o.write_shift(1,1),o.write_shift((s?1:2)*a.length,a,s?"sbcs":"utf16le"),o}function kge(t,r,a,s){var n=qe(10);return Zl(t,r,s,n),n.write_shift(4,a),n}function Ege(t,r,a,s,n){var o=!n||n.biff==8,i=qe(8+ +o+(1+o)*a.length);return Zl(t,r,s,i),i.write_shift(2,a.length),o&&i.write_shift(1,1),i.write_shift((1+o)*a.length,a,o?"utf16le":"sbcs"),i}function Age(t,r,a,s){var n=a&&a.biff==5;s||(s=qe(n?3+r.length:5+2*r.length)),s.write_shift(2,t),s.write_shift(n?1:2,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le");var o=s.length>s.l?s.slice(0,s.l):s;return o.l==null&&(o.l=o.length),o}function Pge(t,r){var a=r.biff==8||!r.biff?4:2,s=qe(2*a+6);return s.write_shift(a,t.s.r),s.write_shift(a,t.e.r+1),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c+1),s.write_shift(2,0),s}function h6(t,r,a,s){var n=a&&a.biff==5;s||(s=qe(n?16:20)),s.write_shift(2,0),t.style?(s.write_shift(2,t.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,t.numFmtId||0),s.write_shift(2,r<<4));var o=0;return t.numFmtId>0&&n&&(o|=1024),s.write_shift(4,o),s.write_shift(4,0),n||s.write_shift(4,0),s.write_shift(2,0),s}function Tge(t){var r=qe(8);return r.write_shift(4,0),r.write_shift(2,0),r.write_shift(2,0),r}function Oge(t,r,a,s,n,o){var i=qe(8);return Zl(t,r,s,i),e$(a,o,i),i}function Fge(t,r,a,s){var n=qe(14);return Zl(t,r,s,n),Jl(a,n),n}function Rge(t,r,a){if(a.biff<8)return $ge(t,r,a);for(var s=[],n=t.l+r,o=t.read_shift(a.biff>8?4:2);o--!==0;)s.push(vge(t,a.biff>8?12:6,a));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return s}function $ge(t,r,a){t[t.l+1]==3&&t[t.l]++;var s=t$(t,r,a);return s.charCodeAt(0)==3?s.slice(1):s}function Dge(t){var r=qe(2+t.length*8);r.write_shift(2,t.length);for(var a=0;a<t.length;++a)a$(t[a],r);return r}function Mge(t){var r=qe(24),a=wa(t[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)r.write_shift(1,parseInt(s[n],16));return Oa([r,bge(t[1])])}function Ige(t){var r=t[1].Tooltip,a=qe(10+2*(r.length+1));a.write_shift(2,2048);var s=wa(t[0]);a.write_shift(2,s.r),a.write_shift(2,s.r),a.write_shift(2,s.c),a.write_shift(2,s.c);for(var n=0;n<r.length;++n)a.write_shift(2,r.charCodeAt(n));return a.write_shift(2,0),a}function Lge(t){return t||(t=qe(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Bge(t,r,a){if(!a.cellStyles)return ro(t,r);var s=a&&a.biff>=12?4:2,n=t.read_shift(s),o=t.read_shift(s),i=t.read_shift(s),l=t.read_shift(s),c=t.read_shift(2);s==2&&(t.l+=2);var d={s:n,e:o,w:i,ixfe:l,flags:c};return(a.biff>=5||!a.biff)&&(d.level=c>>8&7),d}function zge(t,r){var a=qe(12);a.write_shift(2,r),a.write_shift(2,r),a.write_shift(2,t.width*256),a.write_shift(2,0);var s=0;return t.hidden&&(s|=1),a.write_shift(1,s),s=t.level||0,a.write_shift(1,s),a.write_shift(2,0),a}function qge(t){for(var r=qe(2*t),a=0;a<t;++a)r.write_shift(2,a+1);return r}function Vge(t,r,a){var s=qe(15);return x0(s,t,r),s.write_shift(8,a,"f"),s}function Uge(t,r,a){var s=qe(9);return x0(s,t,r),s.write_shift(2,a),s}var Wge=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},r=ZN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(l,c){var d=[],u=Ql(1);switch(c.type){case"base64":u=Nn(Bo(l));break;case"binary":u=Nn(l);break;case"buffer":case"array":u=l;break}As(u,0);var m=u.read_shift(1),x=!!(m&136),h=!1,b=!1;switch(m){case 2:break;case 3:break;case 48:h=!0,x=!0;break;case 49:h=!0,x=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var p=0,f=521;m==2&&(p=u.read_shift(2)),u.l+=3,m!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),m!=2&&(f=u.read_shift(2));var v=u.read_shift(2),g=c.codepage||1252;m!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(g=t[u[u.l]]),u.l+=1,u.l+=2),b&&(u.l+=36);for(var y=[],N={},_=Math.min(u.length,m==2?521:f-10-(h?264:0)),w=b?32:11;u.l<_&&u[u.l]!=13;)switch(N={},N.name=Ef.utils.decode(g,u.slice(u.l,u.l+w)).replace(/[\u0000\r\n].*$/g,""),u.l+=w,N.type=String.fromCharCode(u.read_shift(1)),m!=2&&!b&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),m==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&y.push(N),m!=2&&(u.l+=b?13:14),N.type){case"B":(!h||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=f-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=f;var S=0,C=0;for(d[0]=[],C=0;C!=y.length;++C)d[0][C]=y[C].name;for(;p-- >0;){if(u[u.l]===42){u.l+=v;continue}for(++u.l,d[++S]=[],C=0,C=0;C!=y.length;++C){var k=u.slice(u.l,u.l+y[C].len);u.l+=y[C].len,As(k,0);var F=Ef.utils.decode(g,k);switch(y[C].type){case"C":F.trim().length&&(d[S][C]=F.replace(/\s+$/,""));break;case"D":F.length===8?d[S][C]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):d[S][C]=F;break;case"F":d[S][C]=parseFloat(F.trim());break;case"+":case"I":d[S][C]=b?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":d[S][C]=!0;break;case"N":case"F":d[S][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));d[S][C]="##MEMO##"+(b?parseInt(F.trim(),10):k.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(d[S][C]=+F||0);break;case"@":d[S][C]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":d[S][C]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":d[S][C]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[S][C]=-k.read_shift(-8,"f");break;case"B":if(h&&y[C].len==8){d[S][C]=k.read_shift(8,"f");break}case"G":case"P":k.l+=y[C].len;break;case"0":if(y[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[C].type)}}}if(m!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=y,d}function s(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=ju(a(l,d),d);return u["!cols"]=d.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete d.DBF,u}function n(l,c){try{return dc(s(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var d=c||{};if(+d.codepage>=0&&Rx(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=vs(),m=zf(l,{header:1,raw:!0,cellDates:!0}),x=m[0],h=m.slice(1),b=l["!cols"]||[],p=0,f=0,v=0,g=1;for(p=0;p<x.length;++p){if(((b[p]||{}).DBF||{}).name){x[p]=b[p].DBF.name,++v;continue}if(x[p]!=null){if(++v,typeof x[p]=="number"&&(x[p]=x[p].toString(10)),typeof x[p]!="string")throw new Error("DBF Invalid column name "+x[p]+" |"+typeof x[p]+"|");if(x.indexOf(x[p])!==p){for(f=0;f<1024;++f)if(x.indexOf(x[p]+"_"+f)==-1){x[p]+="_"+f;break}}}}var y=kr(l["!ref"]),N=[],_=[],w=[];for(p=0;p<=y.e.c-y.s.c;++p){var S="",C="",k=0,F=[];for(f=0;f<h.length;++f)h[f][p]!=null&&F.push(h[f][p]);if(F.length==0||x[p]==null){N[p]="?";continue}for(f=0;f<F.length;++f){switch(typeof F[f]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=F[f]instanceof Date?"D":"C";break;default:C="C"}k=Math.max(k,String(F[f]).length),S=S&&S!=C?"C":C}k>250&&(k=250),C=((b[p]||{}).DBF||{}).type,C=="C"&&b[p].DBF.len>k&&(k=b[p].DBF.len),S=="B"&&C=="N"&&(S="N",w[p]=b[p].DBF.dec,k=b[p].DBF.len),_[p]=S=="C"||C=="N"?k:o[S]||0,g+=_[p],N[p]=S}var q=u.next(32);for(q.write_shift(4,318902576),q.write_shift(4,h.length),q.write_shift(2,296+32*v),q.write_shift(2,g),p=0;p<4;++p)q.write_shift(4,0);for(q.write_shift(4,0|(+r[nR]||3)<<8),p=0,f=0;p<x.length;++p)if(x[p]!=null){var A=u.next(32),T=(x[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,T,"sbcs"),A.write_shift(1,N[p]=="?"?"C":N[p],"sbcs"),A.write_shift(4,f),A.write_shift(1,_[p]||o[N[p]]||0),A.write_shift(1,w[p]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),f+=_[p]||o[N[p]]||0}var U=u.next(264);for(U.write_shift(4,13),p=0;p<65;++p)U.write_shift(4,0);for(p=0;p<h.length;++p){var K=u.next(g);for(K.write_shift(1,0),f=0;f<x.length;++f)if(x[f]!=null)switch(N[f]){case"L":K.write_shift(1,h[p][f]==null?63:h[p][f]?84:70);break;case"B":K.write_shift(8,h[p][f]||0,"f");break;case"N":var I="0";for(typeof h[p][f]=="number"&&(I=h[p][f].toFixed(w[f]||0)),v=0;v<_[f]-I.length;++v)K.write_shift(1,32);K.write_shift(1,I,"sbcs");break;case"D":h[p][f]?(K.write_shift(4,("0000"+h[p][f].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(h[p][f].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+h[p][f].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var Y=String(h[p][f]!=null?h[p][f]:"").slice(0,_[f]);for(K.write_shift(1,Y,"sbcs"),v=0;v<_[f]-Y.length;++v)K.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:s,from_sheet:i}}(),Hge=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},r=new RegExp("\x1BN("+Ma(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(x,h){var b=t[h];return typeof b=="number"?Lk(b):b},s=function(x,h,b){var p=h.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return p==59?x:Lk(p)};t["|"]=254;function n(x,h){switch(h.type){case"base64":return o(Bo(x),h);case"binary":return o(x,h);case"buffer":return o(tr&&Buffer.isBuffer(x)?x.toString("binary"):l0(x),h);case"array":return o(xb(x),h)}throw new Error("Unrecognized type "+h.type)}function o(x,h){var b=x.split(/[\n\r]+/),p=-1,f=-1,v=0,g=0,y=[],N=[],_=null,w={},S=[],C=[],k=[],F=0,q;for(+h.codepage>=0&&Rx(+h.codepage);v!==b.length;++v){F=0;var A=b[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(r,a),T=A.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),U=T[0],K;if(A.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":T[1].charAt(0)=="P"&&N.push(A.slice(3).replace(/;;/g,";"));break;case"C":var I=!1,Y=!1,D=!1,W=!1,R=-1,B=-1;for(g=1;g<T.length;++g)switch(T[g].charAt(0)){case"A":break;case"X":f=parseInt(T[g].slice(1))-1,Y=!0;break;case"Y":for(p=parseInt(T[g].slice(1))-1,Y||(f=0),q=y.length;q<=p;++q)y[q]=[];break;case"K":K=T[g].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(Co(K))?isNaN(Dx(K).getDate())||(K=ss(K)):(K=Co(K),_!==null&&gR(_)&&(K=jR(K))),I=!0;break;case"E":W=!0;var O=Ube(T[g].slice(1),{r:p,c:f});y[p][f]=[y[p][f],O];break;case"S":D=!0,y[p][f]=[y[p][f],"S5S"];break;case"G":break;case"R":R=parseInt(T[g].slice(1))-1;break;case"C":B=parseInt(T[g].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}if(I&&(y[p][f]&&y[p][f].length==2?y[p][f][0]=K:y[p][f]=K,_=null),D){if(W)throw new Error("SYLK shared formula cannot have own formula");var L=R>-1&&y[R][B];if(!L||!L[1])throw new Error("SYLK shared formula cannot find base");y[p][f][1]=Wbe(L[1],{r:p-R,c:f-B})}break;case"F":var E=0;for(g=1;g<T.length;++g)switch(T[g].charAt(0)){case"X":f=parseInt(T[g].slice(1))-1,++E;break;case"Y":for(p=parseInt(T[g].slice(1))-1,q=y.length;q<=p;++q)y[q]=[];break;case"M":F=parseInt(T[g].slice(1))/20;break;case"F":break;case"G":break;case"P":_=N[parseInt(T[g].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=T[g].slice(1).split(" "),q=parseInt(k[0],10);q<=parseInt(k[1],10);++q)F=parseInt(k[2],10),C[q-1]=F===0?{hidden:!0}:{wch:F},uw(C[q-1]);break;case"C":f=parseInt(T[g].slice(1))-1,C[f]||(C[f]={});break;case"R":p=parseInt(T[g].slice(1))-1,S[p]||(S[p]={}),F>0?(S[p].hpt=F,S[p].hpx=l$(F)):F===0&&(S[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}E<1&&(_=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}}return S.length>0&&(w["!rows"]=S),C.length>0&&(w["!cols"]=C),h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),[y,w]}function i(x,h){var b=n(x,h),p=b[0],f=b[1],v=ju(p,h);return Ma(f).forEach(function(g){v[g]=f[g]}),v}function l(x,h){return dc(i(x,h),h)}function c(x,h,b,p){var f="C;Y"+(b+1)+";X"+(p+1)+";K";switch(x.t){case"n":f+=x.v||0,x.f&&!x.F&&(f+=";E"+xw(x.f,{r:b,c:p}));break;case"b":f+=x.v?"TRUE":"FALSE";break;case"e":f+=x.w||x.v;break;case"d":f+='"'+(x.w||x.v)+'"';break;case"s":f+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return f}function d(x,h){h.forEach(function(b,p){var f="F;W"+(p+1)+" "+(p+1)+" ";b.hidden?f+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=Mf(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=If(b.wpx)),typeof b.wch=="number"&&(f+=Math.round(b.wch))),f.charAt(f.length-1)!=" "&&x.push(f)})}function u(x,h){h.forEach(function(b,p){var f="F;";b.hidden?f+="M0;":b.hpt?f+="M"+20*b.hpt+";":b.hpx&&(f+="M"+20*Lf(b.hpx)+";"),f.length>2&&x.push(f+"R"+(p+1))})}function m(x,h){var b=["ID;PWXL;N;E"],p=[],f=kr(x["!ref"]),v,g=Array.isArray(x),y=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),x["!cols"]&&d(b,x["!cols"]),x["!rows"]&&u(b,x["!rows"]),b.push("B;Y"+(f.e.r-f.s.r+1)+";X"+(f.e.c-f.s.c+1)+";D"+[f.s.c,f.s.r,f.e.c,f.e.r].join(" "));for(var N=f.s.r;N<=f.e.r;++N)for(var _=f.s.c;_<=f.e.c;++_){var w=ur({r:N,c:_});v=g?(x[N]||[])[_]:x[w],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,x,N,_))}return b.join(y)+y+p.join(y)+y+"E"+y}return{to_workbook:l,to_sheet:i,from_sheet:m}}(),Kge=function(){function t(o,i){switch(i.type){case"base64":return r(Bo(o),i);case"binary":return r(o,i);case"buffer":return r(tr&&Buffer.isBuffer(o)?o.toString("binary"):l0(o),i);case"array":return r(xb(o),i)}throw new Error("Unrecognized type "+i.type)}function r(o,i){for(var l=o.split(`
`),c=-1,d=-1,u=0,m=[];u!==l.length;++u){if(l[u].trim()==="BOT"){m[++c]=[],d=0;continue}if(!(c<0)){var x=l[u].trim().split(","),h=x[0],b=x[1];++u;for(var p=l[u]||"";(p.match(/["]/g)||[]).length&1&&u<l.length-1;)p+=`
`+l[++u];switch(p=p.trim(),+h){case-1:if(p==="BOT"){m[++c]=[],d=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?m[c][d]=!0:p==="FALSE"?m[c][d]=!1:isNaN(Co(b))?isNaN(Dx(b).getDate())?m[c][d]=b:m[c][d]=ss(b):m[c][d]=Co(b),++d;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),m[c][d++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(m=m.slice(0,i.sheetRows)),m}function a(o,i){return ju(t(o,i),i)}function s(o,i){return dc(a(o,i),i)}var n=function(){var o=function(c,d,u,m,x){c.push(d),c.push(u+","+m),c.push('"'+x.replace(/"/g,'""')+'"')},i=function(c,d,u,m){c.push(d+","+u),c.push(d==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var d=[],u=kr(c["!ref"]),m,x=Array.isArray(c);o(d,"TABLE",0,1,"sheetjs"),o(d,"VECTORS",0,u.e.r-u.s.r+1,""),o(d,"TUPLES",0,u.e.c-u.s.c+1,""),o(d,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){i(d,-1,0,"BOT");for(var b=u.s.c;b<=u.e.c;++b){var p=ur({r:h,c:b});if(m=x?(c[h]||[])[b]:c[p],!m){i(d,1,0,"");continue}switch(m.t){case"n":var f=m.w;!f&&m.v!=null&&(f=m.v),f==null?m.f&&!m.F?i(d,1,0,"="+m.f):i(d,1,0,""):i(d,0,f,"V");break;case"b":i(d,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":i(d,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Fi(m.z||qr[14],ys(ss(m.v)))),i(d,0,m.w,"V");break;default:i(d,1,0,"")}}}i(d,-1,0,"EOD");var v=`\r
`,g=d.join(v);return g}}();return{to_workbook:s,to_sheet:a,from_sheet:n}}(),s$=function(){function t(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function r(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(m,x){for(var h=m.split(`
`),b=-1,p=-1,f=0,v=[];f!==h.length;++f){var g=h[f].trim().split(":");if(g[0]==="cell"){var y=wa(g[1]);if(v.length<=y.r)for(b=v.length;b<=y.r;++b)v[b]||(v[b]=[]);switch(b=y.r,p=y.c,g[2]){case"t":v[b][p]=t(g[3]);break;case"v":v[b][p]=+g[3];break;case"vtf":var N=g[g.length-1];case"vtc":switch(g[3]){case"nl":v[b][p]=!!+g[4];break;default:v[b][p]=+g[4];break}g[2]=="vtf"&&(v[b][p]=[v[b][p],N])}}}return x&&x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}function s(m,x){return ju(a(m,x),x)}function n(m,x){return dc(s(m,x),x)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(m){if(!m||!m["!ref"])return"";for(var x=[],h=[],b,p="",f=Ls(m["!ref"]),v=Array.isArray(m),g=f.s.r;g<=f.e.r;++g)for(var y=f.s.c;y<=f.e.c;++y)if(p=ur({r:g,c:y}),b=v?(m[g]||[])[y]:m[p],!(!b||b.v==null||b.t==="z")){switch(h=["cell",p,"t"],b.t){case"s":case"str":h.push(r(b.v));break;case"n":b.f?(h[2]="vtf",h[3]="n",h[4]=b.v,h[5]=r(b.f)):(h[2]="v",h[3]=b.v);break;case"b":h[2]="vt"+(b.f?"f":"c"),h[3]="nl",h[4]=b.v?"1":"0",h[5]=r(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var N=ys(ss(b.v));h[2]="vtc",h[3]="nd",h[4]=""+N,h[5]=b.w||Fi(b.z||qr[14],N);break;case"e":continue}x.push(h.join(":"))}return x.push("sheet:c:"+(f.e.c-f.s.c+1)+":r:"+(f.e.r-f.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function u(m){return[o,i,l,i,d(m),c].join(`
`)}return{to_workbook:n,to_sheet:s,from_sheet:u}}(),Gge=function(){function t(u,m,x,h,b){b.raw?m[x][h]=u:u===""||(u==="TRUE"?m[x][h]=!0:u==="FALSE"?m[x][h]=!1:isNaN(Co(u))?isNaN(Dx(u).getDate())?m[x][h]=u:m[x][h]=ss(u):m[x][h]=Co(u))}function r(u,m){var x=m||{},h=[];if(!u||u.length===0)return h;for(var b=u.split(/[\r\n]/),p=b.length-1;p>=0&&b[p].length===0;)--p;for(var f=10,v=0,g=0;g<=p;++g)v=b[g].indexOf(" "),v==-1?v=b[g].length:v++,f=Math.max(f,v);for(g=0;g<=p;++g){h[g]=[];var y=0;for(t(b[g].slice(0,f).trim(),h,g,y,x),y=1;y<=(b[g].length-f)/10+1;++y)t(b[g].slice(f+(y-1)*10,f+y*10).trim(),h,g,y,x)}return x.sheetRows&&(h=h.slice(0,x.sheetRows)),h}var a={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function n(u){for(var m={},x=!1,h=0,b=0;h<u.length;++h)(b=u.charCodeAt(h))==34?x=!x:!x&&b in a&&(m[b]=(m[b]||0)+1);b=[];for(h in m)Object.prototype.hasOwnProperty.call(m,h)&&b.push([m[h],h]);if(!b.length){m=s;for(h in m)Object.prototype.hasOwnProperty.call(m,h)&&b.push([m[h],h])}return b.sort(function(p,f){return p[0]-f[0]||s[p[1]]-s[f[1]]}),a[b.pop()[1]]||44}function o(u,m){var x=m||{},h="",b=x.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=n(u.slice(0,1024)):x&&x.FS?h=x.FS:h=n(u.slice(0,1024));var f=0,v=0,g=0,y=0,N=0,_=h.charCodeAt(0),w=!1,S=0,C=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var k=x.dateNF!=null?dfe(x.dateNF):null;function F(){var q=u.slice(y,N),A={};if(q.charAt(0)=='"'&&q.charAt(q.length-1)=='"'&&(q=q.slice(1,-1).replace(/""/g,'"')),q.length===0)A.t="z";else if(x.raw)A.t="s",A.v=q;else if(q.trim().length===0)A.t="s",A.v=q;else if(q.charCodeAt(0)==61)q.charCodeAt(1)==34&&q.charCodeAt(q.length-1)==34?(A.t="s",A.v=q.slice(2,-1).replace(/""/g,'"')):Hbe(q)?(A.t="n",A.f=q.slice(1)):(A.t="s",A.v=q);else if(q=="TRUE")A.t="b",A.v=!0;else if(q=="FALSE")A.t="b",A.v=!1;else if(!isNaN(g=Co(q)))A.t="n",x.cellText!==!1&&(A.w=q),A.v=g;else if(!isNaN(Dx(q).getDate())||k&&q.match(k)){A.z=x.dateNF||qr[14];var T=0;k&&q.match(k)&&(q=ufe(q,x.dateNF,q.match(k)||[]),T=1),x.cellDates?(A.t="d",A.v=ss(q,T)):(A.t="n",A.v=ys(ss(q,T))),x.cellText!==!1&&(A.w=Fi(A.z,A.v instanceof Date?ys(A.v):A.v)),x.cellNF||delete A.z}else A.t="s",A.v=q;if(A.t=="z"||(x.dense?(b[f]||(b[f]=[]),b[f][v]=A):b[ur({c:v,r:f})]=A),y=N+1,C=u.charCodeAt(y),p.e.c<v&&(p.e.c=v),p.e.r<f&&(p.e.r=f),S==_)++v;else if(v=0,++f,x.sheetRows&&x.sheetRows<=f)return!0}e:for(;N<u.length;++N)switch(S=u.charCodeAt(N)){case 34:C===34&&(w=!w);break;case _:case 10:case 13:if(!w&&F())break e;break}return N-y>0&&F(),b["!ref"]=aa(p),b}function i(u,m){return!(m&&m.PRN)||m.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?o(u,m):ju(r(u,m),m)}function l(u,m){var x="",h=m.type=="string"?[0,0,0,0]:o2e(u,m);switch(m.type){case"base64":x=Bo(u);break;case"binary":x=u;break;case"buffer":m.codepage==65001?x=u.toString("utf8"):m.codepage&&typeof Ef<"u"||(x=tr&&Buffer.isBuffer(u)?u.toString("binary"):l0(u));break;case"array":x=xb(u);break;case"string":x=u;break;default:throw new Error("Unrecognized type "+m.type)}return h[0]==239&&h[1]==187&&h[2]==191?x=jm(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=jm(x):m.type=="binary"&&typeof Ef<"u",x.slice(0,19)=="socialcalc:version:"?s$.to_sheet(m.type=="string"?x:jm(x),m):i(x,m)}function c(u,m){return dc(l(u,m),m)}function d(u){for(var m=[],x=kr(u["!ref"]),h,b=Array.isArray(u),p=x.s.r;p<=x.e.r;++p){for(var f=[],v=x.s.c;v<=x.e.c;++v){var g=ur({r:p,c:v});if(h=b?(u[p]||[])[v]:u[g],!h||h.v==null){f.push("          ");continue}for(var y=(h.w||(zo(h),h.w)||"").slice(0,10);y.length<10;)y+=" ";f.push(y+(v===0?" ":""))}m.push(f.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}(),f6=function(){function t(O,L,E){if(O){As(O,O.l||0);for(var M=E.Enum||R;O.l<O.length;){var z=O.read_shift(2),le=M[z]||M[65535],Q=O.read_shift(2),ne=O.l+Q,re=le.f&&le.f(O,Q,E);if(O.l=ne,L(re,le,z))return}}}function r(O,L){switch(L.type){case"base64":return a(Nn(Bo(O)),L);case"binary":return a(Nn(O),L);case"buffer":case"array":return a(O,L)}throw"Unsupported type "+L.type}function a(O,L){if(!O)return O;var E=L||{},M=E.dense?[]:{},z="Sheet1",le="",Q=0,ne={},re=[],ae=[],ie={s:{r:0,c:0},e:{r:0,c:0}},ve=E.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)E.Enum=R,t(O,function(Ne,ot,Ke){switch(Ke){case 0:E.vers=Ne,Ne>=4096&&(E.qpro=!0);break;case 6:ie=Ne;break;case 204:Ne&&(le=Ne);break;case 222:le=Ne;break;case 15:case 51:E.qpro||(Ne[1].v=Ne[1].v.slice(1));case 13:case 14:case 16:Ke==14&&(Ne[2]&112)==112&&(Ne[2]&15)>1&&(Ne[2]&15)<15&&(Ne[1].z=E.dateNF||qr[14],E.cellDates&&(Ne[1].t="d",Ne[1].v=jR(Ne[1].v))),E.qpro&&Ne[3]>Q&&(M["!ref"]=aa(ie),ne[z]=M,re.push(z),M=E.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},Q=Ne[3],z=le||"Sheet"+(Q+1),le="");var lt=E.dense?(M[Ne[0].r]||[])[Ne[0].c]:M[ur(Ne[0])];if(lt){lt.t=Ne[1].t,lt.v=Ne[1].v,Ne[1].z!=null&&(lt.z=Ne[1].z),Ne[1].f!=null&&(lt.f=Ne[1].f);break}E.dense?(M[Ne[0].r]||(M[Ne[0].r]=[]),M[Ne[0].r][Ne[0].c]=Ne[1]):M[ur(Ne[0])]=Ne[1];break}},E);else if(O[2]==26||O[2]==14)E.Enum=B,O[2]==14&&(E.qpro=!0,O.l=0),t(O,function(Ne,ot,Ke){switch(Ke){case 204:z=Ne;break;case 22:Ne[1].v=Ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ne[3]>Q&&(M["!ref"]=aa(ie),ne[z]=M,re.push(z),M=E.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},Q=Ne[3],z="Sheet"+(Q+1)),ve>0&&Ne[0].r>=ve)break;E.dense?(M[Ne[0].r]||(M[Ne[0].r]=[]),M[Ne[0].r][Ne[0].c]=Ne[1]):M[ur(Ne[0])]=Ne[1],ie.e.c<Ne[0].c&&(ie.e.c=Ne[0].c),ie.e.r<Ne[0].r&&(ie.e.r=Ne[0].r);break;case 27:Ne[14e3]&&(ae[Ne[14e3][0]]=Ne[14e3][1]);break;case 1537:ae[Ne[0]]=Ne[1],Ne[0]==Q&&(z=Ne[1]);break}},E);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(M["!ref"]=aa(ie),ne[le||z]=M,re.push(le||z),!ae.length)return{SheetNames:re,Sheets:ne};for(var _e={},me=[],Se=0;Se<ae.length;++Se)ne[re[Se]]?(me.push(ae[Se]||re[Se]),_e[ae[Se]]=ne[ae[Se]]||ne[re[Se]]):(me.push(ae[Se]),_e[ae[Se]]={"!ref":"A1"});return{SheetNames:me,Sheets:_e}}function s(O,L){var E=L||{};if(+E.codepage>=0&&Rx(+E.codepage),E.type=="string")throw new Error("Cannot write WK1 to JS string");var M=vs(),z=kr(O["!ref"]),le=Array.isArray(O),Q=[];mt(M,0,o(1030)),mt(M,6,c(z));for(var ne=Math.min(z.e.r,8191),re=z.s.r;re<=ne;++re)for(var ae=$a(re),ie=z.s.c;ie<=z.e.c;++ie){re===z.s.r&&(Q[ie]=Wa(ie));var ve=Q[ie]+ae,_e=le?(O[re]||[])[ie]:O[ve];if(!(!_e||_e.t=="z"))if(_e.t=="n")(_e.v|0)==_e.v&&_e.v>=-32768&&_e.v<=32767?mt(M,13,h(re,ie,_e.v)):mt(M,14,p(re,ie,_e.v));else{var me=zo(_e);mt(M,15,m(re,ie,me.slice(0,239)))}}return mt(M,1),M.end()}function n(O,L){var E=L||{};if(+E.codepage>=0&&Rx(+E.codepage),E.type=="string")throw new Error("Cannot write WK3 to JS string");var M=vs();mt(M,0,i(O));for(var z=0,le=0;z<O.SheetNames.length;++z)(O.Sheets[O.SheetNames[z]]||{})["!ref"]&&mt(M,27,W(O.SheetNames[z],le++));var Q=0;for(z=0;z<O.SheetNames.length;++z){var ne=O.Sheets[O.SheetNames[z]];if(!(!ne||!ne["!ref"])){for(var re=kr(ne["!ref"]),ae=Array.isArray(ne),ie=[],ve=Math.min(re.e.r,8191),_e=re.s.r;_e<=ve;++_e)for(var me=$a(_e),Se=re.s.c;Se<=re.e.c;++Se){_e===re.s.r&&(ie[Se]=Wa(Se));var Ne=ie[Se]+me,ot=ae?(ne[_e]||[])[Se]:ne[Ne];if(!(!ot||ot.t=="z"))if(ot.t=="n")mt(M,23,F(_e,Se,Q,ot.v));else{var Ke=zo(ot);mt(M,22,S(_e,Se,Q,Ke.slice(0,239)))}}++Q}}return mt(M,1),M.end()}function o(O){var L=qe(2);return L.write_shift(2,O),L}function i(O){var L=qe(26);L.write_shift(2,4096),L.write_shift(2,4),L.write_shift(4,0);for(var E=0,M=0,z=0,le=0;le<O.SheetNames.length;++le){var Q=O.SheetNames[le],ne=O.Sheets[Q];if(!(!ne||!ne["!ref"])){++z;var re=Ls(ne["!ref"]);E<re.e.r&&(E=re.e.r),M<re.e.c&&(M=re.e.c)}}return E>8191&&(E=8191),L.write_shift(2,E),L.write_shift(1,z),L.write_shift(1,M),L.write_shift(2,0),L.write_shift(2,0),L.write_shift(1,1),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(4,0),L}function l(O,L,E){var M={s:{c:0,r:0},e:{c:0,r:0}};return L==8&&E.qpro?(M.s.c=O.read_shift(1),O.l++,M.s.r=O.read_shift(2),M.e.c=O.read_shift(1),O.l++,M.e.r=O.read_shift(2),M):(M.s.c=O.read_shift(2),M.s.r=O.read_shift(2),L==12&&E.qpro&&(O.l+=2),M.e.c=O.read_shift(2),M.e.r=O.read_shift(2),L==12&&E.qpro&&(O.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(O){var L=qe(8);return L.write_shift(2,O.s.c),L.write_shift(2,O.s.r),L.write_shift(2,O.e.c),L.write_shift(2,O.e.r),L}function d(O,L,E){var M=[{c:0,r:0},{t:"n",v:0},0,0];return E.qpro&&E.vers!=20768?(M[0].c=O.read_shift(1),M[3]=O.read_shift(1),M[0].r=O.read_shift(2),O.l+=2):(M[2]=O.read_shift(1),M[0].c=O.read_shift(2),M[0].r=O.read_shift(2)),M}function u(O,L,E){var M=O.l+L,z=d(O,L,E);if(z[1].t="s",E.vers==20768){O.l++;var le=O.read_shift(1);return z[1].v=O.read_shift(le,"utf8"),z}return E.qpro&&O.l++,z[1].v=O.read_shift(M-O.l,"cstr"),z}function m(O,L,E){var M=qe(7+E.length);M.write_shift(1,255),M.write_shift(2,L),M.write_shift(2,O),M.write_shift(1,39);for(var z=0;z<M.length;++z){var le=E.charCodeAt(z);M.write_shift(1,le>=128?95:le)}return M.write_shift(1,0),M}function x(O,L,E){var M=d(O,L,E);return M[1].v=O.read_shift(2,"i"),M}function h(O,L,E){var M=qe(7);return M.write_shift(1,255),M.write_shift(2,L),M.write_shift(2,O),M.write_shift(2,E,"i"),M}function b(O,L,E){var M=d(O,L,E);return M[1].v=O.read_shift(8,"f"),M}function p(O,L,E){var M=qe(13);return M.write_shift(1,255),M.write_shift(2,L),M.write_shift(2,O),M.write_shift(8,E,"f"),M}function f(O,L,E){var M=O.l+L,z=d(O,L,E);if(z[1].v=O.read_shift(8,"f"),E.qpro)O.l=M;else{var le=O.read_shift(2);N(O.slice(O.l,O.l+le),z),O.l+=le}return z}function v(O,L,E){var M=L&32768;return L&=-32769,L=(M?O:0)+(L>=8192?L-16384:L),(M?"":"$")+(E?Wa(L):$a(L))}var g={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(O,L){As(O,0);for(var E=[],M=0,z="",le="",Q="",ne="";O.l<O.length;){var re=O[O.l++];switch(re){case 0:E.push(O.read_shift(8,"f"));break;case 1:le=v(L[0].c,O.read_shift(2),!0),z=v(L[0].r,O.read_shift(2),!1),E.push(le+z);break;case 2:{var ae=v(L[0].c,O.read_shift(2),!0),ie=v(L[0].r,O.read_shift(2),!1);le=v(L[0].c,O.read_shift(2),!0),z=v(L[0].r,O.read_shift(2),!1),E.push(ae+ie+":"+le+z)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:E.push("("+E.pop()+")");break;case 5:E.push(O.read_shift(2));break;case 6:{for(var ve="";re=O[O.l++];)ve+=String.fromCharCode(re);E.push('"'+ve.replace(/"/g,'""')+'"')}break;case 8:E.push("-"+E.pop());break;case 23:E.push("+"+E.pop());break;case 22:E.push("NOT("+E.pop()+")");break;case 20:case 21:ne=E.pop(),Q=E.pop(),E.push(["AND","OR"][re-20]+"("+Q+","+ne+")");break;default:if(re<32&&y[re])ne=E.pop(),Q=E.pop(),E.push(Q+y[re]+ne);else if(g[re]){if(M=g[re][1],M==69&&(M=O[O.l++]),M>E.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+E.join("|")+"|");return}var _e=E.slice(-M);E.length-=M,E.push(g[re][0]+"("+_e.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}E.length==1?L[1].f=""+E[0]:console.error("WK1 bad formula parse |"+E.join("|")+"|")}function _(O){var L=[{c:0,r:0},{t:"n",v:0},0];return L[0].r=O.read_shift(2),L[3]=O[O.l++],L[0].c=O[O.l++],L}function w(O,L){var E=_(O);return E[1].t="s",E[1].v=O.read_shift(L-4,"cstr"),E}function S(O,L,E,M){var z=qe(6+M.length);z.write_shift(2,O),z.write_shift(1,E),z.write_shift(1,L),z.write_shift(1,39);for(var le=0;le<M.length;++le){var Q=M.charCodeAt(le);z.write_shift(1,Q>=128?95:Q)}return z.write_shift(1,0),z}function C(O,L){var E=_(O);E[1].v=O.read_shift(2);var M=E[1].v>>1;if(E[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return E[1].v=M,E}function k(O,L){var E=_(O),M=O.read_shift(4),z=O.read_shift(4),le=O.read_shift(2);if(le==65535)return M===0&&z===3221225472?(E[1].t="e",E[1].v=15):M===0&&z===3489660928?(E[1].t="e",E[1].v=42):E[1].v=0,E;var Q=le&32768;return le=(le&32767)-16446,E[1].v=(1-Q*2)*(z*Math.pow(2,le+32)+M*Math.pow(2,le)),E}function F(O,L,E,M){var z=qe(14);if(z.write_shift(2,O),z.write_shift(1,E),z.write_shift(1,L),M==0)return z.write_shift(4,0),z.write_shift(4,0),z.write_shift(2,65535),z;var le=0,Q=0,ne=0,re=0;return M<0&&(le=1,M=-M),Q=Math.log2(M)|0,M/=Math.pow(2,Q-31),re=M>>>0,re&2147483648||(M/=2,++Q,re=M>>>0),M-=re,re|=2147483648,re>>>=0,M*=Math.pow(2,32),ne=M>>>0,z.write_shift(4,ne),z.write_shift(4,re),Q+=16383+(le?32768:0),z.write_shift(2,Q),z}function q(O,L){var E=k(O);return O.l+=L-14,E}function A(O,L){var E=_(O),M=O.read_shift(4);return E[1].v=M>>6,E}function T(O,L){var E=_(O),M=O.read_shift(8,"f");return E[1].v=M,E}function U(O,L){var E=T(O);return O.l+=L-10,E}function K(O,L){return O[O.l+L-1]==0?O.read_shift(L,"cstr"):""}function I(O,L){var E=O[O.l++];E>L-1&&(E=L-1);for(var M="";M.length<E;)M+=String.fromCharCode(O[O.l++]);return M}function Y(O,L,E){if(!(!E.qpro||L<21)){var M=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var z=O.read_shift(L-21,"cstr");return[M,z]}}function D(O,L){for(var E={},M=O.l+L;O.l<M;){var z=O.read_shift(2);if(z==14e3){for(E[z]=[0,""],E[z][0]=O.read_shift(2);O[O.l];)E[z][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return E}function W(O,L){var E=qe(5+O.length);E.write_shift(2,14e3),E.write_shift(2,L);for(var M=0;M<O.length;++M){var z=O.charCodeAt(M);E[E.l++]=z>127?95:z}return E[E.l++]=0,E}var R={0:{n:"BOF",f:ZR},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:u},16:{n:"FORMULA",f},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:I},65535:{n:""}},B={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:w},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:q},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:D},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:T},40:{n:"FORMULA28",f:U},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Y},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:n,to_workbook:r}}(),Xge=/^\s|\s$|[\t\n\r]/;function n$(t,r){if(!r.bookSST)return"";var a=[oa];a[a.length]=dt("sst",null,{xmlns:yu[0],count:t.Count,uniqueCount:t.Unique});for(var s=0;s!=t.length;++s)if(t[s]!=null){var n=t[s],o="<si>";n.r?o+=n.r:(o+="<t",n.t||(n.t=""),n.t.match(Xge)&&(o+=' xml:space="preserve"'),o+=">"+cr(n.t)+"</t>"),o+="</si>",a[a.length]=o}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function Yge(t){return[t.read_shift(4),t.read_shift(4)]}function Qge(t,r){return r||(r=qe(8)),r.write_shift(4,t.Count),r.write_shift(4,t.Unique),r}var Jge=qfe;function Zge(t){var r=vs();Ge(r,159,Qge(t));for(var a=0;a<t.length;++a)Ge(r,19,Jge(t[a]));return Ge(r,160),r.end()}function ebe(t){for(var r=[],a=t.split(""),s=0;s<a.length;++s)r[s]=a[s].charCodeAt(0);return r}function o$(t){var r=0,a,s=ebe(t),n=s.length+1,o,i,l,c,d;for(a=Ql(n),a[0]=s.length,o=1;o!=n;++o)a[o]=s[o-1];for(o=n-1;o>=0;--o)i=a[o],l=r&16384?1:0,c=r<<1&32767,d=l|c,r=d^i;return r^52811}var tbe=function(){function t(n,o){switch(o.type){case"base64":return r(Bo(n),o);case"binary":return r(n,o);case"buffer":return r(tr&&Buffer.isBuffer(n)?n.toString("binary"):l0(n),o);case"array":return r(xb(n),o)}throw new Error("Unrecognized type "+o.type)}function r(n,o){var i=o||{},l=i.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,m){Array.isArray(l)&&(l[m]=[]);for(var x=/\\\w+\b/g,h=0,b,p=-1;b=x.exec(u);){switch(b[0]){case"\\cell":var f=u.slice(h,x.lastIndex-b[0].length);if(f[0]==" "&&(f=f.slice(1)),++p,f.length){var v={v:f,t:"s"};Array.isArray(l)?l[m][p]=v:l[ur({r:m,c:p})]=v}break}h=x.lastIndex}p>d.e.c&&(d.e.c=p)}),l["!ref"]=aa(d),l}function a(n,o){return dc(t(n,o),o)}function s(n){for(var o=["{\\rtf1\\ansi"],i=kr(n["!ref"]),l,c=Array.isArray(n),d=i.s.r;d<=i.e.r;++d){o.push("\\trowd\\trautofit1");for(var u=i.s.c;u<=i.e.c;++u)o.push("\\cellx"+(u+1));for(o.push("\\pard\\intbl"),u=i.s.c;u<=i.e.c;++u){var m=ur({r:d,c:u});l=c?(n[d]||[])[u]:n[m],!(!l||l.v==null&&(!l.f||l.F))&&(o.push(" "+(l.w||(zo(l),l.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:s}}();function g6(t){for(var r=0,a=1;r!=3;++r)a=a*256+(t[r]>255?255:t[r]<0?0:t[r]);return a.toString(16).toUpperCase().slice(1)}var rbe=6,ko=rbe;function Mf(t){return Math.floor((t+Math.round(128/ko)/256)*ko)}function If(t){return Math.floor((t-5)/ko*100+.5)/100}function A1(t){return Math.round((t*ko+5)/ko*256)/256}function uw(t){t.width?(t.wpx=Mf(t.width),t.wch=If(t.wpx),t.MDW=ko):t.wpx?(t.wch=If(t.wpx),t.width=A1(t.wch),t.MDW=ko):typeof t.wch=="number"&&(t.width=A1(t.wch),t.wpx=Mf(t.width),t.MDW=ko),t.customWidth&&delete t.customWidth}var abe=96,i$=abe;function Lf(t){return t*96/i$}function l$(t){return t*i$/96}function sbe(t){var r=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&(r[r.length]=dt("numFmt",null,{numFmtId:s,formatCode:cr(t[s])}))}),r.length===1?"":(r[r.length]="</numFmts>",r[0]=dt("numFmts",null,{count:r.length-2}).replace("/>",">"),r.join(""))}function nbe(t){var r=[];return r[r.length]=dt("cellXfs",null),t.forEach(function(a){r[r.length]=dt("xf",null,a)}),r[r.length]="</cellXfs>",r.length===2?"":(r[0]=dt("cellXfs",null,{count:r.length-2}).replace("/>",">"),r.join(""))}function c$(t,r){var a=[oa,dt("styleSheet",null,{xmlns:yu[0],"xmlns:vt":Na.vt})],s;return t.SSF&&(s=sbe(t.SSF))!=null&&(a[a.length]=s),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=nbe(r.cellXfs))&&(a[a.length]=s),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function obe(t,r){var a=t.read_shift(2),s=Ha(t);return[a,s]}function ibe(t,r,a){a||(a=qe(6+4*r.length)),a.write_shift(2,t),_a(r,a);var s=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),s}function lbe(t,r,a){var s={};s.sz=t.read_shift(2)/20;var n=Xfe(t);n.fItalic&&(s.italic=1),n.fCondense&&(s.condense=1),n.fExtend&&(s.extend=1),n.fShadow&&(s.shadow=1),n.fOutline&&(s.outline=1),n.fStrikeout&&(s.strike=1);var o=t.read_shift(2);switch(o===700&&(s.bold=1),t.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(s.underline=i);var l=t.read_shift(1);l>0&&(s.family=l);var c=t.read_shift(1);switch(c>0&&(s.charset=c),t.l++,s.color=Gfe(t),t.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Ha(t),s}function cbe(t,r){r||(r=qe(25+4*32)),r.write_shift(2,t.sz*20),Yfe(t,r),r.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),r.write_shift(2,a),r.write_shift(1,t.underline||0),r.write_shift(1,t.family||0),r.write_shift(1,t.charset||0),r.write_shift(1,0),$f(t.color,r);var s=0;return s=2,r.write_shift(1,s),_a(t.name,r),r.length>r.l?r.slice(0,r.l):r}var dbe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Tv,ube=ro;function b6(t,r){r||(r=qe(4*3+8*7+16*1)),Tv||(Tv=ZN(dbe));var a=Tv[t.patternType];a==null&&(a=40),r.write_shift(4,a);var s=0;if(a!=40)for($f({auto:1},r),$f({auto:1},r);s<12;++s)r.write_shift(4,0);else{for(;s<4;++s)r.write_shift(4,0);for(;s<12;++s)r.write_shift(4,0)}return r.length>r.l?r.slice(0,r.l):r}function mbe(t,r){var a=t.l+r,s=t.read_shift(2),n=t.read_shift(2);return t.l=a,{ixfe:s,numFmtId:n}}function d$(t,r,a){a||(a=qe(16)),a.write_shift(2,r||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var s=0;return a.write_shift(1,s),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function Ku(t,r){return r||(r=qe(10)),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(4,0),r}var xbe=ro;function pbe(t,r){return r||(r=qe(51)),r.write_shift(1,0),Ku(null,r),Ku(null,r),Ku(null,r),Ku(null,r),Ku(null,r),r.length>r.l?r.slice(0,r.l):r}function hbe(t,r){return r||(r=qe(12+4*10)),r.write_shift(4,t.xfId),r.write_shift(2,1),r.write_shift(1,0),r.write_shift(1,0),Rf(t.name||"",r),r.length>r.l?r.slice(0,r.l):r}function fbe(t,r,a){var s=qe(2052);return s.write_shift(4,t),Rf(r,s),Rf(a,s),s.length>s.l?s.slice(0,s.l):s}function gbe(t,r){if(r){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&++a}),a!=0&&(Ge(t,615,An(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&Ge(t,44,ibe(n,r[n]))}),Ge(t,616))}}function bbe(t){var r=1;Ge(t,611,An(r)),Ge(t,43,cbe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ge(t,612)}function vbe(t){var r=2;Ge(t,603,An(r)),Ge(t,45,b6({patternType:"none"})),Ge(t,45,b6({patternType:"gray125"})),Ge(t,604)}function ybe(t){var r=1;Ge(t,613,An(r)),Ge(t,46,pbe()),Ge(t,614)}function jbe(t){var r=1;Ge(t,626,An(r)),Ge(t,47,d$({numFmtId:0},65535)),Ge(t,627)}function Nbe(t,r){Ge(t,617,An(r.length)),r.forEach(function(a){Ge(t,47,d$(a,0))}),Ge(t,618)}function wbe(t){var r=1;Ge(t,619,An(r)),Ge(t,48,hbe({xfId:0,name:"Normal"})),Ge(t,620)}function _be(t){var r=0;Ge(t,505,An(r)),Ge(t,506)}function Sbe(t){var r=0;Ge(t,508,fbe(r,"TableStyleMedium9","PivotStyleMedium4")),Ge(t,509)}function Cbe(t,r){var a=vs();return Ge(a,278),gbe(a,t.SSF),bbe(a),vbe(a),ybe(a),jbe(a),Nbe(a,r.cellXfs),wbe(a),_be(a),Sbe(a),Ge(a,279),a.end()}function u$(t,r){if(r&&r.themeXLSX)return r.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[oa];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function kbe(t,r){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ha(t)}}function Ebe(t){var r=qe(12+2*t.name.length);return r.write_shift(4,t.flags),r.write_shift(4,t.version),_a(t.name,r),r.slice(0,r.l)}function Abe(t){for(var r=[],a=t.read_shift(4);a-- >0;)r.push([t.read_shift(4),t.read_shift(4)]);return r}function Pbe(t){var r=qe(4+8*t.length);r.write_shift(4,t.length);for(var a=0;a<t.length;++a)r.write_shift(4,t[a][0]),r.write_shift(4,t[a][1]);return r}function Tbe(t,r){var a=qe(8+2*r.length);return a.write_shift(4,t),_a(r,a),a.slice(0,a.l)}function Obe(t){return t.l+=4,t.read_shift(4)!=0}function Fbe(t,r){var a=qe(8);return a.write_shift(4,t),a.write_shift(4,1),a}function Rbe(){var t=vs();return Ge(t,332),Ge(t,334,An(1)),Ge(t,335,Ebe({name:"XLDAPR",version:12e4,flags:3496657072})),Ge(t,336),Ge(t,339,Tbe(1,"XLDAPR")),Ge(t,52),Ge(t,35,An(514)),Ge(t,4096,An(0)),Ge(t,4097,Qs(1)),Ge(t,36),Ge(t,53),Ge(t,340),Ge(t,337,Fbe(1)),Ge(t,51,Pbe([[1,0]])),Ge(t,338),Ge(t,333),t.end()}function m$(){var t=[oa];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function $be(t){var r={};r.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),r.r=ur(a);var s=t.read_shift(1);return s&2&&(r.l="1"),s&8&&(r.a="1"),r}var Gc=1024;function x$(t,r){for(var a=[21600,21600],s=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),n=[dt("xml",null,{"xmlns:v":Ps.v,"xmlns:o":Ps.o,"xmlns:x":Ps.x,"xmlns:mv":Ps.mv}).replace(/\/>/,">"),dt("o:shapelayout",dt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),dt("v:shapetype",[dt("v:stroke",null,{joinstyle:"miter"}),dt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:s})];Gc<t*1e3;)Gc+=1e3;return r.forEach(function(o){var i=wa(o[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?dt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=dt("v:fill",c,l),u={on:"t",obscured:"t"};++Gc,n=n.concat(["<v:shape"+Ix({id:"_x0000_s"+Gc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,dt("v:shadow",null,u),dt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Fa("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Fa("x:AutoFill","False"),Fa("x:Row",String(i.r)),Fa("x:Column",String(i.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function p$(t){var r=[oa,dt("comments",null,{xmlns:yu[0]})],a=[];return r.push("<authors>"),t.forEach(function(s){s[1].forEach(function(n){var o=cr(n.a);a.indexOf(o)==-1&&(a.push(o),r.push("<author>"+o+"</author>")),n.T&&n.ID&&a.indexOf("tc="+n.ID)==-1&&(a.push("tc="+n.ID),r.push("<author>tc="+n.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),r.push("<author>SheetJ5</author>")),r.push("</authors>"),r.push("<commentList>"),t.forEach(function(s){var n=0,o=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?n=a.indexOf("tc="+s[1][0].ID):s[1].forEach(function(c){c.a&&(n=a.indexOf(cr(c.a))),o.push(c.t||"")}),r.push('<comment ref="'+s[0]+'" authorId="'+n+'"><text>'),o.length<=1)r.push(Fa("t",cr(o[0]||"")));else{for(var i=`Comment:
    `+o[0]+`
`,l=1;l<o.length;++l)i+=`Reply:
    `+o[l]+`
`;r.push(Fa("t",cr(i)))}r.push("</text></comment>")}),r.push("</commentList>"),r.length>2&&(r[r.length]="</comments>",r[1]=r[1].replace("/>",">")),r.join("")}function Dbe(t,r,a){var s=[oa,dt("ThreadedComments",null,{xmlns:Na.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(n){var o="";(n[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&r.indexOf(i.a)==-1&&r.push(i.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};l==0?o=c.id:c.parentId=o,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+r.indexOf(i.a)).slice(-12)+"}"),s.push(dt("threadedComment",Fa("text",i.t||""),c))})}),s.push("</ThreadedComments>"),s.join("")}function Mbe(t){var r=[oa,dt("personList",null,{xmlns:Na.TCMNT,"xmlns:x":yu[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,s){r.push(dt("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:a,providerId:"None"}))}),r.push("</personList>"),r.join("")}function Ibe(t){var r={};r.iauthor=t.read_shift(4);var a=pc(t);return r.rfx=a.s,r.ref=ur(a.s),t.l+=16,r}function Lbe(t,r){return r==null&&(r=qe(36)),r.write_shift(4,t[1].iauthor),Nu(t[0],r),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r}var Bbe=Ha;function zbe(t){return _a(t.slice(0,54))}function qbe(t){var r=vs(),a=[];return Ge(r,628),Ge(r,630),t.forEach(function(s){s[1].forEach(function(n){a.indexOf(n.a)>-1||(a.push(n.a.slice(0,54)),Ge(r,632,zbe(n.a)))})}),Ge(r,631),Ge(r,633),t.forEach(function(s){s[1].forEach(function(n){n.iauthor=a.indexOf(n.a);var o={s:wa(s[0]),e:wa(s[0])};Ge(r,635,Lbe([o,n])),n.t&&n.t.length>0&&Ge(r,637,Ufe(n)),Ge(r,636),delete n.iauthor})}),Ge(r,634),Ge(r,629),r.end()}function Vbe(t,r){r.FullPaths.forEach(function(a,s){if(s!=0){var n=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&hr.utils.cfb_add(t,n,r.FileIndex[s].content)}})}var h$=["xlsb","xlsm","xlam","biff8","xla"],Ube=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,r={r:0,c:0};function a(s,n,o,i){var l=!1,c=!1;o.length==0?c=!0:o.charAt(0)=="["&&(c=!0,o=o.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var d=o.length>0?parseInt(o,10)|0:0,u=i.length>0?parseInt(i,10)|0:0;return l?u+=r.c:--u,c?d+=r.r:--d,n+(l?"":"$")+Wa(u)+(c?"":"$")+$a(d)}return function(n,o){return r=o,n.replace(t,a)}}(),mw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xw=function(){return function(r,a){return r.replace(mw,function(s,n,o,i,l,c){var d=ow(i)-(o?0:a.c),u=nw(c)-(l?0:a.r),m=u==0?"":l?u+1:"["+u+"]",x=d==0?"":o?d+1:"["+d+"]";return n+"R"+m+"C"+x})}}();function Wbe(t,r){return t.replace(mw,function(a,s,n,o,i,l){return s+(n=="$"?n+o:Wa(ow(o)+r.c))+(i=="$"?i+l:$a(nw(l)+r.r))})}function Hbe(t){return t.length!=1}function Qr(t){t.l+=1}function Ri(t,r){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function f$(t,r,a){var s=2;if(a){if(a.biff>=2&&a.biff<=5)return g$(t);a.biff==12&&(s=4)}var n=t.read_shift(s),o=t.read_shift(s),i=Ri(t),l=Ri(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:o,c:l[0],cRel:l[1],rRel:l[2]}}}function g$(t){var r=Ri(t),a=Ri(t),s=t.read_shift(1),n=t.read_shift(1);return{s:{r:r[0],c:s,cRel:r[1],rRel:r[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function Kbe(t,r,a){if(a.biff<8)return g$(t);var s=t.read_shift(a.biff==12?4:2),n=t.read_shift(a.biff==12?4:2),o=Ri(t),i=Ri(t);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:n,c:i[0],cRel:i[1],rRel:i[2]}}}function b$(t,r,a){if(a&&a.biff>=2&&a.biff<=5)return Gbe(t);var s=t.read_shift(a&&a.biff==12?4:2),n=Ri(t);return{r:s,c:n[0],cRel:n[1],rRel:n[2]}}function Gbe(t){var r=Ri(t),a=t.read_shift(1);return{r:r[0],c:a,cRel:r[1],rRel:r[2]}}function Xbe(t){var r=t.read_shift(2),a=t.read_shift(2);return{r,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function Ybe(t,r,a){var s=a&&a.biff?a.biff:8;if(s>=2&&s<=5)return Qbe(t);var n=t.read_shift(s>=12?4:2),o=t.read_shift(2),i=(o&16384)>>14,l=(o&32768)>>15;if(o&=16383,l==1)for(;n>524287;)n-=1048576;if(i==1)for(;o>8191;)o=o-16384;return{r:n,c:o,cRel:i,rRel:l}}function Qbe(t){var r=t.read_shift(2),a=t.read_shift(1),s=(r&32768)>>15,n=(r&16384)>>14;return r&=16383,s==1&&r>=8192&&(r=r-16384),n==1&&a>=128&&(a=a-256),{r,c:a,cRel:n,rRel:s}}function Jbe(t,r,a){var s=(t[t.l++]&96)>>5,n=f$(t,a.biff>=2&&a.biff<=5?6:8,a);return[s,n]}function Zbe(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var i=f$(t,o,a);return[s,n,i]}function eve(t,r,a){var s=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[s]}function tve(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[s,n]}function rve(t,r,a){var s=(t[t.l++]&96)>>5,n=Kbe(t,r-1,a);return[s,n]}function ave(t,r,a){var s=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[s]}function v6(t){var r=t[t.l+1]&1,a=1;return t.l+=4,[r,a]}function sve(t,r,a){t.l+=2;for(var s=t.read_shift(a&&a.biff==2?1:2),n=[],o=0;o<=s;++o)n.push(t.read_shift(a&&a.biff==2?1:2));return n}function nve(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(a&&a.biff==2?1:2)]}function ove(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(a&&a.biff==2?1:2)]}function ive(t){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(2)]}function lve(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[s]}function v$(t){var r=t.read_shift(1),a=t.read_shift(1);return[r,a]}function cve(t){return t.read_shift(2),v$(t)}function dve(t){return t.read_shift(2),v$(t)}function uve(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=b$(t,0,a);return[s,n]}function mve(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=Ybe(t,0,a);return[s,n]}function xve(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var o=b$(t,0,a);return[s,n,o]}function pve(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(a&&a.biff<=3?1:2);return[pye[n],N$[n],s]}function hve(t,r,a){var s=t[t.l++],n=t.read_shift(1),o=a&&a.biff<=3?[s==88?-1:0,t.read_shift(1)]:fve(t);return[n,(o[0]===0?N$:xye)[o[1]]]}function fve(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function gve(t,r,a){t.l+=a&&a.biff==2?3:4}function bve(t,r,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var s=t.read_shift(2),n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function vve(t){return t.l++,u0[t.read_shift(1)]}function yve(t){return t.l++,t.read_shift(2)}function jve(t){return t.l++,t.read_shift(1)!==0}function Nve(t){return t.l++,wu(t)}function wve(t,r,a){return t.l++,t$(t,r-1,a)}function _ve(t,r){var a=[t.read_shift(1)];if(r==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=xge(t,1)?"TRUE":"FALSE",r!=12&&(t.l+=7);break;case 37:case 16:a[1]=u0[t[t.l]],t.l+=r==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=wu(t);break;case 2:a[1]=gge(t,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function Sve(t,r,a){for(var s=t.read_shift(a.biff==12?4:2),n=[],o=0;o!=s;++o)n.push((a.biff==12?pc:yge)(t));return n}function Cve(t,r,a){var s=0,n=0;a.biff==12?(s=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),s=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--s,--n==0&&(n=256));for(var o=0,i=[];o!=s&&(i[o]=[]);++o)for(var l=0;l!=n;++l)i[o][l]=_ve(t,a.biff);return i}function kve(t,r,a){var s=t.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,o=t.read_shift(n);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[s,0,o]}function Eve(t,r,a){if(a.biff==5)return Ave(t);var s=t.read_shift(1)>>>5&3,n=t.read_shift(2),o=t.read_shift(4);return[s,n,o]}function Ave(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var s=t.read_shift(2);return t.l+=12,[r,a,s]}function Pve(t,r,a){var s=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function Tve(t,r,a){var s=t.read_shift(1)>>>5&3,n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function Ove(t,r,a){var s=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[s]}function Fve(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),o=4;if(a)switch(a.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[s,n]}var Rve=ro,$ve=ro,Dve=ro;function m0(t,r,a){return t.l+=2,[Xbe(t)]}function pw(t){return t.l+=6,[]}var Mve=m0,Ive=pw,Lve=pw,Bve=m0;function y$(t){return t.l+=2,[ZR(t),t.read_shift(2)&1]}var zve=m0,qve=y$,Vve=pw,Uve=m0,Wve=m0,Hve=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Kve(t){t.l+=2;var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(4),n=t.read_shift(2),o=t.read_shift(2),i=Hve[a>>2&31];return{ixti:r,coltype:a&3,rt:i,idx:s,c:n,C:o}}function Gve(t){return t.l+=2,[t.read_shift(4)]}function Xve(t,r,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function Yve(t,r,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function Qve(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[r,a]}function Jve(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[r,a]}function Zve(t){return t.l+=4,[0,0]}var y6={1:{n:"PtgExp",f:bve},2:{n:"PtgTbl",f:Dve},3:{n:"PtgAdd",f:Qr},4:{n:"PtgSub",f:Qr},5:{n:"PtgMul",f:Qr},6:{n:"PtgDiv",f:Qr},7:{n:"PtgPower",f:Qr},8:{n:"PtgConcat",f:Qr},9:{n:"PtgLt",f:Qr},10:{n:"PtgLe",f:Qr},11:{n:"PtgEq",f:Qr},12:{n:"PtgGe",f:Qr},13:{n:"PtgGt",f:Qr},14:{n:"PtgNe",f:Qr},15:{n:"PtgIsect",f:Qr},16:{n:"PtgUnion",f:Qr},17:{n:"PtgRange",f:Qr},18:{n:"PtgUplus",f:Qr},19:{n:"PtgUminus",f:Qr},20:{n:"PtgPercent",f:Qr},21:{n:"PtgParen",f:Qr},22:{n:"PtgMissArg",f:Qr},23:{n:"PtgStr",f:wve},26:{n:"PtgSheet",f:Xve},27:{n:"PtgEndSheet",f:Yve},28:{n:"PtgErr",f:vve},29:{n:"PtgBool",f:jve},30:{n:"PtgInt",f:yve},31:{n:"PtgNum",f:Nve},32:{n:"PtgArray",f:ave},33:{n:"PtgFunc",f:pve},34:{n:"PtgFuncVar",f:hve},35:{n:"PtgName",f:kve},36:{n:"PtgRef",f:uve},37:{n:"PtgArea",f:Jbe},38:{n:"PtgMemArea",f:Pve},39:{n:"PtgMemErr",f:Rve},40:{n:"PtgMemNoMem",f:$ve},41:{n:"PtgMemFunc",f:Tve},42:{n:"PtgRefErr",f:Ove},43:{n:"PtgAreaErr",f:eve},44:{n:"PtgRefN",f:mve},45:{n:"PtgAreaN",f:rve},46:{n:"PtgMemAreaN",f:Qve},47:{n:"PtgMemNoMemN",f:Jve},57:{n:"PtgNameX",f:Eve},58:{n:"PtgRef3d",f:xve},59:{n:"PtgArea3d",f:Zbe},60:{n:"PtgRefErr3d",f:Fve},61:{n:"PtgAreaErr3d",f:tve},255:{}},eye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},tye={1:{n:"PtgElfLel",f:y$},2:{n:"PtgElfRw",f:Uve},3:{n:"PtgElfCol",f:Mve},6:{n:"PtgElfRwV",f:Wve},7:{n:"PtgElfColV",f:Bve},10:{n:"PtgElfRadical",f:zve},11:{n:"PtgElfRadicalS",f:Vve},13:{n:"PtgElfColS",f:Ive},15:{n:"PtgElfColSV",f:Lve},16:{n:"PtgElfRadicalLel",f:qve},25:{n:"PtgList",f:Kve},29:{n:"PtgSxName",f:Gve},255:{}},rye={0:{n:"PtgAttrNoop",f:Zve},1:{n:"PtgAttrSemi",f:lve},2:{n:"PtgAttrIf",f:ove},4:{n:"PtgAttrChoose",f:sve},8:{n:"PtgAttrGoto",f:nve},16:{n:"PtgAttrSum",f:gve},32:{n:"PtgAttrBaxcel",f:v6},33:{n:"PtgAttrBaxcel",f:v6},64:{n:"PtgAttrSpace",f:cve},65:{n:"PtgAttrSpaceSemi",f:dve},128:{n:"PtgAttrIfError",f:ive},255:{}};function aye(t,r,a,s){if(s.biff<8)return ro(t,r);for(var n=t.l+r,o=[],i=0;i!==a.length;++i)switch(a[i][0]){case"PtgArray":a[i][1]=Cve(t,0,s),o.push(a[i][1]);break;case"PtgMemArea":a[i][2]=Sve(t,a[i][1],s),o.push(a[i][2]);break;case"PtgExp":s&&s.biff==12&&(a[i][1][1]=t.read_shift(4),o.push(a[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[i][0]}return r=n-t.l,r!==0&&o.push(ro(t,r)),o}function sye(t,r,a){for(var s=t.l+r,n,o,i=[];s!=t.l;)r=s-t.l,o=t[t.l],n=y6[o]||y6[eye[o]],(o===24||o===25)&&(n=(o===24?tye:rye)[t[t.l+1]]),!n||!n.f?ro(t,r):i.push([n.n,n.f(t,r,a)]);return i}function nye(t){for(var r=[],a=0;a<t.length;++a){for(var s=t[a],n=[],o=0;o<s.length;++o){var i=s[o];if(i)switch(i[0]){case 2:n.push('"'+i[1].replace(/"/g,'""')+'"');break;default:n.push(i[1])}else n.push("")}r.push(n.join(","))}return r.join(";")}var oye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function iye(t,r){if(!t&&!(r&&r.biff<=5&&r.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function j$(t,r,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[r]))return t.SheetNames[r];if(!t.XTI)return"SH33TJSERR6";var s=t.XTI[r];if(a.biff<8)return r>1e4&&(r-=65536),r<0&&(r=-r),r==0?"":t.XTI[r-1];if(!s)return"SH33TJSERR1";var n="";if(a.biff>8)switch(t[s[0]][0]){case 357:return n=s[1]==-1?"#REF":t.SheetNames[s[1]],s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[s[0]][0];case 355:default:return"SH33TJSSRC"+t[s[0]][0]}switch(t[s[0]][0][0]){case 1025:return n=s[1]==-1?"#REF":t.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 14849:return t[s[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[s[0]][0][3]?(n=s[1]==-1?"#REF":t[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?n:n+":"+t[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function j6(t,r,a){var s=j$(t,r,a);return s=="#REF"?s:iye(s,a)}function Zd(t,r,a,s,n){var o=n&&n.biff||8,i={s:{c:0,r:0}},l=[],c,d,u,m=0,x=0,h,b="";if(!t[0]||!t[0][0])return"";for(var p=-1,f="",v=0,g=t[0].length;v<g;++v){var y=t[0][v];switch(y[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:f=Br(" ",t[0][p][1][1]);break;case 1:f=Br("\r",t[0][p][1][1]);break;default:if(f="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}d=d+f,p=-1}l.push(d+oye[y[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=wm(y[1][1],i,n),l.push(_m(u,o));break;case"PtgRefN":u=a?wm(y[1][1],a,n):y[1][1],l.push(_m(u,o));break;case"PtgRef3d":m=y[1][1],u=wm(y[1][2],i,n),b=j6(s,m,n),l.push(b+"!"+_m(u,o));break;case"PtgFunc":case"PtgFuncVar":var N=y[1][0],_=y[1][1];N||(N=0),N&=127;var w=N==0?[]:l.slice(-N);l.length-=N,_==="User"&&(_=w.shift()),l.push(_+"("+w.join(",")+")");break;case"PtgBool":l.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(y[1]);break;case"PtgNum":l.push(String(y[1]));break;case"PtgStr":l.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(y[1]);break;case"PtgAreaN":h=n6(y[1][1],a?{s:a}:i,n),l.push(Av(h,n));break;case"PtgArea":h=n6(y[1][1],i,n),l.push(Av(h,n));break;case"PtgArea3d":m=y[1][1],h=y[1][2],b=j6(s,m,n),l.push(b+"!"+Av(h,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=y[1][2];var S=(s.names||[])[x-1]||(s[0]||[])[x],C=S?S.Name:"SH33TJSNAME"+String(x);C&&C.slice(0,6)=="_xlfn."&&!n.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var k=y[1][1];x=y[1][2];var F;if(n.biff<=5)k<0&&(k=-k),s[k]&&(F=s[k][x]);else{var q="";if(((s[k]||[])[0]||[])[0]==14849||(((s[k]||[])[0]||[])[0]==1025?s[k][x]&&s[k][x].itab>0&&(q=s.SheetNames[s[k][x].itab-1]+"!"):q=s.SheetNames[x-1]+"!"),s[k]&&s[k][x])q+=s[k][x].Name;else if(s[0]&&s[0][x])q+=s[0][x].Name;else{var A=(j$(s,k,n)||"").split(";;");A[x-1]?q=A[x-1]:q+="SH33TJSERRX"}l.push(q);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var T="(",U=")";if(p>=0){switch(f="",t[0][p][1][0]){case 2:T=Br(" ",t[0][p][1][1])+T;break;case 3:T=Br("\r",t[0][p][1][1])+T;break;case 4:U=Br(" ",t[0][p][1][1])+U;break;case 5:U=Br("\r",t[0][p][1][1])+U;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(T+l.pop()+U);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:y[1][1],r:y[1][0]};var K={c:a.c,r:a.r};if(s.sharedf[ur(u)]){var I=s.sharedf[ur(u)];l.push(Zd(I,i,K,s,n))}else{var Y=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(Zd(d[1],i,K,s,n)),Y=!0;break}Y||l.push(y[1])}break;case"PtgArray":l.push("{"+nye(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var D=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&p>=0&&D.indexOf(t[0][v][0])==-1){y=t[0][p];var W=!0;switch(y[1][0]){case 4:W=!1;case 0:f=Br(" ",y[1][1]);break;case 5:W=!1;case 1:f=Br("\r",y[1][1]);break;default:if(f="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}l.push((W?f:"")+l.pop()+(W?"":f)),p=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function lye(t){if(t==null){var r=qe(8);return r.write_shift(1,3),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,65535),r}else if(typeof t=="number")return Jl(t);return Jl(0)}function cye(t,r,a,s,n){var o=Zl(r,a,n),i=lye(t.v),l=qe(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=qe(t.bf.length),u=0;u<t.bf.length;++u)d[u]=t.bf[u];var m=Oa([o,i,l,d]);return m}function pb(t,r,a){var s=t.read_shift(4),n=sye(t,s,a),o=t.read_shift(4),i=o>0?aye(t,o,n,a):null;return[n,i]}var dye=pb,hb=pb,uye=pb,mye=pb,xye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},N$={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},pye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hye(t){var r="of:="+t.replace(mw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function fye(t){return t.replace(/\./,"!")}var Sm=typeof Map<"u";function hw(t,r,a){var s=0,n=t.length;if(a){if(Sm?a.has(r):Object.prototype.hasOwnProperty.call(a,r)){for(var o=Sm?a.get(r):a[r];s<o.length;++s)if(t[o[s]].t===r)return t.Count++,o[s]}}else for(;s<n;++s)if(t[s].t===r)return t.Count++,s;return t[n]={t:r},t.Count++,t.Unique++,a&&(Sm?(a.has(r)||a.set(r,[]),a.get(r).push(n)):(Object.prototype.hasOwnProperty.call(a,r)||(a[r]=[]),a[r].push(n))),n}function fb(t,r){var a={min:t+1,max:t+1},s=-1;return r.MDW&&(ko=r.MDW),r.width!=null?a.customWidth=1:r.wpx!=null?s=If(r.wpx):r.wch!=null&&(s=r.wch),s>-1?(a.width=A1(s),a.customWidth=1):r.width!=null&&(a.width=r.width),r.hidden&&(a.hidden=!0),r.level!=null&&(a.outlineLevel=a.level=r.level),a}function w$(t,r){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Ki(t,r,a){var s=a.revssf[r.z!=null?r.z:"General"],n=60,o=t.length;if(s==null&&a.ssf){for(;n<392;++n)if(a.ssf[n]==null){bR(r.z,n),a.ssf[n]=r.z,a.revssf[r.z]=s=n;break}}for(n=0;n!=o;++n)if(t[n].numFmtId===s)return n;return t[o]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function gye(t,r,a){if(t&&t["!ref"]){var s=kr(t["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function bye(t){if(t.length===0)return"";for(var r='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)r+='<mergeCell ref="'+aa(t[a])+'"/>';return r+"</mergeCells>"}function vye(t,r,a,s,n){var o=!1,i={},l=null;if(s.bookType!=="xlsx"&&r.vbaraw){var c=r.SheetNames[a];try{r.Workbook&&(c=r.Workbook.Sheets[a].CodeName||c)}catch{}o=!0,i.codeName=Mx(cr(c))}if(t&&t["!outline"]){var d={summaryBelow:1,summaryRight:1};t["!outline"].above&&(d.summaryBelow=0),t["!outline"].left&&(d.summaryRight=0),l=(l||"")+dt("outlinePr",null,d)}!o&&!l||(n[n.length]=dt("sheetPr",l,i))}var yye=["objects","scenarios","selectLockedCells","selectUnlockedCells"],jye=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Nye(t){var r={sheet:1};return yye.forEach(function(a){t[a]!=null&&t[a]&&(r[a]="1")}),jye.forEach(function(a){t[a]!=null&&!t[a]&&(r[a]="0")}),t.password&&(r.password=o$(t.password).toString(16).toUpperCase()),dt("sheetProtection",null,r)}function wye(t){return w$(t),dt("pageMargins",null,t)}function _ye(t,r){for(var a=["<cols>"],s,n=0;n!=r.length;++n)(s=r[n])&&(a[a.length]=dt("col",null,fb(n,s)));return a[a.length]="</cols>",a.join("")}function Sye(t,r,a,s){var n=typeof t.ref=="string"?t.ref:aa(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var o=a.Workbook.Names,i=Ls(n);i.s.r==i.e.r&&(i.e.r=Ls(r["!ref"]).e.r,n=aa(i));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==s){c.Ref="'"+a.SheetNames[s]+"'!"+n;break}}return l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+a.SheetNames[s]+"'!"+n}),dt("autoFilter",null,{ref:n})}function Cye(t,r,a,s){var n={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),dt("sheetViews",dt("sheetView",null,n),{})}function kye(t,r,a,s){if(t.c&&a["!comments"].push([r,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var n="",o=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":n=t.v?"1":"0";break;case"n":n=""+t.v;break;case"e":n=u0[t.v];break;case"d":s&&s.cellDates?n=ss(t.v,-1).toISOString():(t=js(t),t.t="n",n=""+(t.v=ys(ss(t.v)))),typeof t.z>"u"&&(t.z=qr[14]);break;default:n=t.v;break}var l=Fa("v",cr(n)),c={r},d=Ki(s.cellXfs,t,s);switch(d!==0&&(c.s=d),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){l=Fa("v",""+hw(s.Strings,t.v,s.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=o&&(t.t=o,t.v=i),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,r.length)==r?{t:"array",ref:t.F}:null;l=dt("f",cr(t.f),u)+(t.v!=null?l:"")}return t.l&&a["!links"].push([r,t.l]),t.D&&(c.cm=1),dt("c",l,c)}function Eye(t,r,a,s){var n=[],o=[],i=kr(t["!ref"]),l="",c,d="",u=[],m=0,x=0,h=t["!rows"],b=Array.isArray(t),p={r:d},f,v=-1;for(x=i.s.c;x<=i.e.c;++x)u[x]=Wa(x);for(m=i.s.r;m<=i.e.r;++m){for(o=[],d=$a(m),x=i.s.c;x<=i.e.c;++x){c=u[x]+d;var g=b?(t[m]||[])[x]:t[c];g!==void 0&&(l=kye(g,c,t,r))!=null&&o.push(l)}(o.length>0||h&&h[m])&&(p={r:d},h&&h[m]&&(f=h[m],f.hidden&&(p.hidden=1),v=-1,f.hpx?v=Lf(f.hpx):f.hpt&&(v=f.hpt),v>-1&&(p.ht=v,p.customHeight=1),f.level&&(p.outlineLevel=f.level)),n[n.length]=dt("row",o.join(""),p))}if(h)for(;m<h.length;++m)h&&h[m]&&(p={r:m+1},f=h[m],f.hidden&&(p.hidden=1),v=-1,f.hpx?v=Lf(f.hpx):f.hpt&&(v=f.hpt),v>-1&&(p.ht=v,p.customHeight=1),f.level&&(p.outlineLevel=f.level),n[n.length]=dt("row","",p));return n.join("")}function _$(t,r,a,s){var n=[oa,dt("worksheet",null,{xmlns:yu[0],"xmlns:r":Na.r})],o=a.SheetNames[t],i=0,l="",c=a.Sheets[o];c==null&&(c={});var d=c["!ref"]||"A1",u=kr(d);if(u.e.c>16383||u.e.r>1048575){if(r.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=aa(u)}s||(s={}),c["!comments"]=[];var m=[];vye(c,a,t,r,n),n[n.length]=dt("dimension",null,{ref:d}),n[n.length]=Cye(c,r,t,a),r.sheetFormat&&(n[n.length]=dt("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=_ye(c,c["!cols"])),n[i=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Eye(c,r),l.length>0&&(n[n.length]=l)),n.length>i+1&&(n[n.length]="</sheetData>",n[i]=n[i].replace("/>",">")),c["!protect"]&&(n[n.length]=Nye(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=Sye(c["!autofilter"],c,a,t)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=bye(c["!merges"]));var x=-1,h,b=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(b=ir(s,-1,cr(p[1].Target).replace(/#.*$/,""),Jt.HLINK),h["r:id"]="rId"+b),(x=p[1].Target.indexOf("#"))>-1&&(h.location=cr(p[1].Target.slice(x+1))),p[1].Tooltip&&(h.tooltip=cr(p[1].Tooltip)),n[n.length]=dt("hyperlink",null,h))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=wye(c["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&(n[n.length]=Fa("ignoredErrors",dt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),m.length>0&&(b=ir(s,-1,"../drawings/drawing"+(t+1)+".xml",Jt.DRAW),n[n.length]=dt("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=m),c["!comments"].length>0&&(b=ir(s,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jt.VML),n[n.length]=dt("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function Aye(t,r){var a={},s=t.l+r;a.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=s,o&7&&(a.level=o&7),o&16&&(a.hidden=!0),o&32&&(a.hpt=n/20),a}function Pye(t,r,a){var s=qe(145),n=(a["!rows"]||[])[t]||{};s.write_shift(4,t),s.write_shift(4,0);var o=320;n.hpx?o=Lf(n.hpx)*20:n.hpt&&(o=n.hpt*20),s.write_shift(2,o),s.write_shift(1,0);var i=0;n.level&&(i|=n.level),n.hidden&&(i|=16),(n.hpx||n.hpt)&&(i|=32),s.write_shift(1,i),s.write_shift(1,0);var l=0,c=s.l;s.l+=4;for(var d={r:t,c:0},u=0;u<16;++u)if(!(r.s.c>u+1<<10||r.e.c<u<<10)){for(var m=-1,x=-1,h=u<<10;h<u+1<<10;++h){d.c=h;var b=Array.isArray(a)?(a[d.r]||[])[d.c]:a[ur(d)];b&&(m<0&&(m=h),x=h)}m<0||(++l,s.write_shift(4,m),s.write_shift(4,x))}var p=s.l;return s.l=c,s.write_shift(4,l),s.l=p,s.length>s.l?s.slice(0,s.l):s}function Tye(t,r,a,s){var n=Pye(s,a,r);(n.length>17||(r["!rows"]||[])[s])&&Ge(t,0,n)}var Oye=pc,Fye=Nu;function Rye(){}function $ye(t,r){var a={},s=t[t.l];return++t.l,a.above=!(s&64),a.left=!(s&128),t.l+=18,a.name=Wfe(t),a}function Dye(t,r,a){a==null&&(a=qe(84+4*t.length));var s=192;r&&(r.above&&(s&=-65),r.left&&(s&=-129)),a.write_shift(1,s);for(var n=1;n<3;++n)a.write_shift(1,0);return $f({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),LR(t,a),a.slice(0,a.l)}function Mye(t){var r=dn(t);return[r]}function Iye(t,r,a){return a==null&&(a=qe(8)),uc(r,a)}function Lye(t){var r=mc(t);return[r]}function Bye(t,r,a){return a==null&&(a=qe(4)),xc(r,a)}function zye(t){var r=dn(t),a=t.read_shift(1);return[r,a,"b"]}function qye(t,r,a){return a==null&&(a=qe(9)),uc(r,a),a.write_shift(1,t.v?1:0),a}function Vye(t){var r=mc(t),a=t.read_shift(1);return[r,a,"b"]}function Uye(t,r,a){return a==null&&(a=qe(5)),xc(r,a),a.write_shift(1,t.v?1:0),a}function Wye(t){var r=dn(t),a=t.read_shift(1);return[r,a,"e"]}function Hye(t,r,a){return a==null&&(a=qe(9)),uc(r,a),a.write_shift(1,t.v),a}function Kye(t){var r=mc(t),a=t.read_shift(1);return[r,a,"e"]}function Gye(t,r,a){return a==null&&(a=qe(8)),xc(r,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function Xye(t){var r=dn(t),a=t.read_shift(4);return[r,a,"s"]}function Yye(t,r,a){return a==null&&(a=qe(12)),uc(r,a),a.write_shift(4,r.v),a}function Qye(t){var r=mc(t),a=t.read_shift(4);return[r,a,"s"]}function Jye(t,r,a){return a==null&&(a=qe(8)),xc(r,a),a.write_shift(4,r.v),a}function Zye(t){var r=dn(t),a=wu(t);return[r,a,"n"]}function eje(t,r,a){return a==null&&(a=qe(16)),uc(r,a),Jl(t.v,a),a}function tje(t){var r=mc(t),a=wu(t);return[r,a,"n"]}function rje(t,r,a){return a==null&&(a=qe(12)),xc(r,a),Jl(t.v,a),a}function aje(t){var r=dn(t),a=BR(t);return[r,a,"n"]}function sje(t,r,a){return a==null&&(a=qe(12)),uc(r,a),zR(t.v,a),a}function nje(t){var r=mc(t),a=BR(t);return[r,a,"n"]}function oje(t,r,a){return a==null&&(a=qe(8)),xc(r,a),zR(t.v,a),a}function ije(t){var r=dn(t),a=iw(t);return[r,a,"is"]}function lje(t){var r=dn(t),a=Ha(t);return[r,a,"str"]}function cje(t,r,a){return a==null&&(a=qe(12+4*t.v.length)),uc(r,a),_a(t.v,a),a.length>a.l?a.slice(0,a.l):a}function dje(t){var r=mc(t),a=Ha(t);return[r,a,"str"]}function uje(t,r,a){return a==null&&(a=qe(8+4*t.v.length)),xc(r,a),_a(t.v,a),a.length>a.l?a.slice(0,a.l):a}function mje(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=t.read_shift(1),i=[n,o,"b"];if(a.cellFormula){t.l+=2;var l=hb(t,s-t.l,a);i[3]=Zd(l,null,n,a.supbooks,a)}else t.l=s;return i}function xje(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=t.read_shift(1),i=[n,o,"e"];if(a.cellFormula){t.l+=2;var l=hb(t,s-t.l,a);i[3]=Zd(l,null,n,a.supbooks,a)}else t.l=s;return i}function pje(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=wu(t),i=[n,o,"n"];if(a.cellFormula){t.l+=2;var l=hb(t,s-t.l,a);i[3]=Zd(l,null,n,a.supbooks,a)}else t.l=s;return i}function hje(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=Ha(t),i=[n,o,"str"];if(a.cellFormula){t.l+=2;var l=hb(t,s-t.l,a);i[3]=Zd(l,null,n,a.supbooks,a)}else t.l=s;return i}var fje=pc,gje=Nu;function bje(t,r){return r==null&&(r=qe(4)),r.write_shift(4,t),r}function vje(t,r){var a=t.l+r,s=pc(t),n=lw(t),o=Ha(t),i=Ha(t),l=Ha(t);t.l=a;var c={rfx:s,relId:n,loc:o,display:l};return i&&(c.Tooltip=i),c}function yje(t,r){var a=qe(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Nu({s:wa(t[0]),e:wa(t[0])},a),cw("rId"+r,a);var s=t[1].Target.indexOf("#"),n=s==-1?"":t[1].Target.slice(s+1);return _a(n||"",a),_a(t[1].Tooltip||"",a),_a("",a),a.slice(0,a.l)}function jje(){}function Nje(t,r,a){var s=t.l+r,n=qR(t),o=t.read_shift(1),i=[n];if(i[2]=o,a.cellFormula){var l=dye(t,s-t.l,a);i[1]=l}else t.l=s;return i}function wje(t,r,a){var s=t.l+r,n=pc(t),o=[n];if(a.cellFormula){var i=mye(t,s-t.l,a);o[1]=i,t.l=s}else t.l=s;return o}function _je(t,r,a){a==null&&(a=qe(18));var s=fb(t,r);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(s.width||10)*256),a.write_shift(4,0);var n=0;return r.hidden&&(n|=1),typeof s.width=="number"&&(n|=2),r.level&&(n|=r.level<<8),a.write_shift(2,n),a}var S$=["left","right","top","bottom","header","footer"];function Sje(t){var r={};return S$.forEach(function(a){r[a]=wu(t)}),r}function Cje(t,r){return r==null&&(r=qe(6*8)),w$(t),S$.forEach(function(a){Jl(t[a],r)}),r}function kje(t){var r=t.read_shift(2);return t.l+=28,{RTL:r&32}}function Eje(t,r,a){a==null&&(a=qe(30));var s=924;return(((r||{}).Views||[])[0]||{}).RTL&&(s|=32),a.write_shift(2,s),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function Aje(t){var r=qe(24);return r.write_shift(4,4),r.write_shift(4,1),Nu(t,r),r}function Pje(t,r){return r==null&&(r=qe(16*4+2)),r.write_shift(2,t.password?o$(t.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?r.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):r.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),r}function Tje(){}function Oje(){}function Fje(t,r,a,s,n,o,i){if(r.v===void 0)return!1;var l="";switch(r.t){case"b":l=r.v?"1":"0";break;case"d":r=js(r),r.z=r.z||qr[14],r.v=ys(ss(r.v)),r.t="n";break;case"n":case"e":l=""+r.v;break;default:l=r.v;break}var c={r:a,c:s};switch(c.s=Ki(n.cellXfs,r,n),r.l&&o["!links"].push([ur(c),r.l]),r.c&&o["!comments"].push([ur(c),r.c]),r.t){case"s":case"str":return n.bookSST?(l=hw(n.Strings,r.v,n.revStrings),c.t="s",c.v=l,i?Ge(t,18,Jye(r,c)):Ge(t,7,Yye(r,c))):(c.t="str",i?Ge(t,17,uje(r,c)):Ge(t,6,cje(r,c))),!0;case"n":return r.v==(r.v|0)&&r.v>-1e3&&r.v<1e3?i?Ge(t,13,oje(r,c)):Ge(t,2,sje(r,c)):i?Ge(t,16,rje(r,c)):Ge(t,5,eje(r,c)),!0;case"b":return c.t="b",i?Ge(t,15,Uye(r,c)):Ge(t,4,qye(r,c)),!0;case"e":return c.t="e",i?Ge(t,14,Gye(r,c)):Ge(t,3,Hye(r,c)),!0}return i?Ge(t,12,Bye(r,c)):Ge(t,1,Iye(r,c)),!0}function Rje(t,r,a,s){var n=kr(r["!ref"]||"A1"),o,i="",l=[];Ge(t,145);var c=Array.isArray(r),d=n.e.r;r["!rows"]&&(d=Math.max(n.e.r,r["!rows"].length-1));for(var u=n.s.r;u<=d;++u){i=$a(u),Tye(t,r,n,u);var m=!1;if(u<=n.e.r)for(var x=n.s.c;x<=n.e.c;++x){u===n.s.r&&(l[x]=Wa(x)),o=l[x]+i;var h=c?(r[u]||[])[x]:r[o];if(!h){m=!1;continue}m=Fje(t,h,u,x,s,r,m)}}Ge(t,146)}function $je(t,r){!r||!r["!merges"]||(Ge(t,177,bje(r["!merges"].length)),r["!merges"].forEach(function(a){Ge(t,176,gje(a))}),Ge(t,178))}function Dje(t,r){!r||!r["!cols"]||(Ge(t,390),r["!cols"].forEach(function(a,s){a&&Ge(t,60,_je(s,a))}),Ge(t,391))}function Mje(t,r){!r||!r["!ref"]||(Ge(t,648),Ge(t,649,Aje(kr(r["!ref"]))),Ge(t,650))}function Ije(t,r,a){r["!links"].forEach(function(s){if(s[1].Target){var n=ir(a,-1,s[1].Target.replace(/#.*$/,""),Jt.HLINK);Ge(t,494,yje(s,n))}}),delete r["!links"]}function Lje(t,r,a,s){if(r["!comments"].length>0){var n=ir(s,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Jt.VML);Ge(t,551,cw("rId"+n)),r["!legacy"]=n}}function Bje(t,r,a,s){if(r["!autofilter"]){var n=r["!autofilter"],o=typeof n.ref=="string"?n.ref:aa(n.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var i=a.Workbook.Names,l=Ls(o);l.s.r==l.e.r&&(l.e.r=Ls(r["!ref"]).e.r,o=aa(l));for(var c=0;c<i.length;++c){var d=i[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==s){d.Ref="'"+a.SheetNames[s]+"'!"+o;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+a.SheetNames[s]+"'!"+o}),Ge(t,161,Nu(kr(o))),Ge(t,162)}}function zje(t,r,a){Ge(t,133),Ge(t,137,Eje(r,a)),Ge(t,138),Ge(t,134)}function qje(t,r){r["!protect"]&&Ge(t,535,Pje(r["!protect"]))}function Vje(t,r,a,s){var n=vs(),o=a.SheetNames[t],i=a.Sheets[o]||{},l=o;try{a&&a.Workbook&&(l=a.Workbook.Sheets[t].CodeName||l)}catch{}var c=kr(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(r.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ge(n,129),(a.vbaraw||i["!outline"])&&Ge(n,147,Dye(l,i["!outline"])),Ge(n,148,Fye(c)),zje(n,i,a.Workbook),Dje(n,i),Rje(n,i,t,r),qje(n,i),Bje(n,i,a,t),$je(n,i),Ije(n,i,s),i["!margins"]&&Ge(n,476,Cje(i["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&Mje(n,i),Lje(n,i,t,s),Ge(n,130),n.end()}function Uje(t,r){t.l+=10;var a=Ha(t);return{name:a}}var Wje=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Hje(t){return!t.Workbook||!t.Workbook.WBProps?"false":wfe(t.Workbook.WBProps.date1904)?"true":"false"}var Kje="][*?/\\".split("");function C$(t,r){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return Kje.forEach(function(s){if(t.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function Gje(t,r,a){t.forEach(function(s,n){C$(s);for(var o=0;o<n;++o)if(s==t[o])throw new Error("Duplicate Sheet Name: "+s);if(a){var i=r&&r[n]&&r[n].CodeName||s;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Xje(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var r=t.Workbook&&t.Workbook.Sheets||[];Gje(t.SheetNames,r,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)gye(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function k$(t){var r=[oa];r[r.length]=dt("workbook",null,{xmlns:yu[0],"xmlns:r":Na.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Wje.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(s[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(s.codeName=t.Workbook.WBProps.CodeName,delete s.CodeName)),r[r.length]=dt("workbookPr",null,s);var n=t.Workbook&&t.Workbook.Sheets||[],o=0;if(n&&n[0]&&n[0].Hidden){for(r[r.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!n[o]||!n[o].Hidden);++o);o==t.SheetNames.length&&(o=0),r[r.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',r[r.length]="</bookViews>"}for(r[r.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var i={name:cr(t.SheetNames[o].slice(0,31))};if(i.sheetId=""+(o+1),i["r:id"]="rId"+(o+1),n[o])switch(n[o].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}r[r.length]=dt("sheet",null,i)}return r[r.length]="</sheets>",a&&(r[r.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(r[r.length]=dt("definedName",cr(l.Ref),c))}),r[r.length]="</definedNames>"),r.length>2&&(r[r.length]="</workbook>",r[1]=r[1].replace("/>",">")),r.join("")}function Yje(t,r){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=E1(t),a.name=Ha(t),a}function Qje(t,r){return r||(r=qe(127)),r.write_shift(4,t.Hidden),r.write_shift(4,t.iTabID),cw(t.strRelID,r),_a(t.name.slice(0,31),r),r.length>r.l?r.slice(0,r.l):r}function Jje(t,r){var a={},s=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var n=r>8?Ha(t):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(s&65536),a.backupFile=!!(s&64),a.checkCompatibility=!!(s&4096),a.date1904=!!(s&1),a.filterPrivacy=!!(s&8),a.hidePivotFieldList=!!(s&1024),a.promptedSolutions=!!(s&16),a.publishItems=!!(s&2048),a.refreshAllConnections=!!(s&262144),a.saveExternalLinkValues=!!(s&128),a.showBorderUnselectedTables=!!(s&4),a.showInkAnnotation=!!(s&32),a.showObjects=["all","placeholders","none"][s>>13&3],a.showPivotChartFilter=!!(s&32768),a.updateLinks=["userSet","never","always"][s>>8&3],a}function Zje(t,r){r||(r=qe(72));var a=0;return t&&t.filterPrivacy&&(a|=8),r.write_shift(4,a),r.write_shift(4,0),LR(t&&t.CodeName||"ThisWorkbook",r),r.slice(0,r.l)}function e1e(t,r,a){var s=t.l+r;t.l+=4,t.l+=1;var n=t.read_shift(4),o=Hfe(t),i=uye(t,0,a),l=lw(t);t.l=s;var c={Name:o,Ptg:i};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function t1e(t,r){Ge(t,143);for(var a=0;a!=r.SheetNames.length;++a){var s=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a]&&r.Workbook.Sheets[a].Hidden||0,n={Hidden:s,iTabID:a+1,strRelID:"rId"+(a+1),name:r.SheetNames[a]};Ge(t,156,Qje(n))}Ge(t,144)}function r1e(t,r){r||(r=qe(127));for(var a=0;a!=4;++a)r.write_shift(4,0);return _a("SheetJS",r),_a(kf.version,r),_a(kf.version,r),_a("7262",r),r.length>r.l?r.slice(0,r.l):r}function a1e(t,r){r||(r=qe(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,t),r.write_shift(4,t);var a=120;return r.write_shift(1,a),r.length>r.l?r.slice(0,r.l):r}function s1e(t,r){if(!(!r.Workbook||!r.Workbook.Sheets)){for(var a=r.Workbook.Sheets,s=0,n=-1,o=-1;s<a.length;++s)!a[s]||!a[s].Hidden&&n==-1?n=s:a[s].Hidden==1&&o==-1&&(o=s);o>n||(Ge(t,135),Ge(t,158,a1e(n)),Ge(t,136))}}function n1e(t,r){var a=vs();return Ge(a,131),Ge(a,128,r1e()),Ge(a,153,Zje(t.Workbook&&t.Workbook.WBProps||null)),s1e(a,t),t1e(a,t),Ge(a,132),a.end()}function o1e(t,r,a){return(r.slice(-4)===".bin"?n1e:k$)(t)}function i1e(t,r,a,s,n){return(r.slice(-4)===".bin"?Vje:_$)(t,a,s,n)}function l1e(t,r,a){return(r.slice(-4)===".bin"?Cbe:c$)(t,a)}function c1e(t,r,a){return(r.slice(-4)===".bin"?Zge:n$)(t,a)}function d1e(t,r,a){return(r.slice(-4)===".bin"?qbe:p$)(t)}function u1e(t){return(t.slice(-4)===".bin"?Rbe:m$)()}function m1e(t,r){var a=[];return t.Props&&a.push(lge(t.Props,r)),t.Custprops&&a.push(cge(t.Props,t.Custprops)),a.join("")}function x1e(){return""}function p1e(t,r){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return r.cellXfs.forEach(function(s,n){var o=[];o.push(dt("NumberFormat",null,{"ss:Format":cr(qr[s.numFmtId])}));var i={"ss:ID":"s"+(21+n)};a.push(dt("Style",o.join(""),i))}),dt("Styles",a.join(""))}function E$(t){return dt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+xw(t.Ref,{r:0,c:0})})}function h1e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var r=t.Workbook.Names,a=[],s=0;s<r.length;++s){var n=r[s];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||a.push(E$(n)))}return dt("Names",a.join(""))}function f1e(t,r,a,s){if(!t||!((s||{}).Workbook||{}).Names)return"";for(var n=s.Workbook.Names,o=[],i=0;i<n.length;++i){var l=n[i];l.Sheet==a&&(l.Name.match(/^_xlfn\./)||o.push(E$(l)))}return o.join("")}function g1e(t,r,a,s){if(!t)return"";var n=[];if(t["!margins"]&&(n.push("<PageSetup>"),t["!margins"].header&&n.push(dt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&n.push(dt("Footer",null,{"x:Margin":t["!margins"].footer})),n.push(dt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),n.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a])if(s.Workbook.Sheets[a].Hidden)n.push(dt("Visible",s.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<a&&!(s.Workbook.Sheets[o]&&!s.Workbook.Sheets[o].Hidden);++o);o==a&&n.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),t["!protect"]&&(n.push(Fa("ProtectContents","True")),t["!protect"].objects&&n.push(Fa("ProtectObjects","True")),t["!protect"].scenarios&&n.push(Fa("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?n.push(Fa("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&n.push(Fa("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&n.push("<"+i[1]+"/>")})),n.length==0?"":dt("WorksheetOptions",n.join(""),{xmlns:Ps.x})}function b1e(t){return t.map(function(r){var a=Nfe(r.t||""),s=dt("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return dt("Comment",s,{"ss:Author":r.a})}).join("")}function v1e(t,r,a,s,n,o,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+cr(xw(t.f,i))),t.F&&t.F.slice(0,r.length)==r){var c=wa(t.F.slice(r.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=cr(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=cr(t.l.Tooltip))),a["!merges"])for(var d=a["!merges"],u=0;u!=d.length;++u)d[u].s.c!=i.c||d[u].s.r!=i.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var m="",x="";switch(t.t){case"z":if(!s.sheetStubs)return"";break;case"n":m="Number",x=String(t.v);break;case"b":m="Boolean",x=t.v?"1":"0";break;case"e":m="Error",x=u0[t.v];break;case"d":m="DateTime",x=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||qr[14]);break;case"s":m="String",x=jfe(t.v||"");break}var h=Ki(s.cellXfs,t,s);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=i.c+1;var b=t.v!=null?x:"",p=t.t=="z"?"":'<Data ss:Type="'+m+'">'+b+"</Data>";return(t.c||[]).length>0&&(p+=b1e(t.c)),dt("Cell",p,l)}function y1e(t,r){var a='<Row ss:Index="'+(t+1)+'"';return r&&(r.hpt&&!r.hpx&&(r.hpx=l$(r.hpt)),r.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'),r.hidden&&(a+=' ss:Hidden="1"')),a+">"}function j1e(t,r,a,s){if(!t["!ref"])return"";var n=kr(t["!ref"]),o=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(f,v){uw(f);var g=!!f.width,y=fb(v,f),N={"ss:Index":v+1};g&&(N["ss:Width"]=Mf(y.width)),f.hidden&&(N["ss:Hidden"]="1"),l.push(dt("Column",null,N))});for(var c=Array.isArray(t),d=n.s.r;d<=n.e.r;++d){for(var u=[y1e(d,(t["!rows"]||[])[d])],m=n.s.c;m<=n.e.c;++m){var x=!1;for(i=0;i!=o.length;++i)if(!(o[i].s.c>m)&&!(o[i].s.r>d)&&!(o[i].e.c<m)&&!(o[i].e.r<d)){(o[i].s.c!=m||o[i].s.r!=d)&&(x=!0);break}if(!x){var h={r:d,c:m},b=ur(h),p=c?(t[d]||[])[m]:t[b];u.push(v1e(p,b,t,r,a,s,h))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function N1e(t,r,a){var s=[],n=a.SheetNames[t],o=a.Sheets[n],i=o?f1e(o,r,t,a):"";return i.length>0&&s.push("<Names>"+i+"</Names>"),i=o?j1e(o,r,t,a):"",i.length>0&&s.push("<Table>"+i+"</Table>"),s.push(g1e(o,r,t,a)),s.join("")}function w1e(t,r){r||(r={}),t.SSF||(t.SSF=js(qr)),t.SSF&&(ub(),db(t.SSF),r.revssf=mb(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF,r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(m1e(t,r)),a.push(x1e()),a.push(""),a.push("");for(var s=0;s<t.SheetNames.length;++s)a.push(dt("Worksheet",N1e(s,r,t),{"ss:Name":cr(t.SheetNames[s])}));return a[2]=p1e(t,r),a[3]=h1e(t),oa+dt("Workbook",a.join(""),{xmlns:Ps.ss,"xmlns:o":Ps.o,"xmlns:x":Ps.x,"xmlns:ss":Ps.ss,"xmlns:dt":Ps.dt,"xmlns:html":Ps.html})}var Ov={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _1e(t,r){var a=[],s=[],n=[],o=0,i,l=Gk(i6,"n"),c=Gk(l6,"n");if(t.Props)for(i=Ma(t.Props),o=0;o<i.length;++o)(Object.prototype.hasOwnProperty.call(l,i[o])?a:Object.prototype.hasOwnProperty.call(c,i[o])?s:n).push([i[o],t.Props[i[o]]]);if(t.Custprops)for(i=Ma(t.Custprops),o=0;o<i.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},i[o])||(Object.prototype.hasOwnProperty.call(l,i[o])?a:Object.prototype.hasOwnProperty.call(c,i[o])?s:n).push([i[o],t.Custprops[i[o]]]);var d=[];for(o=0;o<n.length;++o)JR.indexOf(n[o][0])>-1||XR.indexOf(n[o][0])>-1||n[o][1]!=null&&d.push(n[o]);s.length&&hr.utils.cfb_add(r,"/SummaryInformation",x6(s,Ov.SI,c,l6)),(a.length||d.length)&&hr.utils.cfb_add(r,"/DocumentSummaryInformation",x6(a,Ov.DSI,l,i6,d.length?d:null,Ov.UDI))}function S1e(t,r){var a=r||{},s=hr.utils.cfb_new({root:"R"}),n="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":n="/Workbook",a.biff=8;break;case"biff5":n="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return hr.utils.cfb_add(s,n,A$(t,a)),a.biff==8&&(t.Props||t.Custprops)&&_1e(t,s),a.biff==8&&t.vbaraw&&Vbe(s,hr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),s}var C1e={0:{f:Aye},1:{f:Mye},2:{f:aje},3:{f:Wye},4:{f:zye},5:{f:Zye},6:{f:lje},7:{f:Xye},8:{f:hje},9:{f:pje},10:{f:mje},11:{f:xje},12:{f:Lye},13:{f:nje},14:{f:Kye},15:{f:Vye},16:{f:tje},17:{f:dje},18:{f:Qye},19:{f:iw},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:e1e},40:{},42:{},43:{f:lbe},44:{f:obe},45:{f:ube},46:{f:xbe},47:{f:mbe},48:{},49:{f:Lfe},50:{},51:{f:Abe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Bge},62:{f:ije},63:{f:$be},64:{f:Tje},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ro,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:kje},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$ye},148:{f:Oye,p:16},151:{f:jje},152:{},153:{f:Jje},154:{},155:{},156:{f:Yje},157:{},158:{},159:{T:1,f:Yge},160:{T:-1},161:{T:1,f:pc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:fje},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:kbe},336:{T:-1},337:{f:Obe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:E1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Rge},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Nje},427:{f:wje},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Sje},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Rye},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:vje},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:E1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Bbe},633:{T:1},634:{T:-1},635:{T:1,f:Ibe},636:{T:-1},637:{f:Vfe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Uje},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Oje},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function mt(t,r,a,s){var n=r;if(!isNaN(n)){var o=s||(a||[]).length||0,i=t.next(4);i.write_shift(2,n),i.write_shift(2,o),o>0&&sw(a)&&t.push(a)}}function k1e(t,r,a,s){var n=(a||[]).length||0;if(n<=8224)return mt(t,r,a,n);var o=r;if(!isNaN(o)){for(var i=a.parts||[],l=0,c=0,d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;var u=t.next(4);for(u.write_shift(2,o),u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d;c<n;){for(u=t.next(4),u.write_shift(2,60),d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d}}}function x0(t,r,a){return t||(t=qe(7)),t.write_shift(2,r),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function E1e(t,r,a,s){var n=qe(9);return x0(n,t,r),e$(a,s||"b",n),n}function A1e(t,r,a){var s=qe(8+2*a.length);return x0(s,t,r),s.write_shift(1,a.length),s.write_shift(a.length,a,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function P1e(t,r,a,s){if(r.v!=null)switch(r.t){case"d":case"n":var n=r.t=="d"?ys(ss(r.v)):r.v;n==(n|0)&&n>=0&&n<65536?mt(t,2,Uge(a,s,n)):mt(t,3,Vge(a,s,n));return;case"b":case"e":mt(t,5,E1e(a,s,r.v,r.t));return;case"s":case"str":mt(t,4,A1e(a,s,(r.v||"").slice(0,255)));return}mt(t,1,x0(null,a,s))}function T1e(t,r,a,s){var n=Array.isArray(r),o=kr(r["!ref"]||"A1"),i,l="",c=[];if(o.e.c>255||o.e.r>16383){if(s.WTF)throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=aa(o)}for(var d=o.s.r;d<=o.e.r;++d){l=$a(d);for(var u=o.s.c;u<=o.e.c;++u){d===o.s.r&&(c[u]=Wa(u)),i=c[u]+l;var m=n?(r[d]||[])[u]:r[i];m&&P1e(t,m,d,u)}}}function O1e(t,r){for(var a=r||{},s=vs(),n=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==a.sheet&&(n=o);if(n==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return mt(s,a.biff==4?1033:a.biff==3?521:9,dw(t,16,a)),T1e(s,t.Sheets[t.SheetNames[n]],n,a),mt(s,10),s.end()}function F1e(t,r,a){mt(t,49,Cge({sz:12,name:"Arial"},a))}function R1e(t,r,a){r&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&mt(t,1054,Age(n,r[n],a))})}function $1e(t,r){var a=qe(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),mt(t,2151,a),a=qe(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),a$(kr(r["!ref"]||"A1"),a),a.write_shift(4,4),mt(t,2152,a)}function D1e(t,r){for(var a=0;a<16;++a)mt(t,224,h6({numFmtId:0,style:!0},0,r));r.cellXfs.forEach(function(s){mt(t,224,h6(s,0,r))})}function M1e(t,r){for(var a=0;a<r["!links"].length;++a){var s=r["!links"][a];mt(t,440,Mge(s)),s[1].Tooltip&&mt(t,2048,Ige(s))}delete r["!links"]}function I1e(t,r){if(r){var a=0;r.forEach(function(s,n){++a<=256&&s&&mt(t,125,zge(fb(n,s),n))})}}function L1e(t,r,a,s,n){var o=16+Ki(n.cellXfs,r,n);if(r.v==null&&!r.bf){mt(t,513,Zl(a,s,o));return}if(r.bf)mt(t,6,cye(r,a,s,n,o));else switch(r.t){case"d":case"n":var i=r.t=="d"?ys(ss(r.v)):r.v;mt(t,515,Fge(a,s,i,o));break;case"b":case"e":mt(t,517,Oge(a,s,r.v,o,n,r.t));break;case"s":case"str":if(n.bookSST){var l=hw(n.Strings,r.v,n.revStrings);mt(t,253,kge(a,s,l,o))}else mt(t,516,Ege(a,s,(r.v||"").slice(0,255),o,n));break;default:mt(t,513,Zl(a,s,o))}}function B1e(t,r,a){var s=vs(),n=a.SheetNames[t],o=a.Sheets[n]||{},i=(a||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(o),d=r.biff==8,u,m="",x=[],h=kr(o["!ref"]||"A1"),b=d?65536:16384;if(h.e.c>255||h.e.r>=b){if(r.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,b-1)}mt(s,2057,dw(a,16,r)),mt(s,13,Qs(1)),mt(s,12,Qs(100)),mt(s,15,Qa(!0)),mt(s,17,Qa(!1)),mt(s,16,Jl(.001)),mt(s,95,Qa(!0)),mt(s,42,Qa(!1)),mt(s,43,Qa(!1)),mt(s,130,Qs(1)),mt(s,128,Tge()),mt(s,131,Qa(!1)),mt(s,132,Qa(!1)),d&&I1e(s,o["!cols"]),mt(s,512,Pge(h,r)),d&&(o["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){m=$a(p);for(var f=h.s.c;f<=h.e.c;++f){p===h.s.r&&(x[f]=Wa(f)),u=x[f]+m;var v=c?(o[p]||[])[f]:o[u];v&&(L1e(s,v,p,f,r),d&&v.l&&o["!links"].push([u,v.l]))}}var g=l.CodeName||l.name||n;return d&&mt(s,574,Sge((i.Views||[])[0])),d&&(o["!merges"]||[]).length&&mt(s,229,Dge(o["!merges"])),d&&M1e(s,o),mt(s,442,r$(g)),d&&$1e(s,o),mt(s,10),s.end()}function z1e(t,r,a){var s=vs(),n=(t||{}).Workbook||{},o=n.Sheets||[],i=n.WBProps||{},l=a.biff==8,c=a.biff==5;if(mt(s,2057,dw(t,5,a)),a.bookType=="xla"&&mt(s,135),mt(s,225,l?Qs(1200):null),mt(s,193,mge(2)),c&&mt(s,191),c&&mt(s,192),mt(s,226),mt(s,92,jge("SheetJS",a)),mt(s,66,Qs(l?1200:1252)),l&&mt(s,353,Qs(0)),l&&mt(s,448),mt(s,317,qge(t.SheetNames.length)),l&&t.vbaraw&&mt(s,211),l&&t.vbaraw){var d=i.CodeName||"ThisWorkbook";mt(s,442,r$(d))}mt(s,156,Qs(17)),mt(s,25,Qa(!1)),mt(s,18,Qa(!1)),mt(s,19,Qs(0)),l&&mt(s,431,Qa(!1)),l&&mt(s,444,Qs(0)),mt(s,61,_ge()),mt(s,64,Qa(!1)),mt(s,141,Qs(0)),mt(s,34,Qa(Hje(t)=="true")),mt(s,14,Qa(!0)),l&&mt(s,439,Qa(!1)),mt(s,218,Qs(0)),F1e(s,t,a),R1e(s,t.SSF,a),D1e(s,a),l&&mt(s,352,Qa(!1));var u=s.end(),m=vs();l&&mt(m,140,Lge()),l&&a.Strings&&k1e(m,252,wge(a.Strings)),mt(m,10);var x=m.end(),h=vs(),b=0,p=0;for(p=0;p<t.SheetNames.length;++p)b+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var f=u.length+b+x.length;for(p=0;p<t.SheetNames.length;++p){var v=o[p]||{};mt(h,133,Nge({pos:f,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},a)),f+=r[p].length}var g=h.end();if(b!=g.length)throw new Error("BS8 "+b+" != "+g.length);var y=[];return u.length&&y.push(u),g.length&&y.push(g),x.length&&y.push(x),Oa(y)}function q1e(t,r){var a=r||{},s=[];t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(ub(),db(t.SSF),a.revssf=mb(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,fw(a),a.cellXfs=[],Ki(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var n=0;n<t.SheetNames.length;++n)s[s.length]=B1e(n,a,t);return s.unshift(z1e(t,s,a)),Oa(s)}function A$(t,r){for(var a=0;a<=t.SheetNames.length;++a){var s=t.Sheets[t.SheetNames[a]];if(!(!s||!s["!ref"])){var n=Ls(s["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var o=r||{};switch(o.biff||2){case 8:case 5:return q1e(t,r);case 4:case 3:case 2:return O1e(t,r)}throw new Error("invalid type "+o.bookType+" for BIFF")}function V1e(t,r,a,s){for(var n=t["!merges"]||[],o=[],i=r.s.c;i<=r.e.c;++i){for(var l=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>a||n[d].s.c>i)&&!(n[d].e.r<a||n[d].e.c<i)){if(n[d].s.r<a||n[d].s.c<i){l=-1;break}l=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(l<0)){var u=ur({r:a,c:i}),m=s.dense?(t[a]||[])[i]:t[u],x=m&&m.v!=null&&(m.h||yfe(m.w||(zo(m),m.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),s.editable?x='<span contenteditable="true">'+x+"</span>":m&&(h["data-t"]=m&&m.t||"z",m.v!=null&&(h["data-v"]=m.v),m.z!=null&&(h["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),h.id=(s.id||"sjs")+"-"+u,o.push(dt("td",x,h))}}var b="<tr>";return b+o.join("")+"</tr>"}var U1e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',W1e="</body></html>";function H1e(t,r,a){var s=[];return s.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function P$(t,r){var a=r||{},s=a.header!=null?a.header:U1e,n=a.footer!=null?a.footer:W1e,o=[s],i=Ls(t["!ref"]);a.dense=Array.isArray(t),o.push(H1e(t,i,a));for(var l=i.s.r;l<=i.e.r;++l)o.push(V1e(t,i,l,a));return o.push("</table>"+n),o.join("")}function T$(t,r,a){var s=a||{},n=0,o=0;if(s.origin!=null)if(typeof s.origin=="number")n=s.origin;else{var i=typeof s.origin=="string"?wa(s.origin):s.origin;n=i.r,o=i.c}var l=r.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:n,c:o}};if(t["!ref"]){var u=Ls(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var m=[],x=0,h=t["!rows"]||(t["!rows"]=[]),b=0,p=0,f=0,v=0,g=0,y=0;for(t["!cols"]||(t["!cols"]=[]);b<l.length&&p<c;++b){var N=l[b];if(N6(N)){if(s.display)continue;h[p]={hidden:!0}}var _=N.children;for(f=v=0;f<_.length;++f){var w=_[f];if(!(s.display&&N6(w))){var S=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):_fe(w.innerHTML),C=w.getAttribute("data-z")||w.getAttribute("z");for(x=0;x<m.length;++x){var k=m[x];k.s.c==v+o&&k.s.r<p+n&&p+n<=k.e.r&&(v=k.e.c+1-o,x=-1)}y=+w.getAttribute("colspan")||1,((g=+w.getAttribute("rowspan")||1)>1||y>1)&&m.push({s:{r:p+n,c:v+o},e:{r:p+n+(g||1)-1,c:v+o+(y||1)-1}});var F={t:"s",v:S},q=w.getAttribute("data-t")||w.getAttribute("t")||"";S!=null&&(S.length==0?F.t=q||"z":s.raw||S.trim().length==0||q=="s"||(S==="TRUE"?F={t:"b",v:!0}:S==="FALSE"?F={t:"b",v:!1}:isNaN(Co(S))?isNaN(Dx(S).getDate())||(F={t:"d",v:ss(S)},s.cellDates||(F={t:"n",v:ys(F.v)}),F.z=s.dateNF||qr[14]):F={t:"n",v:Co(S)})),F.z===void 0&&C!=null&&(F.z=C);var A="",T=w.getElementsByTagName("A");if(T&&T.length)for(var U=0;U<T.length&&!(T[U].hasAttribute("href")&&(A=T[U].getAttribute("href"),A.charAt(0)!="#"));++U);A&&A.charAt(0)!="#"&&(F.l={Target:A}),s.dense?(t[p+n]||(t[p+n]=[]),t[p+n][v+o]=F):t[ur({c:v+o,r:p+n})]=F,d.e.c<v+o&&(d.e.c=v+o),v+=y}}++p}return m.length&&(t["!merges"]=(t["!merges"]||[]).concat(m)),d.e.r=Math.max(d.e.r,p-1+n),t["!ref"]=aa(d),p>=c&&(t["!fullref"]=aa((d.e.r=l.length-b+p-1+n,d))),t}function O$(t,r){var a=r||{},s=a.dense?[]:{};return T$(s,t,r)}function K1e(t,r){return dc(O$(t,r),r)}function N6(t){var r="",a=G1e(t);return a&&(r=a(t).getPropertyValue("display")),r||(r=t.style&&t.style.display),r==="none"}function G1e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var X1e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),r="<office:document-styles "+Ix({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return oa+r}}(),w6=function(){var t=function(o){return cr(o).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},r=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,s=function(o,i,l){var c=[];c.push('      <table:table table:name="'+cr(i.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,m=Ls(o["!ref"]||"A1"),x=o["!merges"]||[],h=0,b=Array.isArray(o);if(o["!cols"])for(u=0;u<=m.e.c;++u)c.push("        <table:table-column"+(o["!cols"][u]?' table:style-name="co'+o["!cols"][u].ods+'"':"")+`></table:table-column>
`);var p="",f=o["!rows"]||[];for(d=0;d<m.s.r;++d)p=f[d]?' table:style-name="ro'+f[d].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;d<=m.e.r;++d){for(p=f[d]?' table:style-name="ro'+f[d].ods+'"':"",c.push("        <table:table-row"+p+`>
`),u=0;u<m.s.c;++u)c.push(r);for(;u<=m.e.c;++u){var v=!1,g={},y="";for(h=0;h!=x.length;++h)if(!(x[h].s.c>u)&&!(x[h].s.r>d)&&!(x[h].e.c<u)&&!(x[h].e.r<d)){(x[h].s.c!=u||x[h].s.r!=d)&&(v=!0),g["table:number-columns-spanned"]=x[h].e.c-x[h].s.c+1,g["table:number-rows-spanned"]=x[h].e.r-x[h].s.r+1;break}if(v){c.push(a);continue}var N=ur({r:d,c:u}),_=b?(o[d]||[])[u]:o[N];if(_&&_.f&&(g["table:formula"]=cr(hye(_.f)),_.F&&_.F.slice(0,N.length)==N)){var w=Ls(_.F);g["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,g["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(!_){c.push(r);continue}switch(_.t){case"b":y=_.v?"TRUE":"FALSE",g["office:value-type"]="boolean",g["office:boolean-value"]=_.v?"true":"false";break;case"n":y=_.w||String(_.v||0),g["office:value-type"]="float",g["office:value"]=_.v||0;break;case"s":case"str":y=_.v==null?"":_.v,g["office:value-type"]="string";break;case"d":y=_.w||ss(_.v).toISOString(),g["office:value-type"]="date",g["office:date-value"]=ss(_.v).toISOString(),g["table:style-name"]="ce1";break;default:c.push(r);continue}var S=t(y);if(_.l&&_.l.Target){var C=_.l.Target;C=C.charAt(0)=="#"?"#"+fye(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),S=dt("text:a",S,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+dt("table:table-cell",dt("text:p",S,{}),g)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(o,i){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var m=d["!cols"][u];if(m.width==null&&m.wpx==null&&m.wch==null)continue;uw(m),m.ods=l;var x=d["!cols"][u].wpx+"px";o.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),o.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var m=d["!rows"][u].hpx+"px";o.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),o.push(`  </style:style>
`),++c}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(i,l){var c=[oa],d=Ix({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Ix({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(KR().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),n(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=i.SheetNames.length;++m)c.push(s(i.Sheets[i.SheetNames[m]],i,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function F$(t,r){if(r.bookType=="fods")return w6(t,r);var a=ew(),s="",n=[],o=[];return s="mimetype",zt(a,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",zt(a,s,w6(t,r)),n.push([s,"text/xml"]),o.push([s,"ContentFile"]),s="styles.xml",zt(a,s,X1e(t,r)),n.push([s,"text/xml"]),o.push([s,"StylesFile"]),s="meta.xml",zt(a,s,oa+KR()),n.push([s,"text/xml"]),o.push([s,"MetadataFile"]),s="manifest.rdf",zt(a,s,ige(o)),n.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",zt(a,s,nge(n)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Bf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Y1e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Nn(Mx(t))}function Q1e(t,r){e:for(var a=0;a<=t.length-r.length;++a){for(var s=0;s<r.length;++s)if(t[a+s]!=r[s])continue e;return!0}return!1}function $i(t){var r=t.reduce(function(n,o){return n+o.length},0),a=new Uint8Array(r),s=0;return t.forEach(function(n){a.set(n,s),s+=n.length}),a}function J1e(t,r,a){var s=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,n=a/Math.pow(10,s-6176);t[r+15]|=s>>7,t[r+14]|=(s&127)<<1;for(var o=0;n>=1;++o,n/=256)t[r+o]=n&255;t[r+15]|=a>=0?0:128}function Lx(t,r){var a=r?r[0]:0,s=t[a]&127;e:if(t[a++]>=128&&(s|=(t[a]&127)<<7,t[a++]<128||(s|=(t[a]&127)<<14,t[a++]<128)||(s|=(t[a]&127)<<21,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return r&&(r[0]=a),s}function nr(t){var r=new Uint8Array(7);r[0]=t&127;var a=1;e:if(t>127){if(r[a-1]|=128,r[a]=t>>7&127,++a,t<=16383||(r[a-1]|=128,r[a]=t>>14&127,++a,t<=2097151)||(r[a-1]|=128,r[a]=t>>21&127,++a,t<=268435455)||(r[a-1]|=128,r[a]=t/256>>>21&127,++a,t<=34359738367)||(r[a-1]|=128,r[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;r[a-1]|=128,r[a]=t/16777216>>>21&127,++a}return r.slice(0,a)}function dd(t){var r=0,a=t[r]&127;e:if(t[r++]>=128){if(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128))break e;a|=(t[r]&127)<<28}return a}function da(t){for(var r=[],a=[0];a[0]<t.length;){var s=a[0],n=Lx(t,a),o=n&7;n=Math.floor(n/8);var i=0,l;if(n==0)break;switch(o){case 0:{for(var c=a[0];t[a[0]++]>=128;);l=t.slice(c,a[0])}break;case 5:i=4,l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 1:i=8,l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 2:i=Lx(t,a),l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(n," at offset ").concat(s))}var d={data:l,type:o};r[n]==null?r[n]=[d]:r[n].push(d)}return r}function Ea(t){var r=[];return t.forEach(function(a,s){a.forEach(function(n){n.data&&(r.push(nr(s*8+n.type)),n.type==2&&r.push(nr(n.data.length)),r.push(n.data))})}),$i(r)}function pn(t){for(var r,a=[],s=[0];s[0]<t.length;){var n=Lx(t,s),o=da(t.slice(s[0],s[0]+n));s[0]+=n;var i={id:dd(o[1][0].data),messages:[]};o[2].forEach(function(l){var c=da(l.data),d=dd(c[3][0].data);i.messages.push({meta:c,data:t.slice(s[0],s[0]+d)}),s[0]+=d}),(r=o[3])!=null&&r[0]&&(i.merge=dd(o[3][0].data)>>>0>0),a.push(i)}return a}function _c(t){var r=[];return t.forEach(function(a){var s=[];s[1]=[{data:nr(a.id),type:0}],s[2]=[],a.merge!=null&&(s[3]=[{data:nr(+!!a.merge),type:0}]);var n=[];a.messages.forEach(function(i){n.push(i.data),i.meta[3]=[{type:0,data:nr(i.data.length)}],s[2].push({data:Ea(i.meta),type:2})});var o=Ea(s);r.push(nr(o.length)),r.push(o),n.forEach(function(i){return r.push(i)})}),$i(r)}function Z1e(t,r){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],s=Lx(r,a),n=[];a[0]<r.length;){var o=r[a[0]]&3;if(o==0){var i=r[a[0]++]>>2;if(i<60)++i;else{var l=i-59;i=r[a[0]],l>1&&(i|=r[a[0]+1]<<8),l>2&&(i|=r[a[0]+2]<<16),l>3&&(i|=r[a[0]+3]<<24),i>>>=0,i++,a[0]+=l}n.push(r.slice(a[0],a[0]+i)),a[0]+=i;continue}else{var c=0,d=0;if(o==1?(d=(r[a[0]]>>2&7)+4,c=(r[a[0]++]&224)<<3,c|=r[a[0]++]):(d=(r[a[0]++]>>2)+1,o==2?(c=r[a[0]]|r[a[0]+1]<<8,a[0]+=2):(c=(r[a[0]]|r[a[0]+1]<<8|r[a[0]+2]<<16|r[a[0]+3]<<24)>>>0,a[0]+=4)),n=[$i(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=$i(n);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function hn(t){for(var r=[],a=0;a<t.length;){var s=t[a++],n=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,r.push(Z1e(s,t.slice(a,a+n))),a+=n}if(a!==t.length)throw new Error("data is not a valid framed stream!");return $i(r)}function Sc(t){for(var r=[],a=0;a<t.length;){var s=Math.min(t.length-a,268435455),n=new Uint8Array(4);r.push(n);var o=nr(s),i=o.length;r.push(o),s<=60?(i++,r.push(new Uint8Array([s-1<<2]))):s<=256?(i+=2,r.push(new Uint8Array([240,s-1&255]))):s<=65536?(i+=3,r.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(i+=4,r.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(i+=5,r.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),r.push(t.slice(a,a+s)),i+=s,n[0]=0,n[1]=i&255,n[2]=i>>8&255,n[3]=i>>16&255,a+=s}return $i(r)}function Fv(t,r){var a=new Uint8Array(32),s=Bf(a),n=12,o=0;switch(a[0]=5,t.t){case"n":a[1]=2,J1e(a,n,t.v),o|=1,n+=16;break;case"b":a[1]=6,s.setFloat64(n,t.v?1:0,!0),o|=2,n+=8;break;case"s":if(r.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,s.setUint32(n,r.indexOf(t.v),!0),o|=8,n+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(8,o,!0),a.slice(0,n)}function Rv(t,r){var a=new Uint8Array(32),s=Bf(a),n=12,o=0;switch(a[0]=3,t.t){case"n":a[2]=2,s.setFloat64(n,t.v,!0),o|=32,n+=8;break;case"b":a[2]=6,s.setFloat64(n,t.v?1:0,!0),o|=32,n+=8;break;case"s":if(r.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,s.setUint32(n,r.indexOf(t.v),!0),o|=16,n+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(4,o,!0),a.slice(0,n)}function ti(t){var r=da(t);return Lx(r[1][0].data)}function e2e(t,r,a){var s,n,o,i;if(!((s=t[6])!=null&&s[0])||!((n=t[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(o=t[8])==null?void 0:o[0])==null?void 0:i.data)&&dd(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Bf(t[7][0].data),u=0,m=[],x=Bf(t[4][0].data),h=0,b=[],p=0;p<r.length;++p){if(r[p]==null){d.setUint16(p*2,65535,!0),x.setUint16(p*2,65535);continue}d.setUint16(p*2,u,!0),x.setUint16(p*2,h,!0);var f,v;switch(typeof r[p]){case"string":f=Fv({t:"s",v:r[p]},a),v=Rv({t:"s",v:r[p]},a);break;case"number":f=Fv({t:"n",v:r[p]},a),v=Rv({t:"n",v:r[p]},a);break;case"boolean":f=Fv({t:"b",v:r[p]},a),v=Rv({t:"b",v:r[p]},a);break;default:throw new Error("Unsupported value "+r[p])}m.push(f),u+=f.length,b.push(v),h+=v.length,++c}for(t[2][0].data=nr(c);p<t[7][0].data.length/2;++p)d.setUint16(p*2,65535,!0),x.setUint16(p*2,65535,!0);return t[6][0].data=$i(m),t[3][0].data=$i(b),c}function t2e(t,r){if(!r||!r.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=Ls(a["!ref"]);s.s.r=s.s.c=0;var n=!1;s.e.c>9&&(n=!0,s.e.c=9),s.e.r>49&&(n=!0,s.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(aa(s)));var o=zf(a,{range:s,header:1}),i=["~Sh33tJ5~"];o.forEach(function(L){return L.forEach(function(E){typeof E=="string"&&i.push(E)})});var l={},c=[],d=hr.read(r.numbers,{type:"base64"});d.FileIndex.map(function(L,E){return[L,d.FullPaths[E]]}).forEach(function(L){var E=L[0],M=L[1];if(E.type==2&&E.name.match(/\.iwa/)){var z=E.content,le=hn(z),Q=pn(le);Q.forEach(function(ne){c.push(ne.id),l[ne.id]={deps:[],location:M,type:dd(ne.messages[0].meta[1][0].data)}})}}),c.sort(function(L,E){return L-E});var u=c.filter(function(L){return L>1}).map(function(L){return[L,nr(L)]});d.FileIndex.map(function(L,E){return[L,d.FullPaths[E]]}).forEach(function(L){var E=L[0];if(L[1],!!E.name.match(/\.iwa/)){var M=pn(hn(E.content));M.forEach(function(z){z.messages.forEach(function(le){u.forEach(function(Q){z.messages.some(function(ne){return dd(ne.meta[1][0].data)!=11006&&Q1e(ne.data,Q[1])})&&l[Q[0]].deps.push(z.id)})})})}});for(var m=hr.find(d,l[1].location),x=pn(hn(m.content)),h,b=0;b<x.length;++b){var p=x[b];p.id==1&&(h=p)}var f=ti(da(h.messages[0].data)[1][0].data);for(m=hr.find(d,l[f].location),x=pn(hn(m.content)),b=0;b<x.length;++b)p=x[b],p.id==f&&(h=p);for(f=ti(da(h.messages[0].data)[2][0].data),m=hr.find(d,l[f].location),x=pn(hn(m.content)),b=0;b<x.length;++b)p=x[b],p.id==f&&(h=p);for(f=ti(da(h.messages[0].data)[2][0].data),m=hr.find(d,l[f].location),x=pn(hn(m.content)),b=0;b<x.length;++b)p=x[b],p.id==f&&(h=p);var v=da(h.messages[0].data);{v[6][0].data=nr(s.e.r+1),v[7][0].data=nr(s.e.c+1);var g=ti(v[46][0].data),y=hr.find(d,l[g].location),N=pn(hn(y.content));{for(var _=0;_<N.length&&N[_].id!=g;++_);if(N[_].id!=g)throw"Bad ColumnRowUIDMapArchive";var w=da(N[_].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var S=0;S<=s.e.c;++S){var C=[];C[1]=C[2]=[{type:0,data:nr(S+420690)}],w[1].push({type:2,data:Ea(C)}),w[2].push({type:0,data:nr(S)}),w[3].push({type:0,data:nr(S)})}w[4]=[],w[5]=[],w[6]=[];for(var k=0;k<=s.e.r;++k)C=[],C[1]=C[2]=[{type:0,data:nr(k+726270)}],w[4].push({type:2,data:Ea(C)}),w[5].push({type:0,data:nr(k)}),w[6].push({type:0,data:nr(k)});N[_].messages[0].data=Ea(w)}y.content=Sc(_c(N)),y.size=y.content.length,delete v[46];var F=da(v[4][0].data);{F[7][0].data=nr(s.e.r+1);var q=da(F[1][0].data),A=ti(q[2][0].data);y=hr.find(d,l[A].location),N=pn(hn(y.content));{if(N[0].id!=A)throw"Bad HeaderStorageBucket";var T=da(N[0].messages[0].data);for(k=0;k<o.length;++k){var U=da(T[2][0].data);U[1][0].data=nr(k),U[4][0].data=nr(o[k].length),T[2][k]={type:T[2][0].type,data:Ea(U)}}N[0].messages[0].data=Ea(T)}y.content=Sc(_c(N)),y.size=y.content.length;var K=ti(F[2][0].data);y=hr.find(d,l[K].location),N=pn(hn(y.content));{if(N[0].id!=K)throw"Bad HeaderStorageBucket";for(T=da(N[0].messages[0].data),S=0;S<=s.e.c;++S)U=da(T[2][0].data),U[1][0].data=nr(S),U[4][0].data=nr(s.e.r+1),T[2][S]={type:T[2][0].type,data:Ea(U)};N[0].messages[0].data=Ea(T)}y.content=Sc(_c(N)),y.size=y.content.length;var I=ti(F[4][0].data);(function(){for(var L=hr.find(d,l[I].location),E=pn(hn(L.content)),M,z=0;z<E.length;++z){var le=E[z];le.id==I&&(M=le)}var Q=da(M.messages[0].data);{Q[3]=[];var ne=[];i.forEach(function(ie,ve){ne[1]=[{type:0,data:nr(ve)}],ne[2]=[{type:0,data:nr(1)}],ne[3]=[{type:2,data:Y1e(ie)}],Q[3].push({type:2,data:Ea(ne)})})}M.messages[0].data=Ea(Q);var re=_c(E),ae=Sc(re);L.content=ae,L.size=L.content.length})();var Y=da(F[3][0].data);{var D=Y[1][0];delete Y[2];var W=da(D.data);{var R=ti(W[2][0].data);(function(){for(var L=hr.find(d,l[R].location),E=pn(hn(L.content)),M,z=0;z<E.length;++z){var le=E[z];le.id==R&&(M=le)}var Q=da(M.messages[0].data);{delete Q[6],delete Y[7];var ne=new Uint8Array(Q[5][0].data);Q[5]=[];for(var re=0,ae=0;ae<=s.e.r;++ae){var ie=da(ne);re+=e2e(ie,o[ae],i),ie[1][0].data=nr(ae),Q[5].push({data:Ea(ie),type:2})}Q[1]=[{type:0,data:nr(s.e.c+1)}],Q[2]=[{type:0,data:nr(s.e.r+1)}],Q[3]=[{type:0,data:nr(re)}],Q[4]=[{type:0,data:nr(s.e.r+1)}]}M.messages[0].data=Ea(Q);var ve=_c(E),_e=Sc(ve);L.content=_e,L.size=L.content.length})()}D.data=Ea(W)}F[3][0].data=Ea(Y)}v[4][0].data=Ea(F)}h.messages[0].data=Ea(v);var B=_c(x),O=Sc(B);return m.content=O,m.size=m.content.length,d}function r2e(t){return function(a){for(var s=0;s!=t.length;++s){var n=t[s];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function fw(t){r2e([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function a2e(t,r){return r.bookType=="ods"?F$(t,r):r.bookType=="numbers"?t2e(t,r):r.bookType=="xlsb"?s2e(t,r):n2e(t,r)}function s2e(t,r){Gc=1024,t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(ub(),db(t.SSF),r.revssf=mb(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Sm?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var a=r.bookType=="xlsb"?"bin":"xml",s=h$.indexOf(r.bookType)>-1,n=UR();fw(r=r||{});var o=ew(),i="",l=0;if(r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",zt(o,i,GR(t.Props,r)),n.coreprops.push(i),ir(r.rels,2,i,Jt.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,zt(o,i,YR(t.Props)),n.extprops.push(i),ir(r.rels,3,i,Jt.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",zt(o,i,QR(t.Custprops)),n.custprops.push(i),ir(r.rels,4,i,Jt.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var u={"!id":{}},m=t.Sheets[t.SheetNames[l-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:i="xl/worksheets/sheet"+l+"."+a,zt(o,i,i1e(l-1,i,r,t,u)),n.sheets.push(i),ir(r.wbrels,-1,"worksheets/sheet"+l+"."+a,Jt.WS[0])}if(m){var h=m["!comments"],b=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+a,zt(o,p,d1e(h,p)),n.comments.push(p),ir(u,-1,"../comments"+l+"."+a,Jt.CMNT),b=!0),m["!legacy"]&&b&&zt(o,"xl/drawings/vmlDrawing"+l+".vml",x$(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&zt(o,HR(i),ld(u))}return r.Strings!=null&&r.Strings.length>0&&(i="xl/sharedStrings."+a,zt(o,i,c1e(r.Strings,i,r)),n.strs.push(i),ir(r.wbrels,-1,"sharedStrings."+a,Jt.SST)),i="xl/workbook."+a,zt(o,i,o1e(t,i)),n.workbooks.push(i),ir(r.rels,1,i,Jt.WB),i="xl/theme/theme1.xml",zt(o,i,u$(t.Themes,r)),n.themes.push(i),ir(r.wbrels,-1,"theme/theme1.xml",Jt.THEME),i="xl/styles."+a,zt(o,i,l1e(t,i,r)),n.styles.push(i),ir(r.wbrels,-1,"styles."+a,Jt.STY),t.vbaraw&&s&&(i="xl/vbaProject.bin",zt(o,i,t.vbaraw),n.vba.push(i),ir(r.wbrels,-1,"vbaProject.bin",Jt.VBA)),i="xl/metadata."+a,zt(o,i,u1e(i)),n.metadata.push(i),ir(r.wbrels,-1,"metadata."+a,Jt.XLMETA),zt(o,"[Content_Types].xml",WR(n,r)),zt(o,"_rels/.rels",ld(r.rels)),zt(o,"xl/_rels/workbook."+a+".rels",ld(r.wbrels)),delete r.revssf,delete r.ssf,o}function n2e(t,r){Gc=1024,t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(ub(),db(t.SSF),r.revssf=mb(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Sm?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var a="xml",s=h$.indexOf(r.bookType)>-1,n=UR();fw(r=r||{});var o=ew(),i="",l=0;if(r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",zt(o,i,GR(t.Props,r)),n.coreprops.push(i),ir(r.rels,2,i,Jt.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,zt(o,i,YR(t.Props)),n.extprops.push(i),ir(r.rels,3,i,Jt.EXT_PROPS),t.Custprops!==t.Props&&Ma(t.Custprops||{}).length>0&&(i="docProps/custom.xml",zt(o,i,QR(t.Custprops)),n.custprops.push(i),ir(r.rels,4,i,Jt.CUST_PROPS));var u=["SheetJ5"];for(r.tcid=0,l=1;l<=t.SheetNames.length;++l){var m={"!id":{}},x=t.Sheets[t.SheetNames[l-1]],h=(x||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+a,zt(o,i,_$(l-1,r,t,m)),n.sheets.push(i),ir(r.wbrels,-1,"worksheets/sheet"+l+"."+a,Jt.WS[0])}if(x){var b=x["!comments"],p=!1,f="";if(b&&b.length>0){var v=!1;b.forEach(function(g){g[1].forEach(function(y){y.T==!0&&(v=!0)})}),v&&(f="xl/threadedComments/threadedComment"+l+"."+a,zt(o,f,Dbe(b,u,r)),n.threadedcomments.push(f),ir(m,-1,"../threadedComments/threadedComment"+l+"."+a,Jt.TCMNT)),f="xl/comments"+l+"."+a,zt(o,f,p$(b)),n.comments.push(f),ir(m,-1,"../comments"+l+"."+a,Jt.CMNT),p=!0}x["!legacy"]&&p&&zt(o,"xl/drawings/vmlDrawing"+l+".vml",x$(l,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&zt(o,HR(i),ld(m))}return r.Strings!=null&&r.Strings.length>0&&(i="xl/sharedStrings."+a,zt(o,i,n$(r.Strings,r)),n.strs.push(i),ir(r.wbrels,-1,"sharedStrings."+a,Jt.SST)),i="xl/workbook."+a,zt(o,i,k$(t)),n.workbooks.push(i),ir(r.rels,1,i,Jt.WB),i="xl/theme/theme1.xml",zt(o,i,u$(t.Themes,r)),n.themes.push(i),ir(r.wbrels,-1,"theme/theme1.xml",Jt.THEME),i="xl/styles."+a,zt(o,i,c$(t,r)),n.styles.push(i),ir(r.wbrels,-1,"styles."+a,Jt.STY),t.vbaraw&&s&&(i="xl/vbaProject.bin",zt(o,i,t.vbaraw),n.vba.push(i),ir(r.wbrels,-1,"vbaProject.bin",Jt.VBA)),i="xl/metadata."+a,zt(o,i,m$()),n.metadata.push(i),ir(r.wbrels,-1,"metadata."+a,Jt.XLMETA),u.length>1&&(i="xl/persons/person.xml",zt(o,i,Mbe(u)),n.people.push(i),ir(r.wbrels,-1,"persons/person.xml",Jt.PEOPLE)),zt(o,"[Content_Types].xml",WR(n,r)),zt(o,"_rels/.rels",ld(r.rels)),zt(o,"xl/_rels/workbook."+a+".rels",ld(r.wbrels)),delete r.revssf,delete r.ssf,o}function o2e(t,r){var a="";switch((r||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Bo(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function R$(t,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return c0(r.file,hr.write(t,{type:tr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return hr.write(t,r)}function i2e(t,r){var a=js(r||{}),s=a2e(t,a);return l2e(s,a)}function l2e(t,r){var a={},s=tr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(r.compression&&(a.compression="DEFLATE"),r.password)a.type=s;else switch(r.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");case"buffer":case"file":a.type=s;break;default:throw new Error("Unrecognized type "+r.type)}var n=t.FullPaths?hr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!r.compression}):t.generate(a);if(typeof Deno<"u"&&typeof n=="string"){if(r.type=="binary"||r.type=="base64")return n;n=new Uint8Array(cb(n))}return r.password&&typeof encrypt_agile<"u"?R$(encrypt_agile(n,r.password),r):r.type==="file"?c0(r.file,n):r.type=="string"?jm(n):n}function c2e(t,r){var a=r||{},s=S1e(t,a);return R$(s,a)}function Ln(t,r,a){a||(a="");var s=a+t;switch(r.type){case"base64":return $x(Mx(s));case"binary":return Mx(s);case"string":return t;case"file":return c0(r.file,s,"utf8");case"buffer":return tr?Ko(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):Ln(s,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function d2e(t,r){switch(r.type){case"base64":return $x(t);case"binary":return t;case"string":return t;case"file":return c0(r.file,t,"binary");case"buffer":return tr?Ko(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function xp(t,r){switch(r.type){case"string":case"base64":case"binary":for(var a="",s=0;s<t.length;++s)a+=String.fromCharCode(t[s]);return r.type=="base64"?$x(a):r.type=="string"?jm(a):a;case"file":return c0(r.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+r.type)}}function $$(t,r){Ihe(),Xje(t);var a=js(r||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var s=$$(t,a);return a.type="array",cb(s)}var n=0;if(a.sheet&&(typeof a.sheet=="number"?n=a.sheet:n=t.SheetNames.indexOf(a.sheet),!t.SheetNames[n]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return Ln(w1e(t,a),a);case"slk":case"sylk":return Ln(Hge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"htm":case"html":return Ln(P$(t.Sheets[t.SheetNames[n]],a),a);case"txt":return d2e(D$(t.Sheets[t.SheetNames[n]],a),a);case"csv":return Ln(gw(t.Sheets[t.SheetNames[n]],a),a,"\uFEFF");case"dif":return Ln(Kge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"dbf":return xp(Wge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"prn":return Ln(Gge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"rtf":return Ln(tbe.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"eth":return Ln(s$.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"fods":return Ln(F$(t,a),a);case"wk1":return xp(f6.sheet_to_wk1(t.Sheets[t.SheetNames[n]],a),a);case"wk3":return xp(f6.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),xp(A$(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),c2e(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return i2e(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function u2e(t,r,a,s,n,o,i,l){var c=$a(a),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,x=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:a,enumerable:!1})}catch{x.__rowNum__=a}else x.__rowNum__=a;if(!i||t[a])for(var h=r.s.c;h<=r.e.c;++h){var b=i?t[a][h]:t[s[h]+c];if(b===void 0||b.t===void 0){if(d===void 0)continue;o[h]!=null&&(x[o[h]]=d);continue}var p=b.v;switch(b.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(o[h]!=null){if(p==null)if(b.t=="e"&&p===null)x[o[h]]=null;else if(d!==void 0)x[o[h]]=d;else if(u&&p===null)x[o[h]]=null;else continue;else x[o[h]]=u&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?p:zo(b,p,l);p!=null&&(m=!1)}}return{row:x,isempty:m}}function zf(t,r){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},s=0,n=1,o=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=r||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=kr(u);break;case"number":c=kr(t["!ref"]),c.s.r=u;break;default:c=u}s>0&&(n=0);var m=$a(c.s.r),x=[],h=[],b=0,p=0,f=Array.isArray(t),v=c.s.r,g=0,y={};f&&!t[v]&&(t[v]=[]);var N=d.skipHidden&&t["!cols"]||[],_=d.skipHidden&&t["!rows"]||[];for(g=c.s.c;g<=c.e.c;++g)if(!(N[g]||{}).hidden)switch(x[g]=Wa(g),a=f?t[v][g]:t[x[g]+m],s){case 1:o[g]=g-c.s.c;break;case 2:o[g]=x[g];break;case 3:o[g]=d.header[g-c.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),l=i=zo(a,null,d),p=y[i]||0,!p)y[i]=1;else{do l=i+"_"+p++;while(y[l]);y[i]=p,y[l]=1}o[g]=l}for(v=c.s.r+n;v<=c.e.r;++v)if(!(_[v]||{}).hidden){var w=u2e(t,c,v,x,s,o,f,d);(w.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(h[b++]=w.row)}return h.length=b,h}var _6=/"/g;function m2e(t,r,a,s,n,o,i,l){for(var c=!0,d=[],u="",m=$a(a),x=r.s.c;x<=r.e.c;++x)if(s[x]){var h=l.dense?(t[a]||[])[x]:t[s[x]+m];if(h==null)u="";else if(h.v!=null){c=!1,u=""+(l.rawNumbers&&h.t=="n"?h.v:zo(h,null,l));for(var b=0,p=0;b!==u.length;++b)if((p=u.charCodeAt(b))===n||p===o||p===34||l.forceQuotes){u='"'+u.replace(_6,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(c=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(_6,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(i)}function gw(t,r){var a=[],s=r??{};if(t==null||t["!ref"]==null)return"";var n=kr(t["!ref"]),o=s.FS!==void 0?s.FS:",",i=o.charCodeAt(0),l=s.RS!==void 0?s.RS:`
`,c=l.charCodeAt(0),d=new RegExp((o=="|"?"\\|":o)+"+$"),u="",m=[];s.dense=Array.isArray(t);for(var x=s.skipHidden&&t["!cols"]||[],h=s.skipHidden&&t["!rows"]||[],b=n.s.c;b<=n.e.c;++b)(x[b]||{}).hidden||(m[b]=Wa(b));for(var p=0,f=n.s.r;f<=n.e.r;++f)(h[f]||{}).hidden||(u=m2e(t,n,f,m,i,c,o,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&a.push((p++?l:"")+u)));return delete s.dense,a.join("")}function D$(t,r){r||(r={}),r.FS="	",r.RS=`
`;var a=gw(t,r);return a}function x2e(t){var r="",a,s="";if(t==null||t["!ref"]==null)return[];var n=kr(t["!ref"]),o="",i=[],l,c=[],d=Array.isArray(t);for(l=n.s.c;l<=n.e.c;++l)i[l]=Wa(l);for(var u=n.s.r;u<=n.e.r;++u)for(o=$a(u),l=n.s.c;l<=n.e.c;++l)if(r=i[l]+o,a=d?(t[u]||[])[l]:t[r],s="",a!==void 0){if(a.F!=null){if(r=a.F,!a.f)continue;s=a.f,r.indexOf(":")==-1&&(r=r+":"+r)}if(a.f!=null)s=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)s=""+a.v;else if(a.t=="b")s=a.v?"TRUE":"FALSE";else if(a.w!==void 0)s="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?s="'"+a.v:s=""+a.v}}c[c.length]=r+"="+s}return c}function M$(t,r,a){var s=a||{},n=+!s.skipHeader,o=t||{},i=0,l=0;if(o&&s.origin!=null)if(typeof s.origin=="number")i=s.origin;else{var c=typeof s.origin=="string"?wa(s.origin):s.origin;i=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:i+r.length-1+n}};if(o["!ref"]){var m=kr(o["!ref"]);u.e.c=Math.max(u.e.c,m.e.c),u.e.r=Math.max(u.e.r,m.e.r),i==-1&&(i=m.e.r+1,u.e.r=i+r.length-1+n)}else i==-1&&(i=0,u.e.r=r.length-1+n);var x=s.header||[],h=0;r.forEach(function(p,f){Ma(p).forEach(function(v){(h=x.indexOf(v))==-1&&(x[h=x.length]=v);var g=p[v],y="z",N="",_=ur({c:l+h,r:i+f+n});d=Bx(o,_),g&&typeof g=="object"&&!(g instanceof Date)?o[_]=g:(typeof g=="number"?y="n":typeof g=="boolean"?y="b":typeof g=="string"?y="s":g instanceof Date?(y="d",s.cellDates||(y="n",g=ys(g)),N=s.dateNF||qr[14]):g===null&&s.nullError&&(y="e",g=0),d?(d.t=y,d.v=g,delete d.w,delete d.R,N&&(d.z=N)):o[_]=d={t:y,v:g},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+x.length-1);var b=$a(i);if(n)for(h=0;h<x.length;++h)o[Wa(h+l)+b]={t:"s",v:x[h]};return o["!ref"]=aa(u),o}function p2e(t,r){return M$(null,t,r)}function Bx(t,r,a){if(typeof r=="string"){if(Array.isArray(t)){var s=wa(r);return t[s.r]||(t[s.r]=[]),t[s.r][s.c]||(t[s.r][s.c]={t:"z"})}return t[r]||(t[r]={t:"z"})}return typeof r!="number"?Bx(t,ur(r)):Bx(t,ur({r,c:a||0}))}function h2e(t,r){if(typeof r=="number"){if(r>=0&&t.SheetNames.length>r)return r;throw new Error("Cannot find sheet # "+r)}else if(typeof r=="string"){var a=t.SheetNames.indexOf(r);if(a>-1)return a;throw new Error("Cannot find sheet name |"+r+"|")}else throw new Error("Cannot find sheet |"+r+"|")}function f2e(){return{SheetNames:[],Sheets:{}}}function g2e(t,r,a,s){var n=1;if(!a)for(;n<=65535&&t.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&t.SheetNames.indexOf(a)>=0){var o=a.match(/(^.*?)(\d+)$/);n=o&&+o[2]||0;var i=o&&o[1]||a;for(++n;n<=65535&&t.SheetNames.indexOf(a=i+n)!=-1;++n);}if(C$(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=r,a}function b2e(t,r,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var s=h2e(t,r);switch(t.Workbook.Sheets[s]||(t.Workbook.Sheets[s]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[s].Hidden=a}function v2e(t,r){return t.z=r,t}function I$(t,r,a){return r?(t.l={Target:r},a&&(t.l.Tooltip=a)):delete t.l,t}function y2e(t,r,a){return I$(t,"#"+r,a)}function j2e(t,r,a){t.c||(t.c=[]),t.c.push({t:r,a:a||"SheetJS"})}function N2e(t,r,a,s){for(var n=typeof r!="string"?r:kr(r),o=typeof r=="string"?r:aa(r),i=n.s.r;i<=n.e.r;++i)for(var l=n.s.c;l<=n.e.c;++l){var c=Bx(t,i,l);c.t="n",c.F=o,delete c.v,i==n.s.r&&l==n.s.c&&(c.f=a,s&&(c.D=!0))}return t}var el={encode_col:Wa,encode_row:$a,encode_cell:ur,encode_range:aa,decode_col:ow,decode_row:nw,split_cell:Ife,decode_cell:wa,decode_range:Ls,format_cell:zo,sheet_add_aoa:IR,sheet_add_json:M$,sheet_add_dom:T$,aoa_to_sheet:ju,json_to_sheet:p2e,table_to_sheet:O$,table_to_book:K1e,sheet_to_csv:gw,sheet_to_txt:D$,sheet_to_json:zf,sheet_to_html:P$,sheet_to_formulae:x2e,sheet_to_row_object_array:zf,sheet_get_cell:Bx,book_new:f2e,book_append_sheet:g2e,book_set_sheet_visibility:b2e,cell_set_number_format:v2e,cell_set_hyperlink:I$,cell_set_internal_link:y2e,cell_add_comment:j2e,sheet_set_array_formula:N2e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},L$={exports:{}};(function(t,r){(function(a,s){s()})(ho,function(){function a(d,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,u,m){var x=new XMLHttpRequest;x.open("GET",d),x.responseType="blob",x.onload=function(){c(x.response,u,m)},x.onerror=function(){console.error("could not download file")},x.send()}function n(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ho=="object"&&ho.global===ho?ho:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,u,m){var x=i.URL||i.webkitURL,h=document.createElement("a");u=u||d.name||"download",h.download=u,h.rel="noopener",typeof d=="string"?(h.href=d,h.origin===location.origin?o(h):n(h.href)?s(d,u,m):o(h,h.target="_blank")):(h.href=x.createObjectURL(d),setTimeout(function(){x.revokeObjectURL(h.href)},4e4),setTimeout(function(){o(h)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,m){if(u=u||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(a(d,m),u);else if(n(d))s(d,u,m);else{var x=document.createElement("a");x.href=d,x.target="_blank",setTimeout(function(){o(x)})}}:function(d,u,m,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof d=="string")return s(d,u,m);var h=d.type==="application/octet-stream",b=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&b||l)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var y=f.result;y=p?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=y:location=y,x=null},f.readAsDataURL(d)}else{var v=i.URL||i.webkitURL,g=v.createObjectURL(d);x?x.location=g:location.href=g,x=null,setTimeout(function(){v.revokeObjectURL(g)},4e4)}});i.saveAs=c.saveAs=c,t.exports=c})})(L$);var w2e=L$.exports;function _2e(){const[t,r]=j.useState(!1),[a,s]=j.useState("resumo"),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState("mes_anterior"),[b,p]=j.useState(""),[f,v]=j.useState(""),[g,y]=j.useState(""),[N,_]=j.useState(!0),[w,S]=j.useState("financeiro"),[C,k]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[F,q]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[A,T]=j.useState([]),[U,K]=j.useState([]),[I,Y]=j.useState([]),[D,W]=j.useState([]),[R,B]=j.useState([]),[O,L]=j.useState([]),[E,M]=j.useState([]),[z,le]=j.useState(new Set),[Q,ne]=j.useState([]),[re,ae]=j.useState([]),[ie,ve]=j.useState([]),[_e,me]=j.useState([]),[Se,Ne]=j.useState({}),[ot,Ke]=j.useState([]),lt=te=>{const ue=new Set(z);ue.has(te)?ue.delete(te):ue.add(te),le(ue)},ke=te=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(te||0),Ie=te=>te==null||isNaN(te)||!isFinite(te)?0:te,Ae=te=>{if(!te)return"N/A";try{if(te instanceof Date)return te.toLocaleDateString("pt-BR");if(typeof te=="string"&&te.includes("T")){const Oe=te.split("T")[0],[ce,je,Re]=Oe.split("-");return`${Re}/${je}/${ce}`}const ue=new Date(te);return isNaN(ue.getTime())?"N/A":ue.toLocaleDateString("pt-BR")}catch{return"N/A"}},it=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],gt=(te,ue)=>{if(!te||te.length===0)return te;let Oe=[...te];return b&&ue==="funcionario"&&(Oe=Oe.filter(ce=>ce.funcionario===b)),f&&ue==="formaPagamento"&&(Oe=Oe.filter(ce=>ce.forma_pagamento===f)),g&&ue==="categoria"&&(Oe=Oe.filter(ce=>ce.categoria===g)),Oe},Dt=gt(U,"formaPagamento"),Ct=gt(I,"funcionario"),Lt=gt(O,"categoria"),$t=({titulo:te,valor:ue,icone:Oe,cor:ce,valorAnterior:je})=>{const Re=xe(ue,je),He=Re.percentual>0,J=Re.percentual===0;return e.jsxs("div",{className:`${ce} text-white p-4 rounded-lg shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:te}),e.jsx(Oe,{className:"w-5 h-5 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:ke(ue)}),u&&je!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${J?"opacity-70":""}`,children:[He&&e.jsx(Zo,{className:"w-4 h-4"}),!He&&!J&&e.jsx(Jo,{className:"w-4 h-4"}),J&&e.jsx(gg,{className:"w-4 h-4"}),e.jsxs("span",{children:[Math.abs(Re.percentual),"%"]})]})]})},ge=()=>{switch(x){case"periodo_anterior":return"mesmo perodo anterior";case"mes_anterior":return"mesmo perodo do ms anterior";case"ano_anterior":return"mesmo perodo do ano anterior";default:return"perodo anterior"}},De=async()=>{if(!n||!i){ze.error("Selecione um perodo para gerar o relatrio");return}const te=ze.loading("Gerando PDF...");try{const ue=new URLSearchParams({data_inicio:n,data_fim:i});b&&ue.append("funcionario",b),f&&ue.append("forma_pagamento",f),g&&ue.append("categoria",g);const Oe=await V.get(`/relatorios/vendas/export/pdf?${ue.toString()}`,{responseType:"blob"}),ce=window.URL.createObjectURL(new Blob([Oe.data])),je=document.createElement("a");je.href=ce,je.setAttribute("download",`relatorio_vendas_${n}_${i}.pdf`),document.body.appendChild(je),je.click(),je.remove(),ze.success(" PDF exportado com sucesso!")}catch(ue){console.error("Erro ao exportar PDF:",ue),ze.error("Erro ao exportar PDF")}finally{ze.dismiss(te)}},Le=()=>{const te=el.book_new(),ue=[["RELATRIO DE VENDAS"],["Perodo:",`${Ae(n)} at ${Ae(i)}`],[""],["Mtrica","Valor"],["Venda Bruta",C.venda_bruta],["Taxa de Entrega",C.taxa_entrega],["Desconto",C.desconto],["Venda Lquida",C.venda_liquida],["Em Aberto",C.em_aberto],["Quantidade de Vendas",C.quantidade_vendas]],Oe=el.aoa_to_sheet(ue);if(el.book_append_sheet(te,Oe,"Resumo"),A.length>0){const J=[["Data","Qtd","Tkt. Mdio","Vl. bruto","Taxa entrega","Desconto","(%)","Vl. lquido","Vl. recebido","Saldo aberto"],...A.map(Pe=>[Ae(Pe.data),Pe.quantidade,Pe.ticket_medio,Pe.valor_bruto,Pe.taxa_entrega,Pe.desconto,Pe.percentual_desconto,Pe.valor_liquido,Pe.valor_recebido,Pe.saldo_aberto])],ye=el.aoa_to_sheet(J);el.book_append_sheet(te,ye,"Vendas por Data")}if(Dt.length>0){const J=[["Forma","Valor pago"],...Dt.map(Pe=>[Pe.forma_pagamento,Pe.valor_total])],ye=el.aoa_to_sheet(J);el.book_append_sheet(te,ye,"Formas Pagamento")}const ce=$$(te,{bookType:"xlsx",type:"binary"}),je=new ArrayBuffer(ce.length),Re=new Uint8Array(je);for(let J=0;J<ce.length;J++)Re[J]=ce.charCodeAt(J)&255;const He=`relatorio_vendas_${n}_${i}.xlsx`;w2e.saveAs(new Blob([je],{type:"application/octet-stream"}),He)},ct=te=>{const ue=new Date,Oe=ue.getFullYear(),ce=String(ue.getMonth()+1).padStart(2,"0"),je=String(ue.getDate()).padStart(2,"0"),Re=`${Oe}-${ce}-${je}`;let He,J;switch(te){case"hoje":He=J=Re;break;case"ontem":const ye=new Date(ue);ye.setDate(ue.getDate()-1);const Pe=ye.getFullYear(),We=String(ye.getMonth()+1).padStart(2,"0"),st=String(ye.getDate()).padStart(2,"0");He=J=`${Pe}-${We}-${st}`;break;case"esta_semana":const xt=ue.getDay(),pt=xt===0?6:xt-1,Nt=new Date(ue);Nt.setDate(ue.getDate()-pt);const At=Nt.getFullYear(),Mt=String(Nt.getMonth()+1).padStart(2,"0"),ut=String(Nt.getDate()).padStart(2,"0");He=`${At}-${Mt}-${ut}`,J=Re;break;case"este_mes":He=`${Oe}-${ce}-01`,J=Re;break;case"mes_anterior":const X=new Date(ue.getFullYear(),ue.getMonth()-1,1),P=new Date(ue.getFullYear(),ue.getMonth(),0),H=X.getFullYear(),Z=String(X.getMonth()+1).padStart(2,"0"),oe=P.getFullYear(),de=String(P.getMonth()+1).padStart(2,"0"),se=String(P.getDate()).padStart(2,"0");He=`${H}-${Z}-01`,J=`${oe}-${de}-${se}`;break;case"ultimos_7_dias":const fe=new Date(ue);fe.setDate(ue.getDate()-7);const he=fe.getFullYear(),we=String(fe.getMonth()+1).padStart(2,"0"),Ee=String(fe.getDate()).padStart(2,"0");He=`${he}-${we}-${Ee}`,J=Re;break;case"ultimos_30_dias":const Ue=new Date(ue);Ue.setDate(ue.getDate()-30);const Je=Ue.getFullYear(),et=String(Ue.getMonth()+1).padStart(2,"0"),Ze=String(Ue.getDate()).padStart(2,"0");He=`${Je}-${et}-${Ze}`,J=Re;break;case"este_ano":He=`${Oe}-01-01`,J=Re;break;default:return}o(He),l(J),d(te)},tt=()=>{const[te,ue,Oe]=n.split("-").map(Number),[ce,je,Re]=i.split("-").map(Number),He=new Date(te,ue-1,Oe),J=new Date(ce,je-1,Re),ye=Math.floor((J-He)/(1e3*60*60*24))+1;let Pe,We;switch(x){case"periodo_anterior":Pe=new Date(He),Pe.setDate(He.getDate()-ye),We=new Date(He),We.setDate(He.getDate()-1);break;case"mes_anterior":Pe=new Date(He),Pe.setMonth(He.getMonth()-1),We=new Date(J),We.setMonth(J.getMonth()-1);break;case"ano_anterior":Pe=new Date(He),Pe.setFullYear(He.getFullYear()-1),We=new Date(J),We.setFullYear(J.getFullYear()-1);break;default:return{data_inicio:"",data_fim:""}}const st=Pe.getFullYear(),xt=String(Pe.getMonth()+1).padStart(2,"0"),pt=String(Pe.getDate()).padStart(2,"0"),Nt=We.getFullYear(),At=String(We.getMonth()+1).padStart(2,"0"),Mt=String(We.getDate()).padStart(2,"0");return{data_inicio:`${st}-${xt}-${pt}`,data_fim:`${Nt}-${At}-${Mt}`}},xe=(te,ue)=>{if(!ue||ue===0)return{valor:0,percentual:0};const Oe=te-ue,ce=(Oe/ue*100).toFixed(1);return{valor:Oe,percentual:parseFloat(ce)}},Fe=async()=>{if(!(!n||!i)){r(!0);try{const ue=(await V.get("/relatorios/vendas/relatorio",{params:{data_inicio:n,data_fim:i}})).data;if(k(ue.resumo||{}),T(ue.vendas_por_data||[]),K(ue.formas_recebimento||[]),Y(ue.vendas_por_funcionario||[]),W(ue.vendas_por_tipo||[]),B(ue.vendas_por_grupo||[]),L(ue.produtos_detalhados||[]),Ke(ue.produtos_analise||[]),M(ue.lista_vendas||[]),u||a==="comparacao"){const Oe=tt(),ce=await V.get("/relatorios/vendas/relatorio",{params:Oe});q(ce.data.resumo||{}),ne(ce.data.formas_recebimento||[]),ae(ce.data.vendas_por_grupo||[]),ve(ce.data.vendas_por_funcionario||[])}else q({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0})}catch(te){console.error("Erro ao carregar relatrio:",te)}finally{r(!1)}}},Ye=()=>{if(!ot||ot.length===0){me([]),Ne({});return}const te=ot.map(ce=>{const je=Ie(ce.custo_total),Re=Ie(ce.valor_total),He=Ie(ce.quantidade)||1,J=Re-je,ye=je>0?J/je*100:0;return{nome:ce.nome||ce.produto||"Produto sem nome",marca:ce.marca||"-",quantidade:He,custo:Ie(je/He),preco:Ie(Re/He),lucro_total:Ie(J),margem:Ie(ye),categoria:ce.categoria||"Sem Categoria"}}),ue=te.sort((ce,je)=>je.lucro_total-ce.lucro_total).slice(0,20);me(ue);const Oe={};te.forEach(ce=>{const je=ce.categoria||"Sem Categoria";Oe[je]||(Oe[je]={quantidade:0,total:0,margens:[]}),Oe[je].quantidade+=ce.quantidade,Oe[je].total+=ce.preco*ce.quantidade,Oe[je].margens.push(ce.margem)}),Object.keys(Oe).forEach(ce=>{const je=Oe[ce].margens,Re=je.reduce((He,J)=>Ie(He)+Ie(J),0);Oe[ce].margem_media=Ie(je.length>0?Re/je.length:0),delete Oe[ce].margens}),Ne(Oe)};return j.useEffect(()=>{a==="analise"&&Ye()},[ot,a]),j.useEffect(()=>{Fe()},[n,i,u,x,a]),j.useEffect(()=>{ct("este_mes")},[]),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:De,disabled:!n||!i,title:n&&i?`Exportar PDF de ${Ae(n)} at ${Ae(i)}`:"Selecione um perodo",className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar PDF"}),n&&i&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",Ae(n)," - ",Ae(i),")"]})]})]}),e.jsxs("button",{onClick:Le,disabled:!n||!i,title:n&&i?`Exportar dados de ${Ae(n)} at ${Ae(i)}`:"Selecione um perodo",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Xm,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar Excel"}),n&&i&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",Ae(n)," - ",Ae(i),")"]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:te=>m(te.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Comparar com:"})]}),u&&e.jsxs("select",{value:x,onChange:te=>h(te.target.value),className:"border rounded px-3 py-2 text-sm bg-blue-50 font-medium",children:[e.jsx("option",{value:"periodo_anterior",children:"Perodo imediatamente anterior (mesmo n de dias)"}),e.jsx("option",{value:"mes_anterior",children:"Mesmo perodo do ms passado"}),e.jsx("option",{value:"ano_anterior",children:"Mesmo perodo do ano passado"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"hoje",label:"Hoje"},{id:"ontem",label:"Ontem"},{id:"esta_semana",label:"Esta semana"},{id:"este_mes",label:"Este ms"},{id:"mes_anterior",label:"Ms anterior"},{id:"ultimos_7_dias",label:"ltimos 7 dias"},{id:"ultimos_30_dias",label:"ltimos 30 dias"},{id:"este_ano",label:"Este ano"},{id:"personalizado",label:"Personalizado"}].map(te=>e.jsx("button",{onClick:()=>{te.id==="personalizado"?d("personalizado"):ct(te.id)},className:`px-3 py-1 rounded text-sm font-medium transition-colors ${c===te.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:te.label},te.id))}),c==="personalizado"&&e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-gray-50 rounded",children:[e.jsx(zi,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:n,onChange:te=>o(te.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"text-gray-600",children:"at"}),e.jsx("input",{type:"date",value:i,onChange:te=>l(te.target.value),className:"border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx(Qm,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros Avanados:"}),e.jsxs("select",{value:b,onChange:te=>p(te.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todos os funcionrios"}),I.map((te,ue)=>e.jsx("option",{value:te.funcionario,children:te.funcionario},ue))]}),e.jsxs("select",{value:f,onChange:te=>v(te.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as formas"}),U.map((te,ue)=>e.jsx("option",{value:te.forma_pagamento,children:te.forma_pagamento},ue))]}),e.jsxs("select",{value:g,onChange:te=>y(te.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),O.map((te,ue)=>e.jsx("option",{value:te.categoria,children:te.categoria},ue))]}),e.jsx("button",{onClick:()=>{p(""),v(""),y("")},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300 transition-colors",children:"Limpar Filtros"}),e.jsxs("button",{onClick:()=>_(!N),className:"ml-auto px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Km,{className:"w-4 h-4"}),N?"Ocultar":"Mostrar"," Grficos"]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>s("resumo"),className:`px-4 py-2 font-medium ${a==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>s("produtos"),className:`px-4 py-2 font-medium ${a==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/servio"}),e.jsx("button",{onClick:()=>s("lista"),className:`px-4 py-2 font-medium ${a==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"}),e.jsx("button",{onClick:()=>s("comparacao"),className:`px-4 py-2 font-medium ${a==="comparacao"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Comparao de Perodos"}),e.jsx("button",{onClick:()=>s("analise"),className:`px-4 py-2 font-medium ${a==="analise"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Anlise Inteligente"})]})]}),a==="resumo"&&e.jsxs("div",{children:[u&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Modo Comparao Ativo:"}),e.jsxs("span",{className:"text-blue-700 ml-2",children:["Comparando ",e.jsxs("span",{className:"font-medium",children:[Ae(n)," at ",Ae(i)]})," com ",e.jsx("span",{className:"font-medium",children:ge()})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsx($t,{titulo:"Venda Bruta",valor:C.venda_bruta,icone:fa,cor:"bg-green-500",valorAnterior:F.venda_bruta}),e.jsx($t,{titulo:"Taxa de Entrega",valor:C.taxa_entrega,icone:$s,cor:"bg-gray-400",valorAnterior:F.taxa_entrega}),e.jsx($t,{titulo:"Desconto",valor:C.desconto,icone:sa,cor:"bg-yellow-500",valorAnterior:F.desconto}),e.jsx($t,{titulo:"Venda Lquida",valor:C.venda_liquida,icone:fa,cor:"bg-blue-500",valorAnterior:F.venda_liquida}),e.jsx($t,{titulo:"Em Aberto",valor:C.em_aberto,icone:Nd,cor:"bg-red-500",valorAnterior:F.em_aberto})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:ke(C.custo_total||0)}),e.jsx("div",{className:"text-sm",children:"Custo Total"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:ke(C.taxa_cartao_total||0)}),e.jsx("div",{className:"text-sm",children:"Taxas de Carto"})]}),e.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:ke(C.lucro_total||0)}),e.jsx("div",{className:"text-sm",children:"Lucro Total"})]}),e.jsxs("div",{className:"bg-teal-500 text-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[C.margem_media||0,"%"]}),e.jsx("div",{className:"text-sm",children:"Margem Mdia"})]})]}),N&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vendas no Perodo"}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(Jd,{data:A,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tickFormatter:te=>new Date(te).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx(Rr,{tickFormatter:te=>`R$ ${(te/1e3).toFixed(0)}k`}),e.jsx(lr,{formatter:te=>ke(te),labelFormatter:te=>Ae(te)}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"valor_bruto",stroke:"#3B82F6",strokeWidth:2,name:"Venda Bruta"}),e.jsx(as,{type:"monotone",dataKey:"valor_liquido",stroke:"#10B981",strokeWidth:2,name:"Venda Lquida"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Formas de Pagamento"}),e.jsx(ua,{width:"100%",height:350,children:e.jsxs(zn,{data:Dt,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{type:"number",tickFormatter:te=>ke(te)}),e.jsx(Rr,{type:"category",dataKey:"forma_pagamento",width:110,style:{fontSize:"12px"}}),e.jsx(lr,{formatter:(te,ue,Oe)=>{const ce=Dt.reduce((Re,He)=>Re+He.valor_total,0),je=(te/ce*100).toFixed(1);return[`${ke(te)} (${je}%)`,"Valor"]},contentStyle:{backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),e.jsx(Mr,{dataKey:"valor_total",fill:"#3B82F6",radius:[0,8,8,0],label:{position:"right",formatter:te=>{const ue=Dt.reduce((ce,je)=>ce+je.valor_total,0);return`${(te/ue*100).toFixed(1)}%`},style:{fontSize:"11px",fontWeight:"bold"}},children:Dt.map((te,ue)=>e.jsx(Sl,{fill:it[ue%it.length]},`cell-${ue}`))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top 10 Categorias de Produtos"}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(zn,{data:Lt.slice(0,10),children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"categoria"}),e.jsx(Rr,{tickFormatter:te=>`R$ ${(te/1e3).toFixed(0)}k`}),e.jsx(lr,{formatter:te=>ke(te)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_liquido",fill:"#3B82F6",name:"Valor Lquido"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. Mdio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[A.map((te,ue)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:Ae(te.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:te.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[te.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.saldo_aberto)})]},ue)),A.length>0&&(()=>{const te=A.reduce((Re,He)=>Re+He.quantidade,0),ue=A.reduce((Re,He)=>Re+He.valor_bruto,0),Oe=A.reduce((Re,He)=>Re+He.desconto,0),ce=te>0?ue/te:0,je=ue>0?(Oe/ue*100).toFixed(1):0;return e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:te}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(ce)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(ue)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(A.reduce((Re,He)=>Re+He.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(Oe)}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[je,"%"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(A.reduce((Re,He)=>Re+He.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(A.reduce((Re,He)=>Re+He.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(A.reduce((Re,He)=>Re+He.saldo_aberto,0))})]})})()]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[U.map((te,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:te.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_total)})]},ue)),U.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(U.reduce((te,ue)=>te+ue.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Funcionrio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[Ct.map((te,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:te.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:te.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_liquido)})]},ue)),Ct.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ct.reduce((te,ue)=>te+ue.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(Ct.reduce((te,ue)=>te+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(Ct.reduce((te,ue)=>te+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(Ct.reduce((te,ue)=>te+ue.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[D.map((te,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:te.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:te.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_liquido)})]},ue)),D.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:D.reduce((te,ue)=>te+ue.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(D.reduce((te,ue)=>te+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(D.reduce((te,ue)=>te+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(D.reduce((te,ue)=>te+ue.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[R.map((te,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:te.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[te.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.valor_liquido)})]},ue)),R.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(R.reduce((te,ue)=>te+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(R.reduce((te,ue)=>te+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(R.reduce((te,ue)=>te+ue.valor_liquido,0))})]})]})]})]})]})]}),a==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/Servios"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/Servios"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Lquido"})]})}),e.jsxs("tbody",{children:[Lt.map((te,ue)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-2",children:te.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:te.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(te.total_liquido)})]},`cat-${ue}`),te.subcategorias&&te.subcategorias.map((Oe,ce)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium",children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:Oe.subcategoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:Oe.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(Oe.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(Oe.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:ke(Oe.total_liquido)})]},`sub-${ue}-${ce}`),Oe.produtos&&Oe.produtos.map((je,Re)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:je.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:je.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(je.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(je.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(je.valor_liquido)})]},`prod-${ue}-${ce}-${Re}`))]})),te.produtos&&te.produtos.map((Oe,ce)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:Oe.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Oe.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(Oe.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(Oe.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ke(Oe.valor_liquido)})]},`prod-${ue}-${ce}`))]})),O.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:O.reduce((te,ue)=>te+ue.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(O.reduce((te,ue)=>te+ue.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(O.reduce((te,ue)=>te+ue.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(O.reduce((te,ue)=>te+ue.total_liquido,0))})]})]})]})})]}),a==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas com Anlise de Rentabilidade"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left w-8"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cdigo"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Entrega"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Operac."}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Carto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Comisso"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Custo"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lquida"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Custo"}),e.jsx("th",{className:"px-2 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:E.map(te=>e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>lt(te.id),children:[e.jsx("td",{className:"px-2 py-2",children:z.has(te.id)?e.jsx(ql,{className:"w-4 h-4 text-gray-600"}):e.jsx(ad,{className:"w-4 h-4 text-gray-600"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ae(te.data_venda)}),e.jsx("td",{className:"px-2 py-2",children:te.numero_venda}),e.jsx("td",{className:"px-2 py-2",children:te.cliente_nome}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:ke(te.venda_bruta)}),e.jsxs("td",{className:"px-2 py-2 text-right text-red-600",children:["-",ke(te.desconto)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",title:"Comisso repassada ao entregador",children:["-",ke(te.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-500",title:"Custo operacional da entrega (empresa)",children:["-",ke(te.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-purple-600",children:["-",ke(te.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",children:["-",ke(te.comissao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-pink-600",title:"Impostos sobre faturamento",children:["-",ke(te.imposto||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-600",children:["-",ke(te.custo_produtos)]}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:ke(te.venda_liquida)}),e.jsx("td",{className:`px-2 py-2 text-right font-bold ${te.lucro>=0?"text-green-600":"text-red-600"}`,children:ke(te.lucro)}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[te.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[te.margem_sobre_custo,"%"]}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${te.status==="finalizada"?"bg-green-100 text-green-800":te.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:te.status==="finalizada"?"Baixada":te.status==="baixa_parcial"?"Parcial":"Aberta"})})]}),z.has(te.id)&&te.itens&&te.itens.length>0&&e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"17",className:"px-4 py-3",children:e.jsxs("div",{className:"pl-8",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Produtos desta venda:"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Produto"}),e.jsx("th",{className:"px-2 py-1 text-center",children:"Qtd"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Preo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Entr."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Oper."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Carto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Comisso"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Total"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lquido"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Custo"})]})}),e.jsx("tbody",{children:te.itens.map((ue,Oe)=>e.jsxs("tr",{className:"border-b border-blue-200 hover:bg-blue-100",children:[e.jsx("td",{className:"px-2 py-1",children:ue.produto_nome}),e.jsx("td",{className:"px-2 py-1 text-center",children:ue.quantidade}),e.jsx("td",{className:"px-2 py-1 text-right",children:ke(ue.preco_unitario)}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:ke(ue.venda_bruta)}),e.jsxs("td",{className:"px-2 py-1 text-right text-red-600",children:["-",ke(ue.desconto)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",ke(ue.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-500",children:["-",ke(ue.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-purple-600",children:["-",ke(ue.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",ke(ue.comissao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-pink-600",children:["-",ke(ue.imposto||0)]}),e.jsx("td",{className:"px-2 py-1 text-right text-orange-600",children:ke(ue.custo_unitario)}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-600 font-medium",children:["-",ke(ue.custo_total)]}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:ke(ue.valor_liquido)}),e.jsx("td",{className:`px-2 py-1 text-right font-bold ${ue.lucro>=0?"text-green-600":"text-red-600"} cursor-help`,title:`Lucro unitrio: ${ke(ue.lucro_unitario)}`,children:ke(ue.lucro)}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Margem unitria: ${ue.margem_sobre_venda}%`,children:[ue.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Markup unitrio: ${ue.margem_sobre_custo}%`,children:[ue.margem_sobre_custo,"%"]})]},Oe))})]})]})})},`${te.id}-detalhes`)]},te.id))})]})})]}),a==="comparacao"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo de Anlise:"}),e.jsxs("select",{value:w,onChange:te=>S(te.target.value),className:"border rounded px-4 py-2 text-sm bg-blue-50 font-medium min-w-[250px]",children:[e.jsx("option",{value:"financeiro",children:" Comparao Financeira"}),e.jsx("option",{value:"formas_pagamento",children:" Por Forma de Pagamento"}),e.jsx("option",{value:"produtos",children:" Por Grupo de Produtos"}),e.jsx("option",{value:"funcionarios",children:" Por Funcionrio"})]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Perodo Atual:"})," ",Ae(n)," - ",Ae(i)]})]})}),w==="financeiro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300",children:[e.jsxs("div",{className:"bg-gray-500 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Perodo Anterior"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:ge()})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:F.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:ke(F.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:ke(F.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:ke(F.venda_liquida-F.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-blue-500",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Perodo Atual"}),e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[Ae(n)," - ",Ae(i)]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:C.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:ke(C.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:ke(C.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:ke(C.venda_liquida-C.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-green-500",children:[e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Diferena"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Variao vs perodo anterior"})]}),e.jsx("div",{className:"p-4 space-y-3",children:(()=>{const te=xe(C.quantidade_vendas,F.quantidade_vendas),ue=xe(C.venda_bruta,F.venda_bruta),Oe=xe(C.venda_liquida,F.venda_liquida),ce=C.venda_liquida-C.em_aberto,je=F.venda_liquida-F.em_aberto,Re=xe(ce,je);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qtd de Vendas"}),e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${te.percentual>=0?"text-green-600":"text-red-600"}`,children:[te.percentual>=0?e.jsx(Zo,{className:"w-6 h-6"}):e.jsx(Jo,{className:"w-6 h-6"}),Math.abs(te.percentual),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[te.valor>=0?"+":"",te.valor.toFixed(0)," vendas"]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${ue.percentual>=0?"text-green-600":"text-red-600"}`,children:[ue.percentual>=0?e.jsx(Zo,{className:"w-5 h-5"}):e.jsx(Jo,{className:"w-5 h-5"}),Math.abs(ue.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ke(ue.valor)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${Oe.percentual>=0?"text-green-600":"text-red-600"}`,children:[Oe.percentual>=0?e.jsx(Zo,{className:"w-5 h-5"}):e.jsx(Jo,{className:"w-5 h-5"}),Math.abs(Oe.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ke(Oe.valor)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${Re.percentual>=0?"text-green-600":"text-red-600"}`,children:[Re.percentual>=0?e.jsx(Zo,{className:"w-5 h-5"}):e.jsx(Jo,{className:"w-5 h-5"}),Math.abs(Re.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ke(Re.valor)})]})]})})()})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual"}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(zn,{data:[{nome:"Qtd Vendas",Anterior:F.quantidade_vendas||0,Atual:C.quantidade_vendas||0},{nome:"Vl. Bruto (mil)",Anterior:(F.venda_bruta||0)/1e3,Atual:(C.venda_bruta||0)/1e3},{nome:"Vl. Lquido (mil)",Anterior:(F.venda_liquida||0)/1e3,Atual:(C.venda_liquida||0)/1e3},{nome:"Vl. Recebido (mil)",Anterior:(F.venda_liquida-F.em_aberto||0)/1e3,Atual:(C.venda_liquida-C.em_aberto||0)/1e3}],children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome"}),e.jsx(Rr,{}),e.jsx(lr,{formatter:(te,ue)=>[ue.includes("mil")?`R$ ${te.toFixed(1)}k`:te.toFixed(0),ue]}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#3B82F6",name:"Perodo Atual"})]})})]})]}),w==="formas_pagamento"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Forma de Pagamento"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Forma de Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Diferena"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao %"})]})}),e.jsx("tbody",{children:U.map((te,ue)=>{const Oe=Q.find(je=>je.forma_pagamento===te.forma_pagamento)||{valor_total:0},ce=xe(te.valor_total,Oe.valor_total);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:te.forma_pagamento}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:ke(Oe.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:ke(te.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(ce.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${ce.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[ce.percentual>=0?e.jsx(Zo,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}),Math.abs(ce.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual"}),e.jsx(ua,{width:"100%",height:350,children:e.jsxs(zn,{data:U.map(te=>{var ue;return{nome:te.forma_pagamento,Anterior:(((ue=Q.find(Oe=>Oe.forma_pagamento===te.forma_pagamento))==null?void 0:ue.valor_total)||0)/1e3,Atual:te.valor_total/1e3}}),children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(Rr,{tickFormatter:te=>`R$ ${te.toFixed(0)}k`}),e.jsx(lr,{formatter:te=>`R$ ${te.toFixed(1)}k`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#10B981",name:"Perodo Atual"})]})})]})]}),w==="produtos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Grupo de Produtos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Grupo"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Diferena"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao %"})]})}),e.jsx("tbody",{children:R.map((te,ue)=>{const Oe=re.find(je=>je.grupo===te.grupo)||{valor_liquido:0},ce=xe(te.valor_liquido,Oe.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:te.grupo}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:ke(Oe.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:ke(te.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right",children:ke(ce.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${ce.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[ce.percentual>=0?e.jsx(Zo,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}),Math.abs(ce.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Perodo Anterior"}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(S1,{children:[e.jsx(On,{data:re,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:te=>{const ue=(te.valor_liquido/re.reduce((Oe,ce)=>Oe+ce.valor_liquido,0)*100).toFixed(1);return ue>5?`${ue}%`:""},children:re.map((te,ue)=>e.jsx(Sl,{fill:it[ue%it.length]},`cell-${ue}`))}),e.jsx(lr,{formatter:te=>ke(te)}),e.jsx(Ar,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Perodo Atual"}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(S1,{children:[e.jsx(On,{data:R,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:te=>{const ue=(te.valor_liquido/R.reduce((Oe,ce)=>Oe+ce.valor_liquido,0)*100).toFixed(1);return ue>5?`${ue}%`:""},children:R.map((te,ue)=>e.jsx(Sl,{fill:it[ue%it.length]},`cell-${ue}`))}),e.jsx(lr,{formatter:te=>ke(te)}),e.jsx(Ar,{verticalAlign:"bottom",height:36})]})})]})]})]}),w==="funcionarios"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Funcionrio"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Funcionrio"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Atual"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao"})]})}),e.jsx("tbody",{children:I.map((te,ue)=>{const Oe=ie.find(je=>je.funcionario===te.funcionario)||{quantidade:0,valor_liquido:0},ce=xe(te.valor_liquido,Oe.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:te.funcionario}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Oe.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:te.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:ke(Oe.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:ke(te.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${ce.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[ce.percentual>=0?e.jsx(Zo,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}),Math.abs(ce.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual - Valor Lquido"}),e.jsx(ua,{width:"100%",height:350,children:e.jsxs(zn,{data:I.map(te=>{var ue;return{nome:te.funcionario,Anterior:(((ue=ie.find(Oe=>Oe.funcionario===te.funcionario))==null?void 0:ue.valor_liquido)||0)/1e3,Atual:te.valor_liquido/1e3}}),children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(Rr,{tickFormatter:te=>`R$ ${te.toFixed(0)}k`}),e.jsx(lr,{formatter:te=>`R$ ${te.toFixed(1)}k`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#8B5CF6",name:"Perodo Atual"})]})})]})]})]}),a==="analise"&&e.jsxs("div",{className:"space-y-6",children:[t&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Anlise Inteligente de Produtos"})]}),e.jsx("p",{className:"text-blue-100",children:"Identifique os produtos mais lucrativos e oportunidades de melhoria no seu mix de produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Top Produtos por Lucro"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Marca"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Qtd"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Custo Unit."}),e.jsx("th",{className:"text-right py-2 px-2",children:"Preo Venda"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Margem %"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Lucro Total"})]})}),e.jsx("tbody",{children:_e.map((te,ue)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-bold ${ue===0?"bg-yellow-100 text-yellow-800":ue===1?"bg-gray-100 text-gray-800":ue===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:ue+1})}),e.jsx("td",{className:"py-3 px-2 font-medium",children:te.nome}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:te.marca||"-"}),e.jsx("td",{className:"py-3 px-2 text-right",children:Ie(te.quantidade)}),e.jsx("td",{className:"py-3 px-2 text-right text-red-600",children:ke(Ie(te.custo))}),e.jsx("td",{className:"py-3 px-2 text-right text-green-600",children:ke(Ie(te.preco))}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${Ie(te.margem)>=50?"bg-green-100 text-green-800":Ie(te.margem)>=30?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Ie(te.margem).toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 px-2 text-right font-bold text-green-600",children:ke(Ie(te.lucro_total))})]},ue))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Desempenho por Categoria"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(Se).map(([te,ue])=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-2",children:te}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vendas:"}),e.jsx("span",{className:"font-semibold",children:Ie(ue.quantidade)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Faturamento:"}),e.jsx("span",{className:"font-semibold text-green-600",children:ke(Ie(ue.total))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Margem Mdia:"}),e.jsxs("span",{className:`font-semibold ${Ie(ue.margem_media)>=40?"text-green-600":Ie(ue.margem_media)>=25?"text-yellow-600":"text-red-600"}`,children:[Ie(ue.margem_media).toFixed(1),"%"]})]})]})]},te))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Ateno: Margens Baixas"})]}),e.jsxs("div",{className:"space-y-2",children:[_e.filter(te=>Ie(te.margem)<25).slice(0,5).map((te,ue)=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border-l-4 border-red-500",children:[e.jsx("div",{className:"font-medium text-sm",children:te.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Margem: ",e.jsxs("span",{className:"font-semibold text-red-600",children:[Ie(te.margem).toFixed(1),"%"]})," - ","Revisar preo de custo ou venda"]})]},ue)),_e.filter(te=>Ie(te.margem)<25).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" Nenhum produto com margem crtica"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Oportunidades"})]}),e.jsxs("div",{className:"space-y-3",children:[_e.filter(te=>Ie(te.margem)>=40&&Ie(te.quantidade)<10).slice(0,3).map((te,ue)=>e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("div",{className:"font-medium text-sm",children:te.nome}),e.jsxs("div",{className:"text-xs text-blue-800 mt-1",children:[e.jsxs("strong",{children:["Alta margem (",Ie(te.margem).toFixed(1),"%)"]})," mas poucas vendas (",Ie(te.quantidade)," un.)",e.jsx("br",{})," Considere promover este produto"]})]},ue)),_e.filter(te=>Ie(te.margem)>=40).slice(0,2).map((te,ue)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[e.jsx("div",{className:"font-medium text-sm",children:te.nome}),e.jsxs("div",{className:"text-xs text-green-800 mt-1",children:[e.jsx("strong",{children:" Campeo de vendas"})," com excelente margem",e.jsx("br",{})," Mantenha em destaque"]})]},`camp-${ue}`))]})]})]}),N&&_e.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Margem vs Volume de Vendas"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(zn,{data:_e.slice(0,15).map(te=>({...te,margem:Ie(te.margem),quantidade:Ie(te.quantidade)})),children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-45,textAnchor:"end",height:120,interval:0,tick:{fontSize:11}}),e.jsx(Rr,{yAxisId:"left",orientation:"left",stroke:"#10B981",label:{value:"Margem %",angle:-90,position:"insideLeft"}}),e.jsx(Rr,{yAxisId:"right",orientation:"right",stroke:"#3B82F6",label:{value:"Quantidade",angle:90,position:"insideRight"}}),e.jsx(lr,{}),e.jsx(Ar,{}),e.jsx(Mr,{yAxisId:"left",dataKey:"margem",fill:"#10B981",name:"Margem %"}),e.jsx(Mr,{yAxisId:"right",dataKey:"quantidade",fill:"#3B82F6",name:"Qtd Vendida"})]})})]})]})]}),"    "]})}const S2e=()=>{const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState([]),[b,p]=j.useState({campo:null,direcao:"asc"}),[f,v]=j.useState({especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[],marca_ids:[],categoria_ids:[],margem_min:null,margem_max:null,data_inicio:null,data_fim:null}),[g,y]=j.useState({marcas:[],categorias:[],especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[]}),[N,_]=j.useState("porte"),[w,S]=j.useState(!0),[C,k]=j.useState("comparacao");j.useEffect(()=>{F()},[]);const F=async()=>{var Q,ne,re;try{r(!0);const ae=localStorage.getItem("access_token");console.log(" [DashboardAnaliseRacoes] Iniciando carregamento de dados",{hasToken:!!ae,tokenPreview:ae?`${ae.substring(0,20)}...`:"NO TOKEN"}),console.log(" [DashboardAnaliseRacoes] Chamando: /racoes/analises/opcoes-filtros");const ie=await V.get("/racoes/analises/opcoes-filtros");console.log(" [DashboardAnaliseRacoes] Opes carregadas:",ie.data),y(ie.data),await q(),r(!1)}catch(ae){console.error(" [DashboardAnaliseRacoes] Erro ao carregar dados:",{message:ae.message,status:(Q=ae.response)==null?void 0:Q.status,data:(ne=ae.response)==null?void 0:ne.data,config:ae.config}),((re=ae.response)==null?void 0:re.status)===403?be.error("Acesso negado. Verifique suas permisses ou faa login novamente."):be.error("Erro ao carregar dados do dashboard"),r(!1)}},q=async(Q=null,ne=null)=>{try{const re={};Q&&(re.data_inicio=Q),ne&&(re.data_fim=ne);const ae=await V.get("/racoes/analises/resumo",{params:re});o(ae.data)}catch(re){console.error("Erro ao carregar resumo:",re),be.error("Erro ao carregar resumo")}},A=async()=>{try{s(!0);const Q=await V.post(`/racoes/analises/margem-por-segmento?tipo_segmento=${N}`,f);l(Q.data),s(!1)}catch(Q){console.error("Erro ao carregar anlise:",Q),be.error("Erro ao carregar anlise de segmento"),s(!1)}},T=async()=>{try{s(!0);const Q=await V.post("/racoes/analises/comparacao-marcas",f);d(Q.data),s(!1)}catch(Q){console.error("Erro ao carregar comparao:",Q),be.error("Erro ao carregar comparao de marcas"),s(!1)}},U=async()=>{try{if(!f.data_inicio||!f.data_fim){be.error("Selecione um perodo para ver o ranking de vendas");return}s(!0);const Q=await V.get("/racoes/analises/ranking-vendas",{params:{data_inicio:f.data_inicio,data_fim:f.data_fim,limite:20}});m(Q.data),s(!1)}catch(Q){console.error("Erro ao carregar ranking:",Q),be.error("Erro ao carregar ranking de vendas"),s(!1)}},K=async()=>{try{s(!0);const Q=await V.post("/racoes/analises/produtos-comparacao",f);h(Q.data),p({campo:null,direcao:"asc"}),s(!1)}catch(Q){console.error("Erro ao carregar produtos para comparao:",Q),be.error("Erro ao carregar produtos"),s(!1)}},I=Q=>{const ne=b.campo===Q&&b.direcao==="asc"?"desc":"asc";p({campo:Q,direcao:ne});const re=[...x].sort((ae,ie)=>{let ve,_e;switch(Q){case"nome":ve=ae.nome,_e=ie.nome;break;case"custo":ve=ae.preco_custo||0,_e=ie.preco_custo||0;break;case"venda":ve=ae.preco_venda||0,_e=ie.preco_venda||0;break;case"lucro":ve=(ae.preco_venda||0)-(ae.preco_custo||0),_e=(ie.preco_venda||0)-(ie.preco_custo||0);break;case"margem":ve=calcularMargem(ae.preco_custo,ae.preco_venda),_e=calcularMargem(ie.preco_custo,ie.preco_venda);break;case"roi":ve=calcularROI(ae.preco_custo,ae.preco_venda),_e=calcularROI(ie.preco_custo,ie.preco_venda);break;case"custokg":ve=(ae.preco_custo||0)/(ae.peso_embalagem||1),_e=(ie.preco_custo||0)/(ie.peso_embalagem||1);break;case"vendakg":ve=(ae.preco_venda||0)/(ae.peso_embalagem||1),_e=(ie.preco_venda||0)/(ie.peso_embalagem||1);break;default:return 0}return typeof ve=="string"?ne==="asc"?ve.localeCompare(_e):_e.localeCompare(ve):ne==="asc"?ve-_e:_e-ve});h(re)},Y=(Q,ne)=>{v(re=>({...re,[Q]:ne}))},D=(Q,ne)=>{v(re=>{const ae=re[Q]||[],ie=ae.includes(ne);return{...re,[Q]:ie?ae.filter(ve=>ve!==ne):[...ae,ne]}})},W=()=>{C==="segmento"?A():C==="marcas"?T():C==="ranking"?U():C==="comparacao"&&K(),f.data_inicio&&f.data_fim&&q(f.data_inicio,f.data_fim)},R=()=>{v({especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[],marca_ids:[],categoria_ids:[],margem_min:null,margem_max:null,data_inicio:null,data_fim:null})},B=Q=>{k(Q),Q==="segmento"&&i.length===0?A():Q==="marcas"&&c.length===0?T():Q==="ranking"&&u.length===0?f.data_inicio&&f.data_fim&&U():Q==="comparacao"&&x.length===0&&K()},O=()=>n?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx($s,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Raes Cadastradas"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_racoes}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[n.total_classificadas," classificadas (",n.percentual_classificadas,"%)"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(sP,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Margem Mdia"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.margem_media_geral,"%"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["em ",n.total_racoes," produtos"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(fa,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Faturamento Perodo"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",n.faturamento_periodo.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[n.marcas_cadastradas," marcas ativas"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(B9,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Mais Vendido"})]}),n.produto_mais_vendido?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:n.produto_mais_vendido.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[n.produto_mais_vendido.quantidade," unidades"]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Sem dados de vendas"})]})]}):null,L=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qm,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Clique para selecionar/desmarcar"})]}),e.jsx("button",{onClick:()=>S(!w),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:w?"Ocultar ":"Mostrar "})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marcas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.marcas.map(Q=>e.jsx("button",{onClick:()=>D("marca_ids",Q.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.marca_ids.includes(Q.id)?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q.nome},Q.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Linha de Rao"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.linhas.map(Q=>e.jsx("button",{onClick:()=>D("linhas",Q.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.linhas.includes(Q.id)?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q.nome},Q.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Porte do Animal"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.portes.map(Q=>e.jsx("button",{onClick:()=>D("portes",Q.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.portes.includes(Q.id)?"bg-green-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q.nome},Q.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Fase/Pblico"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.fases.map(Q=>e.jsx("button",{onClick:()=>D("fases",Q.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.fases.includes(Q.id)?"bg-amber-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q.nome},Q.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sabor/Protena"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.sabores.map(Q=>e.jsx("button",{onClick:()=>D("sabores",Q),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.sabores.includes(Q)?"bg-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Peso da Embalagem"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.pesos.map(Q=>e.jsxs("button",{onClick:()=>D("pesos",Q),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${f.pesos.includes(Q)?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Q," kg"]},Q))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem Mnima (%)"}),e.jsx("input",{type:"number",step:"0.01",value:f.margem_min||"",onChange:Q=>Y("margem_min",parseFloat(Q.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Ex: 25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem Mxima (%)"}),e.jsx("input",{type:"number",step:"0.01",value:f.margem_max||"",onChange:Q=>Y("margem_max",parseFloat(Q.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Ex: 50"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:f.data_inicio||"",onChange:Q=>Y("data_inicio",Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:f.data_fim||"",onChange:Q=>Y("data_fim",Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs("button",{onClick:W,className:"px-6 py-2.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2 font-medium",children:[e.jsx(Qm,{className:"h-4 w-4"}),"Aplicar Filtros"]}),e.jsx("button",{onClick:R,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 font-medium",children:"Limpar Tudo"}),f.marca_ids.length+f.linhas.length+f.portes.length+f.fases.length+f.sabores.length+f.pesos.length>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:f.marca_ids.length+f.linhas.length+f.portes.length+f.fases.length+f.sabores.length+f.pesos.length}),"filtros ativos"]})]})]})]}),E=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando anlise..."}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Nenhum dado encontrado. Aplique filtros e clique em "Aplicar Filtros"']}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Analisar por:"}),e.jsxs("select",{value:N,onChange:Q=>{_(Q.target.value),setTimeout(()=>A(),0)},className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"porte",children:"Porte"}),e.jsx("option",{value:"fase",children:"Fase"}),e.jsx("option",{value:"sabor",children:"Sabor"}),e.jsx("option",{value:"linha",children:"Linha"}),e.jsx("option",{value:"especie",children:"Espcie"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Segmento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Produtos"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Min/Max"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo/Kg Mdio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Faturamento"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map((Q,ne)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:Q.segmento}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:Q.total_produtos}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${Q.margem_media>=30?"text-green-600":Q.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[Q.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:[Q.margem_minima,"% - ",Q.margem_maxima,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:["R$ ",Q.preco_medio_kg.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:["R$ ",Q.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},ne))})]})})]}),M=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando comparao..."}):c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Nenhum dado encontrado. Aplique filtros e clique em "Aplicar Filtros"']}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Marca"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Produtos"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo/Kg Mdio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Mais Barato"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Mais Caro"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(Q=>{var ne,re,ae,ie,ve,_e;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:Q.marca_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:Q.total_produtos}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:["R$ ",Q.preco_medio_kg.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${Q.margem_media>=30?"text-green-600":Q.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[Q.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-xs text-gray-700",children:[((re=(ne=Q.produto_mais_barato)==null?void 0:ne.nome)==null?void 0:re.substring(0,30))||"-",((ae=Q.produto_mais_barato)==null?void 0:ae.preco_kg)&&e.jsxs("div",{className:"text-green-600 font-semibold",children:["R$ ",Q.produto_mais_barato.preco_kg,"/kg"]})]}),e.jsxs("td",{className:"px-4 py-3 text-xs text-gray-700",children:[((ve=(ie=Q.produto_mais_caro)==null?void 0:ie.nome)==null?void 0:ve.substring(0,30))||"-",((_e=Q.produto_mais_caro)==null?void 0:_e.preco_kg)&&e.jsxs("div",{className:"text-red-600 font-semibold",children:["R$ ",Q.produto_mais_caro.preco_kg,"/kg"]})]})]},Q.marca_id)})})]})}),z=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando ranking..."}):u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Selecione um perodo nos filtros e clique em "Aplicar Filtros"']}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Marca"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Qtd Vendida"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Faturamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo Mdio"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((Q,ne)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${ne===0?"bg-yellow-100 text-yellow-700":ne===1?"bg-gray-200 text-gray-700":ne===2?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:ne+1})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Q.nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Q.marca}),e.jsx("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:Q.quantidade_vendida}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-green-600",children:["R$ ",Q.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${Q.margem_media>=30?"text-green-600":Q.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[Q.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-900",children:["R$ ",Q.preco_medio_venda.toFixed(2)]})]},Q.produto_id))})]})}),le=()=>{if(a)return e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Gr,{className:"h-8 w-8 animate-spin text-blue-500 mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Carregando produtos..."})]});if(x.length===0)return e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Bt,{className:"h-16 w-16 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-sm",children:'Selecione filtros acima e clique em "Aplicar Filtros"'})]});const Q=(Ae,it)=>!it||it===0?0:parseFloat(((it-Ae)/it*100).toFixed(2)),ne=(Ae,it)=>!Ae||Ae===0?0:parseFloat(((it-Ae)/Ae*100).toFixed(2)),re=(Ae,it)=>parseFloat((it-Ae).toFixed(2)),ae=(Ae,it)=>!Ae||Ae===0?0:parseFloat(((it-Ae)/Ae*100).toFixed(2)),ie=x.map(Ae=>Ae.preco_custo||0),ve=x.map(Ae=>Q(Ae.preco_custo,Ae.preco_venda)),_e=x.map(Ae=>re(Ae.preco_custo||0,Ae.preco_venda||0)),me=x.map(Ae=>ae(Ae.preco_custo,Ae.preco_venda)),Se=Math.min(...ie.filter(Ae=>Ae>0)),Ne=Math.max(...ve),ot=Math.max(..._e),Ke=Math.max(...me),lt=(Ae,it,gt,Dt=!1)=>{if(gt===it)return"bg-gray-50";const Ct=(Ae-it)/(gt-it)*100;return Dt?Ct<=20?"bg-green-50 text-green-800 font-semibold":Ct<=40?"bg-green-50 text-green-700":Ct<=60?"bg-yellow-50 text-yellow-700":Ct<=80?"bg-orange-50 text-orange-700":"bg-red-50 text-red-700":Ct>=80?"bg-green-50 text-green-800 font-semibold":Ct>=60?"bg-green-50 text-green-700":Ct>=40?"bg-yellow-50 text-yellow-700":Ct>=20?"bg-orange-50 text-orange-700":"bg-red-50 text-red-700"},ke=Ae=>Ae>=40?"text-green-700 bg-green-100 border-green-300":Ae>=30?"text-green-600 bg-green-50 border-green-200":Ae>=20?"text-yellow-600 bg-yellow-50 border-yellow-200":Ae>=10?"text-orange-600 bg-orange-50 border-orange-200":"text-red-600 bg-red-50 border-red-200",Ie=({campo:Ae,children:it,className:gt=""})=>e.jsx("th",{onClick:()=>I(Ae),className:`px-3 py-3 text-xs font-bold text-gray-700 uppercase cursor-pointer hover:bg-gray-200 transition-colors ${gt}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[it,b.campo===Ae&&e.jsx("span",{className:"text-blue-600",children:b.direcao==="asc"?"":""})]})});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase",children:"Menor Custo"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["R$ ",Se.toFixed(2)]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Melhor preo de compra"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase",children:"Melhor Margem"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[Ne.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Maior percentual de lucro"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-purple-700 uppercase",children:"Melhor ROI"})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[Ke.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Retorno sobre investimento"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border-2 border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-amber-700 uppercase",children:"Maior Lucro"})]}),e.jsxs("p",{className:"text-2xl font-bold text-amber-900",children:["R$ ",ot.toFixed(2)]}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Lucro absoluto por unidade"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total de Produtos Encontrados"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x.length})]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Margem Mdia"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(ve.reduce((Ae,it)=>Ae+it,0)/ve.length).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custo Mdio/kg"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",(x.reduce((Ae,it)=>Ae+(it.preco_custo||0)/(it.peso_embalagem||1),0)/x.length).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preo Venda Mdio/kg"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",(x.reduce((Ae,it)=>Ae+(it.preco_venda||0)/(it.peso_embalagem||1),0)/x.length).toFixed(2)]})]})]})]})}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:" Dica:"})," Clique nos cabealhos das colunas para ordenar. As cores indicam valores melhores (verde) e piores (vermelho). Produtos destacados com badges so os melhores em cada categoria."]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border-2 border-gray-300 shadow-lg",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase sticky left-0 bg-gray-100 border-r border-gray-300",children:"Produto / Marca"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase border-r border-gray-300",children:"Linha"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase border-r border-gray-300",children:"Peso"}),e.jsx(Ie,{campo:"custo",className:"border-r border-gray-300",children:" Custo"}),e.jsx(Ie,{campo:"venda",className:"border-r border-gray-300",children:" Venda"}),e.jsx(Ie,{campo:"lucro",className:"border-r border-gray-300",children:"Lucro R$"}),e.jsx(Ie,{campo:"margem",className:"border-r border-gray-300",children:" Margem %"}),e.jsx(Ie,{campo:"roi",className:"border-r border-gray-300",children:" ROI %"}),e.jsx(Ie,{campo:"custokg",className:"border-r border-gray-300",children:"Custo/kg"}),e.jsx(Ie,{campo:"vendakg",className:"border-r border-gray-300",children:"Venda/kg"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase",children:"Estoque"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(Ae=>{var tt;const it=Q(Ae.preco_custo,Ae.preco_venda);ne(Ae.preco_custo,Ae.preco_venda);const gt=re(Ae.preco_custo||0,Ae.preco_venda||0),Dt=ae(Ae.preco_custo,Ae.preco_venda),Ct=(Ae.preco_custo||0)/(Ae.peso_embalagem||1),Lt=(Ae.preco_venda||0)/(Ae.peso_embalagem||1),$t=(Ae.preco_custo||0)===Se&&Se>0,ge=it===Ne&&Ne>0,De=gt===ot&&ot>0,Le=Dt===Ke&&Ke>0,ct=$t||ge||De||Le;return e.jsxs("tr",{className:`hover:bg-blue-50 transition-colors ${ct?"bg-yellow-50 border-l-4 border-yellow-400":""}`,children:[e.jsx("td",{className:"px-4 py-3 sticky left-0 bg-white border-r border-gray-200",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Ae.nome}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[((tt=Ae.marca)==null?void 0:tt.nome)||"Sem marca","  Cd: ",Ae.codigo]}),e.jsxs("div",{className:"flex gap-1 mt-1.5 flex-wrap",children:[Ae.porte_animal&&Array.isArray(Ae.porte_animal)&&Ae.porte_animal.map(xe=>e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:xe},xe)),Ae.fase_publico&&Array.isArray(Ae.fase_publico)&&Ae.fase_publico.map(xe=>e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:xe},xe)),Ae.sabor_proteina&&e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-1.5 py-0.5 rounded",children:Ae.sabor_proteina})]}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[$t&&e.jsx("span",{className:"text-xs bg-green-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MENOR CUSTO"}),ge&&e.jsx("span",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MELHOR MARGEM"}),Le&&e.jsx("span",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MELHOR ROI"}),De&&e.jsx("span",{className:"text-xs bg-amber-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MAIOR LUCRO"})]})]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:Ae.classificacao_racao||"-"})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center font-medium text-gray-900 border-r border-gray-200",children:Ae.peso_embalagem?e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded font-bold",children:[Ae.peso_embalagem," kg"]}):"-"}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${lt(Ae.preco_custo||0,Se,Math.max(...ie),!0)}`,children:["R$ ",(Ae.preco_custo||0).toFixed(2)]}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${lt(Ae.preco_venda||0,Math.min(...x.map(xe=>xe.preco_venda||0)),Math.max(...x.map(xe=>xe.preco_venda||0)))}`,children:["R$ ",(Ae.preco_venda||0).toFixed(2)]}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${lt(gt,Math.min(..._e),Math.max(..._e))}`,children:["R$ ",gt.toFixed(2)]}),e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-lg font-bold text-sm border-2 ${ke(it)}`,children:[it.toFixed(2),"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${it>=40?"bg-green-500":it>=30?"bg-green-400":it>=20?"bg-yellow-400":it>=10?"bg-orange-400":"bg-red-400"}`,style:{width:`${Math.min(it,100)}%`}})})]})}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${lt(Dt,Math.min(...me),Math.max(...me))}`,children:[Dt.toFixed(2),"%"]}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsxs("span",{className:`px-2 py-1 rounded font-semibold ${lt(Ct,Math.min(...x.map(xe=>(xe.preco_custo||0)/(xe.peso_embalagem||1))),Math.max(...x.map(xe=>(xe.preco_custo||0)/(xe.peso_embalagem||1))),!0)}`,children:["R$ ",Ct.toFixed(2)]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsxs("span",{className:`px-2 py-1 rounded font-semibold ${lt(Lt,Math.min(...x.map(xe=>(xe.preco_venda||0)/(xe.peso_embalagem||1))),Math.max(...x.map(xe=>(xe.preco_venda||0)/(xe.peso_embalagem||1))))}`,children:["R$ ",Lt.toFixed(2)]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${(Ae.estoque_atual||0)>10?"bg-green-100 text-green-700 border border-green-300":(Ae.estoque_atual||0)>0?"bg-yellow-100 text-yellow-700 border border-yellow-300":"bg-red-100 text-red-700 border border-red-300"}`,children:Ae.estoque_atual||0})})]},Ae.id)})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""})," Legenda e Dicas de Interpretao:"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-green-700",children:" Verde:"}),e.jsx("span",{className:"text-gray-700",children:"Valores melhores (menor custo, maior margem/lucro)"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-red-700",children:" Vermelho:"}),e.jsx("span",{className:"text-gray-700",children:"Valores piores (maior custo, menor margem/lucro)"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-yellow-700",children:" Amarelo:"}),e.jsx("span",{className:"text-gray-700",children:"Destaque na linha = um dos melhores produtos"})]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Margem %:"})," (Venda - Custo) / Venda  100"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ROI %:"})," (Lucro / Custo)  100"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lucro R$:"})," Venda - Custo (valor absoluto)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Custo/Venda por kg:"})," Preo dividido pelo peso"]})]})]})]})]})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Gr,{className:"h-8 w-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Km,{className:"h-7 w-7 text-blue-600"}),"Anlise Inteligente de Raes"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Dashboard dinmico com anlises avanadas de margem e vendas"})]}),e.jsxs("button",{onClick:()=>F(),className:"px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Gr,{className:"h-4 w-4"}),"Atualizar"]})]}),O(),L(),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>B("comparacao"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="comparacao"?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(iP,{className:"h-4 w-4 inline mr-2"})," Comparao Detalhada"]}),e.jsxs("button",{onClick:()=>B("segmento"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="segmento"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(sa,{className:"h-4 w-4 inline mr-2"}),"Margem por Segmento"]}),e.jsxs("button",{onClick:()=>B("marcas"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="marcas"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx($s,{className:"h-4 w-4 inline mr-2"}),"Comparao de Marcas"]}),e.jsxs("button",{onClick:()=>B("ranking"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="ranking"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(vh,{className:"h-4 w-4 inline mr-2"}),"Ranking de Vendas"]})]})}),e.jsxs("div",{className:"p-4",children:[C==="comparacao"&&le(),C==="resumo"&&O(),C==="segmento"&&E(),C==="marcas"&&M(),C==="ranking"&&z()]})]})]})},C2e=()=>{var Y,D,W;const[t,r]=j.useState(!0),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState([]),[u,m]=j.useState("resumo"),[x,h]=j.useState(.8),[b,p]=j.useState("porte"),[f,v]=j.useState({}),[g,y]=j.useState({});j.useEffect(()=>{N()},[]);const N=async()=>{try{r(!0);const R=await V.get("/racoes/sugestoes/relatorio-completo");s(R.data),r(!1)}catch(R){console.error("Erro ao carregar relatrio:",R),be.error("Erro ao carregar relatrio de sugestes"),r(!1)}},_=async()=>{try{r(!0);const R=await V.get(`/racoes/sugestoes/duplicatas?threshold_similaridade=${x}`);o(R.data),r(!1)}catch(R){console.error("Erro ao carregar duplicatas:",R),be.error("Erro ao carregar duplicatas"),r(!1)}},w=async()=>{try{r(!0);const R=await V.get("/racoes/sugestoes/padronizar-nomes?limite=50");l(R.data),r(!1)}catch(R){console.error("Erro ao carregar padronizaes:",R),be.error("Erro ao carregar sugestes de padronizao"),r(!1)}},S=async()=>{try{r(!0);const R=await V.get(`/racoes/sugestoes/gaps-estoque?tipo_segmento=${b}`);d(R.data),r(!1)}catch(R){console.error("Erro ao carregar gaps:",R),be.error("Erro ao carregar gaps de estoque"),r(!1)}},C=R=>{m(R),R==="duplicatas"&&n.length===0?_():R==="padronizacao"&&i.length===0?w():R==="gaps"&&c.length===0&&S()},k=async R=>{try{const B=g[R.produto_id],O=(B==null?void 0:B.nome)||R.nome_sugerido;await V.patch(`/produtos/${R.produto_id}`,{nome:O}),be.success("Nome atualizado com sucesso!"),l(L=>L.filter(E=>E.produto_id!==R.produto_id)),y(L=>{const E={...L};return delete E[R.produto_id],E}),N()}catch(B){console.error("Erro ao aplicar padronizao:",B),be.error("Erro ao atualizar nome do produto")}},F=async R=>{try{await V.post("/racoes/sugestoes/duplicatas/ignorar",null,{params:{produto_id_1:R.produto_1.id,produto_id_2:R.produto_2.id}}),be.success("Duplicata ignorada com sucesso!"),o(B=>B.filter(O=>!(O.produto_1.id===R.produto_1.id&&O.produto_2.id===R.produto_2.id))),N()}catch(B){console.error("Erro ao ignorar duplicata:",B),be.error("Erro ao ignorar duplicata")}},q=(R,B)=>{v(O=>({...O,[R]:B}))},A=async(R,B)=>{const O=f[B];if(!O){be.error("Selecione qual produto deseja manter antes de confirmar");return}const L=O==="produto_1"?R.produto_1.id:R.produto_2.id,E=O==="produto_1"?R.produto_2.id:R.produto_1.id;O==="produto_1"?R.produto_1.nome:R.produto_2.nome,O==="produto_1"?R.produto_2.nome:R.produto_1.nome;try{const M=await V.post("/racoes/sugestoes/duplicatas/mesclar",null,{params:{produto_id_manter:L,produto_id_remover:E,transferir_estoque:!0}});be.success(M.data.mensagem),o(z=>z.filter(le=>!(le.produto_1.id===R.produto_1.id&&le.produto_2.id===R.produto_2.id))),v(z=>{const le={...z};return delete le[B],le}),N()}catch(M){console.error("Erro ao mesclar produtos:",M),be.error("Erro ao mesclar produtos")}},T=()=>{if(!a)return null;const{score_saude:R,classificacao:B,cor:O,resumo:L,recomendacoes:E}=a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Score de Sade do Cadastro"}),e.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-700",children:e.jsx(Gr,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center border-8 ${O==="green"?"border-green-500":O==="blue"?"border-blue-500":O==="yellow"?"border-yellow-500":"border-red-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:R}),e.jsx("div",{className:"text-xs text-gray-600",children:"pontos"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-white font-semibold mb-3 ${O==="green"?"bg-green-500":O==="blue"?"bg-blue-500":O==="yellow"?"bg-yellow-500":"bg-red-500"}`,children:B}),e.jsxs("p",{className:"text-gray-700 mb-4",children:[R>=90&&"Parabns! Seu cadastro de raes est excelente.",R>=70&&R<90&&"Seu cadastro est em bom estado, mas h algumas melhorias possveis.",R>=50&&R<70&&"Ateno! Existem vrios pontos de melhoria no cadastro.",R<50&&"CRTICO!  necessrio realizar melhorias urgentes no cadastro."]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(z0,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:L.duplicatas_detectadas})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Duplicatas Detectadas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Op,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:L.nomes_padronizar})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Nomes para Padronizar"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(E4,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:L.gaps_criticos})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gaps de Estoque Crticos"})]})]}),E&&E.filter(Boolean).length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Recomendaes Prioritrias"]}),e.jsx("ul",{className:"space-y-2",children:E.filter(Boolean).map((M,z)=>e.jsxs("li",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),M]},z))})]})]})},U=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Nenhuma duplicata detectada!"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Seu cadastro est livre de produtos duplicados"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"Threshold de Similaridade:"}),e.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:x,onChange:R=>h(parseFloat(R.target.value)),className:"w-32"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[(x*100).toFixed(0),"%"]})]}),e.jsxs("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(wl,{className:"h-4 w-4"}),"Buscar Duplicatas"]})]}),n.map((R,B)=>e.jsxs("div",{className:"bg-white border-2 border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z0,{className:"h-5 w-5 text-orange-500"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Similaridade: ",(R.score_similaridade*100).toFixed(0),"%"]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${R.score_similaridade>=.9?"bg-red-100 text-red-700":R.score_similaridade>=.8?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:R.sugestao_acao})]}),e.jsxs("div",{className:"mb-3 text-sm text-gray-700 bg-blue-50 p-2 rounded",children:[" ",e.jsx("strong",{children:"Clique no produto que deseja MANTER"})," (o outro ser inativado e ter o estoque transferido)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{onClick:()=>q(B,"produto_1"),className:`rounded p-3 cursor-pointer transition-all border-2 ${f[B]==="produto_1"?"bg-green-50 border-green-500 shadow-lg":f[B]==="produto_2"?"bg-red-50 border-red-300 opacity-60":"bg-gray-50 border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Produto 1 (ID: ",R.produto_1.id,")"]}),f[B]==="produto_1"&&e.jsx(Xt,{className:"h-5 w-5 text-green-600"})]}),e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:R.produto_1.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Marca: ",R.produto_1.marca]}),e.jsxs("div",{children:["Preo: R$ ",R.produto_1.preco.toFixed(2)]}),e.jsxs("div",{children:["Estoque: ",R.produto_1.estoque]})]}),f[B]==="produto_1"&&e.jsx("div",{className:"mt-2 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded",children:" ESTE PRODUTO SER MANTIDO"}),f[B]==="produto_2"&&e.jsx("div",{className:"mt-2 text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:" Este produto ser inativado"})]}),e.jsxs("div",{onClick:()=>q(B,"produto_2"),className:`rounded p-3 cursor-pointer transition-all border-2 ${f[B]==="produto_2"?"bg-green-50 border-green-500 shadow-lg":f[B]==="produto_1"?"bg-red-50 border-red-300 opacity-60":"bg-gray-50 border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Produto 2 (ID: ",R.produto_2.id,")"]}),f[B]==="produto_2"&&e.jsx(Xt,{className:"h-5 w-5 text-green-600"})]}),e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:R.produto_2.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Marca: ",R.produto_2.marca]}),e.jsxs("div",{children:["Preo: R$ ",R.produto_2.preco.toFixed(2)]}),e.jsxs("div",{children:["Estoque: ",R.produto_2.estoque]})]}),f[B]==="produto_2"&&e.jsx("div",{className:"mt-2 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded",children:" ESTE PRODUTO SER MANTIDO"}),f[B]==="produto_1"&&e.jsx("div",{className:"mt-2 text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:" Este produto ser inativado"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:R.razoes.map((O,L)=>e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:O},L))}),e.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>F(R),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 flex items-center gap-2 text-sm",children:[e.jsx(Qn,{className:"h-4 w-4"}),"Ignorar (No  Duplicata)"]}),f[B]?e.jsxs("button",{onClick:()=>A(R,B),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2 text-sm font-semibold shadow-md",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Confirmar Mesclagem"]}):e.jsxs("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 rounded-md flex items-center gap-2 text-sm cursor-not-allowed",children:[e.jsx(z0,{className:"h-4 w-4"}),"Selecione um Produto"]})]})]},B))]}),K=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Todos os nomes esto padronizados!"})]}):e.jsx("div",{className:"space-y-3",children:i.map((R,B)=>{var O,L,E,M,z;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["ID: ",R.produto_id]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Nome Atual:"}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 p-2 rounded",children:R.nome_atual})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-green-700 mb-1",children:"Nome Sugerido:"}),(O=g[R.produto_id])!=null&&O.editando?e.jsx("input",{type:"text",value:((L=g[R.produto_id])==null?void 0:L.nome)||R.nome_sugerido,onChange:le=>y(Q=>({...Q,[R.produto_id]:{editando:!0,nome:le.target.value}})),className:"w-full text-sm text-green-900 bg-green-50 p-2 rounded font-medium border-2 border-blue-400 focus:outline-none focus:border-blue-600",autoFocus:!0}):e.jsx("div",{className:"text-sm text-green-900 bg-green-50 p-2 rounded font-medium",children:((E=g[R.produto_id])==null?void 0:E.nome)||R.nome_sugerido})]})]}),e.jsx("div",{className:"ml-4 flex items-center gap-2",children:e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[(R.confianca*100).toFixed(0),"% confiana"]})})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-3",children:[e.jsx("strong",{children:"Razo:"})," ",R.razao]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>k(R),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm flex items-center gap-1",children:[e.jsx(Xt,{className:"h-4 w-4"}),"Aplicar ",(M=g[R.produto_id])!=null&&M.nome?"Edio":"Sugesto"]}),(z=g[R.produto_id])!=null&&z.editando?e.jsxs("button",{onClick:()=>y(le=>{const Q={...le};return delete Q[R.produto_id],Q}),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm flex items-center gap-1",children:[e.jsx(Qn,{className:"h-4 w-4"}),"Cancelar Edio"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>y(le=>{var Q;return{...le,[R.produto_id]:{editando:!0,nome:((Q=g[R.produto_id])==null?void 0:Q.nome)||R.nome_sugerido}}}),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center gap-1",children:[e.jsx(Op,{className:"h-4 w-4"}),"Editar"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm flex items-center gap-1",children:[e.jsx(Qn,{className:"h-4 w-4"}),"Ignorar"]})]})]})]},B)})}),I=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Nenhum gap crtico de estoque!"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"Analisar por:"}),e.jsxs("select",{value:b,onChange:R=>p(R.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"porte",children:"Porte"}),e.jsx("option",{value:"fase",children:"Fase"}),e.jsx("option",{value:"sabor",children:"Sabor"}),e.jsx("option",{value:"linha",children:"Linha"}),e.jsx("option",{value:"especie",children:"Espcie"})]})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(wl,{className:"h-4 w-4"}),"Analisar"]})]}),c.map((R,B)=>e.jsxs("div",{className:`rounded-lg p-4 border-2 ${R.importancia==="Alta"?"bg-red-50 border-red-300":R.importancia==="Mdia"?"bg-yellow-50 border-yellow-300":"bg-gray-50 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ca,{className:`h-5 w-5 ${R.importancia==="Alta"?"text-red-600":R.importancia==="Mdia"?"text-yellow-600":"text-gray-600"}`}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:R.segmento_valor})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[R.produtos_sem_estoque," de ",R.total_produtos," produtos sem estoque (",R.percentual_sem_estoque,"%)"]})]}),e.jsx("span",{className:`px-3 py-1 rounded text-xs font-semibold ${R.importancia==="Alta"?"bg-red-600 text-white":R.importancia==="Mdia"?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:R.importancia})]}),e.jsx("div",{className:"bg-white bg-opacity-50 rounded p-3 mb-3",children:e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Faturamento Histrico (90 dias):"})," R$ ",R.faturamento_historico.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsxs("div",{className:`text-sm font-medium ${R.importancia==="Alta"?"text-red-800":R.importancia==="Mdia"?"text-yellow-800":"text-gray-800"}`,children:[" ",R.sugestao]})]},B))]});return t&&u==="resumo"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Gr,{className:"h-8 w-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Bt,{className:"h-7 w-7 text-blue-600"}),"Sugestes Inteligentes"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Otimize seu cadastro de raes com sugestes automticas"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2",children:[e.jsxs("button",{onClick:()=>C("resumo"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="resumo"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Xt,{className:"h-4 w-4 inline mr-2"}),"Resumo Geral"]}),e.jsxs("button",{onClick:()=>C("duplicatas"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="duplicatas"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(z0,{className:"h-4 w-4 inline mr-2"}),"Duplicatas",((Y=a==null?void 0:a.resumo)==null?void 0:Y.duplicatas_detectadas)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full",children:a.resumo.duplicatas_detectadas})]}),e.jsxs("button",{onClick:()=>C("padronizacao"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="padronizacao"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Op,{className:"h-4 w-4 inline mr-2"}),"Padronizao",((D=a==null?void 0:a.resumo)==null?void 0:D.nomes_padronizar)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:a.resumo.nomes_padronizar})]}),e.jsxs("button",{onClick:()=>C("gaps"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="gaps"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(E4,{className:"h-4 w-4 inline mr-2"}),"Gaps de Estoque",((W=a==null?void 0:a.resumo)==null?void 0:W.gaps_criticos)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:a.resumo.gaps_criticos})]})]})}),e.jsxs("div",{className:"p-4",children:[u==="resumo"&&T(),u==="duplicatas"&&U(),u==="padronizacao"&&K(),u==="gaps"&&I()]})]})]})};function k2e(){const t=Kt(),[r,a]=j.useState("dashboard"),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState(new Set),[d,u]=j.useState({total:0,limite:50,offset:0}),[m,x]=j.useState(""),h=[{value:"",label:"Todas as espcies"},{value:"dog",label:"Ces"},{value:"cat",label:"Gatos"},{value:"bird",label:"Pssaros"},{value:"rodent",label:"Roedores"},{value:"fish",label:"Peixes"}];j.useEffect(()=>{b()},[]),j.useEffect(()=>{r==="alertas"&&p()},[m,r]);const b=async()=>{try{const N=await V.get("/produtos/racao/alertas",{params:{limite:1,offset:0}});u(_=>({..._,total:N.data.total}))}catch(N){console.error("Erro ao carregar contagem de alertas:",N)}},p=async()=>{var N,_,w,S;i(!0);try{const C=localStorage.getItem("access_token");console.log(" [AlertasRacao] Iniciando carregamento de alertas",{hasToken:!!C,tokenPreview:C?`${C.substring(0,20)}...`:"NO TOKEN",especieFiltro:m});const k={limite:50,offset:0};m&&(k.especie=m),console.log(" [AlertasRacao] Chamando: /produtos/racao/alertas",k);const F=await V.get("/produtos/racao/alertas",{params:k});console.log(" [AlertasRacao] Alertas carregados:",{total:F.data.total,items:(N=F.data.items)==null?void 0:N.length}),n(F.data.items||[]),u({total:F.data.total,limite:F.data.limite,offset:F.data.offset})}catch(C){console.error(" [AlertasRacao] Erro ao carregar alertas:",{message:C.message,status:(_=C.response)==null?void 0:_.status,data:(w=C.response)==null?void 0:w.data,config:C.config}),((S=C.response)==null?void 0:S.status)===403?ze.error("Acesso negado. Verifique suas permisses ou faa login novamente."):ze.error("Erro ao carregar alertas de raes")}finally{i(!1)}},f=async N=>{c(_=>new Set(_).add(N));try{const _=await V.post(`/produtos/${N}/classificar-ia`,null,{params:{forcar:!0}});ze.success(`${_.data.campos_atualizados.length} campos classificados! Score: ${_.data.confianca.score}%`,{duration:4e3}),n(w=>w.filter(S=>S.id!==N)),u(w=>({...w,total:w.total-1}))}catch(_){console.error("Erro ao classificar produto:",_),ze.error("Erro ao classificar produto")}finally{c(_=>{const w=new Set(_);return w.delete(N),w})}},v=async()=>{i(!0);try{const N=await V.post("/produtos/classificar-lote",null,{params:{apenas_sem_classificacao:!0}});ze.success(`${N.data.sucessos} produtos classificados com sucesso!`,{duration:5e3}),N.data.erros>0&&ze.error(`${N.data.erros} produtos com erro na classificao`),await p()}catch(N){console.error("Erro ao classificar lote:",N),ze.error("Erro ao classificar produtos em lote")}finally{i(!1)}},g=N=>N>=75?{cor:"text-yellow-600 bg-yellow-50",texto:"Quase completo"}:N>=50?{cor:"text-orange-600 bg-orange-50",texto:"Incompleto"}:{cor:"text-red-600 bg-red-50",texto:"Muito incompleto"},y=N=>({porte_animal:"Porte",fase_publico:"Fase",sabor_proteina:"Sabor/Protena",peso_embalagem:"Peso"})[N]||N;return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ta,{className:"w-8 h-8 text-amber-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Sistema Inteligente de Raes"})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>a("dashboard"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="dashboard"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Km,{className:"w-4 h-4"}),"Dashboard de Anlise"]})}),e.jsx("button",{onClick:()=>a("alertas"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="alertas"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"w-4 h-4"}),"Alertas de Classificao",d.total>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:d.total})]})}),e.jsx("button",{onClick:()=>a("sugestoes"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="sugestoes"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rP,{className:"w-4 h-4"}),"Sugestes Inteligentes"]})})]})]}),r==="dashboard"&&e.jsx(S2e,{}),r==="sugestoes"&&e.jsx(C2e,{}),r==="alertas"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600",children:"Produtos classificados como rao mas sem informaes completas"}),e.jsxs("button",{onClick:v,disabled:o||s.length===0,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:[e.jsx(Gr,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Classificar Todos"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por:"}),e.jsx("select",{value:m,onChange:N=>x(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))}),m&&e.jsx("button",{onClick:()=>x(""),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Limpar filtro"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Alertas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:d.total})]}),e.jsx(ta,{className:"w-10 h-10 text-red-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-amber-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nesta Pgina"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.length})]}),e.jsx(M9,{className:"w-10 h-10 text-amber-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completude Mdia"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[s.length>0?Math.round(s.reduce((N,_)=>N+_.completude,0)/s.length):0,"%"]})]}),e.jsx(Xt,{className:"w-10 h-10 text-green-500 opacity-20"})]})})]}),o&&s.length===0&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Gr,{className:"w-8 h-8 animate-spin text-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando alertas..."})]}),!o&&s.length===0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx(Xt,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Nenhum alerta encontrado!"}),e.jsx("p",{className:"text-green-700",children:"Todas as raes cadastradas possuem informaes completas."})]}),s.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria / Marca"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campos Faltantes"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completude"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(N=>{var S;const _=g(N.completude),w=l.has(N.id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 font-mono",children:N.codigo}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("p",{className:"font-medium",children:N.nome}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[N.classificacao_racao&&e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:N.classificacao_racao}),N.especies_indicadas&&e.jsx("span",{className:"text-xs text-white bg-indigo-600 px-2 py-1 rounded",children:((S=h.find(C=>C.value===N.especies_indicadas))==null?void 0:S.label)||N.especies_indicadas})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700",children:N.categoria||"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:N.marca||"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:N.campos_faltantes.map(C=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:[e.jsx(Qn,{className:"w-3 h-3"}),y(C)]},C))})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_.cor}`,children:[N.completude,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>f(N.id),disabled:w||!N.auto_classificar_ativo,className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Gr,{className:"w-4 h-4 animate-spin"}),"Classificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gr,{className:"w-4 h-4"}),"Classificar IA"]})}),e.jsxs("button",{onClick:()=>t(`/produtos/${N.id}/editar?aba=7`),className:"inline-flex items-center gap-2 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition",title:"Editar produto manualmente",children:[e.jsx(Op,{className:"w-4 h-4"}),"Editar"]})]}),!N.auto_classificar_ativo&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-class. desativada"})]})]},N.id)})})]})})})]})]})}function E2e(){const[t,r]=j.useState("linhas"),[a,s]=j.useState({}),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState({nome:"",descricao:"",ordem:0,ativo:!0}),[u,m]=j.useState({peso_kg:0,descricao:"",ordem:0,ativo:!0}),x=[{id:"linhas",nome:"Linhas de Rao",endpoint:"/opcoes-racao/linhas",icon:""},{id:"portes",nome:"Portes",endpoint:"/opcoes-racao/portes",icon:""},{id:"fases",nome:"Fases/Pblico",endpoint:"/opcoes-racao/fases",icon:""},{id:"tratamentos",nome:"Tratamentos",endpoint:"/opcoes-racao/tratamentos",icon:""},{id:"sabores",nome:"Sabores/Protenas",endpoint:"/opcoes-racao/sabores",icon:""},{id:"apresentacoes",nome:"Apresentaes (Peso)",endpoint:"/opcoes-racao/apresentacoes",icon:""}],h=x.find(N=>N.id===t);j.useEffect(()=>{b()},[t]);const b=async()=>{o(!0);try{const N=await V.get(h.endpoint,{params:{apenas_ativos:!1}});s(_=>({..._,[t]:N.data}))}catch(N){console.error("Erro ao carregar dados:",N),ze.error(`Erro ao carregar ${h.nome.toLowerCase()}`)}finally{o(!1)}},p=()=>{d({nome:"",descricao:"",ordem:0,ativo:!0}),m({peso_kg:0,descricao:"",ordem:0,ativo:!0}),l(null)},f=N=>{l(N.id),t==="apresentacoes"?m({peso_kg:N.peso_kg,descricao:N.descricao||"",ordem:N.ordem||0,ativo:N.ativo}):d({nome:N.nome,descricao:N.descricao||"",ordem:N.ordem||0,ativo:N.ativo})},v=async()=>{var N,_;try{const w=t==="apresentacoes"?u:c;i?(await V.put(`${h.endpoint}/${i}`,w),ze.success("Atualizado com sucesso!")):(await V.post(h.endpoint,w),ze.success("Criado com sucesso!")),p(),b()}catch(w){console.error("Erro ao salvar:",w),ze.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao salvar")}},g=async N=>{if(confirm("Tem certeza que deseja inativar este item?"))try{await V.delete(`${h.endpoint}/${N}`),ze.success("Inativado com sucesso!"),b()}catch(_){console.error("Erro ao deletar:",_),ze.error("Erro ao inativar")}},y=a[t]||[];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(bh,{className:"w-8 h-8 text-indigo-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Opes de Classificao de Raes"})]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie os valores disponveis para classificao de produtos de rao"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex overflow-x-auto",children:x.map(N=>e.jsxs("button",{onClick:()=>{r(N.id),p()},className:`
                  flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap
                  ${t===N.id?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx("span",{className:"text-xl",children:N.icon}),N.nome]},N.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:i?"Editar":"Adicionar Novo"}),t==="apresentacoes"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg) *"}),e.jsx("input",{type:"number",step:"0.001",value:u.peso_kg,onChange:N=>m({...u,peso_kg:parseFloat(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("input",{type:"text",value:u.descricao,onChange:N=>m({...u,descricao:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:u.ordem,onChange:N=>m({...u,ordem:parseInt(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo-peso",checked:u.ativo,onChange:N=>m({...u,ativo:N.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo-peso",className:"text-sm text-gray-700",children:"Ativo"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:c.nome,onChange:N=>d({...c,nome:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Ex: ${t==="linhas"?"Premium":t==="portes"?"Pequeno":"Filhote"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:c.descricao,onChange:N=>d({...c,descricao:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"2",placeholder:"Descrio opcional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:c.ordem,onChange:N=>d({...c,ordem:parseInt(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:c.ativo,onChange:N=>d({...c,ativo:N.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[e.jsx(Jm,{className:"w-4 h-4"}),i?"Atualizar":"Adicionar"]}),i&&e.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:e.jsx(Vt,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:[h.nome," Cadastrados (",y.length,")"]}),n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(wn,{className:"w-16 h-16 mx-auto"})}),e.jsx("p",{className:"text-gray-600",children:"Nenhum item cadastrado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Use o formulrio ao lado para adicionar"})]}):e.jsx("div",{className:"space-y-2",children:y.map(N=>e.jsxs("div",{className:`
                        flex items-center justify-between p-4 border rounded-lg transition
                        ${i===N.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}
                        ${!N.ativo&&"opacity-50"}
                      `,children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:h.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t==="apresentacoes"?`${N.peso_kg}kg${N.descricao?` - ${N.descricao}`:""}`:N.nome}),N.descricao&&t!=="apresentacoes"&&e.jsx("p",{className:"text-sm text-gray-500",children:N.descricao})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["Ordem: ",N.ordem]}),!N.ativo&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Inativo"}),e.jsx("button",{onClick:()=>f(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Editar",children:e.jsx(B2,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Inativar",children:e.jsx($o,{className:"w-4 h-4"})})]})]},N.id))})]})})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ad,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Dica"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Os valores cadastrados aqui sero usados no cadastro de produtos e na classificao automtica por IA. Mantenha ativos apenas os valores que voc utiliza no seu negcio."})]})]})})]})}const A2e=()=>{const[t,r]=j.useState(null),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState(!1),[u,m]=j.useState([]),[x,h]=j.useState(null),[b,p]=j.useState("upload"),f=S=>{var k;const C=(k=S.target.files)==null?void 0:k[0];C&&r(C)},v=async()=>{var C,k;if(!t){alert("Selecione um arquivo primeiro");return}const S=new FormData;S.append("arquivo",t),s(!0);try{const F=await V.post("/ia/extrato/upload",S,{headers:{"Content-Type":"multipart/form-data"}});o(F.data),alert(`Upload concludo! ${F.data.categorias_aplicadas} categorias aplicadas automaticamente.`)}catch(F){console.error("Erro no upload:",F);const q=((k=(C=F.response)==null?void 0:C.data)==null?void 0:k.detail)||F.message;alert("Erro ao processar arquivo: "+q)}finally{s(!1)}},g=async()=>{d(!0);try{const S=await V.get("/ia/extrato/pendentes");l(S.data)}catch(S){console.error("Erro ao carregar pendentes:",S),alert("Erro ao carregar lanamentos pendentes")}finally{d(!1)}},y=async S=>{try{await V.post("/ia/extrato/validar",{lancamento_id:S,aprovado:!0}),alert("Lanamento aprovado!"),g()}catch(C){console.error("Erro ao aprovar:",C),alert("Erro ao aprovar lanamento")}},N=async(S,C)=>{try{await V.post("/ia/extrato/validar",{lancamento_id:S,aprovado:!1,categoria_correta_id:C}),alert("Lanamento corrigido e padro aprendido!"),g()}catch(k){console.error("Erro ao corrigir:",k),alert("Erro ao corrigir lanamento")}},_=async()=>{try{const S=await V.get("/ia/extrato/padroes");m(S.data)}catch(S){console.error("Erro ao carregar padres:",S),alert("Erro ao carregar padres aprendidos")}},w=async()=>{try{const S=await V.get("/ia/extrato/estatisticas");h(S.data)}catch(S){console.error("Erro ao carregar estatsticas:",S),alert("Erro ao carregar estatsticas")}};return pe.useEffect(()=>{b==="validacao"?g():b==="padroes"?_():b==="estatisticas"&&w()},[b]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>p("upload"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${b==="upload"?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(yh,{size:18}),"Upload de Extrato"]}),e.jsxs("button",{onClick:()=>p("validacao"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${b==="validacao"?"bg-orange-100 text-orange-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Bt,{size:18}),"Validao (",i.length,")"]}),e.jsxs("button",{onClick:()=>p("padroes"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${b==="padroes"?"bg-blue-100 text-blue-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Gm,{size:18}),"Padres IA"]}),e.jsxs("button",{onClick:()=>p("estatisticas"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${b==="estatisticas"?"bg-purple-100 text-purple-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(sa,{size:18}),"Estatsticas"]})]})}),b==="upload"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(yh,{className:"text-green-600"}),"Upload de Extrato Bancrio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(bs,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("p",{className:"mb-2 text-gray-600",children:"Arraste um arquivo ou clique para selecionar"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:" Formatos: Excel (.xlsx, .xls), CSV (.csv), PDF (.pdf), OFX (.ofx)"}),e.jsx("input",{type:"file",onChange:f,accept:".xlsx,.xls,.csv,.pdf,.ofx",className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:"Selecionar Arquivo"}),t&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-green-700 font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-green-600",children:[(t.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{onClick:v,disabled:!t||a,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:a?"Processando...":"Processar Extrato"}),n&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:" Resultado do Processamento"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[" Total de lanamentos: ",e.jsx("span",{className:"font-bold",children:n.total_lancamentos})]}),e.jsxs("p",{children:[" Categorizados automaticamente: ",e.jsx("span",{className:"font-bold text-green-700",children:n.categorias_aplicadas})]}),e.jsxs("p",{children:[" Pendentes de validao: ",e.jsx("span",{className:"font-bold text-orange-700",children:n.pendentes_validacao})]})]})]})]})]}),b==="validacao"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Bt,{className:"text-orange-600"}),"Lanamentos Pendentes de Validao (",i.length,")"]}),c?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando..."}):i.length===0?e.jsxs("div",{className:"text-center text-gray-600 py-8",children:[e.jsx(Xt,{className:"mx-auto mb-2 text-green-500",size:48}),e.jsx("p",{children:"Nenhum lanamento pendente! "})]}):e.jsx("div",{className:"space-y-3",children:i.map(S=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:S.descricao}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Data: ",new Date(S.data).toLocaleDateString("pt-BR")," | Valor: R$ ",Math.abs(S.valor).toFixed(2)]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Sugesto IA: ",S.categoria_sugerida]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Confiana: ",(S.confianca*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>y(S.id),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",title:"Aprovar categoria sugerida",children:e.jsx(Xt,{size:16})}),e.jsx("button",{onClick:()=>{const C=prompt("Digite a categoria correta:");C&&N(S.id,C)},className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm",title:"Corrigir categoria",children:e.jsx(Qn,{size:16})})]})]})},S.id))})]}),b==="padroes"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Gm,{className:"text-blue-600"}),"Padres Aprendidos pela IA"]}),u.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Nenhum padro aprendido ainda"}):e.jsx("div",{className:"space-y-3",children:u.map((S,C)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["Padro: ",S.descricao_padrao]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Categoria: ",S.categoria]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:[" ",S.vezes_usado," vezes usado"]}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Confiana: ",(S.confianca*100).toFixed(0),"%"]})]})]})})},C))})]}),b==="estatisticas"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(sa,{className:"text-purple-600"}),"Estatsticas do Sistema IA"]}),x?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Padres"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:x.total_padroes})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taxa de Acerto"}),e.jsxs("p",{className:"text-3xl font-bold text-green-900 mt-1",children:[(x.taxa_acerto*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Confiana Mdia"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:[(x.confianca_media*100).toFixed(0),"%"]})]})]}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando estatsticas..."})]})})]})},P2e=({dados:t,periodo:r})=>{const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null),[c,d]=j.useState(null);j.useEffect(()=>{t&&(m(),u())},[t,r]);const u=async()=>{try{const v=await V.get("/ia/dre/indices-mercado",{params:{setor:"pet_shop"}});d(v.data)}catch(v){console.error("Erro ao carregar ndices:",v)}},m=async()=>{o(!0);try{await new Promise(g=>setTimeout(g,1e3));const v=b(t);if(s(v),r.mes>1){const g=await x(r);g&&l(h(t,g))}}catch(v){console.error("Erro ao carregar anlise:",v)}finally{o(!1)}},x=async v=>{try{const g=v.mes===1?12:v.mes-1,y=v.mes===1?v.ano-1:v.ano;return(await V.get("/financeiro/dre",{params:{ano:y,mes:g}})).data}catch{return null}},h=(v,g)=>{const y=(N,_)=>!_||_===0?null:(N-_)/Math.abs(_)*100;return{receita:{atual:v.receita_bruta||0,anterior:g.receita_bruta||0,variacao:y(v.receita_bruta,g.receita_bruta)},lucro:{atual:v.lucro_liquido||0,anterior:g.lucro_liquido||0,variacao:y(v.lucro_liquido,g.lucro_liquido)},despesas:{atual:v.total_despesas||0,anterior:g.total_despesas||0,variacao:y(v.total_despesas,g.total_despesas)},margem:{atual:v.margem_liquida||0,anterior:g.margem_liquida||0,variacao:y(v.margem_liquida,g.margem_liquida)}}},b=v=>{const g=[],y=[],N=[],_=v.margem_liquida||0;_<5?(N.push({tipo:"critico",titulo:"Margem lquida crtica",descricao:`Margem de apenas ${_.toFixed(1)}%. Ideal: acima de 10%`,icon:ta}),y.push({prioridade:"alta",titulo:"Urgente: Revisar estrutura de custos",descricao:"Margem muito baixa. Considere: aumentar preos, reduzir custos fixos, ou renegociar com fornecedores."})):_<10?g.push({tipo:"atencao",titulo:"Margem lquida abaixo do ideal",descricao:`${_.toFixed(1)}% - H espao para melhoria`,icon:Ca}):g.push({tipo:"positivo",titulo:"Margem lquida saudvel",descricao:`${_.toFixed(1)}% - Acima da mdia do setor`,icon:Xt});const w=v.receita_bruta||0,S=v.total_despesas||0;S>w*.8&&N.push({tipo:"atencao",titulo:"Despesas elevadas",descricao:`Despesas representam ${(S/w*100).toFixed(0)}% da receita`,icon:ta});const C=v.cmv||0,k=(w-C)/w*100;k<30&&y.push({prioridade:"media",titulo:"Revisar custo dos produtos",descricao:`Margem bruta de ${k.toFixed(1)}%. Considere negociar com fornecedores ou ajustar preos.`});const F=v.lucro_liquido||0;F>0?g.push({tipo:"positivo",titulo:"Resultado positivo",descricao:`Lucro de R$ ${F.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:sa}):(N.push({tipo:"critico",titulo:"Prejuzo no perodo",descricao:`Resultado negativo de R$ ${Math.abs(F).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:Ca}),y.push({prioridade:"alta",titulo:"Plano de recuperao necessrio",descricao:"Anlise detalhada de custos e reviso de estratgia de precificao urgente."}));let q=50;return _>10&&(q+=20),_>5&&_<=10&&(q+=10),F>0&&(q+=15),k>30&&(q+=15),S<w*.7&&(q+=10),{insights:g,recomendacoes:y,alertas:N,score:Math.min(q,100)}},p=v=>{let g="red",y="Crtico";return v>=80?(g="green",y="Excelente"):v>=60?(g="yellow",y="Bom"):v>=40&&(g="orange",y="Regular"),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(iP,{className:"text-purple-600"}),"Score de Sade Financeira"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:g==="green"?"#10b981":g==="yellow"?"#fbbf24":g==="orange"?"#f59e0b":"#ef4444",strokeWidth:"12",fill:"none",strokeDasharray:`${v/100*351.86} 351.86`,className:"transition-all duration-1000"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:v})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800 mb-1",children:y}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v>=80&&"Sua sade financeira est tima! Continue assim.",v>=60&&v<80&&"Boa sade financeira. Pequenos ajustes podem melhorar.",v>=40&&v<60&&"Situao estvel, mas requer ateno.",v<40&&"Ateno! Medidas corretivas so necessrias."]})]})]})]})},f=()=>{if(!c||!t)return null;const v=c.benchmarks,g=t.receita_liquida||0,y=g>0?(t.cmv||0)/g*100:0,N=t.margem_bruta||0,_=t.margem_liquida||0,w=g>0?(t.despesas_admin||0)/g*100:0,S=g>0?(t.total_despesas||0)/g*100:0,C=[{nome:"CMV",seu:y,idealMin:v.cmv.min,idealMax:v.cmv.max,inverter:!0,unidade:"%",cor:y<=v.cmv.max?"green":y<=v.cmv.max*1.1?"yellow":"red"},{nome:"Margem Bruta",seu:N,idealMin:v.margem_bruta.min,idealMax:v.margem_bruta.max,inverter:!1,unidade:"%",cor:N>=v.margem_bruta.min?"green":N>=v.margem_bruta.min*.9?"yellow":"red"},{nome:"Margem Lquida",seu:_,idealMin:v.margem_liquida.min,idealMax:v.margem_liquida.max,inverter:!1,unidade:"%",cor:_>=v.margem_liquida.min?"green":_>=v.margem_liquida.min*.8?"yellow":"red"},{nome:"Despesas Admin",seu:w,idealMin:0,idealMax:v.despesas_admin.max,inverter:!0,unidade:"%",cor:w<=v.despesas_admin.max?"green":w<=v.despesas_admin.max*1.2?"yellow":"red"},{nome:"Despesas Totais",seu:S,idealMin:0,idealMax:v.despesas_totais.max,inverter:!0,unidade:"%",cor:S<=v.despesas_totais.max?"green":S<=v.despesas_totais.max*1.2?"yellow":"red"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Km,{className:"text-indigo-600"}),"Seus Indicadores vs Mercado Pet Shop"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L2,{size:16}),e.jsxs("span",{children:["Fonte: ",c.fonte]})]})]}),e.jsx("div",{className:"space-y-4",children:C.map((k,F)=>{const q=k.idealMax-k.idealMin;k.idealMin+q/2;const A=k.seu>=k.idealMin&&k.seu<=k.idealMax;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:k.nome}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-lg font-bold ${k.cor==="green"?"text-green-600":k.cor==="yellow"?"text-yellow-600":"text-red-600"}`,children:[k.seu.toFixed(1),k.unidade]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Ideal: ",k.idealMin>0?`${k.idealMin.toFixed(0)}-`:"",k.idealMax.toFixed(0),k.unidade]})]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-200 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute h-full bg-green-200",style:{left:`${k.idealMin/100*100}%`,width:`${q/100*100}%`}}),e.jsx("div",{className:"absolute h-full w-2 bg-gray-800 shadow-lg z-10",style:{left:`${Math.min(Math.max(k.seu/100*100,0),100)}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Voc"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm",children:A?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Dentro da faixa ideal!"})]}):k.seu<k.idealMin?e.jsxs(e.Fragment,{children:[e.jsx(Ca,{size:16,className:"text-orange-600"}),e.jsxs("span",{className:"text-orange-600",children:["Abaixo do ideal (",(k.idealMin-k.seu).toFixed(1),k.unidade," a menos)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ta,{size:16,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Acima do ideal (+",(k.seu-k.idealMax).toFixed(1),k.unidade,")"]})]})})]},F)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:" Faixa verde = Ideal para pet shops | Barra preta = Seu valor atual"})})]})};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Gerando anlise inteligente..."})]})}):a?e.jsxs("div",{className:"space-y-6",children:[p(a.score),f(),i&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(zi,{className:"text-blue-600"}),"Comparao com Perodo Anterior"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i).map(([v,g])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 capitalize",children:v}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 mb-2",children:["R$ ",g.atual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),g.variacao!==null&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${g.variacao>0?"text-green-600":"text-red-600"}`,children:[g.variacao>0?e.jsx(L9,{size:16}):e.jsx(I9,{size:16}),e.jsxs("span",{className:"font-semibold",children:[Math.abs(g.variacao).toFixed(1),"%"]})]})]},v))})]}),a.alertas.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ta,{className:"text-orange-600"}),"Pontos de Ateno"]}),e.jsx("div",{className:"space-y-3",children:a.alertas.map((v,g)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${v.tipo==="critico"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v.icon,{size:20,className:v.tipo==="critico"?"text-red-600":"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:v.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.descricao})]})]})},g))})]}),a.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Km,{className:"text-indigo-600"}),"Insights Inteligentes"]}),e.jsx("div",{className:"space-y-3",children:a.insights.map((v,g)=>e.jsx("div",{className:`p-4 rounded-lg ${v.tipo==="positivo"?"bg-green-50":v.tipo==="atencao"?"bg-yellow-50":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v.icon,{size:20,className:v.tipo==="positivo"?"text-green-600":v.tipo==="atencao"?"text-yellow-600":"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:v.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.descricao})]})]})},g))})]}),a.recomendacoes.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(rP,{className:"text-yellow-600"}),"Recomendaes Estratgicas"]}),e.jsx("div",{className:"space-y-3",children:a.recomendacoes.map((v,g)=>e.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${v.prioridade==="alta"?"bg-red-100 text-red-700":v.prioridade==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:v.prioridade.toUpperCase()}),e.jsx("p",{className:"font-semibold text-gray-800",children:v.titulo})]}),e.jsx("p",{className:"text-sm text-gray-600",children:v.descricao})]}),e.jsx(fa,{className:"text-purple-600 flex-shrink-0 ml-3",size:24})]})},g))})]})]}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(Brain,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600",children:"No h dados suficientes para anlise"})]})},T2e=()=>{var S,C,k,F,q,A,T;const[t,r]=j.useState("demonstrativo"),[a,s]=j.useState(!1),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c]=j.useState([{id:"loja_fisica",nome:"Loja Fsica",cor:"blue"},{id:"mercado_livre",nome:"Mercado Livre",cor:"yellow"},{id:"shopee",nome:"Shopee",cor:"orange"},{id:"amazon",nome:"Amazon",cor:"green"}]),[d,u]=j.useState(["loja_fisica"]),m=()=>{const U=new Date,K=U.getFullYear(),I=String(U.getMonth()+1).padStart(2,"0");return`${K}-${I}`},[x,h]=j.useState(m());j.useEffect(()=>{b()},[]);const b=async()=>{var U,K;o(!0);try{const[I,Y]=x.split("-"),D=d.join(","),W=await V.get("/financeiro/dre/canais",{params:{ano:I,mes:Y,canais:D}});l(W.data)}catch(I){console.error("Erro ao carregar DRE:",I),ze.error("Erro ao carregar DRE: "+(((K=(U=I.response)==null?void 0:U.data)==null?void 0:K.detail)||I.message))}finally{o(!1)}},p=U=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(U||0),f=U=>`${(U||0).toFixed(2)}%`,v=(U,K)=>!K||K===0?0:U/K*100,g=U=>{u(K=>K.includes(U)?K.filter(Y=>Y!==U):[...K,U])},y=()=>{u([])};j.useEffect(()=>{i&&b()},[d]);const N=U=>{const K=new Date;let I;switch(U){case"mes_atual":I=m();break;case"mes_anterior":const Y=new Date(K.getFullYear(),K.getMonth()-1,1);I=`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}`;break;case"ano_atual":I=`${K.getFullYear()}-01`;break;default:return}h(I),setTimeout(()=>b(),100)},_=async()=>{const U=ze.loading("Gerando PDF...");try{const[K,I]=x.split("-"),Y=await V.get("/financeiro/dre/export/pdf",{params:{ano:K,mes:I},responseType:"blob"}),D=window.URL.createObjectURL(new Blob([Y.data])),W=document.createElement("a");W.href=D,W.setAttribute("download",`dre_${I}_${K}.pdf`),document.body.appendChild(W),W.click(),W.remove(),ze.success(" PDF exportado com sucesso!")}catch(K){console.error("Erro ao exportar PDF:",K),ze.error("Erro ao exportar PDF")}finally{ze.dismiss(U)}},w=async()=>{const U=ze.loading("Gerando Excel...");try{const[K,I]=x.split("-"),Y=await V.get("/financeiro/dre/export/excel",{params:{ano:K,mes:I},responseType:"blob"}),D=window.URL.createObjectURL(new Blob([Y.data])),W=document.createElement("a");W.href=D,W.setAttribute("download",`dre_${I}_${K}.xlsx`),document.body.appendChild(W),W.click(),W.remove(),ze.success(" Excel exportado com sucesso!")}catch(K){console.error("Erro ao exportar Excel:",K),ze.error("Erro ao exportar Excel")}finally{ze.dismiss(U)}};return n&&!i?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gr,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando DRE..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" DRE - Demonstrao do Resultado"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Anlise gerencial de receitas, custos e lucro"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl",title:"Consultar Especialista IA",children:[e.jsx(aP,{size:20}),e.jsx("span",{className:"font-medium",children:"Chat IA"}),e.jsx(No,{size:16,className:"animate-pulse"})]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Exportar para PDF",children:[e.jsx(bs,{size:18}),"PDF"]}),e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",title:"Exportar para Excel",children:[e.jsx(Xm,{size:18}),"Excel"]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("demonstrativo"),className:`${t==="demonstrativo"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(bs,{size:18}),"Demonstrativo"]}),e.jsxs("button",{onClick:()=>r("extrato"),className:`${t==="extrato"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(yh,{size:18}),"Extrato Bancrio",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full font-bold",children:"IA"})]}),e.jsxs("button",{onClick:()=>r("analise"),className:`${t==="analise"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(Gm,{size:18}),"Anlise Inteligente",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded-full font-bold",children:"EM BREVE"})]})]})}),t==="demonstrativo"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N("mes_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ms Atual"}),e.jsx("button",{onClick:()=>N("mes_anterior"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ms Anterior"}),e.jsx("button",{onClick:()=>N("ano_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ano Atual"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perodo (Ms/Ano)"}),e.jsx("input",{type:"month",value:x,onChange:U=>h(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Gr,{size:18}),"Atualizar"]})})]})}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Receita Bruta"}),e.jsx(sa,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((S=i.totais)==null?void 0:S.receita_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Base de clculo"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"CMV"}),e.jsx(Ca,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((C=i.totais)==null?void 0:C.cmv)||0)}),e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:[f(v((k=i.totais)==null?void 0:k.cmv,(F=i.totais)==null?void 0:F.receita_bruta))," da receita"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Lucro Bruto"}),e.jsx(fa,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((q=i.totais)==null?void 0:q.lucro_bruto)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Aps custos"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Margem Bruta"}),e.jsx(sP,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:f(((A=i.totais)==null?void 0:A.margem_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Rentabilidade"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Xt,{size:20,className:"text-blue-600"}),"Anlise por Canal de Vendas"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Selecione os canais para adicionar suas mtricas na tabela DRE"})]}),d.length>0&&e.jsx("button",{onClick:y,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Limpar Seleo"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:c.map(U=>{const K=d.includes(U.id),I={blue:K?"bg-blue-600 text-white border-blue-600":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",yellow:K?"bg-yellow-500 text-white border-yellow-500":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100",orange:K?"bg-orange-500 text-white border-orange-500":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100",green:K?"bg-green-600 text-white border-green-600":"bg-green-50 text-green-700 border-green-200 hover:bg-green-100"};return e.jsxs("button",{onClick:()=>g(U.id),className:`${I[U.cor]} border-2 rounded-lg p-4 transition-all duration-200 transform ${K?"scale-105 shadow-lg":"hover:scale-102"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:U.nome}),K&&e.jsx(Xt,{size:20,className:"flex-shrink-0"})]}),K&&e.jsx("div",{className:"text-xs mt-1 opacity-90",children:"Ativo na tabela"})]},U.id)})}),d.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gm,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("span",{className:"font-semibold",children:[d.length," canal(is) selecionado(s)."]})," ","As mtricas de cada canal sero adicionadas na tabela DRE abaixo com suas respectivas receitas, custos e lucros."]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Receita"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(T=i==null?void 0:i.linhas)==null?void 0:T.map((U,K)=>{const I=U.nivel===0,Y=U.nivel===1,D=U.cor_bg!=="#ffffff"?{backgroundColor:U.cor_bg}:{},W={color:U.cor};return e.jsxs("tr",{style:D,className:I?"font-bold":"",children:[e.jsx("td",{className:`px-6 py-3 ${Y?"pl-12":""} ${I?"font-bold":""}`,style:W,children:U.descricao}),e.jsx("td",{className:`px-6 py-3 text-right ${I?"font-bold":""}`,style:W,children:p(U.valor)}),e.jsx("td",{className:`px-6 py-3 text-right ${I?"font-bold":""}`,style:W,children:f(U.percentual)})]},K)})})]})}),d.length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:" A DRE agora mostra automaticamente todos os canais com vendas no perodo selecionado."})})]}),!i&&!n&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(bs,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Selecione um perodo e clique em Atualizar para visualizar o DRE"})]})]}),t==="extrato"&&e.jsx(A2e,{}),t==="analise"&&e.jsx(P2e,{dados:i,periodo:{mes:x.mes,ano:x.ano}}),e.jsx(The,{isOpen:a,onClose:()=>s(!1),contexto:{tipo:"DRE",periodo:`${x.mes}/${x.ano}`,valor:i==null?void 0:i.lucro_liquido,dados:i}})]})},O2e=t=>{const r={critico:"bg-red-100 text-red-800 border-red-200",alerta:"bg-yellow-100 text-yellow-800 border-yellow-200",ok:"bg-green-100 text-green-800 border-green-200"};return r[t]||r.ok},F2e=t=>t==="critico"?e.jsx(ta,{className:"w-5 h-5"}):t==="alerta"?e.jsx(ta,{className:"w-5 h-5"}):e.jsx(Xt,{className:"w-5 h-5"}),R2e=t=>t==="melhorando"?e.jsx(sa,{className:"w-5 h-5 text-green-600"}):t==="piorando"?e.jsx(Ca,{className:"w-5 h-5 text-red-600"}):e.jsx(gg,{className:"w-5 h-5 text-gray-600"});function $2e({indices:t}){const[r,a]=j.useState(null);if(!t)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum ndice disponvel"});const{saldo_atual:s,dias_de_caixa:n,status:o,tendencia:i,score_saude:l,receita_mensal_estimada:c,despesa_mensal_estimada:d,percentual_variacao_7d:u}=t;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(fa,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"relative",children:[R2e(i),e.jsx("button",{onMouseEnter:()=>a("saldo"),onMouseLeave:()=>a(null),className:"ml-2 text-gray-400 hover:text-gray-600",children:e.jsx(q0,{className:"w-4 h-4"})}),r==="saldo"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Saldo Atual"}),e.jsx("p",{children:"Seu saldo de caixa real neste momento. O nmero verde ao lado mostra a variao dos ltimos 7 dias."})]})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0)}),u&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u>0?"+":"",u.toFixed(1),"% em 7 dias"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(zi,{className:"w-6 h-6 text-purple-600"})}),e.jsx("button",{onMouseEnter:()=>a("dias"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(q0,{className:"w-4 h-4"})}),r==="dias"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Dias de Caixa"}),e.jsx("p",{children:"Quantos dias voc consegue pagar as despesas com seu saldo atual. Se tem R$ 10.000 e gasta R$ 1.000/dia = 10 dias."})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Dias de Caixa"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(n==null?void 0:n.toFixed(1))||"0.0"," dias"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n<7?"Crtico - menos de 1 semana":n<15?"Alerta - menos de 2 semanas":"Saudvel"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${O2e(o)}`,children:F2e(o)}),e.jsx("button",{onMouseEnter:()=>a("status"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(q0,{className:"w-4 h-4"})}),r==="status"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Status"}),e.jsxs("p",{children:[e.jsx("strong",{children:"CRITICO:"})," <7 dias (risco iminente). ",e.jsx("strong",{children:"ALERTA:"})," 7-15 dias. ",e.jsx("strong",{children:"OK:"})," >15 dias."]})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Status"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:o||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 capitalize",children:["Tendncia: ",i||"estvel"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(D9,{className:"w-6 h-6 text-green-600"})}),e.jsx("button",{onMouseEnter:()=>a("score"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(q0,{className:"w-4 h-4"})}),r==="score"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Score de Sade"}),e.jsx("p",{children:"Nota de 0-100 que resume a sade financeira. Considera dias de caixa, tendncia e volatilidade."})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Score de Sade"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(l==null?void 0:l.toFixed(0))||"0","/100"]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l>=70?"bg-green-600":l>=40?"bg-yellow-600":"bg-red-600"}`,style:{width:`${l||0}%`}})})]}),c&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(sa,{className:"w-6 h-6 text-green-600"})})}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Receita Mensal"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Estimativa"})]}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(Ca,{className:"w-6 h-6 text-red-600"})})}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Despesa Mensal"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Estimativa"})]})]})}const B$=6048e5,D2e=864e5,z$=6e4,q$=36e5,pp=43200,S6=1440,C6=Symbol.for("constructDateFrom");function ao(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&C6 in t?t[C6](r):t instanceof Date?new t.constructor(r):new Date(r)}function na(t,r){return ao(r||t,t)}let M2e={};function p0(){return M2e}function zx(t,r){var l,c,d,u;const a=p0(),s=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=na(t,r==null?void 0:r.in),o=n.getDay(),i=(o<s?7:0)+o-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function qf(t,r){return zx(t,{...r,weekStartsOn:1})}function V$(t,r){const a=na(t,r==null?void 0:r.in),s=a.getFullYear(),n=ao(a,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const o=qf(n),i=ao(a,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const l=qf(i);return a.getTime()>=o.getTime()?s+1:a.getTime()>=l.getTime()?s:s-1}function Vf(t){const r=na(t),a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return a.setUTCFullYear(r.getFullYear()),+t-+a}function gb(t,...r){const a=ao.bind(null,t||r.find(s=>typeof s=="object"));return r.map(a)}function k6(t,r){const a=na(t,r==null?void 0:r.in);return a.setHours(0,0,0,0),a}function I2e(t,r,a){const[s,n]=gb(a==null?void 0:a.in,t,r),o=k6(s),i=k6(n),l=+o-Vf(o),c=+i-Vf(i);return Math.round((l-c)/D2e)}function L2e(t,r){const a=V$(t,r),s=ao(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),qf(s)}function Rp(t,r){const a=+na(t)-+na(r);return a<0?-1:a>0?1:a}function B2e(t){return ao(t,Date.now())}function z2e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function q2e(t){return!(!z2e(t)&&typeof t!="number"||isNaN(+na(t)))}function V2e(t,r,a){const[s,n]=gb(a==null?void 0:a.in,t,r),o=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return o*12+i}function U2e(t){return r=>{const s=(t?Math[t]:Math.trunc)(r);return s===0?0:s}}function W2e(t,r){return+na(t)-+na(r)}function H2e(t,r){const a=na(t,r==null?void 0:r.in);return a.setHours(23,59,59,999),a}function K2e(t,r){const a=na(t,r==null?void 0:r.in),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}function G2e(t,r){const a=na(t,r==null?void 0:r.in);return+H2e(a,r)==+K2e(a,r)}function X2e(t,r,a){const[s,n,o]=gb(a==null?void 0:a.in,t,t,r),i=Rp(n,o),l=Math.abs(V2e(n,o));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*l);let c=Rp(n,o)===-i;G2e(s)&&l===1&&Rp(s,o)===1&&(c=!1);const d=i*(l-+c);return d===0?0:d}function Y2e(t,r,a){const s=W2e(t,r)/1e3;return U2e(a==null?void 0:a.roundingMethod)(s)}function Q2e(t,r){const a=na(t,r==null?void 0:r.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const J2e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Z2e=(t,r,a)=>{let s;const n=J2e[t];return typeof n=="string"?s=n:r===1?s=n.one:s=n.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function ud(t){return(r={})=>{const a=r.width?String(r.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const eNe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tNe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rNe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aNe={date:ud({formats:eNe,defaultWidth:"full"}),time:ud({formats:tNe,defaultWidth:"full"}),dateTime:ud({formats:rNe,defaultWidth:"full"})},sNe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nNe=(t,r,a,s)=>sNe[t];function Vn(t){return(r,a)=>{const s=a!=null&&a.context?String(a.context):"standalone";let n;if(s==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=a!=null&&a.width?String(a.width):i;n=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=a!=null&&a.width?String(a.width):t.defaultWidth;n=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(r):r;return n[o]}}const oNe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iNe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lNe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cNe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mNe=(t,r)=>{const a=Number(t),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},xNe={ordinalNumber:mNe,era:Vn({values:oNe,defaultWidth:"wide"}),quarter:Vn({values:iNe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vn({values:lNe,defaultWidth:"wide"}),day:Vn({values:cNe,defaultWidth:"wide"}),dayPeriod:Vn({values:dNe,defaultWidth:"wide",formattingValues:uNe,defaultFormattingWidth:"wide"})};function Un(t){return(r,a={})=>{const s=a.width,n=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(n);if(!o)return null;const i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?hNe(l,m=>m.test(i)):pNe(l,m=>m.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const u=r.slice(i.length);return{value:d,rest:u}}}function pNe(t,r){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&r(t[a]))return a}function hNe(t,r){for(let a=0;a<t.length;a++)if(r(t[a]))return a}function U$(t){return(r,a={})=>{const s=r.match(t.matchPattern);if(!s)return null;const n=s[0],o=r.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=a.valueCallback?a.valueCallback(i):i;const l=r.slice(n.length);return{value:i,rest:l}}}const fNe=/^(\d+)(th|st|nd|rd)?/i,gNe=/\d+/i,bNe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vNe={any:[/^b/i,/^(a|c)/i]},yNe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jNe={any:[/1/i,/2/i,/3/i,/4/i]},NNe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wNe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_Ne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SNe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CNe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ENe={ordinalNumber:U$({matchPattern:fNe,parsePattern:gNe,valueCallback:t=>parseInt(t,10)}),era:Un({matchPatterns:bNe,defaultMatchWidth:"wide",parsePatterns:vNe,defaultParseWidth:"any"}),quarter:Un({matchPatterns:yNe,defaultMatchWidth:"wide",parsePatterns:jNe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Un({matchPatterns:NNe,defaultMatchWidth:"wide",parsePatterns:wNe,defaultParseWidth:"any"}),day:Un({matchPatterns:_Ne,defaultMatchWidth:"wide",parsePatterns:SNe,defaultParseWidth:"any"}),dayPeriod:Un({matchPatterns:CNe,defaultMatchWidth:"any",parsePatterns:kNe,defaultParseWidth:"any"})},W$={code:"en-US",formatDistance:Z2e,formatLong:aNe,formatRelative:nNe,localize:xNe,match:ENe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ANe(t,r){const a=na(t,r==null?void 0:r.in);return I2e(a,Q2e(a))+1}function PNe(t,r){const a=na(t,r==null?void 0:r.in),s=+qf(a)-+L2e(a);return Math.round(s/B$)+1}function H$(t,r){var u,m,x,h;const a=na(t,r==null?void 0:r.in),s=a.getFullYear(),n=p0(),o=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(x=n.locale)==null?void 0:x.options)==null?void 0:h.firstWeekContainsDate)??1,i=ao((r==null?void 0:r.in)||t,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=zx(i,r),c=ao((r==null?void 0:r.in)||t,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=zx(c,r);return+a>=+l?s+1:+a>=+d?s:s-1}function TNe(t,r){var l,c,d,u;const a=p0(),s=(r==null?void 0:r.firstWeekContainsDate)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??a.firstWeekContainsDate??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=H$(t,r),o=ao((r==null?void 0:r.in)||t,0);return o.setFullYear(n,0,s),o.setHours(0,0,0,0),zx(o,r)}function ONe(t,r){const a=na(t,r==null?void 0:r.in),s=+zx(a,r)-+TNe(a,r);return Math.round(s/B$)+1}function or(t,r){const a=t<0?"-":"",s=Math.abs(t).toString().padStart(r,"0");return a+s}const ri={y(t,r){const a=t.getFullYear(),s=a>0?a:1-a;return or(r==="yy"?s%100:s,r.length)},M(t,r){const a=t.getMonth();return r==="M"?String(a+1):or(a+1,2)},d(t,r){return or(t.getDate(),r.length)},a(t,r){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,r){return or(t.getHours()%12||12,r.length)},H(t,r){return or(t.getHours(),r.length)},m(t,r){return or(t.getMinutes(),r.length)},s(t,r){return or(t.getSeconds(),r.length)},S(t,r){const a=r.length,s=t.getMilliseconds(),n=Math.trunc(s*Math.pow(10,a-3));return or(n,r.length)}},Cc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},E6={G:function(t,r,a){const s=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(t,r,a){if(r==="yo"){const s=t.getFullYear(),n=s>0?s:1-s;return a.ordinalNumber(n,{unit:"year"})}return ri.y(t,r)},Y:function(t,r,a,s){const n=H$(t,s),o=n>0?n:1-n;if(r==="YY"){const i=o%100;return or(i,2)}return r==="Yo"?a.ordinalNumber(o,{unit:"year"}):or(o,r.length)},R:function(t,r){const a=V$(t);return or(a,r.length)},u:function(t,r){const a=t.getFullYear();return or(a,r.length)},Q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return or(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return or(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,a){const s=t.getMonth();switch(r){case"M":case"MM":return ri.M(t,r);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,a){const s=t.getMonth();switch(r){case"L":return String(s+1);case"LL":return or(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,a,s){const n=ONe(t,s);return r==="wo"?a.ordinalNumber(n,{unit:"week"}):or(n,r.length)},I:function(t,r,a){const s=PNe(t);return r==="Io"?a.ordinalNumber(s,{unit:"week"}):or(s,r.length)},d:function(t,r,a){return r==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):ri.d(t,r)},D:function(t,r,a){const s=ANe(t);return r==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):or(s,r.length)},E:function(t,r,a){const s=t.getDay();switch(r){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,a,s){const n=t.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return or(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,r,a,s){const n=t.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return or(o,r.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,r,a){const s=t.getDay(),n=s===0?7:s;switch(r){case"i":return String(n);case"ii":return or(n,r.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,a){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,r,a){const s=t.getHours();let n;switch(s===12?n=Cc.noon:s===0?n=Cc.midnight:n=s/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,r,a){const s=t.getHours();let n;switch(s>=17?n=Cc.evening:s>=12?n=Cc.afternoon:s>=4?n=Cc.morning:n=Cc.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,r,a){if(r==="ho"){let s=t.getHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return ri.h(t,r)},H:function(t,r,a){return r==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):ri.H(t,r)},K:function(t,r,a){const s=t.getHours()%12;return r==="Ko"?a.ordinalNumber(s,{unit:"hour"}):or(s,r.length)},k:function(t,r,a){let s=t.getHours();return s===0&&(s=24),r==="ko"?a.ordinalNumber(s,{unit:"hour"}):or(s,r.length)},m:function(t,r,a){return r==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):ri.m(t,r)},s:function(t,r,a){return r==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):ri.s(t,r)},S:function(t,r){return ri.S(t,r)},X:function(t,r,a){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return P6(s);case"XXXX":case"XX":return il(s);case"XXXXX":case"XXX":default:return il(s,":")}},x:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"x":return P6(s);case"xxxx":case"xx":return il(s);case"xxxxx":case"xxx":default:return il(s,":")}},O:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+A6(s,":");case"OOOO":default:return"GMT"+il(s,":")}},z:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+A6(s,":");case"zzzz":default:return"GMT"+il(s,":")}},t:function(t,r,a){const s=Math.trunc(+t/1e3);return or(s,r.length)},T:function(t,r,a){return or(+t,r.length)}};function A6(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=Math.trunc(s/60),o=s%60;return o===0?a+String(n):a+String(n)+r+or(o,2)}function P6(t,r){return t%60===0?(t>0?"-":"+")+or(Math.abs(t)/60,2):il(t,r)}function il(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=or(Math.trunc(s/60),2),o=or(s%60,2);return a+n+r+o}const T6=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},K$=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},FNe=(t,r)=>{const a=t.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return T6(t,r);let o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",T6(s,r)).replace("{{time}}",K$(n,r))},RNe={p:K$,P:FNe},$Ne=/^D+$/,DNe=/^Y+$/,MNe=["D","DD","YY","YYYY"];function INe(t){return $Ne.test(t)}function LNe(t){return DNe.test(t)}function BNe(t,r,a){const s=zNe(t,r,a);if(console.warn(s),MNe.includes(t))throw new RangeError(s)}function zNe(t,r,a){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${s} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qNe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VNe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UNe=/^'([^]*?)'?$/,WNe=/''/g,HNe=/[a-zA-Z]/;function G$(t,r,a){var u,m,x,h,b,p,f,v;const s=p0(),n=(a==null?void 0:a.locale)??s.locale??W$,o=(a==null?void 0:a.firstWeekContainsDate)??((m=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(x=s.locale)==null?void 0:x.options)==null?void 0:h.firstWeekContainsDate)??1,i=(a==null?void 0:a.weekStartsOn)??((p=(b=a==null?void 0:a.locale)==null?void 0:b.options)==null?void 0:p.weekStartsOn)??s.weekStartsOn??((v=(f=s.locale)==null?void 0:f.options)==null?void 0:v.weekStartsOn)??0,l=na(t,a==null?void 0:a.in);if(!q2e(l))throw new RangeError("Invalid time value");let c=r.match(VNe).map(g=>{const y=g[0];if(y==="p"||y==="P"){const N=RNe[y];return N(g,n.formatLong)}return g}).join("").match(qNe).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const y=g[0];if(y==="'")return{isToken:!1,value:KNe(g)};if(E6[y])return{isToken:!0,value:g};if(y.match(HNe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:g}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return c.map(g=>{if(!g.isToken)return g.value;const y=g.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&LNe(y)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&INe(y))&&BNe(y,r,String(t));const N=E6[y[0]];return N(l,y,n.localize,d)}).join("")}function KNe(t){const r=t.match(UNe);return r?r[1].replace(WNe,"'"):t}function GNe(t,r,a){const s=p0(),n=(a==null?void 0:a.locale)??s.locale??W$,o=2520,i=Rp(t,r);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:i}),[c,d]=gb(a==null?void 0:a.in,...i>0?[r,t]:[t,r]),u=Y2e(d,c),m=(Vf(d)-Vf(c))/1e3,x=Math.round((u-m)/60);let h;if(x<2)return a!=null&&a.includeSeconds?u<5?n.formatDistance("lessThanXSeconds",5,l):u<10?n.formatDistance("lessThanXSeconds",10,l):u<20?n.formatDistance("lessThanXSeconds",20,l):u<40?n.formatDistance("halfAMinute",0,l):u<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):x===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",x,l);if(x<45)return n.formatDistance("xMinutes",x,l);if(x<90)return n.formatDistance("aboutXHours",1,l);if(x<S6){const b=Math.round(x/60);return n.formatDistance("aboutXHours",b,l)}else{if(x<o)return n.formatDistance("xDays",1,l);if(x<pp){const b=Math.round(x/S6);return n.formatDistance("xDays",b,l)}else if(x<pp*2)return h=Math.round(x/pp),n.formatDistance("aboutXMonths",h,l)}if(h=X2e(d,c),h<12){const b=Math.round(x/pp);return n.formatDistance("xMonths",b,l)}else{const b=h%12,p=Math.trunc(h/12);return b<3?n.formatDistance("aboutXYears",p,l):b<9?n.formatDistance("overXYears",p,l):n.formatDistance("almostXYears",p+1,l)}}function XNe(t,r){return GNe(t,B2e(t),r)}function YNe(t,r){const a=()=>ao(r==null?void 0:r.in,NaN),n=ewe(t);let o;if(n.date){const d=twe(n.date,2);o=rwe(d.restDateString,d.year)}if(!o||isNaN(+o))return a();const i=+o;let l=0,c;if(n.time&&(l=awe(n.time),isNaN(l)))return a();if(n.timezone){if(c=swe(n.timezone),isNaN(c))return a()}else{const d=new Date(i+l),u=na(0,r==null?void 0:r.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return na(i+l+c,r==null?void 0:r.in)}const hp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},QNe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,JNe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ZNe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ewe(t){const r={},a=t.split(hp.dateTimeDelimiter);let s;if(a.length>2)return r;if(/:/.test(a[0])?s=a[0]:(r.date=a[0],s=a[1],hp.timeZoneDelimiter.test(r.date)&&(r.date=t.split(hp.timeZoneDelimiter)[0],s=t.substr(r.date.length,t.length))),s){const n=hp.timezone.exec(s);n?(r.time=s.replace(n[1],""),r.timezone=n[1]):r.time=s}return r}function twe(t,r){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function rwe(t,r){if(r===null)return new Date(NaN);const a=t.match(QNe);if(!a)return new Date(NaN);const s=!!a[4],n=Gu(a[1]),o=Gu(a[2])-1,i=Gu(a[3]),l=Gu(a[4]),c=Gu(a[5])-1;if(s)return cwe(r,l,c)?nwe(r,l,c):new Date(NaN);{const d=new Date(0);return!iwe(r,o,i)||!lwe(r,n)?new Date(NaN):(d.setUTCFullYear(r,o,Math.max(n,i)),d)}}function Gu(t){return t?parseInt(t):1}function awe(t){const r=t.match(JNe);if(!r)return NaN;const a=$v(r[1]),s=$v(r[2]),n=$v(r[3]);return dwe(a,s,n)?a*q$+s*z$+n*1e3:NaN}function $v(t){return t&&parseFloat(t.replace(",","."))||0}function swe(t){if(t==="Z")return 0;const r=t.match(ZNe);if(!r)return 0;const a=r[1]==="+"?-1:1,s=parseInt(r[2]),n=r[3]&&parseInt(r[3])||0;return uwe(s,n)?a*(s*q$+n*z$):NaN}function nwe(t,r,a){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,o=(r-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const owe=[31,null,31,30,31,30,31,31,30,31,30,31];function X$(t){return t%400===0||t%4===0&&t%100!==0}function iwe(t,r,a){return r>=0&&r<=11&&a>=1&&a<=(owe[r]||(X$(t)?29:28))}function lwe(t,r){return r>=1&&r<=(X$(t)?366:365)}function cwe(t,r,a){return r>=1&&r<=53&&a>=0&&a<=6}function dwe(t,r,a){return t===24?r===0&&a===0:a>=0&&a<60&&r>=0&&r<60&&t>=0&&t<25}function uwe(t,r){return r>=0&&r<=59}const mwe={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},xwe=(t,r,a)=>{let s;const n=mwe[t];return typeof n=="string"?s=n:r===1?s=n.one:s=n.other.replace("{{count}}",String(r)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+s:"h "+s:s},pwe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},hwe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},fwe={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gwe={date:ud({formats:pwe,defaultWidth:"full"}),time:ud({formats:hwe,defaultWidth:"full"}),dateTime:ud({formats:fwe,defaultWidth:"full"})},bwe={lastWeek:t=>{const r=t.getDay();return"'"+(r===0||r===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},vwe=(t,r,a,s)=>{const n=bwe[t];return typeof n=="function"?n(r):n},ywe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},jwe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Nwe={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},wwe={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},_we={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},Swe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Cwe=(t,r)=>{const a=Number(t);return(r==null?void 0:r.unit)==="week"?a+"":a+""},kwe={ordinalNumber:Cwe,era:Vn({values:ywe,defaultWidth:"wide"}),quarter:Vn({values:jwe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vn({values:Nwe,defaultWidth:"wide"}),day:Vn({values:wwe,defaultWidth:"wide"}),dayPeriod:Vn({values:_we,defaultWidth:"wide",formattingValues:Swe,defaultFormattingWidth:"wide"})},Ewe=/^(\d+)[o]?/i,Awe=/\d+/i,Pwe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Twe={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Owe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Fwe={any:[/1/i,/2/i,/3/i,/4/i]},Rwe={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},$we={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Dwe={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},Mwe={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},Iwe={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},Lwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Bwe={ordinalNumber:U$({matchPattern:Ewe,parsePattern:Awe,valueCallback:t=>parseInt(t,10)}),era:Un({matchPatterns:Pwe,defaultMatchWidth:"wide",parsePatterns:Twe,defaultParseWidth:"any"}),quarter:Un({matchPatterns:Owe,defaultMatchWidth:"wide",parsePatterns:Fwe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Un({matchPatterns:Rwe,defaultMatchWidth:"wide",parsePatterns:$we,defaultParseWidth:"any"}),day:Un({matchPatterns:Dwe,defaultMatchWidth:"wide",parsePatterns:Mwe,defaultParseWidth:"any"}),dayPeriod:Un({matchPatterns:Iwe,defaultMatchWidth:"any",parsePatterns:Lwe,defaultParseWidth:"any"})},bw={code:"pt-BR",formatDistance:xwe,formatLong:gwe,formatRelative:vwe,localize:kwe,match:Bwe,options:{weekStartsOn:0,firstWeekContainsDate:1}},md=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0}).format(t),Y$=t=>{try{const r=YNe(t);return G$(r,"dd/MMM",{locale:bw})}catch{return t}},O6=({active:t,payload:r})=>{if(!t||!r||!r.length)return null;const a=r[0].payload;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:Y$(a.data_projetada)}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-blue-600",children:["Saldo: ",e.jsx("strong",{children:md(a.saldo_estimado)})]}),a.limite_superior&&e.jsxs("p",{className:"text-green-600",children:["Otimista: ",md(a.limite_superior)]}),a.limite_inferior&&e.jsxs("p",{className:"text-red-600",children:["Pessimista: ",md(a.limite_inferior)]}),a.alerta_nivel&&e.jsxs("p",{className:`font-medium ${a.alerta_nivel==="critico"?"text-red-600":a.alerta_nivel==="alerta"?"text-yellow-600":"text-green-600"}`,children:["Status: ",a.alerta_nivel]})]})]})};function Uf({projecoes:t,titulo:r="Projeo de Fluxo de Caixa",detalhado:a=!1}){var o,i,l,c,d,u;if(!t||t.length===0)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r}),e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Nenhuma projeo disponvel. Clique em "Atualizar Projeo" para gerar.'})]});const s=t.map(m=>({...m,data_formatada:Y$(m.data_projetada),saldo:m.saldo_estimado||0,superior:m.limite_superior||null,inferior:m.limite_inferior||null})),n=s.some(m=>m.superior!==null||m.inferior!==null);return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo Inicial"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:md(((o=s[0])==null?void 0:o.saldo)||0)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:md(((i=s[s.length-1])==null?void 0:i.saldo)||0)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("p",{className:`text-lg font-bold ${((l=s[s.length-1])==null?void 0:l.saldo)-((c=s[0])==null?void 0:c.saldo)>=0?"text-green-600":"text-red-600"}`,children:md((((d=s[s.length-1])==null?void 0:d.saldo)||0)-(((u=s[0])==null?void 0:u.saldo)||0))})]})]}),e.jsx(ua,{width:"100%",height:a?400:300,children:n?e.jsxs(xhe,{data:s,children:[e.jsx(ya,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(zr,{dataKey:"data_formatada",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(Rr,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:m=>`R$ ${(m/1e3).toFixed(0)}k`}),e.jsx(lr,{content:e.jsx(O6,{})}),e.jsx(Ar,{}),e.jsx(Lo,{type:"monotone",dataKey:"superior",stroke:"#10b981",fill:"#d1fae5",fillOpacity:.3,name:"Cenrio Otimista"}),e.jsx(Lo,{type:"monotone",dataKey:"inferior",stroke:"#ef4444",fill:"#fee2e2",fillOpacity:.3,name:"Cenrio Pessimista"}),e.jsx(as,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:3,dot:{r:4,fill:"#3b82f6"},name:"Saldo Estimado"})]}):e.jsxs(Jd,{data:s,children:[e.jsx(ya,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(zr,{dataKey:"data_formatada",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(Rr,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:m=>`R$ ${(m/1e3).toFixed(0)}k`}),e.jsx(lr,{content:e.jsx(O6,{})}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:3,dot:{r:4,fill:"#3b82f6"},name:"Saldo Estimado"})]})}),s.some(m=>m.vai_faltar_caixa)&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:" Ateno: Projeo indica que o caixa pode ficar negativo nos prximos dias!"})})]})}const zwe=t=>{const r={critico:{icon:ta,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},alerta:{icon:Bt,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},aviso:{icon:L2,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},info:{icon:Xt,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"}};return r[t]||r.info};function F6({alertas:t}){if(!t||t.length===0)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alertas do Caixa"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xt,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum alerta no momento"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Seu caixa est saudvel! "})]})]});const r={critico:0,alerta:1,aviso:2,info:3},a=[...t].sort((s,n)=>(r[s.tipo]||3)-(r[n.tipo]||3));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alertas do Caixa"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:a.length})]}),e.jsx("div",{className:"space-y-3",children:a.map((s,n)=>{const o=zwe(s.tipo),i=o.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${o.bgColor} ${o.borderColor}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${o.iconColor}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${o.textColor} mb-1`,children:s.titulo}),e.jsx("p",{className:`text-sm ${o.textColor} opacity-90`,children:s.mensagem}),s.data&&e.jsx("p",{className:`text-xs ${o.textColor} opacity-70 mt-2`,children:new Date(s.data).toLocaleString("pt-BR")})]})]})},n)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(s=>s.tipo==="critico").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Crticos"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.filter(s=>s.tipo==="alerta").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Alertas"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.filter(s=>s.tipo==="aviso").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Avisos"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(s=>s.tipo==="info").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Infos"})]})]})]})}const R6=[{id:"otimista",nome:"Otimista",descricao:"Aumento de 20% nas receitas e reduo de 10% nas despesas",icon:sa,color:"green"},{id:"realista",nome:"Realista",descricao:"Mantm o padro atual de receitas e despesas",icon:gg,color:"blue"},{id:"pessimista",nome:"Pessimista",descricao:"Reduo de 20% nas receitas e aumento de 10% nas despesas",icon:Ca,color:"red"}];function qwe({userId:t,projecoesBase:r=[]}){var u,m,x,h,b,p,f,v,g,y,N,_,w,S,C,k,F,q,A;const[a,s]=j.useState("realista"),[n,o]=j.useState(!1),[i,l]=j.useState(null),c=async()=>{o(!0);try{const U={Authorization:`Bearer ${localStorage.getItem("token")}`},K=await V.post(`/api/ia/fluxo/simular-cenario/${t}`,{cenario:a},{headers:U});l(K.data),be.success(`Cenrio ${a} simulado com sucesso!`)}catch(T){console.error("Erro ao simular cenrio:",T),be.error("Erro ao simular cenrio")}finally{o(!1)}},d=R6.find(T=>T.id===a);return d==null||d.icon,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Simulador de Cenrios"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Simule diferentes cenrios para entender o impacto no seu fluxo de caixa"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:R6.map(T=>{const U=T.icon,K=a===T.id;return e.jsxs("button",{onClick:()=>s(T.id),className:`p-4 rounded-lg border-2 transition-all text-left ${K?`border-${T.color}-500 bg-${T.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(U,{className:`w-6 h-6 ${K?`text-${T.color}-600`:"text-gray-400"}`}),e.jsx("h4",{className:`font-semibold ${K?`text-${T.color}-900`:"text-gray-900"}`,children:T.nome})]}),e.jsx("p",{className:`text-sm ${K?`text-${T.color}-700`:"text-gray-600"}`,children:T.descricao})]},T.id)})}),e.jsx("button",{onClick:c,disabled:n,className:"w-full md:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Simulando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H9,{className:"w-5 h-5"}),"Simular Cenrio"]})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Comparao: Base vs ",d==null?void 0:d.nome]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Cenrio Atual"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(((u=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:u.saldo_estimado)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((m=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:m.saldo_estimado)||0)-(((x=r==null?void 0:r[0])==null?void 0:x.saldo_estimado)||0))})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-700 mb-3",children:["Cenrio ",d==null?void 0:d.nome]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("span",{className:`font-semibold ${a==="otimista"?"text-green-600":a==="pessimista"?"text-red-600":"text-blue-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(((p=(b=i==null?void 0:i.projecoes_ajustadas)==null?void 0:b[((h=i==null?void 0:i.projecoes_ajustadas)==null?void 0:h.length)-1])==null?void 0:p.saldo_ajustado)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("span",{className:`font-semibold ${a==="otimista"?"text-green-600":a==="pessimista"?"text-red-600":"text-blue-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((g=(v=i==null?void 0:i.projecoes_ajustadas)==null?void 0:v[((f=i==null?void 0:i.projecoes_ajustadas)==null?void 0:f.length)-1])==null?void 0:g.saldo_ajustado)||0)-(((N=(y=i==null?void 0:i.projecoes_ajustadas)==null?void 0:y[0])==null?void 0:N.saldo_ajustado)||0))})]})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Diferena no Saldo Final"}),e.jsx("span",{className:`text-xl font-bold ${(((S=(w=i==null?void 0:i.projecoes_ajustadas)==null?void 0:w[((_=i==null?void 0:i.projecoes_ajustadas)==null?void 0:_.length)-1])==null?void 0:S.saldo_ajustado)||0)>(((C=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:C.saldo_estimado)||0)?"text-green-600":"text-red-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((q=(F=i==null?void 0:i.projecoes_ajustadas)==null?void 0:F[((k=i==null?void 0:i.projecoes_ajustadas)==null?void 0:k.length)-1])==null?void 0:q.saldo_ajustado)||0)-(((A=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:A.saldo_estimado)||0))})]})})]}),e.jsx(Uf,{projecoes:(i==null?void 0:i.projecoes_ajustadas)||[],titulo:`Projeo - Cenrio ${d==null?void 0:d.nome}`,detalhado:!0})]}),!i&&r&&r.length>0&&e.jsx(Uf,{projecoes:r,titulo:"Projeo Atual (Cenrio Base)",detalhado:!0})]})}function Vwe(){const[t,r]=j.useState(!1),a=[{titulo:"Dias de Caixa",descricao:"Quantos dias seu caixa consegue cobrir as despesas com o saldo atual. Se tem R$ 10.000 e gasta R$ 1.000/dia, ter 10 dias de caixa.",formula:"Saldo Atual  Despesa Mdia Diria",referencia:"ltimos 30 dias"},{titulo:"Saldo Estimado (Projeo)",descricao:"Previso do saldo do caixa para os prximos 15 dias, calculada usando inteligncia artificial (Prophet) baseada em histrico de 30+ dias.",formula:"Saldo Atual + Receitas Previstas - Despesas Previstas",referencia:"Prximos 15 dias"},{titulo:"Entrada/Sada Estimada",descricao:"Previso diria de quanto voc deve receber (entradas) e gastar (sadas) nos prximos dias.",formula:"Mdia histrica  30 dias  fator sazonalidade",referencia:"Prximos 15 dias"},{titulo:"Status do Caixa",descricao:"Classificao da sade financeira: CRITICO (<7 dias), ALERTA (7-15 dias) ou OK (>15 dias)",formula:'Status = IF(dias_caixa < 7) "CRITICO" ELSE IF(dias_caixa < 15) "ALERTA" ELSE "OK"',referencia:"Dados em tempo real"}],s=[{nome:"Viso Geral",conteudo:"Mostra os ndices principais de sade do caixa: quanto tempo de saldo voc tem, a tendncia (melhorando/piorando), despesa mdia diria e score geral de sade.",periodo:"ltimos 30 dias de histrico"},{nome:"Projees 15 Dias",conteudo:"Grfico e tabela com a previso de saldo dirio para os prximos 15 dias. Usa algoritmo Prophet com inteligncia artificial.",periodo:"Prximos 15 dias a partir de hoje"},{nome:"Alertas",conteudo:"Lista automtica de avisos: se o caixa est crtico, se h risco de falta de saldo, ou se a tendncia est piorando.",periodo:"Monitoramento contnuo"},{nome:"Simulador",conteudo:"Permite simular 3 cenrios: OTIMISTA (+20% receita, -10% despesa), REALISTA (sem mudanas) e PESSIMISTA (-20% receita, +10% despesa).",periodo:"Prximos 15 dias com mudanas aplicadas"}];return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-6",children:[e.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L2,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Entenda os Dados"})]}),e.jsx(ql,{className:`w-5 h-5 text-blue-600 transition-transform ${t?"rotate-180":""}`})]}),t&&e.jsxs("div",{className:"mt-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"O que cada aba mostra?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((n,o)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.nome}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:n.conteudo}),e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:[" ",n.periodo]})]},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"Mtricas Explicadas"}),e.jsx("div",{className:"space-y-4",children:a.map((n,o)=>e.jsx("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:o+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.titulo}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:n.descricao}),e.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Clculo:"})," ",n.formula]}),e.jsxs("p",{className:"text-blue-600",children:[e.jsx("strong",{children:"Perodo:"})," ",n.referencia]})]})]})]})},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"Perguntas Frequentes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Qual perodo a "Viso Geral" est analisando?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Os ltimos ",e.jsx("strong",{children:"30 dias"})," de movimentaes realizadas. Ela calcula a despesa mdia desse perodo para determinar quantos dias de caixa voc tem."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:" O grfico de Projees  confivel?"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Usa algoritmo Prophet (inteligncia artificial) que aprende com os ltimos ",e.jsx("strong",{children:"30+ dias"})," de dados. Quanto mais histrico, mais preciso. Funciona bem para tendncias, mas no prev eventos inesperados."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:" O Simulador altera meus dados reais?"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"NO!"}),'  apenas uma simulao. Mostra "E se..." ocorressem essas mudanas. Seus dados permanecem intactos.']})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Como interpretar "Dias de Caixa"?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"10 dias"})," = voc pode cobrir ",e.jsx("strong",{children:"10 dias de despesas"})," com saldo atual. Se ",e.jsx("strong",{children:"<7 dias"}),"  crtico (risco iminente). Se ",e.jsx("strong",{children:"7-15"}),"  alerta. Se ",e.jsx("strong",{children:">15"})," est ok."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Qual  a diferena entre "Saldo Atual" e "Saldo Estimado"?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Saldo Atual"})," = saldo real hoje. ",e.jsx("strong",{children:"Saldo Estimado"})," = previso do saldo daqui a X dias (levando em conta receitas/despesas esperadas)."]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Dicas Importantes:"}),e.jsxs("ul",{className:"text-sm text-blue-900 space-y-1",children:[e.jsxs("li",{children:[" Clique em ",e.jsx("strong",{children:'"Atualizar Projeo"'})," para recalcular com dados mais recentes"]}),e.jsx("li",{children:" Os Alertas aparecem automaticamente quando h risco (caixa <7 dias ou tendncia negativa)"}),e.jsx("li",{children:' Use o Simulador para planejar: "E se aumentar despesas de marketing em 20%?"'}),e.jsx("li",{children:" Se tiver menos de 30 dias de histrico, as projees sero mais conservadoras"})]})]})]})]})}function Uwe({userId:t}){const[r,a]=j.useState(!0),[s,n]=j.useState(null),[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState("visao-geral");j.useEffect(()=>{m()},[t]);const m=async()=>{a(!0);try{const b={Authorization:`Bearer ${localStorage.getItem("token")}`},[p,f,v]=await Promise.all([V.get(`/ia/fluxo/indices-saude/${t}`,{headers:b}),V.get(`/ia/fluxo/projecoes/${t}?dias=15`,{headers:b}),V.get(`/ia/fluxo/alertas/${t}`,{headers:b})]);n(p.data),i(f.data||[]),c(v.data||[])}catch(h){console.error("Erro ao carregar dados IA:",h),be.error("Erro ao carregar dados da IA")}finally{a(!1)}},x=async()=>{const h=be.loading("Gerando projeo com Prophet...");try{const p={Authorization:`Bearer ${localStorage.getItem("token")}`};await V.post(`/ia/fluxo/projetar-15-dias/${t}`,{},{headers:p}),be.success("Projeo gerada com sucesso!"),m()}catch(b){console.error("Erro ao gerar projeo:",b),be.error("Erro ao gerar projeo")}finally{be.dismiss(h)}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Vwe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Fluxo de Caixa Preditivo"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Inteligncia artificial analisando seu caixa"})]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Gr,{className:"w-4 h-4"}),"Atualizar Projeo"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>u("visao-geral"),className:`px-4 py-2 font-medium transition-colors ${d==="visao-geral"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Viso Geral"}),e.jsx("button",{onClick:()=>u("projecoes"),className:`px-4 py-2 font-medium transition-colors ${d==="projecoes"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Projees 15 Dias"}),e.jsxs("button",{onClick:()=>u("alertas"),className:`px-4 py-2 font-medium transition-colors relative ${d==="alertas"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Alertas",l.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.length})]}),e.jsx("button",{onClick:()=>u("simulador"),className:`px-4 py-2 font-medium transition-colors ${d==="simulador"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Simulador"})]}),e.jsxs("div",{className:"space-y-6",children:[d==="visao-geral"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Viso Geral:"})," Anlise dos ltimos ",e.jsx("strong",{children:"30 dias"})," para calcular a sade do caixa. Mostra quanto tempo voc consegue manter o negcio com saldo atual."]})}),e.jsx($2e,{indices:s}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Uf,{projecoes:o.slice(0,7),titulo:"Prximos 7 Dias"}),e.jsx(F6,{alertas:l.slice(0,3)})]})]}),d==="projecoes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Projeo 15 Dias:"})," Previso usando inteligncia artificial (Prophet). Baseada em ",e.jsx("strong",{children:"30+ dias de histrico"})," para prever entradas e sadas dos prximos ",e.jsx("strong",{children:"15 dias"}),". Quanto mais histrico, mais precisa a previso."]})}),e.jsx(Uf,{projecoes:o,titulo:"Projeo 15 Dias com Prophet",detalhado:!0})]}),d==="alertas"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Alertas:"})," Avisos automticos gerados em tempo real.",e.jsx("strong",{children:" Crtico"})," = menos de 7 dias de caixa (risco iminente).",e.jsx("strong",{children:" Alerta"})," = 7-15 dias (ateno necessria).",e.jsx("strong",{children:" OK"})," = mais de 15 dias (situao confortvel)."]})}),e.jsx(F6,{alertas:l})]}),d==="simulador"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Simulador:"})," Teste 3 cenrios para os ",e.jsx("strong",{children:"prximos 15 dias"}),".",e.jsx("strong",{children:" Otimista:"})," +20% receita, -10% despesa.",e.jsx("strong",{children:" Realista:"})," sem mudanas.",e.jsx("strong",{children:" Pessimista:"})," -20% receita, +10% despesa.",e.jsx("strong",{children:"Seus dados reais no so alterados!"})]})}),e.jsx(qwe,{userId:t,projecoesBase:o})]})]})]})}function Wwe(){const{user:t}=ou();return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Uwe,{userId:(t==null?void 0:t.id)||1})})}function Hwe(){const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(""),[c,d]=j.useState(!1),[u,m]=j.useState(!1),x=j.useRef(null);j.useEffect(()=>{b()},[]),j.useEffect(()=>{a&&p(a)},[a]),j.useEffect(()=>{h()},[n]);const h=()=>{var y;(y=x.current)==null||y.scrollIntoView({behavior:"smooth"})},b=async()=>{try{const y=await V.get("/chat/conversas");r(y.data)}catch(y){console.error("Erro ao carregar conversas:",y)}},p=async y=>{d(!0);try{const N=await V.get(`/chat/conversa/${y}/mensagens`);o(N.data)}catch(N){console.error("Erro ao carregar mensagens:",N),be.error("Erro ao carregar mensagens")}finally{d(!1)}},f=async()=>{try{const y=await V.post("/chat/nova-conversa",{});r([y.data,...t]),s(y.data.id),o([]),be.success("Nova conversa criada!")}catch(y){console.error("Erro ao criar conversa:",y),be.error("Erro ao criar conversa")}},v=async y=>{if(y.preventDefault(),!i.trim()||!a)return;m(!0);const N=i;l("");try{const _=await V.post("/chat/enviar",{conversa_id:a,mensagem:N});o([...n,{id:_.data.mensagem_usuario.id,tipo:"usuario",conteudo:_.data.mensagem_usuario.conteudo,criado_em:_.data.mensagem_usuario.criado_em},{id:_.data.mensagem_ia.id,tipo:"assistente",conteudo:_.data.mensagem_ia.conteudo,criado_em:_.data.mensagem_ia.criado_em}]),b()}catch(_){console.error("Erro ao enviar mensagem:",_),be.error("Erro ao enviar mensagem"),l(N)}finally{m(!1)}},g=async y=>{if(confirm("Deseja deletar esta conversa?"))try{await V.delete(`/chat/conversa/${y}`),r(t.filter(N=>N.id!==y)),a===y&&(s(null),o([])),be.success("Conversa deletada")}catch(N){console.error("Erro ao deletar conversa:",N),be.error("Erro ao deletar conversa")}};return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Gb,{className:"w-8 h-8 text-blue-600"}),"Chat IA Financeiro"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pergunte sobre seu fluxo de caixa, projees e sade financeira"})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(wn,{className:"w-5 h-5"}),"Nova Conversa"]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Conversas Recentes"}),t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k4,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Nenhuma conversa ainda"}),e.jsx("button",{onClick:f,className:"mt-3 text-blue-600 text-sm hover:underline",children:"Criar primeira conversa"})]}):e.jsx("div",{className:"space-y-2",children:t.map(y=>e.jsx("div",{onClick:()=>s(y.id),className:`p-3 rounded-lg cursor-pointer transition-colors group ${a===y.id?"bg-blue-50 border-2 border-blue-200":"bg-gray-50 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.titulo||"Nova conversa"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.total_mensagens," mensagens"]})]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),g(y.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",children:e.jsx($o,{className:"w-4 h-4"})})]})},y.id))})]})}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(wd,{className:"w-8 h-8 animate-spin text-blue-600"})}):n.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k4,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Inicie a conversa fazendo uma pergunta"}),e.jsxs("div",{className:"mt-4 text-sm space-y-1",children:[e.jsx("p",{className:"text-gray-400",children:"Exemplos:"}),e.jsx("p",{className:"text-blue-600",children:'"Qual  meu saldo atual?"'}),e.jsx("p",{className:"text-blue-600",children:'"Como est minha situao financeira?"'}),e.jsx("p",{className:"text-blue-600",children:'"H algum alerta?"'})]})]})}):n.map(y=>e.jsx("div",{className:`flex ${y.tipo==="usuario"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-3 max-w-3xl ${y.tipo==="usuario"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${y.tipo==="usuario"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:y.tipo==="usuario"?e.jsx(jh,{className:"w-5 h-5"}):e.jsx(Gb,{className:"w-5 h-5"})}),e.jsx("div",{className:`px-4 py-3 rounded-lg ${y.tipo==="usuario"?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:y.conteudo})})]})},y.id)),e.jsx("div",{ref:x})]}),e.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:e.jsxs("form",{onSubmit:v,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:y=>l(y.target.value),placeholder:"Digite sua pergunta...",disabled:u,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),e.jsx("button",{type:"submit",disabled:u||!i.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:u?e.jsx(wd,{className:"w-5 h-5 animate-spin"}):e.jsx(oP,{className:"w-5 h-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gb,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione ou crie uma conversa"}),e.jsx("p",{className:"text-sm mt-2",children:"Faa perguntas sobre seu fluxo de caixa e receba anlises inteligentes"})]})})})]})]})}const $6=t=>{let r;const a=new Set,s=(d,u)=>{const m=typeof d=="function"?d(r):d;if(!Object.is(m,r)){const x=r;r=u??(typeof m!="object"||m===null)?m:Object.assign({},r,m),a.forEach(h=>h(r,x))}},n=()=>r,l={setState:s,getState:n,getInitialState:()=>c,subscribe:d=>(a.add(d),()=>a.delete(d))},c=r=t(s,n,l);return l},Kwe=t=>t?$6(t):$6,Gwe=t=>t;function Xwe(t,r=Gwe){const a=pe.useSyncExternalStore(t.subscribe,pe.useCallback(()=>r(t.getState()),[t,r]),pe.useCallback(()=>r(t.getInitialState()),[t,r]));return pe.useDebugValue(a),a}const Ywe=t=>{const r=Kwe(t),a=s=>Xwe(r,s);return Object.assign(a,r),a},Qwe=t=>Ywe,Jr="/whatsapp",Ys={async getConfig(){return(await Ot.get(`${Jr}/config`)).data},async getStats(){return(await Ot.get(`${Jr}/analytics/dashboard`)).data},async getAgents(){return(await Ot.get(`${Jr}/agents`)).data},async createAgent(t){return(await Ot.post(`${Jr}/agents`,t)).data},async getAgent(t){return(await Ot.get(`${Jr}/agents/${t}`)).data},async updateAgent(t,r){return(await Ot.put(`${Jr}/agents/${t}`,r)).data},async deleteAgent(t){await Ot.delete(`${Jr}/agents/${t}`)},async getHandoffs(t){const r=t?{status:t}:{};return(await Ot.get(`${Jr}/handoffs/pending`,{params:r})).data},async createHandoff(t){return(await Ot.post(`${Jr}/handoffs`,t)).data},async getHandoff(t){return(await Ot.get(`${Jr}/handoffs/${t}`)).data},async assignHandoff(t,r){return(await Ot.post(`${Jr}/handoffs/${t}/assign`,{agent_id:r})).data},async resolveHandoff(t,r){await Ot.post(`${Jr}/handoffs/${t}/resolve`,{resolution_notes:r})},async cancelHandoff(t){await Ot.post(`${Jr}/handoffs/${t}/cancel`)},async getNotes(t){return(await Ot.get(`${Jr}/handoffs/${t}/notes`)).data},async addNote(t,r){return(await Ot.post(`${Jr}/handoffs/${t}/notes`,{content:r})).data},async getMessages(t){return(await Ot.get(`${Jr}/sessions/${t}/messages`)).data},async sendMessage(t,r){return(await Ot.post(`${Jr}/messages`,{session_id:t,message:r})).data},async createSession(t){return(await Ot.post(`${Jr}/sessions`,t)).data},async getSession(t){return(await Ot.get(`${Jr}/sessions/${t}`)).data},async testSentiment(t){return(await Ot.post(`${Jr}/sentiment/test`,{text:t})).data}},h0=Qwe()((t,r)=>({stats:null,isLoadingStats:!1,agents:[],currentAgent:null,isLoadingAgents:!1,handoffs:[],activeHandoff:null,isLoadingHandoffs:!1,filterStatus:"all",messages:{},isLoadingMessages:{},isConnected:!1,isSidebarOpen:!0,isBotAssistOpen:!1,notifications:[],fetchStats:async()=>{if(r().isLoadingStats){console.log(" Stats already loading, skipping...");return}console.log(" Fetching stats..."),t({isLoadingStats:!0});const s=new Promise((n,o)=>setTimeout(()=>o(new Error("Stats timeout")),1e4));try{const n=await Promise.race([Ys.getStats(),s]);console.log(" Stats received:",n),t({stats:n,isLoadingStats:!1})}catch(n){console.error(" Error fetching stats:",n),t({isLoadingStats:!1})}},fetchAgents:async()=>{t({isLoadingAgents:!0});try{const a=await Ys.getAgents();t({agents:a,isLoadingAgents:!1})}catch(a){console.error("Error fetching agents:",a),t({isLoadingAgents:!1})}},initializeCurrentAgent:async()=>{try{console.log(" Initializing current agent...");const a=localStorage.getItem("user");if(!a){console.warn(" No user found in localStorage");return}const s=JSON.parse(a);console.log(" User loaded:",s.email);const n=await Ys.getAgents();console.log(" Agents fetched:",n.length);let o=n.find(i=>i.user_id===s.id);o?(console.log(" Updating existing agent to online..."),o=await Ys.updateAgent(o.id,{status:"online"}),console.log(" Agent set to online:",o.id)):(console.log(" Creating new agent..."),o=await Ys.createAgent({name:s.name||s.email,email:s.email,status:"online",max_concurrent_chats:5,auto_assign:!0,receive_notifications:!0}),console.log(" Created new agent:",o.id)),t({currentAgent:o}),console.log(" Current agent initialized")}catch(a){console.error(" Error initializing current agent:",a)}},updateAgentStatus:async a=>{const{currentAgent:s}=r();if(s)try{const n=await Ys.updateAgent(s.id,{status:a});t({currentAgent:n}),t(o=>({agents:o.agents.map(i=>i.id===n.id?n:i)}))}catch(n){console.error("Error updating agent status:",n)}},fetchHandoffs:async a=>{t({isLoadingHandoffs:!0});try{const s=await Ys.getHandoffs(a);t({handoffs:s,isLoadingHandoffs:!1})}catch(s){console.error("Error fetching handoffs:",s),t({isLoadingHandoffs:!1})}},setFilterStatus:a=>{t({filterStatus:a});const s={all:void 0,pending:"pending",active:"active",my:"active"};r().fetchHandoffs(s[a])},takeHandoff:async a=>{const{currentAgent:s}=r();if(s)try{const n=await Ys.assignHandoff(a,s.id);t(o=>({handoffs:o.handoffs.map(i=>i.id===n.id?n:i)})),t({activeHandoff:n}),r().addNotification({type:"success",title:"Conversa assumida",message:`Voc assumiu a conversa com ${n.customer_name||n.phone_number}`,timestamp:new Date().toISOString()})}catch(n){console.error("Error taking handoff:",n),r().addNotification({type:"error",title:"Erro",message:"No foi possvel assumir a conversa",timestamp:new Date().toISOString()})}},resolveHandoff:async(a,s)=>{try{await Ys.resolveHandoff(a,s),t(n=>{var o;return{handoffs:n.handoffs.filter(i=>i.id!==a),activeHandoff:((o=n.activeHandoff)==null?void 0:o.id)===a?null:n.activeHandoff}}),r().addNotification({type:"success",title:"Conversa resolvida",message:"A conversa foi finalizada com sucesso",timestamp:new Date().toISOString()}),r().fetchStats()}catch(n){console.error("Error resolving handoff:",n),r().addNotification({type:"error",title:"Erro",message:"No foi possvel resolver a conversa",timestamp:new Date().toISOString()})}},setActiveHandoff:a=>{t({activeHandoff:a})},fetchMessages:async a=>{t(s=>({isLoadingMessages:{...s.isLoadingMessages,[a]:!0}}));try{const s=await Ys.getMessages(a);t(n=>({messages:{...n.messages,[a]:s},isLoadingMessages:{...n.isLoadingMessages,[a]:!1}}))}catch(s){console.error("Error fetching messages:",s),t(n=>({isLoadingMessages:{...n.isLoadingMessages,[a]:!1}}))}},sendMessage:async(a,s)=>{try{const n=await Ys.sendMessage(a,s);t(o=>({messages:{...o.messages,[a]:[...o.messages[a]||[],n]}}))}catch(n){console.error("Error sending message:",n),r().addNotification({type:"error",title:"Erro ao enviar",message:"No foi possvel enviar a mensagem",timestamp:new Date().toISOString()})}},addMessage:(a,s)=>{t(n=>({messages:{...n.messages,[a]:[...n.messages[a]||[],s]}}))},setConnected:a=>t({isConnected:a}),toggleSidebar:()=>t(a=>({isSidebarOpen:!a.isSidebarOpen})),toggleBotAssist:()=>t(a=>({isBotAssistOpen:!a.isBotAssistOpen})),addNotification:a=>{const s=Math.random().toString(36).substring(7);t(n=>({notifications:[...n.notifications,{...a,id:s}]})),setTimeout(()=>{r().removeNotification(s)},5e3)},removeNotification:a=>{t(s=>({notifications:s.notifications.filter(n=>n.id!==a)}))}}));class Jwe{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.reconnectTimeout=null,this.pingInterval=null,this.agentId=null,this.token=null,this.handlers={},this.onConnectionChange=null,this.onMaxReconnectAttemptsReached=null}connect(r,a){var i;if(((i=this.ws)==null?void 0:i.readyState)===WebSocket.OPEN){console.log("WebSocket already connected");return}this.token=r,this.agentId=a;const o=`${"/api".replace("http://","ws://").replace("https://","wss://")}/ws/whatsapp/${a}?token=${r}`;console.log(" Connecting to WebSocket:",o);try{this.ws=new WebSocket(o),this.setupEventListeners()}catch(l){console.error("Error creating WebSocket:",l),this.handleReconnect()}}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.ws&&(this.ws.readyState===WebSocket.OPEN&&this.send({event:"leave_agent_room"}),this.ws.close(),this.ws=null),this.reconnectAttempts=0,this.token=null,this.agentId=null}setupEventListeners(){this.ws&&(this.ws.onopen=()=>{console.log(" WebSocket connected"),this.reconnectAttempts=0,this.onConnectionChange&&this.onConnectionChange(!0),this.send({event:"join_agent_room"}),this.pingInterval=window.setInterval(()=>{var r;((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN&&this.send({event:"ping"})},3e4)},this.ws.onclose=r=>{console.log(" WebSocket disconnected:",r.code,r.reason),this.onConnectionChange&&this.onConnectionChange(!1),r.code!==1e3&&this.handleReconnect()},this.ws.onerror=r=>{console.error("WebSocket error:",r)},this.ws.onmessage=r=>{try{const a=JSON.parse(r.data);this.handleMessage(a)}catch(a){console.error("Error parsing WebSocket message:",a)}})}handleMessage(r){const{event:a,data:s}=r;switch(console.log(" WebSocket message:",a,s),a){case"connected":console.log("Connection confirmed:",s);break;case"new_handoff":this.handlers.onNewHandoff&&this.handlers.onNewHandoff(s);break;case"handoff_assigned":this.handlers.onHandoffAssigned&&this.handlers.onHandoffAssigned(s);break;case"handoff_resolved":this.handlers.onHandoffResolved&&this.handlers.onHandoffResolved(s.handoff_id);break;case"new_message":this.handlers.onNewMessage&&this.handlers.onNewMessage(s.session_id,s.message);break;case"agent_status_change":this.handlers.onAgentStatusChange&&this.handlers.onAgentStatusChange(s);break;case"typing_indicator":this.handlers.onTypingIndicator&&this.handlers.onTypingIndicator(s.session_id,s.is_typing);break;default:console.warn("Unknown WebSocket event:",a)}}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.onMaxReconnectAttemptsReached&&this.onMaxReconnectAttemptsReached();return}this.reconnectAttempts++;const r=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${r}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),this.reconnectTimeout=setTimeout(()=>{this.token&&this.agentId&&this.connect(this.token,this.agentId)},r)}send(r){var a;((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(r)):console.warn("WebSocket is not open. Cannot send message:",r)}registerHandlers(r){this.handlers=r}joinAgentRoom(r){this.send({event:"join_agent_room",data:{agent_id:r}})}leaveAgentRoom(r){this.send({event:"leave_agent_room",data:{agent_id:r}})}sendTypingIndicator(r,a){this.send({event:"typing",data:{session_id:r,is_typing:a}})}isConnected(){var r;return((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN}getSocketId(){return this.agentId}}const uo=new Jwe,Zwe=(t,r)=>{const[a,s]=j.useState(!1),{addNotification:n,fetchHandoffs:o,setConnected:i,addMessage:l,fetchStats:c}=h0();return j.useEffect(()=>{if(!(!t||!r||a))return s(!0),console.log(" useSocket: Initializing WebSocket connection..."),uo.onConnectionChange=d=>{i(d),n(d?{type:"success",title:"Conectado",message:"Conexo com servidor estabelecida",timestamp:new Date().toISOString()}:{type:"warning",title:"Desconectado",message:"Tentando reconectar ao servidor...",timestamp:new Date().toISOString()})},uo.onMaxReconnectAttemptsReached=()=>{n({type:"error",title:"Erro de Conexo",message:"No foi possvel conectar ao servidor. Recarregue a pgina.",timestamp:new Date().toISOString()})},uo.registerHandlers({onNewHandoff:d=>{console.log(" New handoff received:",d),o(),n({type:"info",title:"Nova Conversa",message:`${d.customer_name||d.phone_number} precisa de ajuda`,timestamp:new Date().toISOString()}),Q$("Nova Conversa - WhatsApp",`${d.customer_name||d.phone_number} - ${d.reason}`,d.priority),(d.priority==="urgent"||d.priority==="high")&&D6()},onHandoffAssigned:d=>{console.log(" Handoff assigned:",d),o(),d.assigned_agent_id===r&&n({type:"success",title:"Conversa Atribuda",message:`Voc foi atribudo  conversa com ${d.customer_name||d.phone_number}`,timestamp:new Date().toISOString()})},onHandoffResolved:d=>{console.log(" Handoff resolved:",d),o(),c()},onNewMessage:(d,u)=>{console.log(" New message:",d,u),l(d,u),u.sender_type==="customer"&&(n({type:"info",title:"Nova Mensagem",message:u.content.substring(0,50)+"...",timestamp:new Date().toISOString()}),D6("message"))},onAgentStatusChange:d=>{console.log(" Agent status changed:",d),c()},onTypingIndicator:(d,u)=>{console.log(" Typing indicator:",d,u)}}),uo.connect(t,r),()=>{uo.disconnect()}},[t,r]),{isConnected:uo.isConnected(),socketId:uo.getSocketId(),sendTypingIndicator:uo.sendTypingIndicator.bind(uo)}};function Q$(t,r,a){if(!("Notification"in window)){console.warn("Browser does not support notifications");return}if(Notification.permission==="granted"){const s=new Notification(t,{body:r,icon:"/logo192.png",badge:"/logo192.png",tag:"whatsapp-notification",requireInteraction:a==="urgent",silent:!1});s.onclick=()=>{window.focus(),s.close()},setTimeout(()=>s.close(),1e4)}else Notification.permission!=="denied"&&Notification.requestPermission().then(s=>{s==="granted"&&Q$(t,r,a)})}function D6(t="handoff"){try{const r=new Audio(t==="handoff"?"/sounds/notification-handoff.mp3":"/sounds/notification-message.mp3");r.volume=.5,r.play().catch(a=>{console.warn("Could not play notification sound:",a)})}catch(r){console.warn("Error playing sound:",r)}}class e_e extends j.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){console.error("ErrorBoundary caught an error:",r,a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Algo deu errado"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Ocorreu um erro inesperado. Por favor, recarregue a pgina."}),this.state.error&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded border border-gray-200",children:e.jsx("p",{className:"text-xs font-mono text-gray-700 break-words",children:this.state.error.message})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Recarregar Pgina"})]})}):this.props.children}}const t_e=j.memo(({stats:t,isLoading:r})=>{if(r)return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[...Array(6)].map((s,n)=>e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},n))});if(!t)return null;const a=[{label:"Total",value:t.total_handoffs,icon:"",color:"bg-blue-50 text-blue-700"},{label:"Aguardando",value:t.pending_count,icon:"",color:"bg-yellow-50 text-yellow-700"},{label:"Ativas",value:t.active_count,icon:"",color:"bg-green-50 text-green-700"},{label:"Resolvidas",value:t.resolved_count,icon:"",color:"bg-gray-50 text-gray-700"},{label:"Agentes Online",value:t.available_agents||0,icon:"",color:"bg-purple-50 text-purple-700"},{label:"Tempo Mdio",value:t.avg_response_time_seconds?Math.round(t.avg_response_time_seconds/60)+"min":"0min",icon:"",color:"bg-orange-50 text-orange-700"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:a.map((s,n)=>e.jsxs("div",{className:`rounded-lg p-4 ${s.color}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("p",{className:"text-xs font-medium opacity-75",children:s.label})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.value})]},n))})}),r_e=j.memo(({agents:t,isLoading:r})=>{const{currentAgent:a,updateAgentStatus:s}=h0(),n={online:"bg-green-500",busy:"bg-yellow-500",away:"bg-orange-500",offline:"bg-gray-400"},o={online:"Online",busy:"Ocupado",away:"Ausente",offline:"Offline"};return r?e.jsx("div",{className:"space-y-2",children:[...Array(3)].map((i,l)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-1"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]},l))}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:["Agentes (",t.length,")"]}),t.map(i=>e.jsxs("div",{className:`
            flex items-center gap-3 p-2 rounded-lg transition-colors
            ${(a==null?void 0:a.id)===i.id?"bg-blue-50":"hover:bg-gray-50"}
          `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n[i.status]}`}),i.status==="online"&&e.jsx("div",{className:`absolute inset-0 w-2 h-2 rounded-full ${n[i.status]} animate-ping opacity-75`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:o[i.status]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[i.current_chats,"/",i.max_concurrent_chats]})]})]}),(a==null?void 0:a.id)===i.id&&e.jsxs("select",{value:i.status,onChange:l=>s(l.target.value),className:"text-xs border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"busy",children:"Ocupado"}),e.jsx("option",{value:"away",children:"Ausente"}),e.jsx("option",{value:"offline",children:"Offline"})]})]},i.id)),t.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum agente disponvel"})]})}),a_e=j.memo(({handoffs:t,activeHandoff:r,isLoading:a})=>{const{setActiveHandoff:s,takeHandoff:n}=h0(),o={urgent:"bg-red-100 text-red-700 border-red-200",high:"bg-orange-100 text-orange-700 border-orange-200",medium:"bg-yellow-100 text-yellow-700 border-yellow-200",low:"bg-gray-100 text-gray-700 border-gray-200"},i={urgent:" Urgente",high:" Alta",medium:" Mdia",low:" Baixa"},l={pending:"",active:"",resolved:"",cancelled:""};return a?e.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((c,d)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma conversa"})]})}):e.jsx("div",{className:"p-4 space-y-3",children:t.map(c=>{const d=(r==null?void 0:r.id)===c.id,u=c.status==="pending";return e.jsx("div",{onClick:()=>s(c),className:`
              border rounded-lg p-3 cursor-pointer transition-all
              ${d?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}
            `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center text-lg font-semibold
                ${o[c.priority]}
              `,children:c.customer_name?c.customer_name.charAt(0).toUpperCase():""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:c.customer_name||"Cliente"}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:XNe(new Date(c.created_at),{addSuffix:!0,locale:bw})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:c.phone_number}),e.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:c.reason_details||c.reason}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`
                    text-xs px-2 py-1 rounded border
                    ${o[c.priority]}
                  `,children:i[c.priority]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:l[c.status]}),u&&e.jsx("button",{onClick:m=>{m.stopPropagation(),n(c.id)},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Assumir"})]})]})]})]})},c.id)})})}),s_e=({handoff:t})=>{const{messages:r,isLoadingMessages:a,fetchMessages:s,sendMessage:n,resolveHandoff:o,toggleBotAssist:i}=h0(),[l,c]=j.useState(""),[d,u]=j.useState(!1),[m,x]=j.useState(""),h=j.useRef(null),b=r[t.session_id]||[],p=a[t.session_id]||!1;j.useEffect(()=>{t.session_id&&s(t.session_id)},[t.session_id]),j.useEffect(()=>{var N;(N=h.current)==null||N.scrollIntoView({behavior:"smooth"})},[b]);const f=async()=>{l.trim()&&(await n(t.session_id,l),c(""))},v=async()=>{if(!m.trim()){alert("Por favor, adicione notas de resoluo");return}await o(t.id,m),u(!1),x("")},g=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),f())},y={urgent:"border-red-500 bg-red-50",high:"border-orange-500 bg-orange-50",medium:"border-yellow-500 bg-yellow-50",low:"border-gray-500 bg-gray-50"};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`border-b-4 ${y[t.priority]} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-lg font-semibold",children:t.customer_name?t.customer_name.charAt(0).toUpperCase():""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.customer_name||"Cliente"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.phone_number})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white hover:shadow transition-all",title:"Bot Assist",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),t.status==="active"&&e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Resolver"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Motivo:"})," ",t.reason]}),t.reason_details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.reason_details})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:p?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando mensagens..."})]})}):b.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma mensagem ainda"})]})}):e.jsxs(e.Fragment,{children:[b.map(N=>{const _=N.sender_type==="agent";return N.sender_type==="system"?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full",children:N.content})},N.id):e.jsx("div",{className:`flex ${_?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${_?"order-2":"order-1"}`,children:[e.jsx("div",{className:`
                      rounded-lg px-4 py-2
                      ${_?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}
                    `,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:N.content})}),e.jsx("p",{className:`text-xs text-gray-500 mt-1 ${_?"text-right":"text-left"}`,children:G$(new Date(N.timestamp),"HH:mm",{locale:bw})})]})},N.id)}),e.jsx("div",{ref:h})]})}),t.status==="active"&&!d&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:l,onChange:N=>c(N.target.value),onKeyPress:g,placeholder:"Digite sua mensagem...",rows:3,className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:f,disabled:!l.trim(),className:"px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:"Enviar"})]})}),d&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resolver Conversa"}),e.jsx("textarea",{value:m,onChange:N=>x(N.target.value),placeholder:"Descreva como foi resolvido o atendimento...",rows:4,className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>{u(!1),x("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:v,disabled:!m.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Confirmar Resoluo"})]})]})})]})},n_e=({handoff:t})=>{const[r,a]=j.useState(""),[s,n]=j.useState(null),[o,i]=j.useState(!1),l=async()=>{if(r.trim()){i(!0);try{const d=await Ys.testSentiment(r);n(d)}catch(d){console.error("Error analyzing sentiment:",d)}finally{i(!1)}}},c=["Entendo sua frustrao. Vou verificar isso imediatamente.","Obrigado por aguardar. Estou analisando sua solicitao.","Vou encaminhar para o setor responsvel e retorno em breve.","Consegui resolver! Precisa de mais alguma coisa?"];return t?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bot Assist "}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Anlise de sentimento e sugestes"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Analisar Sentimento"}),e.jsx("textarea",{value:r,onChange:d=>a(d.target.value),placeholder:"Cole uma mensagem do cliente...",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:l,disabled:!r.trim()||o,className:"mt-2 w-full px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:o?"Analisando...":"Analisar"}),s&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Score:"}),e.jsx("span",{className:`text-sm font-bold ${s.score>0?"text-green-600":s.score<0?"text-red-600":"text-gray-600"}`,children:s.score.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Label:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.label})]}),s.emotions.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Emoes:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.emotions.map((d,u)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:d},u))})]}),s.triggers.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Gatilhos:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.triggers.map((d,u)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded",children:d},u))})]}),s.should_handoff&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:" Recomenda handoff humano"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Respostas Sugeridas"}),e.jsx("div",{className:"space-y-2",children:c.map((d,u)=>e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(d)},className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 text-sm text-gray-700 transition-colors",children:d},u))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Aes Rpidas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full px-4 py-2 bg-orange-50 text-orange-700 border border-orange-200 rounded-lg text-sm font-medium hover:bg-orange-100 transition-colors",children:" Ver histrico completo"}),e.jsx("button",{className:"w-full px-4 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded-lg text-sm font-medium hover:bg-purple-100 transition-colors",children:" Anlise de perfil"}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:" Criar ticket"})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Selecione uma conversa para ver sugestes"})})},o_e=({notification:t,onClose:r})=>{const[a,s]=j.useState(!1);j.useEffect(()=>{const i=setTimeout(()=>{s(!0),setTimeout(r,300)},5e3);return()=>clearTimeout(i)},[r]);const n={info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800"},o={info:"",success:"",warning:"",error:""};return e.jsx("div",{className:`
        max-w-sm w-full bg-white border-2 rounded-lg shadow-lg p-4
        transform transition-all duration-300 ease-out
        ${a?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
        ${n[t.type]}
      `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:o[t.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-sm opacity-90",children:t.message})]}),e.jsx("button",{onClick:()=>{s(!0),setTimeout(r,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},i_e=j.memo(({isConnected:t,socketId:r})=>e.jsxs("div",{className:`
      flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium
      ${t?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
    `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`
          w-2 h-2 rounded-full
          ${t?"bg-green-500":"bg-red-500"}
        `}),t&&e.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-500 rounded-full animate-ping opacity-75"})]}),e.jsx("span",{children:t?"Online":"Desconectado"}),t&&r&&e.jsxs("span",{className:"text-[10px] opacity-50 font-mono",title:`Socket ID: ${r}`,children:[" ",r.substring(0,6)]})]})),l_e=()=>{const[t,r]=j.useState("default"),[a,s]=j.useState(!1);j.useEffect(()=>{"Notification"in window&&(r(Notification.permission),Notification.permission==="default"&&s(!0))},[]);const n=async()=>{if("Notification"in window){const o=await Notification.requestPermission();r(o),o==="granted"&&(s(!1),new Notification("Notificaes Ativadas",{body:"Voc receber alertas de novas conversas",icon:"/logo192.png"}))}};return!a||t==="granted"?null:e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Ativar Notificaes"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Receba alertas instantneos quando novas conversas precisarem de atendimento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Ativar Notificaes"}),e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-white text-blue-700 text-sm font-medium rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors",children:"Agora No"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"flex-shrink-0 text-blue-400 hover:text-blue-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},c_e=()=>{const[t,r]=pe.useState(!0);console.log(" WhatsAppDashboard component rendering...");const{stats:a,agents:s,handoffs:n,activeHandoff:o,filterStatus:i,isLoadingStats:l,isLoadingAgents:c,isLoadingHandoffs:d,isSidebarOpen:u,isBotAssistOpen:m,isConnected:x,notifications:h,currentAgent:b,fetchStats:p,fetchAgents:f,fetchHandoffs:v,initializeCurrentAgent:g,setFilterStatus:y,toggleSidebar:N,removeNotification:_}=h0(),w=localStorage.getItem("access_token"),{socketId:S}=Zwe(w,(b==null?void 0:b.id)||null);return j.useEffect(()=>{let C=!0,k=!1,F=null,q=!1;const A=async()=>{if(!(!C||k)){k=!0;try{console.log(" Initializing WhatsApp Dashboard...");const K=new Promise((I,Y)=>setTimeout(()=>Y(new Error("Initialization timeout")),15e3));try{await Promise.race([Promise.all([g(),p(),f(),v()]),K])}catch(I){console.warn(" Initialization timeout, continuing anyway:",I)}console.log(" Dashboard initialized")}catch(K){console.error(" Error initializing dashboard:",K)}finally{C&&r(!1)}}},T=async()=>{if(!(q||!C)){if(document.hidden){console.log(" Page hidden, skipping refresh");return}q=!0,console.log(" Refreshing dashboard data...");try{await Promise.all([p(),v(i==="all"?void 0:i)])}catch(K){console.error("Error refreshing data:",K)}finally{q=!1}}};A(),F=setInterval(T,6e4);const U=()=>{!document.hidden&&C&&(console.log(" Page visible again, refreshing data"),T())};return document.addEventListener("visibilitychange",U),()=>{C=!1,F&&clearInterval(F),document.removeEventListener("visibilitychange",U)}},[]),t?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando WhatsApp Dashboard..."})]})}):e.jsx(e_e,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",role:"main","aria-label":"WhatsApp Dashboard",children:[e.jsx("div",{className:`
        transition-all duration-300 ease-in-out
        ${u?"w-80":"w-0"}
        border-r border-gray-200 bg-white overflow-hidden
      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Atendimento WhatsApp"}),e.jsx("div",{className:"mt-2",children:e.jsx(i_e,{isConnected:x,socketId:S})})]}),e.jsx("button",{onClick:N,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Recolher painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","active","my"].map(C=>e.jsxs("button",{onClick:()=>y(C),className:`
                    px-3 py-1.5 rounded-lg text-sm font-medium transition-colors
                    ${i===C?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                  `,children:[C==="all"&&"Todas",C==="pending"&&"Aguardando",C==="active"&&"Ativas",C==="my"&&"Minhas"]},C))})]}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx(r_e,{agents:s,isLoading:c})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(a_e,{handoffs:n,activeHandoff:o,isLoading:d})})]})}),!u&&e.jsx("button",{onClick:N,className:"absolute top-4 left-4 z-10 p-2 bg-white rounded-lg shadow-lg hover:bg-gray-50 transition-colors",title:"Expandir painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(l_e,{})}),e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(t_e,{stats:a,isLoading:l})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1",children:o?e.jsx(s_e,{handoff:o}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione uma conversa"}),e.jsx("p",{className:"text-sm mt-1",children:"Escolha uma conversa da fila para comear"})]})})}),m&&e.jsx("div",{className:"w-80 border-l border-gray-200 bg-white",children:e.jsx(n_e,{handoff:o})})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:h.map(C=>e.jsx(o_e,{notification:C,onClose:()=>_(C.id)},C.id))})]})})},d_e=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState(!1),[b,p]=j.useState(null);j.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0);const N=await V.get("/comissoes/configuracoes/funcionarios");N.data.success&&r(N.data.data)}catch(N){console.error("Erro ao carregar funcionrios:",N),p("Erro ao carregar funcionrios com comisses")}finally{s(!1)}},v=async(N=null)=>{l(N),o(!0),h(!0);try{const _=await V.get("/comissoes/arvore-produtos");if(_.data.success&&m(_.data.data),N){const w=await V.get(`/comissoes/configuracoes/funcionario/${N}`);w.data.success&&d(w.data.data)}}catch(_){console.error("Erro ao carregar dados:",_),p("Erro ao carregar dados de configurao")}finally{h(!1)}},g=()=>{o(!1),l(null),d([]),m([]),f()},y=async N=>{const _=prompt("Digite o ID do funcionrio de destino:");if(_)try{const w=await V.post("/comissoes/configuracoes/duplicar",{funcionario_origem_id:parseInt(N),funcionario_destino_id:parseInt(_)});w.data.success&&(alert(w.data.message),f())}catch(w){console.error("Erro ao duplicar configurao:",w),alert("Erro ao duplicar configurao")}};return a?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastro de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie as comisses dos funcionrios"})]}),e.jsxs("button",{onClick:()=>v(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx("span",{children:"+"}),"Nova Comisso"]})]})}),b&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:b}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:"Nenhuma comisso configurada"}),e.jsx("p",{className:"text-sm",children:'Clique em "Nova Comisso" para comear'})]}):e.jsx("div",{className:"divide-y",children:t.map(N=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>v(N.id),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:N.nome.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:N.nome}),e.jsx("p",{className:"text-sm text-gray-500",children:N.cargo})]})]}),e.jsxs("div",{className:"mt-2 flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[e.jsx("strong",{children:N.categorias})," categorias"]}),e.jsxs("span",{children:[e.jsx("strong",{children:N.subcategorias})," subcategorias"]}),e.jsxs("span",{children:[e.jsx("strong",{children:N.produtos})," produtos especficos"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),v(N.id)},className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded",children:"Editar"}),e.jsx("button",{onClick:_=>{_.stopPropagation(),y(N.id)},className:"px-3 py-1 text-gray-600 hover:bg-gray-100 rounded",title:"Duplicar configurao para outro funcionrio",children:"Duplicar"})]})]})},N.id))})}),n&&e.jsx(u_e,{funcionarioId:i,configuracoes:c,arvoreProdutos:u,loading:x,onClose:g,onSave:()=>{f(),g()}})]})},u_e=({funcionarioId:t,configuracoes:r,arvoreProdutos:a,loading:s,onClose:n,onSave:o})=>{const[i,l]=j.useState([]),[c,d]=j.useState(t||""),[u,m]=j.useState(""),[x,h]=j.useState({desconta_taxa_cartao:!0,desconta_impostos:!0,desconta_taxa_entrega:!1,comissao_venda_parcial:!0}),[b,p]=j.useState({}),[f,v]=j.useState({}),[g,y]=j.useState(null),[N,_]=j.useState([]),[w,S]=j.useState(!1),[C,k]=j.useState({atual:0,total:0}),[F,q]=j.useState(null);j.useEffect(()=>{A()},[]),j.useEffect(()=>{const L={};if(r.forEach(E=>{const M=`${E.tipo}-${E.referencia_id}`;L[M]=E}),v(L),r.length>0){const E=r[0],M={desconta_taxa_cartao:E.desconta_taxa_cartao??!0,desconta_impostos:E.desconta_impostos??!0,desconta_taxa_entrega:E.desconta_custo_entrega??!1,comissao_venda_parcial:E.comissao_venda_parcial??!0};h(M),q(M)}},[r]);const A=async()=>{try{const L=await V.get("/comissoes/funcionarios");if(L.data.success&&(l(L.data.data),t)){const E=L.data.data.find(M=>M.id===parseInt(t));E&&E.data_fechamento_comissao&&m(String(E.data_fechamento_comissao))}}catch(L){console.error("Erro ao carregar funcionrios:",L)}},T=L=>{p(E=>({...E,[L]:!E[L]}))},U=(L,E,M)=>{const z=`${L}-${E}`,le=f[z];y({tipo:L,id:E,nome:M,tipo_calculo:(le==null?void 0:le.tipo_calculo)||"percentual",percentual:(le==null?void 0:le.percentual)||10,percentual_loja:(le==null?void 0:le.percentual_loja)||50,permite_edicao_venda:(le==null?void 0:le.permite_edicao_venda)||!1,observacoes:(le==null?void 0:le.observacoes)||""})},K=()=>{if(!c){alert("Selecione um funcionrio");return}if(!g){alert("Selecione um item para configurar");return}if(N.some(M=>M.tipo===g.tipo&&M.referencia_id===g.id)){alert("Este item j foi adicionado  lista!");return}if(g.tipo==="categoria"&&N.some(z=>(z.tipo==="subcategoria"||z.tipo==="produto")&&z.nome.includes(g.nome))&&!confirm(` ATENO: Voc j configurou produtos/subcategorias desta categoria.

HIERARQUIA: Produto > Subcategoria > Categoria

A configurao mais especfica tem prioridade.

Deseja adicionar mesmo assim?`))return;const E={tipo:g.tipo,referencia_id:g.id,nome:g.nome,tipo_calculo:g.tipo_calculo,percentual:parseFloat(g.percentual)||0,percentual_loja:g.tipo_calculo==="lucro"?parseFloat(g.percentual_loja)||0:null,permite_edicao_venda:g.permite_edicao_venda||!1,observacoes:g.observacoes||""};_([...N,E]),y(null),alert('Configurao adicionada! Configure mais itens ou clique em "Salvar Todas"')},I=L=>{_(N.filter((E,M)=>M!==L))},Y=async()=>{var L,E,M;if(!c){alert("Selecione um funcionrio");return}if(N.length===0){alert("Adicione pelo menos uma configurao");return}S(!0);try{u&&await V.put(`/funcionarios/${c}`,{data_fechamento_comissao:parseInt(u)});const z=N.map(Q=>({funcionario_id:parseInt(c),tipo:Q.tipo,referencia_id:Q.referencia_id,tipo_calculo:Q.tipo_calculo,percentual:parseFloat(Q.percentual)||0,percentual_loja:Q.percentual_loja?parseFloat(Q.percentual_loja):null,permite_edicao_venda:Q.permite_edicao_venda||!1,observacoes:Q.observacoes||"",desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_taxa_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial}));console.log("Enviando configuraes em batch:",z);const le=await V.post("/comissoes/configuracoes/batch",{configuracoes:z});if(console.log("Resposta do servidor:",le.data),le.data.success){if(alert(` ${le.data.total} configuraes salvas com sucesso!`),_([]),c)try{const Q=await V.get(`/comissoes/configuracoes/funcionario/${c}`);if(Q.data.success){const ne={};Q.data.data.forEach(re=>{const ae=`${re.tipo}-${re.referencia_id}`;ne[ae]=re}),v(ne)}}catch(Q){console.error("Erro ao recarregar configuraes:",Q)}o()}}catch(z){console.error("Erro ao salvar configuraes:",z),console.error("Resposta do servidor:",(L=z.response)==null?void 0:L.data);const le=((M=(E=z.response)==null?void 0:E.data)==null?void 0:M.detail)||z.message||"Erro desconhecido";alert(` Erro ao salvar configuraes:

${le}`)}finally{S(!1),k({atual:0,total:0})}},D=async()=>{if(!c){alert("Selecione um funcionrio");return}if(!g){if(Object.keys(f).length===0){alert("Nenhuma configurao encontrada para atualizar as regras.");return}if(!(F&&(x.desconta_taxa_cartao!==F.desconta_taxa_cartao||x.desconta_impostos!==F.desconta_impostos||x.desconta_taxa_entrega!==F.desconta_taxa_entrega||x.comissao_venda_parcial!==F.comissao_venda_parcial))){alert("Nenhuma alterao detectada nas regras.");return}if(!confirm("Deseja atualizar as regras de clculo em TODAS as configuraes deste funcionrio?"))return;try{console.log(" SALVANDO REGRAS - Estado atual:",x);for(const[E,M]of Object.entries(f)){const z={funcionario_id:parseInt(c),tipo:M.tipo,referencia_id:M.referencia_id,tipo_calculo:M.tipo_calculo,percentual:parseFloat(M.percentual),percentual_loja:M.percentual_loja?parseFloat(M.percentual_loja):null,desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_custo_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial,permite_edicao_venda:M.permite_edicao_venda,observacoes:M.observacoes||""};console.log(" Dados sendo enviados ao backend:",z),await V.post("/comissoes/configuracoes",z)}alert(" Regras atualizadas com sucesso em todas as configuraes!"),q(x)}catch(E){console.error("Erro ao atualizar regras:",E),alert("Erro ao atualizar regras")}return}if(!g){alert("Selecione um item para configurar");return}try{const L={funcionario_id:parseInt(c),tipo:g.tipo,referencia_id:g.id,tipo_calculo:g.tipo_calculo,percentual:parseFloat(g.percentual),percentual_loja:g.tipo_calculo==="lucro"?parseFloat(g.percentual_loja):null,desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_custo_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial,permite_edicao_venda:g.permite_edicao_venda,observacoes:g.observacoes},E=await V.post("/comissoes/configuracoes",L);if(E.data.success){alert("Configurao salva com sucesso!");const M=`${g.tipo}-${g.id}`;v(z=>({...z,[M]:{...L,id:E.data.config_id,nome_item:g.nome}})),y(null)}}catch(L){console.error("Erro ao salvar configurao:",L),alert("Erro ao salvar configurao")}},W=(L,E)=>{const M=`${L}-${E}`;return f[M]},R=(L,E)=>!!W(L,E),B=(L,E)=>N.some(M=>M.tipo===L&&M.referencia_id===E),O=(L,E=0)=>{const M="  ".repeat(E),z=E===0?"":"",le=L.filhas&&L.filhas.length>0,Q=L.produtos&&L.produtos.length>0;return R("categoria",L.id)?b[L.id]?e.jsxs(pe.Fragment,{children:[le&&L.filhas.map(re=>O(re,E+1)),Q&&e.jsx("div",{className:"pl-6",style:{paddingLeft:`${24+E*20}px`},children:L.produtos.map(re=>{const ae=R("produto",re.id),ie=B("produto",re.id);return ae?null:e.jsxs("div",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${ie?"bg-yellow-50":""}`,onClick:()=>U("produto",re.id,re.nome),children:[e.jsxs("span",{className:"text-sm",children:[" ",re.nome]}),ie&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]},`prod-${re.id}`)})})]},`cat-${L.id}`):null:e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:`p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${B("categoria",L.id)?"bg-yellow-50":""}`,style:{paddingLeft:`${12+E*20}px`},onClick:()=>U("categoria",L.id,`${M}${L.nome}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(le||Q)&&e.jsx("button",{onClick:re=>{re.stopPropagation(),T(L.id)},className:"text-gray-500",children:b[L.id]?"":""}),e.jsxs("span",{className:E===0?"font-medium":"text-sm",children:[z," ",L.nome,E>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Nvel ",E+1,")"]})]})]}),B("categoria",L.id)&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]}),b[L.id]&&e.jsxs("div",{children:[le&&e.jsx("div",{children:L.filhas.map(re=>O(re,E+1))}),Q&&e.jsx("div",{className:"pl-6",style:{paddingLeft:`${24+E*20}px`},children:L.produtos.map(re=>{const ae=R("produto",re.id),ie=B("produto",re.id);return ae?null:e.jsxs("div",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${ie?"bg-yellow-50":""}`,onClick:()=>U("produto",re.id,re.nome),children:[e.jsxs("span",{className:"text-sm",children:[" ",re.nome]}),ie&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]},`prod-${re.id}`)})})]})]},`cat-${L.id}`)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Configurao de Comisso"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio"}),e.jsxs("select",{value:c,onChange:L=>d(L.target.value),className:"w-full border rounded-lg px-3 py-2",disabled:!!t,children:[e.jsx("option",{value:"",children:"Selecione um funcionrio"}),i.map(L=>e.jsxs("option",{value:L.id,children:[L.nome," - ",L.cargo]},L.id))]}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{className:"text-blue-700",children:[e.jsx("strong",{children:"Apenas parceiros podem receber comisses."}),e.jsx("br",{}),'Se a pessoa no aparecer na lista, marque-a como "Parceiro" no cadastro de pessoas primeiro.']})]})})]}),c&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Dia do ms para fechamento de comisso"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"31",value:u,onChange:L=>m(L.target.value),placeholder:"Ex: 5 (paga dia 5 de cada ms)",className:"flex-1 border rounded-lg px-3 py-2"}),e.jsx("button",{onClick:async()=>{try{await V.put(`/clientes/${c}`,{data_fechamento_comissao:u?parseInt(u):null}),alert(" Data de fechamento salva com sucesso!")}catch(L){console.error("Erro ao salvar data:",L),alert(" Erro ao salvar data de fechamento")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 whitespace-nowrap",children:" Salvar Data"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe em branco para pagamento 30 dias aps a venda (padro)"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Regras de Clculo"}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm",children:[e.jsx("div",{className:"font-semibold text-blue-800 mb-1",children:" Hierarquia de Configuraes"}),e.jsxs("div",{className:"text-blue-700 text-xs",children:[e.jsx("strong",{children:"Produto"})," (prioridade mxima)  ",e.jsx("strong",{children:"Subcategoria"}),"  ",e.jsx("strong",{children:"Categoria"})," (prioridade mnima)",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:"Ao vender um produto, o sistema busca a configurao mais especfica."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_taxa_cartao,onChange:L=>{console.log(" Checkbox TAXA CARTO alterado para:",L.target.checked),h({...x,desconta_taxa_cartao:L.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta taxa de carto"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_impostos,onChange:L=>{console.log(" Checkbox IMPOSTOS alterado para:",L.target.checked),h({...x,desconta_impostos:L.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta impostos"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_taxa_entrega,onChange:L=>{console.log(" Checkbox TAXA ENTREGA alterado para:",L.target.checked),h({...x,desconta_taxa_entrega:L.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta taxa de entrega"})]}),e.jsx("div",{className:"border-t pt-2 mt-3",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.comissao_venda_parcial,onChange:L=>{console.log(" Checkbox VENDA PARCIAL alterado para:",L.target.checked),h({...x,comissao_venda_parcial:L.target.checked})},className:"rounded"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"Gerar comisso em vendas parciais"}),e.jsx("span",{className:"text-xs text-gray-500",children:x.comissao_venda_parcial?"Comisso gerada proporcionalmente a cada pagamento recebido":"Comisso gerada somente quando a venda estiver 100% paga"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Seleo de Produtos"}),Object.keys(f).length>0&&e.jsxs("div",{className:"mb-4 border rounded-lg p-3 bg-green-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:[" Itens J Configurados (",Object.keys(f).length,")"]}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(f).map(([L,E])=>e.jsxs("div",{className:"w-full flex items-center justify-between text-xs bg-white p-2 rounded hover:bg-gray-50 transition-colors group",children:[e.jsxs("button",{onClick:()=>U(E.tipo,E.referencia_id,E.nome_item||"Item"),className:"flex-1 flex items-center gap-2 text-left",children:[E.tipo==="categoria"&&"",E.tipo==="subcategoria"&&"",E.tipo==="produto"&&"",e.jsx("span",{className:"text-gray-700",children:E.nome_item||"Item"}),e.jsx("span",{className:"text-green-600 font-medium ml-auto",children:E.tipo_calculo==="percentual"?`${E.percentual}%`:`Lucro ${E.percentual}%`})]}),e.jsx("button",{onClick:async()=>{if(confirm(`Deseja remover a configurao de "${E.nome_item||"Item"}"?`))try{await V.delete(`/comissoes/configuracoes/${E.id}`),alert("Configurao removida com sucesso!");const M={...f};delete M[L],v(M)}catch(M){console.error("Erro ao remover:",M),alert("Erro ao remover configurao")}},className:"ml-2 text-red-600 hover:text-red-800 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},L))}),e.jsx("p",{className:"text-xs text-green-700 mt-2 italic",children:" Clique em um item para editar"})]}),s?e.jsx("div",{className:"text-center py-8",children:"Carregando..."}):e.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:a.map(L=>O(L,0))},Object.keys(f).length)]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Configurao"}),g?e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:[g.tipo==="categoria"&&" ",g.tipo==="subcategoria"&&" ",g.tipo==="produto"&&" ",g.nome]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tipo: ",g.tipo]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Comisso"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"percentual",checked:g.tipo_calculo==="percentual",onChange:L=>y({...g,tipo_calculo:L.target.value})}),e.jsx("span",{className:"text-sm",children:"Percentual fixo sobre venda"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"lucro",checked:g.tipo_calculo==="lucro",onChange:L=>y({...g,tipo_calculo:L.target.value})}),e.jsx("span",{className:"text-sm",children:"Diviso de lucro"})]})]})]}),g.tipo_calculo==="percentual"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Percentual"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:g.percentual,onChange:L=>y({...g,percentual:L.target.value}),className:"border rounded px-3 py-2 w-24"}),e.jsx("span",{children:"%"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Diviso do Lucro"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Funcionrio"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:g.percentual,onChange:L=>{const E=parseFloat(L.target.value);y({...g,percentual:E,percentual_loja:100-E})},className:"border rounded px-2 py-1 w-20"}),e.jsx("span",{className:"text-sm",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loja"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"number",value:g.percentual_loja,readOnly:!0,className:"border rounded px-2 py-1 w-20 bg-gray-100"}),e.jsx("span",{className:"text-sm",children:"%"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Clculo: Preo Venda - Desconto - Taxas - Impostos - Custo = Lucro"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.permite_edicao_venda,onChange:L=>y({...g,permite_edicao_venda:L.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Permite editar percentual na venda"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Observaes"}),e.jsx("textarea",{value:g.observacoes,onChange:L=>y({...g,observacoes:L.target.value}),className:"border rounded px-3 py-2 w-full",rows:"3"})]}),e.jsx("button",{onClick:K,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded mb-2",children:" Adicionar  Lista"}),e.jsx("button",{onClick:D,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:" Salvar Agora"})]}):e.jsx("div",{className:"border rounded-lg p-8 text-center text-gray-500",children:e.jsx("p",{children:"Selecione uma categoria, subcategoria ou produto ao lado para configurar"})}),N.length>0&&e.jsxs("div",{className:"mt-6 border rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Configuraes a Salvar (",N.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:N.map((L,E)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:L.nome}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",L.tipo_calculo==="percentual"?`${L.percentual}%`:`Lucro ${L.percentual}%`,")"]})]}),e.jsx("button",{onClick:()=>I(E),className:"text-red-600 hover:text-red-800",children:""})]},E))}),e.jsx("button",{onClick:Y,disabled:w,className:`w-full py-2 rounded mt-4 text-white ${w?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:w?e.jsxs("span",{children:[" Salvando ",C.atual,"/",C.total,"..."]}):" Salvar Todas as Configuraes"})]})]})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[" As configuraes se aplicam ",e.jsx("strong",{children:"apenas s comisses futuras"}),". Comisses j geradas no so alteradas."]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-50 bg-white",children:"Fechar"}),e.jsxs("button",{onClick:D,disabled:!g&&(!F||x.desconta_taxa_cartao===F.desconta_taxa_cartao&&x.desconta_impostos===F.desconta_impostos&&x.desconta_taxa_entrega===F.desconta_taxa_entrega&&x.comissao_venda_parcial===F.comissao_venda_parcial),className:`px-6 py-2 rounded font-medium ${g||F&&(x.desconta_taxa_cartao!==F.desconta_taxa_cartao||x.desconta_impostos!==F.desconta_impostos||x.desconta_taxa_entrega!==F.desconta_taxa_entrega||x.comissao_venda_parcial!==F.comissao_venda_parcial)?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[" ",g?"Salvar Alteraes":"Atualizar Regras"]})]})]})})]})})},m_e=({comissaoId:t,onClose:r})=>{var p,f,v,g,y;const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null);j.useEffect(()=>{t&&c()},[t]),j.useEffect(()=>{const N=_=>{_.key==="Escape"&&r()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[r]);const c=async()=>{var N,_;try{o(!0),l(null);const w=await V.get(`/comissoes/comissao/${t}`);w.data.success?s(w.data.comissao):l("Erro ao carregar detalhes da comisso")}catch(w){console.error("Erro ao carregar detalhe:",w),l(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao conectar com o servidor")}finally{o(!1)}},d=N=>N?new Date(N).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",u=N=>N==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N),m=N=>N==null?"0%":`${N.toFixed(1)}%`,x=N=>{const w={pendente:"bg-yellow-100 text-yellow-800",pago:"bg-green-100 text-green-800",estornado:"bg-red-100 text-red-800"}[N]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w}`,children:N.toUpperCase()})},h=({label:N,valor:_,destaque:w=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:N}),e.jsx("div",{className:`text-sm ${w?"text-lg font-bold text-gray-900":"text-gray-900"}`,children:_})]}),b=({titulo:N,children:_,cor:w="blue"})=>{const S={blue:"border-blue-500 bg-blue-50",green:"border-green-500 bg-green-50",purple:"border-purple-500 bg-purple-50",yellow:"border-yellow-500 bg-yellow-50",red:"border-red-500 bg-red-50"};return e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:`border-l-4 ${S[w]} px-4 py-2 mb-3`,children:e.jsx("h3",{className:"font-semibold text-gray-800",children:N})}),e.jsx("div",{className:"px-4",children:_})]})};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:r}),e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-2/3 lg:w-1/2 bg-white shadow-xl z-50 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Detalhes da Comisso"}),e.jsxs("p",{className:"text-sm text-blue-100",children:["Snapshot Imutvel #",t]})]}),e.jsx("button",{onClick:r,className:"text-white hover:bg-blue-500 rounded-full p-2 transition",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando detalhes..."})]})}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-red-600",children:i}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Tentar Novamente"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(b,{titulo:" Identificao",cor:"blue",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"ID da Comisso",valor:`#${a.id}`}),e.jsx(h,{label:"Venda",valor:a.numero_venda||`#${a.venda_id}`}),e.jsx(h,{label:"ID do Produto",valor:`#${a.produto_id}`}),e.jsx(h,{label:"ID do Funcionrio",valor:`#${a.funcionario_id}`}),e.jsx(h,{label:"Data da Venda",valor:d(a.data_venda)}),e.jsx(h,{label:"Nmero da Parcela",valor:a.parcela_numero}),e.jsx(h,{label:"Quantidade",valor:a.quantidade})]})}),e.jsxs(b,{titulo:" Valores Financeiros (Snapshot)",cor:"green",children:[e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-300 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Contexto do Pagamento"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[e.jsx("span",{className:"text-xs text-gray-600 block mb-1",children:"Valor Total da Venda (Produtos)"}),e.jsx("span",{className:"text-lg font-bold text-blue-700",children:u(a.total_venda||0)})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-green-200",children:[e.jsxs("span",{className:"text-xs text-gray-600 block mb-1",children:["Valor Pago (Parcela ",a.parcela_numero,")"]}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:u(((p=a.pagamento)==null?void 0:p.valor_pago_referencia)||0)}),((f=a.pagamento)==null?void 0:f.forma_pagamento)&&e.jsxs("span",{className:"text-xs text-gray-500 block mt-1",children:["via ",a.pagamento.forma_pagamento]})]})]}),((v=a.pagamento)==null?void 0:v.percentual_pago)<100&&e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[" Comisso calculada proporcionalmente (",m(a.pagamento.percentual_pago)," do total)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Valor de Venda",valor:u(a.valores_financeiros.valor_venda)}),e.jsx(h,{label:"Valor de Custo",valor:u(a.valores_financeiros.valor_custo)}),e.jsx(h,{label:"Base Original (Lucro)",valor:u(a.valores_financeiros.valor_base_original)}),e.jsx(h,{label:"Base Comissionada",valor:u(a.valores_financeiros.valor_base_comissionada)})]}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Como chegamos na Base de Clculo?"]}),e.jsxs("div",{className:"space-y-2 text-sm font-mono bg-white p-4 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between pb-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-700 font-semibold",children:["Valor Pago (Parcela ",a.parcela_numero||1,"):"]}),e.jsx("span",{className:"font-bold text-blue-600",children:u(((g=a.pagamento)==null?void 0:g.valor_pago_referencia)||a.valores_financeiros.valor_venda)})]}),a.deducoes&&a.deducoes.receita_taxa_entrega>0&&e.jsxs("div",{className:"flex justify-between text-green-600 pl-4",children:[e.jsx("span",{children:"(+) Taxa de Entrega (Receita):"}),e.jsxs("span",{className:"font-medium",children:["+ ",u(a.deducoes.receita_taxa_entrega)]})]}),a.deducoes&&e.jsxs(e.Fragment,{children:[a.deducoes.taxa_cartao>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsxs("span",{children:["(-) ",(()=>{const N=a.deducoes.forma_pagamento||"Carto",_=a.deducoes.numero_parcelas||1;let w=a.deducoes.taxa_percentual;if(_>1&&a.deducoes.taxas_por_parcela)try{w=JSON.parse(a.deducoes.taxas_por_parcela)[_.toString()]||w}catch{}let S="Taxa ";return N.includes("Crdito")?_>1?S+=`Carto Crdito ${_}x`:S+="Carto Crdito  Vista":N.includes("Dbito")?S+="Carto Dbito":S+=N,w&&(S+=` (${w}%)`),S+":"})()]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_cartao)]})]}),a.deducoes.imposto>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsxs("span",{children:["(-) Impostos (",a.deducoes.percentual_impostos?a.deducoes.percentual_impostos.toFixed(1)+"%":"","):"]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.imposto)]})]}),a.deducoes.taxa_entregador>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Taxa paga ao Entregador:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_entregador)]})]}),a.deducoes.custo_operacional>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Custo Operacional de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.custo_operacional)]})]}),a.deducoes.desconto>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Desconto:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.desconto)]})]})]}),e.jsxs("div",{className:"border-t-2 border-blue-400 pt-2 mt-2 flex justify-between font-bold",children:[e.jsx("span",{className:"text-blue-900",children:"(=) Base de Clculo:"}),e.jsx("span",{className:"text-blue-900 text-lg",children:u(a.calculo.valor_base_calculo)})]})]})]})]}),e.jsxs(b,{titulo:" Clculo da Comisso",cor:"purple",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Tipo de Clculo",valor:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.calculo.tipo_calculo==="percentual"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:a.calculo.tipo_calculo.toUpperCase()})}),e.jsx(h,{label:"Percentual da Comisso",valor:m(a.calculo.percentual_comissao)}),e.jsx(h,{label:"Percentual Aplicado (Pago)",valor:m(a.calculo.percentual_aplicado)}),e.jsx(h,{label:"Valor Base de Clculo",valor:u(a.calculo.valor_base_calculo),destaque:!0}),e.jsx(h,{label:"Valor da Comisso (Total)",valor:u(a.calculo.valor_comissao)}),e.jsx(h,{label:"Valor Efetivamente Gerado",valor:u(a.calculo.valor_comissao_gerada),destaque:!0})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:" Frmula Aplicada:"}),e.jsxs("div",{className:"space-y-2 text-sm font-mono",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-purple-200",children:[e.jsx("div",{className:"text-gray-700 mb-2",children:"Base de Clculo  Percentual = Comisso"}),e.jsxs("div",{className:"text-purple-900 font-bold",children:[u(a.calculo.valor_base_calculo),"  ",m(a.calculo.percentual_comissao)," = ",u(a.calculo.valor_comissao)]})]}),a.calculo.percentual_aplicado<100&&e.jsxs("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200",children:[e.jsx("div",{className:"text-gray-700 mb-2",children:" Venda parcial - Comisso proporcional ao valor pago:"}),e.jsxs("div",{className:"text-yellow-900 font-bold",children:[u(a.calculo.valor_comissao),"  ",m(a.calculo.percentual_aplicado)," = ",u(a.calculo.valor_comissao_gerada)]})]})]})]})]}),e.jsxs(b,{titulo:" Controle de Pagamento",cor:"yellow",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Percentual Pago da Venda",valor:m(a.pagamento.percentual_pago)}),e.jsx(h,{label:"Valor Pago de Referncia",valor:u(a.pagamento.valor_pago_referencia)}),e.jsx(h,{label:"Valor Pago da Comisso",valor:u(a.pagamento.valor_pago)}),e.jsx(h,{label:"Saldo Restante",valor:u(a.pagamento.saldo_restante)}),a.pagamento.data_pagamento&&e.jsxs(e.Fragment,{children:[e.jsx(h,{label:"Data do Pagamento",valor:d(a.pagamento.data_pagamento)}),e.jsx(h,{label:"Forma de Pagamento",valor:a.pagamento.forma_pagamento||"No informado"})]})]}),a.pagamento.percentual_pago<100&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[" Esta comisso foi gerada proporcionalmente ao pagamento parcial da venda. Apenas ",m(a.pagamento.percentual_pago)," do valor total foi pago."]})})]}),e.jsxs(b,{titulo:" Status e Controle",cor:a.status.status==="estornado"?"red":"blue",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-2",children:"Status Atual"}),x(a.status.status)]}),a.status.status==="estornado"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Informaes do Estorno"}),e.jsx(h,{label:"Data do Estorno",valor:d(a.status.data_estorno)}),e.jsx(h,{label:"Motivo do Estorno",valor:a.status.motivo_estorno||"No informado"})]}),a.status.observacao_pagamento&&e.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Observaes"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.status.observacao_pagamento})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Resumo do Clculo Completo"]}),e.jsxs("div",{className:"space-y-3 font-mono text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[e.jsxs("span",{className:"text-blue-100",children:["Valor Pago (Parcela ",a.parcela_numero||1,"):"]}),e.jsx("span",{className:"font-bold text-lg",children:u(((y=a.pagamento)==null?void 0:y.valor_pago_referencia)||a.valores_financeiros.valor_venda)})]}),a.deducoes&&e.jsxs(e.Fragment,{children:[a.deducoes.taxa_cartao>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsxs("span",{children:["(-) ",(()=>{const N=a.deducoes.forma_pagamento||"Carto",_=a.deducoes.numero_parcelas||1;let w=a.deducoes.taxa_percentual;if(_>1&&a.deducoes.taxas_por_parcela)try{w=JSON.parse(a.deducoes.taxas_por_parcela)[_.toString()]||w}catch{}let S="Taxa ";return N.includes("Crdito")?_>1?S+=`Carto Crdito ${_}x`:S+="Carto Crdito  Vista":N.includes("Dbito")?S+="Carto Dbito":S+=N,w&&(S+=` (${w}%)`),S+":"})()]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_cartao)]})]}),a.deducoes.imposto>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Impostos:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.imposto)]})]}),a.deducoes.custo_entrega>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Custo de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.custo_entrega)]})]}),a.deducoes.desconto>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Desconto:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.desconto)]})]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t-2 border-white/40 pt-2",children:[e.jsx("span",{className:"text-blue-100 font-semibold",children:"(=) Base de Clculo:"}),e.jsx("span",{className:"font-bold text-lg",children:u(a.calculo.valor_base_calculo)})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[e.jsx("span",{className:"text-blue-100",children:"() Percentual:"}),e.jsx("span",{className:"font-bold text-lg",children:m(a.calculo.percentual_comissao)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/10 rounded-lg p-3 border-2 border-yellow-300",children:[e.jsx("span",{className:"text-xl font-bold",children:"Comisso Gerada:"}),e.jsx("span",{className:"font-bold text-3xl text-yellow-300",children:u(a.calculo.valor_comissao_gerada)})]})]})]})]})]}),a&&e.jsx("div",{className:"bg-blue-50 border-t border-blue-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Snapshot Financeiro Imutvel"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Este  um snapshot financeiro imutvel. Os valores refletem exatamente o momento da venda e no podem ser alterados. Qualquer discrepncia deve ser tratada atravs de ajustes ou estornos, nunca por edio direta."})]})]})})]})]}):null},x_e=()=>{const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null),[l,c]=j.useState(null),[d,u]=j.useState(!0),[m,x]=j.useState(null),[h,b]=j.useState(null),[p,f]=j.useState({funcionario_id:"",status:"",data_inicio:"",data_fim:"",venda_id:"",produto_id:"",grupo_id:""}),[v,g]=j.useState("ate_hoje"),[y,N]=j.useState([]),[_,w]=j.useState([]),[S,C]=j.useState(null),[k,F]=j.useState(null),[q,A]=j.useState(""),[T,U]=j.useState(""),[K,I]=j.useState(!1),[Y,D]=j.useState(!1),[W,R]=j.useState([]),[B,O]=j.useState(null),[L,E]=j.useState(!1),[M,z]=j.useState(""),[le,Q]=j.useState(!1),[ne,re]=j.useState([]),[ae,ie]=j.useState(!1),[ve,_e]=j.useState(""),[me,Se]=j.useState(""),[Ne,ot]=j.useState(!1),[Ke,lt]=j.useState("sem_pagar"),[ke,Ie]=j.useState(""),[Ae,it]=j.useState(""),[gt,Dt]=j.useState(0),[Ct,Lt]=j.useState([]),[$t,ge]=j.useState([]),De=1;j.useEffect(()=>{console.log("[ComissoesListagem] Iniciando carregamento..."),(async()=>{try{await Le(),await ct(),await tt(),await xe(),await Fe(),await Ye(),await te()}catch(he){console.error("[ComissoesListagem] Erro no carregamento inicial:",he)}})();const fe=new Date().toISOString().split("T")[0];f(he=>({...he,data_fim:fe}))},[]),j.useEffect(()=>{const se=fe=>{le&&!fe.target.closest(".autocomplete-container")&&Q(!1)};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[le]);const Le=async()=>{var se,fe;console.log("[carregarComissoes] Iniciando...");try{n(!0),i(null);const he=new URLSearchParams;p.funcionario_id&&he.append("funcionario_id",p.funcionario_id),p.status&&he.append("status",p.status),p.data_inicio&&he.append("data_inicio",p.data_inicio),p.data_fim&&he.append("data_fim",p.data_fim),p.venda_id&&he.append("venda_id",p.venda_id);const we=he.toString(),Ee=we?`/comissoes?${we}`:"/comissoes",Ue=await V.get(Ee);Ue.data.success?a(Ue.data.lista):i("Erro ao carregar comisses")}catch(he){console.error("Erro ao carregar comisses:",he),i(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||"Erro ao conectar com o servidor")}finally{n(!1),console.log("[carregarComissoes] Finalizado")}},ct=async()=>{var se,fe;try{u(!0),x(null);const he=await V.get(`/comissoes/resumo?funcionario_id=${De}`);he.data.success?c(he.data.resumo):x("Erro ao carregar resumo")}catch(he){console.error("Erro ao carregar resumo:",he),x(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||"Erro ao carregar resumo")}finally{u(!1)}},tt=async()=>{try{E(!0);const se=await V.get("/comissoes/funcionarios");if(se.data.success){const fe=Array.isArray(se.data.lista)?se.data.lista:Array.isArray(se.data.data)?se.data.data:[];R(fe)}}catch(se){console.error("Erro ao carregar funcionrios:",se),R([])}finally{E(!1)}},xe=async()=>{try{const se=await V.get("/produtos/");se.data&&N(Array.isArray(se.data)?se.data:[])}catch(se){console.error("Erro ao carregar produtos:",se),N([])}},Fe=async()=>{try{const se=await V.get("/categorias-financeiras");se.data&&w(Array.isArray(se.data)?se.data:[])}catch(se){console.error("Erro ao carregar grupos:",se),w([])}},Ye=async()=>{console.log("[carregarFormasPagamento] Iniciando...");try{const se=await V.get("/comissoes/formas-pagamento");se.data&&Lt(Array.isArray(se.data)?se.data:[])}catch(se){console.error("[carregarFormasPagamento] Erro:",se)}finally{console.log("[carregarFormasPagamento] Finalizado")}},te=async()=>{try{const se=await V.get("/contas-bancarias");se.data&&ge(Array.isArray(se.data)?se.data.filter(fe=>fe.ativa):[])}catch(se){console.error("Erro ao carregar contas bancrias:",se)}},ue=()=>r.filter(fe=>fe.status==="pendente").reduce((fe,he)=>fe+(he.valor_comissao_gerada||0),0),Oe=()=>r.filter(fe=>ne.includes(fe.id)).reduce((fe,he)=>fe+(he.valor_comissao_gerada||0),0),ce=se=>se?new Date(se).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",je=se=>se==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(se),Re=se=>se==null?"0%":`${se.toFixed(1)}%`,He=se=>{const he={pendente:"bg-yellow-100 text-yellow-800",pago:"bg-green-100 text-green-800",estornado:"bg-red-100 text-red-800"}[se]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he}`,children:se.toUpperCase()})},J=se=>{const he={percentual:"bg-blue-100 text-blue-800",lucro:"bg-purple-100 text-purple-800"}[se]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he}`,children:se.toUpperCase()})},ye=()=>{if(d)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(fe=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32"})]},fe))});if(m)return e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:" No foi possvel carregar o resumo financeiro"})});if(!l)return null;const se=[{titulo:"Total Gerado",valor:l.total_gerado,cor:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-600"},{titulo:"Total Pago",valor:l.total_pago,cor:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-600"},{titulo:"Total Pendente",valor:l.total_pendente,cor:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-600"},{titulo:"Saldo a Pagar",valor:l.saldo_a_pagar,cor:"purple",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-600"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:se.map((fe,he)=>e.jsxs("div",{className:`${fe.bgColor} border ${fe.borderColor} rounded-lg shadow-sm p-6 transition hover:shadow-md`,children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:fe.titulo}),e.jsx("p",{className:`text-2xl font-bold ${fe.textColor}`,children:je(fe.valor)})]},he))})},Pe=se=>{b(se)},We=()=>{b(null)},st=(se,fe)=>{f(he=>({...he,[se]:fe}))},xt=()=>{Le()},pt=()=>{f({funcionario_id:"",status:"",data_inicio:"",data_fim:"",venda_id:"",produto_id:"",grupo_id:""}),O(null),C(null),F(null),z(""),A(""),U(""),g("ate_hoje");const fe=new Date().toISOString().split("T")[0];setTimeout(()=>{(async()=>{try{n(!0);const we=await V.get(`/comissoes?data_fim=${fe}`);we.data.success&&a(we.data.lista)}catch(we){console.error("Erro:",we)}finally{n(!1)}})()},100)},Nt=se=>{C(se),A(se.nome),I(!1),f(fe=>({...fe,produto_id:se.id}))},At=se=>{F(se),U(se.nome),D(!1),f(fe=>({...fe,grupo_id:se.id}))},Mt=se=>{O(se),z(se.nome),Q(!1),f(fe=>({...fe,funcionario_id:se.id}))},ut=(W||[]).filter(se=>{var fe;return(fe=se==null?void 0:se.nome)==null?void 0:fe.toLowerCase().includes(M.toLowerCase())}),X=(se,fe)=>{fe==="pendente"&&re(he=>he.includes(se)?he.filter(we=>we!==se):[...he,se])},P=()=>{const se=r.filter(fe=>fe.status==="pendente");ne.length===se.length?re([]):re(se.map(fe=>fe.id))},H=()=>{const se=new Date().toISOString().split("T")[0];_e(se),Se(""),lt("sem_pagar"),Ie(""),it("");const fe=Oe();Dt(fe),ie(!0)},Z=()=>{ie(!1),_e(""),Se("")},oe=async()=>{var se,fe;if(!ve){alert("Por favor, informe a data de pagamento");return}if(Ke==="com_pagamento"&&!Ae){alert("Por favor, selecione a conta bancria para o pagamento");return}try{ot(!0);let he;if(Ke==="sem_pagar")he=await V.post("/comissoes/fechar",{comissoes_ids:ne,data_pagamento:ve,observacao:me||null});else{const we=new URLSearchParams({valor_pago:gt.toString(),forma_pagamento:ke||"nao_informado",data_pagamento:ve});Ae&&we.append("conta_bancaria_id",Ae),me&&we.append("observacoes",me),ne.forEach(Ee=>{we.append("comissoes_ids",Ee)}),he=await V.post(`/comissoes/fechar-com-pagamento?${we.toString()}`)}if(he.data.success){const we=Ke==="sem_pagar"?he.data.valor_total_fechamento:he.data.valor_total_pago;alert(` ${he.data.total_processadas} comisso(es) fechada(s) com sucesso!

Valor total: ${je(we)}
Modo: ${Ke==="sem_pagar"?"Sem pagamento (para pagar depois)":"Com pagamento no ato"}`),await Le(),await ct(),re([]),Z()}}catch(he){console.error("Erro ao fechar comisses:",he),alert(" Erro ao fechar comisses: "+(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||he.message))}finally{ot(!1)}},de=()=>{const se=(y||[]).filter(he=>{var we;return(we=he==null?void 0:he.nome)==null?void 0:we.toLowerCase().includes(q.toLowerCase())}),fe=(_||[]).filter(he=>{var we;return(we=he==null?void 0:he.nome)==null?void 0:we.toLowerCase().includes(T.toLowerCase())});return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Filtros"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," registro",r.length!==1?"s":""," encontrado",r.length!==1?"s":""]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Perodo"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"ate_hoje",checked:v==="ate_hoje",onChange:he=>{g(he.target.value);const we=new Date().toISOString().split("T")[0];f(Ee=>({...Ee,data_inicio:"",data_fim:we}))},className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"At hoje"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"personalizado",checked:v==="personalizado",onChange:he=>g(he.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Perodo personalizado"})]})]}),v==="personalizado"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:p.data_inicio,onChange:he=>st("data_inicio",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:p.data_fim,onChange:he=>st("data_fim",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funcionrio"}),e.jsx("input",{type:"text",value:M,onChange:he=>{z(he.target.value),Q(!0),he.target.value===""&&(O(null),f(we=>({...we,funcionario_id:""})))},onFocus:()=>Q(!0),disabled:L,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",placeholder:L?"Carregando...":"Digite o nome"}),le&&M&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:ut.length>0?ut.map(he=>e.jsxs("div",{onClick:()=>Mt(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum funcionrio encontrado"})})]}),e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsx("input",{type:"text",value:q,onChange:he=>{A(he.target.value),I(!0),he.target.value===""&&(C(null),f(we=>({...we,produto_id:""})))},onFocus:()=>I(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Digite o nome do produto"}),K&&q&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:se.length>0?se.map(he=>e.jsxs("div",{onClick:()=>Nt(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum produto encontrado"})})]}),e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo/Categoria"}),e.jsx("input",{type:"text",value:T,onChange:he=>{U(he.target.value),D(!0),he.target.value===""&&(F(null),f(we=>({...we,grupo_id:""})))},onFocus:()=>D(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Digite o nome do grupo"}),Y&&T&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:fe.length>0?fe.map(he=>e.jsxs("div",{onClick:()=>At(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum grupo encontrado"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:p.status,onChange:he=>st("status",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"estornado",children:"Estornado"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:xt,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtrar"]}),e.jsxs("button",{onClick:pt,disabled:s,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpar Filtros"]})]})]})};return s?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando comisses..."})]})}):o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Erro ao carregar comisses"}),e.jsx("p",{className:"text-red-600",children:o}),e.jsx("button",{onClick:Le,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Tentar Novamente"})]})}):r.length===0?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Demonstrativo de Comisses"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Nenhuma comisso encontrada"}),e.jsx("p",{className:"text-gray-600",children:"Ainda no h registros de comisses no sistema."})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Demonstrativo de Comisses"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Total de registros: ",r.length]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>t("/comissoes/relatorios"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})," Relatrios"]}),e.jsxs("button",{onClick:()=>t("/comissoes/fechamentos"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Histrico"]})]})]}),ye(),de(),ne.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-blue-800 font-medium",children:[ne.length," comisso(es) selecionada(s)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>re([]),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Limpar Seleo"}),e.jsxs("button",{onClick:H,disabled:Ne,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Fechar Comisses"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:ne.length>0&&ne.length===r.filter(se=>se.status==="pendente").length,onChange:P,disabled:r.filter(se=>se.status==="pendente").length===0,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer",title:"Selecionar todas pendentes"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data da Venda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero da Venda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parcela"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo de Clculo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base de Clculo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Comisso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(se=>e.jsxs("tr",{className:"hover:bg-blue-50 transition",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:fe=>fe.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:ne.includes(se.id),onChange:()=>X(se.id,se.status),disabled:se.status!=="pendente",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed",title:se.status!=="pendente"?`Comisso ${se.status}`:"Selecionar para fechamento"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:ce(se.data_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 font-medium cursor-pointer",onClick:()=>Pe(se.id),title:`ID interno: #${se.venda_id}`,children:se.numero_venda||`#${se.venda_id}`}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:["#",se.produto_id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:se.parcela_numero}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm cursor-pointer",onClick:()=>Pe(se.id),children:J(se.tipo_calculo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium cursor-pointer",onClick:()=>Pe(se.id),children:je(se.valor_base_calculo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right cursor-pointer",onClick:()=>Pe(se.id),children:Re(se.percentual_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-bold cursor-pointer",onClick:()=>Pe(se.id),children:je(se.valor_comissao_gerada)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm cursor-pointer",onClick:()=>Pe(se.id),children:He(se.status)})]},se.id))})]})})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Informao:"})," Os valores exibidos so snapshots imutveis do momento da venda. Eles no so recalculados e refletem exatamente como a comisso foi gerada.",e.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:"Clique em qualquer linha para ver mais detalhes."})]})}),r.length>0&&e.jsx("div",{className:"fixed bottom-0 left-64 right-0 bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 text-white shadow-lg z-40 border-t border-indigo-300/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-3.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Perodo"}),e.jsx("div",{className:"text-sm font-bold text-white",children:v==="ate_hoje"?"At hoje":e.jsxs(e.Fragment,{children:[p.data_inicio?new Date(p.data_inicio).toLocaleDateString("pt-BR"):"Incio","  ",p.data_fim?new Date(p.data_fim).toLocaleDateString("pt-BR"):"Fim"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Filtros"}),e.jsxs("div",{className:"text-sm font-bold text-white",children:[B&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",B.nome]}),S&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",S.nome]}),k&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",k.nome]}),p.status&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",p.status]}),!B&&!S&&!k&&!p.status&&e.jsx("span",{className:"text-indigo-200",children:"Sem filtros"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Total Pendente (Filtrado)"}),e.jsx("div",{className:"text-3xl font-bold text-white drop-shadow-sm",children:je(ue())}),e.jsxs("div",{className:"text-[11px] text-indigo-100 mt-0.5 font-medium",children:[r.filter(se=>se.status==="pendente").length," comisso(es) pendente(s)"]})]})]})})}),r.length>0&&e.jsx("div",{className:"h-24"}),h&&e.jsx(m_e,{comissaoId:h,onClose:We}),ae&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fechar Comisses Selecionadas"}),e.jsx("button",{onClick:Z,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 font-medium",children:[ne.length," comisso(es) selecionada(s)"]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:je(Oe())})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:" Tipo de Fechamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>lt("sem_pagar"),className:`p-4 border-2 rounded-lg transition-all ${Ke==="sem_pagar"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-blue-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"font-bold text-gray-800",children:"Fechar sem Pagar"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Apenas registrar fechamento"})]})}),e.jsx("button",{type:"button",onClick:()=>lt("com_pagamento"),className:`p-4 border-2 rounded-lg transition-all ${Ke==="com_pagamento"?"border-green-500 bg-green-50 shadow-md":"border-gray-300 hover:border-green-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"font-bold text-gray-800",children:"Fechar e Pagar"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Com lanamento financeiro"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Data do Fechamento/Pagamento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:ve,onChange:se=>_e(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ke==="com_pagamento"&&e.jsxs("div",{className:"space-y-4 mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-bold text-green-800 mb-3",children:" Dados do Pagamento"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Valor a Pagar (editvel)"}),e.jsx("input",{type:"number",step:"0.01",value:gt,onChange:se=>Dt(parseFloat(se.target.value)),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Valor original: ",je(Oe())]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Forma de Pagamento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:ke,onChange:se=>Ie(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),formasPagamento.map(se=>e.jsx("option",{value:se.id,children:se.nome},se.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Conta Bancria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:Ae,onChange:se=>it(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),$t.map(se=>e.jsxs("option",{value:se.id,children:[se.nome," (",se.banco,") - Saldo: ",je(se.saldo||0)]},se.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Observaes"}),e.jsx("textarea",{value:me,onChange:se=>Se(se.target.value),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observaes sobre o fechamento..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Z,disabled:Ne,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:oe,disabled:Ne||!ve||Ke==="com_pagamento"&&(!ke||!Ae),className:`flex-1 px-4 py-2 rounded-lg transition disabled:opacity-50 flex items-center justify-center gap-2 ${Ke==="com_pagamento"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} text-white`,children:Ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ke==="com_pagamento"?" Fechar e Pagar":" Fechar sem Pagar"]})})]})]})})]})},p_e=()=>{const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null);j.useEffect(()=>{l()},[]);const l=async()=>{var m,x;try{n(!0),i(null);const h=await V.get("/comissoes/abertas");h.data.success?a(h.data.funcionarios||[]):i("Erro ao carregar comisses em aberto")}catch(h){console.error("Erro ao carregar comisses abertas:",h),i(((x=(m=h.response)==null?void 0:m.data)==null?void 0:x.detail)||"Erro ao carregar comisses em aberto")}finally{n(!1)}},c=m=>{t(`/comissoes/fechamento/${m}`)},d=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),u=m=>m?new Date(m+"T00:00:00").toLocaleDateString("pt-BR"):"-";return s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando comisses em aberto..."})]})})}):o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]})]}),e.jsx("button",{onClick:l,className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"})]})}):r.length===0?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Comisses em Aberto"}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Nenhuma comisso pendente"}),e.jsx("p",{className:"text-green-600",children:"No h funcionrios com comisses em aberto no momento."})]})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Comisses em Aberto"}),e.jsx("p",{className:"text-gray-600",children:"Funcionrios com comisses pendentes de pagamento"})]}),e.jsxs("button",{onClick:()=>t("/comissoes/fechamentos"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Histrico"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Funcionrios"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:r.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Pendente"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:d(r.reduce((m,x)=>m+x.total_pendente,0))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:r.reduce((m,x)=>m+x.quantidade_comissoes,0)})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pendente"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde de Comisses"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima Venda"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:m.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.nome_funcionario}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",m.funcionario_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-semibold text-green-600",children:d(m.total_pendente)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:m.quantidade_comissoes})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:u(m.data_ultima_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>c(m.funcionario_id),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Conferir"]})})]},m.funcionario_id))})]})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:'Clique em "Conferir" para visualizar os detalhes das comisses de cada funcionrio'})})]})})},h_e=()=>{const{funcionario_id:t}=rc(),r=Kt(),[a,s]=j.useState(!0),[n,o]=j.useState(null),[i,l]=j.useState(null),[c,d]=j.useState([]),[u,m]=j.useState(null),[x,h]=j.useState(null),[b,p]=j.useState([]),[f,v]=j.useState([]),[g,y]=j.useState([]),[N,_]=j.useState(""),[w,S]=j.useState(""),[C,k]=j.useState(""),[F,q]=j.useState(""),[A,T]=j.useState(!1),[U,K]=j.useState(new Set),[I,Y]=j.useState(""),[D,W]=j.useState("nao_informado"),[R,B]=j.useState(new Date().toISOString().split("T")[0]),[O,L]=j.useState(""),[E,M]=j.useState(!1),[z,le]=j.useState(null);j.useEffect(()=>{Q()},[t]);const Q=async()=>{var Ne,ot;try{s(!0),o(null);const Ke=await V.get(`/comissoes/conferencia-avancada/${t}`);Ke.data.success&&(l(Ke.data.funcionario),d(Ke.data.comissoes),m(Ke.data.resumo),h(Ke.data.periodo_selecionado));const lt=await V.get("/comissoes/formas-pagamento");lt.data.success&&y(lt.data.formas);const ke=await V.get("/produtos/categorias");ke.data.data&&p(ke.data.data)}catch(Ke){o(((ot=(Ne=Ke.response)==null?void 0:Ne.data)==null?void 0:ot.detail)||"Erro ao carregar dados"),console.error("Erro:",Ke)}finally{s(!1)}},ne=async()=>{var Ne,ot;try{s(!0);const Ke={grupo_produto:N?parseInt(N):void 0,produto_id:w?parseInt(w):void 0,data_inicio:C||void 0,data_fim:F||void 0},lt=await V.get(`/comissoes/conferencia-avancada/${t}`,{params:Object.fromEntries(Object.entries(Ke).filter(([ke,Ie])=>Ie!==void 0))});lt.data.success&&(d(lt.data.comissoes),m(lt.data.resumo),h(lt.data.periodo_selecionado))}catch(Ke){o(((ot=(Ne=Ke.response)==null?void 0:Ne.data)==null?void 0:ot.detail)||"Erro ao aplicar filtros")}finally{s(!1)}},re=()=>{_(""),S(""),k(""),q(""),setTimeout(()=>Q(),100)},ae=Ne=>{const ot=new Set(U);ot.has(Ne)?ot.delete(Ne):ot.add(Ne),K(ot)},ie=()=>{U.size===c.length?K(new Set):K(new Set(c.map(Ne=>Ne.id)))},ve=()=>{if(U.size===0){alert("Selecione pelo menos uma comisso");return}B(new Date().toISOString().split("T")[0]),Y(""),W("nao_informado"),L(""),le(null),T(!0)},_e=async()=>{var Ne,ot;try{if(!I||parseFloat(I)<=0){le("Valor a pagar deve ser maior que zero");return}M(!0),le(null);const Ke={comissoes_ids:Array.from(U),valor_pago:parseFloat(I),forma_pagamento:D,data_pagamento:R,observacoes:O||null},lt=await V.post("/comissoes/fechar-com-pagamento",Ke);lt.data.success&&(alert(` Fechamento realizado com sucesso!

Processadas: ${lt.data.total_processadas}
Valor total: R$ ${lt.data.valor_total_fechado.toFixed(2)}
Valor pago: R$ ${lt.data.valor_total_pago.toFixed(2)}
Saldo restante: R$ ${lt.data.saldo_total_restante.toFixed(2)}
Comisses com saldo: ${lt.data.comissoes_com_saldo}`),T(!1),K(new Set),Q())}catch(Ke){le(((ot=(Ne=Ke.response)==null?void 0:Ne.data)==null?void 0:ot.detail)||"Erro ao fechar comisses")}finally{M(!1)}};if(a)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});const me=Array.from(U).reduce((Ne,ot)=>{const Ke=c.find(lt=>lt.id===ot);return Ne+(Ke?Ke.valor_comissao:0)},0),Se=me-(parseFloat(I)||0);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Conferncia de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:i?`${i.nome} (ID: ${i.id})`:"Carregando..."})]}),e.jsx("button",{onClick:()=>r("/comissoes/abertas"),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:" Voltar"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Filtros Avanados"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grupo de Produto"}),e.jsxs("select",{value:N,onChange:Ne=>_(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Todos"}),b.map(Ne=>e.jsx("option",{value:Ne.id,children:Ne.nome},Ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produto"}),e.jsx("input",{type:"text",placeholder:"Buscar produto...",value:w,onChange:Ne=>S(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:C,onChange:Ne=>k(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:F,onChange:Ne=>q(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:ne,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Aplicar Filtros"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Limpar"})]})]}),x&&u&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 border border-blue-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Perodo Selecionado"}),e.jsx("p",{className:"text-gray-600",children:x.data_inicio&&x.data_fim?`${new Date(x.data_inicio).toLocaleDateString("pt-BR")} at ${new Date(x.data_fim).toLocaleDateString("pt-BR")}`:"Sem perodo especfico"}),x.grupo_produto_nome&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Grupo: ",x.grupo_produto_nome]}),x.produto_nome&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Produto: ",x.produto_nome]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Resumo do Perodo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantidade"}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:u.quantidade_comissoes})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",u.valor_total.toFixed(2)]})]}),u.valor_pago_total>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pago"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["R$ ",u.valor_pago_total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo"}),e.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["R$ ",u.saldo_restante_total.toFixed(2)]})]})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:U.size===c.length&&c.length>0,onChange:ie})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Quantidade"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Base"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"%"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Pago"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Saldo"})]})}),e.jsx("tbody",{children:c.map(Ne=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:U.has(Ne.id),onChange:()=>ae(Ne.id)})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(Ne.data_venda).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:Ne.nome_produto}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:Ne.cliente_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:Ne.quantidade.toFixed(2)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["R$ ",Ne.valor_base_calculo.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:[Ne.percentual_comissao.toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold text-green-600",children:["R$ ",Ne.valor_comissao.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:Ne.valor_pago?`R$ ${Ne.valor_pago.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:Ne.saldo_restante?`R$ ${Ne.saldo_restante.toFixed(2)}`:"-"})]},Ne.id))})]})})}),e.jsx("div",{className:"bg-gray-900 text-white rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-300",children:[U.size," de ",c.length," comisses selecionadas"]})}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Total Selecionado"}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R$ ",me.toFixed(2)]})]}),parseFloat(I)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Ser Pago"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["R$ ",parseFloat(I).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Saldo Restante"}),e.jsxs("p",{className:`text-2xl font-bold ${Se>0?"text-orange-400":"text-green-400"}`,children:["R$ ",Se.toFixed(2)]})]})]}),e.jsx("button",{onClick:ve,disabled:U.size===0,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500 rounded-lg font-semibold transition",children:"Fechar e Pagar"})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Fechamento com Pagamento"}),z&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:z}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded border border-blue-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Comisses a processar: ",U.size]}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Valor Total: R$ ",me.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsx("select",{value:D,onChange:Ne=>W(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:g.map(Ne=>e.jsx("option",{value:Ne.nome,children:Ne.descricao},Ne.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor a Pagar *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"flex items-center bg-gray-100 px-3 py-2 rounded-lg border border-gray-300",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:me,value:I,onChange:Ne=>Y(Ne.target.value),placeholder:"0.00",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mximo: R$ ",me.toFixed(2),parseFloat(I)<me&&parseFloat(I)>0&&e.jsxs("span",{className:"text-orange-600 font-semibold ml-2",children:["(Pagamento Parcial - Saldo: R$ ",(me-parseFloat(I)).toFixed(2),")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Pagamento *"}),e.jsx("input",{type:"date",value:R,onChange:Ne=>B(Ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:O,onChange:Ne=>L(Ne.target.value),placeholder:"Observaes opcionais...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>T(!1),disabled:E,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:_e,disabled:E,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin",children:""}),"Processando..."]}):"Confirmar Fechamento"})]})]})})]})},f_e=()=>{const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null),[l,c]=j.useState(null),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,b]=j.useState("");j.useEffect(()=>{p()},[]);const p=async()=>{var w,S;try{n(!0),i(null);const C=new URLSearchParams;d&&C.append("data_inicio",d),m&&C.append("data_fim",m),h&&C.append("funcionario_id",h);const k=`/comissoes/fechamentos${C.toString()?"?"+C.toString():""}`,F=await V.get(k);F.data.success?(a(F.data.fechamentos||[]),c(F.data.resumo)):i("Erro ao carregar histrico")}catch(C){console.error("Erro ao carregar histrico:",C),i(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao carregar histrico de fechamentos")}finally{n(!1)}},f=()=>{p()},v=()=>{u(""),x(""),b(""),setTimeout(()=>p(),100)},g=w=>{t(`/comissoes/fechamentos/detalhe?funcionario_id=${w.funcionario_id}&data_pagamento=${w.data_pagamento}`)},y=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),N=w=>w?new Date(w+"T00:00:00").toLocaleDateString("pt-BR"):"-",_=w=>w?new Date(w).toLocaleString("pt-BR"):"-";return s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando histrico..."})]})})}):o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]})]}),e.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Histrico de Fechamentos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Auditoria de comisses fechadas - somente leitura"})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Filtros"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:d,onChange:w=>u(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:m,onChange:w=>x(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID do Funcionrio"}),e.jsx("input",{type:"number",value:h,onChange:w=>b(w.target.value),placeholder:"Deixe vazio para todos",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Aplicar"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors",children:"Limpar"})]})]})]}),l&&e.jsx("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total de Fechamentos"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.total_fechamentos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Valor Total Pago"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:y(l.valor_total_geral)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.quantidade_total_geral})]})]})}),r.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-yellow-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Nenhum fechamento encontrado"}),e.jsx("p",{className:"text-yellow-600",children:"No h fechamentos registrados no perodo selecionado."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Fechamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((w,S)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>g(w),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:w.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.nome_funcionario}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",w.funcionario_id]})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:_(w.data_fechamento)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm font-medium text-gray-900",children:N(w.data_pagamento)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:w.quantidade_comissoes})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-semibold text-green-600",children:y(w.valor_total)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("button",{onClick:C=>{C.stopPropagation(),g(w)},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:"Ver Detalhes"})})]},`${w.funcionario_id}_${w.data_pagamento}_${S}`))})]})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:" Clique em uma linha para ver os detalhes do fechamento"})})]})]})})},g_e=()=>{const t=Kt(),[r]=lg(),a=r.get("funcionario_id"),s=r.get("data_pagamento"),[n,o]=j.useState(null),[i,l]=j.useState(!0),[c,d]=j.useState(null);j.useEffect(()=>{if(!a||!s){d("Parmetros invlidos: funcionario_id e data_pagamento so obrigatrios"),l(!1);return}u()},[a,s]);const u=async()=>{var v,g;try{l(!0),d(null);const y=await V.get("/comissoes/fechamentos/detalhe",{params:{funcionario_id:a,data_pagamento:s}});y.data.success?o(y.data):d("Erro ao carregar detalhes do fechamento")}catch(y){console.error("Erro ao carregar detalhes:",y),d(((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao carregar detalhes do fechamento")}finally{l(!1)}},m=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),x=v=>v?new Date(v+"T00:00:00").toLocaleDateString("pt-BR"):"-",h=v=>v?new Date(v).toLocaleString("pt-BR"):"-",b=()=>{t("/comissoes/fechamentos")};if(i)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando detalhes..."})]})})});if(c||!n)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c||"Fechamento no encontrado"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors",children:"Voltar"})]})]})});const{fechamento:p,comissoes:f}=n;return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-4",children:[e.jsxs("button",{onClick:b,className:"mb-4 inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Detalhes do Fechamento"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visualizao completa das comisses includas neste fechamento"}),e.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-yellow-100 border border-yellow-300",children:[e.jsx("svg",{className:"h-4 w-4 text-yellow-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Somente Leitura - Registro de Auditoria"})]})]}),e.jsxs("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informaes do Fechamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Funcionrio"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-purple-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-700 font-semibold text-sm",children:p.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.nome_funcionario}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",p.funcionario_id]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data do Fechamento"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:h(p.data_fechamento)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data de Pagamento"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:x(p.data_pagamento)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Quantidade de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:p.quantidade_comissoes})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(p.valor_total)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Perodo das Vendas"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:p.periodo_vendas})]})]}),p.observacao_pagamento&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Observaes"}),e.jsx("p",{className:"text-sm text-gray-800 italic",children:p.observacao_pagamento})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comisses Includas"}),f&&f.length>0?e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Venda"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Venda"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Comisso"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comisso"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((v,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:v.nome_cliente||"Cliente no identificado"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:v.nome_produto||"Produto no identificado"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:x(v.data_venda)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:v.quantidade}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm text-gray-900",children:m(v.valor_venda_snapshot)}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:[v.percentual_snapshot,"%"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-semibold text-green-600",children:m(v.valor_comissao)})]},v.id||g))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"6",className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"TOTAL:"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-base font-bold text-green-700",children:m(p.valor_total)})]})})]})}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-yellow-800",children:"Nenhuma comisso encontrada para este fechamento."})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Informaes Importantes"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Este  um registro imutvel de auditoria"}),e.jsx("li",{children:"No  possvel editar ou reverter fechamentos realizados"}),e.jsx("li",{children:"Os valores foram capturados no momento do fechamento (snapshot)"}),e.jsx("li",{children:"Para questes sobre este fechamento, entre em contato com a administrao"})]})]})]})})]})})},b_e=()=>{const t=Kt(),[r,a]=j.useState("margem-produto"),[s,n]=j.useState(!1),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(null),[m,x]=j.useState(null),[h,b]=j.useState(null),[p,f]=j.useState(null),[v,g]=j.useState(null),[y,N]=j.useState(null),_=async R=>{n(!0);try{const B={};o&&(B.data_inicio=o),l&&(B.data_fim=l);let O="",L=null;switch(R){case"margem-produto":O="/relatorios-comissoes/margem-produto",L=u;break;case"produtos-prejudiciais":O="/relatorios-comissoes/produtos-prejudiciais",L=x;break;case"ranking-funcionarios":O="/relatorios-comissoes/ranking-funcionarios",L=b;break;case"ranking-produtos":O="/relatorios-comissoes/ranking-produtos",L=f;break;case"ranking-categorias":O="/relatorios-comissoes/ranking-categorias",L=g;break;case"dre":O="/relatorios-comissoes/visao-dre",B.ano=2026,L=N;break;default:n(!1);return}const E=await V.get(O,{params:B,timeout:1e4});L(E.data)}catch(B){console.error(`Erro ao carregar relatrio ${R}:`,B),B.code==="ECONNABORTED"||B.message.includes("timeout")?alert(" Tempo de resposta excedido. Verifique se o backend est rodando."):alert(" Erro ao carregar relatrio. Verifique o console para detalhes.")}finally{n(!1)}};j.useEffect(()=>{_(r)},[r]);const w=()=>{_(r)},S=R=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R),C=R=>`${R.toFixed(2)}%`,k=async()=>{try{const R={tipo:r,data_inicio:o,data_fim:l},B=await V.get("/relatorios-comissoes/exportar-csv",{params:R,responseType:"blob"}),O=window.URL.createObjectURL(new Blob([B.data])),L=document.createElement("a");L.href=O,L.setAttribute("download",`relatorio_${r}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(L),L.click(),L.remove()}catch(R){console.error("Erro ao exportar CSV:",R),alert("Erro ao exportar arquivo")}},F=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#a28bd4","#f48fb1"],q=R=>R===3?"text-red-700 bg-red-100 border-red-300":R===2?"text-orange-700 bg-orange-100 border-orange-300":"text-yellow-700 bg-yellow-100 border-yellow-300",A=()=>{const R=[{id:"margem-produto",label:" Margem por Produto",icone:""},{id:"produtos-prejudiciais",label:" Produtos Prejudiciais",icone:""},{id:"ranking-funcionarios",label:" Ranking Funcionrios",icone:""},{id:"ranking-produtos",label:" Ranking Produtos",icone:""},{id:"ranking-categorias",label:" Ranking Categorias",icone:""},{id:"dre",label:" Viso DRE",icone:""}];return e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:R.map(B=>e.jsxs("button",{onClick:()=>a(B.id),className:`px-4 py-3 rounded-lg font-medium whitespace-nowrap transition-all ${r===B.id?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"text-xl mr-2",children:B.icone}),B.label]},B.id))})},T=()=>e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Data Incio"}),e.jsx("input",{type:"date",value:o,onChange:R=>i(R.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Data Fim"}),e.jsx("input",{type:"date",value:l,onChange:R=>c(R.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition mt-6",children:" Buscar"}),e.jsx("button",{onClick:()=>{i(""),c(""),_(r)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition mt-6",children:" Limpar"}),["margem-produto","produtos-prejudiciais","ranking-funcionarios","ranking-produtos"].includes(r)&&e.jsx("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition mt-6",children:" Exportar CSV"})]})]})}),U=()=>{if(!d)return e.jsx("div",{className:"text-center py-12",children:"Carregando..."});const R=d.dados.slice(0,10);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total de Produtos"}),e.jsx("div",{className:"text-3xl font-bold text-blue-800",children:d.total_produtos})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Produtos com Margem Negativa"}),e.jsx("div",{className:"text-3xl font-bold text-red-800",children:d.produtos_com_alerta})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Produtos Saudveis"}),e.jsx("div",{className:"text-3xl font-bold text-green-800",children:d.total_produtos-d.produtos_com_alerta})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Top 10 Produtos por Margem Lquida"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(zn,{data:R,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"produto_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Rr,{}),e.jsx(lr,{formatter:B=>S(B)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"margem_liquida",fill:"#82ca9d",name:"Margem Lquida"}),e.jsx(Mr,{dataKey:"valor_comissao",fill:"#ff7c7c",name:"Comisso"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Lquida"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Margem"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.dados.map((B,O)=>e.jsxs("tr",{className:B.alerta_margem_negativa?"bg-red-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:B.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:B.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(B.valor_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(B.valor_custo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:S(B.valor_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold",children:e.jsx("span",{className:B.margem_liquida<0?"text-red-600":"text-green-600",children:S(B.margem_liquida)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:C(B.percentual_margem)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:B.alerta_margem_negativa?e.jsx("span",{className:"px-2 py-1 text-xs font-bold text-red-700 bg-red-100 rounded",children:" NEGATIVA"}):e.jsx("span",{className:"px-2 py-1 text-xs font-bold text-green-700 bg-green-100 rounded",children:" OK"})})]},O))})]})})})]})},K=()=>m?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em vendas j realizadas. Os dados no alteram comisses, preos ou histricos e no devem ser usados para ajustes retroativos."]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Produtos Analisados"}),e.jsx("div",{className:"text-3xl font-bold text-blue-800",children:m.total_produtos_analisados})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Crticos"}),e.jsx("div",{className:"text-3xl font-bold text-red-800",children:m.produtos_criticos})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Prejudiciais"}),e.jsx("div",{className:"text-3xl font-bold text-orange-800",children:m.total_produtos_prejudiciais})]})]}),e.jsx("div",{className:"space-y-4",children:m.dados.map((R,B)=>e.jsxs("div",{className:`border-2 rounded-lg p-6 ${q(R.nivel_gravidade)}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:[R.nivel_gravidade===3&&"",R.nivel_gravidade===2&&"",R.nivel_gravidade===1&&""," ",R.produto_nome]}),e.jsx("p",{className:"text-sm opacity-75",children:R.categoria_nome})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:"Impacto Financeiro"}),e.jsx("div",{className:"text-2xl font-bold",children:S(R.impacto_financeiro)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"Margem Lquida"}),e.jsx("div",{className:"text-lg font-bold",children:S(R.margem_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"% Margem"}),e.jsx("div",{className:"text-lg font-bold",children:C(R.percentual_margem)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"Comisso"}),e.jsx("div",{className:"text-lg font-bold",children:S(R.valor_comissao)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"% Comisso"}),e.jsx("div",{className:"text-lg font-bold",children:C(R.percentual_comissao)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold mb-2",children:" Alertas:"}),e.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:R.alertas.map((O,L)=>e.jsx("li",{children:O},L))})]})]},B))})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),I=()=>h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Funcionrios por Volume de Comisses (10 maiores)"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(zn,{data:h.ranking,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"funcionario_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Rr,{}),e.jsx(lr,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_comissao",fill:"#8884d8",name:"Total de Comisses"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Mdia"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.ranking.map(R=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[R.posicao,""]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.funcionario_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_comissoes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(R.media_comissao)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),Y=()=>p?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Produtos por Volume de Comisses (10 maiores)"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(zn,{data:p.ranking,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"produto_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Rr,{}),e.jsx(lr,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_comissao",fill:"#82ca9d",name:"Total de Comisses"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Vendas"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Venda"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.ranking.map(R=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-lg font-bold text-gray-700",children:[R.posicao,""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:R.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_vendas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(R.total_venda)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),D=()=>v?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Distribuio de Comisses por Categoria"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(S1,{children:[e.jsx(On,{data:v.ranking,dataKey:"total_comissao",nameKey:"categoria_nome",cx:"50%",cy:"50%",outerRadius:120,label:R=>`${R.categoria_nome}: ${R.percentual_total}%`,children:v.ranking.map((R,B)=>e.jsx(Sl,{fill:F[B%F.length]},`cell-${B}`))}),e.jsx(lr,{formatter:R=>S(R)})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% do Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Comisses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Vendas"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.ranking.map(R=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-lg font-bold text-gray-700",children:[R.posicao,""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600 font-medium",children:C(R.percentual_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_comissoes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(R.total_venda)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),W=()=>y?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Regime de competncia:"})," as comisses so reconhecidas como despesa na data da venda, independentemente do pagamento. Inclui comisses pendentes e pagas."]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Receita Bruta (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:S(y.total_ano.receita_bruta)})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Despesa Comisso (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-orange-800",children:S(y.total_ano.despesa_comissao)})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Margem Lquida (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:S(y.total_ano.margem_liquida)})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"% Comisso sobre Receita"}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:C(y.total_ano.percentual_comissao)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Evoluo Mensal - DRE"}),e.jsx(ua,{width:"100%",height:400,children:e.jsxs(Jd,{data:y.dados_mensais,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"mes_nome"}),e.jsx(Rr,{}),e.jsx(lr,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"receita_bruta",stroke:"#8884d8",name:"Receita Bruta",strokeWidth:2}),e.jsx(as,{type:"monotone",dataKey:"despesa_comissao",stroke:"#ff7c7c",name:"Despesa Comisso",strokeWidth:2}),e.jsx(as,{type:"monotone",dataKey:"margem_liquida",stroke:"#82ca9d",name:"Margem Lquida",strokeWidth:2})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Receita Bruta"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Bruta"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Lquida"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Comisso"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.dados_mensais.map(R=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.mes_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600 font-medium",children:S(R.receita_bruta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(R.custo_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:S(R.despesa_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-700",children:S(R.margem_bruta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.margem_liquida)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-purple-600",children:C(R.percentual_comissao_sobre_receita)})]},R.mes))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/comissoes-listagem"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar para Demonstrativo"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" Relatrios Analticos de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Anlise de rentabilidade, margem e tomada de deciso estratgica"})]}),A(),T(),s?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"})}):e.jsxs(e.Fragment,{children:[r==="margem-produto"&&U(),r==="produtos-prejudiciais"&&K(),r==="ranking-funcionarios"&&I(),r==="ranking-produtos"&&Y(),r==="ranking-categorias"&&D(),r==="dre"&&W()]})]})};function M6(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0});j.useEffect(()=>{u(),m()},[]);const u=async()=>{try{const v=await V.get("/categorias-financeiras");r(v.data.filter(g=>g.ativo))}catch(v){console.error("Erro ao carregar categorias:",v),alert("Erro ao carregar categorias")}},m=async()=>{o(!0);try{const v=await V.get("/subcategorias");s(v.data)}catch(v){console.error("Erro ao carregar subcategorias:",v),alert("Erro ao carregar subcategorias")}finally{o(!1)}},x=async v=>{if(v.preventDefault(),!c.categoria_id||!c.nome){alert("Preencha categoria e nome");return}try{c.id?await V.put(`/subcategorias/${c.id}`,c):await V.post("/subcategorias",c),l(!1),d({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0}),m()}catch(g){console.error("Erro ao salvar:",g),alert("Erro ao salvar subcategoria")}},h=v=>{d(v),l(!0)},b=async v=>{if(confirm("Deseja realmente excluir esta subcategoria?"))try{await V.delete(`/subcategorias/${v}`),m()}catch(g){console.error("Erro ao excluir:",g),alert("Erro ao excluir subcategoria")}},p=v=>{const g=t.find(y=>y.id===v);return g?g.nome:"-"},f=a.reduce((v,g)=>{const y=g.categoria_id;return v[y]||(v[y]={categoria:p(y),itens:[]}),v[y].itens.push(g),v},{});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Subcategorias"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gerencie as subcategorias de produtos"})]}),e.jsxs("button",{onClick:()=>{d({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("span",{children:"+"}),"Nova Subcategoria"]})]}),n?e.jsx("div",{className:"text-center py-8",children:"Carregando..."}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(f).map(([v,g])=>e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:e.jsx("h2",{className:"font-semibold text-lg text-gray-800",children:g.categoria})}),e.jsx("div",{className:"divide-y",children:g.itens.map(y=>e.jsxs("div",{className:"px-4 py-3 flex justify-between items-center hover:bg-gray-50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:y.nome}),y.descricao&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:y.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.ativo?"Ativo":"Inativo"}),e.jsx("button",{onClick:()=>h(y),className:"text-blue-600 hover:text-blue-800 px-3 py-1",children:"Editar"}),e.jsx("button",{onClick:()=>b(y.id),className:"text-red-600 hover:text-red-800 px-3 py-1",children:"Excluir"})]})]},y.id))})]},v)),Object.keys(f).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma subcategoria cadastrada"})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[c.id?"Editar":"Nova"," Subcategoria"]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),e.jsxs("select",{value:c.categoria_id,onChange:v=>d({...c,categoria_id:parseInt(v.target.value)}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),t.map(v=>e.jsx("option",{value:v.id,children:v.nome},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:c.nome,onChange:v=>d({...c,nome:v.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:c.descricao,onChange:v=>d({...c,descricao:v.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.ativo,onChange:v=>d({...c,ativo:v.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Ativo"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Salvar"})]})]})]})})]})}const v_e=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(new Set),[u,m]=j.useState({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),x=4;j.useEffect(()=>{h()},[]);const h=async()=>{try{s(!0);const S=await V.get("/produtos/categorias");r(S.data)}catch(S){console.error("Erro ao carregar categorias:",S),alert("Erro ao carregar categorias")}finally{s(!1)}},b=S=>{const C=new Set(c);C.has(S)?C.delete(S):C.add(S),d(C)},p=async S=>{var C,k;S.preventDefault();try{i?await V.put(`/produtos/categorias/${i}`,u):await V.post("/produtos/categorias",u),o(!1),l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),h()}catch(F){console.error("Erro ao salvar categoria:",F),(k=(C=F.response)==null?void 0:C.data)!=null&&k.detail?alert(F.response.data.detail):alert("Erro ao salvar categoria")}},f=S=>{l(S.id),m({nome:S.nome,descricao:S.descricao||"",categoria_pai_id:S.categoria_pai_id,ordem:S.ordem}),o(!0)},v=async S=>{var C,k;if(S.total_filhos>0){alert(`Esta categoria possui ${S.total_filhos} subcategoria(s). Remova-as primeiro.`);return}if(!(S.total_produtos>0&&!confirm(`Esta categoria possui ${S.total_produtos} produto(s). Deseja realmente excluir?`)))try{await V.delete(`/produtos/categorias/${S.id}`),h()}catch(F){console.error("Erro ao excluir categoria:",F),alert(((k=(C=F.response)==null?void 0:C.data)==null?void 0:k.detail)||"Erro ao excluir categoria")}},g=S=>{if(S.nivel>=x){alert(`Limite de ${x} nveis de categorias atingido.`);return}l(null),m({nome:"",descricao:"",categoria_pai_id:S.id,ordem:0}),o(!0)},y=()=>{l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),o(!0)},N=(S=null,C=1)=>t.filter(k=>k.categoria_pai_id===S).sort((k,F)=>k.ordem-F.ordem||k.nome.localeCompare(F.nome)).map(k=>({...k,nivel:C,filhos:N(k.id,C+1)})),_=(S,C=1)=>{const k=S.filhos&&S.filhos.length>0,F=c.has(S.id),q=C<x,A=(C-1)*30;return e.jsxs(pe.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white hover:bg-gray-50 border-b",style:{paddingLeft:`${20+A}px`},children:[e.jsx("div",{className:"w-5 flex items-center justify-center",children:k?e.jsx("button",{onClick:()=>b(S.id),className:"text-gray-500 hover:text-gray-700 transition-colors",children:F?e.jsx(ac,{size:18}):e.jsx(Ml,{size:18})}):e.jsx("span",{className:"text-gray-300",children:""})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800",children:S.nome}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Nvel ",C]}),S.total_filhos>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:[S.total_filhos," sub"]}),S.total_produtos>0&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:[S.total_produtos," produtos"]})]}),S.descricao&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[q&&e.jsx("button",{onClick:()=>g(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Adicionar subcategoria",children:e.jsx(gs,{size:18})}),!q&&e.jsx("span",{className:"p-2 text-gray-300 cursor-not-allowed",title:`Limite de ${x} nveis atingido`,children:e.jsx(fr,{size:18})}),e.jsx("button",{onClick:()=>f(S),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded transition-colors",title:"Editar",children:e.jsx(Oi,{size:18})}),e.jsx("button",{onClick:()=>v(S),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:e.jsx(Fo,{size:18})})]})]}),k&&F&&e.jsx("div",{children:S.filhos.map(T=>_(T,C+1))})]},S.id)},w=N();return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Carregando categorias..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Categorias"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Gerencie suas categorias hierarquicamente (at ",x," nveis)"]})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:[e.jsx(gs,{size:20}),"Nova Categoria"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(fr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhuma categoria cadastrada"}),e.jsx("button",{onClick:y,className:"mt-4 text-blue-600 hover:text-blue-700",children:"Criar primeira categoria"})]}):e.jsx("div",{children:w.map(S=>_(S))})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Editar Categoria":u.categoria_pai_id?"Nova Subcategoria":"Nova Categoria"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:u.nome,onChange:S=>m({...u,nome:S.target.value}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:u.descricao,onChange:S=>m({...u,descricao:S.target.value}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:u.ordem,onChange:S=>m({...u,ordem:parseInt(S.target.value)||0}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Menor valor aparece primeiro"})]}),u.categoria_pai_id&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx(fr,{className:"inline mr-1"}),"Esta ser uma subcategoria"]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0})},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:i?"Salvar":"Criar"})]})]})]})})]})},y_e=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState(null),[b,p]=j.useState(new Set),[f,v]=j.useState("todos"),[g,y]=j.useState({nome:"",tipo:"despesa",cor:"#6366f1",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),[N,_]=j.useState({categoria_id:null,nome:"",descricao:"",ativo:!0}),w=["","","","","","","","","","","","","","","","","","","",""],S=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899"];j.useEffect(()=>{C()},[]);const C=async()=>{await Promise.all([k(),F()])},k=async()=>{try{o(!0);const z=await V.get("/categorias-financeiras/");console.log(" Categorias carregadas:",z.data.length),console.log(" Primeira categoria:",z.data[0]),r(z.data)}catch(z){console.error("Erro ao carregar categorias:",z),be.error("Erro ao carregar categorias financeiras")}finally{o(!1)}},F=async()=>{var z,le;try{console.log(" Iniciando carregamento de subcategorias DRE...");const Q=await V.get("/dre/subcategorias");console.log(" Resposta recebida:",Q),console.log(" Subcategorias DRE carregadas:",Q.data.length),console.log(" Primeira subcategoria:",Q.data[0]),console.log(" Todas as subcategorias:",Q.data),s(Q.data)}catch(Q){console.error(" ERRO ao carregar subcategorias DRE:",Q),console.error(" Erro completo:",((z=Q.response)==null?void 0:z.data)||Q.message),console.error(" Status:",(le=Q.response)==null?void 0:le.status),s([])}},q=z=>{const le=new Set(b);le.has(z)?le.delete(z):le.add(z),p(le)},A=z=>{if(!z.dre_subcategoria_id)return[];const le=a.find(ne=>ne.id===z.dre_subcategoria_id);if(!le)return console.log(` Categoria "${z.nome}" tem dre_subcategoria_id=${z.dre_subcategoria_id} mas no encontrada`),[];const Q=a.filter(ne=>ne.categoria_id===le.categoria_id);return console.log(` Categoria "${z.nome}"  ${Q.length} subcategorias DRE`),Q},T=async z=>{var le,Q;if(z.preventDefault(),!g.nome||!g.tipo){be.error("Preencha nome e tipo");return}try{let ne;if(u)await V.put(`/categorias-financeiras/${u}`,{nome:g.nome,tipo:g.tipo,cor:g.cor,icone:g.icone,descricao:g.descricao,ativo:g.ativo}),ne=u,be.success("Categoria atualizada com sucesso!");else if(ne=(await V.post("/categorias-financeiras/",{nome:g.nome,tipo:g.tipo,cor:g.cor,icone:g.icone,descricao:g.descricao,ativo:g.ativo})).data.id,be.success("Categoria criada com sucesso!"),g.novasSubcategorias.length>0){const ae=g.novasSubcategorias.filter(ie=>ie.nome.trim());for(const ie of ae)try{await V.post("/subcategorias/",{categoria_id:ne,nome:ie.nome,descricao:ie.descricao,ativo:ie.ativo})}catch(ve){console.error("Erro ao criar subcategoria:",ve),be.error(`Erro ao criar subcategoria: ${ie.nome}`)}ae.length>0&&be.success(`${ae.length} subcategoria(s) criada(s)!`)}l(!1),I(),C()}catch(ne){console.error("Erro ao salvar:",ne),be.error(((Q=(le=ne.response)==null?void 0:le.data)==null?void 0:Q.detail)||"Erro ao salvar categoria")}},U=async z=>{console.log(` Editando categoria "${z.nome}" (ID: ${z.id})`);const le=A(z);console.log(` Subcategorias DRE encontradas: ${le.length}`,le);const Q=le.map(ne=>({id:ne.id,nome:ne.nome,descricao:ne.descricao||"",ativo:ne.ativo,tipo_custo:ne.tipo_custo,escopo_rateio:ne.escopo_rateio}));y({nome:z.nome,tipo:z.tipo,cor:z.cor||"#6366f1",icone:z.icone||"",descricao:z.descricao||"",ativo:z.ativo,novasSubcategorias:Q}),m(z.id),l(!0)},K=async z=>{var le,Q;if(window.confirm("Deseja realmente excluir esta categoria?"))try{await V.delete(`/categorias-financeiras/${z}`),be.success("Categoria excluda com sucesso!"),C()}catch(ne){console.error("Erro ao excluir:",ne),be.error(((Q=(le=ne.response)==null?void 0:le.data)==null?void 0:Q.detail)||"Erro ao excluir categoria")}},I=()=>{y({nome:"",tipo:"despesa",cor:"#6366f1",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),m(null)},Y=(z="")=>{y({...g,novasSubcategorias:[...g.novasSubcategorias,{nome:z,descricao:"",ativo:!0}]})},D=(z,le,Q)=>{const ne=[...g.novasSubcategorias];ne[z][le]=Q,y({...g,novasSubcategorias:ne})},W=z=>{const le=g.novasSubcategorias.filter((Q,ne)=>ne!==z);y({...g,novasSubcategorias:le})},R=(z,le)=>{z.key==="Tab"&&!z.shiftKey&&le===g.novasSubcategorias.length-1&&(z.preventDefault(),Y())},B=()=>{_({categoria_id:null,nome:"",descricao:"",ativo:!0}),h(null)},O=async z=>{var le,Q;if(z.preventDefault(),!N.categoria_id||!N.nome){be.error("Preencha categoria e nome");return}try{x?(await V.put(`/subcategorias/${x}`,N),be.success("Subcategoria atualizada!")):(await V.post("/subcategorias",N),be.success("Subcategoria criada!")),d(!1),B(),carregarSubcategorias()}catch(ne){console.error("Erro ao salvar:",ne),be.error(((Q=(le=ne.response)==null?void 0:le.data)==null?void 0:Q.detail)||"Erro ao salvar subcategoria")}},L=t.filter(z=>f==="todos"?!0:z.tipo===f),E=t.filter(z=>z.tipo==="despesa").length,M=t.filter(z=>z.tipo==="receita").length;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Categorias Financeiras"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Organize suas receitas e despesas |",e.jsxs("span",{className:"text-red-600 ml-2",children:[" ",E," despesas"]}),e.jsxs("span",{className:"text-green-600 ml-2",children:[" ",M," receitas"]})]})]}),e.jsxs("button",{onClick:()=>{I(),l(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:[e.jsx(gs,{})," Nova Categoria"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>v("todos"),className:`px-4 py-2 rounded-lg ${f==="todos"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Todas (",t.length,")"]}),e.jsxs("button",{onClick:()=>v("despesa"),className:`px-4 py-2 rounded-lg ${f==="despesa"?"bg-red-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Despesas (",E,")"]}),e.jsxs("button",{onClick:()=>v("receita"),className:`px-4 py-2 rounded-lg ${f==="receita"?"bg-green-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Receitas (",M,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n?e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"Carregando..."}):L.length===0?e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma categoria encontrada"}):e.jsx("div",{className:"divide-y divide-gray-200",children:L.map(z=>{const le=A(z),Q=b.has(z.id),ne=le.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("button",{onClick:()=>q(z.id),className:`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 transform hover:scale-105 ${ne?Q?"text-white bg-gradient-to-r from-purple-600 to-purple-700 shadow-lg hover:shadow-xl":"text-purple-600 bg-purple-100 hover:bg-purple-200 hover:text-purple-700 shadow-md hover:shadow-lg":"text-gray-300 cursor-not-allowed bg-gray-50"}`,disabled:!ne,title:ne?Q?"Recolher subcategorias":"Expandir subcategorias":"Sem subcategorias DRE",children:ne?Q?e.jsx(ac,{size:22,strokeWidth:2.5}):e.jsx(Ml,{size:22,strokeWidth:2.5}):e.jsx(Ml,{size:22})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{style:{backgroundColor:z.cor},className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-lg",children:z.icone||""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:z.nome}),z.descricao&&e.jsx("div",{className:"text-sm text-gray-500",children:z.descricao})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z.tipo==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.tipo==="receita"?" Receita":" Despesa"}),ne&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{children:" DRE"}),e.jsx("span",{className:"bg-purple-200 text-purple-900 px-1.5 rounded-full font-bold",children:le.length})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>U(z),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md",title:"Editar",children:e.jsx(Oi,{size:18})}),e.jsx("button",{onClick:()=>K(z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Excluir",children:e.jsx(Fo,{size:18})})]})]}),Q&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-t border-purple-100",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-2 bg-purple-100/50 border-b border-purple-200",children:e.jsxs("span",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:[" Subcategorias DRE (",le.length,")"]})}),le.map(re=>e.jsxs("div",{className:"px-6 py-3 flex items-center gap-4 ml-9",children:[e.jsx("span",{className:"text-purple-400 text-lg",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:re.nome}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded",children:re.tipo_custo}),re.escopo_rateio&&e.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded",children:re.escopo_rateio})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re.ativo?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:re.ativo?" Ativo":" Inativo"})]},re.id))]}):e.jsx("div",{className:"px-6 py-4 ml-9 text-center",children:e.jsxs("div",{className:"text-gray-400 text-sm",children:[e.jsx("div",{className:"mb-2",children:""}),e.jsx("div",{className:"font-medium",children:"Nenhuma subcategoria DRE cadastrada"}),e.jsx("div",{className:"text-xs mt-1",children:"Configure subcategorias no mdulo DRE"})]})})})]},z.id)})})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-bold",children:u?"Editar Categoria":"Nova Categoria"}),e.jsx("button",{onClick:()=>{l(!1),I()},className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:g.nome,onChange:z=>y({...g,nome:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),e.jsxs("select",{value:g.tipo,onChange:z=>y({...g,tipo:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"despesa",children:" Despesa"}),e.jsx("option",{value:"receita",children:" Receita"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone"}),e.jsx("select",{value:g.icone,onChange:z=>y({...g,icone:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:w.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:g.cor,onChange:z=>y({...g,cor:z.target.value}),className:"w-12 h-10 border border-gray-300 rounded-md"}),e.jsx("select",{value:g.cor,onChange:z=>y({...g,cor:z.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:S.map(z=>e.jsx("option",{value:z,children:z},z))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:g.descricao,onChange:z=>y({...g,descricao:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:"3"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:g.ativo,onChange:z=>y({...g,ativo:z.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm text-gray-700",children:"Categoria ativa"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategorias DRE (opcional)"}),e.jsxs("button",{type:"button",onClick:()=>Y(),className:"text-sm text-purple-600 hover:text-purple-800 flex items-center gap-1",children:[e.jsx(gs,{size:14})," Adicionar"]})]}),g.novasSubcategorias.length>0&&e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.novasSubcategorias.map((z,le)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("input",{type:"text",value:z.nome,onChange:Q=>D(le,"nome",Q.target.value),onKeyDown:Q=>R(Q,le),placeholder:"Nome da subcategoria (Tab para adicionar mais)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>W(le),className:"text-red-600 hover:text-red-800 p-1",title:"Remover",children:e.jsx(Fo,{size:16})})]},le))}),g.novasSubcategorias.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:'Clique em "Adicionar" ou crie a categoria primeiro e depois adicione subcategorias'})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),I()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:u?"Atualizar":"Criar"})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:x?"Editar Subcategoria DRE":"Nova Subcategoria DRE"}),N.categoria_id&&t.find(z=>z.id===N.categoria_id)&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Categoria: "}),e.jsx("span",{className:"font-semibold text-gray-800",children:t.find(z=>z.id===N.categoria_id).nome})]}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Subcategoria *"}),e.jsx("input",{type:"text",value:N.nome,onChange:z=>_({...N,nome:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:N.descricao,onChange:z=>_({...N,descricao:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.ativo,onChange:z=>_({...N,ativo:z.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),B()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:x?"Atualizar":"Criar"})]})]})]})})]})},j_e=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(new Set),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState(null),[b,p]=j.useState(null),[f,v]=j.useState(""),[g,y]=j.useState(""),[N,_]=j.useState({nome:"",ativo:!0}),[w,S]=j.useState({nome:"",especie_id:"",ativo:!0});j.useEffect(()=>{C()},[]);const C=async()=>{try{s(!0);const[W,R]=await Promise.all([V.get("/cadastros/especies"),V.get("/cadastros/racas")]),B=W.data.map(L=>({...L,racas:R.data.filter(E=>E.especie_id===L.id)}));r(B);const O=new Set(B.map(L=>L.id));o(O)}catch(W){console.error("Erro ao carregar dados:",W),v("Erro ao carregar dados")}finally{s(!1)}},k=W=>{const R=new Set(n);R.has(W)?R.delete(W):R.add(W),o(R)},F=(W=null)=>{W?(m(W),_({nome:W.nome,ativo:W.ativo})):(m(null),_({nome:"",ativo:!0})),v(""),l(!0)},q=()=>{l(!1),m(null),_({nome:"",ativo:!0}),v("")},A=async W=>{var R,B;if(W.preventDefault(),v(""),!N.nome||N.nome.trim()===""){v("O nome da espcie  obrigatrio");return}try{u?await V.put(`/cadastros/especies/${u.id}`,N):await V.post("/cadastros/especies",N),C(),q()}catch(O){console.error("Erro ao salvar espcie:",O),v(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao salvar espcie")}},T=async W=>{var R,B;if(window.confirm(`Deseja realmente desativar a espcie "${W.nome}"?

Isso tambm desativar todas as raas vinculadas.`))try{await V.delete(`/cadastros/especies/${W.id}`),C()}catch(O){console.error("Erro ao desativar espcie:",O),alert(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao desativar espcie")}},U=(W,R=null)=>{p(W),R?(h(R),S({nome:R.nome,especie_id:R.especie_id,ativo:R.ativo})):(h(null),S({nome:"",especie_id:W.id,ativo:!0})),v(""),d(!0)},K=()=>{d(!1),h(null),p(null),S({nome:"",especie_id:"",ativo:!0}),v("")},I=async W=>{var R,B;if(W.preventDefault(),v(""),!w.nome||w.nome.trim()===""){v("O nome da raa  obrigatrio");return}try{const O={nome:w.nome,especie_id:parseInt(w.especie_id),ativo:w.ativo};x?await V.put(`/cadastros/racas/${x.id}`,O):await V.post("/cadastros/racas",O),C(),K()}catch(O){console.error("Erro ao salvar raa:",O),v(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao salvar raa")}},Y=async W=>{var R,B;if(window.confirm(`Deseja realmente desativar a raa "${W.nome}"?`))try{await V.delete(`/cadastros/racas/${W.id}`),C()}catch(O){console.error("Erro ao desativar raa:",O),alert(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao desativar raa")}},D=t.filter(W=>W.nome.toLowerCase().includes(g.toLowerCase())||W.racas.some(R=>R.nome.toLowerCase().includes(g.toLowerCase())));return a?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Carregando espcies e raas..."})]}):e.jsxs("div",{className:"cadastros-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Espcies e Raas"}),e.jsx("p",{className:"page-subtitle",children:"Gerencie as espcies de animais e suas raas"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>F(),children:[e.jsx(gs,{})," Nova Espcie"]})]}),e.jsxs("div",{className:"filters-bar",children:[e.jsx("input",{type:"text",placeholder:"Buscar espcie ou raa...",value:g,onChange:W=>y(W.target.value),className:"search-input"}),e.jsxs("div",{className:"filter-info",children:[D.length," espcie",D.length!==1?"s":""]})]}),e.jsx("div",{className:"especies-list",children:D.length===0?e.jsx("div",{className:"empty-state",children:g?"Nenhuma espcie ou raa encontrada":"Nenhuma espcie cadastrada"}):D.map(W=>{const R=n.has(W.id),B=W.racas.filter(O=>O.ativo);return e.jsxs("div",{className:`especie-card ${W.ativo?"":"inactive"}`,children:[e.jsxs("div",{className:"especie-header",children:[e.jsxs("div",{className:"especie-info",onClick:()=>k(W.id),children:[e.jsx("button",{className:"expand-btn",children:R?e.jsx(ac,{size:20}):e.jsx(Ml,{size:20})}),e.jsx(Hr,{className:"especie-icon",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"especie-nome",children:W.nome}),e.jsxs("span",{className:"racas-count",children:[B.length," raa",B.length!==1?"s":""," ativa",B.length!==1?"s":""]})]}),!W.ativo&&e.jsx("span",{className:"badge badge-danger",children:"Inativa"})]}),e.jsxs("div",{className:"especie-actions",children:[e.jsx("button",{className:"btn-icon btn-success",onClick:()=>U(W),title:"Adicionar Raa",children:e.jsx(gs,{})}),e.jsx("button",{className:"btn-icon btn-edit",onClick:()=>F(W),title:"Editar Espcie",children:e.jsx(Oi,{})}),W.ativo&&e.jsx("button",{className:"btn-icon btn-delete",onClick:()=>T(W),title:"Desativar Espcie",children:e.jsx(Fo,{})})]})]}),R&&e.jsx("div",{className:"racas-list",children:W.racas.length===0?e.jsxs("div",{className:"empty-racas",children:[e.jsx("p",{children:"Nenhuma raa cadastrada ainda"}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>U(W),children:[e.jsx(gs,{})," Adicionar Primeira Raa"]})]}):e.jsx(e.Fragment,{children:W.racas.map(O=>e.jsxs("div",{className:`raca-item ${O.ativo?"":"inactive"}`,children:[e.jsxs("div",{className:"raca-info",children:[e.jsx(Wm,{className:"raca-icon",size:16}),e.jsx("span",{className:"raca-nome",children:O.nome}),!O.ativo&&e.jsx("span",{className:"badge badge-sm badge-danger",children:"Inativa"})]}),e.jsxs("div",{className:"raca-actions",children:[e.jsx("button",{className:"btn-icon-sm btn-edit",onClick:()=>U(W,O),title:"Editar Raa",children:e.jsx(Oi,{size:14})}),O.ativo&&e.jsx("button",{className:"btn-icon-sm btn-delete",onClick:()=>Y(O),title:"Desativar Raa",children:e.jsx(Fo,{size:14})})]})]},O.id))})})]},W.id)})}),i&&e.jsx("div",{className:"modal-overlay",onClick:q,children:e.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:u?"Editar Espcie":"Nova Espcie"}),e.jsx("button",{className:"btn-close",onClick:q,children:e.jsx(Ro,{})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"modal-body",children:[f&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(fr,{})," ",f]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nome da Espcie *"}),e.jsx("input",{type:"text",value:N.nome,onChange:W=>_({...N,nome:W.target.value}),placeholder:"Ex: Co, Gato, Ave, Rptil...",required:!0,autoFocus:!0}),e.jsx("small",{children:"Exemplos: Co, Gato, Ave, Rptil, Coelho, Peixe, Hamster"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:N.ativo,onChange:W=>_({...N,ativo:W.target.checked})}),e.jsx("span",{children:"Espcie ativa"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:q,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(Bl,{})," Salvar"]})]})]})]})}),c&&e.jsx("div",{className:"modal-overlay",onClick:K,children:e.jsxs("div",{className:"modal-content",onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[x?"Editar Raa":"Nova Raa",b&&e.jsxs("span",{className:"subtitle",children:[" - ",b.nome]})]}),e.jsx("button",{className:"btn-close",onClick:K,children:e.jsx(Ro,{})})]}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"modal-body",children:[f&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(fr,{})," ",f]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nome da Raa *"}),e.jsx("input",{type:"text",value:w.nome,onChange:W=>S({...w,nome:W.target.value}),placeholder:"Ex: Labrador, Siams, SRD...",required:!0,autoFocus:!0}),e.jsx("small",{children:"Exemplos: Labrador, Golden Retriever, SRD (Sem Raa Definida)"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:w.ativo,onChange:W=>S({...w,ativo:W.target.checked})}),e.jsx("span",{children:"Raa ativa"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:K,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(Bl,{})," Salvar"]})]})]})]})})]})},N_e=()=>{var I,Y,D,W;const{clienteId:t}=rc(),r=Kt(),[a,s]=j.useState(null),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState(null),[u,m]=j.useState(!0),[x,h]=j.useState(""),[b,p]=j.useState({}),[f,v]=j.useState({}),[g,y]=j.useState({}),[N,_]=j.useState({page:1,per_page:20,data_inicio:"",data_fim:"",tipo:"",status:""});j.useEffect(()=>{t&&w()},[t,N]);const w=async()=>{var R,B;try{m(!0),h("");const O=new URLSearchParams;O.append("page",N.page),O.append("per_page",N.per_page),N.data_inicio&&O.append("data_inicio",N.data_inicio),N.data_fim&&O.append("data_fim",N.data_fim),N.tipo&&O.append("tipo",N.tipo),N.status&&O.append("status",N.status);const L=await V.get(`/financeiro/cliente/${t}?${O.toString()}`);s(L.data.cliente),o(L.data.resumo),l(L.data.historico),d(L.data.paginacao)}catch(O){console.error("Erro ao carregar histrico financeiro:",O),h(((B=(R=O.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao carregar histrico financeiro")}finally{m(!1)}},S=R=>{_({...N,page:R})},C=R=>{_({...N,...R,page:1})},k=()=>{_({page:1,per_page:20,data_inicio:"",data_fim:"",tipo:"",status:""})},F=async(R,B)=>{var L,E;const O=`${R.tipo}-${B}`;if(b[O]){p({...b,[O]:!1});return}p({...b,[O]:!0}),R.tipo==="venda"&&!f[(L=R.detalhes)==null?void 0:L.venda_id]&&await q((E=R.detalhes)==null?void 0:E.venda_id)},q=async R=>{if(R)try{y({...g,[R]:!0});const B=await V.get(`/vendas/${R}`);v({...f,[R]:B.data})}catch(B){console.error("Erro ao carregar detalhes da venda:",B)}finally{y({...g,[R]:!1})}},A=R=>{R&&r(`/pdv?venda=${R}`)},T=R=>{switch(R){case"venda":return"";case"devolucao":return"";case"conta_receber":return"";case"recebimento":return"";case"credito":return"";default:return""}},U=R=>{switch(R){case"venda":return"Venda";case"devolucao":return"Devoluo";case"conta_receber":return"Conta a Receber";case"recebimento":return"Recebimento";case"credito":return"Crdito";default:return R}},K=R=>({finalizada:"bg-green-100 text-green-700",concluida:"bg-green-100 text-green-700",pendente:"bg-yellow-100 text-yellow-700",paga:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700",devolvida:"bg-red-100 text-red-700",efetivado:"bg-green-100 text-green-700"})[R]||"bg-gray-100 text-gray-700";return u&&!i.length?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando histrico financeiro..."})]})}):x?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-xl p-6 text-center",children:[e.jsx(fr,{className:"text-red-600 text-4xl mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao Carregar Dados"}),e.jsx("p",{className:"text-red-600 mb-4",children:x}),e.jsx("button",{onClick:()=>r("/clientes"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Voltar para Clientes"})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/clientes"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(jd,{}),e.jsx("span",{className:"font-medium",children:"Voltar para Clientes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(hh,{className:"text-purple-600"}),"Histrico Financeiro"]}),a&&e.jsxs("p",{className:"text-lg text-gray-600 mt-2 flex items-center gap-2",children:[e.jsx(Yn,{className:"text-gray-400"}),a.nome,e.jsxs("span",{className:"text-sm text-gray-400",children:["(",a.codigo,")"]})]})]}),n&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Crdito Disponvel"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",((I=a.credito_atual)==null?void 0:I.toFixed(2).replace(".",","))||"0,00"]})]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total Vendas (90d)"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",((Y=n.total_vendas_90d)==null?void 0:Y.toFixed(2).replace(".",","))||"0,00"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total em Aberto"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["R$ ",((D=n.total_em_aberto)==null?void 0:D.toFixed(2).replace(".",","))||"0,00"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"ltima Compra"}),n.ultima_compra?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",((W=n.ultima_compra.valor)==null?void 0:W.toFixed(2).replace(".",","))||"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(n.ultima_compra.data).toLocaleDateString("pt-BR")})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"Nenhuma compra"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total Transaes"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:n.total_transacoes_historico||0})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 mb-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(D2,{}),"Filtros"]}),e.jsx("button",{onClick:k,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Limpar filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(kn,{className:"inline mr-1"}),"Data Incio"]}),e.jsx("input",{type:"date",value:N.data_inicio,onChange:R=>C({data_inicio:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(kn,{className:"inline mr-1"}),"Data Fim"]}),e.jsx("input",{type:"date",value:N.data_fim,onChange:R=>C({data_fim:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:N.tipo,onChange:R=>C({tipo:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todas as transaes"}),e.jsx("option",{value:"venda",children:" Vendas"}),e.jsx("option",{value:"devolucao",children:" Devolues"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:N.status,onChange:R=>C({status:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"aberta",children:" Em Aberto"}),e.jsx("option",{value:"finalizada",children:" Finalizada (Paga)"}),e.jsx("option",{value:"cancelada",children:" Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Por pgina"}),e.jsxs("select",{value:N.per_page,onChange:R=>C({per_page:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Atualizando..."})]}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((R,B)=>{var z,le,Q,ne,re;const O=`${R.tipo}-${B}`,L=b[O],E=(z=R.detalhes)==null?void 0:z.venda_id,M=E?f[E]:null;return e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>F(R,B),className:"text-gray-600 hover:text-purple-600 transition-colors",children:L?e.jsx(KA,{size:18}):e.jsx(ac,{size:18})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.data?new Date(R.data).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm font-medium",children:[e.jsx("span",{className:"text-xl",children:T(R.tipo)}),U(R.tipo)]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md",children:[e.jsx("div",{className:"truncate",children:R.descricao}),((le=R.detalhes)==null?void 0:le.numero_venda)&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["#",R.detalhes.numero_venda]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:e.jsxs("span",{className:`font-bold ${R.valor<0?"text-red-600":"text-green-600"}`,children:[R.valor<0?"- ":"+ ","R$ ",Math.abs(R.valor).toFixed(2).replace(".",",")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${K(R.status)}`,children:R.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:R.tipo==="venda"&&E&&e.jsxs("button",{onClick:()=>A(E),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded-lg transition-colors flex items-center gap-1 mx-auto",children:[e.jsx(zl,{size:14}),"Ver no PDV"]})})]}),L&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 bg-gray-50",children:R.tipo==="venda"&&E?g[E]?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Carregando detalhes..."})]}):M?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(zl,{className:"text-blue-600"}),"Detalhes da Venda #",M.numero_venda]}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(M.data_venda).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Total da Venda"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",(Q=M.total)==null?void 0:Q.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Total de Itens"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:((ne=M.itens)==null?void 0:ne.length)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Desconto Total"}),e.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["R$ ",(M.desconto||0).toFixed(2).replace(".",",")]})]})]}),M.itens&&M.itens.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-2 border-b border-gray-200",children:e.jsxs("h5",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Zx,{className:"text-blue-600"}),"Produtos Vendidos"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Produto"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Preo Unit."}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Desc. %"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Desc. R$"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Subtotal"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.itens.map((ae,ie)=>{var ve,_e;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ae.produto_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-700",children:ae.quantidade}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:["R$ ",(ve=ae.preco_unitario)==null?void 0:ve.toFixed(2).replace(".",",")]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:[ae.desconto_percentual||0,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:["R$ ",(ae.desconto||0).toFixed(2).replace(".",",")]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:["R$ ",(_e=ae.subtotal)==null?void 0:_e.toFixed(2).replace(".",",")]})]},ie)})}),e.jsx("tfoot",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Total Geral:"}),e.jsxs("td",{className:"px-4 py-3 text-right text-lg font-bold text-green-600",children:["R$ ",(re=M.total)==null?void 0:re.toFixed(2).replace(".",",")]})]})})]})})]}),M.observacoes&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:" Observaes:"}),e.jsx("p",{className:"text-sm text-gray-700",children:M.observacoes})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No foi possvel carregar os detalhes da venda"})}):e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-3",children:"Detalhes da Transao"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 text-sm",children:Object.entries(R.detalhes||{}).map(([ae,ie])=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[ae.replace(/_/g," "),":"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:typeof ie=="number"?`R$ ${ie.toFixed(2).replace(".",",")}`:(ie==null?void 0:ie.toString())||"N/A"})]},ae))})]})})})]},O)})})]})}),c&&c.total_paginas>1&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",(c.pagina_atual-1)*c.itens_por_pagina+1," a"," ",Math.min(c.pagina_atual*c.itens_por_pagina,c.total_itens)," de"," ",c.total_itens," transaes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>S(c.pagina_atual-1),disabled:!c.tem_anterior,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${c.tem_anterior?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(HA,{}),"Anterior"]}),e.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Pgina ",c.pagina_atual," de ",c.total_paginas]}),e.jsxs("button",{onClick:()=>S(c.pagina_atual+1),disabled:!c.tem_proxima,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${c.tem_proxima?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Prxima",e.jsx(Ml,{})]})]})]})})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(rs,{className:"text-gray-300 text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Nenhuma transao encontrada"}),e.jsx("p",{className:"text-gray-500 mb-6",children:N.tipo||N.status||N.data_inicio||N.data_fim?"Tente ajustar os filtros para ver mais resultados":"Ainda no h transaes financeiras para este cliente"}),(N.tipo||N.status||N.data_inicio||N.data_fim)&&e.jsx("button",{onClick:k,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Limpar Filtros"})]})})]})})},w_e={vips_inativos:{titulo:"VIPs em Risco",descricao:"Clientes VIP sem compra h mais de 20 dias",icone:UA,cor:"red",bgGradient:"from-red-500 to-red-600",bgLight:"bg-red-50",borderLight:"border-red-200",textColor:"text-red-700"},clientes_inativos:{titulo:"Clientes Inativos",descricao:"Sem compra h mais de 90 dias",icone:Il,cor:"orange",bgGradient:"from-orange-500 to-orange-600",bgLight:"bg-orange-50",borderLight:"border-orange-200",textColor:"text-orange-700"},clientes_endividados:{titulo:"Alto Endividamento",descricao:"Clientes com saldo devedor significativo",icone:rs,cor:"yellow",bgGradient:"from-yellow-500 to-yellow-600",bgLight:"bg-yellow-50",borderLight:"border-yellow-200",textColor:"text-yellow-700"},oportunidades_novos:{titulo:"Novos Promissores",descricao:"Clientes novos com ticket alto",icone:sc,cor:"green",bgGradient:"from-green-500 to-green-600",bgLight:"bg-green-50",borderLight:"border-green-200",textColor:"text-green-700"},pets_sem_eventos:{titulo:"Pets Inativos",descricao:"Sem consulta h mais de 60 dias",icone:M2,cor:"purple",bgGradient:"from-purple-500 to-purple-600",bgLight:"bg-purple-50",borderLight:"border-purple-200",textColor:"text-purple-700"},whatsapp_inativo:{titulo:"WhatsApp Faltando",descricao:"Clientes sem nmero cadastrado",icone:pi,cor:"blue",bgGradient:"from-blue-500 to-blue-600",bgLight:"bg-blue-50",borderLight:"border-blue-200",textColor:"text-blue-700"}};function kc({tipo:t,dados:r,onClick:a}){const s=w_e[t],n=(s==null?void 0:s.icone)||Ll,o=r||{quantidade:0,impacto:null};return e.jsxs("div",{className:`${s.bgLight} border-2 ${s.borderLight} rounded-xl p-6 hover:shadow-lg transition-all cursor-pointer`,onClick:a,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 bg-gradient-to-br ${s.bgGradient} rounded-lg`,children:e.jsx(n,{className:"text-white",size:24})}),e.jsx(xh,{className:s.textColor,size:20})]}),e.jsx("h3",{className:`text-2xl font-bold ${s.textColor} mb-1`,children:(o==null?void 0:o.quantidade)??0}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:s.titulo}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:s.descricao}),(o==null?void 0:o.impacto)&&e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impacto estimado:"}),e.jsx("span",{className:`font-bold ${s.textColor}`,children:o.impacto})]})}),e.jsxs("button",{className:`mt-3 w-full py-2 text-sm font-medium ${s.textColor} hover:bg-white rounded-lg transition-colors flex items-center justify-center gap-2`,children:["Ver detalhes",e.jsx(xh,{size:14})]})]})}function __e(){var m,x,h,b,p;const t=Kt(),[r,a]=j.useState(!0),[s,n]=j.useState(null),[o,i]=j.useState(null);j.useEffect(()=>{l()},[]);const l=async()=>{var f;try{a(!0);const[v,g]=await Promise.all([V.get("/clientes/"),V.get("/segmentacao/estatisticas")]),y=v==null?void 0:v.data,N=Array.isArray(y)?y:Array.isArray(y==null?void 0:y.data)?y.data:[],w=(g==null?void 0:g.data)||{};console.log(" [Dashboard] Clientes carregados:",N.length);const S=c(N,w);n(S),i(new Date)}catch(v){console.error("Erro ao carregar dashboard:",v),n({vips_inativos:{quantidade:0,clientes:[],impacto:"R$ 0"},clientes_inativos:{quantidade:0,clientes:[],diasMedia:0},clientes_novos:{quantidade:0,clientes:[]},oportunidades_upsell:{quantidade:0,clientes:[],potencial:"R$ 0"},clientes_risco_churn:{quantidade:0,clientes:[],diasMedia:0}}),((f=v.response)==null?void 0:f.status)===403?alert("Voc no tem permisso para acessar o dashboard gerencial"):alert("Erro ao carregar dashboard gerencial")}finally{a(!1)}},c=(f,v)=>{const g=new Date,N=(Array.isArray(f)?f:[]).filter(Y=>(Y==null?void 0:Y.tipo_cadastro)==="cliente"),_=N.filter(Y=>{const D=(Y==null?void 0:Y.segmento)||"Regular",W=(Y==null?void 0:Y.dias_desde_ultima_compra)??999;return D==="VIP"&&W>20}),w=_.reduce((Y,D)=>Y+((D==null?void 0:D.total_90d)??0),0),S=N.filter(Y=>((Y==null?void 0:Y.dias_desde_ultima_compra)??0)>90),C=S.reduce((Y,D)=>Y+((D==null?void 0:D.total_historico)??0),0),k=N.filter(Y=>((Y==null?void 0:Y.saldo_devedor)??0)>0),F=k.reduce((Y,D)=>Y+((D==null?void 0:D.saldo_devedor)??0),0),q=N.filter(Y=>{const D=(Y==null?void 0:Y.segmento)||"Regular",W=(Y==null?void 0:Y.ticket_medio)??0;return D==="Novo"&&W>200}),A=q.reduce((Y,D)=>Y+((D==null?void 0:D.ticket_medio)??0),0),T=N.filter(Y=>Array.isArray(Y==null?void 0:Y.pets)&&Y.pets.length>0);let U=0,K=[];T.forEach(Y=>{const D=Array.isArray(Y==null?void 0:Y.pets)?Y.pets:[];if(D.length>0){const W=D.filter(R=>{if(!(R!=null&&R.ultima_consulta))return!0;const B=new Date(R.ultima_consulta);return Math.floor((g-B)/(1e3*60*60*24))>60});W.length>0&&(U+=W.length,K.push(Y))}});const I=N.filter(Y=>!(Y!=null&&Y.celular)||Y.celular.trim()==="");return{vips_inativos:{quantidade:(_==null?void 0:_.length)??0,impacto:`R$ ${(w??0).toFixed(2)}`,clientes:_},clientes_inativos:{quantidade:(S==null?void 0:S.length)??0,impacto:`R$ ${((C??0)/12).toFixed(2)}/ms`,clientes:S},clientes_endividados:{quantidade:(k==null?void 0:k.length)??0,impacto:`R$ ${(F??0).toFixed(2)}`,clientes:k},oportunidades_novos:{quantidade:(q==null?void 0:q.length)??0,impacto:`~R$ ${(A??0).toFixed(0)}/ms`,clientes:q},pets_sem_eventos:{quantidade:U??0,impacto:`${(K==null?void 0:K.length)??0} donos`,clientes:K},whatsapp_inativo:{quantidade:(I==null?void 0:I.length)??0,impacto:"Canal perdido",clientes:I},total_clientes:(N==null?void 0:N.length)??0,estatisticas:v??{}}},d=f=>{t("/pessoas",{state:{filtro:f}})},u=()=>{l()};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Carregando dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:" Dashboard Gerencial"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Viso executiva do negcio  ",(s==null?void 0:s.total_clientes)||0," clientes ativos"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Atualizado s ",o.toLocaleTimeString("pt-BR")]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(Hm,{size:18}),"Atualizar"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(kc,{tipo:"vips_inativos",dados:(s==null?void 0:s.vips_inativos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("vips_inativos")}),e.jsx(kc,{tipo:"clientes_inativos",dados:(s==null?void 0:s.clientes_inativos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("clientes_inativos")}),e.jsx(kc,{tipo:"clientes_endividados",dados:(s==null?void 0:s.clientes_endividados)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("clientes_endividados")}),e.jsx(kc,{tipo:"oportunidades_novos",dados:(s==null?void 0:s.oportunidades_novos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("oportunidades_novos")}),e.jsx(kc,{tipo:"pets_sem_eventos",dados:(s==null?void 0:s.pets_sem_eventos)||{quantidade:0,impacto:"0 donos",clientes:[]},onClick:()=>d("pets_sem_eventos")}),e.jsx(kc,{tipo:"whatsapp_inativo",dados:(s==null?void 0:s.whatsapp_inativo)||{quantidade:0,impacto:"Canal perdido",clientes:[]},onClick:()=>d("whatsapp_inativo")})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ll,{className:"text-blue-600",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Resumo Executivo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:" Ao Urgente"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((m=s==null?void 0:s.vips_inativos)==null?void 0:m.quantidade)??0})," clientes VIP em risco de churn"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Contate imediatamente para evitar perda de ",((x=s==null?void 0:s.vips_inativos)==null?void 0:x.impacto)??"R$ 0"," em receita"]})]}),e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-yellow-700 mb-2",children:" Ateno"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((h=s==null?void 0:s.clientes_endividados)==null?void 0:h.quantidade)??0})," clientes endividados"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Total de ",((b=s==null?void 0:s.clientes_endividados)==null?void 0:b.impacto)??"R$ 0"," em aberto  Avaliar condies"]})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-green-700 mb-2",children:" Oportunidade"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((p=s==null?void 0:s.oportunidades_novos)==null?void 0:p.quantidade)??0})," novos clientes promissores"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Potencial de fidelizao  Ticket mdio alto"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Ll,{size:12}),"Dados calculados em tempo real com base em regras de negcio pr-definidas"]})})]})]})]})}function S_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState({email:"",password:"",role_id:null});async function x(){try{o(!0);const f=await V.get("/usuarios");r(f.data)}catch(f){console.error("Erro ao carregar usurios:",f),alert("Erro ao carregar usurios")}finally{o(!1)}}async function h(){try{const f=await V.get("/roles");s(f.data)}catch(f){console.error("Erro ao carregar roles:",f)}}async function b(f,v){try{await V.patch(`/usuarios/${f}/status`,{is_active:!v}),x()}catch(g){console.error("Erro ao alterar status:",g),alert("Erro ao alterar status do usurio")}}async function p(f){var v,g;f.preventDefault();try{await V.post("/usuarios",u),alert("Usurio criado com sucesso!"),l(!1),m({email:"",password:"",role_id:null}),x()}catch(y){console.error("Erro ao criar usurio:",y),alert(((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao criar usurio")}}return j.useEffect(()=>{x(),h()},[]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Usurios"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie os usurios do sistema"})]}),e.jsxs("button",{onClick:()=>{m({email:"",password:"",role_id:null}),d(!1),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Usurio"]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando..."})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500",children:"Nenhum usurio encontrado"})}):t.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:f.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${f.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsx("button",{onClick:()=>b(f.user_id,f.is_active),className:`px-3 py-1 rounded text-white transition-colors ${f.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:f.is_active?"Desativar":"Ativar"})})]},f.user_id))})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Novo Usurio"}),e.jsx("button",{onClick:()=>{l(!1),m({email:"",password:"",role:"user"})},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:u.email,onChange:f=>m({...u,email:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"usuario@exemplo.com",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",required:!0,value:u.password,onChange:f=>m({...u,password:f.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mnimo 6 caracteres",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),e.jsx("select",{value:u.role_id||"",onChange:f=>m({...u,role_id:parseInt(f.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:a.length===0?e.jsx("option",{value:"",children:"Carregando..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Selecione uma role..."}),a.map(f=>e.jsx("option",{value:f.role_id,children:f.nome},f.role_id))]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),m({email:"",password:"",role_id:null})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Criar Usurio"})]})]})]})})})]})}function C_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState({}),[x,h]=j.useState({nome:"",descricao:"",permissions:[]});async function b(){try{o(!0);const[k,F]=await Promise.all([V.get("/roles"),V.get("/permissions")]);r(k.data),s(F.data)}catch(k){console.error("Erro ao carregar dados:",k),alert("Erro ao carregar dados")}finally{o(!1)}}async function p(k){var F,q;k.preventDefault();try{c?(await V.put(`/roles/${c.role_id}`,x),alert("Role atualizada com sucesso!")):(await V.post("/roles",x),alert("Role criada com sucesso!")),l(!1),d(null),h({nome:"",descricao:"",permissions:[]}),b()}catch(A){console.error("Erro ao salvar role:",A),alert(((q=(F=A.response)==null?void 0:F.data)==null?void 0:q.detail)||"Erro ao salvar role")}}function f(k){d(k),h({nome:k.nome,descricao:k.descricao||"",permissions:k.permissions.map(F=>F.permission_id)}),l(!0)}function v(k){h(F=>({...F,permissions:F.permissions.includes(k)?F.permissions.filter(q=>q!==k):[...F.permissions,k]}))}function g(){const k={};return a.forEach(F=>{const q=F.nome&&F.nome.includes(".")?F.nome.split(".")[0]:"outras";k[q]||(k[q]=[]),k[q].push(F)}),k}function y(k){return{financeiro:"Financeiro",comissoes:"Comisses",entregas:"Entregas",compras:"Compras",cadastros:"Cadastros",configuracoes:"Configuraes",rh:"Recursos Humanos",vendas:"Vendas",usuarios:"Usurios",relatorios:"Relatrios",ia:"Inteligncia Artificial",outras:"Outras"}[k]||k.charAt(0).toUpperCase()+k.slice(1)}function N(k){m(F=>({...F,[k]:!F[k]}))}function _(k,F){const q=F.map(T=>T.permission_id),A=q.every(T=>x.permissions.includes(T));h(T=>({...T,permissions:A?T.permissions.filter(U=>!q.includes(U)):[...new Set([...T.permissions,...q])]}))}function w(k){return k.every(F=>x.permissions.includes(F.permission_id))}function S(k){const F=k.filter(q=>x.permissions.includes(q.permission_id));return F.length>0&&F.length<k.length}async function C(k){if(confirm("Tem certeza que deseja excluir esta role?"))try{await V.delete(`/roles/${k}`),alert("Role excluda com sucesso!"),b()}catch(F){console.error("Erro ao excluir role:",F),alert("Erro ao excluir role")}}return j.useEffect(()=>{b()},[]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Permisses (Roles)"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie roles e suas permisses"})]}),e.jsxs("button",{onClick:()=>{d(null),h({nome:"",descricao:"",permissions:[]}),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Role"]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando..."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.length===0?e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Nenhuma role encontrada"}):t.map(k=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.nome}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.descricao})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(k),className:"text-blue-600 hover:text-blue-700",title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>C(k.role_id),className:"text-red-600 hover:text-red-700",title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Permisses:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.permissions.length===0?e.jsx("span",{className:"text-sm text-gray-400",children:"Nenhuma permisso"}):k.permissions.map(F=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:F.nome},F.permission_id))})]})]},k.role_id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:c?"Editar Role":"Nova Role"}),e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Role *"}),e.jsx("input",{type:"text",required:!0,value:x.nome,onChange:k=>h({...x,nome:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Gerente, Vendedor, etc"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:x.descricao||"",onChange:k=>h({...x,descricao:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Descrio da role"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permisses *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 max-h-96 overflow-y-auto",children:a.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma permisso disponvel"}):e.jsx("div",{className:"space-y-1",children:Object.entries(g()).map(([k,F])=>{const q=u[k],A=w(F),T=S(F);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center p-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>N(k),className:"text-gray-600 hover:text-gray-900 transition-colors",children:q?e.jsx(ac,{className:"w-5 h-5"}):e.jsx(Ml,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center flex-1 cursor-pointer",onClick:()=>_(k,F),children:[e.jsx("input",{type:"checkbox",checked:A,ref:U=>{U&&(U.indeterminate=T)},onChange:()=>{},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900",children:y(k)}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["(",F.filter(U=>x.permissions.includes(U.permission_id)).length,"/",F.length,")"]})]})]})}),q&&e.jsx("div",{className:"bg-white p-3 space-y-1 border-t border-gray-200",children:F.map(U=>e.jsxs("label",{className:"flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded ml-4",children:[e.jsx("input",{type:"checkbox",checked:x.permissions.includes(U.permission_id),onChange:()=>v(U.permission_id),className:"mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:U.nome.split(".")[1]||U.nome}),U.descricao&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:U.descricao})]})]},U.permission_id))})]},k)})})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[c?"Atualizar":"Criar"," Role"]})]})]})]})})})]})}function k_e(){console.log(" Configuracoes carregou - Total de cards:",7);const t=[{title:"Usurios",description:"Gerenciar usurios do sistema",icon:QA,link:"/admin/usuarios",color:"blue"},{title:"Permisses",description:"Gerenciar roles e permisses",icon:YA,link:"/admin/roles",color:"purple"},{title:"Configuraes Fiscais",description:"Configurar tributao padro da empresa",icon:dm,link:"/configuracoes/fiscal",color:"green"},{title:"Entregas",description:"Configurar entregadores e ponto inicial de rotas",icon:rd,link:"/configuracoes/entregas",color:"blue"},{title:"Custos da Moto",description:"Configurar custos operacionais da moto de entregas",icon:dm,link:"/configuracoes/custos-moto",color:"orange"},{title:"Estoque",description:"Configurar comportamento do controle de estoque",icon:Zx,link:"/configuracoes/estoque",color:"indigo"},{title:"Sistema",description:"Configuraes gerais do sistema",icon:dm,link:"#",color:"gray",disabled:!0}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraes"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie usurios, permisses e configuraes do sistema"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>{const a=r.icon,s={blue:"bg-blue-50 text-blue-600 hover:bg-blue-100",purple:"bg-purple-50 text-purple-600 hover:bg-purple-100",green:"bg-green-50 text-green-600 hover:bg-green-100",orange:"bg-orange-50 text-orange-600 hover:bg-orange-100",indigo:"bg-indigo-50 text-indigo-600 hover:bg-indigo-100",gray:"bg-gray-50 text-gray-400"};return r.disabled?e.jsxs("div",{className:`p-6 rounded-lg border-2 border-gray-200 ${s[r.color]} cursor-not-allowed opacity-60`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(a,{className:"text-2xl"}),e.jsx("h3",{className:"text-lg font-semibold",children:r.title})]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.description}),e.jsx("span",{className:"text-xs text-gray-400 mt-2 block",children:"Em breve"})]},r.title):e.jsxs($l,{to:r.link,className:`p-6 rounded-lg border-2 border-gray-200 ${s[r.color]} transition-all hover:shadow-lg`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(a,{className:"text-2xl"}),e.jsx("h3",{className:"text-lg font-semibold",children:r.title})]}),e.jsx("p",{className:"text-sm opacity-80",children:r.description}),e.jsxs("div",{className:"mt-4 flex items-center text-sm font-medium",children:["Acessar",e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},r.title)})})]})}function E_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1),i=_=>{if(console.log(" normalizeCnaesSecundarios chamado com:",_,"tipo:",typeof _),!_)return[];if(Array.isArray(_))return _;if(typeof _=="string")try{const w=JSON.parse(_);return Array.isArray(w)?w:[]}catch{return[]}return console.warn(" Valor inesperado para CNAEs, retornando array vazio"),[]},[l,c]=j.useState(""),[d,u]=j.useState([]),[m,x]=j.useState({cnpj:"",razao_social:"",nome_fantasia:"",inscricao_estadual:"",inscricao_municipal:"",email:"",telefone:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""}),[h,b]=j.useState({regime_tributario:"",simples_anexo:"I",aliquota_simples_vigente:0,aliquota_simples_sugerida:0,cnae_principal:"",cnae_descricao:"",cnaes_secundarios:[],uf:""});j.useEffect(()=>{async function _(){try{const w=await Ot.get("/empresa/fiscal");console.log(" Dados fiscais carregados:",w.data),console.log(" cnaes_secundarios recebido:",w.data.cnaes_secundarios),console.log(" Tipo:",typeof w.data.cnaes_secundarios),console.log("  array?",Array.isArray(w.data.cnaes_secundarios));const S=i(w.data.cnaes_secundarios);console.log(" Aps normalizar:",S),console.log("  array agora?",Array.isArray(S)),b({regime_tributario:w.data.regime_tributario||"",simples_anexo:w.data.simples_anexo||"I",aliquota_simples_vigente:w.data.aliquota_simples_vigente??0,aliquota_simples_sugerida:w.data.aliquota_simples_sugerida??0,cnae_principal:w.data.cnae_principal||"",cnae_descricao:w.data.cnae_descricao||"",cnaes_secundarios:S,uf:w.data.uf||""}),w.data.cnae_descricao&&c(w.data.cnae_descricao),u(S);try{const C=await Ot.get("/empresa/dados-cadastrais");C.data&&x({cnpj:C.data.cnpj||"",razao_social:C.data.razao_social||"",nome_fantasia:C.data.nome_fantasia||"",inscricao_estadual:C.data.inscricao_estadual||"",inscricao_municipal:C.data.inscricao_municipal||"",email:C.data.email||"",telefone:C.data.telefone||"",cep:C.data.cep||"",endereco:C.data.endereco||"",numero:C.data.numero||"",complemento:C.data.complemento||"",bairro:C.data.bairro||"",cidade:C.data.cidade||"",uf:C.data.uf||""})}catch{console.log("Endpoint de dados cadastrais no existe ainda")}}catch(w){console.error(" Erro ao carregar configuraes:",w),console.error(" Resposta completa:",w.response),ze.error("Erro ao carregar configuraes da empresa"),u([]),b(S=>({...S,cnaes_secundarios:[]}))}finally{r(!1)}}_()},[]);function p(_){const{name:w,value:S}=_.target;b(C=>{const k={...C,[w]:S};return w==="regime_tributario"&&S==="Simples Nacional"&&((!k.simples_anexo||k.simples_anexo==="")&&(k.simples_anexo="I"),(!k.aliquota_simples_vigente||k.aliquota_simples_vigente===0)&&(k.aliquota_simples_vigente=4)),k})}function f(_){const{name:w,value:S}=_.target;x(C=>({...C,[w]:S}))}async function v(){const _=m.cnpj.replace(/[^0-9]/g,"");if(_.length!==14){ze.error("CNPJ deve ter 14 dgitos");return}o(!0);try{const w=await fetch(`https://brasilapi.com.br/api/cnpj/v1/${_}`);if(!w.ok)throw new Error("CNPJ no encontrado");const S=await w.json();console.log(" Dados completos da API:",S),console.log(" CNAE Fiscal:",S.cnae_fiscal),console.log(" CNAE Descrio:",S.cnae_fiscal_descricao),console.log(" CNAEs Secundrios:",S.cnaes_secundarios);const C={...m};S.razao_social&&(C.razao_social=S.razao_social),S.nome_fantasia&&(C.nome_fantasia=S.nome_fantasia),S.email&&(C.email=S.email),S.inscricao_estadual&&(C.inscricao_estadual=S.inscricao_estadual);const k=S.ddd_telefone_1||S.telefone;if(k&&(C.telefone=k),S.cep&&(C.cep=S.cep.replace(/[^0-9]/g,"")),S.logradouro&&(C.endereco=S.logradouro),S.numero&&(C.numero=S.numero),S.complemento&&(C.complemento=S.complemento),S.bairro&&(C.bairro=S.bairro),S.municipio&&(C.cidade=S.municipio),S.uf&&(C.uf=S.uf),x(C),S.cnae_fiscal){const F=S.cnae_fiscal.toString();console.log(" CNAE encontrado:",F);const q=i(S.cnaes_secundarios);b(A=>({...A,cnae_principal:F,cnae_descricao:S.cnae_fiscal_descricao||"",cnaes_secundarios:q})),S.cnae_fiscal_descricao&&c(S.cnae_fiscal_descricao),u(q),q.length>0&&console.log(` Encontrados ${q.length} CNAEs secundrios`)}ze.success(" Dados preenchidos com sucesso!")}catch(w){console.error("Erro ao buscar CNPJ:",w),ze.error(" Erro ao buscar CNPJ. Verifique o nmero.")}finally{o(!1)}}async function g(){var _,w;s(!0);try{const S={...h,cnaes_secundarios:i(h.cnaes_secundarios)};console.log(" Salvando dados fiscais:",S),console.log(" CNAE Descrio no form:",h.cnae_descricao),console.log(" CNAEs Secundrios no form:",h.cnaes_secundarios);const C=await Ot.put("/empresa/fiscal",S);console.log(" Resposta do servidor (fiscal):",C.data);try{console.log(" Salvando dados cadastrais:",m),await Ot.put("/empresa/dados-cadastrais",m)}catch{console.log("Endpoint de dados cadastrais no implementado ainda")}ze.success("Configuraes salvas com sucesso!")}catch(S){console.error("Erro ao salvar:",S),ze.error(((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao salvar configuraes")}finally{s(!1)}}if(t)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando configuraes..."})]})});const y=Array.isArray(d)?d:[],N=h.regime_tributario==="Simples Nacional";return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configurao da Empresa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure os dados cadastrais, fiscais e tributrios da sua empresa"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"bg-blue-50 px-6 py-4 border-b border-blue-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:" Dados Cadastrais"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[" ",e.jsx("strong",{children:"Dica:"})," Digite o CNPJ e clique no boto  para preencher automaticamente os dados da empresa (razo social, endereo, CNAEs, etc.) consultando a Receita Federal."]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNPJ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"cnpj",value:m.cnpj,onChange:f,placeholder:"00.000.000/0000-00",maxLength:"18",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:v,disabled:n||!m.cnpj,title:"Buscar dados da Receita Federal pelo CNPJ",className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200",children:n?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Razo Social ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"razao_social",value:m.razao_social,onChange:f,placeholder:"Nome empresarial completo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"nome_fantasia",value:m.nome_fantasia,onChange:f,placeholder:"Nome comercial",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",name:"inscricao_estadual",value:m.inscricao_estadual,onChange:f,placeholder:"000.000.000.000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inscrio Municipal"}),e.jsx("input",{type:"text",name:"inscricao_municipal",value:m.inscricao_municipal,onChange:f,placeholder:"000000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:m.email,onChange:f,placeholder:"contato@empresa.com.br",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"text",name:"telefone",value:m.telefone,onChange:f,placeholder:"(00) 0000-0000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CEP"}),e.jsx("input",{type:"text",name:"cep",value:m.cep,onChange:f,placeholder:"00000-000",maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),e.jsx("input",{type:"text",name:"endereco",value:m.endereco,onChange:f,placeholder:"Rua, Avenida, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero"}),e.jsx("input",{type:"text",name:"numero",value:m.numero,onChange:f,placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complemento"}),e.jsx("input",{type:"text",name:"complemento",value:m.complemento,onChange:f,placeholder:"Sala, Apto, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bairro"}),e.jsx("input",{type:"text",name:"bairro",value:m.bairro,onChange:f,placeholder:"Centro",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UF"}),e.jsxs("select",{name:"uf",value:m.uf,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-"}),e.jsx("option",{value:"SP",children:"SP"}),e.jsx("option",{value:"RJ",children:"RJ"}),e.jsx("option",{value:"MG",children:"MG"}),e.jsx("option",{value:"RS",children:"RS"}),e.jsx("option",{value:"PR",children:"PR"}),e.jsx("option",{value:"SC",children:"SC"}),e.jsx("option",{value:"BA",children:"BA"}),e.jsx("option",{value:"PE",children:"PE"}),e.jsx("option",{value:"CE",children:"CE"}),e.jsx("option",{value:"GO",children:"GO"}),e.jsx("option",{value:"DF",children:"DF"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",name:"cidade",value:m.cidade,onChange:f,placeholder:"Nome da cidade",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-green-50 px-6 py-4 border-b border-green-100",children:e.jsx("h2",{className:"text-lg font-semibold text-green-900",children:" Configurao Fiscal e Tributria"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNAE Principal"}),e.jsx("input",{type:"text",name:"cnae_principal",value:h.cnae_principal,onChange:p,placeholder:"0000-0/00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),l&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-900 font-medium",children:[" ",l]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cdigo da Classificao Nacional de Atividades Econmicas"})]}),y.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNAEs Secundrios (",y.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:y.map((_,w)=>e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:(_==null?void 0:_.codigo)||"N/A"}),e.jsxs("span",{className:"text-gray-600",children:[" - ",(_==null?void 0:_.descricao)||"Sem descrio"]})]},w))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Regime Tributrio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"regime_tributario",value:h.regime_tributario,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Simples Nacional",children:"Simples Nacional"}),e.jsx("option",{value:"Lucro Presumido",children:"Lucro Presumido"}),e.jsx("option",{value:"Lucro Real",children:"Lucro Real"})]})]}),N&&e.jsxs("div",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900",children:"Parmetros do Simples Nacional"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anexo"}),e.jsxs("select",{name:"simples_anexo",value:h.simples_anexo||"I",onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"I",children:"Anexo I - Comrcio"}),e.jsx("option",{value:"II",children:"Anexo II - Indstria"}),e.jsx("option",{value:"III",children:"Anexo III - Servios"}),e.jsx("option",{value:"IV",children:"Anexo IV - Servios (Construo)"}),e.jsx("option",{value:"V",children:"Anexo V - Servios (Intelectual)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alquota Vigente (%)"}),e.jsx("input",{type:"number",name:"aliquota_simples_vigente",value:h.aliquota_simples_vigente||"",onChange:p,step:"0.01",min:"0",max:"100",placeholder:"Ex: 4.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alquota atual utilizada para calcular provises"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alquota Sugerida (%)"}),e.jsx("input",{type:"number",name:"aliquota_simples_sugerida",value:h.aliquota_simples_sugerida||"",onChange:p,step:"0.01",min:"0",max:"100",placeholder:"Ex: 4.50",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugesto baseada no histrico de fechamentos (informativo)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("button",{type:"button",onClick:g,disabled:a,className:"px-8 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:a?"Salvando...":"Salvar Todas as Configuraes"})})]})]})}function A_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1),[i,l]=j.useState([]),[c,d]=j.useState({entregador_padrao_id:"",ponto_inicial_rota:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""});j.useEffect(()=>{async function x(){var h,b;try{const[p,f]=await Promise.all([Ot.get("/configuracoes/entregas"),Ot.get("/clientes/",{params:{is_entregador:!0,entregador_ativo:!0}})]);d({entregador_padrao_id:p.data.entregador_padrao_id??"",ponto_inicial_rota:"",cep:p.data.cep??"",logradouro:p.data.logradouro??"",numero:p.data.numero??"",complemento:p.data.complemento??"",bairro:p.data.bairro??"",cidade:p.data.cidade??"",estado:p.data.estado??""});const v=Array.isArray(f.data)?f.data:((h=f.data)==null?void 0:h.clientes)||((b=f.data)==null?void 0:b.items)||[];console.log(" Entregadores carregados:",v),l(v)}catch(p){console.error(" Erro ao carregar configuraes:",p),alert("Erro ao carregar configuraes de entrega"),l([])}finally{r(!1)}}x()},[]);async function u(){const x=c.cep.replace(/\D/g,"");if(x.length!==8){alert("CEP invlido. Digite 8 dgitos.");return}o(!0);try{const b=await(await fetch(`https://viacep.com.br/ws/${x}/json/`)).json();if(b.erro){alert("CEP no encontrado");return}d({...c,logradouro:b.logradouro||"",bairro:b.bairro||"",cidade:b.localidade||"",estado:b.uf||""})}catch(h){console.error(h),alert("Erro ao buscar CEP")}finally{o(!1)}}async function m(x){x.preventDefault(),s(!0);try{await Ot.put("/configuracoes/entregas",{entregador_padrao_id:c.entregador_padrao_id||null,cep:c.cep||null,logradouro:c.logradouro||null,numero:c.numero||null,complemento:c.complemento||null,bairro:c.bairro||null,cidade:c.cidade||null,estado:c.estado||null}),alert("Configuraes salvas com sucesso")}catch(h){console.error(h),alert("Erro ao salvar configuraes")}finally{s(!1)}}return t?e.jsx("div",{children:"Carregando..."}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Configuraes de Entregas"}),e.jsxs("form",{onSubmit:m,style:{maxWidth:600},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Entregador padro"}),e.jsxs("select",{value:c.entregador_padrao_id,onChange:x=>d({...c,entregador_padrao_id:x.target.value}),children:[e.jsx("option",{value:"",children:"Nenhum (escolher manualmente)"}),Array.isArray(i)&&i.map(x=>e.jsx("option",{value:x.id,children:x.nome},x.id))]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:5},children:"Este entregador ser pr-selecionado ao criar novas rotas."})]}),e.jsx("hr",{style:{margin:"30px 0",border:"none",borderTop:"1px solid #ddd"}}),e.jsx("h3",{style:{marginBottom:20},children:"Ponto Inicial Padro da Rota"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CEP *"}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("input",{type:"text",value:c.cep.replace(/(\d{5})(\d)/,"$1-$2"),onChange:x=>{const h=x.target.value.replace(/\D/g,"");d({...c,cep:h.slice(0,8)})},placeholder:"00000-000",maxLength:9,style:{flex:1}}),e.jsx("button",{type:"button",onClick:u,disabled:n||c.cep.length<8,style:{padding:"0 20px",display:"flex",alignItems:"center",gap:5},children:n?"Buscando...":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),"Buscar"]})})]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:5},children:"Digite o CEP e clique em Buscar para preencher automaticamente."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Logradouro (Rua/Avenida) *"}),e.jsx("input",{type:"text",value:c.logradouro,onChange:x=>d({...c,logradouro:x.target.value}),placeholder:"Ex: Rua das Flores"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:15},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nmero *"}),e.jsx("input",{type:"text",value:c.numero,onChange:x=>d({...c,numero:x.target.value}),placeholder:"123"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Complemento"}),e.jsx("input",{type:"text",value:c.complemento,onChange:x=>d({...c,complemento:x.target.value}),placeholder:"Ex: Loja 1"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bairro *"}),e.jsx("input",{type:"text",value:c.bairro,onChange:x=>d({...c,bairro:x.target.value}),placeholder:"Ex: Centro"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:15},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cidade *"}),e.jsx("input",{type:"text",value:c.cidade,onChange:x=>d({...c,cidade:x.target.value}),placeholder:"Ex: So Paulo"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estado *"}),e.jsx("input",{type:"text",value:c.estado,onChange:x=>{const h=x.target.value.toUpperCase().slice(0,2);d({...c,estado:h})},placeholder:"SP",maxLength:2})]})]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:15,marginBottom:20},children:"Este endereo ser usado como ponto de partida para calcular as rotas de entrega."}),e.jsx("button",{type:"submit",disabled:a,style:{backgroundColor:"#2563eb",color:"white",padding:"12px 24px",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"500",cursor:a?"not-allowed":"pointer",opacity:a?.6:1,transition:"all 0.2s"},onMouseOver:x=>{a||(x.target.style.backgroundColor="#1d4ed8")},onMouseOut:x=>{a||(x.target.style.backgroundColor="#2563eb")},children:a?"Salvando...":"Salvar Configuraes"})]})]})}function P_e(){const[t,r]=j.useState({preco_combustivel:"",km_por_litro:"",km_troca_oleo:"",custo_troca_oleo:"",km_troca_pneu_dianteiro:"",custo_pneu_dianteiro:"",km_troca_pneu_traseiro:"",custo_pneu_traseiro:"",km_troca_kit_traseiro:"",custo_kit_traseiro:"",km_manutencao_geral:"",custo_manutencao_geral:"",seguro_mensal:"",licenciamento_mensal:"",ipva_mensal:"",outros_custos_mensais:"",km_medio_mensal:""}),[a,s]=j.useState(!1),n=()=>{const p=parseFloat(t.preco_combustivel)||0,f=parseFloat(t.km_por_litro)||1;return f>0?(p/f).toFixed(4):"0.0000"},o=()=>{const p=parseFloat(t.custo_troca_oleo)||0,f=parseFloat(t.km_troca_oleo)||1;return f>0?(p/f).toFixed(4):"0.0000"},i=()=>{const p=parseFloat(t.custo_pneu_dianteiro)||0,f=parseFloat(t.km_troca_pneu_dianteiro)||1;return f>0?(p/f).toFixed(4):"0.0000"},l=()=>{const p=parseFloat(t.custo_pneu_traseiro)||0,f=parseFloat(t.km_troca_pneu_traseiro)||1;return f>0?(p/f).toFixed(4):"0.0000"},c=()=>{const p=parseFloat(t.custo_kit_traseiro)||0,f=parseFloat(t.km_troca_kit_traseiro)||1;return f>0?(p/f).toFixed(4):"0.0000"},d=()=>{const p=parseFloat(t.custo_manutencao_geral)||0,f=parseFloat(t.km_manutencao_geral)||1;return f>0?(p/f).toFixed(4):"0.0000"},u=()=>{const p=parseFloat(t.seguro_mensal)||0,f=parseFloat(t.licenciamento_mensal)||0,v=parseFloat(t.ipva_mensal)||0,g=parseFloat(t.outros_custos_mensais)||0,y=p+f+v+g,N=parseFloat(t.km_medio_mensal)||1;return N>0?(y/N).toFixed(4):"0.0000"};j.useEffect(()=>{m()},[]);async function m(){const f=(await Ot.get("/configuracoes/custo-moto")).data;Object.keys(f).forEach(v=>{f[v]===null&&(f[v]="")}),r(f)}function x(p){r({...t,[p.target.name]:p.target.value})}function h(){confirm("Preencher com valores sugeridos baseados em uma moto de entrega tpica (CG 160, Biz 125, Pop 110)? Os valores atuais sero substitudos.")&&r({preco_combustivel:"6.30",km_por_litro:"38",km_troca_oleo:"3000",custo_troca_oleo:"95.00",km_troca_pneu_dianteiro:"14000",custo_pneu_dianteiro:"210.00",km_troca_pneu_traseiro:"10000",custo_pneu_traseiro:"240.00",km_troca_kit_traseiro:"18000",custo_kit_traseiro:"420.00",km_manutencao_geral:"5000",custo_manutencao_geral:"180.00",seguro_mensal:"110.00",licenciamento_mensal:"32.00",ipva_mensal:"55.00",outros_custos_mensais:"75.00",km_medio_mensal:"1200"})}async function b(){s(!0),await Ot.put("/configuracoes/custo-moto",t),s(!1),alert("Custos da moto salvos com sucesso")}return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Custos da Moto"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure os custos operacionais da moto de entregas"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:[" ",e.jsx("strong",{children:"Dica:"}),' No sabe por onde comear? Clique em "Preencher com Valores Sugeridos" para usar custos tpicos de uma moto de entrega (CG 160, Biz 125, Pop 110 na faixa de R$ 15 mil). Depois ajuste conforme sua realidade.']}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:h,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx("span",{children:""})," Preencher com Valores Sugeridos"]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Combustvel"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preo por Litro (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"preco_combustivel",placeholder:"Ex: 6.50",value:t.preco_combustivel,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consumo Mdio (KM/Litro)"}),e.jsx("input",{type:"number",step:"0.1",name:"km_por_litro",placeholder:"Ex: 35",value:t.km_por_litro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-blue-50 border border-blue-200 rounded-md text-blue-900 font-semibold text-lg",children:["R$ ",n()]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Manuteno (Custos Variveis por KM)"]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Troca de leo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"KM para Troca"}),e.jsx("input",{type:"number",name:"km_troca_oleo",placeholder:"Ex: 3000",value:t.km_troca_oleo,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Custo por Troca (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_troca_oleo",placeholder:"Ex: 150.00",value:t.custo_troca_oleo,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",o()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pneu Dianteiro"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til (KM)"}),e.jsx("input",{type:"number",name:"km_troca_pneu_dianteiro",placeholder:"Ex: 15000",value:t.km_troca_pneu_dianteiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Pneu (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_pneu_dianteiro",placeholder:"Ex: 250.00",value:t.custo_pneu_dianteiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",i()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pneu Traseiro"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til (KM)"}),e.jsx("input",{type:"number",name:"km_troca_pneu_traseiro",placeholder:"Ex: 12000",value:t.km_troca_pneu_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Pneu (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_pneu_traseiro",placeholder:"Ex: 280.00",value:t.custo_pneu_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",l()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Kit Transmisso (Corrente, Coroa, Pinho)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til do Kit (KM)"}),e.jsx("input",{type:"number",name:"km_troca_kit_traseiro",placeholder:"Ex: 20000",value:t.km_troca_kit_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Kit (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_kit_traseiro",placeholder:"Ex: 450.00",value:t.custo_kit_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",c()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Manuteno Geral"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Frequncia (KM)"}),e.jsx("input",{type:"number",name:"km_manutencao_geral",placeholder:"Ex: 5000",value:t.km_manutencao_geral,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Custo por Manuteno (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_manutencao_geral",placeholder:"Ex: 200.00",value:t.custo_manutencao_geral,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",d()]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Custos Fixos Mensais"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seguro Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"seguro_mensal",placeholder:"Ex: 120.00",value:t.seguro_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Licenciamento Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"licenciamento_mensal",placeholder:"Ex: 30.00",value:t.licenciamento_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IPVA Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"ipva_mensal",placeholder:"Ex: 50.00",value:t.ipva_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outros Custos Mensais (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"outros_custos_mensais",placeholder:"Ex: 100.00",value:t.outros_custos_mensais,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Controle"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"KM Mdio Mensal (para clculo de custos fixos)"}),e.jsx("input",{type:"number",step:"0.01",name:"km_medio_mensal",placeholder:"Ex: 1000",value:t.km_medio_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usado para ratear os custos fixos mensais por KM rodado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Custo Fixo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-purple-50 border border-purple-200 rounded-md text-purple-900 font-semibold text-lg",children:["R$ ",u()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total dos custos fixos  KM mdio mensal"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:b,disabled:a,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:a?"Salvando...":" Salvar Configuraes"})})]})}function T_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1);j.useEffect(()=>{async function l(){try{const c=await Ot.get("/empresa/config-estoque");o(c.data.permite_estoque_negativo)}catch(c){console.error("Erro ao carregar configuraes de estoque",c),ze.error("Erro ao carregar configuraes")}finally{r(!1)}}l()},[]);async function i(){s(!0);try{await Ot.put("/empresa/config-estoque",{permite_estoque_negativo:n}),ze.success("Configuraes de estoque atualizadas com sucesso!")}catch(l){console.error("Erro ao salvar configuraes",l),ze.error("Erro ao salvar configuraes")}finally{s(!1)}}return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando configuraes..."})]})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs($l,{to:"/configuracoes",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(HA,{className:"mr-1"}),"Voltar para Configuraes"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraes de Estoque"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure o comportamento do controle de estoque do sistema"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Controle de Estoque Negativo"}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(VA,{className:"text-yellow-600 mt-1 mr-3 flex-shrink-0"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Ateno:"})," Esta configurao afeta diretamente o controle de vendas e estoque."]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"estoque-negativo",checked:!n,onChange:()=>o(!1),className:"mt-1 mr-3 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" Bloquear vendas sem estoque (Recomendado)"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"O sistema impedir finalizar vendas quando no houver estoque suficiente. Ideal para controle rigoroso de estoque."})]})]}),e.jsxs("label",{className:"flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"estoque-negativo",checked:n,onChange:()=>o(!0),className:"mt-1 mr-3 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" Permitir estoque negativo"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"O sistema permitir vendas mesmo sem estoque disponvel. til para negcios que trabalham com encomendas ou reposio rpida."}),e.jsx("div",{className:"text-xs text-red-600 mt-2 font-medium",children:" Use com cuidado: pode gerar descontinuidade no controle de estoque"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs("button",{onClick:i,disabled:a,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(Bl,{className:"mr-2"}),a?"Salvando...":"Salvar Configuraes"]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Como funciona?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Estoque Bloqueado:"})," Ao tentar vender um produto sem estoque, o sistema exibir um erro e impedir a finalizao da venda."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Estoque Negativo:"})," O sistema permite a venda e o estoque ficar com valor negativo at a prxima reposio."]}),e.jsx("li",{children:"Esta configurao  global e afeta todas as vendas realizadas no PDV e outros pontos de venda."})]})]})]})}function O_e(){const t=new Date,[r,a]=j.useState(t.getMonth()+1),[s,n]=j.useState(t.getFullYear()),[o,i]=j.useState(!1),[l,c]=j.useState(null);j.useEffect(()=>{d()},[]);const d=async()=>{if(!r||!s){ze.error("Informe ms e ano");return}i(!0);try{const b=await V.get(`/auditoria/provisoes/mensal?mes=${r}&ano=${s}`);c(b.data)}catch(b){console.error("Erro ao buscar auditoria:",b),ze.error("Erro ao buscar auditoria de provises")}finally{i(!1)}},u=b=>!b&&b!==0?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.abs(b)),m=b=>!b&&b!==0?"0,0%":`${b.toFixed(1)}%`,x=(b,p)=>{const f={OK:"bg-green-100 text-green-800 border-green-300",AJUSTE:"bg-yellow-100 text-yellow-800 border-yellow-300",ACUMULANDO:"bg-blue-100 text-blue-800 border-blue-300",SEM_DADOS:"bg-gray-100 text-gray-600 border-gray-300"};return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${f[b]||f.SEM_DADOS}`,children:[p," ",b.replace("_"," ")]})},h=[{valor:1,nome:"Janeiro"},{valor:2,nome:"Fevereiro"},{valor:3,nome:"Maro"},{valor:4,nome:"Abril"},{valor:5,nome:"Maio"},{valor:6,nome:"Junho"},{valor:7,nome:"Julho"},{valor:8,nome:"Agosto"},{valor:9,nome:"Setembro"},{valor:10,nome:"Outubro"},{valor:11,nome:"Novembro"},{valor:12,nome:"Dezembro"}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Auditoria Mensal  Proviso  Realizado"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Compare valores provisionados com valores pagos para controle fiscal e trabalhista"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ms"}),e.jsx("select",{value:r,onChange:b=>a(Number(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:h.map(b=>e.jsx("option",{value:b.valor,children:b.nome},b.valor))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano"}),e.jsx("input",{type:"number",value:s,onChange:b=>n(Number(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"2026"})]}),e.jsx("div",{children:e.jsx("button",{onClick:d,disabled:o,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Buscando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Buscar"]})})})]})}),l&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Interpretao dos Status:"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" OK:"})," Proviso igual ao realizado - situao perfeita"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" AJUSTE:"})," Tem pagamento mas valores divergem - revisar"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" ACUMULANDO:"})," Provisionado mas no pago ainda - normal para frias e 13"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" SEM DADOS:"})," Sem proviso e sem pagamento no perodo"]})]})]})]})}),l&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proviso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Realizado"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diferena"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Real."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.itens.map((b,p)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.item})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-900",children:u(b.provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:u(b.realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-medium ${b.diferenca===0?"text-green-600":b.diferenca>0?"text-blue-600":"text-red-600"}`,children:[b.diferenca>0&&"+",u(b.diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-600",children:m(b.percentual_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:x(b.status,b.status_emoji)})]},p))}),e.jsx("tfoot",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"TOTAL"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u(l.total_provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u(l.total_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-bold ${l.total_diferenca===0?"text-green-600":l.total_diferenca>0?"text-blue-600":"text-red-600"}`,children:[l.total_diferenca>0&&"+",u(l.total_diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:m(l.total_provisao>0?l.total_realizado/l.total_provisao*100:0)})}),e.jsx("td",{className:"px-6 py-4"})]})})]})})}),!o&&!l&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("p",{className:"text-gray-600",children:'Selecione um ms e ano e clique em "Buscar" para visualizar a auditoria'})]})]})}function F_e(){const[t,r]=j.useState(3),[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(!1),c=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];j.useEffect(()=>{d()},[t]);const d=async()=>{l(!0);try{const[h,b]=await Promise.all([V.get(`/projecao-caixa/?meses_a_frente=${t}`),V.get(`/projecao-caixa/resumo?meses_a_frente=${t}`)]);h.data.sucesso&&s(h.data.projecao||[]),b.data.sucesso&&o(b.data.resumo||null)}catch(h){console.error("Erro ao buscar projeo:",h),ze.error("Erro ao carregar projeo de caixa")}finally{l(!1)}},u=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),m=h=>{const b={POSITIVO:"bg-green-100 text-green-800",NEGATIVO:"bg-red-100 text-red-800",MISTO:"bg-yellow-100 text-yellow-800",NEUTRO:"bg-gray-100 text-gray-800"},p={POSITIVO:" Todos os meses positivos",NEGATIVO:" Todos os meses negativos",MISTO:" Meses positivos e negativos",NEUTRO:" Sem dados"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${b[h]||b.NEUTRO}`,children:p[h]||p.NEUTRO})},x=h=>h>0?e.jsx("span",{className:"text-green-600 font-bold",children:u(h)}):h<0?e.jsx("span",{className:"text-red-600 font-bold",children:u(h)}):e.jsx("span",{className:"text-gray-600 font-bold",children:u(h)});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Projeo de Caixa"}),e.jsx("p",{className:"text-gray-600",children:"Projeo futura baseada em histrico real + provises obrigatrias"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Projetar para:"}),e.jsxs("select",{value:t,onChange:h=>r(Number(h.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:3,children:"3 meses"}),e.jsx("option",{value:6,children:"6 meses"}),e.jsx("option",{value:12,children:"12 meses"})]})]})}),n&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Resumo da Projeo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Receita Total Projetada"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u(n.receita_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Despesas Totais Projetadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u(n.despesas_totais)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Saldo Total Projetado"}),e.jsx("p",{className:`text-2xl font-bold ${n.saldo_total>=0?"text-green-600":"text-red-600"}`,children:u(n.saldo_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Meses Positivos / Negativos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.jsx("span",{className:"text-green-600",children:n.meses_positivos})," / ",e.jsx("span",{className:"text-red-600",children:n.meses_negativos})]})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:m(n.tendencia)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" Projeo Ms a Ms"})}),i?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Calculando projeo..."})]}):a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Sem dados suficientes"}),e.jsx("p",{className:"text-sm",children:" necessrio ter pelo menos 3 meses de histrico para gerar projees."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receita Prevista"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imposto Simples"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Folha + Encargos"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas Totais"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo Previsto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[c[h.mes-1],"/",h.ano]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["+",h.mes_futuro," ",h.mes_futuro===1?"ms":"meses"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-green-600 font-semibold",children:u(h.receita_prevista)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-orange-600",children:u(h.imposto_simples_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-blue-600",children:u(h.folha_encargos_previstos)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-red-600",children:u(h.despesas_previstas)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:x(h.saldo_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:h.saldo_positivo?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:" Positivo"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:" Negativo"})})]},h.mes_futuro))})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:" Como funciona a projeo:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Mdia de receitas dos ltimos 3 meses (valores reais)"}),e.jsx("li",{children:"Mdia de despesas fixas (custos + operacionais)"}),e.jsx("li",{children:"Alquota atual do Simples Nacional aplicada sobre receita projetada"}),e.jsx("li",{children:"Folha de pagamento + encargos (INSS + FGTS ~28%)"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sem chutes"}),"  Apenas dados reais + regras contbeis"]})]})]})]})}function R_e(){const[t,r]=j.useState({salario_base:"",inss_percentual:"20",fgts_percentual:"8",meses:"6",cargo:""}),[a,s]=j.useState(null),[n,o]=j.useState(!1),[i,l]=j.useState(!0),c=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d=b=>{const{name:p,value:f}=b.target;r(v=>({...v,[p]:f}))},u=async b=>{if(b.preventDefault(),!t.salario_base||parseFloat(t.salario_base)<=0){ze.error("Informe um salrio vlido");return}o(!0);try{const p={salario_base:parseFloat(t.salario_base),inss_percentual:parseFloat(t.inss_percentual),fgts_percentual:parseFloat(t.fgts_percentual),meses:parseInt(t.meses),cargo:t.cargo||null},f=await V.post("/simulacao-contratacao/",p);f.data.sucesso&&(s(f.data.simulacao),ze.success("Simulao realizada com sucesso!"))}catch(p){console.error("Erro ao simular contratao:",p),ze.error("Erro ao realizar simulao")}finally{o(!1)}},m=b=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b),x=b=>new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(b/100),h=()=>{s(null),r({salario_base:"",inss_percentual:"20",fgts_percentual:"8",meses:"6",cargo:""})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Simulao de Contratao"}),e.jsx("p",{className:"text-gray-600",children:"Calcule o impacto real de contratar um funcionrio no seu negcio"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Dados da Contratao"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo (opcional)"}),e.jsx("input",{type:"text",name:"cargo",value:t.cargo,onChange:d,placeholder:"Ex: Atendente, Veterinrio...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Salrio Base ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"salario_base",value:t.salario_base,onChange:d,placeholder:"Ex: 2000.00",step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"INSS Patronal (%)"}),e.jsx("input",{type:"number",name:"inss_percentual",value:t.inss_percentual,onChange:d,step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FGTS (%)"}),e.jsx("input",{type:"number",name:"fgts_percentual",value:t.fgts_percentual,onChange:d,step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Simular por quantos meses?"}),e.jsxs("select",{name:"meses",value:t.meses,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"3",children:"3 meses"}),e.jsx("option",{value:"6",children:"6 meses"}),e.jsx("option",{value:"12",children:"12 meses (1 ano)"}),e.jsx("option",{value:"24",children:"24 meses (2 anos)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Calculando...":" Simular Contratao"}),a&&e.jsx("button",{type:"button",onClick:h,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:" Nova Simulao"})]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Resumo Executivo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custo Mensal Mdio"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m(a.totais.media_mensal)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.custo_total_vs_salario)," do salrio base"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Custo Total (",a.parametros.meses_simulados," meses)"]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:m(a.totais.total_geral)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Encargos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m(a.totais.total_inss+a.totais.total_fgts)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.percentual_encargos)," do salrio"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Provises Totais"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(a.totais.total_provisao_ferias+a.totais.total_provisao_1_3+a.totais.total_provisao_13)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.percentual_provisoes)," do salrio"]})]})]}),e.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:" Ateno:"})," O custo real mensal "," ",e.jsx("strong",{children:m(a.totais.media_mensal)}),", no apenas"," ",e.jsx("strong",{children:m(a.parametros.salario_base)}),". Isso representa um aumento de"," ",e.jsx("strong",{children:x(a.analise.custo_total_vs_salario-100)})," ","devido a encargos e provises obrigatrias."]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" Detalhamento Mensal"}),e.jsx("button",{onClick:()=>l(!i),className:"text-sm text-blue-600 hover:text-blue-700",children:i?" Ocultar detalhes":" Mostrar detalhes"})]}),i&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salrio"}),e.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["INSS (",a.parametros.inss_percentual,"%)"]}),e.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["FGTS (",a.parametros.fgts_percentual,"%)"]}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frias (1/12)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"1/3 Const."}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"13 (1/12)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.resultado_mensal.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c[b.mes_calendario-1],"/",b.ano]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:m(b.salario)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600",children:m(b.inss)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:m(b.fgts)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(b.provisao_ferias)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(b.provisao_1_3)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(b.provisao_13)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-gray-900",children:m(b.custo_total)})]},b.mes))}),e.jsx("tfoot",{className:"bg-gray-100 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"TOTAL"}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:m(a.totais.total_salarios)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-orange-600",children:m(a.totais.total_inss)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-blue-600",children:m(a.totais.total_fgts)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_ferias)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_1_3)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_13)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:m(a.totais.total_geral)})]})})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:" Como funciona esta simulao:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Nada  gravado no banco"})," -  apenas uma projeo"]}),e.jsx("li",{children:"Custos diretos: Salrio + INSS patronal + FGTS"}),e.jsx("li",{children:"Provises obrigatrias: Frias (1/12) + 1/3 constitucional + 13 (1/12)"}),e.jsx("li",{children:"No considera: Vale-transporte, Vale-refeio, Plano de sade"}),e.jsx("li",{children:"Baseado nas mesmas regras do motor de provises real"})]})]})]})]})}function $_e(){const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState(!0),i=async()=>{try{o(!0);const m=await V.get("/cargos");r(m.data)}catch(m){console.error("Erro ao carregar cargos:",m),ze.error("Erro ao carregar cargos")}finally{o(!1)}};j.useEffect(()=>{i()},[]);const l=()=>{s({nome:"",descricao:"",salario_base:"",inss_patronal_percentual:20,fgts_percentual:8,gera_ferias:!0,gera_decimo_terceiro:!0,ativo:!0})},c=async()=>{var m,x;if(!a.nome||!a.salario_base){ze.error("Nome e salrio so obrigatrios");return}try{a.id?(await V.put(`/cargos/${a.id}`,a),ze.success("Cargo atualizado com sucesso!")):(await V.post("/cargos",a),ze.success("Cargo cadastrado com sucesso!")),s(null),i()}catch(h){console.error("Erro ao salvar cargo:",h),ze.error(((x=(m=h.response)==null?void 0:m.data)==null?void 0:x.detail)||"Erro ao salvar cargo")}},d=async m=>{var x,h;try{await V.patch(`/cargos/${m.id}/status?ativo=${!m.ativo}`),ze.success(`Cargo ${m.ativo?"inativado":"ativado"} com sucesso!`),i()}catch(b){console.error("Erro ao alterar status:",b),ze.error(((h=(x=b.response)==null?void 0:x.data)==null?void 0:h.detail)||"Erro ao alterar status")}},u=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Cadastro de Cargos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie cargos, defina salrios e encargos que alimentam provises, DRE e simulaes"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",onClick:l,children:[e.jsx("span",{className:"text-xl",children:"+"})," Novo Cargo"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salrio Base"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"INSS %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FGTS %"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frias"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"13"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ativo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(m=>e.jsxs("tr",{className:m.ativo?"":"bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.nome}),m.descricao&&e.jsx("div",{className:"text-sm text-gray-500",children:m.descricao})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium text-green-600",children:u(m.salario_base)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(m.inss_patronal_percentual).toFixed(2),"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(m.fgts_percentual).toFixed(2),"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.gera_ferias?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.gera_ferias?"Sim":"No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.gera_decimo_terceiro?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.gera_decimo_terceiro?"Sim":"No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.ativo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:m.ativo?"Sim":"No"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-4",onClick:()=>s(m),children:"Editar"}),e.jsx("button",{className:`${m.ativo?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"}`,onClick:()=>d(m),children:m.ativo?"Inativar":"Ativar"})]})]},m.id))})]}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum cargo cadastrado"})})]}),a&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:a.id?"Editar Cargo":"Novo Cargo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Cargo *"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: Vendedor, Tosador, Gerente",value:a.nome,onChange:m=>s({...a,nome:m.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Descrio das responsabilidades...",rows:2,value:a.descricao,onChange:m=>s({...a,descricao:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salrio Base (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"0.00",value:a.salario_base,onChange:m=>s({...a,salario_base:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"INSS Patronal (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:a.inss_patronal_percentual,onChange:m=>s({...a,inss_patronal_percentual:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FGTS (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:a.fgts_percentual,onChange:m=>s({...a,fgts_percentual:m.target.value})})]}),e.jsxs("div",{className:"md:col-span-2 flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.gera_ferias,onChange:m=>s({...a,gera_ferias:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gera frias"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.gera_decimo_terceiro,onChange:m=>s({...a,gera_decimo_terceiro:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gera 13"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.ativo,onChange:m=>s({...a,ativo:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Ativo"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",onClick:c,children:"Salvar"}),e.jsx("button",{className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",onClick:()=>s(null),children:"Cancelar"})]})]})]})}function D_e({funcionario:t,onClose:r}){const[a,s]=j.useState(null),[n,o]=j.useState(!1),i=async()=>{const d=await Ot.get(`/funcionarios/${t.id}/provisoes`);s(d.data)};j.useEffect(()=>{i()},[]);const l=async()=>{var d,u;if(window.confirm("Confirmar concesso de frias?")){o(!0);try{const m=new Date,x={mes:m.getMonth()+1,ano:m.getFullYear(),dias_ferias:30,data_pagamento:null};await Ot.post(`/funcionarios/${t.id}/ferias`,x),await i(),alert("Frias concedidas com sucesso")}catch(m){console.error("Erro ao conceder frias:",m),alert(((u=(d=m.response)==null?void 0:d.data)==null?void 0:u.detail)||"Erro ao conceder frias")}finally{o(!1)}}},c=async d=>{var u,m;if(window.confirm(`Confirmar pagamento da ${d} parcela do 13?`)){o(!0);try{const x=new Date,h={mes:x.getMonth()+1,ano:x.getFullYear(),percentual:d===1?50:100,descricao_parcela:d===1?"1 Parcela":"2 Parcela",data_pagamento:null};await Ot.post(`/funcionarios/${t.id}/decimo-terceiro`,h),await i(),alert("13 registrado com sucesso")}catch(x){console.error("Erro ao pagar 13:",x),alert(((m=(u=x.response)==null?void 0:u.data)==null?void 0:m.detail)||"Erro ao pagar 13")}finally{o(!1)}}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded p-6 w-[500px]",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Eventos  ",t.nome]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Provises"}),e.jsxs("p",{children:["Frias: R$ ",Number(a.ferias||0).toFixed(2)]}),e.jsxs("p",{children:["13: R$ ",Number(a.decimo_terceiro||0).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{disabled:n,onClick:l,className:"w-full bg-blue-600 text-white py-2 rounded",children:"Conceder Frias"}),e.jsx("button",{disabled:n,onClick:()=>c(1),className:"w-full bg-green-600 text-white py-2 rounded",children:"Pagar 1 Parcela do 13"}),e.jsx("button",{disabled:n,onClick:()=>c(2),className:"w-full bg-green-700 text-white py-2 rounded",children:"Pagar 2 Parcela do 13"})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:r,className:"text-gray-600 underline",children:"Fechar"})})]})}):null}function M_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(""),[c,d]=j.useState("todos"),[u,m]=j.useState(null),x=async()=>{const g=await V.get("/funcionarios");r(g.data)},h=async()=>{const g=await V.get("/cargos");s(g.data.filter(y=>y.ativo))};j.useEffect(()=>{x(),h()},[]);const b=()=>{o({nome:"",cpf:"",email:"",telefone:"",cargo_id:"",ativo:!0})},p=async()=>{var y,N,_,w,S;if(!n.nome||!n.cargo_id){alert("Nome e cargo so obrigatrios");return}const g={nome:n.nome,cargo_id:Number(n.cargo_id),ativo:n.ativo,email:((y=n.email)==null?void 0:y.trim())||null,telefone:((N=n.telefone)==null?void 0:N.trim())||null,cpf:((_=n.cpf)==null?void 0:_.trim())||null};try{n.id?await V.put(`/funcionarios/${n.id}`,g):await V.post("/funcionarios",g),o(null),x()}catch(C){console.error("Erro ao salvar funcionrio:",C),alert(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao salvar funcionrio")}},f=async g=>{window.confirm("Deseja inativar este funcionrio?")&&(await V.delete(`/funcionarios/${g}`),x())},v=t.filter(g=>{const y=g.nome.toLowerCase().includes(i.toLowerCase())||(g.cpf||"").includes(i),N=c==="todos"||c==="ativos"&&g.ativo||c==="inativos"&&!g.ativo;return y&&N});return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Funcionrios"}),e.jsxs("div",{className:"flex justify-between items-center mb-4 gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border p-2 w-64",placeholder:"Buscar por nome ou CPF",value:i,onChange:g=>l(g.target.value)}),e.jsxs("select",{className:"border p-2 bg-white",value:c,onChange:g=>d(g.target.value),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"ativos",children:"Ativos"}),e.jsx("option",{value:"inativos",children:"Inativos"})]})]}),e.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Novo Funcionrio"})]}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Nome"}),e.jsx("th",{className:"border p-2",children:"Cargo"}),e.jsx("th",{className:"border p-2",children:"Salrio"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Aes"})]})}),e.jsx("tbody",{children:v.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:g.nome}),e.jsx("td",{className:"border p-2",children:g.cargo?g.cargo.nome:"-"}),e.jsx("td",{className:"border p-2",children:g.cargo?`R$ ${Number(g.cargo.salario_base).toFixed(2)}`:"-"}),e.jsx("td",{className:"border p-2",children:g.ativo?"Ativo":"Inativo"}),e.jsxs("td",{className:"border p-2 space-x-2",children:[e.jsx("button",{className:"text-purple-600",onClick:()=>m(g),children:"Eventos"}),e.jsx("button",{className:"text-blue-600",onClick:()=>{var y;return o({...g,cargo_id:(y=g.cargo)==null?void 0:y.id})},children:"Editar"}),g.ativo&&e.jsx("button",{className:"text-red-600",onClick:()=>f(g.id),children:"Inativar"})]})]},g.id))})]}),n&&e.jsxs("div",{className:"border rounded p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:n.id?"Editar Funcionrio":"Novo Funcionrio"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{className:"border p-2",placeholder:"Nome",value:n.nome,onChange:g=>o({...n,nome:g.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"CPF",value:n.cpf||"",onChange:g=>o({...n,cpf:g.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"Email",value:n.email||"",onChange:g=>o({...n,email:g.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"Telefone",value:n.telefone||"",onChange:g=>o({...n,telefone:g.target.value})}),e.jsxs("select",{className:"border p-2 col-span-2",value:n.cargo_id,onChange:g=>o({...n,cargo_id:g.target.value}),children:[e.jsx("option",{value:"",children:"Selecione o cargo"}),a.map(g=>e.jsx("option",{value:g.id,children:g.nome},g.id))]})]}),e.jsxs("div",{className:"mt-4 space-x-2",children:[e.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Salvar"}),e.jsx("button",{onClick:()=>o(null),className:"bg-gray-400 text-white px-4 py-2 rounded",children:"Cancelar"})]})]}),u&&e.jsx(D_e,{funcionario:u,onClose:()=>m(null)})]})}function I_e(){const[t,r]=j.useState(!0),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{u()},[]);async function u(){r(!0);try{const[b,p]=await Promise.all([Ot.get("/rotas-entrega/vendas-pendentes/listar"),Ot.get("/configuracoes/entregas").catch(()=>({data:null}))]);s(Array.isArray(b.data)?b.data:[]),l(p.data)}catch(b){console.error(b),alert("Erro ao carregar vendas pendentes"),s([])}finally{r(!1)}}async function m(){var f,v,g;if(a.length===0){alert("No h vendas para otimizar");return}if(!i||!i.logradouro){alert(" Configure o endereo da loja em Configuraes > Entregas antes de otimizar rotas");return}if(confirm(` ATENO - ESTA OPERAO TEM CUSTO!

 Custo estimado: 5 centavos
 Entregas a otimizar: ${a.length}
 Ser feita 1 chamada ao Google Maps API
 A ordem ser salva no banco (no cobra novamente)

Deseja continuar?`)){d(!0);try{console.log(" Chamando endpoint de otimizao...");const y=await Ot.post("/rotas-entrega/vendas-pendentes/otimizar");console.log(" Resposta da otimizao:",y.data),alert(` ROTAS OTIMIZADAS COM SUCESSO!

${y.data.message}

Total otimizado: ${y.data.total_otimizado||a.length} entregas`),await u()}catch(y){console.error(" Erro ao otimizar:",y),console.error("Detalhes:",(f=y.response)==null?void 0:f.data);const N=((g=(v=y.response)==null?void 0:v.data)==null?void 0:g.detail)||"Erro ao otimizar rotas. Verifique se o Google Maps est configurado.";alert(` ERRO AO OTIMIZAR ROTAS

${N}`)}finally{d(!1)}}}function x(b){o(p=>p.includes(b)?p.filter(f=>f!==b):[...p,b])}async function h(){var b,p;if(n.length===0){alert("Selecione pelo menos uma entrega");return}if(confirm(`Deseja criar uma rota com ${n.length} entrega(s)?`))try{r(!0);const f=a.filter(g=>n.includes(g.id)),v=f.filter(g=>!g.entregador_id);if(v.length>0){alert(` As seguintes vendas no tm entregador atribudo:
${v.map(g=>g.numero_venda).join(", ")}

Atribua um entregador antes de criar a rota.`),r(!1);return}await Ot.post("/rotas-entrega/",{vendas_ids:n,entregador_id:f[0].entregador_id,moto_da_loja:!1}),alert(` Rota criada com ${n.length} entrega(s)!

As entregas foram movidas para "Rotas de Entrega"`),o([]),u()}catch(f){console.error(f),alert(((p=(b=f.response)==null?void 0:b.data)==null?void 0:p.detail)||"Erro ao criar rota. Verifique se todas as entregas tm entregador atribudo.")}finally{r(!1)}}return t?e.jsx("div",{className:"page",children:"Carregando..."}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Entregas em Aberto"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Vendas com entrega que esto aguardando iniciar a rota"}),!Array.isArray(a)||a.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:" No h entregas pendentes"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:[e.jsx("button",{onClick:m,disabled:c||t,className:"btn-secondary",title:"Reorganizar entregas usando Google Maps para menor distncia",children:c?" Otimizando...":" Otimizar Rotas"}),e.jsxs("span",{style:{color:"#666",fontSize:"0.9em"},children:[" ",a.filter(b=>b.ordem_otimizada).length>0?`${a.filter(b=>b.ordem_otimizada).length} entregas j otimizadas. `:"","Clique para ordenar pela rota mais eficiente"]})]}),e.jsxs("table",{className:"table-entregas",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:e.jsx("input",{type:"checkbox",checked:n.length===a.length&&a.length>0,onChange:b=>o(b.target.checked?a.map(p=>p.id):[])})}),e.jsx("th",{children:"Ordem"}),e.jsx("th",{children:"Venda"}),e.jsx("th",{children:"Data da Venda"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Entregador"}),e.jsx("th",{children:"Endereo"}),e.jsx("th",{children:"Taxa Entrega"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:a.map((b,p)=>e.jsxs("tr",{style:{backgroundColor:n.includes(b.id)?"#e3f2fd":b.ordem_otimizada?"#f0f8ff":"white"},children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:n.includes(b.id),onChange:()=>x(b.id)})}),e.jsx("td",{children:e.jsxs("strong",{style:{color:b.ordem_otimizada?"#007bff":"#999",fontSize:"1.1em"},children:[p+1,b.ordem_otimizada&&" "]})}),e.jsx("td",{children:b.numero_venda}),e.jsx("td",{style:{fontSize:"0.9em"},children:b.data_venda?new Date(b.data_venda).toLocaleDateString("pt-BR"):"N/A"}),e.jsx("td",{children:b.cliente_nome}),e.jsx("td",{children:e.jsx("span",{style:{color:b.entregador_nome?"#28a745":"#999",fontWeight:b.entregador_nome?"600":"normal"},children:b.entregador_nome||"No atribudo"})}),e.jsx("td",{style:{maxWidth:300,fontSize:"0.9em"},children:b.endereco_entrega||"N/A"}),e.jsxs("td",{children:["R$ ",parseFloat(b.taxa_entrega||0).toFixed(2)]}),e.jsxs("td",{children:["R$ ",parseFloat(b.total||0).toFixed(2)]}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,fontWeight:"bold",color:"#fff",backgroundColor:"#ffa500"},children:"AGUARDANDO"})})]},b.id))})]}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:10},children:[e.jsxs("button",{onClick:h,disabled:n.length===0||t,className:"btn-primary",style:{backgroundColor:n.length>0?"#28a745":"#ccc",cursor:n.length>0?"pointer":"not-allowed"},children:[" Criar Rota (",n.length," selecionada",n.length!==1?"s":"",")"]}),e.jsx("span",{style:{color:"#666",fontSize:"0.9em",alignSelf:"center"},children:" Selecione as entregas e clique para criar uma rota"})]})]})]})}function L_e(){const t=Kt(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(""),[l,c]=j.useState(null);j.useEffect(()=>{d()},[o]);async function d(){try{n(!0);const y=new URLSearchParams;o&&y.append("status",o);const N=await V.get(`/rotas-entrega/?${y.toString()}`);a(N.data)}catch(y){console.error("Erro ao carregar rotas:",y),alert("Erro ao carregar rotas de entrega")}finally{n(!1)}}function u(y){c(l===y?null:y)}async function m(y,N){try{const _=N.map(w=>w.id);await V.put(`/rotas-entrega/${y}/paradas/reordenar`,_),a(w=>w.map(S=>S.id===y?{...S,paradas:N.map((C,k)=>({...C,ordem:k+1}))}:S)),alert("Ordem das paradas atualizada!")}catch(_){console.error("Erro ao reordenar paradas:",_),alert("Erro ao reordenar paradas")}}async function x(y){var _,w;if(!confirm("Deseja iniciar esta rota? Uma mensagem ser enviada ao primeiro cliente."))return;const N=prompt(` Digite o KM atual da moto (opcional):

Deixe em branco se no quiser registrar.`);try{const S={};N&&!isNaN(N)&&parseFloat(N)>0&&(S.km_inicial=parseFloat(N)),await V.post(`/rotas-entrega/${y}/iniciar`,null,{params:S}),alert(" Rota iniciada! Mensagem enviada ao primeiro cliente."),d()}catch(S){console.error("Erro ao iniciar rota:",S);const C=((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao iniciar rota";alert(` ${C}`)}}async function h(y){var N,_;if(confirm(` Tem certeza que deseja excluir esta rota?

As vendas voltaro para a listagem de entregas pendentes.`))try{const w=await V.delete(`/rotas-entrega/${y}`),{total_vendas:S}=w.data;alert(` Rota excluda com sucesso!
${S} venda(s) voltaram para entregas pendentes.`),d()}catch(w){console.error("Erro ao excluir rota:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao excluir rota";alert(` ${S}`)}}async function b(y){var N,_;if(confirm(` Reverter incio desta rota?

A rota voltar para status pendente e voc poder adicionar mais entregas.`))try{await V.post(`/rotas-entrega/${y}/reverter-inicio`),alert(" Rota revertida para pendente! Agora voc pode adicionar mais entregas."),d()}catch(w){console.error("Erro ao reverter rota:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao reverter incio da rota";alert(` ${S}`)}}function p(y){if(!y.paradas||y.paradas.length===0)return null;const N=y.paradas[y.paradas.length-1];return N.tempo_acumulado?N.tempo_acumulado:null}function f(y){if(!y)return"N/A";const N=Math.floor(y/60),_=Math.floor(N/60),w=N%60;return _>0?`${_}h${w}min`:`${w}min`}function v(y){switch(y){case"pendente":return"#FFA500";case"em_andamento":return"#007BFF";case"em_rota":return"#007BFF";case"concluida":return"#28A745";case"cancelada":return"#DC3545";default:return"#6C757D"}}function g(y){switch(y){case"pendente":return" Pendente";case"em_andamento":return" Em Andamento";case"em_rota":return" Em Rota";case"concluida":return" Concluda";case"cancelada":return" Cancelada";default:return y}}return s?e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{children:"Carregando rotas..."})]}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Rotas criadas e em andamento"}),e.jsxs("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:[e.jsxs("label",{children:["Filtrar por status:",e.jsxs("select",{value:o,onChange:y=>i(y.target.value),style:{marginLeft:10,padding:"5px 10px"},children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"concluida",children:"Concluda"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsx("button",{onClick:d,className:"btn-secondary",style:{marginLeft:"auto"},children:" Atualizar"})]}),!Array.isArray(r)||r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"Nenhuma rota encontrada"}),e.jsx("button",{onClick:()=>t("/entregas/abertas"),className:"btn-primary",style:{marginTop:10},children:"Criar Nova Rota"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:r.map(y=>e.jsx(B_e,{rota:y,expandida:l===y.id,onToggleExpand:()=>u(y.id),onReordenar:m,onIniciarRota:x,onExcluirRota:h,onReverterInicio:b,getStatusColor:v,getStatusLabel:g,calcularTempoEstimado:p,formatarTempo:f},y.id))})]})}function B_e({rota:t,expandida:r,onToggleExpand:a,onReordenar:s,onIniciarRota:n,onExcluirRota:o,onReverterInicio:i,getStatusColor:l,getStatusLabel:c,calcularTempoEstimado:d,formatarTempo:u}){var L,E;const[m,x]=j.useState(t.paradas||[]),[h,b]=j.useState(null),[p,f]=j.useState(null),[v,g]=j.useState(null),[y,N]=j.useState(!1),[_,w]=j.useState(null),[S,C]=j.useState(null),[k,F]=j.useState(!1);j.useEffect(()=>{x(t.paradas||[])},[t.paradas]);const q=d(t),A=m.filter(M=>M.status!=="entregue").length,T=m.length>0&&A===0;async function U(M,z){var le,Q,ne;try{N(!0),f(M);const re=await V.get(`/vendas/${z}`);console.log(" Detalhes da venda carregados:",re.data),console.log(" Telefones do cliente:",{telefone:(le=re.data.cliente)==null?void 0:le.telefone,celular:(Q=re.data.cliente)==null?void 0:Q.celular,email:(ne=re.data.cliente)==null?void 0:ne.email}),g(re.data)}catch(re){console.error("Erro ao carregar detalhes da venda:",re),alert("Erro ao carregar detalhes da venda"),f(null)}finally{N(!1)}}function K(){f(null),g(null)}async function I(M,z){var Q,ne;if(!confirm(` Confirmar entrega realizada?

Uma mensagem ser enviada automaticamente para o prximo cliente da rota.`))return;const le=prompt(` Digite o KM atual da moto (opcional):

Deixe em branco se no quiser registrar.`);try{w(M);const re={};le&&!isNaN(le)&&parseFloat(le)>0&&(re.km_entrega=parseFloat(le));const ae=await V.post(`/rotas-entrega/${z}/paradas/${M}/marcar-entregue`,null,{params:re});alert(" "+ae.data.message),x(ie=>ie.map(ve=>ve.id===M?{...ve,status:"entregue",data_entrega:new Date().toISOString(),km_entrega:le?parseFloat(le):null}:ve)),window.location.reload()}catch(re){console.error("Erro ao marcar entrega:",re);const ae=((ne=(Q=re.response)==null?void 0:Q.data)==null?void 0:ne.detail)||"Erro ao marcar entrega como concluda";alert(" "+ae)}finally{w(null)}}async function Y(M,z){const le=prompt(` Digite a observao sobre esta entrega:

(Ex: 'Sempre entregar no vizinho', 'Chamar na casa da frente')`);if(!(!le||le.trim()===""))try{await V.put(`/rotas-entrega/${z}/paradas/${M}/observacao`,null,{params:{observacao:le.trim()}}),alert(" Observao salva com sucesso!"),x(Q=>Q.map(ne=>ne.id===M?{...ne,observacoes:le.trim()}:ne))}catch(Q){console.error("Erro ao salvar observao:",Q),alert(" Erro ao salvar observao")}}async function D(M,z,le){const Q=prompt(` Por que a entrega no foi realizada?

(Ex: 'Cliente ausente', 'Carto recusado', 'Endereo no encontrado')`);if(!(!Q||Q.trim()==="")&&confirm(` Confirmar que a entrega NO foi realizada?

A venda voltar para entregas em aberto.`))try{C(M),await V.post(`/rotas-entrega/${z}/paradas/${M}/nao-entregue`,null,{params:{motivo:Q.trim()}}),alert(" Entrega marcada como no realizada. Venda #"+le+" voltou para entregas em aberto."),window.location.reload()}catch(ne){console.error("Erro ao marcar como no entregue:",ne),alert(" Erro ao processar")}finally{C(null)}}async function W(M,z){var re,ae;const le=prompt(` Digite o KM final da moto (opcional):

Deixe em branco se no quiser registrar.`);let Q=null;if(z&&le&&!isNaN(le)&&parseFloat(le)>parseFloat(z)){const ie=(parseFloat(le)-parseFloat(z)).toFixed(2);confirm(` Distncia calculada: ${ie} km

KM Inicial: ${z}
KM Final: ${le}

Deseja usar esta distncia?`)&&(Q=parseFloat(ie))}if(!Q){const ie=prompt(` Digite a distncia percorrida em km (opcional):

Deixe em branco se no souber.`);ie&&!isNaN(ie)&&parseFloat(ie)>0&&(Q=parseFloat(ie))}const ne=prompt(" Observaes sobre a rota (opcional):")||"";if(confirm(` Finalizar esta rota?

Esta ao no pode ser desfeita.`))try{F(!0);const ie={observacoes:ne.trim()};le&&!isNaN(le)&&parseFloat(le)>0&&(ie.km_final=parseFloat(le)),Q&&(ie.distancia_real=Q),await V.post(`/rotas-entrega/${M}/fechar`,ie),alert(" Rota finalizada com sucesso!"),window.location.reload()}catch(ie){console.error("Erro ao finalizar rota:",ie);const ve=((ae=(re=ie.response)==null?void 0:re.data)==null?void 0:ae.detail)||"Erro ao finalizar rota";alert(" "+ve)}finally{F(!1)}}const R=(M,z)=>{b(z),M.dataTransfer.effectAllowed="move"},B=(M,z)=>{if(M.preventDefault(),h===null||h===z)return;const le=[...m],Q=le[h];le.splice(h,1),le.splice(z,0,Q),x(le),b(z)},O=()=>{h!==null&&s(t.id,m),b(null)};return e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:15,backgroundColor:"#fff"},children:[e.jsxs("div",{style:{cursor:"pointer",transition:"all 0.2s"},onClick:a,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:0,marginBottom:10},children:[" ",t.numero||`Rota #${t.id}`,r?" ":" "]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5,color:"#555"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Entregador:"})," ",((L=t.entregador)==null?void 0:L.nome)||"No informado"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Paradas:"})," ",((E=t.paradas)==null?void 0:E.length)||0," entrega(s)"]}),t.distancia_prevista&&e.jsxs("div",{children:[e.jsx("strong",{children:"Distncia Prevista:"})," ",t.distancia_prevista," km"]}),q&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tempo Estimado:"})," ",u(q)]}),t.km_inicial&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Inicial:"})," ",parseFloat(t.km_inicial).toFixed(1)," km"]}),t.km_final&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Final:"})," ",parseFloat(t.km_final).toFixed(1)," km"]}),t.km_inicial&&t.km_final&&e.jsxs("div",{style:{color:"#007BFF",fontWeight:"600"},children:[e.jsx("strong",{children:" Total Rodado:"})," ",(parseFloat(t.km_final)-parseFloat(t.km_inicial)).toFixed(1)," km",t.distancia_prevista&&(()=>{const M=parseFloat(t.km_final)-parseFloat(t.km_inicial),z=parseFloat(t.distancia_prevista),le=M-z,Q=(le/z*100).toFixed(1);return e.jsxs("span",{style:{marginLeft:10,color:le>0?"#DC3545":"#28A745",fontSize:13},children:["(",le>0?"+":"",le.toFixed(1)," km / ",Q>0?"+":"",Q,"% vs projetado)"]})})()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Criada em:"})," ",new Date(t.created_at).toLocaleString("pt-BR")]}),t.data_conclusao&&e.jsxs("div",{children:[e.jsx("strong",{children:"Concluda em:"})," ",new Date(t.data_conclusao).toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[t.status==="pendente"&&e.jsx("button",{onClick:M=>{M.stopPropagation(),n(t.id)},style:{padding:"8px 16px",backgroundColor:"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Iniciar Rota"}),(t.status==="em_rota"||t.status==="em_andamento")&&T&&e.jsx("button",{onClick:M=>{M.stopPropagation(),W(t.id,t.km_inicial)},disabled:k,style:{padding:"8px 16px",backgroundColor:k?"#ccc":"#007BFF",color:"#fff",border:"none",borderRadius:6,cursor:k?"not-allowed":"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:k?" Processando...":" Finalizar Rota"}),(t.status==="em_rota"||t.status==="em_andamento")&&A===m.length&&e.jsx("button",{onClick:M=>{M.stopPropagation(),i(t.id)},style:{padding:"8px 16px",backgroundColor:"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Reverter Incio"}),(t.status==="pendente"||t.status==="em_rota"||t.status==="em_andamento")&&e.jsx("button",{onClick:M=>{M.stopPropagation(),o(t.id)},style:{padding:"8px 16px",backgroundColor:"#DC3545",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Excluir"}),e.jsx("div",{style:{padding:"5px 15px",borderRadius:20,backgroundColor:l(t.status),color:"#fff",fontWeight:"bold",fontSize:14,whiteSpace:"nowrap"},children:c(t.status)})]})]}),t.observacoes&&e.jsxs("div",{style:{marginTop:10,padding:10,backgroundColor:"#f8f9fa",borderRadius:5,fontSize:14,color:"#666"},children:[e.jsx("strong",{children:"Observaes:"})," ",t.observacoes]})]}),r&&m.length>0&&e.jsxs("div",{style:{marginTop:20,borderTop:"2px solid #eee",paddingTop:15},children:[e.jsx("h4",{style:{marginBottom:15},children:" Paradas da Rota (arraste para reordenar)"}),m.map((M,z)=>{var le,Q,ne,re;return e.jsxs("div",{children:[e.jsxs("div",{draggable:!0,onDragStart:ae=>R(ae,z),onDragOver:ae=>B(ae,z),onDragEnd:O,style:{padding:12,marginBottom:10,border:"1px solid #ddd",borderRadius:6,backgroundColor:h===z?"#f0f8ff":"#fafafa",cursor:"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[e.jsxs("span",{style:{fontWeight:"bold",marginRight:10,fontSize:18,color:"#007BFF"},children:[M.ordem,""]}),e.jsxs("span",{style:{color:"#666",fontSize:14},children:["Venda #",M.venda_id]}),M.status&&e.jsx("span",{style:{marginLeft:10,padding:"2px 8px",borderRadius:12,fontSize:12,backgroundColor:M.status==="entregue"?"#d4edda":M.status==="tentativa"?"#fff3cd":"#e2e3e5",color:M.status==="entregue"?"#155724":M.status==="tentativa"?"#856404":"#383d41"},children:M.status==="entregue"?" Entregue":M.status==="tentativa"?" Tentativa":"Pendente"})]}),e.jsxs("div",{style:{fontSize:13,color:"#333",lineHeight:1.6},children:[M.cliente_nome&&e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("strong",{style:{color:"#1565C0"},children:[" ",M.cliente_nome]}),M.cliente_telefone&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",M.cliente_telefone]}),M.cliente_celular&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",M.cliente_celular]})]}),e.jsxs("div",{style:{color:"#555"},children:[" ",M.endereco,M.distancia_acumulada&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Dist: ",M.distancia_acumulada," km"]}),M.tempo_acumulado&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Tempo aprox: ",u(M.tempo_acumulado)]})]})]}),M.data_entrega&&e.jsxs("div",{style:{color:"#28a745",fontSize:12,marginTop:3},children:[" Entregue em: ",new Date(M.data_entrega).toLocaleString("pt-BR")]}),M.observacoes&&e.jsxs("div",{style:{marginTop:6,padding:6,backgroundColor:"#fff3cd",borderRadius:4,fontSize:12,color:"#856404",border:"1px solid #ffc107"},children:[" ",M.observacoes]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"flex-end"},children:[M.status!=="entregue"&&t.status==="em_rota"&&e.jsx("button",{onClick:ae=>{ae.stopPropagation(),I(M.id,t.id)},disabled:_===M.id,style:{padding:"8px 12px",backgroundColor:_===M.id?"#ccc":"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:_===M.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:_===M.id?"...":" Entregue"}),M.status!=="entregue"&&(t.status==="em_rota"||t.status==="em_andamento")&&e.jsx("button",{onClick:ae=>{ae.stopPropagation(),D(M.id,t.id,M.venda_id)},disabled:S===M.id,style:{padding:"8px 12px",backgroundColor:S===M.id?"#ccc":"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:S===M.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:S===M.id?"...":" Falta Entregar"}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),Y(M.id,t.id)},style:{padding:"8px 12px",backgroundColor:"#6C757D",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:" Observao"}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),p===M.id?K():U(M.id,M.venda_id)},style:{padding:"8px 12px",backgroundColor:"#17A2B8",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:" Detalhes"})]})]}),p===M.id&&e.jsx("div",{style:{marginTop:0,marginBottom:15,padding:15,backgroundColor:"#f8f9fa",borderRadius:8,border:"2px solid #007BFF",boxShadow:"0 2px 8px rgba(0,123,255,0.2)"},children:y?e.jsx("div",{style:{textAlign:"center",color:"#666",padding:20},children:"Carregando detalhes da venda..."}):v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15,borderBottom:"2px solid #007BFF",paddingBottom:10},children:[e.jsxs("h4",{style:{margin:0,color:"#007BFF"},children:[" Detalhes da Venda #",v.id]}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),K()},style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",cursor:"pointer",fontWeight:"bold",fontSize:13},children:" Fechar"})]}),e.jsx("div",{style:{backgroundColor:"#e7f3ff",padding:12,borderRadius:6,marginBottom:15,border:"1px solid #007BFF"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:" Cliente:"})," ",((le=v.cliente)==null?void 0:le.nome)||v.nome_cliente||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:" Data:"})," ",v.data_venda?new Date(v.data_venda).toLocaleString("pt-BR"):"N/A"]}),((Q=v.cliente)==null?void 0:Q.telefone)&&e.jsxs("div",{children:[e.jsx("strong",{children:" Telefone:"})," ",v.cliente.telefone]}),((ne=v.cliente)==null?void 0:ne.celular)&&e.jsxs("div",{children:[e.jsx("strong",{children:" Celular:"})," ",v.cliente.celular]}),((re=v.cliente)==null?void 0:re.email)&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:" Email:"})," ",v.cliente.email]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,fontSize:14,marginBottom:15},children:[e.jsxs("div",{style:{padding:10,backgroundColor:"#d4edda",borderRadius:4,border:"1px solid #28a745"},children:[e.jsx("div",{style:{fontSize:11,color:"#155724",marginBottom:3},children:"VALOR TOTAL"}),e.jsxs("div",{style:{fontWeight:"bold",fontSize:16,color:"#155724"},children:["R$ ",parseFloat(v.valor_total||v.total||0).toFixed(2)]})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"PAGAMENTO"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:v.forma_pagamento||"N/A"})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"STATUS"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:v.status_pagamento||"N/A"})]})]}),v.endereco_entrega&&e.jsxs("div",{style:{padding:12,backgroundColor:"#e3f2fd",borderRadius:6,marginBottom:15,border:"1px solid #2196F3"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#1976D2"},children:" Endereo de Entrega"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:v.endereco_entrega})]}),v.observacoes&&e.jsxs("div",{style:{padding:12,backgroundColor:"#fff3cd",borderRadius:6,marginBottom:15,border:"1px solid #ffc107"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#f57c00"},children:" Observaes"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:v.observacoes})]}),v.itens&&v.itens.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:15,marginBottom:10,color:"#424242"},children:[" Itens da Venda (",v.itens.length,")"]}),e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:6,border:"1px solid #ddd",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[v.itens.map((ae,ie)=>{var ve,_e,me,Se;return e.jsxs("div",{style:{padding:12,borderBottom:ie<v.itens.length-1?"1px solid #eee":"none",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:ie%2===0?"#fafafa":"#fff"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:3,color:"#333"},children:((ve=ae.produto)==null?void 0:ve.nome)||((_e=ae.servico)==null?void 0:_e.nome)||ae.produto_nome||ae.servico_descricao||"Item"}),(((me=ae.produto)==null?void 0:me.codigo)||ae.produto_codigo)&&e.jsxs("div",{style:{fontSize:12,color:"#999"},children:["Cd: ",((Se=ae.produto)==null?void 0:Se.codigo)||ae.produto_codigo]})]}),e.jsxs("div",{style:{textAlign:"right",minWidth:120},children:[e.jsxs("div",{style:{color:"#666",fontSize:13,marginBottom:2},children:[ae.quantidade,"  R$ ",parseFloat(ae.valor_unitario||ae.preco_unitario||0).toFixed(2)]}),e.jsxs("div",{style:{fontSize:15,color:"#28a745",fontWeight:"bold"},children:["R$ ",parseFloat((ae.quantidade||0)*(ae.valor_unitario||ae.preco_unitario||0)).toFixed(2)]})]})]},ie)}),e.jsxs("div",{style:{padding:14,backgroundColor:"#1976D2",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#fff"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:16},children:"TOTAL DA VENDA"}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:18},children:["R$ ",parseFloat(v.valor_total||v.total||0).toFixed(2)]})]})]})]})]}):null})]},M.id)})]})]})}function z_e(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(null);j.useEffect(()=>{i()},[]);async function i(){try{s(!0);const c=await V.get("/rotas-entrega/?status=concluida");r(c.data)}catch(c){console.error("Erro ao carregar histrico:",c),alert("Erro ao carregar histrico de entregas")}finally{s(!1)}}function l(c){o(n===c?null:c)}return a?e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:" Histrico de Entregas"}),e.jsx("p",{children:"Carregando histrico..."})]}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:" Histrico de Entregas"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Rotas finalizadas e conferidas"}),e.jsx("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:e.jsx("button",{onClick:i,className:"btn-secondary",style:{marginLeft:"auto"},children:" Atualizar"})}),!Array.isArray(t)||t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"Nenhuma rota finalizada encontrada"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:t.map(c=>{var d,u;return e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:15,backgroundColor:"#fff"},children:[e.jsx("div",{style:{cursor:"pointer"},onClick:()=>l(c.id),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:0,marginBottom:10},children:[" ",c.numero||`Rota #${c.id}`,n===c.id?" ":" "]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:10,color:"#555",fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Entregador:"})," ",((d=c.entregador)==null?void 0:d.nome)||"No informado"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Paradas:"})," ",((u=c.paradas)==null?void 0:u.length)||0," entrega(s)"]}),c.distancia_prevista&&e.jsxs("div",{children:[e.jsx("strong",{children:" Previsto:"})," ",parseFloat(c.distancia_prevista).toFixed(1)," km"]}),c.km_inicial&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Inicial:"})," ",parseFloat(c.km_inicial).toFixed(1)]}),c.km_final&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Final:"})," ",parseFloat(c.km_final).toFixed(1)]}),c.km_inicial&&c.km_final&&e.jsxs("div",{style:{color:"#007BFF",fontWeight:"600"},children:[e.jsx("strong",{children:" Total:"})," ",(parseFloat(c.km_final)-parseFloat(c.km_inicial)).toFixed(1)," km",c.distancia_prevista&&(()=>{const m=parseFloat(c.km_final)-parseFloat(c.km_inicial),x=parseFloat(c.distancia_prevista),h=m-x,b=(h/x*100).toFixed(1);return e.jsxs("div",{style:{fontSize:12,color:h>0?"#DC3545":"#28A745",marginTop:2},children:[h>0?"":""," ",Math.abs(h).toFixed(1)," km (",h>0?"+":"",b,"%)"]})})()]}),c.distancia_real&&!(c.km_inicial&&c.km_final)&&e.jsxs("div",{children:[e.jsx("strong",{children:"Distncia:"})," ",parseFloat(c.distancia_real).toFixed(1)," km"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Concluda em:"})," ",new Date(c.data_conclusao).toLocaleString("pt-BR")]}),c.custo_real&&e.jsxs("div",{children:[e.jsx("strong",{children:"Custo:"})," R$ ",parseFloat(c.custo_real).toFixed(2)]})]}),c.observacoes&&e.jsxs("div",{style:{marginTop:10,padding:10,backgroundColor:"#f8f9fa",borderRadius:5,fontSize:14,color:"#666"},children:[e.jsx("strong",{children:"Observaes:"})," ",c.observacoes]})]}),e.jsx("div",{style:{padding:"5px 15px",borderRadius:20,backgroundColor:"#28A745",color:"#fff",fontWeight:"bold",fontSize:14,whiteSpace:"nowrap"},children:" Concluda"})]})}),n===c.id&&c.paradas&&c.paradas.length>0&&e.jsxs("div",{style:{marginTop:20,borderTop:"2px solid #eee",paddingTop:15},children:[e.jsx("h4",{style:{marginBottom:15},children:" Entregas da Rota"}),c.paradas.map(m=>e.jsx("div",{style:{padding:12,marginBottom:10,border:"1px solid #ddd",borderRadius:6,backgroundColor:m.status==="entregue"?"#f0fff4":"#fafafa"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[e.jsxs("span",{style:{fontWeight:"bold",marginRight:10,fontSize:18,color:"#007BFF"},children:[m.ordem,""]}),e.jsxs("span",{style:{color:"#666",fontSize:14},children:["Venda #",m.venda_id]}),e.jsx("span",{style:{marginLeft:10,padding:"2px 8px",borderRadius:12,fontSize:12,backgroundColor:m.status==="entregue"?"#d4edda":"#e2e3e5",color:m.status==="entregue"?"#155724":"#383d41"},children:m.status==="entregue"?" Entregue":m.status})]}),e.jsxs("div",{style:{fontSize:13,color:"#333",lineHeight:1.6},children:[m.cliente_nome&&e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("strong",{style:{color:"#1565C0"},children:[" ",m.cliente_nome]}),m.cliente_telefone&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",m.cliente_telefone]}),m.cliente_celular&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",m.cliente_celular]})]}),e.jsxs("div",{style:{color:"#555"},children:[" ",m.endereco,m.distancia_acumulada&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Dist: ",m.distancia_acumulada," km"]}),m.km_entrega&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" KM: ",m.km_entrega]})]})]}),m.data_entrega&&e.jsxs("div",{style:{color:"#28a745",fontSize:12,marginTop:3},children:[" Entregue em: ",new Date(m.data_entrega).toLocaleString("pt-BR")]}),m.observacoes&&e.jsxs("div",{style:{marginTop:6,padding:6,backgroundColor:"#fff3cd",borderRadius:4,fontSize:12,color:"#856404",border:"1px solid #ffc107"},children:[" ",m.observacoes]})]})})},m.id))]})]},c.id)})})]})}function q_e(){const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(null),[i,l]=j.useState(null),[c,d]=j.useState(null),[u,m]=j.useState(!1),[x,h]=j.useState(null);async function b(){var f,v;if(!t||!a){h("Selecione o perodo para consulta");return}m(!0),h(null);try{const[g,y,N]=await Promise.all([V.get("/dashboard/entregas/financeiro",{params:{data_inicio:t,data_fim:a}}),V.get("/dashboard/entregas/financeiro/graficos",{params:{data_inicio:t,data_fim:a}}),V.get("/dashboard/entregas/financeiro/ia",{params:{data_inicio:t,data_fim:a}}).catch(()=>null)]);o(g.data),l(y.data),d((N==null?void 0:N.data)||{alertas:[],sugestoes:[]})}catch(g){console.error("Erro ao carregar dados:",g),h(((v=(f=g.response)==null?void 0:f.data)==null?void 0:v.detail)||"Erro ao carregar dados do dashboard")}finally{m(!1)}}j.useEffect(()=>{const f=new Date,v=new Date(f.getFullYear(),f.getMonth(),1);r(v.toISOString().slice(0,10)),s(f.toISOString().slice(0,10))},[]),j.useEffect(()=>{t&&a&&b()},[t,a]);const p=()=>{if(!n||n.total_entregas===0)return null;const f=n.margem_media,v=f>=0?"text-green-600":"text-red-600",g=f>=0?"":"";return e.jsxs("div",{className:`p-4 border rounded-lg ${f>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:g}),e.jsx("h3",{className:"font-semibold text-gray-700",children:"Anlise de Margem"})]}),e.jsx("p",{className:`text-sm ${v}`,children:f>=0?e.jsxs(e.Fragment,{children:["A taxa de entrega est ",e.jsx("strong",{children:"cobrindo os custos"})," com uma margem mdia de ",e.jsx("strong",{children:tl(f)})," por entrega."]}):e.jsxs(e.Fragment,{children:[" A taxa de entrega est ",e.jsx("strong",{children:"abaixo dos custos"}),". Dficit mdio de ",e.jsx("strong",{children:tl(Math.abs(f))})," por entrega."]})})]})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(rd,{className:"text-blue-600"}),"Dashboard Financeiro de Entregas"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visualize os custos e receitas das entregas realizadas no perodo"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kn,{className:"text-gray-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Perodo:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"De:"}),e.jsx("input",{type:"date",value:t,onChange:f=>r(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"At:"}),e.jsx("input",{type:"date",value:a,onChange:f=>s(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Hm,{className:u?"animate-spin":""}),u?"Carregando...":"Atualizar"]})]})}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx(fr,{}),e.jsx("span",{children:x})]}),u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(I6,{}),e.jsx(I6,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((f,v)=>e.jsx(V_e,{},v))}),e.jsx(Dv,{}),e.jsx(Dv,{}),e.jsx(Dv,{})]}),!u&&n&&e.jsxs(e.Fragment,{children:[c&&c.alertas&&c.alertas.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(um,{className:"text-yellow-600"}),"Alertas Automticos"]}),e.jsx("div",{className:"space-y-3",children:c.alertas.map((f,v)=>e.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:f})},v))})]}),c&&c.sugestoes&&c.sugestoes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:""}),"Sugestes Prticas"]}),e.jsx("div",{className:"space-y-3",children:c.sugestoes.map((f,v)=>e.jsx("div",{className:"p-4 border border-blue-200 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:f})},v))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx(Ec,{titulo:"Total de Entregas",valor:n.total_entregas,icon:e.jsx(rd,{className:"text-blue-600"}),colorClasse:"border-blue-200 bg-blue-50"}),e.jsx(Ec,{titulo:"Custo Total",valor:tl(n.custo_total_entregas),icon:e.jsx(rs,{className:"text-red-600"}),colorClasse:"border-red-200 bg-red-50",subtitulo:"Entregadores + Moto"}),e.jsx(Ec,{titulo:"Custo Entregadores",valor:tl(n.custo_total_entregadores),icon:e.jsx(Yn,{className:"text-purple-600"}),colorClasse:"border-purple-200 bg-purple-50"}),e.jsx(Ec,{titulo:"Custo da Moto",valor:tl(n.custo_total_moto),icon:e.jsx(O9,{className:"text-orange-600"}),colorClasse:"border-orange-200 bg-orange-50"}),e.jsx(Ec,{titulo:"Repasse aos Entregadores",valor:tl(n.total_repasse_taxa),icon:e.jsx(hh,{className:"text-green-600"}),colorClasse:"border-green-200 bg-green-50"}),e.jsx(Ec,{titulo:"Custo Mdio por Entrega",valor:tl(n.custo_medio_por_entrega),icon:e.jsx(fg,{className:"text-indigo-600"}),colorClasse:"border-indigo-200 bg-indigo-50"})]}),p(),i&&e.jsxs("div",{className:"space-y-6 mt-6",children:[i.por_dia&&i.por_dia.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Custo Total por Dia"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "Estou gastando mais?"'}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(Jd,{data:i.por_dia,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tick:{fontSize:12},tickFormatter:f=>{const[v,g,y]=f.split("-");return`${y}/${g}`}}),e.jsx(Rr,{tick:{fontSize:12}}),e.jsx(lr,{formatter:f=>`R$ ${Number(f).toFixed(2)}`,labelFormatter:f=>{const[v,g,y]=f.split("-");return`${y}/${g}/${v}`}}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"custo",stroke:"#ef4444",strokeWidth:2,name:"Custo Total (R$)"})]})})]}),i.custo_medio&&i.custo_medio.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Custo Mdio por Entrega"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "Entregar est ficando caro?"'}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(Jd,{data:i.custo_medio,children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tick:{fontSize:12},tickFormatter:f=>{const[v,g,y]=f.split("-");return`${y}/${g}`}}),e.jsx(Rr,{tick:{fontSize:12}}),e.jsx(lr,{formatter:f=>`R$ ${Number(f).toFixed(2)}`,labelFormatter:f=>{const[v,g,y]=f.split("-");return`${y}/${g}/${v}`}}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"valor",stroke:"#8b5cf6",strokeWidth:2,name:"Custo Mdio (R$)"})]})})]}),i.taxa_vs_custo&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Taxa Cobrada  Custo Real"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "A taxa cobre o custo?"'}),e.jsx(ua,{width:"100%",height:300,children:e.jsxs(zn,{data:[{name:"Mdia","Taxa Cobrada":i.taxa_vs_custo.taxa_media,"Custo Real":i.taxa_vs_custo.custo_medio}],children:[e.jsx(ya,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"name"}),e.jsx(Rr,{}),e.jsx(lr,{formatter:f=>`R$ ${Number(f).toFixed(2)}`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Taxa Cobrada",fill:"#10b981"}),e.jsx(Mr,{dataKey:"Custo Real",fill:"#ef4444"})]})}),e.jsx("div",{className:"mt-4 text-center",children:i.taxa_vs_custo.taxa_media>=i.taxa_vs_custo.custo_medio?e.jsxs("p",{className:"text-green-600 font-medium",children:[" Taxa mdia (R$ ",i.taxa_vs_custo.taxa_media.toFixed(2),") cobre o custo mdio (R$ ",i.taxa_vs_custo.custo_medio.toFixed(2),")"]}):e.jsxs("p",{className:"text-red-600 font-medium",children:[" Taxa mdia (R$ ",i.taxa_vs_custo.taxa_media.toFixed(2),") est abaixo do custo mdio (R$ ",i.taxa_vs_custo.custo_medio.toFixed(2),")"]})})]})]}),e.jsxs("div",{className:"mt-6 text-sm text-gray-500 text-center",children:["Dados do perodo: ",L6(n.periodo.data_inicio)," at ",L6(n.periodo.data_fim)]})]}),!u&&n&&n.total_entregas===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rd,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Nenhuma entrega encontrada"}),e.jsx("p",{className:"text-gray-500",children:"No h entregas concludas no perodo selecionado"})]})]})}function Ec({titulo:t,valor:r,icon:a,colorClasse:s,subtitulo:n}){return e.jsxs("div",{className:`p-5 rounded-lg border shadow-sm ${s||"border-gray-200 bg-white"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("div",{className:"text-2xl",children:a})}),e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),n&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:n}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:r})]})}function V_e(){return e.jsx("div",{style:{height:110,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}function Dv(){return e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{style:{height:20,width:"40%",borderRadius:4,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",marginBottom:16}}),e.jsx("div",{style:{height:300,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})}function I6(){return e.jsx("div",{style:{height:80,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}function tl(t){return t==null?"R$ 0,00":t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function L6(t){if(!t)return"";const[r,a,s]=t.split("-");return`${s}/${a}/${r}`}function Mv(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(t||0))}function B6(t){return Number((t==null?void 0:t.preco_venda)??(t==null?void 0:t.preco)??(t==null?void 0:t.preco_promocional)??0)}function U_e(){const[t,r]=j.useState(!1),[a,s]=j.useState(!1),[n,o]=j.useState([]),[i,l]=j.useState(""),[c,d]=j.useState([]),[u,m]=j.useState(null),[x,h]=j.useState(""),b=j.useMemo(()=>{try{return JSON.parse(localStorage.getItem("selectedTenant")||"null")}catch{return null}},[]);j.useEffect(()=>{p()},[]);async function p(){var _,w;r(!0),h("");try{const S=await hP({limit:100,busca:i||void 0}),C=S==null?void 0:S.data,k=Array.isArray(C)?C:Array.isArray(C==null?void 0:C.items)?C.items:Array.isArray(C==null?void 0:C.itens)?C.itens:Array.isArray(C==null?void 0:C.produtos)?C.produtos:[];o(k)}catch(S){o([]),h(((w=(_=S==null?void 0:S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao carregar produtos vendveis")}finally{r(!1)}}function f(_){const w=_.id;if(c.find(C=>C.produto_id===w)){d(C=>C.map(k=>k.produto_id===w?{...k,quantidade:k.quantidade+1}:k));return}d(C=>[...C,{produto_id:w,nome:_.nome,preco_unitario:B6(_),quantidade:1}])}function v(_,w){if(w<=0){d(S=>S.filter(C=>C.produto_id!==_));return}d(S=>S.map(C=>C.produto_id===_?{...C,quantidade:w}:C))}const g=j.useMemo(()=>c.reduce((_,w)=>_+w.preco_unitario*w.quantidade,0),[c]);function y(){var _;return(_=window==null?void 0:window.crypto)!=null&&_.randomUUID?window.crypto.randomUUID():`checkout-${Date.now()}-${Math.random().toString(16).slice(2)}`}async function N(){var _,w;if(!(b!=null&&b.id)){h("Tenant no selecionado. Faa login novamente e selecione uma empresa.");return}if(c.length===0){h("Adicione pelo menos um item no carrinho.");return}s(!0),h(""),m(null);try{const S=await V.post("/ecommerce/checkout",{cliente_id:888,origem:"web",items:c},{headers:{"Idempotency-Key":y()}});m(S.data),d([])}catch(S){h(((w=(_=S==null?void 0:S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao finalizar checkout")}finally{s(!1)}}return e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"E-commerce MVP"}),e.jsx("p",{style:{color:"#666",marginBottom:16},children:"Fluxo rpido: catlogo, carrinho e checkout integrado ao endpoint novo."}),e.jsxs("div",{style:{marginBottom:12,color:b!=null&&b.id?"#0a7d32":"#b00020"},children:["Tenant: ",(b==null?void 0:b.name)||"no selecionado"," (",(b==null?void 0:b.id)||"-",")"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[e.jsx("input",{value:i,onChange:_=>l(_.target.value),placeholder:"Buscar produto...",style:{flex:1,padding:8,border:"1px solid #ddd",borderRadius:6}}),e.jsx("button",{className:"btn-secondary",onClick:p,disabled:t,children:t?"Carregando...":"Buscar"})]}),x&&e.jsx("div",{style:{background:"#ffe8e8",color:"#8c0000",padding:10,borderRadius:6,marginBottom:12},children:x}),e.jsxs("div",{style:{display:"grid",gap:8},children:[n.map(_=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #eee",borderRadius:6,padding:10},children:[e.jsxs("div",{children:[e.jsx("strong",{children:_.nome}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:["ID: ",_.id]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{marginBottom:6},children:Mv(B6(_))}),e.jsx("button",{className:"btn-primary",onClick:()=>f(_),children:"Adicionar"})]})]},_.id)),!t&&n.length===0&&e.jsxs("div",{style:{color:"#666",padding:12,display:"grid",gap:10},children:[e.jsx("div",{children:"Nenhum produto vendvel encontrado para este tenant."}),e.jsxs("div",{style:{fontSize:13},children:["Dica: cadastre um produto em ",e.jsx($l,{to:"/produtos/novo",style:{color:"#2563eb"},children:"Produtos > Novo"})," e volte para testar o checkout."]})]})]})]}),e.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[e.jsx("h3",{style:{marginTop:0},children:"Carrinho"}),c.length===0?e.jsx("div",{style:{color:"#666"},children:"Carrinho vazio"}):e.jsx("div",{style:{display:"grid",gap:8},children:c.map(_=>e.jsxs("div",{style:{border:"1px solid #eee",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontWeight:600},children:_.nome}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:Mv(_.preco_unitario)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:6},children:[e.jsx("button",{className:"btn-secondary",onClick:()=>v(_.produto_id,_.quantidade-1),children:"-"}),e.jsx("span",{children:_.quantidade}),e.jsx("button",{className:"btn-secondary",onClick:()=>v(_.produto_id,_.quantidade+1),children:"+"})]})]},_.produto_id))}),e.jsx("hr",{style:{margin:"12px 0"}}),e.jsxs("div",{style:{fontWeight:700,marginBottom:10},children:["Total: ",Mv(g)]}),e.jsx("button",{className:"btn-primary",onClick:N,disabled:a||c.length===0,style:{width:"100%"},children:a?"Finalizando...":"Finalizar Checkout"}),(u==null?void 0:u.pedido_id)&&e.jsxs("div",{style:{marginTop:12,background:"#e8fff0",color:"#0a7d32",padding:10,borderRadius:6},children:["Pedido criado: ",e.jsx("strong",{children:u.pedido_id})]})]})]})]})}function W_e(){return e.jsx(x9,{children:e.jsxs(TM,{children:[e.jsx(NI,{position:"top-right"}),e.jsxs(wM,{children:[e.jsx(ft,{path:"/login",element:e.jsx(Z9,{})}),e.jsx(ft,{path:"/register",element:e.jsx(eB,{})}),e.jsxs(ft,{path:"/",element:e.jsx(Yt,{children:e.jsx(J9,{})}),children:[e.jsx(ft,{index:!0,element:e.jsx(Oy,{to:"/lembretes",replace:!0})}),e.jsx(ft,{path:"dashboard",element:e.jsx(Yt,{permission:"relatorios.gerencial",children:e.jsx(Ik,{})})}),e.jsx(ft,{path:"dashboard-gerencial",element:e.jsx(Yt,{permission:"relatorios.gerencial",children:e.jsx(__e,{})})}),e.jsx(ft,{path:"clientes",element:e.jsx(Yt,{permission:"clientes.visualizar",children:e.jsx(pB,{})})}),e.jsx(ft,{path:"clientes/:clienteId/financeiro",element:e.jsx(Yt,{permission:"clientes.visualizar",children:e.jsx(N_e,{})})}),e.jsx(ft,{path:"clientes/:clienteId/timeline",element:e.jsx(Yt,{permission:"clientes.visualizar",children:e.jsx(Nz,{})})}),e.jsx(ft,{path:"pets",element:e.jsx(zB,{})}),e.jsx(ft,{path:"pets/novo",element:e.jsx(D4,{})}),e.jsx(ft,{path:"pets/:petId",element:e.jsx(UB,{})}),e.jsx(ft,{path:"pets/:petId/editar",element:e.jsx(D4,{})}),e.jsx(ft,{path:"produtos",element:e.jsx(Yt,{permission:"produtos.visualizar",children:e.jsx(PB,{})})}),e.jsx(ft,{path:"produtos/novo",element:e.jsx(Yt,{permission:"produtos.criar",children:e.jsx($4,{})})}),e.jsx(ft,{path:"produtos/:id/editar",element:e.jsx(Yt,{permission:"produtos.editar",children:e.jsx($4,{})})}),e.jsx(ft,{path:"produtos/:id/movimentacoes",element:e.jsx(wz,{})}),e.jsx(ft,{path:"produtos/relatorio",element:e.jsx(OB,{})}),e.jsx(ft,{path:"estoque/alertas",element:e.jsx(Yt,{permission:"produtos.visualizar",children:e.jsx(IB,{})})}),e.jsx(ft,{path:"lembretes",element:e.jsx(LB,{})}),e.jsx(ft,{path:"calculadora-racao",element:e.jsx(BB,{})}),e.jsx(ft,{path:"pdv",element:e.jsx(Yt,{permission:"vendas.criar",children:e.jsx(bz,{})})}),e.jsx(ft,{path:"meus-caixas",element:e.jsx(yz,{})}),e.jsx(ft,{path:"notas-fiscais",element:e.jsx(jz,{})}),e.jsx(ft,{path:"compras/pedidos",element:e.jsx(Yt,{permission:"compras.gerenciar",children:e.jsx(Sz,{})})}),e.jsx(ft,{path:"compras/entrada-xml",element:e.jsx(Yt,{permission:"compras.gerenciar",children:e.jsx(Ez,{})})}),e.jsx(ft,{path:"compras/bling",element:e.jsx(Yt,{permission:"compras.gerenciar",children:e.jsx(_z,{})})}),e.jsx(ft,{path:"financeiro",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(Ik,{})})}),e.jsx(ft,{path:"financeiro/vendas",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(_2e,{})})}),e.jsx(ft,{path:"financeiro/relatorio-vendas",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx($he,{})})}),e.jsx(ft,{path:"financeiro/contas-pagar",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(bhe,{})})}),e.jsx(ft,{path:"financeiro/contas-receber",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(vhe,{})})}),e.jsx(ft,{path:"financeiro/conciliacao-3abas",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(whe,{})})}),e.jsx(ft,{path:"financeiro/historico-conciliacoes",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(_he,{})})}),e.jsx(ft,{path:"financeiro/conciliacao-bancaria",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(She,{})})}),e.jsx(ft,{path:"financeiro/fluxo-caixa",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(Rhe,{})})}),e.jsx(ft,{path:"financeiro/dre",element:e.jsx(Yt,{permission:"relatorios.financeiro",children:e.jsx(T2e,{})})}),e.jsx(ft,{path:"comissoes",element:e.jsx(d_e,{})}),e.jsx(ft,{path:"comissoes/demonstrativo",element:e.jsx(x_e,{})}),e.jsx(ft,{path:"comissoes/relatorios",element:e.jsx(b_e,{})}),e.jsx(ft,{path:"comissoes/abertas",element:e.jsx(p_e,{})}),e.jsx(ft,{path:"comissoes/fechamento/:funcionario_id",element:e.jsx(h_e,{})}),e.jsx(ft,{path:"comissoes/fechamentos",element:e.jsx(f_e,{})}),e.jsx(ft,{path:"comissoes/fechamentos/detalhe",element:e.jsx(g_e,{})}),e.jsx(ft,{path:"subcategorias",element:e.jsx(M6,{})}),e.jsx(ft,{path:"cadastros/categorias",element:e.jsx(v_e,{})}),e.jsx(ft,{path:"cadastros/categorias-financeiras",element:e.jsx(y_e,{})}),e.jsx(ft,{path:"cadastros/especies-racas",element:e.jsx(j_e,{})}),e.jsx(ft,{path:"cadastros/cargos",element:e.jsx($_e,{})}),e.jsx(ft,{path:"cadastros/financeiro/bancos",element:e.jsx(Yt,{permission:"configuracoes.editar",children:e.jsx(fhe,{})})}),e.jsx(ft,{path:"cadastros/financeiro/formas-pagamento",element:e.jsx(Yt,{permission:"configuracoes.editar",children:e.jsx(Ehe,{})})}),e.jsx(ft,{path:"cadastros/financeiro/operadoras",element:e.jsx(Yt,{permission:"configuracoes.editar",children:e.jsx(Phe,{})})}),e.jsx(ft,{path:"subcategorias",element:e.jsx(M6,{})}),e.jsx(ft,{path:"admin/usuarios",element:e.jsx(Yt,{permission:"usuarios.manage",children:e.jsx(S_e,{})})}),e.jsx(ft,{path:"configuracoes",element:e.jsx(Yt,{permission:"configuracoes.editar",children:e.jsx(k_e,{})})}),e.jsx(ft,{path:"configuracoes/fiscal",element:e.jsx(E_e,{})}),e.jsx(ft,{path:"configuracoes/entregas",element:e.jsx(A_e,{})}),e.jsx(ft,{path:"configuracoes/custos-moto",element:e.jsx(P_e,{})}),e.jsx(ft,{path:"configuracoes/estoque",element:e.jsx(T_e,{})}),e.jsx(ft,{path:"auditoria/provisoes",element:e.jsx(O_e,{})}),e.jsx(ft,{path:"projecao-caixa",element:e.jsx(F_e,{})}),e.jsx(ft,{path:"simulacao-contratacao",element:e.jsx(R_e,{})}),e.jsx(ft,{path:"rh/funcionarios",element:e.jsx(M_e,{})}),e.jsx(ft,{path:"admin/roles",element:e.jsx(C_e,{})}),e.jsx(ft,{path:"entregas/abertas",element:e.jsx(I_e,{})}),e.jsx(ft,{path:"entregas/rotas",element:e.jsx(L_e,{})}),e.jsx(ft,{path:"entregas/historico",element:e.jsx(z_e,{})}),e.jsx(ft,{path:"entregas/financeiro",element:e.jsx(q_e,{})}),e.jsx(ft,{path:"ecommerce",element:e.jsx(U_e,{})}),e.jsx(ft,{path:"ia/fluxo-caixa",element:e.jsx(Yt,{permission:"ia.fluxo_caixa",children:e.jsx(Wwe,{})})}),e.jsx(ft,{path:"ia/chat",element:e.jsx(Hwe,{})}),e.jsx(ft,{path:"ia/whatsapp",element:e.jsx(Yt,{permission:"ia.whatsapp",children:e.jsx(c_e,{})})}),e.jsx(ft,{path:"ia/alertas-racao",element:e.jsx(Yt,{permission:"produtos.editar",children:e.jsx(k2e,{})})}),e.jsx(ft,{path:"cadastros/opcoes-racao",element:e.jsx(Yt,{permission:"produtos.editar",children:e.jsx(E2e,{})})})]}),e.jsx(ft,{path:"*",element:e.jsx(Oy,{to:"/",replace:!0})})]})]})})}Iv.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(W_e,{})}));
