import{ah as v,S as f,r as t,j as e,af as y,aq as N,y as C}from"./vendor-react-1772212460024.js";import{a as d}from"./index-1772212460024.js";import{C as w}from"./ClienteTimeline-1772212460024.js";const E=()=>{const{clienteId:r}=v(),c=f(),[l,x]=t.useState(null),[n,m]=t.useState([]),[p,u]=t.useState(!0),[a,o]=t.useState({tipo_evento:"",pet_id:""}),[i,g]=t.useState(!1);t.useEffect(()=>{h(),b()},[r]);const h=async()=>{try{const s=await d.get(`/clientes/${r}`);x(s.data)}catch(s){console.error("Erro ao carregar cliente:",s)}finally{u(!1)}},b=async()=>{try{const s=await d.get(`/pets/cliente/${r}`);m(s.data)}catch(s){console.error("Erro ao carregar pets:",s)}},j=()=>{o({tipo_evento:"",pet_id:""})};return p?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):l?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>c("/clientes"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(y,{}),"Voltar para clientes"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Timeline de ",l.nome]}),e.jsx("p",{className:"text-gray-600",children:"Hist√≥rico completo de eventos e intera√ß√µes"})]}),e.jsxs("button",{onClick:()=>g(!i),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(N,{}),"Filtros"]})]}),i&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),e.jsxs("select",{value:a.tipo_evento,onChange:s=>o({...a,tipo_evento:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"venda",children:"üõí Vendas"}),e.jsx("option",{value:"conta_receber",children:"üí∞ Contas a Receber"}),e.jsx("option",{value:"pet_cadastro",children:"üêæ Cadastro de Pet"}),e.jsx("option",{value:"pet_atualizacao",children:"‚úèÔ∏è Atualiza√ß√£o de Pet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pet"}),e.jsxs("select",{value:a.pet_id,onChange:s=>o({...a,pet_id:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",disabled:n.length===0,children:[e.jsx("option",{value:"",children:"Todos os pets"}),n.map(s=>e.jsxs("option",{value:s.id,children:[s.nome," - ",s.especie]},s.id))]})]}),e.jsx("div",{className:"col-span-2 flex justify-end gap-2",children:e.jsxs("button",{onClick:j,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(C,{}),"Limpar filtros"]})})]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(w,{clienteId:parseInt(r),limit:100,showHeader:!1})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:"Cliente n√£o encontrado"})})};export{E as default};
