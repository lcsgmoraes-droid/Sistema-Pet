import{r as l,u as xn,S as yn,ah as bn,j as o}from"./vendor-react-1772304405607.js";import{b as jn}from"./index-1772304405607.js";import{a as vn}from"./api-1772304405607.js";const w=jn.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}});function J(...r){window.gtag&&window.gtag(...r)}function Sn(r){J("event","page_view",{page_title:{loja:"Loja",carrinho:"Carrinho",checkout:"Checkout",conta:"Minha Conta",pedidos:"Meus Pedidos"}[r]||r,page_location:window.location.href})}function kn(r){J("event","view_item",{currency:"BRL",value:Ue(r),items:[Uo(r,1)]})}function qo(r){J("event","add_to_cart",{currency:"BRL",value:Ue(r),items:[Uo(r,1)]})}function _n(r){J("event","begin_checkout",{currency:"BRL",value:Number((r==null?void 0:r.total)||0),items:Ve(r)})}function wn(r,d){J("event","purchase",{transaction_id:(r==null?void 0:r.pedido_id)||"",currency:"BRL",value:Number((d==null?void 0:d.total)||0),items:Ve(d)})}function zn(r){J("event","view_cart",{currency:"BRL",value:Number((r==null?void 0:r.total)||0),items:Ve(r)})}function Ue(r){return Number((r==null?void 0:r.preco_venda)??(r==null?void 0:r.preco)??(r==null?void 0:r.preco_unitario)??0)}function Uo(r,d){return{item_id:String((r==null?void 0:r.id)||(r==null?void 0:r.produto_id)||""),item_name:(r==null?void 0:r.nome)||(r==null?void 0:r.name)||"",price:Ue(r),quantity:Number(d)}}function Ve(r){return((r==null?void 0:r.itens)||[]).map(d=>({item_id:String(d.produto_id||""),item_name:d.nome||"",price:Number(d.preco_unitario||0),quantity:Number(d.quantidade||1)}))}const ee="ecommerce_customer_token",Ne="ecommerce_customer_orders",De="ecommerce_customer_address",Oe="ecommerce_guest_cart",Mo="ecommerce_wishlist_products",$o="ecommerce_notify_requests",Do="/api",H={pedido_id:null,itens:[],subtotal:0,total:0},xe={cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""};function S(r){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(r||0))}function Cn(r){if(!r)return"-";const d=new Date(r);return Number.isNaN(d.getTime())?"-":new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(d)}function Fe(r){return Number((r==null?void 0:r.preco_venda)??(r==null?void 0:r.preco)??(r==null?void 0:r.preco_promocional)??0)}function oe(r){const d=Number(r==null?void 0:r.estoque_ecommerce),h=Number(r==null?void 0:r.estoque_atual);return Number.isFinite(d)&&d>0?d:Number.isFinite(h)?h:Number.isFinite(d)?d:Number.POSITIVE_INFINITY}function ye(r){const d=oe(r);return Number.isFinite(d)&&d<=0}async function qe(r){const d=String(r||"").replace(/\D+/g,"");if(d.length!==8)return null;try{const h=await fetch(`https://viacep.com.br/ws/${d}/json/`);if(!h.ok)return null;const f=await h.json();return f!=null&&f.erro?null:{cep:d,endereco:(f==null?void 0:f.logradouro)||"",bairro:(f==null?void 0:f.bairro)||"",cidade:(f==null?void 0:f.localidade)||"",estado:(f==null?void 0:f.uf)||""}}catch{return null}}function In(){var r;return(r=window==null?void 0:window.crypto)!=null&&r.randomUUID?window.crypto.randomUUID():`checkout-${Date.now()}-${Math.random().toString(16).slice(2)}`}function ne(r){if(!r||typeof r!="string")return"";if(/^https?:\/\//i.test(r))return r;const d=r.startsWith("/")?r:`/${r}`;return/^https?:\/\//i.test(Do)?`${Do.replace(/\/api\/?$/,"").replace(/\/$/,"")}${d}`:`${window.location.origin}${d}`}function Oo(r){return Array.isArray(r)?r:Array.isArray(r==null?void 0:r.items)?r.items:Array.isArray(r==null?void 0:r.itens)?r.itens:Array.isArray(r==null?void 0:r.produtos)?r.produtos:[]}function Me(){try{const r=localStorage.getItem(Oe);if(!r)return{...H};const d=JSON.parse(r);if(!Array.isArray(d==null?void 0:d.itens))return{...H};const h=Number((d==null?void 0:d.subtotal)||0),f=Number((d==null?void 0:d.total)||0);return{pedido_id:null,itens:d.itens,subtotal:h,total:f}}catch{return{...H}}}function $e(r){const d=r.reduce((h,f)=>h+Number(f.preco_unitario||0)*Number(f.quantidade||0),0);return{pedido_id:null,itens:r,subtotal:d,total:d}}function Bn(){try{const r=localStorage.getItem(De);if(!r)return{...xe};const d=JSON.parse(r);return typeof d=="object"&&d!==null?{...xe,...d}:{...xe,endereco:String(r||"")}}catch{const r=localStorage.getItem(De)||"";return{...xe,endereco:r}}}function Rn(r){const d=[r.endereco,r.numero].filter(Boolean).join(", "),h=r.bairro?`Bairro: ${r.bairro}`:"",f=[r.cidade,r.estado].filter(Boolean).join("/"),x=r.cep?`CEP: ${r.cep}`:"",b=r.complemento?`Compl.: ${r.complemento}`:"";return[d,h,f,x,b].filter(Boolean).join(" | ")}function Y(r){const d=[];return r!=null&&r.imagem_principal&&d.push(ne(r.imagem_principal)),Array.isArray(r==null?void 0:r.imagens)&&r.imagens.forEach(h=>{typeof h=="string"&&h.trim()?d.push(ne(h.trim())):h!=null&&h.url&&typeof h.url=="string"&&d.push(ne(h.url.trim()))}),Array.from(new Set(d.filter(Boolean)))}function Wn(r){const d=String(r||"");return d?d.includes("??")||d.includes("ÔøΩ")||/\?{2,}/.test(d):!1}function Tn(r){return String(r||"").split("-").filter(Boolean).map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}function C(r,d){var x;const h=(x=r==null?void 0:r.response)==null?void 0:x.data,f=h==null?void 0:h.detail;if(typeof f=="string"&&f.trim())return f;if(Array.isArray(f)&&f.length>0){const b=f[0];if(typeof b=="string"&&b.trim())return b;if(typeof(b==null?void 0:b.msg)=="string"&&b.msg.trim())return b.msg}if(Array.isArray(h==null?void 0:h.details)&&h.details.length>0){const b=h.details[0];if(typeof b=="string"&&b.trim())return b;if(typeof(b==null?void 0:b.msg)=="string"&&b.msg.trim())return b.msg}return typeof(h==null?void 0:h.message)=="string"&&h.message.trim()?h.message:d}const An=[{bg:"linear-gradient(135deg, #f97316 0%, #ea580c 60%, #c2410c 100%)",title:"Compre e receba no mesmo dia!",sub:"Pedidos realizados at√© as 16h",emoji:"üöÄ"},{bg:"linear-gradient(135deg, #10b981 0%, #059669 60%, #047857 100%)",title:"Retire na loja",sub:"Super simples e sem custo de frete!",emoji:"üè™"},{bg:"linear-gradient(135deg, #f59e0b 0%, #d97706 60%, #b45309 100%)",title:"As melhores ra√ß√µes em Prudente",sub:"Cachorros, gatos, p√°ssaros e mais üêæ",emoji:"üê∂"}];function Nn(){var ko,_o,wo,zo,Co,Io,Bo,Ro,Wo,To,Ao,Eo,Lo,Po,No,Fo;l.useEffect(()=>{const e="plus-jakarta-sans-font";if(!document.getElementById(e)){const n=document.createElement("link");n.id=e,n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap",document.head.appendChild(n)}},[]);const r=xn(),d=yn(),h=bn(),[f,x]=l.useState("loja");l.useEffect(()=>{Sn(f),f==="carrinho"&&zn(c)},[f]);const[b,Ye]=l.useState(0),[Vo,He]=l.useState(null),[be,re]=l.useState(!1),[A,te]=l.useState([]),[D,ie]=l.useState(""),[N,je]=l.useState("todas"),[y,Je]=l.useState(null),[Ke,Yo]=l.useState(!1),[Ge,Ho]=l.useState(!1),[ae,se]=l.useState(!1),[ve,Xe]=l.useState(!1),[Jo,Qe]=l.useState(!1),[v,de]=l.useState(localStorage.getItem(ee)||""),[i,O]=l.useState(null),[Ze,eo]=l.useState(!1),[m,j]=l.useState({nome:"",telefone:"",cpf:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",usar_endereco_entrega_diferente:!1,entrega_nome:"",entrega_cep:"",entrega_endereco:"",entrega_numero:"",entrega_complemento:"",entrega_bairro:"",entrega_cidade:"",entrega_estado:""}),[K,le]=l.useState({email:"",password:"",nome:""}),[ce,Se]=l.useState({email:"",password:""}),[c,E]=l.useState(()=>Me()),[ke,oo]=l.useState(""),[L,_e]=l.useState(null),[q,no]=l.useState(""),[F,Ko]=l.useState("entrega"),[pe,Go]=l.useState("proprio"),[I,P]=l.useState(()=>Bn()),[B,fe]=l.useState(null),[U,we]=l.useState(null),[R,Xo]=l.useState(""),[ge,Qo]=l.useState("Visa"),[ze,Zo]=l.useState(1),[Ce,ro]=l.useState(""),[Ie,to]=l.useState(""),[io,ao]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(Ne)||"[]")}catch{return[]}}),[so,lo]=l.useState([]),[Be,co]=l.useState(!1),[G,en]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(Mo)||"[]")}catch{return[]}}),[Re,on]=l.useState(()=>{try{return JSON.parse(localStorage.getItem($o)||"[]")}catch{return[]}}),[M,$]=l.useState({open:!1,product:null,email:"",loading:!1}),[po,g]=l.useState(""),[fo,k]=l.useState(""),[t,We]=l.useState(null),ue=l.useMemo(()=>{const e=[t==null?void 0:t.banner_1_url,t==null?void 0:t.banner_2_url,t==null?void 0:t.banner_3_url].filter(Boolean);return e.length>0?e.map(n=>({type:"image",url:n})):An.map(n=>({...n,type:"text"}))},[t==null?void 0:t.banner_1_url,t==null?void 0:t.banner_2_url,t==null?void 0:t.banner_3_url]),X=l.useMemo(()=>{const n=String((i==null?void 0:i.nome)||"").trim().includes(" "),s=String((i==null?void 0:i.telefone)||"").trim().length>=8,p=String((i==null?void 0:i.cpf)||"").replace(/\D+/g,"").length>=11,u=String((i==null?void 0:i.endereco)||"").trim().length>3;return n&&s&&p&&u},[i]),W=l.useMemo(()=>new URLSearchParams(r.search).get("tenant")||h.tenantId||"",[r.search,h.tenantId]),go=l.useMemo(()=>t!=null&&t.id?{"X-Tenant-ID":t.id}:{},[t==null?void 0:t.id]),T=l.useMemo(()=>v?{Authorization:`Bearer ${v}`}:{},[v]),Te=l.useMemo(()=>{const e=A.map(n=>(n==null?void 0:n.categoria_nome)||(n==null?void 0:n.categoria)||"Sem categoria").filter(Boolean);return["todas",...Array.from(new Set(e))]},[A]),Q=l.useMemo(()=>{const e=D.trim().toLowerCase();return A.filter(n=>{const s=String((n==null?void 0:n.nome)||"").toLowerCase(),p=String((n==null?void 0:n.codigo)||"").toLowerCase(),u=(n==null?void 0:n.categoria_nome)||(n==null?void 0:n.categoria)||"Sem categoria";return(!e||s.includes(e)||p.includes(e))&&(N==="todas"||u===N)})},[A,D,N]),uo=l.useMemo(()=>Object.fromEntries(A.map(e=>[e.id,e])),[A]),he=(t==null?void 0:t.ecommerce_slug)||W||"",Ae=(i==null?void 0:i.nome)||(i==null?void 0:i.email)||"",ho=l.useMemo(()=>{const e=(t==null?void 0:t.name)||"";return e&&!Wn(e)?e:he?Tn(he):"Loja online"},[t==null?void 0:t.name,he]);l.useEffect(()=>{const n=new URLSearchParams(r.search).get("busca");n&&ie(n)},[r.search]),l.useEffect(()=>{nn(),W&&mo()},[W]),l.useEffect(()=>{!W&&(t!=null&&t.id)&&(t.ecommerce_slug?d(`/${t.ecommerce_slug}`,{replace:!0}):rn(t.id))},[t==null?void 0:t.id]),l.useEffect(()=>{v&&(tn(),xo())},[v]),l.useEffect(()=>{t!=null&&t.cidade&&!q&&no(t.cidade)},[t==null?void 0:t.cidade,q]),l.useEffect(()=>{v||localStorage.setItem(Oe,JSON.stringify(c||H))},[c,v]),l.useEffect(()=>{localStorage.setItem(Mo,JSON.stringify(G))},[G]),l.useEffect(()=>{localStorage.setItem($o,JSON.stringify(Re))},[Re]),l.useEffect(()=>{const e=ue.length,n=setInterval(()=>Ye(s=>(s+1)%e),4e3);return()=>clearInterval(n)},[ue.length]),l.useEffect(()=>{if(!i)return;const e=(i==null?void 0:i.endereco_entrega_detalhado)||{};j({nome:(i==null?void 0:i.nome)||"",telefone:(i==null?void 0:i.telefone)||"",cpf:(i==null?void 0:i.cpf)||"",cep:(i==null?void 0:i.cep)||"",endereco:(i==null?void 0:i.endereco)||"",numero:(i==null?void 0:i.numero)||"",complemento:(i==null?void 0:i.complemento)||"",bairro:(i==null?void 0:i.bairro)||"",cidade:(i==null?void 0:i.cidade)||"",estado:(i==null?void 0:i.estado)||"",endereco_entrega:(i==null?void 0:i.endereco_entrega)||"",usar_endereco_entrega_diferente:!!(i!=null&&i.usar_endereco_entrega_diferente),entrega_nome:(e==null?void 0:e.entrega_nome)||"",entrega_cep:(e==null?void 0:e.entrega_cep)||"",entrega_endereco:(e==null?void 0:e.entrega_endereco)||"",entrega_numero:(e==null?void 0:e.entrega_numero)||"",entrega_complemento:(e==null?void 0:e.entrega_complemento)||"",entrega_bairro:(e==null?void 0:e.entrega_bairro)||"",entrega_cidade:(e==null?void 0:e.entrega_cidade)||"",entrega_estado:(e==null?void 0:e.entrega_estado)||""})},[i]),l.useEffect(()=>{if(!i)return;const e=(i==null?void 0:i.endereco_entrega_detalhado)||{},n=!!(i!=null&&i.usar_endereco_entrega_diferente);P({cep:n?(e==null?void 0:e.entrega_cep)||(i==null?void 0:i.cep)||"":(i==null?void 0:i.cep)||"",endereco:n?(e==null?void 0:e.entrega_endereco)||(i==null?void 0:i.endereco)||"":(i==null?void 0:i.endereco)||"",numero:n?(e==null?void 0:e.entrega_numero)||(i==null?void 0:i.numero)||"":(i==null?void 0:i.numero)||"",complemento:n?(e==null?void 0:e.entrega_complemento)||(i==null?void 0:i.complemento)||"":(i==null?void 0:i.complemento)||"",bairro:n?(e==null?void 0:e.entrega_bairro)||(i==null?void 0:i.bairro)||"":(i==null?void 0:i.bairro)||"",cidade:n?(e==null?void 0:e.entrega_cidade)||(i==null?void 0:i.cidade)||"":(i==null?void 0:i.cidade)||"",estado:n?(e==null?void 0:e.entrega_estado)||(i==null?void 0:i.estado)||"":(i==null?void 0:i.estado)||""})},[i]);async function nn(){try{if(!W){const n=await vn.get("/ecommerce-aparencia/tenant-context");We((n==null?void 0:n.data)||null);return}const e=await w.get("/api/ecommerce/tenant-context",{params:{tenant:W}});We((e==null?void 0:e.data)||null)}catch(e){We(null),g(C(e,"Loja inv√°lida para e-commerce"))}}async function mo(){if(W){re(!0),g("");try{const e=await w.get("/api/ecommerce/produtos",{params:{tenant:W,limit:100,busca:D||void 0}});te(Oo(e==null?void 0:e.data))}catch(e){te([]),g(C(e,"Erro ao carregar produtos vend√°veis"))}finally{re(!1)}}}async function rn(e){re(!0),g("");try{const n=await w.get("/api/ecommerce/produtos",{params:{tenant:e,limit:100,busca:D||void 0}});te(Oo(n==null?void 0:n.data))}catch(n){te([]),g(C(n,"Erro ao carregar produtos vend√°veis"))}finally{re(!1)}}async function tn(){if(v)try{const e=await w.get("/api/ecommerce/auth/perfil",{headers:T});O(e.data)}catch{O(null),de(""),localStorage.removeItem(ee),E(Me())}}async function an(e){if(e.preventDefault(),!v){g("Fa√ßa login para atualizar seus dados.");return}const n=String(m.nome||"").trim();if(!n||!n.includes(" ")){g("Informe nome completo (nome e sobrenome).");return}if(m.usar_endereco_entrega_diferente&&![m.entrega_nome,m.entrega_endereco,m.entrega_numero,m.entrega_bairro,m.entrega_cidade,m.entrega_estado].every(p=>String(p||"").trim())){g("Preencha o endere√ßo de entrega completo para continuar.");return}eo(!0),g(""),k("");try{const s=await w.put("/api/ecommerce/auth/perfil",m,{headers:T});O(s.data),k("Dados cadastrais atualizados com sucesso.")}catch(s){g(C(s,"Erro ao salvar dados cadastrais"))}finally{eo(!1)}}async function sn(){const e=await qe(m.cep);e&&j(n=>({...n,cep:e.cep||n.cep,endereco:e.endereco||n.endereco,bairro:e.bairro||n.bairro,cidade:e.cidade||n.cidade,estado:e.estado||n.estado}))}async function dn(){const e=await qe(m.entrega_cep);e&&j(n=>({...n,entrega_cep:e.cep||n.entrega_cep,entrega_endereco:e.endereco||n.entrega_endereco,entrega_bairro:e.bairro||n.entrega_bairro,entrega_cidade:e.cidade||n.entrega_cidade,entrega_estado:e.estado||n.entrega_estado}))}async function ln(){const e=await qe(I.cep);e&&P(n=>({...n,cep:e.cep||n.cep,endereco:e.endereco||n.endereco,bairro:e.bairro||n.bairro,cidade:e.cidade||n.cidade,estado:e.estado||n.estado}))}async function xo(e=T){if(e!=null&&e.Authorization){Qe(!0);try{const n=await w.get("/api/carrinho",{headers:e});E(n.data||{...H})}catch(n){g(C(n,"Erro ao carregar carrinho"))}finally{Qe(!1)}}}async function yo(e){var p;const n=Me();if(!((p=n==null?void 0:n.itens)!=null&&p.length))return;const s={Authorization:`Bearer ${e}`};for(const u of n.itens)await w.post("/api/carrinho/adicionar",{produto_id:u.produto_id,quantidade:u.quantidade},{headers:s});await xo(s),localStorage.removeItem(Oe)}async function cn(e){var n,s;if(e.preventDefault(),!(t!=null&&t.id)){g("Loja n√£o identificada na URL.");return}se(!0),g(""),k("");try{const p=await w.post("/api/ecommerce/auth/registrar",K,{headers:go}),u=(n=p==null?void 0:p.data)==null?void 0:n.access_token;if(!u)throw new Error("Token n√£o retornado");(s=p==null?void 0:p.data)!=null&&s.user&&O(p.data.user),localStorage.setItem(ee,u),de(u),await yo(u),le({email:"",password:"",nome:""}),k("Cadastro realizado com sucesso. Complete seus dados na aba Conta."),x("conta")}catch(p){g(C(p,"Erro ao cadastrar cliente"))}finally{se(!1)}}async function pn(e){var n,s;if(e.preventDefault(),!(t!=null&&t.id)){g("Loja n√£o identificada na URL.");return}se(!0),g(""),k("");try{const p=await w.post("/api/ecommerce/auth/login",ce,{headers:go}),u=(n=p==null?void 0:p.data)==null?void 0:n.access_token;if(!u)throw new Error("Token n√£o retornado");(s=p==null?void 0:p.data)!=null&&s.user&&O(p.data.user),localStorage.setItem(ee,u),de(u),await yo(u),Se({email:"",password:""}),k("Login realizado com sucesso. Confira seus dados cadastrais."),x("conta")}catch(p){g(C(p,"Erro ao realizar login"))}finally{se(!1)}}function fn(){O(null),de(""),E({...H}),fe(null),we(null),localStorage.removeItem(ee),k("Sess√£o encerrada.")}function bo(e){en(n=>n.includes(e)?(k("Produto removido da sua lista de desejos."),n.filter(s=>s!==e)):(k("Produto adicionado √† sua lista de desejos."),[...n,e]))}function jo(e){const n=(i==null?void 0:i.email)||K.email||ce.email||"";$({open:!0,product:e,email:n,loading:!1})}async function gn(e){e.preventDefault();const{product:n,email:s}=M;if(!s.trim()||!n)return;$(u=>({...u,loading:!0}));const p=(t==null?void 0:t.id)||he||W;try{await w.post("/api/ecommerce-notify/registrar",{email:s.trim(),product_id:n.id,product_name:n.nome,tenant_id:p}),$({open:!1,product:null,email:"",loading:!1}),k("Perfeito! Te avisaremos por e-mail quando o produto voltar ao estoque. üìß"),on(u=>u.some(_=>_.productId===n.id&&String(_.email||"").toLowerCase()===s.trim().toLowerCase())?u:[...u,{productId:n.id,productName:n.nome,email:s.trim(),createdAt:new Date().toISOString()}])}catch{$(u=>({...u,loading:!1})),g("N√£o foi poss√≠vel registrar o aviso. Tente novamente.")}}async function vo(e){if(oe(e)<=0){g("Produto indispon√≠vel no momento. Volto em breve.");return}if(!v){g("");const s=Fe(e);E(p=>{const u=Array.isArray(p==null?void 0:p.itens)?p.itens:[],_=u.find(V=>V.produto_id===e.id)?u.map(V=>V.produto_id===e.id?{...V,quantidade:Number(V.quantidade||0)+1}:V):[...u,{item_id:`guest-${e.id}`,produto_id:e.id,nome:e.nome,preco_unitario:s,quantidade:1}];return $e(_)}),k("Produto adicionado ao carrinho. Fa√ßa login no checkout para finalizar."),qo(e);return}g("");try{const s=await w.post("/api/carrinho/adicionar",{produto_id:e.id,quantidade:1},{headers:T});E(s.data),k("Produto adicionado ao carrinho."),qo(e)}catch(s){g(C(s,"Erro ao adicionar no carrinho"))}}async function Ee(e,n){if(!v){E(s=>{const p=Array.isArray(s==null?void 0:s.itens)?s.itens:[];if(n<=0){const z=p.filter(_=>_.item_id!==e);return $e(z)}const u=p.map(z=>z.item_id===e?{...z,quantidade:n}:z);return $e(u)});return}g("");try{if(n<=0){const p=await w.delete(`/api/carrinho/remover/${e}`,{headers:T});E(p.data);return}const s=await w.put(`/api/carrinho/atualizar/${e}`,{quantidade:n},{headers:T});E(s.data)}catch(s){g(C(s,"Erro ao atualizar carrinho"))}}async function un(e){if(e.preventDefault(),!v){g("Fa√ßa login para aplicar cupom."),x("conta");return}if(ke.trim()){g("");try{const n=await w.post("/api/carrinho/aplicar-cupom",{codigo:ke.trim()},{headers:T});_e(n.data),k("Cupom validado.")}catch(n){_e(null),g(C(n,"Cupom inv√°lido"))}}}async function hn(e){var s;if(e.preventDefault(),!v){g("Fa√ßa login para continuar no checkout."),x("conta");return}if(!((s=c==null?void 0:c.itens)!=null&&s.length)){g("Adicione itens no carrinho antes de calcular o checkout.");return}const n=((t==null?void 0:t.cidade)||q||I.cidade||"").trim();if(!n||n.length<2){g("Cidade da loja n√£o configurada para checkout.");return}g(""),fe(null);try{const p=await w.get("/api/checkout/resumo",{headers:T,params:{cidade_destino:n,cupom:(L==null?void 0:L.codigo)||void 0}});fe(p.data),k("Resumo de checkout calculado.")}catch(p){g(C(p,"Erro ao calcular resumo do checkout"))}}async function mn(){if(!v){g("Fa√ßa login para finalizar o pedido."),x("conta");return}if(!X){g("Complete seu cadastro antes de finalizar o pedido."),x("conta");return}const e=((t==null?void 0:t.cidade)||q||I.cidade||"").trim();if(!e||e.length<2){g("Cidade da loja n√£o configurada para checkout.");return}const n=F==="retirada"?"RETIRADA NA LOJA":Rn(I);if(F==="entrega"&&!n){g("Informe o endere√ßo de entrega.");return}Xe(!0),g(""),k(""),we(null);try{const p=(await w.post("/api/checkout/finalizar",{cidade_destino:e,endereco_entrega:n||null,cupom:(L==null?void 0:L.codigo)||null,tipo_retirada:F==="retirada"?pe:null,forma_pagamento_nome:R==="dinheiro"?Ce?`Dinheiro (troco p/ R$ ${Ce})`:"Dinheiro":R==="pix"?"PIX":R==="debito"?`D√©bito ${ge}`:R==="credito"?`Cr√©dito ${ge} ${ze}x`:null},{headers:{...T,"Idempotency-Key":In()}})).data;if(we(p),wn(p,c),E({pedido_id:null,itens:[],subtotal:0,total:0}),fe(null),_e(null),oo(""),F==="entrega"&&localStorage.setItem(De,JSON.stringify(I)),p!=null&&p.pedido_id){const u=Array.from(new Set([p.pedido_id,...io]));ao(u),localStorage.setItem(Ne,JSON.stringify(u)),await Le()}k("Pedido finalizado com sucesso."),x("pedidos")}catch(s){g(C(s,"Erro ao finalizar checkout"))}finally{Xe(!1)}}async function Le(){var e;if(v){co(!0);try{const n=await w.get("/api/checkout/pedidos",{headers:T,params:{limit:20}}),s=Array.isArray((e=n==null?void 0:n.data)==null?void 0:e.pedidos)?n.data.pedidos:[];if(lo(s),s.length){const p=s.map(z=>z==null?void 0:z.pedido_id).filter(Boolean),u=Array.from(new Set([...p,...io]));ao(u),localStorage.setItem(Ne,JSON.stringify(u))}}catch(n){lo([]),g(C(n,"Erro ao carregar detalhes dos pedidos"))}finally{co(!1)}}}l.useEffect(()=>{!v||f!=="pedidos"||Le()},[f,v]);const Z=Number((c==null?void 0:c.total)||0);function So(){var e;if(!((e=c==null?void 0:c.itens)!=null&&e.length)){g("Adicione itens no carrinho antes de finalizar.");return}if(!v){g("Fa√ßa login para finalizar o pedido."),x("conta");return}if(!X){g("Complete seu cadastro (nome completo, telefone, CPF e endere√ßo) antes de finalizar."),x("conta");return}x("checkout"),_n(c)}function Pe(e){const n=Y(e);Je(e),to(n[0]||""),d(`${r.pathname}?produto=${e.id}`,{replace:!0}),kn(e)}function me(){Je(null),d(r.pathname,{replace:!0})}l.useEffect(()=>{if(!y)return;function e(n){n.key==="Escape"&&me()}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y]),l.useEffect(()=>{if(!A.length)return;const n=new URLSearchParams(r.search).get("produto");if(!n||y)return;const s=A.find(p=>String(p.id)===String(n));s&&Pe(s)},[A.length,r.search]);const a={page:{minHeight:"100vh",background:"#faf7f4",fontFamily:"'Plus Jakarta Sans', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},topbar:{background:"linear-gradient(90deg,#f97316 0%,#fb923c 100%)",color:"#fff",padding:"8px 20px",fontSize:13,fontWeight:500},topbarInner:{maxWidth:1280,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},header:{background:"#fff",borderBottom:"1px solid #e7e5e4",padding:"12px 20px",position:"sticky",top:0,zIndex:40,boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},headerInner:{maxWidth:1280,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},logo:{fontSize:20,fontWeight:800,color:"#1c1917",display:"flex",alignItems:"center",gap:8,cursor:"pointer",userSelect:"none"},cityChip:{fontSize:11,color:"#a8a29e",borderLeft:"1px solid #e7e5e4",paddingLeft:12,fontWeight:400},headerActions:{display:"flex",gap:10,alignItems:"center"},avatarBtn:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:24,padding:"7px 14px",fontSize:13,fontWeight:600,color:"#ea580c",display:"flex",alignItems:"center",gap:6,cursor:"pointer"},loginBtn:{background:"#fff",border:"1.5px solid #d1d5db",color:"#374151",borderRadius:24,padding:"7px 16px",fontSize:13,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:6},cartBtn:{background:"#f97316",color:"#fff",border:"none",borderRadius:12,width:42,height:42,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},cartBadge:{position:"absolute",top:-5,right:-5,background:"#10b981",color:"#fff",borderRadius:20,minWidth:18,height:18,fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",padding:"0 3px"},floatBar:{position:"sticky",top:0,zIndex:45,background:"#ea580c",color:"#fff",padding:"10px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},navWrap:{background:"#fff",borderBottom:"1px solid #e7e5e4"},navInner:{maxWidth:1280,margin:"0 auto",display:"flex",padding:"0 20px"},navTab:e=>({flex:"0 0 auto",background:"transparent",border:"none",borderBottom:e?"2px solid #f97316":"2px solid transparent",color:e?"#f97316":"#78716c",padding:"13px 18px",fontWeight:e?700:500,fontSize:14,cursor:"pointer",transition:"all 0.15s",marginBottom:-1}),bannerWrap:{position:"relative",overflow:"hidden",height:320,background:"#1c1917"},bannerDots:{position:"absolute",bottom:14,left:"50%",transform:"translateX(-50%)",display:"flex",gap:6},bannerDot:e=>({width:e?26:9,height:9,background:e?"#fff":"rgba(255,255,255,0.4)",borderRadius:5,border:"none",cursor:"pointer",padding:0,transition:"all 0.3s"}),alertError:{background:"#fef2f2",color:"#b91c1c",border:"1px solid #fecaca",borderRadius:10,padding:"10px 14px",fontSize:13,margin:"12px 20px"},alertSuccess:{background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:10,padding:"10px 14px",fontSize:13,margin:"12px 20px"},main:{maxWidth:1280,margin:"0 auto",padding:"24px 20px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16},card:e=>({border:"1px solid #e7e5e4",borderRadius:14,background:"#fff",cursor:"pointer",display:"flex",flexDirection:"column",overflow:"hidden",transition:"all 0.2s",boxShadow:e?"0 10px 32px rgba(249,115,22,0.15)":"0 1px 4px rgba(0,0,0,0.05)",transform:e?"translateY(-5px)":"none"}),cardImgWrap:{aspectRatio:"1/1",background:"#f5f5f4",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},cardBody:{padding:"12px 14px 14px",display:"flex",flexDirection:"column",gap:4,flex:1},cardName:{fontSize:13,fontWeight:600,lineHeight:1.4,color:"#1c1917",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},cardCat:{fontSize:11,color:"#a8a29e",fontWeight:500},cardSku:{fontSize:10,color:"#d6d3d1",letterSpacing:.3},cardStock:e=>({fontSize:11,fontWeight:600,color:e?"#d97706":"#059669"}),cardPrice:{fontSize:19,fontWeight:800,color:"#1c1917",letterSpacing:-.5,marginTop:"auto",paddingTop:6},addBtn:e=>({background:e?"#f5f5f4":"linear-gradient(135deg,#f97316,#fb923c)",border:"none",color:e?"#a8a29e":"#fff",borderRadius:9,padding:"10px 0",fontWeight:700,fontSize:13,cursor:e?"not-allowed":"pointer",width:"100%",marginTop:6,transition:"opacity 0.15s",boxShadow:e?"none":"0 2px 8px rgba(249,115,22,0.3)"}),notifyBtn:{background:"#fff",border:"1.5px solid #f59e0b",color:"#b45309",borderRadius:9,padding:"8px 0",fontWeight:600,fontSize:12,cursor:"pointer",width:"100%",marginTop:6},wishBtn:{position:"absolute",top:8,right:8,background:"#fff",border:"none",borderRadius:"50%",width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.12)",fontSize:14},unavailBadge:{position:"absolute",top:8,left:8,background:"#fee2e2",color:"#991b1b",borderRadius:6,padding:"3px 8px",fontSize:10,fontWeight:700},sidebar:{background:"#fff",borderRadius:16,border:"1px solid #e7e5e4",padding:20,alignSelf:"start",position:"sticky",top:80,boxShadow:"0 2px 12px rgba(0,0,0,0.06)"},sidebarTitle:{margin:"0 0 14px",fontSize:15,fontWeight:700,color:"#1c1917",display:"flex",alignItems:"center",justifyContent:"space-between"},sidebarBadge:{background:"#f97316",color:"#fff",borderRadius:20,padding:"2px 9px",fontSize:11,fontWeight:700},miniItem:{display:"flex",gap:8,alignItems:"center",borderBottom:"1px solid #f5f5f4",paddingBottom:8,marginBottom:4},miniImg:{width:42,height:42,borderRadius:8,background:"#f5f5f4",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e7e5e4"},subtotalBox:{background:"#fff7ed",borderRadius:10,padding:"10px 12px",marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #fed7aa"},checkoutBig:{background:"linear-gradient(135deg,#f97316,#fb923c)",border:"none",color:"#fff",borderRadius:10,padding:"12px 0",fontWeight:700,fontSize:14,cursor:"pointer",width:"100%",marginTop:8,boxShadow:"0 4px 14px rgba(249,115,22,0.35)"},viewCartBtn:{background:"transparent",border:"2px solid #f97316",color:"#f97316",borderRadius:10,padding:"10px 0",fontWeight:700,fontSize:13,cursor:"pointer",width:"100%",marginTop:6},cartItem:{border:"1px solid #e7e5e4",borderRadius:14,padding:"14px",display:"flex",gap:14,alignItems:"center",background:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.04)"},cartItemImg:{width:80,height:80,borderRadius:10,background:"#f5f5f4",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e7e5e4"},qtyBtn:{background:"#f5f5f4",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},removeBtn:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:12,padding:"4px 8px"},cartTotalRow:{border:"1px solid #e7e5e4",borderRadius:12,padding:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fff"},formCard:{background:"#fff",borderRadius:14,border:"1px solid #e7e5e4",padding:"20px 24px",boxShadow:"0 1px 4px rgba(0,0,0,0.04)"},formLabel:{fontSize:12,fontWeight:600,color:"#78716c",textTransform:"uppercase",letterSpacing:.5,marginBottom:4,display:"block"},formInput:{width:"100%",padding:"10px 12px",border:"1.5px solid #e7e5e4",borderRadius:9,fontSize:14,background:"#faf7f4",outline:"none",boxSizing:"border-box",transition:"border-color 0.15s"},radioLabel:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,padding:"10px 14px",borderRadius:10,border:"1.5px solid #e7e5e4",background:"#faf7f4",fontWeight:500},radioLabelActive:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:14,padding:"10px 14px",borderRadius:10,border:"1.5px solid #f97316",background:"#fff7ed",fontWeight:600,color:"#ea580c"},payBtn:e=>({padding:"10px 16px",borderRadius:10,border:e?"2px solid #f97316":"2px solid #e7e5e4",background:e?"#fff7ed":"#fff",color:e?"#ea580c":"#374151",fontWeight:e?700:500,cursor:"pointer",fontSize:14,display:"flex",alignItems:"center",gap:6}),resumoBox:{background:"#fff",border:"1px solid #e7e5e4",borderRadius:12,padding:"14px 16px",display:"grid",gap:6,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},finalizarBtn:e=>({background:e?"#e5e7eb":"linear-gradient(135deg,#f97316,#fb923c)",border:"none",color:e?"#9ca3af":"#fff",borderRadius:12,padding:"14px 0",fontWeight:700,fontSize:16,cursor:e?"not-allowed":"pointer",width:"100%",boxShadow:e?"none":"0 4px 14px rgba(249,115,22,0.35)"}),orderCard:{border:"1px solid #e7e5e4",borderRadius:14,padding:"16px 20px",background:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.04)",display:"grid",gap:10},statusBadge:e=>{const s={confirmado:{bg:"#dcfce7",color:"#166534"},pendente:{bg:"#fef9c3",color:"#854d0e"},cancelado:{bg:"#fee2e2",color:"#991b1b"}}[String(e).toLowerCase()]||{bg:"#f5f5f4",color:"#555"};return{background:s.bg,color:s.color,borderRadius:20,padding:"3px 10px",fontSize:11,fontWeight:700,display:"inline-flex",alignItems:"center",gap:4}},rewardBox:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:12,textAlign:"center"},accountCard:{background:"#fff",borderRadius:14,border:"1px solid #e7e5e4",padding:"20px 24px",boxShadow:"0 1px 4px rgba(0,0,0,0.04)"},saveBtn:{background:"linear-gradient(135deg,#f97316,#fb923c)",border:"none",color:"#fff",borderRadius:10,fontWeight:700,padding:"11px 24px",cursor:"pointer",fontSize:14},footer:{background:"#1c1917",color:"#a8a29e",padding:"32px 20px",marginTop:40}};return o.jsxs("div",{style:a.page,children:[o.jsx("div",{style:a.topbar,children:o.jsxs("div",{style:a.topbarInner,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"21",r:"1"}),o.jsx("circle",{cx:"20",cy:"21",r:"1"}),o.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),o.jsx("span",{style:{fontWeight:600},children:((ko=c==null?void 0:c.itens)==null?void 0:ko.length)>0?`${c.itens.length} item(ns) no carrinho`:"Carrinho vazio"})]}),o.jsx("span",{style:{fontWeight:600},children:((_o=c==null?void 0:c.itens)==null?void 0:_o.length)>0?`${S(Z)} ‚Üí`:"Frete gr√°tis acima de R$ 199"})]})}),o.jsx("div",{style:a.header,children:o.jsxs("div",{style:a.headerInner,children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[t!=null&&t.logo_url?o.jsx("img",{src:ne(t.logo_url),alt:ho,style:{height:44,maxWidth:160,objectFit:"contain"}}):o.jsxs("div",{style:a.logo,onClick:()=>x("loja"),children:[o.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8 18.5C8 19.9 7 21 5.5 21S3 19.9 3 18.5 4 16 5.5 16 8 17.1 8 18.5z"}),o.jsx("path",{d:"M21 16.5c0 1.4-1 2.5-2.5 2.5S16 17.9 16 16.5 17 14 18.5 14 21 15.1 21 16.5z"}),o.jsx("path",{d:"M5.5 7C5.5 5.6 6.5 4.5 8 4.5S10.5 5.6 10.5 7 9.5 9.5 8 9.5 5.5 8.4 5.5 7z"}),o.jsx("path",{d:"M13.5 7c0-1.4 1-2.5 2.5-2.5S18.5 5.6 18.5 7 17.5 9.5 16 9.5 13.5 8.4 13.5 7z"}),o.jsx("path",{d:"M12 20c-4 0-6-3-6-6 0-2.5 2-5 6-5s6 2.5 6 5c0 3-2 6-6 6z"})]}),ho]}),((t==null?void 0:t.cidade)||(t==null?void 0:t.uf))&&o.jsxs("span",{style:a.cityChip,children:["üìç ",(t==null?void 0:t.cidade)||"",t!=null&&t.uf?` - ${t.uf}`:""]})]}),o.jsx("div",{style:{flex:1,maxWidth:440,display:"flex"},className:"eco-search-wrap",children:o.jsxs("div",{style:{position:"relative",width:"100%"},children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"},children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("input",{value:D,onChange:e=>ie(e.target.value),placeholder:"Buscar produtos para o seu pet...",style:{...a.formInput,paddingLeft:36,borderRadius:24,fontSize:13}})]})}),o.jsxs("div",{style:a.headerActions,children:[Ae?o.jsxs("button",{onClick:()=>x("conta"),style:a.avatarBtn,children:[o.jsx("span",{style:{width:22,height:22,borderRadius:"50%",background:"#f97316",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:800},children:Ae.charAt(0).toUpperCase()}),Ae.split(" ")[0]]}):o.jsxs("button",{onClick:()=>x("conta"),style:a.loginBtn,children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Entrar"]}),o.jsxs("button",{onClick:()=>x("carrinho"),style:a.cartBtn,children:[o.jsxs("svg",{width:"19",height:"19",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"21",r:"1"}),o.jsx("circle",{cx:"20",cy:"21",r:"1"}),o.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),((wo=c==null?void 0:c.itens)==null?void 0:wo.length)>0&&o.jsx("span",{style:a.cartBadge,children:c.itens.length})]})]})]})}),o.jsx("div",{style:a.navWrap,children:o.jsx("div",{style:a.navInner,children:[["loja","üè™ Loja"],["carrinho",`üõí Carrinho${(zo=c==null?void 0:c.itens)!=null&&zo.length?` (${c.itens.length})`:""}`],["pedidos","üì¶ Pedidos"],["conta","üë§ Conta"]].map(([e,n])=>o.jsx("button",{onClick:()=>x(e),style:a.navTab(f===e),children:n},e))})}),((Co=c==null?void 0:c.itens)==null?void 0:Co.length)>0&&f!=="carrinho"&&o.jsxs("div",{onClick:()=>x("carrinho"),style:a.floatBar,children:[o.jsxs("span",{style:{fontWeight:600,fontSize:13},children:["üõí ",c.itens.length," item(ns) no carrinho"]}),o.jsxs("span",{style:{fontWeight:800,fontSize:13},children:[S(Z)," ‚Üí Ver carrinho"]})]}),!W&&o.jsx("div",{style:{background:"#fef2f2",color:"#991b1b",padding:"10px 20px",fontSize:13,borderBottom:"1px solid #fecaca"},children:"‚ö†Ô∏è Use a URL no formato: /slug-da-loja"}),po&&o.jsxs("div",{style:a.alertError,children:["‚ö†Ô∏è ",po]}),fo&&o.jsxs("div",{style:a.alertSuccess,children:["‚úì ",fo]}),f==="loja"&&o.jsxs("div",{style:a.bannerWrap,children:[ue.map((e,n)=>o.jsx("div",{style:{position:"absolute",inset:0,opacity:b===n?1:0,transition:"opacity 0.8s ease",pointerEvents:b===n?"auto":"none"},children:e.type==="image"?o.jsx("img",{src:ne(e.url),alt:`Banner ${n+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):o.jsxs("div",{style:{background:e.bg,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 48px",gap:24,height:"100%"},children:[o.jsx("span",{style:{fontSize:72,flexShrink:0,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.25))"},children:e.emoji}),o.jsxs("div",{children:[o.jsx("div",{style:{color:"#fff",fontWeight:800,fontSize:34,lineHeight:1.2,textShadow:"0 2px 12px rgba(0,0,0,0.2)"},children:e.title}),o.jsx("div",{style:{color:"rgba(255,255,255,0.88)",fontSize:16,marginTop:8},children:e.sub}),o.jsx("button",{onClick:()=>x("loja"),style:{marginTop:16,background:"#fff",color:"#f97316",border:"none",borderRadius:24,padding:"10px 24px",fontWeight:700,fontSize:14,cursor:"pointer"},children:"Ver produtos ‚Üí"})]})]})},n)),o.jsx("div",{style:a.bannerDots,children:ue.map((e,n)=>o.jsx("button",{onClick:()=>Ye(n),style:a.bannerDot(b===n)},n))})]}),f==="loja"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 300px",gap:24,maxWidth:1280,margin:"0 auto",padding:"28px 20px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0,fontSize:22,fontWeight:800,color:"#1c1917"},children:"Cat√°logo da loja"}),o.jsxs("p",{style:{margin:"4px 0 0",color:"#9ca3af",fontSize:13},children:[Q.length," produto",Q.length!==1?"s":""," encontrado",Q.length!==1?"s":""]})]})}),o.jsxs("div",{style:{display:"flex",gap:10,marginBottom:20,flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:1,minWidth:220,position:"relative"},children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"},children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("input",{value:D,onChange:e=>ie(e.target.value),placeholder:"O que seu pet precisa?",style:{...a.formInput,paddingLeft:36}})]}),o.jsx("select",{value:N,onChange:e=>je(e.target.value),style:{...a.formInput,width:"auto",paddingRight:30},children:Te.map(e=>o.jsx("option",{value:e,children:e==="todas"?"üêæ Todas as categorias":e},e))}),o.jsx("button",{onClick:mo,disabled:be,style:{padding:"10px 16px",border:"1.5px solid #e7e5e4",borderRadius:9,fontSize:13,fontWeight:600,background:"#fff",color:"#f97316",cursor:"pointer"},children:be?"...":"‚Ü∫ Atualizar"})]}),Te.length>2&&o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:20},children:Te.map(e=>o.jsx("button",{onClick:()=>je(e),style:{padding:"6px 14px",borderRadius:20,border:N===e?"1.5px solid #f97316":"1.5px solid #e7e5e4",background:N===e?"#fff7ed":"#fff",color:N===e?"#ea580c":"#78716c",fontWeight:N===e?700:500,fontSize:12,cursor:"pointer",transition:"all 0.15s"},children:e==="todas"?"üêæ Todas":e},e))}),o.jsxs("div",{style:a.grid,children:[Q.map(e=>{const n=oe(e),s=ye(e),p=G.includes(e.id),u=Y(e)[0],z=Vo===e.id;return o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Pe(e),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),Pe(e))},onMouseEnter:()=>He(e.id),onMouseLeave:()=>He(null),style:a.card(z),children:[o.jsxs("div",{style:a.cardImgWrap,children:[u?o.jsx("img",{src:u,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:12,background:"#fff"}}):o.jsxs("div",{style:{color:"#d1d5db",fontSize:12,display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("polyline",{points:"21 15 16 10 5 21"})]}),o.jsx("span",{children:"Sem imagem"})]}),s&&o.jsx("div",{style:a.unavailBadge,children:"Indispon√≠vel"}),o.jsx("button",{onClick:_=>{_.stopPropagation(),bo(e.id)},title:p?"Remover da lista de desejos":"Adicionar √† lista de desejos",style:a.wishBtn,children:p?"‚ù§Ô∏è":"ü§ç"})]}),o.jsxs("div",{style:a.cardBody,children:[o.jsx("div",{style:a.cardName,children:e.nome}),o.jsx("div",{style:a.cardCat,children:(e==null?void 0:e.categoria_nome)||(e==null?void 0:e.categoria)||"Sem categoria"}),o.jsxs("div",{style:a.cardSku,children:["SKU: ",(e==null?void 0:e.codigo)||"-"]}),o.jsx("div",{style:a.cardStock(s),children:s?"‚ö†Ô∏è Volto em breve":Number.isFinite(n)?`‚úì Em estoque: ${n}`:"‚úì Em estoque"}),o.jsx("div",{style:a.cardPrice,children:S(Fe(e))}),o.jsx("button",{disabled:s,style:a.addBtn(s),onClick:_=>{_.stopPropagation(),vo(e)},children:s?"Indispon√≠vel":"üõí Adicionar"}),s&&o.jsx("button",{onClick:_=>{_.stopPropagation(),jo(e)},style:a.notifyBtn,children:"üîî Avise-me quando chegar"})]})]},e.id)}),!be&&Q.length===0&&o.jsxs("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"60px 0",color:"#9ca3af"},children:[o.jsx("div",{style:{fontSize:48,marginBottom:12},children:"üîç"}),o.jsx("div",{style:{fontWeight:800,fontSize:18,color:"#374151"},children:"Nenhum produto encontrado"}),o.jsx("div",{style:{fontSize:13,marginTop:4},children:"Tente buscar por outro termo ou categoria"}),o.jsx("button",{onClick:()=>{ie(""),je("todas")},style:{marginTop:16,padding:"8px 20px",borderRadius:20,border:"1.5px solid #e7e5e4",background:"#fff",cursor:"pointer",fontSize:13,fontWeight:600,color:"#f97316"},children:"Limpar filtros"})]})]})]}),o.jsxs("aside",{style:a.sidebar,children:[o.jsxs("div",{style:a.sidebarTitle,children:[o.jsx("span",{children:"üõí Seu carrinho"}),((Io=c==null?void 0:c.itens)==null?void 0:Io.length)>0&&o.jsx("span",{style:a.sidebarBadge,children:c.itens.length})]}),(Bo=c==null?void 0:c.itens)!=null&&Bo.length?o.jsxs("div",{style:{display:"grid",gap:8},children:[c.itens.slice(0,5).map(e=>{const n=uo[e.produto_id],s=n?Y(n)[0]:null;return o.jsxs("div",{style:a.miniItem,children:[o.jsx("div",{style:a.miniImg,children:s?o.jsx("img",{src:s,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:2}}):o.jsx("span",{style:{fontSize:16},children:"üì¶"})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:12,fontWeight:600,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#1a1a2e"},children:e.nome}),o.jsxs("div",{style:{fontSize:11,color:"#f97316",fontWeight:600},children:[e.quantidade,"√ó ",S(e.preco_unitario)]})]})]},e.item_id)}),c.itens.length>5&&o.jsxs("div",{style:{fontSize:12,color:"#9ca3af",textAlign:"center"},children:["+ ",c.itens.length-5," item(ns) a mais"]}),o.jsxs("div",{style:a.subtotalBox,children:[o.jsx("span",{style:{fontWeight:600,fontSize:14,color:"#374151"},children:"Subtotal"}),o.jsx("span",{style:{fontWeight:800,fontSize:17,color:"#1a1a2e"},children:S(Z)})]}),o.jsx("button",{style:a.checkoutBig,onClick:So,children:"Finalizar compra ‚Üí"}),o.jsx("button",{style:a.viewCartBtn,onClick:()=>x("carrinho"),children:"Ver / Editar carrinho"}),!v&&o.jsx("div",{style:{fontSize:11,color:"#9ca3af",textAlign:"center"},children:"üîí Login solicitado apenas no fechamento"})]}):o.jsxs("div",{style:{color:"#c4c4d4",textAlign:"center",padding:"28px 0",fontSize:13},children:[o.jsx("div",{style:{fontSize:34,marginBottom:8},children:"üõí"}),o.jsx("div",{style:{fontWeight:600,color:"#9ca3af"},children:"Carrinho vazio"}),o.jsx("div",{style:{fontSize:12,marginTop:4},children:"Adicione produtos para come√ßar"})]})]})]}),y&&o.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.65)",display:"flex",alignItems:"center",justifyContent:"center",padding:16,zIndex:60},onClick:()=>me(),children:o.jsxs("div",{style:{background:"#fff",width:"min(960px, 100%)",maxHeight:"90vh",overflowY:"auto",borderRadius:18,border:"1px solid #e5e7eb",boxShadow:"0 24px 80px rgba(0,0,0,0.2)",display:"grid",gridTemplateColumns:"1.1fr 1fr",gap:0},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:{background:"#f5f5f4",borderRadius:"18px 0 0 18px",padding:24,display:"flex",flexDirection:"column",gap:12},children:[o.jsx("div",{style:{borderRadius:12,background:"#fff",aspectRatio:"1/1",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e7e5e4"},children:Ie?o.jsx("img",{src:Ie,alt:y.nome,style:{width:"100%",height:"100%",objectFit:"contain"}}):o.jsx("span",{style:{color:"#9ca3af",fontSize:13},children:"Sem imagem dispon√≠vel"})}),Y(y).length>1&&o.jsx("div",{style:{display:"flex",gap:8,overflowX:"auto"},children:Y(y).map(e=>o.jsx("button",{onClick:()=>to(e),style:{border:Ie===e?"2.5px solid #f97316":"1.5px solid #e7e5e4",borderRadius:10,width:70,height:70,overflow:"hidden",padding:0,background:"#fff",cursor:"pointer",flexShrink:0},children:o.jsx("img",{src:e,alt:"Miniatura",style:{width:"100%",height:"100%",objectFit:"contain"}})},e))})]}),o.jsxs("div",{style:{padding:28,display:"grid",alignContent:"start",gap:14},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:10},children:[o.jsx("h3",{style:{margin:0,fontSize:20,fontWeight:800,color:"#1c1917",lineHeight:1.3},children:y.nome}),o.jsx("button",{onClick:()=>me(),style:{background:"#f1f5f9",border:"none",borderRadius:8,width:34,height:34,cursor:"pointer",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"#6b7280"},children:"‚úï"})]}),o.jsx("div",{style:{fontSize:30,fontWeight:800,color:"#1a1a2e",letterSpacing:-1},children:S(Fe(y))}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,background:"#faf7f4",borderRadius:10,padding:"12px 14px"},children:[o.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["Categoria: ",o.jsx("strong",{style:{color:"#1a1a2e"},children:(y==null?void 0:y.categoria_nome)||(y==null?void 0:y.categoria)||"Sem categoria"})]}),o.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["SKU: ",o.jsx("strong",{style:{color:"#1a1a2e",fontFamily:"monospace"},children:(y==null?void 0:y.codigo)||"-"})]}),o.jsx("div",{style:{fontSize:13,color:ye(y)?"#b45309":"#065f46"},children:ye(y)?"‚ö†Ô∏è Fora de estoque":`‚úì Em estoque: ${Number.isFinite(oe(y))?oe(y):"Dispon√≠vel"}`})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4},children:[ye(y)?o.jsx("button",{onClick:()=>jo(y),style:{...a.notifyBtn,width:"auto",padding:"10px 20px",fontSize:13},children:"üîî Avise-me quando chegar"}):o.jsx("button",{onClick:()=>vo(y),style:{...a.addBtn(!1),width:"auto",padding:"12px 24px",fontSize:14},children:"üõí Adicionar ao carrinho"}),o.jsx("button",{onClick:()=>bo(y.id),style:{background:"#fff",border:"1.5px solid #f97316",color:"#f97316",borderRadius:9,padding:"10px 16px",fontWeight:700,fontSize:13,cursor:"pointer"},children:G.includes(y.id)?"üíî Remover":"ü§ç Salvar"}),o.jsx("button",{onClick:()=>{me(),x("carrinho")},style:{background:"#fff",border:"1.5px solid #e5e7eb",color:"#6b7280",borderRadius:9,padding:"10px 16px",fontWeight:500,fontSize:13,cursor:"pointer"},children:"Ver carrinho"})]}),o.jsx("button",{onClick:()=>{var n;const e=`${window.location.origin}${r.pathname}?produto=${y.id}`;(n=navigator.clipboard)==null||n.writeText(e).then(()=>k("Link copiado!")).catch(()=>k(`Link: ${e}`))},style:{background:"transparent",border:"1px solid #e5e7eb",color:"#9ca3af",borderRadius:8,padding:"8px 12px",cursor:"pointer",fontSize:12,justifySelf:"start"},children:"üîó Copiar link do produto"})]})]})}),f==="carrinho"&&o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"28px 16px",minHeight:200},children:[o.jsxs("h2",{style:{margin:"0 0 20px",fontSize:26,fontWeight:800,color:"#1c1917"},children:["Carrinho (",((Ro=c==null?void 0:c.itens)==null?void 0:Ro.length)||0," ",((Wo=c==null?void 0:c.itens)==null?void 0:Wo.length)===1?"item":"itens",")"]}),Jo?o.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:40},children:"Carregando carrinho..."}):(To=c==null?void 0:c.itens)!=null&&To.length?o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:20,alignItems:"start"},children:[o.jsxs("div",{style:{display:"grid",gap:12},children:[c.itens.map(e=>{const n=uo[e.produto_id],s=n?Y(n)[0]:null;return o.jsxs("div",{style:a.cartItem,children:[o.jsx("div",{style:a.cartItemImg,children:s?o.jsx("img",{src:s,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:4}}):o.jsx("span",{style:{fontSize:28},children:"üì¶"})}),o.jsxs("div",{style:{flex:1,minWidth:0,display:"grid",gap:4},children:[o.jsx("div",{style:{fontWeight:700,fontSize:14,lineHeight:1.3,color:"#1a1a2e"},children:e.nome}),o.jsxs("div",{style:{fontSize:13,color:"#f97316",fontWeight:700},children:[S(e.preco_unitario)," / un"]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:4},children:[o.jsx("button",{onClick:()=>Ee(e.item_id,e.quantidade-1),style:a.qtyBtn,children:"‚àí"}),o.jsx("span",{style:{fontWeight:700,fontSize:14,minWidth:26,textAlign:"center"},children:e.quantidade}),o.jsx("button",{onClick:()=>Ee(e.item_id,e.quantidade+1),style:a.qtyBtn,children:"+"}),o.jsx("button",{onClick:()=>Ee(e.item_id,0),style:a.removeBtn,children:"üóë Remover"})]})]}),o.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#1a1a2e",flexShrink:0},children:S(e.preco_unitario*e.quantidade)})]},e.item_id)}),o.jsxs("form",{onSubmit:un,style:{display:"flex",gap:8,marginTop:4},children:[o.jsx("input",{value:ke,onChange:e=>oo(e.target.value),placeholder:"C√≥digo de cupom",style:{...a.formInput,flex:1}}),o.jsx("button",{type:"submit",style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#374151",borderRadius:10,padding:"0 18px",fontWeight:600,fontSize:13,cursor:"pointer"},children:"Aplicar"})]}),L&&o.jsxs("div",{style:{fontSize:13,color:"#065f46",background:"#ecfdf5",borderRadius:8,padding:"8px 12px",fontWeight:600},children:["‚úì Cupom ",L.codigo,": -",S(L.desconto)]})]}),o.jsxs("div",{style:{background:"#fff",border:"1px solid #e7e5e4",borderRadius:16,padding:20,boxShadow:"0 2px 12px rgba(0,0,0,0.06)"},children:[o.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#1c1917",marginBottom:14},children:"Resumo do pedido"}),c.itens.map(e=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280",marginBottom:6},children:[o.jsxs("span",{children:[e.nome," √ó ",e.quantidade]}),o.jsx("span",{children:S(e.preco_unitario*e.quantidade)})]},e.item_id)),o.jsxs("div",{style:a.cartTotalRow,children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:S(Z)})]}),o.jsx("button",{onClick:So,style:{...a.checkoutBig,width:"100%",marginTop:14},children:"Ir para o checkout ‚Üí"}),o.jsx("button",{onClick:()=>x("loja"),style:{width:"100%",marginTop:8,background:"transparent",border:"1.5px solid #e5e7eb",color:"#6b7280",borderRadius:10,padding:"10px 0",fontWeight:600,fontSize:13,cursor:"pointer"},children:"Continuar comprando"})]})]}):o.jsxs("div",{style:{textAlign:"center",padding:"48px 0",display:"grid",gap:12,justifyItems:"center"},children:[o.jsx("span",{style:{fontSize:52},children:"üõí"}),o.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#1a1a2e"},children:"Seu carrinho est√° vazio"}),o.jsx("div",{style:{fontSize:14,color:"#9ca3af"},children:"Explore nossa loja e adicione produtos!"}),o.jsx("button",{onClick:()=>x("loja"),style:{...a.checkoutBig,width:"auto",padding:"12px 28px"},children:"Ver produtos"})]})]}),f==="checkout"&&o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"28px 16px"},children:[o.jsx("h2",{style:{margin:"0 0 20px",fontSize:26,fontWeight:800,color:"#1c1917"},children:"Checkout"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 360px",gap:20,alignItems:"start"},children:[o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsxs("div",{style:a.formCard,children:[o.jsx("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:12},children:"üì¶ Como quer receber?"}),o.jsxs("form",{onSubmit:hn,style:{display:"grid",gap:10},children:[o.jsx("div",{style:{display:"flex",gap:10},children:[{v:"entrega",l:"üöö Entrega"},{v:"retirada",l:"üè™ Retirada na loja"}].map(({v:e,l:n})=>o.jsxs("label",{style:F===e?a.radioLabelActive:a.radioLabel,children:[o.jsx("input",{type:"radio",name:"deliveryMode",value:e,checked:F===e,onChange:()=>Ko(e),style:{display:"none"}}),n]},e))}),F==="retirada"&&o.jsxs("div",{style:{background:"#faf7f4",border:"1px solid #e7e5e4",borderRadius:10,padding:14,display:"grid",gap:8},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"Quem vai retirar?"}),[{v:"proprio",l:"üôã Eu mesmo(a)"},{v:"terceiro",l:"ü§ù Outra pessoa por mim"}].map(({v:e,l:n})=>o.jsxs("label",{style:pe===e?a.radioLabelActive:a.radioLabel,children:[o.jsx("input",{type:"radio",name:"tipoRetirada",value:e,checked:pe===e,onChange:()=>Go(e),style:{display:"none"}}),n]},e)),pe==="terceiro"&&o.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:8,padding:10,fontSize:12,color:"#92400e"},children:["‚ÑπÔ∏è Uma ",o.jsx("strong",{children:"senha secreta de retirada"})," ser√° gerada. Compartilhe com quem vai buscar."]})]}),o.jsx("input",{value:(t==null?void 0:t.cidade)||q,onChange:e=>no(e.target.value),placeholder:"Cidade da loja",disabled:!!(t!=null&&t.cidade),style:{...a.formInput,background:t!=null&&t.cidade?"#f8fafc":"#fff"}}),F==="entrega"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{value:I.cep,onChange:e=>P(n=>({...n,cep:e.target.value})),onBlur:ln,placeholder:"CEP",style:a.formInput}),o.jsx("input",{value:I.endereco,onChange:e=>P(n=>({...n,endereco:e.target.value})),placeholder:"Rua / Avenida",style:a.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:I.numero,onChange:e=>P(n=>({...n,numero:e.target.value})),placeholder:"N√∫mero",style:a.formInput}),o.jsx("input",{value:I.complemento,onChange:e=>P(n=>({...n,complemento:e.target.value})),placeholder:"Complemento",style:a.formInput})]}),o.jsx("input",{value:I.bairro,onChange:e=>P(n=>({...n,bairro:e.target.value})),placeholder:"Bairro",style:a.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8},children:[o.jsx("input",{value:I.cidade||(t==null?void 0:t.cidade)||"",onChange:e=>P(n=>({...n,cidade:e.target.value})),placeholder:"Cidade",disabled:!!(t!=null&&t.cidade),style:{...a.formInput,background:t!=null&&t.cidade?"#f8fafc":"#fff"}}),o.jsx("input",{value:I.estado||(t==null?void 0:t.uf)||"",onChange:e=>P(n=>({...n,estado:e.target.value})),placeholder:"UF",style:a.formInput})]})]}),o.jsx("button",{type:"submit",style:a.payBtn(!0),children:"Calcular resumo"})]})]}),o.jsxs("div",{style:a.formCard,children:[o.jsx("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:12},children:"üí≥ Como vai pagar?"}),(()=>{const e=[{key:"dinheiro",label:"Dinheiro",icon:"üíµ"},{key:"pix",label:"PIX",icon:"üì±"},{key:"debito",label:"D√©bito",icon:"üí≥"},{key:"credito",label:"Cr√©dito",icon:"üí≥"}],n=["Visa","Mastercard","Elo","Outra"];return o.jsxs("div",{style:{display:"grid",gap:10},children:[o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:e.map(s=>o.jsxs("label",{style:R===s.key?a.radioLabelActive:a.radioLabel,children:[o.jsx("input",{type:"radio",name:"pagamentoTipo",value:s.key,checked:R===s.key,onChange:()=>{Xo(s.key),s.key!=="dinheiro"&&ro("")},style:{display:"none"}}),s.icon," ",s.label]},s.key))}),R==="dinheiro"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13},children:[o.jsx("span",{style:{color:"#374151"},children:"Troco para R$"}),o.jsx("input",{type:"number",min:"0",placeholder:"Ex: 100",value:Ce,onChange:s=>ro(s.target.value),style:{...a.formInput,width:110}})]}),(R==="debito"||R==="credito")&&o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:13,color:"#6b7280"},children:"Bandeira:"}),n.map(s=>o.jsxs("label",{style:ge===s?a.radioLabelActive:{...a.radioLabel,padding:"6px 12px",fontSize:12},children:[o.jsx("input",{type:"radio",checked:ge===s,onChange:()=>Qo(s),style:{display:"none"}})," ",s]},s))]}),R==="credito"&&o.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[o.jsx("span",{style:{fontSize:13,color:"#6b7280"},children:"Parcelas:"}),[1,2,3].map(s=>o.jsxs("label",{style:ze===s?a.radioLabelActive:{...a.radioLabel,padding:"6px 14px"},children:[o.jsx("input",{type:"radio",checked:ze===s,onChange:()=>Zo(s),style:{display:"none"}})," ",s,"x"]},s))]})]})})()]})]}),o.jsxs("div",{style:a.resumoBox,children:[o.jsx("div",{style:{fontWeight:700,fontSize:16,color:"#1c1917",marginBottom:14},children:"Resumo do pedido"}),B?o.jsxs("div",{style:{display:"grid",gap:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsxs("span",{children:["Itens (",B.itens_count,")"]}),o.jsx("span",{children:S(B.subtotal)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsx("span",{children:"Frete"}),o.jsx("span",{children:S((Ao=B==null?void 0:B.frete)==null?void 0:Ao.valor_frete)})]}),((Eo=B==null?void 0:B.cupom)==null?void 0:Eo.desconto)>0&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#065f46"},children:[o.jsx("span",{children:"Desconto"}),o.jsxs("span",{children:["-",S(B.cupom.desconto)]})]}),o.jsxs("div",{style:a.cartTotalRow,children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:S(B.total)})]})]}):(Lo=c==null?void 0:c.itens)!=null&&Lo.length?o.jsxs("div",{children:[c.itens.map(e=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280",marginBottom:6},children:[o.jsxs("span",{children:[e.nome," √ó ",e.quantidade]}),o.jsx("span",{children:S(e.preco_unitario*e.quantidade)})]},e.item_id)),o.jsxs("div",{style:a.cartTotalRow,children:[o.jsx("span",{children:"Total estimado"}),o.jsx("span",{children:S(Z)})]})]}):null,o.jsx("button",{onClick:mn,disabled:ve||!(t!=null&&t.cidade||q)||!((Po=c==null?void 0:c.itens)!=null&&Po.length)||!X,style:a.finalizarBtn(ve||!(t!=null&&t.cidade||q)||!((No=c==null?void 0:c.itens)!=null&&No.length)||!X),children:ve?"Finalizando...":"‚úì Finalizar pedido"}),!X&&o.jsx("div",{style:{fontSize:12,color:"#b45309",background:"#fffbeb",borderRadius:8,padding:"8px 10px",marginTop:6},children:"‚ö†Ô∏è Complete seu cadastro (nome, telefone, CPF e endere√ßo) na aba Conta para finalizar."}),(U==null?void 0:U.pedido_id)&&o.jsxs("div",{style:{background:"#ecfdf5",border:"1.5px solid #6ee7b7",borderRadius:12,padding:14,marginTop:8,display:"grid",gap:6},children:[o.jsx("div",{style:{fontWeight:700,color:"#065f46",fontSize:14},children:"‚úì Pedido confirmado!"}),o.jsxs("div",{style:{fontSize:13,color:"#374151"},children:["N√∫mero: ",o.jsx("strong",{children:U.pedido_id})]}),U.palavra_chave_retirada&&o.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:12,textAlign:"center",marginTop:4},children:[o.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c2d12",marginBottom:4},children:"üîë SENHA DE RETIRADA"}),o.jsx("div",{style:{fontSize:24,fontWeight:800,letterSpacing:3,color:"#ea580c"},children:U.palavra_chave_retirada}),o.jsx("div",{style:{fontSize:11,color:"#92400e",marginTop:4},children:"Compartilhe com quem vai retirar"})]})]})]})]})]}),f==="pedidos"&&o.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:"28px 16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,flexWrap:"wrap",gap:10},children:[o.jsx("h2",{style:{margin:0,fontSize:26,fontWeight:800,color:"#1c1917"},children:"Meus Pedidos"}),o.jsx("button",{onClick:Le,disabled:Be,style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#374151",borderRadius:10,padding:"8px 16px",fontWeight:600,fontSize:13,cursor:"pointer"},children:Be?"Atualizando...":"‚Üª Atualizar"})]}),Be?o.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:40},children:"Carregando pedidos..."}):so.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"48px 0",display:"grid",gap:10,justifyItems:"center"},children:[o.jsx("span",{style:{fontSize:48},children:"üìã"}),o.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#1a1a2e"},children:"Nenhum pedido ainda"}),o.jsx("div",{style:{fontSize:13,color:"#9ca3af"},children:"Seus pedidos aparecer√£o aqui ap√≥s a compra."}),o.jsx("button",{onClick:()=>x("loja"),style:{...a.checkoutBig,width:"auto",padding:"10px 24px"},children:"Ir √†s compras"})]}):o.jsx("div",{style:{display:"grid",gap:14},children:so.map(e=>{const s={pendente:"#f59e0b",confirmado:"#3b82f6",enviado:"#8b5cf6",entregue:"#10b981",cancelado:"#ef4444"}[(e.status||"").toLowerCase()]||"#6b7280";return o.jsxs("div",{style:a.orderCard,children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,flexWrap:"wrap"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:700,fontSize:14,color:"#1a1a2e",marginBottom:2},children:["Pedido ",e.pedido_id]}),o.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:e.created_at?new Date(e.created_at).toLocaleString("pt-BR"):"-"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[o.jsx("span",{style:{...a.statusBadge(e.status),background:s+"20",color:s,border:`1px solid ${s}40`},children:e.status||"Pendente"}),o.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#1a1a2e"},children:S(e.total)})]})]}),e.palavra_chave_retirada&&o.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:10,padding:10,textAlign:"center",marginTop:8},children:[o.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#7c2d12",marginBottom:2},children:"üîë SENHA DE RETIRADA"}),o.jsx("div",{style:{fontSize:20,fontWeight:800,letterSpacing:3,color:"#ea580c"},children:e.palavra_chave_retirada}),o.jsx("div",{style:{fontSize:10,color:"#92400e",marginTop:2},children:"Apresente na loja para retirar"})]}),Array.isArray(e.itens)&&e.itens.length>0&&o.jsx("div",{style:{marginTop:10,borderTop:"1px solid #f1f5f9",paddingTop:10,display:"grid",gap:6},children:e.itens.map((p,u)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#6b7280"},children:[o.jsxs("span",{children:[p.nome||"Produto"," √ó ",p.quantidade]}),o.jsx("span",{children:S(p.subtotal)})]},`${e.pedido_id}-${p.produto_id||u}`))}),e.data_pagamento&&o.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:["Pago em: ",Cn(e.data_pagamento)]})]},e.pedido_id)})})]}),f==="conta"&&o.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:"28px 16px"},children:[o.jsx("h2",{style:{margin:"0 0 20px",fontSize:26,fontWeight:800,color:"#1c1917"},children:"Minha Conta"}),v?o.jsx("div",{style:{display:"grid",gap:16},children:o.jsxs("div",{style:a.accountCard,children:[o.jsxs("div",{style:{fontWeight:700,fontSize:15,color:"#1a1a2e",marginBottom:4},children:["Ol√°, ",(i==null?void 0:i.nome)||m.nome||"cliente","! üëã"]}),o.jsxs("div",{style:{fontSize:13,color:"#9ca3af",marginBottom:14},children:[i==null?void 0:i.email," ‚Ä¢ Lista de desejos: ",G.length," ‚Ä¢ Avisos: ",Re.length]}),o.jsxs("form",{onSubmit:an,style:{display:"grid",gap:10},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151",marginBottom:2},children:"Dados pessoais"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:m.nome,onChange:e=>j(n=>({...n,nome:e.target.value})),placeholder:"Nome completo",style:a.formInput}),o.jsx("input",{value:(i==null?void 0:i.email)||"",disabled:!0,placeholder:"Email",style:{...a.formInput,background:"#f8fafc",color:"#9ca3af"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsx("input",{value:m.telefone,onChange:e=>j(n=>({...n,telefone:e.target.value})),placeholder:"Telefone",style:a.formInput}),o.jsx("input",{value:m.cpf,onChange:e=>j(n=>({...n,cpf:e.target.value})),placeholder:"CPF",style:a.formInput})]}),o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151",marginTop:6,marginBottom:2},children:"Endere√ßo principal"}),o.jsx("input",{value:m.cep,onChange:e=>j(n=>({...n,cep:e.target.value})),onBlur:sn,placeholder:"CEP",style:a.formInput}),o.jsx("input",{value:m.endereco,onChange:e=>j(n=>({...n,endereco:e.target.value})),placeholder:"Rua / Avenida",style:a.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr",gap:8},children:[o.jsx("input",{value:m.numero,onChange:e=>j(n=>({...n,numero:e.target.value})),placeholder:"N√∫mero",style:a.formInput}),o.jsx("input",{value:m.complemento,onChange:e=>j(n=>({...n,complemento:e.target.value})),placeholder:"Complemento",style:a.formInput})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 100px",gap:8},children:[o.jsx("input",{value:m.bairro,onChange:e=>j(n=>({...n,bairro:e.target.value})),placeholder:"Bairro",style:a.formInput}),o.jsx("input",{value:m.cidade,onChange:e=>j(n=>({...n,cidade:e.target.value})),placeholder:"Cidade",style:a.formInput}),o.jsx("input",{value:m.estado,onChange:e=>j(n=>({...n,estado:e.target.value})),placeholder:"UF",style:a.formInput})]}),o.jsx("button",{type:"button",onClick:()=>j(e=>({...e,usar_endereco_entrega_diferente:!e.usar_endereco_entrega_diferente})),style:{justifySelf:"start",background:"transparent",border:"1.5px solid #e7e5e4",color:"#f97316",borderRadius:8,padding:"8px 14px",fontWeight:600,fontSize:13,cursor:"pointer"},children:m.usar_endereco_entrega_diferente?"‚àí Remover endere√ßo alternativo":"+ Adicionar endere√ßo de entrega diferente"}),m.usar_endereco_entrega_diferente&&o.jsxs("div",{style:{display:"grid",gap:8,background:"#faf7f4",border:"1px solid #e7e5e4",borderRadius:12,padding:14},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"Endere√ßo de entrega alternativo"}),o.jsx("input",{value:m.entrega_nome,onChange:e=>j(n=>({...n,entrega_nome:e.target.value})),placeholder:"Nome para entrega",style:a.formInput}),o.jsx("input",{value:m.entrega_cep,onChange:e=>j(n=>({...n,entrega_cep:e.target.value})),onBlur:dn,placeholder:"CEP",style:a.formInput}),o.jsx("input",{value:m.entrega_endereco,onChange:e=>j(n=>({...n,entrega_endereco:e.target.value})),placeholder:"Rua / Avenida",style:a.formInput}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"140px 1fr",gap:8},children:[o.jsx("input",{value:m.entrega_numero,onChange:e=>j(n=>({...n,entrega_numero:e.target.value})),placeholder:"N√∫mero",style:a.formInput}),o.jsx("input",{value:m.entrega_complemento,onChange:e=>j(n=>({...n,entrega_complemento:e.target.value})),placeholder:"Complemento",style:a.formInput})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 100px",gap:8},children:[o.jsx("input",{value:m.entrega_bairro,onChange:e=>j(n=>({...n,entrega_bairro:e.target.value})),placeholder:"Bairro",style:a.formInput}),o.jsx("input",{value:m.entrega_cidade,onChange:e=>j(n=>({...n,entrega_cidade:e.target.value})),placeholder:"Cidade",style:a.formInput}),o.jsx("input",{value:m.entrega_estado,onChange:e=>j(n=>({...n,entrega_estado:e.target.value})),placeholder:"UF",style:a.formInput})]})]}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("button",{type:"submit",disabled:Ze,style:a.saveBtn,children:Ze?"Salvando...":"‚úì Salvar cadastro"}),o.jsx("button",{type:"button",onClick:fn,style:{background:"#f1f5f9",border:"1.5px solid #e5e7eb",color:"#ef4444",borderRadius:10,padding:"10px 20px",fontWeight:600,fontSize:14,cursor:"pointer"},children:"Sair da conta"})]})]})]})}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},children:[o.jsxs("div",{style:a.accountCard,children:[o.jsx("div",{style:{fontWeight:800,fontSize:20,color:"#1c1917",marginBottom:14},children:"Criar conta"}),o.jsxs("form",{onSubmit:cn,autoComplete:"off",style:{display:"grid",gap:10},children:[o.jsx("input",{name:"ecommerce_register_nome",autoComplete:"off",value:K.nome,onChange:e=>le(n=>({...n,nome:e.target.value})),placeholder:"Nome completo",style:a.formInput}),o.jsx("input",{name:"ecommerce_register_email",autoComplete:"off",value:K.email,onChange:e=>le(n=>({...n,email:e.target.value})),placeholder:"Email",type:"email",style:a.formInput}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{name:"ecommerce_register_password",autoComplete:"new-password",value:K.password,onChange:e=>le(n=>({...n,password:e.target.value})),placeholder:"Senha",type:Ke?"text":"password",style:{...a.formInput,paddingRight:80,width:"100%",boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>Yo(e=>!e),style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#6b7280"},children:Ke?"Ocultar":"üëÅ Ver"})]}),o.jsx("button",{type:"submit",disabled:ae,style:a.saveBtn,children:ae?"Criando...":"Criar minha conta"})]})]}),o.jsxs("div",{style:a.accountCard,children:[o.jsx("div",{style:{fontWeight:800,fontSize:20,color:"#1c1917",marginBottom:14},children:"Entrar"}),o.jsxs("form",{onSubmit:pn,autoComplete:"off",style:{display:"grid",gap:10},children:[o.jsx("input",{name:"ecommerce_login_email",autoComplete:"off",value:ce.email,onChange:e=>Se(n=>({...n,email:e.target.value})),placeholder:"Email",type:"email",style:a.formInput}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("input",{name:"ecommerce_login_password",autoComplete:"new-password",value:ce.password,onChange:e=>Se(n=>({...n,password:e.target.value})),placeholder:"Senha",type:Ge?"text":"password",style:{...a.formInput,paddingRight:80,width:"100%",boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>Ho(e=>!e),style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:12,color:"#6b7280"},children:Ge?"Ocultar":"üëÅ Ver"})]}),o.jsx("button",{type:"submit",disabled:ae,style:a.saveBtn,children:ae?"Entrando...":"Entrar"})]})]})]})]}),M.open&&o.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:16},onClick:()=>$({open:!1,product:null,email:"",loading:!1}),children:o.jsxs("div",{style:{background:"#fff",borderRadius:18,padding:28,maxWidth:380,width:"100%",boxShadow:"0 24px 80px rgba(0,0,0,0.25)",border:"1px solid #e5e7eb"},onClick:e=>e.stopPropagation(),children:[o.jsx("div",{style:{fontSize:32,marginBottom:8},children:"üîî"}),o.jsx("h3",{style:{margin:"0 0 8px",fontSize:18,fontWeight:800,color:"#1c1917"},children:"Avise-me quando chegar"}),o.jsxs("p",{style:{margin:"0 0 18px",fontSize:14,color:"#6b7280"},children:[o.jsx("strong",{children:(Fo=M.product)==null?void 0:Fo.nome})," est√° sem estoque agora. Informe seu email e te avisamos quando voltar!"]}),o.jsxs("form",{onSubmit:gn,style:{display:"flex",flexDirection:"column",gap:12},children:[o.jsx("input",{type:"email",required:!0,placeholder:"seu@email.com",value:M.email,autoFocus:!0,onChange:e=>$(n=>({...n,email:e.target.value})),style:a.formInput}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",onClick:()=>$({open:!1,product:null,email:"",loading:!1}),style:{flex:1,padding:"10px 0",borderRadius:10,border:"1.5px solid #e5e7eb",background:"#fff",color:"#374151",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:M.loading,style:{flex:2,padding:"10px 0",borderRadius:10,border:"none",background:"linear-gradient(135deg, #f97316 0%, #fb923c 100%)",color:"#fff",fontSize:14,fontWeight:700,cursor:"pointer",opacity:M.loading?.7:1},children:M.loading?"Registrando‚Ä¶":"üîî Me avise!"})]})]})]})}),o.jsxs("footer",{style:a.footer,children:[o.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:28},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:800,fontSize:20,color:"#fff",marginBottom:8},children:["üêæ ",(t==null?void 0:t.nome_fantasia)||(t==null?void 0:t.nome)||"Pet Store"]}),o.jsx("div",{style:{fontSize:13,color:"rgba(255,255,255,0.65)",lineHeight:1.6},children:"Produtos de qualidade para o seu pet com carinho e dedica√ß√£o. Compre online com facilidade!"})]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:13,fontWeight:700,color:"rgba(255,255,255,0.85)",marginBottom:10,textTransform:"uppercase",letterSpacing:1},children:"Navega√ß√£o"}),[{l:"üõçÔ∏è Loja",v:"loja"},{l:"üõí Carrinho",v:"carrinho"},{l:"üì¶ Pedidos",v:"pedidos"},{l:"üë§ Conta",v:"conta"}].map(({l:e,v:n})=>o.jsx("button",{onClick:()=>x(n),style:{display:"block",background:"none",border:"none",color:"rgba(255,255,255,0.65)",fontSize:13,cursor:"pointer",padding:"3px 0",textAlign:"left"},children:e},n))]}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:13,fontWeight:700,color:"rgba(255,255,255,0.85)",marginBottom:10,textTransform:"uppercase",letterSpacing:1},children:"Contato"}),(t==null?void 0:t.whatsapp)&&o.jsx("a",{href:`https://wa.me/55${t.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noreferrer",style:{display:"block",color:"rgba(255,255,255,0.65)",fontSize:13,textDecoration:"none",marginBottom:4},children:"üì± WhatsApp"}),(t==null?void 0:t.email)&&o.jsxs("a",{href:`mailto:${t.email}`,style:{display:"block",color:"rgba(255,255,255,0.65)",fontSize:13,textDecoration:"none"},children:["‚úâÔ∏è ",t.email]}),(t==null?void 0:t.cidade)&&o.jsxs("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:12,marginTop:8},children:["üìç ",t.cidade,t.uf?`, ${t.uf}`:""]})]})]}),o.jsxs("div",{style:{maxWidth:1100,margin:"20px auto 0",paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:12,color:"rgba(255,255,255,0.4)",textAlign:"center"},children:["¬© ",new Date().getFullYear()," ",(t==null?void 0:t.nome_fantasia)||(t==null?void 0:t.nome)||"Pet Store",". Todos os direitos reservados."]})]})]})}export{Nn as default};
