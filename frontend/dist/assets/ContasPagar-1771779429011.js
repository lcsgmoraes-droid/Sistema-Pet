import{r as m,j as e,a as Z}from"./vendor-react-1771779429011.js";import{a as f,c as G}from"./index-1771779429011.js";import{n as g}from"./vendor-utils-1771779429011.js";import{aF as Q,X as W,ac as H,aE as ee,aR as ae,ah as se,au as re,aS as te}from"./vendor-icons-1771779429011.js";import{s as k}from"./safeArray-1771779429011.js";const oe=({isOpen:F,onClose:C,onSave:T})=>{const[V,R]=m.useState(!1),[c,S]=m.useState([]),[O,q]=m.useState([]),[o,M]=m.useState([]),[P,N]=m.useState([]),[A,B]=m.useState(30),[X,E]=m.useState(!1),[l,_]=m.useState({nome:"",tipo:"despesa",cor:"#ef4444",icone:"ðŸ’¸",descricao:"",ativo:!0,novasSubcategorias:[]}),[r,p]=m.useState({descricao:"",fornecedor_id:null,categoria_id:null,dre_subcategoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null});m.useEffect(()=>{F&&L()},[F]);const L=async()=>{var s;try{const[t,n,u]=await Promise.all([f.get("/clientes/?tipo_cadastro=fornecedor"),f.get("/categorias-financeiras/"),f.get("/dre/subcategorias")]);console.log("ðŸ“¦ Categorias recebidas:",n.data),S(t.data);const b=n.data.filter(x=>{const v=x.tipo?x.tipo.toLowerCase():"",h=x.nome?x.nome.toLowerCase():"",a=v==="receita"||v==="entrada",i=h.includes("receita")||h.includes("venda");return!a&&!i});q(b),M(u.data||[]),console.log("âœ… Categorias de DESPESA setadas:",b.length),console.log("ðŸ“‹ Lista completa:",b),console.log("ðŸ“Š Subcategorias DRE carregadas:",(s=u.data)==null?void 0:s.length)}catch(t){console.error("âŒ Erro ao carregar dados:",t),g.error("Erro ao carregar formulÃ¡rio")}},D=()=>{if(!r.eh_parcelado||!r.total_parcelas||!r.data_vencimento||!r.valor_original){N([]);return}const s=parseFloat(r.valor_original),t=parseInt(r.total_parcelas),n=s/t,u=[];let b=new Date(r.data_vencimento);for(let h=0;h<t;h++){const a=new Date(b);a.setDate(b.getDate()+h*A),u.push({numero:h+1,valor:h===t-1?s-n*(t-1):n,data_vencimento:a.toISOString().split("T")[0]})}const x=u.reduce((h,a)=>h+a.valor,0),v=s-x;Math.abs(v)>.01&&(u[u.length-1].valor+=v),N(u)},w=()=>{_({...l,novasSubcategorias:[...l.novasSubcategorias,{nome:"",descricao:"",ativo:!0}]})},I=(s,t,n)=>{const u=[...l.novasSubcategorias];u[s][t]=n,_({...l,novasSubcategorias:u})},d=s=>{const t=l.novasSubcategorias.filter((n,u)=>u!==s);_({...l,novasSubcategorias:t})},j=(s,t)=>{s.key==="Tab"&&!s.shiftKey&&t===l.novasSubcategorias.length-1&&(s.preventDefault(),w())},z=async s=>{var t,n;if(s.preventDefault(),!l.nome){g.error("Preencha o nome da categoria");return}try{const b=(await f.post("/categorias-financeiras/",{nome:l.nome,tipo:l.tipo,cor:l.cor,icone:l.icone,descricao:l.descricao,ativo:l.ativo},G({key:"financeiro:categoria:create-despesa",duplicateWindowMs:3e3}))).data.id;if(g.success("Categoria criada com sucesso!"),l.novasSubcategorias.length>0){const x=l.novasSubcategorias.filter(v=>v.nome.trim());for(const v of x)try{await f.post("/subcategorias/",{categoria_id:b,nome:v.nome,descricao:v.descricao,ativo:v.ativo})}catch(h){console.error("Erro ao criar subcategoria:",h)}x.length>0&&g.success(`${x.length} subcategoria(s) criada(s)!`)}await L(),p({...r,categoria_id:b}),E(!1),_({nome:"",tipo:"despesa",cor:"#ef4444",icone:"ðŸ’¸",descricao:"",ativo:!0,novasSubcategorias:[]})}catch(u){console.error("Erro ao salvar categoria:",u),g.error(((n=(t=u.response)==null?void 0:t.data)==null?void 0:n.detail)||"Erro ao salvar categoria")}},K=(s,t)=>{const n=[...P];n[s].data_vencimento=t,N(n)},U=(s,t)=>{const n=[...P];n[s].valor=parseFloat(t)||0,N(n)},J=async s=>{var t,n;if(s.preventDefault(),!r.descricao||!r.valor_original||!r.data_vencimento){g.error("Preencha todos os campos obrigatÃ³rios");return}R(!0);try{await f.post("/contas-pagar/",{...r,valor_original:parseFloat(r.valor_original),total_parcelas:r.eh_parcelado?parseInt(r.total_parcelas):1,intervalo_dias:r.tipo_recorrencia==="personalizado"?parseInt(r.intervalo_dias):null,numero_repeticoes:r.numero_repeticoes?parseInt(r.numero_repeticoes):null},G({key:"financeiro:conta-pagar:create",duplicateWindowMs:3e3})),g.success(r.eh_recorrente?"Conta recorrente criada com sucesso!":"Conta criada com sucesso!"),T(),C(),$()}catch(u){console.error("Erro ao criar conta:",u),g.error(((n=(t=u.response)==null?void 0:t.data)==null?void 0:n.detail)||"Erro ao criar conta a pagar")}finally{R(!1)}},$=()=>{p({descricao:"",fornecedor_id:null,categoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null})};return F?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full m-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Q,{className:"text-red-600"}),"Nova Conta a Pagar"]}),e.jsx("button",{onClick:C,className:"text-gray-500 hover:text-gray-700",children:e.jsx(W,{size:24})})]}),e.jsxs("form",{onSubmit:J,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-blue-600"}),"InformaÃ§Ãµes BÃ¡sicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescriÃ§Ã£o *"}),e.jsx("input",{type:"text",value:r.descricao,onChange:s=>p({...r,descricao:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Aluguel, Conta de luz, Fornecedor XYZ...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(ee,{size:16,className:"inline mr-1"}),"Fornecedor"]}),e.jsxs("select",{value:r.fornecedor_id||"",onChange:s=>p({...r,fornecedor_id:s.target.value?parseInt(s.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),c.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(ae,{size:16,className:"inline mr-1"}),"Categoria"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:r.categoria_id||"",onChange:s=>p({...r,categoria_id:s.target.value?parseInt(s.target.value):null}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),O.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]}),e.jsxs("button",{type:"button",onClick:()=>E(!0),className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 whitespace-nowrap",title:"Adicionar nova categoria",children:[e.jsx(Q,{size:16})," Adicionar"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ðŸ·ï¸ Subcategoria DRE (Demonstrativo de Resultado)"}),e.jsxs("select",{value:r.dre_subcategoria_id||"",onChange:s=>p({...r,dre_subcategoria_id:s.target.value?parseInt(s.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sem classificaÃ§Ã£o DRE"}),o.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Classifique para melhor anÃ¡lise gerencial"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(se,{size:16,className:"inline mr-1"}),"Valor *"]}),e.jsx("input",{type:"number",step:"0.01",value:r.valor_original,onChange:s=>p({...r,valor_original:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(re,{size:16,className:"inline mr-1"}),"Data Vencimento *"]}),e.jsx("input",{type:"date",value:r.data_vencimento,onChange:s=>p({...r,data_vencimento:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Documento/NF"}),e.jsx("input",{type:"text",value:r.documento,onChange:s=>p({...r,documento:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"NÃºmero do documento"})]})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_recorrente",checked:r.eh_recorrente,onChange:s=>p({...r,eh_recorrente:s.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"eh_recorrente",className:"text-lg font-semibold text-gray-700 flex items-center gap-2 cursor-pointer",children:[e.jsx(te,{size:20,className:"text-purple-600"}),"Despesa Recorrente"]})]}),r.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de RecorrÃªncia *"}),e.jsxs("select",{value:r.tipo_recorrencia,onChange:s=>p({...r,tipo_recorrencia:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"semanal",children:"ðŸ“… Semanal (7 em 7 dias)"}),e.jsx("option",{value:"quinzenal",children:"ðŸ“† Quinzenal (15 em 15 dias)"}),e.jsx("option",{value:"mensal",children:"ðŸ—“ï¸ Mensal"}),e.jsx("option",{value:"personalizado",children:"âš™ï¸ Personalizado"})]})]}),r.tipo_recorrencia==="personalizado"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (em dias) *"}),e.jsx("input",{type:"number",min:"1",value:r.intervalo_dias||"",onChange:s=>p({...r,intervalo_dias:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 10, 20, 45...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NÃºmero de RepetiÃ§Ãµes"}),e.jsx("input",{type:"number",min:"1",value:r.numero_repeticoes||"",onChange:s=>p({...r,numero_repeticoes:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 12 (deixe vazio para infinito)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantas vezes deve se repetir (opcional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de TÃ©rmino (alternativa)"}),e.jsx("input",{type:"date",value:r.data_fim_recorrencia||"",onChange:s=>p({...r,data_fim_recorrencia:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AtÃ© quando deve repetir (opcional)"})]})]}),e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ðŸ’¡ Como funciona:"})," Esta conta serÃ¡ criada agora e o sistema irÃ¡ gerar automaticamente novas contas nos prÃ³ximos perÃ­odos conforme a recorrÃªncia configurada."]})})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_parcelado",checked:r.eh_parcelado,onChange:s=>{p({...r,eh_parcelado:s.target.checked}),s.target.checked||N([])},disabled:r.eh_recorrente,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"eh_parcelado",className:"text-lg font-semibold text-gray-700 cursor-pointer",children:"ðŸ’³ Parcelar esta conta"})]}),r.eh_parcelado&&!r.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NÃºmero de Parcelas *"}),e.jsx("input",{type:"number",min:"2",max:"120",value:r.total_parcelas,onChange:s=>p({...r,total_parcelas:s.target.value}),onBlur:D,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (dias)"}),e.jsxs("select",{value:A,onChange:s=>{B(parseInt(s.target.value)),setTimeout(D,100)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7",children:"7 dias (semanal)"}),e.jsx("option",{value:"14",children:"14 dias (quinzenal)"}),e.jsx("option",{value:"15",children:"15 dias"}),e.jsx("option",{value:"21",children:"21 dias"}),e.jsx("option",{value:"30",children:"30 dias (mensal)"}),e.jsx("option",{value:"60",children:"60 dias (bimestral)"}),e.jsx("option",{value:"90",children:"90 dias (trimestral)"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:D,className:"mt-6 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"ðŸ“‹ Gerar Preview"})})]}),P.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"ðŸ“… Preview das Parcelas"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:P.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded border",children:[e.jsxs("span",{className:"font-semibold text-gray-600 min-w-[80px]",children:["Parcela ",s.numero,"/",P.length]}),e.jsx("input",{type:"number",step:"0.01",value:s.valor,onChange:n=>U(t,n.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"}),e.jsx("input",{type:"date",value:s.data_vencimento,onChange:n=>K(t,n.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"})]},t))}),e.jsx("div",{className:"mt-3 p-2 bg-gray-100 rounded",children:e.jsxs("strong",{children:["Total: R$ ",P.reduce((s,t)=>s+t.valor,0).toFixed(2)]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ObservaÃ§Ãµes"}),e.jsx("textarea",{value:r.observacoes,onChange:s=>p({...r,observacoes:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"InformaÃ§Ãµes adicionais..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{C(),$()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:V,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:V?"Salvando...":"Salvar Conta"})]})]})]}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Nova Categoria Financeira"}),e.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(W,{size:24})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Categoria *"}),e.jsx("input",{type:"text",value:l.nome,onChange:s=>_({...l,nome:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Ex: Fornecedores, Aluguel, SalÃ¡rios..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ãcone"}),e.jsx("select",{value:l.icone,onChange:s=>_({...l,icone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:["ðŸ’¸","ðŸ ","âš¡","ðŸ’§","ðŸ‘¥","ðŸ“¦","ðŸ”§","ðŸš—","ðŸ½ï¸","ðŸ“","ðŸ›¡ï¸","ðŸ›’"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:l.cor,onChange:s=>_({...l,cor:s.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescriÃ§Ã£o"}),e.jsx("textarea",{value:l.descricao,onChange:s=>_({...l,descricao:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"2"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategorias DRE (opcional)"}),e.jsxs("button",{type:"button",onClick:w,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Q,{size:14})," Adicionar"]})]}),l.novasSubcategorias.length>0&&e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.novasSubcategorias.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("input",{type:"text",value:s.nome,onChange:n=>I(t,"nome",n.target.value),onKeyDown:n=>j(n,t),placeholder:"Nome (Tab para adicionar mais)",className:"flex-1 px-2 py-1 border border-gray-300 rounded-md text-sm"}),e.jsx("button",{type:"button",onClick:()=>d(t),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(W,{size:16})})]},t))}),l.novasSubcategorias.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aperte Tab no Ãºltimo campo para adicionar mais subcategorias"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Criar Categoria"})]})]})]})})]}):null},me=()=>{var h;const F=Z(),[C,T]=m.useState([]),[V,R]=m.useState(!0),[c,S]=m.useState({status:"todos",fornecedor_id:null,data_inicio:"",data_fim:"",apenas_vencidas:!1,apenas_vencer:!1,numero_nf:""}),[O,q]=m.useState([]),[o,M]=m.useState(null),[P,N]=m.useState(!1),[A,B]=m.useState(!1),[X,E]=m.useState(!1),[l,_]=m.useState([]),[r,p]=m.useState([]),[L,D]=m.useState(!1),[w,I]=m.useState({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),[d,j]=m.useState({valor_pago:0,data_pagamento:new Date().toISOString().split("T")[0],forma_pagamento_id:"",conta_bancaria_id:"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""});m.useEffect(()=>{z()},[]);const z=async()=>{try{const[a,i,y,Y]=await Promise.all([f.get(`/contas-pagar/?_t=${Date.now()}`),f.get("/clientes/?tipo_cadastro=fornecedor"),f.get("/financeiro/formas-pagamento/"),f.get("/contas-bancarias?apenas_ativas=true")]);T(k(a.data)),q(k(i.data)),_(k(y.data)),p(k(Y.data))}catch(a){console.error("Erro ao carregar dados:",a),g.error("Erro ao carregar contas a pagar")}finally{R(!1)}},K=async()=>{try{R(!0);const a=new URLSearchParams;c.status!=="todos"&&a.append("status",c.status),c.fornecedor_id&&a.append("fornecedor_id",c.fornecedor_id),c.data_inicio&&a.append("data_inicio",c.data_inicio),c.data_fim&&a.append("data_fim",c.data_fim),c.apenas_vencidas&&a.append("apenas_vencidas","true"),c.apenas_vencer&&a.append("apenas_vencer","true"),c.numero_nf&&a.append("numero_nf",c.numero_nf);const i=await f.get(`/contas-pagar/?${a}`);T(i.data)}catch(a){console.error("Erro ao filtrar:",a),g.error("Erro ao aplicar filtros")}finally{R(!1)}},U=a=>{M(a);const i=l.find(y=>y.id===a.forma_pagamento_id);j({valor_pago:a.valor_final-a.valor_pago,forma_pagamento_id:a.forma_pagamento_id||"",conta_bancaria_id:(i==null?void 0:i.conta_bancaria_destino_id)||"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""}),N(!0)},J=a=>{M(a),E(!0)},$=a=>{a.nota_entrada_id?F(`/compras?nota_id=${a.nota_entrada_id}`):a.nfe_numero?F(`/compras?numero=${a.nfe_numero}`):g.error("Nota fiscal nÃ£o encontrada")},s=a=>{const i=new URLSearchParams;a.fornecedor_nome&&i.append("busca",a.fornecedor_nome),a.documento&&i.append("documento",a.documento),F(`/financeiro/fluxo-caixa?${i.toString()}`),g.success("Redirecionando para o Fluxo de Caixa...")},t=a=>{const i=l.find(y=>y.id===parseInt(a));j({...d,forma_pagamento_id:parseInt(a)||"",conta_bancaria_id:(i==null?void 0:i.conta_bancaria_destino_id)||d.conta_bancaria_id||""})},n=async()=>{try{await f.post("/financeiro/formas-pagamento",{...w,taxa_percentual:0,taxa_fixa:0,prazo_dias:0,ativo:!0,permite_parcelamento:!1,parcelas_maximas:1}),g.success("Forma de pagamento criada!"),D(!1),I({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),z()}catch(a){console.error("Erro:",a),g.error("Erro ao criar forma de pagamento")}},u=async()=>{var a,i;try{await f.post(`/contas-pagar/${o.id}/pagar`,d),g.success("Pagamento registrado com sucesso!"),N(!1),z()}catch(y){console.error("Erro ao registrar pagamento:",y),g.error(((i=(a=y.response)==null?void 0:a.data)==null?void 0:i.detail)||"Erro ao registrar pagamento")}},b=a=>{if(!a)return"-";const i=a.split("T")[0].split("-");return new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2])).toLocaleDateString("pt-BR")},x=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),v=a=>{const i=new Date,y=new Date(a.data_vencimento);return a.status==="pago"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:"âœ“ Pago"}):y<i?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800",children:"âš  Vencida"}):a.status==="parcial"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:"âš¡ Parcial"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:"â± Pendente"})};return V?e.jsx("div",{className:"text-center p-8",children:"Carregando contas a pagar..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ðŸ’° Contas a Pagar"}),e.jsx("button",{onClick:()=>B(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:"âž• Nova Conta"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4",children:"ðŸ” Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:c.status,onChange:a=>S({...c,status:a.target.value}),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"parcial",children:"Parcial"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"vencido",children:"Vencido"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fornecedor"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:c.fornecedor_id||"",onChange:a=>S({...c,fornecedor_id:a.target.value||null}),children:[e.jsx("option",{value:"",children:"Todos"}),k(O).map(a=>e.jsx("option",{value:a.id,children:a.nome},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"NÃºmero NF"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Ex: 12345",value:c.numero_nf,onChange:a=>S({...c,numero_nf:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data InÃ­cio"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:c.data_inicio,onChange:a=>S({...c,data_inicio:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:c.data_fim,onChange:a=>S({...c,data_fim:a.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:c.apenas_vencidas,onChange:a=>S({...c,apenas_vencidas:a.target.checked,apenas_vencer:!1})}),e.jsx("span",{className:"text-sm",children:"SÃ³ Vencidas"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:c.apenas_vencer,onChange:a=>S({...c,apenas_vencer:a.target.checked,apenas_vencidas:!1})}),e.jsx("span",{className:"text-sm",children:"A Vencer"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",onClick:K,children:"Filtrar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Original"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Pago"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma conta encontrada"})}):k(C).map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:a.id}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[a.descricao,a.eh_parcelado&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:[a.numero_parcela,"/",a.total_parcelas]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:a.fornecedor_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:b(a.data_vencimento)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:x(a.valor_original)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:x(a.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold",children:x(a.valor_final-a.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:v(a)}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[a.status!=="pago"&&e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>U(a),title:"Registrar Pagamento",children:"ðŸ’° Pagar"}),e.jsx("button",{className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs",onClick:()=>J(a),title:"Ver Detalhes",children:"ðŸ‘ï¸"})]})]},a.id))})]})}),C.length>0&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 px-4 py-3",children:[e.jsx("strong",{children:"Total:"})," ",C.length," conta(s) |",e.jsx("strong",{className:"ml-3",children:"Saldo a Pagar:"})," ",x(C.reduce((a,i)=>a+(i.valor_final-i.valor_pago),0))]})]}),P&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[e.jsx("h5",{className:"text-xl font-bold",children:"ðŸ’° Registrar Pagamento"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>N(!1),children:"Ã—"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Conta:"})," ",o.descricao,e.jsx("br",{}),e.jsx("strong",{children:"Valor Total:"})," ",x(o.valor_final),e.jsx("br",{}),e.jsx("strong",{children:"JÃ¡ Pago:"})," ",x(o.valor_pago),e.jsx("br",{}),e.jsx("strong",{children:"Saldo Restante:"})," ",x(o.valor_final-o.valor_pago)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor a Pagar *"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:d.valor_pago,onChange:a=>j({...d,valor_pago:parseFloat(a.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data do Pagamento *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:d.data_pagamento,onChange:a=>j({...d,data_pagamento:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"flex-1 border border-gray-300 rounded px-3 py-2",value:d.forma_pagamento_id||"",onChange:a=>t(a.target.value),children:[e.jsx("option",{value:"",children:"Selecione..."}),k(l).map(a=>e.jsxs("option",{value:a.id,children:[a.icone||"ðŸ’³"," ",a.nome]},a.id))]}),e.jsx("button",{type:"button",className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>D(!0),title:"Adicionar nova forma de pagamento",children:"+"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Conta BancÃ¡ria *",d.forma_pagamento_id&&((h=l.find(a=>a.id===d.forma_pagamento_id))==null?void 0:h.conta_bancaria_destino_id)&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(PadrÃ£o da forma selecionada)"})]}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:d.conta_bancaria_id||"",onChange:a=>j({...d,conta_bancaria_id:parseInt(a.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione a conta..."}),k(r).map(a=>e.jsxs("option",{value:a.id,children:[a.nome," - ",x(a.saldo_atual||0)]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Juros"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:d.valor_juros,onChange:a=>j({...d,valor_juros:parseFloat(a.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Multa"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:d.valor_multa,onChange:a=>j({...d,valor_multa:parseFloat(a.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Desconto"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:d.valor_desconto,onChange:a=>j({...d,valor_desconto:parseFloat(a.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"ObservaÃ§Ãµes"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2",rows:"3",value:d.observacoes,onChange:a=>j({...d,observacoes:a.target.value})})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 mt-4",children:[e.jsx("strong",{children:"Valor Final do Pagamento:"})," ",x((d.valor_pago||0)+(d.valor_juros||0)+(d.valor_multa||0)-(d.valor_desconto||0))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>N(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:u,children:"âœ“ Confirmar Pagamento"})]})]})}),X&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Detalhes da Conta"}),e.jsx("button",{onClick:()=>E(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:"âœ•"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Parcela"}),e.jsx("p",{className:"mt-1 text-lg",children:o.numero_parcela&&o.total_parcelas?`${o.numero_parcela}/${o.total_parcelas}`:o.documento||"Ãšnica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fornecedor"}),e.jsx("p",{className:"mt-1 text-lg",children:o.fornecedor_nome||"N/A"})]})]}),o.nfe_numero&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nota Fiscal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>$(o),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“„"}),e.jsx("span",{className:"font-medium",children:o.nfe_numero})]}),e.jsxs("button",{onClick:()=>s(o),className:"flex items-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",title:"Ver no Fluxo de Caixa",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“ˆ"}),e.jsx("span",{className:"text-sm",children:"Fluxo"})]})]})]}),!o.nfe_numero&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>s(o),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“ˆ"}),e.jsx("span",{className:"font-medium",children:"Ver no Fluxo de Caixa"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de EmissÃ£o"}),e.jsx("p",{className:"mt-1",children:b(o.data_emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1",children:b(o.data_vencimento)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Original"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:x(o.valor_final||o.valor_total||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Pago"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:x(o.valor_pago||0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Restante"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-red-600",children:x((o.valor_final||o.valor_total||0)-(o.valor_pago||0))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${o.status==="pago"?"bg-green-100 text-green-800":o.status==="parcial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:o.status==="pago"?"Pago":o.status==="parcial"?"Parcial":"Pendente"})})]})]}),o.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ObservaÃ§Ãµes"}),e.jsx("p",{className:"mt-1 text-gray-600",children:o.observacoes})]})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Nova Forma de Pagamento"}),e.jsx("button",{onClick:()=>D(!1),className:"text-white hover:bg-green-700 px-3 py-1 rounded",children:"âœ•"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:w.nome,onChange:a=>I({...w,nome:a.target.value}),placeholder:"Ex: PIX Santander, Dinheiro..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:w.tipo,onChange:a=>I({...w,tipo:a.target.value}),children:[e.jsx("option",{value:"dinheiro",children:"ðŸ’µ Dinheiro"}),e.jsx("option",{value:"pix",children:"ðŸ“± PIX"}),e.jsx("option",{value:"cartao_debito",children:"ðŸ’³ CartÃ£o DÃ©bito"}),e.jsx("option",{value:"cartao_credito",children:"ðŸ’³ CartÃ£o CrÃ©dito"}),e.jsx("option",{value:"transferencia",children:"ðŸ¦ TransferÃªncia"}),e.jsx("option",{value:"boleto",children:"ðŸ“„ Boleto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta BancÃ¡ria PadrÃ£o"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:w.conta_bancaria_destino_id||"",onChange:a=>I({...w,conta_bancaria_destino_id:parseInt(a.target.value)||null}),children:[e.jsx("option",{value:"",children:"Nenhuma (selecionar manualmente)"}),k(r).map(a=>e.jsx("option",{value:a.id,children:a.nome},a.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta conta serÃ¡ prÃ©-selecionada automaticamente ao usar esta forma"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>D(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:n,children:"âœ“ Criar"})]})]})}),e.jsx(oe,{isOpen:A,onClose:()=>B(!1),onSave:z})]})};export{me as default};
