import{r as a,j as e}from"./vendor-react-1772218378171.js";import{a as m}from"./api-1772218378171.js";import"./index-1772218378171.js";function v(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(t||0))}function B(t){return t?new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(new Date(t)):"-"}const R={criado:{label:"Aguardando",color:"#f59e0b",bg:"#fef3c7"},aprovado:{label:"Aprovado",color:"#10b981",bg:"#d1fae5"},entregue:{label:"Entregue",color:"#6366f1",bg:"#e0e7ff"},cancelado:{label:"Cancelado",color:"#ef4444",bg:"#fee2e2"},carrinho:{label:"Carrinho",color:"#9ca3af",bg:"#f3f4f6"}};function W({status:t}){const r=R[t]||{label:t,color:"#6b7280",bg:"#f3f4f6"};return e.jsx("span",{style:{background:r.bg,color:r.color,padding:"2px 10px",borderRadius:99,fontSize:12,fontWeight:600},children:r.label})}function d({icon:t,label:r,value:f,sub:c,color:x}){return e.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:"20px 24px",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",flex:1,minWidth:160},children:[e.jsx("div",{style:{fontSize:28,marginBottom:6},children:t}),e.jsx("div",{style:{fontSize:26,fontWeight:700,color:x||"#1f2937"},children:f}),e.jsx("div",{style:{fontSize:14,color:"#6b7280",marginTop:2},children:r}),c&&e.jsx("div",{style:{fontSize:12,color:"#9ca3af",marginTop:4},children:c})]})}function I(){const[t,r]=a.useState(null),[f,c]=a.useState([]),[x,y]=a.useState([]),[p,u]=a.useState([]),[j,s]=a.useState(null),[h,g]=a.useState(!0),[S,z]=a.useState("");return a.useEffect(()=>{async function i(){g(!0),z("");try{const[n,b,A,w,_]=await Promise.all([m.get("/ecommerce-analytics/resumo"),m.get("/ecommerce-analytics/demanda"),m.get("/ecommerce-analytics/mais-vendidos"),m.get("/ecommerce-analytics/pedidos-recentes"),m.get("/ecommerce-analytics/ga-data")]);r(n.data),c(b.data),y(A.data),u(w.data),s(_.data)}catch{z("Erro ao carregar dados de analytics.")}finally{g(!1)}}i()},[]),h?e.jsx("div",{style:{padding:40,textAlign:"center",color:"#6b7280"},children:"Carregando analytics..."}):S?e.jsx("div",{style:{padding:40,color:"#ef4444"},children:S}):e.jsxs("div",{style:{padding:"24px 32px",maxWidth:1200,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:28},children:[e.jsx("span",{style:{fontSize:28},children:"üìä"}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:22,fontWeight:700,color:"#1f2937"},children:"Analytics do E-commerce"}),e.jsx("p",{style:{margin:0,fontSize:14,color:"#6b7280"},children:"Vis√£o geral de pedidos, demanda e produtos"})]})]}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:32},children:[e.jsx(d,{icon:"üõçÔ∏è",label:"Total de pedidos",value:(t==null?void 0:t.total_pedidos)??0,sub:`${(t==null?void 0:t.pedidos_hoje)??0} hoje`,color:"#6366f1"}),e.jsx(d,{icon:"üí∞",label:"Receita total",value:v(t==null?void 0:t.receita_total),sub:`Ticket m√©dio: ${v(t==null?void 0:t.ticket_medio)}`,color:"#10b981"}),e.jsx(d,{icon:"üõí",label:"Carrinhos abandonados",value:(t==null?void 0:t.carrinhos_abandonados)??0,sub:"H√° mais de 1h sem finalizar",color:"#f59e0b"}),e.jsx(d,{icon:"üîî",label:"Avise-me pendentes",value:(t==null?void 0:t.avise_me_pendentes)??0,sub:"Clientes aguardando reposi√ß√£o",color:"#ef4444"})]}),e.jsx(k,{gaData:j}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:24},children:[e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"üîî"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Demanda reprimida"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:'Produtos com "Avise-me" pendentes ‚Äî precisa repor'})]})]}),f.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhum pedido de aviso pendente üéâ"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:o,children:"SKU"}),e.jsx("th",{style:o,children:"Produto"}),e.jsx("th",{style:{...o,textAlign:"center"},children:"Pedidos"}),e.jsx("th",{style:{...o,textAlign:"center"},children:"Estoque atual"})]})}),e.jsx("tbody",{children:f.map((i,n)=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{...l,color:"#6b7280",fontFamily:"monospace"},children:i.codigo||"-"}),e.jsx("td",{style:{...l,fontWeight:500},children:i.product_name||`Produto #${i.product_id}`}),e.jsx("td",{style:{...l,textAlign:"center"},children:e.jsx("span",{style:{background:"#fee2e2",color:"#ef4444",borderRadius:99,padding:"2px 10px",fontWeight:700,fontSize:13},children:i.pendentes})}),e.jsx("td",{style:{...l,textAlign:"center",color:i.estoque_atual<=0?"#ef4444":"#10b981",fontWeight:600},children:i.estoque_atual})]},`dem-${i.product_id??"null"}-${n}`))})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"üèÜ"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Mais vendidos"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:"Produtos com maior volume de vendas no e-commerce"})]})]}),x.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhuma venda registrada ainda"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:o,children:"#"}),e.jsx("th",{style:o,children:"Produto"}),e.jsx("th",{style:{...o,textAlign:"center"},children:"Qtd vendida"}),e.jsx("th",{style:{...o,textAlign:"right"},children:"Receita"})]})}),e.jsx("tbody",{children:x.map((i,n)=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{...l,color:"#9ca3af",width:32},children:n===0?"ü•á":n===1?"ü•à":n===2?"ü•â":n+1}),e.jsx("td",{style:{...l,fontWeight:500},children:i.nome}),e.jsx("td",{style:{...l,textAlign:"center",fontWeight:700,color:"#6366f1"},children:i.total_vendido}),e.jsx("td",{style:{...l,textAlign:"right",color:"#10b981",fontWeight:600},children:v(i.receita)})]},`mv-${i.produto_id??"null"}-${n}`))})]})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"üßæ"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Pedidos recentes"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:"√öltimos 30 pedidos do e-commerce"})]})]}),p.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhum pedido ainda"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:o,children:"Pedido"}),e.jsx("th",{style:{...o,textAlign:"center"},children:"Status"}),e.jsx("th",{style:{...o,textAlign:"center"},children:"Itens"}),e.jsx("th",{style:{...o,textAlign:"right"},children:"Total"}),e.jsx("th",{style:{...o,textAlign:"right"},children:"Data"})]})}),e.jsx("tbody",{children:p.map((i,n)=>{var b;return e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsxs("td",{style:{...l,fontFamily:"monospace",fontSize:12,color:"#6b7280"},children:[(b=i.pedido_id)==null?void 0:b.slice(0,8),"‚Ä¶"]}),e.jsx("td",{style:{...l,textAlign:"center"},children:e.jsx(W,{status:i.status})}),e.jsxs("td",{style:{...l,textAlign:"center",color:"#6b7280"},children:[i.qtd_itens," item(ns)"]}),e.jsx("td",{style:{...l,textAlign:"right",fontWeight:600,color:"#1f2937"},children:v(i.total)}),e.jsx("td",{style:{...l,textAlign:"right",color:"#9ca3af",fontSize:12},children:B(i.created_at)})]},`pr-${i.pedido_id??n}`)})})]})]})]})}function k({gaData:t}){var c,x,y,p,u,j;if(!t)return null;if(!t.disponivel)return e.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:24,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",marginBottom:24,color:"#9ca3af",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:24},children:"üì°"}),e.jsx("div",{style:{marginTop:8,fontSize:14},children:"Dados do Google Analytics n√£o dispon√≠veis ainda."}),e.jsx("div",{style:{fontSize:12,marginTop:4},children:t.motivo})]});function r(s){return!s||s.length<8?s:`${s.slice(6,8)}/${s.slice(4,6)}`}const f=Math.max(...((c=t.visitantes_por_dia)==null?void 0:c.map(s=>s.sessoes))||[1],1);return e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:16},children:[e.jsx("span",{style:{fontSize:22},children:"üìà"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:17,color:"#1f2937"},children:"Comportamento dos visitantes"}),e.jsxs("div",{style:{fontSize:13,color:"#9ca3af"},children:["Google Analytics ‚Äî ",t.periodo]})]})]}),e.jsxs("div",{style:{display:"flex",gap:14,flexWrap:"wrap",marginBottom:20},children:[e.jsx(d,{icon:"üë•",label:"Usu√°rios ativos",value:(x=t.usuarios_ativos)==null?void 0:x.toLocaleString("pt-BR"),sub:"30 dias",color:"#6366f1"}),e.jsx(d,{icon:"üîó",label:"Sess√µes",value:(y=t.sessoes)==null?void 0:y.toLocaleString("pt-BR"),sub:"30 dias",color:"#3b82f6"}),e.jsx(d,{icon:"üìÑ",label:"Visualiza√ß√µes",value:(p=t.page_views)==null?void 0:p.toLocaleString("pt-BR"),sub:"p√°ginas vistas",color:"#10b981"}),e.jsx(d,{icon:"‚è±Ô∏è",label:"Tempo m√©dio",value:t.duracao_media,sub:"por sess√£o",color:"#f59e0b"}),e.jsx(d,{icon:"‚Ü©Ô∏è",label:"Taxa de rejei√ß√£o",value:`${t.bounce_rate}%`,sub:"sa√≠ram sem interagir",color:"#ef4444"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:20},children:[e.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:16,fontSize:14},children:"Sess√µes por dia"}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:3,height:100,overflowX:"auto"},children:(u=t.visitantes_por_dia)==null?void 0:u.map((s,h)=>e.jsxs("div",{title:`${r(s.data)}: ${s.sessoes} sess√µes`,style:{display:"flex",flexDirection:"column",alignItems:"center",flex:"0 0 auto",minWidth:18},children:[e.jsx("div",{style:{width:14,background:"#6366f1",borderRadius:"3px 3px 0 0",height:`${Math.max(4,Math.round(s.sessoes/f*90))}px`,transition:"height 0.3s"}}),h%7===0&&e.jsx("div",{style:{fontSize:9,color:"#9ca3af",marginTop:3,whiteSpace:"nowrap"},children:r(s.data)})]},h))})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 1px 4px rgba(0,0,0,0.08)"},children:[e.jsx("div",{style:{fontWeight:600,color:"#1f2937",marginBottom:14,fontSize:14},children:"P√°ginas mais vistas"}),(j=t.top_paginas)==null?void 0:j.map((s,h)=>{var g;return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,marginBottom:3},children:[e.jsx("span",{style:{color:"#374151",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"70%"},children:s.pagina==="/"?"üè† In√≠cio":s.pagina}),e.jsx("span",{style:{color:"#6b7280",fontWeight:600},children:s.visualizacoes})]}),e.jsx("div",{style:{background:"#e5e7eb",borderRadius:99,height:4},children:e.jsx("div",{style:{background:"#6366f1",borderRadius:99,height:4,width:`${Math.round(s.visualizacoes/(((g=t.top_paginas[0])==null?void 0:g.visualizacoes)||1)*100)}%`}})})]},h)})]})]})]})}const o={padding:"10px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},l={padding:"12px 16px",fontSize:14,color:"#1f2937"};export{I as default};
