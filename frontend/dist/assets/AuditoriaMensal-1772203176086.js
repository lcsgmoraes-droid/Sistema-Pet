import{r as t,z as p,j as e}from"./vendor-react-1772203176086.js";import{a as f}from"./index-1772203176086.js";function w(){const d=new Date,[o,u]=t.useState(d.getMonth()+1),[l,g]=t.useState(d.getFullYear()),[n,c]=t.useState(!1),[r,j]=t.useState(null);t.useEffect(()=>{x()},[]);const x=async()=>{if(!o||!l){p.error("Informe mÃªs e ano");return}c(!0);try{const a=await f.get(`/auditoria/provisoes/mensal?mes=${o}&ano=${l}`);j(a.data)}catch(a){console.error("Erro ao buscar auditoria:",a),p.error("Erro ao buscar auditoria de provisÃµes")}finally{c(!1)}},s=a=>!a&&a!==0?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.abs(a)),m=a=>!a&&a!==0?"0,0%":`${a.toFixed(1)}%`,v=(a,i)=>{const h={OK:"bg-green-100 text-green-800 border-green-300",AJUSTE:"bg-yellow-100 text-yellow-800 border-yellow-300",ACUMULANDO:"bg-blue-100 text-blue-800 border-blue-300",SEM_DADOS:"bg-gray-100 text-gray-600 border-gray-300"};return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${h[a]||h.SEM_DADOS}`,children:[i," ",a.replace("_"," ")]})},b=[{valor:1,nome:"Janeiro"},{valor:2,nome:"Fevereiro"},{valor:3,nome:"MarÃ§o"},{valor:4,nome:"Abril"},{valor:5,nome:"Maio"},{valor:6,nome:"Junho"},{valor:7,nome:"Julho"},{valor:8,nome:"Agosto"},{valor:9,nome:"Setembro"},{valor:10,nome:"Outubro"},{valor:11,nome:"Novembro"},{valor:12,nome:"Dezembro"}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Auditoria Mensal â€” ProvisÃ£o Ã— Realizado"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Compare valores provisionados com valores pagos para controle fiscal e trabalhista"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MÃªs"}),e.jsx("select",{value:o,onChange:a=>u(Number(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:b.map(a=>e.jsx("option",{value:a.valor,children:a.nome},a.valor))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano"}),e.jsx("input",{type:"number",value:l,onChange:a=>g(Number(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"2026"})]}),e.jsx("div",{children:e.jsx("button",{onClick:x,disabled:n,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Buscando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Buscar"]})})})]})}),r&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"InterpretaÃ§Ã£o dos Status:"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"âœ… OK:"})," ProvisÃ£o igual ao realizado - situaÃ§Ã£o perfeita"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"âš ï¸ AJUSTE:"})," Tem pagamento mas valores divergem - revisar"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ðŸ•’ ACUMULANDO:"})," Provisionado mas nÃ£o pago ainda - normal para fÃ©rias e 13Âº"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"âž– SEM DADOS:"})," Sem provisÃ£o e sem pagamento no perÃ­odo"]})]})]})]})}),r&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ProvisÃ£o"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Realizado"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DiferenÃ§a"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Real."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.itens.map((a,i)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.item})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-900",children:s(a.provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s(a.realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-medium ${a.diferenca===0?"text-green-600":a.diferenca>0?"text-blue-600":"text-red-600"}`,children:[a.diferenca>0&&"+",s(a.diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-600",children:m(a.percentual_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:v(a.status,a.status_emoji)})]},i))}),e.jsx("tfoot",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"TOTAL"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:s(r.total_provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:s(r.total_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-bold ${r.total_diferenca===0?"text-green-600":r.total_diferenca>0?"text-blue-600":"text-red-600"}`,children:[r.total_diferenca>0&&"+",s(r.total_diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:m(r.total_provisao>0?r.total_realizado/r.total_provisao*100:0)})}),e.jsx("td",{className:"px-6 py-4"})]})})]})})}),!n&&!r&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("p",{className:"text-gray-600",children:'Selecione um mÃªs e ano e clique em "Buscar" para visualizar a auditoria'})]})]})}export{w as default};
