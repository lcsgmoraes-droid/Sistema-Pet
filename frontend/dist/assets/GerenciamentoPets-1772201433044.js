import{S as L,ai as M,r as t,j as e,P as F,a9 as S,a7 as Y,aq as O,y as X,T as q,ap as P,ar as E,Y as U,ab as V}from"./vendor-react-1772201433044.js";import{a as d}from"./index-1772201433044.js";const K=()=>{var N;const i=L(),[$]=M(),k=$.get("cliente_id"),[r,z]=t.useState([]),[u,R]=t.useState([]),[T,g]=t.useState(!0),[h,p]=t.useState(""),[c,b]=t.useState(""),[a,j]=t.useState(k||""),[n,f]=t.useState(""),[o,v]=t.useState(""),[y,_]=t.useState(!1);t.useEffect(()=>{x(),A()},[a,n,o]);const x=async()=>{try{g(!0);const s=new URLSearchParams;c&&s.append("busca",c),a&&s.append("cliente_id",a),n&&s.append("especie",n),o&&s.append("ativo",o==="ativo"?"true":"false");const l=await d.get(`/pets?${s.toString()}`);z(l.data),p("")}catch(s){console.error("Erro ao carregar pets:",s),p("Erro ao carregar pets")}finally{g(!1)}},A=async()=>{try{const s=await d.get("/clientes/");R(s.data)}catch(s){console.error("Erro ao carregar clientes:",s)}},D=s=>{s.preventDefault(),x()},G=()=>{b(""),j(""),f(""),v("")},I=s=>{if(!s)return null;const l=new Date,w=new Date(s),m=l.getFullYear()-w.getFullYear(),C=l.getMonth()-w.getMonth();return m===0?`${C} ${C===1?"mês":"meses"}`:`${m} ${m===1?"ano":"anos"}`},B=async s=>{try{s.ativo?await d.delete(`/pets/${s.id}?soft_delete=true`):await d.post(`/pets/${s.id}/ativar`),x()}catch(l){console.error("Erro ao alterar status do pet:",l),alert("Erro ao alterar status do pet")}};return T?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando pets..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(F,{className:"text-blue-600",size:36}),"Gerenciamento de Pets"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:a?`Pets do cliente: ${((N=u.find(s=>s.id===parseInt(a)))==null?void 0:N.nome)||""}`:"Gestão completa dos animais de estimação"})]}),e.jsxs("button",{onClick:()=>i("/pets/novo"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(S,{size:20}),"Adicionar Pet"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, raça, microchip ou código...",value:c,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Buscar"}),e.jsxs("button",{type:"button",onClick:()=>_(!y),className:"px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(O,{}),"Filtros"]})]}),y&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente (Tutor)"}),e.jsxs("select",{value:a,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os clientes"}),u.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espécie"}),e.jsxs("select",{value:n,onChange:s=>f(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todas as espécies"}),e.jsx("option",{value:"Cão",children:"Cão"}),e.jsx("option",{value:"Gato",children:"Gato"}),e.jsx("option",{value:"Ave",children:"Ave"}),e.jsx("option",{value:"Roedor",children:"Roedor"}),e.jsx("option",{value:"Réptil",children:"Réptil"}),e.jsx("option",{value:"Outro",children:"Outro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o,onChange:s=>v(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"ativo",children:"Ativos"}),e.jsx("option",{value:"inativo",children:"Inativos"})]})]}),e.jsx("div",{className:"col-span-3 flex justify-end",children:e.jsxs("button",{type:"button",onClick:G,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(X,{}),"Limpar filtros"]})})]})]})}),h&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(q,{}),h]}),r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(F,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum pet encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c||a||n||o?"Tente ajustar os filtros ou fazer uma nova busca":"Comece adicionando o primeiro pet"}),e.jsxs("button",{onClick:()=>i("/pets/novo"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(S,{}),"Adicionar Primeiro Pet"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>e.jsx("div",{className:`bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md ${s.ativo?"border-gray-200":"border-red-200 bg-gray-50"}`,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.nome}),s.ativo?e.jsx(P,{className:"text-green-500",size:16}):e.jsx(E,{className:"text-red-500",size:16})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.codigo})]}),s.foto_url&&e.jsx("img",{src:s.foto_url,alt:s.nome,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Espécie:"}),e.jsx("span",{className:"text-gray-900",children:s.especie})]}),s.raca&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Raça:"}),e.jsx("span",{className:"text-gray-900",children:s.raca})]}),s.sexo&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sexo:"}),e.jsx("span",{className:"text-gray-900",children:s.sexo})]}),s.data_nascimento&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Idade:"}),e.jsx("span",{className:"text-gray-900",children:I(s.data_nascimento)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tutor:"}),e.jsx("span",{className:"text-blue-600",children:s.cliente_nome})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i(`/pets/${s.id}`),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(U,{size:16}),"Ver Detalhes"]}),e.jsx("button",{onClick:()=>i(`/pets/${s.id}/editar`),className:"px-3 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(V,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>B(s),className:`px-3 py-2 border rounded-lg transition-colors ${s.ativo?"border-red-300 hover:bg-red-50 text-red-600":"border-green-300 hover:bg-green-50 text-green-600"}`,title:s.ativo?"Desativar":"Reativar",children:s.ativo?e.jsx(E,{size:16}):e.jsx(P,{size:16})})]})]})},s.id))}),r.length>0&&e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Total: ",e.jsx("strong",{children:r.length})," pet(s) encontrado(s)",o===""&&e.jsxs(e.Fragment,{children:[" • ",e.jsx("strong",{className:"text-green-600",children:r.filter(s=>s.ativo).length})," ativo(s)"," • ",e.jsx("strong",{className:"text-red-600",children:r.filter(s=>!s.ativo).length})," inativo(s)"]})]})]})};export{K as default};
