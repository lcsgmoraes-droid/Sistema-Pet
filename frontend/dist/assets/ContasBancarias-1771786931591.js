import{r as n,j as e}from"./vendor-react-1771786931591.js";import{a as g}from"./index-1771786931591.js";import{aF as S,ag as B,aP as y,ae as N,ad as I,aQ as D,af as F,X as P,aD as T}from"./vendor-icons-1771786931591.js";import"./vendor-utils-1771786931591.js";const c=[{value:"banco",label:"Banco",icon:y,cor_padrao:"#dc2626"},{value:"caixa",label:"Caixa FÃ­sico",icon:N,cor_padrao:"#16a34a"},{value:"digital",label:"Carteira Digital",icon:I,cor_padrao:"#2563eb"}],$=["ðŸ¦","ðŸ’°","ðŸ’³","ðŸ’µ","ðŸ’¸","ðŸ§","ðŸª™","ðŸ’´","ðŸ’¶","ðŸ’·","ðŸ¤‘","ðŸ’²","ðŸ”’","ðŸ¦","ðŸª","ðŸ¢","ðŸ­","ðŸŽ¯","ðŸ“Š","ðŸ“ˆ","ðŸ’¼","ðŸ‘›","ðŸŽ","âš¡"];function X(){const[f,C]=n.useState([]),[w,j]=n.useState(!0),[_,m]=n.useState(!1),[u,v]=n.useState(null),[b,d]=n.useState(""),[s,l]=n.useState({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:"#dc2626",icone:"ðŸ¦",instituicao_bancaria:!1,ativa:!0});n.useEffect(()=>{h()},[]);const h=async()=>{try{j(!0);const a=await g.get("/contas-bancarias");C(a.data)}catch(a){console.error("Erro:",a),d("Erro ao carregar contas bancÃ¡rias")}finally{j(!1)}},p=(a=null)=>{if(a)l({nome:a.nome,tipo:a.tipo,banco:a.banco||"",saldo_inicial:a.saldo_inicial,cor:a.cor||"#dc2626",icone:a.icone||"ðŸ¦",instituicao_bancaria:a.instituicao_bancaria||!1,ativa:a.ativa}),v(a);else{const r=c[0];l({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:r.cor_padrao,icone:"ðŸ¦",instituicao_bancaria:!1,ativa:!0}),v(null)}m(!0),d("")},k=async a=>{var r,i,o;a.preventDefault();try{const t={nome:s.nome.trim(),tipo:s.tipo,banco:((r=s.banco)==null?void 0:r.trim())||null,saldo_inicial:Number(s.saldo_inicial)||0,cor:s.cor,icone:s.icone||"ðŸ¦",instituicao_bancaria:!!s.instituicao_bancaria,ativa:!!s.ativa};console.log("Enviando dados:",t),u?await g.put(`/contas-bancarias/${u.id}`,t):await g.post("/contas-bancarias",t),await h(),m(!1),d("")}catch(t){console.error("Erro completo:",t),console.error("Response:",t.response),d(((o=(i=t.response)==null?void 0:i.data)==null?void 0:o.detail)||t.message||"Erro ao salvar conta")}},E=async a=>{var r,i;if(confirm("Deseja realmente excluir esta conta?"))try{await g.delete(`/contas-bancarias/${a}`),await h()}catch(o){console.error("Erro:",o),d(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.detail)||"Erro ao excluir conta")}};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastro de Bancos"}),e.jsx("p",{className:"text-gray-600",children:"Configure as contas bancÃ¡rias, caixas e carteiras digitais do sistema"})]}),e.jsxs("button",{onClick:()=>p(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(S,{className:"w-5 h-5"}),"Nova Conta"]})]})}),b&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800",children:b})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(a=>{var i,o,t;const r=((i=c.find(x=>x.value===a.tipo))==null?void 0:i.icon)||y;return e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition ${a.ativa?"border-gray-200 hover:border-blue-300":"border-gray-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:`${a.cor}20`},children:a.icone}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:a.nome}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(r,{className:"w-3 h-3"}),(o=c.find(x=>x.value===a.tipo))==null?void 0:o.label]})]})]}),!a.ativa&&e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Inativa"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tipo de Conta"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:(t=c.find(x=>x.value===a.tipo))==null?void 0:t.label}),a.banco&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.banco})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(a),className:"flex items-center justify-center bg-gray-100 text-gray-700 p-2 rounded-lg hover:bg-gray-200 transition",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(a.id),className:"flex items-center justify-center bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-100 transition",children:e.jsx(F,{className:"w-4 h-4"})})]})]},a.id)})}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Nenhuma conta cadastrada"}),e.jsx("button",{onClick:()=>p(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Cadastrar primeira conta"})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:u?"Editar Conta":"Nova Conta"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[b&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-800 text-sm",children:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:s.nome,onChange:a=>l({...s,nome:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsx("select",{value:s.tipo,onChange:a=>{const r=c.find(i=>i.value===a.target.value);l({...s,tipo:a.target.value,cor:(r==null?void 0:r.cor_padrao)||s.cor})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:c.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),s.tipo==="banco"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Banco"}),e.jsx("input",{type:"text",value:s.banco,onChange:a=>l({...s,banco:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Santander, Bradesco..."})]}),!u&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:s.saldo_inicial,onChange:a=>l({...s,saldo_inicial:parseFloat(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:s.cor,onChange:a=>l({...s,cor:a.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ãcone Atual"}),e.jsx("div",{className:"w-full h-10 border border-gray-300 rounded-lg flex items-center justify-center text-2xl bg-white",style:{backgroundColor:`${s.cor}10`},children:s.icone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escolher Ãcone"}),e.jsx("div",{className:"grid grid-cols-8 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 max-h-32 overflow-y-auto",children:$.map((a,r)=>e.jsx("button",{type:"button",onClick:()=>l({...s,icone:a}),className:`w-10 h-10 rounded-lg flex items-center justify-center text-xl transition hover:scale-110 ${s.icone===a?"bg-blue-100 border-2 border-blue-500 ring-2 ring-blue-200":"bg-white border border-gray-200 hover:border-blue-300"}`,children:a},r))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"instituicao_bancaria",checked:s.instituicao_bancaria,onChange:a=>l({...s,instituicao_bancaria:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"instituicao_bancaria",className:"text-sm text-gray-700",children:"ðŸ¦ InstituiÃ§Ã£o BancÃ¡ria (para conciliaÃ§Ã£o OFX)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativa",checked:s.ativa,onChange:a=>l({...s,ativa:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativa",className:"text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(T,{className:"w-4 h-4"}),"Salvar"]})]})]})]})})]})}export{X as default};
