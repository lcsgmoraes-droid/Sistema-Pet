import{u as Ur,ah as $r,r as l,j as r}from"./vendor-react-1772152836727.js";import{b as Dr}from"./index-1772152836727.js";const _=Dr.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}}),D="ecommerce_customer_token",be="ecommerce_customer_orders",ke="ecommerce_customer_address",we="ecommerce_guest_cart",mr="ecommerce_wishlist_products",xr="ecommerce_notify_requests",br="/api",M={pedido_id:null,itens:[],subtotal:0,total:0},ae={cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""};function S(o){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(o||0))}function yr(o){if(!o)return"-";const d=new Date(o);return Number.isNaN(d.getTime())?"-":new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(d)}function ye(o){return Number((o==null?void 0:o.preco_venda)??(o==null?void 0:o.preco)??(o==null?void 0:o.preco_promocional)??0)}function J(o){const d=Number(o==null?void 0:o.estoque_ecommerce),g=Number(o==null?void 0:o.estoque_atual);return Number.isFinite(d)&&d>0?d:Number.isFinite(g)?g:Number.isFinite(d)?d:Number.POSITIVE_INFINITY}function jr(o){const d=J(o);return Number.isFinite(d)&&d<=0}async function je(o){const d=String(o||"").replace(/\D+/g,"");if(d.length!==8)return null;try{const g=await fetch(`https://viacep.com.br/ws/${d}/json/`);if(!g.ok)return null;const c=await g.json();return c!=null&&c.erro?null:{cep:d,endereco:(c==null?void 0:c.logradouro)||"",bairro:(c==null?void 0:c.bairro)||"",cidade:(c==null?void 0:c.localidade)||"",estado:(c==null?void 0:c.uf)||""}}catch{return null}}function Jr(){var o;return(o=window==null?void 0:window.crypto)!=null&&o.randomUUID?window.crypto.randomUUID():`checkout-${Date.now()}-${Math.random().toString(16).slice(2)}`}function ve(o){if(!o||typeof o!="string")return"";if(/^https?:\/\//i.test(o))return o;const d=o.startsWith("/")?o:`/${o}`;return/^https?:\/\//i.test(br)?`${br.replace(/\/api\/?$/,"").replace(/\/$/,"")}${d}`:`${window.location.origin}${d}`}function Kr(o){return Array.isArray(o)?o:Array.isArray(o==null?void 0:o.items)?o.items:Array.isArray(o==null?void 0:o.itens)?o.itens:Array.isArray(o==null?void 0:o.produtos)?o.produtos:[]}function Se(){try{const o=localStorage.getItem(we);if(!o)return{...M};const d=JSON.parse(o);if(!Array.isArray(d==null?void 0:d.itens))return{...M};const g=Number((d==null?void 0:d.subtotal)||0),c=Number((d==null?void 0:d.total)||0);return{pedido_id:null,itens:d.itens,subtotal:g,total:c}}catch{return{...M}}}function _e(o){const d=o.reduce((g,c)=>g+Number(c.preco_unitario||0)*Number(c.quantidade||0),0);return{pedido_id:null,itens:o,subtotal:d,total:d}}function Yr(){try{const o=localStorage.getItem(ke);if(!o)return{...ae};const d=JSON.parse(o);return typeof d=="object"&&d!==null?{...ae,...d}:{...ae,endereco:String(o||"")}}catch{const o=localStorage.getItem(ke)||"";return{...ae,endereco:o}}}function Gr(o){const d=[o.endereco,o.numero].filter(Boolean).join(", "),g=o.bairro?`Bairro: ${o.bairro}`:"",c=[o.cidade,o.estado].filter(Boolean).join("/"),z=o.cep?`CEP: ${o.cep}`:"",x=o.complemento?`Compl.: ${o.complemento}`:"";return[d,g,c,z,x].filter(Boolean).join(" | ")}function B(o){const d=[];return o!=null&&o.imagem_principal&&d.push(ve(o.imagem_principal)),Array.isArray(o==null?void 0:o.imagens)&&o.imagens.forEach(g=>{typeof g=="string"&&g.trim()?d.push(ve(g.trim())):g!=null&&g.url&&typeof g.url=="string"&&d.push(ve(g.url.trim()))}),Array.from(new Set(d.filter(Boolean)))}function Hr(o){const d=String(o||"");return d?d.includes("??")||d.includes("ÔøΩ")||/\?{2,}/.test(d):!1}function Vr(o){return String(o||"").split("-").filter(Boolean).map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}function k(o,d){var z;const g=(z=o==null?void 0:o.response)==null?void 0:z.data,c=g==null?void 0:g.detail;if(typeof c=="string"&&c.trim())return c;if(Array.isArray(c)&&c.length>0){const x=c[0];if(typeof x=="string"&&x.trim())return x;if(typeof(x==null?void 0:x.msg)=="string"&&x.msg.trim())return x.msg}if(Array.isArray(g==null?void 0:g.details)&&g.details.length>0){const x=g.details[0];if(typeof x=="string"&&x.trim())return x;if(typeof(x==null?void 0:x.msg)=="string"&&x.msg.trim())return x.msg}return typeof(g==null?void 0:g.message)=="string"&&g.message.trim()?g.message:d}const Ce=[{bg:"linear-gradient(135deg, #c41c1c 0%, #9b1515 60%, #7a0f0f 100%)",title:"Compre e receba no mesmo dia!",sub:"Pedidos realizados at√© as 16h",emoji:"üöÄ"},{bg:"linear-gradient(135deg, #1a6636 0%, #145228 60%, #0f3d1e 100%)",title:"Retire na loja",sub:"Super simples e sem custo de frete!",emoji:"üè™"},{bg:"linear-gradient(135deg, #d97706 0%, #b45309 60%, #92400e 100%)",title:"As melhores ra√ß√µes em Prudente",sub:"Cachorros, gatos, p√°ssaros e mais üêæ",emoji:"üê∂"}];function Zr(){var dr,sr,lr,cr,gr,pr,ur,fr,hr;const o=Ur(),d=$r(),[g,c]=l.useState("loja"),[z,x]=l.useState(0),[ne,Re]=l.useState(null),[oe,ze]=l.useState(!1),[W,te]=l.useState([]),[K,vr]=l.useState(""),[Y,Sr]=l.useState("todas"),[m,ie]=l.useState(null),[Ae,_r]=l.useState(!1),[Ne,Cr]=l.useState(!1),[Ie,G]=l.useState(!1),[Ee,Te]=l.useState(!1),[kr,Be]=l.useState(!1),[j,H]=l.useState(localStorage.getItem(D)||""),[n,F]=l.useState(null),[We,Fe]=l.useState(!1),[h,b]=l.useState({nome:"",telefone:"",cpf:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",usar_endereco_entrega_diferente:!1,entrega_nome:"",entrega_cep:"",entrega_endereco:"",entrega_numero:"",entrega_complemento:"",entrega_bairro:"",entrega_cidade:"",entrega_estado:""}),[U,V]=l.useState({email:"",password:"",nome:""}),[Q,de]=l.useState({email:"",password:""}),[p,A]=l.useState(()=>Se()),[se,Pe]=l.useState(""),[N,le]=l.useState(null),[P,Le]=l.useState(""),[E,Oe]=l.useState("entrega"),[X,qe]=l.useState("proprio"),[C,I]=l.useState(()=>Yr()),[w,Z]=l.useState(null),[L,ce]=l.useState(null),[ge,Me]=l.useState(""),[Ue,$e]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(be)||"[]")}catch{return[]}}),[De,Je]=l.useState([]),[pe,Ke]=l.useState(!1),[$,wr]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(mr)||"[]")}catch{return[]}}),[ue,Rr]=l.useState(()=>{try{return JSON.parse(localStorage.getItem(xr)||"[]")}catch{return[]}}),[Ye,u]=l.useState(""),[Ge,v]=l.useState(""),[i,fe]=l.useState(null),ee=l.useMemo(()=>{const a=String((n==null?void 0:n.nome)||"").trim().includes(" "),t=String((n==null?void 0:n.telefone)||"").trim().length>=8,s=String((n==null?void 0:n.cpf)||"").replace(/\D+/g,"").length>=11,f=String((n==null?void 0:n.endereco)||"").trim().length>3;return a&&t&&s&&f},[n]),T=l.useMemo(()=>new URLSearchParams(o.search).get("tenant")||d.tenantId||"",[o.search,d.tenantId]),He=l.useMemo(()=>i!=null&&i.id?{"X-Tenant-ID":i.id}:{},[i==null?void 0:i.id]),R=l.useMemo(()=>j?{Authorization:`Bearer ${j}`}:{},[j]),zr=l.useMemo(()=>{const e=W.map(a=>(a==null?void 0:a.categoria_nome)||(a==null?void 0:a.categoria)||"Sem categoria").filter(Boolean);return["todas",...Array.from(new Set(e))]},[W]),Ve=l.useMemo(()=>{const e=K.trim().toLowerCase();return W.filter(a=>{const t=String((a==null?void 0:a.nome)||"").toLowerCase(),s=(a==null?void 0:a.categoria_nome)||(a==null?void 0:a.categoria)||"Sem categoria";return(!e||t.includes(e))&&(Y==="todas"||s===Y)})},[W,K,Y]),Qe=l.useMemo(()=>Object.fromEntries(W.map(e=>[e.id,e])),[W]),re=(i==null?void 0:i.ecommerce_slug)||T||"",Xe=(n==null?void 0:n.nome)||(n==null?void 0:n.email)||"",Ar=l.useMemo(()=>{const e=(i==null?void 0:i.name)||"";return e&&!Hr(e)?e:re?Vr(re):"Loja online"},[i==null?void 0:i.name,re]);l.useEffect(()=>{if(!T){te([]),fe(null),u("Loja n√£o informada na URL. Use /slug-da-loja.");return}Nr(),Ze()},[T]),l.useEffect(()=>{j&&(Ir(),er())},[j]),l.useEffect(()=>{i!=null&&i.cidade&&!P&&Le(i.cidade)},[i==null?void 0:i.cidade,P]),l.useEffect(()=>{j||localStorage.setItem(we,JSON.stringify(p||M))},[p,j]),l.useEffect(()=>{localStorage.setItem(mr,JSON.stringify($))},[$]),l.useEffect(()=>{localStorage.setItem(xr,JSON.stringify(ue))},[ue]),l.useEffect(()=>{const e=setInterval(()=>x(a=>(a+1)%Ce.length),4e3);return()=>clearInterval(e)},[]),l.useEffect(()=>{if(!n)return;const e=(n==null?void 0:n.endereco_entrega_detalhado)||{};b({nome:(n==null?void 0:n.nome)||"",telefone:(n==null?void 0:n.telefone)||"",cpf:(n==null?void 0:n.cpf)||"",cep:(n==null?void 0:n.cep)||"",endereco:(n==null?void 0:n.endereco)||"",numero:(n==null?void 0:n.numero)||"",complemento:(n==null?void 0:n.complemento)||"",bairro:(n==null?void 0:n.bairro)||"",cidade:(n==null?void 0:n.cidade)||"",estado:(n==null?void 0:n.estado)||"",endereco_entrega:(n==null?void 0:n.endereco_entrega)||"",usar_endereco_entrega_diferente:!!(n!=null&&n.usar_endereco_entrega_diferente),entrega_nome:(e==null?void 0:e.entrega_nome)||"",entrega_cep:(e==null?void 0:e.entrega_cep)||"",entrega_endereco:(e==null?void 0:e.entrega_endereco)||"",entrega_numero:(e==null?void 0:e.entrega_numero)||"",entrega_complemento:(e==null?void 0:e.entrega_complemento)||"",entrega_bairro:(e==null?void 0:e.entrega_bairro)||"",entrega_cidade:(e==null?void 0:e.entrega_cidade)||"",entrega_estado:(e==null?void 0:e.entrega_estado)||""})},[n]),l.useEffect(()=>{if(!n)return;const e=(n==null?void 0:n.endereco_entrega_detalhado)||{},a=!!(n!=null&&n.usar_endereco_entrega_diferente);I({cep:a?(e==null?void 0:e.entrega_cep)||(n==null?void 0:n.cep)||"":(n==null?void 0:n.cep)||"",endereco:a?(e==null?void 0:e.entrega_endereco)||(n==null?void 0:n.endereco)||"":(n==null?void 0:n.endereco)||"",numero:a?(e==null?void 0:e.entrega_numero)||(n==null?void 0:n.numero)||"":(n==null?void 0:n.numero)||"",complemento:a?(e==null?void 0:e.entrega_complemento)||(n==null?void 0:n.complemento)||"":(n==null?void 0:n.complemento)||"",bairro:a?(e==null?void 0:e.entrega_bairro)||(n==null?void 0:n.bairro)||"":(n==null?void 0:n.bairro)||"",cidade:a?(e==null?void 0:e.entrega_cidade)||(n==null?void 0:n.cidade)||"":(n==null?void 0:n.cidade)||"",estado:a?(e==null?void 0:e.entrega_estado)||(n==null?void 0:n.estado)||"":(n==null?void 0:n.estado)||""})},[n]);async function Nr(){try{const e=await _.get("/api/ecommerce/tenant-context",{params:{tenant:T}});fe((e==null?void 0:e.data)||null)}catch(e){fe(null),u(k(e,"Loja inv√°lida para e-commerce"))}}async function Ze(){if(T){ze(!0),u("");try{const e=await _.get("/api/ecommerce/produtos",{params:{tenant:T,limit:100,busca:K||void 0}});te(Kr(e==null?void 0:e.data))}catch(e){te([]),u(k(e,"Erro ao carregar produtos vend√°veis"))}finally{ze(!1)}}}async function Ir(){if(j)try{const e=await _.get("/api/ecommerce/auth/perfil",{headers:R});F(e.data)}catch{F(null),H(""),localStorage.removeItem(D),A(Se())}}async function Er(e){if(e.preventDefault(),!j){u("Fa√ßa login para atualizar seus dados.");return}const a=String(h.nome||"").trim();if(!a||!a.includes(" ")){u("Informe nome completo (nome e sobrenome).");return}if(h.usar_endereco_entrega_diferente&&![h.entrega_nome,h.entrega_endereco,h.entrega_numero,h.entrega_bairro,h.entrega_cidade,h.entrega_estado].every(s=>String(s||"").trim())){u("Preencha o endere√ßo de entrega completo para continuar.");return}Fe(!0),u(""),v("");try{const t=await _.put("/api/ecommerce/auth/perfil",h,{headers:R});F(t.data),v("Dados cadastrais atualizados com sucesso.")}catch(t){u(k(t,"Erro ao salvar dados cadastrais"))}finally{Fe(!1)}}async function Tr(){const e=await je(h.cep);e&&b(a=>({...a,cep:e.cep||a.cep,endereco:e.endereco||a.endereco,bairro:e.bairro||a.bairro,cidade:e.cidade||a.cidade,estado:e.estado||a.estado}))}async function Br(){const e=await je(h.entrega_cep);e&&b(a=>({...a,entrega_cep:e.cep||a.entrega_cep,entrega_endereco:e.endereco||a.entrega_endereco,entrega_bairro:e.bairro||a.entrega_bairro,entrega_cidade:e.cidade||a.entrega_cidade,entrega_estado:e.estado||a.entrega_estado}))}async function Wr(){const e=await je(C.cep);e&&I(a=>({...a,cep:e.cep||a.cep,endereco:e.endereco||a.endereco,bairro:e.bairro||a.bairro,cidade:e.cidade||a.cidade,estado:e.estado||a.estado}))}async function er(e=R){if(e!=null&&e.Authorization){Be(!0);try{const a=await _.get("/api/carrinho",{headers:e});A(a.data||{...M})}catch(a){u(k(a,"Erro ao carregar carrinho"))}finally{Be(!1)}}}async function rr(e){var s;const a=Se();if(!((s=a==null?void 0:a.itens)!=null&&s.length))return;const t={Authorization:`Bearer ${e}`};for(const f of a.itens)await _.post("/api/carrinho/adicionar",{produto_id:f.produto_id,quantidade:f.quantidade},{headers:t});await er(t),localStorage.removeItem(we)}async function Fr(e){var a,t;if(e.preventDefault(),!(i!=null&&i.id)){u("Loja n√£o identificada na URL.");return}G(!0),u(""),v("");try{const s=await _.post("/api/ecommerce/auth/registrar",U,{headers:He}),f=(a=s==null?void 0:s.data)==null?void 0:a.access_token;if(!f)throw new Error("Token n√£o retornado");(t=s==null?void 0:s.data)!=null&&t.user&&F(s.data.user),localStorage.setItem(D,f),H(f),await rr(f),V({email:"",password:"",nome:""}),v("Cadastro realizado com sucesso. Complete seus dados na aba Conta."),c("conta")}catch(s){u(k(s,"Erro ao cadastrar cliente"))}finally{G(!1)}}async function Pr(e){var a,t;if(e.preventDefault(),!(i!=null&&i.id)){u("Loja n√£o identificada na URL.");return}G(!0),u(""),v("");try{const s=await _.post("/api/ecommerce/auth/login",Q,{headers:He}),f=(a=s==null?void 0:s.data)==null?void 0:a.access_token;if(!f)throw new Error("Token n√£o retornado");(t=s==null?void 0:s.data)!=null&&t.user&&F(s.data.user),localStorage.setItem(D,f),H(f),await rr(f),de({email:"",password:""}),v("Login realizado com sucesso. Confira seus dados cadastrais."),c("conta")}catch(s){u(k(s,"Erro ao realizar login"))}finally{G(!1)}}function Lr(){F(null),H(""),A({...M}),Z(null),ce(null),localStorage.removeItem(D),v("Sess√£o encerrada.")}function ar(e){wr(a=>a.includes(e)?(v("Produto removido da sua lista de desejos."),a.filter(t=>t!==e)):(v("Produto adicionado √† sua lista de desejos."),[...a,e]))}function nr(e){const a=(n==null?void 0:n.email)||U.email||Q.email||"",t=window.prompt("Digite seu email para avisarmos quando chegar em estoque:",a);if(!t)return;const s={productId:e.id,productName:e.nome,email:t.trim(),tenant:re||T,createdAt:new Date().toISOString()};Rr(f=>f.some(O=>O.productId===s.productId&&String(O.email||"").toLowerCase()===s.email.toLowerCase())?f:[...f,s]),v("Aviso registrado. Quando chegar estoque, voc√™ ser√° notificado por email.")}async function or(e){if(J(e)<=0){u("Produto indispon√≠vel no momento. Volto em breve.");return}if(!j){u("");const t=ye(e);A(s=>{const f=Array.isArray(s==null?void 0:s.itens)?s.itens:[],O=f.find(q=>q.produto_id===e.id)?f.map(q=>q.produto_id===e.id?{...q,quantidade:Number(q.quantidade||0)+1}:q):[...f,{item_id:`guest-${e.id}`,produto_id:e.id,nome:e.nome,preco_unitario:t,quantidade:1}];return _e(O)}),v("Produto adicionado ao carrinho. Fa√ßa login no checkout para finalizar.");return}u("");try{const t=await _.post("/api/carrinho/adicionar",{produto_id:e.id,quantidade:1},{headers:R});A(t.data),v("Produto adicionado ao carrinho.")}catch(t){u(k(t,"Erro ao adicionar no carrinho"))}}async function he(e,a){if(!j){A(t=>{const s=Array.isArray(t==null?void 0:t.itens)?t.itens:[];if(a<=0){const y=s.filter(O=>O.item_id!==e);return _e(y)}const f=s.map(y=>y.item_id===e?{...y,quantidade:a}:y);return _e(f)});return}u("");try{if(a<=0){const s=await _.delete(`/api/carrinho/remover/${e}`,{headers:R});A(s.data);return}const t=await _.put(`/api/carrinho/atualizar/${e}`,{quantidade:a},{headers:R});A(t.data)}catch(t){u(k(t,"Erro ao atualizar carrinho"))}}async function Or(e){if(e.preventDefault(),!j){u("Fa√ßa login para aplicar cupom."),c("conta");return}if(se.trim()){u("");try{const a=await _.post("/api/carrinho/aplicar-cupom",{codigo:se.trim()},{headers:R});le(a.data),v("Cupom validado.")}catch(a){le(null),u(k(a,"Cupom inv√°lido"))}}}async function qr(e){var t;if(e.preventDefault(),!j){u("Fa√ßa login para continuar no checkout."),c("conta");return}if(!((t=p==null?void 0:p.itens)!=null&&t.length)){u("Adicione itens no carrinho antes de calcular o checkout.");return}const a=((i==null?void 0:i.cidade)||P||C.cidade||"").trim();if(!a||a.length<2){u("Cidade da loja n√£o configurada para checkout.");return}u(""),Z(null);try{const s=await _.get("/api/checkout/resumo",{headers:R,params:{cidade_destino:a,cupom:(N==null?void 0:N.codigo)||void 0}});Z(s.data),v("Resumo de checkout calculado.")}catch(s){u(k(s,"Erro ao calcular resumo do checkout"))}}async function Mr(){if(!j){u("Fa√ßa login para finalizar o pedido."),c("conta");return}if(!ee){u("Complete seu cadastro antes de finalizar o pedido."),c("conta");return}const e=((i==null?void 0:i.cidade)||P||C.cidade||"").trim();if(!e||e.length<2){u("Cidade da loja n√£o configurada para checkout.");return}const a=E==="retirada"?"RETIRADA NA LOJA":Gr(C);if(E==="entrega"&&!a){u("Informe o endere√ßo de entrega.");return}Te(!0),u(""),v(""),ce(null);try{const s=(await _.post("/api/checkout/finalizar",{cidade_destino:e,endereco_entrega:a||null,cupom:(N==null?void 0:N.codigo)||null,tipo_retirada:E==="retirada"?X:null},{headers:{...R,"Idempotency-Key":Jr()}})).data;if(ce(s),A({pedido_id:null,itens:[],subtotal:0,total:0}),Z(null),le(null),Pe(""),E==="entrega"&&localStorage.setItem(ke,JSON.stringify(C)),s!=null&&s.pedido_id){const f=Array.from(new Set([s.pedido_id,...Ue]));$e(f),localStorage.setItem(be,JSON.stringify(f)),await me()}v("Pedido finalizado com sucesso."),c("pedidos")}catch(t){u(k(t,"Erro ao finalizar checkout"))}finally{Te(!1)}}async function me(){var e;if(j){Ke(!0);try{const a=await _.get("/api/checkout/pedidos",{headers:R,params:{limit:20}}),t=Array.isArray((e=a==null?void 0:a.data)==null?void 0:e.pedidos)?a.data.pedidos:[];if(Je(t),t.length){const s=t.map(y=>y==null?void 0:y.pedido_id).filter(Boolean),f=Array.from(new Set([...s,...Ue]));$e(f),localStorage.setItem(be,JSON.stringify(f))}}catch(a){Je([]),u(k(a,"Erro ao carregar detalhes dos pedidos"))}finally{Ke(!1)}}}l.useEffect(()=>{!j||g!=="pedidos"||me()},[g,j]);const xe=Number((p==null?void 0:p.total)||0);function tr(){var e;if(!((e=p==null?void 0:p.itens)!=null&&e.length)){u("Adicione itens no carrinho antes de finalizar.");return}if(!j){u("Fa√ßa login para finalizar o pedido."),c("conta");return}if(!ee){u("Complete seu cadastro (nome completo, telefone, CPF e endere√ßo) antes de finalizar."),c("conta");return}c("checkout")}function ir(e){const a=B(e);ie(e),Me(a[0]||"")}return r.jsxs("div",{className:"page",children:[((dr=p==null?void 0:p.itens)==null?void 0:dr.length)>0&&r.jsxs("div",{onClick:()=>c("carrinho"),style:{position:"sticky",top:0,zIndex:50,background:"#c41c1c",color:"#fff",padding:"9px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:10,marginBottom:10,cursor:"pointer",boxShadow:"0 3px 12px rgba(196,28,28,0.45)"},children:[r.jsxs("span",{style:{fontWeight:600,fontSize:14},children:["üõí ",p.itens.length," item(ns) no carrinho"]}),r.jsxs("span",{style:{fontWeight:800,fontSize:14},children:[S(xe)," ‚Üí"]})]}),r.jsx("div",{style:{background:"linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%)",borderRadius:16,padding:"16px 20px",marginBottom:10,border:"1px solid #fde68a",boxShadow:"0 2px 8px rgba(196,28,28,0.07)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:11,color:"#92400e",fontWeight:700,letterSpacing:1.2,textTransform:"uppercase"},children:"Loja Online"}),r.jsx("h1",{style:{margin:"2px 0 4px",fontSize:30,lineHeight:1.1,color:"#c41c1c",fontWeight:900},children:Ar}),r.jsxs("div",{style:{fontSize:13,color:"#78350f",fontWeight:500},children:["üìç ",(i==null?void 0:i.cidade)||"Cidade n√£o informada",i!=null&&i.uf?` ‚Ä¢ ${i.uf}`:""]})]}),r.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[Xe?r.jsxs("div",{style:{fontSize:13,color:"#374151",background:"#fff",borderRadius:20,padding:"6px 12px",border:"1px solid #d1d5db",fontWeight:600},children:["üë§ ",Xe.split(" ")[0]]}):r.jsx("button",{onClick:()=>c("conta"),style:{background:"#fff",border:"2px solid #1a6636",color:"#1a6636",borderRadius:20,padding:"6px 14px",cursor:"pointer",fontSize:13,fontWeight:700},children:"Entrar / Cadastrar"}),r.jsxs("button",{onClick:()=>c("carrinho"),style:{background:"#c41c1c",color:"#fff",border:"none",borderRadius:50,width:48,height:48,cursor:"pointer",fontSize:20,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",boxShadow:"0 2px 8px rgba(196,28,28,0.4)",flexShrink:0},children:["üõí",((sr=p==null?void 0:p.itens)==null?void 0:sr.length)>0&&r.jsx("span",{style:{position:"absolute",top:-4,right:-4,background:"#f5a623",color:"#7c2d12",borderRadius:50,minWidth:20,height:20,fontSize:11,fontWeight:800,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",padding:"0 3px"},children:p.itens.length})]})]})]})}),r.jsxs("div",{style:{position:"relative",borderRadius:14,overflow:"hidden",marginBottom:10,height:112},children:[Ce.map((e,a)=>r.jsxs("div",{style:{position:"absolute",inset:0,background:e.bg,display:"flex",alignItems:"center",padding:"0 24px",gap:16,opacity:z===a?1:0,transition:"opacity 0.8s ease",pointerEvents:z===a?"auto":"none"},children:[r.jsx("span",{style:{fontSize:44,flexShrink:0},children:e.emoji}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"#fff",fontWeight:900,fontSize:20,lineHeight:1.2,textShadow:"0 1px 3px rgba(0,0,0,0.25)"},children:e.title}),r.jsx("div",{style:{color:"rgba(255,255,255,0.88)",fontSize:13,marginTop:5},children:e.sub})]})]},a)),r.jsx("div",{style:{position:"absolute",bottom:9,right:14,display:"flex",gap:5},children:Ce.map((e,a)=>r.jsx("button",{onClick:()=>x(a),style:{width:z===a?22:8,height:8,background:z===a?"#fff":"rgba(255,255,255,0.5)",borderRadius:4,border:"none",cursor:"pointer",padding:0,transition:"all 0.3s ease"}},a))})]}),r.jsxs("div",{style:{marginBottom:10,background:"linear-gradient(90deg, #1a6636, #145228)",color:"#fff",borderRadius:10,padding:"10px 14px",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{style:{fontSize:20},children:"üì±"}),r.jsxs("span",{children:["Baixe nosso ",r.jsx("strong",{children:"APP"})," para notifica√ß√µes de pedidos, promo√ß√µes e aviso de reposi√ß√£o de estoque."]})]}),!T&&r.jsx("div",{style:{marginBottom:12,color:"#b00020"},children:"Use a URL no formato: /slug-da-loja"}),r.jsx("div",{style:{display:"flex",gap:0,background:"#1a6636",borderRadius:12,overflow:"hidden",marginBottom:16},children:[["loja","üè™ Loja"],["carrinho",`üõí Carrinho${(lr=p==null?void 0:p.itens)!=null&&lr.length?` (${p.itens.length})`:""}`],["pedidos","üì¶ Pedidos"],["conta","üë§ Conta"]].map(([e,a])=>{const t=g===e;return r.jsx("button",{onClick:()=>c(e),style:{flex:1,border:"none",background:t?"#fff":"transparent",color:t?"#1a6636":"rgba(255,255,255,0.88)",padding:"12px 4px",fontWeight:t?700:500,cursor:"pointer",fontSize:13,borderBottom:t?"3px solid #c41c1c":"3px solid transparent",transition:"all 0.15s ease"},children:a},e)})}),Ye&&r.jsx("div",{style:{background:"#ffe8e8",color:"#8c0000",padding:10,borderRadius:6,marginBottom:12},children:Ye}),Ge&&r.jsx("div",{style:{background:"#e8fff0",color:"#0a7d32",padding:10,borderRadius:6,marginBottom:12},children:Ge}),g==="loja"&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 320px",gap:16},children:[r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:12,border:"1px solid #e5e7eb"},children:[r.jsxs("div",{style:{marginBottom:12},children:[r.jsx("h2",{style:{fontSize:20,marginBottom:4},children:"Cat√°logo da loja"}),r.jsx("div",{style:{color:"#64748b",fontSize:14},children:"Selecione produtos, confira detalhes e adicione ao carrinho."})]}),r.jsxs("div",{style:{display:"flex",gap:8,marginBottom:14,flexWrap:"wrap"},children:[r.jsx("input",{value:K,onChange:e=>vr(e.target.value),placeholder:"Buscar produto...",style:{flex:1,minWidth:240,padding:10,border:"1px solid #d1d5db",borderRadius:10}}),r.jsx("select",{value:Y,onChange:e=>Sr(e.target.value),style:{padding:10,border:"1px solid #d1d5db",borderRadius:10},children:zr.map(e=>r.jsx("option",{value:e,children:e},e))}),r.jsx("button",{className:"btn-secondary",onClick:Ze,disabled:oe,children:oe?"Carregando...":"Atualizar"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12},children:[Ve.map(e=>{const a=J(e),t=jr(e),s=$.includes(e.id),f=B(e)[0];return r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>ir(e),onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),ir(e))},onMouseEnter:()=>Re(e.id),onMouseLeave:()=>Re(null),style:{border:ne===e.id?"2px solid #c41c1c":"1px solid #e5e7eb",borderRadius:14,padding:10,background:"#fff",textAlign:"left",cursor:"pointer",display:"grid",gap:8,transition:"all 0.18s ease",boxShadow:ne===e.id?"0 6px 20px rgba(196,28,28,0.14)":"0 1px 4px rgba(0,0,0,0.05)",transform:ne===e.id?"translateY(-3px)":"none"},children:[r.jsx("div",{style:{borderRadius:10,background:"#f1f5f9",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:f?r.jsx("img",{src:f,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:6,background:"#fff"}}):r.jsx("span",{style:{color:"#64748b",fontSize:12},children:"Sem imagem"})}),r.jsxs("div",{style:{minHeight:42},children:[r.jsx("div",{style:{fontSize:14,fontWeight:700,lineHeight:1.25},children:e.nome}),r.jsx("div",{style:{fontSize:12,color:"#64748b",marginTop:4},children:(e==null?void 0:e.categoria_nome)||(e==null?void 0:e.categoria)||"Sem categoria"}),r.jsxs("div",{style:{fontSize:12,color:"#475569",marginTop:2},children:["SKU: ",(e==null?void 0:e.codigo)||"-"]}),r.jsx("div",{style:{fontSize:12,color:t?"#b45309":"#0f766e",marginTop:4},children:t?"Volto em breve":Number.isFinite(a)?`Estoque dispon√≠vel: ${a}`:"Estoque dispon√≠vel"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("strong",{style:{fontSize:16},children:S(ye(e))}),r.jsx("button",{className:"btn-primary",disabled:t,style:{background:t?"#9ca3af":"#c41c1c",border:"none",color:"#fff",borderRadius:8,padding:"8px 12px",fontWeight:700,fontSize:13,cursor:t?"not-allowed":"pointer",opacity:t?.75:1},onClick:y=>{y.stopPropagation(),or(e)},children:t?"Indispon√≠vel":"+ Adicionar"})]}),r.jsxs("div",{style:{display:"flex",gap:6,marginTop:2},children:[r.jsx("button",{className:"btn-secondary",onClick:y=>{y.stopPropagation(),ar(e.id)},style:{fontSize:12,padding:"6px 8px"},children:s?"Remover desejo":"Lista de desejos"}),t&&r.jsx("button",{className:"btn-secondary",onClick:y=>{y.stopPropagation(),nr(e)},style:{fontSize:12,padding:"6px 8px"},children:"Avise-me"})]})]},e.id)}),!oe&&Ve.length===0&&r.jsx("div",{style:{color:"#666",padding:12,display:"grid",gap:10},children:r.jsx("div",{children:"Nenhum produto encontrado para o filtro atual."})})]})]}),r.jsxs("aside",{style:{background:"#fff",padding:16,borderRadius:14,border:"1px solid #e5e7eb",alignSelf:"start",position:"sticky",top:8,boxShadow:"0 2px 12px rgba(0,0,0,0.07)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[r.jsx("h3",{style:{margin:0,fontSize:15,color:"#1a6636"},children:"üõí Seu carrinho"}),((cr=p==null?void 0:p.itens)==null?void 0:cr.length)>0&&r.jsx("span",{style:{background:"#c41c1c",color:"#fff",borderRadius:20,padding:"2px 9px",fontSize:12,fontWeight:700},children:p.itens.length})]}),(gr=p==null?void 0:p.itens)!=null&&gr.length?r.jsxs("div",{style:{display:"grid",gap:8},children:[p.itens.slice(0,5).map(e=>{const a=Qe[e.produto_id],t=a?B(a)[0]:null;return r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",borderBottom:"1px solid #f1f5f9",paddingBottom:8,marginBottom:2},children:[r.jsx("div",{style:{width:44,height:44,borderRadius:8,background:"#f8fafc",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:t?r.jsx("img",{src:t,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:2}}):r.jsx("span",{style:{fontSize:18},children:"üì¶"})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:12,fontWeight:600,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.nome}),r.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[e.quantidade,"√ó ",S(e.preco_unitario)]})]})]},e.item_id)}),p.itens.length>5&&r.jsxs("div",{style:{fontSize:12,color:"#64748b",textAlign:"center"},children:["+ ",p.itens.length-5," item(ns) a mais"]}),r.jsxs("div",{style:{background:"#fef2f2",borderRadius:8,padding:"8px 10px",marginTop:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontWeight:600,fontSize:14},children:"Subtotal"}),r.jsx("span",{style:{fontWeight:800,fontSize:16,color:"#c41c1c"},children:S(xe)})]}),r.jsx("button",{className:"btn-primary",onClick:tr,style:{background:"#c41c1c",border:"none",color:"#fff",borderRadius:10,padding:"11px 0",fontWeight:700,fontSize:14,cursor:"pointer",width:"100%"},children:"‚úÖ Finalizar compra"}),r.jsx("button",{className:"btn-secondary",onClick:()=>c("carrinho"),style:{borderRadius:10,width:"100%"},children:"Ver / Editar carrinho"}),!j&&r.jsx("div",{style:{fontSize:11,color:"#64748b",textAlign:"center"},children:"Login solicitado s√≥ no fechamento"})]}):r.jsxs("div",{style:{color:"#94a3b8",textAlign:"center",padding:"20px 0",fontSize:13},children:[r.jsx("div",{style:{fontSize:30,marginBottom:6},children:"üõí"}),"Seu carrinho est√° vazio."]})]})]}),m&&r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:16,zIndex:60},onClick:()=>ie(null),children:r.jsxs("div",{style:{background:"#fff",width:"min(980px, 100%)",maxHeight:"90vh",overflowY:"auto",borderRadius:14,border:"1px solid #e5e7eb",padding:16,display:"grid",gridTemplateColumns:"1.1fr 1fr",gap:16},onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{children:[r.jsx("div",{style:{borderRadius:12,background:"#f1f5f9",aspectRatio:"1 / 1",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:ge?r.jsx("img",{src:ge,alt:m.nome,style:{width:"100%",height:"100%",objectFit:"contain",background:"#fff"}}):r.jsx("span",{style:{color:"#64748b"},children:"Sem imagem dispon√≠vel"})}),B(m).length>1&&r.jsx("div",{style:{display:"flex",gap:8,marginTop:10,overflowX:"auto"},children:B(m).map(e=>r.jsx("button",{onClick:()=>Me(e),style:{border:ge===e?"2px solid #c41c1c":"1px solid #d1d5db",borderRadius:8,width:74,height:74,overflow:"hidden",padding:0,background:"#fff",cursor:"pointer"},children:r.jsx("img",{src:e,alt:"Miniatura do produto",style:{width:"100%",height:"100%",objectFit:"contain",background:"#fff"}})},e))})]}),r.jsxs("div",{style:{display:"grid",alignContent:"start",gap:10},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[r.jsx("h3",{style:{margin:0,fontSize:24,lineHeight:1.2},children:m.nome}),r.jsx("button",{className:"btn-secondary",onClick:()=>ie(null),children:"Fechar"})]}),r.jsx("div",{style:{fontSize:26,fontWeight:800,color:"#c41c1c"},children:S(ye(m))}),r.jsxs("div",{style:{color:"#475569"},children:["Categoria: ",r.jsx("strong",{children:(m==null?void 0:m.categoria_nome)||(m==null?void 0:m.categoria)||"Sem categoria"})]}),r.jsxs("div",{style:{color:"#475569"},children:["Estoque dispon√≠vel: ",r.jsx("strong",{children:Number.isFinite(J(m))?J(m):"Dispon√≠vel"})]}),r.jsxs("div",{style:{color:"#475569"},children:["SKU: ",r.jsx("strong",{children:(m==null?void 0:m.codigo)||"-"})]}),B(m).length<=1&&r.jsx("div",{style:{fontSize:13,color:"#64748b"},children:"Este produto ainda n√£o possui galeria com m√∫ltiplas fotos cadastradas."}),r.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[jr(m)?r.jsx("button",{className:"btn-secondary",onClick:()=>nr(m),children:"Avise-me quando chegar"}):r.jsx("button",{className:"btn-primary",onClick:()=>or(m),style:{background:"#c41c1c",border:"none",color:"#fff",borderRadius:10,fontWeight:700,fontSize:15,padding:"10px 20px",cursor:"pointer"},children:"+ Adicionar ao carrinho"}),r.jsx("button",{className:"btn-secondary",onClick:()=>ar(m.id),children:$.includes(m.id)?"Remover da lista":"Salvar na lista"}),r.jsx("button",{className:"btn-secondary",onClick:()=>c("carrinho"),children:"Ver carrinho"})]})]})]})}),g==="carrinho"&&r.jsxs("div",{style:{background:"#f8fafc",padding:16,borderRadius:14,minHeight:200},children:[r.jsx("h3",{style:{marginTop:0,color:"#1a6636",fontSize:18},children:"üõí Carrinho de compras"}),kr?r.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:20},children:"Carregando carrinho..."}):(pr=p==null?void 0:p.itens)!=null&&pr.length?r.jsxs("div",{style:{display:"grid",gap:10},children:[p.itens.map(e=>{const a=Qe[e.produto_id],t=a?B(a)[0]:null;return r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:"12px 14px",display:"flex",gap:14,alignItems:"center",background:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.05)"},children:[r.jsx("div",{style:{width:80,height:80,borderRadius:10,background:"#f8fafc",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:t?r.jsx("img",{src:t,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:4}}):r.jsx("span",{style:{fontSize:32},children:"üì¶"})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:700,fontSize:15,lineHeight:1.3,marginBottom:4},children:e.nome}),r.jsxs("div",{style:{fontSize:13,color:"#c41c1c",fontWeight:700,marginBottom:8},children:[S(e.preco_unitario)," / un"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>he(e.item_id,e.quantidade-1),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"‚àí"}),r.jsx("span",{style:{fontWeight:700,fontSize:15,minWidth:28,textAlign:"center"},children:e.quantidade}),r.jsx("button",{onClick:()=>he(e.item_id,e.quantidade+1),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),r.jsx("button",{onClick:()=>he(e.item_id,0),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:13,marginLeft:4,padding:"4px 8px"},children:"üóë Remover"})]})]}),r.jsx("div",{style:{textAlign:"right",flexShrink:0},children:r.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#111"},children:S(e.preco_unitario*e.quantidade)})})]},e.item_id)}),r.jsxs("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2},children:[r.jsx("span",{style:{fontWeight:600,fontSize:15},children:"Total"}),r.jsx("span",{style:{fontWeight:800,fontSize:20,color:"#c41c1c"},children:S(xe)})]}),r.jsx("button",{className:"btn-primary",onClick:tr,style:{background:"#c41c1c",border:"none",color:"#fff",borderRadius:12,padding:"14px 0",fontWeight:800,fontSize:16,cursor:"pointer",width:"100%"},children:"‚úÖ Finalizar pedido"})]}):r.jsxs("div",{style:{color:"#94a3b8",textAlign:"center",padding:"32px 0",fontSize:14},children:[r.jsx("div",{style:{fontSize:40,marginBottom:8},children:"üõí"}),r.jsx("div",{children:"Seu carrinho est√° vazio"}),r.jsx("button",{className:"btn-secondary",onClick:()=>c("loja"),style:{marginTop:12},children:"Ver produtos"})]}),r.jsxs("form",{onSubmit:Or,style:{marginTop:12,display:"flex",gap:8},children:[r.jsx("input",{value:se,onChange:e=>Pe(e.target.value),placeholder:"Cupom",style:{flex:1,padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"submit",children:"Aplicar"})]}),N&&r.jsxs("div",{style:{marginTop:8,color:"#0a7d32"},children:["Cupom ",N.codigo,": -",S(N.desconto)]})]}),g==="checkout"&&r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,display:"grid",gap:10},children:[r.jsx("h3",{style:{marginTop:0},children:"Checkout"}),r.jsxs("form",{onSubmit:qr,style:{display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"grid",gap:6},children:[r.jsx("label",{style:{fontSize:13,color:"#334155"},children:"Forma de recebimento"}),r.jsxs("div",{style:{display:"flex",gap:12},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx("input",{type:"radio",name:"deliveryMode",value:"entrega",checked:E==="entrega",onChange:()=>Oe("entrega")}),"Entrega"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx("input",{type:"radio",name:"deliveryMode",value:"retirada",checked:E==="retirada",onChange:()=>Oe("retirada")}),"Retirada na loja"]})]}),E==="retirada"&&r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:12,display:"grid",gap:8},children:[r.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"Quem vai retirar o pedido?"}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"tipoRetirada",value:"proprio",checked:X==="proprio",onChange:()=>qe("proprio")}),r.jsx("span",{children:"üôã Eu mesmo(a) vou retirar"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"tipoRetirada",value:"terceiro",checked:X==="terceiro",onChange:()=>qe("terceiro")}),r.jsx("span",{children:"ÔøΩ Outra pessoa vai retirar por mim"})]}),X==="terceiro"&&r.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:6,padding:10,fontSize:12,color:"#92400e"},children:["‚ÑπÔ∏è Uma ",r.jsx("strong",{children:"senha secreta de retirada"})," ser√° gerada ap√≥s confirmar o pedido. Compartilhe essa senha com a pessoa que vai retirar."]})]})]}),r.jsx("input",{value:(i==null?void 0:i.cidade)||P,onChange:e=>Le(e.target.value),placeholder:"Cidade da loja",disabled:!!(i!=null&&i.cidade),style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),E==="entrega"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{value:C.cep,onChange:e=>I(a=>({...a,cep:e.target.value})),onBlur:Wr,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:C.endereco,onChange:e=>I(a=>({...a,endereco:e.target.value})),placeholder:"Rua / Avenida",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:C.numero,onChange:e=>I(a=>({...a,numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:C.complemento,onChange:e=>I(a=>({...a,complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("input",{value:C.bairro,onChange:e=>I(a=>({...a,bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8},children:[r.jsx("input",{value:C.cidade||(i==null?void 0:i.cidade)||"",onChange:e=>I(a=>({...a,cidade:e.target.value})),placeholder:"Cidade",disabled:!!(i!=null&&i.cidade),style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),r.jsx("input",{value:C.estado||(i==null?void 0:i.uf)||"",onChange:e=>I(a=>({...a,estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]})]}),r.jsx("button",{className:"btn-secondary",type:"submit",children:"Calcular resumo"})]}),w&&r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:10},children:[r.jsxs("div",{children:["Itens: ",w.itens_count]}),r.jsxs("div",{children:["Subtotal: ",S(w.subtotal)]}),r.jsxs("div",{children:["Frete: ",S((ur=w==null?void 0:w.frete)==null?void 0:ur.valor_frete)]}),r.jsxs("div",{children:["Desconto: ",S((fr=w==null?void 0:w.cupom)==null?void 0:fr.desconto)]}),r.jsxs("div",{style:{fontWeight:700},children:["Total: ",S(w.total)]})]}),r.jsx("button",{className:"btn-primary",onClick:Mr,disabled:Ee||!(i!=null&&i.cidade||P)||!((hr=p==null?void 0:p.itens)!=null&&hr.length)||!ee,children:Ee?"Finalizando...":"Finalizar pedido"}),!ee&&r.jsx("div",{style:{fontSize:12,color:"#b45309"},children:"Complete cadastro (nome completo, telefone, CPF e endere√ßo) na aba Conta para finalizar."}),(L==null?void 0:L.pedido_id)&&r.jsxs("div",{style:{background:"#e8fff0",color:"#0a7d32",padding:10,borderRadius:6,display:"grid",gap:6},children:[r.jsxs("div",{children:["Pedido confirmado: ",r.jsx("strong",{children:L.pedido_id})]}),L.palavra_chave_retirada&&r.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:8,padding:12,color:"#7c2d12",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:4},children:"üîë SENHA DE RETIRADA"}),r.jsx("div",{style:{fontSize:22,fontWeight:700,letterSpacing:2,color:"#ea580c"},children:L.palavra_chave_retirada}),r.jsx("div",{style:{fontSize:11,marginTop:6,color:"#92400e"},children:"Compartilhe esta senha com a pessoa que vai retirar o pedido na loja."})]})]})]}),g==="pedidos"&&r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Meus pedidos"}),pe?r.jsx("div",{style:{color:"#666"},children:"Carregando pedidos..."}):De.length===0?r.jsx("div",{style:{color:"#666"},children:"Nenhum pedido encontrado para esta conta."}):r.jsx("div",{style:{display:"grid",gap:10},children:De.map(e=>r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:12,display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:700},children:e.pedido_id}),r.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Origem: ",e.origem||"-"]})]}),r.jsx("div",{style:{fontWeight:700},children:S(e.total)})]}),r.jsxs("div",{style:{fontSize:13},children:["Status do pedido: ",r.jsx("strong",{children:e.status||"-"})]}),r.jsxs("div",{style:{fontSize:13},children:["Data da compra: ",r.jsx("strong",{children:yr(e.data_compra)})]}),r.jsxs("div",{style:{fontSize:13},children:["Data do pagamento: ",r.jsx("strong",{children:e.data_pagamento?yr(e.data_pagamento):"Aguardando pagamento"})]}),e.palavra_chave_retirada&&r.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:8,padding:12,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#7c2d12",marginBottom:4},children:"üîë SENHA DE RETIRADA"}),r.jsx("div",{style:{fontSize:20,fontWeight:700,letterSpacing:2,color:"#ea580c"},children:e.palavra_chave_retirada}),r.jsx("div",{style:{fontSize:11,color:"#92400e",marginTop:4},children:"Apresente esta senha na loja para retirar o pedido"})]}),r.jsxs("div",{style:{fontSize:13,fontWeight:700,marginTop:2},children:["Produtos do pedido (",e.itens_count||0,")"]}),Array.isArray(e.itens)&&e.itens.length>0?r.jsx("div",{style:{display:"grid",gap:6},children:e.itens.map((a,t)=>r.jsxs("div",{style:{border:"1px solid #f1f5f9",borderRadius:6,padding:8},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600},children:a.nome||"Produto"}),r.jsxs("div",{style:{fontSize:12,color:"#475569"},children:[a.quantidade," x ",S(a.preco_unitario)," = ",S(a.subtotal)]})]},`${e.pedido_id}-${a.produto_id||t}`))}):r.jsx("div",{style:{fontSize:12,color:"#666"},children:"Sem itens detalhados para este pedido."})]},e.pedido_id))}),r.jsx("button",{className:"btn-secondary",onClick:me,style:{marginTop:10},disabled:pe,children:pe?"Atualizando...":"Atualizar pedidos"})]}),g==="conta"&&r.jsx(r.Fragment,{children:j?r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,display:"grid",gap:10},children:[r.jsx("h3",{style:{marginTop:0,marginBottom:0},children:"Meus dados cadastrais"}),r.jsx("div",{style:{fontSize:13,color:"#64748b"},children:"Esses dados ficam vinculados √† sua conta e ser√£o usados no pedido e no PDV."}),r.jsxs("form",{onSubmit:Er,style:{display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:h.nome,onChange:e=>b(a=>({...a,nome:e.target.value})),placeholder:"Nome completo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:(n==null?void 0:n.email)||"",disabled:!0,placeholder:"Email",style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:"#f8fafc"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:h.telefone,onChange:e=>b(a=>({...a,telefone:e.target.value})),placeholder:"Telefone",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.cpf,onChange:e=>b(a=>({...a,cpf:e.target.value})),placeholder:"CPF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("input",{value:h.cep,onChange:e=>b(a=>({...a,cep:e.target.value})),onBlur:Tr,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.endereco,onChange:e=>b(a=>({...a,endereco:e.target.value})),placeholder:"Endere√ßo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:8},children:[r.jsx("input",{value:h.numero,onChange:e=>b(a=>({...a,numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.complemento,onChange:e=>b(a=>({...a,complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 120px",gap:8},children:[r.jsx("input",{value:h.bairro,onChange:e=>b(a=>({...a,bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.cidade,onChange:e=>b(a=>({...a,cidade:e.target.value})),placeholder:"Cidade",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.estado,onChange:e=>b(a=>({...a,estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>b(e=>({...e,usar_endereco_entrega_diferente:!e.usar_endereco_entrega_diferente})),style:{justifySelf:"start"},children:h.usar_endereco_entrega_diferente?"Remover endere√ßo de entrega diferente":"Usar endere√ßo de entrega diferente"}),h.usar_endereco_entrega_diferente&&r.jsxs("div",{style:{display:"grid",gap:8,border:"1px solid #e5e7eb",borderRadius:8,padding:10,background:"#f8fafc"},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#334155"},children:"Endere√ßo de entrega (dados complementares)"}),r.jsx("input",{value:h.entrega_nome,onChange:e=>b(a=>({...a,entrega_nome:e.target.value})),placeholder:"Nome completo para entrega",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_cep,onChange:e=>b(a=>({...a,entrega_cep:e.target.value})),onBlur:Br,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_endereco,onChange:e=>b(a=>({...a,entrega_endereco:e.target.value})),placeholder:"Rua / Avenida",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:8},children:[r.jsx("input",{value:h.entrega_numero,onChange:e=>b(a=>({...a,entrega_numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_complemento,onChange:e=>b(a=>({...a,entrega_complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 120px",gap:8},children:[r.jsx("input",{value:h.entrega_bairro,onChange:e=>b(a=>({...a,entrega_bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_cidade,onChange:e=>b(a=>({...a,entrega_cidade:e.target.value})),placeholder:"Cidade",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_estado,onChange:e=>b(a=>({...a,entrega_estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx("button",{className:"btn-primary",type:"submit",disabled:We,children:We?"Salvando...":"Salvar cadastro"}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:Lr,children:"Sair"})]})]}),r.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Lista de desejos: ",$.length," item(ns) ‚Ä¢ Avise-me: ",ue.length," solicita√ß√£o(√µes)"]})]}):r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Cadastro"}),r.jsxs("form",{onSubmit:Fr,autoComplete:"off",style:{display:"grid",gap:8},children:[r.jsx("input",{name:"ecommerce_register_nome",autoComplete:"off",value:U.nome,onChange:e=>V(a=>({...a,nome:e.target.value})),placeholder:"Nome completo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{name:"ecommerce_register_email",autoComplete:"off",value:U.email,onChange:e=>V(a=>({...a,email:e.target.value})),placeholder:"Email",type:"email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8},children:[r.jsx("input",{name:"ecommerce_register_password",autoComplete:"new-password",value:U.password,onChange:e=>V(a=>({...a,password:e.target.value})),placeholder:"Senha",type:Ae?"text":"password",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>_r(e=>!e),children:Ae?"Ocultar":"üëÅ Mostrar"})]}),r.jsx("button",{className:"btn-primary",type:"submit",disabled:Ie,children:"Cadastrar"})]})]}),r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Login"}),r.jsxs("form",{onSubmit:Pr,autoComplete:"off",style:{display:"grid",gap:8},children:[r.jsx("input",{name:"ecommerce_login_email",autoComplete:"off",value:Q.email,onChange:e=>de(a=>({...a,email:e.target.value})),placeholder:"Email",type:"email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8},children:[r.jsx("input",{name:"ecommerce_login_password",autoComplete:"new-password",value:Q.password,onChange:e=>de(a=>({...a,password:e.target.value})),placeholder:"Senha",type:Ne?"text":"password",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>Cr(e=>!e),children:Ne?"Ocultar":"üëÅ Mostrar"})]}),r.jsx("button",{className:"btn-primary",type:"submit",disabled:Ie,children:"Entrar"})]})]})]})})]})}export{Zr as default};
