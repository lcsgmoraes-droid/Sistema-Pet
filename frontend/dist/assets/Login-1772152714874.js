import{r as a,S as v,j as e,P as w,T as S,U as E,V as P,W as C,Y as k,E as L}from"./vendor-react-1772152714874.js";import{u as F}from"./index-1772152714874.js";const q=()=>{const[i,b]=a.useState(""),[c,f]=a.useState(""),[d,l]=a.useState(""),[n,j]=a.useState(!1),[u,m]=a.useState(!1),{login:y}=F(),t=v(),N=async s=>{var p,x;s.preventDefault(),l(""),m(!0);try{const r=await y(i,c);if(r.success){const g=localStorage.getItem("user");if(g){const h=JSON.parse(g),o=(x=(p=h.role)==null?void 0:p.name)==null?void 0:x.toLowerCase();console.log("ðŸ‘¤ Role do usuÃ¡rio:",o),console.log("ðŸ‘¤ PermissÃµes:",h.permissions),o==="caixa"?(console.log("ðŸŽ¯ UsuÃ¡rio caixa - Navegando para /pdv"),t("/pdv")):o==="admin"||o==="gerente"?(console.log("ðŸŽ¯ UsuÃ¡rio gerencial - Navegando para /dashboard"),t("/dashboard")):(console.log("ðŸŽ¯ Redirecionando para /lembretes"),t("/lembretes"))}else t("/lembretes")}else console.error("âŒ Login falhou:",r.error),l(r.error||"Erro desconhecido ao fazer login")}catch(r){console.error("âŒ Erro inesperado:",r),l("Erro inesperado ao fazer login")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(w,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pet Shop Pro"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de GestÃ£o Completo"})]}),d&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(S,{className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:d})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:i,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:n?"text":"password",value:c,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),"              ",e.jsx("button",{type:"button",onClick:()=>j(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:n?e.jsx(C,{}):e.jsx(k,{})}),"            "]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Entrando...":"Entrar"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["NÃ£o tem uma conta?"," ",e.jsx(L,{to:"/register",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Criar conta"})]})})]})})};export{q as default};
