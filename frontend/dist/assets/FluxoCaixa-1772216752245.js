import{r as c,j as e,bc as O,aG as q,aS as K,aF as T,aA as U,aj as M,aK as H,ak as J,an as Q,X as W,S as Z,am as G,bj as ee,R as ae,b3 as te}from"./vendor-react-1772216752245.js";import{a as D}from"./index-1772216752245.js";import{s as E}from"./safeArray-1772216752245.js";const se=()=>{const[C,F]=c.useState([]),[i,$]=c.useState(!0),[p,_]=c.useState(30),[L,B]=c.useState({media:0,desvio:0});c.useEffect(()=>{z()},[p]);const z=async()=>{$(!0);try{const s=await I();F(s)}catch(s){console.error("Erro ao carregar projeÃ§Ãµes:",s)}finally{$(!1)}},I=async()=>{const s=new Date,b=new Date;b.setDate(b.getDate()-90);try{const t=(await D.get("/financeiro/movimentacoes",{params:{data_inicio:b.toISOString().split("T")[0],data_fim:s.toISOString().split("T")[0]}})).data,r=x(t,"entrada"),n=x(t,"saida"),v=await P(),u=[];let N=v;for(let j=1;j<=p;j++){const m=new Date;m.setDate(m.getDate()+j);const w=r*(.8+Math.random()*.4),d=n*(.8+Math.random()*.4),S=w,a=d;N=N+S-a;const o=Math.max(95-j*1.5,50);u.push({data:m.toISOString().split("T")[0],dataFormatada:m.toLocaleDateString("pt-BR"),entradasProjetadas:S,saidasProjetadas:a,saldoProjetado:N,nivelConfianca:o,diaSemana:m.toLocaleDateString("pt-BR",{weekday:"short"}),alerta:N<1e3?"crÃ­tico":N<5e3?"atenÃ§Ã£o":null})}return u}catch(y){return console.error("Erro ao gerar projeÃ§Ãµes:",y),[]}},x=(s,b)=>{const y=s.filter(r=>r.tipo===b);return y.length===0?0:y.reduce((r,n)=>r+n.valor,0)/90},P=async()=>{try{return(await D.get("/financeiro/saldo-atual")).data.saldo||1e4}catch(s){return console.error("Erro ao buscar saldo:",s),1e4}},g=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),R=s=>s==="crÃ­tico"?"bg-red-100 border-red-300 text-red-800":s==="atenÃ§Ã£o"?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-green-50 border-green-200",f=()=>{var b,y,t;const s=[];for(let r=0;r<C.length;r+=7){const n=C.slice(r,r+7),v=n.reduce((j,m)=>j+m.entradasProjetadas,0),u=n.reduce((j,m)=>j+m.saidasProjetadas,0),N=((b=n[n.length-1])==null?void 0:b.saldoProjetado)||0;s.push({numero:Math.floor(r/7)+1,dataInicio:(y=n[0])==null?void 0:y.dataFormatada,dataFim:(t=n[n.length-1])==null?void 0:t.dataFormatada,entradas:v,saidas:u,saldo:u-v,saldoFinal:N})}return s};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Calculando projeÃ§Ãµes..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6"}),"ProjeÃ§Ãµes de Fluxo de Caixa"]}),e.jsx("p",{className:"text-purple-100 mt-1",children:"PrevisÃµes baseadas em padrÃµes histÃ³ricos e tendÃªncias"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(15),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===15?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"15 dias"}),e.jsx("button",{onClick:()=>_(30),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===30?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"30 dias"}),e.jsx("button",{onClick:()=>_(60),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===60?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"60 dias"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-indigo-600"}),"Resumo Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f().map(s=>e.jsxs("div",{className:`border rounded-lg p-4 ${s.saldoFinal<5e3?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"text-sm font-medium text-gray-600 mb-2",children:["Semana ",s.numero]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[s.dataInicio," - ",s.dataFim]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Entradas:"}),e.jsx("span",{className:"font-medium",children:g(s.entradas)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-red-600",children:"SaÃ­das:"}),e.jsx("span",{className:"font-medium",children:g(s.saidas)})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[e.jsx("span",{children:"Saldo Final:"}),e.jsx("span",{className:s.saldoFinal<5e3?"text-yellow-600":"text-gray-800",children:g(s.saldoFinal)})]})]})]},s.numero))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),"ProjeÃ§Ãµes DiÃ¡rias Detalhadas"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Data"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Dia"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Entradas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"SaÃ­das"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Saldo Projetado"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"ConfianÃ§a"})]})}),e.jsx("tbody",{children:C.map((s,b)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${s.alerta?R(s.alerta):""}`,children:[e.jsx("td",{className:"py-3 px-4 text-sm",children:s.dataFormatada}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:s.diaSemana}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-green-600 font-medium",children:g(s.entradasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-red-600 font-medium",children:g(s.saidasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right font-semibold",children:g(s.saldoProjetado)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.nivelConfianca>=80?"bg-green-100 text-green-800":s.nivelConfianca>=65?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:[s.nivelConfianca.toFixed(0),"%"]})})]},b))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Sobre as ProjeÃ§Ãµes"}),e.jsx("p",{children:"As projeÃ§Ãµes sÃ£o calculadas com base em padrÃµes histÃ³ricos dos Ãºltimos 90 dias. O nÃ­vel de confianÃ§a diminui com o tempo, pois eventos futuros podem alterar as tendÃªncias."})]})]})]})},re=()=>{const[C,F]=c.useState([]),[i,$]=c.useState(!0),[p,_]=c.useState("todos");c.useEffect(()=>{L()},[]);const L=async()=>{$(!0);try{const t=await B();F(t)}catch(t){console.error("Erro ao carregar alertas:",t)}finally{$(!1)}},B=async()=>{const t=[],r=new Date;try{const n=await z();n<1e3?t.push({id:"saldo-critico",tipo:"saldo",severidade:"crÃ­tico",titulo:"Saldo CrÃ­tico",mensagem:`Seu saldo estÃ¡ abaixo de R$ 1.000,00. Saldo atual: ${f(n)}`,recomendacao:"Considere adiar pagamentos nÃ£o essenciais ou antecipar recebimentos.",icone:M,data:r.toISOString()}):n<5e3&&t.push({id:"saldo-atencao",tipo:"saldo",severidade:"atenÃ§Ã£o",titulo:"Saldo Baixo",mensagem:`Seu saldo estÃ¡ em nÃ­vel de atenÃ§Ã£o: ${f(n)}`,recomendacao:"Monitore suas despesas e prepare-se para possÃ­veis necessidades de caixa.",icone:U,data:r.toISOString()});const v=await I(7);if(v.length>0){const w=v.reduce((d,S)=>d+S.valor,0);t.push({id:"vencimentos-proximos",tipo:"vencimento",severidade:"atenÃ§Ã£o",titulo:`${v.length} Pagamentos Vencendo`,mensagem:`VocÃª tem ${v.length} pagamentos vencendo nos prÃ³ximos 7 dias, totalizando ${f(w)}`,recomendacao:"Verifique se hÃ¡ saldo suficiente para cobrir estes pagamentos.",icone:K,data:r.toISOString(),detalhes:v})}const u=await x();if(u.length>0){const w=u.reduce((d,S)=>d+S.valor,0);t.push({id:"vencimentos-atrasados",tipo:"atraso",severidade:"crÃ­tico",titulo:`${u.length} Pagamentos Atrasados`,mensagem:`VocÃª tem ${u.length} pagamentos em atraso, totalizando ${f(w)}`,recomendacao:"Priorize a quitaÃ§Ã£o destes dÃ©bitos para evitar juros e multas.",icone:M,data:r.toISOString(),detalhes:u})}const N=await P();N.variacao>30&&t.push({id:"gastos-anormais",tipo:"anomalia",severidade:"atenÃ§Ã£o",titulo:"Gastos Acima do Normal",mensagem:`Suas despesas aumentaram ${N.variacao.toFixed(0)}% em relaÃ§Ã£o Ã  mÃ©dia histÃ³rica`,recomendacao:"Revise seus gastos recentes e identifique possÃ­veis despesas extraordinÃ¡rias.",icone:q,data:r.toISOString(),detalhes:N});const j=await g();j.length>0&&t.push({id:"recorrencias-pendentes",tipo:"recorrencia",severidade:"info",titulo:"Despesas Recorrentes PrÃ³ximas",mensagem:`${j.length} despesas recorrentes vencerÃ£o em breve`,recomendacao:"Certifique-se de que hÃ¡ saldo para cobrir estas despesas automÃ¡ticas.",icone:H,data:r.toISOString(),detalhes:j});const m=await R(15);return m.diasAteNegativo>0&&t.push({id:"projecao-negativa",tipo:"projecao",severidade:"crÃ­tico",titulo:"Risco de Saldo Negativo",mensagem:`Com o padrÃ£o atual, seu saldo pode ficar negativo em ${m.diasAteNegativo} dias`,recomendacao:"Tome medidas urgentes para aumentar receitas ou reduzir despesas.",icone:J,data:r.toISOString(),detalhes:m}),t.sort((w,d)=>{const S={crÃ­tico:0,atenÃ§Ã£o:1,info:2};return S[w.severidade]-S[d.severidade]})}catch(n){return console.error("Erro ao gerar alertas:",n),[]}},z=async()=>{try{return(await D.get("/financeiro/saldo-atual")).data.saldo||1e4}catch{return 1e4}},I=async t=>{try{const r=new Date,n=new Date;return n.setDate(n.getDate()+t),(await D.get("/financeiro/contas-pagar",{params:{data_inicio:r.toISOString().split("T")[0],data_fim:n.toISOString().split("T")[0],status:"pendente"}})).data||[]}catch{return[]}},x=async()=>{try{return(await D.get("/financeiro/contas-pagar",{params:{atrasadas:!0}})).data||[]}catch{return[]}},P=async()=>{try{const t=new Date,r=new Date;return r.setDate(r.getDate()-30),(await D.get("/financeiro/analise-gastos",{params:{data_inicio:r.toISOString().split("T")[0],data_fim:t.toISOString().split("T")[0]}})).data||{variacao:0}}catch{return{variacao:0}}},g=async()=>{try{return(await D.get("/financeiro/recorrencias-proximas")).data||[]}catch{return[]}},R=async t=>{try{return(await D.get("/ia/fluxo/projecao-saldo",{params:{dias:t}})).data||{diasAteNegativo:0}}catch{return{diasAteNegativo:0}}},f=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),s=t=>{F(C.filter(r=>r.id!==t))},b=t=>{switch(t){case"crÃ­tico":return{bg:"bg-red-50",border:"border-red-300",text:"text-red-800",badge:"bg-red-100 text-red-800"};case"atenÃ§Ã£o":return{bg:"bg-yellow-50",border:"border-yellow-300",text:"text-yellow-800",badge:"bg-yellow-100 text-yellow-800"};case"info":return{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-800",badge:"bg-blue-100 text-blue-800"};default:return{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-800",badge:"bg-gray-100 text-gray-800"}}},y=C.filter(t=>p==="todos"?!0:t.severidade===p);return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Analisando alertas..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6"}),"Alertas Inteligentes"]}),e.jsx("p",{className:"text-orange-100 mt-1",children:"Avisos automÃ¡ticos sobre situaÃ§Ãµes que requerem atenÃ§Ã£o"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>_("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p==="todos"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["Todos (",C.length,")"]}),e.jsxs("button",{onClick:()=>_("crÃ­tico"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p==="crÃ­tico"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["CrÃ­ticos (",C.filter(t=>t.severidade==="crÃ­tico").length,")"]})]})]})}),y.length===0?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Tudo em ordem!"}),e.jsx("p",{className:"text-green-700",children:"NÃ£o hÃ¡ alertas no momento. Seu fluxo de caixa estÃ¡ saudÃ¡vel."})]}):e.jsx("div",{className:"space-y-4",children:y.map(t=>{const r=b(t.severidade),n=t.icone;return e.jsx("div",{className:`${r.bg} border ${r.border} rounded-lg p-5 transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`${r.text} mt-1`,children:e.jsx(n,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:`font-semibold ${r.text}`,children:t.titulo}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.badge}`,children:t.severidade})]}),e.jsx("p",{className:`text-sm mb-3 ${r.text}`,children:t.mensagem}),e.jsxs("div",{className:"bg-white bg-opacity-50 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"ðŸ’¡ RecomendaÃ§Ã£o:"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.recomendacao})]}),t.detalhes&&e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 hover:text-gray-900",children:"Ver detalhes"}),e.jsx("div",{className:"mt-2 pl-4 border-l-2 border-gray-300",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(t.detalhes,null,2)})})]})]})]}),e.jsx("button",{onClick:()=>s(t.id),className:"ml-4 text-gray-400 hover:text-gray-600 transition-colors",title:"Marcar como resolvido",children:e.jsx(W,{className:"w-5 h-5"})})]})},t.id)})})]})},le=()=>{Z();const[C,F]=c.useState(!1),[i,$]=c.useState(null),[p,_]=c.useState("movimentacoes"),[L,B]=c.useState(!1),z=()=>{const a=new Date,o=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),h=String(a.getDate()).padStart(2,"0");return`${o}-${l}-${h}`},I=()=>{const a=new Date,o=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0");return`${o}-${l}-01`},[x,P]=c.useState({data_inicio:I(),data_fim:z(),conta_bancaria_id:null,agrupamento:"dia"}),[g,R]=c.useState("todos"),[f,s]=c.useState("todos"),[b,y]=c.useState([]),[t,r]=c.useState(null),[n,v]=c.useState(!1),[u,N]=c.useState("");c.useEffect(()=>{j(),m()},[]);const j=async()=>{try{const a=await D.get("/contas-bancarias");y(a.data)}catch(a){console.error("Erro ao carregar contas bancÃ¡rias:",a)}},m=async()=>{var a,o;F(!0);try{const l=new URLSearchParams({data_inicio:x.data_inicio,data_fim:x.data_fim,agrupamento:x.agrupamento});x.conta_bancaria_id&&l.append("conta_bancaria_id",x.conta_bancaria_id),u&&l.append("numero_venda",u);const h=await D.get(`/financeiro/fluxo-caixa?${l}`);$(h.data)}catch(l){console.error("Erro ao carregar fluxo de caixa:",l),alert("Erro ao carregar fluxo de caixa: "+(((o=(a=l.response)==null?void 0:a.data)==null?void 0:o.detail)||l.message))}finally{F(!1)}},w=a=>{const o=new Date;let l,h;switch(a){case"7dias":l=new Date(o.setDate(o.getDate()-7)),h=new Date;break;case"30dias":l=new Date(o.setDate(o.getDate()-30)),h=new Date;break;case"mes_atual":l=new Date(o.getFullYear(),o.getMonth(),1),h=new Date(o.getFullYear(),o.getMonth()+1,0);break;case"proximo_mes":l=new Date(o.getFullYear(),o.getMonth()+1,1),h=new Date(o.getFullYear(),o.getMonth()+2,0);break;default:return}const k={...x,data_inicio:l.toISOString().split("T")[0],data_fim:h.toISOString().split("T")[0]};P(k),setTimeout(()=>m(),100)},d=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a||0),S=a=>i?i.movimentacoes.filter(o=>{const l=new Date(o.data),h=new Date(a.data_inicio),k=new Date(a.data_fim);if(!(l>=h&&l<=k)||g==="entradas"&&o.tipo!=="credito"||g==="saidas"&&o.tipo!=="debito"||f==="realizado"&&o.status!=="realizado"||f==="previsto"&&o.status!=="previsto")return!1;if(u){const V=o.descricao||"",X=o.numero_venda||"",Y=u.toLowerCase();return X.toLowerCase().includes(Y)||V.toLowerCase().includes(Y)}return!0}):[];return C&&!i?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando fluxo de caixa..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ðŸ’¹ Fluxo de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"VisÃ£o completa: Previsto vs Realizado"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"âœ¨ Os lanÃ§amentos sÃ£o criados automaticamente a partir de Contas a Pagar e Contas a Receber"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ðŸ”¢ Buscar por NÃºmero da Venda"}),e.jsx("input",{type:"text",placeholder:"Digite o nÃºmero da venda (ex: 202601100007) e pressione Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:u,onChange:a=>N(a.target.value),onKeyPress:a=>{a.key==="Enter"&&m()}})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VisualizaÃ§Ã£o"}),e.jsxs("select",{value:x.agrupamento,onChange:a=>P({...x,agrupamento:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"dia",children:"ðŸ“… DiÃ¡rio"}),e.jsx("option",{value:"semana",children:"ðŸ“Š Semanal"}),e.jsx("option",{value:"mes",children:"ðŸ“ˆ Mensal"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de MovimentaÃ§Ã£o"}),e.jsxs("select",{value:g,onChange:a=>R(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:"ðŸ“Š Todas"}),e.jsx("option",{value:"entradas",children:"ðŸ’° Apenas Entradas"}),e.jsx("option",{value:"saidas",children:"ðŸ’¸ Apenas SaÃ­das"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:f,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:"ðŸ“‹ Todos"}),e.jsx("option",{value:"realizado",children:"âœ… Apenas Realizados"}),e.jsx("option",{value:"previsto",children:"ðŸ“… Apenas Previstos"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data InÃ­cio"}),e.jsx("input",{type:"date",value:x.data_inicio,onChange:a=>P({...x,data_inicio:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:x.data_fim,onChange:a=>P({...x,data_fim:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conta BancÃ¡ria"}),e.jsxs("select",{value:x.conta_bancaria_id||"",onChange:a=>P({...x,conta_bancaria_id:a.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Todas as Contas"}),E(b).map(a=>e.jsx("option",{value:a.id,children:a.nome},a.id))]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(G,{size:18}),"Atualizar"]})})]}),(g!=="todos"||f!=="todos")&&e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-blue-800 font-medium",children:"ðŸ” Filtros ativos:"}),g!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:g==="entradas"?"ðŸ’° Apenas Entradas":"ðŸ’¸ Apenas SaÃ­das"}),f!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:f==="realizado"?"âœ… Apenas Realizados":"ðŸ“… Apenas Previstos"})]}),e.jsx("button",{onClick:()=>{R("todos"),s("todos")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Limpar filtros"})]}),e.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap items-center",children:[e.jsx("button",{onClick:()=>w("7dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Ãšltimos 7 dias"}),e.jsx("button",{onClick:()=>w("30dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Ãšltimos 30 dias"}),e.jsx("button",{onClick:()=>w("mes_atual"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"MÃªs Atual"}),e.jsx("button",{onClick:()=>w("proximo_mes"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"PrÃ³ximo MÃªs"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 bg-blue-50 px-3 py-2 rounded border border-blue-200",children:[e.jsx("input",{type:"checkbox",id:"apenasComLancamentos",checked:n,onChange:a=>v(a.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"apenasComLancamentos",className:"text-sm font-medium text-blue-700 cursor-pointer",children:"ðŸ“Š Apenas dias com lanÃ§amentos"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>_("movimentacoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${p==="movimentacoes"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(T,{className:"w-5 h-5"}),"MovimentaÃ§Ãµes"]}),e.jsxs("button",{onClick:()=>_("projecoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${p==="projecoes"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(ee,{className:"w-5 h-5"}),"ProjeÃ§Ãµes IA",e.jsx(O,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>_("alertas"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${p==="alertas"?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(M,{className:"w-5 h-5"}),"Alertas IA",e.jsx(O,{className:"w-4 h-4"})]})]})})}),p==="projecoes"&&e.jsx(se,{}),p==="alertas"&&e.jsx(re,{}),p==="movimentacoes"&&i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Saldo Inicial"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:d(i.saldo_inicial)})]}),e.jsx(T,{className:"text-blue-500",size:32})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Realizado (Entradas)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:d(i.total_realizado_entradas)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Previsto: ",d(i.total_previsto_entradas)]})]}),e.jsx(q,{className:"text-green-500",size:32})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Realizado (SaÃ­das)"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:d(i.total_realizado_saidas)}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Previsto: ",d(i.total_previsto_saidas)]})]}),e.jsx(J,{className:"text-red-500",size:32})]})}),e.jsx("div",{className:`rounded-lg p-4 border-l-4 ${i.saldo_final>=0?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:i.saldo_final>=0?"#2563eb":"#dc2626"},children:"Saldo Final Realizado"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:i.saldo_final>=0?"#1d4ed8":"#b91c1c"},children:d(i.saldo_final)}),e.jsxs("p",{className:"text-xs mt-1",style:{color:i.saldo_final>=0?"#2563eb":"#dc2626"},children:["Previsto: ",d(i.saldo_previsto_final)]})]}),e.jsx(T,{className:i.saldo_final>=0?"text-blue-500":"text-red-500",size:32})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxs("thead",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PerÃ­odo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",colSpan:"2",children:"ðŸ’° Entradas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-red-50",colSpan:"2",children:"ðŸ’¸ SaÃ­das"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"ðŸ’µ Saldo Final"}),e.jsx("th",{className:"px-6 py-3"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-6 py-2"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-blue-50",children:"Real / Previsto"}),e.jsx("th",{className:"px-4 py-2"})]})]}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E(i==null?void 0:i.periodos).length>0?E(i==null?void 0:i.periodos).filter(a=>n?a.realizado_entradas>0||a.realizado_saidas>0||a.previsto_entradas>0||a.previsto_saidas>0:!0).map((a,o)=>{const l=S(a),h=a.data,k=t===h;return e.jsxs(ae.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.data}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-green-50",children:d(a.previsto_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-green-700 text-right bg-green-100",children:d(a.realizado_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-red-50",children:d(a.previsto_saidas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-red-700 text-right bg-red-100",children:d(a.realizado_saidas)}),e.jsxs("td",{className:"px-4 py-4 text-sm text-center bg-blue-50",children:[e.jsx("div",{className:`font-bold ${a.realizado_saldo>=0?"text-green-700":"text-red-700"}`,children:d(a.realizado_saldo)}),e.jsxs("div",{className:`text-xs ${a.previsto_saldo>=0?"text-green-600":"text-red-600"}`,children:["Prev: ",d(a.previsto_saldo)]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>r(k?null:h),className:"text-blue-600 hover:text-blue-800",children:e.jsx(te,{size:20,className:`transform transition-transform ${k?"rotate-90":""}`})})})]}),k&&l.length>0&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:"ðŸ“‹ MovimentaÃ§Ãµes Detalhadas"}),E(l).map((A,V)=>e.jsxs("div",{className:`flex justify-between items-center p-2 rounded ${A.status==="previsto"?"bg-yellow-50 border-l-2 border-yellow-400":"bg-white border-l-2 border-blue-400"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:A.descricao}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",A.categoria,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${A.status==="previsto"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:A.status==="previsto"?"ðŸ“… Previsto":"âœ… Realizado"}),e.jsxs("span",{className:`font-bold ${A.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:[A.tipo==="entrada"?"+":"-"," ",d(A.valor)]})]})]},V))]})})})]},h)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma movimentaÃ§Ã£o encontrada para o perÃ­odo selecionado"})})})]})})})]})]})};export{le as default};
