import{r as i,z as m,j as e,bh as $,a$ as A,X as P,b1 as S,be as D,az as F,b3 as _}from"./vendor-react-1772152836727.js";import{a as g}from"./index-1772152836727.js";function O(){const[a,f]=i.useState("linhas"),[N,y]=i.useState({}),[w,b]=i.useState(!1),[d,v]=i.useState(null),[o,n]=i.useState({nome:"",descricao:"",ordem:0,ativo:!0}),[r,c]=i.useState({peso_kg:0,descricao:"",ordem:0,ativo:!0}),j=[{id:"linhas",nome:"Linhas de Ra√ß√£o",endpoint:"/opcoes-racao/linhas",icon:"üì¶"},{id:"portes",nome:"Portes",endpoint:"/opcoes-racao/portes",icon:"üêï"},{id:"fases",nome:"Fases/P√∫blico",endpoint:"/opcoes-racao/fases",icon:"üë∂"},{id:"tratamentos",nome:"Tratamentos",endpoint:"/opcoes-racao/tratamentos",icon:"üíä"},{id:"sabores",nome:"Sabores/Prote√≠nas",endpoint:"/opcoes-racao/sabores",icon:"üçñ"},{id:"apresentacoes",nome:"Apresenta√ß√µes (Peso)",endpoint:"/opcoes-racao/apresentacoes",icon:"‚öñÔ∏è"}],t=j.find(s=>s.id===a);i.useEffect(()=>{p()},[a]);const p=async()=>{b(!0);try{const s=await g.get(t.endpoint,{params:{apenas_ativos:!1}});y(l=>({...l,[a]:s.data}))}catch(s){console.error("Erro ao carregar dados:",s),m.error(`Erro ao carregar ${t.nome.toLowerCase()}`)}finally{b(!1)}},u=()=>{n({nome:"",descricao:"",ordem:0,ativo:!0}),c({peso_kg:0,descricao:"",ordem:0,ativo:!0}),v(null)},k=s=>{v(s.id),a==="apresentacoes"?c({peso_kg:s.peso_kg,descricao:s.descricao||"",ordem:s.ordem||0,ativo:s.ativo}):n({nome:s.nome,descricao:s.descricao||"",ordem:s.ordem||0,ativo:s.ativo})},C=async()=>{var s,l;try{const x=a==="apresentacoes"?r:o;d?(await g.put(`${t.endpoint}/${d}`,x),m.success("Atualizado com sucesso!")):(await g.post(t.endpoint,x),m.success("Criado com sucesso!")),u(),p()}catch(x){console.error("Erro ao salvar:",x),m.error(((l=(s=x.response)==null?void 0:s.data)==null?void 0:l.detail)||"Erro ao salvar")}},E=async s=>{if(confirm("Tem certeza que deseja inativar este item?"))try{await g.delete(`${t.endpoint}/${s}`),m.success("Inativado com sucesso!"),p()}catch(l){console.error("Erro ao deletar:",l),m.error("Erro ao inativar")}},h=N[a]||[];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($,{className:"w-8 h-8 text-indigo-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Op√ß√µes de Classifica√ß√£o de Ra√ß√µes"})]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie os valores dispon√≠veis para classifica√ß√£o de produtos de ra√ß√£o"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex overflow-x-auto",children:j.map(s=>e.jsxs("button",{onClick:()=>{f(s.id),u()},className:`
                  flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap
                  ${a===s.id?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx("span",{className:"text-xl",children:s.icon}),s.nome]},s.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:d?"Editar":"Adicionar Novo"}),a==="apresentacoes"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg) *"}),e.jsx("input",{type:"number",step:"0.001",value:r.peso_kg,onChange:s=>c({...r,peso_kg:parseFloat(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri√ß√£o"}),e.jsx("input",{type:"text",value:r.descricao,onChange:s=>c({...r,descricao:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:r.ordem,onChange:s=>c({...r,ordem:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo-peso",checked:r.ativo,onChange:s=>c({...r,ativo:s.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo-peso",className:"text-sm text-gray-700",children:"Ativo"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:o.nome,onChange:s=>n({...o,nome:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Ex: ${a==="linhas"?"Premium":a==="portes"?"Pequeno":"Filhote"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri√ß√£o"}),e.jsx("textarea",{value:o.descricao,onChange:s=>n({...o,descricao:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"2",placeholder:"Descri√ß√£o opcional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:o.ordem,onChange:s=>n({...o,ordem:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:o.ativo,onChange:s=>n({...o,ativo:s.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:C,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[e.jsx(A,{className:"w-4 h-4"}),d?"Atualizar":"Adicionar"]}),d&&e.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:e.jsx(P,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.nome," Cadastrados (",h.length,")"]}),w?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(S,{className:"w-16 h-16 mx-auto"})}),e.jsx("p",{className:"text-gray-600",children:"Nenhum item cadastrado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Use o formul√°rio ao lado para adicionar"})]}):e.jsx("div",{className:"space-y-2",children:h.map(s=>e.jsxs("div",{className:`
                        flex items-center justify-between p-4 border rounded-lg transition
                        ${d===s.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}
                        ${!s.ativo&&"opacity-50"}
                      `,children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:a==="apresentacoes"?`${s.peso_kg}kg${s.descricao?` - ${s.descricao}`:""}`:s.nome}),s.descricao&&a!=="apresentacoes"&&e.jsx("p",{className:"text-sm text-gray-500",children:s.descricao})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["Ordem: ",s.ordem]}),!s.ativo&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Inativo"}),e.jsx("button",{onClick:()=>k(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Editar",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Inativar",children:e.jsx(F,{className:"w-4 h-4"})})]})]},s.id))})]})})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Dica"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Os valores cadastrados aqui ser√£o usados no cadastro de produtos e na classifica√ß√£o autom√°tica por IA. Mantenha ativos apenas os valores que voc√™ utiliza no seu neg√≥cio."})]})]})})]})}export{O as default};
