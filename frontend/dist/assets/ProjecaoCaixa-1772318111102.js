import{r as o,z as b,j as e}from"./vendor-react-1772318111102.js";import{a as n}from"./index-1772318111102.js";function v(){const[l,x]=o.useState(3),[i,m]=o.useState([]),[a,p]=o.useState(null),[h,d]=o.useState(!1),g=["Janeiro","Fevereiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];o.useEffect(()=>{u()},[l]);const u=async()=>{d(!0);try{const[s,r]=await Promise.all([n.get(`/projecao-caixa/?meses_a_frente=${l}`),n.get(`/projecao-caixa/resumo?meses_a_frente=${l}`)]);s.data.sucesso&&m(s.data.projecao||[]),r.data.sucesso&&p(r.data.resumo||null)}catch(s){console.error("Erro ao buscar projeÃ§Ã£o:",s),b.error("Erro ao carregar projeÃ§Ã£o de caixa")}finally{d(!1)}},t=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),j=s=>{const r={POSITIVO:"bg-green-100 text-green-800",NEGATIVO:"bg-red-100 text-red-800",MISTO:"bg-yellow-100 text-yellow-800",NEUTRO:"bg-gray-100 text-gray-800"},c={POSITIVO:"ðŸ“ˆ Todos os meses positivos",NEGATIVO:"ðŸ“‰ Todos os meses negativos",MISTO:"âš ï¸ Meses positivos e negativos",NEUTRO:"âž– Sem dados"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${r[s]||r.NEUTRO}`,children:c[s]||c.NEUTRO})},N=s=>s>0?e.jsx("span",{className:"text-green-600 font-bold",children:t(s)}):s<0?e.jsx("span",{className:"text-red-600 font-bold",children:t(s)}):e.jsx("span",{className:"text-gray-600 font-bold",children:t(s)});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ðŸ’° ProjeÃ§Ã£o de Caixa"}),e.jsx("p",{className:"text-gray-600",children:"ProjeÃ§Ã£o futura baseada em histÃ³rico real + provisÃµes obrigatÃ³rias"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Projetar para:"}),e.jsxs("select",{value:l,onChange:s=>x(Number(s.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:3,children:"3 meses"}),e.jsx("option",{value:6,children:"6 meses"}),e.jsx("option",{value:12,children:"12 meses"})]})]})}),a&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"ðŸ“Š Resumo da ProjeÃ§Ã£o"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Receita Total Projetada"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(a.receita_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Despesas Totais Projetadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t(a.despesas_totais)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Saldo Total Projetado"}),e.jsx("p",{className:`text-2xl font-bold ${a.saldo_total>=0?"text-green-600":"text-red-600"}`,children:t(a.saldo_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Meses Positivos / Negativos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.jsx("span",{className:"text-green-600",children:a.meses_positivos})," / ",e.jsx("span",{className:"text-red-600",children:a.meses_negativos})]})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:j(a.tendencia)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"ðŸ“… ProjeÃ§Ã£o MÃªs a MÃªs"})}),h?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Calculando projeÃ§Ã£o..."})]}):i.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:"ðŸ“Š Sem dados suficientes"}),e.jsx("p",{className:"text-sm",children:"Ã‰ necessÃ¡rio ter pelo menos 3 meses de histÃ³rico para gerar projeÃ§Ãµes."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MÃªs"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receita Prevista"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imposto Simples"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Folha + Encargos"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas Totais"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo Previsto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[g[s.mes-1],"/",s.ano]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["+",s.mes_futuro," ",s.mes_futuro===1?"mÃªs":"meses"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-green-600 font-semibold",children:t(s.receita_prevista)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-orange-600",children:t(s.imposto_simples_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-blue-600",children:t(s.folha_encargos_previstos)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-red-600",children:t(s.despesas_previstas)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:N(s.saldo_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.saldo_positivo?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"âœ“ Positivo"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:"âš  Negativo"})})]},s.mes_futuro))})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:"ðŸ’¡ Como funciona a projeÃ§Ã£o:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"MÃ©dia de receitas dos Ãºltimos 3 meses (valores reais)"}),e.jsx("li",{children:"MÃ©dia de despesas fixas (custos + operacionais)"}),e.jsx("li",{children:"AlÃ­quota atual do Simples Nacional aplicada sobre receita projetada"}),e.jsx("li",{children:"Folha de pagamento + encargos (INSS + FGTS ~28%)"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sem chutes"})," â€“ Apenas dados reais + regras contÃ¡beis"]})]})]})]})}export{v as default};
