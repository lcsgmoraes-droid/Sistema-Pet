import{r as l,j as e}from"./vendor-react-1771779696627.js";import{a as P}from"./index-1771779696627.js";import"./vendor-utils-1771779696627.js";import"./vendor-icons-1771779696627.js";function B(){const[f,b]=l.useState(!0),[o,j]=l.useState("resumo"),[u,_]=l.useState(new Date().toISOString().split("T")[0]),[y,w]=l.useState(new Date().toISOString().split("T")[0]),[n,q]=l.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[c,T]=l.useState([]),[N,S]=l.useState([]),[h,V]=l.useState([]),[p,D]=l.useState([]),[g,C]=l.useState([]),[m,k]=l.useState([]),[A,R]=l.useState([]),E=()=>localStorage.getItem("access_token"),a=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),v=t=>new Date(t).toLocaleDateString("pt-BR"),L=async()=>{var r,i;b(!0);const s={headers:{Authorization:`Bearer ${E()}`},params:{data_inicio:u,data_fim:y}};try{const d=(await P.get("/vendas/relatorio",s)).data;q(d.resumo||{}),T(d.vendas_por_data||[]),S(d.formas_recebimento||[]),V(d.vendas_por_funcionario||[]),D(d.vendas_por_tipo||[]),C(d.vendas_por_grupo||[]),k(d.produtos_detalhados||[]),R(d.lista_vendas||[]),console.log("âœ… Dados carregados:",{vendasPorData:((r=d.vendas_por_data)==null?void 0:r.length)||0,formasRecebimento:((i=d.formas_recebimento)==null?void 0:i.length)||0})}catch(x){console.error("Erro ao carregar relatÃ³rio:",x)}finally{b(!1)}};return l.useEffect(()=>{L()},[u,y]),f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{style:{backgroundColor:"red",color:"white",padding:"20px",fontSize:"24px",fontWeight:"bold"},children:"ðŸ”´ TESTE: ARQUIVO ESTÃ SENDO CARREGADO CORRETAMENTE"}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:u,onChange:t=>_(t.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"self-center",children:"atÃ©"}),e.jsx("input",{type:"date",value:y,onChange:t=>w(t.target.value),className:"border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>j("resumo"),className:`px-4 py-2 font-medium ${o==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>j("produtos"),className:`px-4 py-2 font-medium ${o==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/serviÃ§o"}),e.jsx("button",{onClick:()=>j("lista"),className:`px-4 py-2 font-medium ${o==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"})]})]}),o==="resumo"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:a(n.venda_bruta)}),e.jsx("div",{className:"text-sm",children:"Venda bruta"})]}),e.jsxs("div",{className:"bg-gray-400 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:a(n.taxa_entrega)}),e.jsx("div",{className:"text-sm",children:"Taxa de entrega"})]}),e.jsxs("div",{className:"bg-yellow-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:a(n.desconto)}),e.jsxs("div",{className:"text-sm",children:[n.percentual_desconto,"% de desconto"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:a(n.venda_liquida)}),e.jsx("div",{className:"text-sm",children:"Venda LÃ­quida"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:a(n.em_aberto)}),e.jsx("div",{className:"text-sm",children:"Em aberto"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. MÃ©dio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[c.map((t,s)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:v(t.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.saldo_aberto)})]},s)),c.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:c.reduce((t,s)=>t+s.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(c.reduce((t,s)=>t+s.saldo_aberto,0))})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[N.map((t,s)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_total)})]},s)),N.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(N.reduce((t,s)=>t+s.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"FuncionÃ¡rio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[h.map((t,s)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_liquido)})]},s)),h.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:h.reduce((t,s)=>t+s.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(h.reduce((t,s)=>t+s.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(h.reduce((t,s)=>t+s.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(h.reduce((t,s)=>t+s.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[p.map((t,s)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_liquido)})]},s)),p.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.reduce((t,s)=>t+s.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(p.reduce((t,s)=>t+s.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(p.reduce((t,s)=>t+s.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(p.reduce((t,s)=>t+s.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[g.map((t,s)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.valor_liquido)})]},s)),g.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(g.reduce((t,s)=>t+s.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(g.reduce((t,s)=>t+s.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(g.reduce((t,s)=>t+s.valor_liquido,0))})]})]})]})]})]})]}),o==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/ServiÃ§os"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/ServiÃ§os"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"LÃ­quido"})]})}),e.jsxs("tbody",{children:[m.map((t,s)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold border-b-2 border-blue-300",children:[e.jsx("td",{className:"px-4 py-2",children:t.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.total_liquido)})]},`cat-${s}`),t.subcategorias&&t.subcategorias.map((r,i)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium border-b",children:[e.jsxs("td",{className:"px-4 py-2 pl-8",children:["ðŸ“ ",r.subcategoria]}),e.jsx("td",{className:"px-4 py-2 text-right",children:r.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(r.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(r.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(r.total_liquido)})]},`subcat-${s}-${i}`),r.produtos.map((x,d)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:x.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:x.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(x.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(x.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(x.valor_liquido)})]},`prod-${s}-${i}-${d}`))]})),t.produtos&&t.produtos.map((r,i)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:r.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:r.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(r.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(r.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:a(r.valor_liquido)})]},`prod-${s}-${i}`))]})),m.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:m.reduce((t,s)=>t+s.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(m.reduce((t,s)=>t+s.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(m.reduce((t,s)=>t+s.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:a(m.reduce((t,s)=>t+s.total_liquido,0))})]})]})]})})]}),o==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"CÃ³d."}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Data e hora"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Animal"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:A.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:t.numero_venda||t.id}),e.jsx("td",{className:"px-4 py-2",children:v(t.data_venda)}),e.jsx("td",{className:"px-4 py-2",children:t.cliente_nome}),e.jsx("td",{className:"px-4 py-2",children:t.pet_nome||"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:a(t.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="finalizada"?"bg-green-100 text-green-800":t.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="finalizada"?"Baixada":t.status==="baixa_parcial"?"Parcial":"Em aberto"})})]},t.id))})]})})]})]})}export{B as default};
