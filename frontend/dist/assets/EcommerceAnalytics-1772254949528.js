import{r,j as e}from"./vendor-react-1772254949528.js";import{a as f}from"./api-1772254949528.js";import"./index-1772254949528.js";function h(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(t||0))}function z(t){return t?new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(new Date(t)):"-"}const _={criado:{label:"Aguardando",color:"#f59e0b",bg:"#fef3c7"},aprovado:{label:"Aprovado",color:"#10b981",bg:"#d1fae5"},entregue:{label:"Entregue",color:"#6366f1",bg:"#e0e7ff"},cancelado:{label:"Cancelado",color:"#ef4444",bg:"#fee2e2"},carrinho:{label:"Carrinho",color:"#9ca3af",bg:"#f3f4f6"}};function W({status:t}){const n=_[t]||{label:t,color:"#6b7280",bg:"#f3f4f6"};return e.jsx("span",{style:{background:n.bg,color:n.color,padding:"2px 10px",borderRadius:99,fontSize:12,fontWeight:600},children:n.label})}function g({icon:t,label:n,value:s,sub:a,color:c}){return e.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:"20px 24px",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",flex:1,minWidth:160},children:[e.jsx("div",{style:{fontSize:28,marginBottom:6},children:t}),e.jsx("div",{style:{fontSize:26,fontWeight:700,color:c||"#1f2937"},children:s}),e.jsx("div",{style:{fontSize:14,color:"#6b7280",marginTop:2},children:n}),a&&e.jsx("div",{style:{fontSize:12,color:"#9ca3af",marginTop:4},children:a})]})}function k(){const[t,n]=r.useState(null),[s,a]=r.useState([]),[c,b]=r.useState([]),[p,u]=r.useState([]),[v,y]=r.useState(!0),[j,m]=r.useState("");return r.useEffect(()=>{async function d(){y(!0),m("");try{const[i,x,S,A]=await Promise.all([f.get("/ecommerce-analytics/resumo"),f.get("/ecommerce-analytics/demanda"),f.get("/ecommerce-analytics/mais-vendidos"),f.get("/ecommerce-analytics/pedidos-recentes")]);n(i.data),a(x.data),b(S.data),u(A.data)}catch{m("Erro ao carregar dados de analytics.")}finally{y(!1)}}d()},[]),v?e.jsx("div",{style:{padding:40,textAlign:"center",color:"#6b7280"},children:"Carregando analytics..."}):j?e.jsx("div",{style:{padding:40,color:"#ef4444"},children:j}):e.jsxs("div",{style:{padding:"24px 32px",maxWidth:1200,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:28},children:[e.jsx("span",{style:{fontSize:28},children:"ðŸ“Š"}),e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:22,fontWeight:700,color:"#1f2937"},children:"Analytics do E-commerce"}),e.jsx("p",{style:{margin:0,fontSize:14,color:"#6b7280"},children:"VisÃ£o geral de pedidos, demanda e produtos"})]})]}),e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:32},children:[e.jsx(g,{icon:"ðŸ›ï¸",label:"Total de pedidos",value:(t==null?void 0:t.total_pedidos)??0,sub:`${(t==null?void 0:t.pedidos_hoje)??0} hoje`,color:"#6366f1"}),e.jsx(g,{icon:"ðŸ’°",label:"Receita total",value:h(t==null?void 0:t.receita_total),sub:`Ticket mÃ©dio: ${h(t==null?void 0:t.ticket_medio)}`,color:"#10b981"}),e.jsx(g,{icon:"ðŸ›’",label:"Carrinhos abandonados",value:(t==null?void 0:t.carrinhos_abandonados)??0,sub:"HÃ¡ mais de 1h sem finalizar",color:"#f59e0b"}),e.jsx(g,{icon:"ðŸ””",label:"Avise-me pendentes",value:(t==null?void 0:t.avise_me_pendentes)??0,sub:"Clientes aguardando reposiÃ§Ã£o",color:"#ef4444"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:24},children:[e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"ðŸ””"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Demanda reprimida"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:'Produtos com "Avise-me" pendentes â€” precisa repor'})]})]}),s.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhum pedido de aviso pendente ðŸŽ‰"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:l,children:"SKU"}),e.jsx("th",{style:l,children:"Produto"}),e.jsx("th",{style:{...l,textAlign:"center"},children:"Pedidos"}),e.jsx("th",{style:{...l,textAlign:"center"},children:"Estoque atual"})]})}),e.jsx("tbody",{children:s.map((d,i)=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{...o,color:"#6b7280",fontFamily:"monospace"},children:d.codigo||"-"}),e.jsx("td",{style:{...o,fontWeight:500},children:d.product_name||`Produto #${d.product_id}`}),e.jsx("td",{style:{...o,textAlign:"center"},children:e.jsx("span",{style:{background:"#fee2e2",color:"#ef4444",borderRadius:99,padding:"2px 10px",fontWeight:700,fontSize:13},children:d.pendentes})}),e.jsx("td",{style:{...o,textAlign:"center",color:d.estoque_atual<=0?"#ef4444":"#10b981",fontWeight:600},children:d.estoque_atual})]},`dem-${d.product_id??"null"}-${i}`))})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"ðŸ†"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Mais vendidos"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:"Produtos com maior volume de vendas no e-commerce"})]})]}),c.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhuma venda registrada ainda"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:l,children:"#"}),e.jsx("th",{style:l,children:"Produto"}),e.jsx("th",{style:{...l,textAlign:"center"},children:"Qtd vendida"}),e.jsx("th",{style:{...l,textAlign:"right"},children:"Receita"})]})}),e.jsx("tbody",{children:c.map((d,i)=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{...o,color:"#9ca3af",width:32},children:i===0?"ðŸ¥‡":i===1?"ðŸ¥ˆ":i===2?"ðŸ¥‰":i+1}),e.jsx("td",{style:{...o,fontWeight:500},children:d.nome}),e.jsx("td",{style:{...o,textAlign:"center",fontWeight:700,color:"#6366f1"},children:d.total_vendido}),e.jsx("td",{style:{...o,textAlign:"right",color:"#10b981",fontWeight:600},children:h(d.receita)})]},`mv-${d.produto_id??"null"}-${i}`))})]})]})]}),e.jsxs("div",{style:{background:"#fff",borderRadius:12,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:18},children:"ðŸ§¾"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#1f2937"},children:"Pedidos recentes"}),e.jsx("div",{style:{fontSize:12,color:"#9ca3af"},children:"Ãšltimos 30 pedidos do e-commerce"})]})]}),p.length===0?e.jsx("div",{style:{padding:24,color:"#9ca3af",textAlign:"center"},children:"Nenhum pedido ainda"}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:l,children:"Pedido"}),e.jsx("th",{style:{...l,textAlign:"center"},children:"Status"}),e.jsx("th",{style:{...l,textAlign:"center"},children:"Itens"}),e.jsx("th",{style:{...l,textAlign:"right"},children:"Total"}),e.jsx("th",{style:{...l,textAlign:"right"},children:"Data"})]})}),e.jsx("tbody",{children:p.map((d,i)=>{var x;return e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsxs("td",{style:{...o,fontFamily:"monospace",fontSize:12,color:"#6b7280"},children:[(x=d.pedido_id)==null?void 0:x.slice(0,8),"â€¦"]}),e.jsx("td",{style:{...o,textAlign:"center"},children:e.jsx(W,{status:d.status})}),e.jsxs("td",{style:{...o,textAlign:"center",color:"#6b7280"},children:[d.qtd_itens," item(ns)"]}),e.jsx("td",{style:{...o,textAlign:"right",fontWeight:600,color:"#1f2937"},children:h(d.total)}),e.jsx("td",{style:{...o,textAlign:"right",color:"#9ca3af",fontSize:12},children:z(d.created_at)})]},`pr-${d.pedido_id??i}`)})})]})]})]})}const l={padding:"10px 16px",textAlign:"left",fontSize:12,fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},o={padding:"12px 16px",fontSize:14,color:"#1f2937"};export{k as default};
