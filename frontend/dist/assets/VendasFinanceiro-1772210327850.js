import{r as x,j as e,aw as yt,b7 as vt,aS as ft,b8 as _t,bk as wt,aF as Pe,al as Ft,aG as Ct,ax as qt,R as me,d as $t,b3 as Dt,bl as q,bm as $,b4 as kt,z as re}from"./vendor-react-1772210327850.js";import{a as pe}from"./index-1772210327850.js";import{u as V,w as St,F as At}from"./vendor-utils-1772210327850.js";import{R as w,L as Pt,C as M,X as E,Y as D,T as F,a as k,b as Ve,B as z,c as f,d as ge,P as Me,e as Ee}from"./vendor-charts-1772210327850.js";function Tt(){const[le,ue]=x.useState(!1),[b,G]=x.useState("resumo"),[p,je]=x.useState(""),[g,be]=x.useState(""),[Ne,ye]=x.useState(""),[L,Le]=x.useState(!1),[H,Te]=x.useState("mes_anterior"),[Q,ve]=x.useState(""),[Y,fe]=x.useState(""),[I,_e]=x.useState(""),[X,Be]=x.useState(!0),[W,Re]=x.useState("financeiro"),[h,Ke]=x.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[u,we]=x.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[N,Oe]=x.useState([]),[S,ze]=x.useState([]),[J,Ge]=x.useState([]),[T,Qe]=x.useState([]),[_,Ye]=x.useState([]),[A,Ie]=x.useState([]),[We,Ue]=x.useState([]),[oe,He]=x.useState(new Set),[Fe,Xe]=x.useState([]),[Z,Je]=x.useState([]),[Ce,Ze]=x.useState([]),[P,qe]=x.useState([]),[et,$e]=x.useState({}),[ee,tt]=x.useState([]),at=t=>{const a=new Set(oe);a.has(t)?a.delete(t):a.add(t),He(a)},s=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),c=t=>t==null||isNaN(t)||!isFinite(t)?0:t,j=t=>{if(!t)return"N/A";try{if(t instanceof Date)return t.toLocaleDateString("pt-BR");if(typeof t=="string"&&t.includes("T")){const l=t.split("T")[0],[r,o,d]=l.split("-");return`${d}/${o}/${r}`}const a=new Date(t);return isNaN(a.getTime())?"N/A":a.toLocaleDateString("pt-BR")}catch{return"N/A"}},B=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],ie=(t,a)=>{if(!t||t.length===0)return t;let l=[...t];return Q&&a==="funcionario"&&(l=l.filter(r=>r.funcionario===Q)),Y&&a==="formaPagamento"&&(l=l.filter(r=>r.forma_pagamento===Y)),I&&a==="categoria"&&(l=l.filter(r=>r.categoria===I)),l},R=ie(S,"formaPagamento"),K=ie(J,"funcionario"),De=ie(A,"categoria"),U=({titulo:t,valor:a,icone:l,cor:r,valorAnterior:o})=>{const d=C(a,o),i=d.percentual>0,n=d.percentual===0;return e.jsxs("div",{className:`${r} text-white p-4 rounded-lg shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:t}),e.jsx(l,{className:"w-5 h-5 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s(a)}),L&&o!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${n?"opacity-70":""}`,children:[i&&e.jsx(q,{className:"w-4 h-4"}),!i&&!n&&e.jsx($,{className:"w-4 h-4"}),n&&e.jsx(kt,{className:"w-4 h-4"}),e.jsxs("span",{children:[Math.abs(d.percentual),"%"]})]})]})},ke=()=>{switch(H){case"periodo_anterior":return"mesmo perÃ­odo anterior";case"mes_anterior":return"mesmo perÃ­odo do mÃªs anterior";case"ano_anterior":return"mesmo perÃ­odo do ano anterior";default:return"perÃ­odo anterior"}},st=async()=>{if(!p||!g){re.error("Selecione um perÃ­odo para gerar o relatÃ³rio");return}try{re.loading("Gerando PDF...",{id:"pdf"});const t=new URLSearchParams({data_inicio:p,data_fim:g});Q&&t.append("funcionario",Q),Y&&t.append("forma_pagamento",Y),I&&t.append("categoria",I);const a=await pe.get(`/relatorios/vendas/export/pdf?${t.toString()}`,{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=l,r.setAttribute("download",`relatorio_vendas_${p}_${g}.pdf`),document.body.appendChild(r),r.click(),r.remove(),re.success("ðŸ“„ PDF exportado com sucesso!",{id:"pdf"})}catch(t){console.error("Erro ao exportar PDF:",t),re.error("Erro ao exportar PDF",{id:"pdf"})}},rt=()=>{const t=V.book_new(),a=[["RELATÃ“RIO DE VENDAS"],["PerÃ­odo:",`${j(p)} atÃ© ${j(g)}`],[""],["MÃ©trica","Valor"],["Venda Bruta",h.venda_bruta],["Taxa de Entrega",h.taxa_entrega],["Desconto",h.desconto],["Venda LÃ­quida",h.venda_liquida],["Em Aberto",h.em_aberto],["Quantidade de Vendas",h.quantidade_vendas]],l=V.aoa_to_sheet(a);if(V.book_append_sheet(t,l,"Resumo"),N.length>0){const n=[["Data","Qtd","Tkt. MÃ©dio","Vl. bruto","Taxa entrega","Desconto","(%)","Vl. lÃ­quido","Vl. recebido","Saldo aberto"],...N.map(m=>[j(m.data),m.quantidade,m.ticket_medio,m.valor_bruto,m.taxa_entrega,m.desconto,m.percentual_desconto,m.valor_liquido,m.valor_recebido,m.saldo_aberto])],y=V.aoa_to_sheet(n);V.book_append_sheet(t,y,"Vendas por Data")}if(R.length>0){const n=[["Forma","Valor pago"],...R.map(m=>[m.forma_pagamento,m.valor_total])],y=V.aoa_to_sheet(n);V.book_append_sheet(t,y,"Formas Pagamento")}const r=St(t,{bookType:"xlsx",type:"binary"}),o=new ArrayBuffer(r.length),d=new Uint8Array(o);for(let n=0;n<r.length;n++)d[n]=r.charCodeAt(n)&255;const i=`relatorio_vendas_${p}_${g}.xlsx`;At.saveAs(new Blob([o],{type:"application/octet-stream"}),i)},Se=t=>{const a=new Date,l=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),d=`${l}-${r}-${o}`;let i,n;switch(t){case"hoje":i=n=d;break;case"ontem":const y=new Date(a);y.setDate(a.getDate()-1);const m=y.getFullYear(),v=String(y.getMonth()+1).padStart(2,"0"),de=String(y.getDate()).padStart(2,"0");i=n=`${m}-${v}-${de}`;break;case"esta_semana":const te=a.getDay(),ne=te===0?6:te-1,O=new Date(a);O.setDate(a.getDate()-ne);const ce=O.getFullYear(),xe=String(O.getMonth()+1).padStart(2,"0"),dt=String(O.getDate()).padStart(2,"0");i=`${ce}-${xe}-${dt}`,n=d;break;case"este_mes":i=`${l}-${r}-01`,n=d;break;case"mes_anterior":const Ae=new Date(a.getFullYear(),a.getMonth()-1,1),he=new Date(a.getFullYear(),a.getMonth(),0),nt=Ae.getFullYear(),ct=String(Ae.getMonth()+1).padStart(2,"0"),xt=he.getFullYear(),ht=String(he.getMonth()+1).padStart(2,"0"),mt=String(he.getDate()).padStart(2,"0");i=`${nt}-${ct}-01`,n=`${xt}-${ht}-${mt}`;break;case"ultimos_7_dias":const ae=new Date(a);ae.setDate(a.getDate()-7);const pt=ae.getFullYear(),gt=String(ae.getMonth()+1).padStart(2,"0"),ut=String(ae.getDate()).padStart(2,"0");i=`${pt}-${gt}-${ut}`,n=d;break;case"ultimos_30_dias":const se=new Date(a);se.setDate(a.getDate()-30);const jt=se.getFullYear(),bt=String(se.getMonth()+1).padStart(2,"0"),Nt=String(se.getDate()).padStart(2,"0");i=`${jt}-${bt}-${Nt}`,n=d;break;case"este_ano":i=`${l}-01-01`,n=d;break;default:return}je(i),be(n),ye(t)},lt=()=>{const[t,a,l]=p.split("-").map(Number),[r,o,d]=g.split("-").map(Number),i=new Date(t,a-1,l),n=new Date(r,o-1,d),y=Math.floor((n-i)/(1e3*60*60*24))+1;let m,v;switch(H){case"periodo_anterior":m=new Date(i),m.setDate(i.getDate()-y),v=new Date(i),v.setDate(i.getDate()-1);break;case"mes_anterior":m=new Date(i),m.setMonth(i.getMonth()-1),v=new Date(n),v.setMonth(n.getMonth()-1);break;case"ano_anterior":m=new Date(i),m.setFullYear(i.getFullYear()-1),v=new Date(n),v.setFullYear(n.getFullYear()-1);break;default:return{data_inicio:"",data_fim:""}}const de=m.getFullYear(),te=String(m.getMonth()+1).padStart(2,"0"),ne=String(m.getDate()).padStart(2,"0"),O=v.getFullYear(),ce=String(v.getMonth()+1).padStart(2,"0"),xe=String(v.getDate()).padStart(2,"0");return{data_inicio:`${de}-${te}-${ne}`,data_fim:`${O}-${ce}-${xe}`}},C=(t,a)=>{if(!a||a===0)return{valor:0,percentual:0};const l=t-a,r=(l/a*100).toFixed(1);return{valor:l,percentual:parseFloat(r)}},ot=async()=>{if(!(!p||!g)){ue(!0);try{const a=(await pe.get("/relatorios/vendas/relatorio",{params:{data_inicio:p,data_fim:g}})).data;if(Ke(a.resumo||{}),Oe(a.vendas_por_data||[]),ze(a.formas_recebimento||[]),Ge(a.vendas_por_funcionario||[]),Qe(a.vendas_por_tipo||[]),Ye(a.vendas_por_grupo||[]),Ie(a.produtos_detalhados||[]),tt(a.produtos_analise||[]),Ue(a.lista_vendas||[]),L||b==="comparacao"){const l=lt(),r=await pe.get("/relatorios/vendas/relatorio",{params:l});we(r.data.resumo||{}),Xe(r.data.formas_recebimento||[]),Je(r.data.vendas_por_grupo||[]),Ze(r.data.vendas_por_funcionario||[])}else we({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0})}catch(t){console.error("Erro ao carregar relatÃ³rio:",t)}finally{ue(!1)}}},it=()=>{if(!ee||ee.length===0){qe([]),$e({});return}const t=ee.map(r=>{const o=c(r.custo_total),d=c(r.valor_total),i=c(r.quantidade)||1,n=d-o,y=o>0?n/o*100:0;return{nome:r.nome||r.produto||"Produto sem nome",marca:r.marca||"-",quantidade:i,custo:c(o/i),preco:c(d/i),lucro_total:c(n),margem:c(y),categoria:r.categoria||"Sem Categoria"}}),a=t.sort((r,o)=>o.lucro_total-r.lucro_total).slice(0,20);qe(a);const l={};t.forEach(r=>{const o=r.categoria||"Sem Categoria";l[o]||(l[o]={quantidade:0,total:0,margens:[]}),l[o].quantidade+=r.quantidade,l[o].total+=r.preco*r.quantidade,l[o].margens.push(r.margem)}),Object.keys(l).forEach(r=>{const o=l[r].margens,d=o.reduce((i,n)=>c(i)+c(n),0);l[r].margem_media=c(o.length>0?d/o.length:0),delete l[r].margens}),$e(l)};return x.useEffect(()=>{b==="analise"&&it()},[ee,b]),x.useEffect(()=>{ot()},[p,g,L,H,b]),x.useEffect(()=>{Se("este_mes")},[]),le?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:st,disabled:!p||!g,title:p&&g?`Exportar PDF de ${j(p)} atÃ© ${j(g)}`:"Selecione um perÃ­odo",className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar PDF"}),p&&g&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",j(p)," - ",j(g),")"]})]})]}),e.jsxs("button",{onClick:rt,disabled:!p||!g,title:p&&g?`Exportar dados de ${j(p)} atÃ© ${j(g)}`:"Selecione um perÃ­odo",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(vt,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar Excel"}),p&&g&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",j(p)," - ",j(g),")"]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:t=>Le(t.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Comparar com:"})]}),L&&e.jsxs("select",{value:H,onChange:t=>Te(t.target.value),className:"border rounded px-3 py-2 text-sm bg-blue-50 font-medium",children:[e.jsx("option",{value:"periodo_anterior",children:"PerÃ­odo imediatamente anterior (mesmo nÂº de dias)"}),e.jsx("option",{value:"mes_anterior",children:"Mesmo perÃ­odo do mÃªs passado"}),e.jsx("option",{value:"ano_anterior",children:"Mesmo perÃ­odo do ano passado"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"hoje",label:"Hoje"},{id:"ontem",label:"Ontem"},{id:"esta_semana",label:"Esta semana"},{id:"este_mes",label:"Este mÃªs"},{id:"mes_anterior",label:"MÃªs anterior"},{id:"ultimos_7_dias",label:"Ãšltimos 7 dias"},{id:"ultimos_30_dias",label:"Ãšltimos 30 dias"},{id:"este_ano",label:"Este ano"},{id:"personalizado",label:"Personalizado"}].map(t=>e.jsx("button",{onClick:()=>{t.id==="personalizado"?ye("personalizado"):Se(t.id)},className:`px-3 py-1 rounded text-sm font-medium transition-colors ${Ne===t.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))}),Ne==="personalizado"&&e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-gray-50 rounded",children:[e.jsx(ft,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:p,onChange:t=>je(t.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"text-gray-600",children:"atÃ©"}),e.jsx("input",{type:"date",value:g,onChange:t=>be(t.target.value),className:"border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx(_t,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros AvanÃ§ados:"}),e.jsxs("select",{value:Q,onChange:t=>ve(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todos os funcionÃ¡rios"}),J.map((t,a)=>e.jsx("option",{value:t.funcionario,children:t.funcionario},a))]}),e.jsxs("select",{value:Y,onChange:t=>fe(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as formas"}),S.map((t,a)=>e.jsx("option",{value:t.forma_pagamento,children:t.forma_pagamento},a))]}),e.jsxs("select",{value:I,onChange:t=>_e(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),A.map((t,a)=>e.jsx("option",{value:t.categoria,children:t.categoria},a))]}),e.jsx("button",{onClick:()=>{ve(""),fe(""),_e("")},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300 transition-colors",children:"Limpar Filtros"}),e.jsxs("button",{onClick:()=>Be(!X),className:"ml-auto px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4"}),X?"Ocultar":"Mostrar"," GrÃ¡ficos"]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>G("resumo"),className:`px-4 py-2 font-medium ${b==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>G("produtos"),className:`px-4 py-2 font-medium ${b==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/serviÃ§o"}),e.jsx("button",{onClick:()=>G("lista"),className:`px-4 py-2 font-medium ${b==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"}),e.jsx("button",{onClick:()=>G("comparacao"),className:`px-4 py-2 font-medium ${b==="comparacao"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"ComparaÃ§Ã£o de PerÃ­odos"}),e.jsx("button",{onClick:()=>G("analise"),className:`px-4 py-2 font-medium ${b==="analise"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"AnÃ¡lise Inteligente"})]})]}),b==="resumo"&&e.jsxs("div",{children:[L&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Modo ComparaÃ§Ã£o Ativo:"}),e.jsxs("span",{className:"text-blue-700 ml-2",children:["Comparando ",e.jsxs("span",{className:"font-medium",children:[j(p)," atÃ© ",j(g)]})," com ",e.jsx("span",{className:"font-medium",children:ke()})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsx(U,{titulo:"Venda Bruta",valor:h.venda_bruta,icone:Pe,cor:"bg-green-500",valorAnterior:u.venda_bruta}),e.jsx(U,{titulo:"Taxa de Entrega",valor:h.taxa_entrega,icone:Ft,cor:"bg-gray-400",valorAnterior:u.taxa_entrega}),e.jsx(U,{titulo:"Desconto",valor:h.desconto,icone:Ct,cor:"bg-yellow-500",valorAnterior:u.desconto}),e.jsx(U,{titulo:"Venda LÃ­quida",valor:h.venda_liquida,icone:Pe,cor:"bg-blue-500",valorAnterior:u.venda_liquida}),e.jsx(U,{titulo:"Em Aberto",valor:h.em_aberto,icone:qt,cor:"bg-red-500",valorAnterior:u.em_aberto})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(h.custo_total||0)}),e.jsx("div",{className:"text-sm",children:"Custo Total"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(h.taxa_cartao_total||0)}),e.jsx("div",{className:"text-sm",children:"Taxas de CartÃ£o"})]}),e.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(h.lucro_total||0)}),e.jsx("div",{className:"text-sm",children:"Lucro Total"})]}),e.jsxs("div",{className:"bg-teal-500 text-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[h.margem_media||0,"%"]}),e.jsx("div",{className:"text-sm",children:"Margem MÃ©dia"})]})]}),X&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vendas no PerÃ­odo"}),e.jsx(w,{width:"100%",height:300,children:e.jsxs(Pt,{data:N,children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"data",tickFormatter:t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx(D,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(F,{formatter:t=>s(t),labelFormatter:t=>j(t)}),e.jsx(k,{}),e.jsx(Ve,{type:"monotone",dataKey:"valor_bruto",stroke:"#3B82F6",strokeWidth:2,name:"Venda Bruta"}),e.jsx(Ve,{type:"monotone",dataKey:"valor_liquido",stroke:"#10B981",strokeWidth:2,name:"Venda LÃ­quida"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Formas de Pagamento"}),e.jsx(w,{width:"100%",height:350,children:e.jsxs(z,{data:R,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{type:"number",tickFormatter:t=>s(t)}),e.jsx(D,{type:"category",dataKey:"forma_pagamento",width:110,style:{fontSize:"12px"}}),e.jsx(F,{formatter:(t,a,l)=>{const r=R.reduce((d,i)=>d+i.valor_total,0),o=(t/r*100).toFixed(1);return[`${s(t)} (${o}%)`,"Valor"]},contentStyle:{backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),e.jsx(f,{dataKey:"valor_total",fill:"#3B82F6",radius:[0,8,8,0],label:{position:"right",formatter:t=>{const a=R.reduce((r,o)=>r+o.valor_total,0);return`${(t/a*100).toFixed(1)}%`},style:{fontSize:"11px",fontWeight:"bold"}},children:R.map((t,a)=>e.jsx(ge,{fill:B[a%B.length]},`cell-${a}`))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top 10 Categorias de Produtos"}),e.jsx(w,{width:"100%",height:300,children:e.jsxs(z,{data:De.slice(0,10),children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"categoria"}),e.jsx(D,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(F,{formatter:t=>s(t)}),e.jsx(k,{}),e.jsx(f,{dataKey:"total_liquido",fill:"#3B82F6",name:"Valor LÃ­quido"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. MÃ©dio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[N.map((t,a)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:j(t.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.saldo_aberto)})]},a)),N.length>0&&(()=>{const t=N.reduce((d,i)=>d+i.quantidade,0),a=N.reduce((d,i)=>d+i.valor_bruto,0),l=N.reduce((d,i)=>d+i.desconto,0),r=t>0?a/t:0,o=a>0?(l/a*100).toFixed(1):0;return e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:t}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(r)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(a)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(N.reduce((d,i)=>d+i.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(l)}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[o,"%"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(N.reduce((d,i)=>d+i.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(N.reduce((d,i)=>d+i.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(N.reduce((d,i)=>d+i.saldo_aberto,0))})]})})()]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[S.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_total)})]},a)),S.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(S.reduce((t,a)=>t+a.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"FuncionÃ¡rio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[K.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),K.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:K.reduce((t,a)=>t+a.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(K.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(K.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(K.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[T.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),T.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:T.reduce((t,a)=>t+a.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(T.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(T.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(T.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[_.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),_.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(_.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(_.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(_.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]})]})]}),b==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/ServiÃ§os"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/ServiÃ§os"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"LÃ­quido"})]})}),e.jsxs("tbody",{children:[De.map((t,a)=>e.jsxs(me.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-2",children:t.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_liquido)})]},`cat-${a}`),t.subcategorias&&t.subcategorias.map((l,r)=>e.jsxs(me.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium",children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:l.subcategoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:l.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(l.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(l.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(l.total_liquido)})]},`sub-${a}-${r}`),l.produtos&&l.produtos.map((o,d)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:o.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:o.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.valor_liquido)})]},`prod-${a}-${r}-${d}`))]},`sub-group-${a}-${r}`)),t.produtos&&t.produtos.map((l,r)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:l.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:l.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(l.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(l.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(l.valor_liquido)})]},`prod-${a}-${r}`))]},`cat-group-${a}`)),A.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:A.reduce((t,a)=>t+a.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(A.reduce((t,a)=>t+a.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(A.reduce((t,a)=>t+a.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(A.reduce((t,a)=>t+a.total_liquido,0))})]})]})]})})]}),b==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas com AnÃ¡lise de Rentabilidade"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left w-8"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"CÃ³digo"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Entrega"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Operac."}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa CartÃ£o"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"ComissÃ£o"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Custo"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"LÃ­quida"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Custo"}),e.jsx("th",{className:"px-2 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:We.map(t=>e.jsxs(me.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>at(t.id),children:[e.jsx("td",{className:"px-2 py-2",children:oe.has(t.id)?e.jsx($t,{className:"w-4 h-4 text-gray-600"}):e.jsx(Dt,{className:"w-4 h-4 text-gray-600"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:j(t.data_venda)}),e.jsx("td",{className:"px-2 py-2",children:t.numero_venda}),e.jsx("td",{className:"px-2 py-2",children:t.cliente_nome}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:s(t.venda_bruta)}),e.jsxs("td",{className:"px-2 py-2 text-right text-red-600",children:["-",s(t.desconto)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",title:"ComissÃ£o repassada ao entregador",children:["-",s(t.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-500",title:"Custo operacional da entrega (empresa)",children:["-",s(t.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-purple-600",children:["-",s(t.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",children:["-",s(t.comissao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-pink-600",title:"Impostos sobre faturamento",children:["-",s(t.imposto||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-600",children:["-",s(t.custo_produtos)]}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:s(t.venda_liquida)}),e.jsx("td",{className:`px-2 py-2 text-right font-bold ${t.lucro>=0?"text-green-600":"text-red-600"}`,children:s(t.lucro)}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[t.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[t.margem_sobre_custo,"%"]}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="finalizada"?"bg-green-100 text-green-800":t.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="finalizada"?"Baixada":t.status==="baixa_parcial"?"Parcial":"Aberta"})})]}),oe.has(t.id)&&t.itens&&t.itens.length>0&&e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"17",className:"px-4 py-3",children:e.jsxs("div",{className:"pl-8",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Produtos desta venda:"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Produto"}),e.jsx("th",{className:"px-2 py-1 text-center",children:"Qtd"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"PreÃ§o Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Entr."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Oper."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa CartÃ£o"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"ComissÃ£o"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Total"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"LÃ­quido"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Custo"})]})}),e.jsx("tbody",{children:t.itens.map((a,l)=>e.jsxs("tr",{className:"border-b border-blue-200 hover:bg-blue-100",children:[e.jsx("td",{className:"px-2 py-1",children:a.produto_nome}),e.jsx("td",{className:"px-2 py-1 text-center",children:a.quantidade}),e.jsx("td",{className:"px-2 py-1 text-right",children:s(a.preco_unitario)}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:s(a.venda_bruta)}),e.jsxs("td",{className:"px-2 py-1 text-right text-red-600",children:["-",s(a.desconto)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",s(a.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-500",children:["-",s(a.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-purple-600",children:["-",s(a.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",s(a.comissao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-pink-600",children:["-",s(a.imposto||0)]}),e.jsx("td",{className:"px-2 py-1 text-right text-orange-600",children:s(a.custo_unitario)}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-600 font-medium",children:["-",s(a.custo_total)]}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:s(a.valor_liquido)}),e.jsx("td",{className:`px-2 py-1 text-right font-bold ${a.lucro>=0?"text-green-600":"text-red-600"} cursor-help`,title:`Lucro unitÃ¡rio: ${s(a.lucro_unitario)}`,children:s(a.lucro)}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Margem unitÃ¡ria: ${a.margem_sobre_venda}%`,children:[a.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Markup unitÃ¡rio: ${a.margem_sobre_custo}%`,children:[a.margem_sobre_custo,"%"]})]},l))})]})]})})},`${t.id}-detalhes`)]},t.id))})]})})]}),b==="comparacao"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo de AnÃ¡lise:"}),e.jsxs("select",{value:W,onChange:t=>Re(t.target.value),className:"border rounded px-4 py-2 text-sm bg-blue-50 font-medium min-w-[250px]",children:[e.jsx("option",{value:"financeiro",children:"ðŸ“Š ComparaÃ§Ã£o Financeira"}),e.jsx("option",{value:"formas_pagamento",children:"ðŸ’³ Por Forma de Pagamento"}),e.jsx("option",{value:"produtos",children:"ðŸ“¦ Por Grupo de Produtos"}),e.jsx("option",{value:"funcionarios",children:"ðŸ‘¥ Por FuncionÃ¡rio"})]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"PerÃ­odo Atual:"})," ",j(p)," - ",j(g)]})]})}),W==="financeiro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300",children:[e.jsxs("div",{className:"bg-gray-500 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“… PerÃ­odo Anterior"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:ke()})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:u.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:s(u.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s(u.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:s(u.venda_liquida-u.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-blue-500",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“… PerÃ­odo Atual"}),e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[j(p)," - ",j(g)]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:h.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:s(h.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s(h.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:s(h.venda_liquida-h.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-green-500",children:[e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“ˆ DiferenÃ§a"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"VariaÃ§Ã£o vs perÃ­odo anterior"})]}),e.jsx("div",{className:"p-4 space-y-3",children:(()=>{const t=C(h.quantidade_vendas,u.quantidade_vendas),a=C(h.venda_bruta,u.venda_bruta),l=C(h.venda_liquida,u.venda_liquida),r=h.venda_liquida-h.em_aberto,o=u.venda_liquida-u.em_aberto,d=C(r,o);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qtd de Vendas"}),e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${t.percentual>=0?"text-green-600":"text-red-600"}`,children:[t.percentual>=0?e.jsx(q,{className:"w-6 h-6"}):e.jsx($,{className:"w-6 h-6"}),Math.abs(t.percentual),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.valor>=0?"+":"",t.valor.toFixed(0)," vendas"]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${a.percentual>=0?"text-green-600":"text-red-600"}`,children:[a.percentual>=0?e.jsx(q,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"}),Math.abs(a.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(a.valor)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${l.percentual>=0?"text-green-600":"text-red-600"}`,children:[l.percentual>=0?e.jsx(q,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"}),Math.abs(l.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(l.valor)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${d.percentual>=0?"text-green-600":"text-red-600"}`,children:[d.percentual>=0?e.jsx(q,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"}),Math.abs(d.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(d.valor)})]})]})})()})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual"}),e.jsx(w,{width:"100%",height:300,children:e.jsxs(z,{data:[{nome:"Qtd Vendas",Anterior:u.quantidade_vendas||0,Atual:h.quantidade_vendas||0},{nome:"Vl. Bruto (mil)",Anterior:(u.venda_bruta||0)/1e3,Atual:(h.venda_bruta||0)/1e3},{nome:"Vl. LÃ­quido (mil)",Anterior:(u.venda_liquida||0)/1e3,Atual:(h.venda_liquida||0)/1e3},{nome:"Vl. Recebido (mil)",Anterior:(u.venda_liquida-u.em_aberto||0)/1e3,Atual:(h.venda_liquida-h.em_aberto||0)/1e3}],children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"nome"}),e.jsx(D,{}),e.jsx(F,{formatter:(t,a)=>[a.includes("mil")?`R$ ${t.toFixed(1)}k`:t.toFixed(0),a]}),e.jsx(k,{}),e.jsx(f,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(f,{dataKey:"Atual",fill:"#3B82F6",name:"PerÃ­odo Atual"})]})})]})]}),W==="formas_pagamento"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por Forma de Pagamento"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Forma de Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"DiferenÃ§a"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o %"})]})}),e.jsx("tbody",{children:S.map((t,a)=>{const l=Fe.find(o=>o.forma_pagamento===t.forma_pagamento)||{valor_total:0},r=C(t.valor_total,l.valor_total);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.forma_pagamento}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(l.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(r.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${r.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[r.percentual>=0?e.jsx(q,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"}),Math.abs(r.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual"}),e.jsx(w,{width:"100%",height:350,children:e.jsxs(z,{data:S.map(t=>{var a;return{nome:t.forma_pagamento,Anterior:(((a=Fe.find(l=>l.forma_pagamento===t.forma_pagamento))==null?void 0:a.valor_total)||0)/1e3,Atual:t.valor_total/1e3}}),children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(D,{tickFormatter:t=>`R$ ${t.toFixed(0)}k`}),e.jsx(F,{formatter:t=>`R$ ${t.toFixed(1)}k`}),e.jsx(k,{}),e.jsx(f,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(f,{dataKey:"Atual",fill:"#10B981",name:"PerÃ­odo Atual"})]})})]})]}),W==="produtos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por Grupo de Produtos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Grupo"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"DiferenÃ§a"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o %"})]})}),e.jsx("tbody",{children:_.map((t,a)=>{const l=Z.find(o=>o.grupo===t.grupo)||{valor_liquido:0},r=C(t.valor_liquido,l.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.grupo}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(l.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(r.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${r.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[r.percentual>=0?e.jsx(q,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"}),Math.abs(r.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"PerÃ­odo Anterior"}),e.jsx(w,{width:"100%",height:300,children:e.jsxs(Me,{children:[e.jsx(Ee,{data:Z,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:t=>{const a=(t.valor_liquido/Z.reduce((l,r)=>l+r.valor_liquido,0)*100).toFixed(1);return a>5?`${a}%`:""},children:Z.map((t,a)=>e.jsx(ge,{fill:B[a%B.length]},`cell-${a}`))}),e.jsx(F,{formatter:t=>s(t)}),e.jsx(k,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"PerÃ­odo Atual"}),e.jsx(w,{width:"100%",height:300,children:e.jsxs(Me,{children:[e.jsx(Ee,{data:_,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:t=>{const a=(t.valor_liquido/_.reduce((l,r)=>l+r.valor_liquido,0)*100).toFixed(1);return a>5?`${a}%`:""},children:_.map((t,a)=>e.jsx(ge,{fill:B[a%B.length]},`cell-${a}`))}),e.jsx(F,{formatter:t=>s(t)}),e.jsx(k,{verticalAlign:"bottom",height:36})]})})]})]})]}),W==="funcionarios"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por FuncionÃ¡rio"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"FuncionÃ¡rio"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Atual"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o"})]})}),e.jsx("tbody",{children:J.map((t,a)=>{const l=Ce.find(o=>o.funcionario===t.funcionario)||{quantidade:0,valor_liquido:0},r=C(t.valor_liquido,l.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.funcionario}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:l.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:t.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(l.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${r.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[r.percentual>=0?e.jsx(q,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"}),Math.abs(r.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual - Valor LÃ­quido"}),e.jsx(w,{width:"100%",height:350,children:e.jsxs(z,{data:J.map(t=>{var a;return{nome:t.funcionario,Anterior:(((a=Ce.find(l=>l.funcionario===t.funcionario))==null?void 0:a.valor_liquido)||0)/1e3,Atual:t.valor_liquido/1e3}}),children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(D,{tickFormatter:t=>`R$ ${t.toFixed(0)}k`}),e.jsx(F,{formatter:t=>`R$ ${t.toFixed(1)}k`}),e.jsx(k,{}),e.jsx(f,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(f,{dataKey:"Atual",fill:"#8B5CF6",name:"PerÃ­odo Atual"})]})})]})]})]}),b==="analise"&&e.jsxs("div",{className:"space-y-6",children:[le&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!le&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"AnÃ¡lise Inteligente de Produtos"})]}),e.jsx("p",{className:"text-blue-100",children:"Identifique os produtos mais lucrativos e oportunidades de melhoria no seu mix de produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"ðŸ† Top Produtos por Lucro"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Marca"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Qtd"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Custo Unit."}),e.jsx("th",{className:"text-right py-2 px-2",children:"PreÃ§o Venda"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Margem %"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Lucro Total"})]})}),e.jsx("tbody",{children:P.map((t,a)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-bold ${a===0?"bg-yellow-100 text-yellow-800":a===1?"bg-gray-100 text-gray-800":a===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:a+1})}),e.jsx("td",{className:"py-3 px-2 font-medium",children:t.nome}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:t.marca||"-"}),e.jsx("td",{className:"py-3 px-2 text-right",children:c(t.quantidade)}),e.jsx("td",{className:"py-3 px-2 text-right text-red-600",children:s(c(t.custo))}),e.jsx("td",{className:"py-3 px-2 text-right text-green-600",children:s(c(t.preco))}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${c(t.margem)>=50?"bg-green-100 text-green-800":c(t.margem)>=30?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[c(t.margem).toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 px-2 text-right font-bold text-green-600",children:s(c(t.lucro_total))})]},a))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ðŸ“Š Desempenho por Categoria"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(et).map(([t,a])=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-2",children:t}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vendas:"}),e.jsx("span",{className:"font-semibold",children:c(a.quantidade)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Faturamento:"}),e.jsx("span",{className:"font-semibold text-green-600",children:s(c(a.total))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Margem MÃ©dia:"}),e.jsxs("span",{className:`font-semibold ${c(a.margem_media)>=40?"text-green-600":c(a.margem_media)>=25?"text-yellow-600":"text-red-600"}`,children:[c(a.margem_media).toFixed(1),"%"]})]})]})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"âš ï¸ AtenÃ§Ã£o: Margens Baixas"})]}),e.jsxs("div",{className:"space-y-2",children:[P.filter(t=>c(t.margem)<25).slice(0,5).map((t,a)=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border-l-4 border-red-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Margem: ",e.jsxs("span",{className:"font-semibold text-red-600",children:[c(t.margem).toFixed(1),"%"]})," - ","Revisar preÃ§o de custo ou venda"]})]},a)),P.filter(t=>c(t.margem)<25).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:"âœ… Nenhum produto com margem crÃ­tica"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"ðŸ’¡ Oportunidades"})]}),e.jsxs("div",{className:"space-y-3",children:[P.filter(t=>c(t.margem)>=40&&c(t.quantidade)<10).slice(0,3).map((t,a)=>e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-blue-800 mt-1",children:[e.jsxs("strong",{children:["Alta margem (",c(t.margem).toFixed(1),"%)"]})," mas poucas vendas (",c(t.quantidade)," un.)",e.jsx("br",{}),"ðŸ’¬ Considere promover este produto"]})]},a)),P.filter(t=>c(t.margem)>=40).slice(0,2).map((t,a)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-green-800 mt-1",children:[e.jsx("strong",{children:"â­ CampeÃ£o de vendas"})," com excelente margem",e.jsx("br",{}),"ðŸ’¬ Mantenha em destaque"]})]},`camp-${a}`))]})]})]}),X&&P.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ðŸ“ˆ Margem vs Volume de Vendas"}),e.jsx(w,{width:"100%",height:400,children:e.jsxs(z,{data:P.slice(0,15).map(t=>({...t,margem:c(t.margem),quantidade:c(t.quantidade)})),children:[e.jsx(M,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"nome",angle:-45,textAnchor:"end",height:120,interval:0,tick:{fontSize:11}}),e.jsx(D,{yAxisId:"left",orientation:"left",stroke:"#10B981",label:{value:"Margem %",angle:-90,position:"insideLeft"}}),e.jsx(D,{yAxisId:"right",orientation:"right",stroke:"#3B82F6",label:{value:"Quantidade",angle:90,position:"insideRight"}}),e.jsx(F,{}),e.jsx(k,{}),e.jsx(f,{yAxisId:"left",dataKey:"margem",fill:"#10B981",name:"Margem %"}),e.jsx(f,{yAxisId:"right",dataKey:"quantidade",fill:"#3B82F6",name:"Qtd Vendida"})]})})]})]})]}),"    "]})}export{Tt as default};
