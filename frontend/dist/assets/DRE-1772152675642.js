import{r as d,j as e,bc as Q,X as Z,bu as W,aQ as ee,bv as se,R as ae,bi as O,aA as X,bj as V,aG as G,aw as T,an as q,ao as te,aj as I,ak as U,aS as re,bw as ie,bx as le,bk as Y,bs as oe,aF as J,bn as ne,by as ce,z as P,am as H,b7 as de,b5 as xe}from"./vendor-react-1772152675642.js";import{a as S}from"./index-1772152675642.js";const me=({isOpen:c,onClose:D,contexto:x})=>{const[E,w]=d.useState([]),[A,n]=d.useState(""),[z,k]=d.useState(!1),v=d.useRef(null);d.useEffect(()=>{c&&E.length===0&&w([{tipo:"ia",conteudo:`OlÃ¡! Sou seu especialista financeiro com IA. Analisando seu ${(x==null?void 0:x.tipo)||"relatÃ³rio"}...

Posso ajudar com:
â€¢ AnÃ¡lise de resultados
â€¢ SugestÃµes de melhoria
â€¢ ComparaÃ§Ãµes de perÃ­odos
â€¢ ProjeÃ§Ãµes financeiras

O que deseja saber?`,timestamp:new Date}])},[c,E.length,x]),d.useEffect(()=>{F()},[E]);const F=()=>{var o;(o=v.current)==null||o.scrollIntoView({behavior:"smooth"})},$=async()=>{if(!A.trim())return;const o={tipo:"usuario",conteudo:A,timestamp:new Date};w(f=>[...f,o]),n(""),k(!0);try{const s={tipo:"ia",conteudo:(await S.post("/ia/chat",{mensagem:A,contexto:x})).data.resposta,timestamp:new Date};w(a=>[...a,s])}catch(f){console.error("Erro ao enviar mensagem:",f);const s={tipo:"ia",conteudo:"Desculpe, houve um erro ao processar sua mensagem. Tente novamente.",timestamp:new Date};w(a=>[...a,s])}finally{k(!1)}},b=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),$())},R=["Como melhorar minha margem de lucro?","Quais sÃ£o os principais gastos?","Compare com o mÃªs anterior","HÃ¡ despesas atÃ­picas?"],g=o=>{n(o)};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(Q,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Especialista Financeiro IA"}),e.jsx("p",{className:"text-sm text-purple-100",children:"AnÃ¡lise inteligente dos seus dados"})]})]}),e.jsx("button",{onClick:D,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(Z,{size:24})})]}),x&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-indigo-200 p-3",children:e.jsxs("div",{className:"text-sm text-indigo-800",children:["ðŸ“Š Analisando: ",e.jsx("span",{className:"font-semibold",children:x.tipo}),x.periodo&&e.jsxs("span",{className:"ml-2",children:["â€¢ ",x.periodo]}),x.valor&&e.jsxs("span",{className:"ml-2",children:["â€¢ Valor: R$ ",x.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[E.map((o,f)=>e.jsx("div",{className:`flex ${o.tipo==="usuario"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl p-4 ${o.tipo==="usuario"?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-100 text-gray-800"}`,children:[o.tipo==="ia"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"IA Especialista"})]}),e.jsx("p",{className:"whitespace-pre-wrap",children:o.conteudo}),e.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:o.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},f)),z&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"animate-spin text-purple-600",size:20}),e.jsx("span",{className:"text-gray-600",children:"Analisando..."})]})})}),e.jsx("div",{ref:v})]}),E.length<=1&&e.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:"ðŸ’¡ SugestÃµes de perguntas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map((o,f)=>e.jsx("button",{onClick:()=>g(o),className:"text-xs px-3 py-1.5 bg-white border border-purple-200 text-purple-700 rounded-full hover:bg-purple-50 transition-colors",children:o},f))})]}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-white rounded-b-2xl",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:A,onChange:o=>n(o.target.value),onKeyPress:b,placeholder:"Digite sua pergunta...",disabled:z,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"}),e.jsx("button",{onClick:$,disabled:!A.trim()||z,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:e.jsx(se,{size:20})})]})})]})}):null},pe=()=>{const[c,D]=d.useState(null),[x,E]=d.useState(!1),[w,A]=d.useState(null),[n,z]=d.useState([]),[k,v]=d.useState(!1),[F,$]=d.useState([]),[b,R]=d.useState(null),[g,o]=d.useState("upload"),f=t=>{var i;const h=(i=t.target.files)==null?void 0:i[0];h&&D(h)},s=async()=>{var h,i;if(!c){alert("Selecione um arquivo primeiro");return}const t=new FormData;t.append("arquivo",c),E(!0);try{const N=await S.post("/ia/extrato/upload",t,{headers:{"Content-Type":"multipart/form-data"}});A(N.data),alert(`Upload concluÃ­do! ${N.data.categorias_aplicadas} categorias aplicadas automaticamente.`)}catch(N){console.error("Erro no upload:",N);const _=((i=(h=N.response)==null?void 0:h.data)==null?void 0:i.detail)||N.message;alert("Erro ao processar arquivo: "+_)}finally{E(!1)}},a=async()=>{v(!0);try{const t=await S.get("/ia/extrato/pendentes");z(t.data)}catch(t){console.error("Erro ao carregar pendentes:",t),alert("Erro ao carregar lanÃ§amentos pendentes")}finally{v(!1)}},m=async t=>{try{await S.post("/ia/extrato/validar",{lancamento_id:t,aprovado:!0}),alert("LanÃ§amento aprovado!"),a()}catch(h){console.error("Erro ao aprovar:",h),alert("Erro ao aprovar lanÃ§amento")}},j=async(t,h)=>{try{await S.post("/ia/extrato/validar",{lancamento_id:t,aprovado:!1,categoria_correta_id:h}),alert("LanÃ§amento corrigido e padrÃ£o aprendido!"),a()}catch(i){console.error("Erro ao corrigir:",i),alert("Erro ao corrigir lanÃ§amento")}},u=async()=>{try{const t=await S.get("/ia/extrato/padroes");$(t.data)}catch(t){console.error("Erro ao carregar padrÃµes:",t),alert("Erro ao carregar padrÃµes aprendidos")}},C=async()=>{try{const t=await S.get("/ia/extrato/estatisticas");R(t.data)}catch(t){console.error("Erro ao carregar estatÃ­sticas:",t),alert("Erro ao carregar estatÃ­sticas")}};return ae.useEffect(()=>{g==="validacao"?a():g==="padroes"?u():g==="estatisticas"&&C()},[g]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>o("upload"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${g==="upload"?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(O,{size:18}),"Upload de Extrato"]}),e.jsxs("button",{onClick:()=>o("validacao"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${g==="validacao"?"bg-orange-100 text-orange-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(X,{size:18}),"ValidaÃ§Ã£o (",n.length,")"]}),e.jsxs("button",{onClick:()=>o("padroes"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${g==="padroes"?"bg-blue-100 text-blue-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(V,{size:18}),"PadrÃµes IA"]}),e.jsxs("button",{onClick:()=>o("estatisticas"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${g==="estatisticas"?"bg-purple-100 text-purple-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(G,{size:18}),"EstatÃ­sticas"]})]})}),g==="upload"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"text-green-600"}),"Upload de Extrato BancÃ¡rio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(T,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("p",{className:"mb-2 text-gray-600",children:"Arraste um arquivo ou clique para selecionar"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"âœ… Formatos: Excel (.xlsx, .xls), CSV (.csv), PDF (.pdf), OFX (.ofx)"}),e.jsx("input",{type:"file",onChange:f,accept:".xlsx,.xls,.csv,.pdf,.ofx",className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:"Selecionar Arquivo"}),c&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-green-700 font-medium",children:c.name}),e.jsxs("p",{className:"text-sm text-green-600",children:[(c.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{onClick:s,disabled:!c||x,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:x?"Processando...":"Processar Extrato"}),w&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"âœ… Resultado do Processamento"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["â€¢ Total de lanÃ§amentos: ",e.jsx("span",{className:"font-bold",children:w.total_lancamentos})]}),e.jsxs("p",{children:["â€¢ Categorizados automaticamente: ",e.jsx("span",{className:"font-bold text-green-700",children:w.categorias_aplicadas})]}),e.jsxs("p",{children:["â€¢ Pendentes de validaÃ§Ã£o: ",e.jsx("span",{className:"font-bold text-orange-700",children:w.pendentes_validacao})]})]})]})]})]}),g==="validacao"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"text-orange-600"}),"LanÃ§amentos Pendentes de ValidaÃ§Ã£o (",n.length,")"]}),k?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando..."}):n.length===0?e.jsxs("div",{className:"text-center text-gray-600 py-8",children:[e.jsx(q,{className:"mx-auto mb-2 text-green-500",size:48}),e.jsx("p",{children:"Nenhum lanÃ§amento pendente! ðŸŽ‰"})]}):e.jsx("div",{className:"space-y-3",children:n.map(t=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:t.descricao}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Data: ",new Date(t.data).toLocaleDateString("pt-BR")," | Valor: R$ ",Math.abs(t.valor).toFixed(2)]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["SugestÃ£o IA: ",t.categoria_sugerida]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ConfianÃ§a: ",(t.confianca*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>m(t.id),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",title:"Aprovar categoria sugerida",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:()=>{const h=prompt("Digite a categoria correta:");h&&j(t.id,h)},className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm",title:"Corrigir categoria",children:e.jsx(te,{size:16})})]})]})},t.id))})]}),g==="padroes"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"text-blue-600"}),"PadrÃµes Aprendidos pela IA"]}),F.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Nenhum padrÃ£o aprendido ainda"}):e.jsx("div",{className:"space-y-3",children:F.map((t,h)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["PadrÃ£o: ",t.descricao_padrao]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Categoria: ",t.categoria]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:["âœ“ ",t.vezes_usado," vezes usado"]}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["ConfianÃ§a: ",(t.confianca*100).toFixed(0),"%"]})]})]})})},h))})]}),g==="estatisticas"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"text-purple-600"}),"EstatÃ­sticas do Sistema IA"]}),b?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de PadrÃµes"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:b.total_padroes})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taxa de Acerto"}),e.jsxs("p",{className:"text-3xl font-bold text-green-900 mt-1",children:[(b.taxa_acerto*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"ConfianÃ§a MÃ©dia"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:[(b.confianca_media*100).toFixed(0),"%"]})]})]}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando estatÃ­sticas..."})]})})]})},ge=({dados:c,periodo:D})=>{const[x,E]=d.useState(null),[w,A]=d.useState(!0),[n,z]=d.useState(null),[k,v]=d.useState(null);d.useEffect(()=>{c&&($(),F())},[c,D]);const F=async()=>{try{const s=await S.get("/ia/dre/indices-mercado",{params:{setor:"pet_shop"}});v(s.data)}catch(s){console.error("Erro ao carregar Ã­ndices:",s)}},$=async()=>{A(!0);try{await new Promise(a=>setTimeout(a,1e3));const s=g(c);if(E(s),D.mes>1){const a=await b(D);a&&z(R(c,a))}}catch(s){console.error("Erro ao carregar anÃ¡lise:",s)}finally{A(!1)}},b=async s=>{try{const a=s.mes===1?12:s.mes-1,m=s.mes===1?s.ano-1:s.ano;return(await S.get("/financeiro/dre",{params:{ano:m,mes:a}})).data}catch{return null}},R=(s,a)=>{const m=(j,u)=>!u||u===0?null:(j-u)/Math.abs(u)*100;return{receita:{atual:s.receita_bruta||0,anterior:a.receita_bruta||0,variacao:m(s.receita_bruta,a.receita_bruta)},lucro:{atual:s.lucro_liquido||0,anterior:a.lucro_liquido||0,variacao:m(s.lucro_liquido,a.lucro_liquido)},despesas:{atual:s.total_despesas||0,anterior:a.total_despesas||0,variacao:m(s.total_despesas,a.total_despesas)},margem:{atual:s.margem_liquida||0,anterior:a.margem_liquida||0,variacao:m(s.margem_liquida,a.margem_liquida)}}},g=s=>{const a=[],m=[],j=[],u=s.margem_liquida||0;u<5?(j.push({tipo:"critico",titulo:"Margem lÃ­quida crÃ­tica",descricao:`Margem de apenas ${u.toFixed(1)}%. Ideal: acima de 10%`,icon:I}),m.push({prioridade:"alta",titulo:"Urgente: Revisar estrutura de custos",descricao:"Margem muito baixa. Considere: aumentar preÃ§os, reduzir custos fixos, ou renegociar com fornecedores."})):u<10?a.push({tipo:"atencao",titulo:"Margem lÃ­quida abaixo do ideal",descricao:`${u.toFixed(1)}% - HÃ¡ espaÃ§o para melhoria`,icon:U}):a.push({tipo:"positivo",titulo:"Margem lÃ­quida saudÃ¡vel",descricao:`${u.toFixed(1)}% - Acima da mÃ©dia do setor`,icon:q});const C=s.receita_bruta||0,t=s.total_despesas||0;t>C*.8&&j.push({tipo:"atencao",titulo:"Despesas elevadas",descricao:`Despesas representam ${(t/C*100).toFixed(0)}% da receita`,icon:I});const h=s.cmv||0,i=(C-h)/C*100;i<30&&m.push({prioridade:"media",titulo:"Revisar custo dos produtos",descricao:`Margem bruta de ${i.toFixed(1)}%. Considere negociar com fornecedores ou ajustar preÃ§os.`});const N=s.lucro_liquido||0;N>0?a.push({tipo:"positivo",titulo:"Resultado positivo",descricao:`Lucro de R$ ${N.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:G}):(j.push({tipo:"critico",titulo:"PrejuÃ­zo no perÃ­odo",descricao:`Resultado negativo de R$ ${Math.abs(N).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:U}),m.push({prioridade:"alta",titulo:"Plano de recuperaÃ§Ã£o necessÃ¡rio",descricao:"AnÃ¡lise detalhada de custos e revisÃ£o de estratÃ©gia de precificaÃ§Ã£o urgente."}));let _=50;return u>10&&(_+=20),u>5&&u<=10&&(_+=10),N>0&&(_+=15),i>30&&(_+=15),t<C*.7&&(_+=10),{insights:a,recomendacoes:m,alertas:j,score:Math.min(_,100)}},o=s=>{let a="red",m="CrÃ­tico";return s>=80?(a="green",m="Excelente"):s>=60?(a="yellow",m="Bom"):s>=40&&(a="orange",m="Regular"),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ne,{className:"text-purple-600"}),"Score de SaÃºde Financeira"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:a==="green"?"#10b981":a==="yellow"?"#fbbf24":a==="orange"?"#f59e0b":"#ef4444",strokeWidth:"12",fill:"none",strokeDasharray:`${s/100*351.86} 351.86`,className:"transition-all duration-1000"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:s})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800 mb-1",children:m}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s>=80&&"Sua saÃºde financeira estÃ¡ Ã³tima! Continue assim.",s>=60&&s<80&&"Boa saÃºde financeira. Pequenos ajustes podem melhorar.",s>=40&&s<60&&"SituaÃ§Ã£o estÃ¡vel, mas requer atenÃ§Ã£o.",s<40&&"AtenÃ§Ã£o! Medidas corretivas sÃ£o necessÃ¡rias."]})]})]})]})},f=()=>{if(!k||!c)return null;const s=k.benchmarks,a=c.receita_liquida||0,m=a>0?(c.cmv||0)/a*100:0,j=c.margem_bruta||0,u=c.margem_liquida||0,C=a>0?(c.despesas_admin||0)/a*100:0,t=a>0?(c.total_despesas||0)/a*100:0,h=[{nome:"CMV",seu:m,idealMin:s.cmv.min,idealMax:s.cmv.max,inverter:!0,unidade:"%",cor:m<=s.cmv.max?"green":m<=s.cmv.max*1.1?"yellow":"red"},{nome:"Margem Bruta",seu:j,idealMin:s.margem_bruta.min,idealMax:s.margem_bruta.max,inverter:!1,unidade:"%",cor:j>=s.margem_bruta.min?"green":j>=s.margem_bruta.min*.9?"yellow":"red"},{nome:"Margem LÃ­quida",seu:u,idealMin:s.margem_liquida.min,idealMax:s.margem_liquida.max,inverter:!1,unidade:"%",cor:u>=s.margem_liquida.min?"green":u>=s.margem_liquida.min*.8?"yellow":"red"},{nome:"Despesas Admin",seu:C,idealMin:0,idealMax:s.despesas_admin.max,inverter:!0,unidade:"%",cor:C<=s.despesas_admin.max?"green":C<=s.despesas_admin.max*1.2?"yellow":"red"},{nome:"Despesas Totais",seu:t,idealMin:0,idealMax:s.despesas_totais.max,inverter:!0,unidade:"%",cor:t<=s.despesas_totais.max?"green":t<=s.despesas_totais.max*1.2?"yellow":"red"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Y,{className:"text-indigo-600"}),"Seus Indicadores vs Mercado Pet Shop"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ce,{size:16}),e.jsxs("span",{children:["Fonte: ",k.fonte]})]})]}),e.jsx("div",{className:"space-y-4",children:h.map((i,N)=>{const _=i.idealMax-i.idealMin;i.idealMin+_/2;const B=i.seu>=i.idealMin&&i.seu<=i.idealMax;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:i.nome}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-lg font-bold ${i.cor==="green"?"text-green-600":i.cor==="yellow"?"text-yellow-600":"text-red-600"}`,children:[i.seu.toFixed(1),i.unidade]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Ideal: ",i.idealMin>0?`${i.idealMin.toFixed(0)}-`:"",i.idealMax.toFixed(0),i.unidade]})]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-200 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute h-full bg-green-200",style:{left:`${i.idealMin/100*100}%`,width:`${_/100*100}%`}}),e.jsx("div",{className:"absolute h-full w-2 bg-gray-800 shadow-lg z-10",style:{left:`${Math.min(Math.max(i.seu/100*100,0),100)}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"VocÃª"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm",children:B?e.jsxs(e.Fragment,{children:[e.jsx(q,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Dentro da faixa ideal!"})]}):i.seu<i.idealMin?e.jsxs(e.Fragment,{children:[e.jsx(U,{size:16,className:"text-orange-600"}),e.jsxs("span",{className:"text-orange-600",children:["Abaixo do ideal (",(i.idealMin-i.seu).toFixed(1),i.unidade," a menos)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{size:16,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Acima do ideal (+",(i.seu-i.idealMax).toFixed(1),i.unidade,")"]})]})})]},N)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"ðŸ’¡ Faixa verde = Ideal para pet shops | Barra preta = Seu valor atual"})})]})};return w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Gerando anÃ¡lise inteligente..."})]})}):x?e.jsxs("div",{className:"space-y-6",children:[o(x.score),f(),n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"text-blue-600"}),"ComparaÃ§Ã£o com PerÃ­odo Anterior"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(n).map(([s,a])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 capitalize",children:s}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 mb-2",children:["R$ ",a.atual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.variacao!==null&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${a.variacao>0?"text-green-600":"text-red-600"}`,children:[a.variacao>0?e.jsx(ie,{size:16}):e.jsx(le,{size:16}),e.jsxs("span",{className:"font-semibold",children:[Math.abs(a.variacao).toFixed(1),"%"]})]})]},s))})]}),x.alertas.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"text-orange-600"}),"Pontos de AtenÃ§Ã£o"]}),e.jsx("div",{className:"space-y-3",children:x.alertas.map((s,a)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${s.tipo==="critico"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s.icon,{size:20,className:s.tipo==="critico"?"text-red-600":"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.descricao})]})]})},a))})]}),x.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Y,{className:"text-indigo-600"}),"Insights Inteligentes"]}),e.jsx("div",{className:"space-y-3",children:x.insights.map((s,a)=>e.jsx("div",{className:`p-4 rounded-lg ${s.tipo==="positivo"?"bg-green-50":s.tipo==="atencao"?"bg-yellow-50":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s.icon,{size:20,className:s.tipo==="positivo"?"text-green-600":s.tipo==="atencao"?"text-yellow-600":"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.descricao})]})]})},a))})]}),x.recomendacoes.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(oe,{className:"text-yellow-600"}),"RecomendaÃ§Ãµes EstratÃ©gicas"]}),e.jsx("div",{className:"space-y-3",children:x.recomendacoes.map((s,a)=>e.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${s.prioridade==="alta"?"bg-red-100 text-red-700":s.prioridade==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:s.prioridade.toUpperCase()}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.titulo})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.descricao})]}),e.jsx(J,{className:"text-purple-600 flex-shrink-0 ml-3",size:24})]})},a))})]})]}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(Brain,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600",children:"NÃ£o hÃ¡ dados suficientes para anÃ¡lise"})]})},be=()=>{var t,h,i,N,_,B,K;const[c,D]=d.useState("demonstrativo"),[x,E]=d.useState(!1),[w,A]=d.useState(!1),[n,z]=d.useState(null),[k]=d.useState([{id:"loja_fisica",nome:"Loja FÃ­sica",cor:"blue"},{id:"mercado_livre",nome:"Mercado Livre",cor:"yellow"},{id:"shopee",nome:"Shopee",cor:"orange"},{id:"amazon",nome:"Amazon",cor:"green"},{id:"ecommerce",nome:"E-commerce",cor:"purple"},{id:"app",nome:"App",cor:"indigo"}]),[v,F]=d.useState(["loja_fisica"]),$=()=>{const r=new Date,l=r.getFullYear(),p=String(r.getMonth()+1).padStart(2,"0");return`${l}-${p}`},[b,R]=d.useState($());d.useEffect(()=>{g()},[]);const g=async()=>{var r,l;A(!0);try{const[p,M]=b.split("-"),y=v.join(","),L=await S.get("/financeiro/dre/canais",{params:{ano:p,mes:M,canais:y}});z(L.data)}catch(p){console.error("Erro ao carregar DRE:",p),P.error("Erro ao carregar DRE: "+(((l=(r=p.response)==null?void 0:r.data)==null?void 0:l.detail)||p.message))}finally{A(!1)}},o=r=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r||0),f=r=>`${(r||0).toFixed(2)}%`,s=(r,l)=>!l||l===0?0:r/l*100,a=r=>{F(l=>l.includes(r)?l.filter(M=>M!==r):[...l,r])},m=()=>{F([])};d.useEffect(()=>{n&&g()},[v]);const j=r=>{const l=new Date;let p;switch(r){case"mes_atual":p=$();break;case"mes_anterior":const M=new Date(l.getFullYear(),l.getMonth()-1,1);p=`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}`;break;case"ano_atual":p=`${l.getFullYear()}-01`;break;default:return}R(p),setTimeout(()=>g(),100)},u=async()=>{try{const[r,l]=b.split("-");P.loading("Gerando PDF...",{id:"pdf"});const p=await S.get("/financeiro/dre/export/pdf",{params:{ano:r,mes:l},responseType:"blob"}),M=window.URL.createObjectURL(new Blob([p.data])),y=document.createElement("a");y.href=M,y.setAttribute("download",`dre_${l}_${r}.pdf`),document.body.appendChild(y),y.click(),y.remove(),P.success("Ã°Å¸â€œâ€ž PDF exportado com sucesso!",{id:"pdf"})}catch(r){console.error("Erro ao exportar PDF:",r),P.error("Erro ao exportar PDF",{id:"pdf"})}},C=async()=>{try{const[r,l]=b.split("-");P.loading("Gerando Excel...",{id:"excel"});const p=await S.get("/financeiro/dre/export/excel",{params:{ano:r,mes:l},responseType:"blob"}),M=window.URL.createObjectURL(new Blob([p.data])),y=document.createElement("a");y.href=M,y.setAttribute("download",`dre_${l}_${r}.xlsx`),document.body.appendChild(y),y.click(),y.remove(),P.success("Ã°Å¸â€œÅ  Excel exportado com sucesso!",{id:"excel"})}catch(r){console.error("Erro ao exportar Excel:",r),P.error("Erro ao exportar Excel",{id:"excel"})}};return w&&!n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando DRE..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ðŸ“Š DRE - DemonstraÃ§Ã£o do Resultado"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"AnÃ¡lise gerencial de receitas, custos e lucro"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl",title:"Consultar Especialista IA",children:[e.jsx(W,{size:20}),e.jsx("span",{className:"font-medium",children:"Chat IA"}),e.jsx(Q,{size:16,className:"animate-pulse"})]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Exportar para PDF",children:[e.jsx(T,{size:18}),"PDF"]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",title:"Exportar para Excel",children:[e.jsx(de,{size:18}),"Excel"]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>D("demonstrativo"),className:`${c==="demonstrativo"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(T,{size:18}),"Demonstrativo"]}),e.jsxs("button",{onClick:()=>D("extrato"),className:`${c==="extrato"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(O,{size:18}),"Extrato BancÃ¡rio",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full font-bold",children:"IA"})]}),e.jsxs("button",{onClick:()=>D("analise"),className:`${c==="analise"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(V,{size:18}),"AnÃ¡lise Inteligente",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded-full font-bold",children:"EM BREVE"})]})]})}),c==="demonstrativo"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j("mes_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"MÃªs Atual"}),e.jsx("button",{onClick:()=>j("mes_anterior"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"MÃªs Anterior"}),e.jsx("button",{onClick:()=>j("ano_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ano Atual"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PerÃ­odo (MÃªs/Ano)"}),e.jsx("input",{type:"month",value:b,onChange:r=>R(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(H,{size:18}),"Atualizar"]})})]})}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Receita Bruta"}),e.jsx(G,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:o(((t=n.totais)==null?void 0:t.receita_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Base de cÃ¡lculo"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"CMV"}),e.jsx(U,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:o(((h=n.totais)==null?void 0:h.cmv)||0)}),e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:[f(s((i=n.totais)==null?void 0:i.cmv,(N=n.totais)==null?void 0:N.receita_bruta))," da receita"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Lucro Bruto"}),e.jsx(J,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:o(((_=n.totais)==null?void 0:_.lucro_bruto)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"ApÃ³s custos"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Margem Bruta"}),e.jsx(xe,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:f(((B=n.totais)==null?void 0:B.margem_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Rentabilidade"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(q,{size:20,className:"text-blue-600"}),"AnÃ¡lise por Canal de Vendas"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Selecione os canais para adicionar suas mÃ©tricas na tabela DRE"})]}),v.length>0&&e.jsx("button",{onClick:m,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Limpar SeleÃ§Ã£o"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:k.map(r=>{const l=v.includes(r.id),p={blue:l?"bg-blue-600 text-white border-blue-600":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",yellow:l?"bg-yellow-500 text-white border-yellow-500":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100",orange:l?"bg-orange-500 text-white border-orange-500":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100",green:l?"bg-green-600 text-white border-green-600":"bg-green-50 text-green-700 border-green-200 hover:bg-green-100",purple:l?"bg-purple-600 text-white border-purple-600":"bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100",indigo:l?"bg-indigo-600 text-white border-indigo-600":"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100"};return e.jsxs("button",{onClick:()=>a(r.id),className:`${p[r.cor]} border-2 rounded-lg p-4 transition-all duration-200 transform ${l?"scale-105 shadow-lg":"hover:scale-102"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:r.nome}),l&&e.jsx(q,{size:20,className:"flex-shrink-0"})]}),l&&e.jsx("div",{className:"text-xs mt-1 opacity-90",children:"Ativo na tabela"})]},r.id)})}),v.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(V,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("span",{className:"font-semibold",children:[v.length," canal(is) selecionado(s)."]})," ","As mÃ©tricas de cada canal serÃ£o adicionadas na tabela DRE abaixo com suas respectivas receitas, custos e lucros."]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Receita"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(K=n==null?void 0:n.linhas)==null?void 0:K.map((r,l)=>{const p=r.nivel===0,M=r.nivel===1,y=r.cor_bg!=="#ffffff"?{backgroundColor:r.cor_bg}:{},L={color:r.cor};return e.jsxs("tr",{style:y,className:p?"font-bold":"",children:[e.jsx("td",{className:`px-6 py-3 ${M?"pl-12":""} ${p?"font-bold":""}`,style:L,children:r.descricao}),e.jsx("td",{className:`px-6 py-3 text-right ${p?"font-bold":""}`,style:L,children:o(r.valor)}),e.jsx("td",{className:`px-6 py-3 text-right ${p?"font-bold":""}`,style:L,children:f(r.percentual)})]},l)})})]})}),v.length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:"Ã°Å¸â€™Â¡ A DRE agora mostra automaticamente todos os canais com vendas no perÃƒÂ­odo selecionado."})})]}),!n&&!w&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(T,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Selecione um perÃ­odo e clique em Atualizar para visualizar o DRE"})]})]}),c==="extrato"&&e.jsx(pe,{}),c==="analise"&&e.jsx(ge,{dados:n,periodo:{mes:b.mes,ano:b.ano}}),e.jsx(me,{isOpen:x,onClose:()=>E(!1),contexto:{tipo:"DRE",periodo:`${b.mes}/${b.ano}`,valor:n==null?void 0:n.lucro_liquido,dados:n}})]})};export{be as default};
