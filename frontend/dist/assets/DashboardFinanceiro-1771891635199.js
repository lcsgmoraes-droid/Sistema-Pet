import{r as c,j as e,a as Q}from"./vendor-react-1771891635199.js";import{a as h}from"./index-1771891635199.js";import{n}from"./vendor-utils-1771891635199.js";import{s as ee,aM as z,I as se,a5 as ae,l as re,ab as te,w as oe,W as P,aN as ie,a1 as T,aB as V,ah as le,ai as q,ag as F,a0 as B,ac as ne,aO as L}from"./vendor-icons-1771891635199.js";import{R as ce,L as de,C as me,X as xe,Y as ge,T as pe,a as he,b as I}from"./vendor-recharts-1771891635199.js";const ue=({isOpen:d,onClose:_,onSuccess:b})=>{const[f,C]=c.useState(!1),[j,p]=c.useState(!1),[o,$]=c.useState({contas_pagar:[],contas_receber:[]}),[R,D]=c.useState({}),[m,y]=c.useState(new Set),[l,N]=c.useState("todos"),[k,v]=c.useState(!1),[u,a]=c.useState([]),[x,M]=c.useState({});c.useEffect(()=>{d&&(E(),O())},[d]);const O=async()=>{try{const s=await h.get("/dre/subcategorias");a(s.data)}catch(s){console.error("Erro ao carregar categorias DRE:",s)}},E=async()=>{C(!0);try{const s=await h.get("/dre/classificar/pendentes",{params:{limit:100}});$(s.data),await K(s.data),n.success(`${s.data.total_pendentes} lanÃ§amentos pendentes encontrados`)}catch(s){console.error("Erro ao carregar pendentes:",s),n.error("Erro ao carregar lanÃ§amentos pendentes")}finally{C(!1)}},K=async s=>{const i={};for(const t of s.contas_pagar)try{const r=await h.post("/dre/classificar/sugerir",{tipo:"pagar",lancamento_id:t.id});i[`pagar_${t.id}`]=r.data}catch(r){console.error(`Erro ao buscar sugestÃµes para pagar #${t.id}:`,r),i[`pagar_${t.id}`]=[]}for(const t of s.contas_receber)try{const r=await h.post("/dre/classificar/sugerir",{tipo:"receber",lancamento_id:t.id});i[`receber_${t.id}`]=r.data}catch(r){console.error(`Erro ao buscar sugestÃµes para receber #${t.id}:`,r),i[`receber_${t.id}`]=[]}D(i)},W=async(s,i,t)=>{p(!0);try{await h.post("/dre/classificar/aplicar",{tipo:s,lancamento_id:i,dre_subcategoria_id:t.dre_subcategoria_id,canal:null,regra_id:t.regra_id,forma_classificacao:"sugestao_aceita"}),y(r=>new Set([...r,`${s}_${i}`])),n.success(`âœ… Classificado: ${t.subcategoria_nome}`)}catch(r){console.error("Erro ao aplicar classificaÃ§Ã£o:",r),n.error("Erro ao aplicar classificaÃ§Ã£o")}finally{p(!1)}},X=async()=>{v(!0);try{const s=await h.post("/dre/classificar/auto-classificar-pendentes",null,{params:{apenas_alta_confianca:!0}});n.success(`ðŸ¤– Auto-classificaÃ§Ã£o concluÃ­da!
${s.data.total_classificado} de ${s.data.total_processado} lanÃ§amentos classificados`,{duration:5e3}),await E(),b&&b()}catch(s){console.error("Erro ao auto-classificar:",s),n.error("Erro ao executar auto-classificaÃ§Ã£o")}finally{v(!1)}},G=async(s,i,t)=>{if(!t){n.error("Selecione uma categoria DRE");return}p(!0);try{const r=u.find(g=>g.id===parseInt(t));await h.post("/dre/classificar/aplicar",{tipo:s,lancamento_id:i,dre_subcategoria_id:parseInt(t),canal:null,regra_id:null,forma_classificacao:"manual"}),y(g=>new Set([...g,`${s}_${i}`])),M(g=>{const w={...g};return delete w[`${s}_${i}`],w}),n.success(`âœ… Classificado manualmente: ${(r==null?void 0:r.nome)||"Categoria"}`)}catch(r){console.error("Erro ao aplicar classificaÃ§Ã£o manual:",r),n.error("Erro ao aplicar classificaÃ§Ã£o manual")}finally{p(!1)}},Y=async(s,i)=>{p(!0);try{y(t=>new Set([...t,`${s}_${i}`])),n.success('ðŸ“¦ Marcado como "NÃ£o Controla DRE" (Estoque/Produtos)')}catch(t){console.error("Erro ao marcar como nÃ£o-DRE:",t),n.error("Erro ao processar")}finally{p(!1)}},U=async(s,i,t,r,g)=>{if(!t){n.error("LanÃ§amento sem fornecedor/cliente vinculado");return}const w=r||g;if(!w){n.error("ID do fornecedor/cliente nÃ£o encontrado");return}if(window.confirm(`Deseja marcar "${t}" como fornecedor de produtos (NÃ£o Controla DRE)?

Todos os lanÃ§amentos deste fornecedor serÃ£o automaticamente ignorados no DRE.`)){p(!0);try{await h.patch(`/clientes/${w}/controla-dre?controla_dre=false`),y(A=>new Set([...A,`${s}_${i}`])),n.success(`âœ… Fornecedor "${t}" marcado como "NÃ£o Controla DRE"

Todos os lanÃ§amentos futuros serÃ£o ignorados automaticamente.`,{duration:6e3}),setTimeout(()=>E(),1e3)}catch(A){console.error("Erro ao marcar fornecedor:",A),n.error("Erro ao marcar fornecedor como NÃ£o DRE")}finally{p(!1)}}},Z=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0),H=s=>s?new Date(s).toLocaleDateString("pt-BR"):"-",J=s=>s>=90?"text-green-600 bg-green-100":s>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",S=(l==="pagar"?o.contas_pagar.map(s=>({...s,tipo:"pagar"})):l==="receber"?o.contas_receber.map(s=>({...s,tipo:"receber"})):[...o.contas_pagar.map(s=>({...s,tipo:"pagar"})),...o.contas_receber.map(s=>({...s,tipo:"receber"}))]).filter(s=>!m.has(`${s.tipo}_${s.id}`));return d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2",children:"ðŸ·ï¸ Classificar LanÃ§amentos Pendentes"}),e.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[S.length," lanÃ§amentos aguardando classificaÃ§Ã£o DRE"]})]}),e.jsx("button",{onClick:_,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(ee,{size:24})})]}),e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>N("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="todos"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["ðŸ“Š Todos (",o.contas_pagar.length+o.contas_receber.length,")"]}),e.jsxs("button",{onClick:()=>N("pagar"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="pagar"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["ðŸ’¸ A Pagar (",o.contas_pagar.length,")"]}),e.jsxs("button",{onClick:()=>N("receber"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="receber"?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:["ðŸ’° A Receber (",o.contas_receber.length,")"]})]}),e.jsx("button",{onClick:X,disabled:k||S.length===0,className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-2 rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:k?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"animate-spin",size:20}),"Auto-Classificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{size:20}),"Auto-Classificar (Alta ConfianÃ§a)"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(z,{className:"animate-spin text-purple-600",size:48})}):S.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(ae,{size:64,className:"text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold",children:"Nenhum lanÃ§amento pendente!"}),e.jsx("p",{className:"text-sm mt-2",children:"Todos os lanÃ§amentos foram classificados."})]}):e.jsx("div",{className:"space-y-4",children:S.map(s=>{const i=`${s.tipo}_${s.id}`,t=R[i]||[];return t[0],e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.tipo==="pagar"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:s.tipo==="pagar"?"ðŸ’¸ A Pagar":"ðŸ’° A Receber"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",s.id]})]}),e.jsx("h3",{className:"font-semibold text-gray-800 text-lg mb-1",children:s.descricao}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.beneficiario&&e.jsxs("span",{className:"flex items-center gap-1",children:["ðŸ‘¤ ",s.beneficiario]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(re,{size:14}),Z(s.valor)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{size:14}),H(s.data_vencimento)]}),s.tipo_documento&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:s.tipo_documento})]})]})}),t.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(oe,{className:"text-yellow-600",size:20}),e.jsx("span",{className:"text-sm text-yellow-700 font-semibold",children:"Nenhuma sugestÃ£o automÃ¡tica. Classifique manualmente."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:x[i]||"",onChange:r=>M(g=>({...g,[i]:r.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Selecione uma categoria DRE..."}),u.map(r=>e.jsxs("option",{value:r.id,children:[r.categoria_nome," â†’ ",r.nome]},r.id))]}),e.jsxs("button",{onClick:()=>G(s.tipo,s.id,x[i]),disabled:j||!x[i],className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:[e.jsx(P,{size:18}),"Classificar"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Y(s.tipo,s.id),disabled:j,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Marca apenas ESTE lanÃ§amento como NÃ£o DRE",children:"ðŸ“¦ Este LanÃ§amento"}),s.beneficiario&&e.jsxs("button",{onClick:()=>U(s.tipo,s.id,s.beneficiario,s.fornecedor_id,s.cliente_id),disabled:j,className:"flex-1 flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`Marca TODOS os lanÃ§amentos de ${s.beneficiario} como NÃ£o DRE`,children:['ðŸª Todo Fornecedor "',s.beneficiario,'"']})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"ðŸ¤– SugestÃµes de ClassificaÃ§Ã£o:"}),t.slice(0,3).map((r,g)=>e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg border-2 ${g===0?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:r.subcategoria_nome}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${J(r.confianca)}`,children:[r.confianca,"% confianÃ§a"]}),g===0&&e.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white rounded-full text-xs font-bold",children:"â­ Melhor"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:r.motivo}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Regra: ",r.regra_nome]})]}),e.jsxs("button",{onClick:()=>W(s.tipo,s.id,r),disabled:j,className:"ml-4 flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(P,{size:18}),"Aceitar"]})]},g))]})]},i)})})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center rounded-b-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:m.size})," classificados nesta sessÃ£o"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m.size>0&&b&&b(),_()},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Fechar"}),m.size>0&&e.jsx("button",{onClick:E,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Atualizar Lista"})]})]})]})}):null},we=()=>{const d=Q(),[_,b]=c.useState(!0),[f,C]=c.useState(30),[j,p]=c.useState(!1),[o,$]=c.useState({saldo_atual:0,contas_receber:{total:0,vencidas:0},contas_pagar:{total:0,vencidas:0},vendas_periodo:{quantidade:0,valor_total:0,finalizadas:0,ticket_medio:0},fluxo_periodo:{entradas:0,saidas:0,lucro:0}}),[R,D]=c.useState([]),[m,y]=c.useState({contas_receber:[],contas_pagar:[]}),l=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a||0),N=a=>new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),k=async()=>{b(!0);try{const a=await h.get(`/dashboard/resumo?periodo_dias=${f}`);$(a.data)}catch(a){console.error("Erro ao carregar resumo:",a)}try{const a=await h.get(`/dashboard/entradas-saidas?periodo_dias=${f}`);D(a.data)}catch(a){console.error("Erro ao carregar entradas/saÃ­das:",a)}try{const a=await h.get("/dashboard/contas-vencidas?limite=5");y(a.data)}catch(a){console.error("Erro ao carregar contas vencidas:",a)}b(!1)};if(c.useEffect(()=>{k()},[f]),_)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})});const v=[{nome:"Loja FÃ­sica",valor:o.vendas_periodo.valor_total||0,margem:35.5,lucro:(o.vendas_periodo.valor_total||0)*.355,icon:ie,color:"blue",isMock:!1,onClick:()=>d("/financeiro/relatorio-vendas")},{nome:"Mercado Livre",valor:8450,margem:18.2,lucro:1537.9,icon:T,color:"yellow",isMock:!0,onClick:()=>n("IntegraÃ§Ã£o com Mercado Livre em breve",{icon:"ðŸ“¦"})},{nome:"Shopee",valor:5230,margem:22.5,lucro:1176.75,icon:V,color:"orange",isMock:!0,onClick:()=>n("IntegraÃ§Ã£o com Shopee em breve",{icon:"ðŸ›’"})},{nome:"Amazon",valor:12890,margem:15.8,lucro:2036.62,icon:T,color:"purple",isMock:!0,onClick:()=>n("IntegraÃ§Ã£o com Amazon em breve",{icon:"ðŸ“¦"})}],u=a=>{const x={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",red:"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",yellow:"from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"};return x[a]||x.blue};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Gerencial"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"VisÃ£o consolidada do seu negÃ³cio"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-5 py-2.5 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("span",{className:"text-xl",children:"ðŸ·ï¸"}),"Classificar DRE"]}),e.jsx("div",{className:"flex gap-2",children:[7,15,30,60,90].map(a=>e.jsxs("button",{onClick:()=>C(a),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f===a?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[a," dias"]},a))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{onClick:()=>d("/financeiro/fluxo-caixa"),className:`bg-gradient-to-br ${u("blue")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(le,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:"Atual"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold",children:l(o.saldo_atual)}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver fluxo de caixa"})]}),e.jsxs("div",{onClick:()=>d("/financeiro/contas-receber"),className:`bg-gradient-to-br ${u("green")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(q,{className:"w-6 h-6"})}),o.contas_receber.vencidas>0&&e.jsx(F,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Receber"}),e.jsx("p",{className:"text-2xl font-bold",children:l(o.contas_receber.total)}),o.contas_receber.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:["âš ï¸ Vencidas: ",l(o.contas_receber.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>d("/financeiro/contas-pagar"),className:`bg-gradient-to-br ${u("red")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(B,{className:"w-6 h-6"})}),o.contas_pagar.vencidas>0&&e.jsx(F,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Pagar"}),e.jsx("p",{className:"text-2xl font-bold",children:l(o.contas_pagar.total)}),o.contas_pagar.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:["âš ï¸ Vencidas: ",l(o.contas_pagar.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>d("/financeiro/dre"),className:`bg-gradient-to-br ${o.fluxo_periodo.lucro>=0?u("purple"):u("orange")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsxs("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:[f," dias"]})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:o.fluxo_periodo.lucro>=0?"Lucro":"PrejuÃ­zo"}),e.jsx("p",{className:"text-2xl font-bold",children:l(Math.abs(o.fluxo_periodo.lucro))}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver DRE completo"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Vendas por Canal"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance de cada canal de vendas"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-medium",children:"Marketplaces em preparaÃ§Ã£o"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((a,x)=>e.jsxs("div",{onClick:a.onClick,className:"bg-gray-50 rounded-lg p-5 border border-gray-200 hover:shadow-md transition-all cursor-pointer transform hover:scale-105 relative",children:[a.isMock&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded",children:"Mock"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${u(a.color)} p-3 rounded-lg`,children:e.jsx(a.icon,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:a.nome})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Valor Vendido"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l(a.valor)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Margem"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[a.margem,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Lucro Est."}),e.jsx("p",{className:"text-sm font-semibold text-green-600",children:l(a.lucro)})]})]})]})]},x))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Total consolidado:"})," ",l(v.reduce((a,x)=>a+x.valor,0))," "," | ",e.jsx("strong",{children:"Lucro total:"})," ",l(v.reduce((a,x)=>a+x.lucro,0))]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(L,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Insights Inteligentes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Alertas e sugestÃµes automÃ¡ticas"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 text-center",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 opacity-75"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Em breve a IA mostrarÃ¡ aqui:"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm opacity-90",children:[e.jsx("p",{children:"â€¢ Problemas urgentes detectados"}),e.jsx("p",{children:"â€¢ Oportunidades de lucro identificadas"}),e.jsx("p",{children:"â€¢ AÃ§Ãµes recomendadas para hoje"})]}),e.jsx("p",{className:"text-xs mt-4 opacity-75",children:"Sem mÃ¡gica. Apenas anÃ¡lise inteligente dos seus dados reais."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>d("/pdv"),className:"bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(V,{className:"w-5 h-5"}),"Nova Venda"]}),e.jsxs("button",{onClick:()=>d("/financeiro/contas-receber"),className:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(q,{className:"w-5 h-5"}),"Registrar Recebimento"]}),e.jsxs("button",{onClick:()=>d("/financeiro/contas-pagar"),className:"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(B,{className:"w-5 h-5"}),"Registrar Despesa"]}),e.jsxs("button",{onClick:()=>d("/ia/fluxo-caixa"),className:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(L,{className:"w-5 h-5"}),"RevisÃµes IA"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg mb-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:["Fluxo Financeiro (",f," dias)"]}),e.jsx(ce,{width:"100%",height:300,children:e.jsxs(de,{data:R,children:[e.jsx(me,{strokeDasharray:"3 3"}),e.jsx(xe,{dataKey:"data",tickFormatter:N,style:{fontSize:"12px"}}),e.jsx(ge,{tickFormatter:a=>`R$ ${(a/1e3).toFixed(0)}k`,style:{fontSize:"12px"}}),e.jsx(pe,{formatter:a=>l(a),labelFormatter:N}),e.jsx(he,{}),e.jsx(I,{type:"monotone",dataKey:"entradas",stroke:"#10B981",strokeWidth:2,name:"Entradas"}),e.jsx(I,{type:"monotone",dataKey:"saidas",stroke:"#EF4444",strokeWidth:2,name:"SaÃ­das"})]})})]}),(m.contas_receber.length>0||m.contas_pagar.length>0)&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-red-500"}),"AtenÃ§Ã£o: Contas Vencidas"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[m.contas_receber.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Receber (",m.contas_receber.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_receber.slice(0,3).map(a=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a.cliente||"Sem cliente"}),e.jsx("p",{className:"font-bold text-red-600 text-sm",children:l(a.saldo)})]}),e.jsxs("p",{className:"text-xs text-red-600",children:["Venceu hÃ¡ ",a.dias_vencido," dias"]})]},a.id))})]}),m.contas_pagar.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Pagar (",m.contas_pagar.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_pagar.slice(0,3).map(a=>e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a.fornecedor||"Sem fornecedor"}),e.jsx("p",{className:"font-bold text-orange-600 text-sm",children:l(a.saldo)})]}),e.jsxs("p",{className:"text-xs text-orange-600",children:["Venceu hÃ¡ ",a.dias_vencido," dias"]})]},a.id))})]})]})]}),e.jsx(ue,{isOpen:j,onClose:()=>p(!1)})]})};export{we as default};
