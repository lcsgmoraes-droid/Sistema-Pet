import{c as ie,r as p,j as e,R as vt}from"./vendor-react-1771887373071.js";import{a as we}from"./index-1771887373071.js";import{u as I,w as ft}from"./vendor-xlsx-1771887373071.js";import{z as de}from"./vendor-utils-1771887373071.js";import{ac as _t,aK as wt,au as Ft,aL as Ct,aW as qt,ah as Me,a1 as Dt,ai as kt,ad as At,b as St,aH as $t,aX as E,aY as L,aI as Pt}from"./vendor-icons-1771887373071.js";import{R as $,L as Vt,C as Y,X as Q,Y as R,T as P,a as T,b as Ee,B as ee,c as D,d as Fe,e as Le,f as Re}from"./vendor-recharts-1771887373071.js";var Te={exports:{}};(function(te,ue){(function(v,C){C()})(ie,function(){function v(x,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\uFEFF",x],{type:x.type}):x}function C(x,n,_){var g=new XMLHttpRequest;g.open("GET",x),g.responseType="blob",g.onload=function(){O(g.response,n,_)},g.onerror=function(){console.error("could not download file")},g.send()}function j(x){var n=new XMLHttpRequest;n.open("HEAD",x,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function B(x){try{x.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),x.dispatchEvent(n)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ie=="object"&&ie.global===ie?ie:void 0,ae=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),O=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!ae?function(x,n,_){var g=c.URL||c.webkitURL,f=document.createElement("a");n=n||x.name||"download",f.download=n,f.rel="noopener",typeof x=="string"?(f.href=x,f.origin===location.origin?B(f):j(f.href)?C(x,n,_):B(f,f.target="_blank")):(f.href=g.createObjectURL(x),setTimeout(function(){g.revokeObjectURL(f.href)},4e4),setTimeout(function(){B(f)},0))}:"msSaveOrOpenBlob"in navigator?function(x,n,_){if(n=n||x.name||"download",typeof x!="string")navigator.msSaveOrOpenBlob(v(x,_),n);else if(j(x))C(x,n,_);else{var g=document.createElement("a");g.href=x,g.target="_blank",setTimeout(function(){B(g)})}}:function(x,n,_,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof x=="string")return C(x,n,_);var f=x.type==="application/octet-stream",K=/constructor/i.test(c.HTMLElement)||c.safari,se=/CriOS\/[\d]+/.test(navigator.userAgent);if((se||f&&K||ae)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var V=k.result;V=se?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=V:location=V,g=null},k.readAsDataURL(x)}else{var re=c.URL||c.webkitURL,A=re.createObjectURL(x);g?g.location=A:location.href=A,g=null,setTimeout(function(){re.revokeObjectURL(A)},4e4)}});c.saveAs=O.saveAs=O,te.exports=O})})(Te);var Mt=Te.exports;function Kt(){const[te,ue]=p.useState(!1),[v,C]=p.useState("resumo"),[j,B]=p.useState(""),[c,ae]=p.useState(""),[O,x]=p.useState(""),[n,_]=p.useState(!1),[g,f]=p.useState("mes_anterior"),[K,se]=p.useState(""),[k,re]=p.useState(""),[A,V]=p.useState(""),[ne,Be]=p.useState(!0),[le,Oe]=p.useState("financeiro"),[u,Ke]=p.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[N,Ce]=p.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[w,ze]=p.useState([]),[z,Ge]=p.useState([]),[ce,Ue]=p.useState([]),[W,Ie]=p.useState([]),[S,Ye]=p.useState([]),[G,Qe]=p.useState([]),[We,He]=p.useState([]),[je,Xe]=p.useState(new Set),[qe,Je]=p.useState([]),[xe,Ze]=p.useState([]),[De,et]=p.useState([]),[U,ke]=p.useState([]),[tt,Ae]=p.useState({}),[me,at]=p.useState([]),st=t=>{const a=new Set(je);a.has(t)?a.delete(t):a.add(t),Xe(a)},s=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),h=t=>t==null||isNaN(t)||!isFinite(t)?0:t,y=t=>{if(!t)return"N/A";try{if(t instanceof Date)return t.toLocaleDateString("pt-BR");if(typeof t=="string"&&t.includes("T")){const r=t.split("T")[0],[l,o,d]=r.split("-");return`${d}/${o}/${l}`}const a=new Date(t);return isNaN(a.getTime())?"N/A":a.toLocaleDateString("pt-BR")}catch{return"N/A"}},H=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],be=(t,a)=>{if(!t||t.length===0)return t;let r=[...t];return K&&a==="funcionario"&&(r=r.filter(l=>l.funcionario===K)),k&&a==="formaPagamento"&&(r=r.filter(l=>l.forma_pagamento===k)),A&&a==="categoria"&&(r=r.filter(l=>l.categoria===A)),r},X=be(z,"formaPagamento"),J=be(ce,"funcionario"),Se=be(G,"categoria"),oe=({titulo:t,valor:a,icone:r,cor:l,valorAnterior:o})=>{const d=M(a,o),i=d.percentual>0,m=d.percentual===0;return e.jsxs("div",{className:`${l} text-white p-4 rounded-lg shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:t}),e.jsx(r,{className:"w-5 h-5 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:s(a)}),n&&o!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${m?"opacity-70":""}`,children:[i&&e.jsx(E,{className:"w-4 h-4"}),!i&&!m&&e.jsx(L,{className:"w-4 h-4"}),m&&e.jsx(Pt,{className:"w-4 h-4"}),e.jsxs("span",{children:[Math.abs(d.percentual),"%"]})]})]})},$e=()=>{switch(g){case"periodo_anterior":return"mesmo perÃ­odo anterior";case"mes_anterior":return"mesmo perÃ­odo do mÃªs anterior";case"ano_anterior":return"mesmo perÃ­odo do ano anterior";default:return"perÃ­odo anterior"}},rt=async()=>{if(!j||!c){de.error("Selecione um perÃ­odo para gerar o relatÃ³rio");return}const t=de.loading("Gerando PDF...");try{const a=new URLSearchParams({data_inicio:j,data_fim:c});K&&a.append("funcionario",K),k&&a.append("forma_pagamento",k),A&&a.append("categoria",A);const r=await we.get(`/relatorios/vendas/export/pdf?${a.toString()}`,{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([r.data])),o=document.createElement("a");o.href=l,o.setAttribute("download",`relatorio_vendas_${j}_${c}.pdf`),document.body.appendChild(o),o.click(),o.remove(),de.success("ðŸ“„ PDF exportado com sucesso!")}catch(a){console.error("Erro ao exportar PDF:",a),de.error("Erro ao exportar PDF")}finally{de.dismiss(t)}},lt=()=>{const t=I.book_new(),a=[["RELATÃ“RIO DE VENDAS"],["PerÃ­odo:",`${y(j)} atÃ© ${y(c)}`],[""],["MÃ©trica","Valor"],["Venda Bruta",u.venda_bruta],["Taxa de Entrega",u.taxa_entrega],["Desconto",u.desconto],["Venda LÃ­quida",u.venda_liquida],["Em Aberto",u.em_aberto],["Quantidade de Vendas",u.quantidade_vendas]],r=I.aoa_to_sheet(a);if(I.book_append_sheet(t,r,"Resumo"),w.length>0){const m=[["Data","Qtd","Tkt. MÃ©dio","Vl. bruto","Taxa entrega","Desconto","(%)","Vl. lÃ­quido","Vl. recebido","Saldo aberto"],...w.map(b=>[y(b.data),b.quantidade,b.ticket_medio,b.valor_bruto,b.taxa_entrega,b.desconto,b.percentual_desconto,b.valor_liquido,b.valor_recebido,b.saldo_aberto])],F=I.aoa_to_sheet(m);I.book_append_sheet(t,F,"Vendas por Data")}if(X.length>0){const m=[["Forma","Valor pago"],...X.map(b=>[b.forma_pagamento,b.valor_total])],F=I.aoa_to_sheet(m);I.book_append_sheet(t,F,"Formas Pagamento")}const l=ft(t,{bookType:"xlsx",type:"binary"}),o=new ArrayBuffer(l.length),d=new Uint8Array(o);for(let m=0;m<l.length;m++)d[m]=l.charCodeAt(m)&255;const i=`relatorio_vendas_${j}_${c}.xlsx`;Mt.saveAs(new Blob([o],{type:"application/octet-stream"}),i)},Pe=t=>{const a=new Date,r=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),d=`${r}-${l}-${o}`;let i,m;switch(t){case"hoje":i=m=d;break;case"ontem":const F=new Date(a);F.setDate(a.getDate()-1);const b=F.getFullYear(),q=String(F.getMonth()+1).padStart(2,"0"),Ne=String(F.getDate()).padStart(2,"0");i=m=`${b}-${q}-${Ne}`;break;case"esta_semana":const he=a.getDay(),ye=he===0?6:he-1,Z=new Date(a);Z.setDate(a.getDate()-ye);const ve=Z.getFullYear(),fe=String(Z.getMonth()+1).padStart(2,"0"),nt=String(Z.getDate()).padStart(2,"0");i=`${ve}-${fe}-${nt}`,m=d;break;case"este_mes":i=`${r}-${l}-01`,m=d;break;case"mes_anterior":const Ve=new Date(a.getFullYear(),a.getMonth()-1,1),_e=new Date(a.getFullYear(),a.getMonth(),0),ct=Ve.getFullYear(),xt=String(Ve.getMonth()+1).padStart(2,"0"),mt=_e.getFullYear(),ht=String(_e.getMonth()+1).padStart(2,"0"),pt=String(_e.getDate()).padStart(2,"0");i=`${ct}-${xt}-01`,m=`${mt}-${ht}-${pt}`;break;case"ultimos_7_dias":const pe=new Date(a);pe.setDate(a.getDate()-7);const gt=pe.getFullYear(),ut=String(pe.getMonth()+1).padStart(2,"0"),jt=String(pe.getDate()).padStart(2,"0");i=`${gt}-${ut}-${jt}`,m=d;break;case"ultimos_30_dias":const ge=new Date(a);ge.setDate(a.getDate()-30);const bt=ge.getFullYear(),Nt=String(ge.getMonth()+1).padStart(2,"0"),yt=String(ge.getDate()).padStart(2,"0");i=`${bt}-${Nt}-${yt}`,m=d;break;case"este_ano":i=`${r}-01-01`,m=d;break;default:return}B(i),ae(m),x(t)},ot=()=>{const[t,a,r]=j.split("-").map(Number),[l,o,d]=c.split("-").map(Number),i=new Date(t,a-1,r),m=new Date(l,o-1,d),F=Math.floor((m-i)/(1e3*60*60*24))+1;let b,q;switch(g){case"periodo_anterior":b=new Date(i),b.setDate(i.getDate()-F),q=new Date(i),q.setDate(i.getDate()-1);break;case"mes_anterior":b=new Date(i),b.setMonth(i.getMonth()-1),q=new Date(m),q.setMonth(m.getMonth()-1);break;case"ano_anterior":b=new Date(i),b.setFullYear(i.getFullYear()-1),q=new Date(m),q.setFullYear(m.getFullYear()-1);break;default:return{data_inicio:"",data_fim:""}}const Ne=b.getFullYear(),he=String(b.getMonth()+1).padStart(2,"0"),ye=String(b.getDate()).padStart(2,"0"),Z=q.getFullYear(),ve=String(q.getMonth()+1).padStart(2,"0"),fe=String(q.getDate()).padStart(2,"0");return{data_inicio:`${Ne}-${he}-${ye}`,data_fim:`${Z}-${ve}-${fe}`}},M=(t,a)=>{if(!a||a===0)return{valor:0,percentual:0};const r=t-a,l=(r/a*100).toFixed(1);return{valor:r,percentual:parseFloat(l)}},it=async()=>{if(!(!j||!c)){ue(!0);try{const a=(await we.get("/relatorios/vendas/relatorio",{params:{data_inicio:j,data_fim:c}})).data;if(Ke(a.resumo||{}),ze(a.vendas_por_data||[]),Ge(a.formas_recebimento||[]),Ue(a.vendas_por_funcionario||[]),Ie(a.vendas_por_tipo||[]),Ye(a.vendas_por_grupo||[]),Qe(a.produtos_detalhados||[]),at(a.produtos_analise||[]),He(a.lista_vendas||[]),n||v==="comparacao"){const r=ot(),l=await we.get("/relatorios/vendas/relatorio",{params:r});Ce(l.data.resumo||{}),Je(l.data.formas_recebimento||[]),Ze(l.data.vendas_por_grupo||[]),et(l.data.vendas_por_funcionario||[])}else Ce({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0})}catch(t){console.error("Erro ao carregar relatÃ³rio:",t)}finally{ue(!1)}}},dt=()=>{if(!me||me.length===0){ke([]),Ae({});return}const t=me.map(l=>{const o=h(l.custo_total),d=h(l.valor_total),i=h(l.quantidade)||1,m=d-o,F=o>0?m/o*100:0;return{nome:l.nome||l.produto||"Produto sem nome",marca:l.marca||"-",quantidade:i,custo:h(o/i),preco:h(d/i),lucro_total:h(m),margem:h(F),categoria:l.categoria||"Sem Categoria"}}),a=t.sort((l,o)=>o.lucro_total-l.lucro_total).slice(0,20);ke(a);const r={};t.forEach(l=>{const o=l.categoria||"Sem Categoria";r[o]||(r[o]={quantidade:0,total:0,margens:[]}),r[o].quantidade+=l.quantidade,r[o].total+=l.preco*l.quantidade,r[o].margens.push(l.margem)}),Object.keys(r).forEach(l=>{const o=r[l].margens,d=o.reduce((i,m)=>h(i)+h(m),0);r[l].margem_media=h(o.length>0?d/o.length:0),delete r[l].margens}),Ae(r)};return p.useEffect(()=>{v==="analise"&&dt()},[me,v]),p.useEffect(()=>{it()},[j,c,n,g,v]),p.useEffect(()=>{Pe("este_mes")},[]),te?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:rt,disabled:!j||!c,title:j&&c?`Exportar PDF de ${y(j)} atÃ© ${y(c)}`:"Selecione um perÃ­odo",className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar PDF"}),j&&c&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",y(j)," - ",y(c),")"]})]})]}),e.jsxs("button",{onClick:lt,disabled:!j||!c,title:j&&c?`Exportar dados de ${y(j)} atÃ© ${y(c)}`:"Selecione um perÃ­odo",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar Excel"}),j&&c&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",y(j)," - ",y(c),")"]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:t=>_(t.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Comparar com:"})]}),n&&e.jsxs("select",{value:g,onChange:t=>f(t.target.value),className:"border rounded px-3 py-2 text-sm bg-blue-50 font-medium",children:[e.jsx("option",{value:"periodo_anterior",children:"PerÃ­odo imediatamente anterior (mesmo nÂº de dias)"}),e.jsx("option",{value:"mes_anterior",children:"Mesmo perÃ­odo do mÃªs passado"}),e.jsx("option",{value:"ano_anterior",children:"Mesmo perÃ­odo do ano passado"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"hoje",label:"Hoje"},{id:"ontem",label:"Ontem"},{id:"esta_semana",label:"Esta semana"},{id:"este_mes",label:"Este mÃªs"},{id:"mes_anterior",label:"MÃªs anterior"},{id:"ultimos_7_dias",label:"Ãšltimos 7 dias"},{id:"ultimos_30_dias",label:"Ãšltimos 30 dias"},{id:"este_ano",label:"Este ano"},{id:"personalizado",label:"Personalizado"}].map(t=>e.jsx("button",{onClick:()=>{t.id==="personalizado"?x("personalizado"):Pe(t.id)},className:`px-3 py-1 rounded text-sm font-medium transition-colors ${O===t.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))}),O==="personalizado"&&e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-gray-50 rounded",children:[e.jsx(Ft,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:j,onChange:t=>B(t.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"text-gray-600",children:"atÃ©"}),e.jsx("input",{type:"date",value:c,onChange:t=>ae(t.target.value),className:"border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx(Ct,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros AvanÃ§ados:"}),e.jsxs("select",{value:K,onChange:t=>se(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todos os funcionÃ¡rios"}),ce.map((t,a)=>e.jsx("option",{value:t.funcionario,children:t.funcionario},a))]}),e.jsxs("select",{value:k,onChange:t=>re(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as formas"}),z.map((t,a)=>e.jsx("option",{value:t.forma_pagamento,children:t.forma_pagamento},a))]}),e.jsxs("select",{value:A,onChange:t=>V(t.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),G.map((t,a)=>e.jsx("option",{value:t.categoria,children:t.categoria},a))]}),e.jsx("button",{onClick:()=>{se(""),re(""),V("")},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300 transition-colors",children:"Limpar Filtros"}),e.jsxs("button",{onClick:()=>Be(!ne),className:"ml-auto px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4"}),ne?"Ocultar":"Mostrar"," GrÃ¡ficos"]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>C("resumo"),className:`px-4 py-2 font-medium ${v==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>C("produtos"),className:`px-4 py-2 font-medium ${v==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/serviÃ§o"}),e.jsx("button",{onClick:()=>C("lista"),className:`px-4 py-2 font-medium ${v==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"}),e.jsx("button",{onClick:()=>C("comparacao"),className:`px-4 py-2 font-medium ${v==="comparacao"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"ComparaÃ§Ã£o de PerÃ­odos"}),e.jsx("button",{onClick:()=>C("analise"),className:`px-4 py-2 font-medium ${v==="analise"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"AnÃ¡lise Inteligente"})]})]}),v==="resumo"&&e.jsxs("div",{children:[n&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Modo ComparaÃ§Ã£o Ativo:"}),e.jsxs("span",{className:"text-blue-700 ml-2",children:["Comparando ",e.jsxs("span",{className:"font-medium",children:[y(j)," atÃ© ",y(c)]})," com ",e.jsx("span",{className:"font-medium",children:$e()})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsx(oe,{titulo:"Venda Bruta",valor:u.venda_bruta,icone:Me,cor:"bg-green-500",valorAnterior:N.venda_bruta}),e.jsx(oe,{titulo:"Taxa de Entrega",valor:u.taxa_entrega,icone:Dt,cor:"bg-gray-400",valorAnterior:N.taxa_entrega}),e.jsx(oe,{titulo:"Desconto",valor:u.desconto,icone:kt,cor:"bg-yellow-500",valorAnterior:N.desconto}),e.jsx(oe,{titulo:"Venda LÃ­quida",valor:u.venda_liquida,icone:Me,cor:"bg-blue-500",valorAnterior:N.venda_liquida}),e.jsx(oe,{titulo:"Em Aberto",valor:u.em_aberto,icone:At,cor:"bg-red-500",valorAnterior:N.em_aberto})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(u.custo_total||0)}),e.jsx("div",{className:"text-sm",children:"Custo Total"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(u.taxa_cartao_total||0)}),e.jsx("div",{className:"text-sm",children:"Taxas de CartÃ£o"})]}),e.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:s(u.lucro_total||0)}),e.jsx("div",{className:"text-sm",children:"Lucro Total"})]}),e.jsxs("div",{className:"bg-teal-500 text-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[u.margem_media||0,"%"]}),e.jsx("div",{className:"text-sm",children:"Margem MÃ©dia"})]})]}),ne&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vendas no PerÃ­odo"}),e.jsx($,{width:"100%",height:300,children:e.jsxs(Vt,{data:w,children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"data",tickFormatter:t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx(R,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(P,{formatter:t=>s(t),labelFormatter:t=>y(t)}),e.jsx(T,{}),e.jsx(Ee,{type:"monotone",dataKey:"valor_bruto",stroke:"#3B82F6",strokeWidth:2,name:"Venda Bruta"}),e.jsx(Ee,{type:"monotone",dataKey:"valor_liquido",stroke:"#10B981",strokeWidth:2,name:"Venda LÃ­quida"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Formas de Pagamento"}),e.jsx($,{width:"100%",height:350,children:e.jsxs(ee,{data:X,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{type:"number",tickFormatter:t=>s(t)}),e.jsx(R,{type:"category",dataKey:"forma_pagamento",width:110,style:{fontSize:"12px"}}),e.jsx(P,{formatter:(t,a,r)=>{const l=X.reduce((d,i)=>d+i.valor_total,0),o=(t/l*100).toFixed(1);return[`${s(t)} (${o}%)`,"Valor"]},contentStyle:{backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),e.jsx(D,{dataKey:"valor_total",fill:"#3B82F6",radius:[0,8,8,0],label:{position:"right",formatter:t=>{const a=X.reduce((l,o)=>l+o.valor_total,0);return`${(t/a*100).toFixed(1)}%`},style:{fontSize:"11px",fontWeight:"bold"}},children:X.map((t,a)=>e.jsx(Fe,{fill:H[a%H.length]},`cell-${a}`))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top 10 Categorias de Produtos"}),e.jsx($,{width:"100%",height:300,children:e.jsxs(ee,{data:Se.slice(0,10),children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"categoria"}),e.jsx(R,{tickFormatter:t=>`R$ ${(t/1e3).toFixed(0)}k`}),e.jsx(P,{formatter:t=>s(t)}),e.jsx(T,{}),e.jsx(D,{dataKey:"total_liquido",fill:"#3B82F6",name:"Valor LÃ­quido"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. MÃ©dio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[w.map((t,a)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:y(t.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.saldo_aberto)})]},a)),w.length>0&&(()=>{const t=w.reduce((d,i)=>d+i.quantidade,0),a=w.reduce((d,i)=>d+i.valor_bruto,0),r=w.reduce((d,i)=>d+i.desconto,0),l=t>0?a/t:0,o=a>0?(r/a*100).toFixed(1):0;return e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:t}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(l)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(a)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(w.reduce((d,i)=>d+i.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(r)}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[o,"%"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(w.reduce((d,i)=>d+i.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(w.reduce((d,i)=>d+i.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(w.reduce((d,i)=>d+i.saldo_aberto,0))})]})})()]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[z.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_total)})]},a)),z.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(z.reduce((t,a)=>t+a.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"FuncionÃ¡rio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[J.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),J.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:J.reduce((t,a)=>t+a.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(J.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(J.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(J.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[W.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),W.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:W.reduce((t,a)=>t+a.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(W.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(W.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(W.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lÃ­quido"})]})}),e.jsxs("tbody",{children:[S.map((t,a)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:t.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.valor_liquido)})]},a)),S.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(S.reduce((t,a)=>t+a.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(S.reduce((t,a)=>t+a.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(S.reduce((t,a)=>t+a.valor_liquido,0))})]})]})]})]})]})]}),v==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/ServiÃ§os"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/ServiÃ§os"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"LÃ­quido"})]})}),e.jsxs("tbody",{children:[Se.map((t,a)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-2",children:t.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(t.total_liquido)})]},`cat-${a}`),t.subcategorias&&t.subcategorias.map((r,l)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium",children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:r.subcategoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:r.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(r.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(r.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:s(r.total_liquido)})]},`sub-${a}-${l}`),r.produtos&&r.produtos.map((o,d)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:o.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:o.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(o.valor_liquido)})]},`prod-${a}-${l}-${d}`))]})),t.produtos&&t.produtos.map((r,l)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:r.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:r.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(r.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(r.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:s(r.valor_liquido)})]},`prod-${a}-${l}`))]})),G.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:G.reduce((t,a)=>t+a.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(G.reduce((t,a)=>t+a.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(G.reduce((t,a)=>t+a.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(G.reduce((t,a)=>t+a.total_liquido,0))})]})]})]})})]}),v==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas com AnÃ¡lise de Rentabilidade"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left w-8"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"CÃ³digo"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Entrega"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Operac."}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa CartÃ£o"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"ComissÃ£o"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Custo"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"LÃ­quida"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Custo"}),e.jsx("th",{className:"px-2 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:We.map(t=>e.jsxs(vt.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>st(t.id),children:[e.jsx("td",{className:"px-2 py-2",children:je.has(t.id)?e.jsx(St,{className:"w-4 h-4 text-gray-600"}):e.jsx($t,{className:"w-4 h-4 text-gray-600"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:y(t.data_venda)}),e.jsx("td",{className:"px-2 py-2",children:t.numero_venda}),e.jsx("td",{className:"px-2 py-2",children:t.cliente_nome}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:s(t.venda_bruta)}),e.jsxs("td",{className:"px-2 py-2 text-right text-red-600",children:["-",s(t.desconto)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",title:"ComissÃ£o repassada ao entregador",children:["-",s(t.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-500",title:"Custo operacional da entrega (empresa)",children:["-",s(t.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-purple-600",children:["-",s(t.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",children:["-",s(t.comissao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-pink-600",title:"Impostos sobre faturamento",children:["-",s(t.imposto||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-600",children:["-",s(t.custo_produtos)]}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:s(t.venda_liquida)}),e.jsx("td",{className:`px-2 py-2 text-right font-bold ${t.lucro>=0?"text-green-600":"text-red-600"}`,children:s(t.lucro)}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[t.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[t.margem_sobre_custo,"%"]}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="finalizada"?"bg-green-100 text-green-800":t.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="finalizada"?"Baixada":t.status==="baixa_parcial"?"Parcial":"Aberta"})})]}),je.has(t.id)&&t.itens&&t.itens.length>0&&e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"17",className:"px-4 py-3",children:e.jsxs("div",{className:"pl-8",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Produtos desta venda:"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Produto"}),e.jsx("th",{className:"px-2 py-1 text-center",children:"Qtd"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"PreÃ§o Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Entr."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Oper."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa CartÃ£o"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"ComissÃ£o"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Total"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"LÃ­quido"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Custo"})]})}),e.jsx("tbody",{children:t.itens.map((a,r)=>e.jsxs("tr",{className:"border-b border-blue-200 hover:bg-blue-100",children:[e.jsx("td",{className:"px-2 py-1",children:a.produto_nome}),e.jsx("td",{className:"px-2 py-1 text-center",children:a.quantidade}),e.jsx("td",{className:"px-2 py-1 text-right",children:s(a.preco_unitario)}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:s(a.venda_bruta)}),e.jsxs("td",{className:"px-2 py-1 text-right text-red-600",children:["-",s(a.desconto)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",s(a.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-500",children:["-",s(a.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-purple-600",children:["-",s(a.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",s(a.comissao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-pink-600",children:["-",s(a.imposto||0)]}),e.jsx("td",{className:"px-2 py-1 text-right text-orange-600",children:s(a.custo_unitario)}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-600 font-medium",children:["-",s(a.custo_total)]}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:s(a.valor_liquido)}),e.jsx("td",{className:`px-2 py-1 text-right font-bold ${a.lucro>=0?"text-green-600":"text-red-600"} cursor-help`,title:`Lucro unitÃ¡rio: ${s(a.lucro_unitario)}`,children:s(a.lucro)}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Margem unitÃ¡ria: ${a.margem_sobre_venda}%`,children:[a.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Markup unitÃ¡rio: ${a.margem_sobre_custo}%`,children:[a.margem_sobre_custo,"%"]})]},r))})]})]})})},`${t.id}-detalhes`)]},t.id))})]})})]}),v==="comparacao"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo de AnÃ¡lise:"}),e.jsxs("select",{value:le,onChange:t=>Oe(t.target.value),className:"border rounded px-4 py-2 text-sm bg-blue-50 font-medium min-w-[250px]",children:[e.jsx("option",{value:"financeiro",children:"ðŸ“Š ComparaÃ§Ã£o Financeira"}),e.jsx("option",{value:"formas_pagamento",children:"ðŸ’³ Por Forma de Pagamento"}),e.jsx("option",{value:"produtos",children:"ðŸ“¦ Por Grupo de Produtos"}),e.jsx("option",{value:"funcionarios",children:"ðŸ‘¥ Por FuncionÃ¡rio"})]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"PerÃ­odo Atual:"})," ",y(j)," - ",y(c)]})]})}),le==="financeiro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300",children:[e.jsxs("div",{className:"bg-gray-500 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“… PerÃ­odo Anterior"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:$e()})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:N.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:s(N.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s(N.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:s(N.venda_liquida-N.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-blue-500",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“… PerÃ­odo Atual"}),e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[y(j)," - ",y(c)]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:u.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:s(u.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:s(u.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:s(u.venda_liquida-u.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-green-500",children:[e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:"ðŸ“ˆ DiferenÃ§a"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"VariaÃ§Ã£o vs perÃ­odo anterior"})]}),e.jsx("div",{className:"p-4 space-y-3",children:(()=>{const t=M(u.quantidade_vendas,N.quantidade_vendas),a=M(u.venda_bruta,N.venda_bruta),r=M(u.venda_liquida,N.venda_liquida),l=u.venda_liquida-u.em_aberto,o=N.venda_liquida-N.em_aberto,d=M(l,o);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qtd de Vendas"}),e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${t.percentual>=0?"text-green-600":"text-red-600"}`,children:[t.percentual>=0?e.jsx(E,{className:"w-6 h-6"}):e.jsx(L,{className:"w-6 h-6"}),Math.abs(t.percentual),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.valor>=0?"+":"",t.valor.toFixed(0)," vendas"]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${a.percentual>=0?"text-green-600":"text-red-600"}`,children:[a.percentual>=0?e.jsx(E,{className:"w-5 h-5"}):e.jsx(L,{className:"w-5 h-5"}),Math.abs(a.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(a.valor)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor LÃ­quido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${r.percentual>=0?"text-green-600":"text-red-600"}`,children:[r.percentual>=0?e.jsx(E,{className:"w-5 h-5"}):e.jsx(L,{className:"w-5 h-5"}),Math.abs(r.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(r.valor)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${d.percentual>=0?"text-green-600":"text-red-600"}`,children:[d.percentual>=0?e.jsx(E,{className:"w-5 h-5"}):e.jsx(L,{className:"w-5 h-5"}),Math.abs(d.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s(d.valor)})]})]})})()})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual"}),e.jsx($,{width:"100%",height:300,children:e.jsxs(ee,{data:[{nome:"Qtd Vendas",Anterior:N.quantidade_vendas||0,Atual:u.quantidade_vendas||0},{nome:"Vl. Bruto (mil)",Anterior:(N.venda_bruta||0)/1e3,Atual:(u.venda_bruta||0)/1e3},{nome:"Vl. LÃ­quido (mil)",Anterior:(N.venda_liquida||0)/1e3,Atual:(u.venda_liquida||0)/1e3},{nome:"Vl. Recebido (mil)",Anterior:(N.venda_liquida-N.em_aberto||0)/1e3,Atual:(u.venda_liquida-u.em_aberto||0)/1e3}],children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"nome"}),e.jsx(R,{}),e.jsx(P,{formatter:(t,a)=>[a.includes("mil")?`R$ ${t.toFixed(1)}k`:t.toFixed(0),a]}),e.jsx(T,{}),e.jsx(D,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(D,{dataKey:"Atual",fill:"#3B82F6",name:"PerÃ­odo Atual"})]})})]})]}),le==="formas_pagamento"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por Forma de Pagamento"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Forma de Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"DiferenÃ§a"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o %"})]})}),e.jsx("tbody",{children:z.map((t,a)=>{const r=qe.find(o=>o.forma_pagamento===t.forma_pagamento)||{valor_total:0},l=M(t.valor_total,r.valor_total);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.forma_pagamento}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(r.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(l.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${l.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.percentual>=0?e.jsx(E,{className:"w-4 h-4"}):e.jsx(L,{className:"w-4 h-4"}),Math.abs(l.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual"}),e.jsx($,{width:"100%",height:350,children:e.jsxs(ee,{data:z.map(t=>{var a;return{nome:t.forma_pagamento,Anterior:(((a=qe.find(r=>r.forma_pagamento===t.forma_pagamento))==null?void 0:a.valor_total)||0)/1e3,Atual:t.valor_total/1e3}}),children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(R,{tickFormatter:t=>`R$ ${t.toFixed(0)}k`}),e.jsx(P,{formatter:t=>`R$ ${t.toFixed(1)}k`}),e.jsx(T,{}),e.jsx(D,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(D,{dataKey:"Atual",fill:"#10B981",name:"PerÃ­odo Atual"})]})})]})]}),le==="produtos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por Grupo de Produtos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Grupo"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"DiferenÃ§a"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o %"})]})}),e.jsx("tbody",{children:S.map((t,a)=>{const r=xe.find(o=>o.grupo===t.grupo)||{valor_liquido:0},l=M(t.valor_liquido,r.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.grupo}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(r.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right",children:s(l.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${l.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.percentual>=0?e.jsx(E,{className:"w-4 h-4"}):e.jsx(L,{className:"w-4 h-4"}),Math.abs(l.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"PerÃ­odo Anterior"}),e.jsx($,{width:"100%",height:300,children:e.jsxs(Le,{children:[e.jsx(Re,{data:xe,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:t=>{const a=(t.valor_liquido/xe.reduce((r,l)=>r+l.valor_liquido,0)*100).toFixed(1);return a>5?`${a}%`:""},children:xe.map((t,a)=>e.jsx(Fe,{fill:H[a%H.length]},`cell-${a}`))}),e.jsx(P,{formatter:t=>s(t)}),e.jsx(T,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"PerÃ­odo Atual"}),e.jsx($,{width:"100%",height:300,children:e.jsxs(Le,{children:[e.jsx(Re,{data:S,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:t=>{const a=(t.valor_liquido/S.reduce((r,l)=>r+l.valor_liquido,0)*100).toFixed(1);return a>5?`${a}%`:""},children:S.map((t,a)=>e.jsx(Fe,{fill:H[a%H.length]},`cell-${a}`))}),e.jsx(P,{formatter:t=>s(t)}),e.jsx(T,{verticalAlign:"bottom",height:36})]})})]})]})]}),le==="funcionarios"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o por FuncionÃ¡rio"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"FuncionÃ¡rio"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Atual"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"VariaÃ§Ã£o"})]})}),e.jsx("tbody",{children:ce.map((t,a)=>{const r=De.find(o=>o.funcionario===t.funcionario)||{quantidade:0,valor_liquido:0},l=M(t.valor_liquido,r.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.funcionario}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:r.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:t.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:s(r.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:s(t.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${l.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.percentual>=0?e.jsx(E,{className:"w-4 h-4"}):e.jsx(L,{className:"w-4 h-4"}),Math.abs(l.percentual),"%"]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ComparaÃ§Ã£o Visual - Valor LÃ­quido"}),e.jsx($,{width:"100%",height:350,children:e.jsxs(ee,{data:ce.map(t=>{var a;return{nome:t.funcionario,Anterior:(((a=De.find(r=>r.funcionario===t.funcionario))==null?void 0:a.valor_liquido)||0)/1e3,Atual:t.valor_liquido/1e3}}),children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(R,{tickFormatter:t=>`R$ ${t.toFixed(0)}k`}),e.jsx(P,{formatter:t=>`R$ ${t.toFixed(1)}k`}),e.jsx(T,{}),e.jsx(D,{dataKey:"Anterior",fill:"#9CA3AF",name:"PerÃ­odo Anterior"}),e.jsx(D,{dataKey:"Atual",fill:"#8B5CF6",name:"PerÃ­odo Atual"})]})})]})]})]}),v==="analise"&&e.jsxs("div",{className:"space-y-6",children:[te&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!te&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"AnÃ¡lise Inteligente de Produtos"})]}),e.jsx("p",{className:"text-blue-100",children:"Identifique os produtos mais lucrativos e oportunidades de melhoria no seu mix de produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"ðŸ† Top Produtos por Lucro"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Marca"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Qtd"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Custo Unit."}),e.jsx("th",{className:"text-right py-2 px-2",children:"PreÃ§o Venda"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Margem %"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Lucro Total"})]})}),e.jsx("tbody",{children:U.map((t,a)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-bold ${a===0?"bg-yellow-100 text-yellow-800":a===1?"bg-gray-100 text-gray-800":a===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:a+1})}),e.jsx("td",{className:"py-3 px-2 font-medium",children:t.nome}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:t.marca||"-"}),e.jsx("td",{className:"py-3 px-2 text-right",children:h(t.quantidade)}),e.jsx("td",{className:"py-3 px-2 text-right text-red-600",children:s(h(t.custo))}),e.jsx("td",{className:"py-3 px-2 text-right text-green-600",children:s(h(t.preco))}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${h(t.margem)>=50?"bg-green-100 text-green-800":h(t.margem)>=30?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[h(t.margem).toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 px-2 text-right font-bold text-green-600",children:s(h(t.lucro_total))})]},a))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ðŸ“Š Desempenho por Categoria"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(tt).map(([t,a])=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-2",children:t}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vendas:"}),e.jsx("span",{className:"font-semibold",children:h(a.quantidade)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Faturamento:"}),e.jsx("span",{className:"font-semibold text-green-600",children:s(h(a.total))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Margem MÃ©dia:"}),e.jsxs("span",{className:`font-semibold ${h(a.margem_media)>=40?"text-green-600":h(a.margem_media)>=25?"text-yellow-600":"text-red-600"}`,children:[h(a.margem_media).toFixed(1),"%"]})]})]})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"âš ï¸ AtenÃ§Ã£o: Margens Baixas"})]}),e.jsxs("div",{className:"space-y-2",children:[U.filter(t=>h(t.margem)<25).slice(0,5).map((t,a)=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border-l-4 border-red-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Margem: ",e.jsxs("span",{className:"font-semibold text-red-600",children:[h(t.margem).toFixed(1),"%"]})," - ","Revisar preÃ§o de custo ou venda"]})]},a)),U.filter(t=>h(t.margem)<25).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:"âœ… Nenhum produto com margem crÃ­tica"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"ðŸ’¡ Oportunidades"})]}),e.jsxs("div",{className:"space-y-3",children:[U.filter(t=>h(t.margem)>=40&&h(t.quantidade)<10).slice(0,3).map((t,a)=>e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-blue-800 mt-1",children:[e.jsxs("strong",{children:["Alta margem (",h(t.margem).toFixed(1),"%)"]})," mas poucas vendas (",h(t.quantidade)," un.)",e.jsx("br",{}),"ðŸ’¬ Considere promover este produto"]})]},a)),U.filter(t=>h(t.margem)>=40).slice(0,2).map((t,a)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[e.jsx("div",{className:"font-medium text-sm",children:t.nome}),e.jsxs("div",{className:"text-xs text-green-800 mt-1",children:[e.jsx("strong",{children:"â­ CampeÃ£o de vendas"})," com excelente margem",e.jsx("br",{}),"ðŸ’¬ Mantenha em destaque"]})]},`camp-${a}`))]})]})]}),ne&&U.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ðŸ“ˆ Margem vs Volume de Vendas"}),e.jsx($,{width:"100%",height:400,children:e.jsxs(ee,{data:U.slice(0,15).map(t=>({...t,margem:h(t.margem),quantidade:h(t.quantidade)})),children:[e.jsx(Y,{strokeDasharray:"3 3"}),e.jsx(Q,{dataKey:"nome",angle:-45,textAnchor:"end",height:120,interval:0,tick:{fontSize:11}}),e.jsx(R,{yAxisId:"left",orientation:"left",stroke:"#10B981",label:{value:"Margem %",angle:-90,position:"insideLeft"}}),e.jsx(R,{yAxisId:"right",orientation:"right",stroke:"#3B82F6",label:{value:"Quantidade",angle:90,position:"insideRight"}}),e.jsx(P,{}),e.jsx(T,{}),e.jsx(D,{yAxisId:"left",dataKey:"margem",fill:"#10B981",name:"Margem %"}),e.jsx(D,{yAxisId:"right",dataKey:"quantidade",fill:"#3B82F6",name:"Qtd Vendida"})]})})]})]})]}),"    "]})}export{Kt as default};
