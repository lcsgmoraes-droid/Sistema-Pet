import{r as d,j as e,R as U}from"./vendor-react-1771903905136.js";import{a as u}from"./api-1771903905136.js";import{c as F}from"./vendor-utils-1771903905136.js";import{b as q,a as T,f as J}from"./vendor-datefns-1771903905136.js";import"./index-1771903905136.js";import"./vendor-icons-1771903905136.js";const h="/whatsapp",f={async getConfig(){return(await u.get(`${h}/config`)).data},async getStats(){return(await u.get(`${h}/analytics/dashboard`)).data},async getAgents(){return(await u.get(`${h}/agents`)).data},async createAgent(s){return(await u.post(`${h}/agents`,s)).data},async getAgent(s){return(await u.get(`${h}/agents/${s}`)).data},async updateAgent(s,t){return(await u.put(`${h}/agents/${s}`,t)).data},async deleteAgent(s){await u.delete(`${h}/agents/${s}`)},async getHandoffs(s){const t=s?{status:s}:{};return(await u.get(`${h}/handoffs/pending`,{params:t})).data},async createHandoff(s){return(await u.post(`${h}/handoffs`,s)).data},async getHandoff(s){return(await u.get(`${h}/handoffs/${s}`)).data},async assignHandoff(s,t){return(await u.post(`${h}/handoffs/${s}/assign`,{agent_id:t})).data},async resolveHandoff(s,t){await u.post(`${h}/handoffs/${s}/resolve`,{resolution_notes:t})},async cancelHandoff(s){await u.post(`${h}/handoffs/${s}/cancel`)},async getNotes(s){return(await u.get(`${h}/handoffs/${s}/notes`)).data},async addNote(s,t){return(await u.post(`${h}/handoffs/${s}/notes`,{content:t})).data},async getMessages(s){return(await u.get(`${h}/sessions/${s}/messages`)).data},async sendMessage(s,t){return(await u.post(`${h}/messages`,{session_id:s,message:t})).data},async createSession(s){return(await u.post(`${h}/sessions`,s)).data},async getSession(s){return(await u.get(`${h}/sessions/${s}`)).data},async testSentiment(s){return(await u.post(`${h}/sentiment/test`,{text:s})).data}},S=F()((s,t)=>({stats:null,isLoadingStats:!1,agents:[],currentAgent:null,isLoadingAgents:!1,handoffs:[],activeHandoff:null,isLoadingHandoffs:!1,filterStatus:"all",messages:{},isLoadingMessages:{},isConnected:!1,isSidebarOpen:!0,isBotAssistOpen:!1,notifications:[],fetchStats:async()=>{if(t().isLoadingStats){console.log("â­ï¸ Stats already loading, skipping...");return}console.log("ðŸ“Š Fetching stats..."),s({isLoadingStats:!0});const a=new Promise((r,i)=>setTimeout(()=>i(new Error("Stats timeout")),1e4));try{const r=await Promise.race([f.getStats(),a]);console.log("âœ… Stats received:",r),s({stats:r,isLoadingStats:!1})}catch(r){console.error("âŒ Error fetching stats:",r),s({isLoadingStats:!1})}},fetchAgents:async()=>{s({isLoadingAgents:!0});try{const n=await f.getAgents();s({agents:n,isLoadingAgents:!1})}catch(n){console.error("Error fetching agents:",n),s({isLoadingAgents:!1})}},initializeCurrentAgent:async()=>{try{console.log("ðŸ”„ Initializing current agent...");const n=localStorage.getItem("user");if(!n){console.warn("âš ï¸ No user found in localStorage");return}const a=JSON.parse(n);console.log("ðŸ‘¤ User loaded:",a.email);const r=await f.getAgents();console.log("ðŸ“‹ Agents fetched:",r.length);let i=r.find(l=>l.user_id===a.id);i?(console.log("ðŸ”„ Updating existing agent to online..."),i=await f.updateAgent(i.id,{status:"online"}),console.log("âœ… Agent set to online:",i.id)):(console.log("âž• Creating new agent..."),i=await f.createAgent({name:a.name||a.email,email:a.email,status:"online",max_concurrent_chats:5,auto_assign:!0,receive_notifications:!0}),console.log("âœ… Created new agent:",i.id)),s({currentAgent:i}),console.log("âœ… Current agent initialized")}catch(n){console.error("âŒ Error initializing current agent:",n)}},updateAgentStatus:async n=>{const{currentAgent:a}=t();if(a)try{const r=await f.updateAgent(a.id,{status:n});s({currentAgent:r}),s(i=>({agents:i.agents.map(l=>l.id===r.id?r:l)}))}catch(r){console.error("Error updating agent status:",r)}},fetchHandoffs:async n=>{s({isLoadingHandoffs:!0});try{const a=await f.getHandoffs(n);s({handoffs:a,isLoadingHandoffs:!1})}catch(a){console.error("Error fetching handoffs:",a),s({isLoadingHandoffs:!1})}},setFilterStatus:n=>{s({filterStatus:n});const a={all:void 0,pending:"pending",active:"active",my:"active"};t().fetchHandoffs(a[n])},takeHandoff:async n=>{const{currentAgent:a}=t();if(a)try{const r=await f.assignHandoff(n,a.id);s(i=>({handoffs:i.handoffs.map(l=>l.id===r.id?r:l)})),s({activeHandoff:r}),t().addNotification({type:"success",title:"Conversa assumida",message:`VocÃª assumiu a conversa com ${r.customer_name||r.phone_number}`,timestamp:new Date().toISOString()})}catch(r){console.error("Error taking handoff:",r),t().addNotification({type:"error",title:"Erro",message:"NÃ£o foi possÃ­vel assumir a conversa",timestamp:new Date().toISOString()})}},resolveHandoff:async(n,a)=>{try{await f.resolveHandoff(n,a),s(r=>{var i;return{handoffs:r.handoffs.filter(l=>l.id!==n),activeHandoff:((i=r.activeHandoff)==null?void 0:i.id)===n?null:r.activeHandoff}}),t().addNotification({type:"success",title:"Conversa resolvida",message:"A conversa foi finalizada com sucesso",timestamp:new Date().toISOString()}),t().fetchStats()}catch(r){console.error("Error resolving handoff:",r),t().addNotification({type:"error",title:"Erro",message:"NÃ£o foi possÃ­vel resolver a conversa",timestamp:new Date().toISOString()})}},setActiveHandoff:n=>{s({activeHandoff:n})},fetchMessages:async n=>{s(a=>({isLoadingMessages:{...a.isLoadingMessages,[n]:!0}}));try{const a=await f.getMessages(n);s(r=>({messages:{...r.messages,[n]:a},isLoadingMessages:{...r.isLoadingMessages,[n]:!1}}))}catch(a){console.error("Error fetching messages:",a),s(r=>({isLoadingMessages:{...r.isLoadingMessages,[n]:!1}}))}},sendMessage:async(n,a)=>{try{const r=await f.sendMessage(n,a);s(i=>({messages:{...i.messages,[n]:[...i.messages[n]||[],r]}}))}catch(r){console.error("Error sending message:",r),t().addNotification({type:"error",title:"Erro ao enviar",message:"NÃ£o foi possÃ­vel enviar a mensagem",timestamp:new Date().toISOString()})}},addMessage:(n,a)=>{s(r=>({messages:{...r.messages,[n]:[...r.messages[n]||[],a]}}))},setConnected:n=>s({isConnected:n}),toggleSidebar:()=>s(n=>({isSidebarOpen:!n.isSidebarOpen})),toggleBotAssist:()=>s(n=>({isBotAssistOpen:!n.isBotAssistOpen})),addNotification:n=>{const a=Math.random().toString(36).substring(7);s(r=>({notifications:[...r.notifications,{...n,id:a}]})),setTimeout(()=>{t().removeNotification(a)},5e3)},removeNotification:n=>{s(a=>({notifications:a.notifications.filter(r=>r.id!==n)}))}}));class K{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.reconnectTimeout=null,this.pingInterval=null,this.agentId=null,this.token=null,this.handlers={},this.onConnectionChange=null,this.onMaxReconnectAttemptsReached=null}connect(t,n){var l;if(((l=this.ws)==null?void 0:l.readyState)===WebSocket.OPEN){console.log("WebSocket already connected");return}this.token=t,this.agentId=n;const i=`${"/api".replace("http://","ws://").replace("https://","wss://")}/ws/whatsapp/${n}?token=${t}`;console.log("ðŸ”Œ Connecting to WebSocket:",i);try{this.ws=new WebSocket(i),this.setupEventListeners()}catch(x){console.error("Error creating WebSocket:",x),this.handleReconnect()}}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.ws&&(this.ws.readyState===WebSocket.OPEN&&this.send({event:"leave_agent_room"}),this.ws.close(),this.ws=null),this.reconnectAttempts=0,this.token=null,this.agentId=null}setupEventListeners(){this.ws&&(this.ws.onopen=()=>{console.log("âœ… WebSocket connected"),this.reconnectAttempts=0,this.onConnectionChange&&this.onConnectionChange(!0),this.send({event:"join_agent_room"}),this.pingInterval=window.setInterval(()=>{var t;((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN&&this.send({event:"ping"})},3e4)},this.ws.onclose=t=>{console.log("âŒ WebSocket disconnected:",t.code,t.reason),this.onConnectionChange&&this.onConnectionChange(!1),t.code!==1e3&&this.handleReconnect()},this.ws.onerror=t=>{console.error("WebSocket error:",t)},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);this.handleMessage(n)}catch(n){console.error("Error parsing WebSocket message:",n)}})}handleMessage(t){const{event:n,data:a}=t;switch(console.log("ðŸ“© WebSocket message:",n,a),n){case"connected":console.log("Connection confirmed:",a);break;case"new_handoff":this.handlers.onNewHandoff&&this.handlers.onNewHandoff(a);break;case"handoff_assigned":this.handlers.onHandoffAssigned&&this.handlers.onHandoffAssigned(a);break;case"handoff_resolved":this.handlers.onHandoffResolved&&this.handlers.onHandoffResolved(a.handoff_id);break;case"new_message":this.handlers.onNewMessage&&this.handlers.onNewMessage(a.session_id,a.message);break;case"agent_status_change":this.handlers.onAgentStatusChange&&this.handlers.onAgentStatusChange(a);break;case"typing_indicator":this.handlers.onTypingIndicator&&this.handlers.onTypingIndicator(a.session_id,a.is_typing);break;default:console.warn("Unknown WebSocket event:",n)}}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.onMaxReconnectAttemptsReached&&this.onMaxReconnectAttemptsReached();return}this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),this.reconnectTimeout=setTimeout(()=>{this.token&&this.agentId&&this.connect(this.token,this.agentId)},t)}send(t){var n;((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(t)):console.warn("WebSocket is not open. Cannot send message:",t)}registerHandlers(t){this.handlers=t}joinAgentRoom(t){this.send({event:"join_agent_room",data:{agent_id:t}})}leaveAgentRoom(t){this.send({event:"leave_agent_room",data:{agent_id:t}})}sendTypingIndicator(t,n){this.send({event:"typing",data:{session_id:t,is_typing:n}})}isConnected(){var t;return((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN}getSocketId(){return this.agentId}}const b=new K,G=(s,t)=>{const[n,a]=d.useState(!1),{addNotification:r,fetchHandoffs:i,setConnected:l,addMessage:x,fetchStats:c}=S();return d.useEffect(()=>{if(!(!s||!t||n))return a(!0),console.log("ðŸ”Œ useSocket: Initializing WebSocket connection..."),b.onConnectionChange=o=>{l(o),r(o?{type:"success",title:"Conectado",message:"ConexÃ£o com servidor estabelecida",timestamp:new Date().toISOString()}:{type:"warning",title:"Desconectado",message:"Tentando reconectar ao servidor...",timestamp:new Date().toISOString()})},b.onMaxReconnectAttemptsReached=()=>{r({type:"error",title:"Erro de ConexÃ£o",message:"NÃ£o foi possÃ­vel conectar ao servidor. Recarregue a pÃ¡gina.",timestamp:new Date().toISOString()})},b.registerHandlers({onNewHandoff:o=>{console.log("ðŸ†• New handoff received:",o),i(),r({type:"info",title:"Nova Conversa",message:`${o.customer_name||o.phone_number} precisa de ajuda`,timestamp:new Date().toISOString()}),D("Nova Conversa - WhatsApp",`${o.customer_name||o.phone_number} - ${o.reason}`,o.priority),(o.priority==="urgent"||o.priority==="high")&&z()},onHandoffAssigned:o=>{console.log("ðŸ‘¤ Handoff assigned:",o),i(),o.assigned_agent_id===t&&r({type:"success",title:"Conversa AtribuÃ­da",message:`VocÃª foi atribuÃ­do Ã  conversa com ${o.customer_name||o.phone_number}`,timestamp:new Date().toISOString()})},onHandoffResolved:o=>{console.log("âœ… Handoff resolved:",o),i(),c()},onNewMessage:(o,g)=>{console.log("ðŸ’¬ New message:",o,g),x(o,g),g.sender_type==="customer"&&(r({type:"info",title:"Nova Mensagem",message:g.content.substring(0,50)+"...",timestamp:new Date().toISOString()}),z("message"))},onAgentStatusChange:o=>{console.log("ðŸ“Š Agent status changed:",o),c()},onTypingIndicator:(o,g)=>{console.log("âŒ¨ï¸ Typing indicator:",o,g)}}),b.connect(s,t),()=>{b.disconnect()}},[s,t]),{isConnected:b.isConnected(),socketId:b.getSocketId(),sendTypingIndicator:b.sendTypingIndicator.bind(b)}};function D(s,t,n){if(!("Notification"in window)){console.warn("Browser does not support notifications");return}if(Notification.permission==="granted"){const a=new Notification(s,{body:t,icon:"/logo192.png",badge:"/logo192.png",tag:"whatsapp-notification",requireInteraction:n==="urgent",silent:!1});a.onclick=()=>{window.focus(),a.close()},setTimeout(()=>a.close(),1e4)}else Notification.permission!=="denied"&&Notification.requestPermission().then(a=>{a==="granted"&&D(s,t,n)})}function z(s="handoff"){try{const t=new Audio(s==="handoff"?"/sounds/notification-handoff.mp3":"/sounds/notification-message.mp3");t.volume=.5,t.play().catch(n=>{console.warn("Could not play notification sound:",n)})}catch(t){console.warn("Error playing sound:",t)}}class Q extends d.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Algo deu errado"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Ocorreu um erro inesperado. Por favor, recarregue a pÃ¡gina."}),this.state.error&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded border border-gray-200",children:e.jsx("p",{className:"text-xs font-mono text-gray-700 break-words",children:this.state.error.message})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Recarregar PÃ¡gina"})]})}):this.props.children}}const X=d.memo(({stats:s,isLoading:t})=>{if(t)return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[...Array(6)].map((a,r)=>e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},r))});if(!s)return null;const n=[{label:"Total",value:s.total_handoffs,icon:"ðŸ’¬",color:"bg-blue-50 text-blue-700"},{label:"Aguardando",value:s.pending_count,icon:"â³",color:"bg-yellow-50 text-yellow-700"},{label:"Ativas",value:s.active_count,icon:"ðŸ’­",color:"bg-green-50 text-green-700"},{label:"Resolvidas",value:s.resolved_count,icon:"âœ…",color:"bg-gray-50 text-gray-700"},{label:"Agentes Online",value:s.available_agents||0,icon:"ðŸ‘¤",color:"bg-purple-50 text-purple-700"},{label:"Tempo MÃ©dio",value:s.avg_response_time_seconds?Math.round(s.avg_response_time_seconds/60)+"min":"0min",icon:"âš¡",color:"bg-orange-50 text-orange-700"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:n.map((a,r)=>e.jsxs("div",{className:`rounded-lg p-4 ${a.color}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsx("p",{className:"text-xs font-medium opacity-75",children:a.label})]}),e.jsx("p",{className:"text-2xl font-bold",children:a.value})]},r))})}),Y=d.memo(({agents:s,isLoading:t})=>{const{currentAgent:n,updateAgentStatus:a}=S(),r={online:"bg-green-500",busy:"bg-yellow-500",away:"bg-orange-500",offline:"bg-gray-400"},i={online:"Online",busy:"Ocupado",away:"Ausente",offline:"Offline"};return t?e.jsx("div",{className:"space-y-2",children:[...Array(3)].map((l,x)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-1"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]},x))}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:["Agentes (",s.length,")"]}),s.map(l=>e.jsxs("div",{className:`
            flex items-center gap-3 p-2 rounded-lg transition-colors
            ${(n==null?void 0:n.id)===l.id?"bg-blue-50":"hover:bg-gray-50"}
          `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r[l.status]}`}),l.status==="online"&&e.jsx("div",{className:`absolute inset-0 w-2 h-2 rounded-full ${r[l.status]} animate-ping opacity-75`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:i[l.status]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[l.current_chats,"/",l.max_concurrent_chats]})]})]}),(n==null?void 0:n.id)===l.id&&e.jsxs("select",{value:l.status,onChange:x=>a(x.target.value),className:"text-xs border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"busy",children:"Ocupado"}),e.jsx("option",{value:"away",children:"Ausente"}),e.jsx("option",{value:"offline",children:"Offline"})]})]},l.id)),s.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum agente disponÃ­vel"})]})}),Z=d.memo(({handoffs:s,activeHandoff:t,isLoading:n})=>{const{setActiveHandoff:a,takeHandoff:r}=S(),i={urgent:"bg-red-100 text-red-700 border-red-200",high:"bg-orange-100 text-orange-700 border-orange-200",medium:"bg-yellow-100 text-yellow-700 border-yellow-200",low:"bg-gray-100 text-gray-700 border-gray-200"},l={urgent:"ðŸš¨ Urgente",high:"âš ï¸ Alta",medium:"ðŸ“Œ MÃ©dia",low:"ðŸ“‹ Baixa"},x={pending:"â³",active:"ðŸ’¬",resolved:"âœ…",cancelled:"âŒ"};return n?e.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((c,o)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},o))}):s.length===0?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma conversa"})]})}):e.jsx("div",{className:"p-4 space-y-3",children:s.map(c=>{const o=(t==null?void 0:t.id)===c.id,g=c.status==="pending";return e.jsx("div",{onClick:()=>a(c),className:`
              border rounded-lg p-3 cursor-pointer transition-all
              ${o?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}
            `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center text-lg font-semibold
                ${i[c.priority]}
              `,children:c.customer_name?c.customer_name.charAt(0).toUpperCase():"ðŸ‘¤"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:c.customer_name||"Cliente"}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:q(new Date(c.created_at),{addSuffix:!0,locale:T})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:c.phone_number}),e.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:c.reason_details||c.reason}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`
                    text-xs px-2 py-1 rounded border
                    ${i[c.priority]}
                  `,children:l[c.priority]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:x[c.status]}),g&&e.jsx("button",{onClick:v=>{v.stopPropagation(),r(c.id)},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Assumir"})]})]})]})]})},c.id)})})}),ee=({handoff:s})=>{const{messages:t,isLoadingMessages:n,fetchMessages:a,sendMessage:r,resolveHandoff:i,toggleBotAssist:l}=S(),[x,c]=d.useState(""),[o,g]=d.useState(!1),[v,w]=d.useState(""),k=d.useRef(null),y=t[s.session_id]||[],A=n[s.session_id]||!1;d.useEffect(()=>{s.session_id&&a(s.session_id)},[s.session_id]),d.useEffect(()=>{var m;(m=k.current)==null||m.scrollIntoView({behavior:"smooth"})},[y]);const C=async()=>{x.trim()&&(await r(s.session_id,x),c(""))},_=async()=>{if(!v.trim()){alert("Por favor, adicione notas de resoluÃ§Ã£o");return}await i(s.id,v),g(!1),w("")},M=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),C())},L={urgent:"border-red-500 bg-red-50",high:"border-orange-500 bg-orange-50",medium:"border-yellow-500 bg-yellow-50",low:"border-gray-500 bg-gray-50"};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`border-b-4 ${L[s.priority]} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-lg font-semibold",children:s.customer_name?s.customer_name.charAt(0).toUpperCase():"ðŸ‘¤"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.customer_name||"Cliente"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.phone_number})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,className:"p-2 rounded-lg hover:bg-white hover:shadow transition-all",title:"Bot Assist",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),s.status==="active"&&e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Resolver"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Motivo:"})," ",s.reason]}),s.reason_details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.reason_details})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:A?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando mensagens..."})]})}):y.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma mensagem ainda"})]})}):e.jsxs(e.Fragment,{children:[y.map(m=>{const j=m.sender_type==="agent";return m.sender_type==="system"?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full",children:m.content})},m.id):e.jsx("div",{className:`flex ${j?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${j?"order-2":"order-1"}`,children:[e.jsx("div",{className:`
                      rounded-lg px-4 py-2
                      ${j?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}
                    `,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:m.content})}),e.jsx("p",{className:`text-xs text-gray-500 mt-1 ${j?"text-right":"text-left"}`,children:J(new Date(m.timestamp),"HH:mm",{locale:T})})]})},m.id)}),e.jsx("div",{ref:k})]})}),s.status==="active"&&!o&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:x,onChange:m=>c(m.target.value),onKeyPress:M,placeholder:"Digite sua mensagem...",rows:3,className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:C,disabled:!x.trim(),className:"px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:"Enviar"})]})}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resolver Conversa"}),e.jsx("textarea",{value:v,onChange:m=>w(m.target.value),placeholder:"Descreva como foi resolvido o atendimento...",rows:4,className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>{g(!1),w("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:_,disabled:!v.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Confirmar ResoluÃ§Ã£o"})]})]})})]})},se=({handoff:s})=>{const[t,n]=d.useState(""),[a,r]=d.useState(null),[i,l]=d.useState(!1),x=async()=>{if(t.trim()){l(!0);try{const o=await f.testSentiment(t);r(o)}catch(o){console.error("Error analyzing sentiment:",o)}finally{l(!1)}}},c=["Entendo sua frustraÃ§Ã£o. Vou verificar isso imediatamente.","Obrigado por aguardar. Estou analisando sua solicitaÃ§Ã£o.","Vou encaminhar para o setor responsÃ¡vel e retorno em breve.","Consegui resolver! Precisa de mais alguma coisa?"];return s?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bot Assist ðŸ¤–"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AnÃ¡lise de sentimento e sugestÃµes"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Analisar Sentimento"}),e.jsx("textarea",{value:t,onChange:o=>n(o.target.value),placeholder:"Cole uma mensagem do cliente...",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:x,disabled:!t.trim()||i,className:"mt-2 w-full px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:i?"Analisando...":"Analisar"}),a&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Score:"}),e.jsx("span",{className:`text-sm font-bold ${a.score>0?"text-green-600":a.score<0?"text-red-600":"text-gray-600"}`,children:a.score.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Label:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:a.label})]}),a.emotions.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"EmoÃ§Ãµes:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.emotions.map((o,g)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:o},g))})]}),a.triggers.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Gatilhos:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.triggers.map((o,g)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded",children:o},g))})]}),a.should_handoff&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:"âš ï¸ Recomenda handoff humano"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Respostas Sugeridas"}),e.jsx("div",{className:"space-y-2",children:c.map((o,g)=>e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o)},className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 text-sm text-gray-700 transition-colors",children:o},g))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"AÃ§Ãµes RÃ¡pidas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full px-4 py-2 bg-orange-50 text-orange-700 border border-orange-200 rounded-lg text-sm font-medium hover:bg-orange-100 transition-colors",children:"ðŸ“‹ Ver histÃ³rico completo"}),e.jsx("button",{className:"w-full px-4 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded-lg text-sm font-medium hover:bg-purple-100 transition-colors",children:"ðŸ“Š AnÃ¡lise de perfil"}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:"ðŸ”— Criar ticket"})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Selecione uma conversa para ver sugestÃµes"})})},te=({notification:s,onClose:t})=>{const[n,a]=d.useState(!1);d.useEffect(()=>{const l=setTimeout(()=>{a(!0),setTimeout(t,300)},5e3);return()=>clearTimeout(l)},[t]);const r={info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800"},i={info:"â„¹ï¸",success:"âœ…",warning:"âš ï¸",error:"âŒ"};return e.jsx("div",{className:`
        max-w-sm w-full bg-white border-2 rounded-lg shadow-lg p-4
        transform transition-all duration-300 ease-out
        ${n?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
        ${r[s.type]}
      `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:i[s.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-sm opacity-90",children:s.message})]}),e.jsx("button",{onClick:()=>{a(!0),setTimeout(t,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},ne=d.memo(({isConnected:s,socketId:t})=>e.jsxs("div",{className:`
      flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium
      ${s?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
    `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`
          w-2 h-2 rounded-full
          ${s?"bg-green-500":"bg-red-500"}
        `}),s&&e.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-500 rounded-full animate-ping opacity-75"})]}),e.jsx("span",{children:s?"Online":"Desconectado"}),s&&t&&e.jsxs("span",{className:"text-[10px] opacity-50 font-mono",title:`Socket ID: ${t}`,children:["â€¢ ",t.substring(0,6)]})]})),ae=()=>{const[s,t]=d.useState("default"),[n,a]=d.useState(!1);d.useEffect(()=>{"Notification"in window&&(t(Notification.permission),Notification.permission==="default"&&a(!0))},[]);const r=async()=>{if("Notification"in window){const i=await Notification.requestPermission();t(i),i==="granted"&&(a(!1),new Notification("NotificaÃ§Ãµes Ativadas",{body:"VocÃª receberÃ¡ alertas de novas conversas",icon:"/logo192.png"}))}};return!n||s==="granted"?null:e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Ativar NotificaÃ§Ãµes"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Receba alertas instantÃ¢neos quando novas conversas precisarem de atendimento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Ativar NotificaÃ§Ãµes"}),e.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-white text-blue-700 text-sm font-medium rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors",children:"Agora NÃ£o"})]})]}),e.jsx("button",{onClick:()=>a(!1),className:"flex-shrink-0 text-blue-400 hover:text-blue-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},ge=()=>{const[s,t]=U.useState(!0);console.log("ðŸŽ¯ WhatsAppDashboard component rendering...");const{stats:n,agents:a,handoffs:r,activeHandoff:i,filterStatus:l,isLoadingStats:x,isLoadingAgents:c,isLoadingHandoffs:o,isSidebarOpen:g,isBotAssistOpen:v,isConnected:w,notifications:k,currentAgent:y,fetchStats:A,fetchAgents:C,fetchHandoffs:_,initializeCurrentAgent:M,setFilterStatus:L,toggleSidebar:m,removeNotification:j}=S(),R=localStorage.getItem("access_token"),{socketId:B}=G(R,(y==null?void 0:y.id)||null);return d.useEffect(()=>{let p=!0,H=!1,$=null,E=!1;const P=async()=>{if(!(!p||H)){H=!0;try{console.log("ðŸš€ Initializing WhatsApp Dashboard...");const N=new Promise((W,V)=>setTimeout(()=>V(new Error("Initialization timeout")),15e3));try{await Promise.race([Promise.all([M(),A(),C(),_()]),N])}catch(W){console.warn("âš ï¸ Initialization timeout, continuing anyway:",W)}console.log("âœ… Dashboard initialized")}catch(N){console.error("âŒ Error initializing dashboard:",N)}finally{p&&t(!1)}}},I=async()=>{if(!(E||!p)){if(document.hidden){console.log("â¸ï¸ Page hidden, skipping refresh");return}E=!0,console.log("ðŸ”„ Refreshing dashboard data...");try{await Promise.all([A(),_(l==="all"?void 0:l)])}catch(N){console.error("Error refreshing data:",N)}finally{E=!1}}};P(),$=setInterval(I,6e4);const O=()=>{!document.hidden&&p&&(console.log("ðŸ‘ï¸ Page visible again, refreshing data"),I())};return document.addEventListener("visibilitychange",O),()=>{p=!1,$&&clearInterval($),document.removeEventListener("visibilitychange",O)}},[]),s?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando WhatsApp Dashboard..."})]})}):e.jsx(Q,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",role:"main","aria-label":"WhatsApp Dashboard",children:[e.jsx("div",{className:`
        transition-all duration-300 ease-in-out
        ${g?"w-80":"w-0"}
        border-r border-gray-200 bg-white overflow-hidden
      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Atendimento WhatsApp"}),e.jsx("div",{className:"mt-2",children:e.jsx(ne,{isConnected:w,socketId:B})})]}),e.jsx("button",{onClick:m,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Recolher painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","active","my"].map(p=>e.jsxs("button",{onClick:()=>L(p),className:`
                    px-3 py-1.5 rounded-lg text-sm font-medium transition-colors
                    ${l===p?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                  `,children:[p==="all"&&"Todas",p==="pending"&&"Aguardando",p==="active"&&"Ativas",p==="my"&&"Minhas"]},p))})]}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx(Y,{agents:a,isLoading:c})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(Z,{handoffs:r,activeHandoff:i,isLoading:o})})]})}),!g&&e.jsx("button",{onClick:m,className:"absolute top-4 left-4 z-10 p-2 bg-white rounded-lg shadow-lg hover:bg-gray-50 transition-colors",title:"Expandir painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(ae,{})}),e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(X,{stats:n,isLoading:x})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1",children:i?e.jsx(ee,{handoff:i}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione uma conversa"}),e.jsx("p",{className:"text-sm mt-1",children:"Escolha uma conversa da fila para comeÃ§ar"})]})})}),v&&e.jsx("div",{className:"w-80 border-l border-gray-200 bg-white",children:e.jsx(se,{handoff:i})})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:k.map(p=>e.jsx(te,{notification:p,onClose:()=>j(p.id)},p.id))})]})})};export{ge as WhatsAppDashboard};
