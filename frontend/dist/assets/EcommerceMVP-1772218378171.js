import{u as ro,S as oo,ah as no,r as s,j as r}from"./vendor-react-1772218378171.js";import{b as ao}from"./index-1772218378171.js";import{a as io}from"./api-1772218378171.js";const _=ao.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}});function U(...n){window.gtag&&window.gtag(...n)}function to(n){U("event","page_view",{page_title:{loja:"Loja",carrinho:"Carrinho",checkout:"Checkout",conta:"Minha Conta",pedidos:"Meus Pedidos"}[n]||n,page_location:window.location.href})}function so(n){U("event","view_item",{currency:"BRL",value:We(n),items:[Nr(n,1)]})}function Rr(n){U("event","add_to_cart",{currency:"BRL",value:We(n),items:[Nr(n,1)]})}function lo(n){U("event","begin_checkout",{currency:"BRL",value:Number((n==null?void 0:n.total)||0),items:Ne(n)})}function co(n,d){U("event","purchase",{transaction_id:(n==null?void 0:n.pedido_id)||"",currency:"BRL",value:Number((d==null?void 0:d.total)||0),items:Ne(d)})}function go(n){U("event","view_cart",{currency:"BRL",value:Number((n==null?void 0:n.total)||0),items:Ne(n)})}function We(n){return Number((n==null?void 0:n.preco_venda)??(n==null?void 0:n.preco)??(n==null?void 0:n.preco_unitario)??0)}function Nr(n,d){return{item_id:String((n==null?void 0:n.id)||(n==null?void 0:n.produto_id)||""),item_name:(n==null?void 0:n.nome)||(n==null?void 0:n.name)||"",price:We(n),quantity:Number(d)}}function Ne(n){return((n==null?void 0:n.itens)||[]).map(d=>({item_id:String(d.produto_id||""),item_name:d.nome||"",price:Number(d.preco_unitario||0),quantity:Number(d.quantidade||1)}))}const V="ecommerce_customer_token",we="ecommerce_customer_orders",Ae="ecommerce_customer_address",Ee="ecommerce_guest_cart",Cr="ecommerce_wishlist_products",zr="ecommerce_notify_requests",Ir="/api",D={pedido_id:null,itens:[],subtotal:0,total:0},ce={cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""};function k(n){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(n||0))}function Ar(n){if(!n)return"-";const d=new Date(n);return Number.isNaN(d.getTime())?"-":new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(d)}function Re(n){return Number((n==null?void 0:n.preco_venda)??(n==null?void 0:n.preco)??(n==null?void 0:n.preco_promocional)??0)}function H(n){const d=Number(n==null?void 0:n.estoque_ecommerce),f=Number(n==null?void 0:n.estoque_atual);return Number.isFinite(d)&&d>0?d:Number.isFinite(f)?f:Number.isFinite(d)?d:Number.POSITIVE_INFINITY}function Er(n){const d=H(n);return Number.isFinite(d)&&d<=0}async function Ce(n){const d=String(n||"").replace(/\D+/g,"");if(d.length!==8)return null;try{const f=await fetch(`https://viacep.com.br/ws/${d}/json/`);if(!f.ok)return null;const p=await f.json();return p!=null&&p.erro?null:{cep:d,endereco:(p==null?void 0:p.logradouro)||"",bairro:(p==null?void 0:p.bairro)||"",cidade:(p==null?void 0:p.localidade)||"",estado:(p==null?void 0:p.uf)||""}}catch{return null}}function po(){var n;return(n=window==null?void 0:window.crypto)!=null&&n.randomUUID?window.crypto.randomUUID():`checkout-${Date.now()}-${Math.random().toString(16).slice(2)}`}function G(n){if(!n||typeof n!="string")return"";if(/^https?:\/\//i.test(n))return n;const d=n.startsWith("/")?n:`/${n}`;return/^https?:\/\//i.test(Ir)?`${Ir.replace(/\/api\/?$/,"").replace(/\/$/,"")}${d}`:`${window.location.origin}${d}`}function Wr(n){return Array.isArray(n)?n:Array.isArray(n==null?void 0:n.items)?n.items:Array.isArray(n==null?void 0:n.itens)?n.itens:Array.isArray(n==null?void 0:n.produtos)?n.produtos:[]}function ze(){try{const n=localStorage.getItem(Ee);if(!n)return{...D};const d=JSON.parse(n);if(!Array.isArray(d==null?void 0:d.itens))return{...D};const f=Number((d==null?void 0:d.subtotal)||0),p=Number((d==null?void 0:d.total)||0);return{pedido_id:null,itens:d.itens,subtotal:f,total:p}}catch{return{...D}}}function Ie(n){const d=n.reduce((f,p)=>f+Number(p.preco_unitario||0)*Number(p.quantidade||0),0);return{pedido_id:null,itens:n,subtotal:d,total:d}}function uo(){try{const n=localStorage.getItem(Ae);if(!n)return{...ce};const d=JSON.parse(n);return typeof d=="object"&&d!==null?{...ce,...d}:{...ce,endereco:String(n||"")}}catch{const n=localStorage.getItem(Ae)||"";return{...ce,endereco:n}}}function fo(n){const d=[n.endereco,n.numero].filter(Boolean).join(", "),f=n.bairro?`Bairro: ${n.bairro}`:"",p=[n.cidade,n.estado].filter(Boolean).join("/"),b=n.cep?`CEP: ${n.cep}`:"",x=n.complemento?`Compl.: ${n.complemento}`:"";return[d,f,p,b,x].filter(Boolean).join(" | ")}function F(n){const d=[];return n!=null&&n.imagem_principal&&d.push(G(n.imagem_principal)),Array.isArray(n==null?void 0:n.imagens)&&n.imagens.forEach(f=>{typeof f=="string"&&f.trim()?d.push(G(f.trim())):f!=null&&f.url&&typeof f.url=="string"&&d.push(G(f.url.trim()))}),Array.from(new Set(d.filter(Boolean)))}function ho(n){const d=String(n||"");return d?d.includes("??")||d.includes("ÔøΩ")||/\?{2,}/.test(d):!1}function mo(n){return String(n||"").split("-").filter(Boolean).map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")}function w(n,d){var b;const f=(b=n==null?void 0:n.response)==null?void 0:b.data,p=f==null?void 0:f.detail;if(typeof p=="string"&&p.trim())return p;if(Array.isArray(p)&&p.length>0){const x=p[0];if(typeof x=="string"&&x.trim())return x;if(typeof(x==null?void 0:x.msg)=="string"&&x.msg.trim())return x.msg}if(Array.isArray(f==null?void 0:f.details)&&f.details.length>0){const x=f.details[0];if(typeof x=="string"&&x.trim())return x;if(typeof(x==null?void 0:x.msg)=="string"&&x.msg.trim())return x.msg}return typeof(f==null?void 0:f.message)=="string"&&f.message.trim()?f.message:d}const xo=[{bg:"linear-gradient(135deg, #6366f1 0%, #4f46e5 60%, #4338ca 100%)",title:"Compre e receba no mesmo dia!",sub:"Pedidos realizados at√© as 16h",emoji:"üöÄ"},{bg:"linear-gradient(135deg, #10b981 0%, #059669 60%, #047857 100%)",title:"Retire na loja",sub:"Super simples e sem custo de frete!",emoji:"üè™"},{bg:"linear-gradient(135deg, #f59e0b 0%, #d97706 60%, #b45309 100%)",title:"As melhores ra√ß√µes em Prudente",sub:"Cachorros, gatos, p√°ssaros e mais üêæ",emoji:"üê∂"}];function vo(){var mr,xr,br,yr,jr,vr,Sr,_r,kr,wr;const n=ro(),d=oo(),f=no(),[p,b]=s.useState("loja");s.useEffect(()=>{to(p),p==="carrinho"&&go(c)},[p]);const[x,Te]=s.useState(0),[Be,Pe]=s.useState(null),[ge,Q]=s.useState(!1),[A,X]=s.useState([]),[K,Le]=s.useState(""),[Z,Tr]=s.useState("todas"),[m,Fe]=s.useState(null),[Me,Br]=s.useState(!1),[qe,Pr]=s.useState(!1),[Oe,ee]=s.useState(!1),[$e,De]=s.useState(!1),[Lr,Ue]=s.useState(!1),[v,re]=s.useState(localStorage.getItem(V)||""),[a,M]=s.useState(null),[Ke,Ye]=s.useState(!1),[h,y]=s.useState({nome:"",telefone:"",cpf:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",usar_endereco_entrega_diferente:!1,entrega_nome:"",entrega_cep:"",entrega_endereco:"",entrega_numero:"",entrega_complemento:"",entrega_bairro:"",entrega_cidade:"",entrega_estado:""}),[Y,oe]=s.useState({email:"",password:"",nome:""}),[ne,pe]=s.useState({email:"",password:""}),[c,E]=s.useState(()=>ze()),[ue,Je]=s.useState(""),[W,fe]=s.useState(null),[q,Ve]=s.useState(""),[T,He]=s.useState("entrega"),[ae,Ge]=s.useState("proprio"),[R,N]=s.useState(()=>uo()),[C,ie]=s.useState(null),[O,he]=s.useState(null),[me,Qe]=s.useState(""),[Xe,Ze]=s.useState(()=>{try{return JSON.parse(localStorage.getItem(we)||"[]")}catch{return[]}}),[er,rr]=s.useState([]),[xe,or]=s.useState(!1),[J,Fr]=s.useState(()=>{try{return JSON.parse(localStorage.getItem(Cr)||"[]")}catch{return[]}}),[be,Mr]=s.useState(()=>{try{return JSON.parse(localStorage.getItem(zr)||"[]")}catch{return[]}}),[B,P]=s.useState({open:!1,product:null,email:"",loading:!1}),[nr,g]=s.useState(""),[ar,S]=s.useState(""),[i,ye]=s.useState(null),te=s.useMemo(()=>{const e=[i==null?void 0:i.banner_1_url,i==null?void 0:i.banner_2_url,i==null?void 0:i.banner_3_url].filter(Boolean);return e.length>0?e.map(o=>({type:"image",url:o})):xo.map(o=>({...o,type:"text"}))},[i==null?void 0:i.banner_1_url,i==null?void 0:i.banner_2_url,i==null?void 0:i.banner_3_url]),de=s.useMemo(()=>{const o=String((a==null?void 0:a.nome)||"").trim().includes(" "),t=String((a==null?void 0:a.telefone)||"").trim().length>=8,l=String((a==null?void 0:a.cpf)||"").replace(/\D+/g,"").length>=11,u=String((a==null?void 0:a.endereco)||"").trim().length>3;return o&&t&&l&&u},[a]),z=s.useMemo(()=>new URLSearchParams(n.search).get("tenant")||f.tenantId||"",[n.search,f.tenantId]),ir=s.useMemo(()=>i!=null&&i.id?{"X-Tenant-ID":i.id}:{},[i==null?void 0:i.id]),I=s.useMemo(()=>v?{Authorization:`Bearer ${v}`}:{},[v]),qr=s.useMemo(()=>{const e=A.map(o=>(o==null?void 0:o.categoria_nome)||(o==null?void 0:o.categoria)||"Sem categoria").filter(Boolean);return["todas",...Array.from(new Set(e))]},[A]),tr=s.useMemo(()=>{const e=K.trim().toLowerCase();return A.filter(o=>{const t=String((o==null?void 0:o.nome)||"").toLowerCase(),l=String((o==null?void 0:o.codigo)||"").toLowerCase(),u=(o==null?void 0:o.categoria_nome)||(o==null?void 0:o.categoria)||"Sem categoria";return(!e||t.includes(e)||l.includes(e))&&(Z==="todas"||u===Z)})},[A,K,Z]),dr=s.useMemo(()=>Object.fromEntries(A.map(e=>[e.id,e])),[A]),se=(i==null?void 0:i.ecommerce_slug)||z||"",je=(a==null?void 0:a.nome)||(a==null?void 0:a.email)||"",sr=s.useMemo(()=>{const e=(i==null?void 0:i.name)||"";return e&&!ho(e)?e:se?mo(se):"Loja online"},[i==null?void 0:i.name,se]);s.useEffect(()=>{const o=new URLSearchParams(n.search).get("busca");o&&Le(o)},[n.search]),s.useEffect(()=>{Or(),z&&lr()},[z]),s.useEffect(()=>{!z&&(i!=null&&i.id)&&(i.ecommerce_slug?d(`/${i.ecommerce_slug}`,{replace:!0}):$r(i.id))},[i==null?void 0:i.id]),s.useEffect(()=>{v&&(Dr(),cr())},[v]),s.useEffect(()=>{i!=null&&i.cidade&&!q&&Ve(i.cidade)},[i==null?void 0:i.cidade,q]),s.useEffect(()=>{v||localStorage.setItem(Ee,JSON.stringify(c||D))},[c,v]),s.useEffect(()=>{localStorage.setItem(Cr,JSON.stringify(J))},[J]),s.useEffect(()=>{localStorage.setItem(zr,JSON.stringify(be))},[be]),s.useEffect(()=>{const e=te.length,o=setInterval(()=>Te(t=>(t+1)%e),4e3);return()=>clearInterval(o)},[te.length]),s.useEffect(()=>{if(!a)return;const e=(a==null?void 0:a.endereco_entrega_detalhado)||{};y({nome:(a==null?void 0:a.nome)||"",telefone:(a==null?void 0:a.telefone)||"",cpf:(a==null?void 0:a.cpf)||"",cep:(a==null?void 0:a.cep)||"",endereco:(a==null?void 0:a.endereco)||"",numero:(a==null?void 0:a.numero)||"",complemento:(a==null?void 0:a.complemento)||"",bairro:(a==null?void 0:a.bairro)||"",cidade:(a==null?void 0:a.cidade)||"",estado:(a==null?void 0:a.estado)||"",endereco_entrega:(a==null?void 0:a.endereco_entrega)||"",usar_endereco_entrega_diferente:!!(a!=null&&a.usar_endereco_entrega_diferente),entrega_nome:(e==null?void 0:e.entrega_nome)||"",entrega_cep:(e==null?void 0:e.entrega_cep)||"",entrega_endereco:(e==null?void 0:e.entrega_endereco)||"",entrega_numero:(e==null?void 0:e.entrega_numero)||"",entrega_complemento:(e==null?void 0:e.entrega_complemento)||"",entrega_bairro:(e==null?void 0:e.entrega_bairro)||"",entrega_cidade:(e==null?void 0:e.entrega_cidade)||"",entrega_estado:(e==null?void 0:e.entrega_estado)||""})},[a]),s.useEffect(()=>{if(!a)return;const e=(a==null?void 0:a.endereco_entrega_detalhado)||{},o=!!(a!=null&&a.usar_endereco_entrega_diferente);N({cep:o?(e==null?void 0:e.entrega_cep)||(a==null?void 0:a.cep)||"":(a==null?void 0:a.cep)||"",endereco:o?(e==null?void 0:e.entrega_endereco)||(a==null?void 0:a.endereco)||"":(a==null?void 0:a.endereco)||"",numero:o?(e==null?void 0:e.entrega_numero)||(a==null?void 0:a.numero)||"":(a==null?void 0:a.numero)||"",complemento:o?(e==null?void 0:e.entrega_complemento)||(a==null?void 0:a.complemento)||"":(a==null?void 0:a.complemento)||"",bairro:o?(e==null?void 0:e.entrega_bairro)||(a==null?void 0:a.bairro)||"":(a==null?void 0:a.bairro)||"",cidade:o?(e==null?void 0:e.entrega_cidade)||(a==null?void 0:a.cidade)||"":(a==null?void 0:a.cidade)||"",estado:o?(e==null?void 0:e.entrega_estado)||(a==null?void 0:a.estado)||"":(a==null?void 0:a.estado)||""})},[a]);async function Or(){try{if(!z){const o=await io.get("/ecommerce-aparencia/tenant-context");ye((o==null?void 0:o.data)||null);return}const e=await _.get("/api/ecommerce/tenant-context",{params:{tenant:z}});ye((e==null?void 0:e.data)||null)}catch(e){ye(null),g(w(e,"Loja inv√°lida para e-commerce"))}}async function lr(){if(z){Q(!0),g("");try{const e=await _.get("/api/ecommerce/produtos",{params:{tenant:z,limit:100,busca:K||void 0}});X(Wr(e==null?void 0:e.data))}catch(e){X([]),g(w(e,"Erro ao carregar produtos vend√°veis"))}finally{Q(!1)}}}async function $r(e){Q(!0),g("");try{const o=await _.get("/api/ecommerce/produtos",{params:{tenant:e,limit:100,busca:K||void 0}});X(Wr(o==null?void 0:o.data))}catch(o){X([]),g(w(o,"Erro ao carregar produtos vend√°veis"))}finally{Q(!1)}}async function Dr(){if(v)try{const e=await _.get("/api/ecommerce/auth/perfil",{headers:I});M(e.data)}catch{M(null),re(""),localStorage.removeItem(V),E(ze())}}async function Ur(e){if(e.preventDefault(),!v){g("Fa√ßa login para atualizar seus dados.");return}const o=String(h.nome||"").trim();if(!o||!o.includes(" ")){g("Informe nome completo (nome e sobrenome).");return}if(h.usar_endereco_entrega_diferente&&![h.entrega_nome,h.entrega_endereco,h.entrega_numero,h.entrega_bairro,h.entrega_cidade,h.entrega_estado].every(l=>String(l||"").trim())){g("Preencha o endere√ßo de entrega completo para continuar.");return}Ye(!0),g(""),S("");try{const t=await _.put("/api/ecommerce/auth/perfil",h,{headers:I});M(t.data),S("Dados cadastrais atualizados com sucesso.")}catch(t){g(w(t,"Erro ao salvar dados cadastrais"))}finally{Ye(!1)}}async function Kr(){const e=await Ce(h.cep);e&&y(o=>({...o,cep:e.cep||o.cep,endereco:e.endereco||o.endereco,bairro:e.bairro||o.bairro,cidade:e.cidade||o.cidade,estado:e.estado||o.estado}))}async function Yr(){const e=await Ce(h.entrega_cep);e&&y(o=>({...o,entrega_cep:e.cep||o.entrega_cep,entrega_endereco:e.endereco||o.entrega_endereco,entrega_bairro:e.bairro||o.entrega_bairro,entrega_cidade:e.cidade||o.entrega_cidade,entrega_estado:e.estado||o.entrega_estado}))}async function Jr(){const e=await Ce(R.cep);e&&N(o=>({...o,cep:e.cep||o.cep,endereco:e.endereco||o.endereco,bairro:e.bairro||o.bairro,cidade:e.cidade||o.cidade,estado:e.estado||o.estado}))}async function cr(e=I){if(e!=null&&e.Authorization){Ue(!0);try{const o=await _.get("/api/carrinho",{headers:e});E(o.data||{...D})}catch(o){g(w(o,"Erro ao carregar carrinho"))}finally{Ue(!1)}}}async function gr(e){var l;const o=ze();if(!((l=o==null?void 0:o.itens)!=null&&l.length))return;const t={Authorization:`Bearer ${e}`};for(const u of o.itens)await _.post("/api/carrinho/adicionar",{produto_id:u.produto_id,quantidade:u.quantidade},{headers:t});await cr(t),localStorage.removeItem(Ee)}async function Vr(e){var o,t;if(e.preventDefault(),!(i!=null&&i.id)){g("Loja n√£o identificada na URL.");return}ee(!0),g(""),S("");try{const l=await _.post("/api/ecommerce/auth/registrar",Y,{headers:ir}),u=(o=l==null?void 0:l.data)==null?void 0:o.access_token;if(!u)throw new Error("Token n√£o retornado");(t=l==null?void 0:l.data)!=null&&t.user&&M(l.data.user),localStorage.setItem(V,u),re(u),await gr(u),oe({email:"",password:"",nome:""}),S("Cadastro realizado com sucesso. Complete seus dados na aba Conta."),b("conta")}catch(l){g(w(l,"Erro ao cadastrar cliente"))}finally{ee(!1)}}async function Hr(e){var o,t;if(e.preventDefault(),!(i!=null&&i.id)){g("Loja n√£o identificada na URL.");return}ee(!0),g(""),S("");try{const l=await _.post("/api/ecommerce/auth/login",ne,{headers:ir}),u=(o=l==null?void 0:l.data)==null?void 0:o.access_token;if(!u)throw new Error("Token n√£o retornado");(t=l==null?void 0:l.data)!=null&&t.user&&M(l.data.user),localStorage.setItem(V,u),re(u),await gr(u),pe({email:"",password:""}),S("Login realizado com sucesso. Confira seus dados cadastrais."),b("conta")}catch(l){g(w(l,"Erro ao realizar login"))}finally{ee(!1)}}function Gr(){M(null),re(""),E({...D}),ie(null),he(null),localStorage.removeItem(V),S("Sess√£o encerrada.")}function pr(e){Fr(o=>o.includes(e)?(S("Produto removido da sua lista de desejos."),o.filter(t=>t!==e)):(S("Produto adicionado √† sua lista de desejos."),[...o,e]))}function ur(e){const o=(a==null?void 0:a.email)||Y.email||ne.email||"";P({open:!0,product:e,email:o,loading:!1})}async function Qr(e){e.preventDefault();const{product:o,email:t}=B;if(!t.trim()||!o)return;P(u=>({...u,loading:!0}));const l=(i==null?void 0:i.id)||se||z;try{await _.post("/api/ecommerce-notify/registrar",{email:t.trim(),product_id:o.id,product_name:o.nome,tenant_id:l}),P({open:!1,product:null,email:"",loading:!1}),S("Perfeito! Te avisaremos por e-mail quando o produto voltar ao estoque. üìß"),Mr(u=>u.some(L=>L.productId===o.id&&String(L.email||"").toLowerCase()===t.trim().toLowerCase())?u:[...u,{productId:o.id,productName:o.nome,email:t.trim(),createdAt:new Date().toISOString()}])}catch{P(u=>({...u,loading:!1})),g("N√£o foi poss√≠vel registrar o aviso. Tente novamente.")}}async function fr(e){if(H(e)<=0){g("Produto indispon√≠vel no momento. Volto em breve.");return}if(!v){g("");const t=Re(e);E(l=>{const u=Array.isArray(l==null?void 0:l.itens)?l.itens:[],L=u.find($=>$.produto_id===e.id)?u.map($=>$.produto_id===e.id?{...$,quantidade:Number($.quantidade||0)+1}:$):[...u,{item_id:`guest-${e.id}`,produto_id:e.id,nome:e.nome,preco_unitario:t,quantidade:1}];return Ie(L)}),S("Produto adicionado ao carrinho. Fa√ßa login no checkout para finalizar."),Rr(e);return}g("");try{const t=await _.post("/api/carrinho/adicionar",{produto_id:e.id,quantidade:1},{headers:I});E(t.data),S("Produto adicionado ao carrinho."),Rr(e)}catch(t){g(w(t,"Erro ao adicionar no carrinho"))}}async function ve(e,o){if(!v){E(t=>{const l=Array.isArray(t==null?void 0:t.itens)?t.itens:[];if(o<=0){const j=l.filter(L=>L.item_id!==e);return Ie(j)}const u=l.map(j=>j.item_id===e?{...j,quantidade:o}:j);return Ie(u)});return}g("");try{if(o<=0){const l=await _.delete(`/api/carrinho/remover/${e}`,{headers:I});E(l.data);return}const t=await _.put(`/api/carrinho/atualizar/${e}`,{quantidade:o},{headers:I});E(t.data)}catch(t){g(w(t,"Erro ao atualizar carrinho"))}}async function Xr(e){if(e.preventDefault(),!v){g("Fa√ßa login para aplicar cupom."),b("conta");return}if(ue.trim()){g("");try{const o=await _.post("/api/carrinho/aplicar-cupom",{codigo:ue.trim()},{headers:I});fe(o.data),S("Cupom validado.")}catch(o){fe(null),g(w(o,"Cupom inv√°lido"))}}}async function Zr(e){var t;if(e.preventDefault(),!v){g("Fa√ßa login para continuar no checkout."),b("conta");return}if(!((t=c==null?void 0:c.itens)!=null&&t.length)){g("Adicione itens no carrinho antes de calcular o checkout.");return}const o=((i==null?void 0:i.cidade)||q||R.cidade||"").trim();if(!o||o.length<2){g("Cidade da loja n√£o configurada para checkout.");return}g(""),ie(null);try{const l=await _.get("/api/checkout/resumo",{headers:I,params:{cidade_destino:o,cupom:(W==null?void 0:W.codigo)||void 0}});ie(l.data),S("Resumo de checkout calculado.")}catch(l){g(w(l,"Erro ao calcular resumo do checkout"))}}async function eo(){if(!v){g("Fa√ßa login para finalizar o pedido."),b("conta");return}if(!de){g("Complete seu cadastro antes de finalizar o pedido."),b("conta");return}const e=((i==null?void 0:i.cidade)||q||R.cidade||"").trim();if(!e||e.length<2){g("Cidade da loja n√£o configurada para checkout.");return}const o=T==="retirada"?"RETIRADA NA LOJA":fo(R);if(T==="entrega"&&!o){g("Informe o endere√ßo de entrega.");return}De(!0),g(""),S(""),he(null);try{const l=(await _.post("/api/checkout/finalizar",{cidade_destino:e,endereco_entrega:o||null,cupom:(W==null?void 0:W.codigo)||null,tipo_retirada:T==="retirada"?ae:null},{headers:{...I,"Idempotency-Key":po()}})).data;if(he(l),co(l,c),E({pedido_id:null,itens:[],subtotal:0,total:0}),ie(null),fe(null),Je(""),T==="entrega"&&localStorage.setItem(Ae,JSON.stringify(R)),l!=null&&l.pedido_id){const u=Array.from(new Set([l.pedido_id,...Xe]));Ze(u),localStorage.setItem(we,JSON.stringify(u)),await Se()}S("Pedido finalizado com sucesso."),b("pedidos")}catch(t){g(w(t,"Erro ao finalizar checkout"))}finally{De(!1)}}async function Se(){var e;if(v){or(!0);try{const o=await _.get("/api/checkout/pedidos",{headers:I,params:{limit:20}}),t=Array.isArray((e=o==null?void 0:o.data)==null?void 0:e.pedidos)?o.data.pedidos:[];if(rr(t),t.length){const l=t.map(j=>j==null?void 0:j.pedido_id).filter(Boolean),u=Array.from(new Set([...l,...Xe]));Ze(u),localStorage.setItem(we,JSON.stringify(u))}}catch(o){rr([]),g(w(o,"Erro ao carregar detalhes dos pedidos"))}finally{or(!1)}}}s.useEffect(()=>{!v||p!=="pedidos"||Se()},[p,v]);const _e=Number((c==null?void 0:c.total)||0);function hr(){var e;if(!((e=c==null?void 0:c.itens)!=null&&e.length)){g("Adicione itens no carrinho antes de finalizar.");return}if(!v){g("Fa√ßa login para finalizar o pedido."),b("conta");return}if(!de){g("Complete seu cadastro (nome completo, telefone, CPF e endere√ßo) antes de finalizar."),b("conta");return}b("checkout"),lo(c)}function ke(e){const o=F(e);Fe(e),Qe(o[0]||""),d(`${n.pathname}?produto=${e.id}`,{replace:!0}),so(e)}function le(){Fe(null),d(n.pathname,{replace:!0})}return s.useEffect(()=>{if(!m)return;function e(o){o.key==="Escape"&&le()}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m]),s.useEffect(()=>{if(!A.length)return;const o=new URLSearchParams(n.search).get("produto");if(!o||m)return;const t=A.find(l=>String(l.id)===String(o));t&&ke(t)},[A.length,n.search]),r.jsxs("div",{className:"page",children:[((mr=c==null?void 0:c.itens)==null?void 0:mr.length)>0&&r.jsxs("div",{onClick:()=>b("carrinho"),style:{position:"sticky",top:0,zIndex:50,background:"#6366f1",color:"#fff",padding:"10px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:0,marginBottom:0,cursor:"pointer",boxShadow:"0 2px 12px rgba(99,102,241,0.35)"},children:[r.jsxs("span",{style:{fontWeight:600,fontSize:14},children:["üõí ",c.itens.length," item(ns) no carrinho"]}),r.jsxs("span",{style:{fontWeight:800,fontSize:14},children:[k(_e)," ‚Üí"]})]}),r.jsx("div",{style:{background:"#fff",borderRadius:0,padding:"14px 24px",marginBottom:0,borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.06)"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,maxWidth:1280,margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[i!=null&&i.logo_url?r.jsx("img",{src:G(i.logo_url),alt:sr,style:{height:48,maxWidth:180,objectFit:"contain"}}):r.jsx("h1",{style:{margin:0,fontSize:22,lineHeight:1.1,color:"#1a1a2e",fontWeight:800,letterSpacing:-.5},children:sr}),r.jsxs("span",{style:{fontSize:12,color:"#6b7280",fontWeight:500,borderLeft:"1px solid #e5e7eb",paddingLeft:14},children:[(i==null?void 0:i.cidade)||"",i!=null&&i.uf?` ‚Ä¢ ${i.uf}`:""]})]}),r.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[je?r.jsxs("div",{style:{fontSize:13,color:"#374151",background:"#f9fafb",borderRadius:24,padding:"7px 16px",border:"1px solid #e5e7eb",fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[r.jsx("span",{style:{width:24,height:24,borderRadius:"50%",background:"#6366f1",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:11,fontWeight:700},children:je.charAt(0).toUpperCase()}),je.split(" ")[0]]}):r.jsxs("button",{onClick:()=>b("conta"),style:{background:"#fff",border:"1px solid #d1d5db",color:"#374151",borderRadius:24,padding:"8px 18px",cursor:"pointer",fontSize:13,fontWeight:600,transition:"all 0.15s",display:"flex",alignItems:"center",gap:6},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Entrar / Cadastrar"]}),r.jsxs("button",{onClick:()=>b("carrinho"),style:{background:"#1a1a2e",color:"#fff",border:"none",borderRadius:12,width:44,height:44,cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",transition:"background 0.15s",flexShrink:0},children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"9",cy:"21",r:"1"}),r.jsx("circle",{cx:"20",cy:"21",r:"1"}),r.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),((xr=c==null?void 0:c.itens)==null?void 0:xr.length)>0&&r.jsx("span",{style:{position:"absolute",top:-4,right:-4,background:"#ef4444",color:"#fff",borderRadius:50,minWidth:18,height:18,fontSize:10,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",padding:"0 3px"},children:c.itens.length})]})]})]})}),r.jsxs("div",{style:{position:"relative",overflow:"hidden",marginBottom:0,height:340,background:"#1a1a2e"},children:[te.map((e,o)=>r.jsx("div",{style:{position:"absolute",inset:0,opacity:x===o?1:0,transition:"opacity 0.8s ease",pointerEvents:x===o?"auto":"none"},children:e.type==="image"?r.jsx("img",{src:G(e.url),alt:`Banner ${o+1}`,style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}):r.jsxs("div",{style:{background:e.bg,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 48px",gap:24,height:"100%"},children:[r.jsx("span",{style:{fontSize:64,flexShrink:0,filter:"drop-shadow(0 2px 8px rgba(0,0,0,0.2))"},children:e.emoji}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"#fff",fontWeight:800,fontSize:32,lineHeight:1.2,textShadow:"0 2px 12px rgba(0,0,0,0.3)",letterSpacing:-.5},children:e.title}),r.jsx("div",{style:{color:"rgba(255,255,255,0.92)",fontSize:16,marginTop:8,fontWeight:400},children:e.sub})]})]})},o)),r.jsx("div",{style:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",display:"flex",gap:8},children:te.map((e,o)=>r.jsx("button",{onClick:()=>Te(o),style:{width:x===o?28:10,height:10,background:x===o?"#fff":"rgba(255,255,255,0.45)",borderRadius:5,border:"none",cursor:"pointer",padding:0,transition:"all 0.3s ease",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"}},o))})]}),r.jsxs("div",{style:{marginBottom:0,background:"#1a1a2e",color:"#fff",padding:"10px 24px",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[r.jsx("span",{style:{fontSize:16},children:"üì±"}),r.jsxs("span",{style:{fontWeight:400},children:["Baixe nosso ",r.jsx("strong",{children:"APP"})," para notifica√ß√µes de pedidos, promo√ß√µes e aviso de reposi√ß√£o de estoque."]})]}),!z&&r.jsx("div",{style:{marginBottom:12,color:"#b00020"},children:"Use a URL no formato: /slug-da-loja"}),r.jsx("div",{style:{display:"flex",gap:0,background:"#fff",borderRadius:0,overflow:"hidden",marginBottom:0,padding:"0 24px",borderBottom:"2px solid #f1f5f9",maxWidth:1280,margin:"0 auto"},children:[["loja","üè™ Loja"],["carrinho",`üõí Carrinho${(br=c==null?void 0:c.itens)!=null&&br.length?` (${c.itens.length})`:""}`],["pedidos","üì¶ Pedidos"],["conta","üë§ Conta"]].map(([e,o])=>{const t=p===e;return r.jsx("button",{onClick:()=>b(e),style:{flex:1,maxWidth:200,background:"transparent",color:t?"#1a1a2e":"#6b7280",padding:"14px 8px 12px",fontWeight:t?700:500,cursor:"pointer",fontSize:14,borderRadius:0,boxShadow:"none",transition:"all 0.15s ease",border:"none",borderBottom:t?"3px solid #6366f1":"3px solid transparent",letterSpacing:-.2},children:o},e)})}),nr&&r.jsx("div",{style:{background:"#ffe8e8",color:"#8c0000",padding:10,borderRadius:6,marginBottom:12},children:nr}),ar&&r.jsx("div",{style:{background:"#e8fff0",color:"#0a7d32",padding:10,borderRadius:6,marginBottom:12},children:ar}),p==="loja"&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 300px",gap:24,maxWidth:1280,margin:"0 auto",padding:"24px 24px"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:r.jsxs("div",{children:[r.jsx("h3",{style:{margin:0,color:"#1a1a2e",fontSize:20,fontWeight:700,letterSpacing:-.3},children:"Cat√°logo da loja"}),r.jsx("div",{style:{color:"#9ca3af",fontSize:13,marginTop:4},children:"Selecione produtos, confira detalhes e adicione ao carrinho."})]})}),r.jsxs("div",{style:{display:"flex",gap:10,marginBottom:20,flexWrap:"wrap"},children:[r.jsxs("div",{style:{flex:1,minWidth:240,position:"relative"},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)"},children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),r.jsx("input",{value:K,onChange:e=>Le(e.target.value),placeholder:"O que seu pet precisa?",style:{width:"100%",padding:"11px 12px 11px 38px",border:"1px solid #e5e7eb",borderRadius:10,fontSize:14,background:"#f9fafb",transition:"border-color 0.15s",outline:"none",boxSizing:"border-box"}})]}),r.jsx("select",{value:Z,onChange:e=>Tr(e.target.value),style:{padding:"11px 14px",border:"1px solid #e5e7eb",borderRadius:10,fontSize:14,background:"#f9fafb",color:"#374151"},children:qr.map(e=>r.jsx("option",{value:e,children:e},e))}),r.jsx("button",{onClick:lr,disabled:ge,style:{padding:"11px 18px",border:"1px solid #e5e7eb",borderRadius:10,fontSize:13,fontWeight:600,background:"#fff",color:"#374151",cursor:"pointer"},children:ge?"Carregando...":"Atualizar"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16},children:[tr.map(e=>{const o=H(e),t=Er(e),l=J.includes(e.id),u=F(e)[0];return r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>ke(e),onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),ke(e))},onMouseEnter:()=>Pe(e.id),onMouseLeave:()=>Pe(null),style:{border:"1px solid #f1f5f9",borderRadius:12,padding:0,background:"#fff",textAlign:"left",cursor:"pointer",display:"flex",flexDirection:"column",transition:"all 0.2s ease",boxShadow:Be===e.id?"0 8px 30px rgba(0,0,0,0.1)":"0 1px 3px rgba(0,0,0,0.04)",transform:Be===e.id?"translateY(-4px)":"none",overflow:"hidden"},children:[r.jsxs("div",{style:{borderRadius:0,background:"#fafafa",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative"},children:[u?r.jsx("img",{src:u,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:16,background:"#fff"}}):r.jsxs("div",{style:{color:"#cbd5e1",fontSize:13,display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[r.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),r.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),r.jsx("polyline",{points:"21 15 16 10 5 21"})]}),"Sem imagem"]}),t&&r.jsx("div",{style:{position:"absolute",top:8,left:8,background:"#fef3c7",color:"#92400e",borderRadius:6,padding:"3px 8px",fontSize:11,fontWeight:600},children:"Indispon√≠vel"}),r.jsx("button",{onClick:j=>{j.stopPropagation(),pr(e.id)},title:l?"Remover da lista de desejos":"Salvar na lista de desejos",style:{position:"absolute",top:8,right:8,background:"#fff",border:"none",borderRadius:"50%",width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 1px 4px rgba(0,0,0,0.12)",fontSize:16},children:l?"‚ù§Ô∏è":"ü§ç"})]}),r.jsxs("div",{style:{padding:"12px 14px 14px",display:"flex",flexDirection:"column",gap:4,flex:1},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600,lineHeight:1.35,color:"#1a1a2e",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.nome}),r.jsx("div",{style:{fontSize:11,color:"#9ca3af",fontWeight:500},children:(e==null?void 0:e.categoria_nome)||(e==null?void 0:e.categoria)||"Sem categoria"}),r.jsxs("div",{style:{fontSize:11,color:"#9ca3af"},children:["SKU: ",(e==null?void 0:e.codigo)||"-"]}),r.jsx("div",{style:{fontSize:11,color:t?"#d97706":"#10b981",fontWeight:500,marginTop:2},children:t?"Volto em breve":Number.isFinite(o)?`Estoque dispon√≠vel: ${o}`:"Estoque dispon√≠vel"}),r.jsx("div",{style:{marginTop:"auto",paddingTop:8},children:r.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#1a1a2e",letterSpacing:-.5},children:k(Re(e))})}),r.jsx("button",{disabled:t,style:{background:t?"#f3f4f6":"#6366f1",border:"none",color:t?"#9ca3af":"#fff",borderRadius:8,padding:"10px 0",fontWeight:600,fontSize:13,cursor:t?"not-allowed":"pointer",width:"100%",marginTop:6,transition:"background 0.15s",letterSpacing:-.2},onClick:j=>{j.stopPropagation(),fr(e)},children:t?"Indispon√≠vel":"+ Adicionar"}),t&&r.jsx("button",{onClick:j=>{j.stopPropagation(),ur(e)},style:{background:"transparent",border:"1px solid #d97706",color:"#d97706",borderRadius:8,padding:"7px 0",fontWeight:600,fontSize:12,cursor:"pointer",width:"100%",marginTop:6},children:"üìß Avise-me quando chegar"})]})]},e.id)}),!ge&&tr.length===0&&r.jsx("div",{style:{color:"#666",padding:12,display:"grid",gap:10},children:r.jsx("div",{children:"Nenhum produto encontrado para o filtro atual."})})]})]}),r.jsxs("aside",{style:{background:"#fff",padding:20,borderRadius:16,border:"1px solid #f1f5f9",alignSelf:"start",position:"sticky",top:8,boxShadow:"0 2px 16px rgba(0,0,0,0.04)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[r.jsx("h3",{style:{margin:0,fontSize:15,color:"#1a1a2e",fontWeight:700},children:"üõí Seu carrinho"}),((yr=c==null?void 0:c.itens)==null?void 0:yr.length)>0&&r.jsx("span",{style:{background:"#6366f1",color:"#fff",borderRadius:20,padding:"2px 9px",fontSize:12,fontWeight:700},children:c.itens.length})]}),(jr=c==null?void 0:c.itens)!=null&&jr.length?r.jsxs("div",{style:{display:"grid",gap:8},children:[c.itens.slice(0,5).map(e=>{const o=dr[e.produto_id],t=o?F(o)[0]:null;return r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",borderBottom:"1px solid #f1f5f9",paddingBottom:8,marginBottom:2},children:[r.jsx("div",{style:{width:44,height:44,borderRadius:8,background:"#f8fafc",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:t?r.jsx("img",{src:t,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:2}}):r.jsx("span",{style:{fontSize:18},children:"üì¶"})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontSize:12,fontWeight:600,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.nome}),r.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[e.quantidade,"√ó ",k(e.preco_unitario)]})]})]},e.item_id)}),c.itens.length>5&&r.jsxs("div",{style:{fontSize:12,color:"#64748b",textAlign:"center"},children:["+ ",c.itens.length-5," item(ns) a mais"]}),r.jsxs("div",{style:{background:"#f5f3ff",borderRadius:10,padding:"10px 12px",marginTop:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontWeight:600,fontSize:14,color:"#4b5563"},children:"Subtotal"}),r.jsx("span",{style:{fontWeight:800,fontSize:17,color:"#1a1a2e"},children:k(_e)})]}),r.jsx("button",{className:"btn-primary",onClick:hr,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,padding:"12px 0",fontWeight:700,fontSize:14,cursor:"pointer",width:"100%",transition:"background 0.15s"},children:"Finalizar compra"}),r.jsx("button",{className:"btn-secondary",onClick:()=>b("carrinho"),style:{borderRadius:10,width:"100%",background:"transparent",border:"2px solid #6366f1",color:"#6366f1",fontWeight:700,fontSize:14,padding:"11px 0",cursor:"pointer",transition:"all 0.15s"},children:"Ver / Editar carrinho"}),!v&&r.jsx("div",{style:{fontSize:11,color:"#64748b",textAlign:"center"},children:"Login solicitado s√≥ no fechamento"})]}):r.jsxs("div",{style:{color:"#94a3b8",textAlign:"center",padding:"20px 0",fontSize:13},children:[r.jsx("div",{style:{fontSize:30,marginBottom:6},children:"üõí"}),"Seu carrinho est√° vazio."]})]})]}),m&&r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:16,zIndex:60},onClick:()=>le(),children:r.jsxs("div",{style:{background:"#fff",width:"min(980px, 100%)",maxHeight:"90vh",overflowY:"auto",borderRadius:14,border:"1px solid #e5e7eb",padding:16,display:"grid",gridTemplateColumns:"1.1fr 1fr",gap:16},onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{children:[r.jsx("div",{style:{borderRadius:12,background:"#f1f5f9",aspectRatio:"1 / 1",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:me?r.jsx("img",{src:me,alt:m.nome,style:{width:"100%",height:"100%",objectFit:"contain",background:"#fff"}}):r.jsx("span",{style:{color:"#64748b"},children:"Sem imagem dispon√≠vel"})}),F(m).length>1&&r.jsx("div",{style:{display:"flex",gap:8,marginTop:10,overflowX:"auto"},children:F(m).map(e=>r.jsx("button",{onClick:()=>Qe(e),style:{border:me===e?"2px solid #6366f1":"1px solid #d1d5db",borderRadius:8,width:74,height:74,overflow:"hidden",padding:0,background:"#fff",cursor:"pointer"},children:r.jsx("img",{src:e,alt:"Miniatura do produto",style:{width:"100%",height:"100%",objectFit:"contain",background:"#fff"}})},e))})]}),r.jsxs("div",{style:{display:"grid",alignContent:"start",gap:10},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[r.jsx("h3",{style:{margin:0,fontSize:24,lineHeight:1.2},children:m.nome}),r.jsx("button",{className:"btn-secondary",onClick:()=>le(),children:"Fechar"})]}),r.jsx("div",{style:{fontSize:26,fontWeight:800,color:"#1a1a2e"},children:k(Re(m))}),r.jsxs("div",{style:{color:"#475569"},children:["Categoria: ",r.jsx("strong",{children:(m==null?void 0:m.categoria_nome)||(m==null?void 0:m.categoria)||"Sem categoria"})]}),r.jsxs("div",{style:{color:"#475569"},children:["Estoque dispon√≠vel: ",r.jsx("strong",{children:Number.isFinite(H(m))?H(m):"Dispon√≠vel"})]}),r.jsxs("div",{style:{color:"#475569"},children:["SKU: ",r.jsx("strong",{children:(m==null?void 0:m.codigo)||"-"})]}),F(m).length<=1&&r.jsx("div",{style:{fontSize:13,color:"#64748b"},children:"Este produto ainda n√£o possui galeria com m√∫ltiplas fotos cadastradas."}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[Er(m)?r.jsx("button",{onClick:()=>ur(m),style:{background:"transparent",border:"2px solid #d97706",color:"#d97706",borderRadius:10,fontWeight:700,fontSize:14,padding:"10px 16px",cursor:"pointer"},children:"üìß Avise-me quando chegar"}):r.jsx("button",{onClick:()=>fr(m),style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,fontWeight:700,fontSize:15,padding:"10px 20px",cursor:"pointer",transition:"background 0.15s"},children:"+ Adicionar ao carrinho"}),r.jsx("button",{onClick:()=>pr(m.id),style:{background:"transparent",border:"2px solid #6366f1",color:"#6366f1",borderRadius:10,fontWeight:700,fontSize:14,padding:"10px 16px",cursor:"pointer"},children:J.includes(m.id)?"üíî Remover da lista":"ü§ç Salvar na lista"}),r.jsx("button",{onClick:()=>{le(),b("carrinho")},style:{background:"transparent",border:"2px solid #6366f1",color:"#6366f1",borderRadius:10,fontWeight:700,fontSize:14,padding:"10px 16px",cursor:"pointer"},children:"üõí Ver carrinho"}),r.jsx("button",{onClick:()=>{var o;const e=`${window.location.origin}${n.pathname}?produto=${m.id}`;(o=navigator.clipboard)==null||o.writeText(e).then(()=>S("Link copiado para a √°rea de transfer√™ncia!")).catch(()=>S(`Link: ${e}`))},style:{background:"transparent",border:"1px solid #d1d5db",color:"#6b7280",borderRadius:10,fontWeight:500,fontSize:13,padding:"8px 14px",cursor:"pointer"},children:"üîó Copiar link"})]})]})]})}),p==="carrinho"&&r.jsxs("div",{style:{maxWidth:1280,margin:"0 auto",padding:"24px 24px",minHeight:200},children:[r.jsx("h3",{style:{marginTop:0,color:"#1a1a2e",fontSize:20,fontWeight:700},children:"üõí Carrinho de compras"}),Lr?r.jsx("div",{style:{textAlign:"center",color:"#64748b",padding:20},children:"Carregando carrinho..."}):(vr=c==null?void 0:c.itens)!=null&&vr.length?r.jsxs("div",{style:{display:"grid",gap:10},children:[c.itens.map(e=>{const o=dr[e.produto_id],t=o?F(o)[0]:null;return r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:"12px 14px",display:"flex",gap:14,alignItems:"center",background:"#fff",boxShadow:"0 1px 4px rgba(0,0,0,0.05)"},children:[r.jsx("div",{style:{width:80,height:80,borderRadius:10,background:"#f8fafc",flexShrink:0,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:t?r.jsx("img",{src:t,alt:e.nome,style:{width:"100%",height:"100%",objectFit:"contain",padding:4}}):r.jsx("span",{style:{fontSize:32},children:"üì¶"})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:700,fontSize:15,lineHeight:1.3,marginBottom:4},children:e.nome}),r.jsxs("div",{style:{fontSize:13,color:"#6366f1",fontWeight:700,marginBottom:8},children:[k(e.preco_unitario)," / un"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>ve(e.item_id,e.quantidade-1),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"‚àí"}),r.jsx("span",{style:{fontWeight:700,fontSize:15,minWidth:28,textAlign:"center"},children:e.quantidade}),r.jsx("button",{onClick:()=>ve(e.item_id,e.quantidade+1),style:{background:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:7,width:32,height:32,cursor:"pointer",fontSize:16,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),r.jsx("button",{onClick:()=>ve(e.item_id,0),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:13,marginLeft:4,padding:"4px 8px"},children:"üóë Remover"})]})]}),r.jsx("div",{style:{textAlign:"right",flexShrink:0},children:r.jsx("div",{style:{fontWeight:800,fontSize:16,color:"#111"},children:k(e.preco_unitario*e.quantidade)})})]},e.item_id)}),r.jsxs("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2},children:[r.jsx("span",{style:{fontWeight:600,fontSize:15},children:"Total"}),r.jsx("span",{style:{fontWeight:800,fontSize:20,color:"#1a1a2e"},children:k(_e)})]}),r.jsx("button",{className:"btn-primary",onClick:hr,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,padding:"14px 0",fontWeight:700,fontSize:16,cursor:"pointer",width:"100%",transition:"background 0.15s"},children:"Finalizar pedido"})]}):r.jsxs("div",{style:{color:"#94a3b8",textAlign:"center",padding:"32px 0",fontSize:14},children:[r.jsx("div",{style:{fontSize:40,marginBottom:8},children:"üõí"}),r.jsx("div",{children:"Seu carrinho est√° vazio"}),r.jsx("button",{className:"btn-secondary",onClick:()=>b("loja"),style:{marginTop:12},children:"Ver produtos"})]}),r.jsxs("form",{onSubmit:Xr,style:{marginTop:12,display:"flex",gap:8},children:[r.jsx("input",{value:ue,onChange:e=>Je(e.target.value),placeholder:"Cupom",style:{flex:1,padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"submit",children:"Aplicar"})]}),W&&r.jsxs("div",{style:{marginTop:8,color:"#0a7d32"},children:["Cupom ",W.codigo,": -",k(W.desconto)]})]}),p==="checkout"&&r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,display:"grid",gap:10},children:[r.jsx("h3",{style:{marginTop:0},children:"Checkout"}),r.jsxs("form",{onSubmit:Zr,style:{display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"grid",gap:6},children:[r.jsx("label",{style:{fontSize:13,color:"#334155"},children:"Forma de recebimento"}),r.jsxs("div",{style:{display:"flex",gap:12},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx("input",{type:"radio",name:"deliveryMode",value:"entrega",checked:T==="entrega",onChange:()=>He("entrega")}),"Entrega"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6},children:[r.jsx("input",{type:"radio",name:"deliveryMode",value:"retirada",checked:T==="retirada",onChange:()=>He("retirada")}),"Retirada na loja"]})]}),T==="retirada"&&r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:12,display:"grid",gap:8},children:[r.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#374151"},children:"Quem vai retirar o pedido?"}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"tipoRetirada",value:"proprio",checked:ae==="proprio",onChange:()=>Ge("proprio")}),r.jsx("span",{children:"üôã Eu mesmo(a) vou retirar"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13,cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"tipoRetirada",value:"terceiro",checked:ae==="terceiro",onChange:()=>Ge("terceiro")}),r.jsx("span",{children:"ÔøΩ Outra pessoa vai retirar por mim"})]}),ae==="terceiro"&&r.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",borderRadius:6,padding:10,fontSize:12,color:"#92400e"},children:["‚ÑπÔ∏è Uma ",r.jsx("strong",{children:"senha secreta de retirada"})," ser√° gerada ap√≥s confirmar o pedido. Compartilhe essa senha com a pessoa que vai retirar."]})]})]}),r.jsx("input",{value:(i==null?void 0:i.cidade)||q,onChange:e=>Ve(e.target.value),placeholder:"Cidade da loja",disabled:!!(i!=null&&i.cidade),style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),T==="entrega"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{value:R.cep,onChange:e=>N(o=>({...o,cep:e.target.value})),onBlur:Jr,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:R.endereco,onChange:e=>N(o=>({...o,endereco:e.target.value})),placeholder:"Rua / Avenida",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:R.numero,onChange:e=>N(o=>({...o,numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:R.complemento,onChange:e=>N(o=>({...o,complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("input",{value:R.bairro,onChange:e=>N(o=>({...o,bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8},children:[r.jsx("input",{value:R.cidade||(i==null?void 0:i.cidade)||"",onChange:e=>N(o=>({...o,cidade:e.target.value})),placeholder:"Cidade",disabled:!!(i!=null&&i.cidade),style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:i!=null&&i.cidade?"#f8fafc":"#fff"}}),r.jsx("input",{value:R.estado||(i==null?void 0:i.uf)||"",onChange:e=>N(o=>({...o,estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]})]}),r.jsx("button",{className:"btn-secondary",type:"submit",children:"Calcular resumo"})]}),C&&r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:10},children:[r.jsxs("div",{children:["Itens: ",C.itens_count]}),r.jsxs("div",{children:["Subtotal: ",k(C.subtotal)]}),r.jsxs("div",{children:["Frete: ",k((Sr=C==null?void 0:C.frete)==null?void 0:Sr.valor_frete)]}),r.jsxs("div",{children:["Desconto: ",k((_r=C==null?void 0:C.cupom)==null?void 0:_r.desconto)]}),r.jsxs("div",{style:{fontWeight:700},children:["Total: ",k(C.total)]})]}),r.jsx("button",{className:"btn-primary",onClick:eo,disabled:$e||!(i!=null&&i.cidade||q)||!((kr=c==null?void 0:c.itens)!=null&&kr.length)||!de,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,padding:"14px 0",fontWeight:700,fontSize:16,cursor:"pointer",width:"100%",transition:"background 0.15s"},children:$e?"Finalizando...":"Finalizar pedido"}),!de&&r.jsx("div",{style:{fontSize:12,color:"#b45309"},children:"Complete cadastro (nome completo, telefone, CPF e endere√ßo) na aba Conta para finalizar."}),(O==null?void 0:O.pedido_id)&&r.jsxs("div",{style:{background:"#e8fff0",color:"#0a7d32",padding:10,borderRadius:6,display:"grid",gap:6},children:[r.jsxs("div",{children:["Pedido confirmado: ",r.jsx("strong",{children:O.pedido_id})]}),O.palavra_chave_retirada&&r.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:8,padding:12,color:"#7c2d12",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:4},children:"üîë SENHA DE RETIRADA"}),r.jsx("div",{style:{fontSize:22,fontWeight:700,letterSpacing:2,color:"#ea580c"},children:O.palavra_chave_retirada}),r.jsx("div",{style:{fontSize:11,marginTop:6,color:"#92400e"},children:"Compartilhe esta senha com a pessoa que vai retirar o pedido na loja."})]})]})]}),p==="pedidos"&&r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Meus pedidos"}),xe?r.jsx("div",{style:{color:"#666"},children:"Carregando pedidos..."}):er.length===0?r.jsx("div",{style:{color:"#666"},children:"Nenhum pedido encontrado para esta conta."}):r.jsx("div",{style:{display:"grid",gap:10},children:er.map(e=>r.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:12,display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:700},children:e.pedido_id}),r.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Origem: ",e.origem||"-"]})]}),r.jsx("div",{style:{fontWeight:700},children:k(e.total)})]}),r.jsxs("div",{style:{fontSize:13},children:["Status do pedido: ",r.jsx("strong",{children:e.status||"-"})]}),r.jsxs("div",{style:{fontSize:13},children:["Data da compra: ",r.jsx("strong",{children:Ar(e.data_compra)})]}),r.jsxs("div",{style:{fontSize:13},children:["Data do pagamento: ",r.jsx("strong",{children:e.data_pagamento?Ar(e.data_pagamento):"Aguardando pagamento"})]}),e.palavra_chave_retirada&&r.jsxs("div",{style:{background:"#fff7ed",border:"2px solid #f97316",borderRadius:8,padding:12,textAlign:"center"},children:[r.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#7c2d12",marginBottom:4},children:"üîë SENHA DE RETIRADA"}),r.jsx("div",{style:{fontSize:20,fontWeight:700,letterSpacing:2,color:"#ea580c"},children:e.palavra_chave_retirada}),r.jsx("div",{style:{fontSize:11,color:"#92400e",marginTop:4},children:"Apresente esta senha na loja para retirar o pedido"})]}),r.jsxs("div",{style:{fontSize:13,fontWeight:700,marginTop:2},children:["Produtos do pedido (",e.itens_count||0,")"]}),Array.isArray(e.itens)&&e.itens.length>0?r.jsx("div",{style:{display:"grid",gap:6},children:e.itens.map((o,t)=>r.jsxs("div",{style:{border:"1px solid #f1f5f9",borderRadius:6,padding:8},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600},children:o.nome||"Produto"}),r.jsxs("div",{style:{fontSize:12,color:"#475569"},children:[o.quantidade," x ",k(o.preco_unitario)," = ",k(o.subtotal)]})]},`${e.pedido_id}-${o.produto_id||t}`))}):r.jsx("div",{style:{fontSize:12,color:"#666"},children:"Sem itens detalhados para este pedido."})]},e.pedido_id))}),r.jsx("button",{className:"btn-secondary",onClick:Se,style:{marginTop:10},disabled:xe,children:xe?"Atualizando...":"Atualizar pedidos"})]}),p==="conta"&&r.jsx(r.Fragment,{children:v?r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,display:"grid",gap:10},children:[r.jsx("h3",{style:{marginTop:0,marginBottom:0},children:"Meus dados cadastrais"}),r.jsx("div",{style:{fontSize:13,color:"#64748b"},children:"Esses dados ficam vinculados √† sua conta e ser√£o usados no pedido e no PDV."}),r.jsxs("form",{onSubmit:Ur,style:{display:"grid",gap:8},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:h.nome,onChange:e=>y(o=>({...o,nome:e.target.value})),placeholder:"Nome completo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:(a==null?void 0:a.email)||"",disabled:!0,placeholder:"Email",style:{padding:8,border:"1px solid #ddd",borderRadius:6,background:"#f8fafc"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[r.jsx("input",{value:h.telefone,onChange:e=>y(o=>({...o,telefone:e.target.value})),placeholder:"Telefone",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.cpf,onChange:e=>y(o=>({...o,cpf:e.target.value})),placeholder:"CPF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("input",{value:h.cep,onChange:e=>y(o=>({...o,cep:e.target.value})),onBlur:Kr,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.endereco,onChange:e=>y(o=>({...o,endereco:e.target.value})),placeholder:"Endere√ßo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:8},children:[r.jsx("input",{value:h.numero,onChange:e=>y(o=>({...o,numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.complemento,onChange:e=>y(o=>({...o,complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 120px",gap:8},children:[r.jsx("input",{value:h.bairro,onChange:e=>y(o=>({...o,bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.cidade,onChange:e=>y(o=>({...o,cidade:e.target.value})),placeholder:"Cidade",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.estado,onChange:e=>y(o=>({...o,estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>y(e=>({...e,usar_endereco_entrega_diferente:!e.usar_endereco_entrega_diferente})),style:{justifySelf:"start"},children:h.usar_endereco_entrega_diferente?"Remover endere√ßo de entrega diferente":"Usar endere√ßo de entrega diferente"}),h.usar_endereco_entrega_diferente&&r.jsxs("div",{style:{display:"grid",gap:8,border:"1px solid #e5e7eb",borderRadius:8,padding:10,background:"#f8fafc"},children:[r.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#334155"},children:"Endere√ßo de entrega (dados complementares)"}),r.jsx("input",{value:h.entrega_nome,onChange:e=>y(o=>({...o,entrega_nome:e.target.value})),placeholder:"Nome completo para entrega",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_cep,onChange:e=>y(o=>({...o,entrega_cep:e.target.value})),onBlur:Yr,placeholder:"CEP",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_endereco,onChange:e=>y(o=>({...o,entrega_endereco:e.target.value})),placeholder:"Rua / Avenida",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:8},children:[r.jsx("input",{value:h.entrega_numero,onChange:e=>y(o=>({...o,entrega_numero:e.target.value})),placeholder:"N√∫mero",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_complemento,onChange:e=>y(o=>({...o,entrega_complemento:e.target.value})),placeholder:"Complemento",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 120px",gap:8},children:[r.jsx("input",{value:h.entrega_bairro,onChange:e=>y(o=>({...o,entrega_bairro:e.target.value})),placeholder:"Bairro",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_cidade,onChange:e=>y(o=>({...o,entrega_cidade:e.target.value})),placeholder:"Cidade",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{value:h.entrega_estado,onChange:e=>y(o=>({...o,entrega_estado:e.target.value})),placeholder:"UF",style:{padding:8,border:"1px solid #ddd",borderRadius:6}})]})]}),r.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[r.jsx("button",{className:"btn-primary",type:"submit",disabled:Ke,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,fontWeight:700,cursor:"pointer",transition:"background 0.15s"},children:Ke?"Salvando...":"Salvar cadastro"}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:Gr,children:"Sair"})]})]}),r.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Lista de desejos: ",J.length," item(ns) ‚Ä¢ Avise-me: ",be.length," solicita√ß√£o(√µes)"]})]}):r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Cadastro"}),r.jsxs("form",{onSubmit:Vr,autoComplete:"off",style:{display:"grid",gap:8},children:[r.jsx("input",{name:"ecommerce_register_nome",autoComplete:"off",value:Y.nome,onChange:e=>oe(o=>({...o,nome:e.target.value})),placeholder:"Nome completo",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("input",{name:"ecommerce_register_email",autoComplete:"off",value:Y.email,onChange:e=>oe(o=>({...o,email:e.target.value})),placeholder:"Email",type:"email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8},children:[r.jsx("input",{name:"ecommerce_register_password",autoComplete:"new-password",value:Y.password,onChange:e=>oe(o=>({...o,password:e.target.value})),placeholder:"Senha",type:Me?"text":"password",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>Br(e=>!e),children:Me?"Ocultar":"üëÅ Mostrar"})]}),r.jsx("button",{className:"btn-primary",type:"submit",disabled:Oe,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,fontWeight:700,cursor:"pointer",transition:"background 0.15s"},children:"Cadastrar"})]})]}),r.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8},children:[r.jsx("h3",{style:{marginTop:0},children:"Login"}),r.jsxs("form",{onSubmit:Hr,autoComplete:"off",style:{display:"grid",gap:8},children:[r.jsx("input",{name:"ecommerce_login_email",autoComplete:"off",value:ne.email,onChange:e=>pe(o=>({...o,email:e.target.value})),placeholder:"Email",type:"email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8},children:[r.jsx("input",{name:"ecommerce_login_password",autoComplete:"new-password",value:ne.password,onChange:e=>pe(o=>({...o,password:e.target.value})),placeholder:"Senha",type:qe?"text":"password",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),r.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>Pr(e=>!e),children:qe?"Ocultar":"üëÅ Mostrar"})]}),r.jsx("button",{className:"btn-primary",type:"submit",disabled:Oe,style:{background:"#6366f1",border:"none",color:"#fff",borderRadius:10,fontWeight:700,cursor:"pointer",transition:"background 0.15s"},children:"Entrar"})]})]})]})}),B.open&&r.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:16},onClick:()=>P({open:!1,product:null,email:"",loading:!1}),children:r.jsxs("div",{style:{background:"#fff",borderRadius:16,padding:28,maxWidth:400,width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{margin:"0 0 8px",fontSize:18,fontWeight:700,color:"#1a1a2e"},children:"üîî Avise-me quando chegar"}),r.jsxs("p",{style:{margin:"0 0 20px",fontSize:14,color:"#6b7280"},children:[r.jsx("strong",{children:(wr=B.product)==null?void 0:wr.nome})," est√° sem estoque no momento. Digite seu email e avisaremos quando voltar."]}),r.jsxs("form",{onSubmit:Qr,style:{display:"flex",flexDirection:"column",gap:12},children:[r.jsx("input",{type:"email",required:!0,placeholder:"seu@email.com",value:B.email,autoFocus:!0,onChange:e=>P(o=>({...o,email:e.target.value})),style:{padding:"10px 12px",border:"1.5px solid #d1d5db",borderRadius:8,fontSize:14,outline:"none"}}),r.jsxs("div",{style:{display:"flex",gap:8},children:[r.jsx("button",{type:"button",onClick:()=>P({open:!1,product:null,email:"",loading:!1}),style:{flex:1,padding:"10px 0",borderRadius:8,border:"1.5px solid #d1d5db",background:"#fff",color:"#374151",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:B.loading,style:{flex:2,padding:"10px 0",borderRadius:8,border:"none",background:"#6366f1",color:"#fff",fontSize:14,fontWeight:700,cursor:"pointer",opacity:B.loading?.7:1},children:B.loading?"Registrando‚Ä¶":"Me avise!"})]})]})]})})]})}export{vo as default};
