function VR(t,r){for(var a=0;a<r.length;a++){const s=r[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A6={exports:{}},Lf={},P6={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=Symbol.for("react.element"),UR=Symbol.for("react.portal"),WR=Symbol.for("react.fragment"),HR=Symbol.for("react.strict_mode"),KR=Symbol.for("react.profiler"),GR=Symbol.for("react.provider"),XR=Symbol.for("react.context"),YR=Symbol.for("react.forward_ref"),QR=Symbol.for("react.suspense"),JR=Symbol.for("react.memo"),ZR=Symbol.for("react.lazy"),Pw=Symbol.iterator;function e7(t){return t===null||typeof t!="object"?null:(t=Pw&&t[Pw]||t["@@iterator"],typeof t=="function"?t:null)}var T6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O6=Object.assign,F6={};function Qd(t,r,a){this.props=t,this.context=r,this.refs=F6,this.updater=a||T6}Qd.prototype.isReactComponent={};Qd.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};Qd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $6(){}$6.prototype=Qd.prototype;function N1(t,r,a){this.props=t,this.context=r,this.refs=F6,this.updater=a||T6}var w1=N1.prototype=new $6;w1.constructor=N1;O6(w1,Qd.prototype);w1.isPureReactComponent=!0;var Tw=Array.isArray,R6=Object.prototype.hasOwnProperty,_1={current:null},D6={key:!0,ref:!0,__self:!0,__source:!0};function M6(t,r,a){var s,n={},o=null,i=null;if(r!=null)for(s in r.ref!==void 0&&(i=r.ref),r.key!==void 0&&(o=""+r.key),r)R6.call(r,s)&&!D6.hasOwnProperty(s)&&(n[s]=r[s]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:Bx,type:t,key:o,ref:i,props:n,_owner:_1.current}}function t7(t,r){return{$$typeof:Bx,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function S1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bx}function r7(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return r[a]})}var Ow=/\/+/g;function mb(t,r){return typeof t=="object"&&t!==null&&t.key!=null?r7(""+t.key):r.toString(36)}function xp(t,r,a,s,n){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Bx:case UR:i=!0}}if(i)return i=t,n=n(i),t=s===""?"."+mb(i,0):s,Tw(n)?(a="",t!=null&&(a=t.replace(Ow,"$&/")+"/"),xp(n,r,a,"",function(d){return d})):n!=null&&(S1(n)&&(n=t7(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Ow,"$&/")+"/")+t)),r.push(n)),1;if(i=0,s=s===""?".":s+":",Tw(t))for(var l=0;l<t.length;l++){o=t[l];var c=s+mb(o,l);i+=xp(o,r,a,c,n)}else if(c=e7(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=s+mb(o,l++),i+=xp(o,r,a,c,n);else if(o==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return i}function v0(t,r,a){if(t==null)return t;var s=[],n=0;return xp(t,s,"","",function(o){return r.call(a,o,n++)}),s}function a7(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var ns={current:null},pp={transition:null},s7={ReactCurrentDispatcher:ns,ReactCurrentBatchConfig:pp,ReactCurrentOwner:_1};function I6(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:v0,forEach:function(t,r,a){v0(t,function(){r.apply(this,arguments)},a)},count:function(t){var r=0;return v0(t,function(){r++}),r},toArray:function(t){return v0(t,function(r){return r})||[]},only:function(t){if(!S1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ut.Component=Qd;Ut.Fragment=WR;Ut.Profiler=KR;Ut.PureComponent=N1;Ut.StrictMode=HR;Ut.Suspense=QR;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s7;Ut.act=I6;Ut.cloneElement=function(t,r,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=O6({},t.props),n=t.key,o=t.ref,i=t._owner;if(r!=null){if(r.ref!==void 0&&(o=r.ref,i=_1.current),r.key!==void 0&&(n=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in r)R6.call(r,c)&&!D6.hasOwnProperty(c)&&(s[c]=r[c]===void 0&&l!==void 0?l[c]:r[c])}var c=arguments.length-2;if(c===1)s.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Bx,type:t.type,key:n,ref:o,props:s,_owner:i}};Ut.createContext=function(t){return t={$$typeof:XR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GR,_context:t},t.Consumer=t};Ut.createElement=M6;Ut.createFactory=function(t){var r=M6.bind(null,t);return r.type=t,r};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(t){return{$$typeof:YR,render:t}};Ut.isValidElement=S1;Ut.lazy=function(t){return{$$typeof:ZR,_payload:{_status:-1,_result:t},_init:a7}};Ut.memo=function(t,r){return{$$typeof:JR,type:t,compare:r===void 0?null:r}};Ut.startTransition=function(t){var r=pp.transition;pp.transition={};try{t()}finally{pp.transition=r}};Ut.unstable_act=I6;Ut.useCallback=function(t,r){return ns.current.useCallback(t,r)};Ut.useContext=function(t){return ns.current.useContext(t)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(t){return ns.current.useDeferredValue(t)};Ut.useEffect=function(t,r){return ns.current.useEffect(t,r)};Ut.useId=function(){return ns.current.useId()};Ut.useImperativeHandle=function(t,r,a){return ns.current.useImperativeHandle(t,r,a)};Ut.useInsertionEffect=function(t,r){return ns.current.useInsertionEffect(t,r)};Ut.useLayoutEffect=function(t,r){return ns.current.useLayoutEffect(t,r)};Ut.useMemo=function(t,r){return ns.current.useMemo(t,r)};Ut.useReducer=function(t,r,a){return ns.current.useReducer(t,r,a)};Ut.useRef=function(t){return ns.current.useRef(t)};Ut.useState=function(t){return ns.current.useState(t)};Ut.useSyncExternalStore=function(t,r,a){return ns.current.useSyncExternalStore(t,r,a)};Ut.useTransition=function(){return ns.current.useTransition()};Ut.version="18.3.1";P6.exports=Ut;var j=P6.exports;const pe=dr(j),n7=VR({__proto__:null,default:pe},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o7=j,i7=Symbol.for("react.element"),l7=Symbol.for("react.fragment"),c7=Object.prototype.hasOwnProperty,d7=o7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u7={key:!0,ref:!0,__self:!0,__source:!0};function L6(t,r,a){var s,n={},o=null,i=null;a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(i=r.ref);for(s in r)c7.call(r,s)&&!u7.hasOwnProperty(s)&&(n[s]=r[s]);if(t&&t.defaultProps)for(s in r=t.defaultProps,r)n[s]===void 0&&(n[s]=r[s]);return{$$typeof:i7,type:t,key:o,ref:i,props:n,_owner:d7.current}}Lf.Fragment=l7;Lf.jsx=L6;Lf.jsxs=L6;A6.exports=Lf;var e=A6.exports,Tv={},B6={exports:{}},qs={},z6={exports:{}},q6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(D,K){var R=D.length;D.push(K);e:for(;0<R;){var B=R-1>>>1,F=D[B];if(0<n(F,K))D[B]=K,D[R]=F,R=B;else break e}}function a(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var K=D[0],R=D.pop();if(R!==K){D[0]=R;e:for(var B=0,F=D.length,I=F>>>1;B<I;){var k=2*(B+1)-1,M=D[k],z=k+1,oe=D[z];if(0>n(M,R))z<F&&0>n(oe,M)?(D[B]=oe,D[z]=R,B=z):(D[B]=M,D[k]=R,B=k);else if(z<F&&0>n(oe,R))D[B]=oe,D[z]=R,B=z;else break e}}return K}function n(D,K){var R=D.sortIndex-K.sortIndex;return R!==0?R:D.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,x=3,h=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var K=a(d);K!==null;){if(K.callback===null)s(d);else if(K.startTime<=D)s(d),K.sortIndex=K.expirationTime,r(c,K);else break;K=a(d)}}function N(D){if(p=!1,b(D),!v)if(a(c)!==null)v=!0,L(_);else{var K=a(d);K!==null&&Z(N,K.startTime-D)}}function _(D,K){v=!1,p&&(p=!1,y(C),C=-1),h=!0;var R=x;try{for(b(K),m=a(c);m!==null&&(!(m.expirationTime>K)||D&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,x=m.priorityLevel;var F=B(m.expirationTime<=K);K=t.unstable_now(),typeof F=="function"?m.callback=F:m===a(c)&&s(c),b(K)}else s(c);m=a(c)}if(m!==null)var I=!0;else{var k=a(d);k!==null&&Z(N,k.startTime-K),I=!1}return I}finally{m=null,x=R,h=!1}}var w=!1,S=null,C=-1,E=5,T=-1;function q(){return!(t.unstable_now()-T<E)}function A(){if(S!==null){var D=t.unstable_now();T=D;var K=!0;try{K=S(!0,D)}finally{K?O():(w=!1,S=null)}}else w=!1}var O;if(typeof f=="function")O=function(){f(A)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,G=V.port2;V.port1.onmessage=A,O=function(){G.postMessage(null)}}else O=function(){g(A,0)};function L(D){S=D,w||(w=!0,O())}function Z(D,K){C=g(function(){D(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,L(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(D){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var R=x;x=K;try{return D()}finally{x=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=x;x=D;try{return K()}finally{x=R}},t.unstable_scheduleCallback=function(D,K,R){var B=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?B+R:B):R=B,D){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=R+F,D={id:u++,callback:K,priorityLevel:D,startTime:R,expirationTime:F,sortIndex:-1},R>B?(D.sortIndex=R,r(d,D),a(c)===null&&D===a(d)&&(p?(y(C),C=-1):p=!0,Z(N,R-B))):(D.sortIndex=F,r(c,D),v||h||(v=!0,L(_))),D},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(D){var K=x;return function(){var R=x;x=K;try{return D.apply(this,arguments)}finally{x=R}}}})(q6);z6.exports=q6;var m7=z6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x7=j,Bs=m7;function st(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V6=new Set,_m={};function Ql(t,r){ld(t,r),ld(t+"Capture",r)}function ld(t,r){for(_m[t]=r,t=0;t<r.length;t++)V6.add(r[t])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ov=Object.prototype.hasOwnProperty,p7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fw={},$w={};function h7(t){return Ov.call($w,t)?!0:Ov.call(Fw,t)?!1:p7.test(t)?$w[t]=!0:(Fw[t]=!0,!1)}function f7(t,r,a,s){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return s?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g7(t,r,a,s){if(r===null||typeof r>"u"||f7(t,r,a,s))return!0;if(s)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function os(t,r,a,s,n,o,i){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=t,this.type=r,this.sanitizeURL=o,this.removeEmptyString=i}var Ra={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ra[t]=new os(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Ra[r]=new os(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ra[t]=new os(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ra[t]=new os(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ra[t]=new os(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ra[t]=new os(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ra[t]=new os(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ra[t]=new os(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ra[t]=new os(t,5,!1,t.toLowerCase(),null,!1,!1)});var C1=/[\-:]([a-z])/g;function k1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(C1,k1);Ra[r]=new os(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(C1,k1);Ra[r]=new os(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(C1,k1);Ra[r]=new os(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ra[t]=new os(t,1,!1,t.toLowerCase(),null,!1,!1)});Ra.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ra[t]=new os(t,1,!1,t.toLowerCase(),null,!0,!0)});function E1(t,r,a,s){var n=Ra.hasOwnProperty(r)?Ra[r]:null;(n!==null?n.type!==0:s||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(g7(r,a,n,s)&&(a=null),s||n===null?h7(r)&&(a===null?t.removeAttribute(r):t.setAttribute(r,""+a)):n.mustUseProperty?t[n.propertyName]=a===null?n.type===3?!1:"":a:(r=n.attributeName,s=n.attributeNamespace,a===null?t.removeAttribute(r):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,s?t.setAttributeNS(s,r,a):t.setAttribute(r,a))))}var Bo=x7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y0=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),kc=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),Fv=Symbol.for("react.profiler"),U6=Symbol.for("react.provider"),W6=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),$v=Symbol.for("react.suspense"),Rv=Symbol.for("react.suspense_list"),T1=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),H6=Symbol.for("react.offscreen"),Rw=Symbol.iterator;function _u(t){return t===null||typeof t!="object"?null:(t=Rw&&t[Rw]||t["@@iterator"],typeof t=="function"?t:null)}var Rr=Object.assign,xb;function Ku(t){if(xb===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xb=r&&r[1]||""}return`
`+xb+t}var pb=!1;function hb(t,r){if(!t||pb)return"";pb=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(d){var s=d}Reflect.construct(t,[],r)}else{try{r.call()}catch(d){s=d}t.call(r.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),o=s.stack.split(`
`),i=n.length-1,l=o.length-1;1<=i&&0<=l&&n[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||n[i]!==o[l]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{pb=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Ku(t):""}function b7(t){switch(t.tag){case 5:return Ku(t.type);case 16:return Ku("Lazy");case 13:return Ku("Suspense");case 19:return Ku("SuspenseList");case 0:case 2:case 15:return t=hb(t.type,!1),t;case 11:return t=hb(t.type.render,!1),t;case 1:return t=hb(t.type,!0),t;default:return""}}function Dv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kc:return"Fragment";case Cc:return"Portal";case Fv:return"Profiler";case A1:return"StrictMode";case $v:return"Suspense";case Rv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W6:return(t.displayName||"Context")+".Consumer";case U6:return(t._context.displayName||"Context")+".Provider";case P1:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T1:return r=t.displayName||null,r!==null?r:Dv(t.type)||"Memo";case ai:r=t._payload,t=t._init;try{return Dv(t(r))}catch{}}return null}function v7(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dv(r);case 8:return r===A1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function K6(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function y7(t){var r=K6(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),s=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function j0(t){t._valueTracker||(t._valueTracker=y7(t))}function G6(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),s="";return t&&(s=K6(t)?t.checked?"true":"false":t.value),t=s,t!==a?(r.setValue(t),!0):!1}function Op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mv(t,r){var a=r.checked;return Rr({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Dw(t,r){var a=r.defaultValue==null?"":r.defaultValue,s=r.checked!=null?r.checked:r.defaultChecked;a=Ei(r.value!=null?r.value:a),t._wrapperState={initialChecked:s,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function X6(t,r){r=r.checked,r!=null&&E1(t,"checked",r,!1)}function Iv(t,r){X6(t,r);var a=Ei(r.value),s=r.type;if(a!=null)s==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Lv(t,r.type,a):r.hasOwnProperty("defaultValue")&&Lv(t,r.type,Ei(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Mw(t,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var s=r.type;if(!(s!=="submit"&&s!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,a||r===t.value||(t.value=r),t.defaultValue=r}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Lv(t,r,a){(r!=="number"||Op(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var Gu=Array.isArray;function Wc(t,r,a,s){if(t=t.options,r){r={};for(var n=0;n<a.length;n++)r["$"+a[n]]=!0;for(a=0;a<t.length;a++)n=r.hasOwnProperty("$"+t[a].value),t[a].selected!==n&&(t[a].selected=n),n&&s&&(t[a].defaultSelected=!0)}else{for(a=""+Ei(a),r=null,n=0;n<t.length;n++){if(t[n].value===a){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}r!==null||t[n].disabled||(r=t[n])}r!==null&&(r.selected=!0)}}function Bv(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(st(91));return Rr({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Iw(t,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(st(92));if(Gu(a)){if(1<a.length)throw Error(st(93));a=a[0]}r=a}r==null&&(r=""),a=r}t._wrapperState={initialValue:Ei(a)}}function Y6(t,r){var a=Ei(r.value),s=Ei(r.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),r.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),s!=null&&(t.defaultValue=""+s)}function Lw(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Q6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zv(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Q6(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var N0,J6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,s,n){MSApp.execUnsafeLocalFunction(function(){return t(r,a,s,n)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(N0=N0||document.createElement("div"),N0.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=N0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sm(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Zu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j7=["Webkit","ms","Moz","O"];Object.keys(Zu).forEach(function(t){j7.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Zu[r]=Zu[t]})});function Z6(t,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Zu.hasOwnProperty(t)&&Zu[t]?(""+r).trim():r+"px"}function e5(t,r){t=t.style;for(var a in r)if(r.hasOwnProperty(a)){var s=a.indexOf("--")===0,n=Z6(a,r[a],s);a==="float"&&(a="cssFloat"),s?t.setProperty(a,n):t[a]=n}}var N7=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qv(t,r){if(r){if(N7[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(st(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(st(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(st(61))}if(r.style!=null&&typeof r.style!="object")throw Error(st(62))}}function Vv(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uv=null;function O1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wv=null,Hc=null,Kc=null;function Bw(t){if(t=Vx(t)){if(typeof Wv!="function")throw Error(st(280));var r=t.stateNode;r&&(r=Uf(r),Wv(t.stateNode,t.type,r))}}function t5(t){Hc?Kc?Kc.push(t):Kc=[t]:Hc=t}function r5(){if(Hc){var t=Hc,r=Kc;if(Kc=Hc=null,Bw(t),r)for(t=0;t<r.length;t++)Bw(r[t])}}function a5(t,r){return t(r)}function s5(){}var fb=!1;function n5(t,r,a){if(fb)return t(r,a);fb=!0;try{return a5(t,r,a)}finally{fb=!1,(Hc!==null||Kc!==null)&&(s5(),r5())}}function Cm(t,r){var a=t.stateNode;if(a===null)return null;var s=Uf(a);if(s===null)return null;a=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(st(231,r,typeof a));return a}var Hv=!1;if(ko)try{var Su={};Object.defineProperty(Su,"passive",{get:function(){Hv=!0}}),window.addEventListener("test",Su,Su),window.removeEventListener("test",Su,Su)}catch{Hv=!1}function w7(t,r,a,s,n,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{r.apply(a,d)}catch(u){this.onError(u)}}var em=!1,Fp=null,$p=!1,Kv=null,_7={onError:function(t){em=!0,Fp=t}};function S7(t,r,a,s,n,o,i,l,c){em=!1,Fp=null,w7.apply(_7,arguments)}function C7(t,r,a,s,n,o,i,l,c){if(S7.apply(this,arguments),em){if(em){var d=Fp;em=!1,Fp=null}else throw Error(st(198));$p||($p=!0,Kv=d)}}function Jl(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function o5(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function zw(t){if(Jl(t)!==t)throw Error(st(188))}function k7(t){var r=t.alternate;if(!r){if(r=Jl(t),r===null)throw Error(st(188));return r!==t?null:t}for(var a=t,s=r;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return zw(n),t;if(o===s)return zw(n),r;o=o.sibling}throw Error(st(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(st(189))}}if(a.alternate!==s)throw Error(st(190))}if(a.tag!==3)throw Error(st(188));return a.stateNode.current===a?t:r}function i5(t){return t=k7(t),t!==null?l5(t):null}function l5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=l5(t);if(r!==null)return r;t=t.sibling}return null}var c5=Bs.unstable_scheduleCallback,qw=Bs.unstable_cancelCallback,E7=Bs.unstable_shouldYield,A7=Bs.unstable_requestPaint,Wr=Bs.unstable_now,P7=Bs.unstable_getCurrentPriorityLevel,F1=Bs.unstable_ImmediatePriority,d5=Bs.unstable_UserBlockingPriority,Rp=Bs.unstable_NormalPriority,T7=Bs.unstable_LowPriority,u5=Bs.unstable_IdlePriority,Bf=null,Kn=null;function O7(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Bf,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:R7,F7=Math.log,$7=Math.LN2;function R7(t){return t>>>=0,t===0?32:31-(F7(t)/$7|0)|0}var w0=64,_0=4194304;function Xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dp(t,r){var a=t.pendingLanes;if(a===0)return 0;var s=0,n=t.suspendedLanes,o=t.pingedLanes,i=a&268435455;if(i!==0){var l=i&~n;l!==0?s=Xu(l):(o&=i,o!==0&&(s=Xu(o)))}else i=a&~n,i!==0?s=Xu(i):o!==0&&(s=Xu(o));if(s===0)return 0;if(r!==0&&r!==s&&!(r&n)&&(n=s&-s,o=r&-r,n>=o||n===16&&(o&4194240)!==0))return r;if(s&4&&(s|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=s;0<r;)a=31-_n(r),n=1<<a,s|=t[a],r&=~n;return s}function D7(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M7(t,r){for(var a=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-_n(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=D7(l,r)):c<=r&&(t.expiredLanes|=l),o&=~l}}function Gv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m5(){var t=w0;return w0<<=1,!(w0&4194240)&&(w0=64),t}function gb(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function zx(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-_n(r),t[r]=a}function I7(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<a;){var n=31-_n(a),o=1<<n;r[n]=0,s[n]=-1,t[n]=-1,a&=~o}}function $1(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var s=31-_n(a),n=1<<s;n&r|t[s]&r&&(t[s]|=r),a&=~n}}var lr=0;function x5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var p5,R1,h5,f5,g5,Xv=!1,S0=[],bi=null,vi=null,yi=null,km=new Map,Em=new Map,oi=[],L7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vw(t,r){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":km.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Em.delete(r.pointerId)}}function Cu(t,r,a,s,n,o){return t===null||t.nativeEvent!==o?(t={blockedOn:r,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},r!==null&&(r=Vx(r),r!==null&&R1(r)),t):(t.eventSystemFlags|=s,r=t.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),t)}function B7(t,r,a,s,n){switch(r){case"focusin":return bi=Cu(bi,t,r,a,s,n),!0;case"dragenter":return vi=Cu(vi,t,r,a,s,n),!0;case"mouseover":return yi=Cu(yi,t,r,a,s,n),!0;case"pointerover":var o=n.pointerId;return km.set(o,Cu(km.get(o)||null,t,r,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Em.set(o,Cu(Em.get(o)||null,t,r,a,s,n)),!0}return!1}function b5(t){var r=cl(t.target);if(r!==null){var a=Jl(r);if(a!==null){if(r=a.tag,r===13){if(r=o5(a),r!==null){t.blockedOn=r,g5(t.priority,function(){h5(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hp(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Yv(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var s=new a.constructor(a.type,a);Uv=s,a.target.dispatchEvent(s),Uv=null}else return r=Vx(a),r!==null&&R1(r),t.blockedOn=a,!1;r.shift()}return!0}function Uw(t,r,a){hp(t)&&a.delete(r)}function z7(){Xv=!1,bi!==null&&hp(bi)&&(bi=null),vi!==null&&hp(vi)&&(vi=null),yi!==null&&hp(yi)&&(yi=null),km.forEach(Uw),Em.forEach(Uw)}function ku(t,r){t.blockedOn===r&&(t.blockedOn=null,Xv||(Xv=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,z7)))}function Am(t){function r(n){return ku(n,t)}if(0<S0.length){ku(S0[0],t);for(var a=1;a<S0.length;a++){var s=S0[a];s.blockedOn===t&&(s.blockedOn=null)}}for(bi!==null&&ku(bi,t),vi!==null&&ku(vi,t),yi!==null&&ku(yi,t),km.forEach(r),Em.forEach(r),a=0;a<oi.length;a++)s=oi[a],s.blockedOn===t&&(s.blockedOn=null);for(;0<oi.length&&(a=oi[0],a.blockedOn===null);)b5(a),a.blockedOn===null&&oi.shift()}var Gc=Bo.ReactCurrentBatchConfig,Mp=!0;function q7(t,r,a,s){var n=lr,o=Gc.transition;Gc.transition=null;try{lr=1,D1(t,r,a,s)}finally{lr=n,Gc.transition=o}}function V7(t,r,a,s){var n=lr,o=Gc.transition;Gc.transition=null;try{lr=4,D1(t,r,a,s)}finally{lr=n,Gc.transition=o}}function D1(t,r,a,s){if(Mp){var n=Yv(t,r,a,s);if(n===null)kb(t,r,s,Ip,a),Vw(t,s);else if(B7(n,t,r,a,s))s.stopPropagation();else if(Vw(t,s),r&4&&-1<L7.indexOf(t)){for(;n!==null;){var o=Vx(n);if(o!==null&&p5(o),o=Yv(t,r,a,s),o===null&&kb(t,r,s,Ip,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else kb(t,r,s,null,a)}}var Ip=null;function Yv(t,r,a,s){if(Ip=null,t=O1(s),t=cl(t),t!==null)if(r=Jl(t),r===null)t=null;else if(a=r.tag,a===13){if(t=o5(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ip=t,null}function v5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P7()){case F1:return 1;case d5:return 4;case Rp:case T7:return 16;case u5:return 536870912;default:return 16}default:return 16}}var di=null,M1=null,fp=null;function y5(){if(fp)return fp;var t,r=M1,a=r.length,s,n="value"in di?di.value:di.textContent,o=n.length;for(t=0;t<a&&r[t]===n[t];t++);var i=a-t;for(s=1;s<=i&&r[a-s]===n[o-s];s++);return fp=n.slice(t,1<s?1-s:void 0)}function gp(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function C0(){return!0}function Ww(){return!1}function Vs(t){function r(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(a=t[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?C0:Ww,this.isPropagationStopped=Ww,this}return Rr(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=C0)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=C0)},persist:function(){},isPersistent:C0}),r}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I1=Vs(Jd),qx=Rr({},Jd,{view:0,detail:0}),U7=Vs(qx),bb,vb,Eu,zf=Rr({},qx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eu&&(Eu&&t.type==="mousemove"?(bb=t.screenX-Eu.screenX,vb=t.screenY-Eu.screenY):vb=bb=0,Eu=t),bb)},movementY:function(t){return"movementY"in t?t.movementY:vb}}),Hw=Vs(zf),W7=Rr({},zf,{dataTransfer:0}),H7=Vs(W7),K7=Rr({},qx,{relatedTarget:0}),yb=Vs(K7),G7=Rr({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),X7=Vs(G7),Y7=Rr({},Jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Q7=Vs(Y7),J7=Rr({},Jd,{data:0}),Kw=Vs(J7),Z7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rD(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=tD[t])?!!r[t]:!1}function L1(){return rD}var aD=Rr({},qx,{key:function(t){if(t.key){var r=Z7[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=gp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(t){return t.type==="keypress"?gp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sD=Vs(aD),nD=Rr({},zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gw=Vs(nD),oD=Rr({},qx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),iD=Vs(oD),lD=Rr({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),cD=Vs(lD),dD=Rr({},zf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uD=Vs(dD),mD=[9,13,27,32],B1=ko&&"CompositionEvent"in window,tm=null;ko&&"documentMode"in document&&(tm=document.documentMode);var xD=ko&&"TextEvent"in window&&!tm,j5=ko&&(!B1||tm&&8<tm&&11>=tm),Xw=" ",Yw=!1;function N5(t,r){switch(t){case"keyup":return mD.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ec=!1;function pD(t,r){switch(t){case"compositionend":return w5(r);case"keypress":return r.which!==32?null:(Yw=!0,Xw);case"textInput":return t=r.data,t===Xw&&Yw?null:t;default:return null}}function hD(t,r){if(Ec)return t==="compositionend"||!B1&&N5(t,r)?(t=y5(),fp=M1=di=null,Ec=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return j5&&r.locale!=="ko"?null:r.data;default:return null}}var fD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qw(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!fD[t.type]:r==="textarea"}function _5(t,r,a,s){t5(s),r=Lp(r,"onChange"),0<r.length&&(a=new I1("onChange","change",null,a,s),t.push({event:a,listeners:r}))}var rm=null,Pm=null;function gD(t){R5(t,0)}function qf(t){var r=Tc(t);if(G6(r))return t}function bD(t,r){if(t==="change")return r}var S5=!1;if(ko){var jb;if(ko){var Nb="oninput"in document;if(!Nb){var Jw=document.createElement("div");Jw.setAttribute("oninput","return;"),Nb=typeof Jw.oninput=="function"}jb=Nb}else jb=!1;S5=jb&&(!document.documentMode||9<document.documentMode)}function Zw(){rm&&(rm.detachEvent("onpropertychange",C5),Pm=rm=null)}function C5(t){if(t.propertyName==="value"&&qf(Pm)){var r=[];_5(r,Pm,t,O1(t)),n5(gD,r)}}function vD(t,r,a){t==="focusin"?(Zw(),rm=r,Pm=a,rm.attachEvent("onpropertychange",C5)):t==="focusout"&&Zw()}function yD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qf(Pm)}function jD(t,r){if(t==="click")return qf(r)}function ND(t,r){if(t==="input"||t==="change")return qf(r)}function wD(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var An=typeof Object.is=="function"?Object.is:wD;function Tm(t,r){if(An(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!Ov.call(r,n)||!An(t[n],r[n]))return!1}return!0}function e_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function t_(t,r){var a=e_(t);t=0;for(var s;a;){if(a.nodeType===3){if(s=t+a.textContent.length,t<=r&&s>=r)return{node:a,offset:r-t};t=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=e_(a)}}function k5(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?k5(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function E5(){for(var t=window,r=Op();r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Op(t.document)}return r}function z1(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function _D(t){var r=E5(),a=t.focusedElem,s=t.selectionRange;if(r!==a&&a&&a.ownerDocument&&k5(a.ownerDocument.documentElement,a)){if(s!==null&&z1(a)){if(r=s.start,t=s.end,t===void 0&&(t=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(t,a.value.length);else if(t=(r=a.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var n=a.textContent.length,o=Math.min(s.start,n);s=s.end===void 0?o:Math.min(s.end,n),!t.extend&&o>s&&(n=s,s=o,o=n),n=t_(a,o);var i=t_(a,s);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),t.removeAllRanges(),o>s?(t.addRange(r),t.extend(i.node,i.offset)):(r.setEnd(i.node,i.offset),t.addRange(r)))}}for(r=[],t=a;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)t=r[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SD=ko&&"documentMode"in document&&11>=document.documentMode,Ac=null,Qv=null,am=null,Jv=!1;function r_(t,r,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jv||Ac==null||Ac!==Op(s)||(s=Ac,"selectionStart"in s&&z1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),am&&Tm(am,s)||(am=s,s=Lp(Qv,"onSelect"),0<s.length&&(r=new I1("onSelect","select",null,r,a),t.push({event:r,listeners:s}),r.target=Ac)))}function k0(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Pc={animationend:k0("Animation","AnimationEnd"),animationiteration:k0("Animation","AnimationIteration"),animationstart:k0("Animation","AnimationStart"),transitionend:k0("Transition","TransitionEnd")},wb={},A5={};ko&&(A5=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function Vf(t){if(wb[t])return wb[t];if(!Pc[t])return t;var r=Pc[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in A5)return wb[t]=r[a];return t}var P5=Vf("animationend"),T5=Vf("animationiteration"),O5=Vf("animationstart"),F5=Vf("transitionend"),$5=new Map,a_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,r){$5.set(t,r),Ql(r,[t])}for(var _b=0;_b<a_.length;_b++){var Sb=a_[_b],CD=Sb.toLowerCase(),kD=Sb[0].toUpperCase()+Sb.slice(1);Di(CD,"on"+kD)}Di(P5,"onAnimationEnd");Di(T5,"onAnimationIteration");Di(O5,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(F5,"onTransitionEnd");ld("onMouseEnter",["mouseout","mouseover"]);ld("onMouseLeave",["mouseout","mouseover"]);ld("onPointerEnter",["pointerout","pointerover"]);ld("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ED=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function s_(t,r,a){var s=t.type||"unknown-event";t.currentTarget=a,C7(s,r,void 0,t),t.currentTarget=null}function R5(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var s=t[a],n=s.event;s=s.listeners;e:{var o=void 0;if(r)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;s_(n,l,d),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;s_(n,l,d),o=c}}}if($p)throw t=Kv,$p=!1,Kv=null,t}function Nr(t,r){var a=r[ay];a===void 0&&(a=r[ay]=new Set);var s=t+"__bubble";a.has(s)||(D5(r,t,2,!1),a.add(s))}function Cb(t,r,a){var s=0;r&&(s|=4),D5(a,t,s,r)}var E0="_reactListening"+Math.random().toString(36).slice(2);function Om(t){if(!t[E0]){t[E0]=!0,V6.forEach(function(a){a!=="selectionchange"&&(ED.has(a)||Cb(a,!1,t),Cb(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[E0]||(r[E0]=!0,Cb("selectionchange",!1,r))}}function D5(t,r,a,s){switch(v5(r)){case 1:var n=q7;break;case 4:n=V7;break;default:n=D1}a=n.bind(null,r,a,t),n=void 0,!Hv||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(r,a,{capture:!0,passive:n}):t.addEventListener(r,a,!0):n!==void 0?t.addEventListener(r,a,{passive:n}):t.addEventListener(r,a,!1)}function kb(t,r,a,s,n){var o=s;if(!(r&1)&&!(r&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;l!==null;){if(i=cl(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}n5(function(){var d=o,u=O1(a),m=[];e:{var x=$5.get(t);if(x!==void 0){var h=I1,v=t;switch(t){case"keypress":if(gp(a)===0)break e;case"keydown":case"keyup":h=sD;break;case"focusin":v="focus",h=yb;break;case"focusout":v="blur",h=yb;break;case"beforeblur":case"afterblur":h=yb;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=H7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iD;break;case P5:case T5:case O5:h=X7;break;case F5:h=cD;break;case"scroll":h=U7;break;case"wheel":h=uD;break;case"copy":case"cut":case"paste":h=Q7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Gw}var p=(r&4)!==0,g=!p&&t==="scroll",y=p?x!==null?x+"Capture":null:x;p=[];for(var f=d,b;f!==null;){b=f;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,y!==null&&(N=Cm(f,y),N!=null&&p.push(Fm(f,N,b)))),g)break;f=f.return}0<p.length&&(x=new h(x,v,null,a,u),m.push({event:x,listeners:p}))}}if(!(r&7)){e:{if(x=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",x&&a!==Uv&&(v=a.relatedTarget||a.fromElement)&&(cl(v)||v[Eo]))break e;if((h||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,h?(v=a.relatedTarget||a.toElement,h=d,v=v?cl(v):null,v!==null&&(g=Jl(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=d),h!==v)){if(p=Hw,N="onMouseLeave",y="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(p=Gw,N="onPointerLeave",y="onPointerEnter",f="pointer"),g=h==null?x:Tc(h),b=v==null?x:Tc(v),x=new p(N,f+"leave",h,a,u),x.target=g,x.relatedTarget=b,N=null,cl(u)===d&&(p=new p(y,f+"enter",v,a,u),p.target=b,p.relatedTarget=g,N=p),g=N,h&&v)t:{for(p=h,y=v,f=0,b=p;b;b=xc(b))f++;for(b=0,N=y;N;N=xc(N))b++;for(;0<f-b;)p=xc(p),f--;for(;0<b-f;)y=xc(y),b--;for(;f--;){if(p===y||y!==null&&p===y.alternate)break t;p=xc(p),y=xc(y)}p=null}else p=null;h!==null&&n_(m,x,h,p,!1),v!==null&&g!==null&&n_(m,g,v,p,!0)}}e:{if(x=d?Tc(d):window,h=x.nodeName&&x.nodeName.toLowerCase(),h==="select"||h==="input"&&x.type==="file")var _=bD;else if(Qw(x))if(S5)_=ND;else{_=yD;var w=vD}else(h=x.nodeName)&&h.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(_=jD);if(_&&(_=_(t,d))){_5(m,_,a,u);break e}w&&w(t,x,d),t==="focusout"&&(w=x._wrapperState)&&w.controlled&&x.type==="number"&&Lv(x,"number",x.value)}switch(w=d?Tc(d):window,t){case"focusin":(Qw(w)||w.contentEditable==="true")&&(Ac=w,Qv=d,am=null);break;case"focusout":am=Qv=Ac=null;break;case"mousedown":Jv=!0;break;case"contextmenu":case"mouseup":case"dragend":Jv=!1,r_(m,a,u);break;case"selectionchange":if(SD)break;case"keydown":case"keyup":r_(m,a,u)}var S;if(B1)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ec?N5(t,a)&&(C="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(C="onCompositionStart");C&&(j5&&a.locale!=="ko"&&(Ec||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ec&&(S=y5()):(di=u,M1="value"in di?di.value:di.textContent,Ec=!0)),w=Lp(d,C),0<w.length&&(C=new Kw(C,t,null,a,u),m.push({event:C,listeners:w}),S?C.data=S:(S=w5(a),S!==null&&(C.data=S)))),(S=xD?pD(t,a):hD(t,a))&&(d=Lp(d,"onBeforeInput"),0<d.length&&(u=new Kw("onBeforeInput","beforeinput",null,a,u),m.push({event:u,listeners:d}),u.data=S))}R5(m,r)})}function Fm(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Lp(t,r){for(var a=r+"Capture",s=[];t!==null;){var n=t,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Cm(t,a),o!=null&&s.unshift(Fm(t,o,n)),o=Cm(t,r),o!=null&&s.push(Fm(t,o,n))),t=t.return}return s}function xc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n_(t,r,a,s,n){for(var o=r._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,n?(c=Cm(a,o),c!=null&&i.unshift(Fm(a,c,l))):n||(c=Cm(a,o),c!=null&&i.push(Fm(a,c,l)))),a=a.return}i.length!==0&&t.push({event:r,listeners:i})}var AD=/\r\n?/g,PD=/\u0000|\uFFFD/g;function o_(t){return(typeof t=="string"?t:""+t).replace(AD,`
`).replace(PD,"")}function A0(t,r,a){if(r=o_(r),o_(t)!==r&&a)throw Error(st(425))}function Bp(){}var Zv=null,ey=null;function ty(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ry=typeof setTimeout=="function"?setTimeout:void 0,TD=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,OD=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(FD)}:ry;function FD(t){setTimeout(function(){throw t})}function Eb(t,r){var a=r,s=0;do{var n=a.nextSibling;if(t.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){t.removeChild(n),Am(r);return}s--}else a!=="$"&&a!=="$?"&&a!=="$!"||s++;a=n}while(a);Am(r)}function ji(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function l_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}var Zd=Math.random().toString(36).slice(2),zn="__reactFiber$"+Zd,$m="__reactProps$"+Zd,Eo="__reactContainer$"+Zd,ay="__reactEvents$"+Zd,$D="__reactListeners$"+Zd,RD="__reactHandles$"+Zd;function cl(t){var r=t[zn];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Eo]||a[zn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=l_(t);t!==null;){if(a=t[zn])return a;t=l_(t)}return r}t=a,a=t.parentNode}return null}function Vx(t){return t=t[zn]||t[Eo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(st(33))}function Uf(t){return t[$m]||null}var sy=[],Oc=-1;function Mi(t){return{current:t}}function Sr(t){0>Oc||(t.current=sy[Oc],sy[Oc]=null,Oc--)}function vr(t,r){Oc++,sy[Oc]=t.current,t.current=r}var Ai={},Ka=Mi(Ai),ms=Mi(!1),Al=Ai;function cd(t,r){var a=t.type.contextTypes;if(!a)return Ai;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===r)return s.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in a)n[o]=r[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),n}function xs(t){return t=t.childContextTypes,t!=null}function zp(){Sr(ms),Sr(Ka)}function c_(t,r,a){if(Ka.current!==Ai)throw Error(st(168));vr(Ka,r),vr(ms,a)}function M5(t,r,a){var s=t.stateNode;if(r=r.childContextTypes,typeof s.getChildContext!="function")return a;s=s.getChildContext();for(var n in s)if(!(n in r))throw Error(st(108,v7(t)||"Unknown",n));return Rr({},a,s)}function qp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ai,Al=Ka.current,vr(Ka,t),vr(ms,ms.current),!0}function d_(t,r,a){var s=t.stateNode;if(!s)throw Error(st(169));a?(t=M5(t,r,Al),s.__reactInternalMemoizedMergedChildContext=t,Sr(ms),Sr(Ka),vr(Ka,t)):Sr(ms),vr(ms,a)}var xo=null,Wf=!1,Ab=!1;function I5(t){xo===null?xo=[t]:xo.push(t)}function DD(t){Wf=!0,I5(t)}function Ii(){if(!Ab&&xo!==null){Ab=!0;var t=0,r=lr;try{var a=xo;for(lr=1;t<a.length;t++){var s=a[t];do s=s(!0);while(s!==null)}xo=null,Wf=!1}catch(n){throw xo!==null&&(xo=xo.slice(t+1)),c5(F1,Ii),n}finally{lr=r,Ab=!1}}return null}var Fc=[],$c=0,Vp=null,Up=0,Js=[],Zs=0,Pl=null,ho=1,fo="";function tl(t,r){Fc[$c++]=Up,Fc[$c++]=Vp,Vp=t,Up=r}function L5(t,r,a){Js[Zs++]=ho,Js[Zs++]=fo,Js[Zs++]=Pl,Pl=t;var s=ho;t=fo;var n=32-_n(s)-1;s&=~(1<<n),a+=1;var o=32-_n(r)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,ho=1<<32-_n(r)+n|a<<n|s,fo=o+t}else ho=1<<o|a<<n|s,fo=t}function q1(t){t.return!==null&&(tl(t,1),L5(t,1,0))}function V1(t){for(;t===Vp;)Vp=Fc[--$c],Fc[$c]=null,Up=Fc[--$c],Fc[$c]=null;for(;t===Pl;)Pl=Js[--Zs],Js[Zs]=null,fo=Js[--Zs],Js[Zs]=null,ho=Js[--Zs],Js[Zs]=null}var Ds=null,Rs=null,Pr=!1,vn=null;function B5(t,r){var a=tn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function u_(t,r){switch(t.tag){case 5:var a=t.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Ds=t,Rs=ji(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Ds=t,Rs=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Pl!==null?{id:ho,overflow:fo}:null,t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=tn(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,Ds=t,Rs=null,!0):!1;default:return!1}}function ny(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oy(t){if(Pr){var r=Rs;if(r){var a=r;if(!u_(t,r)){if(ny(t))throw Error(st(418));r=ji(a.nextSibling);var s=Ds;r&&u_(t,r)?B5(s,a):(t.flags=t.flags&-4097|2,Pr=!1,Ds=t)}}else{if(ny(t))throw Error(st(418));t.flags=t.flags&-4097|2,Pr=!1,Ds=t}}}function m_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ds=t}function P0(t){if(t!==Ds)return!1;if(!Pr)return m_(t),Pr=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ty(t.type,t.memoizedProps)),r&&(r=Rs)){if(ny(t))throw z5(),Error(st(418));for(;r;)B5(t,r),r=ji(r.nextSibling)}if(m_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(st(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(r===0){Rs=ji(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}t=t.nextSibling}Rs=null}}else Rs=Ds?ji(t.stateNode.nextSibling):null;return!0}function z5(){for(var t=Rs;t;)t=ji(t.nextSibling)}function dd(){Rs=Ds=null,Pr=!1}function U1(t){vn===null?vn=[t]:vn.push(t)}var MD=Bo.ReactCurrentBatchConfig;function Au(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(st(309));var s=a.stateNode}if(!s)throw Error(st(147,t));var n=s,o=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===o?r.ref:(r=function(i){var l=n.refs;i===null?delete l[o]:l[o]=i},r._stringRef=o,r)}if(typeof t!="string")throw Error(st(284));if(!a._owner)throw Error(st(290,t))}return t}function T0(t,r){throw t=Object.prototype.toString.call(r),Error(st(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function x_(t){var r=t._init;return r(t._payload)}function q5(t){function r(y,f){if(t){var b=y.deletions;b===null?(y.deletions=[f],y.flags|=16):b.push(f)}}function a(y,f){if(!t)return null;for(;f!==null;)r(y,f),f=f.sibling;return null}function s(y,f){for(y=new Map;f!==null;)f.key!==null?y.set(f.key,f):y.set(f.index,f),f=f.sibling;return y}function n(y,f){return y=Si(y,f),y.index=0,y.sibling=null,y}function o(y,f,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<f?(y.flags|=2,f):b):(y.flags|=2,f)):(y.flags|=1048576,f)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,f,b,N){return f===null||f.tag!==6?(f=Db(b,y.mode,N),f.return=y,f):(f=n(f,b),f.return=y,f)}function c(y,f,b,N){var _=b.type;return _===kc?u(y,f,b.props.children,N,b.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ai&&x_(_)===f.type)?(N=n(f,b.props),N.ref=Au(y,f,b),N.return=y,N):(N=_p(b.type,b.key,b.props,null,y.mode,N),N.ref=Au(y,f,b),N.return=y,N)}function d(y,f,b,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==b.containerInfo||f.stateNode.implementation!==b.implementation?(f=Mb(b,y.mode,N),f.return=y,f):(f=n(f,b.children||[]),f.return=y,f)}function u(y,f,b,N,_){return f===null||f.tag!==7?(f=vl(b,y.mode,N,_),f.return=y,f):(f=n(f,b),f.return=y,f)}function m(y,f,b){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Db(""+f,y.mode,b),f.return=y,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case y0:return b=_p(f.type,f.key,f.props,null,y.mode,b),b.ref=Au(y,null,f),b.return=y,b;case Cc:return f=Mb(f,y.mode,b),f.return=y,f;case ai:var N=f._init;return m(y,N(f._payload),b)}if(Gu(f)||_u(f))return f=vl(f,y.mode,b,null),f.return=y,f;T0(y,f)}return null}function x(y,f,b,N){var _=f!==null?f.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(y,f,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case y0:return b.key===_?c(y,f,b,N):null;case Cc:return b.key===_?d(y,f,b,N):null;case ai:return _=b._init,x(y,f,_(b._payload),N)}if(Gu(b)||_u(b))return _!==null?null:u(y,f,b,N,null);T0(y,b)}return null}function h(y,f,b,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(b)||null,l(f,y,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case y0:return y=y.get(N.key===null?b:N.key)||null,c(f,y,N,_);case Cc:return y=y.get(N.key===null?b:N.key)||null,d(f,y,N,_);case ai:var w=N._init;return h(y,f,b,w(N._payload),_)}if(Gu(N)||_u(N))return y=y.get(b)||null,u(f,y,N,_,null);T0(f,N)}return null}function v(y,f,b,N){for(var _=null,w=null,S=f,C=f=0,E=null;S!==null&&C<b.length;C++){S.index>C?(E=S,S=null):E=S.sibling;var T=x(y,S,b[C],N);if(T===null){S===null&&(S=E);break}t&&S&&T.alternate===null&&r(y,S),f=o(T,f,C),w===null?_=T:w.sibling=T,w=T,S=E}if(C===b.length)return a(y,S),Pr&&tl(y,C),_;if(S===null){for(;C<b.length;C++)S=m(y,b[C],N),S!==null&&(f=o(S,f,C),w===null?_=S:w.sibling=S,w=S);return Pr&&tl(y,C),_}for(S=s(y,S);C<b.length;C++)E=h(S,y,C,b[C],N),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?C:E.key),f=o(E,f,C),w===null?_=E:w.sibling=E,w=E);return t&&S.forEach(function(q){return r(y,q)}),Pr&&tl(y,C),_}function p(y,f,b,N){var _=_u(b);if(typeof _!="function")throw Error(st(150));if(b=_.call(b),b==null)throw Error(st(151));for(var w=_=null,S=f,C=f=0,E=null,T=b.next();S!==null&&!T.done;C++,T=b.next()){S.index>C?(E=S,S=null):E=S.sibling;var q=x(y,S,T.value,N);if(q===null){S===null&&(S=E);break}t&&S&&q.alternate===null&&r(y,S),f=o(q,f,C),w===null?_=q:w.sibling=q,w=q,S=E}if(T.done)return a(y,S),Pr&&tl(y,C),_;if(S===null){for(;!T.done;C++,T=b.next())T=m(y,T.value,N),T!==null&&(f=o(T,f,C),w===null?_=T:w.sibling=T,w=T);return Pr&&tl(y,C),_}for(S=s(y,S);!T.done;C++,T=b.next())T=h(S,y,C,T.value,N),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?C:T.key),f=o(T,f,C),w===null?_=T:w.sibling=T,w=T);return t&&S.forEach(function(A){return r(y,A)}),Pr&&tl(y,C),_}function g(y,f,b,N){if(typeof b=="object"&&b!==null&&b.type===kc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case y0:e:{for(var _=b.key,w=f;w!==null;){if(w.key===_){if(_=b.type,_===kc){if(w.tag===7){a(y,w.sibling),f=n(w,b.props.children),f.return=y,y=f;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ai&&x_(_)===w.type){a(y,w.sibling),f=n(w,b.props),f.ref=Au(y,w,b),f.return=y,y=f;break e}a(y,w);break}else r(y,w);w=w.sibling}b.type===kc?(f=vl(b.props.children,y.mode,N,b.key),f.return=y,y=f):(N=_p(b.type,b.key,b.props,null,y.mode,N),N.ref=Au(y,f,b),N.return=y,y=N)}return i(y);case Cc:e:{for(w=b.key;f!==null;){if(f.key===w)if(f.tag===4&&f.stateNode.containerInfo===b.containerInfo&&f.stateNode.implementation===b.implementation){a(y,f.sibling),f=n(f,b.children||[]),f.return=y,y=f;break e}else{a(y,f);break}else r(y,f);f=f.sibling}f=Mb(b,y.mode,N),f.return=y,y=f}return i(y);case ai:return w=b._init,g(y,f,w(b._payload),N)}if(Gu(b))return v(y,f,b,N);if(_u(b))return p(y,f,b,N);T0(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,f!==null&&f.tag===6?(a(y,f.sibling),f=n(f,b),f.return=y,y=f):(a(y,f),f=Db(b,y.mode,N),f.return=y,y=f),i(y)):a(y,f)}return g}var ud=q5(!0),V5=q5(!1),Wp=Mi(null),Hp=null,Rc=null,W1=null;function H1(){W1=Rc=Hp=null}function K1(t){var r=Wp.current;Sr(Wp),t._currentValue=r}function iy(t,r,a){for(;t!==null;){var s=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),t===a)break;t=t.return}}function Xc(t,r){Hp=t,W1=Rc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(ds=!0),t.firstContext=null)}function sn(t){var r=t._currentValue;if(W1!==t)if(t={context:t,memoizedValue:r,next:null},Rc===null){if(Hp===null)throw Error(st(308));Rc=t,Hp.dependencies={lanes:0,firstContext:t}}else Rc=Rc.next=t;return r}var dl=null;function G1(t){dl===null?dl=[t]:dl.push(t)}function U5(t,r,a,s){var n=r.interleaved;return n===null?(a.next=a,G1(r)):(a.next=n.next,n.next=a),r.interleaved=a,Ao(t,s)}function Ao(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var si=!1;function X1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W5(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yo(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Ni(t,r,a){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Yt&2){var n=s.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),s.pending=r,Ao(t,a)}return n=s.interleaved,n===null?(r.next=r,G1(s)):(r.next=n.next,n.next=r),s.interleaved=r,Ao(t,a)}function bp(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var s=r.lanes;s&=t.pendingLanes,a|=s,r.lanes=a,$1(t,a)}}function p_(t,r){var a=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=r:o=o.next=r}else n=o=r;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function Kp(t,r,a,s){var n=t.updateQueue;si=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=n.baseState;i=0,u=d=c=null,l=o;do{var x=l.lane,h=l.eventTime;if((s&x)===x){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,p=l;switch(x=r,h=a,p.tag){case 1:if(v=p.payload,typeof v=="function"){m=v.call(h,m,x);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,x=typeof v=="function"?v.call(h,m,x):v,x==null)break e;m=Rr({},m,x);break e;case 2:si=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=n.effects,x===null?n.effects=[l]:x.push(l))}else h={eventTime:h,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=h,c=m):u=u.next=h,i|=x;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;x=l,l=x.next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}while(!0);if(u===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,r=n.shared.interleaved,r!==null){n=r;do i|=n.lane,n=n.next;while(n!==r)}else o===null&&(n.shared.lanes=0);Ol|=i,t.lanes=i,t.memoizedState=m}}function h_(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var s=t[r],n=s.callback;if(n!==null){if(s.callback=null,s=a,typeof n!="function")throw Error(st(191,n));n.call(s)}}}var Ux={},Gn=Mi(Ux),Rm=Mi(Ux),Dm=Mi(Ux);function ul(t){if(t===Ux)throw Error(st(174));return t}function Y1(t,r){switch(vr(Dm,r),vr(Rm,t),vr(Gn,Ux),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:zv(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=zv(r,t)}Sr(Gn),vr(Gn,r)}function md(){Sr(Gn),Sr(Rm),Sr(Dm)}function H5(t){ul(Dm.current);var r=ul(Gn.current),a=zv(r,t.type);r!==a&&(vr(Rm,t),vr(Gn,a))}function Q1(t){Rm.current===t&&(Sr(Gn),Sr(Rm))}var Or=Mi(0);function Gp(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Pb=[];function J1(){for(var t=0;t<Pb.length;t++)Pb[t]._workInProgressVersionPrimary=null;Pb.length=0}var vp=Bo.ReactCurrentDispatcher,Tb=Bo.ReactCurrentBatchConfig,Tl=0,$r=null,ua=null,ba=null,Xp=!1,sm=!1,Mm=0,ID=0;function Ia(){throw Error(st(321))}function Z1(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!An(t[a],r[a]))return!1;return!0}function e2(t,r,a,s,n,o){if(Tl=o,$r=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,vp.current=t===null||t.memoizedState===null?qD:VD,t=a(s,n),sm){o=0;do{if(sm=!1,Mm=0,25<=o)throw Error(st(301));o+=1,ba=ua=null,r.updateQueue=null,vp.current=UD,t=a(s,n)}while(sm)}if(vp.current=Yp,r=ua!==null&&ua.next!==null,Tl=0,ba=ua=$r=null,Xp=!1,r)throw Error(st(300));return t}function t2(){var t=Mm!==0;return Mm=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?$r.memoizedState=ba=t:ba=ba.next=t,ba}function nn(){if(ua===null){var t=$r.alternate;t=t!==null?t.memoizedState:null}else t=ua.next;var r=ba===null?$r.memoizedState:ba.next;if(r!==null)ba=r,ua=t;else{if(t===null)throw Error(st(310));ua=t,t={memoizedState:ua.memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},ba===null?$r.memoizedState=ba=t:ba=ba.next=t}return ba}function Im(t,r){return typeof r=="function"?r(t):r}function Ob(t){var r=nn(),a=r.queue;if(a===null)throw Error(st(311));a.lastRenderedReducer=t;var s=ua,n=s.baseQueue,o=a.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}s.baseQueue=n=o,a.pending=null}if(n!==null){o=n.next,s=s.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((Tl&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=s):c=c.next=m,$r.lanes|=u,Ol|=u}d=d.next}while(d!==null&&d!==o);c===null?i=s:c.next=l,An(s,r.memoizedState)||(ds=!0),r.memoizedState=s,r.baseState=i,r.baseQueue=c,a.lastRenderedState=s}if(t=a.interleaved,t!==null){n=t;do o=n.lane,$r.lanes|=o,Ol|=o,n=n.next;while(n!==t)}else n===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Fb(t){var r=nn(),a=r.queue;if(a===null)throw Error(st(311));a.lastRenderedReducer=t;var s=a.dispatch,n=a.pending,o=r.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=t(o,i.action),i=i.next;while(i!==n);An(o,r.memoizedState)||(ds=!0),r.memoizedState=o,r.baseQueue===null&&(r.baseState=o),a.lastRenderedState=o}return[o,s]}function K5(){}function G5(t,r){var a=$r,s=nn(),n=r(),o=!An(s.memoizedState,n);if(o&&(s.memoizedState=n,ds=!0),s=s.queue,r2(Q5.bind(null,a,s,t),[t]),s.getSnapshot!==r||o||ba!==null&&ba.memoizedState.tag&1){if(a.flags|=2048,Lm(9,Y5.bind(null,a,s,n,r),void 0,null),_a===null)throw Error(st(349));Tl&30||X5(a,r,n)}return n}function X5(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=$r.updateQueue,r===null?(r={lastEffect:null,stores:null},$r.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Y5(t,r,a,s){r.value=a,r.getSnapshot=s,J5(r)&&Z5(t)}function Q5(t,r,a){return a(function(){J5(r)&&Z5(t)})}function J5(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!An(t,a)}catch{return!0}}function Z5(t){var r=Ao(t,1);r!==null&&Sn(r,t,1,-1)}function f_(t){var r=Ln();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Im,lastRenderedState:t},r.queue=t,t=t.dispatch=zD.bind(null,$r,t),[r.memoizedState,t]}function Lm(t,r,a,s){return t={tag:t,create:r,destroy:a,deps:s,next:null},r=$r.updateQueue,r===null?(r={lastEffect:null,stores:null},$r.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(s=a.next,a.next=t,t.next=s,r.lastEffect=t)),t}function eE(){return nn().memoizedState}function yp(t,r,a,s){var n=Ln();$r.flags|=t,n.memoizedState=Lm(1|r,a,void 0,s===void 0?null:s)}function Hf(t,r,a,s){var n=nn();s=s===void 0?null:s;var o=void 0;if(ua!==null){var i=ua.memoizedState;if(o=i.destroy,s!==null&&Z1(s,i.deps)){n.memoizedState=Lm(r,a,o,s);return}}$r.flags|=t,n.memoizedState=Lm(1|r,a,o,s)}function g_(t,r){return yp(8390656,8,t,r)}function r2(t,r){return Hf(2048,8,t,r)}function tE(t,r){return Hf(4,2,t,r)}function rE(t,r){return Hf(4,4,t,r)}function aE(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function sE(t,r,a){return a=a!=null?a.concat([t]):null,Hf(4,4,aE.bind(null,r,t),a)}function a2(){}function nE(t,r){var a=nn();r=r===void 0?null:r;var s=a.memoizedState;return s!==null&&r!==null&&Z1(r,s[1])?s[0]:(a.memoizedState=[t,r],t)}function oE(t,r){var a=nn();r=r===void 0?null:r;var s=a.memoizedState;return s!==null&&r!==null&&Z1(r,s[1])?s[0]:(t=t(),a.memoizedState=[t,r],t)}function iE(t,r,a){return Tl&21?(An(a,r)||(a=m5(),$r.lanes|=a,Ol|=a,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,ds=!0),t.memoizedState=a)}function LD(t,r){var a=lr;lr=a!==0&&4>a?a:4,t(!0);var s=Tb.transition;Tb.transition={};try{t(!1),r()}finally{lr=a,Tb.transition=s}}function lE(){return nn().memoizedState}function BD(t,r,a){var s=_i(t);if(a={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null},cE(t))dE(r,a);else if(a=U5(t,r,a,s),a!==null){var n=ts();Sn(a,t,s,n),uE(a,r,s)}}function zD(t,r,a){var s=_i(t),n={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null};if(cE(t))dE(r,n);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var i=r.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,An(l,i)){var c=r.interleaved;c===null?(n.next=n,G1(r)):(n.next=c.next,c.next=n),r.interleaved=n;return}}catch{}finally{}a=U5(t,r,n,s),a!==null&&(n=ts(),Sn(a,t,s,n),uE(a,r,s))}}function cE(t){var r=t.alternate;return t===$r||r!==null&&r===$r}function dE(t,r){sm=Xp=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function uE(t,r,a){if(a&4194240){var s=r.lanes;s&=t.pendingLanes,a|=s,r.lanes=a,$1(t,a)}}var Yp={readContext:sn,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useInsertionEffect:Ia,useLayoutEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useMutableSource:Ia,useSyncExternalStore:Ia,useId:Ia,unstable_isNewReconciler:!1},qD={readContext:sn,useCallback:function(t,r){return Ln().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:g_,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,yp(4194308,4,aE.bind(null,r,t),a)},useLayoutEffect:function(t,r){return yp(4194308,4,t,r)},useInsertionEffect:function(t,r){return yp(4,2,t,r)},useMemo:function(t,r){var a=Ln();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var s=Ln();return r=a!==void 0?a(r):r,s.memoizedState=s.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=BD.bind(null,$r,t),[s.memoizedState,t]},useRef:function(t){var r=Ln();return t={current:t},r.memoizedState=t},useState:f_,useDebugValue:a2,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=f_(!1),r=t[0];return t=LD.bind(null,t[1]),Ln().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var s=$r,n=Ln();if(Pr){if(a===void 0)throw Error(st(407));a=a()}else{if(a=r(),_a===null)throw Error(st(349));Tl&30||X5(s,r,a)}n.memoizedState=a;var o={value:a,getSnapshot:r};return n.queue=o,g_(Q5.bind(null,s,o,t),[t]),s.flags|=2048,Lm(9,Y5.bind(null,s,o,a,r),void 0,null),a},useId:function(){var t=Ln(),r=_a.identifierPrefix;if(Pr){var a=fo,s=ho;a=(s&~(1<<32-_n(s)-1)).toString(32)+a,r=":"+r+"R"+a,a=Mm++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=ID++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},VD={readContext:sn,useCallback:nE,useContext:sn,useEffect:r2,useImperativeHandle:sE,useInsertionEffect:tE,useLayoutEffect:rE,useMemo:oE,useReducer:Ob,useRef:eE,useState:function(){return Ob(Im)},useDebugValue:a2,useDeferredValue:function(t){var r=nn();return iE(r,ua.memoizedState,t)},useTransition:function(){var t=Ob(Im)[0],r=nn().memoizedState;return[t,r]},useMutableSource:K5,useSyncExternalStore:G5,useId:lE,unstable_isNewReconciler:!1},UD={readContext:sn,useCallback:nE,useContext:sn,useEffect:r2,useImperativeHandle:sE,useInsertionEffect:tE,useLayoutEffect:rE,useMemo:oE,useReducer:Fb,useRef:eE,useState:function(){return Fb(Im)},useDebugValue:a2,useDeferredValue:function(t){var r=nn();return ua===null?r.memoizedState=t:iE(r,ua.memoizedState,t)},useTransition:function(){var t=Fb(Im)[0],r=nn().memoizedState;return[t,r]},useMutableSource:K5,useSyncExternalStore:G5,useId:lE,unstable_isNewReconciler:!1};function hn(t,r){if(t&&t.defaultProps){r=Rr({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}function ly(t,r,a,s){r=t.memoizedState,a=a(s,r),a=a==null?r:Rr({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={isMounted:function(t){return(t=t._reactInternals)?Jl(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var s=ts(),n=_i(t),o=yo(s,n);o.payload=r,a!=null&&(o.callback=a),r=Ni(t,o,n),r!==null&&(Sn(r,t,n,s),bp(r,t,n))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var s=ts(),n=_i(t),o=yo(s,n);o.tag=1,o.payload=r,a!=null&&(o.callback=a),r=Ni(t,o,n),r!==null&&(Sn(r,t,n,s),bp(r,t,n))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=ts(),s=_i(t),n=yo(a,s);n.tag=2,r!=null&&(n.callback=r),r=Ni(t,n,s),r!==null&&(Sn(r,t,s,a),bp(r,t,s))}};function b_(t,r,a,s,n,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,i):r.prototype&&r.prototype.isPureReactComponent?!Tm(a,s)||!Tm(n,o):!0}function mE(t,r,a){var s=!1,n=Ai,o=r.contextType;return typeof o=="object"&&o!==null?o=sn(o):(n=xs(r)?Al:Ka.current,s=r.contextTypes,o=(s=s!=null)?cd(t,n):Ai),r=new r(a,o),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kf,t.stateNode=r,r._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),r}function v_(t,r,a,s){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,s),r.state!==t&&Kf.enqueueReplaceState(r,r.state,null)}function cy(t,r,a,s){var n=t.stateNode;n.props=a,n.state=t.memoizedState,n.refs={},X1(t);var o=r.contextType;typeof o=="object"&&o!==null?n.context=sn(o):(o=xs(r)?Al:Ka.current,n.context=cd(t,o)),n.state=t.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(ly(t,r,o,a),n.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Kf.enqueueReplaceState(n,n.state,null),Kp(t,a,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function xd(t,r){try{var a="",s=r;do a+=b7(s),s=s.return;while(s);var n=a}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:r,stack:n,digest:null}}function $b(t,r,a){return{value:t,source:null,stack:a??null,digest:r??null}}function dy(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var WD=typeof WeakMap=="function"?WeakMap:Map;function xE(t,r,a){a=yo(-1,a),a.tag=3,a.payload={element:null};var s=r.value;return a.callback=function(){Jp||(Jp=!0,yy=s),dy(t,r)},a}function pE(t,r,a){a=yo(-1,a),a.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=r.value;a.payload=function(){return s(n)},a.callback=function(){dy(t,r)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(a.callback=function(){dy(t,r),typeof s!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var i=r.stack;this.componentDidCatch(r.value,{componentStack:i!==null?i:""})}),a}function y_(t,r,a){var s=t.pingCache;if(s===null){s=t.pingCache=new WD;var n=new Set;s.set(r,n)}else n=s.get(r),n===void 0&&(n=new Set,s.set(r,n));n.has(a)||(n.add(a),t=n8.bind(null,t,r,a),r.then(t,t))}function j_(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function N_(t,r,a,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=yo(-1,1),r.tag=2,Ni(a,r,1))),a.lanes|=1),t)}var HD=Bo.ReactCurrentOwner,ds=!1;function Xa(t,r,a,s){r.child=t===null?V5(r,null,a,s):ud(r,t.child,a,s)}function w_(t,r,a,s,n){a=a.render;var o=r.ref;return Xc(r,n),s=e2(t,r,a,s,o,n),a=t2(),t!==null&&!ds?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,Po(t,r,n)):(Pr&&a&&q1(r),r.flags|=1,Xa(t,r,s,n),r.child)}function __(t,r,a,s,n){if(t===null){var o=a.type;return typeof o=="function"&&!u2(o)&&o.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=o,hE(t,r,o,s,n)):(t=_p(a.type,null,s,r,r.mode,n),t.ref=r.ref,t.return=r,r.child=t)}if(o=t.child,!(t.lanes&n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:Tm,a(i,s)&&t.ref===r.ref)return Po(t,r,n)}return r.flags|=1,t=Si(o,s),t.ref=r.ref,t.return=r,r.child=t}function hE(t,r,a,s,n){if(t!==null){var o=t.memoizedProps;if(Tm(o,s)&&t.ref===r.ref)if(ds=!1,r.pendingProps=s=o,(t.lanes&n)!==0)t.flags&131072&&(ds=!0);else return r.lanes=t.lanes,Po(t,r,n)}return uy(t,r,a,s,n)}function fE(t,r,a){var s=r.pendingProps,n=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Mc,As),As|=a;else{if(!(a&1073741824))return t=o!==null?o.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,vr(Mc,As),As|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:a,vr(Mc,As),As|=s}else o!==null?(s=o.baseLanes|a,r.memoizedState=null):s=a,vr(Mc,As),As|=s;return Xa(t,r,n,a),r.child}function gE(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function uy(t,r,a,s,n){var o=xs(a)?Al:Ka.current;return o=cd(r,o),Xc(r,n),a=e2(t,r,a,s,o,n),s=t2(),t!==null&&!ds?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,Po(t,r,n)):(Pr&&s&&q1(r),r.flags|=1,Xa(t,r,a,n),r.child)}function S_(t,r,a,s,n){if(xs(a)){var o=!0;qp(r)}else o=!1;if(Xc(r,n),r.stateNode===null)jp(t,r),mE(r,a,s),cy(r,a,s,n),s=!0;else if(t===null){var i=r.stateNode,l=r.memoizedProps;i.props=l;var c=i.context,d=a.contextType;typeof d=="object"&&d!==null?d=sn(d):(d=xs(a)?Al:Ka.current,d=cd(r,d));var u=a.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==d)&&v_(r,i,s,d),si=!1;var x=r.memoizedState;i.state=x,Kp(r,s,i,n),c=r.memoizedState,l!==s||x!==c||ms.current||si?(typeof u=="function"&&(ly(r,a,u,s),c=r.memoizedState),(l=si||b_(r,a,l,s,x,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(r.flags|=4194308)):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=c),i.props=s,i.state=c,i.context=d,s=l):(typeof i.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{i=r.stateNode,W5(t,r),l=r.memoizedProps,d=r.type===r.elementType?l:hn(r.type,l),i.props=d,m=r.pendingProps,x=i.context,c=a.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=xs(a)?Al:Ka.current,c=cd(r,c));var h=a.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||x!==c)&&v_(r,i,s,c),si=!1,x=r.memoizedState,i.state=x,Kp(r,s,i,n);var v=r.memoizedState;l!==m||x!==v||ms.current||si?(typeof h=="function"&&(ly(r,a,h,s),v=r.memoizedState),(d=si||b_(r,a,d,s,x,v,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,v,c)),typeof i.componentDidUpdate=="function"&&(r.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=v),i.props=s,i.state=v,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(r.flags|=1024),s=!1)}return my(t,r,a,s,o,n)}function my(t,r,a,s,n,o){gE(t,r);var i=(r.flags&128)!==0;if(!s&&!i)return n&&d_(r,a,!1),Po(t,r,o);s=r.stateNode,HD.current=r;var l=i&&typeof a.getDerivedStateFromError!="function"?null:s.render();return r.flags|=1,t!==null&&i?(r.child=ud(r,t.child,null,o),r.child=ud(r,null,l,o)):Xa(t,r,l,o),r.memoizedState=s.state,n&&d_(r,a,!0),r.child}function bE(t){var r=t.stateNode;r.pendingContext?c_(t,r.pendingContext,r.pendingContext!==r.context):r.context&&c_(t,r.context,!1),Y1(t,r.containerInfo)}function C_(t,r,a,s,n){return dd(),U1(n),r.flags|=256,Xa(t,r,a,s),r.child}var xy={dehydrated:null,treeContext:null,retryLane:0};function py(t){return{baseLanes:t,cachePool:null,transitions:null}}function vE(t,r,a){var s=r.pendingProps,n=Or.current,o=!1,i=(r.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(n&2)!==0),l?(o=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),vr(Or,n&1),t===null)return oy(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(i=s.children,t=s.fallback,o?(s=r.mode,o=r.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Yf(i,s,0,null),t=vl(t,s,a,null),o.return=r,t.return=r,o.sibling=t,r.child=o,r.child.memoizedState=py(a),r.memoizedState=xy,t):s2(r,i));if(n=t.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return KD(t,r,i,s,l,n,a);if(o){o=s.fallback,i=r.mode,n=t.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&r.child!==n?(s=r.child,s.childLanes=0,s.pendingProps=c,r.deletions=null):(s=Si(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?o=Si(l,o):(o=vl(o,i,a,null),o.flags|=2),o.return=r,s.return=r,s.sibling=o,r.child=s,s=o,o=r.child,i=t.child.memoizedState,i=i===null?py(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~a,r.memoizedState=xy,s}return o=t.child,t=o.sibling,s=Si(o,{mode:"visible",children:s.children}),!(r.mode&1)&&(s.lanes=a),s.return=r,s.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=s,r.memoizedState=null,s}function s2(t,r){return r=Yf({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function O0(t,r,a,s){return s!==null&&U1(s),ud(r,t.child,null,a),t=s2(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function KD(t,r,a,s,n,o,i){if(a)return r.flags&256?(r.flags&=-257,s=$b(Error(st(422))),O0(t,r,i,s)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(o=s.fallback,n=r.mode,s=Yf({mode:"visible",children:s.children},n,0,null),o=vl(o,n,i,null),o.flags|=2,s.return=r,o.return=r,s.sibling=o,r.child=s,r.mode&1&&ud(r,t.child,null,i),r.child.memoizedState=py(i),r.memoizedState=xy,o);if(!(r.mode&1))return O0(t,r,i,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(st(419)),s=$b(o,s,void 0),O0(t,r,i,s)}if(l=(i&t.childLanes)!==0,ds||l){if(s=_a,s!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,Ao(t,n),Sn(s,t,n,-1))}return d2(),s=$b(Error(st(421))),O0(t,r,i,s)}return n.data==="$?"?(r.flags|=128,r.child=t.child,r=o8.bind(null,t),n._reactRetry=r,null):(t=o.treeContext,Rs=ji(n.nextSibling),Ds=r,Pr=!0,vn=null,t!==null&&(Js[Zs++]=ho,Js[Zs++]=fo,Js[Zs++]=Pl,ho=t.id,fo=t.overflow,Pl=r),r=s2(r,s.children),r.flags|=4096,r)}function k_(t,r,a){t.lanes|=r;var s=t.alternate;s!==null&&(s.lanes|=r),iy(t.return,r,a)}function Rb(t,r,a,s,n){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function yE(t,r,a){var s=r.pendingProps,n=s.revealOrder,o=s.tail;if(Xa(t,r,s.children,a),s=Or.current,s&2)s=s&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k_(t,a,r);else if(t.tag===19)k_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(vr(Or,s),!(r.mode&1))r.memoizedState=null;else switch(n){case"forwards":for(a=r.child,n=null;a!==null;)t=a.alternate,t!==null&&Gp(t)===null&&(n=a),a=a.sibling;a=n,a===null?(n=r.child,r.child=null):(n=a.sibling,a.sibling=null),Rb(r,!1,n,a,o);break;case"backwards":for(a=null,n=r.child,r.child=null;n!==null;){if(t=n.alternate,t!==null&&Gp(t)===null){r.child=n;break}t=n.sibling,n.sibling=a,a=n,n=t}Rb(r,!0,a,null,o);break;case"together":Rb(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function jp(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Po(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Ol|=r.lanes,!(a&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(st(153));if(r.child!==null){for(t=r.child,a=Si(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Si(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function GD(t,r,a){switch(r.tag){case 3:bE(r),dd();break;case 5:H5(r);break;case 1:xs(r.type)&&qp(r);break;case 4:Y1(r,r.stateNode.containerInfo);break;case 10:var s=r.type._context,n=r.memoizedProps.value;vr(Wp,s._currentValue),s._currentValue=n;break;case 13:if(s=r.memoizedState,s!==null)return s.dehydrated!==null?(vr(Or,Or.current&1),r.flags|=128,null):a&r.child.childLanes?vE(t,r,a):(vr(Or,Or.current&1),t=Po(t,r,a),t!==null?t.sibling:null);vr(Or,Or.current&1);break;case 19:if(s=(a&r.childLanes)!==0,t.flags&128){if(s)return yE(t,r,a);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),vr(Or,Or.current),s)break;return null;case 22:case 23:return r.lanes=0,fE(t,r,a)}return Po(t,r,a)}var jE,hy,NE,wE;jE=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};hy=function(){};NE=function(t,r,a,s){var n=t.memoizedProps;if(n!==s){t=r.stateNode,ul(Gn.current);var o=null;switch(a){case"input":n=Mv(t,n),s=Mv(t,s),o=[];break;case"select":n=Rr({},n,{value:void 0}),s=Rr({},s,{value:void 0}),o=[];break;case"textarea":n=Bv(t,n),s=Bv(t,s),o=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Bp)}qv(a,s);var i;a=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(i in l)l.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_m.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var c=s[d];if(l=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(a||(a={}),a[i]=c[i])}else a||(o||(o=[]),o.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_m.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Nr("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}a&&(o=o||[]).push("style",a);var d=o;(r.updateQueue=d)&&(r.flags|=4)}};wE=function(t,r,a,s){a!==s&&(r.flags|=4)};function Pu(t,r){if(!Pr)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function La(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,s=0;if(r)for(var n=t.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=a,r}function XD(t,r,a){var s=r.pendingProps;switch(V1(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return La(r),null;case 1:return xs(r.type)&&zp(),La(r),null;case 3:return s=r.stateNode,md(),Sr(ms),Sr(Ka),J1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(P0(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,vn!==null&&(wy(vn),vn=null))),hy(t,r),La(r),null;case 5:Q1(r);var n=ul(Dm.current);if(a=r.type,t!==null&&r.stateNode!=null)NE(t,r,a,s,n),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!s){if(r.stateNode===null)throw Error(st(166));return La(r),null}if(t=ul(Gn.current),P0(r)){s=r.stateNode,a=r.type;var o=r.memoizedProps;switch(s[zn]=r,s[$m]=o,t=(r.mode&1)!==0,a){case"dialog":Nr("cancel",s),Nr("close",s);break;case"iframe":case"object":case"embed":Nr("load",s);break;case"video":case"audio":for(n=0;n<Yu.length;n++)Nr(Yu[n],s);break;case"source":Nr("error",s);break;case"img":case"image":case"link":Nr("error",s),Nr("load",s);break;case"details":Nr("toggle",s);break;case"input":Dw(s,o),Nr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Nr("invalid",s);break;case"textarea":Iw(s,o),Nr("invalid",s)}qv(a,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&A0(s.textContent,l,t),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&A0(s.textContent,l,t),n=["children",""+l]):_m.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Nr("scroll",s)}switch(a){case"input":j0(s),Mw(s,o,!0);break;case"textarea":j0(s),Lw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Bp)}s=n,r.updateQueue=s,s!==null&&(r.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Q6(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=i.createElement(a,{is:s.is}):(t=i.createElement(a),a==="select"&&(i=t,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):t=i.createElementNS(t,a),t[zn]=r,t[$m]=s,jE(t,r,!1,!1),r.stateNode=t;e:{switch(i=Vv(a,s),a){case"dialog":Nr("cancel",t),Nr("close",t),n=s;break;case"iframe":case"object":case"embed":Nr("load",t),n=s;break;case"video":case"audio":for(n=0;n<Yu.length;n++)Nr(Yu[n],t);n=s;break;case"source":Nr("error",t),n=s;break;case"img":case"image":case"link":Nr("error",t),Nr("load",t),n=s;break;case"details":Nr("toggle",t),n=s;break;case"input":Dw(t,s),n=Mv(t,s),Nr("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=Rr({},s,{value:void 0}),Nr("invalid",t);break;case"textarea":Iw(t,s),n=Bv(t,s),Nr("invalid",t);break;default:n=s}qv(a,n),l=n;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?e5(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&J6(t,c)):o==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Sm(t,c):typeof c=="number"&&Sm(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_m.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Nr("scroll",t):c!=null&&E1(t,o,c,i))}switch(a){case"input":j0(t),Mw(t,s,!1);break;case"textarea":j0(t),Lw(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Ei(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?Wc(t,!!s.multiple,o,!1):s.defaultValue!=null&&Wc(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Bp)}switch(a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return La(r),null;case 6:if(t&&r.stateNode!=null)wE(t,r,t.memoizedProps,s);else{if(typeof s!="string"&&r.stateNode===null)throw Error(st(166));if(a=ul(Dm.current),ul(Gn.current),P0(r)){if(s=r.stateNode,a=r.memoizedProps,s[zn]=r,(o=s.nodeValue!==a)&&(t=Ds,t!==null))switch(t.tag){case 3:A0(s.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&A0(s.nodeValue,a,(t.mode&1)!==0)}o&&(r.flags|=4)}else s=(a.nodeType===9?a:a.ownerDocument).createTextNode(s),s[zn]=r,r.stateNode=s}return La(r),null;case 13:if(Sr(Or),s=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pr&&Rs!==null&&r.mode&1&&!(r.flags&128))z5(),dd(),r.flags|=98560,o=!1;else if(o=P0(r),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(st(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(st(317));o[zn]=r}else dd(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;La(r),o=!1}else vn!==null&&(wy(vn),vn=null),o=!0;if(!o)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(r.child.flags|=8192,r.mode&1&&(t===null||Or.current&1?xa===0&&(xa=3):d2())),r.updateQueue!==null&&(r.flags|=4),La(r),null);case 4:return md(),hy(t,r),t===null&&Om(r.stateNode.containerInfo),La(r),null;case 10:return K1(r.type._context),La(r),null;case 17:return xs(r.type)&&zp(),La(r),null;case 19:if(Sr(Or),o=r.memoizedState,o===null)return La(r),null;if(s=(r.flags&128)!==0,i=o.rendering,i===null)if(s)Pu(o,!1);else{if(xa!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(i=Gp(t),i!==null){for(r.flags|=128,Pu(o,!1),s=i.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),r.subtreeFlags=0,s=a,a=r.child;a!==null;)o=a,t=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return vr(Or,Or.current&1|2),r.child}t=t.sibling}o.tail!==null&&Wr()>pd&&(r.flags|=128,s=!0,Pu(o,!1),r.lanes=4194304)}else{if(!s)if(t=Gp(i),t!==null){if(r.flags|=128,s=!0,a=t.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Pu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Pr)return La(r),null}else 2*Wr()-o.renderingStartTime>pd&&a!==1073741824&&(r.flags|=128,s=!0,Pu(o,!1),r.lanes=4194304);o.isBackwards?(i.sibling=r.child,r.child=i):(a=o.last,a!==null?a.sibling=i:r.child=i,o.last=i)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.renderingStartTime=Wr(),r.sibling=null,a=Or.current,vr(Or,s?a&1|2:a&1),r):(La(r),null);case 22:case 23:return c2(),s=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(r.flags|=8192),s&&r.mode&1?As&1073741824&&(La(r),r.subtreeFlags&6&&(r.flags|=8192)):La(r),null;case 24:return null;case 25:return null}throw Error(st(156,r.tag))}function YD(t,r){switch(V1(r),r.tag){case 1:return xs(r.type)&&zp(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return md(),Sr(ms),Sr(Ka),J1(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Q1(r),null;case 13:if(Sr(Or),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(st(340));dd()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Sr(Or),null;case 4:return md(),null;case 10:return K1(r.type._context),null;case 22:case 23:return c2(),null;case 24:return null;default:return null}}var F0=!1,qa=!1,QD=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Dc(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(s){Ir(t,r,s)}else a.current=null}function fy(t,r,a){try{a()}catch(s){Ir(t,r,s)}}var E_=!1;function JD(t,r){if(Zv=Mp,t=E5(),z1(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=t,x=null;t:for(;;){for(var h;m!==a||n!==0&&m.nodeType!==3||(l=i+n),m!==o||s!==0&&m.nodeType!==3||(c=i+s),m.nodeType===3&&(i+=m.nodeValue.length),(h=m.firstChild)!==null;)x=m,m=h;for(;;){if(m===t)break t;if(x===a&&++d===n&&(l=i),x===o&&++u===s&&(c=i),(h=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=h}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(ey={focusedElem:t,selectionRange:a},Mp=!1,vt=r;vt!==null;)if(r=vt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,vt=t;else for(;vt!==null;){r=vt;try{var v=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,y=r.stateNode,f=y.getSnapshotBeforeUpdate(r.elementType===r.type?p:hn(r.type,p),g);y.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(N){Ir(r,r.return,N)}if(t=r.sibling,t!==null){t.return=r.return,vt=t;break}vt=r.return}return v=E_,E_=!1,v}function nm(t,r,a){var s=r.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var o=n.destroy;n.destroy=void 0,o!==void 0&&fy(r,a,o)}n=n.next}while(n!==s)}}function Gf(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var s=a.create;a.destroy=s()}a=a.next}while(a!==r)}}function gy(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof r=="function"?r(t):r.current=t}}function _E(t){var r=t.alternate;r!==null&&(t.alternate=null,_E(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[zn],delete r[$m],delete r[ay],delete r[$D],delete r[RD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SE(t){return t.tag===5||t.tag===3||t.tag===4}function A_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function by(t,r,a){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bp));else if(s!==4&&(t=t.child,t!==null))for(by(t,r,a),t=t.sibling;t!==null;)by(t,r,a),t=t.sibling}function vy(t,r,a){var s=t.tag;if(s===5||s===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(vy(t,r,a),t=t.sibling;t!==null;)vy(t,r,a),t=t.sibling}var Aa=null,fn=!1;function Yo(t,r,a){for(a=a.child;a!==null;)CE(t,r,a),a=a.sibling}function CE(t,r,a){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Bf,a)}catch{}switch(a.tag){case 5:qa||Dc(a,r);case 6:var s=Aa,n=fn;Aa=null,Yo(t,r,a),Aa=s,fn=n,Aa!==null&&(fn?(t=Aa,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Aa.removeChild(a.stateNode));break;case 18:Aa!==null&&(fn?(t=Aa,a=a.stateNode,t.nodeType===8?Eb(t.parentNode,a):t.nodeType===1&&Eb(t,a),Am(t)):Eb(Aa,a.stateNode));break;case 4:s=Aa,n=fn,Aa=a.stateNode.containerInfo,fn=!0,Yo(t,r,a),Aa=s,fn=n;break;case 0:case 11:case 14:case 15:if(!qa&&(s=a.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&fy(a,r,i),n=n.next}while(n!==s)}Yo(t,r,a);break;case 1:if(!qa&&(Dc(a,r),s=a.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=a.memoizedProps,s.state=a.memoizedState,s.componentWillUnmount()}catch(l){Ir(a,r,l)}Yo(t,r,a);break;case 21:Yo(t,r,a);break;case 22:a.mode&1?(qa=(s=qa)||a.memoizedState!==null,Yo(t,r,a),qa=s):Yo(t,r,a);break;default:Yo(t,r,a)}}function P_(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new QD),r.forEach(function(s){var n=i8.bind(null,t,s);a.has(s)||(a.add(s),s.then(n,n))})}}function un(t,r){var a=r.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];try{var o=t,i=r,l=i;e:for(;l!==null;){switch(l.tag){case 5:Aa=l.stateNode,fn=!1;break e;case 3:Aa=l.stateNode.containerInfo,fn=!0;break e;case 4:Aa=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Aa===null)throw Error(st(160));CE(o,i,n),Aa=null,fn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Ir(n,r,d)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)kE(r,t),r=r.sibling}function kE(t,r){var a=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(r,t),Dn(t),s&4){try{nm(3,t,t.return),Gf(3,t)}catch(p){Ir(t,t.return,p)}try{nm(5,t,t.return)}catch(p){Ir(t,t.return,p)}}break;case 1:un(r,t),Dn(t),s&512&&a!==null&&Dc(a,a.return);break;case 5:if(un(r,t),Dn(t),s&512&&a!==null&&Dc(a,a.return),t.flags&32){var n=t.stateNode;try{Sm(n,"")}catch(p){Ir(t,t.return,p)}}if(s&4&&(n=t.stateNode,n!=null)){var o=t.memoizedProps,i=a!==null?a.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&X6(n,o),Vv(l,i);var d=Vv(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?e5(n,m):u==="dangerouslySetInnerHTML"?J6(n,m):u==="children"?Sm(n,m):E1(n,u,m,d)}switch(l){case"input":Iv(n,o);break;case"textarea":Y6(n,o);break;case"select":var x=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Wc(n,!!o.multiple,h,!1):x!==!!o.multiple&&(o.defaultValue!=null?Wc(n,!!o.multiple,o.defaultValue,!0):Wc(n,!!o.multiple,o.multiple?[]:"",!1))}n[$m]=o}catch(p){Ir(t,t.return,p)}}break;case 6:if(un(r,t),Dn(t),s&4){if(t.stateNode===null)throw Error(st(162));n=t.stateNode,o=t.memoizedProps;try{n.nodeValue=o}catch(p){Ir(t,t.return,p)}}break;case 3:if(un(r,t),Dn(t),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Am(r.containerInfo)}catch(p){Ir(t,t.return,p)}break;case 4:un(r,t),Dn(t);break;case 13:un(r,t),Dn(t),n=t.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(i2=Wr())),s&4&&P_(t);break;case 22:if(u=a!==null&&a.memoizedState!==null,t.mode&1?(qa=(d=qa)||u,un(r,t),qa=d):un(r,t),Dn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(vt=t,u=t.child;u!==null;){for(m=vt=u;vt!==null;){switch(x=vt,h=x.child,x.tag){case 0:case 11:case 14:case 15:nm(4,x,x.return);break;case 1:Dc(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){s=x,a=x.return;try{r=s,v.props=r.memoizedProps,v.state=r.memoizedState,v.componentWillUnmount()}catch(p){Ir(s,a,p)}}break;case 5:Dc(x,x.return);break;case 22:if(x.memoizedState!==null){O_(m);continue}}h!==null?(h.return=x,vt=h):O_(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{n=m.stateNode,d?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Z6("display",i))}catch(p){Ir(t,t.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){Ir(t,t.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:un(r,t),Dn(t),s&4&&P_(t);break;case 21:break;default:un(r,t),Dn(t)}}function Dn(t){var r=t.flags;if(r&2){try{e:{for(var a=t.return;a!==null;){if(SE(a)){var s=a;break e}a=a.return}throw Error(st(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Sm(n,""),s.flags&=-33);var o=A_(t);vy(t,o,n);break;case 3:case 4:var i=s.stateNode.containerInfo,l=A_(t);by(t,l,i);break;default:throw Error(st(161))}}catch(c){Ir(t,t.return,c)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ZD(t,r,a){vt=t,EE(t)}function EE(t,r,a){for(var s=(t.mode&1)!==0;vt!==null;){var n=vt,o=n.child;if(n.tag===22&&s){var i=n.memoizedState!==null||F0;if(!i){var l=n.alternate,c=l!==null&&l.memoizedState!==null||qa;l=F0;var d=qa;if(F0=i,(qa=c)&&!d)for(vt=n;vt!==null;)i=vt,c=i.child,i.tag===22&&i.memoizedState!==null?F_(n):c!==null?(c.return=i,vt=c):F_(n);for(;o!==null;)vt=o,EE(o),o=o.sibling;vt=n,F0=l,qa=d}T_(t)}else n.subtreeFlags&8772&&o!==null?(o.return=n,vt=o):T_(t)}}function T_(t){for(;vt!==null;){var r=vt;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:qa||Gf(5,r);break;case 1:var s=r.stateNode;if(r.flags&4&&!qa)if(a===null)s.componentDidMount();else{var n=r.elementType===r.type?a.memoizedProps:hn(r.type,a.memoizedProps);s.componentDidUpdate(n,a.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=r.updateQueue;o!==null&&h_(r,o,s);break;case 3:var i=r.updateQueue;if(i!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}h_(r,i,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var c=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var d=r.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Am(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}qa||r.flags&512&&gy(r)}catch(x){Ir(r,r.return,x)}}if(r===t){vt=null;break}if(a=r.sibling,a!==null){a.return=r.return,vt=a;break}vt=r.return}}function O_(t){for(;vt!==null;){var r=vt;if(r===t){vt=null;break}var a=r.sibling;if(a!==null){a.return=r.return,vt=a;break}vt=r.return}}function F_(t){for(;vt!==null;){var r=vt;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Gf(4,r)}catch(c){Ir(r,a,c)}break;case 1:var s=r.stateNode;if(typeof s.componentDidMount=="function"){var n=r.return;try{s.componentDidMount()}catch(c){Ir(r,n,c)}}var o=r.return;try{gy(r)}catch(c){Ir(r,o,c)}break;case 5:var i=r.return;try{gy(r)}catch(c){Ir(r,i,c)}}}catch(c){Ir(r,r.return,c)}if(r===t){vt=null;break}var l=r.sibling;if(l!==null){l.return=r.return,vt=l;break}vt=r.return}}var e8=Math.ceil,Qp=Bo.ReactCurrentDispatcher,n2=Bo.ReactCurrentOwner,an=Bo.ReactCurrentBatchConfig,Yt=0,_a=null,Jr=null,Fa=0,As=0,Mc=Mi(0),xa=0,Bm=null,Ol=0,Xf=0,o2=0,om=null,cs=null,i2=0,pd=1/0,uo=null,Jp=!1,yy=null,wi=null,$0=!1,ui=null,Zp=0,im=0,jy=null,Np=-1,wp=0;function ts(){return Yt&6?Wr():Np!==-1?Np:Np=Wr()}function _i(t){return t.mode&1?Yt&2&&Fa!==0?Fa&-Fa:MD.transition!==null?(wp===0&&(wp=m5()),wp):(t=lr,t!==0||(t=window.event,t=t===void 0?16:v5(t.type)),t):1}function Sn(t,r,a,s){if(50<im)throw im=0,jy=null,Error(st(185));zx(t,a,s),(!(Yt&2)||t!==_a)&&(t===_a&&(!(Yt&2)&&(Xf|=a),xa===4&&ii(t,Fa)),ps(t,s),a===1&&Yt===0&&!(r.mode&1)&&(pd=Wr()+500,Wf&&Ii()))}function ps(t,r){var a=t.callbackNode;M7(t,r);var s=Dp(t,t===_a?Fa:0);if(s===0)a!==null&&qw(a),t.callbackNode=null,t.callbackPriority=0;else if(r=s&-s,t.callbackPriority!==r){if(a!=null&&qw(a),r===1)t.tag===0?DD($_.bind(null,t)):I5($_.bind(null,t)),OD(function(){!(Yt&6)&&Ii()}),a=null;else{switch(x5(s)){case 1:a=F1;break;case 4:a=d5;break;case 16:a=Rp;break;case 536870912:a=u5;break;default:a=Rp}a=DE(a,AE.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function AE(t,r){if(Np=-1,wp=0,Yt&6)throw Error(st(327));var a=t.callbackNode;if(Yc()&&t.callbackNode!==a)return null;var s=Dp(t,t===_a?Fa:0);if(s===0)return null;if(s&30||s&t.expiredLanes||r)r=eh(t,s);else{r=s;var n=Yt;Yt|=2;var o=TE();(_a!==t||Fa!==r)&&(uo=null,pd=Wr()+500,bl(t,r));do try{a8();break}catch(l){PE(t,l)}while(!0);H1(),Qp.current=o,Yt=n,Jr!==null?r=0:(_a=null,Fa=0,r=xa)}if(r!==0){if(r===2&&(n=Gv(t),n!==0&&(s=n,r=Ny(t,n))),r===1)throw a=Bm,bl(t,0),ii(t,s),ps(t,Wr()),a;if(r===6)ii(t,s);else{if(n=t.current.alternate,!(s&30)&&!t8(n)&&(r=eh(t,s),r===2&&(o=Gv(t),o!==0&&(s=o,r=Ny(t,o))),r===1))throw a=Bm,bl(t,0),ii(t,s),ps(t,Wr()),a;switch(t.finishedWork=n,t.finishedLanes=s,r){case 0:case 1:throw Error(st(345));case 2:rl(t,cs,uo);break;case 3:if(ii(t,s),(s&130023424)===s&&(r=i2+500-Wr(),10<r)){if(Dp(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){ts(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ry(rl.bind(null,t,cs,uo),r);break}rl(t,cs,uo);break;case 4:if(ii(t,s),(s&4194240)===s)break;for(r=t.eventTimes,n=-1;0<s;){var i=31-_n(s);o=1<<i,i=r[i],i>n&&(n=i),s&=~o}if(s=n,s=Wr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*e8(s/1960))-s,10<s){t.timeoutHandle=ry(rl.bind(null,t,cs,uo),s);break}rl(t,cs,uo);break;case 5:rl(t,cs,uo);break;default:throw Error(st(329))}}}return ps(t,Wr()),t.callbackNode===a?AE.bind(null,t):null}function Ny(t,r){var a=om;return t.current.memoizedState.isDehydrated&&(bl(t,r).flags|=256),t=eh(t,r),t!==2&&(r=cs,cs=a,r!==null&&wy(r)),t}function wy(t){cs===null?cs=t:cs.push.apply(cs,t)}function t8(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!An(o(),n))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ii(t,r){for(r&=~o2,r&=~Xf,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-_n(r),s=1<<a;t[a]=-1,r&=~s}}function $_(t){if(Yt&6)throw Error(st(327));Yc();var r=Dp(t,0);if(!(r&1))return ps(t,Wr()),null;var a=eh(t,r);if(t.tag!==0&&a===2){var s=Gv(t);s!==0&&(r=s,a=Ny(t,s))}if(a===1)throw a=Bm,bl(t,0),ii(t,r),ps(t,Wr()),a;if(a===6)throw Error(st(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,rl(t,cs,uo),ps(t,Wr()),null}function l2(t,r){var a=Yt;Yt|=1;try{return t(r)}finally{Yt=a,Yt===0&&(pd=Wr()+500,Wf&&Ii())}}function Fl(t){ui!==null&&ui.tag===0&&!(Yt&6)&&Yc();var r=Yt;Yt|=1;var a=an.transition,s=lr;try{if(an.transition=null,lr=1,t)return t()}finally{lr=s,an.transition=a,Yt=r,!(Yt&6)&&Ii()}}function c2(){As=Mc.current,Sr(Mc)}function bl(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,TD(a)),Jr!==null)for(a=Jr.return;a!==null;){var s=a;switch(V1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&zp();break;case 3:md(),Sr(ms),Sr(Ka),J1();break;case 5:Q1(s);break;case 4:md();break;case 13:Sr(Or);break;case 19:Sr(Or);break;case 10:K1(s.type._context);break;case 22:case 23:c2()}a=a.return}if(_a=t,Jr=t=Si(t.current,null),Fa=As=r,xa=0,Bm=null,o2=Xf=Ol=0,cs=om=null,dl!==null){for(r=0;r<dl.length;r++)if(a=dl[r],s=a.interleaved,s!==null){a.interleaved=null;var n=s.next,o=a.pending;if(o!==null){var i=o.next;o.next=n,s.next=i}a.pending=s}dl=null}return t}function PE(t,r){do{var a=Jr;try{if(H1(),vp.current=Yp,Xp){for(var s=$r.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Xp=!1}if(Tl=0,ba=ua=$r=null,sm=!1,Mm=0,n2.current=null,a===null||a.return===null){xa=1,Bm=r,Jr=null;break}e:{var o=t,i=a.return,l=a,c=r;if(r=Fa,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=j_(i);if(h!==null){h.flags&=-257,N_(h,i,l,o,r),h.mode&1&&y_(o,d,r),r=h,c=d;var v=r.updateQueue;if(v===null){var p=new Set;p.add(c),r.updateQueue=p}else v.add(c);break e}else{if(!(r&1)){y_(o,d,r),d2();break e}c=Error(st(426))}}else if(Pr&&l.mode&1){var g=j_(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),N_(g,i,l,o,r),U1(xd(c,l));break e}}o=c=xd(c,l),xa!==4&&(xa=2),om===null?om=[o]:om.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,r&=-r,o.lanes|=r;var y=xE(o,c,r);p_(o,y);break e;case 1:l=c;var f=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wi===null||!wi.has(b)))){o.flags|=65536,r&=-r,o.lanes|=r;var N=pE(o,l,r);p_(o,N);break e}}o=o.return}while(o!==null)}FE(a)}catch(_){r=_,Jr===a&&a!==null&&(Jr=a=a.return);continue}break}while(!0)}function TE(){var t=Qp.current;return Qp.current=Yp,t===null?Yp:t}function d2(){(xa===0||xa===3||xa===2)&&(xa=4),_a===null||!(Ol&268435455)&&!(Xf&268435455)||ii(_a,Fa)}function eh(t,r){var a=Yt;Yt|=2;var s=TE();(_a!==t||Fa!==r)&&(uo=null,bl(t,r));do try{r8();break}catch(n){PE(t,n)}while(!0);if(H1(),Yt=a,Qp.current=s,Jr!==null)throw Error(st(261));return _a=null,Fa=0,xa}function r8(){for(;Jr!==null;)OE(Jr)}function a8(){for(;Jr!==null&&!E7();)OE(Jr)}function OE(t){var r=RE(t.alternate,t,As);t.memoizedProps=t.pendingProps,r===null?FE(t):Jr=r,n2.current=null}function FE(t){var r=t;do{var a=r.alternate;if(t=r.return,r.flags&32768){if(a=YD(a,r),a!==null){a.flags&=32767,Jr=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xa=6,Jr=null;return}}else if(a=XD(a,r,As),a!==null){Jr=a;return}if(r=r.sibling,r!==null){Jr=r;return}Jr=r=t}while(r!==null);xa===0&&(xa=5)}function rl(t,r,a){var s=lr,n=an.transition;try{an.transition=null,lr=1,s8(t,r,a,s)}finally{an.transition=n,lr=s}return null}function s8(t,r,a,s){do Yc();while(ui!==null);if(Yt&6)throw Error(st(327));a=t.finishedWork;var n=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(st(177));t.callbackNode=null,t.callbackPriority=0;var o=a.lanes|a.childLanes;if(I7(t,o),t===_a&&(Jr=_a=null,Fa=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||$0||($0=!0,DE(Rp,function(){return Yc(),null})),o=(a.flags&15990)!==0,a.subtreeFlags&15990||o){o=an.transition,an.transition=null;var i=lr;lr=1;var l=Yt;Yt|=4,n2.current=null,JD(t,a),kE(a,t),_D(ey),Mp=!!Zv,ey=Zv=null,t.current=a,ZD(a),A7(),Yt=l,lr=i,an.transition=o}else t.current=a;if($0&&($0=!1,ui=t,Zp=n),o=t.pendingLanes,o===0&&(wi=null),O7(a.stateNode),ps(t,Wr()),r!==null)for(s=t.onRecoverableError,a=0;a<r.length;a++)n=r[a],s(n.value,{componentStack:n.stack,digest:n.digest});if(Jp)throw Jp=!1,t=yy,yy=null,t;return Zp&1&&t.tag!==0&&Yc(),o=t.pendingLanes,o&1?t===jy?im++:(im=0,jy=t):im=0,Ii(),null}function Yc(){if(ui!==null){var t=x5(Zp),r=an.transition,a=lr;try{if(an.transition=null,lr=16>t?16:t,ui===null)var s=!1;else{if(t=ui,ui=null,Zp=0,Yt&6)throw Error(st(331));var n=Yt;for(Yt|=4,vt=t.current;vt!==null;){var o=vt,i=o.child;if(vt.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(vt=d;vt!==null;){var u=vt;switch(u.tag){case 0:case 11:case 15:nm(8,u,o)}var m=u.child;if(m!==null)m.return=u,vt=m;else for(;vt!==null;){u=vt;var x=u.sibling,h=u.return;if(_E(u),u===d){vt=null;break}if(x!==null){x.return=h,vt=x;break}vt=h}}}var v=o.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}vt=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,vt=i;else e:for(;vt!==null;){if(o=vt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:nm(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,vt=y;break e}vt=o.return}}var f=t.current;for(vt=f;vt!==null;){i=vt;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,vt=b;else e:for(i=f;vt!==null;){if(l=vt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gf(9,l)}}catch(_){Ir(l,l.return,_)}if(l===i){vt=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,vt=N;break e}vt=l.return}}if(Yt=n,Ii(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Bf,t)}catch{}s=!0}return s}finally{lr=a,an.transition=r}}return!1}function R_(t,r,a){r=xd(a,r),r=xE(t,r,1),t=Ni(t,r,1),r=ts(),t!==null&&(zx(t,1,r),ps(t,r))}function Ir(t,r,a){if(t.tag===3)R_(t,t,a);else for(;r!==null;){if(r.tag===3){R_(r,t,a);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wi===null||!wi.has(s))){t=xd(a,t),t=pE(r,t,1),r=Ni(r,t,1),t=ts(),r!==null&&(zx(r,1,t),ps(r,t));break}}r=r.return}}function n8(t,r,a){var s=t.pingCache;s!==null&&s.delete(r),r=ts(),t.pingedLanes|=t.suspendedLanes&a,_a===t&&(Fa&a)===a&&(xa===4||xa===3&&(Fa&130023424)===Fa&&500>Wr()-i2?bl(t,0):o2|=a),ps(t,r)}function $E(t,r){r===0&&(t.mode&1?(r=_0,_0<<=1,!(_0&130023424)&&(_0=4194304)):r=1);var a=ts();t=Ao(t,r),t!==null&&(zx(t,r,a),ps(t,a))}function o8(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),$E(t,a)}function i8(t,r){var a=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(st(314))}s!==null&&s.delete(r),$E(t,a)}var RE;RE=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||ms.current)ds=!0;else{if(!(t.lanes&a)&&!(r.flags&128))return ds=!1,GD(t,r,a);ds=!!(t.flags&131072)}else ds=!1,Pr&&r.flags&1048576&&L5(r,Up,r.index);switch(r.lanes=0,r.tag){case 2:var s=r.type;jp(t,r),t=r.pendingProps;var n=cd(r,Ka.current);Xc(r,a),n=e2(null,r,s,t,n,a);var o=t2();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,xs(s)?(o=!0,qp(r)):o=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,X1(r),n.updater=Kf,r.stateNode=n,n._reactInternals=r,cy(r,s,t,a),r=my(null,r,s,!0,o,a)):(r.tag=0,Pr&&o&&q1(r),Xa(null,r,n,a),r=r.child),r;case 16:s=r.elementType;e:{switch(jp(t,r),t=r.pendingProps,n=s._init,s=n(s._payload),r.type=s,n=r.tag=c8(s),t=hn(s,t),n){case 0:r=uy(null,r,s,t,a);break e;case 1:r=S_(null,r,s,t,a);break e;case 11:r=w_(null,r,s,t,a);break e;case 14:r=__(null,r,s,hn(s.type,t),a);break e}throw Error(st(306,s,""))}return r;case 0:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:hn(s,n),uy(t,r,s,n,a);case 1:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:hn(s,n),S_(t,r,s,n,a);case 3:e:{if(bE(r),t===null)throw Error(st(387));s=r.pendingProps,o=r.memoizedState,n=o.element,W5(t,r),Kp(r,s,null,a);var i=r.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},r.updateQueue.baseState=o,r.memoizedState=o,r.flags&256){n=xd(Error(st(423)),r),r=C_(t,r,s,a,n);break e}else if(s!==n){n=xd(Error(st(424)),r),r=C_(t,r,s,a,n);break e}else for(Rs=ji(r.stateNode.containerInfo.firstChild),Ds=r,Pr=!0,vn=null,a=V5(r,null,s,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(dd(),s===n){r=Po(t,r,a);break e}Xa(t,r,s,a)}r=r.child}return r;case 5:return H5(r),t===null&&oy(r),s=r.type,n=r.pendingProps,o=t!==null?t.memoizedProps:null,i=n.children,ty(s,n)?i=null:o!==null&&ty(s,o)&&(r.flags|=32),gE(t,r),Xa(t,r,i,a),r.child;case 6:return t===null&&oy(r),null;case 13:return vE(t,r,a);case 4:return Y1(r,r.stateNode.containerInfo),s=r.pendingProps,t===null?r.child=ud(r,null,s,a):Xa(t,r,s,a),r.child;case 11:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:hn(s,n),w_(t,r,s,n,a);case 7:return Xa(t,r,r.pendingProps,a),r.child;case 8:return Xa(t,r,r.pendingProps.children,a),r.child;case 12:return Xa(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(s=r.type._context,n=r.pendingProps,o=r.memoizedProps,i=n.value,vr(Wp,s._currentValue),s._currentValue=i,o!==null)if(An(o.value,i)){if(o.children===n.children&&!ms.current){r=Po(t,r,a);break e}}else for(o=r.child,o!==null&&(o.return=r);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=yo(-1,a&-a),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=a,c=o.alternate,c!==null&&(c.lanes|=a),iy(o.return,a,r),l.lanes|=a;break}c=c.next}}else if(o.tag===10)i=o.type===r.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(st(341));i.lanes|=a,l=i.alternate,l!==null&&(l.lanes|=a),iy(i,a,r),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===r){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Xa(t,r,n.children,a),r=r.child}return r;case 9:return n=r.type,s=r.pendingProps.children,Xc(r,a),n=sn(n),s=s(n),r.flags|=1,Xa(t,r,s,a),r.child;case 14:return s=r.type,n=hn(s,r.pendingProps),n=hn(s.type,n),__(t,r,s,n,a);case 15:return hE(t,r,r.type,r.pendingProps,a);case 17:return s=r.type,n=r.pendingProps,n=r.elementType===s?n:hn(s,n),jp(t,r),r.tag=1,xs(s)?(t=!0,qp(r)):t=!1,Xc(r,a),mE(r,s,n),cy(r,s,n,a),my(null,r,s,!0,t,a);case 19:return yE(t,r,a);case 22:return fE(t,r,a)}throw Error(st(156,r.tag))};function DE(t,r){return c5(t,r)}function l8(t,r,a,s){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,r,a,s){return new l8(t,r,a,s)}function u2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c8(t){if(typeof t=="function")return u2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P1)return 11;if(t===T1)return 14}return 2}function Si(t,r){var a=t.alternate;return a===null?(a=tn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function _p(t,r,a,s,n,o){var i=2;if(s=t,typeof t=="function")u2(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case kc:return vl(a.children,n,o,r);case A1:i=8,n|=8;break;case Fv:return t=tn(12,a,r,n|2),t.elementType=Fv,t.lanes=o,t;case $v:return t=tn(13,a,r,n),t.elementType=$v,t.lanes=o,t;case Rv:return t=tn(19,a,r,n),t.elementType=Rv,t.lanes=o,t;case H6:return Yf(a,n,o,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U6:i=10;break e;case W6:i=9;break e;case P1:i=11;break e;case T1:i=14;break e;case ai:i=16,s=null;break e}throw Error(st(130,t==null?t:typeof t,""))}return r=tn(i,a,r,n),r.elementType=t,r.type=s,r.lanes=o,r}function vl(t,r,a,s){return t=tn(7,t,s,r),t.lanes=a,t}function Yf(t,r,a,s){return t=tn(22,t,s,r),t.elementType=H6,t.lanes=a,t.stateNode={isHidden:!1},t}function Db(t,r,a){return t=tn(6,t,null,r),t.lanes=a,t}function Mb(t,r,a){return r=tn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function d8(t,r,a,s,n){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gb(0),this.expirationTimes=gb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gb(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function m2(t,r,a,s,n,o,i,l,c){return t=new d8(t,r,a,l,c),r===1?(r=1,o===!0&&(r|=8)):r=0,o=tn(3,null,null,r),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},X1(o),t}function u8(t,r,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:s==null?null:""+s,children:t,containerInfo:r,implementation:a}}function ME(t){if(!t)return Ai;t=t._reactInternals;e:{if(Jl(t)!==t||t.tag!==1)throw Error(st(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(xs(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(st(171))}if(t.tag===1){var a=t.type;if(xs(a))return M5(t,a,r)}return r}function IE(t,r,a,s,n,o,i,l,c){return t=m2(a,s,!0,t,n,o,i,l,c),t.context=ME(null),a=t.current,s=ts(),n=_i(a),o=yo(s,n),o.callback=r??null,Ni(a,o,n),t.current.lanes=n,zx(t,n,s),ps(t,s),t}function Qf(t,r,a,s){var n=r.current,o=ts(),i=_i(n);return a=ME(a),r.context===null?r.context=a:r.pendingContext=a,r=yo(o,i),r.payload={element:t},s=s===void 0?null:s,s!==null&&(r.callback=s),t=Ni(n,r,i),t!==null&&(Sn(t,n,i,o),bp(t,n,i)),i}function th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function x2(t,r){D_(t,r),(t=t.alternate)&&D_(t,r)}function m8(){return null}var LE=typeof reportError=="function"?reportError:function(t){console.error(t)};function p2(t){this._internalRoot=t}Jf.prototype.render=p2.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(st(409));Qf(t,r,null,null)};Jf.prototype.unmount=p2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Fl(function(){Qf(null,t,null,null)}),r[Eo]=null}};function Jf(t){this._internalRoot=t}Jf.prototype.unstable_scheduleHydration=function(t){if(t){var r=f5();t={blockedOn:null,target:t,priority:r};for(var a=0;a<oi.length&&r!==0&&r<oi[a].priority;a++);oi.splice(a,0,t),a===0&&b5(t)}};function h2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M_(){}function x8(t,r,a,s,n){if(n){if(typeof s=="function"){var o=s;s=function(){var d=th(i);o.call(d)}}var i=IE(r,s,t,0,null,!1,!1,"",M_);return t._reactRootContainer=i,t[Eo]=i.current,Om(t.nodeType===8?t.parentNode:t),Fl(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var d=th(c);l.call(d)}}var c=m2(t,0,!1,null,null,!1,!1,"",M_);return t._reactRootContainer=c,t[Eo]=c.current,Om(t.nodeType===8?t.parentNode:t),Fl(function(){Qf(r,c,a,s)}),c}function eg(t,r,a,s,n){var o=a._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var l=n;n=function(){var c=th(i);l.call(c)}}Qf(r,i,t,n)}else i=x8(a,r,t,n,s);return th(i)}p5=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Xu(r.pendingLanes);a!==0&&($1(r,a|1),ps(r,Wr()),!(Yt&6)&&(pd=Wr()+500,Ii()))}break;case 13:Fl(function(){var s=Ao(t,1);if(s!==null){var n=ts();Sn(s,t,1,n)}}),x2(t,1)}};R1=function(t){if(t.tag===13){var r=Ao(t,134217728);if(r!==null){var a=ts();Sn(r,t,134217728,a)}x2(t,134217728)}};h5=function(t){if(t.tag===13){var r=_i(t),a=Ao(t,r);if(a!==null){var s=ts();Sn(a,t,r,s)}x2(t,r)}};f5=function(){return lr};g5=function(t,r){var a=lr;try{return lr=t,r()}finally{lr=a}};Wv=function(t,r,a){switch(r){case"input":if(Iv(t,a),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var s=a[r];if(s!==t&&s.form===t.form){var n=Uf(s);if(!n)throw Error(st(90));G6(s),Iv(s,n)}}}break;case"textarea":Y6(t,a);break;case"select":r=a.value,r!=null&&Wc(t,!!a.multiple,r,!1)}};a5=l2;s5=Fl;var p8={usingClientEntryPoint:!1,Events:[Vx,Tc,Uf,t5,r5,l2]},Tu={findFiberByHostInstance:cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h8={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=i5(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||m8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R0.isDisabled&&R0.supportsFiber)try{Bf=R0.inject(h8),Kn=R0}catch{}}qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p8;qs.createPortal=function(t,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h2(r))throw Error(st(200));return u8(t,r,null,a)};qs.createRoot=function(t,r){if(!h2(t))throw Error(st(299));var a=!1,s="",n=LE;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=m2(t,1,!1,null,null,a,!1,s,n),t[Eo]=r.current,Om(t.nodeType===8?t.parentNode:t),new p2(r)};qs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(st(188)):(t=Object.keys(t).join(","),Error(st(268,t)));return t=i5(r),t=t===null?null:t.stateNode,t};qs.flushSync=function(t){return Fl(t)};qs.hydrate=function(t,r,a){if(!Zf(r))throw Error(st(200));return eg(null,t,r,!0,a)};qs.hydrateRoot=function(t,r,a){if(!h2(t))throw Error(st(405));var s=a!=null&&a.hydratedSources||null,n=!1,o="",i=LE;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),r=IE(r,null,t,1,a??null,n,!1,o,i),t[Eo]=r.current,Om(t),s)for(t=0;t<s.length;t++)a=s[t],n=a._getVersion,n=n(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,n]:r.mutableSourceEagerHydrationData.push(a,n);return new Jf(r)};qs.render=function(t,r,a){if(!Zf(r))throw Error(st(200));return eg(null,t,r,!1,a)};qs.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(st(40));return t._reactRootContainer?(Fl(function(){eg(null,null,t,!1,function(){t._reactRootContainer=null,t[Eo]=null})}),!0):!1};qs.unstable_batchedUpdates=l2;qs.unstable_renderSubtreeIntoContainer=function(t,r,a,s){if(!Zf(a))throw Error(st(200));if(t==null||t._reactInternals===void 0)throw Error(st(38));return eg(t,r,a,!1,s)};qs.version="18.3.1-next-f1338f8080-20240426";function BE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BE)}catch(t){console.error(t)}}BE(),B6.exports=qs;var f8=B6.exports,I_=f8;Tv.createRoot=I_.createRoot,Tv.hydrateRoot=I_.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},zm.apply(this,arguments)}var mi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mi||(mi={}));const L_="popstate";function g8(t){t===void 0&&(t={});function r(s,n){let{pathname:o,search:i,hash:l}=s.location;return _y("",{pathname:o,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(s,n){return typeof n=="string"?n:rh(n)}return v8(r,a,null,t)}function Gr(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function f2(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function b8(){return Math.random().toString(36).substr(2,8)}function B_(t,r){return{usr:t.state,key:t.key,idx:r}}function _y(t,r,a,s){return a===void 0&&(a=null),zm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?eu(r):r,{state:a,key:r&&r.key||s||b8()})}function rh(t){let{pathname:r="/",search:a="",hash:s=""}=t;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function eu(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substr(a),t=t.substr(0,a));let s=t.indexOf("?");s>=0&&(r.search=t.substr(s),t=t.substr(0,s)),t&&(r.pathname=t)}return r}function v8(t,r,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=mi.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(zm({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=mi.Pop;let g=u(),y=g==null?null:g-d;d=g,c&&c({action:l,location:p.location,delta:y})}function x(g,y){l=mi.Push;let f=_y(p.location,g,y);d=u()+1;let b=B_(f,d),N=p.createHref(f);try{i.pushState(b,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(N)}o&&c&&c({action:l,location:p.location,delta:1})}function h(g,y){l=mi.Replace;let f=_y(p.location,g,y);d=u();let b=B_(f,d),N=p.createHref(f);i.replaceState(b,"",N),o&&c&&c({action:l,location:p.location,delta:0})}function v(g){let y=n.location.origin!=="null"?n.location.origin:n.location.href,f=typeof g=="string"?g:rh(g);return f=f.replace(/ $/,"%20"),Gr(y,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,y)}let p={get action(){return l},get location(){return t(n,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(L_,m),c=g,()=>{n.removeEventListener(L_,m),c=null}},createHref(g){return r(n,g)},createURL:v,encodeLocation(g){let y=v(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:x,replace:h,go(g){return i.go(g)}};return p}var z_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(z_||(z_={}));function y8(t,r,a){return a===void 0&&(a="/"),j8(t,r,a)}function j8(t,r,a,s){let n=typeof r=="string"?eu(r):r,o=g2(n.pathname||"/",a);if(o==null)return null;let i=zE(t);N8(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=$8(o);l=T8(i[c],d)}return l}function zE(t,r,a,s){r===void 0&&(r=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Gr(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Ci([s,c.relativePath]),u=a.concat(c);o.children&&o.children.length>0&&(Gr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zE(o.children,r,u,d)),!(o.path==null&&!o.index)&&r.push({path:d,score:A8(d,o.index),routesMeta:u})};return t.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of qE(o.path))n(o,i,c)}),r}function qE(t){let r=t.split("/");if(r.length===0)return[];let[a,...s]=r,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=qE(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function N8(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:P8(r.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const w8=/^:[\w-]+$/,_8=3,S8=2,C8=1,k8=10,E8=-2,q_=t=>t==="*";function A8(t,r){let a=t.split("/"),s=a.length;return a.some(q_)&&(s+=E8),r&&(s+=S8),a.filter(n=>!q_(n)).reduce((n,o)=>n+(w8.test(o)?_8:o===""?C8:k8),s)}function P8(t,r){return t.length===r.length&&t.slice(0,-1).every((s,n)=>s===r[n])?t[t.length-1]-r[r.length-1]:0}function T8(t,r,a){let{routesMeta:s}=t,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=o==="/"?r:r.slice(o.length)||"/",m=O8({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),x=c.route;if(!m)return null;Object.assign(n,m.params),i.push({params:n,pathname:Ci([o,m.pathname]),pathnameBase:L8(Ci([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=Ci([o,m.pathnameBase]))}return i}function O8(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,s]=F8(t.path,t.caseSensitive,t.end),n=r.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:x,isOptional:h}=u;if(x==="*"){let p=l[m]||"";i=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[m];return h&&!v?d[x]=void 0:d[x]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:t}}function F8(t,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),f2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),s]}function $8(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return f2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function g2(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,s=t.charAt(a);return s&&s!=="/"?null:t.slice(a)||"/"}const R8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D8=t=>R8.test(t);function M8(t,r){r===void 0&&(r="/");let{pathname:a,search:s="",hash:n=""}=typeof t=="string"?eu(t):t,o;if(a)if(D8(a))o=a;else{if(a.includes("//")){let i=a;a=a.replace(/\/\/+/g,"/"),f2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+a))}a.startsWith("/")?o=V_(a.substring(1),"/"):o=V_(a,r)}else o=r;return{pathname:o,search:B8(s),hash:z8(n)}}function V_(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Ib(t,r,a,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I8(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function b2(t,r){let a=I8(t);return r?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function v2(t,r,a,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=eu(t):(n=zm({},t),Gr(!n.pathname||!n.pathname.includes("?"),Ib("?","pathname","search",n)),Gr(!n.pathname||!n.pathname.includes("#"),Ib("#","pathname","hash",n)),Gr(!n.search||!n.search.includes("#"),Ib("#","search","hash",n)));let o=t===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let m=r.length-1;if(!s&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),m-=1;n.pathname=x.join("/")}l=m>=0?r[m]:"/"}let c=M8(n,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Ci=t=>t.join("/").replace(/\/\/+/g,"/"),L8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),B8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,z8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VE=["post","put","patch","delete"];new Set(VE);const V8=["get",...VE];new Set(V8);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},qm.apply(this,arguments)}const y2=j.createContext(null),U8=j.createContext(null),Li=j.createContext(null),tg=j.createContext(null),ao=j.createContext({outlet:null,matches:[],isDataRoute:!1}),UE=j.createContext(null);function W8(t,r){let{relative:a}=r===void 0?{}:r;tu()||Gr(!1);let{basename:s,navigator:n}=j.useContext(Li),{hash:o,pathname:i,search:l}=HE(t,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:Ci([s,i])),n.createHref({pathname:c,search:l,hash:o})}function tu(){return j.useContext(tg)!=null}function zo(){return tu()||Gr(!1),j.useContext(tg).location}function WE(t){j.useContext(Li).static||j.useLayoutEffect(t)}function Ht(){let{isDataRoute:t}=j.useContext(ao);return t?oM():H8()}function H8(){tu()||Gr(!1);let t=j.useContext(y2),{basename:r,future:a,navigator:s}=j.useContext(Li),{matches:n}=j.useContext(ao),{pathname:o}=zo(),i=JSON.stringify(b2(n,a.v7_relativeSplatPath)),l=j.useRef(!1);return WE(()=>{l.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=v2(d,JSON.parse(i),o,u.relative==="path");t==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:Ci([r,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[r,s,i,o,t])}const K8=j.createContext(null);function G8(t){let r=j.useContext(ao).outlet;return r&&j.createElement(K8.Provider,{value:t},r)}function Zl(){let{matches:t}=j.useContext(ao),r=t[t.length-1];return r?r.params:{}}function HE(t,r){let{relative:a}=r===void 0?{}:r,{future:s}=j.useContext(Li),{matches:n}=j.useContext(ao),{pathname:o}=zo(),i=JSON.stringify(b2(n,s.v7_relativeSplatPath));return j.useMemo(()=>v2(t,JSON.parse(i),o,a==="path"),[t,i,o,a])}function X8(t,r){return Y8(t,r)}function Y8(t,r,a,s){tu()||Gr(!1);let{navigator:n}=j.useContext(Li),{matches:o}=j.useContext(ao),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=zo(),u;if(r){var m;let g=typeof r=="string"?eu(r):r;c==="/"||(m=g.pathname)!=null&&m.startsWith(c)||Gr(!1),u=g}else u=d;let x=u.pathname||"/",h=x;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+x.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=y8(t,{pathname:h}),p=tM(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Ci([c,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Ci([c,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,a,s);return r&&p?j.createElement(tg.Provider,{value:{location:qm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mi.Pop}},p):p}function Q8(){let t=nM(),r=q8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},r),a?j.createElement("pre",{style:n},a):null,null)}const J8=j.createElement(Q8,null);class Z8 extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?j.createElement(ao.Provider,{value:this.props.routeContext},j.createElement(UE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eM(t){let{routeContext:r,match:a,children:s}=t,n=j.useContext(y2);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),j.createElement(ao.Provider,{value:r},s)}function tM(t,r,a,s){var n;if(r===void 0&&(r=[]),a===void 0&&(a=null),s===void 0&&(s=null),t==null){var o;if(!a)return null;if(a.errors)t=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,l=(n=a)==null?void 0:n.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||Gr(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:h}=a,v=m.route.loader&&x[m.route.id]===void 0&&(!h||h[m.route.id]===void 0);if(m.route.lazy||v){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,x)=>{let h,v=!1,p=null,g=null;a&&(h=l&&m.route.id?l[m.route.id]:void 0,p=m.route.errorElement||J8,c&&(d<0&&x===0?(iM("route-fallback"),v=!0,g=null):d===x&&(v=!0,g=m.route.hydrateFallbackElement||null)));let y=r.concat(i.slice(0,x+1)),f=()=>{let b;return h?b=p:v?b=g:m.route.Component?b=j.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=u,j.createElement(eM,{match:m,routeContext:{outlet:u,matches:y,isDataRoute:a!=null},children:b})};return a&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?j.createElement(Z8,{location:a.location,revalidation:a.revalidation,component:p,error:h,children:f(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):f()},null)}var KE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KE||{}),GE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(GE||{});function rM(t){let r=j.useContext(y2);return r||Gr(!1),r}function aM(t){let r=j.useContext(U8);return r||Gr(!1),r}function sM(t){let r=j.useContext(ao);return r||Gr(!1),r}function XE(t){let r=sM(),a=r.matches[r.matches.length-1];return a.route.id||Gr(!1),a.route.id}function nM(){var t;let r=j.useContext(UE),a=aM(),s=XE();return r!==void 0?r:(t=a.errors)==null?void 0:t[s]}function oM(){let{router:t}=rM(KE.UseNavigateStable),r=XE(GE.UseNavigateStable),a=j.useRef(!1);return WE(()=>{a.current=!0}),j.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,qm({fromRouteId:r},o)))},[t,r])}const U_={};function iM(t,r,a){U_[t]||(U_[t]=!0)}function lM(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Sy(t){let{to:r,replace:a,state:s,relative:n}=t;tu()||Gr(!1);let{future:o,static:i}=j.useContext(Li),{matches:l}=j.useContext(ao),{pathname:c}=zo(),d=Ht(),u=v2(r,b2(l,o.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(u);return j.useEffect(()=>d(JSON.parse(m),{replace:a,state:s,relative:n}),[d,m,n,a,s]),null}function cM(t){return G8(t.context)}function ft(t){Gr(!1)}function dM(t){let{basename:r="/",children:a=null,location:s,navigationType:n=mi.Pop,navigator:o,static:i=!1,future:l}=t;tu()&&Gr(!1);let c=r.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:o,static:i,future:qm({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=eu(s));let{pathname:u="/",search:m="",hash:x="",state:h=null,key:v="default"}=s,p=j.useMemo(()=>{let g=g2(u,c);return g==null?null:{location:{pathname:g,search:m,hash:x,state:h,key:v},navigationType:n}},[c,u,m,x,h,v,n]);return p==null?null:j.createElement(Li.Provider,{value:d},j.createElement(tg.Provider,{children:a,value:p}))}function uM(t){let{children:r,location:a}=t;return X8(Cy(r),a)}new Promise(()=>{});function Cy(t,r){r===void 0&&(r=[]);let a=[];return j.Children.forEach(t,(s,n)=>{if(!j.isValidElement(s))return;let o=[...r,n];if(s.type===j.Fragment){a.push.apply(a,Cy(s.props.children,o));return}s.type!==ft&&Gr(!1),!s.props.index||!s.props.children||Gr(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Cy(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ky(){return ky=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ky.apply(this,arguments)}function mM(t,r){if(t==null)return{};var a={},s=Object.keys(t),n,o;for(o=0;o<s.length;o++)n=s[o],!(r.indexOf(n)>=0)&&(a[n]=t[n]);return a}function xM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pM(t,r){return t.button===0&&(!r||r==="_self")&&!xM(t)}function Ey(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,a)=>{let s=t[a];return r.concat(Array.isArray(s)?s.map(n=>[a,n]):[[a,s]])},[]))}function hM(t,r){let a=Ey(t);return r&&r.forEach((s,n)=>{a.has(n)||r.getAll(n).forEach(o=>{a.append(n,o)})}),a}const fM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gM="6";try{window.__reactRouterVersion=gM}catch{}const bM="startTransition",W_=n7[bM];function vM(t){let{basename:r,children:a,future:s,window:n}=t,o=j.useRef();o.current==null&&(o.current=g8({window:n,v5Compat:!0}));let i=o.current,[l,c]=j.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=j.useCallback(m=>{d&&W_?W_(()=>c(m)):c(m)},[c,d]);return j.useLayoutEffect(()=>i.listen(u),[i,u]),j.useEffect(()=>lM(s),[s]),j.createElement(dM,{basename:r,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const yM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hd=j.forwardRef(function(r,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=r,x=mM(r,fM),{basename:h}=j.useContext(Li),v,p=!1;if(typeof d=="string"&&jM.test(d)&&(v=d,yM))try{let b=new URL(window.location.href),N=d.startsWith("//")?new URL(b.protocol+d):new URL(d),_=g2(N.pathname,h);N.origin===b.origin&&_!=null?d=_+N.search+N.hash:p=!0}catch{}let g=W8(d,{relative:n}),y=NM(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:m});function f(b){s&&s(b),b.defaultPrevented||y(b)}return j.createElement("a",ky({},x,{href:v||g,onClick:p||o?s:f,ref:a,target:c}))});var H_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(H_||(H_={}));var K_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(K_||(K_={}));function NM(t,r){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=r===void 0?{}:r,c=Ht(),d=zo(),u=HE(t,{relative:i});return j.useCallback(m=>{if(pM(m,a)){m.preventDefault();let x=s!==void 0?s:rh(d)===rh(u);c(t,{replace:x,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,s,n,a,t,o,i,l])}function rg(t){let r=j.useRef(Ey(t)),a=j.useRef(!1),s=zo(),n=j.useMemo(()=>hM(s.search,a.current?null:r.current),[s.search]),o=Ht(),i=j.useCallback((l,c)=>{const d=Ey(typeof l=="function"?l(n):l);a.current=!0,o("?"+d,c)},[o,n]);return[n,i]}let wM={data:""},_M=t=>{if(typeof window=="object"){let r=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(t||document.head).appendChild(r),r.firstChild}return t||wM},SM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,CM=/\/\*[^]*?\*\/|  +/g,G_=/\n+/g,li=(t,r)=>{let a="",s="",n="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+i+";":s+=o[1]=="f"?li(i,o):o+"{"+li(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=li(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=li.p?li.p(o,i):o+":"+i+";")}return a+(r&&n?r+"{"+n+"}":n)+s},io={},YE=t=>{if(typeof t=="object"){let r="";for(let a in t)r+=a+YE(t[a]);return r}return t},kM=(t,r,a,s,n)=>{let o=YE(t),i=io[o]||(io[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!io[i]){let c=o!==t?t:(d=>{let u,m,x=[{}];for(;u=SM.exec(d.replace(CM,""));)u[4]?x.shift():u[3]?(m=u[3].replace(G_," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][u[1]]=u[2].replace(G_," ").trim();return x[0]})(t);io[i]=li(n?{["@keyframes "+i]:c}:c,a?"":"."+i)}let l=a&&io.g?io.g:null;return a&&(io.g=io[i]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(io[i],r,s,l),i},EM=(t,r,a)=>t.reduce((s,n,o)=>{let i=r[o];if(i&&i.call){let l=i(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":li(l,""):l===!1?"":l}return s+n+(i??"")},"");function ag(t){let r=this||{},a=t.call?t(r.p):t;return kM(a.unshift?a.raw?EM(a,[].slice.call(arguments,1),r.p):a.reduce((s,n)=>Object.assign(s,n&&n.call?n(r.p):n),{}):a,_M(r.target),r.g,r.o,r.k)}let QE,Ay,Py;ag.bind({g:1});let To=ag.bind({k:1});function AM(t,r,a,s){li.p=r,QE=t,Ay=a,Py=s}function Bi(t,r){let a=this||{};return function(){let s=arguments;function n(o,i){let l=Object.assign({},o),c=l.className||n.className;a.p=Object.assign({theme:Ay&&Ay()},l),a.o=/ *go\d+/.test(c),l.className=ag.apply(a,s)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),Py&&d[0]&&Py(l),QE(d,l)}return n}}var PM=t=>typeof t=="function",ah=(t,r)=>PM(t)?t(r):t,TM=(()=>{let t=0;return()=>(++t).toString()})(),JE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");t=!r||r.matches}return t}})(),OM=20,j2="default",ZE=(t,r)=>{let{toastLimit:a}=t.settings;switch(r.type){case 0:return{...t,toasts:[r.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case 2:let{toast:s}=r;return ZE(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=r;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==r.toastId)};case 5:return{...t,pausedAt:r.time};case 6:let o=r.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},Sp=[],eA={toasts:[],pausedAt:void 0,settings:{toastLimit:OM}},Un={},tA=(t,r=j2)=>{Un[r]=ZE(Un[r]||eA,t),Sp.forEach(([a,s])=>{a===r&&s(Un[r])})},rA=t=>Object.keys(Un).forEach(r=>tA(t,r)),FM=t=>Object.keys(Un).find(r=>Un[r].toasts.some(a=>a.id===t)),sg=(t=j2)=>r=>{tA(r,t)},$M={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},RM=(t={},r=j2)=>{let[a,s]=j.useState(Un[r]||eA),n=j.useRef(Un[r]);j.useEffect(()=>(n.current!==Un[r]&&s(Un[r]),Sp.push([r,s]),()=>{let i=Sp.findIndex(([l])=>l===r);i>-1&&Sp.splice(i,1)}),[r]);let o=a.toasts.map(i=>{var l,c,d;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((l=t[i.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||$M[i.type],style:{...t.style,...(d=t[i.type])==null?void 0:d.style,...i.style}}});return{...a,toasts:o}},DM=(t,r="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||TM()}),Wx=t=>(r,a)=>{let s=DM(r,t,a);return sg(s.toasterId||FM(s.id))({type:2,toast:s}),s.id},be=(t,r)=>Wx("blank")(t,r);be.error=Wx("error");be.success=Wx("success");be.loading=Wx("loading");be.custom=Wx("custom");be.dismiss=(t,r)=>{let a={type:3,toastId:t};r?sg(r)(a):rA(a)};be.dismissAll=t=>be.dismiss(void 0,t);be.remove=(t,r)=>{let a={type:4,toastId:t};r?sg(r)(a):rA(a)};be.removeAll=t=>be.remove(void 0,t);be.promise=(t,r,a)=>{let s=be.loading(r.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let o=r.success?ah(r.success,n):void 0;return o?be.success(o,{id:s,...a,...a==null?void 0:a.success}):be.dismiss(s),n}).catch(n=>{let o=r.error?ah(r.error,n):void 0;o?be.error(o,{id:s,...a,...a==null?void 0:a.error}):be.dismiss(s)}),t};var MM=1e3,IM=(t,r="default")=>{let{toasts:a,pausedAt:s}=RM(t,r),n=j.useRef(new Map).current,o=j.useCallback((m,x=MM)=>{if(n.has(m))return;let h=setTimeout(()=>{n.delete(m),i({type:4,toastId:m})},x);n.set(m,h)},[]);j.useEffect(()=>{if(s)return;let m=Date.now(),x=a.map(h=>{if(h.duration===1/0)return;let v=(h.duration||0)+h.pauseDuration-(m-h.createdAt);if(v<0){h.visible&&be.dismiss(h.id);return}return setTimeout(()=>be.dismiss(h.id,r),v)});return()=>{x.forEach(h=>h&&clearTimeout(h))}},[a,s,r]);let i=j.useCallback(sg(r),[r]),l=j.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=j.useCallback((m,x)=>{i({type:1,toast:{id:m,height:x}})},[i]),d=j.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=j.useCallback((m,x)=>{let{reverseOrder:h=!1,gutter:v=8,defaultPosition:p}=x||{},g=a.filter(b=>(b.position||p)===(m.position||p)&&b.height),y=g.findIndex(b=>b.id===m.id),f=g.filter((b,N)=>N<y&&b.visible).length;return g.filter(b=>b.visible).slice(...h?[f+1]:[0,f]).reduce((b,N)=>b+(N.height||0)+v,0)},[a]);return j.useEffect(()=>{a.forEach(m=>{if(m.dismissed)o(m.id,m.removeDelay);else{let x=n.get(m.id);x&&(clearTimeout(x),n.delete(m.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},LM=To`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,BM=To`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zM=To`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qM=Bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${BM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VM=To`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UM=Bi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${VM} 1s linear infinite;
`,WM=To`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,HM=To`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KM=Bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${WM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${HM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,GM=Bi("div")`
  position: absolute;
`,XM=Bi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,YM=To`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QM=Bi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${YM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,JM=({toast:t})=>{let{icon:r,type:a,iconTheme:s}=t;return r!==void 0?typeof r=="string"?j.createElement(QM,null,r):r:a==="blank"?null:j.createElement(XM,null,j.createElement(UM,{...s}),a!=="loading"&&j.createElement(GM,null,a==="error"?j.createElement(qM,{...s}):j.createElement(KM,{...s})))},ZM=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eI=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,tI="0%{opacity:0;} 100%{opacity:1;}",rI="0%{opacity:1;} 100%{opacity:0;}",aI=Bi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sI=Bi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nI=(t,r)=>{let a=t.includes("top")?1:-1,[s,n]=JE()?[tI,rI]:[ZM(a),eI(a)];return{animation:r?`${To(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${To(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},oI=j.memo(({toast:t,position:r,style:a,children:s})=>{let n=t.height?nI(t.position||r||"top-center",t.visible):{opacity:0},o=j.createElement(JM,{toast:t}),i=j.createElement(sI,{...t.ariaProps},ah(t.message,t));return j.createElement(aI,{className:t.className,style:{...n,...a,...t.style}},typeof s=="function"?s({icon:o,message:i}):j.createElement(j.Fragment,null,o,i))});AM(j.createElement);var iI=({id:t,className:r,style:a,onHeightUpdate:s,children:n})=>{let o=j.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return j.createElement("div",{ref:o,className:r,style:a},n)},lI=(t,r)=>{let a=t.includes("top"),s=a?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:JE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${r*(a?1:-1)}px)`,...s,...n}},cI=ag`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,D0=16,dI=({reverseOrder:t,position:r="top-center",toastOptions:a,gutter:s,children:n,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=IM(a,o);return j.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:D0,left:D0,right:D0,bottom:D0,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let m=u.position||r,x=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:r}),h=lI(m,x);return j.createElement(iI,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?cI:"",style:h},u.type==="custom"?ah(u.message,u):n?n(u):j.createElement(oI,{toast:u,position:m}))}))},Ue=be;function aA(t,r){return function(){return t.apply(r,arguments)}}const{toString:uI}=Object.prototype,{getPrototypeOf:N2}=Object,{iterator:ng,toStringTag:sA}=Symbol,og=(t=>r=>{const a=uI.call(r);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),On=t=>(t=t.toLowerCase(),r=>og(r)===t),ig=t=>r=>typeof r===t,{isArray:ru}=Array,fd=ig("undefined");function Hx(t){return t!==null&&!fd(t)&&t.constructor!==null&&!fd(t.constructor)&&hs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nA=On("ArrayBuffer");function mI(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&nA(t.buffer),r}const xI=ig("string"),hs=ig("function"),oA=ig("number"),Kx=t=>t!==null&&typeof t=="object",pI=t=>t===!0||t===!1,Cp=t=>{if(og(t)!=="object")return!1;const r=N2(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(sA in t)&&!(ng in t)},hI=t=>{if(!Kx(t)||Hx(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},fI=On("Date"),gI=On("File"),bI=On("Blob"),vI=On("FileList"),yI=t=>Kx(t)&&hs(t.pipe),jI=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||hs(t.append)&&((r=og(t))==="formdata"||r==="object"&&hs(t.toString)&&t.toString()==="[object FormData]"))},NI=On("URLSearchParams"),[wI,_I,SI,CI]=["ReadableStream","Request","Response","Headers"].map(On),kI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gx(t,r,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),ru(t))for(s=0,n=t.length;s<n;s++)r.call(null,t[s],s,t);else{if(Hx(t))return;const o=a?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(s=0;s<i;s++)l=o[s],r.call(null,t[l],l,t)}}function iA(t,r){if(Hx(t))return null;r=r.toLowerCase();const a=Object.keys(t);let s=a.length,n;for(;s-- >0;)if(n=a[s],r===n.toLowerCase())return n;return null}const ml=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lA=t=>!fd(t)&&t!==ml;function Ty(){const{caseless:t,skipUndefined:r}=lA(this)&&this||{},a={},s=(n,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;const i=t&&iA(a,o)||o;Cp(a[i])&&Cp(n)?a[i]=Ty(a[i],n):Cp(n)?a[i]=Ty({},n):ru(n)?a[i]=n.slice():(!r||!fd(n))&&(a[i]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Gx(arguments[n],s);return a}const EI=(t,r,a,{allOwnKeys:s}={})=>(Gx(r,(n,o)=>{a&&hs(n)?Object.defineProperty(t,o,{value:aA(n,a),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,o,{value:n,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),t),AI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),PI=(t,r,a,s)=>{t.prototype=Object.create(r.prototype,s),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:r.prototype}),a&&Object.assign(t.prototype,a)},TI=(t,r,a,s)=>{let n,o,i;const l={};if(r=r||{},t==null)return r;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)i=n[o],(!s||s(i,t,r))&&!l[i]&&(r[i]=t[i],l[i]=!0);t=a!==!1&&N2(t)}while(t&&(!a||a(t,r))&&t!==Object.prototype);return r},OI=(t,r,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=r.length;const s=t.indexOf(r,a);return s!==-1&&s===a},FI=t=>{if(!t)return null;if(ru(t))return t;let r=t.length;if(!oA(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=t[r];return a},$I=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&N2(Uint8Array)),RI=(t,r)=>{const s=(t&&t[ng]).call(t);let n;for(;(n=s.next())&&!n.done;){const o=n.value;r.call(t,o[0],o[1])}},DI=(t,r)=>{let a;const s=[];for(;(a=t.exec(r))!==null;)s.push(a);return s},MI=On("HTMLFormElement"),II=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,n){return s.toUpperCase()+n}),X_=(({hasOwnProperty:t})=>(r,a)=>t.call(r,a))(Object.prototype),LI=On("RegExp"),cA=(t,r)=>{const a=Object.getOwnPropertyDescriptors(t),s={};Gx(a,(n,o)=>{let i;(i=r(n,o,t))!==!1&&(s[o]=i||n)}),Object.defineProperties(t,s)},BI=t=>{cA(t,(r,a)=>{if(hs(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=t[a];if(hs(s)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},zI=(t,r)=>{const a={},s=n=>{n.forEach(o=>{a[o]=!0})};return ru(t)?s(t):s(String(t).split(r)),a},qI=()=>{},VI=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function UI(t){return!!(t&&hs(t.append)&&t[sA]==="FormData"&&t[ng])}const WI=t=>{const r=new Array(10),a=(s,n)=>{if(Kx(s)){if(r.indexOf(s)>=0)return;if(Hx(s))return s;if(!("toJSON"in s)){r[n]=s;const o=ru(s)?[]:{};return Gx(s,(i,l)=>{const c=a(i,n+1);!fd(c)&&(o[l]=c)}),r[n]=void 0,o}}return s};return a(t,0)},HI=On("AsyncFunction"),KI=t=>t&&(Kx(t)||hs(t))&&hs(t.then)&&hs(t.catch),dA=((t,r)=>t?setImmediate:r?((a,s)=>(ml.addEventListener("message",({source:n,data:o})=>{n===ml&&o===a&&s.length&&s.shift()()},!1),n=>{s.push(n),ml.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",hs(ml.postMessage)),GI=typeof queueMicrotask<"u"?queueMicrotask.bind(ml):typeof process<"u"&&process.nextTick||dA,XI=t=>t!=null&&hs(t[ng]),Fe={isArray:ru,isArrayBuffer:nA,isBuffer:Hx,isFormData:jI,isArrayBufferView:mI,isString:xI,isNumber:oA,isBoolean:pI,isObject:Kx,isPlainObject:Cp,isEmptyObject:hI,isReadableStream:wI,isRequest:_I,isResponse:SI,isHeaders:CI,isUndefined:fd,isDate:fI,isFile:gI,isBlob:bI,isRegExp:LI,isFunction:hs,isStream:yI,isURLSearchParams:NI,isTypedArray:$I,isFileList:vI,forEach:Gx,merge:Ty,extend:EI,trim:kI,stripBOM:AI,inherits:PI,toFlatObject:TI,kindOf:og,kindOfTest:On,endsWith:OI,toArray:FI,forEachEntry:RI,matchAll:DI,isHTMLForm:MI,hasOwnProperty:X_,hasOwnProp:X_,reduceDescriptors:cA,freezeMethods:BI,toObjectSet:zI,toCamelCase:II,noop:qI,toFiniteNumber:VI,findKey:iA,global:ml,isContextDefined:lA,isSpecCompliantForm:UI,toJSONObject:WI,isAsyncFn:HI,isThenable:KI,setImmediate:dA,asap:GI,isIterable:XI};let Tt=class uA extends Error{static from(r,a,s,n,o,i){const l=new uA(r.message,a||r.code,s,n,o);return l.cause=r,l.name=r.name,i&&Object.assign(l,i),l}constructor(r,a,s,n,o){super(r),this.name="AxiosError",this.isAxiosError=!0,a&&(this.code=a),s&&(this.config=s),n&&(this.request=n),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}};Tt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Tt.ERR_BAD_OPTION="ERR_BAD_OPTION";Tt.ECONNABORTED="ECONNABORTED";Tt.ETIMEDOUT="ETIMEDOUT";Tt.ERR_NETWORK="ERR_NETWORK";Tt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Tt.ERR_DEPRECATED="ERR_DEPRECATED";Tt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Tt.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Tt.ERR_CANCELED="ERR_CANCELED";Tt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Tt.ERR_INVALID_URL="ERR_INVALID_URL";const YI=null;function Oy(t){return Fe.isPlainObject(t)||Fe.isArray(t)}function mA(t){return Fe.endsWith(t,"[]")?t.slice(0,-2):t}function Y_(t,r,a){return t?t.concat(r).map(function(n,o){return n=mA(n),!a&&o?"["+n+"]":n}).join(a?".":""):r}function QI(t){return Fe.isArray(t)&&!t.some(Oy)}const JI=Fe.toFlatObject(Fe,{},null,function(r){return/^is[A-Z]/.test(r)});function lg(t,r,a){if(!Fe.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,a=Fe.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!Fe.isUndefined(g[p])});const s=a.metaTokens,n=a.visitor||u,o=a.dots,i=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(r);if(!Fe.isFunction(n))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Fe.isDate(v))return v.toISOString();if(Fe.isBoolean(v))return v.toString();if(!c&&Fe.isBlob(v))throw new Tt("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(v)||Fe.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,p,g){let y=v;if(v&&!g&&typeof v=="object"){if(Fe.endsWith(p,"{}"))p=s?p:p.slice(0,-2),v=JSON.stringify(v);else if(Fe.isArray(v)&&QI(v)||(Fe.isFileList(v)||Fe.endsWith(p,"[]"))&&(y=Fe.toArray(v)))return p=mA(p),y.forEach(function(b,N){!(Fe.isUndefined(b)||b===null)&&r.append(i===!0?Y_([p],N,o):i===null?p:p+"[]",d(b))}),!1}return Oy(v)?!0:(r.append(Y_(g,p,o),d(v)),!1)}const m=[],x=Object.assign(JI,{defaultVisitor:u,convertValue:d,isVisitable:Oy});function h(v,p){if(!Fe.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(v),Fe.forEach(v,function(y,f){(!(Fe.isUndefined(y)||y===null)&&n.call(r,y,Fe.isString(f)?f.trim():f,p,x))===!0&&h(y,p?p.concat(f):[f])}),m.pop()}}if(!Fe.isObject(t))throw new TypeError("data must be an object");return h(t),r}function Q_(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return r[s]})}function w2(t,r){this._pairs=[],t&&lg(t,this,r)}const xA=w2.prototype;xA.append=function(r,a){this._pairs.push([r,a])};xA.toString=function(r){const a=r?function(s){return r.call(this,s,Q_)}:Q_;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function ZI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function pA(t,r,a){if(!r)return t;const s=a&&a.encode||ZI,n=Fe.isFunction(a)?{serialize:a}:a,o=n&&n.serialize;let i;if(o?i=o(r,n):i=Fe.isURLSearchParams(r)?r.toString():new w2(r,n).toString(s),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class J_{constructor(){this.handlers=[]}use(r,a,s){return this.handlers.push({fulfilled:r,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Fe.forEach(this.handlers,function(s){s!==null&&r(s)})}}const _2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},eL=typeof URLSearchParams<"u"?URLSearchParams:w2,tL=typeof FormData<"u"?FormData:null,rL=typeof Blob<"u"?Blob:null,aL={isBrowser:!0,classes:{URLSearchParams:eL,FormData:tL,Blob:rL},protocols:["http","https","file","blob","url","data"]},S2=typeof window<"u"&&typeof document<"u",Fy=typeof navigator=="object"&&navigator||void 0,sL=S2&&(!Fy||["ReactNative","NativeScript","NS"].indexOf(Fy.product)<0),nL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oL=S2&&window.location.href||"http://localhost",iL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:S2,hasStandardBrowserEnv:sL,hasStandardBrowserWebWorkerEnv:nL,navigator:Fy,origin:oL},Symbol.toStringTag,{value:"Module"})),Ua={...iL,...aL};function lL(t,r){return lg(t,new Ua.classes.URLSearchParams,{visitor:function(a,s,n,o){return Ua.isNode&&Fe.isBuffer(a)?(this.append(s,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function cL(t){return Fe.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function dL(t){const r={},a=Object.keys(t);let s;const n=a.length;let o;for(s=0;s<n;s++)o=a[s],r[o]=t[o];return r}function hA(t){function r(a,s,n,o){let i=a[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=a.length;return i=!i&&Fe.isArray(n)?n.length:i,c?(Fe.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!l):((!n[i]||!Fe.isObject(n[i]))&&(n[i]=[]),r(a,s,n[i],o)&&Fe.isArray(n[i])&&(n[i]=dL(n[i])),!l)}if(Fe.isFormData(t)&&Fe.isFunction(t.entries)){const a={};return Fe.forEachEntry(t,(s,n)=>{r(cL(s),n,a,0)}),a}return null}function uL(t,r,a){if(Fe.isString(t))try{return(r||JSON.parse)(t),Fe.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(t)}const Xx={transitional:_2,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const s=a.getContentType()||"",n=s.indexOf("application/json")>-1,o=Fe.isObject(r);if(o&&Fe.isHTMLForm(r)&&(r=new FormData(r)),Fe.isFormData(r))return n?JSON.stringify(hA(r)):r;if(Fe.isArrayBuffer(r)||Fe.isBuffer(r)||Fe.isStream(r)||Fe.isFile(r)||Fe.isBlob(r)||Fe.isReadableStream(r))return r;if(Fe.isArrayBufferView(r))return r.buffer;if(Fe.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return lL(r,this.formSerializer).toString();if((l=Fe.isFileList(r))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return lg(l?{"files[]":r}:r,c&&new c,this.formSerializer)}}return o||n?(a.setContentType("application/json",!1),uL(r)):r}],transformResponse:[function(r){const a=this.transitional||Xx.transitional,s=a&&a.forcedJSONParsing,n=this.responseType==="json";if(Fe.isResponse(r)||Fe.isReadableStream(r))return r;if(r&&Fe.isString(r)&&(s&&!this.responseType||n)){const i=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?Tt.from(l,Tt.ERR_BAD_RESPONSE,this,null,this.response):l}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ua.classes.FormData,Blob:Ua.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],t=>{Xx.headers[t]={}});const mL=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xL=t=>{const r={};let a,s,n;return t&&t.split(`
`).forEach(function(i){n=i.indexOf(":"),a=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!a||r[a]&&mL[a])&&(a==="set-cookie"?r[a]?r[a].push(s):r[a]=[s]:r[a]=r[a]?r[a]+", "+s:s)}),r},Z_=Symbol("internals");function Ou(t){return t&&String(t).trim().toLowerCase()}function kp(t){return t===!1||t==null?t:Fe.isArray(t)?t.map(kp):String(t)}function pL(t){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(t);)r[s[1]]=s[2];return r}const hL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lb(t,r,a,s,n){if(Fe.isFunction(s))return s.call(this,r,a);if(n&&(r=a),!!Fe.isString(r)){if(Fe.isString(s))return r.indexOf(s)!==-1;if(Fe.isRegExp(s))return s.test(r)}}function fL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,s)=>a.toUpperCase()+s)}function gL(t,r){const a=Fe.toCamelCase(" "+r);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+a,{value:function(n,o,i){return this[s].call(this,r,n,o,i)},configurable:!0})})}let fs=class{constructor(r){r&&this.set(r)}set(r,a,s){const n=this;function o(l,c,d){const u=Ou(c);if(!u)throw new Error("header name must be a non-empty string");const m=Fe.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||c]=kp(l))}const i=(l,c)=>Fe.forEach(l,(d,u)=>o(d,u,c));if(Fe.isPlainObject(r)||r instanceof this.constructor)i(r,a);else if(Fe.isString(r)&&(r=r.trim())&&!hL(r))i(xL(r),a);else if(Fe.isObject(r)&&Fe.isIterable(r)){let l={},c,d;for(const u of r){if(!Fe.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Fe.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,a)}else r!=null&&o(a,r,s);return this}get(r,a){if(r=Ou(r),r){const s=Fe.findKey(this,r);if(s){const n=this[s];if(!a)return n;if(a===!0)return pL(n);if(Fe.isFunction(a))return a.call(this,n,s);if(Fe.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Ou(r),r){const s=Fe.findKey(this,r);return!!(s&&this[s]!==void 0&&(!a||Lb(this,this[s],s,a)))}return!1}delete(r,a){const s=this;let n=!1;function o(i){if(i=Ou(i),i){const l=Fe.findKey(s,i);l&&(!a||Lb(s,s[l],l,a))&&(delete s[l],n=!0)}}return Fe.isArray(r)?r.forEach(o):o(r),n}clear(r){const a=Object.keys(this);let s=a.length,n=!1;for(;s--;){const o=a[s];(!r||Lb(this,this[o],o,r,!0))&&(delete this[o],n=!0)}return n}normalize(r){const a=this,s={};return Fe.forEach(this,(n,o)=>{const i=Fe.findKey(s,o);if(i){a[i]=kp(n),delete a[o];return}const l=r?fL(o):String(o).trim();l!==o&&delete a[o],a[l]=kp(n),s[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return Fe.forEach(this,(s,n)=>{s!=null&&s!==!1&&(a[n]=r&&Fe.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const s=new this(r);return a.forEach(n=>s.set(n)),s}static accessor(r){const s=(this[Z_]=this[Z_]={accessors:{}}).accessors,n=this.prototype;function o(i){const l=Ou(i);s[l]||(gL(n,i),s[l]=!0)}return Fe.isArray(r)?r.forEach(o):o(r),this}};fs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors(fs.prototype,({value:t},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(s){this[a]=s}}});Fe.freezeMethods(fs);function Bb(t,r){const a=this||Xx,s=r||a,n=fs.from(s.headers);let o=s.data;return Fe.forEach(t,function(l){o=l.call(a,o,n.normalize(),r?r.status:void 0)}),n.normalize(),o}function fA(t){return!!(t&&t.__CANCEL__)}let Yx=class extends Tt{constructor(r,a,s){super(r??"canceled",Tt.ERR_CANCELED,a,s),this.name="CanceledError",this.__CANCEL__=!0}};function gA(t,r,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?t(a):r(new Tt("Request failed with status code "+a.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function bL(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function vL(t,r){t=t||10;const a=new Array(t),s=new Array(t);let n=0,o=0,i;return r=r!==void 0?r:1e3,function(c){const d=Date.now(),u=s[o];i||(i=d),a[n]=c,s[n]=d;let m=o,x=0;for(;m!==n;)x+=a[m++],m=m%t;if(n=(n+1)%t,n===o&&(o=(o+1)%t),d-i<r)return;const h=u&&d-u;return h?Math.round(x*1e3/h):void 0}}function yL(t,r){let a=0,s=1e3/r,n,o;const i=(d,u=Date.now())=>{a=u,n=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-a;m>=s?i(d,u):(n=d,o||(o=setTimeout(()=>{o=null,i(n)},s-m)))},()=>n&&i(n)]}const sh=(t,r,a=3)=>{let s=0;const n=vL(50,250);return yL(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,d=n(c),u=i<=l;s=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[r?"download":"upload"]:!0};t(m)},a)},e4=(t,r)=>{const a=t!=null;return[s=>r[0]({lengthComputable:a,total:t,loaded:s}),r[1]]},t4=t=>(...r)=>Fe.asap(()=>t(...r)),jL=Ua.hasStandardBrowserEnv?((t,r)=>a=>(a=new URL(a,Ua.origin),t.protocol===a.protocol&&t.host===a.host&&(r||t.port===a.port)))(new URL(Ua.origin),Ua.navigator&&/(msie|trident)/i.test(Ua.navigator.userAgent)):()=>!0,NL=Ua.hasStandardBrowserEnv?{write(t,r,a,s,n,o,i){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(r)}`];Fe.isNumber(a)&&l.push(`expires=${new Date(a).toUTCString()}`),Fe.isString(s)&&l.push(`path=${s}`),Fe.isString(n)&&l.push(`domain=${n}`),o===!0&&l.push("secure"),Fe.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function wL(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _L(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function bA(t,r,a){let s=!wL(r);return t&&(s||a==!1)?_L(t,r):r}const r4=t=>t instanceof fs?{...t}:t;function $l(t,r){r=r||{};const a={};function s(d,u,m,x){return Fe.isPlainObject(d)&&Fe.isPlainObject(u)?Fe.merge.call({caseless:x},d,u):Fe.isPlainObject(u)?Fe.merge({},u):Fe.isArray(u)?u.slice():u}function n(d,u,m,x){if(Fe.isUndefined(u)){if(!Fe.isUndefined(d))return s(void 0,d,m,x)}else return s(d,u,m,x)}function o(d,u){if(!Fe.isUndefined(u))return s(void 0,u)}function i(d,u){if(Fe.isUndefined(u)){if(!Fe.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,m){if(m in r)return s(d,u);if(m in t)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,m)=>n(r4(d),r4(u),m,!0)};return Fe.forEach(Object.keys({...t,...r}),function(u){if(u==="__proto__"||u==="constructor"||u==="prototype")return;const m=Fe.hasOwnProp(c,u)?c[u]:n,x=m(t[u],r[u],u);Fe.isUndefined(x)&&m!==l||(a[u]=x)}),a}const vA=t=>{const r=$l({},t);let{data:a,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:o,headers:i,auth:l}=r;if(r.headers=i=fs.from(i),r.url=pA(bA(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Fe.isFormData(a)){if(Ua.hasStandardBrowserEnv||Ua.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Fe.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&i.set(u,m)})}}if(Ua.hasStandardBrowserEnv&&(s&&Fe.isFunction(s)&&(s=s(r)),s||s!==!1&&jL(r.url))){const c=n&&o&&NL.read(o);c&&i.set(n,c)}return r},SL=typeof XMLHttpRequest<"u",CL=SL&&function(t){return new Promise(function(a,s){const n=vA(t);let o=n.data;const i=fs.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,m,x,h,v;function p(){h&&h(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function y(){if(!g)return;const b=fs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:t,request:g};gA(function(S){a(S),p()},function(S){s(S),p()},_),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(s(new Tt("Request aborted",Tt.ECONNABORTED,t,g)),g=null)},g.onerror=function(N){const _=N&&N.message?N.message:"Network Error",w=new Tt(_,Tt.ERR_NETWORK,t,g);w.event=N||null,s(w),g=null},g.ontimeout=function(){let N=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const _=n.transitional||_2;n.timeoutErrorMessage&&(N=n.timeoutErrorMessage),s(new Tt(N,_.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,t,g)),g=null},o===void 0&&i.setContentType(null),"setRequestHeader"in g&&Fe.forEach(i.toJSON(),function(N,_){g.setRequestHeader(_,N)}),Fe.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),l&&l!=="json"&&(g.responseType=n.responseType),d&&([x,v]=sh(d,!0),g.addEventListener("progress",x)),c&&g.upload&&([m,h]=sh(c),g.upload.addEventListener("progress",m),g.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(u=b=>{g&&(s(!b||b.type?new Yx(null,t,g):b),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const f=bL(n.url);if(f&&Ua.protocols.indexOf(f)===-1){s(new Tt("Unsupported protocol "+f+":",Tt.ERR_BAD_REQUEST,t));return}g.send(o||null)})},kL=(t,r)=>{const{length:a}=t=t?t.filter(Boolean):[];if(r||a){let s=new AbortController,n;const o=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Tt?u:new Yx(u instanceof Error?u.message:u))}};let i=r&&setTimeout(()=>{i=null,o(new Tt(`timeout of ${r}ms exceeded`,Tt.ETIMEDOUT))},r);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>Fe.asap(l),c}},EL=function*(t,r){let a=t.byteLength;if(a<r){yield t;return}let s=0,n;for(;s<a;)n=s+r,yield t.slice(s,n),s=n},AL=async function*(t,r){for await(const a of PL(t))yield*EL(a,r)},PL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:a,value:s}=await r.read();if(a)break;yield s}}finally{await r.cancel()}},a4=(t,r,a,s)=>{const n=AL(t,r);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let m=u.byteLength;if(a){let x=o+=m;a(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},s4=64*1024,{isFunction:M0}=Fe,TL=(({Request:t,Response:r})=>({Request:t,Response:r}))(Fe.global),{ReadableStream:n4,TextEncoder:o4}=Fe.global,i4=(t,...r)=>{try{return!!t(...r)}catch{return!1}},OL=t=>{t=Fe.merge.call({skipUndefined:!0},TL,t);const{fetch:r,Request:a,Response:s}=t,n=r?M0(r):typeof fetch=="function",o=M0(a),i=M0(s);if(!n)return!1;const l=n&&M0(n4),c=n&&(typeof o4=="function"?(v=>p=>v.encode(p))(new o4):async v=>new Uint8Array(await new a(v).arrayBuffer())),d=o&&l&&i4(()=>{let v=!1;const p=new a(Ua.origin,{body:new n4,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!p}),u=i&&l&&i4(()=>Fe.isReadableStream(new s("").body)),m={stream:u&&(v=>v.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(p,g)=>{let y=p&&p[v];if(y)return y.call(p);throw new Tt(`Response type '${v}' is not supported`,Tt.ERR_NOT_SUPPORT,g)})});const x=async v=>{if(v==null)return 0;if(Fe.isBlob(v))return v.size;if(Fe.isSpecCompliantForm(v))return(await new a(Ua.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(v)||Fe.isArrayBuffer(v))return v.byteLength;if(Fe.isURLSearchParams(v)&&(v=v+""),Fe.isString(v))return(await c(v)).byteLength},h=async(v,p)=>{const g=Fe.toFiniteNumber(v.getContentLength());return g??x(p)};return async v=>{let{url:p,method:g,data:y,signal:f,cancelToken:b,timeout:N,onDownloadProgress:_,onUploadProgress:w,responseType:S,headers:C,withCredentials:E="same-origin",fetchOptions:T}=vA(v),q=r||fetch;S=S?(S+"").toLowerCase():"text";let A=kL([f,b&&b.toAbortSignal()],N),O=null;const V=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let G;try{if(w&&d&&g!=="get"&&g!=="head"&&(G=await h(C,y))!==0){let B=new a(p,{method:"POST",body:y,duplex:"half"}),F;if(Fe.isFormData(y)&&(F=B.headers.get("content-type"))&&C.setContentType(F),B.body){const[I,k]=e4(G,sh(t4(w)));y=a4(B.body,s4,I,k)}}Fe.isString(E)||(E=E?"include":"omit");const L=o&&"credentials"in a.prototype,Z={...T,signal:A,method:g.toUpperCase(),headers:C.normalize().toJSON(),body:y,duplex:"half",credentials:L?E:void 0};O=o&&new a(p,Z);let D=await(o?q(O,T):q(p,Z));const K=u&&(S==="stream"||S==="response");if(u&&(_||K&&V)){const B={};["status","statusText","headers"].forEach(M=>{B[M]=D[M]});const F=Fe.toFiniteNumber(D.headers.get("content-length")),[I,k]=_&&e4(F,sh(t4(_),!0))||[];D=new s(a4(D.body,s4,I,()=>{k&&k(),V&&V()}),B)}S=S||"text";let R=await m[Fe.findKey(m,S)||"text"](D,v);return!K&&V&&V(),await new Promise((B,F)=>{gA(B,F,{data:R,headers:fs.from(D.headers),status:D.status,statusText:D.statusText,config:v,request:O})})}catch(L){throw V&&V(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,v,O,L&&L.response),{cause:L.cause||L}):Tt.from(L,L&&L.code,v,O,L&&L.response)}}},FL=new Map,yA=t=>{let r=t&&t.env||{};const{fetch:a,Request:s,Response:n}=r,o=[s,n,a];let i=o.length,l=i,c,d,u=FL;for(;l--;)c=o[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:OL(r)),u=d;return d};yA();const C2={http:YI,xhr:CL,fetch:{get:yA}};Fe.forEach(C2,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const l4=t=>`- ${t}`,$L=t=>Fe.isFunction(t)||t===null||t===!1;function RL(t,r){t=Fe.isArray(t)?t:[t];const{length:a}=t;let s,n;const o={};for(let i=0;i<a;i++){s=t[i];let l;if(n=s,!$L(s)&&(n=C2[(l=String(s)).toLowerCase()],n===void 0))throw new Tt(`Unknown adapter '${l}'`);if(n&&(Fe.isFunction(n)||(n=n.get(r))))break;o[l||"#"+i]=n}if(!n){const i=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?i.length>1?`since :
`+i.map(l4).join(`
`):" "+l4(i[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n}const jA={getAdapter:RL,adapters:C2};function zb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yx(null,t)}function c4(t){return zb(t),t.headers=fs.from(t.headers),t.data=Bb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jA.getAdapter(t.adapter||Xx.adapter,t)(t).then(function(s){return zb(t),s.data=Bb.call(t,t.transformResponse,s),s.headers=fs.from(s.headers),s},function(s){return fA(s)||(zb(t),s&&s.response&&(s.response.data=Bb.call(t,t.transformResponse,s.response),s.response.headers=fs.from(s.response.headers))),Promise.reject(s)})}const NA="1.13.5",cg={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{cg[t]=function(s){return typeof s===t||"a"+(r<1?"n ":" ")+t}});const d4={};cg.transitional=function(r,a,s){function n(o,i){return"[Axios v"+NA+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(r===!1)throw new Tt(n(i," has been removed"+(a?" in "+a:"")),Tt.ERR_DEPRECATED);return a&&!d4[i]&&(d4[i]=!0,console.warn(n(i," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(o,i,l):!0}};cg.spelling=function(r){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${r}`),!0)};function DL(t,r,a){if(typeof t!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const o=s[n],i=r[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new Tt("option "+o+" must be "+c,Tt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Tt("Unknown option "+o,Tt.ERR_BAD_OPTION)}}const Ep={assertOptions:DL,validators:cg},Ws=Ep.validators;let yl=class{constructor(r){this.defaults=r||{},this.interceptors={request:new J_,response:new J_}}async request(r,a){try{return await this._request(r,a)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=$l(this.defaults,a);const{transitional:s,paramsSerializer:n,headers:o}=a;s!==void 0&&Ep.assertOptions(s,{silentJSONParsing:Ws.transitional(Ws.boolean),forcedJSONParsing:Ws.transitional(Ws.boolean),clarifyTimeoutError:Ws.transitional(Ws.boolean),legacyInterceptorReqResOrdering:Ws.transitional(Ws.boolean)},!1),n!=null&&(Fe.isFunction(n)?a.paramsSerializer={serialize:n}:Ep.assertOptions(n,{encode:Ws.function,serialize:Ws.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ep.assertOptions(a,{baseUrl:Ws.spelling("baseURL"),withXsrfToken:Ws.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let i=o&&Fe.merge(o.common,o[a.method]);o&&Fe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),a.headers=fs.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(p){if(typeof p.runWhen=="function"&&p.runWhen(a)===!1)return;c=c&&p.synchronous;const g=a.transitional||_2;g&&g.legacyInterceptorReqResOrdering?l.unshift(p.fulfilled,p.rejected):l.push(p.fulfilled,p.rejected)});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,m=0,x;if(!c){const v=[c4.bind(this),void 0];for(v.unshift(...l),v.push(...d),x=v.length,u=Promise.resolve(a);m<x;)u=u.then(v[m++],v[m++]);return u}x=l.length;let h=a;for(;m<x;){const v=l[m++],p=l[m++];try{h=v(h)}catch(g){p.call(this,g);break}}try{u=c4.call(this,h)}catch(v){return Promise.reject(v)}for(m=0,x=d.length;m<x;)u=u.then(d[m++],d[m++]);return u}getUri(r){r=$l(this.defaults,r);const a=bA(r.baseURL,r.url,r.allowAbsoluteUrls);return pA(a,r.params,r.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(r){yl.prototype[r]=function(a,s){return this.request($l(s||{},{method:r,url:a,data:(s||{}).data}))}});Fe.forEach(["post","put","patch"],function(r){function a(s){return function(o,i,l){return this.request($l(l||{},{method:r,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}yl.prototype[r]=a(),yl.prototype[r+"Form"]=a(!0)});let ML=class wA{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const s=this;this.promise.then(n=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](n);s._listeners=null}),this.promise.then=n=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(n);return i.cancel=function(){s.unsubscribe(o)},i},r(function(o,i,l){s.reason||(s.reason=new Yx(o,i,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=s=>{r.abort(s)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new wA(function(n){r=n}),cancel:r}}};function IL(t){return function(a){return t.apply(null,a)}}function LL(t){return Fe.isObject(t)&&t.isAxiosError===!0}const $y={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($y).forEach(([t,r])=>{$y[r]=t});function _A(t){const r=new yl(t),a=aA(yl.prototype.request,r);return Fe.extend(a,yl.prototype,r,{allOwnKeys:!0}),Fe.extend(a,r,null,{allOwnKeys:!0}),a.create=function(n){return _A($l(t,n))},a}const Vr=_A(Xx);Vr.Axios=yl;Vr.CanceledError=Yx;Vr.CancelToken=ML;Vr.isCancel=fA;Vr.VERSION=NA;Vr.toFormData=lg;Vr.AxiosError=Tt;Vr.Cancel=Vr.CanceledError;Vr.all=function(r){return Promise.all(r)};Vr.spread=IL;Vr.isAxiosError=LL;Vr.mergeConfig=$l;Vr.AxiosHeaders=fs;Vr.formToJSON=t=>hA(Fe.isHTMLForm(t)?new FormData(t):t);Vr.getAdapter=jA.getAdapter;Vr.HttpStatusCode=$y;Vr.default=Vr;const{Axios:S_e,AxiosError:C_e,CanceledError:k_e,isCancel:E_e,CancelToken:A_e,VERSION:P_e,all:T_e,Cancel:O_e,isAxiosError:F_e,spread:$_e,toFormData:R_e,AxiosHeaders:D_e,HttpStatusCode:M_e,formToJSON:I_e,getAdapter:L_e,mergeConfig:B_e}=Vr,BL=!1,zL=!0,SA="/api",qL="production",CA=SA;console.log("");console.log(" [API Config] Configurao do Axios carregada");console.log("");console.log("  Mode:",qL);console.log("  isDevelopment:",BL);console.log("  isProduction:",zL);console.log("  VITE_API_URL (configurado):",SA);console.log("  API_URL (final):",CA);console.log("  Origem:",window.location.origin);console.log("");const U=Vr.create({baseURL:CA,headers:{"Content-Type":"application/json"}});U.interceptors.request.use(t=>{const r=localStorage.getItem("access_token");return console.log(" [API Interceptor]",{url:t.url,baseURL:t.baseURL,fullURL:`${t.baseURL}${t.url}`,hasToken:!!r,tokenPreview:r?`${r.substring(0,20)}...`:"NO TOKEN",headers:t.headers}),r?(t.headers.Authorization=`Bearer ${r}`,console.log(" Token adicionado ao header Authorization")):console.warn(" Nenhum token encontrado no localStorage"),t},t=>(console.error(" [API Interceptor] Erro na requisio:",t),Promise.reject(t)));U.interceptors.response.use(t=>(console.log(" [API Response]",{status:t.status,url:t.config.url,dataPreview:JSON.stringify(t.data).substring(0,100)}),t),t=>{var a,s,n,o,i,l,c,d,u,m;const r=(a=t.response)==null?void 0:a.status;return console.error(" [API Response Error]",{status:r,url:(s=t.config)==null?void 0:s.url,fullURL:`${(n=t.config)==null?void 0:n.baseURL}${(o=t.config)==null?void 0:o.url}`,errorData:(i=t.response)==null?void 0:i.data,headers:(l=t.response)==null?void 0:l.headers,requestHeaders:(c=t.config)==null?void 0:c.headers}),r===401&&(console.warn(" Status 401: Sesso invlida ou tenant no selecionado"),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),window.location.href="/login"),r===403&&(console.warn(" Status 403: Acesso negado para este tenant"),console.log(" Detalhes do erro 403:",{message:((u=(d=t.response)==null?void 0:d.data)==null?void 0:u.detail)||t.message,token:((m=localStorage.getItem("access_token"))==null?void 0:m.substring(0,20))+"..."})),Promise.reject(t)});const kA=j.createContext(),au=()=>{const t=j.useContext(kA);if(!t)throw new Error("useAuth deve ser usado dentro de AuthProvider");return t},VL=({children:t})=>{const[r,a]=j.useState(null),[s,n]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const m=localStorage.getItem("access_token"),x=localStorage.getItem("user");m&&x?(a(JSON.parse(x)),await o()):n(!1)}catch(m){console.error("Erro ao inicializar auth:",m),n(!1)}})()},[]);const o=async()=>{try{const u=await U.get("/auth/me-multitenant");a(u.data),localStorage.setItem("user",JSON.stringify(u.data)),n(!1)}catch(u){console.error("Erro ao buscar usurio:",u),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),localStorage.removeItem("user"),a(null),n(!1)}},d={user:r,loading:s,login:async(u,m)=>{var x,h;try{console.log(" Iniciando login para:",u);const v=await U.post("/auth/login-multitenant",{email:u,password:m}),{access_token:p,tenants:g}=v.data;if(console.log(" Login fase 1 OK - Tenants:",g.length),g&&g.length>0){localStorage.setItem("tempToken",p),console.log(" Selecionando tenant:",g[0].name);const f=(await U.post("/auth/select-tenant",{tenant_id:g[0].id},{headers:{Authorization:`Bearer ${p}`}})).data.access_token;localStorage.setItem("access_token",f),localStorage.setItem("selectedTenant",JSON.stringify(g[0])),console.log(" Tenant selecionado OK");const b=await U.get("/auth/me-multitenant");return a(b.data),localStorage.setItem("user",JSON.stringify(b.data)),console.log(" Login completo! Redirecionando..."),{success:!0}}else return console.error(" Nenhum tenant disponvel"),{success:!1,error:"Nenhuma empresa disponvel para este usurio"}}catch(v){return console.error("Erro no login:",v),{success:!1,error:((h=(x=v.response)==null?void 0:x.data)==null?void 0:h.detail)||"Erro ao fazer login"}}},register:async(u,m,x)=>{var h,v;try{const p=await U.post("/auth/register",{email:u,password:m,nome:x}),{access_token:g}=p.data;localStorage.setItem("access_token",g);const y=await U.get("/auth/me-multitenant");return a(y.data),localStorage.setItem("user",JSON.stringify(y.data)),{success:!0}}catch(p){return console.error("Erro no registro:",p),{success:!1,error:((v=(h=p.response)==null?void 0:h.data)==null?void 0:v.detail)||"Erro ao criar conta"}}},logout:async()=>{try{await U.post("/auth/logout-multitenant")}catch(u){console.error("Erro ao fazer logout:",u)}finally{localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),localStorage.removeItem("user"),localStorage.removeItem("selectedTenant"),localStorage.removeItem("tempToken"),a(null),window.location.href="/login"}},isAuthenticated:!!r};return e.jsx(kA.Provider,{value:d,children:t})},Xt=({children:t,permission:r,requiredPermissions:a})=>{var i,l;const{isAuthenticated:s,loading:n,user:o}=au();if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!s)return e.jsx(Sy,{to:"/login",replace:!0});if(r||a){const c=(o==null?void 0:o.permissions)||[];if(((l=(i=o==null?void 0:o.role)==null?void 0:i.name)==null?void 0:l.toLowerCase())==="admin")return t;if(r&&!c.includes(r))return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Voc no tem permisso para acessar esta pgina."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Permisso necessria: ",r]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar"})]})});if(a&&a.length>0&&!a.every(m=>c.includes(m)))return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Voc no tem permisso para acessar esta pgina."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Permisses necessrias: ",a.join(", ")]}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar"})]})})}return t};var EA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u4=pe.createContext&&pe.createContext(EA),UL=["attr","size","title"];function WL(t,r){if(t==null)return{};var a=HL(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function HL(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},nh.apply(this,arguments)}function m4(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function oh(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?m4(Object(a),!0).forEach(function(s){KL(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m4(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function KL(t,r,a){return r=GL(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function GL(t){var r=XL(t,"string");return typeof r=="symbol"?r:r+""}function XL(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function AA(t){return t&&t.map((r,a)=>pe.createElement(r.tag,oh({key:a},r.attr),AA(r.child)))}function wt(t){return r=>pe.createElement(YL,nh({attr:oh({},t.attr)},r),AA(t.child))}function YL(t){var r=a=>{var{attr:s,size:n,title:o}=t,i=WL(t,UL),l=n||a.size||"1em",c;return a.className&&(c=a.className),t.className&&(c=(c?c+" ":"")+t.className),pe.createElement("svg",nh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,i,{className:c,style:oh(oh({color:t.color||a.color},a.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&pe.createElement("title",null,o),t.children)};return u4!==void 0?pe.createElement(u4.Consumer,null,a=>r(a)):r(EA)}function x4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function pr(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function PA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},child:[]},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(t)}function gd(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function ih(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(t)}function TA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function lh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function OA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function QL(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function JL(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(t)}function Cn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function Pi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Vm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function ec(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function FA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function Rl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function $A(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function ZL(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(t)}function Dl(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function e9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(t)}function ch(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(t)}function rs(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function Ti(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Ry(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function dh(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function t9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function k2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function E2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function r9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Ml(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function a9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function p4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(t)}function Dy(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function s9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function A2(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function n9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function h4(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function xi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Qx(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function RA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(t)}function gs(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Um(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Il(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function DA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function o9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function lm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function MA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(t)}function bd(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function i9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function l9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"},child:[]}]})(t)}function Oo(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function dg(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(t)}function tc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function Qc(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(t)}function c9(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function Xn(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function IA(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function My(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Oi(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function cm(t){return wt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),gt=(t,r)=>{const a=j.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>j.createElement("svg",{ref:u,...d9,width:n,height:n,stroke:s,strokeWidth:i?Number(o)*24/Number(n):o,className:["lucide",`lucide-${u9(t)}`,l].join(" "),...d},[...r.map(([m,x])=>j.createElement(m,x)),...Array.isArray(c)?c:[c]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=gt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=gt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=gt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=gt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=gt("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=gt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=gt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=gt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=gt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=gt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=gt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=gt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=gt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=gt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=gt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=gt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=gt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=gt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=gt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=gt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=gt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=gt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=gt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=gt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=gt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=gt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=gt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=gt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=gt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=gt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=gt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=gt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=gt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=gt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=gt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=gt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=gt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=gt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=gt("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=gt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=gt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=gt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=gt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=gt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=gt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=gt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=gt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=gt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=gt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=gt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=gt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=gt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=gt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=gt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=gt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=gt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=gt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=gt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=gt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=gt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=gt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=gt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=gt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=gt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=gt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=gt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=gt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function C9({onClick:t}){const[r,a]=j.useState(!1),[s,n]=j.useState(!1),[o,i]=j.useState({x:0,y:0}),[l,c]=j.useState({x:0,y:0}),d=(b,N)=>{const _=window.innerWidth-(N?60:200),w=window.innerHeight-(N?60:300);return{x:Math.max(20,Math.min(b.x,_)),y:Math.max(20,Math.min(b.y,w))}},[u,m]=j.useState(()=>{const b=localStorage.getItem("calc_button_pos"),N={x:window.innerWidth-150,y:window.innerHeight-150};if(b)try{const _=JSON.parse(b);return d(_,!0)}catch{return N}return N}),[x,h]=j.useState(()=>localStorage.getItem("calc_button_minimizado")==="true"),v=b=>{if(b.target.closest('button[title="Expandir"], button[title="Minimizar"]')){b.stopPropagation();return}a(!0),n(!1),c({x:b.clientX,y:b.clientY}),i({x:b.clientX-u.x,y:b.clientY-u.y})},p=b=>{if(r){Math.sqrt(Math.pow(b.clientX-l.x,2)+Math.pow(b.clientY-l.y,2))>5&&n(!0);const _=b.clientX-o.x,w=b.clientY-o.y,S=window.innerWidth-(x?60:200),C=window.innerHeight-(x?60:300),E={x:Math.max(20,Math.min(_,S)),y:Math.max(20,Math.min(w,C))};m(E)}},g=()=>{r&&(a(!1),localStorage.setItem("calc_button_pos",JSON.stringify(u)))};j.useEffect(()=>{if(r)return document.addEventListener("mousemove",p),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)}},[r,o,u]);const y=b=>{console.log(" Clique detectado, hasDragged:",s),s?console.log(" Ignorando clique (foi arraste)"):(console.log(" Abrindo calculadora..."),t())},f=b=>{b.stopPropagation();const N=!x;if(!N){const _=d(u,!1);(_.x!==u.x||_.y!==u.y)&&(m(_),localStorage.setItem("calc_button_pos",JSON.stringify(_)))}h(N),localStorage.setItem("calc_button_minimizado",N.toString())};return j.useEffect(()=>{const b=()=>{const N=d(u,x);(N.x!==u.x||N.y!==u.y)&&(m(N),localStorage.setItem("calc_button_pos",JSON.stringify(N)))};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[u,x]),e.jsx("div",{className:"fixed z-50",style:{left:`${u.x}px`,top:`${u.y}px`},children:x?e.jsxs("div",{className:"relative group cursor-move",onMouseDown:v,children:[e.jsx("button",{onClick:y,onMouseDown:b=>b.stopPropagation(),className:`calc-button-main\r
              flex items-center justify-center\r
              w-12 h-12\r
              bg-gradient-to-br from-orange-500 to-orange-600\r
              hover:from-orange-600 hover:to-orange-700\r
              text-white\r
              rounded-full\r
              shadow-lg hover:shadow-xl\r
              transition-all duration-200\r
              hover:scale-110\r
              active:scale-95\r
              pointer-events-auto\r
            `,title:"Calculadora de Rao",children:e.jsx(jl,{size:20})}),e.jsx("button",{onClick:f,onMouseDown:b=>b.stopPropagation(),className:`\r
              absolute -bottom-1 -right-1\r
              bg-blue-600 hover:bg-blue-700\r
              text-white\r
              w-6 h-6\r
              rounded-full\r
              flex items-center justify-center\r
              opacity-0 group-hover:opacity-100\r
              transition-opacity\r
              shadow-md\r
            `,title:"Expandir",children:e.jsx(y9,{size:12})})]}):e.jsxs("div",{className:`\r
            flex flex-col gap-2\r
            bg-white\r
            rounded-2xl\r
            shadow-2xl\r
            p-3\r
            border-2 border-orange-500\r
            min-w-[140px]\r
          `,style:{cursor:r?"grabbing":"default"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 drag-handle cursor-move",onMouseDown:v,children:[e.jsxs("div",{className:"flex items-center gap-2 pointer-events-none",children:[e.jsx("div",{className:`\r
                w-10 h-10\r
                bg-gradient-to-br from-orange-500 to-orange-600\r
                rounded-full\r
                flex items-center justify-center\r
                text-white\r
              `,children:e.jsx(jl,{size:20})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Calculadora"})]}),e.jsx("button",{onClick:f,className:`\r
                p-1 hover:bg-gray-100 \r
                rounded-lg transition-colors\r
                pointer-events-auto\r
              `,title:"Minimizar",children:e.jsx(j9,{size:16,className:"text-gray-500"})})]}),e.jsx("button",{onClick:y,className:`calc-button-main\r
              w-full\r
              px-4 py-2\r
              bg-gradient-to-r from-orange-500 to-orange-600\r
              hover:from-orange-600 hover:to-orange-700\r
              text-white\r
              rounded-lg\r
              font-medium text-sm\r
              transition-all\r
              hover:shadow-lg\r
            `,children:" Calcular Rao"}),e.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:"Arraste para mover"})]})})}function XA(t){var n,o;if(!t)return!1;if(t.peso_embalagem&&t.peso_embalagem>0)return!0;const r=((n=t.classificacao_racao)==null?void 0:n.toLowerCase())||"",a=t.categoria_id||t.category_id,s=((o=t.categoria_nome)==null?void 0:o.toLowerCase())||"";return r&&r!=="no  rao"||s.includes("rao")||s.includes("racao")||a===5}function k9({isOpen:t=!1,onClose:r=()=>{},itensCarrinho:a=[],clienteId:s=null}){var I,k,M,z,oe;const o=zo().pathname==="/pdv",[i,l]=j.useState(null),[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState(!1),[v,p]=j.useState(null),[g,y]=j.useState(null),[f,b]=j.useState(!1),[N,_]=j.useState(""),[w,S]=j.useState([]),[C,E]=j.useState(!1),[T,q]=j.useState({peso_pet_kg:"",idade_meses:"",nivel_atividade:"normal"}),[A,O]=j.useState(!1),[V,G]=j.useState({x:0,y:0}),[L,Z]=j.useState({x:0,y:0}),D=o?(()=>{try{const W=sessionStorage.getItem("pdv_calculadora_data");if(console.log(" Calculadora Universal - Dados do PDV:",W),W){const{itens:ae}=JSON.parse(W),ee=(ae||[]).filter(ce=>XA(ce));return console.log(" Raes encontradas:",ee),ee}}catch(W){console.error("Erro ao ler dados do PDV:",W)}return[]})():[];j.useEffect(()=>{if(!o&&N.length>=2){const W=setTimeout(async()=>{E(!0);try{const ae=await U.get("/produtos/",{params:{busca:N}}),ce=(ae.data.items||ae.data.produtos||[]).filter(ie=>ie.peso_embalagem&&ie.peso_embalagem>0);S(ce)}catch(ae){console.error("Erro ao buscar raes:",ae)}finally{E(!1)}},300);return()=>clearTimeout(W)}else S([])},[N,o]),j.useEffect(()=>{t||G({x:0,y:0})},[t]),j.useEffect(()=>{if(t&&o&&D.length>0){const W=D[D.length-1];l(W.produto_id),d(W),W.pet_id&&K(W.pet_id)}},[t,D.length,o]);const K=async W=>{try{const ee=(await U.get(`/pets/${W}`)).data;m(ee),q({...T,peso_pet_kg:ee.peso_kg||ee.peso||"",idade_meses:ee.idade_meses||ee.idade_aproximada||""})}catch(ae){console.error("Erro ao buscar pet:",ae)}},R=async()=>{if(console.log(" Iniciando clculo..."),console.log(" Rao selecionada:",c),console.log(" Formulrio:",T),!c){console.log(" Nenhuma rao selecionada"),Ue.error("Selecione uma rao");return}if(!T.peso_pet_kg){console.log(" Peso do pet no informado"),Ue.error("Informe o peso do pet");return}try{h(!0),y(null),p(null);const ae={produto_id:c.produto_id||c.id,peso_pet_kg:parseFloat(T.peso_pet_kg),idade_meses:T.idade_meses?parseInt(T.idade_meses):null,nivel_atividade:T.nivel_atividade};console.log(" Enviando payload:",ae);const ee=await U.post("/produtos/calculadora-racao",ae);if(console.log(" Resposta recebida:",ee.data),ee.data){const ce={duracao_pacote_dias:ee.data.duracao_dias,duracao_meses:ee.data.duracao_meses,consumo_diario_gramas:ee.data.quantidade_diaria_g,custo_por_kg:ee.data.custo_por_kg,custo_diario:ee.data.custo_por_dia,custo_mensal:ee.data.custo_mensal};p(ce),Ue.success("Clculo realizado!")}}catch(ae){console.error(" Erro ao calcular:",ae),Ue.error("Erro ao calcular. Tente novamente.")}finally{h(!1)}},B=W=>{l(W.id),d(W),_(`${W.nome} - ${W.peso_embalagem}kg`),b(!1)},F=W=>{W.target.closest("button")||W.target.closest("input")||W.target.closest("select")||(O(!0),Z({x:W.clientX-V.x,y:W.clientY-V.y}))};return j.useEffect(()=>{const W=ee=>{A&&G({x:ee.clientX-L.x,y:ee.clientY-L.y})},ae=()=>{O(!1)};if(A)return window.addEventListener("mousemove",W),window.addEventListener("mouseup",ae),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",ae)}},[A,L]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",style:{transform:`translate(${V.x}px, ${V.y}px)`,cursor:A?"grabbing":"default"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-4 flex items-center justify-between",onMouseDown:F,style:{cursor:A?"grabbing":"grab"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Calculadora de Rao"}),e.jsx("p",{className:"text-sm text-orange-100",children:o?"Raes do carrinho":"Buscar rao manualmente"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-orange-400 rounded-lg transition-colors",children:e.jsx(qt,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:[o?"Rao do Carrinho":"Buscar Rao"," *"]}),o?D.length>0?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:(c==null?void 0:c.produto_nome)||"",readOnly:!0,className:"w-full px-4 py-3 pr-10 bg-gray-50 border-2 border-gray-300 rounded-lg text-gray-700 font-medium cursor-pointer",placeholder:"Nenhuma rao no carrinho"}),e.jsx("button",{type:"button",onClick:()=>b(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(Ll,{size:20,className:`transition-transform ${f?"rotate-180":""}`})}),f&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-gray-300 rounded-lg shadow-xl z-10 max-h-48 overflow-y-auto",children:D.map((W,ae)=>e.jsxs("button",{type:"button",onClick:()=>{l(W.produto_id),d(W),b(!1),W.pet_id&&K(W.pet_id)},className:`w-full px-4 py-3 text-left hover:bg-orange-50 transition-colors ${W.produto_id===i?"bg-orange-100 border-l-4 border-l-orange-600":""}`,children:[e.jsx("div",{className:"font-medium",children:W.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[W.peso_embalagem,"kg  R$ ",W.preco_unitario.toFixed(2),W.pet_id&&"   Pet vinculado"]})]},ae))})]}):e.jsx("div",{className:"px-4 py-3 bg-yellow-50 border-2 border-yellow-300 rounded-lg text-yellow-700",children:"Adicione raes ao carrinho para calcular"}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:N,onChange:W=>_(W.target.value),onFocus:()=>w.length>0&&b(!0),placeholder:"Digite para buscar rao...",className:"w-full px-4 py-3 pr-20 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200"}),C?e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Iy,{size:20,className:"animate-spin text-orange-500"})}):w.length>0&&e.jsx("button",{type:"button",onClick:()=>b(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:e.jsx(Ll,{size:20,className:`transition-transform ${f?"rotate-180":""}`})})]}),f&&w.length>0&&e.jsx("div",{className:"bg-white border-2 border-gray-300 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:w.map(W=>{var ae;return e.jsxs("button",{type:"button",onClick:()=>B(W),className:`w-full px-4 py-3 text-left hover:bg-orange-50 transition-colors border-b last:border-b-0 ${W.id===i?"bg-orange-100 border-l-4 border-l-orange-600":""}`,children:[e.jsx("div",{className:"font-medium",children:W.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[W.peso_embalagem,"kg  R$ ",(ae=W.preco_venda)==null?void 0:ae.toFixed(2),W.classificacao_racao&&`  ${W.classificacao_racao}`]})]},W.id)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Peso do Pet (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:T.peso_pet_kg,onChange:W=>q({...T,peso_pet_kg:W.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Ex: 8.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Idade (meses)"}),e.jsx("input",{type:"number",value:T.idade_meses,onChange:W=>q({...T,idade_meses:W.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"Ex: 24"})]})]}),o&&u&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:u.nome})]}),e.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Dados carregados automaticamente do cadastro"})]}),v&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-800 flex items-center gap-2",children:[e.jsx("span",{children:""})," Resultados do Clculo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Durao"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Math.floor(v.duracao_pacote_dias)," dias"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(I=v.duracao_meses)==null?void 0:I.toFixed(1)," meses"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Consumo dirio"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(k=v.consumo_diario_gramas)==null?void 0:k.toFixed(0),"g"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo/kg"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(M=v.custo_por_kg)==null?void 0:M.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo/dia"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(z=v.custo_diario)==null?void 0:z.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:" Custo mensal"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",(oe=v.custo_mensal)==null?void 0:oe.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Fechar"}),e.jsx("button",{onClick:R,disabled:x,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Iy,{size:20,className:"animate-spin"}),"Calculando..."]}):e.jsx(e.Fragment,{children:" Calcular Consumo"})})]})]})}):null}const E9=()=>{var p,g,y,f;const t=zo(),{user:r,logout:a}=au(),s=b=>{var _,w;return r?((_=r.role)==null?void 0:_.name)==="admin"||((w=r.role)==null?void 0:w.name)==="Admin"?!0:!r.permissions||!Array.isArray(r.permissions)?!1:r.permissions.includes(b):!1},[n,o]=j.useState(()=>{const b=localStorage.getItem("sidebar_open");return b!==null?JSON.parse(b):t.pathname!=="/pdv"}),[i,l]=j.useState({}),[c,d]=j.useState(()=>{const b=localStorage.getItem("sidebar_visible");return b!==null?JSON.parse(b):!0}),[u,m]=j.useState(!1);j.useEffect(()=>{localStorage.setItem("sidebar_open",JSON.stringify(n))},[n]),j.useEffect(()=>{localStorage.setItem("sidebar_visible",JSON.stringify(c))},[c]);const h=[{path:"/dashboard",icon:r9,label:"Dashboard",permission:"relatorios.gerencial"},{path:"/dashboard-gerencial",icon:lh,label:" Dashboard Gerencial",highlight:!0,permission:"relatorios.gerencial"},{path:"/clientes",icon:IA,label:"Pessoas",permission:"clientes.visualizar"},{path:"/pets",icon:Zr,label:" Pets",highlight:!0,permission:"clientes.visualizar"},{path:"/produtos",icon:Qx,label:"Produtos",permission:"produtos.visualizar",submenu:[{path:"/produtos",label:"Listar Produtos",permission:"produtos.visualizar"},{path:"/produtos/relatorio",label:"Relatrio de Movimentaes",permission:"produtos.visualizar"},{path:"/estoque/alertas",label:"Alertas de Estoque",permission:"produtos.visualizar"}]},{path:"/lembretes",icon:OA,label:"Lembretes",badge:!0,permission:null},{path:"/calculadora-racao",icon:i9,label:"Calculadora de Rao",permission:null},{path:"/pdv",icon:bd,label:"PDV (Vendas)",permission:"vendas.criar"},{path:"/notas-fiscais",icon:t9,label:"Notas Fiscais",permission:"vendas.visualizar"},{path:"/compras",icon:QL,label:"Compras",permission:"compras.gerenciar",submenu:[{path:"/compras/pedidos",label:"Pedidos de Compra",permission:"compras.pedidos"},{path:"/compras/entrada-xml",label:"Entrada por XML",permission:"compras.entrada_xml"},{path:"/compras/bling",label:"Sinc. Bling",permission:"compras.sincronizacao_bling"}]},{path:"/financeiro",icon:tc,label:"Financeiro/Contbil",permission:"relatorios.financeiro",submenu:[{path:"/financeiro",label:"Dashboard",permission:"financeiro.dashboard"},{path:"/financeiro/vendas",label:"Vendas",permission:"financeiro.vendas"},{path:"/financeiro/fluxo-caixa",label:"Fluxo de Caixa",permission:"financeiro.fluxo_caixa"},{path:"/financeiro/dre",label:"DRE",permission:"financeiro.dre"},{path:"/financeiro/contas-pagar",label:"Contas a Pagar",permission:"financeiro.contas_pagar"},{path:"/financeiro/contas-receber",label:"Contas a Receber",permission:"financeiro.contas_receber"},{path:"/financeiro/conciliacao-bancaria",label:"Conciliao Bancria",permission:"financeiro.conciliacao_bancaria"},{path:"/financeiro/conciliacao-3abas",label:"Conciliao 3 Abas",highlight:!0,permission:"financeiro.conciliacao_cartao"}]},{path:"/comissoes",icon:rs,label:"Comisses",permission:"relatorios.financeiro",submenu:[{path:"/comissoes",label:"Configurao",permission:"comissoes.configurar"},{path:"/comissoes/demonstrativo",label:"Demonstrativo",permission:"comissoes.demonstrativo"},{path:"/comissoes/abertas",label:"Comisses em Aberto",permission:"comissoes.abertas"},{path:"/comissoes/fechamentos",label:"Histrico de Fechamentos",permission:"comissoes.fechamentos"},{path:"/comissoes/relatorios",label:" Relatrios Analticos",permission:"comissoes.relatorios"}]},{path:"/entregas",icon:Qc,label:"Entregas",permission:"vendas.visualizar",submenu:[{path:"/entregas/abertas",label:"Entregas em Aberto",permission:"entregas.abertas"},{path:"/entregas/rotas",label:"Rotas de Entrega",permission:"entregas.rotas"},{path:"/entregas/historico",label:" Histrico",permission:"entregas.historico"},{path:"/entregas/financeiro",label:" Dashboard Financeiro",permission:"entregas.dashboard"}]},{path:"/cadastros",icon:lm,label:"Cadastros",permission:"configuracoes.editar",submenu:[{path:"/cadastros/cargos",label:"Cargos",permission:"cadastros.cargos"},{path:"/cadastros/categorias",label:"Categorias de Produtos",permission:"cadastros.categorias_produtos"},{path:"/cadastros/categorias-financeiras",label:"Categorias Financeiras",permission:"cadastros.categorias_financeiras"},{path:"/cadastros/especies-racas",label:"Espcies e Raas",permission:"cadastros.especies_racas"},{path:"/cadastros/opcoes-racao",label:"Opes de Rao",permission:"produtos.editar"},{path:"/cadastros/financeiro/bancos",label:"Bancos",permission:"cadastros.bancos"},{path:"/cadastros/financeiro/formas-pagamento",label:"Formas de Pagamento",permission:"cadastros.formas_pagamento"},{path:"/cadastros/financeiro/operadoras",label:"Operadoras de Carto",permission:"cadastros.operadoras"}]},{path:"/rh",icon:JL,label:"Recursos Humanos",permission:"usuarios.manage",submenu:[{path:"/rh/funcionarios",label:"Funcionrios",permission:"rh.funcionarios"}]},{path:"/ia",icon:e9,label:"Inteligncia Artificial",permission:null,submenu:[{path:"/ia/chat",label:"Chat IA",permission:null},{path:"/ia/fluxo-caixa",label:"Fluxo de Caixa Preditivo",permission:"ia.fluxo_caixa"},{path:"/ia/whatsapp",label:"Bot WhatsApp",permission:"ia.whatsapp"},{path:"/ia/alertas-racao",label:" Alertas Raes",permission:"produtos.editar"}]},{path:"/admin",icon:MA,label:"Administrao",permission:"usuarios.manage",submenu:[{path:"/admin/usuarios",label:"Usurios",permission:"usuarios.manage"},{path:"/admin/roles",label:"Roles & Permisses",permission:"usuarios.manage"}]},{path:"/configuracoes",icon:lm,label:"Configuraes",permission:"configuracoes.editar",submenu:[{path:"/configuracoes/fiscal",label:"Configurao da Empresa",permission:"configuracoes.empresa"},{path:"/configuracoes/entregas",label:"Entregas",permission:"configuracoes.entregas"},{path:"/configuracoes/custos-moto",label:"Custos da Moto",permission:"configuracoes.custos_moto"},{path:"/configuracoes/estoque",label:"Estoque"},{path:"/configuracoes/simples/fechamento",label:"Fechamento Mensal",permission:"configuracoes.fechamento_mensal"}]}].filter(b=>{if(!b.permission){if(b.submenu){const N=b.submenu.filter(_=>_.permission?s(_.permission):!0);if(N.length===0)return!1;b.submenu=N}return!0}return s(b.permission)}),v=b=>t.pathname===b;return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c&&e.jsxs("aside",{className:`${n?"w-64":"w-20"} bg-gradient-to-b from-indigo-50 to-purple-50 border-r border-indigo-100 transition-all duration-300 flex flex-col shadow-lg`,children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-indigo-100 bg-white/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(!n),className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 hover:from-indigo-500 hover:to-purple-600 flex items-center justify-center shadow-md transition-all cursor-pointer",title:n?"Recolher menu":"Expandir menu",children:n?e.jsx(h4,{className:"text-white w-6 h-6"}):e.jsx(h4,{className:"text-white w-6 h-6"})}),n&&e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-gray-800",children:"Pet Shop Pro"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Central de Gesto"})]})]}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-indigo-100 rounded-lg transition-colors",title:"Esconder menu completamente",children:e.jsx(Zr,{className:"w-5 h-5 text-indigo-600"})})]}),e.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:h.map(b=>e.jsx("div",{children:b.submenu?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>l(N=>({...N,[b.path]:!N[b.path]})),className:`w-full flex items-center justify-between gap-3 px-4 py-3 mx-2 rounded-lg transition-all ${t.pathname.startsWith(b.path)?"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-white/60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b.icon,{className:"text-lg flex-shrink-0"}),n&&e.jsx("span",{className:"font-medium text-sm",children:b.label})]}),n&&(i[b.path]?e.jsx(ec,{className:"text-sm text-gray-400"}):e.jsx(Rl,{className:"text-sm text-gray-400"}))]}),i[b.path]&&n&&e.jsx("div",{className:"mt-1 mb-2 space-y-1",children:b.submenu.map(N=>e.jsx(hd,{to:N.path,className:`flex items-center gap-3 px-4 py-2 mx-2 ml-12 rounded-lg transition-all text-sm ${v(N.path)?"bg-white text-indigo-600 shadow-sm font-medium":"text-gray-600 hover:bg-white/50"}`,children:e.jsx("span",{children:N.label})},N.path))})]}):e.jsxs(hd,{to:b.path,className:`flex items-center gap-3 px-4 py-3 mx-2 my-1 rounded-lg transition-all ${v(b.path)?"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 shadow-sm":"text-gray-700 hover:bg-white/60"}`,title:n?"":b.label,children:[e.jsx(b.icon,{className:"text-lg flex-shrink-0"}),n&&e.jsxs("div",{className:"flex items-center justify-between flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:b.label}),b.badge&&e.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]})]})},b.path))}),e.jsx("div",{className:"border-t border-indigo-100 bg-white/30",children:e.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-3 mx-2 my-2 rounded-lg text-gray-700 hover:bg-red-50 hover:text-red-600 transition-all text-left",title:n?"":"Sair",children:[e.jsx(s9,{className:"text-lg"}),n&&e.jsx("span",{className:"font-medium text-sm",children:"Sair"})]})})]}),!c&&e.jsx("button",{onClick:()=>d(!0),className:"fixed left-0 top-4 z-50 p-3 bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white rounded-r-xl shadow-lg transition-all",title:"Mostrar menu",children:e.jsx(Zr,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-end",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(r==null?void 0:r.nome)||(r==null?void 0:r.email)}),e.jsx("p",{className:"text-xs text-gray-500",children:r==null?void 0:r.email})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold",children:((g=(p=r==null?void 0:r.nome)==null?void 0:p[0])==null?void 0:g.toUpperCase())||((f=(y=r==null?void 0:r.email)==null?void 0:y[0])==null?void 0:f.toUpperCase())})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(cM,{})})]}),e.jsx(C9,{onClick:()=>{console.log(" Layout: Abrindo calculadora..."),m(!0)}}),u&&e.jsx(k9,{isOpen:u,onClose:()=>{console.log(" Layout: Fechando calculadora..."),m(!1)}})]})},A9=()=>{const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(!1),[c,d]=j.useState(!1),{login:u}=au(),m=Ht(),x=async h=>{var v,p;h.preventDefault(),o(""),d(!0);try{const g=await u(t,a);if(g.success){const y=localStorage.getItem("user");if(y){const f=JSON.parse(y),b=(p=(v=f.role)==null?void 0:v.name)==null?void 0:p.toLowerCase();console.log(" Role do usurio:",b),console.log(" Permisses:",f.permissions),b==="caixa"?(console.log(" Usurio caixa - Navegando para /pdv"),m("/pdv")):b==="admin"||b==="gerente"?(console.log(" Usurio gerencial - Navegando para /dashboard"),m("/dashboard")):(console.log(" Redirecionando para /lembretes"),m("/lembretes"))}else m("/lembretes")}else console.error(" Login falhou:",g.error),o(g.error||"Erro desconhecido ao fazer login")}catch(g){console.error(" Erro inesperado:",g),o("Erro inesperado ao fazer login")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(Zr,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pet Shop Pro"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Gesto Completo"})]}),n&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(pr,{className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:n})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(A2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:t,onChange:h=>r(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:i?"text":"password",value:a,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),"              ",e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:i?e.jsx(Ry,{}):e.jsx(dh,{})}),"            "]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Entrando...":"Entrar"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["No tem uma conta?"," ",e.jsx(hd,{to:"/register",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Criar conta"})]})})]})})},P9=()=>{const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState(!1),[v,p]=j.useState(!1),{register:g}=au(),y=Ht(),f=async b=>{if(b.preventDefault(),d(""),n!==i){d("As senhas no coincidem");return}if(n.length<6){d("A senha deve ter no mnimo 6 caracteres");return}p(!0);const N=await g(a,n,t);N.success?y("/dashboard"):d(N.error),p(!1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-purple-700 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(Zr,{className:"w-8 h-8 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Criar Conta"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comece a usar o Pet Shop Pro"})]}),c&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(pr,{className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:c})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:b=>r(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"Seu nome",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(A2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:a,onChange:b=>s(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:u?"text":"password",value:n,onChange:b=>o(b.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:u?e.jsx(Ry,{}):e.jsx(dh,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:x?"text":"password",value:i,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:x?e.jsx(Ry,{}):e.jsx(dh,{})})]})]}),e.jsx("button",{type:"submit",disabled:v,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Criando conta...":"Criar Conta"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["J tem uma conta?"," ",e.jsx(hd,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"Fazer login"})]})})]})})};function T9({isOpen:t,onClose:r,onSuccess:a}){var g,y;const[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState("upload"),m=f=>{const b=f.target.files[0];b&&(b.name.endsWith(".xlsx")||b.name.endsWith(".xls")?(n(b),c(null)):(Ue.error("Arquivo deve ser Excel (.xlsx ou .xls)"),f.target.value=""))},x=async()=>{try{const f=localStorage.getItem("token"),b=await U.get("/pessoas/template-importacao",{headers:{Authorization:`Bearer ${f}`},responseType:"blob"}),N=window.URL.createObjectURL(new Blob([b.data])),_=document.createElement("a");_.href=N,_.setAttribute("download",`template_pessoas_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(_),_.click(),_.remove(),window.URL.revokeObjectURL(N),Ue.success("Template baixado com sucesso!")}catch(f){console.error("Erro ao baixar template:",f),Ue.error("Erro ao baixar template")}},h=async()=>{var f,b,N,_;if(!s){Ue.error("Selecione um arquivo para importar");return}i(!0),u("processando");try{const w=new FormData;w.append("file",s);const S=await U.post("/pessoas/importar",w);c(S.data),u("resultado");const C=(((f=S.data.criados)==null?void 0:f.length)||0)+(((b=S.data.atualizados)==null?void 0:b.length)||0);C>0&&(Ue.success(`${C} pessoas processadas com sucesso!`),a&&a()),S.data.total_erros>0&&Ue.error(`${S.data.total_erros} pessoas com erro`)}catch(w){console.error("Erro ao importar:",w),Ue.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao importar pessoas"),u("upload")}finally{i(!1)}},v=()=>{n(null),c(null),u("upload")},p=()=>{v(),r()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-purple-600 to-purple-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Importao de Pessoas em Lote"})]}),e.jsx("button",{onClick:p,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Como funciona"]}),e.jsxs("ul",{className:"text-sm text-purple-800 space-y-1 ml-7",children:[e.jsx("li",{children:"1. Baixe o template Excel clicando no boto abaixo"}),e.jsx("li",{children:"2. Preencha os dados das pessoas (clientes, fornecedores, veterinrios)"}),e.jsx("li",{children:"3. Salve o arquivo e faa o upload aqui"}),e.jsx("li",{children:"4. Pessoas novas sero criadas, existentes sero atualizadas (baseado no CPF/CNPJ)"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Baixar Template Excel"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a Planilha Preenchida"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-12 h-12 mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Clique para selecionar"})," ou arraste o arquivo"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Apenas arquivos Excel (.xlsx, .xls)"}),s&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-purple-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:s.name})]})]}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls",onChange:m})]})})]})]}),d==="processando"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Processando planilha..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Isso pode levar alguns segundos"})]}),d==="resultado"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.total_processados||0}),e.jsx("div",{className:"text-sm text-blue-800 mt-1",children:"Total Processado"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:((g=l.criados)==null?void 0:g.length)||0}),e.jsx("div",{className:"text-sm text-green-800 mt-1",children:"Criados"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:((y=l.atualizados)==null?void 0:y.length)||0}),e.jsx("div",{className:"text-sm text-yellow-800 mt-1",children:"Atualizados"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.total_erros||0}),e.jsx("div",{className:"text-sm text-red-800 mt-1",children:"Erros"})]})]}),l.criados&&l.criados.length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Pessoas Criadas (",l.criados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.criados.map((f,b)=>e.jsxs("li",{className:"text-green-800",children:["Linha ",f.linha,": ",e.jsx("span",{className:"font-medium",children:f.nome})," (",f.tipo,")"]},b))})})]}),l.atualizados&&l.atualizados.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Pessoas Atualizadas (",l.atualizados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.atualizados.map((f,b)=>e.jsxs("li",{className:"text-yellow-800",children:["Linha ",f.linha,": ",e.jsx("span",{className:"font-medium",children:f.nome})," (",f.tipo,")"]},b))})})]}),l.erros&&l.erros.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Erros (",l.erros.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-2",children:l.erros.map((f,b)=>e.jsxs("li",{className:"text-red-800",children:[e.jsxs("strong",{children:["Linha ",f.linha]})," (",f.nome||"?","): ",f.erro]},b))})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:h,disabled:!s||o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Pessoas"]})})]}),d==="resultado"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:v,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Importar Novamente"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Concluir"})]})]})]})}):null}var YA={exports:{}},O9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",F9=O9,$9=F9;function QA(){}function JA(){}JA.resetWarningCache=QA;var R9=function(){function t(s,n,o,i,l,c){if(c!==$9){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function r(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:JA,resetWarningCache:QA};return a.PropTypes=a,a};YA.exports=R9();var D9=YA.exports;const Wt=dr(D9),M9={venda:bd,conta_receber:rs,pet_cadastro:Zr,pet_atualizacao:Zr,pedido_compra:Qx,conta_pagar:rs,recebimento:Qc,vacina:Cn,consulta:Cn,whatsapp:xi},y4={green:"bg-green-100 text-green-700 border-green-300",yellow:"bg-yellow-100 text-yellow-700 border-yellow-300",red:"bg-red-100 text-red-700 border-red-300",blue:"bg-blue-100 text-blue-700 border-blue-300",purple:"bg-purple-100 text-purple-700 border-purple-300",gray:"bg-gray-100 text-gray-700 border-gray-300"},O2=({clienteId:t,fornecedorId:r,tipo:a="cliente",limit:s=5,showHeader:n=!0,onVerMais:o})=>{const[i,l]=j.useState([]),[c,d]=j.useState(!0),[u,m]=j.useState(""),x=a==="fornecedor"?r:t,h=a==="fornecedor"?`/clientes/fornecedor/${x}/timeline`:`/clientes/${x}/timeline`;j.useEffect(()=>{x&&v()},[x,s,a]);const v=async()=>{var y,f,b;try{d(!0),m("");const N=await U.get(`${h}?limit=${s}`);l(N.data)}catch(N){((y=N.response)==null?void 0:y.status)===500||((f=N.response)==null?void 0:f.status)===404?(console.warn("Timeline no disponvel:",(b=N.response)==null?void 0:b.status),l([]),m("")):(console.error("Erro ao carregar timeline:",N),m("Erro ao carregar timeline"))}finally{d(!1)}},p=y=>{const f=new Date(y),b=new Date,N=new Date(b);return N.setDate(N.getDate()-1),f.toDateString()===b.toDateString()?`Hoje s ${f.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}`:f.toDateString()===N.toDateString()?`Ontem s ${f.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}`:f.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},g=y=>{console.log("Evento clicado:",y)};return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Carregando timeline..."})]})}):u?e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(pr,{}),u]}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cn,{className:"mx-auto text-gray-300 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum evento registrado"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Eventos do cliente aparecero aqui conforme forem acontecendo"})]}):e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Cn,{className:"text-blue-600"}),"Linha do Tempo"]}),o&&e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Ver completa "})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[19px] top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-6",children:i.map((y,f)=>{const b=M9[y.tipo_evento]||Cn,N=y4[y.cor_badge]||y4.gray;return e.jsxs("div",{className:"relative pl-12 group",children:[e.jsx("div",{className:"absolute left-0 top-0 w-10 h-10 rounded-full bg-white border-2 border-gray-200 flex items-center justify-center group-hover:border-blue-400 transition-colors",children:e.jsx(b,{className:"text-gray-600 group-hover:text-blue-600 transition-colors",size:18})}),e.jsxs("div",{onClick:()=>g(y),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:y.titulo}),e.jsx("p",{className:"text-sm text-gray-600",children:y.descricao})]}),e.jsx("span",{className:`ml-3 px-2 py-1 text-xs font-medium rounded border ${N} whitespace-nowrap`,children:y.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Dl,{size:12}),p(y.data_evento)]}),y.pet_id&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(Zr,{size:12}),"Pet relacionado"]})]})]})]},`${y.tipo_evento}-${y.evento_id}-${f}`)})})]}),i.length>=s&&o&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium underline",children:"Ver todos os eventos "})})]})};O2.propTypes={clienteId:Wt.number,fornecedorId:Wt.number,tipo:Wt.oneOf(["cliente","fornecedor"]),limit:Wt.number,showHeader:Wt.bool,onVerMais:Wt.func};const Nd={VIP:{color:"purple",bgClass:"bg-purple-100",textClass:"text-purple-800",borderClass:"border-purple-300",icon:TA,descricao:"Cliente de alto valor",emoji:""},Recorrente:{color:"blue",bgClass:"bg-blue-100",textClass:"text-blue-800",borderClass:"border-blue-300",icon:tc,descricao:"Compra com frequncia",emoji:""},Novo:{color:"green",bgClass:"bg-green-100",textClass:"text-green-800",borderClass:"border-green-300",icon:Xn,descricao:"Cliente recente",emoji:""},Inativo:{color:"gray",bgClass:"bg-gray-100",textClass:"text-gray-800",borderClass:"border-gray-300",icon:Dl,descricao:"Sem compras recentes",emoji:""},Endividado:{color:"red",bgClass:"bg-red-100",textClass:"text-red-800",borderClass:"border-red-300",icon:pr,descricao:"Alto saldo devedor",emoji:""},Risco:{color:"orange",bgClass:"bg-orange-100",textClass:"text-orange-800",borderClass:"border-orange-300",icon:dg,descricao:"Diminuio de frequncia",emoji:""},Regular:{color:"gray",bgClass:"bg-gray-100",textClass:"text-gray-600",borderClass:"border-gray-200",icon:Xn,descricao:"Cliente regular",emoji:""}};function I9({segmento:t,size:r="sm",showIcon:a=!1}){if(!t)return null;const s=Nd[t]||Nd.Regular,n=s.icon,o={xs:"text-xs px-2 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"};return e.jsxs("span",{className:`inline-flex items-center gap-1 font-medium rounded-full ${s.bgClass} ${s.textClass} ${o[r]}`,title:s.descricao,children:[a&&e.jsx(n,{size:r==="xs"?10:r==="sm"?12:14}),s.emoji," ",t]})}function L9({tag:t}){const r=Nd[t]||Nd.Regular;return e.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-md ${r.bgClass} ${r.textClass}`,title:r.descricao,children:[r.emoji," ",t]})}function B0(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}function B9({clienteId:t,compact:r=!1}){const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{t&&u()},[t]);const u=async()=>{var y;try{o(!0),l(null);const f=await U.get(`/segmentacao/clientes/${t}`);s(f.data)}catch(f){((y=f.response)==null?void 0:y.status)===404?l("not_calculated"):(l("Erro ao carregar segmentao"),console.error("Erro ao carregar segmentao:",f))}finally{o(!1)}},m=async()=>{try{d(!0);const y=await U.post(`/segmentacao/clientes/${t}/recalcular`);s(y.data),l(null)}catch(y){console.error("Erro ao recalcular segmento:",y),alert("Erro ao recalcular segmento. Tente novamente.")}finally{d(!1)}};if(n)return e.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]});if(i==="not_calculated")return e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pr,{className:"text-yellow-600 mt-1",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"Segmentao no calculada"}),e.jsx("p",{className:"text-sm text-yellow-800 mb-4",children:"Este cliente ainda no foi segmentado. Clique abaixo para calcular."}),e.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(Um,{className:c?"animate-spin":""}),c?"Calculando...":"Calcular segmento"]})]})]})});if(i&&i!=="not_calculated")return e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-800",children:i})});if(!a)return null;const x=Nd[a.segmento]||Nd.Regular,h=x.icon,v=a.metricas||{},p={purple:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-300",blue:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",green:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",gray:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-300",red:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-300",orange:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-300"},g=p[x.color]||p.gray;return r?e.jsx(I9,{segmento:a.segmento,size:"sm"}):e.jsxs("div",{className:`${g} rounded-xl p-6 shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 ${x.bgClass} rounded-lg`,children:e.jsx(h,{className:x.textClass,size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[x.emoji," Segmentao: ",e.jsx("span",{className:x.textClass,children:a.segmento})]}),e.jsx("p",{className:"text-sm text-gray-600",children:x.descricao})]})]}),e.jsxs("button",{onClick:m,disabled:c,className:"flex items-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 disabled:bg-gray-100 border border-gray-300 text-gray-700 rounded-lg transition-colors text-sm",title:"Recalcular segmento",children:[e.jsx(Um,{size:14,className:c?"animate-spin":""}),c?"Calculando...":"Atualizar"]})]}),a.tags&&a.tags.length>1&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Tambm se enquadra em:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.filter(y=>y!==a.segmento).map(y=>e.jsx(L9,{tag:y},y))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rs,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Total 90 dias"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:B0(v.total_compras_90d||0)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(bd,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Compras 90d"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:v.compras_90d||0})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(tc,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Ticket mdio"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:B0(v.ticket_medio||0)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Dl,{className:"text-gray-500",size:16}),e.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"ltima compra"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:v.ultima_compra_dias===9999?"Nunca":`${v.ultima_compra_dias} dias`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total em aberto:"}),e.jsx("span",{className:`font-semibold ${v.total_em_aberto>0?"text-red-600":"text-green-600"}`,children:B0(v.total_em_aberto||0)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Cliente h:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:v.primeira_compra_dias>0?`${v.primeira_compra_dias} dias`:"Sem compras"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total histrico:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:B0(v.total_historico||0)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/60 rounded-lg p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total de compras:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:v.total_compras_historico||0})]})]}),a.updated_at&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300/50",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["Atualizado em: ",new Date(a.updated_at).toLocaleString("pt-BR")]})})]})}const z9={RISCO:{color:"red",bgClass:"bg-red-50",borderClass:"border-red-200",tagClass:"bg-red-100 text-red-700",label:" Risco"},OPORTUNIDADE:{color:"green",bgClass:"bg-green-50",borderClass:"border-green-200",tagClass:"bg-green-100 text-green-700",label:" Oportunidade"},ATENCAO:{color:"yellow",bgClass:"bg-yellow-50",borderClass:"border-yellow-200",tagClass:"bg-yellow-100 text-yellow-700",label:" Ateno"}};function q9(t,r,a,s){const n=[],o=new Date;if((r==null?void 0:r.segmento)==="VIP"&&(r==null?void 0:r.dias_desde_ultima_compra)>20&&n.push({tipo:"RISCO",icone:PA,titulo:"VIP em risco de churn",descricao:`Sem compras h ${r.dias_desde_ultima_compra} dias. Cliente VIP precisa de ateno especial.`,prioridade:10}),(r==null?void 0:r.dias_desde_ultima_compra)>90&&n.push({tipo:"RISCO",icone:Dl,titulo:"Cliente inativo h muito tempo",descricao:`ltima compra foi h ${r.dias_desde_ultima_compra} dias. Considere campanha de reativao.`,prioridade:8}),(r==null?void 0:r.saldo_devedor)>0&&(r==null?void 0:r.total_90d)>0&&(r==null?void 0:r.dias_desde_ultima_compra)<30){const i=r.saldo_devedor/r.total_90d*100;i>50&&n.push({tipo:"ATENCAO",icone:rs,titulo:"Alto endividamento com atividade recente",descricao:`Saldo devedor de R$ ${r.saldo_devedor.toFixed(2)} (${i.toFixed(0)}% das compras). Avaliar condies.`,prioridade:9})}if((r==null?void 0:r.segmento)==="Novo"&&(r==null?void 0:r.ticket_medio)>200&&n.push({tipo:"OPORTUNIDADE",icone:tc,titulo:"Novo cliente de alto valor",descricao:`Ticket mdio de R$ ${r.ticket_medio.toFixed(2)}. Potencial para se tornar VIP.`,prioridade:7}),s||n.push({tipo:"ATENCAO",icone:xi,titulo:"WhatsApp no registrado",descricao:"Adicione o nmero para facilitar comunicao e envio de promoes.",prioridade:5}),a&&a.length>0){const i=a.filter(l=>{if(!l.ultima_consulta)return!0;const c=new Date(l.ultima_consulta);return Math.floor((o-c)/(1e3*60*60*24))>60});if(i.length>0){const l=i[0].nome;n.push({tipo:"OPORTUNIDADE",icone:E2,titulo:`Pet ${l} sem consulta h mais de 60 dias`,descricao:`${i.length===1?"Considere":`${i.length} pets precisam de`} check-up ou retorno.`,prioridade:6})}}return(r==null?void 0:r.segmento)==="Recorrente"&&(r==null?void 0:r.dias_desde_ultima_compra)>30&&n.push({tipo:"ATENCAO",icone:Dl,titulo:"Cliente recorrente com atraso",descricao:`Costuma comprar regularmente, mas est h ${r.dias_desde_ultima_compra} dias sem aparecer.`,prioridade:7}),(r==null?void 0:r.saldo_credito)>0&&n.push({tipo:"OPORTUNIDADE",icone:rs,titulo:"Cliente tem crdito disponvel",descricao:`R$ ${r.saldo_credito.toFixed(2)} de crdito pode ser usado. Incentive o uso.`,prioridade:4}),n.sort((i,l)=>l.prioridade-i.prioridade).slice(0,3)}function V9({clienteId:t,cliente:r,metricas:a}){const[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState([]);j.useEffect(()=>{t&&d()},[t,a]);const d=async()=>{try{i(!0);let u=(r==null?void 0:r.pets)||[];if(u.length===0&&t)try{u=(await U.get(`/clientes/${t}`)).data.pets||[]}catch(h){console.error("Erro ao carregar pets:",h)}c(u);const m=(r==null?void 0:r.celular)&&r.celular.trim()!=="",x=q9(r,a,u,m);n(x)}catch(u){console.error("Erro ao calcular insights:",u),n([])}finally{i(!1)}};return o?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(cm,{className:"text-yellow-500",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"})]}),e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:"Analisando cliente..."})]})]}):!s||s.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(cm,{className:"text-yellow-500",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[e.jsx(Ml,{size:20}),e.jsx("p",{className:"font-medium",children:" Cliente em dia!"})]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Nenhuma ao prioritria no momento"})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-300 rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[e.jsx(cm,{className:"text-yellow-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Insights & Aes"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:[s.length," ",s.length===1?"insight":"insights"]})]}),e.jsx("div",{className:"space-y-3",children:s.map((u,m)=>{const x=z9[u.tipo],h=u.icone;return e.jsx("div",{className:`${x.bgClass} border ${x.borderClass} rounded-lg p-4 transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(h,{className:`text-${x.color}-600`,size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:u.titulo}),e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${x.tagClass}`,children:x.label})]}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:u.descricao})]})]})},m)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-yellow-200",children:e.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(Ml,{size:12}),"Insights calculados automaticamente com base no histrico do cliente"]})})]})}const U9=()=>{var Nt,Ge,Dt,jr,J;const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(""),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[m,x]=j.useState(null),[h,v]=j.useState(""),[p,g]=j.useState("todos"),[y,f]=j.useState(1),[b,N]=j.useState(0),[_,w]=j.useState(20),[S,C]=j.useState(!1),[E,T]=j.useState(1),[q,A]=j.useState([]),[O,V]=j.useState(null),[G,L]=j.useState(""),[Z,D]=j.useState(null),[K,R]=j.useState(!1),[B,F]=j.useState(!1),[I,k]=j.useState([]),[M,z]=j.useState({}),[oe,W]=j.useState(null),[ae,ee]=j.useState(null),[ce,ie]=j.useState(null),[we,Se]=j.useState(!1),[me,_e]=j.useState({tipo_cadastro:"cliente",tipo_pessoa:"PF",nome:"",cpf:"",email:"",telefone:"",celular:"",celular_whatsapp:!0,cnpj:"",inscricao_estadual:"",razao_social:"",nome_fantasia:"",responsavel:"",crmv:"",parceiro_ativo:!1,parceiro_desde:"",parceiro_observacoes:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",endereco_entrega:"",endereco_entrega_2:"",is_entregador:!1,entregador_ativo:!0,entregador_padrao:!1,tipo_vinculo_entrega:"",controla_rh:!1,gera_conta_pagar_custo_entrega:!1,media_entregas_configurada:"",custo_rh_ajustado:"",modelo_custo_entrega:"",taxa_fixa_entrega:"",valor_por_km_entrega:"",moto_propria:!0,tipo_acerto_entrega:"",dia_semana_acerto:"",dia_mes_acerto:"",is_terceirizado:!1,recebe_repasse:!1,gera_conta_pagar:!1,observacoes:"",tags:""}),[je,lt]=j.useState([]),[Ke,ut]=j.useState(null),[Ee,Me]=j.useState(!1),[Ae,ct]=j.useState({nome:"",especie:"",raca:"",sexo:"",data_nascimento:"",cor:"",peso:"",observacoes:"",castrado:!1,porte:"",microchip:"",alergias:"",doencas_cronicas:"",medicamentos_continuos:"",historico_clinico:"",foto_url:"",idade_aproximada:""}),bt=[{number:1,title:"Informaes do cliente"},{number:2,title:"Contatos"},{number:3,title:"Endereo"},{number:4,title:"Informaes complementares"},{number:5,title:"Animais"},{number:6,title:"Financeiro"}];j.useEffect(()=>{Ct()},[p,y,_]),j.useEffect(()=>{const P=setTimeout(()=>{y!==1?f(1):Ct()},500);return()=>clearTimeout(P)},[o]),j.useEffect(()=>{Ae&&Ae.especie?Rt(Ae.especie):k([])},[Ae==null?void 0:Ae.especie]),j.useEffect(()=>{if(ae&&q.length>0){const P=q.findIndex(H=>H.id===ae);P!==-1&&(ot(P),ee(null))}},[q,ae]);const Rt=async P=>{try{const H=await U.get(`/clientes/racas?especie=${P}`);k(H.data)}catch(H){console.error("Erro ao carregar raas:",H),k([])}},Ct=async()=>{try{n(!0);const P=(y-1)*_,H=new URLSearchParams({skip:P.toString(),limit:_.toString()});p!=="todos"&&H.append("tipo_cadastro",p),o&&o.trim()&&H.append("search",o.trim());const te=`/clientes/?${H.toString()}`,ne=await U.get(te);ne.data.items?(a(ne.data.items),N(ne.data.total)):(a(ne.data),N(ne.data.length))}catch(P){v("Erro ao carregar pessoas"),console.error(P)}finally{n(!1)}},It=async P=>{const H=P.replace(/\D/g,"");if(H.length===8){C(!0),L(""),v("");try{const ne=await(await fetch(`https://viacep.com.br/ws/${H}/json/`)).json();if(ne.erro){L("CEP no encontrado");return}_e(de=>({...de,endereco:ne.logradouro||"",bairro:ne.bairro||"",cidade:ne.localidade||"",estado:ne.uf||"",cep:P}))}catch(te){console.error("Erro ao buscar CEP:",te)}finally{C(!1)}}},$t=(P=null)=>{ut(P!==null?{...je[P],index:P}:{tipo:"entrega",apelido:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""}),Me(!0)},ge=()=>{Me(!1),ut(null)},$e=async P=>{if(!(!P||P.length!==9)){C(!0);try{const te=await(await fetch(`https://viacep.com.br/ws/${P.replace("-","")}/json/`)).json();if(te.erro){alert("CEP no encontrado");return}ut(ne=>({...ne,endereco:te.logradouro||"",bairro:te.bairro||"",cidade:te.localidade||"",estado:te.uf||""}))}catch(H){console.error("Erro ao buscar CEP:",H),alert("Erro ao buscar CEP")}finally{C(!1)}}},Ie=()=>{if(!Ke.cep||!Ke.endereco||!Ke.cidade){alert("Preencha pelo menos CEP, Endereo e Cidade");return}const P=[...je];Ke.index!==void 0?(P[Ke.index]={...Ke},delete P[Ke.index].index):P.push({...Ke}),lt(P),ge()},it=P=>{if(confirm("Deseja realmente remover este endereo?")){const H=je.filter((te,ne)=>ne!==P);lt(H)}},rt=async()=>{var P,H,te,ne,de;v("");try{const se=[];if((!me.nome||me.nome.trim()==="")&&se.push("Nome"),me.tipo_pessoa==="PJ"&&((!me.cnpj||me.cnpj.trim()==="")&&se.push("CNPJ"),(!me.razao_social||me.razao_social.trim()==="")&&se.push("Razo Social")),me.tipo_pessoa==="PF"&&me.tipo_cadastro==="cliente"&&(!me.cpf||me.cpf.trim()),se.length>0){const He=` Faltam os seguintes campos obrigatrios:

`+se.map(Ze=>` ${Ze}`).join(`
`);alert(He),v(He);return}if(me.is_entregador){if(!me.tipo_acerto_entrega){alert("Informe o tipo de acerto do entregador (semanal, quinzenal ou mensal)");return}if(me.tipo_acerto_entrega==="semanal"&&!me.dia_semana_acerto){alert("Informe o dia da semana para o acerto semanal");return}if(me.tipo_acerto_entrega==="mensal"&&!me.dia_mes_acerto){alert("Informe o dia do ms para o acerto mensal");return}if(me.tipo_acerto_entrega==="mensal"){const He=parseInt(me.dia_mes_acerto);if(He<1||He>28){alert("O dia do ms deve estar entre 1 e 28");return}}}const{celular_whatsapp:fe,tags:he,...ye}=me;ye.is_entregador&&(ye.tipo_cadastro==="funcionario"?(ye.tipo_vinculo_entrega="funcionario",ye.is_terceirizado=!1):ye.tipo_cadastro==="fornecedor"&&(ye.is_terceirizado=!0,ye.tipo_vinculo_entrega="terceirizado")),ye.enderecos_adicionais=je.length>0?je:null,Object.keys(ye).forEach(He=>{ye[He]===""&&(ye[He]=null)}),ye.tipo_cadastro==="todos"&&(ye.tipo_cadastro="cliente");let ke;m?(await U.put(`/clientes/${m.id}`,ye),ke=m.id):ke=(await U.post("/clientes/",ye)).data.id;for(const He of q){const Ze=He.id,tt={...He};delete tt.id,delete tt.created_at,delete tt.updated_at,delete tt.cliente_id,delete tt.user_id,delete tt.ativo,delete tt.codigo,Object.keys(tt).forEach(Qe=>{tt[Qe]===""&&(tt[Qe]=null)}),tt.peso!==null&&tt.peso!==void 0&&(tt.peso=parseFloat(tt.peso)||null),Ze?(console.log(`Atualizando pet ${Ze}:`,tt),await U.put(`/clientes/pets/${Ze}`,tt)):(console.log("Criando novo pet:",tt),await U.post(`/clientes/${ke}/pets`,tt))}Ct(),ue()}catch(se){const fe=(H=(P=se.response)==null?void 0:P.data)==null?void 0:H.details;console.error("Erro completo:",(te=se.response)==null?void 0:te.data),console.error("Detalhes de validao:",fe);const he={nome:"Nome",cpf:"CPF",cnpj:"CNPJ",razao_social:"Razo Social",nome_fantasia:"Nome Fantasia",inscricao_estadual:"Inscrio Estadual",responsavel:"Responsvel",telefone:"Telefone",celular:"Celular",email:"E-mail",cep:"CEP",endereco:"Endereo",numero:"Nmero",bairro:"Bairro",cidade:"Cidade",estado:"Estado",tipo_pessoa:"Tipo de Pessoa",tipo_cadastro:"Tipo de Cadastro",crmv:"CRMV",tipo_acerto_entrega:"Tipo de Acerto",dia_semana_acerto:"Dia da Semana para Acerto",dia_mes_acerto:"Dia do Ms para Acerto",tipo_vinculo_entrega:"Tipo de Vnculo"};let ye="";if(fe&&Array.isArray(fe)){const He=[];fe.forEach(Ze=>{const tt=Ze.loc[Ze.loc.length-1],Qe=he[tt]||tt;Ze.type==="missing"||Ze.type==="value_error.missing"?He.push(Qe):Ze.msg&&He.push(`${Qe}: ${Ze.msg}`),console.error(`Campo: ${Qe} | Tipo: ${Ze.type} | Mensagem: ${Ze.msg}`)}),He.length>0&&(ye=` Faltam os seguintes campos obrigatrios:

`+He.map(Ze=>` ${Ze}`).join(`
`))}const ke=ye||((de=(ne=se.response)==null?void 0:ne.data)==null?void 0:de.message)||"Erro ao salvar cliente";v(ke),ye&&alert(ye)}},xe=async P=>{var H,te;if(confirm("Tem certeza que deseja excluir este cliente?"))try{console.log("Excluindo cliente ID:",P);const ne=await U.delete(`/clientes/${P}`);console.log("Cliente excludo com sucesso:",ne),await Ct()}catch(ne){console.error("Erro ao excluir cliente:",ne),console.error("Resposta do erro:",ne.response),v(((te=(H=ne.response)==null?void 0:H.data)==null?void 0:te.detail)||"Erro ao excluir cliente")}},Oe=async P=>{var H,te;if(confirm("Tem certeza que deseja excluir este pet?"))try{console.log("Excluindo pet ID:",P),await U.delete(`/clientes/pets/${P}`),console.log("Pet excludo com sucesso"),z({}),await Ct(),console.log("Lista de clientes atualizada")}catch(ne){console.error("Erro ao excluir pet:",ne),alert(((te=(H=ne.response)==null?void 0:H.data)==null?void 0:te.detail)||"Erro ao excluir pet")}},Ye=async P=>{var H;if(P)try{Se(!0);const te=await U.get(`/financeiro/cliente/${P}/resumo`);ie(te.data.resumo)}catch(te){((H=te.response)==null?void 0:H.status)!==404&&console.error("Erro ao carregar resumo financeiro:",te),ie(null)}finally{Se(!1)}},Y=(P=null,H=null,te=null)=>{if(P)x(P),console.log(" Cliente carregado do backend:",{id:P.id,nome:P.nome,is_entregador:P.is_entregador,entregador_padrao:P.entregador_padrao,entregador_padrao_tipo:typeof P.entregador_padrao}),_e({tipo_cadastro:P.tipo_cadastro||"cliente",tipo_pessoa:P.tipo_pessoa||"PF",nome:P.nome,cpf:P.cpf||"",email:P.email||"",telefone:P.telefone||"",celular:P.celular||"",celular_whatsapp:!0,cnpj:P.cnpj||"",inscricao_estadual:P.inscricao_estadual||"",razao_social:P.razao_social||"",nome_fantasia:P.nome_fantasia||"",responsavel:P.responsavel||"",crmv:P.crmv||"",parceiro_ativo:P.parceiro_ativo||!1,parceiro_desde:P.parceiro_desde||"",parceiro_observacoes:P.parceiro_observacoes||"",cep:P.cep||"",endereco:P.endereco||"",numero:P.numero||"",complemento:P.complemento||"",bairro:P.bairro||"",cidade:P.cidade||"",estado:P.estado||"",endereco_entrega:P.endereco_entrega||"",endereco_entrega_2:P.endereco_entrega_2||"",is_entregador:P.is_entregador||!1,entregador_ativo:P.entregador_ativo!==void 0?P.entregador_ativo:!0,entregador_padrao:P.entregador_padrao||!1,tipo_vinculo_entrega:P.tipo_vinculo_entrega||"",controla_rh:P.controla_rh||!1,gera_conta_pagar_custo_entrega:P.gera_conta_pagar_custo_entrega||!1,media_entregas_configurada:P.media_entregas_configurada||"",custo_rh_ajustado:P.custo_rh_ajustado||"",modelo_custo_entrega:P.modelo_custo_entrega||"",taxa_fixa_entrega:P.taxa_fixa_entrega||"",valor_por_km_entrega:P.valor_por_km_entrega||"",moto_propria:P.moto_propria!==void 0?P.moto_propria:!0,tipo_acerto_entrega:P.tipo_acerto_entrega||"",dia_semana_acerto:P.dia_semana_acerto||"",dia_mes_acerto:P.dia_mes_acerto||"",is_terceirizado:P.is_terceirizado||!1,recebe_repasse:P.recebe_repasse||!1,gera_conta_pagar:P.gera_conta_pagar||!1,observacoes:P.observacoes||"",tags:""}),A(P.pets||[]),lt(P.enderecos_adicionais||[]),Ye(P.id),te?(ee(te),T(5)):(T(1),ee(null));else{x(null);const ne=H||(p==="todos"?"cliente":p);_e({tipo_cadastro:ne,tipo_pessoa:ne==="fornecedor"?"PJ":"PF",nome:"",cpf:"",email:"",telefone:"",celular:"",celular_whatsapp:!0,cnpj:"",inscricao_estadual:"",razao_social:"",nome_fantasia:"",responsavel:"",crmv:"",parceiro_ativo:!1,parceiro_desde:"",parceiro_observacoes:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",is_entregador:!1,entregador_ativo:!0,tipo_vinculo_entrega:"",controla_rh:!1,media_entregas_configurada:"",custo_rh_ajustado:"",modelo_custo_entrega:"",taxa_fixa_entrega:"",valor_por_km_entrega:"",moto_propria:!0,is_terceirizado:!1,recebe_repasse:!1,gera_conta_pagar:!1,observacoes:"",tags:""}),A([]),lt([]),T(1)}c(!0),v("")},ue=()=>{c(!1),x(null),T(1),A([]),D(null),R(!1),F(!1),W(null),ee(null),ie(null)},qe=async()=>{try{const P=new URLSearchParams;if(me.cpf&&P.append("cpf",me.cpf),me.cnpj&&P.append("cnpj",me.cnpj),me.telefone&&P.append("telefone",me.telefone),me.celular&&P.append("celular",me.celular),me.crmv&&P.append("crmv",me.crmv),m&&P.append("cliente_id",m.id),P.toString()){const H=await U.get(`/clientes/verificar-duplicata/campo?${P.toString()}`);if(H.data.duplicado)return D(H.data),R(!0),!0}return!1}catch(P){return console.error("Erro ao verificar duplicata:",P),!1}},le=async()=>{if(E<6){if(v(""),L(""),E===1&&await qe()||E===2&&await qe())return;T(E+1)}},ve=P=>["cpf","cnpj","crmv"].includes(P),Re=()=>{F(!0)},Le=async()=>{var P,H;try{n(!0);const te=(m==null?void 0:m.codigo)||(r.length>0?Math.max(...r.map(ne=>ne.codigo))+1:1);await U.put(`/clientes/${Z.cliente.id}/remover-campo`,null,{params:{campo:Z.campo,novo_cliente_codigo:te}}),F(!1),R(!1),D(null),T(E+1)}catch(te){v(((H=(P=te.response)==null?void 0:P.data)==null?void 0:H.detail)||"Erro ao remover campo duplicado")}finally{n(!1)}},Q=()=>{F(!1)},Ne=()=>{ue();const P=document.getElementById(`cliente-${Z.cliente.id}`);P&&(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("ring-4","ring-yellow-400"),setTimeout(()=>{P.classList.remove("ring-4","ring-yellow-400")},3e3))},Pe=()=>{const P=r.find(H=>H.id===Z.cliente.id);P&&(R(!1),D(null),F(!1),Y(P))},Ve=()=>{E>1&&(v(""),L(""),T(E-1))},ot=P=>{const H=q[P];ct({nome:H.nome||"",especie:H.especie||"",raca:H.raca||"",sexo:H.sexo||"",data_nascimento:H.data_nascimento||"",cor:H.cor||"",peso:H.peso||"",observacoes:H.observacoes||"",castrado:H.castrado||!1,porte:H.porte||"",microchip:H.microchip||"",alergias:H.alergias||"",doencas_cronicas:H.doencas_cronicas||"",medicamentos_continuos:H.medicamentos_continuos||"",historico_clinico:H.historico_clinico||"",foto_url:H.foto_url||"",idade_aproximada:H.idade_aproximada||""}),V(P),H!=null&&H.id&&W(H.id)},xt=r.filter(P=>{var H,te,ne;return P.nome.toLowerCase().includes(o.toLowerCase())||((H=P.cpf)==null?void 0:H.includes(o))||((te=P.email)==null?void 0:te.toLowerCase().includes(o.toLowerCase()))||((ne=P.celular)==null?void 0:ne.includes(o))});function pt({clienteId:P}){const[H,te]=j.useState([]),[ne,de]=j.useState(!0);j.useEffect(()=>{P&&se()},[P]);const se=async()=>{try{de(!0);const fe=await U.get(`/whatsapp/clientes/${P}/whatsapp/ultimas?limit=5`);te(fe.data)}catch(fe){console.error("Erro ao carregar mensagens:",fe),te([])}finally{de(!1)}};return ne?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Carregando mensagens..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(xi,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"Nenhuma mensagem registrada ainda"}),e.jsx("p",{className:"text-xs mt-1",children:"As mensagens enviadas e recebidas aparecero aqui"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"ltimas 5 mensagens:"}),H.map(fe=>e.jsxs("div",{className:`p-3 rounded-lg border ${fe.direcao==="enviada"?"bg-green-50 border-green-200 ml-6":"bg-blue-50 border-blue-200 mr-6"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold ${fe.direcao==="enviada"?"text-green-700":"text-blue-700"}`,children:fe.direcao==="enviada"?" Enviada":" Recebida"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${fe.status==="lido"?"bg-green-200 text-green-800":fe.status==="enviado"?"bg-yellow-200 text-yellow-800":fe.status==="recebido"?"bg-blue-200 text-blue-800":"bg-red-200 text-red-800"}`,children:fe.status})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(fe.created_at).toLocaleString("pt-BR")})]}),e.jsx("p",{className:"text-sm text-gray-700",children:fe.preview||fe.conteudo})]},fe.id))]})}return s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cadastros"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerenciamento de clientes, fornecedores, veterinrios, funcionrios e pets"})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{g("todos"),f(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="todos"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Todos"}),e.jsx("button",{onClick:()=>{g("cliente"),f(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="cliente"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Clientes"}),e.jsx("button",{onClick:()=>{g("fornecedor"),f(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="fornecedor"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Fornecedores"}),e.jsx("button",{onClick:()=>{g("veterinario"),f(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="veterinario"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Veterinrios"}),e.jsx("button",{onClick:()=>{g("funcionario"),f(1)},className:`px-4 py-2 font-medium border-b-2 transition-colors ${p==="funcionario"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Funcionrios"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6 flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(DA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, CPF/CNPJ, email ou telefone...",value:o,onChange:P=>i(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(c9,{})," Importar Excel"]}),e.jsxs("button",{onClick:()=>Y(null,p),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(gs,{})," Novo ",p==="cliente"?"Cliente":p==="fornecedor"?"Fornecedor":p==="veterinario"?"Veterinrio":p==="funcionario"?"Funcionrio":"Cadastro"]})]})]}),h&&!l&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(pr,{}),e.jsx("span",{children:h})]}),!s&&b>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-t-lg flex items-center justify-between mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(y-1)*_+1," a ",Math.min(y*_,b)," de ",b," pessoas"]}),e.jsxs("select",{value:_,onChange:P=>{w(Number(P.target.value)),f(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(1),disabled:y===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>f(P=>Math.max(P-1,1)),disabled:y===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Math.ceil(b/_),5)},(P,H)=>{const te=Math.ceil(b/_);let ne;return te<=5||y<=3?ne=H+1:y>=te-2?ne=te-4+H:ne=y-2+H,e.jsx("button",{onClick:()=>f(ne),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${y===ne?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:ne},ne)})}),e.jsx("button",{onClick:()=>f(P=>Math.min(P+1,Math.ceil(b/_))),disabled:y===Math.ceil(b/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>f(Math.ceil(b/_)),disabled:y===Math.ceil(b/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[xt.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CPF/CNPJ"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Celular"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pets"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Segmento"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:xt.map(P=>{var H;return e.jsxs(j.Fragment,{children:[e.jsxs("tr",{id:`cliente-${P.id}`,onClick:()=>Y(P),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 font-medium",children:P.codigo}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.nome}),P.tipo_pessoa==="PJ"&&P.razao_social&&e.jsx("span",{className:"text-xs text-gray-500",children:P.razao_social}),P.parceiro_ativo&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-0.5 rounded-full w-fit",children:[e.jsx(rs,{size:12}),"Parceiro"]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:P.tipo_pessoa==="PF"?P.cpf||"-":P.cnpj||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:P.celular||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",onClick:te=>te.stopPropagation(),children:e.jsxs("button",{onClick:()=>z({...M,[P.id]:!M[P.id]}),className:"flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900 transition-colors",children:[e.jsx(Zr,{size:16,className:"text-gray-400"}),e.jsx("span",{children:((H=P.pets)==null?void 0:H.length)||0}),P.pets&&P.pets.length>0&&e.jsx(ih,{size:14,className:`transform transition-transform ${M[P.id]?"rotate-90":""}`})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",onClick:te=>te.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[P.celular&&e.jsx("button",{onClick:()=>{const te=P.celular.replace(/\D/g,"");window.open(`https://wa.me/55${te}`,"_blank")},className:"text-green-600 hover:text-green-900 transition-colors",title:"Abrir WhatsApp",children:e.jsx(xi,{size:16})}),e.jsx("button",{onClick:()=>Y(P),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Editar",children:e.jsx(Ti,{size:16})}),e.jsx("button",{onClick:()=>xe(P.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Excluir",children:e.jsx(Oo,{size:16})})]})})]}),M[P.id]&&P.pets&&P.pets.length>0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-3 bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:["Pets de ",P.nome,":"]}),P.pets.map(te=>e.jsxs("div",{className:`bg-white rounded-lg p-3 flex justify-between items-start border border-gray-200 ${oe===te.id?"ring-2 ring-blue-400 shadow-lg bg-blue-50":""}`,children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nome"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:te.nome})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Espcie/Raa"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[te.especie," ",te.raca&&`- ${te.raca}`]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Sexo"}),e.jsx("p",{className:"text-sm text-gray-700",children:te.sexo||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nascimento"}),e.jsx("p",{className:"text-sm text-gray-700",children:te.data_nascimento?new Date(te.data_nascimento).toLocaleDateString("pt-BR"):"-"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{W(te.id),Y(P,null,te.id)},className:"text-blue-600 hover:text-blue-900 p-1 transition-colors",title:"Editar pet",children:e.jsx(Ti,{size:14})}),e.jsx("button",{onClick:()=>Oe(te.id),className:"text-red-600 hover:text-red-900 p-1 transition-colors",title:"Excluir pet",children:e.jsx(Oo,{size:14})})]})]},te.id))]})})})]},P.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xn,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]}),!s&&b>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(y-1)*_+1," a ",Math.min(y*_,b)," de ",b," pessoas"]}),e.jsxs("select",{value:_,onChange:P=>{w(Number(P.target.value)),f(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(1),disabled:y===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>f(P=>Math.max(P-1,1)),disabled:y===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Math.ceil(b/_),5)},(P,H)=>{const te=Math.ceil(b/_);let ne;return te<=5||y<=3?ne=H+1:y>=te-2?ne=te-4+H:ne=y-2+H,e.jsx("button",{onClick:()=>f(ne),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${y===ne?"bg-purple-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:ne},ne)})}),e.jsx("button",{onClick:()=>f(P=>Math.min(P+1,Math.ceil(b/_))),disabled:y===Math.ceil(b/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>f(Math.ceil(b/_)),disabled:y===Math.ceil(b/_),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:m?`Editar ${m.tipo_cadastro==="cliente"?"Cliente":m.tipo_cadastro==="fornecedor"?"Fornecedor":"Veterinrio"}`:`Adicionar ${me.tipo_cadastro==="cliente"?"Cliente":me.tipo_cadastro==="fornecedor"?"Fornecedor":"Veterinrio"}`}),e.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Oi,{size:24})})]}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:bt.map((P,H)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("button",{onClick:()=>T(P.number),className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-sm transition-all hover:scale-110 cursor-pointer ${E>P.number?"bg-green-500 text-white hover:bg-green-600":E===P.number?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-600 hover:bg-gray-400"}`,type:"button",title:`Ir para: ${P.title}`,children:E>P.number?e.jsx(Vm,{}):P.number}),e.jsx("span",{className:"text-xs mt-1 text-center hidden md:block",children:P.title})]}),H<bt.length-1&&e.jsx("div",{className:`h-0.5 flex-1 ${E>P.number?"bg-green-500":"bg-gray-300"}`})]},P.number))}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[E,"/6"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(pr,{}),e.jsx("span",{children:h})]}),K&&Z&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-2 border-yellow-400 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pr,{className:"text-yellow-600 mt-1",size:24}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:" Cliente j cadastrado!"}),e.jsxs("p",{className:"text-sm text-yellow-800 mb-3",children:["J existe um cliente com o mesmo ",e.jsx("strong",{children:Z.campo})," cadastrado:"]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-yellow-300 mb-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Z.cliente.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cdigo: ",Z.cliente.codigo]}),Z.cliente.cpf&&e.jsxs("p",{className:"text-sm text-gray-600",children:["CPF: ",Z.cliente.cpf]}),Z.cliente.celular&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Celular: ",Z.cliente.celular]}),Z.cliente.telefone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Telefone: ",Z.cliente.telefone]})]}),ve(Z.campo)?e.jsxs("div",{children:[e.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 mb-2",children:" No  possvel criar novo cadastro"}),e.jsxs("p",{className:"text-sm text-red-800 mb-2",children:[Z.campo.toUpperCase(),"  um documento nico e j est cadastrado."]}),e.jsx("p",{className:"text-sm text-red-700",children:"Voc pode editar o cadastro existente ou visualiz-lo."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Pe,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Editar cadastro existente"}),e.jsx("button",{onClick:Ne,className:"flex-1 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Ver cadastro"})]})]}):B?e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 mb-2",children:" Ateno!"}),e.jsxs("p",{className:"text-sm text-red-800 mb-3",children:["O ",e.jsx("strong",{children:Z.campo})," ser removido do cadastro do cliente ",e.jsx("strong",{children:Z.cliente.nome})," (Cdigo ",Z.cliente.codigo,") e uma observao ser adicionada informando a transferncia."]}),e.jsxs("p",{className:"text-xs text-red-700 mb-3",children:['No cadastro antigo ficar registrado: "Sem nmero por cadastro novo do cliente cdigo ',(m==null?void 0:m.codigo)||(r.length>0?Math.max(...r.map(P=>P.codigo))+1:1),'"']}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Le,disabled:s,className:"flex-1 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:s?"Processando...":"Confirmar e continuar"}),e.jsx("button",{onClick:Q,disabled:s,className:"flex-1 px-3 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Cancelar"})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ne,className:"flex-1 px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Ver cadastro existente"}),e.jsxs("button",{onClick:Re,className:"flex-1 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium transition-colors",children:["Transferir ",Z.campo]})]})]})]})}),E===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes do cadastro"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de cadastro *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"cliente",checked:me.tipo_cadastro==="cliente",onChange:P=>{_e({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PF"})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Cliente"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"fornecedor",checked:me.tipo_cadastro==="fornecedor",onChange:P=>{_e({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PJ"})},className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Fornecedor"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"veterinario",checked:me.tipo_cadastro==="veterinario",onChange:P=>_e({...me,tipo_cadastro:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Veterinrio"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"funcionario",checked:me.tipo_cadastro==="funcionario",onChange:P=>_e({...me,tipo_cadastro:P.target.value,tipo_pessoa:"PF"}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Funcionrio"})]})]})]}),(me.tipo_cadastro==="funcionario"||me.tipo_cadastro==="fornecedor")&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:" entregador"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-auto",children:[e.jsx("input",{type:"checkbox",checked:me.is_entregador||!1,onChange:P=>_e({...me,is_entregador:P.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),me.is_entregador&&e.jsxs("div",{className:"ml-5 mt-2 space-y-2 border-l-2 border-blue-300 pl-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.entregador_padrao||!1,onChange:P=>_e({...me,entregador_padrao:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Entregador padro"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"(pr-selecionado nas rotas)"})]}),me.tipo_cadastro==="funcionario"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.controla_rh||!1,onChange:P=>{const H=P.target.checked;_e({...me,controla_rh:H,modelo_custo_entrega:H?"":me.modelo_custo_entrega,taxa_fixa_entrega:H?"":me.taxa_fixa_entrega,valor_por_km_entrega:H?"":me.valor_por_km_entrega,gera_conta_pagar_custo_entrega:!1})},className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Controla RH"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"Custo rateado na folha (no gera contas a pagar)"})]})]}),me.controla_rh&&e.jsx("div",{className:"ml-5 pl-3 border-l-2 border-blue-300",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Mdia de entregas por ms"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 mb-1",children:"Define o rateio inicial do custo do funcionrio por entrega. Ser ajustado automaticamente no final do ms."}),e.jsx("input",{type:"number",min:"1",step:"1",value:me.media_entregas_configurada||"",onChange:P=>_e({...me,media_entregas_configurada:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 100 entregas/ms"}),e.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:" Exemplo: Se o custo mensal  R$ 3.000 e mdia  100 entregas, cada entrega custar R$ 30,00 inicialmente"})]})}),!me.controla_rh&&e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer ml-5 pl-2 border-l border-gray-300",children:[e.jsx("input",{type:"checkbox",checked:me.gera_conta_pagar_custo_entrega||!1,onChange:P=>_e({...me,gera_conta_pagar_custo_entrega:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Gerar contas a pagar por entrega"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"Marque se este funcionrio recebe por KM ou taxa fixa a cada entrega"})]})]})]}),(me.tipo_cadastro==="fornecedor"||me.tipo_cadastro==="funcionario"&&!me.controla_rh)&&e.jsxs("div",{className:"space-y-2",children:[me.tipo_cadastro==="fornecedor"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-1.5 text-[10px] text-yellow-800",children:[" ",e.jsx("strong",{children:"Terceirizado"})," - Sempre gera contas a pagar"]}),me.tipo_cadastro==="funcionario"&&!me.controla_rh&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-1.5 text-[10px] text-blue-800",children:[" ",e.jsx("strong",{children:"Funcionrio sem RH"})," - ",me.gera_conta_pagar_custo_entrega?"Gera CP por entrega":"No gera CP"]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.modelo_custo_entrega==="taxa_fixa",onChange:P=>_e({...me,modelo_custo_entrega:P.target.checked?"taxa_fixa":"",valor_por_km_entrega:""}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Taxa Fixa"}),me.modelo_custo_entrega==="taxa_fixa"&&e.jsx("input",{type:"number",step:"0.01",min:"0",value:me.taxa_fixa_entrega||"",onChange:P=>_e({...me,taxa_fixa_entrega:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-1 focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 15.00"})]})]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.modelo_custo_entrega==="por_km",onChange:P=>_e({...me,modelo_custo_entrega:P.target.checked?"por_km":"",taxa_fixa_entrega:""}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs text-gray-700 font-medium",children:"Valor por KM"}),me.modelo_custo_entrega==="por_km"&&e.jsx("input",{type:"number",step:"0.01",min:"0",value:me.valor_por_km_entrega||"",onChange:P=>_e({...me,valor_por_km_entrega:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mt-1 focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 2.50"})]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.moto_propria||!1,onChange:P=>_e({...me,moto_propria:P.target.checked}),className:"w-3.5 h-3.5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:me.moto_propria?" Moto prpria":" Moto da loja"})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-blue-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:" Acerto Financeiro"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Periodicidade"}),e.jsxs("select",{value:me.tipo_acerto_entrega||"",onChange:P=>_e({...me,tipo_acerto_entrega:P.target.value,dia_semana_acerto:"",dia_mes_acerto:""}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"quinzenal",children:"Quinzenal (dias 1 e 15)"}),e.jsx("option",{value:"mensal",children:"Mensal"})]})]}),me.tipo_acerto_entrega==="semanal"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Dia da semana"}),e.jsxs("select",{value:me.dia_semana_acerto||"",onChange:P=>_e({...me,dia_semana_acerto:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"1",children:"Segunda"}),e.jsx("option",{value:"2",children:"Tera"}),e.jsx("option",{value:"3",children:"Quarta"}),e.jsx("option",{value:"4",children:"Quinta"}),e.jsx("option",{value:"5",children:"Sexta"}),e.jsx("option",{value:"6",children:"Sbado"}),e.jsx("option",{value:"7",children:"Domingo"})]})]}),me.tipo_acerto_entrega==="mensal"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-gray-600 mb-0.5",children:"Dia do ms (1 a 28)"}),e.jsx("input",{type:"number",min:"1",max:"28",value:me.dia_mes_acerto||"",onChange:P=>_e({...me,dia_mes_acerto:P.target.value}),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Ex: 5"})]}),me.tipo_acerto_entrega==="quinzenal"&&e.jsxs("div",{className:"bg-blue-50 p-1.5 rounded text-[10px] text-blue-700",children:[" Acerto nos dias ",e.jsx("strong",{children:"1"})," e ",e.jsx("strong",{children:"15"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"text-green-600",size:20}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativar como parceiro (comisses)"}),me.parceiro_ativo&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-600 text-white rounded-full text-xs font-semibold animate-fade-in",children:[e.jsx(Vm,{size:14,className:"font-bold"}),e.jsx("span",{children:"Parceiro habilitado para comisso"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:me.parceiro_ativo,onChange:P=>_e({...me,parceiro_ativo:P.target.checked,parceiro_desde:P.target.checked&&!me.parceiro_desde?new Date().toISOString().split("T")[0]:me.parceiro_desde||""}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-7",children:"Ao ativar, esta pessoa poder receber comisses de vendas, independente do tipo de cadastro"}),me.parceiro_ativo&&e.jsxs("div",{className:"mt-3 ml-7",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Observaes do parceiro (opcional)"}),e.jsx("textarea",{value:me.parceiro_observacoes,onChange:P=>_e({...me,parceiro_observacoes:P.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",placeholder:"Ex: Especialista em produtos de higiene...",rows:"2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:me.tipo_pessoa==="PJ"?"Tipo de pessoa jurdica *":"Tipo de pessoa *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"PF",checked:me.tipo_pessoa==="PF",onChange:P=>_e({...me,tipo_pessoa:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Pessoa Fsica"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"PJ",checked:me.tipo_pessoa==="PJ",onChange:P=>_e({...me,tipo_pessoa:P.target.value}),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Pessoa Jurdica"})]})]})]}),me.tipo_pessoa==="PF"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome completo *"}),e.jsx("input",{type:"text",value:me.nome,onChange:P=>_e({...me,nome:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Digite o nome completo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),e.jsx("input",{type:"text",value:me.cpf,onChange:P=>{_e({...me,cpf:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"000.000.000-00",maxLength:"14"})]}),me.tipo_cadastro==="veterinario"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CRMV"}),e.jsx("input",{type:"text",value:me.crmv,onChange:P=>{_e({...me,crmv:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"CRMV XX 1234",maxLength:"20"})]})]}),me.tipo_pessoa==="PJ"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razo Social *"}),e.jsx("input",{type:"text",value:me.razao_social,onChange:P=>_e({...me,razao_social:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Razo social da empresa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Fantasia *"}),e.jsx("input",{type:"text",value:me.nome,onChange:P=>_e({...me,nome:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Nome fantasia da empresa",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNPJ *"}),e.jsx("input",{type:"text",value:me.cnpj,onChange:P=>{_e({...me,cnpj:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00.000.000/0000-00",maxLength:"18"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",value:me.inscricao_estadual,onChange:P=>_e({...me,inscricao_estadual:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"IE"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsvel / Contato"}),e.jsx("input",{type:"text",value:me.responsavel,onChange:P=>_e({...me,responsavel:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Nome do responsvel ou contato"})]})]})]}),E===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contatos"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Celular *"}),e.jsx("input",{type:"text",value:me.celular,onChange:P=>{_e({...me,celular:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"(00) 00000-0000"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Este nmero  WhatsApp?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:me.celular_whatsapp===!0,onChange:()=>_e({...me,celular_whatsapp:!0}),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Sim"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:me.celular_whatsapp===!1,onChange:()=>_e({...me,celular_whatsapp:!1}),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone fixo"}),e.jsx("input",{type:"text",value:me.telefone,onChange:P=>{_e({...me,telefone:P.target.value}),R(!1),D(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),e.jsx("input",{type:"email",value:me.email,onChange:P=>_e({...me,email:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"email@exemplo.com"})]})]}),E===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Endereo"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:me.cep,onChange:P=>{const H=P.target.value;_e({...me,cep:H}),H.replace(/\D/g,"").length===8&&It(H)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000",maxLength:"9"}),e.jsx("button",{type:"button",onClick:()=>It(me.cep),disabled:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:S?"Buscando...":"Buscar"})]}),G&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:G}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite o CEP para preencher o endereo automaticamente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo"}),e.jsx("input",{type:"text",value:me.endereco,onChange:P=>_e({...me,endereco:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:me.numero,onChange:P=>_e({...me,numero:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:me.complemento,onChange:P=>_e({...me,complemento:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:me.bairro,onChange:P=>_e({...me,bairro:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),e.jsx("input",{type:"text",value:me.cidade,onChange:P=>_e({...me,cidade:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:me.estado,onChange:P=>_e({...me,estado:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]})]}),E===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes complementares"}),e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800",children:"Endereos Adicionais"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cadastre mltiplos endereos para entrega, cobrana, etc."})]}),e.jsxs("button",{type:"button",onClick:()=>$t(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Endereo"]})]}),je.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:je.map((P,H)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${P.tipo==="entrega"?"bg-blue-100 text-blue-800":P.tipo==="cobranca"?"bg-green-100 text-green-800":P.tipo==="comercial"?"bg-purple-100 text-purple-800":P.tipo==="residencial"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:P.tipo==="entrega"?" Entrega":P.tipo==="cobranca"?" Cobrana":P.tipo==="comercial"?" Comercial":P.tipo==="residencial"?" Residencial":" Trabalho"}),e.jsxs("span",{className:"text-xs font-medium text-gray-500",children:["+",H+1]})]}),P.apelido&&e.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:P.apelido}),e.jsxs("p",{className:"text-sm text-gray-700",children:[P.endereco,", ",P.numero,P.complemento&&` - ${P.complemento}`]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[P.bairro,", ",P.cidade,"/",P.estado]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["CEP: ",P.cep]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{type:"button",onClick:()=>$t(H),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>it(H),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},H))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[e.jsxs("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Nenhum endereo adicional cadastrado"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marcaes / Tags"}),e.jsx("input",{type:"text",value:me.tags,onChange:P=>_e({...me,tags:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Bom pagador, Cliente fiel, VIP"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separe por vrgula para mltiplas tags"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:me.observacoes,onChange:P=>_e({...me,observacoes:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",rows:"4",placeholder:"Informaes adicionais sobre o cliente..."})]})]}),E===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Zr,{className:"text-blue-600",size:24}),"Pets do Cliente"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Use o mdulo dedicado para gerenciar pets com informaes completas"})]})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Zr,{className:"text-blue-600 flex-shrink-0 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Gesto Profissional de Pets"}),e.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:["Agora os pets possuem um ",e.jsx("strong",{children:"mdulo dedicado"})," com funcionalidades completas: histrico mdico, vacinas, consultas, servios e muito mais."]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 mb-4",children:[e.jsx("li",{children:" Cadastro completo com campos veterinrios"}),e.jsx("li",{children:" Histrico de sade e medicaes"}),e.jsx("li",{children:" Controle de vacinas e consultas"}),e.jsx("li",{children:" Timeline de eventos"}),e.jsx("li",{children:" Preparado para uso clnico real"})]})]})]})}),q.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Pets cadastrados (",q.length,")"]}),e.jsx("div",{className:"space-y-2",children:q.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zr,{className:"text-blue-600",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:[P.especie," ",P.raca&&` ${P.raca}`]})]})]}),P.id&&e.jsx("button",{onClick:()=>t(`/pets/${P.id}`),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors",children:"Ver Detalhes"})]},P.id||P.nome))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{m!=null&&m.id?t(`/pets?cliente_id=${m.id}`):alert(" Salve o cliente primeiro para gerenciar pets")},className:"flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all font-semibold shadow-md",children:[e.jsx(Zr,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:" Gerenciar Pets"}),e.jsx("div",{className:"text-xs font-normal opacity-90",children:"Mdulo completo de gesto"})]})]}),e.jsxs("button",{type:"button",onClick:()=>{m!=null&&m.id?t("/pets/novo",{state:{clienteId:m.id}}):alert(" Salve o cliente primeiro para adicionar pets")},className:"flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg transition-all font-semibold shadow-md",children:[e.jsx(gs,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:" Adicionar Pet"}),e.jsx("div",{className:"text-xs font-normal opacity-90",children:"Cadastro completo"})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Dica:"})," Pets podem ser adicionados agora ou depois. Todas as informaes mdicas e histrico ficam no mdulo dedicado de pets."]})}),!m&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[" ",e.jsx("strong",{children:"Ateno:"})," Salve o cliente primeiro (etapa 6) para poder gerenciar seus pets."]})})]}),E===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(rs,{className:"text-green-600"}),"Informaes Financeiras"]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:" Saldo de Crdito"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",m!=null&&m.credito?parseFloat(m.credito).toFixed(2).replace(".",","):"0,00"]}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"Disponvel para uso em compras"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",disabled:!m,onClick:async()=>{var ne,de;if(!m){alert("Salve o cliente primeiro antes de adicionar crdito");return}const P=prompt("Digite o valor a adicionar ao crdito:");if(!P||isNaN(parseFloat(P)))return;const H=parseFloat(P);if(H<=0){alert("Valor deve ser maior que zero");return}const te=prompt("Motivo da adio de crdito:","Ajuste manual");if(te)try{const se=await U.post(`/clientes/${m.id}/credito/adicionar`,{valor:H,motivo:te});alert(` ${se.data.message}

Crdito anterior: R$ ${se.data.credito_anterior.toFixed(2)}
Valor adicionado: R$ ${se.data.valor_adicionado.toFixed(2)}
Novo saldo: R$ ${se.data.credito_atual.toFixed(2)}`),x({...m,credito:se.data.credito_atual}),Ct()}catch(se){console.error("Erro ao adicionar crdito:",se),alert(" Erro ao adicionar crdito: "+(((de=(ne=se.response)==null?void 0:ne.data)==null?void 0:de.detail)||se.message))}},children:[e.jsx(tc,{})," Adicionar Crdito"]}),e.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium disabled:opacity-50",disabled:!m,onClick:async()=>{var de,se;if(!m){alert("Salve o cliente primeiro antes de remover crdito");return}const P=parseFloat(m.credito||0);if(P<=0){alert("Cliente no possui crdito para remover");return}const H=prompt(`Digite o valor a remover (mx: R$ ${P.toFixed(2)}):`);if(!H||isNaN(parseFloat(H)))return;const te=parseFloat(H);if(te<=0){alert("Valor deve ser maior que zero");return}if(te>P){alert(`Valor excede o crdito disponvel (R$ ${P.toFixed(2)})`);return}const ne=prompt("Motivo da remoo de crdito:","Ajuste manual");if(ne)try{const fe=await U.post(`/clientes/${m.id}/credito/remover`,{valor:te,motivo:ne});alert(` ${fe.data.message}

Crdito anterior: R$ ${fe.data.credito_anterior.toFixed(2)}
Valor removido: R$ ${fe.data.valor_removido.toFixed(2)}
Novo saldo: R$ ${fe.data.credito_atual.toFixed(2)}`),x({...m,credito:fe.data.credito_atual}),Ct()}catch(fe){console.error("Erro ao remover crdito:",fe),alert(" Erro ao remover crdito: "+(((se=(de=fe.response)==null?void 0:de.data)==null?void 0:se.detail)||fe.message))}},children:[e.jsx(dg,{})," Remover Crdito"]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ch,{}),"Resumo Financeiro (ltimos 90 dias)"]}),m?e.jsx("div",{className:"space-y-4",children:we?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 text-sm",children:"Carregando resumo..."})]}):e.jsxs(e.Fragment,{children:[ce?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" Total Comprado"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",((Nt=ce.total_vendas)==null?void 0:Nt.toFixed(2).replace(".",","))||"0,00"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ce.quantidade_vendas||0," vendas"]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${ce.tem_debitos_vencidos?"bg-red-50 border-red-300":ce.tem_debitos?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"}`,children:[e.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[ce.tem_debitos_vencidos?"":""," Em Aberto"]}),e.jsxs("p",{className:`text-2xl font-bold ${ce.tem_debitos_vencidos?"text-red-600":ce.tem_debitos?"text-orange-600":"text-green-600"}`,children:["R$ ",((Ge=ce.total_em_aberto)==null?void 0:Ge.toFixed(2).replace(".",","))||"0,00"]}),ce.tem_debitos_vencidos&&e.jsxs("p",{className:"text-xs text-red-600 font-semibold mt-1",children:["R$ ",((Dt=ce.total_vencido)==null?void 0:Dt.toFixed(2).replace(".",","))||"0,00"," vencido"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" Ticket Mdio"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",((jr=ce.ticket_medio)==null?void 0:jr.toFixed(2).replace(".",","))||"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"por compra"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" ltima Compra"}),ce.ultima_compra?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-700",children:["R$ ",((J=ce.ultima_compra.valor)==null?void 0:J.toFixed(2).replace(".",","))||"0,00"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(ce.ultima_compra.data).toLocaleDateString("pt-BR")," ","(h ",ce.ultima_compra.dias_atras," dias)"]})]}):e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Nenhuma compra"})]})]})}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx("p",{className:"mb-2",children:" Nenhuma informao financeira"}),e.jsx("p",{className:"text-sm",children:"Dados aparecero aps a primeira venda"})]}),e.jsxs("button",{type:"button",onClick:()=>t(`/clientes/${m.id}/financeiro`),className:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg transition-all flex items-center justify-center gap-2 font-semibold shadow-md",children:[e.jsx(ch,{})," Ver Histrico Financeiro Completo",ce&&e.jsxs("span",{className:"text-xs bg-white bg-opacity-20 px-2 py-1 rounded",children:[ce.total_transacoes_historico||0," transaes"]})]})]})}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-blue-800 text-sm",children:" Salve o cliente primeiro para visualizar o resumo financeiro"})})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Dica:"})," O crdito pode ser gerado automaticamente nas devolues de produtos e utilizado como forma de pagamento no PDV."]})}),m&&e.jsx(B9,{clienteId:m.id}),m&&e.jsx(V9,{clienteId:m.id,cliente:m,metricas:ce}),m&&m.celular&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xi,{className:"text-green-600",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" WhatsApp"})]}),e.jsxs("button",{type:"button",onClick:()=>{const P=m.celular.replace(/\D/g,"");window.open(`https://wa.me/55${P}`,"_blank")},className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(xi,{}),"Abrir conversa"]})]}),e.jsx(pt,{clienteId:m.id})]}),m&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsx(O2,{clienteId:m.tipo_cadastro==="cliente"?m.id:null,fornecedorId:m.tipo_cadastro==="fornecedor"?m.id:null,tipo:m.tipo_cadastro==="fornecedor"?"fornecedor":"cliente",limit:5,showHeader:!0,onVerMais:()=>t(`/clientes/${m.id}/timeline`)})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-between",children:[e.jsxs("button",{onClick:Ve,disabled:E===1,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(gd,{})," Voltar"]}),E<6?e.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:["Avanar ",e.jsx(ih,{})]}):e.jsxs("button",{onClick:rt,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Il,{})," Salvar Cliente"]})]})]})}),Ee&&Ke&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Ke.index!==void 0?"Editar Endereo":"Adicionar Novo Endereo"}),e.jsx("button",{onClick:ge,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Endereo *"}),e.jsxs("select",{value:Ke.tipo,onChange:P=>ut({...Ke,tipo:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"entrega",children:" Entrega"}),e.jsx("option",{value:"cobranca",children:" Cobrana"}),e.jsx("option",{value:"comercial",children:" Comercial"}),e.jsx("option",{value:"residencial",children:" Residencial"}),e.jsx("option",{value:"trabalho",children:" Trabalho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apelido (opcional)"}),e.jsx("input",{type:"text",value:Ke.apelido,onChange:P=>ut({...Ke,apelido:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Casa da me, Escritrio, Loja"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Ke.cep,onChange:P=>{const H=P.target.value.replace(/\D/g,""),te=H.length>5?`${H.slice(0,5)}-${H.slice(5,8)}`:H;ut({...Ke,cep:te})},onBlur:P=>$e(P.target.value),maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000"}),S&&e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo *"}),e.jsx("input",{type:"text",value:Ke.endereco,onChange:P=>ut({...Ke,endereco:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:Ke.numero,onChange:P=>ut({...Ke,numero:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:Ke.complemento,onChange:P=>ut({...Ke,complemento:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco, Sala..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:Ke.bairro,onChange:P=>ut({...Ke,bairro:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Centro, Jardim..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{type:"text",value:Ke.cidade,onChange:P=>ut({...Ke,cidade:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"So Paulo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:Ke.estado,onChange:P=>ut({...Ke,estado:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"* Campos obrigatrios"})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:ge,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:Ie,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Endereo"})]})]})}),e.jsx(T9,{isOpen:d,onClose:()=>{u(!1),fetchClientes()}}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        .animate-fade-in {
          animation: fadeIn 0.3s ease-out;
        }
      `})]})},ZA=(t={})=>U.get("/produtos/categorias",{params:t}),eP=(t={})=>U.get("/produtos/marcas",{params:t}),W9=(t={})=>U.get("/produtos/departamentos",{params:t}),tP=(t={})=>U.get("/produtos/",{params:t}),H9=(t={})=>U.get("/produtos/vendaveis",{params:t}),j4=t=>U.get(`/produtos/${t}`),Vb=t=>U.get(`/produtos/${t}/variacoes`),N4=t=>U.post("/produtos/",t),K9=(t,r)=>U.put(`/produtos/${t}`,r),By=t=>U.delete(`/produtos/${t}`),G9=(t="")=>U.post("/produtos/gerar-sku",{prefixo:t}),X9=t=>U.post("/produtos/gerar-codigo-barras",{sku:t}),z0=t=>U.get(`/produtos/${t}/lotes`),Y9=(t,r)=>U.post(`/produtos/${t}/entrada`,r),Q9=(t,r,a)=>U.put(`/produtos/${t}/lotes/${r}`,a),J9=(t,r)=>U.delete(`/produtos/${t}/lotes/${r}`),Z9=(t,r)=>U.post(`/produtos/${t}/imagens`,r,{headers:{"Content-Type":"multipart/form-data"}}),eB=t=>U.delete(`/produtos/imagens/${t}`),Ub=t=>U.get(`/produtos/${t}/fornecedores`),tB=(t,r)=>U.post(`/produtos/${t}/fornecedores`,r),rB=(t,r)=>U.put(`/produtos/fornecedores/${t}`,r),aB=t=>U.delete(`/produtos/fornecedores/${t}`),sB=(t={})=>U.get("/produtos/relatorio/movimentacoes",{params:t}),nB=(t,r)=>t*(1+r/100),w4=(t,r)=>!t||t===0?0:(r-t)/t*100,wl=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),zy=t=>t?new Date(t).toLocaleDateString("pt-BR"):"-";function oB({isOpen:t,onClose:r,onSuccess:a}){const[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState("upload"),m=g=>{const y=g.target.files[0];y&&(y.name.endsWith(".xlsx")||y.name.endsWith(".xls")?(n(y),c(null)):(Ue.error("Arquivo deve ser Excel (.xlsx ou .xls)"),g.target.value=""))},x=async()=>{try{const g=localStorage.getItem("token"),y=await U.get("/produtos/template-importacao",{headers:{Authorization:`Bearer ${g}`},responseType:"blob"}),f=window.URL.createObjectURL(new Blob([y.data])),b=document.createElement("a");b.href=f,b.setAttribute("download",`template_produtos_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(b),b.click(),b.remove(),window.URL.revokeObjectURL(f),Ue.success("Template baixado com sucesso!")}catch(g){console.error("Erro ao baixar template:",g),Ue.error("Erro ao baixar template")}},h=async()=>{var g,y;if(!s){Ue.error("Selecione um arquivo para importar");return}i(!0),u("processando");try{const f=new FormData;f.append("file",s);const b=await U.post("/produtos/importar",f);c(b.data),u("resultado"),b.data.total_sucesso>0&&(Ue.success(`${b.data.total_sucesso} produtos processados com sucesso!`),a&&a()),b.data.total_erros>0&&Ue.error(`${b.data.total_erros} produtos com erro`)}catch(f){console.error("Erro ao importar:",f),Ue.error(((y=(g=f.response)==null?void 0:g.data)==null?void 0:y.detail)||"Erro ao importar produtos"),u("upload")}finally{i(!1)}},v=()=>{n(null),c(null),u("upload")},p=()=>{v(),r()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Importao de Produtos em Lote"})]}),e.jsx("button",{onClick:p,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Como funciona"]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 ml-7",children:[e.jsx("li",{children:"1. Baixe o template Excel clicando no boto abaixo"}),e.jsx("li",{children:"2. Preencha os dados dos produtos na planilha"}),e.jsx("li",{children:"3. Salve o arquivo e faa o upload aqui"}),e.jsx("li",{children:"4. Produtos novos sero criados, existentes sero atualizados (baseado no SKU)"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Baixar Template Excel"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a Planilha Preenchida"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-12 h-12 mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Clique para selecionar"})," ou arraste o arquivo"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Apenas arquivos Excel (.xlsx, .xls)"}),s&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"font-medium",children:s.name})]})]}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls",onChange:m})]})})]})]}),d==="processando"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Processando planilha..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Isso pode levar alguns segundos"})]}),d==="resultado"&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.total_processado}),e.jsx("div",{className:"text-sm text-blue-800 mt-1",children:"Total Processado"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:l.total_criados}),e.jsx("div",{className:"text-sm text-green-800 mt-1",children:"Criados"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:l.total_atualizados}),e.jsx("div",{className:"text-sm text-yellow-800 mt-1",children:"Atualizados"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.total_erros}),e.jsx("div",{className:"text-sm text-red-800 mt-1",children:"Erros"})]})]}),l.detalhes.criados.length>0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Produtos Criados (",l.detalhes.criados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.detalhes.criados.map((g,y)=>e.jsxs("li",{className:"text-green-800",children:["Linha ",g.linha,": ",e.jsx("span",{className:"font-medium",children:g.sku})," - ",g.nome]},y))})})]}),l.detalhes.atualizados.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-yellow-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Produtos Atualizados (",l.detalhes.atualizados.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-1",children:l.detalhes.atualizados.map((g,y)=>e.jsxs("li",{className:"text-yellow-800",children:["Linha ",g.linha,": ",e.jsx("span",{className:"font-medium",children:g.sku})," - ",g.nome]},y))})})]}),l.detalhes.erros.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Erros (",l.detalhes.erros.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("ul",{className:"text-sm space-y-2",children:l.detalhes.erros.map((g,y)=>e.jsxs("li",{className:"text-red-800",children:[e.jsxs("strong",{children:["Linha ",g.linha]})," (",g.sku,"): ",g.erro]},y))})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3 bg-gray-50",children:[d==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:h,disabled:!s||o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Produtos"]})})]}),d==="resultado"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:v,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Importar Novamente"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Concluir"})]})]})]})}):null}const Fu=[{key:"checkbox",label:"",visible:!0,renderHeader:t=>e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:t.produtos.length>0&&t.selecionados.length===t.produtos.length,onChange:t.handleSelecionarTodos,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:r.selecionados.includes(t.id),onChange:a=>r.handleSelecionar(t.id,a.nativeEvent),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"})})},{key:"imagem",label:"Imagem",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagem"}),renderCell:(t,r)=>{const a=t.tipo_produto==="VARIACAO";return e.jsx("td",{className:`px-4 py-3 ${a?"pl-12":""}`,children:e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200 flex-shrink-0",children:t.imagem_principal?e.jsx("img",{src:t.imagem_principal.startsWith("http")?t.imagem_principal:`${window.location.origin}${t.imagem_principal}`,alt:t.nome,className:"w-full h-full object-cover object-center",onError:s=>{console.error("Erro ao carregar imagem:",t.imagem_principal),s.target.style.display="none",s.target.parentElement.innerHTML='<svg class="w-6 h-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>'}}):e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}},{key:"descricao",label:"Descrio",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),renderCell:(t,r)=>{const a=t.tipo_produto==="VARIACAO",s=t.tipo_produto==="PAI",n=t.tipo_produto==="KIT",o=(r.kitsExpandidos||[]).includes(t.id),i=(r.paisExpandidos||[]).includes(t.id);return e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex-1 ${a?"pl-6":""}`,children:[e.jsxs("div",{className:"flex items-center",children:[a&&e.jsx("svg",{className:"w-4 h-4 text-blue-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s&&e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),r.togglePaiExpandido(t.id)},className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mr-1",title:i?"Ocultar variaes":"Ver variaes",children:e.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),n&&e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),r.toggleKitExpandido(t.id)},className:`flex items-center transition-colors mr-1 ${t.tipo_kit==="VIRTUAL"?"text-indigo-600 hover:text-indigo-700":"text-green-600 hover:text-green-700"}`,title:o?"Ocultar composio":"Ver composio",children:e.jsx("svg",{className:`w-4 h-4 transition-transform ${o?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.nome,s&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(Pai ",t.total_variacoes||0,")"]}),n&&t.tipo_kit==="VIRTUAL"&&e.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Kit  Virtual)"}),n&&t.tipo_kit==="FISICO"&&e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(Kit  Fsico)"}),t.data_descontinuacao&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:" Descontinuado"})]})]}),t.descricao&&e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs mt-1",children:t.descricao})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),r.copiarTexto(t.nome,"Nome")},className:"text-gray-400 hover:text-gray-600",title:"Copiar nome",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})}},{key:"codigo",label:"Cdigo",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 font-mono",children:t.codigo||t.sku}),t.codigo_barras&&e.jsx("div",{className:"text-xs text-gray-500 font-mono",children:t.codigo_barras})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.copiarTexto(t.codigo||t.sku,"SKU")},className:"text-gray-400 hover:text-gray-600",title:"Copiar SKU",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})},{key:"unidade",label:"Unidade",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unidade"}),renderCell:t=>e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"text-sm text-gray-700",children:t.unidade||"UN"})})},{key:"custo",label:"Custo",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-900",children:wl(t.preco_custo)})})},{key:"preco_venda",label:"PV",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PV"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-right",children:r.editandoPreco===t.id?e.jsxs("div",{className:"flex items-center gap-1 justify-end",onClick:a=>a.stopPropagation(),children:[e.jsx("input",{type:"number",step:"0.01",value:r.novoPreco,onChange:a=>r.setNovoPreco(a.target.value),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>r.handleSalvarPreco(t.id),className:"text-green-600 hover:text-green-800",title:"Salvar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:r.handleCancelarEdicaoPreco,className:"text-red-600 hover:text-red-800",title:"Cancelar",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx("span",{className:"text-sm font-semibold text-green-600",children:wl(t.preco_venda)}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.handleEditarPreco(t.id,t.preco_venda)},className:"text-blue-600 hover:text-blue-800",title:"Editar preo",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})})},{key:"validade",label:"Validade",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validade"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:r.getValidadeMaisProxima(t)})},{key:"estoque",label:"Estoque",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),renderCell:(t,r)=>{const a=t.tipo_produto==="KIT"&&t.tipo_kit==="VIRTUAL",s=a?t.estoque_virtual??0:t.estoque_atual||0;return e.jsx("td",{className:"px-4 py-3 text-center",children:t.controlar_estoque?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-sm ${r.getCorEstoque(t)}`,children:s}),a&&e.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:"estoque virtual"})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})})}},{key:"acoes",label:"Aes",visible:!0,renderHeader:()=>e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"}),renderCell:(t,r)=>e.jsx("td",{className:"px-4 py-3 text-center",onClick:a=>a.stopPropagation(),children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),console.log("Produto:",t.nome,"Controla estoque:",t.controlar_estoque,"Estoque atual:",t.estoque_atual),r.navigate(`/produtos/${t.id}/movimentacoes`)},className:`rounded hover:opacity-80 transition-opacity ${t.controlar_estoque===!0&&(t.estoque_atual||0)>0?"text-green-600 hover:text-green-800":t.controlar_estoque===!0&&(t.estoque_atual||0)===0?"text-red-600 hover:text-red-800":"text-gray-400 hover:text-gray-600"}`,title:"Ver movimentaes de estoque",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.navigate(`/produtos/${t.id}/editar`)},className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),r.handleExcluir(t.id)},className:"text-red-600 hover:text-red-800 transition-colors",title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}];function iB(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!0),[d,u]=j.useState([]),[m,x]=j.useState(null),[h,v]=j.useState(null),[p,g]=j.useState(""),[y,f]=j.useState([]),[b,N]=j.useState([]),[_,w]=j.useState(()=>{const xe=localStorage.getItem("produtos_colunas_visiveis");return xe?JSON.parse(xe):null}),[S,C]=j.useState(!1),[E,T]=j.useState([]),[q,A]=j.useState(!1),[O,V]=j.useState({marca_id:"",categoria_id:"",departamento_id:""}),[G,L]=j.useState([]),[Z,D]=j.useState(!1),[K,R]=j.useState({busca:"",categoria_id:"",marca_id:"",estoque_baixo:!1,em_promocao:!1}),[B,F]=j.useState(1),[I,k]=j.useState(20),M=j.useMemo(()=>{if(!r||r.length===0)return[];const xe=[],Oe=r.filter(ue=>ue.tipo_produto==="PAI"),Ye=r.filter(ue=>ue.tipo_produto==="VARIACAO"),Y=r.filter(ue=>ue.tipo_produto!=="PAI"&&ue.tipo_produto!=="VARIACAO");return xe.push(...Y),Oe.forEach(ue=>{if(xe.push(ue),b.includes(ue.id)){const qe=Ye.filter(le=>le.produto_pai_id===ue.id);xe.push(...qe)}}),xe},[r,b]),z=j.useMemo(()=>{let xe=[...M];if(K.busca.trim()){const Oe=K.busca.toLowerCase();xe=xe.filter(Ye=>Ye.nome&&Ye.nome.toLowerCase().includes(Oe)||Ye.codigo&&Ye.codigo.toLowerCase().includes(Oe))}return K.categoria_id&&(xe=xe.filter(Oe=>Oe.categoria_id==K.categoria_id)),K.marca_id&&(xe=xe.filter(Oe=>Oe.marca_id==K.marca_id)),K.estoque_baixo&&(xe=xe.filter(Oe=>{const Ye=Oe.tipo_produto==="KIT"&&Oe.tipo_kit==="VIRTUAL"?Oe.estoque_virtual??0:Oe.estoque_atual||0,Y=Oe.estoque_minimo||0;return Oe.controlar_estoque&&Ye<=Y})),K.em_promocao&&(xe=xe.filter(Oe=>Oe.promocao_ativa===!0)),xe},[M,K]),{produtosPaginados:oe,totalPaginas:W,totalItens:ae}=j.useMemo(()=>{const xe=Math.ceil(z.length/I),Oe=(B-1)*I,Ye=Oe+I;return{produtosPaginados:z.slice(Oe,Ye),totalPaginas:xe,totalItens:z.length}},[z,B,I]),ee=oe;j.useEffect(()=>{F(1)},[K]),j.useEffect(()=>{ce(),ie(),we(),Se()},[]);const ce=async()=>{try{c(!0);const xe={};Object.keys(K).forEach(Y=>{const ue=K[Y];ue!==""&&ue!==null&&ue!==void 0&&(xe[Y]=ue)});const Oe=await tP(xe);let Ye;if(Array.isArray(Oe.data))Ye=Oe.data;else if(Oe.data.itens)Ye=Oe.data.itens;else if(Oe.data.produtos)Ye=Oe.data.produtos;else if(Oe.data.data)Ye=Oe.data.data;else{const Y=Object.keys(Oe.data).filter(ue=>Array.isArray(Oe.data[ue]));Y.length>0?Ye=Oe.data[Y[0]]:Ye=[]}a(Ye)}catch(xe){console.error("Erro ao carregar produtos:",xe),alert("Erro ao carregar produtos")}finally{c(!1)}},ie=async()=>{try{const xe=await ZA();n(xe.data)}catch(xe){console.error("Erro ao carregar categorias:",xe)}},we=async()=>{try{const xe=await eP();i(xe.data)}catch(xe){console.error("Erro ao carregar marcas:",xe)}},Se=async()=>{try{const xe=await U.get("/produtos/departamentos");L(xe.data)}catch(xe){console.error("Erro ao carregar departamentos:",xe)}},me=(xe,Oe)=>{R(Ye=>({...Ye,[xe]:Oe}))},_e=(xe,Oe)=>{if(!xe){console.error("Erro: ID do produto  undefined ou null");return}if(Oe!=null&&Oe.shiftKey&&m!==null){const Ye=ee.findIndex(ue=>ue.id===m),Y=ee.findIndex(ue=>ue.id===xe);if(Ye!==-1&&Y!==-1){const ue=Math.min(Ye,Y),qe=Math.max(Ye,Y),le=ee.slice(ue,qe+1).map(ve=>ve.id);u(ve=>{const Re=new Set(ve);return le.forEach(Le=>Re.add(Le)),Array.from(Re)}),x(xe);return}}u(Ye=>Ye.includes(xe)?Ye.filter(Y=>Y!==xe):[...Ye,xe]),x(xe)},je=()=>{d.length===ee.length?u([]):u(ee.map(xe=>xe.id))},lt=async xe=>{if(confirm("Deseja realmente excluir este produto?"))try{await By(xe),alert("Produto excludo com sucesso!"),ce()}catch(Oe){console.error("Erro ao excluir produto:",Oe),alert("Erro ao excluir produto")}},Ke=async()=>{if(confirm(`Deseja realmente excluir ${d.length} produtos?`))try{await Promise.all(d.map(xe=>By(xe))),alert("Produtos excludos com sucesso!"),u([]),ce()}catch(xe){console.error("Erro ao excluir produtos:",xe),alert("Erro ao excluir produtos")}},ut=(xe,Oe)=>{navigator.clipboard.writeText(xe),Ue.success(`${Oe} copiado!`)},Ee=(xe,Oe)=>{v(xe),g(Oe.toString())},Me=async xe=>{try{await U.patch(`/produtos/${xe}?preco_venda=${p}`,{}),Ue.success("Preo atualizado!"),v(null),ce()}catch(Oe){console.error("Erro ao atualizar preo:",Oe),Ue.error("Erro ao atualizar preo")}},Ae=()=>{v(null)},ct=()=>{if(d.length===0){Ue.error("Selecione pelo menos um produto");return}V({marca_id:"",categoria_id:"",departamento_id:""}),A(!0)},bt=async()=>{try{if(Object.values(O).filter(Ye=>Ye!=="").length===0){Ue.error("Preencha pelo menos um campo para atualizar");return}const Oe={};O.marca_id&&(Oe.marca_id=parseInt(O.marca_id)),O.categoria_id&&(Oe.categoria_id=parseInt(O.categoria_id)),O.departamento_id&&(Oe.departamento_id=parseInt(O.departamento_id)),await U.patch("/produtos/atualizar-lote",{produto_ids:d,...Oe}),Ue.success(`${d.length} produto(s) atualizado(s) com sucesso!`),A(!1),u([]),ce()}catch(xe){console.error("Erro ao atualizar produtos:",xe),Ue.error("Erro ao atualizar produtos")}},Rt=xe=>{if(!xe.controlar_estoque)return"text-gray-500";const Oe=xe.tipo_produto==="KIT"&&xe.tipo_kit==="VIRTUAL"?xe.estoque_virtual??0:xe.estoque_atual||0,Ye=xe.estoque_minimo||0;return Oe<=0?"text-red-600 font-semibold":Oe<=Ye?"text-yellow-600 font-medium":"text-gray-700"},Ct=xe=>{if(!xe.lotes||xe.lotes.length===0)return"-";const Oe=xe.lotes.filter(qe=>qe.data_validade).sort((qe,le)=>new Date(qe.data_validade)-new Date(le.data_validade));if(Oe.length===0)return"-";const Ye=Oe[0].data_validade,Y=Math.floor((new Date(Ye)-new Date)/(1e3*60*60*24));let ue="text-gray-700";return Y<0?ue="text-red-600 font-bold":Y<=30?ue="text-orange-600 font-semibold":Y<=90&&(ue="text-yellow-600"),e.jsx("span",{className:ue,children:zy(Ye)})},It=xe=>{f(Oe=>Oe.includes(xe)?Oe.filter(Ye=>Ye!==xe):[...Oe,xe])},$t=xe=>{N(Oe=>Oe.includes(xe)?Oe.filter(Ye=>Ye!==xe):[...Oe,xe])},ge=()=>{const xe=_||Fu.map(Oe=>Oe.key);T(xe),C(!0)},$e=xe=>{T(Oe=>Oe.includes(xe)?Oe.filter(Ye=>Ye!==xe):[...Oe,xe])},Ie=()=>{localStorage.setItem("produtos_colunas_visiveis",JSON.stringify(E)),w(E),C(!1),Ue.success("Preferncias de colunas salvas!")},it=()=>{localStorage.removeItem("produtos_colunas_visiveis"),w(null),T(Fu.map(xe=>xe.key)),Ue.success("Colunas restauradas para o padro!")},rt=xe=>_?_.includes(xe.key):!0;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Produtos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie seu estoque de produtos"})]}),e.jsxs("div",{className:"flex gap-2",children:[d.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ct,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[" Editar em Lote (",d.length,")"]}),e.jsxs("button",{onClick:Ke,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:["Excluir Selecionados (",d.length,")"]})]}),e.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Importar Excel"]}),e.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center gap-2",title:"Configurar colunas visveis",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Colunas"]}),e.jsx("button",{onClick:()=>t("/produtos/novo"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"+ Novo Produto"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Buscar por cdigo, nome ou cdigo de barras...",value:K.busca,onChange:xe=>me("busca",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:K.categoria_id,onChange:xe=>me("categoria_id",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Categorias"}),s.map(xe=>e.jsxs("option",{value:xe.id,children:[xe.categoria_pai_id?"   ":"",xe.nome]},xe.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:K.marca_id,onChange:xe=>me("marca_id",xe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Marcas"}),o.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K.estoque_baixo,onChange:xe=>me("estoque_baixo",xe.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Estoque Baixo"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K.em_promocao,onChange:xe=>me("em_promocao",xe.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Em Promoo"})]})]})]})}),!l&&ae>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-t-lg flex items-center justify-between mt-6 mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(B-1)*I+1," a ",Math.min(B*I,ae)," de ",ae," produtos"]}),e.jsxs("select",{value:I,onChange:xe=>{k(Number(xe.target.value)),F(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(1),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>F(xe=>Math.max(xe-1,1)),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(W,5)},(xe,Oe)=>{let Ye;return W<=5||B<=3?Ye=Oe+1:B>=W-2?Ye=W-4+Oe:Ye=B-2+Oe,e.jsx("button",{onClick:()=>F(Ye),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${B===Ye?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Ye},Ye)})}),e.jsx("button",{onClick:()=>F(xe=>Math.min(xe+1,W)),disabled:B===W,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>F(W),disabled:B===W,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:Fu.filter(rt).map(xe=>e.jsx(pe.Fragment,{children:xe.renderHeader({produtos:ee,selecionados:d,handleSelecionarTodos:je})},xe.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-500",children:"Carregando produtos..."})}):ee.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-500",children:"Nenhum produto encontrado"})}):ee.map((xe,Oe)=>{if(!xe||!xe.id)return console.error(`Produto invlido no ndice ${Oe}:`,xe),null;const Ye=xe.tipo_produto==="KIT",Y=y.includes(xe.id);return e.jsxs(pe.Fragment,{children:[e.jsx("tr",{className:`hover:bg-gray-50 transition-colors cursor-pointer ${xe.tipo_produto==="VARIACAO"?"bg-blue-50/30":""} ${Ye?"bg-amber-50/30":""}`,onClick:ue=>{ue.target.closest("button, input, a, svg")||t(`/produtos/${xe.id}/editar`)},children:Fu.filter(rt).map(ue=>e.jsx(pe.Fragment,{children:ue.renderCell(xe,{selecionados:d,handleSelecionar:_e,kitsExpandidos:y,toggleKitExpandido:It,paisExpandidos:b,togglePaiExpandido:$t,copiarTexto:ut,editandoPreco:h,novoPreco:p,setNovoPreco:g,handleSalvarPreco:Me,handleCancelarEdicaoPreco:Ae,handleEditarPreco:Ee,getValidadeMaisProxima:Ct,getCorEstoque:Rt,navigate:t,handleExcluir:lt})},ue.key))}),Ye&&Y&&xe.composicao_kit&&xe.composicao_kit.length>0&&e.jsx("tr",{className:"bg-amber-50/50 border-l-4 border-amber-400",children:e.jsx("td",{colSpan:"10",className:"px-4 py-3",children:e.jsxs("div",{className:"ml-12",children:[e.jsxs("div",{className:"text-xs font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"COMPOSIO DO KIT:"]}),e.jsx("div",{className:"grid gap-1",children:xe.composicao_kit.map((ue,qe)=>e.jsxs("div",{className:"flex items-center gap-3 text-xs bg-white rounded px-3 py-2 border border-amber-200",children:[e.jsxs("span",{className:"font-mono font-semibold text-amber-700 min-w-[40px]",children:[ue.quantidade,"x"]}),e.jsx("span",{className:"flex-1 text-gray-700",children:ue.produto_nome||ue.nome||`Produto #${ue.produto_id||ue.produto_componente_id}`}),ue.produto_estoque!==void 0&&e.jsxs("span",{className:"text-gray-500",children:["Estoque: ",e.jsx("span",{className:ue.produto_estoque>0?"text-green-600 font-semibold":"text-red-600 font-semibold",children:ue.produto_estoque})]})]},qe))})]})})},`kit-${xe.id}`)]},xe.id)})})]})}),!l&&ae>0&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",(B-1)*I+1," a ",Math.min(B*I,ae)," de ",ae," produtos"]}),e.jsxs("select",{value:I,onChange:xe=>{k(Number(xe.target.value)),F(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:"10 por pgina"}),e.jsx("option",{value:20,children:"20 por pgina"}),e.jsx("option",{value:30,children:"30 por pgina"}),e.jsx("option",{value:50,children:"50 por pgina"}),e.jsx("option",{value:100,children:"100 por pgina"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(1),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Primeira"}),e.jsx("button",{onClick:()=>F(xe=>Math.max(xe-1,1)),disabled:B===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(W,5)},(xe,Oe)=>{let Ye;return W<=5||B<=3?Ye=Oe+1:B>=W-2?Ye=W-4+Oe:Ye=B-2+Oe,e.jsx("button",{onClick:()=>F(Ye),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${B===Ye?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Ye},Ye)})}),e.jsx("button",{onClick:()=>F(xe=>Math.min(xe+1,W)),disabled:B===W,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Prxima"}),e.jsx("button",{onClick:()=>F(W),disabled:B===W,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"ltima"})]})]}),!l&&d.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-between items-center text-sm text-gray-600",children:e.jsxs("span",{children:[d.length," produto",d.length>1?"s":""," selecionado",d.length>1?"s":""]})})})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar em Lote"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Atualizar ",e.jsx("strong",{children:d.length})," produto(s) selecionado(s)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),e.jsxs("select",{value:O.marca_id,onChange:xe=>V({...O,marca_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),o.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:O.categoria_id,onChange:xe=>V({...O,categoria_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),s.map(xe=>e.jsxs("option",{value:xe.id,children:[xe.categoria_pai_id?"   ":"",xe.nome]},xe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:O.departamento_id,onChange:xe=>V({...O,departamento_id:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"No alterar"}),G.map(xe=>e.jsx("option",{value:xe.id,children:xe.nome},xe.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:bt,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Alteraes"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurar Colunas"}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Selecione quais colunas deseja visualizar na tabela:"}),e.jsx("div",{className:"space-y-2",children:Fu.map(xe=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:E.includes(xe.key),onChange:()=>$e(xe.key),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:xe.label||xe.key})]},xe.key))})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between gap-3",children:[e.jsx("button",{onClick:it,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Restaurar Padro"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:Ie,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"})]})]})]})}),e.jsx(oB,{isOpen:Z,onClose:()=>D(!1),onSuccess:()=>{ce(),D(!1)}})]})}const lB=({value:t,onChange:r,pesoEmbalagem:a})=>{const[s,n]=j.useState("filhote_peso_adulto"),[o,i]=j.useState([]),[l,c]=j.useState(!1),d=j.useRef(null),[u]=j.useState([{id:"2m",label:"2 meses"},{id:"3m",label:"3 meses"},{id:"4m",label:"4 meses"},{id:"6m",label:"6 meses"},{id:"8m",label:"8 meses"},{id:"10m",label:"10 meses"},{id:"12m",label:"12 meses"},{id:"15m",label:"15 meses"},{id:"18m",label:"18 meses"},{id:"adulto",label:"Adulto"}]);j.useEffect(()=>{if(t&&!l)try{const N=typeof t=="string"?JSON.parse(t):t;if(console.log(" Carregando tabela:",N),N.tipo&&n(N.tipo),N.dados){const _=Object.entries(N.dados).map(([w,S])=>({peso:w,consumos:S}));i(_)}c(!0)}catch(N){console.error("Erro ao carregar tabela:",N),c(!0)}},[t,l]);const m=()=>{switch(s){case"filhote_peso_adulto":return"Peso Adulto Esperado";case"adulto":return"Peso Atual";default:return"Peso"}},x=()=>{switch(s){case"filhote_peso_adulto":return"Ex: 5kg, 10kg, 15kg, 20kg";case"adulto":return"Ex: 5kg, 10kg, 15kg, 20kg";default:return""}},h=()=>{const N={peso:"",consumos:{}},_=[...o,N];i(_)},v=N=>{const _=o.filter((w,S)=>S!==N);i(_),f(_)},p=(N,_)=>{const w=[...o];w[N].peso=_,i(w)},g=(N,_,w)=>{const S=[...o];S[N].consumos||(S[N].consumos={});const C=parseFloat(w)||0;S[N].consumos[_]=C,i(S)},y=N=>{if(!a||!N)return"-";const _=a*1e3;return`${Math.floor(_/N)}d`},f=j.useCallback(N=>{if(!l){console.log(" Aguardando carregamento inicial...");return}const _=N||o,w={};_.forEach(E=>{E.peso&&(w[E.peso]=E.consumos)});const S={tipo:s,dados:w},C=JSON.stringify(S);if(d.current===C){console.log(" Ignorando - j est salvo");return}console.log(" Salvando tabela:",S),d.current=C,r(C)},[o,s,r,l]),b=()=>{f(),alert(" Tabela de consumo salva com sucesso!")};return e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2",children:" Tabela de Consumo da Embalagem"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Preencha a tabela com as informaes da embalagem. A IA usar esses dados para calcular durao e custo-benefcio."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Tabela da Embalagem:"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"filhote_peso_adulto",checked:s==="filhote_peso_adulto",onChange:N=>n(N.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:" Filhote (Peso Adulto Esperado)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"adulto",checked:s==="adulto",onChange:N=>n(N.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:" Adulto (Peso Atual)"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left text-sm font-semibold text-gray-700 w-32",children:m()}),u.map(N=>e.jsxs("th",{className:"border border-gray-300 px-2 py-2 text-center text-xs font-semibold text-gray-700 min-w-[90px]",children:[N.label,e.jsx("div",{className:"text-[10px] text-gray-500 font-normal",children:"g/dia | dias"})]},N.id)),e.jsx("th",{className:"border border-gray-300 px-2 py-2 text-center text-sm font-semibold text-gray-700 w-16",children:"Aes"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:u.length+2,className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:[e.jsx(pr,{className:"inline-block mr-2"}),'Nenhuma linha adicionada. Clique em "Adicionar Linha" para comear.']})}):o.map((N,_)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-2 py-2",children:e.jsx("input",{type:"text",value:N.peso,onChange:w=>p(_,w.target.value),onBlur:()=>f(),placeholder:x(),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})}),u.map(w=>{var E;const S=((E=N.consumos)==null?void 0:E[w.id])||"",C=y(S);return e.jsxs("td",{className:"border border-gray-300 px-1 py-1",children:[e.jsx("input",{type:"number",value:S,onChange:T=>g(_,w.id,T.target.value),onBlur:()=>f(),placeholder:"0",className:"w-full px-2 py-1 text-sm text-center border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"text-[10px] text-center text-gray-500 mt-0.5",children:C})]},w.id)}),e.jsx("td",{className:"border border-gray-300 px-2 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>v(_),className:"text-red-600 hover:text-red-800 p-1",title:"Remover linha",children:e.jsx(Oo,{size:16})})})]},_))})]})}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(gs,{size:16}),"Adicionar Linha"]}),e.jsxs("button",{type:"button",onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Il,{size:16}),"Salvar Tabela"]})]}),a&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Peso da embalagem:"})," ",a,"kg (",a*1e3,"g)",e.jsx("br",{}),"A durao (dias)  calculada automaticamente: ",e.jsx("code",{children:"peso_embalagem  consumo_dirio"})]})})]})},Ba=t=>{if(t===""||t===null||t===void 0)return 0;const r=t.toString().replace(/[^\d,]/g,"").replace(",","."),a=parseFloat(r);return isNaN(a)?0:a};function _4(){var Pt,Qt,rr,Ur,Us,$n,Rn,is,Ho,ls,p0,h0,f0,g0,Ko;const t=Ht(),{id:r}=Zl(),[a]=rg(),s=!!r,[n,o]=j.useState(1),[i,l]=j.useState({codigo:"",sku:"",nome:"",codigo_barras:"",categoria_id:"",marca_id:"",departamento_id:"",tipo:"produto",unidade:"UN",descricao:"",preco_custo:"",preco_venda:"",preco_promocional:"",data_inicio_promocao:"",data_fim_promocao:"",markup:"",tipo_produto:"SIMPLES",produto_pai_id:null,tipo_kit:null,e_kit_fisico:!1,composicao_kit:[],produto_predecessor_id:null,motivo_descontinuacao:"",controle_lote:!0,estoque_minimo:"",estoque_maximo:"",tributacao:{origem:null,herdado_da_empresa:!1,origem_mercadoria:"0",ncm:"",cest:"",cfop:"",cst_icms:"",icms_aliquota:"",icms_st:!1,pis_aliquota:"",cofins_aliquota:""},origem:"0",ncm:"",cest:"",cfop:"",aliquota_icms:"",aliquota_pis:"",aliquota_cofins:"",tem_recorrencia:!1,tipo_recorrencia:"monthly",intervalo_dias:"",numero_doses:"",observacoes_recorrencia:"",especie_compativel:"both",classificacao_racao:"",peso_embalagem:"",tabela_nutricional:"",tabela_consumo:"",categoria_racao:"",especies_indicadas:"both",linha_racao_id:"",porte_animal_id:"",fase_publico_id:"",tipo_tratamento_id:"",sabor_proteina_id:"",apresentacao_peso_id:""}),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState([]),[v,p]=j.useState([]),[g,y]=j.useState([]),[f,b]=j.useState([]),[N,_]=j.useState([]),[w,S]=j.useState([]),[C,E]=j.useState([]),[T,q]=j.useState([]),[A,O]=j.useState([]),[V,G]=j.useState([]),[L,Z]=j.useState([]),[D,K]=j.useState([]),[R,B]=j.useState([]),[F,I]=j.useState({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]}),[k,M]=j.useState(!1),[z,oe]=j.useState([]),[W,ae]=j.useState(""),[ee,ce]=j.useState(""),[ie,we]=j.useState(0),[Se,me]=j.useState(!1),[_e,je]=j.useState([]),[lt,Ke]=j.useState(""),[ut,Ee]=j.useState(null),[Me,Ae]=j.useState(null),[ct,bt]=j.useState(null),[Rt,Ct]=j.useState(!1),[It,$t]=j.useState(!1),[ge,$e]=j.useState(!1),[Ie,it]=j.useState(!1),[rt,xe]=j.useState({quantidade:"",nome_lote:"",data_fabricacao:"",data_validade:"",preco_custo:""}),[Oe,Ye]=j.useState(!1),[Y,ue]=j.useState(null),[qe,le]=j.useState(!1),[ve,Re]=j.useState(null),[Le,Q]=j.useState({fornecedor_id:"",codigo_fornecedor:"",preco_custo:"",prazo_entrega:"",estoque_fornecedor:"",e_principal:!1});j.useEffect(()=>{Pe(),s&&xt()},[r]),j.useEffect(()=>{if(!s&&i.nome){const X=i.nome.toLowerCase();(X.includes("racao")||X.includes("rao"))&&i.classificacao_racao!=="sim"&&l(et=>({...et,classificacao_racao:"sim"}))}},[i.nome,s,i.classificacao_racao]),j.useEffect(()=>{if(!Rt&&s){const X=a.get("aba");X&&o(parseInt(X))}},[Rt,a,s]),j.useEffect(()=>{s&&i.tipo_produto==="VARIACAO"&&n===8&&o(1)},[i.tipo_produto,n,s]),j.useEffect(()=>{s&&n===8&&i.tipo_produto==="PAI"&&Ne()},[n,s,i.tipo_produto]);const Ne=async()=>{try{const X=await Vb(r);B(X.data)}catch(X){console.error("Erro ao carregar variaes:",X)}},Pe=async()=>{try{const[X,Te,et,jt]=await Promise.all([ZA(),eP(),W9(),U.get("/clientes/",{params:{tipo_cadastro:"fornecedor",apenas_ativos:!0}})]);d(X.data);const nt=ot(X.data);m(nt),h(Te.data),p(et.data),S(jt.data),Ve()}catch(X){console.error("Erro ao carregar dados auxiliares:",X)}},Ve=async()=>{try{const[X,Te,et,jt,nt,tr]=await Promise.all([U.get("/opcoes-racao/linhas",{params:{apenas_ativos:!0}}),U.get("/opcoes-racao/portes",{params:{apenas_ativos:!0}}),U.get("/opcoes-racao/fases",{params:{apenas_ativos:!0}}),U.get("/opcoes-racao/tratamentos",{params:{apenas_ativos:!0}}),U.get("/opcoes-racao/sabores",{params:{apenas_ativos:!0}}),U.get("/opcoes-racao/apresentacoes",{params:{apenas_ativos:!0}})]);E(X.data),q(Te.data),O(et.data),G(jt.data),Z(nt.data),K(tr.data)}catch(X){console.error("Erro ao carregar opes de rao:",X)}},ot=(X,Te=null,et=0)=>{let jt=[];return X.filter(tr=>tr.categoria_pai_id===Te).forEach(tr=>{const ws="".repeat(et),kr=et>0?" ":"";jt.push({...tr,nomeFormatado:ws+kr+tr.nome,nivel:et});const Dr=ot(X,tr.id,et+1);jt=jt.concat(Dr)}),jt},xt=async()=>{var X,Te,et;try{Ct(!0),Ae(null),bt(null);const nt=(await j4(r)).data;let tr="";if(nt.preco_custo&&nt.preco_venda&&nt.preco_custo>0&&(tr=w4(nt.preco_custo,nt.preco_venda).toFixed(2)),l({...nt,sku:nt.codigo||"",codigo:nt.codigo||"",nome:nt.nome||"",codigo_barras:nt.codigo_barras||"",categoria_id:nt.categoria_id||"",marca_id:nt.marca_id||"",departamento_id:nt.departamento_id||"",unidade:nt.unidade||"UN",descricao:nt.descricao_curta||"",tipo:nt.tipo||"produto",preco_custo:nt.preco_custo||"",preco_venda:nt.preco_venda||"",preco_promocional:nt.preco_promocional||"",data_inicio_promocao:nt.promocao_inicio||"",data_fim_promocao:nt.promocao_fim||"",estoque_minimo:nt.estoque_minimo||"",estoque_maximo:nt.estoque_maximo||"",controle_lote:nt.controle_lote??!0,markup:tr,tipo_produto:nt.tipo_produto||"SIMPLES",produto_pai_id:nt.produto_pai_id||null,tipo_kit:nt.tipo_kit||null,e_kit_fisico:nt.e_kit_fisico||!1,composicao_kit:nt.composicao_kit||[],origem:nt.origem||"0",ncm:nt.ncm||"",cest:nt.cest||"",cfop:nt.cfop||"",aliquota_icms:nt.aliquota_icms||"",aliquota_pis:nt.aliquota_pis||"",aliquota_cofins:nt.aliquota_cofins||"",tem_recorrencia:nt.tem_recorrencia||!1,tipo_recorrencia:nt.tipo_recorrencia||"monthly",intervalo_dias:nt.intervalo_dias||"",numero_doses:nt.numero_doses||"",especie_compativel:nt.especie_compativel||"both",observacoes_recorrencia:nt.observacoes_recorrencia||"",classificacao_racao:nt.classificacao_racao||"",peso_embalagem:nt.peso_embalagem||"",tabela_nutricional:nt.tabela_nutricional||"",tabela_consumo:nt.tabela_consumo||"",categoria_racao:nt.categoria_racao||"",especies_indicadas:nt.especies_indicadas||"both",linha_racao_id:nt.linha_racao_id||"",porte_animal_id:nt.porte_animal_id||"",fase_publico_id:nt.fase_publico_id||"",tipo_tratamento_id:nt.tipo_tratamento_id||"",sabor_proteina_id:nt.sabor_proteina_id||"",apresentacao_peso_id:nt.apresentacao_peso_id||""}),nt.produto_predecessor_id)try{const kr=await j4(nt.produto_predecessor_id);Ae({id:kr.data.id,codigo:kr.data.codigo,nome:kr.data.nome,motivo_descontinuacao:nt.motivo_descontinuacao,data_descontinuacao:(X=nt.predecessor)==null?void 0:X.data_descontinuacao})}catch(kr){console.error("Erro ao carregar predecessor:",kr)}if(nt.data_descontinuacao)try{const kr=await U.get("/produtos/",{params:{produto_predecessor_id:nt.id,ativo:null}}),Dr=Array.isArray(kr.data)?kr.data:kr.data.items||[];if(Dr&&Dr.length>0){const Go=Dr[0];bt({id:Go.id,codigo:Go.codigo,nome:Go.nome,motivo_descontinuacao:nt.motivo_descontinuacao,data_descontinuacao:nt.data_descontinuacao})}}catch(kr){console.error(" Erro ao carregar sucessor:",kr)}try{const kr=await U.get(`/produtos/${r}/imagens`);b(kr.data||[])}catch(kr){console.error("Erro ao carregar imagens:",kr),b([])}if(nt.controle_lote){const kr=await z0(r);y(kr.data)}const ws=await Ub(r);_(ws.data),await pt(nt)}catch(jt){console.error(" Erro ao carregar produto:",jt),alert("Erro ao carregar produto: "+(((et=(Te=jt.response)==null?void 0:Te.data)==null?void 0:et.detail)||jt.message))}finally{Ct(!1)}},pt=async X=>{try{const Te=X.tipo_produto==="KIT",{data:et}=Te?await U.get(`/produtos/${X.id}/kit/fiscal`):await U.get(`/produtos/${X.id}/fiscal`);l(jt=>({...jt,tributacao:{origem:et.origem,herdado_da_empresa:et.herdado_da_empresa,origem_mercadoria:et.origem_mercadoria??"0",ncm:et.ncm??"",cest:et.cest??"",cfop:et.cfop??"",cst_icms:et.cst_icms??"",icms_aliquota:et.icms_aliquota??"",icms_st:et.icms_st??!1,pis_aliquota:et.pis_aliquota??"",cofins_aliquota:et.cofins_aliquota??""}}))}catch(Te){console.error("Erro ao carregar fiscal:",Te)}},Nt=async X=>{const Te={origem_mercadoria:i.tributacao.origem_mercadoria,ncm:i.tributacao.ncm,cest:i.tributacao.cest,cfop:i.tributacao.cfop,cst_icms:i.tributacao.cst_icms,icms_aliquota:i.tributacao.icms_aliquota,icms_st:i.tributacao.icms_st,pis_aliquota:i.tributacao.pis_aliquota,cofins_aliquota:i.tributacao.cofins_aliquota};X.tipo_produto==="KIT"?await U.put(`/produtos/${X.id}/kit/fiscal`,Te):await U.put(`/produtos/${X.id}/fiscal`,Te)},Ge=(X,Te)=>{l(et=>{const jt={...et,[X]:Te};if(X==="preco_custo"||X==="preco_venda"){const nt=Ba(X==="preco_custo"?Te:et.preco_custo),tr=Ba(X==="preco_venda"?Te:et.preco_venda);if(nt&&tr&&nt>0){const ws=w4(nt,tr);jt.markup=ws.toFixed(2)}}if(X==="markup"){const nt=Ba(et.preco_custo),tr=Ba(Te);if(nt&&nt>0&&tr>=0){const ws=nB(nt,tr);jt.preco_venda=ws.toFixed(2)}}return jt})},Dt=async()=>{try{const X=await G9("PROD");l(Te=>({...Te,sku:X.data.sku})),alert("SKU gerado com sucesso!")}catch(X){console.error("Erro ao gerar SKU:",X),alert("Erro ao gerar SKU")}},jr=async()=>{if(!i.sku){alert("Gere ou informe um SKU primeiro!");return}try{const X=await X9(i.sku);l(Te=>({...Te,codigo_barras:X.data.codigo_barras})),alert("Cdigo de barras gerado com sucesso!")}catch(X){console.error("Erro ao gerar cdigo de barras:",X),alert("Erro ao gerar cdigo de barras")}},J=async()=>{var X,Te;if(!rt.quantidade||!rt.preco_custo){alert("Preencha quantidade e preo de custo!");return}try{const et=rt.nome_lote||`LOTE-${Date.now()}`,jt=rt.data_fabricacao?new Date(rt.data_fabricacao+"T00:00:00").toISOString():null,nt=rt.data_validade?new Date(rt.data_validade+"T23:59:59").toISOString():null;await Y9(r,{nome_lote:et,quantidade:parseFloat(rt.quantidade),preco_custo:parseFloat(rt.preco_custo),data_fabricacao:jt,data_validade:nt,observacoes:rt.observacoes||null}),alert("Entrada de estoque realizada com sucesso!"),it(!1),xe({quantidade:"",nome_lote:"",data_fabricacao:"",data_validade:"",preco_custo:""});const tr=await z0(r);y(tr.data)}catch(et){console.error("Erro ao registrar entrada:",et),alert(((Te=(X=et.response)==null?void 0:X.data)==null?void 0:Te.detail)||"Erro ao registrar entrada de estoque")}},P=X=>{var Te,et;ue({id:X.id,nome_lote:X.nome_lote,quantidade_inicial:X.quantidade_inicial,data_fabricacao:((Te=X.data_fabricacao)==null?void 0:Te.split("T")[0])||"",data_validade:((et=X.data_validade)==null?void 0:et.split("T")[0])||"",custo_unitario:X.custo_unitario}),Ye(!0)},H=async()=>{var X,Te;try{const et=Y.data_fabricacao?new Date(Y.data_fabricacao+"T00:00:00").toISOString():null,jt=Y.data_validade?new Date(Y.data_validade+"T23:59:59").toISOString():null,nt={nome_lote:Y.nome_lote,quantidade_inicial:parseFloat(Y.quantidade_inicial),data_fabricacao:et,data_validade:jt,custo_unitario:parseFloat(Y.custo_unitario)};await Q9(r,Y.id,nt),alert("Lote atualizado com sucesso!"),Ye(!1),ue(null);const tr=await z0(r);y(tr.data)}catch(et){console.error("Erro ao atualizar lote:",et),alert(((Te=(X=et.response)==null?void 0:X.data)==null?void 0:Te.detail)||"Erro ao atualizar lote")}},te=async X=>{var Te,et;if(window.confirm(`Deseja realmente excluir o lote ${X.nome_lote}?

Quantidade: ${X.quantidade_disponivel} unidades
Isso remover o registro de entrada do estoque.`))try{await J9(r,X.id),alert("Lote excludo com sucesso!");const jt=await z0(r);y(jt.data)}catch(jt){console.error("Erro ao excluir lote:",jt),alert(((et=(Te=jt.response)==null?void 0:Te.data)==null?void 0:et.detail)||"Erro ao excluir lote")}},ne=async X=>{var nt,tr,ws,kr;const Te=Array.from(X.target.files);if(Te.length===0)return;const et=["image/jpeg","image/png","image/webp"],jt=5*1024*1024;for(const Dr of Te){if(!et.includes(Dr.type)){alert(`${Dr.name}: Apenas JPG, PNG e WebP so permitidos`);return}if(Dr.size>jt){alert(`${Dr.name}: Imagem deve ter no mximo 5MB`);return}}try{$e(!0);const Dr=[];for(const ju of Te){const Nu=new FormData;Nu.append("file",ju);try{const _s=await Z9(r,Nu);Dr.push(_s.data)}catch(_s){console.error(`Erro ao enviar ${ju.name}:`,_s),alert(`Erro ao enviar ${ju.name}: ${((tr=(nt=_s.response)==null?void 0:nt.data)==null?void 0:tr.detail)||"Erro desconhecido"}`)}}const Go=await U.get(`/produtos/${r}/imagens`);b(Go.data||[]),alert(`${Dr.length} imagem(ns) enviada(s) com sucesso!`)}catch(Dr){console.error("Erro ao enviar imagens:",Dr),alert(((kr=(ws=Dr.response)==null?void 0:ws.data)==null?void 0:kr.detail)||"Erro ao enviar imagens")}finally{$e(!1),X.target.value=""}},de=async X=>{if(confirm("Deseja realmente excluir esta imagem?"))try{await eB(X);const Te=await U.get(`/produtos/${r}/imagens`);b(Te.data||[]),alert("Imagem excluda com sucesso!")}catch(Te){console.error("Erro ao excluir imagem:",Te),alert("Erro ao excluir imagem")}},se=async X=>{try{await U.put(`/produtos/imagens/${X}`,{principal:!0});const Te=await U.get(`/produtos/${r}/imagens`);b(Te.data||[]),alert("Imagem principal atualizada!")}catch(Te){console.error("Erro ao definir imagem principal:",Te),alert("Erro ao definir imagem principal")}},fe=()=>{Re(null),Q({fornecedor_id:"",codigo_fornecedor:"",preco_custo:"",prazo_entrega:"",estoque_fornecedor:"",e_principal:!1}),le(!0)},he=X=>{Re(X),Q({fornecedor_id:X.fornecedor_id,codigo_fornecedor:X.codigo_fornecedor||"",preco_custo:X.preco_custo||"",prazo_entrega:X.prazo_entrega||"",estoque_fornecedor:X.estoque_fornecedor||"",e_principal:X.e_principal||!1}),le(!0)},ye=async()=>{var X,Te;if(!Le.fornecedor_id){alert("Selecione um fornecedor");return}try{const et={...Le,preco_custo:Le.preco_custo?parseFloat(Le.preco_custo):null,prazo_entrega:Le.prazo_entrega?parseInt(Le.prazo_entrega):null,estoque_fornecedor:Le.estoque_fornecedor?parseFloat(Le.estoque_fornecedor):null};ve?(await rB(ve.id,et),alert("Fornecedor atualizado!")):(await tB(r,et),alert("Fornecedor vinculado!"));const jt=await Ub(r);_(jt.data),le(!1)}catch(et){console.error("Erro ao salvar fornecedor:",et),alert(((Te=(X=et.response)==null?void 0:X.data)==null?void 0:Te.detail)||"Erro ao salvar fornecedor")}},ke=async X=>{if(confirm("Deseja realmente desvincular este fornecedor?"))try{await aB(X);const Te=await Ub(r);_(Te.data),alert("Fornecedor desvinculado!")}catch(Te){console.error("Erro ao desvincular fornecedor:",Te),alert("Erro ao desvincular fornecedor")}},He=async()=>{try{const X=await U.get("/produtos/",{params:{apenas_ativos:!0,tipo_produto:"SIMPLES"}});oe(X.data.items||[])}catch(X){console.error("Erro ao carregar produtos:",X),oe([])}},Ze=()=>{if(!W||!ee||ee<=0){alert("Selecione um produto e informe a quantidade!");return}if(i.composicao_kit.find(jt=>jt.produto_id===parseInt(W))){alert("Este produto j foi adicionado ao kit!");return}const Te=z.find(jt=>jt.id===parseInt(W)),et={produto_componente_id:Te.id,produto_id:Te.id,produto_nome:Te.nome,produto_sku:Te.codigo,quantidade:parseFloat(ee),estoque_componente:Te.estoque_atual||0};l(jt=>({...jt,composicao_kit:[...jt.composicao_kit,et]})),ae(""),ce(""),Qe([...i.composicao_kit,et])},tt=X=>{const Te=i.composicao_kit.filter(et=>et.produto_id!==X);l(et=>({...et,composicao_kit:Te})),Qe(Te)},Qe=X=>{if(!X||X.length===0){we(0);return}const Te=X.map(jt=>{const nt=jt.estoque_componente||0,tr=jt.quantidade||1;return Math.floor(nt/tr)}),et=Math.min(...Te);we(et>=0?et:0)};j.useEffect(()=>{const X=i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit;n===9&&X&&(He(),i.composicao_kit&&i.composicao_kit.length>0&&Qe(i.composicao_kit))},[n,i.tipo_produto,i.tipo_kit]);const ht=async X=>{var Te,et;if(X.preventDefault(),!i.nome){alert("Preencha o campo Nome");return}if(i.tipo_produto!=="PAI"&&!i.preco_venda){alert("Preencha o Preo de Venda");return}if(!i.codigo&&!i.sku){alert("Preencha o campo SKU/Cdigo");return}try{$t(!0);const jt={codigo:i.codigo||i.sku,nome:i.nome,descricao_curta:i.descricao||null,codigo_barras:i.codigo_barras||null,unidade:i.unidade||"UN",preco_custo:i.preco_custo?parseFloat(i.preco_custo):0,preco_venda:parseFloat(i.preco_venda),preco_promocional:i.preco_promocional?parseFloat(i.preco_promocional):null,promocao_inicio:i.data_inicio_promocao||null,promocao_fim:i.data_fim_promocao||null,controle_lote:i.controle_lote||!1,estoque_minimo:i.estoque_minimo?parseInt(i.estoque_minimo):0,estoque_maximo:i.estoque_maximo?parseInt(i.estoque_maximo):null,categoria_id:i.categoria_id?parseInt(i.categoria_id):null,marca_id:i.marca_id?parseInt(i.marca_id):null,departamento_id:i.departamento_id?parseInt(i.departamento_id):null,tipo_produto:i.tipo_produto||"SIMPLES",produto_pai_id:i.produto_pai_id||null,tipo_kit:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.e_kit_fisico?"FISICO":"VIRTUAL":null,e_kit_fisico:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.e_kit_fisico:null,composicao_kit:i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?i.composicao_kit:null,produto_predecessor_id:i.produto_predecessor_id||null,motivo_descontinuacao:i.motivo_descontinuacao||null,tem_recorrencia:i.tem_recorrencia||!1,tipo_recorrencia:i.tem_recorrencia?i.tipo_recorrencia:null,intervalo_dias:i.tem_recorrencia&&i.intervalo_dias?parseInt(i.intervalo_dias):null,numero_doses:i.tem_recorrencia&&i.numero_doses?parseInt(i.numero_doses):null,especie_compativel:i.tem_recorrencia?i.especie_compativel:null,observacoes_recorrencia:i.tem_recorrencia?i.observacoes_recorrencia:null,classificacao_racao:i.classificacao_racao||null,peso_embalagem:i.peso_embalagem?parseFloat(i.peso_embalagem):null,tabela_nutricional:i.tabela_nutricional||null,tabela_consumo:i.tabela_consumo||null,categoria_racao:i.categoria_racao||null,especies_indicadas:i.especies_indicadas||null,linha_racao_id:i.linha_racao_id?parseInt(i.linha_racao_id):null,porte_animal_id:i.porte_animal_id?parseInt(i.porte_animal_id):null,fase_publico_id:i.fase_publico_id?parseInt(i.fase_publico_id):null,tipo_tratamento_id:i.tipo_tratamento_id?parseInt(i.tipo_tratamento_id):null,sabor_proteina_id:i.sabor_proteina_id?parseInt(i.sabor_proteina_id):null,apresentacao_peso_id:i.apresentacao_peso_id?parseInt(i.apresentacao_peso_id):null};if(console.log(" Enviando dados para API:",jt),s)await Nt({id:r,tipo_produto:i.tipo_produto}),await K9(r,jt),alert("Produto atualizado com sucesso!"),t("/produtos");else{const tr=(await N4(jt)).data.id;i.tipo_produto==="PAI"?(alert("Produto PAI criado com sucesso! Agora cadastre as variaes."),t(`/produtos/${tr}/editar?aba=variacoes`)):(alert("Produto cadastrado com sucesso!"),t("/produtos"))}}catch(jt){console.error("Erro ao salvar produto:",jt),alert(((et=(Te=jt.response)==null?void 0:Te.data)==null?void 0:et.detail)||"Erro ao salvar produto")}finally{$t(!1)}};return Rt?e.jsx("div",{className:"p-6 flex justify-center items-center h-96",children:e.jsx("div",{className:"text-gray-600",children:"Carregando produto..."})}):s&&!i.nome?e.jsx("div",{className:"p-6 flex justify-center items-center h-96",children:e.jsx("div",{className:"text-gray-600",children:"Carregando dados..."})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{i.tipo_produto==="VARIACAO"&&i.produto_pai_id?t(`/produtos/${i.produto_pai_id}/editar?aba=8`):t("/produtos")},className:"text-blue-600 hover:text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Editar Produto":"Novo Produto"}),s&&i.codigo&&e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"SKU:"}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-lg font-mono",children:i.codigo})]}),i.nome&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Descrio:"}),e.jsx("span",{className:"text-gray-600",children:i.nome})]})]})]}),e.jsxs("a",{href:"/cadastros/categorias",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 border border-blue-200 flex items-center gap-2 text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Gerenciar Categorias"]})]})}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:[{id:1,label:"Caractersticas"},{id:2,label:"Imagens"},{id:3,label:"Estoque/Lotes"},{id:4,label:"Fornecedores"},{id:5,label:"Tributao"},{id:6,label:" Recorrncia"},{id:7,label:" Rao"},...i.tipo_produto==="PAI"?[{id:8,label:" Variaes"}]:[],...i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit?[{id:9,label:" Composio"}]:[]].map(X=>e.jsx("button",{onClick:()=>o(X.id),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${n===X.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:X.label},X.id))})}),s&&Me&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-5 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Este produto  continuao de outro"})}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Este produto substitui:"," ",e.jsxs("button",{type:"button",onClick:()=>t(`/produtos/${Me.id}/editar`),className:"font-bold text-blue-700 hover:text-blue-900 hover:underline",children:[Me.codigo," - ",Me.nome]})]}),Me.motivo_descontinuacao&&e.jsxs("div",{className:"bg-white/70 rounded-md px-3 py-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Motivo da substituio:"})," ",e.jsx("span",{className:"text-gray-900",children:Me.motivo_descontinuacao})]})]})]})}),s&&ct&&e.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 p-5 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-7 h-7 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Este produto foi descontinuado"})}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Descontinuado em"," ",e.jsx("span",{className:"font-semibold",children:new Date(ct.data_descontinuacao).toLocaleDateString("pt-BR")})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Substitudo por:"," ",e.jsxs("button",{type:"button",onClick:()=>t(`/produtos/${ct.id}/editar`),className:"font-bold text-red-700 hover:text-red-900 hover:underline",children:[ct.codigo," - ",ct.nome]})]}),ct.motivo_descontinuacao&&e.jsxs("div",{className:"bg-white/70 rounded-md px-3 py-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Motivo:"})," ",e.jsx("span",{className:"text-gray-900",children:ct.motivo_descontinuacao})]})]})]})}),e.jsxs("form",{onSubmit:ht,children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.sku,onChange:X=>Ge("sku",X.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: PROD0001"}),e.jsx("button",{type:"button",onClick:Dt,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:"Gerar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo de Barras"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.codigo_barras,onChange:X=>Ge("codigo_barras",X.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"EAN-13"}),e.jsx("button",{type:"button",onClick:jr,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:"Gerar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Produto *"}),e.jsx("input",{type:"text",value:i.nome,onChange:X=>Ge("nome",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Rao Golden para Ces Adultos 15kg",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsxs("select",{value:i.categoria_id,onChange:X=>Ge("categoria_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),u.map(X=>e.jsx("option",{value:X.id,children:X.nomeFormatado},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca"}),e.jsxs("select",{value:i.marca_id,onChange:X=>Ge("marca_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),x.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:i.departamento_id,onChange:X=>Ge("departamento_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),v.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:i.tipo,onChange:X=>Ge("tipo",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"produto",children:"Produto"}),e.jsx("option",{value:"servico",children:"Servio"}),e.jsx("option",{value:"ambos",children:"Produto e Servio"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),e.jsxs("select",{value:i.unidade,onChange:X=>Ge("unidade",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"UN",children:"UN - Unidade"}),e.jsx("option",{value:"KG",children:"KG - Quilograma"}),e.jsx("option",{value:"G",children:"G - Grama"}),e.jsx("option",{value:"L",children:"L - Litro"}),e.jsx("option",{value:"ML",children:"ML - Mililitro"}),e.jsx("option",{value:"M",children:"M - Metro"}),e.jsx("option",{value:"CX",children:"CX - Caixa"}),e.jsx("option",{value:"PCT",children:"PCT - Pacote"})]})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:i.descricao,onChange:X=>Ge("descricao",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Descrio detalhada do produto..."})]})]}),i.tipo_produto!=="PAI"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsx("input",{type:"text",value:i.preco_custo?`R$ ${Ba(i.preco_custo).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:X=>{const Te=X.target.value.replace(/[^\d,]/g,"").replace(",",".");Ge("preco_custo",Te)},onFocus:X=>{i.preco_custo&&(X.target.value=Ba(i.preco_custo).toFixed(2).replace(".",","),X.target.select())},onBlur:X=>{const Te=Ba(X.target.value.replace(",","."));Ge("preco_custo",Te>0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Markup"}),e.jsx("input",{type:"text",value:i.markup?`${Ba(i.markup).toFixed(2).replace(".",",")}%`:"0,00%",onChange:X=>{const Te=X.target.value.replace(/[^\d,]/g,"").replace(",",".");Ge("markup",Te)},onFocus:X=>{i.markup&&(X.target.value=Ba(i.markup).toFixed(2).replace(".",","),X.target.select())},onBlur:X=>{const Te=Ba(X.target.value.replace(",","."));Ge("markup",Te>=0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00%"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"text",value:i.preco_venda?`R$ ${Ba(i.preco_venda).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:X=>{const Te=X.target.value.replace(/[^\d,]/g,"").replace(",",".");Ge("preco_venda",Te)},onFocus:X=>{i.preco_venda&&(X.target.value=Ba(i.preco_venda).toFixed(2).replace(".",","),X.target.select())},onBlur:X=>{const Te=Ba(X.target.value.replace(",","."));Ge("preco_venda",Te>0?Te.toFixed(2):"")},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo Promocional"}),e.jsx("input",{type:"text",value:i.preco_promocional?`R$ ${Ba(i.preco_promocional).toFixed(2).replace(".",",")}`:"R$ 0,00",onChange:X=>{const Te=X.target.value.replace(/[^\d,]/g,"").replace(",",".");Ge("preco_promocional",Te)},onFocus:X=>{i.preco_promocional&&(X.target.value=Ba(i.preco_promocional).toFixed(2).replace(".",","),X.target.select())},onBlur:X=>{const Te=Ba(X.target.value.replace(",","."));Ge("preco_promocional",Te>0?Te.toFixed(2):"")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R$ 0,00"})]})]}),i.preco_promocional&&i.tipo_produto!=="PAI"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incio da Promoo"}),e.jsx("input",{type:"date",value:i.data_inicio_promocao,onChange:X=>Ge("data_inicio_promocao",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fim da Promoo"}),e.jsx("input",{type:"date",value:i.data_fim_promocao,onChange:X=>Ge("data_fim_promocao",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),!s&&e.jsx("div",{className:"border-t pt-6 mt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Evoluo do Produto"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Se,onChange:X=>{me(X.target.checked),X.target.checked||(Ee(null),Ge("produto_predecessor_id",null),Ge("motivo_descontinuacao",""))},className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Este produto substitui outro"})]})]}),Se&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 border-amber-300",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Buscar Produto Anterior"}),e.jsx("input",{type:"text",placeholder:"Digite o nome ou cdigo do produto...",value:lt,onChange:async X=>{if(Ke(X.target.value),X.target.value.length>=2)try{const Te=await U.get("/produtos/",{params:{busca:X.target.value,page_size:10}});je(Te.data.items||[])}catch(Te){console.error("Erro ao buscar produtos:",Te)}else je([])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),_e.length>0&&e.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto border border-gray-300 rounded-lg",children:_e.map(X=>{var Te;return e.jsxs("div",{onClick:()=>{Ee(X),Ge("produto_predecessor_id",X.id),Ke(""),je([])},className:"p-3 hover:bg-amber-50 cursor-pointer border-b border-gray-200 last:border-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:X.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",X.codigo," | Preo: R$ ",(Te=X.preco_venda)==null?void 0:Te.toFixed(2)]})]},X.id)})}),ut&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-300 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:" Produto Selecionado:"}),e.jsx("div",{className:"font-semibold text-gray-900 mt-1",children:ut.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",ut.codigo]})]}),e.jsx("button",{type:"button",onClick:()=>{Ee(null),Ge("produto_predecessor_id",null)},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),ut&&e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 border-amber-300",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Motivo da Substituio"}),e.jsxs("select",{value:i.motivo_descontinuacao,onChange:X=>Ge("motivo_descontinuacao",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent mb-2",children:[e.jsx("option",{value:"",children:"Selecione o motivo..."}),e.jsx("option",{value:"Mudana de embalagem",children:"Mudana de embalagem"}),e.jsx("option",{value:"Mudana de peso/gramatura",children:"Mudana de peso/gramatura"}),e.jsx("option",{value:"Reformulao do produto",children:"Reformulao do produto"}),e.jsx("option",{value:"Mudana de fornecedor",children:"Mudana de fornecedor"}),e.jsx("option",{value:"Upgrade de linha",children:"Upgrade de linha"}),e.jsx("option",{value:"Outro",children:"Outro (descrever abaixo)"})]}),i.motivo_descontinuacao==="Outro"&&e.jsx("textarea",{value:i.motivo_descontinuacao,onChange:X=>Ge("motivo_descontinuacao",X.target.value),placeholder:"Descreva o motivo...",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[e.jsx("strong",{children:" O que acontecer:"}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:['O produto "',e.jsx("strong",{children:ut.nome}),'" ser marcado como ',e.jsx("strong",{children:"descontinuado"})]}),e.jsx("li",{children:"Todo o histrico de vendas ser mantido e poder ser consultado"}),e.jsx("li",{children:"Voc poder gerar relatrios consolidados somando ambos os produtos"})]})]})]})]}),!Se&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Marque esta opo se este produto substitui outro j cadastrado (ex: mudana de embalagem de 350g para 300g). Isso permite manter o histrico consolidado de vendas."})]})}),!s&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Tipo do Produto"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Escolha o tipo de produto que est cadastrando:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="SIMPLES"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_simples",name:"tipo_produto",value:"SIMPLES",checked:i.tipo_produto==="SIMPLES",onChange:X=>{Ge("tipo_produto","SIMPLES"),l(Te=>({...Te,composicao_kit:[],e_kit_fisico:!1}))},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_simples",className:"font-medium text-gray-900 cursor-pointer",children:" Produto Simples"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Produto nico, vendvel, com controle de estoque prprio."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="PAI"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_variacoes",name:"tipo_produto",value:"PAI",checked:i.tipo_produto==="PAI",onChange:X=>{Ge("tipo_produto","PAI"),l(Te=>({...Te,preco_custo:"",preco_venda:"",preco_promocional:"",composicao_kit:[],e_kit_fisico:!1}))},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_variacoes",className:"font-medium text-gray-900 cursor-pointer",children:" Produto com Variaes"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Produto agrupador (no vendvel). Ter variaes com SKU, preo e estoque prprios.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Camiseta (produto pai)  P, M, G (variaes)"})]}),i.tipo_produto==="PAI"&&!s&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[" ",e.jsx("strong",{children:"Salve o produto primeiro"}),' para depois cadastrar as variaes na aba "Variaes".']}),i.tipo_produto==="PAI"&&s&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:' Produto salvo! V para a aba " Variaes" para cadastrar as variaes.'})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 hover:border-blue-400 transition-colors",style:{borderColor:i.tipo_produto==="KIT"?"#3b82f6":"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"tipo_kit",name:"tipo_produto",value:"KIT",checked:i.tipo_produto==="KIT",onChange:X=>{Ge("tipo_produto","KIT"),o(9)},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"tipo_kit",className:"font-medium text-gray-900 cursor-pointer",children:" Produto com Composio (Kit)"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Kit composto por outros produtos existentes.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Kit Banho (shampoo + condicionador + toalha)"})]}),i.tipo_produto==="KIT"&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[" ",e.jsx("strong",{children:'Aba " Composio" aberta!'})," V para a aba Composio para definir se o kit ter estoque virtual ou fsico e adicionar os produtos que o compem."]})]})]})]})]})}),s&&i.tipo_produto==="VARIACAO"&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Composio (Kit)"]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border-2 border-gray-300",children:[e.jsx("input",{type:"checkbox",id:"variacao_e_kit",checked:!!i.tipo_kit,onChange:X=>{X.target.checked?(Ge("tipo_kit","VIRTUAL"),Ge("e_kit_fisico",!1),o(9)):(Ge("tipo_kit",null),Ge("composicao_kit",[]),Ge("e_kit_fisico",!1))},className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"variacao_e_kit",className:"font-medium text-gray-900 cursor-pointer text-lg",children:" Esta variao  um KIT (possui composio)"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Marque esta opo se esta variao  composta por outros produtos.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Exemplo: Camiseta P - Kit (camiseta + brinde)"})]}),i.tipo_kit&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[" ",e.jsx("strong",{children:"Variao configurada como KIT!"}),' V para a aba " Composio" para definir os produtos que compem este kit.']})]})]})]})})]}),n===2&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens do Produto"}),e.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:[ge?"Enviando...":"+ Adicionar Imagens",e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:ne,disabled:ge,className:"hidden",multiple:!0})]})]}),f.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Nenhuma imagem cadastrada"}),e.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Imagem" para enviar fotos do produto'})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:f.map(X=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:`http://localhost:8000${X.url}`,alt:"Imagem do produto",className:"w-full h-48 object-cover"}),X.e_principal&&e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Principal"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[!X.e_principal&&e.jsx("button",{type:"button",onClick:()=>se(X.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",title:"Definir como principal",children:" Principal"}),e.jsx("button",{type:"button",onClick:()=>de(X.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",title:"Excluir",children:" Excluir"})]})]},X.id))}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Dica:"}),' A primeira imagem marcada como "Principal" ser exibida na listagem de produtos. Formatos aceitos: JPG, PNG, WebP (mx. 5MB).']})})]}):e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Salve o produto primeiro para adicionar imagens"})]})}),n===3&&e.jsx("div",{className:"space-y-6",children:i.tipo_produto==="PAI"?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-blue-300 rounded-lg bg-blue-50",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("p",{className:"mt-4 text-lg font-medium text-blue-900",children:"Produto com Variaes"}),e.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:["Produtos PAI no possuem estoque prprio.",e.jsx("br",{}),"O controle de estoque  feito individualmente nas variaes."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.controle_lote,onChange:X=>Ge("controle_lote",X.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Controlar Estoque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:i.estoque_minimo,onChange:X=>Ge("estoque_minimo",X.target.value),disabled:!i.controle_lote,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:i.estoque_maximo,onChange:X=>Ge("estoque_maximo",X.target.value),disabled:!i.controle_lote,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",placeholder:"0"})]})]}),s&&i.controle_lote&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lotes (FIFO)"}),e.jsx("button",{type:"button",onClick:()=>it(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"+ Nova Entrada"})]}),g.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum lote cadastrado"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lote"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Disponvel"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fabricao"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Validade"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo Unit."}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(X=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:X.nome_lote||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:X.quantidade_disponivel}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:zy(X.data_fabricacao)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:zy(X.data_validade)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:wl(X.custo_unitario)}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>P(X),className:"text-blue-600 hover:text-blue-800",title:"Editar lote",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>te(X),className:"text-red-600 hover:text-red-800",title:"Excluir lote",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},X.id))})]})})]}),!s&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Salve o produto primeiro para gerenciar lotes"})]})}),n===4&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Fornecedores do Produto"}),e.jsx("button",{type:"button",onClick:fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Adicionar Fornecedor"})]}),N.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Nenhum fornecedor vinculado"}),e.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Fornecedor" para vincular fornecedores a este produto'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Preo Custo"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Prazo (dias)"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Principal"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(X=>e.jsxs("tr",{className:X.ativo?"":"opacity-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:X.fornecedor_nome}),e.jsx("p",{className:"text-xs text-gray-500",children:X.fornecedor_cpf_cnpj})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:X.codigo_fornecedor||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:X.preco_custo?wl(X.preco_custo):"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:X.prazo_entrega||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:X.estoque_fornecedor||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:X.e_principal&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Principal"})}),e.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>he(X),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Editar"}),e.jsx("button",{type:"button",onClick:()=>ke(X.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]})]},X.id))})]})})]}):e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsx("p",{className:"text-gray-600",children:"Salve o produto primeiro para vincular fornecedores"})})}),n===5&&e.jsxs("div",{className:"space-y-6",children:[s&&i.tributacao&&e.jsxs("div",{className:"mb-4 flex gap-2",children:[i.tributacao.origem==="produto_legado"&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-800",children:" Legado"}),(i.tributacao.origem==="produto_fiscal_v2"||i.tributacao.origem==="kit_fiscal_v2")&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-200 text-yellow-800",children:" Personalizado"}),i.tributacao.herdado_da_empresa&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-800",children:" Herdado da empresa"})]}),s&&((Pt=i.tributacao)==null?void 0:Pt.herdado_da_empresa)===!0&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Esta configurao fiscal est sendo herdada da empresa. Para editar, personalize o fiscal deste produto."}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",onClick:()=>l(X=>({...X,tributacao:{...X.tributacao,herdado_da_empresa:!1}})),children:" Personalizar fiscal deste produto"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Origem",e.jsx("span",{className:"tooltip-icon",title:"Define se o produto  nacional ou importado. Impacta o clculo do ICMS.",children:""})]}),e.jsxs("select",{value:((Qt=i.tributacao)==null?void 0:Qt.origem_mercadoria)||"0",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,origem_mercadoria:X.target.value}})),disabled:((rr=i.tributacao)==null?void 0:rr.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"0",children:"0 - Nacional"}),e.jsx("option",{value:"1",children:"1 - Estrangeira (Importao direta)"}),e.jsx("option",{value:"2",children:"2 - Estrangeira (Adquirida no mercado interno)"}),e.jsx("option",{value:"3",children:"3 - Nacional (> 40% contedo importado)"}),e.jsx("option",{value:"4",children:"4 - Nacional (Conforme processo produtivo bsico)"}),e.jsx("option",{value:"5",children:"5 - Nacional (< 40% contedo importado)"}),e.jsx("option",{value:"6",children:"6 - Estrangeira (Importao direta sem similar)"}),e.jsx("option",{value:"7",children:"7 - Estrangeira (Mercado interno sem similar)"}),e.jsx("option",{value:"8",children:"8 - Nacional (> 70% contedo importado)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["NCM",e.jsx("span",{className:"tooltip-icon",title:"Nomenclatura Comum do Mercosul. Classificao fiscal do produto, base para impostos.",children:""})]}),e.jsx("input",{type:"text",value:((Ur=i.tributacao)==null?void 0:Ur.ncm)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,ncm:X.target.value}})),disabled:((Us=i.tributacao)==null?void 0:Us.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"00000000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CEST",e.jsx("span",{className:"tooltip-icon",title:"Cdigo Especificador da Substituio Tributria. Para produtos sujeitos a ICMS ST.",children:""})]}),e.jsx("input",{type:"text",value:(($n=i.tributacao)==null?void 0:$n.cest)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,cest:X.target.value}})),disabled:((Rn=i.tributacao)==null?void 0:Rn.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0000000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CFOP",e.jsx("span",{className:"tooltip-icon",title:"Cdigo Fiscal de Operaes e Prestaes. Define a natureza da operao de venda.",children:""})]}),e.jsx("input",{type:"text",value:((is=i.tributacao)==null?void 0:is.cfop)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,cfop:X.target.value}})),disabled:((Ho=i.tributacao)==null?void 0:Ho.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota ICMS (%)",e.jsx("span",{className:"tooltip-icon",title:"Imposto sobre Circulao de Mercadorias. Alquota estadual aplicada na venda. Impacta o preo final.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((ls=i.tributacao)==null?void 0:ls.icms_aliquota)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,icms_aliquota:X.target.value}})),disabled:((p0=i.tributacao)==null?void 0:p0.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota PIS (%)",e.jsx("span",{className:"tooltip-icon",title:"Programa de Integrao Social. Contribuio federal sobre a venda. Geralmente 1,65%.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((h0=i.tributacao)==null?void 0:h0.pis_aliquota)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,pis_aliquota:X.target.value}})),disabled:((f0=i.tributacao)==null?void 0:f0.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alquota COFINS (%)",e.jsx("span",{className:"tooltip-icon",title:"Contribuio para Financiamento da Seguridade Social. Contribuio federal sobre a venda. Geralmente 7,6%.",children:""})]}),e.jsx("input",{type:"number",step:"0.01",value:((g0=i.tributacao)==null?void 0:g0.cofins_aliquota)||"",onChange:X=>l(Te=>({...Te,tributacao:{...Te.tributacao,cofins_aliquota:X.target.value}})),disabled:((Ko=i.tributacao)==null?void 0:Ko.herdado_da_empresa)===!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0,00"})]})]})]}),n===6&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Sistema de Recorrncia (Fase 1)"}),e.jsxs("div",{className:"mt-2 text-sm text-purple-700",children:[e.jsx("p",{children:"Configure produtos que precisam ser recomprados periodicamente (vacinas, antipulgas, raes)."}),e.jsx("p",{className:"mt-1",children:"O sistema criar lembretes automticos para notificar clientes 7 dias antes."})]})]})]})}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"tem_recorrencia",checked:i.tem_recorrencia,onChange:X=>Ge("tem_recorrencia",X.target.checked),className:"h-5 w-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"tem_recorrencia",className:"ml-3",children:[e.jsx("span",{className:"text-base font-medium text-gray-900",children:"Produto com Recorrncia"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ativar lembretes automticos para este produto"})]})]}),i.tem_recorrencia&&e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recorrncia *"}),e.jsxs("select",{value:i.tipo_recorrencia,onChange:X=>{Ge("tipo_recorrencia",X.target.value),X.target.value==="daily"?Ge("intervalo_dias","1"):X.target.value==="weekly"?Ge("intervalo_dias","7"):X.target.value==="monthly"?Ge("intervalo_dias","30"):X.target.value==="yearly"&&Ge("intervalo_dias","365")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"daily",children:"Diria"}),e.jsx("option",{value:"weekly",children:"Semanal (7 dias)"}),e.jsx("option",{value:"monthly",children:"Mensal (30 dias)"}),e.jsx("option",{value:"yearly",children:"Anual (365 dias)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (em dias) *"}),e.jsx("input",{type:"number",min:"1",value:i.intervalo_dias,onChange:X=>Ge("intervalo_dias",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 30 (para Nexgard)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplos: Nexgard = 30, Vacina Anual = 365"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Doses (opcional)"}),e.jsx("input",{type:"number",min:"1",value:i.numero_doses,onChange:X=>Ge("numero_doses",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 3 (para vacina com 3 doses)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Se vazio, ser recorrente indefinidamente. Se preenchido (ex: 3), o sistema finalizar aps a ltima dose."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compatibilidade por Espcie"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"both",checked:i.especie_compativel==="both",onChange:X=>Ge("especie_compativel",X.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ces e Gatos"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"dog",checked:i.especie_compativel==="dog",onChange:X=>Ge("especie_compativel",X.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Apenas Ces"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especie_compativel",value:"cat",checked:i.especie_compativel==="cat",onChange:X=>Ge("especie_compativel",X.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Apenas Gatos"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes / Instrues"}),e.jsx("textarea",{value:i.observacoes_recorrencia,onChange:X=>Ge("observacoes_recorrencia",X.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Aplicar mensalmente no mesmo dia. No atrasar mais de 5 dias."})]}),i.intervalo_dias&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-900 mb-2",children:" Preview do Lembrete"}),e.jsxs("div",{className:"text-sm text-purple-700 space-y-1",children:[e.jsxs("p",{children:[" Cliente ser notificado ",e.jsx("strong",{children:"7 dias antes"})," da prxima dose"]}),e.jsxs("p",{children:[" Intervalo configurado: ",e.jsxs("strong",{children:[i.intervalo_dias," dias"]})]}),e.jsx("p",{children:" Aps a compra, um novo lembrete ser criado automaticamente"}),i.especie_compativel!=="both"&&e.jsx("p",{className:"mt-2 text-purple-800",children:" Sistema validar se o pet  compatvel na hora da venda"})]})]})]})]}),n===7&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Calculadora de Rao (Fase 2)"}),e.jsxs("div",{className:"mt-2 text-sm text-orange-700",children:[e.jsx("p",{children:"Configure informaes de rao para usar na calculadora de durao e custo."}),e.jsx("p",{className:"mt-1",children:"A IA usar esses dados para recomendar raes aos clientes."})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" rao?"}),e.jsxs("select",{value:i.classificacao_racao||"nao",onChange:X=>{const Te=X.target.value;l(et=>({...et,classificacao_racao:Te,linha_racao_id:Te==="sim"?et.linha_racao_id:"",porte_animal_id:Te==="sim"?et.porte_animal_id:"",fase_publico_id:Te==="sim"?et.fase_publico_id:"",tipo_tratamento_id:Te==="sim"?et.tipo_tratamento_id:"",sabor_proteina_id:Te==="sim"?et.sabor_proteina_id:"",apresentacao_peso_id:Te==="sim"?et.apresentacao_peso_id:"",peso_embalagem:Te==="sim"?et.peso_embalagem:"",categoria_racao:Te==="sim"?et.categoria_racao:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"nao",children:"No"}),e.jsx("option",{value:"sim",children:"Sim"})]})]})}),i.classificacao_racao==="sim"&&e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-4",children:" Informaes Detalhadas da Rao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Linha"}),e.jsxs("select",{value:i.linha_racao_id,onChange:X=>Ge("linha_racao_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),C.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte do Animal"}),e.jsxs("select",{value:i.porte_animal_id,onChange:X=>Ge("porte_animal_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),T.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fase/Pblico"}),e.jsxs("select",{value:i.fase_publico_id,onChange:X=>{const Te=X.target.value,et=A.find(jt=>String(jt.id)===String(Te));l(jt=>({...jt,fase_publico_id:Te,categoria_racao:et?et.nome:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),A.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tratamento ",e.jsx("span",{className:"text-gray-400",children:"(Opcional)"})]}),e.jsxs("select",{value:i.tipo_tratamento_id,onChange:X=>Ge("tipo_tratamento_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Nenhum"}),V.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sabor/Protena"}),e.jsxs("select",{value:i.sabor_proteina_id,onChange:X=>Ge("sabor_proteina_id",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),L.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apresentao (Peso)"}),e.jsxs("select",{value:i.apresentacao_peso_id,onChange:X=>{const Te=X.target.value,et=D.find(jt=>String(jt.id)===String(Te));l(jt=>({...jt,apresentacao_peso_id:Te,peso_embalagem:et?String(et.peso_kg):jt.peso_embalagem}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione..."}),D.map(X=>e.jsxs("option",{value:X.id,children:[X.peso_kg,"kg"]},X.id))]})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-3",children:[" ",e.jsx("strong",{children:"Dica:"})," Essas informaes ajudam a IA a recomendar a rao ideal para cada pet no PDV. Voc pode gerenciar as opes disponveis em ",e.jsx("strong",{children:"Cadastros > Opes de Rao"}),"."]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Espcies Indicadas"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"both",checked:i.especies_indicadas==="both",onChange:X=>Ge("especies_indicadas",X.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ambos"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"dog",checked:i.especies_indicadas==="dog",onChange:X=>Ge("especies_indicadas",X.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Ces"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"especies_indicadas",value:"cat",checked:i.especies_indicadas==="cat",onChange:X=>Ge("especies_indicadas",X.target.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:" Gatos"})]})]})]})}),e.jsx("input",{type:"hidden",value:i.tabela_nutricional}),e.jsx("div",{children:e.jsx(lB,{value:i.tabela_consumo,onChange:X=>Ge("tabela_consumo",X),pesoEmbalagem:parseFloat(i.peso_embalagem)||null})}),i.peso_embalagem&&i.classificacao_racao&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-orange-900 mb-2",children:" Preview da Calculadora"}),e.jsxs("div",{className:"text-sm text-orange-700 space-y-1",children:[e.jsxs("p",{children:[" Peso: ",e.jsxs("strong",{children:[i.peso_embalagem,"kg"]})]}),e.jsxs("p",{children:[" Classificao: ",e.jsx("strong",{children:i.classificacao_racao.replace("_"," ")})]}),i.categoria_racao&&e.jsxs("p",{children:[" Categoria: ",e.jsx("strong",{children:i.categoria_racao})]}),i.tabela_consumo&&e.jsx("p",{className:"text-green-600",children:" Tabela de consumo configurada"}),!i.tabela_consumo&&e.jsx("p",{className:"text-yellow-600",children:" Sem tabela de consumo (usar clculo genrico)"}),e.jsx("p",{className:"mt-2 text-orange-800",children:" Use a Calculadora de Rao para ver durao e custo/dia"})]})]})]}),n===8&&i.tipo_produto==="PAI"&&e.jsx("div",{className:"space-y-6",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["Variaes do Produto: ",i.nome]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Cadastre as variaes deste produto. Cada variao  um produto vendvel independente com seu prprio SKU, preo e estoque."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-md font-semibold",children:"Variaes Cadastradas"}),e.jsx("button",{type:"button",onClick:()=>M(!k),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:k?" Cancelar":" Nova Variao"})]}),k&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:[e.jsx("h5",{className:"font-semibold mb-3",children:"Cadastrar Nova Variao"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),e.jsx("input",{type:"text",value:F.sku,onChange:X=>I({...F,sku:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: PROD001-P"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Complementar *"}),e.jsx("input",{type:"text",value:F.nome,onChange:X=>I({...F,nome:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: Tamanho P"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo de Barras"}),e.jsx("input",{type:"text",value:F.codigo_barras,onChange:X=>I({...F,codigo_barras:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"EAN-13"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsx("input",{type:"number",step:"0.01",value:F.preco_custo,onChange:X=>I({...F,preco_custo:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"number",step:"0.01",value:F.preco_venda,onChange:X=>I({...F,preco_venda:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:F.estoque_minimo,onChange:X=>I({...F,estoque_minimo:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.e_kit,onChange:X=>I({...F,e_kit:X.target.checked}),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:" Esta variao  um KIT (possui composio)"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Se marcado, voc poder definir a composio do kit aps salvar a variao."})]})]})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{M(!1),I({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{var X,Te;if(!F.sku||!F.nome||!F.preco_venda){alert("Preencha SKU, Nome e Preo de Venda");return}try{const et={codigo:F.sku,nome:`${i.nome} - ${F.nome}`,codigo_barras:F.codigo_barras||null,preco_custo:parseFloat(F.preco_custo)||0,preco_venda:parseFloat(F.preco_venda),estoque_minimo:parseInt(F.estoque_minimo)||0,tipo_produto:"VARIACAO",produto_pai_id:parseInt(r),categoria_id:i.categoria_id||null,marca_id:i.marca_id||null,unidade:i.unidade||"UN"};F.e_kit&&(et.tipo_kit="VIRTUAL",et.e_kit_fisico=!1,et.composicao_kit=[]),await N4(et),alert("Variao cadastrada com sucesso!"),M(!1),I({sku:"",nome:"",codigo_barras:"",preco_custo:"",preco_venda:"",estoque_minimo:0,e_kit:!1,e_kit_fisico:!1,composicao_kit:[]});const jt=await Vb(r);B(jt.data)}catch(et){console.error("Erro ao cadastrar variao:",et),alert(((Te=(X=et.response)==null?void 0:X.data)==null?void 0:Te.detail)||"Erro ao cadastrar variao")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Salvar Variao"})]})]}),R.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"Nenhuma variao cadastrada ainda."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Clique em "Nova Variao" para comear.'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cdigo de Barras"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:X.codigo}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:X.nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:X.codigo_barras||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:["R$ ",(X.preco_custo||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-900 font-semibold",children:["R$ ",X.preco_venda.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:e.jsx("span",{className:`font-semibold ${X.estoque_atual<=X.estoque_minimo?"text-red-600":"text-green-600"}`,children:X.estoque_atual||0})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{type:"button",onClick:()=>t(`/produtos/${X.id}/editar`),className:"text-blue-600 hover:text-blue-800 mr-2",title:"Editar",children:""}),e.jsx("button",{type:"button",onClick:async()=>{if(confirm(`Deseja excluir a variao ${X.nome}?`))try{await By(X.id),alert("Variao excluda com sucesso!");const Te=await Vb(r);B(Te.data||[])}catch(Te){console.error("Erro ao excluir variao:",Te),alert("Erro ao excluir variao")}},className:"text-red-600 hover:text-red-800",title:"Excluir",children:""})]})]},X.id))})]})})]})]}):e.jsxs("div",{className:"text-center py-16 border-2 border-dashed border-yellow-300 rounded-lg bg-yellow-50",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("p",{className:"mt-4 text-xl font-semibold text-yellow-900",children:"Aba Bloqueada"}),e.jsx("p",{className:"mt-2 text-sm text-yellow-800",children:"Salve o produto primeiro para habilitar o cadastro de variaes."}),e.jsx("p",{className:"mt-4 text-xs text-yellow-700",children:"Aps salvar, voc ser redirecionado automaticamente para cadastrar as variaes."})]})}),n===9&&(i.tipo_produto==="KIT"||i.tipo_produto==="VARIACAO"&&i.tipo_kit)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Tipo de Estoque do Kit"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{onClick:()=>Ge("e_kit_fisico",!1),className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${i.e_kit_fisico?"border-gray-300 bg-white hover:border-blue-300":"border-blue-500 bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"tipo_estoque_kit",checked:!i.e_kit_fisico,onChange:()=>Ge("e_kit_fisico",!1),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Estoque Virtual"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["O estoque  calculado ",e.jsx("strong",{children:"automaticamente"})," com base nos componentes disponveis."]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:" No permite movimentao manual"}),e.jsx("div",{children:" Estoque = menor disponibilidade dos componentes"}),e.jsx("div",{children:" Ideal para kits montados sob demanda"})]})]})]})}),e.jsx("div",{onClick:()=>Ge("e_kit_fisico",!0),className:`cursor-pointer p-4 border-2 rounded-lg transition-all ${i.e_kit_fisico?"border-green-500 bg-green-50":"border-gray-300 bg-white hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"radio",name:"tipo_estoque_kit",checked:i.e_kit_fisico,onChange:()=>Ge("e_kit_fisico",!0),className:"mt-1 h-4 w-4 text-green-600 focus:ring-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h4",{className:"font-semibold text-gray-900",children:"Estoque Fsico"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["O kit possui estoque ",e.jsx("strong",{children:"prprio e independente"})," dos componentes."]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:" Permite movimentao manual"}),e.jsx("div",{children:" Entrada: diminui componentes (montou kits)"}),e.jsx("div",{children:" Ideal para kits pr-montados"})]})]})]})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Composio do Kit"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Defina quais produtos compem este kit e as quantidades necessrias de cada um."}),!i.e_kit_fisico&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:[e.jsx("strong",{children:" Estoque Virtual Ativo"}),e.jsx("br",{}),"O estoque deste kit ser calculado automaticamente baseado nos componentes.",e.jsx("br",{}),e.jsx("span",{className:"text-xs italic",children:"Estoque do kit = menor disponibilidade entre os componentes (considerando as quantidades necessrias)"})]}),i.e_kit_fisico&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[e.jsx("strong",{children:" Estoque Fsico Ativo"}),e.jsx("br",{}),e.jsx("strong",{children:"Entrada no kit:"})," Os componentes sero automaticamente DIMINUDOS (unitrios viraram kit).",e.jsx("br",{}),e.jsx("strong",{children:"Sada manual:"})," Voc poder escolher se os componentes voltam ao estoque (desfez o kit) ou no (perda/roubo)."]})]})]})}),!i.e_kit_fisico&&i.composicao_kit.length>0&&e.jsx("div",{className:"bg-white border-2 border-green-300 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Estoque Virtual do Kit"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calculado automaticamente"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600",children:ie}),e.jsx("p",{className:"text-xs text-gray-500",children:"kits disponveis"})]})]})}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-5 bg-gray-50",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Adicionar Produto ao Kit"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsxs("select",{value:W,onChange:X=>ae(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione um produto..."}),z.map(X=>e.jsxs("option",{value:X.id,children:["[",X.codigo,"] ",X.nome," - Estoque: ",X.estoque_atual||0]},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:ee,onChange:X=>ce(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1"})]})]}),e.jsxs("button",{type:"button",onClick:Ze,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar ao Kit"]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Produtos no Kit (",i.composicao_kit.length,")"]}),i.composicao_kit.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Nenhum produto adicionado ao kit ainda"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Kits Possveis"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.composicao_kit.map((X,Te)=>{const et=Math.floor(X.estoque_componente/X.quantidade),jt=et===ie&&ie>0;return e.jsxs("tr",{className:`hover:bg-gray-50 ${jt?"bg-yellow-50":""}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:X.produto_sku||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[X.produto_nome,jt&&e.jsx("span",{className:"ml-2 text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded",children:" LIMITADOR"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-900 font-semibold",children:X.quantidade}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:X.estoque_componente||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsx("span",{className:`font-semibold ${et===0?"text-red-600":et<5?"text-yellow-600":"text-green-600"}`,children:et})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>tt(X.produto_id),className:"text-red-600 hover:text-red-800",title:"Remover do kit",children:""})})]},X.produto_id)})})]})})]}),i.composicao_kit.length>0&&ie===0&&!i.e_kit_fisico&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Kit sem estoque disponvel!"}),e.jsx("p",{className:"mt-1",children:"Pelo menos um dos componentes est sem estoque suficiente para montar o kit."})]})]})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/produtos"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:It,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:It?"Salvando...":s?"Atualizar":"Cadastrar"})]})]}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Nova Entrada de Estoque"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:rt.quantidade,onChange:X=>xe({...rt,quantidade:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex justify-between items-center",children:[e.jsx("span",{children:"Nmero do Lote"}),e.jsx("button",{type:"button",onClick:()=>{const X=`LOTE-${new Date().toISOString().split("T")[0].replace(/-/g,"")}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`;xe({...rt,nome_lote:X})},className:"text-xs text-blue-600 hover:text-blue-800",children:"Gerar Sugesto"})]}),e.jsx("input",{type:"text",value:rt.nome_lote,onChange:X=>xe({...rt,nome_lote:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-20260105-001 (deixe vazio para gerar automaticamente)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fabricao"}),e.jsx("input",{type:"date",value:rt.data_fabricacao,onChange:X=>xe({...rt,data_fabricacao:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Validade"}),e.jsx("input",{type:"date",value:rt.data_validade,onChange:X=>xe({...rt,data_validade:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:rt.preco_custo,onChange:X=>xe({...rt,preco_custo:X.target.value}),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>it(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Registrar Entrada"})]})]})}),Oe&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Editar Lote"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Lote *"}),e.jsx("input",{type:"text",value:Y.nome_lote,onChange:X=>ue({...Y,nome_lote:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do lote"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:Y.quantidade_inicial,onChange:X=>ue({...Y,quantidade_inicial:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Fabricao"}),e.jsx("input",{type:"date",value:Y.data_fabricacao,onChange:X=>ue({...Y,data_fabricacao:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Validade"}),e.jsx("input",{type:"date",value:Y.data_validade,onChange:X=>ue({...Y,data_validade:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Unitrio *"}),e.jsx("input",{type:"number",step:"0.01",value:Y.custo_unitario,onChange:X=>ue({...Y,custo_unitario:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{Ye(!1),ue(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar Alteraes"})]})]})}),qe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:ve?"Editar Fornecedor":"Adicionar Fornecedor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fornecedor *"}),e.jsxs("select",{value:Le.fornecedor_id,onChange:X=>Q({...Le,fornecedor_id:X.target.value}),disabled:!!ve,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Selecione..."}),w.map(X=>e.jsx("option",{value:X.id,children:X.nome},X.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo no Fornecedor"}),e.jsx("input",{type:"text",value:Le.codigo_fornecedor,onChange:X=>Q({...Le,codigo_fornecedor:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"SKU-FORNECEDOR-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Custo"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:Le.preco_custo,onChange:X=>Q({...Le,preco_custo:X.target.value}),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0,00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prazo de Entrega (dias)"}),e.jsx("input",{type:"number",value:Le.prazo_entrega,onChange:X=>Q({...Le,prazo_entrega:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estoque no Fornecedor"}),e.jsx("input",{type:"number",step:"0.01",value:Le.estoque_fornecedor,onChange:X=>Q({...Le,estoque_fornecedor:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Le.e_principal,onChange:X=>Q({...Le,e_principal:X.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Fornecedor Principal"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>le(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:ye,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar"})]})]})})]})}function cB(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState({totalEntradas:0,totalSaidas:0,valorTotal:0}),[d,u]=j.useState({data_inicio:h("mes"),data_fim:v(),produto_id:"",tipo_movimentacao:""}),[m,x]=j.useState("mes");j.useEffect(()=>{p()},[]),j.useEffect(()=>{g()},[d]);function h(w){const S=new Date,C=new Date(S);switch(w){case"mes":C.setDate(1);break;case"3meses":C.setMonth(S.getMonth()-3);break;case"6meses":C.setMonth(S.getMonth()-6);break;case"ano":C.setMonth(0),C.setDate(1);break;default:return""}return C.toISOString().split("T")[0]}function v(){return new Date().toISOString().split("T")[0]}const p=async()=>{try{const w=await tP();w.data&&Array.isArray(w.data.items)?n(w.data.items):Array.isArray(w.data)?n(w.data):(console.warn("Resposta de produtos no  um array:",w.data),n([]))}catch(w){console.error("Erro ao carregar produtos:",w),n([])}},g=async()=>{var w,S,C;try{i(!0);const T=(await sB(d)).data;let q=[];T&&Array.isArray(T.movimentacoes)?q=T.movimentacoes:Array.isArray(T)?q=T:console.warn("Resposta de movimentaes no  um array:",T),a(q);const A=q.reduce((O,V)=>(O.totalEntradas+=V.entrada||0,O.totalSaidas+=V.saida||0,O.valorTotal+=V.valor_total||0,O),{totalEntradas:0,totalSaidas:0,valorTotal:0});c(A)}catch(E){console.error("Erro ao carregar relatrio:",E),console.error("Detalhes do erro:",(w=E.response)==null?void 0:w.data),alert(`Erro ao carregar relatrio: ${((C=(S=E.response)==null?void 0:S.data)==null?void 0:C.detail)||E.message}`),a([])}finally{i(!1)}},y=w=>{x(w),w==="personalizado"||u({...d,data_inicio:h(w),data_fim:v()})},f=(w,S)=>{u(C=>({...C,[w]:S}))},b=()=>{const w=["Data","Produto","Cdigo","Entrada","Sada","Estoque","Tipo","Valor","Usurio","N Pedido","Lanamento"],S=r.map(q=>[q.data||"",q.produto_nome||"",q.codigo||"",q.entrada||0,q.saida||0,q.estoque||0,q.tipo||"",wl(q.valor_total||0),q.usuario||"",q.numero_pedido||"",q.lancamento||""]);let C=w.join(";")+`
`;S.forEach(q=>{C+=q.join(";")+`
`});const E=new Blob([C],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");T.href=URL.createObjectURL(E),T.download=`relatorio_movimentacoes_${new Date().toISOString().split("T")[0]}.csv`,T.click()},N=r.reduce((w,S)=>{const E=new Date(S.data_movimentacao).toLocaleDateString("pt-BR",{month:"short",year:"numeric"});return w[E]||(w[E]=[]),w[E].push(S),w},{}),_=w=>({entrada:"bg-green-100 text-green-800",saida:"bg-red-100 text-red-800",ajuste:"bg-yellow-100 text-yellow-800",transferencia:"bg-blue-100 text-blue-800"})[w]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatrio de Movimentaes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Histrico completo de entradas e sadas de estoque"})]}),e.jsx("button",{onClick:()=>t("/produtos"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Voltar"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"ltimo Ms",value:"mes"},{label:"3 Meses",value:"3meses"},{label:"6 Meses",value:"6meses"},{label:"Este Ano",value:"ano"},{label:"Personalizado",value:"personalizado"}].map(w=>e.jsx("button",{onClick:()=>y(w.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m===w.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w.label},w.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:d.data_inicio,onChange:w=>f("data_inicio",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:d.data_fim,onChange:w=>f("data_fim",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsxs("select",{value:d.produto_id,onChange:w=>f("produto_id",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Produtos"}),s.map(w=>e.jsxs("option",{value:w.id,children:[w.codigo||w.sku," - ",w.nome]},w.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:d.tipo_movimentacao,onChange:w=>f("tipo_movimentacao",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Tipos"}),e.jsx("option",{value:"entrada",children:"Entrada"}),e.jsx("option",{value:"saida",children:"Sada"}),e.jsx("option",{value:"ajuste",children:"Ajuste"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Entradas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.totalEntradas.toFixed(2)})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Sadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.totalSaidas.toFixed(2)})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:wl(l.valorTotal)})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:b,disabled:r.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exportar CSV"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Carregando relatrio..."}):r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada no perodo selecionado"}):e.jsx("div",{className:"overflow-x-auto",children:Object.entries(N).map(([w,S])=>e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-semibold text-gray-700 border-b border-gray-200",children:[w.charAt(0).toUpperCase()+w.slice(1)," (",S.length," movimentaes)"]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N Pedido"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((C,E)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:C.data}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.produto_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-700 font-mono",children:C.codigo||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-green-600",children:C.entrada>0?C.entrada:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-red-600",children:C.saida>0?C.saida:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:C.estoque||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(C.tipo)}`,children:C.tipo})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:wl(C.valor_total||0)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:C.usuario||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:C.numero_pedido?e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 underline font-mono text-sm",title:"Clique para ver o pedido",children:["#",C.numero_pedido]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},E))})]})]},w))}),!o&&r.length>0&&e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",r.length," movimentaes no perodo"]})})]})]})}const dB=()=>U.get("/estoque/alertas/pendentes"),uB=(t={})=>U.get("/estoque/alertas/todos",{params:t}),mB=()=>U.get("/estoque/alertas/dashboard"),xB=(t,r,a=null)=>U.put(`/estoque/alertas/${t}/resolver`,{status:r,observacao:a}),pB=t=>U.post("/estoque/alertas/verificar-estoque-negativo",{itens:t});function hB(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState("pendentes");j.useEffect(()=>{m()},[d]);const m=async()=>{c(!0);try{if(d==="pendentes"){const p=await dB();a(p.data)}else if(d==="historico"){const p=await uB();n(p.data)}else if(d==="dashboard"){const p=await mB();i(p.data)}}catch(p){console.error("Erro ao carregar alertas:",p),Ue.error("Erro ao carregar alertas de estoque")}finally{c(!1)}},x=async(p,g,y=null)=>{if(g==="resolvido"&&y){t(`/produtos?produto_id=${y}`),Ue.info("Redirecionando para ajustar o estoque do produto...");return}try{await xB(p,g),Ue.success("Alerta ignorado com sucesso"),m()}catch(f){console.error("Erro ao ignorar alerta:",f),Ue.error("Erro ao processar alerta")}},h=p=>{const g={CRITICO:"bg-red-100 text-red-800 border-red-300",ALTO:"bg-orange-100 text-orange-800 border-orange-300",MEDIO:"bg-yellow-100 text-yellow-800 border-yellow-300",BAIXO:"bg-blue-100 text-blue-800 border-blue-300"};return g[p]||g.MEDIO},v=p=>new Date(p).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ea,{className:"text-red-500"}),"Alertas de Estoque Negativo"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitoramento em tempo real de produtos com estoque crtico"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>u("pendentes"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="pendentes"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{size:18}),"Pendentes",r.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:r.length})]})}),e.jsx("button",{onClick:()=>u("dashboard"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{size:18}),"Dashboard"]})}),e.jsx("button",{onClick:()=>u("historico"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${d==="historico"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{size:18}),"Histrico"]})})]})})}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:m,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:[e.jsx(Kr,{size:18,className:l?"animate-spin":""}),"Atualizar"]})}),l?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(Kr,{className:"animate-spin mx-auto text-gray-400",size:48}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[d==="pendentes"&&e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(Gt,{className:"mx-auto text-green-500",size:64}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mt-4",children:"Nenhum alerta pendente!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Todos os produtos esto com estoque adequado."})]}):r.map(p=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.produto_nome}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${h(p.criticidade)}`,children:p.criticidade})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estoque Anterior"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p.estoque_anterior})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estoque Resultante"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:p.estoque_resultante})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantidade Vendida"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p.quantidade_vendida})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Venda"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:p.venda_codigo?`#${p.venda_codigo}`:p.venda_id?`ID: ${p.venda_id}`:"N/A"})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Data:"})," ",v(p.data_alerta)]}),p.observacao&&e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Observao:"})," ",p.observacao]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>x(p.id,"resolvido",p.produto_id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",title:"Ir para o produto e fazer ajuste de estoque",children:[e.jsx(Ms,{size:16}),"Ajustar Estoque"]}),e.jsxs("button",{onClick:()=>x(p.id,"ignorado"),className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",title:"Ignorar este alerta (aceitar estoque negativo)",children:[e.jsx(Yn,{size:16}),"Ignorar"]})]})]})},p.id))}),d==="dashboard"&&o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total de Alertas"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.total_alertas})]}),e.jsx(ea,{className:"text-gray-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:o.alertas_pendentes})]}),e.jsx(ea,{className:"text-red-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Crticos"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:o.alertas_criticos})]}),e.jsx(Sa,{className:"text-orange-400",size:40})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Resolvidos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o.alertas_resolvidos})]}),e.jsx(Gt,{className:"text-green-400",size:40})]})})]}),o.produtos_estoque_negativo&&o.produtos_estoque_negativo.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"text-red-500"}),"Produtos com Estoque Negativo Atual"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Atual"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alertas Pendentes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.produtos_estoque_negativo.map((p,g)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-red-600",children:p.estoque_atual}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:p.alertas_pendentes})]},g))})]})})]})]}),d==="historico"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criticidade"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Ant."}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Res."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Venda"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"Nenhum alerta registrado"})}):s.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v(p.data_alerta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(p.criticidade)}`,children:p.criticidade})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900",children:p.estoque_anterior}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-red-600",children:p.estoque_resultante}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.resolvido?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.resolvido?"Resolvido":"Pendente"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-blue-600 font-medium",children:p.venda_codigo?`#${p.venda_codigo}`:p.venda_id?`ID: ${p.venda_id}`:"N/A"})]},p.id))})]})})})]})]})}function fB(){const[t,r]=j.useState([]),[a,s]=j.useState(!1),[n,o]=j.useState("pendente");j.useEffect(()=>{i();const x=setInterval(i,6e4);return()=>clearInterval(x)},[]);const i=async()=>{s(!0);try{const x=await U.get("/lembretes/pendentes");r(x.data.lembretes||[])}catch(x){console.error("Erro ao carregar lembretes:",x),Ue.error("Erro ao carregar lembretes")}finally{s(!1)}},l=async x=>{try{await U.post(`/lembretes/${x}/completar`,{}),Ue.success("Lembrete marcado como completado"),i()}catch{Ue.error("Erro ao completar lembrete")}},c=async x=>{try{await U.post(`/lembretes/${x}/renovar`,{}),Ue.success("Lembrete renovado com sucesso"),i()}catch{Ue.error("Erro ao renovar lembrete")}},d=async x=>{if(window.confirm("Tem certeza que deseja cancelar este lembrete?"))try{await U.delete(`/lembretes/${x}`),Ue.success("Lembrete cancelado"),i()}catch{Ue.error("Erro ao cancelar lembrete")}},u=t.filter(x=>x.dias_restantes<=7),m=t.filter(x=>x.dias_restantes<0);return e.jsxs("div",{className:"lembretes-container",children:[e.jsxs("div",{className:"lembretes-header",children:[e.jsx("h1",{children:" Lembretes de Recorrncia"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.length}),e.jsx("span",{className:"stat-label",children:"Total de Lembretes"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("span",{className:"stat-number",children:u.length}),e.jsx("span",{className:"stat-label",children:"Prximos em 7 dias"})]}),e.jsxs("div",{className:"stat-card danger",children:[e.jsx("span",{className:"stat-number",children:m.length}),e.jsx("span",{className:"stat-label",children:"Vencidos"})]})]})]}),a&&e.jsx("div",{className:"loading",children:"Carregando lembretes..."}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(OA,{size:48}),e.jsx("h2",{children:"Nenhum lembrete pendente"}),e.jsx("p",{children:"Lembretes sero criados automaticamente para produtos recorrentes."})]}):e.jsxs("div",{className:"lembretes-list",children:[m.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title danger",children:" Vencidos"}),m.map(x=>e.jsx(Wb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]}),u.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title warning",children:" Prximos em at 7 dias"}),u.map(x=>e.jsx(Wb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]}),t.filter(x=>x.dias_restantes>7).length>0&&e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:" Prximos (mais de 7 dias)"}),t.filter(x=>x.dias_restantes>7).map(x=>e.jsx(Wb,{lembrete:x,onCompletar:l,onRenovar:c,onCancelar:d},x.id))]})]})]})}function Wb({lembrete:t,onCompletar:r,onRenovar:a,onCancelar:s}){const n=t.dias_restantes,o=new Date(t.data_proxima_dose),i=n<0?"vencido":n<=7?"proximo":"futuro",l=t.dose_total&&t.dose_total>0,c=l?t.dose_atual/t.dose_total*100:0;return e.jsxs("div",{className:`lembrete-card ${i}`,children:[e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{children:t.produto_nome}),e.jsxs("div",{className:"badges",children:[l&&e.jsxs("span",{className:"dose-badge",children:["Dose ",t.dose_atual,"/",t.dose_total]}),e.jsx("span",{className:`status-badge ${i}`,children:n<0?"VENCIDO":`${Math.abs(n)}d`})]})]}),l&&e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${c}%`}})}),e.jsxs("div",{className:"card-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Pet:"}),e.jsx("span",{className:"value",children:t.pet_nome})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Data:"}),e.jsx("span",{className:"value",children:o.toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Quantidade:"}),e.jsx("span",{className:"value",children:t.quantidade})]}),t.preco_estimado&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Preo Est.:"}),e.jsxs("span",{className:"value",children:["R$ ",t.preco_estimado.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsxs("button",{className:"btn btn-success",onClick:()=>r(t.id),title:"Marcar como completado",children:[e.jsx(Pi,{})," Comprado"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>a(t.id),title:"Renovar lembrete",children:[e.jsx(Um,{})," Renovar"]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>s(t.id),title:"Cancelar lembrete",children:e.jsx(Oo,{})})]})]})}function gB(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState({pet_id:"",pet_nome:"",produto_id:"",produto_nome:"",categoria_racao:"",peso_pet_kg:"",idade_meses:"",nivel_atividade:"normal",classificacao:"",especies:"dog",produto_comparar_id:"",produto_comparar_nome:""}),[c,d]=j.useState(null),[u,m]=j.useState([]);j.useEffect(()=>{x(),h()},[]);const x=async()=>{var y,f,b;try{console.log(" Iniciando carregamento de produtos...");const N=await U.get("/produtos/");console.log(" Resposta da API:",{status:N.status,dataType:typeof N.data,isArray:Array.isArray(N.data),dataPreview:typeof N.data=="string"?N.data.substring(0,200):"object"});let _=N.data;if(typeof _=="string"){console.warn(" API retornou string, tentando parsear JSON...");try{_=JSON.parse(_)}catch(C){console.error(" Erro ao parsear JSON:",C),console.error(" Contedo recebido:",_.substring(0,500)),Ue.error("Erro: resposta da API invlida");return}}const w=Array.isArray(_)?_:_.items||_.produtos||[];console.log(" Total de produtos recebidos:",w.length),console.log(" Estrutura da resposta:",Array.isArray(_)?"Array direto":`Objeto com keys: ${Object.keys(_).join(", ")}`),w.length>0&&console.log(" Estrutura do primeiro produto:",w[0]);const S=w.filter(C=>C.peso_embalagem&&C.peso_embalagem>0);console.log(" Raes encontradas:",S.length),console.log(" Total de produtos:",w.length),S.length>0?console.log(" IDs das raes:",S.map(C=>`${C.id}-${C.nome}`)):console.log(" Produtos sem peso_embalagem:",w.slice(0,5).map(C=>({id:C.id,nome:C.nome,peso_embalagem:C.peso_embalagem,categoria_racao:C.categoria_racao,classificacao_racao:C.classificacao_racao}))),r(S),S.length===0&&w.length>0?(console.warn(" Produtos encontrados, mas nenhum tem peso de embalagem configurado"),Ue.error(`${w.length} produtos encontrados, mas nenhum tem PESO DE EMBALAGEM configurado. Edite os produtos de rao e preencha o campo "Peso da Embalagem (kg)".`,{duration:6e3})):S.length===0&&(console.log(" Nenhum produto encontrado"),Ue.error("Nenhum produto encontrado. Cadastre produtos primeiro."))}catch(N){console.error(" Erro ao carregar produtos:",N),console.error(" Detalhes:",((y=N.response)==null?void 0:y.data)||N.message),Ue.error(`Erro ao carregar produtos: ${((b=(f=N.response)==null?void 0:f.data)==null?void 0:b.detail)||N.message}`)}},h=async()=>{try{const y=await U.get("/clientes/pets/todos"),f=Array.isArray(y.data)?y.data:[];s(f),console.log(" Pets carregados:",f.length)}catch(y){console.error(" Erro ao carregar pets:",y)}},v=y=>{const f=a.find(b=>b.id===parseInt(y));if(f){let b="";if(f.data_nascimento){const _=new Date(f.data_nascimento),S=Math.abs(new Date-_);b=Math.floor(S/(1e3*60*60*24*30.44)).toString()}const N=f.especie==="Cachorro"?"dog":f.especie==="Gato"?"cat":i.especies;l({...i,pet_id:y,pet_nome:`${f.nome} - ${f.especie} ${f.peso?`(${f.peso}kg)`:""}`,peso_pet_kg:f.peso||"",idade_meses:b,especies:N}),Ue.success(`Pet ${f.nome} selecionado!`)}else l({...i,pet_id:"",peso_pet_kg:"",idade_meses:""})},p=async()=>{var y,f;if(!i.peso_pet_kg){Ue.error("Informe o peso do pet");return}if(i.categoria_racao==="filhote"&&!i.idade_meses){Ue.error(" Idade  obrigatria para raes de filhote!");return}try{o(!0);const b=await U.post("/api/produtos/calculadora-racao",{produto_id:i.produto_id?parseInt(i.produto_id):null,peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade});d(b.data),m([]),Ue.success("Clculo realizado!")}catch(b){console.error("Erro:",b),Ue.error(((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao calcular")}finally{o(!1)}},g=async()=>{var y,f;if(!i.peso_pet_kg){Ue.error("Informe o peso do pet");return}try{if(o(!0),i.produto_comparar_id){const N=(await U.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_comparar_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade})).data;if(i.produto_id){const _=await U.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade});if(_.data.produto_id===N.produto_id)m([_.data]),Ue.success("Mostrando clculo da rao selecionada");else{const w=[_.data,N];m(w),Ue.success("Comparando 2 raes selecionadas!")}}else m([N]),Ue.success("Mostrando clculo da rao selecionada")}else{const b={peso_pet_kg:parseFloat(i.peso_pet_kg),nivel_atividade:i.nivel_atividade};i.idade_meses&&(b.idade_meses=parseInt(i.idade_meses)),i.classificacao&&(b.classificacao=i.classificacao),i.especies&&(b.especies=i.especies);let _=(await U.post("/api/produtos/comparar-racoes",null,{params:b})).data.racoes||[];if(i.produto_id){_=_.filter(T=>T.produto_id!==parseInt(i.produto_id));const E=(await U.post("/api/produtos/calculadora-racao",{produto_id:parseInt(i.produto_id),peso_pet_kg:parseFloat(i.peso_pet_kg),idade_meses:i.idade_meses?parseInt(i.idade_meses):null,nivel_atividade:i.nivel_atividade})).data;_.sort((T,q)=>T.custo_por_dia-q.custo_por_dia),_=[E,..._]}const w=_.slice(0,10);m(w),_.length===0&&Ue.error("Nenhuma rao encontrada com esses filtros. Tente outros critrios.")}}catch(b){console.error("Erro:",b),Ue.error(((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao comparar")}finally{o(!1)}};return e.jsxs("div",{className:"calculadora-racao-container",children:[e.jsxs("div",{className:"header",children:[e.jsx("h1",{children:" Calculadora de Rao"}),e.jsx("p",{children:"Calcule durao, custo/dia e compare produtos"})]}),e.jsxs("div",{className:"calculadora-grid",children:[e.jsxs("div",{className:"form-card",children:[e.jsx("h2",{children:" Dados do Pet"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Buscar Pet Cadastrado"}),e.jsx("input",{type:"text",list:"pets-list",value:i.pet_nome||"",onChange:y=>{const f=y.target.value;l({...i,pet_nome:f});const b=a.find(N=>`${N.nome} - ${N.especie} ${N.peso?`(${N.peso}kg)`:""}`===f);b&&v(b.id)},placeholder:"Digite ou selecione um pet",className:"pet-select"}),e.jsx("datalist",{id:"pets-list",children:a.map(y=>e.jsx("option",{value:`${y.nome} - ${y.especie} ${y.peso?`(${y.peso}kg)`:""}`},y.id))}),e.jsx("small",{className:"form-hint",children:" Digite ou selecione um pet para preencher automaticamente peso e idade"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Peso do Pet (kg) *"}),e.jsx("input",{type:"number",step:"0.1",value:i.peso_pet_kg,onChange:y=>l({...i,peso_pet_kg:y.target.value}),placeholder:"Ex: 8.5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Idade (meses)",i.categoria_racao==="filhote"&&e.jsx("span",{style:{color:"#ff6b6b"},children:" *"})]}),e.jsx("input",{type:"number",value:i.idade_meses,onChange:y=>l({...i,idade_meses:y.target.value}),placeholder:i.categoria_racao==="filhote"?"Obrigatrio para filhotes!":"Ex: 24 (opcional)",required:i.categoria_racao==="filhote",style:i.categoria_racao==="filhote"?{borderColor:"#ff6b6b",borderWidth:"2px"}:{}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nvel de Atividade"}),e.jsxs("select",{value:i.nivel_atividade,onChange:y=>l({...i,nivel_atividade:y.target.value}),children:[e.jsx("option",{value:"baixo",children:"Baixo"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"alto",children:"Alto"})]})]}),e.jsx("hr",{}),e.jsx("h3",{children:" Rao"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Selecionar Rao"}),e.jsx("input",{type:"text",list:"racoes-list",value:i.produto_nome||"",onChange:y=>{const f=y.target.value;l({...i,produto_nome:f});const b=t.find(N=>`${N.nome} - ${N.peso_embalagem}kg - R$ ${N.preco_venda}`===f);b&&l({...i,produto_id:b.id,produto_nome:f,categoria_racao:b.categoria_racao||""})},placeholder:"Digite ou selecione uma rao"}),e.jsx("datalist",{id:"racoes-list",children:t.map(y=>e.jsx("option",{value:`${y.nome} - ${y.peso_embalagem}kg - R$ ${y.preco_venda}`},y.id))}),i.categoria_racao==="filhote"&&e.jsx("small",{className:"form-hint",style:{color:"#ff6b6b",fontWeight:"bold"},children:" Rao de filhote - idade  obrigatria!"})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{onClick:p,disabled:n,className:"btn-primary",children:n?"Calculando...":" Calcular"})}),e.jsx("hr",{}),e.jsx("h3",{children:" Comparar Raes"}),e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:" Dica:"})," Escolha UMA das opes abaixo:",e.jsx("br",{})," Selecione uma rao especfica para ver como ela se compara",e.jsx("br",{})," OU use os filtros gerais para ver todas de uma categoria"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Comparar Rao Especfica"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",list:"racoes-comparar-list",value:i.produto_comparar_nome||"",onChange:y=>{const f=y.target.value;if(f===""){l({...i,produto_comparar_id:"",produto_comparar_nome:""});return}l({...i,produto_comparar_nome:f,classificacao:""});const b=t.find(N=>`${N.nome} - ${N.classificacao_racao} - R$ ${N.preco_venda}`===f);b&&l({...i,produto_comparar_id:b.id,produto_comparar_nome:f,classificacao:""})},placeholder:"Digite ou selecione uma rao",disabled:i.classificacao!=="",style:{flex:1}}),i.produto_comparar_nome&&e.jsx("button",{type:"button",onClick:()=>l({...i,produto_comparar_id:"",produto_comparar_nome:""}),className:"btn-clear",title:"Limpar seleo",children:""})]}),e.jsx("datalist",{id:"racoes-comparar-list",children:t.map(y=>e.jsx("option",{value:`${y.nome} - ${y.classificacao_racao} - R$ ${y.preco_venda}`},y.id))}),i.classificacao&&e.jsx("small",{className:"form-warning",children:" Limpe o filtro de classificao para usar esta opo"}),!i.produto_comparar_id&&!i.classificacao&&e.jsx("small",{className:"form-hint",children:" Deixe vazio para comparar por classificao abaixo"})]}),e.jsx("div",{className:"divider-text",children:"OU"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:" Filtro por Classificao"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("select",{value:i.classificacao,onChange:y=>l({...i,classificacao:y.target.value,produto_comparar_id:"",produto_comparar_nome:""}),disabled:i.produto_comparar_id!=="",style:{flex:1},children:[e.jsx("option",{value:"",children:"Todas as classificaes"}),e.jsx("option",{value:"super_premium",children:"Super Premium"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"especial",children:"Especial"}),e.jsx("option",{value:"standard",children:"Standard"})]}),i.classificacao&&e.jsx("button",{type:"button",onClick:()=>l({...i,classificacao:""}),className:"btn-clear",title:"Limpar filtro",children:""})]}),i.produto_comparar_id&&e.jsx("small",{className:"form-warning",children:" Limpe a rao especfica acima para usar este filtro"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Espcie"}),e.jsxs("select",{value:i.especies,onChange:y=>l({...i,especies:y.target.value}),children:[e.jsx("option",{value:"dog",children:" Ces"}),e.jsx("option",{value:"cat",children:" Gatos"}),e.jsx("option",{value:"both",children:"Ambos"})]})]}),e.jsx("div",{className:"button-group",children:e.jsx("button",{onClick:g,disabled:n,className:"btn-secondary",children:n?"Comparando...":" Comparar Todas"})})]}),e.jsxs("div",{children:[c&&e.jsxs("div",{className:"result-card",children:[e.jsx("h2",{children:" Resultado do Clculo"}),e.jsxs("div",{className:"result-header",children:[e.jsx("h3",{children:c.produto_nome}),c.classificacao&&e.jsx("span",{className:`badge badge-${c.classificacao}`,children:c.classificacao.replace("_"," ")})]}),e.jsxs("div",{className:"result-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Peso Embalagem"}),e.jsxs("span",{className:"value",children:[c.peso_embalagem_kg," kg"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Preo"}),e.jsxs("span",{className:"value",children:["R$ ",c.preco.toFixed(2)]})]})]}),e.jsxs("div",{className:"result-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Durao"}),e.jsxs("p",{children:[c.duracao_dias," dias (",c.duracao_meses," meses)"]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Consumo dirio"}),e.jsxs("p",{children:[c.quantidade_diaria_g,"g"]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo/kg"}),e.jsxs("p",{children:["R$ ",c.custo_por_kg.toFixed(2)]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo/dia"}),e.jsxs("p",{children:["R$ ",c.custo_por_dia.toFixed(2)]})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Custo mensal"}),e.jsxs("p",{children:["R$ ",c.custo_mensal.toFixed(2)]})]})]})]})]}),u.length>0&&e.jsxs("div",{className:"comparativo-card",children:[e.jsxs("h2",{children:[" Comparativo de Raes (",u.length,")"]}),e.jsx("p",{className:"subtitle",children:"Ordenado por melhor custo-benefcio (menor custo dirio)"}),e.jsx("div",{className:"comparativo-list",children:(()=>{const y=Math.min(...u.map(f=>f.custo_por_dia));return u.map((f,b)=>{const N=i.produto_id&&f.produto_id===parseInt(i.produto_id),_=f.custo_por_dia===y;return e.jsxs("div",{className:`comparativo-item ${_?"melhor":""} ${N?"selecionada":""}`,style:{position:"relative"},children:[N&&e.jsx("span",{className:"badge-selecionada",style:{position:"absolute",left:"10px",top:"10px",zIndex:10,fontSize:"11px",padding:"4px 8px",whiteSpace:"nowrap"},children:" Selecionada"}),_&&e.jsx("span",{className:"badge-melhor",children:" Melhor Custo-Benefcio"}),e.jsxs("div",{className:"item-header",children:[e.jsxs("div",{children:[e.jsx("h4",{children:f.produto_nome}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginTop:"4px"},children:[f.classificacao&&e.jsx("span",{className:`badge badge-${f.classificacao}`,children:f.classificacao.replace("_"," ")}),e.jsxs("span",{style:{fontSize:"13px",color:"#64748b",backgroundColor:"#f1f5f9",padding:"2px 8px",borderRadius:"4px"},children:[" ",f.quantidade_diaria_g,"g/dia"]})]})]}),e.jsxs("div",{className:"item-price",children:["R$ ",f.preco.toFixed(2)]})]}),e.jsxs("div",{className:"item-stats",children:[e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Peso"}),e.jsxs("span",{children:[f.peso_embalagem_kg,"kg"]})]}),e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Durao"}),e.jsxs("span",{children:[f.duracao_dias,"d"]})]}),e.jsxs("div",{className:"stat-small highlight",children:[e.jsx("span",{className:"label",children:"Custo/dia"}),e.jsxs("span",{children:["R$ ",f.custo_por_dia.toFixed(2)]})]}),e.jsxs("div",{className:"stat-small",children:[e.jsx("span",{className:"label",children:"Custo/ms"}),e.jsxs("span",{children:["R$ ",f.custo_mensal.toFixed(2)]})]})]}),_&&u.length>1&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#ecfdf5",borderLeft:"3px solid #10b981",borderRadius:"4px"},children:[e.jsx("p",{style:{margin:"0 0 6px 0",fontSize:"13px",fontWeight:"600",color:"#065f46"},children:" Por que esta  a melhor opo?"}),e.jsxs("p",{style:{margin:"0",fontSize:"13px",color:"#047857",lineHeight:"1.5"},children:["Apesar de ",f.classificacao==="premium"||f.classificacao==="super_premium"?`ter um preo mais alto (R$ ${f.preco.toFixed(2)})`:`custar R$ ${f.preco.toFixed(2)}`,", esta rao ",f.classificacao==="super_premium"?"super premium  muito concentrada em nutrientes":f.classificacao==="premium"?"premium tem melhor densidade nutricional":"tem excelente eficincia alimentar",", ento seu pet consome apenas ",e.jsxs("strong",{children:[f.quantidade_diaria_g,"g por dia"]}),".",u[1]&&e.jsxs(e.Fragment,{children:[" Em comparao, a segunda opo requer ",e.jsxs("strong",{children:[u[1].quantidade_diaria_g,"g/dia"]}),", resultando em um custo dirio ",e.jsxs("strong",{children:["R$ ",(u[1].custo_por_dia-f.custo_por_dia).toFixed(2)," maior"]}),"(R$ ",f.custo_por_dia.toFixed(2)," vs R$ ",u[1].custo_por_dia.toFixed(2),")."]})]})]})]},f.produto_id)})})()})]})]})]})]})}const bB=()=>{var q;const t=Ht(),[r]=rg(),a=r.get("cliente_id"),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!0),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,v]=j.useState(a||""),[p,g]=j.useState(""),[y,f]=j.useState(""),[b,N]=j.useState(!1);j.useEffect(()=>{_(),w()},[h,p,y]);const _=async()=>{try{c(!0);const A=new URLSearchParams;m&&A.append("busca",m),h&&A.append("cliente_id",h),p&&A.append("especie",p),y&&A.append("ativo",y==="ativo"?"true":"false");const O=await U.get(`/pets?${A.toString()}`);n(O.data),u("")}catch(A){console.error("Erro ao carregar pets:",A),u("Erro ao carregar pets")}finally{c(!1)}},w=async()=>{try{const A=await U.get("/clientes/");i(A.data)}catch(A){console.error("Erro ao carregar clientes:",A)}},S=A=>{A.preventDefault(),_()},C=()=>{x(""),v(""),g(""),f("")},E=A=>{if(!A)return null;const O=new Date,V=new Date(A),G=O.getFullYear()-V.getFullYear(),L=O.getMonth()-V.getMonth();return G===0?`${L} ${L===1?"ms":"meses"}`:`${G} ${G===1?"ano":"anos"}`},T=async A=>{try{A.ativo?await U.delete(`/pets/${A.id}?soft_delete=true`):await U.post(`/pets/${A.id}/ativar`),_()}catch(O){console.error("Erro ao alterar status do pet:",O),alert("Erro ao alterar status do pet")}};return l?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando pets..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Zr,{className:"text-blue-600",size:36}),"Gerenciamento de Pets"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:h?`Pets do cliente: ${((q=o.find(A=>A.id===parseInt(h)))==null?void 0:q.nome)||""}`:"Gesto completa dos animais de estimao"})]}),e.jsxs("button",{onClick:()=>t("/pets/novo"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(gs,{size:20}),"Adicionar Pet"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(DA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, raa, microchip ou cdigo...",value:m,onChange:A=>x(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Buscar"}),e.jsxs("button",{type:"button",onClick:()=>N(!b),className:"px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(k2,{}),"Filtros"]})]}),b&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente (Tutor)"}),e.jsxs("select",{value:h,onChange:A=>v(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os clientes"}),o.map(A=>e.jsx("option",{value:A.id,children:A.nome},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie"}),e.jsxs("select",{value:p,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todas as espcies"}),e.jsx("option",{value:"Co",children:"Co"}),e.jsx("option",{value:"Gato",children:"Gato"}),e.jsx("option",{value:"Ave",children:"Ave"}),e.jsx("option",{value:"Roedor",children:"Roedor"}),e.jsx("option",{value:"Rptil",children:"Rptil"}),e.jsx("option",{value:"Outro",children:"Outro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:y,onChange:A=>f(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"ativo",children:"Ativos"}),e.jsx("option",{value:"inativo",children:"Inativos"})]})]}),e.jsx("div",{className:"col-span-3 flex justify-end",children:e.jsxs("button",{type:"button",onClick:C,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(Oi,{}),"Limpar filtros"]})})]})]})}),d&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(pr,{}),d]}),s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Zr,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum pet encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:m||h||p||y?"Tente ajustar os filtros ou fazer uma nova busca":"Comece adicionando o primeiro pet"}),e.jsxs("button",{onClick:()=>t("/pets/novo"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(gs,{}),"Adicionar Primeiro Pet"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(A=>e.jsx("div",{className:`bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md ${A.ativo?"border-gray-200":"border-red-200 bg-gray-50"}`,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:A.nome}),A.ativo?e.jsx(Pi,{className:"text-green-500",size:16}):e.jsx(My,{className:"text-red-500",size:16})]}),e.jsx("p",{className:"text-sm text-gray-500",children:A.codigo})]}),A.foto_url&&e.jsx("img",{src:A.foto_url,alt:A.nome,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Espcie:"}),e.jsx("span",{className:"text-gray-900",children:A.especie})]}),A.raca&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Raa:"}),e.jsx("span",{className:"text-gray-900",children:A.raca})]}),A.sexo&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Sexo:"}),e.jsx("span",{className:"text-gray-900",children:A.sexo})]}),A.data_nascimento&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Idade:"}),e.jsx("span",{className:"text-gray-900",children:E(A.data_nascimento)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Tutor:"}),e.jsx("span",{className:"text-blue-600",children:A.cliente_nome})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>t(`/pets/${A.id}`),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(dh,{size:16}),"Ver Detalhes"]}),e.jsx("button",{onClick:()=>t(`/pets/${A.id}/editar`),className:"px-3 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",title:"Editar",children:e.jsx(Ti,{size:16,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>T(A),className:`px-3 py-2 border rounded-lg transition-colors ${A.ativo?"border-red-300 hover:bg-red-50 text-red-600":"border-green-300 hover:bg-green-50 text-green-600"}`,title:A.ativo?"Desativar":"Reativar",children:A.ativo?e.jsx(My,{size:16}):e.jsx(Pi,{size:16})})]})]})},A.id))}),s.length>0&&e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Total: ",e.jsx("strong",{children:s.length})," pet(s) encontrado(s)",y===""&&e.jsxs(e.Fragment,{children:["  ",e.jsx("strong",{className:"text-green-600",children:s.filter(A=>A.ativo).length})," ativo(s)","  ",e.jsx("strong",{className:"text-red-600",children:s.filter(A=>!A.ativo).length})," inativo(s)"]})]})]})};function vB(t){if(!t)return null;const r=typeof t=="string"?new Date(t):t,a=new Date,s=a.getFullYear()-r.getFullYear(),n=a.getMonth()-r.getMonth();return s*12+n}function dm(t){if(!t)return"-";const r=Math.floor(t/12),a=t%12;return r===0?`${t} ${t===1?"ms":"meses"}`:a===0?`${r} ${r===1?"ano":"anos"}`:`${r} ${r===1?"ano":"anos"} e ${a} ${a===1?"ms":"meses"}`}function yB(t){if(!t)return null;const r=t.toString().toLowerCase().trim();if(/^\d+$/.test(r))return parseInt(r);const a=/(\d+(?:[.,]\d+)?)\s*anos?\s*(?:e\s*)?(\d+)?\s*meses?/i,s=r.match(a);if(s){const c=parseFloat(s[1].replace(",",".")),d=s[2]?parseInt(s[2]):0;return Math.round(c*12)+d}const n=/(\d+(?:[.,]\d+)?)\s*anos?/i,o=r.match(n);if(o){const c=parseFloat(o[1].replace(",","."));return Math.round(c*12)}const i=/(\d+)\s*meses?/i,l=r.match(i);return l?parseInt(l[1]):null}const jB=()=>{const{petId:t}=Zl(),r=Ht(),[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(""),[c,d]=j.useState("geral");j.useEffect(()=>{u()},[t]);const u=async()=>{try{o(!0);const p=await U.get(`/pets/${t}`);s(p.data),l("")}catch(p){console.error("Erro ao carregar pet:",p),l("Erro ao carregar informaes do pet")}finally{o(!1)}},m=p=>{if(!p)return null;const g=new Date,y=new Date(p),f=g.getFullYear()-y.getFullYear(),b=g.getMonth()-y.getMonth();return f===0?`${b} ${b===1?"ms":"meses"}`:b<0?`${f-1} anos e ${12+b} meses`:b===0?`${f} ${f===1?"ano":"anos"}`:`${f} anos e ${b} ${b===1?"ms":"meses"}`},x=p=>p?new Date(p).toLocaleDateString("pt-BR"):"-",h=async()=>{try{a.ativo?await U.delete(`/pets/${a.id}?soft_delete=true`):await U.post(`/pets/${a.id}/ativar`),u()}catch(p){console.error("Erro ao alterar status do pet:",p),alert("Erro ao alterar status do pet")}};if(n)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});if(i||!a)return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(pr,{}),i||"Pet no encontrado"]}),e.jsxs("button",{onClick:()=>r("/pets"),className:"mt-4 flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(gd,{}),"Voltar para lista de pets"]})]});const v=[{id:"geral",label:"Dados Gerais",icon:ZL},{id:"saude",label:"Sade",icon:E2},{id:"vacinas",label:"Vacinas",icon:x4},{id:"consultas",label:"Consultas",icon:Cn},{id:"servicos",label:"Servios",icon:Zr}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/pets"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(gd,{}),"Voltar para Gerenciamento de Pets"]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[a.foto_url?e.jsx("img",{src:a.foto_url,alt:a.nome,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center border-4 border-gray-200",children:e.jsx(Zr,{className:"text-blue-600",size:48})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.nome}),a.ativo?e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(Pi,{size:14}),"Ativo"]}):e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(My,{size:14}),"Inativo"]})]}),e.jsxs("p",{className:"text-gray-500 mb-1",children:[a.especie," ",a.raca&&` ${a.raca}`," ",a.sexo&&` ${a.sexo}`]}),e.jsx("p",{className:"text-sm text-gray-400",children:a.codigo}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(Xn,{size:16}),e.jsx("span",{className:"font-medium",children:"Tutor:"}),e.jsx("span",{className:"text-blue-600",children:a.cliente_nome})]}),a.cliente_celular&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(RA,{size:16}),e.jsx("span",{children:a.cliente_celular})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>r(`/pets/${a.id}/editar`),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(Ti,{}),"Editar"]}),e.jsx("button",{onClick:h,className:`px-4 py-2 border-2 rounded-lg transition-colors font-medium ${a.ativo?"border-red-300 text-red-600 hover:bg-red-50":"border-green-300 text-green-600 hover:bg-green-50"}`,children:a.ativo?"Desativar":"Reativar"})]})]})})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("div",{className:"flex gap-4",children:v.map(p=>{const g=p.icon;return e.jsxs("button",{onClick:()=>d(p.id),className:`flex items-center gap-2 px-4 py-3 font-medium border-b-2 transition-colors ${c===p.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(g,{size:18}),p.label]},p.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[c==="geral"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes Gerais"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:a.codigo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie"}),e.jsx("p",{className:"text-gray-900",children:a.especie})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raa"}),e.jsx("p",{className:"text-gray-900",children:a.raca||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexo"}),e.jsx("p",{className:"text-gray-900",children:a.sexo||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Castrado"}),e.jsx("p",{className:"text-gray-900",children:a.castrado?"Sim":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Nascimento"}),e.jsx("p",{className:"text-gray-900",children:x(a.data_nascimento)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idade"}),e.jsx("p",{className:"text-gray-900",children:a.idade_meses?dm(a.idade_meses):a.idade_aproximada?dm(a.idade_aproximada):a.data_nascimento?m(a.data_nascimento):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso"}),e.jsx("p",{className:"text-gray-900",children:a.peso?`${a.peso} kg`:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte"}),e.jsx("p",{className:"text-gray-900",children:a.porte||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor/Pelagem"}),e.jsx("p",{className:"text-gray-900",children:a.cor||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Microchip"}),e.jsx("p",{className:"text-gray-900 font-mono text-sm",children:a.microchip||"-"})]})]}),a.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:a.observacoes})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 text-sm text-gray-500",children:[e.jsxs("p",{children:["Cadastrado em: ",x(a.created_at)]}),e.jsxs("p",{children:["ltima atualizao: ",x(a.updated_at)]})]})]}),c==="saude"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes de Sade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alergias"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.alergias||"Nenhuma alergia registrada"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doenas Crnicas"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.doencas_cronicas||"Nenhuma doena crnica registrada"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medicamentos Contnuos"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900",children:a.medicamentos_continuos||"Nenhum medicamento contnuo registrado"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Histrico Clnico"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:a.historico_clinico||"Nenhum histrico clnico registrado"})})]})]})]}),c==="vacinas"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Carteira de Vacinao"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Registrar Vacina"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(x4,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar o histrico de vacinas do pet"})]})]}),c==="consultas"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histrico de Consultas"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Nova Consulta"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Cn,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar consultas veterinrias"})]})]}),c==="servicos"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Histrico de Servios"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:"+ Registrar Servio"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Zr,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Mdulo em desenvolvimento"}),e.jsx("p",{className:"text-sm",children:"Em breve voc poder gerenciar banho, tosa e outros servios"})]})]})]})]})};function NB({value:t,onChange:r,name:a="idade",label:s="Idade",className:n="",mostrarDataNascimento:o=!0,required:i=!1}){const[l,c]=j.useState("texto"),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,v]=j.useState("");j.useEffect(()=>{t&&typeof t=="number"&&u(dm(t))},[t]);const p=b=>{const N=b.target.value;u(N),N||(v(""),r(null))},g=()=>{if(!d){v(""),r(null);return}const b=yB(d);if(b!==null){const N=dm(b);u(N),v(` ${N}`),r(b)}else v(" Formato invlido. Ex: 12 meses, 2 anos, 1.5 anos"),r(null)},y=b=>{const N=b.target.value;if(x(N),!N){v(""),r(null);return}const _=vB(N);_!==null?(v(` ${dm(_)}`),r(_)):(v(" Data invlida"),r(null))},f=()=>{c(l==="texto"?"data":"texto"),u(""),x(""),v(""),r(null)};return e.jsxs("div",{className:n,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[s,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o&&e.jsx("button",{type:"button",onClick:f,className:"text-xs text-blue-600 hover:text-blue-800 underline",children:l==="texto"?" Usar data de nascimento":" Digitar idade"})]}),l==="texto"?e.jsxs("div",{children:[e.jsx("input",{type:"text",name:a,value:d,onChange:p,onBlur:g,placeholder:"Ex: 12 meses, 2 anos, 1.5 anos, 2anos6meses",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:i}),h&&e.jsx("p",{className:`text-xs mt-1 ${h.startsWith("")?"text-green-600":"text-orange-600"}`,children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite a idade e pressione Tab ou clique fora do campo"})]}):e.jsxs("div",{children:[e.jsx("input",{type:"date",name:a,value:m,onChange:y,max:new Date().toISOString().split("T")[0],className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:i}),h&&e.jsx("p",{className:`text-xs mt-1 ${h.startsWith("")?"text-green-600":"text-orange-600"}`,children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Data de nascimento do pet"})]})]})}const wB=({tipo:t,especieId:r,especieNome:a,onSuccess:s,onClose:n})=>{const[o,i]=j.useState(""),[l,c]=j.useState(!1),[d,u]=j.useState(""),m=async x=>{var h,v;if(x.preventDefault(),u(""),!o||o.trim()===""){u(`O nome ${t==="especie"?"da espcie":"da raa"}  obrigatrio`);return}try{c(!0);let p;if(t==="especie")p=await U.post("/cadastros/especies",{nome:o.trim(),ativo:!0});else{if(!r){u("Selecione uma espcie primeiro");return}p=await U.post("/cadastros/racas",{nome:o.trim(),especie_id:r,ativo:!0})}s&&s(p.data),n()}catch(p){console.error("Erro ao salvar:",p),u(((v=(h=p.response)==null?void 0:h.data)==null?void 0:v.detail)||"Erro ao salvar")}finally{c(!1)}};return e.jsx("div",{className:"quick-modal-overlay",onClick:n,children:e.jsxs("div",{className:"quick-modal-content",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"quick-modal-header",children:[e.jsxs("h3",{children:[t==="especie"?" Nova Espcie":" Nova Raa",t==="raca"&&a&&e.jsxs("span",{className:"quick-subtitle",children:[" - ",a]})]}),e.jsx("button",{className:"quick-btn-close",onClick:n,children:e.jsx(Oi,{})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"quick-modal-body",children:[d&&e.jsxs("div",{className:"quick-alert quick-alert-danger",children:[e.jsx(pr,{})," ",d]}),e.jsxs("div",{className:"quick-form-group",children:[e.jsxs("label",{children:["Nome ",t==="especie"?"da Espcie":"da Raa"," *"]}),e.jsx("input",{type:"text",value:o,onChange:x=>i(x.target.value),placeholder:t==="especie"?"Ex: Co, Gato, Ave...":"Ex: Labrador, SRD, Siams...",required:!0,autoFocus:!0,disabled:l})]}),e.jsx("div",{className:"quick-info",children:e.jsxs("p",{children:[" ",t==="especie"?"Esta espcie ficar disponvel para todos os pets":`Esta raa ser adicionada  espcie "${a}"`]})})]}),e.jsxs("div",{className:"quick-modal-footer",children:[e.jsx("button",{type:"button",className:"quick-btn quick-btn-secondary",onClick:n,disabled:l,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"quick-btn quick-btn-primary",disabled:l,children:[e.jsx(Il,{})," ",l?"Salvando...":"Salvar"]})]})]})]})})},S4=()=>{var K,R;const{petId:t}=Zl(),r=Ht(),a=zo(),s=!!t,n=(K=a.state)==null?void 0:K.clienteId,[o,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,v]=j.useState([]),[p,g]=j.useState([]),[y,f]=j.useState([]),[b,N]=j.useState(!1),[_,w]=j.useState(null),[S,C]=j.useState({cliente_id:n||"",nome:"",especie:"",raca:"",sexo:"",castrado:!1,data_nascimento:"",idade_aproximada:"",peso:"",cor:"",porte:"",microchip:"",alergias:"",doencas_cronicas:"",medicamentos_continuos:"",historico_clinico:"",observacoes:"",foto_url:"",ativo:!0});j.useEffect(()=>{(async()=>{await E(),await T(),s&&await A()})()},[t]),j.useEffect(()=>{S.especie?q(S.especie):f([])},[S.especie]);const E=async()=>{try{const B=await U.get("/clientes/");v(B.data)}catch(B){console.error("Erro ao carregar clientes:",B)}},T=async()=>{try{const B=await U.get("/cadastros/especies",{params:{ativo:!0}});g(B.data)}catch(B){console.error("Erro ao carregar espcies:",B)}},q=async B=>{try{const F=await U.get("/cadastros/racas",{params:{ativo:!0,especie_id:B}});f(F.data)}catch(F){console.error("Erro ao carregar raas:",F),f([])}},A=async()=>{try{i(!0);const F=(await U.get(`/pets/${t}`)).data,I=p.find(k=>k.nome===F.especie);C({cliente_id:F.cliente_id||"",nome:F.nome||"",especie:I?I.id.toString():"",raca:F.raca||"",sexo:F.sexo||"",castrado:F.castrado||!1,data_nascimento:"",idade_aproximada:F.idade_meses||F.idade_aproximada||"",peso:F.peso||"",cor:F.cor||"",porte:F.porte||"",microchip:F.microchip||"",alergias:F.alergias||"",doencas_cronicas:F.doencas_cronicas||"",medicamentos_continuos:F.medicamentos_continuos||"",historico_clinico:F.historico_clinico||"",observacoes:F.observacoes||"",foto_url:F.foto_url||"",ativo:F.ativo!==void 0?F.ativo:!0})}catch(B){console.error("Erro ao carregar pet:",B),u("Erro ao carregar informaes do pet")}finally{i(!1)}},O=B=>{const{name:F,value:I,type:k,checked:M}=B.target;C(z=>({...z,[F]:k==="checkbox"?M:I}))},V=B=>{w(B),N(!0)},G=()=>{N(!1),w(null)},L=B=>{_==="especie"?T().then(()=>{C(F=>({...F,especie:B.id.toString()}))}):_==="raca"&&S.especie&&q(S.especie).then(()=>{C(F=>({...F,raca:B.nome}))})},Z=()=>S.nome.trim()?S.especie?S.cliente_id?!0:(u("Cliente (tutor)  obrigatrio"),!1):(u("Espcie  obrigatria"),!1):(u("Nome do pet  obrigatrio"),!1),D=async B=>{var F,I;if(B.preventDefault(),u(""),x(""),!!Z())try{c(!0);const k=p.find(z=>z.id===parseInt(S.especie)),M={...S,especie:(k==null?void 0:k.nome)||S.especie,cliente_id:parseInt(S.cliente_id),peso:S.peso?parseFloat(S.peso):null,idade_aproximada:S.idade_aproximada?parseInt(S.idade_aproximada):null,data_nascimento:S.data_nascimento||null};if(s)await U.put(`/pets/${t}`,M),x("Pet atualizado com sucesso!"),setTimeout(()=>r(`/pets/${t}`),1500);else{const z=await U.post("/pets",M);x("Pet cadastrado com sucesso!"),setTimeout(()=>r(`/pets/${z.data.id}`),1500)}}catch(k){console.error("Erro ao salvar pet:",k),u(((I=(F=k.response)==null?void 0:F.data)==null?void 0:I.detail)||"Erro ao salvar pet")}finally{c(!1)}};return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r(s?`/pets/${t}`:"/pets"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(gd,{}),s?"Voltar para detalhes do pet":"Voltar para lista de pets"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Zr,{className:"text-blue-600",size:36}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Editar Pet":"Cadastrar Novo Pet"})]}),e.jsx("p",{className:"text-gray-600",children:s?"Atualize as informaes do pet":"Preencha os dados do animal de estimao"})]}),d&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(pr,{}),d]}),m&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Pi,{}),m]}),n&&e.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(Pi,{}),e.jsx("span",{children:" Tutor pr-selecionado automaticamente! Voc pode alterar se necessrio."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dados Bsicos"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente (Tutor) *"}),e.jsxs("select",{name:"cliente_id",value:S.cliente_id,onChange:O,required:!0,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none ${n?"border-blue-400 bg-blue-50":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecione o tutor..."}),h.map(B=>e.jsxs("option",{value:B.id,children:[B.nome," ",B.cpf&&`- CPF: ${B.cpf}`]},B.id))]}),n&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:" Tutor selecionado automaticamente"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Pet *"}),e.jsx("input",{type:"text",name:"nome",value:S.nome,onChange:O,required:!0,placeholder:"Ex: Rex, Miau, Tot",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espcie *"}),e.jsxs("div",{className:"field-with-action",children:[e.jsxs("select",{name:"especie",value:S.especie,onChange:O,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),p.map(B=>e.jsx("option",{value:B.id,children:B.nome},B.id))]}),e.jsxs("button",{type:"button",className:"btn-add-quick",onClick:()=>V("especie"),title:"Adicionar nova espcie",children:[e.jsx(gs,{})," Nova"]})]}),p.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Nenhuma espcie cadastrada. Cadastre em Cadastros  Espcies e Raas."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raa"}),e.jsxs("div",{className:"field-with-action",children:[e.jsxs("select",{name:"raca",value:S.raca,onChange:O,disabled:!S.especie,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:S.especie?"Selecione uma raa...":"Selecione uma espcie primeiro"}),y.map(B=>e.jsx("option",{value:B.nome,children:B.nome},B.id))]}),e.jsxs("button",{type:"button",className:"btn-add-quick",onClick:()=>V("raca"),title:"Adicionar nova raa",disabled:!S.especie,children:[e.jsx(gs,{})," Nova"]})]}),S.especie&&y.length===0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Nenhuma raa cadastrada para ",S.especie,". Cadastre em Cadastros  Espcies e Raas."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexo"}),e.jsxs("select",{name:"sexo",value:S.sexo,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Macho",children:"Macho"}),e.jsx("option",{value:"Fmea",children:"Fmea"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"castrado",id:"castrado",checked:S.castrado,onChange:O,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"castrado",className:"text-sm font-medium text-gray-700",children:"Pet castrado"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Caractersticas Fsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(NB,{value:S.idade_aproximada,onChange:B=>C(F=>({...F,idade_aproximada:B,data_nascimento:""})),name:"idade_aproximada",label:"Idade do Pet",mostrarDataNascimento:!0,className:"col-span-2"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg)"}),e.jsx("input",{type:"number",name:"peso",value:S.peso,onChange:O,step:"0.1",min:"0",placeholder:"Ex: 5.5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porte"}),e.jsxs("select",{name:"porte",value:S.porte,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Mini",children:"Mini"}),e.jsx("option",{value:"Pequeno",children:"Pequeno"}),e.jsx("option",{value:"Mdio",children:"Mdio"}),e.jsx("option",{value:"Grande",children:"Grande"}),e.jsx("option",{value:"Gigante",children:"Gigante"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor/Pelagem"}),e.jsx("input",{type:"text",name:"cor",value:S.cor,onChange:O,placeholder:"Ex: Preto, Branco, Caramelo",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Microchip"}),e.jsx("input",{type:"text",name:"microchip",value:S.microchip,onChange:O,placeholder:"Nmero do microchip",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none font-mono text-sm"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Foto"}),e.jsx("input",{type:"url",name:"foto_url",value:S.foto_url,onChange:O,placeholder:"https://exemplo.com/foto-do-pet.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaes de Sade"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alergias"}),e.jsx("textarea",{name:"alergias",value:S.alergias,onChange:O,rows:"3",placeholder:"Descreva alergias conhecidas (alimentares, medicamentos, etc)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doenas Crnicas"}),e.jsx("textarea",{name:"doencas_cronicas",value:S.doencas_cronicas,onChange:O,rows:"3",placeholder:"Descreva doenas crnicas diagnosticadas",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medicamentos Contnuos"}),e.jsx("textarea",{name:"medicamentos_continuos",value:S.medicamentos_continuos,onChange:O,rows:"3",placeholder:"Liste medicamentos de uso contnuo com dosagem",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Histrico Clnico"}),e.jsx("textarea",{name:"historico_clinico",value:S.historico_clinico,onChange:O,rows:"4",placeholder:"Descreva o histrico clnico do pet (cirurgias, tratamentos anteriores, etc)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Observaes Adicionais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes Gerais"}),e.jsx("textarea",{name:"observacoes",value:S.observacoes,onChange:O,rows:"4",placeholder:"Informaes adicionais, comportamento, preferncias, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"ativo",id:"ativo",checked:S.ativo,onChange:O,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm font-medium text-gray-700",children:"Pet ativo no sistema"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"submit",disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Il,{}),s?"Salvar Alteraes":"Cadastrar Pet"]})}),e.jsx("button",{type:"button",onClick:()=>r(s?`/pets/${t}`:"/pets"),disabled:l,className:"px-6 py-3 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors font-medium disabled:opacity-50",children:"Cancelar"})]})]}),b&&e.jsx(wB,{tipo:_,especieId:_==="raca"?parseInt(S.especie):null,especieNome:_==="raca"?(R=p.find(B=>B.id===parseInt(S.especie)))==null?void 0:R.nome:null,onSuccess:L,onClose:G})]})},C4=async(t={})=>(await U.get("/vendas",{params:t})).data,q0=async t=>(await U.get(`/vendas/${t}`)).data,rP=async t=>(await U.post("/vendas",t)).data,_B=async(t,r)=>(await U.post(`/vendas/${t}/finalizar`,{pagamentos:r})).data,SB=async(t={})=>{const r=await U.get("/clientes/",{params:t});return r.data.items||r.data.clientes||r.data||[]},$u=async t=>(await U.get(`/clientes/${t}`)).data,CB=({status:t,className:r=""})=>{if(!t)return null;const a={verde:{cor:"bg-green-500",borda:"border-green-500",texto:"text-green-700",fundo:"bg-green-50",icone:"",mensagem:"Margem Saudvel",descricao:"Venda em condies ideais"},amarelo:{cor:"bg-yellow-500",borda:"border-yellow-500",texto:"text-yellow-700",fundo:"bg-yellow-50",icone:"",mensagem:"Margem em Alerta",descricao:"Ateno com parcelamento e descontos"},vermelho:{cor:"bg-red-500",borda:"border-red-500",texto:"text-red-700",fundo:"bg-red-50",icone:"",mensagem:"Margem Crtica",descricao:"Evite mais descontos ou parcelamentos longos"}},s=a[t]||a.verde;return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${s.borda} ${s.fundo} ${r}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.cor} animate-pulse`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`text-sm font-semibold ${s.texto}`,children:[s.icone," ",s.mensagem]}),e.jsx("div",{className:"text-xs text-gray-600",children:s.descricao})]})]})},kB=["Visa","Mastercard","Elo","American Express","Hipercard","Outros"];function EB({venda:t,onClose:r,onConfirmar:a,onVendaAtualizada:s,onAnalisarVenda:n}){var $t;const[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState([]),[h,v]=j.useState(null),[p,g]=j.useState(null),[y,f]=j.useState(""),[b,N]=j.useState(""),[_,w]=j.useState(1),[S,C]=j.useState(""),[E,T]=j.useState(!1),[q,A]=j.useState(!1),[O,V]=j.useState(""),[G,L]=j.useState(0),[Z,D]=j.useState(!1),[K,R]=j.useState(null),[B,F]=j.useState(null),[I,k]=j.useState(!1),[M,z]=j.useState(""),[oe,W]=j.useState(""),[ae,ee]=j.useState({}),[ce,ie]=j.useState(!1),[we,Se]=j.useState(null),me=j.useRef(null);j.useEffect(()=>{(async()=>{try{const $e=await U.get("/financeiro/formas-pagamento");u($e.data)}catch($e){console.error("Erro ao carregar formas:",$e)}})()},[]),j.useEffect(()=>{(async()=>{try{const $e=await U.get("/operadoras-cartao?apenas_ativas=true");x($e.data);const Ie=$e.data.find(it=>it.padrao);Ie&&v(Ie)}catch($e){console.error("Erro ao carregar operadoras:",$e)}})()},[]),j.useEffect(()=>{(async()=>{var $e;if(t.id){A(!0);try{const Ie=await U.get(`/vendas/${t.id}/pagamentos`);c(Ie.data.pagamentos||[]),L(Ie.data.total_pago||0)}catch(Ie){console.error("Erro ao buscar pagamentos:",Ie),(($e=Ie.response)==null?void 0:$e.status)!==404&&V("Erro ao carregar pagamentos existentes")}finally{A(!1)}}})()},[t.id,t.status]),j.useEffect(()=>{p!=null&&p.permite_parcelamento&&me.current&&setTimeout(()=>{var ge;(ge=me.current)==null||ge.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},[p==null?void 0:p.permite_parcelamento]);const _e=t.total,je=o.reduce((ge,$e)=>ge+$e.valor,0)+G,lt=_e-je,Ke=S?parseFloat(S)-lt:0,ut=async()=>{var ge,$e,Ie;k(!0);try{const it=[{forma_pagamento_id:1,valor:t.total,parcelas:1}],rt=(t.itens||[]).map(Oe=>({produto_id:Oe.produto_id,quantidade:Oe.quantidade,preco_venda:Oe.preco_unitario||Oe.preco_venda||0,custo:Oe.custo||null})),xe=await U.post("/formas-pagamento/analisar-venda",{items:rt,formas_pagamento:it,desconto:t.desconto_valor||0,taxa_entrega:((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0});(Ie=($e=xe.data)==null?void 0:$e.resultado)!=null&&Ie.cor_indicador&&(F(xe.data.resultado.cor_indicador),console.log(" Status inicial calculado:",xe.data.resultado.cor_indicador))}catch(it){console.error(" Erro ao calcular status inicial:",it),F(null)}finally{k(!1)}},Ee=async()=>{var ge,$e,Ie;if(!(o.length===0&&l.length===0)){k(!0);try{const it=[...l,...o],rt=(t.itens||[]).map(Oe=>({produto_id:Oe.produto_id,quantidade:Oe.quantidade,preco_venda:Oe.preco_unitario||Oe.preco_venda||0,custo:Oe.custo||null})),xe=await U.post("/formas-pagamento/analisar-venda",{items:rt,formas_pagamento:it,desconto:t.desconto_valor||0,taxa_entrega:((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0});(Ie=($e=xe.data)==null?void 0:$e.resultado)!=null&&Ie.cor_indicador&&F(xe.data.resultado.cor_indicador)}catch(it){console.error("Erro ao calcular status de margem:",it),F(null)}finally{k(!1)}}};j.useEffect(()=>{const ge=setTimeout(()=>{Ee()},500);return()=>clearTimeout(ge)},[o,_]),j.useEffect(()=>{console.log(" Modal de pagamento aberto - Calculando status inicial..."),ut()},[]),j.useEffect(()=>{if(d&&d.length>0){const ge=d.filter($e=>$e.permite_parcelamento);ge.length>0&&Object.keys(ae).length===0&&(console.log(" Simulando parcelamentos ao carregar formas..."),Me(ge[0]))}},[d]);const Me=async ge=>{var it,rt,xe;if(!ge||!ge.permite_parcelamento){console.log(" Forma de pagamento invlida ou no permite parcelamento");return}const $e=(ge==null?void 0:ge.parcelas_maximas)??12,Ie=ge.id;console.log(` Simulando parcelamentos para ${ge.nome} (at ${$e}x)...`),ie(!0);try{const Oe={},Ye=(t.itens||[]).map(ue=>({produto_id:ue.produto_id,quantidade:ue.quantidade,preco_venda:ue.preco_unitario||ue.preco_venda||0,custo:ue.custo||null}));for(let ue=1;ue<=$e;ue++){const qe=[{forma_pagamento_id:Ie,valor:t.total,parcelas:ue}];try{const le=await U.post("/formas-pagamento/analisar-venda",{items:Ye,formas_pagamento:qe,desconto:t.desconto_valor||0,taxa_entrega:((it=t.entrega)==null?void 0:it.taxa_entrega_total)||0});(xe=(rt=le.data)==null?void 0:rt.resultado)!=null&&xe.cor_indicador&&(Oe[ue]={cor:le.data.resultado.cor_indicador,classificacao:le.data.resultado.cor_indicador})}catch(le){console.error(`Erro ao simular ${ue}x:`,le),Oe[ue]={cor:null,classificacao:"verde"}}}ee(ue=>({...ue,[Ie]:Oe}));const Y=Ae(Oe,$e);Se(Y),console.log(" Simulaes concludas:",Oe),console.log(" Faixas calculadas:",Y)}catch(Oe){console.error(" Erro ao simular parcelamentos:",Oe)}finally{ie(!1)}},Ae=(ge,$e)=>{const Ie={saudavel:{min:1,max:0},alerta:{min:0,max:0},proibido:{min:0,max:$e}};let it=0,rt=$e+1;for(let xe=1;xe<=$e;xe++){const Oe=ge[xe];Oe&&(Oe.cor==="verde"?it=xe:Oe.cor==="vermelho"&&xe<rt&&(rt=xe))}return Ie.saudavel.max=it,Ie.alerta.min=it+1,Ie.alerta.max=rt-1,Ie.proibido.min=rt,Ie};j.useEffect(()=>{if(p!=null&&p.permite_parcelamento)if(!ae[p.id])Me(p);else{const ge=ae[p.id],$e=Ae(ge,(p==null?void 0:p.parcelas_maximas)??12);Se($e),console.log(" Reutilizando simulao existente")}else if(!p){const ge=Object.keys(ae)[0];if(ge&&d.length>0){const $e=d.find(Ie=>Ie.id===parseInt(ge));if($e){const Ie=Ae(ae[ge],($e==null?void 0:$e.parcelas_maximas)??12);Se(Ie)}}}},[p==null?void 0:p.id]);const ct=()=>{var rt;if(!p){V("Selecione uma forma de pagamento");return}const ge=parseFloat(S)||0;if(ge<=0){V("Informe o valor recebido");return}if(p.id==="credito_cliente"&&ge>p.credito_disponivel){V(`Valor excede o crdito disponvel (R$ ${p.credito_disponivel.toFixed(2)})`);return}if(["cartao_credito","cartao_debito"].includes(p.tipo)&&!y){V("Selecione a bandeira do carto");return}if(["cartao_credito","cartao_debito"].includes(p.tipo)&&!h){V("Selecione a operadora do carto");return}if(h&&_>h.max_parcelas){V(`A operadora ${h.nome} permite no mximo ${h.max_parcelas}x`);return}console.log(" DEBUG formaPagamentoSelecionada:",p);const $e={forma_pagamento:p.nome,forma_id:p.id,forma_pagamento_id:p.id,nome:p.nome,valor:Math.min(ge,lt),bandeira:["cartao_credito","cartao_debito"].includes(p.tipo)?y:null,nsu_cartao:["cartao_credito","cartao_debito"].includes(p.tipo)&&b?b:null,operadora_id:(h==null?void 0:h.id)||null,numero_parcelas:p.permite_parcelamento?_:1,parcelas:p.permite_parcelamento?_:1,valor_recebido:ge,troco:p.tipo==="dinheiro"&&Ke>0?Ke:null,is_credito_cliente:p.nome==="Crdito Cliente"||p.tipo==="credito_cliente"};console.log(" DEBUG novoPagamento:",$e);let Ie="verde";if(p!=null&&p.permite_parcelamento&&ae[p.id]){const xe=(rt=ae[p.id])==null?void 0:rt[_];Ie=(xe==null?void 0:xe.cor)??"verde",console.log(` Reutilizando simulao do backend: ${_}x = cor ${Ie}`)}if(B==="vermelho"||Ie==="vermelho"){if(!M||M.trim().length<10){W(" Justificativa obrigatria para margem crtica (mnimo 10 caracteres)"),V("Por favor, preencha a justificativa abaixo");return}const xe=t.observacoes?`${t.observacoes}

 JUSTIFICATIVA (Margem Crtica): ${M}`:` JUSTIFICATIVA (Margem Crtica): ${M}`;t.observacoes=xe}i([...o,$e]),g(null),C(""),f(""),v(m.find(xe=>xe.padrao)||null),N(""),w(1),V(""),W("")},bt=ge=>{i(o.filter(($e,Ie)=>Ie!==ge))},Rt=async ge=>{var $e,Ie;if(confirm("Deseja realmente excluir este pagamento?")){T(!0),V("");try{console.log(` Excluindo pagamento ID ${ge}...`),await U.delete(`/vendas/pagamentos/${ge}`),console.log(" Pagamento excludo com sucesso!");const it=await U.get(`/vendas/${t.id}/pagamentos`);c(it.data.pagamentos||[]),L(it.data.total_pago||0),it.data.pagamentos.length===0&&s&&await s(),V("")}catch(it){console.error(" Erro ao excluir pagamento:",it),console.error("   Response:",it.response),console.error("   Message:",it.message),it.message&&it.message.includes("CORS")?V(" Erro de CORS: O backend precisa ser reiniciado. Feche e abra novamente o servidor backend."):V(((Ie=($e=it.response)==null?void 0:$e.data)==null?void 0:Ie.detail)||it.message||"Erro ao excluir pagamento")}finally{T(!1)}}},Ct=async()=>{var ge,$e,Ie,it,rt,xe,Oe,Ye;if(o.length===0){V("Adicione pelo menos uma forma de pagamento");return}T(!0),V("");try{const Y=t.itens.filter(le=>le.tipo==="produto"&&le.produto_id).map(le=>({produto_id:le.produto_id,quantidade:le.quantidade}));if(Y.length>0){const ve=(await pB(Y)).data||[];if(ve.length>0){const Re=ve.map(Q=>` ${Q.produto_nome}: estoque atual ${Q.estoque_atual}, aps venda ficar ${Q.estoque_resultante}`).join(`
`);if(!window.confirm(` ATENO: Os seguintes produtos ficaro com ESTOQUE NEGATIVO:

${Re}

Deseja continuar mesmo assim?`)){T(!1);return}}}let ue=t.id;if(!ue){const le=((ge=t.entrega)==null?void 0:ge.taxa_entrega_total)||0,ve=(($e=t.entrega)==null?void 0:$e.taxa_loja)||0,Re=((Ie=t.entrega)==null?void 0:Ie.taxa_entregador)||0,Le=le>0?(ve/le*100).toFixed(2):100,Q=le>0?(Re/le*100).toFixed(2):0;ue=(await rP({cliente_id:(it=t.cliente)==null?void 0:it.id,funcionario_id:t.funcionario_id,itens:t.itens,desconto_valor:t.desconto_valor,desconto_percentual:t.desconto_percentual,observacoes:t.observacoes,tem_entrega:t.tem_entrega,taxa_entrega:le,percentual_taxa_loja:parseFloat(Le),percentual_taxa_entregador:parseFloat(Q),entregador_id:t.entregador_id,endereco_entrega:(rt=t.entrega)==null?void 0:rt.endereco_completo,observacoes_entrega:(xe=t.entrega)==null?void 0:xe.observacoes_entrega})).id}const qe=await _B(ue,o);R(ue),(qe==null?void 0:qe.status)==="finalizada"||(qe==null?void 0:qe.status)==="pago_nf"?D(!0):a()}catch(Y){console.error("Erro ao finalizar venda:",Y),V(((Ye=(Oe=Y.response)==null?void 0:Oe.data)==null?void 0:Ye.detail)||"Erro ao finalizar venda")}finally{T(!1)}},It=async ge=>{var $e,Ie;T(!0),V("");try{await U.post("/nfe/emitir",{venda_id:K,tipo_nota:ge}),alert(`${ge==="nfe"?"NF-e":"NFC-e"} emitida com sucesso!`),a()}catch(it){console.error("Erro ao emitir nota:",it),alert(((Ie=($e=it.response)==null?void 0:$e.data)==null?void 0:Ie.detail)||"Erro ao emitir nota fiscal. Voc pode emiti-la depois na tela de vendas."),a()}finally{T(!1)}};return Z?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Gt,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Venda Finalizada!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deseja emitir nota fiscal?"})]})]}),e.jsxs("div",{className:"space-y-3",children:[($t=t.cliente)!=null&&$t.cnpj?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>It("nfe"),disabled:E,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NF-e (Empresa)"})]}),e.jsxs("button",{onClick:()=>It("nfce"),disabled:E,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NFC-e (Cupom)"})]})]}):e.jsxs("button",{onClick:()=>It("nfce"),disabled:E,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[e.jsx(bs,{className:"w-5 h-5"}),e.jsx("span",{children:"Emitir NFC-e"})]}),e.jsx("button",{onClick:a,disabled:E,className:"w-full px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"No emitir agora"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Voc pode emitir a nota fiscal depois na tela de vendas"})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(vd,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Registrar Recebimento"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Selecione as formas de pagamento"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!1,e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Selecione a forma de pagamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.cliente&&t.cliente.credito>0&&e.jsxs("button",{onClick:()=>{g({id:"credito_cliente",nome:"Crdito Cliente",tipo:"credito_cliente",icone:"",credito_disponivel:parseFloat(t.cliente.credito)}),w(1),f(""),N(""),C(Math.min(parseFloat(t.cliente.credito),lt).toFixed(2))},className:`p-4 rounded-lg border-2 transition-all ${(p==null?void 0:p.id)==="credito_cliente"?"border-purple-500 bg-purple-50":"border-purple-200 bg-purple-50/50 hover:border-purple-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:`text-sm font-medium ${(p==null?void 0:p.id)==="credito_cliente"?"text-purple-900":"text-purple-700"}`,children:"Crdito Cliente"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-1 font-semibold",children:["R$ ",parseFloat(t.cliente.credito).toFixed(2).replace(".",",")]})]}),d.map(ge=>{const $e=(p==null?void 0:p.id)===ge.id;return e.jsxs("button",{onClick:()=>{g(ge),w(1),f(""),N("")},className:`p-4 rounded-lg border-2 transition-all ${$e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:ge.icone||""}),e.jsx("div",{className:`text-sm font-medium ${$e?"text-blue-900":"text-gray-700"}`,children:ge.nome}),ge.taxa_percentual>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Taxa: ",ge.taxa_percentual,"%"]})]},ge.id)})]})]}),p&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[p.id==="credito_cliente"&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-800 mb-2",children:[e.jsx(jd,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Crdito Disponvel"})]}),e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:["R$ ",p.credito_disponivel.toFixed(2).replace(".",",")]}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:" No gera movimentao de caixa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:p.id==="credito_cliente"?"Valor a Utilizar":"Valor Recebido"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:S,onChange:ge=>{C(ge.target.value)},onBlur:ge=>{const $e=parseFloat(ge.target.value)||0;if(p.id==="credito_cliente"){const Ie=Math.min(p.credito_disponivel,lt);$e>Ie&&(C(Ie.toFixed(2)),V(`Valor ajustado para o crdito disponvel: R$ ${Ie.toFixed(2)}`),setTimeout(()=>V(""),3e3))}},placeholder:lt.toFixed(2),max:p.id==="credito_cliente"?Math.min(p.credito_disponivel,lt):void 0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),p.id==="credito_cliente"&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Mximo: R$ ",Math.min(p.credito_disponivel,lt).toFixed(2)]})]}),p.tipo==="dinheiro"&&S&&e.jsx("div",{className:`rounded-lg p-3 ${Ke>0?"bg-yellow-50 border border-yellow-200":"bg-gray-100"}`,children:e.jsx("div",{className:"text-sm font-medium",children:e.jsxs("span",{className:Ke>0?"text-yellow-800":"text-gray-600",children:["Troco: R$ ",Ke.toFixed(2)]})})}),(p==null?void 0:p.tipo)&&["cartao_credito","cartao_debito"].includes(p.tipo)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operadora *"}),e.jsxs("select",{value:(h==null?void 0:h.id)||"",onChange:ge=>{const $e=m.find(Ie=>Ie.id===parseInt(ge.target.value));v($e),$e&&_>$e.max_parcelas&&w($e.max_parcelas)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),m.map(ge=>e.jsxs("option",{value:ge.id,children:[ge.nome," (",ge.max_parcelas,"x mx)"]},ge.id))]}),h&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mximo de ",h.max_parcelas," parcelas"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bandeira"}),e.jsxs("select",{value:y,onChange:ge=>f(ge.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),kB.map(ge=>e.jsx("option",{value:ge,children:ge},ge))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["NSU (Nmero Sequencial nico)",e.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(Opcional - para conciliao)"})]}),e.jsx("input",{type:"text",value:b,onChange:ge=>N(ge.target.value),placeholder:"Ex: 123456789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(p==null?void 0:p.permite_parcelamento)&&e.jsxs("div",{ref:me,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero de Parcelas"}),e.jsx("select",{value:_,onChange:ge=>w(parseInt(ge.target.value)),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return $e==="verde"?"border-gray-300 bg-white":$e==="amarelo"?"border-yellow-400 bg-yellow-50 text-yellow-900":"border-red-400 bg-red-50 text-red-900"})()}`,children:Array.from({length:(h==null?void 0:h.max_parcelas)||p.parcelas_maximas||12},(ge,$e)=>$e+1).map(ge=>{var xe;const $e=parseFloat(S)||lt,Ie=$e/ge,it=(xe=ae[p.id])==null?void 0:xe[ge],rt=(it==null?void 0:it.cor)||"verde";return e.jsxs("option",{value:ge,className:rt==="verde"?"":rt==="amarelo"?"bg-yellow-100 text-yellow-900":"bg-red-100 text-red-900",children:[rt==="vermelho"?" ":rt==="amarelo"?" ":"",ge,"x de R$ ",Ie.toFixed(2)," ",S?`(Total: R$ ${$e.toFixed(2)})`:""]},ge)})}),S&&_>1&&e.jsxs("div",{className:`mt-2 p-3 border rounded-lg ${(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return $e==="verde"?"bg-blue-50 border-blue-200":$e==="amarelo"?"bg-yellow-50 border-yellow-300":"bg-red-50 border-red-300"})()}`,children:[e.jsx("p",{className:`text-sm font-medium ${(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return $e==="verde"?"text-blue-800":$e==="amarelo"?"text-yellow-800":"text-red-800"})()}`,children:(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return e.jsxs(e.Fragment,{children:[$e==="vermelho"&&" ",$e==="amarelo"&&" "," ",_,"x de R$ ",(parseFloat(S)/_).toFixed(2)]})})()}),e.jsxs("p",{className:`text-xs mt-1 ${(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return $e==="verde"?"text-blue-600":$e==="amarelo"?"text-yellow-700":"text-red-700"})()}`,children:["Valor total parcelado: R$ ",parseFloat(S).toFixed(2),(()=>{var Ie;const ge=(Ie=ae[p.id])==null?void 0:Ie[_],$e=(ge==null?void 0:ge.cor)||B||"verde";return $e==="amarelo"?" - Requer ateno":$e==="vermelho"?" - Requer justificativa":""})()]})]})]}),e.jsx("button",{onClick:ct,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Adicionar Pagamento"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Resumo da Venda"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total da Venda:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",_e.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Valor Pago:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",je.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-600 text-lg font-semibold border-t pt-3",children:[e.jsx("span",{children:"Restante:"}),e.jsxs("span",{children:["R$ ",lt.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Formas de Pagamento"}),l.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:[" Pagamentos Registrados (",l.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.map((ge,$e)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ge.forma_pagamento==="dinheiro"?" Dinheiro":ge.forma_pagamento==="pix"?" PIX":ge.forma_pagamento==="credito"?" Carto de Crdito":ge.forma_pagamento==="debito"?" Carto de Dbito":ge.forma_pagamento==="boleto"?" Boleto":ge.forma_pagamento}),e.jsxs("span",{className:"px-2 py-0.5 bg-green-200 text-green-800 text-xs rounded-full font-medium",children:["Pagamento ",$e+1]})]}),ge.bandeira&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Bandeira: ",ge.bandeira]}),ge.nsu_cartao&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 font-mono",children:[" NSU: ",ge.nsu_cartao]}),ge.numero_parcelas&&ge.numero_parcelas>1&&e.jsxs("div",{className:"text-sm text-blue-600 mt-1 font-medium",children:[" Parcelado em ",ge.numero_parcelas,"x de R$ ",(parseFloat(ge.valor)/ge.numero_parcelas).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[" ",new Date(ge.data_pagamento).toLocaleString("pt-BR")]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-700 text-lg",children:["R$ ",parseFloat(ge.valor).toFixed(2)]}),ge.troco&&parseFloat(ge.troco)>0&&e.jsxs("div",{className:"text-xs text-yellow-600",children:["Troco: R$ ",parseFloat(ge.troco).toFixed(2)]})]}),e.jsx("button",{onClick:()=>Rt(ge.id),disabled:E,className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors disabled:opacity-50",title:"Excluir pagamento",children:e.jsx(Fo,{className:"w-4 h-4"})})]})]},ge.id))})]}),o.length===0&&l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 bg-gray-50 rounded-lg border-2 border-dashed",children:[e.jsx(jd,{className:"w-12 h-12 mx-auto mb-2 opacity-40"}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma forma de pagamento adicionada"}),e.jsx("p",{className:"text-xs mt-1",children:"Selecione uma forma acima para comear"})]}):o.length>0?e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:" Novos Pagamentos (a confirmar)"}),e.jsx("div",{className:"space-y-3",children:o.map((ge,$e)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ge.nome}),e.jsx("span",{className:"px-2 py-0.5 bg-blue-200 text-blue-800 text-xs rounded-full font-medium",children:"Novo"})]}),ge.bandeira&&e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Bandeira: ",ge.bandeira]}),ge.nsu_cartao&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 font-mono",children:[" NSU: ",ge.nsu_cartao]}),ge.numero_parcelas>1&&e.jsxs("div",{className:"text-sm text-blue-600 mt-1 font-medium",children:[" ",ge.numero_parcelas,"x de R$ ",(ge.valor/ge.numero_parcelas).toFixed(2)]}),ge.troco&&ge.troco>0&&e.jsxs("div",{className:"text-sm text-yellow-600 mt-1",children:[" Troco: R$ ",ge.troco.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"font-semibold text-blue-700 text-lg",children:["R$ ",ge.valor.toFixed(2)]}),e.jsx("button",{onClick:()=>bt($e),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Remover",children:e.jsx(qt,{className:"w-5 h-5"})})]})]},$e))})]}):null]}),B&&e.jsx(CB,{status:B,loading:I}),we&&Object.keys(ae).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{children:"Parcelamento Recomendado"})]}),ce?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"Analisando opes..."})]}):e.jsxs("div",{className:"space-y-2",children:[we.saudavel.max>0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-100 border border-green-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-green-900",children:[we.saudavel.min===we.saudavel.max?`${we.saudavel.max}x`:`${we.saudavel.min}x a ${we.saudavel.max}x`,e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Saudvel"})]}),e.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Margem adequada, sem restries"})]})]}),we.alerta.max>=we.alerta.min&&we.alerta.min>0&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-100 border border-yellow-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-yellow-900",children:[we.alerta.min===we.alerta.max?`${we.alerta.max}x`:`${we.alerta.min}x a ${we.alerta.max}x`,e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Ateno"})]}),e.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Margem prxima ao mnimo, evite se possvel"})]})]}),we.proibido.min<=((p==null?void 0:p.parcelas_maximas)??12)&&e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-red-100 border border-red-300 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-red-900",children:[we.proibido.min,"x ou mais",e.jsx("span",{className:"ml-2 text-sm font-normal",children:"- Exige justificativa"})]}),e.jsx("div",{className:"text-xs text-red-700 mt-1",children:"Margem crtica, justificativa obrigatria"})]})]})]})]}),(()=>{var it,rt;let ge="verde";return p!=null&&p.permite_parcelamento&&((it=ae[p.id])!=null&&it[_])&&(ge=((rt=ae[p.id][_])==null?void 0:rt.cor)??"verde"),B==="vermelho"||ge==="vermelho"||M&&M.trim().length>0?e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-900",children:" Justificativa Obrigatria"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Esta venda tem margem crtica. Informe o motivo para prosseguir."})]})]}),e.jsx("textarea",{value:M,onChange:xe=>{z(xe.target.value),xe.target.value.trim().length>=10&&W("")},placeholder:"Ex: Cliente especial, promoo de lanamento, acordo comercial...",className:`w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-red-500 resize-none ${oe?"border-red-500":"border-red-300"}`,rows:3}),oe&&e.jsx("p",{className:"text-xs text-red-700 font-medium mt-2",children:oe}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:" Mnimo 10 caracteres"})]}):null})()]})]})}),e.jsxs("div",{className:"border-t p-6 bg-gray-50",children:[O&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:O})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:r,disabled:E,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:Ct,disabled:E||o.length===0,className:"flex items-center space-x-2 px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"})]})})]})]})]})})}const AB=async t=>(await U.post("/caixas/abrir",t)).data,PB=async()=>(await U.get("/caixas/aberto")).data,TB=async(t={})=>(await U.get("/caixas",{params:t})).data,F2=async(t,r)=>(await U.post(`/caixas/${t}/movimentacao`,r)).data,OB=async(t,r)=>(await U.post(`/caixas/${t}/fechar`,r)).data,FB=async t=>(await U.post(`/caixas/${t}/reabrir`)).data,aP=async t=>(await U.get(`/caixas/${t}/resumo`)).data;function $B({onClose:t,onSucesso:r}){const[a,s]=j.useState(""),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState({n2:0,n5:0,n10:0,n20:0,n50:0,n100:0,n200:0,moedas:0}),[u,m]=j.useState(!1),[x,h]=j.useState(!1),[v,p]=j.useState(""),g=()=>c.n200*200+c.n100*100+c.n50*50+c.n20*20+c.n10*10+c.n5*5+c.n2*2+parseFloat(c.moedas||0),y=()=>{const N=g();s(N.toFixed(2)),m(!1)},f=()=>{d({n2:0,n5:0,n10:0,n20:0,n50:0,n100:0,n200:0,moedas:0})},b=async()=>{var _,w;const N=parseFloat(a);if(!N||N<0){p("Informe um valor vlido para abertura");return}h(!0),p("");try{await AB({valor_abertura:N,conta_origem_nome:n||"Dinheiro em mos",observacoes_abertura:i}),r()}catch(S){console.error("Erro ao abrir caixa:",S),p(((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao abrir caixa")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ha,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Abrir Caixa"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Informe o valor inicial do caixa"})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor de Abertura *"}),e.jsxs("button",{type:"button",onClick:()=>m(!u),className:"flex items-center space-x-1 px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg transition-colors",children:[e.jsx(jl,{className:"w-4 h-4"}),e.jsx("span",{children:"Auxiliar Contagem"})]})]}),u&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 flex items-center",children:[e.jsx(jl,{className:"w-5 h-5 mr-2 text-blue-600"}),"Auxiliar de Contagem"]}),e.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-blue-100 rounded-lg transition-colors",type:"button",children:e.jsx(qt,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-gray-200 hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 2"}),e.jsx("input",{type:"number",min:"0",value:c.n2,onChange:N=>d({...c,n2:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-gray-600",children:["R$ ",(c.n2*2).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-purple-200 hover:border-purple-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 5"}),e.jsx("input",{type:"number",min:"0",value:c.n5,onChange:N=>d({...c,n5:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",(c.n5*5).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-red-200 hover:border-red-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 10"}),e.jsx("input",{type:"number",min:"0",value:c.n10,onChange:N=>d({...c,n10:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-red-500 focus:ring-2 focus:ring-red-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["R$ ",(c.n10*10).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-yellow-200 hover:border-yellow-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 20"}),e.jsx("input",{type:"number",min:"0",value:c.n20,onChange:N=>d({...c,n20:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["R$ ",(c.n20*20).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-blue-200 hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 50"}),e.jsx("input",{type:"number",min:"0",value:c.n50,onChange:N=>d({...c,n50:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",(c.n50*50).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-green-200 hover:border-green-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 100"}),e.jsx("input",{type:"number",min:"0",value:c.n100,onChange:N=>d({...c,n100:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-green-500 focus:ring-2 focus:ring-green-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",(c.n100*100).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-orange-200 hover:border-orange-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 200"}),e.jsx("input",{type:"number",min:"0",value:c.n200,onChange:N=>d({...c,n200:parseInt(N.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["R$ ",(c.n200*200).toFixed(2)]})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-blue-300",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-amber-200 hover:border-amber-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:" Moedas"})}),e.jsxs("span",{className:"text-lg font-bold text-amber-600",children:["R$ ",parseFloat(c.moedas||0).toFixed(2)]})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:c.moedas,onChange:N=>d({...c,moedas:parseFloat(N.target.value)||0}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-200",placeholder:"0.00"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 mb-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"TOTAL CONTADO"}),e.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$ ",g().toFixed(2)]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:f,className:"flex-1 px-4 py-3 border-2 border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-semibold transition-colors",children:" Limpar"}),e.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold shadow-md transition-colors",children:" Aplicar"})]})]}),e.jsxs("div",{className:"relative mt-2",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:a,onChange:N=>s(N.target.value),placeholder:"0,00",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg font-semibold",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conta de Origem"}),e.jsxs("select",{value:n,onChange:N=>o(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Dinheiro em mos",children:"Dinheiro em mos"}),e.jsx("option",{value:"Caixa geral",children:"Caixa geral"}),e.jsx("option",{value:"Banco",children:"Banco"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:i,onChange:N=>l(N.target.value),rows:3,placeholder:"Ex: Troco do dia anterior...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t p-6 bg-gray-50",children:[v&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:v})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:t,disabled:x,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:b,disabled:x||!a,className:"px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Abrindo...":"Abrir Caixa"})]})]})]})})}function RB({caixaId:t,onClose:r,onSucesso:a}){const[s,n]=j.useState(""),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!1),[m,x]=j.useState(""),h=async()=>{var p,g;const v=parseFloat(s);if(!v||v<=0){x("Informe um valor vlido");return}u(!0);try{await F2(t,{tipo:"suprimento",valor:v,forma_pagamento:"Dinheiro",conta_origem_nome:o||"No informado",descricao:l}),a()}catch(y){x(((g=(p=y.response)==null?void 0:p.data)==null?void 0:g.detail)||"Erro ao adicionar suprimento")}finally{u(!1)}};return e.jsx($2,{titulo:"Suprimento para o caixa",icone:aa,corIcone:"green",onClose:r,erro:m,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conta de origem*"}),e.jsxs("select",{value:o,onChange:v=>i(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Dinheiro em mos",children:"Dinheiro em mos"}),e.jsx("option",{value:"Caixa geral",children:"Caixa geral"}),e.jsx("option",{value:"Banco",children:"Banco"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:s,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio*"}),e.jsx("textarea",{value:l,onChange:v=>c(v.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Motivo do suprimento..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:r,disabled:d,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:h,disabled:d,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:d?"Salvando...":"Salvar"})]})]})})}function DB({caixaId:t,saldoAtual:r,onClose:a,onSucesso:s}){const[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState(""),v=async()=>{var g,y;const p=parseFloat(n);if(!p||p<=0){h("Informe um valor vlido");return}m(!0);try{await F2(t,{tipo:"sangria",valor:p,forma_pagamento:"Dinheiro",conta_destino_nome:i||"No informado",descricao:c}),s()}catch(f){h(((y=(g=f.response)==null?void 0:g.data)==null?void 0:y.detail)||"Erro ao adicionar sangria")}finally{m(!1)}};return e.jsx($2,{titulo:"Sangria no caixa",icone:Sa,corIcone:"orange",onClose:a,erro:x,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Em caixa:"})," R$ ",r.toFixed(2)]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor da Sangria*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:n,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a conta de destino*"}),e.jsxs("select",{value:i,onChange:p=>l(p.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Cofre",children:"Cofre"}),e.jsx("option",{value:"Banco",children:"Banco"}),e.jsx("option",{value:"Outro caixa",children:"Outro caixa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),e.jsx("textarea",{value:c,onChange:p=>d(p.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Motivo da sangria..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:a,disabled:u,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:v,disabled:u,className:"flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:u?"Salvando...":"Salvar"})]})]})})}function MB({caixaId:t,onClose:r,onSucesso:a}){const[s,n]=j.useState(""),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState("Dinheiro"),[m,x]=j.useState(""),[h,v]=j.useState(""),[p,g]=j.useState(!1),[y,f]=j.useState(""),b=["gua e Luz","Aluguel","Telefone/Internet","Material de Limpeza","Material de Escritrio","Manuteno","Outros"],N=async()=>{var w,S;const _=parseFloat(l);if(!_||_<=0){f("Informe um valor vlido");return}if(!s){f("Selecione uma categoria");return}g(!0);try{await F2(t,{tipo:"despesa",valor:_,categoria:s,descricao:o,forma_pagamento:d,fornecedor_nome:m,documento:h}),a()}catch(C){f(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao adicionar despesa")}finally{g(!1)}};return e.jsx($2,{titulo:"Despesa no caixa",icone:Ic,corIcone:"red",onClose:r,erro:y,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria*"}),e.jsxs("select",{value:s,onChange:_=>n(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),b.map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio*"}),e.jsx("input",{type:"text",value:o,onChange:_=>i(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Conta de luz - Janeiro"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de pagamento*"}),e.jsxs("select",{value:d,onChange:_=>u(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"PIX",children:"PIX"}),e.jsx("option",{value:"Carto de Crdito",children:"Carto de Crdito"}),e.jsx("option",{value:"Carto de Dbito",children:"Carto de Dbito"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor*"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:l,onChange:_=>c(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor"}),e.jsx("input",{type:"text",value:m,onChange:_=>x(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documento / NF"}),e.jsx("input",{type:"text",value:h,onChange:_=>v(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:r,disabled:p,className:"flex-1 px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors",children:"Fechar"}),e.jsx("button",{onClick:N,disabled:p,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:p?"Salvando...":"Salvar"})]})]})})}function $2({titulo:t,icone:r,corIcone:a,children:s,onClose:n,erro:o}){const i={green:"bg-green-100 text-green-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-12 h-12 ${i[a]} rounded-full flex items-center justify-center`,children:e.jsx(r,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[o&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:o})]}),s]})]})})}function IB({caixaId:t,onClose:r,onSuccess:a}){const[s,n]=j.useState(null),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!0),[m,x]=j.useState(!1),[h,v]=j.useState(!1),[p,g]=j.useState({n100:0,n50:0,n20:0,n10:0,n5:0,n2:0,moedas:0});j.useEffect(()=>{y()},[t]);const y=async()=>{try{const C=await aP(t);console.log(" Resumo do caixa recebido:",C),console.log(" vendas_por_forma_pagamento:",C.vendas_por_forma_pagamento),n(C),i(C.totais.saldo_atual.toFixed(2))}catch(C){console.error("Erro ao carregar resumo:",C),alert("Erro ao carregar dados do caixa")}finally{u(!1)}},f=()=>!s||!o?0:parseFloat(o)-s.totais.saldo_atual,b=()=>p.n100*100+p.n50*50+p.n20*20+p.n10*10+p.n5*5+p.n2*2+parseFloat(p.moedas||0),N=()=>{const C=b();i(C.toFixed(2)),v(!1)},_=()=>{g({n100:0,n50:0,n20:0,n10:0,n5:0,n2:0,moedas:0})},w=async()=>{var E,T;if(!o){alert("Informe o valor contado no caixa");return}const C=f();if(!(Math.abs(C)>.01&&!window.confirm(`Diferena de R$ ${Math.abs(C).toFixed(2)} ${C>0?"a mais":"a menos"}

Deseja continuar com o fechamento?`))){x(!0);try{await OB(t,{valor_informado:parseFloat(o),observacoes_fechamento:l||null}),alert("Caixa fechado com sucesso!"),a(),r()}catch(q){console.error("Erro ao fechar caixa:",q),alert(((T=(E=q.response)==null?void 0:E.data)==null?void 0:T.detail)||"Erro ao fechar caixa")}finally{x(!1)}}};if(d)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})});if(!s)return null;const S=f();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-red-600 to-orange-600 text-white p-6 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[e.jsx(Ic,{className:"w-7 h-7 mr-3"}),"Fechar Caixa"]}),e.jsxs("p",{className:"text-red-100 mt-1",children:["Caixa #",s.caixa.numero_caixa," - ",s.caixa.usuario_nome]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 border-2 border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(jl,{className:"w-5 h-5 mr-2 text-gray-700"}),"Resumo do Movimento"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Valor de Abertura"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.caixa.valor_abertura.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(s.caixa.data_abertura).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-700 mb-1",children:[e.jsx(Ic,{className:"w-4 h-4 mr-1"}),"Entradas"]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+ R$ ",s.totais.vendas.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Movimento de entrada"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-blue-700 mb-1",children:[e.jsx(aa,{className:"w-4 h-4 mr-1"}),"Suprimentos"]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["+ R$ ",s.totais.suprimentos.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-orange-700 mb-1",children:[e.jsx(Sa,{className:"w-4 h-4 mr-1"}),"Sangrias"]}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["- R$ ",s.totais.sangrias.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-red-200",children:[e.jsxs("div",{className:"flex items-center text-sm text-red-700 mb-1",children:[e.jsx(ha,{className:"w-4 h-4 mr-1"}),"Despesas"]}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["- R$ ",s.totais.despesas.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"Valor Contado no Caixa *"}),e.jsxs("button",{type:"button",onClick:()=>v(!h),className:"flex items-center space-x-1 px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border border-blue-200",title:"Auxiliar na contagem de notas",children:[e.jsx(jl,{className:"w-4 h-4"}),e.jsx("span",{children:"Auxiliar Contagem"})]})]}),h&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-bold text-gray-900 flex items-center",children:[e.jsx(jl,{className:"w-5 h-5 mr-2 text-blue-600"}),"Auxiliar de Contagem"]}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-gray-200 hover:border-gray-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 2"}),e.jsx("input",{type:"number",min:"0",value:p.n2,onChange:C=>g({...p,n2:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-gray-500 focus:ring-2 focus:ring-gray-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-gray-600",children:["R$ ",(p.n2*2).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-purple-200 hover:border-purple-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 5"}),e.jsx("input",{type:"number",min:"0",value:p.n5,onChange:C=>g({...p,n5:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["R$ ",(p.n5*5).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-red-200 hover:border-red-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 10"}),e.jsx("input",{type:"number",min:"0",value:p.n10,onChange:C=>g({...p,n10:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-red-500 focus:ring-2 focus:ring-red-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["R$ ",(p.n10*10).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-yellow-200 hover:border-yellow-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 20"}),e.jsx("input",{type:"number",min:"0",value:p.n20,onChange:C=>g({...p,n20:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-yellow-500 focus:ring-2 focus:ring-yellow-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:["R$ ",(p.n20*20).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-blue-200 hover:border-blue-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 50"}),e.jsx("input",{type:"number",min:"0",value:p.n50,onChange:C=>g({...p,n50:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["R$ ",(p.n50*50).toFixed(2)]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border-2 border-green-200 hover:border-green-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:"R$ 100"}),e.jsx("input",{type:"number",min:"0",value:p.n100,onChange:C=>g({...p,n100:parseInt(C.target.value)||0}),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-green-500 focus:ring-2 focus:ring-green-200",placeholder:"0"}),e.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",(p.n100*100).toFixed(2)]})]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-blue-300",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-amber-200 hover:border-amber-400 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white px-3 py-2 rounded-lg font-bold text-sm shadow-md",children:" Moedas"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:p.moedas,onChange:C=>g({...p,moedas:parseFloat(C.target.value)||0}),className:"w-32 px-3 py-2 border-2 border-gray-300 rounded-lg text-center font-bold text-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-200",placeholder:"0.00"})]}),e.jsxs("span",{className:"text-lg font-bold text-amber-600",children:["R$ ",(p.moedas||0).toFixed(2)]})]})})}),e.jsxs("div",{className:"mt-5 pt-5 border-t-2 border-blue-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-4 mb-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:"TOTAL CONTADO"}),e.jsxs("span",{className:"text-3xl font-bold text-white",children:["R$ ",b().toFixed(2)]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:_,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold transition-colors",children:" Limpar"}),e.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-bold shadow-md transition-all",children:" Aplicar"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ha,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:o,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-3 text-lg font-semibold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",autoFocus:!0})]}),o&&Math.abs(S)>.01&&e.jsx("div",{className:`mt-3 p-4 rounded-lg border-2 ${S>0?"bg-blue-50 border-blue-300":"bg-yellow-50 border-yellow-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:[S>0?"Sobra":"Falta",":"]}),e.jsxs("span",{className:`text-xl font-bold ${S>0?"text-blue-600":"text-yellow-700"}`,children:["R$ ",Math.abs(S).toFixed(2)]})]})}),o&&Math.abs(S)<=.01&&e.jsx("div",{className:"mt-3 p-4 rounded-lg border-2 bg-green-50 border-green-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-700 font-semibold",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{children:"Caixa conferido - Valores corretos!"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:l,onChange:C=>c(C.target.value),placeholder:"Adicione observaes sobre o fechamento...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),s.vendas_por_forma_pagamento&&Object.keys(s.vendas_por_forma_pagamento).length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center",children:[e.jsx(Ic,{className:"w-4 h-4 mr-1.5 text-blue-600"}),"Vendas por Forma de Pagamento (Informativo)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s.vendas_por_forma_pagamento).map(([C,E])=>{const T=C==="Dinheiro";return e.jsx("div",{className:`bg-white rounded-lg p-3 border ${T?"border-green-300 bg-green-50":"border-gray-200"} hover:shadow-sm transition-shadow cursor-pointer`,title:"Clique para ver detalhes das vendas",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${C==="Dinheiro"?"bg-green-500":C==="PIX"?"bg-purple-500":C.includes("Dbito")?"bg-blue-500":C.includes("Crdito")?"bg-orange-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:C}),T&&e.jsx("span",{className:"text-xs bg-green-600 text-white px-1.5 py-0.5 rounded",children:"CAIXA"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[E.quantidade," venda",E.quantidade!==1?"s":""]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["R$ ",E.total.toFixed(2)]})})]})},C)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 text-xs text-gray-600",children:[" ",e.jsx("strong",{children:"Dica:"})," Apenas ",e.jsx("strong",{children:"Dinheiro"})," afeta o saldo fsico do caixa. Demais formas vo para banco/financeiro."]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,disabled:m,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{onClick:w,disabled:m||!o,className:"px-8 py-3 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white rounded-lg font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Fechando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ic,{className:"w-5 h-5"}),e.jsx("span",{children:"Fechar Caixa"})]})})]})]})]})})}function LB({caixaId:t,onClose:r,onSucesso:a}){var I;const[s,n]=j.useState(1),[o,i]=j.useState([]),[l,c]=j.useState(null),[d,u]=j.useState({}),[m,x]=j.useState({}),[h,v]=j.useState(""),[p,g]=j.useState(!1),[y,f]=j.useState(!1),[b,N]=j.useState(""),[_,w]=j.useState({}),[S,C]=j.useState({}),[E,T]=j.useState({}),[q,A]=j.useState({busca:"",data_inicio:"",data_fim:"",status:"finalizada"});j.useEffect(()=>{O()},[q]);const O=async()=>{f(!0),N("");try{const k={per_page:50,...q},M=await U.get("/vendas",{params:k});i(M.data.vendas||[])}catch(k){console.error("Erro ao buscar vendas:",k),N("Erro ao carregar vendas")}finally{f(!1)}},V=async k=>{var M,z;f(!0),N("");try{const oe=await U.get(`/vendas/${k.id}`);c(oe.data);const W={};oe.data.itens.forEach(ae=>{W[ae.id]=ae.quantidade}),x(W),n(2)}catch(oe){console.error("Erro ao buscar venda:",oe),N(((z=(M=oe.response)==null?void 0:M.data)==null?void 0:z.detail)||"Erro ao carregar detalhes da venda")}finally{f(!1)}},G=k=>{const M=d[k];u(z=>({...z,[k]:!z[k]})),M&&(w(z=>{const oe={...z};return delete oe[k],oe}),C(z=>{const oe={...z};return delete oe[k],oe}),T(z=>{const oe={...z};return delete oe[k],oe}))},L=(k,M)=>{const oe=l.itens.find(ae=>ae.id===k).quantidade,W=Math.min(Math.max(0,parseFloat(M)||0),oe);x(ae=>({...ae,[k]:W}))},Z=k=>k.tipo_produto==="KIT"&&k.composicao_kit&&k.composicao_kit.length>0,D=(k,M)=>{if(w(z=>({...z,[k]:M})),M==="componentes"){const z=l.itens.find(oe=>oe.id===k);if(z&&z.composicao_kit){const oe={},W={};z.composicao_kit.forEach((ae,ee)=>{oe[ee]=!1,W[ee]=ae.quantidade*z.quantidade}),C(ae=>({...ae,[k]:oe})),T(ae=>({...ae,[k]:W}))}}},K=(k,M)=>{C(z=>{var oe;return{...z,[k]:{...z[k]||{},[M]:!((oe=z[k])!=null&&oe[M])}}})},R=(k,M,z)=>{const oe=l.itens.find(ce=>ce.id===k),ae=oe.composicao_kit[M].quantidade*oe.quantidade,ee=Math.min(Math.max(0,parseFloat(z)||0),ae);T(ce=>({...ce,[k]:{...ce[k]||{},[M]:ee}}))},B=async()=>{var oe,W;if(Object.keys(d).filter(ae=>d[ae]).filter(ae=>{const ee=l.itens.find(ce=>ce.id===parseInt(ae));return Z(ee)&&!_[ae]}).length>0){N("Para itens KIT, voc deve escolher entre devolver o KIT inteiro ou selecionar componentes");return}const M=[];if(Object.keys(d).filter(ae=>d[ae]).forEach(ae=>{const ee=parseInt(ae),ce=l.itens.find(ie=>ie.id===ee);if(Z(ce)){const ie=_[ae];if(ie==="kit_inteiro")M.push({item_id:ee,quantidade:m[ae]});else if(ie==="componentes"){const we=S[ae]||{},Se=E[ae]||{},me=Object.keys(we).filter(_e=>we[_e]).map(_e=>parseInt(_e));if(me.length===0){N(`Voc deve selecionar pelo menos um componente do KIT "${ce.produto_nome}"`);return}me.forEach(_e=>{const je=ce.composicao_kit[_e],lt=Se[_e]||0;if(lt<=0){N(`Quantidade do componente "${je.produto_nome}" deve ser maior que zero`);return}M.push({produto_id:je.produto_id,quantidade:lt,preco_unitario:ce.preco_unitario/ce.composicao_kit.reduce((Ke,ut)=>Ke+ut.quantidade,0)*je.quantidade,is_componente_kit:!0,kit_item_id:ee})})}}else M.push({item_id:ee,quantidade:m[ae]})}),M.length===0){N("Selecione pelo menos um item para devoluo");return}if(M.some(ae=>ae.quantidade<=0)){N("Todas as quantidades devem ser maiores que zero");return}if(!h.trim()){N("Informe o motivo da devoluo");return}f(!0),N("");try{await U.post(`/vendas/${l.id}/devolucao`,{caixa_id:t,itens:M,motivo:h,gerar_credito:p}),alert("Devoluo registrada com sucesso!"),a()}catch(ae){console.error("Erro ao registrar devoluo:",ae),N(((W=(oe=ae.response)==null?void 0:oe.data)==null?void 0:W.detail)||"Erro ao registrar devoluo")}finally{f(!1)}},F=()=>{if(!l)return 0;let k=0;return Object.keys(d).filter(M=>d[M]).forEach(M=>{const z=l.itens.find(oe=>oe.id===parseInt(M));if(Z(z)){const oe=_[M];if(oe==="kit_inteiro"){const W=m[M]||0;k+=z.preco_unitario*W}else if(oe==="componentes"){const W=S[M]||{},ae=E[M]||{},ee=z.composicao_kit.reduce((ce,ie)=>ce+ie.quantidade,0);Object.keys(W).filter(ce=>W[ce]).forEach(ce=>{const ie=z.composicao_kit[ce],we=ae[ce]||0,Se=z.preco_unitario/ee*ie.quantidade,me=we/ie.quantidade;k+=Se*me})}}else{const oe=m[M]||0;k+=z.preco_unitario*oe}}),k};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(HA,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Devoluo"}),e.jsx("p",{className:"text-sm text-gray-500",children:s===1?"Selecione a venda":"Selecionar itens para devoluo"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsx("input",{type:"text",value:q.busca,onChange:k=>A({...q,busca:k.target.value}),placeholder:"Nmero da venda, cliente...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:q.data_inicio,onChange:k=>A({...q,data_inicio:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:q.data_fim,onChange:k=>A({...q,data_fim:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando vendas..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Lt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma venda encontrada"})]}):e.jsx("div",{className:"space-y-2",children:o.map(k=>{var M;return e.jsx("button",{onClick:()=>V(k),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:["Venda #",k.numero_venda||k.id]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Cliente: ",((M=k.cliente)==null?void 0:M.nome)||"Consumidor Final"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:k.data_criacao?new Date(k.data_criacao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data no disponvel"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["R$ ",k.total.toFixed(2)]}),e.jsx("div",{className:`text-xs mt-1 px-2 py-1 rounded ${k.status==="finalizada"?"bg-green-100 text-green-800":k.status==="baixa_parcial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:k.status==="finalizada"?"Finalizada":k.status==="baixa_parcial"?"Parcial":"Aberta"})]})]})},k.id)})}),b&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{children:b})]})]}),s===2&&l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["Venda #",l.numero_venda||l.id]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{className:"ml-2 font-medium",children:l.data_criacao?new Date(l.data_criacao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Data no disponvel"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Cliente:"}),e.jsx("span",{className:"ml-2 font-medium",children:((I=l.cliente)==null?void 0:I.nome)||"Consumidor Final"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"ml-2 font-medium text-green-600",children:["R$ ",l.total.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Itens da Venda"}),e.jsx("div",{className:"space-y-2",children:l.itens.map(k=>{const M=Z(k),z=_[k.id];return e.jsx("div",{className:`border rounded-lg p-4 transition-colors ${d[k.id]?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"checkbox",checked:d[k.id]||!1,onChange:()=>G(k.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:k.produto_nome}),M&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded",children:[e.jsx(qA,{className:"w-3 h-3"}),"KIT"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Preo unitrio: R$ ",k.preco_unitario.toFixed(2)," | Qtd vendida: ",k.quantidade]}),d[k.id]&&M&&e.jsxs("div",{className:"mt-4 bg-white border-2 border-purple-300 rounded-lg p-4",children:[e.jsxs("div",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-purple-600"}),"Como deseja devolver este KIT?"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:`modo-kit-${k.id}`,checked:z==="kit_inteiro",onChange:()=>D(k.id,"kit_inteiro"),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 group-hover:text-blue-700 transition-colors",children:" Devolver KIT Inteiro"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Devolve o KIT completo como uma unidade"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",name:`modo-kit-${k.id}`,checked:z==="componentes",onChange:()=>D(k.id,"componentes"),className:"mt-1 w-4 h-4 text-purple-600 focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800 group-hover:text-purple-700 transition-colors",children:" Selecionar Componentes"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Escolha quais componentes do KIT devolver"})]})]})]})]}),d[k.id]&&!M&&e.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantidade a devolver:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:k.quantidade,value:m[k.id],onChange:oe=>L(k.id,oe.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Subtotal: R$ ",(k.preco_unitario*(m[k.id]||0)).toFixed(2)]})]}),d[k.id]&&M&&z==="kit_inteiro"&&e.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantidade de KITs a devolver:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:k.quantidade,value:m[k.id],onChange:oe=>L(k.id,oe.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Subtotal: R$ ",(k.preco_unitario*(m[k.id]||0)).toFixed(2)]})]}),d[k.id]&&M&&z==="componentes"&&e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-3",children:"Selecione os componentes a devolver:"}),e.jsx("div",{className:"space-y-3",children:k.composicao_kit.map((oe,W)=>{var ce,ie;const ae=(ce=S[k.id])==null?void 0:ce[W],ee=oe.quantidade*k.quantidade;return e.jsx("div",{className:`border rounded-lg p-3 transition-colors ${ae?"border-purple-500 bg-white":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:ae||!1,onChange:()=>K(k.id,W),className:"mt-1 w-4 h-4 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-800",children:oe.produto_nome})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Qtd no KIT: ",oe.quantidade," | Qtd total disponvel: ",ee]}),ae&&e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Quantidade:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:ee,value:((ie=E[k.id])==null?void 0:ie[W])||0,onChange:we=>R(k.id,W,we.target.value),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500"})]})]})]})},W)})})]})]})]})},k.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Devoluo *"}),e.jsx("textarea",{value:h,onChange:k=>v(k.target.value),placeholder:"Descreva o motivo da devoluo...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-5",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-800 mb-3",children:" Tipo de Devoluo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",checked:!p,onChange:()=>g(!1),className:"mt-1 w-5 h-5 text-green-600 focus:ring-2 focus:ring-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 group-hover:text-green-700 transition-colors",children:" Devolver em Dinheiro"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"O valor ser devolvido em dinheiro e registrado como sada de caixa"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[e.jsx("input",{type:"radio",checked:p,onChange:()=>g(!0),className:"mt-1 w-5 h-5 text-purple-600 focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 group-hover:text-purple-700 transition-colors",children:" Gerar Crdito para o Cliente"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"O valor ser convertido em crdito para uso em futuras compras (sem movimentao de caixa)"})]})]})]}),p&&!(l!=null&&l.cliente_id)&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-300 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Ateno:"})," Esta venda no possui cliente vinculado. Para gerar crdito,  necessrio ter um cliente cadastrado."]})]})})]}),e.jsx("div",{className:`border-2 rounded-lg p-4 ${p?"bg-purple-50 border-purple-300":"bg-orange-50 border-orange-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:p?"Crdito a Gerar:":"Total da Devoluo:"}),p&&(l==null?void 0:l.cliente)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Cliente: ",e.jsx("strong",{children:l.cliente.nome})]})]}),e.jsxs("span",{className:`text-2xl font-bold ${p?"text-purple-600":"text-orange-600"}`,children:["R$ ",F().toFixed(2)]})]})}),b&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{children:b})]})]})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s===1?r:()=>{n(1),c(null),u({}),x({}),v(""),N("")},disabled:y,className:"px-6 py-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50",children:s===1?"Cancelar":"Voltar"}),s===2&&e.jsx("button",{onClick:B,disabled:y||Object.values(d).filter(Boolean).length===0,className:"flex items-center gap-2 px-8 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(zA,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirmar Devoluo"})]})})]})})]})})}function BB({caixaId:t,onClose:r}){const[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(!0);j.useEffect(()=>{c()},[t]);const c=async()=>{try{l(!0);const m=await U.get(`/caixas/${t}/movimentacoes`);s(m.data.movimentacoes),o(m.data.caixa)}catch(m){console.error("Erro ao carregar movimentaes:",m),Ue.error("Erro ao carregar movimentaes do caixa")}finally{l(!1)}},d=m=>{const x=new Date(m);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(x)},u=m=>({venda:"Venda",suprimento:"Suprimento",sangria:"Sangria",despesa:"Despesa",devolucao:"Devoluo",transferencia:"Transferncia"})[m]||m;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:" Extrato do Caixa"}),n&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Caixa #",n.id," - ",n.nome," | Status: ",n.status]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:c,className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Atualizar",children:e.jsx(Kr,{className:`w-5 h-5 text-gray-600 ${i?"animate-spin":""}`})}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(qt,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma movimentao registrada"})]}):e.jsx("div",{className:"space-y-3",children:a.map(m=>e.jsx("div",{className:`p-4 rounded-lg border-2 ${m.natureza==="entrada"?"bg-green-50 border-green-200":m.natureza==="saida"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"text-3xl",children:m.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:u(m.tipo)}),m.forma_pagamento&&e.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded border",children:m.forma_pagamento})]}),m.descricao&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:m.descricao}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-600",children:[e.jsxs("span",{children:[" ",d(m.data_movimento)]}),e.jsxs("span",{children:[" ",m.usuario_nome]}),m.venda_id&&e.jsxs("span",{children:[" Venda #",m.venda_numero||m.venda_id]}),m.documento&&e.jsxs("span",{children:[" ",m.documento]})]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-2xl font-bold ${m.natureza==="entrada"?"text-green-600":m.natureza==="saida"?"text-red-600":"text-gray-600"}`,children:[m.natureza==="entrada"&&"+",m.natureza==="saida"&&"-","R$ ",m.valor.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:m.natureza==="entrada"?e.jsxs("span",{className:"flex items-center gap-1 justify-end",children:[e.jsx(aa,{className:"w-3 h-3"})," Entrada"]}):m.natureza==="saida"?e.jsxs("span",{className:"flex items-center gap-1 justify-end",children:[e.jsx(Sa,{className:"w-3 h-3"})," Sada"]}):"Neutro"})]})]})},m.id))})}),e.jsx("div",{className:"border-t p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[a.length," movimentao(es) encontrada(s)"]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Fechar"})]})})]})})}function zB({onAbrirCaixa:t}){var b,N,_;const[r,a]=j.useState(null),[s,n]=j.useState(null),[o,i]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState(!0),[m,x]=j.useState(!1),[h,v]=j.useState(!1);j.useEffect(()=>{g();const w=setInterval(g,3e4);return()=>clearInterval(w)},[]),j.useEffect(()=>{const w=()=>{x(!1)};if(m)return document.addEventListener("mouseup",w),()=>document.removeEventListener("mouseup",w)},[m]);const p=()=>{i(!1),v(!1),x(!1)},g=async()=>{try{const w=await PB();if(a(w),w){const S=await aP(w.id);n(S)}}catch(w){console.error("Erro ao carregar caixa:",w)}finally{u(!1)}},y=()=>{c(null),g()},f=async()=>{await t(),setTimeout(g,500)};return d?e.jsx("div",{className:"px-4 py-2 bg-gray-100 rounded-lg",children:e.jsx("div",{className:"animate-pulse h-10 bg-gray-200 rounded"})}):r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center space-x-3 px-4 py-2 bg-white border-2 border-green-500 rounded-lg hover:bg-green-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Caixa #",r.numero_caixa]})]}),e.jsx(Ll,{className:`w-5 h-5 text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:p}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Caixa #",r.numero_caixa]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:r.usuario_nome})]}),e.jsx("button",{onClick:p,className:"p-1 hover:bg-white rounded-lg transition-colors",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Bl,{className:"w-4 h-4 mr-1"}),"Aberto em ",new Date(r.data_abertura).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Saldo Atual"}),e.jsx("div",{className:`text-sm font-bold ${m?"text-green-600":"text-gray-400"}`,children:m?`R$ ${((N=(b=s==null?void 0:s.totais)==null?void 0:b.saldo_atual)==null?void 0:N.toFixed(2))||"0,00"}`:""})]}),e.jsx("button",{onMouseDown:()=>x(!0),className:"p-1 hover:bg-blue-100 rounded transition-colors",children:m?e.jsx(Gm,{className:"w-4 h-4 text-blue-600"}):e.jsx(uh,{className:"w-4 h-4 text-gray-400"})})]})]})]}),s&&e.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"Resumo do Movimento"}),e.jsx("button",{onClick:()=>v(!h),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:h?e.jsx(Gm,{className:"w-4 h-4 text-blue-600"}):e.jsx(uh,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Abertura"}),e.jsx("div",{className:`font-semibold ${h?"text-gray-900":"text-gray-300"}`,children:h?`R$ ${r.valor_abertura.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Entradas"}),e.jsx("div",{className:`font-semibold ${h?"text-green-600":"text-green-300"}`,children:h?`+ R$ ${s.totais.vendas.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Suprimentos"}),e.jsx("div",{className:`font-semibold ${h?"text-green-600":"text-green-300"}`,children:h?`+ R$ ${s.totais.suprimentos.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Sangrias"}),e.jsx("div",{className:`font-semibold ${h?"text-orange-600":"text-orange-300"}`,children:h?`- R$ ${s.totais.sangrias.toFixed(2)}`:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Despesas"}),e.jsx("div",{className:`font-semibold ${h?"text-red-600":"text-red-300"}`,children:h?`- R$ ${s.totais.despesas.toFixed(2)}`:""})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{c("suprimento"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-green-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(aa,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Suprimento"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Adicionar dinheiro ao caixa"})]})]}),e.jsxs("button",{onClick:()=>{c("sangria"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-orange-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Sa,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Sangria"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Retirar dinheiro do caixa"})]})]}),e.jsxs("button",{onClick:()=>{c("despesa"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-red-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Ic,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Despesa"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Registrar pagamento de despesa"})]})]}),e.jsxs("button",{onClick:()=>{c("devolucao"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-purple-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(HA,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Devoluo"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Estornar venda e devolver ao estoque"})]})]}),e.jsxs("button",{onClick:()=>{c("movimentacoes"),i(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-blue-50 rounded-lg transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(v9,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Extrato do Caixa"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ver todas as movimentaes"})]})]})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsx("button",{onClick:()=>{c("fechar"),i(!1)},className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Fechar Caixa"})})]})]})]}),l==="suprimento"&&e.jsx(RB,{caixaId:r.id,onClose:()=>c(null),onSucesso:y}),l==="sangria"&&e.jsx(DB,{caixaId:r.id,saldoAtual:((_=s==null?void 0:s.totais)==null?void 0:_.saldo_atual)||0,onClose:()=>c(null),onSucesso:y}),l==="despesa"&&e.jsx(MB,{caixaId:r.id,onClose:()=>c(null),onSucesso:y}),l==="fechar"&&e.jsx(IB,{caixaId:r.id,onClose:()=>c(null),onSuccess:()=>{c(null),g()}}),l==="devolucao"&&e.jsx(LB,{caixaId:r.id,onClose:()=>c(null),onSucesso:y}),l==="movimentacoes"&&e.jsx(BB,{caixaId:r.id,onClose:()=>c(null)})]}):e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(ha,{className:"w-5 h-5"}),e.jsx("span",{children:"Abrir Caixa"})]})}function qB({venda:t,onClose:r}){var s,n;const a=()=>{window.print()};return t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors print:hidden",children:[e.jsx(Ly,{className:"w-5 h-5"}),e.jsx("span",{children:"Imprimir Cupom"})]}),e.jsx("style",{children:`
        @media print {
          /* Esconder tudo exceto o cupom */
          body * {
            visibility: hidden;
          }
          .cupom-impressao, .cupom-impressao * {
            visibility: visible;
          }
          .cupom-impressao {
            position: absolute;
            left: 0;
            top: 0;
            width: 80mm;
            margin: 0;
            padding: 0;
          }
          
          /* Reset de margens para impresso */
          @page {
            size: 80mm auto;
            margin: 5mm;
          }
        }
      `}),e.jsxs("div",{className:"cupom-impressao hidden print:block",style:{width:"80mm",fontFamily:"monospace"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:"PET SHOP PRO"}),e.jsx("div",{style:{fontSize:"12px"},children:"Central de Gest\\u00e3o"}),e.jsx("div",{style:{fontSize:"10px",marginTop:"5px"},children:new Date().toLocaleString("pt-BR")})]}),e.jsxs("div",{style:{borderTop:"1px dashed #000",marginBottom:"10px",paddingTop:"10px"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},children:["VENDA #",t.numero_venda||t.id]}),e.jsxs("div",{style:{fontSize:"11px"},children:[e.jsxs("div",{children:["Data: ",t.data_venda?new Date(t.data_venda).toLocaleString("pt-BR"):new Date().toLocaleString("pt-BR")]}),t.cliente&&e.jsxs("div",{children:["Cliente: ",t.cliente.nome||t.cliente_nome]}),t.pet&&e.jsxs("div",{children:["Pet: ",t.pet.nome]})]})]}),e.jsx("div",{style:{borderTop:"1px dashed #000",marginBottom:"10px",paddingTop:"10px"},children:e.jsxs("table",{style:{width:"100%",fontSize:"10px",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #000"},children:[e.jsx("th",{style:{textAlign:"left",paddingBottom:"5px"},children:"Item"}),e.jsx("th",{style:{textAlign:"center",paddingBottom:"5px"},children:"Qtd"}),e.jsx("th",{style:{textAlign:"right",paddingBottom:"5px"},children:"Valor"})]})}),e.jsx("tbody",{children:(s=t.itens)==null?void 0:s.map((o,i)=>e.jsxs("tr",{children:[e.jsxs("td",{style:{paddingTop:"5px",paddingBottom:"5px"},children:[o.produto_nome,e.jsx("br",{}),e.jsxs("span",{style:{fontSize:"9px",color:"#666"},children:[o.quantidade," x R$ ",o.preco_unitario.toFixed(2),o.desconto_valor>0&&e.jsxs("span",{style:{color:"#ff8c00"},children:[" ","com R$ ",o.desconto_valor.toFixed(2)," de desconto"]})]})]}),e.jsx("td",{style:{textAlign:"center",paddingTop:"5px",paddingBottom:"5px"},children:o.quantidade}),e.jsxs("td",{style:{textAlign:"right",paddingTop:"5px",paddingBottom:"5px"},children:["R$ ",o.subtotal.toFixed(2)]})]},i))})]})}),e.jsxs("div",{style:{borderTop:"1px dashed #000",paddingTop:"10px",fontSize:"11px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Total bruto:"}),e.jsxs("span",{children:["R$ ",(t.subtotal+t.desconto_valor).toFixed(2)]})]}),t.desconto_valor>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#ff8c00"},children:[e.jsxs("span",{children:[(t.desconto_valor/(t.subtotal+t.desconto_valor)*100).toFixed(2),"% de desconto:"]}),e.jsxs("span",{children:["R$ ",t.desconto_valor.toFixed(2)]})]}),t.tem_entrega&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsxs("span",{children:["R$ ",(((n=t.entrega)==null?void 0:n.taxa_entrega_total)||0).toFixed(2)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #000",fontSize:"14px",fontWeight:"bold"},children:[e.jsx("span",{children:"TOTAL:"}),e.jsxs("span",{children:["R$ ",t.total.toFixed(2)]})]})]}),t.pagamentos&&t.pagamentos.length>0&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"PAGAMENTOS:"}),t.pagamentos.map((o,i)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"3px"},children:[e.jsx("span",{children:o.forma_pagamento}),e.jsxs("span",{children:["R$ ",o.valor.toFixed(2)]})]},i))]}),t.tem_entrega&&t.entrega&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"ENTREGA:"}),e.jsx("div",{children:t.entrega.endereco_completo}),t.entrega.observacoes_entrega&&e.jsxs("div",{style:{marginTop:"3px",fontStyle:"italic"},children:["Obs: ",t.entrega.observacoes_entrega]})]}),t.observacoes&&e.jsxs("div",{style:{borderTop:"1px dashed #000",marginTop:"10px",paddingTop:"10px",fontSize:"10px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"OBSERVA\\u00c7\\u00d5ES:"}),e.jsx("div",{children:t.observacoes})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"15px",paddingTop:"10px",borderTop:"1px dashed #000",fontSize:"10px"},children:[e.jsx("div",{children:"Obrigado pela preferencia!"}),e.jsx("div",{style:{marginTop:"5px"},children:"Volte sempre!"})]})]})]}):null}function VB({clienteId:t,clienteNome:r,onClose:a,onSucesso:s}){const[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState(!0),[u,m]=j.useState(!1),[x,h]=j.useState(""),[v,p]=j.useState("dinheiro"),[g,y]=j.useState(""),[f,b]=j.useState(""),[N,_]=j.useState({total_vendas:0,total_em_aberto:0}),[w,S]=j.useState("antiga");j.useEffect(()=>{C()},[t]);const C=async()=>{try{d(!0);const G=await U.get(`/clientes/${t}/vendas-em-aberto`);o(G.data.vendas||[]),_(G.data.resumo||{total_vendas:0,total_em_aberto:0})}catch(G){console.error("Erro ao carregar vendas em aberto:",G),be.error("Erro ao carregar vendas em aberto")}finally{d(!1)}},E=G=>{l(L=>L.includes(G)?L.filter(Z=>Z!==G):[...L,G])},T=()=>{i.length===n.length?l([]):l(n.map(G=>G.id))},q=G=>{const L=new Date,Z=new Date(G),D=Math.abs(L-Z);return Math.ceil(D/(1e3*60*60*24))},A=[...n].sort((G,L)=>w==="antiga"?new Date(G.data_venda)-new Date(L.data_venda):new Date(L.data_venda)-new Date(G.data_venda)),O=n.filter(G=>i.includes(G.id)).reduce((G,L)=>G+parseFloat(L.saldo_devedor),0),V=async()=>{var G,L,Z,D;if(i.length===0){be.error("Selecione ao menos uma venda");return}if(!x||parseFloat(x)<=0){be.error("Informe um valor vlido");return}if(parseFloat(x)>O){be.error("Valor do pagamento no pode ser maior que o total selecionado");return}try{m(!0),console.log("Enviando requisio:",{vendas_ids:i,valor_total:parseFloat(x),forma_pagamento:v,numero_transacao:g||null,observacoes:f||null});const K=await U.post(`/clientes/${t}/baixar-vendas-lote`,{vendas_ids:i,valor_total:parseFloat(x),forma_pagamento:v,numero_transacao:g||null,observacoes:f||null});if(console.log("Resposta completa:",K),console.log("Response.data:",K.data),!K.data)throw new Error("Resposta vazia do servidor");const{vendas_quitadas:R,vendas_parciais:B,total_vendas_afetadas:F,valor_total_baixado:I}=K.data;let k=` Total baixado: R$ ${I.toFixed(2)}
`;R.length>0&&(k+=`
 ${R.length} venda(s) quitada(s):`,R.forEach(M=>{k+=`
   ${M.numero_venda}: R$ ${M.valor_baixado.toFixed(2)}`})),B.length>0&&(k+=`

 ${B.length} venda(s) parcial:`,B.forEach(M=>{k+=`
   ${M.numero_venda}:`,k+=`
    Baixado: R$ ${M.valor_baixado.toFixed(2)}`,k+=`
    Falta: R$ ${M.saldo_restante.toFixed(2)}`})),be.success(k,{duration:6e3}),s&&s(),a()}catch(K){console.error("Erro completo:",K),console.error("Erro response:",K.response),console.error("Erro response data:",(G=K.response)==null?void 0:G.data),console.error("Erro response status:",(L=K.response)==null?void 0:L.status);const R=((D=(Z=K.response)==null?void 0:Z.data)==null?void 0:D.detail)||K.message||"Erro ao baixar vendas";be.error(R)}finally{m(!1)}};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(yd,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando vendas..."})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendas em Aberto"}),e.jsx("p",{className:"text-gray-600 mt-1",children:r})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:N.total_vendas})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total em Aberto"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["R$ ",N.total_em_aberto.toFixed(2)]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-xl font-medium text-gray-900",children:"Nenhuma venda em aberto!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Este cliente no possui dbitos pendentes."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:T,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:i.length===n.length?"Desmarcar todas":"Selecionar todas"}),e.jsxs("button",{onClick:()=>S(w==="antiga"?"recente":"antiga"),className:"text-sm text-gray-600 hover:text-gray-700 flex items-center gap-1 font-medium",children:[" ",w==="antiga"?" Mais Antigas":" Mais Recentes"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[i.length," de ",n.length," selecionada(s)"]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden mb-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e.jsx("input",{type:"checkbox",checked:i.length===n.length,onChange:T,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pago"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Saldo Devedor"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Dias"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(G=>{const L=q(G.data_venda),Z=L>30;return e.jsxs("tr",{className:`hover:bg-gray-50 ${i.includes(G.id)?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:i.includes(G.id),onChange:()=>E(G.id),className:"rounded border-gray-300"})}),e.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:["#",G.numero_venda]}),e.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:new Date(G.data_venda).toLocaleDateString("pt-BR")}),e.jsxs("td",{className:"px-4 py-3 text-right text-gray-900",children:["R$ ",parseFloat(G.total).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right text-green-600",children:["R$ ",parseFloat(G.total_pago).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["R$ ",parseFloat(G.saldo_devedor).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Z?"bg-red-100 text-red-800":L>15?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[L," ",L===1?"dia":"dias"]})})]},G.id)})})]})}),i.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registrar Pagamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Total Selecionado"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",O.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor do Pagamento *"}),e.jsx("input",{type:"number",step:"0.01",value:x,onChange:G=>h(G.target.value),placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsxs("select",{value:v,onChange:G=>p(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"debito",children:"Carto de Dbito"}),e.jsx("option",{value:"credito",children:"Carto de Crdito"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),(v==="pix"||v==="transferencia")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero da Transao"}),e.jsx("input",{type:"text",value:g,onChange:G=>y(G.target.value),placeholder:"Cdigo/ID da transao",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:f,onChange:G=>b(G.target.value),rows:"2",placeholder:"Informaes adicionais sobre o pagamento...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-start space-x-2 mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Ateno:"})," O valor ser aplicado automaticamente da venda mais antiga para a mais recente. Se o valor for insuficiente para quitar todas as vendas selecionadas, a ltima venda ficar parcialmente paga."]})]}),e.jsx("button",{onClick:V,disabled:u||!x||parseFloat(x)<=0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx(yd,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"w-5 h-5"}),e.jsx("span",{children:"Baixar Vendas Selecionadas"})]})})]})]})})]})})}function UB({clienteId:t,clienteNome:r,onClose:a}){var x,h,v;const[s,n]=j.useState(null),[o,i]=j.useState(!0),[l,c]=j.useState("todos");j.useEffect(()=>{d()},[t]);const d=async()=>{try{i(!0);const p=await U.get(`/clientes/${t}/historico-compras`);n(p.data)}catch(p){console.error("Erro ao carregar histrico:",p),be.error("Erro ao carregar histrico do cliente")}finally{i(!1)}},u=p=>{const g={finalizada:"bg-green-100 text-green-800",baixa_parcial:"bg-yellow-100 text-yellow-800",pendente:"bg-blue-100 text-blue-800",cancelada:"bg-red-100 text-red-800",finalizada_devolucao_parcial:"bg-orange-100 text-orange-800",finalizada_devolucao_total:"bg-gray-100 text-gray-800"},y={finalizada:"Finalizada",baixa_parcial:"Baixa Parcial",pendente:"Pendente",cancelada:"Cancelada",finalizada_devolucao_parcial:"Dev. Parcial",finalizada_devolucao_total:"Dev. Total"};return e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${g[p]||"bg-gray-100 text-gray-800"}`,children:y[p]||p})},m=((x=s==null?void 0:s.vendas)==null?void 0:x.filter(p=>l==="todos"?!0:p.status===l))||[];return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(yd,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando histrico..."})]})})}):s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Histrico de Compras"}),e.jsx("p",{className:"text-gray-600 mt-1",children:r})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white rounded-lg transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(b4,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Compras"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_compras})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ha,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Gasto"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.valor_total_gasto.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(aa,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Ticket Mdio"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",s.ticket_medio.toFixed(2)]})]})]})})]}),s.ultima_compra&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 shadow-sm flex items-center space-x-2 text-sm",children:[e.jsx(zi,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["ltima compra: ",new Date(s.ultima_compra).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})]})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrar por status:"}),e.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[e.jsxs("option",{value:"todos",children:["Todos (",((h=s.vendas)==null?void 0:h.length)||0,")"]}),e.jsx("option",{value:"finalizada",children:"Finalizadas"}),e.jsx("option",{value:"baixa_parcial",children:"Baixa Parcial"}),e.jsx("option",{value:"pendente",children:"Pendentes"}),e.jsx("option",{value:"cancelada",children:"Canceladas"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b4,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Nenhuma venda encontrada"}),e.jsx("p",{className:"text-gray-600 mt-2",children:l==="todos"?"Este cliente ainda no realizou compras.":"No h vendas com este status."})]}):e.jsx("div",{className:"space-y-3",children:m.map(p=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Venda #",p.numero_venda]}),u(p.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Data:"}),e.jsx("div",{className:"font-medium text-gray-900",children:new Date(p.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:["R$ ",p.subtotal.toFixed(2)]})]}),p.desconto_valor>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Desconto:"}),e.jsxs("div",{className:"font-medium text-red-600",children:["- R$ ",p.desconto_valor.toFixed(2)]})]}),p.taxa_entrega>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Taxa Entrega:"}),e.jsxs("div",{className:"font-medium text-gray-900",children:["R$ ",p.taxa_entrega.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Total:"}),e.jsxs("div",{className:"font-bold text-gray-900 text-lg",children:["R$ ",p.total.toFixed(2)]})]}),p.saldo_devedor>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Saldo Devedor:"}),e.jsxs("div",{className:"font-bold text-red-600",children:["R$ ",p.saldo_devedor.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Itens:"}),e.jsx("div",{className:"font-medium text-gray-900",children:p.total_itens})]}),p.vendedor_nome&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Vendedor:"}),e.jsx("div",{className:"font-medium text-gray-900",children:p.vendedor_nome})]})]})]})})},p.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsxs("span",{children:["Mostrando ",m.length," de ",((v=s.vendas)==null?void 0:v.length)||0," vendas"]}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Fechar"})]})})]})}):null}function WB({clienteId:t}){const[r,a]=j.useState(!1),[s,n]=j.useState(null),[o,i]=j.useState(null),[l,c]=j.useState(""),[d,u]=j.useState([]),[m,x]=j.useState(!1),h=j.useRef(null),[v,p]=j.useState({resumo:!1,pets:!1,compras:!1,oportunidades:!1,sugestoes:!1,relacionados:!1,sazonalidade:!1,chat:!1});j.useEffect(()=>{t&&g()},[t]);const g=async()=>{var A,O;try{a(!0),i(null);const V=await U.get(`/clientes/${t}/info-pdv`);n(V.data)}catch(V){console.error("Erro ao carregar informaes do cliente:",V),i(((O=(A=V.response)==null?void 0:A.data)==null?void 0:O.detail)||"Erro ao carregar dados")}finally{a(!1)}},y=A=>{p(O=>({...O,[A]:!O[A]}))},f=async()=>{if(!l.trim())return;const A=l;c(""),u(O=>[...O,{tipo:"user",texto:A}]);try{x(!0);const O=await U.post(`/clientes/${t}/chat-pdv`,{mensagem:A});u(V=>[...V,{tipo:"ia",texto:O.data.resposta,ia_disponivel:O.data.ia_disponivel}]),setTimeout(()=>{var V;return(V=h.current)==null?void 0:V.scrollIntoView({behavior:"smooth"})},100)}catch(O){console.error("Erro no chat:",O),u(V=>[...V,{tipo:"erro",texto:"Erro ao processar mensagem. Tente novamente."}])}finally{x(!1)}},b=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),f())};if(!t)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 text-center text-gray-500",children:[e.jsx(Xn,{className:"mx-auto text-4xl mb-2"}),e.jsx("p",{children:"Selecione um cliente para ver informaes"})]});if(r)return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})});if(o)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[e.jsx(pr,{className:"inline mr-2"}),o]});if(!s)return null;const{cliente:N,resumo_financeiro:_,pets:w,ultimas_compras:S,oportunidades:C,sugestoes:E,produtos_relacionados:T,padroes_sazonais:q}=s;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden max-h-[85vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 border-b",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:N.nome}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[N.cpf_cnpj&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Xn,{className:"text-xs"}),N.cpf_cnpj]}),N.telefone&&e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(RA,{className:"text-xs"}),N.telefone]}),N.email&&e.jsxs("p",{className:"flex items-center gap-1 truncate",children:[e.jsx(A2,{className:"text-xs"}),N.email]}),N.endereco&&e.jsxs("p",{className:"flex items-center gap-1 text-xs",children:[e.jsx(n9,{className:"text-xs"}),N.endereco,", ",N.bairro," - ",N.cidade,"/",N.estado]})]})]})})}),e.jsxs(Zo,{titulo:"Resumo Financeiro",icone:e.jsx(rs,{}),expandido:v.resumo,onToggle:()=>y("resumo"),badge:_.numero_compras,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Gasto"}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:["R$ ",_.total_gasto.toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Ticket Mdio"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["R$ ",_.ticket_medio.toFixed(2)]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"N Compras"}),e.jsx("p",{className:"text-lg font-bold text-purple-700",children:_.numero_compras})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-orange-600 font-medium mb-1",children:"Maior Compra"}),e.jsxs("p",{className:"text-lg font-bold text-orange-700",children:["R$ ",_.maior_compra.valor.toFixed(2)]}),_.maior_compra.data&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_.maior_compra.data})]})]}),_.ultima_compra.data&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Dl,{className:"text-xs"}),"ltima compra: ",_.ultima_compra.data," - R$ ",_.ultima_compra.valor.toFixed(2)]})})]}),w&&w.length>0&&e.jsx(Zo,{titulo:"Pets Registrados",icone:e.jsx(Xn,{}),expandido:v.pets,onToggle:()=>y("pets"),badge:w.length,children:e.jsx("div",{className:"space-y-2",children:w.map(A=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold",children:A.nome[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:A.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:[A.especie," ",A.raca&&` ${A.raca}`,A.peso&&`  ${A.peso}kg`,A.idade_anos!==null&&`  ${A.idade_anos} anos`]})]})]},A.id))})}),C&&C.length>0&&e.jsx(Zo,{titulo:"Oportunidades de Venda",icone:e.jsx(pr,{}),expandido:v.oportunidades,onToggle:()=>y("oportunidades"),badge:C.length,badgeColor:"bg-orange-500",children:e.jsx("div",{className:"space-y-2",children:C.map((A,O)=>e.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${A.urgencia==="alta"?"bg-red-50 border-red-400":"bg-yellow-50 border-yellow-400"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:A.produto_nome}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:A.mensagem})]}),A.urgencia==="alta"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:"Urgente"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Atrasado ",A.dias_atraso," dias"]})]},O))})}),E&&E.length>0&&e.jsx(Zo,{titulo:"Produtos Favoritos",icone:e.jsx(tc,{}),expandido:v.sugestoes,onToggle:()=>y("sugestoes"),badge:E.length,children:e.jsx("div",{className:"space-y-2",children:E.map((A,O)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:A.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Comprado ",A.vezes_comprado,"x",A.ultima_compra&&`  ltima: ${A.ultima_compra}`]})]}),e.jsxs("p",{className:"font-bold text-indigo-600 ml-2",children:["R$ ",A.preco.toFixed(2)]})]},O))})}),S&&S.length>0&&e.jsx(Zo,{titulo:"ltimas Compras",icone:e.jsx(bd,{}),expandido:v.compras,onToggle:()=>y("compras"),badge:S.length,children:e.jsx("div",{className:"space-y-3",children:S.map((A,O)=>e.jsxs("div",{className:"border-l-4 border-indigo-300 pl-3 py-2 bg-gray-50 rounded-r-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[A.data,"  Venda #",A.numero_venda]}),e.jsxs("p",{className:"font-bold text-indigo-600",children:["R$ ",A.valor_total.toFixed(2)]})]})}),A.produtos&&A.produtos.length>0&&e.jsx("div",{className:"space-y-1 mt-2",children:A.produtos.map((V,G)=>e.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(Qx,{className:"text-xs"}),V.quantidade,"x ",V.nome," - R$ ",V.valor.toFixed(2)]},G))})]},O))})}),T&&T.length>0&&e.jsx(Zo,{titulo:"Produtos Comprados Juntos",icone:e.jsx(a9,{}),expandido:v.relacionados,onToggle:()=>y("relacionados"),badge:T.length,badgeColor:"bg-purple-500",children:e.jsx("div",{className:"space-y-2",children:T.map((A,O)=>e.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"text-xs font-semibold text-purple-600",children:[A.vezes_juntos,"x comprados juntos"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-800",children:A.produto1.nome}),e.jsxs("span",{className:"text-purple-600 font-bold",children:["R$ ",A.produto1.preco.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-800",children:A.produto2.nome}),e.jsxs("span",{className:"text-purple-600 font-bold",children:["R$ ",A.produto2.preco.toFixed(2)]})]})]}),e.jsx("p",{className:"text-xs text-purple-600 mt-2 italic",children:" Sugesto: Oferecer combo!"})]},O))})}),q&&q.length>0&&e.jsx(Zo,{titulo:"Padres de Compra",icone:e.jsx(lh,{}),expandido:v.sazonalidade,onToggle:()=>y("sazonalidade"),badge:q.length,badgeColor:"bg-green-500",children:e.jsx("div",{className:"space-y-2",children:q.map((A,O)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-green-700",children:A.mes_ano}),e.jsxs("span",{className:"text-sm text-green-600",children:[A.numero_compras," compras"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-bold text-green-700 ml-1",children:["R$ ",A.total_gasto.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Ticket mdio:"}),e.jsxs("span",{className:"font-bold text-green-700 ml-1",children:["R$ ",A.ticket_medio.toFixed(2)]})]})]})]},O))})}),e.jsx(Zo,{titulo:"Chat IA - Assistente de Vendas",icone:e.jsx(xi,{}),expandido:v.chat,onToggle:()=>y("chat"),badgeColor:"bg-blue-500",children:e.jsxs("div",{className:"space-y-3",children:[d.length===0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Perguntas sugeridas:"}),["Quais os produtos favoritos?","Quando foi a ltima compra?","Quais pets ele tem?","Quanto j gastou total?"].map((A,O)=>e.jsx("button",{onClick:()=>{c(A),setTimeout(()=>f(),100)},className:"w-full text-left px-3 py-2 text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors",children:A},O))]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[d.map((A,O)=>e.jsx("div",{className:`flex ${A.tipo==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] px-3 py-2 rounded-lg text-sm ${A.tipo==="user"?"bg-blue-600 text-white":A.tipo==="erro"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-800"}`,children:[A.texto,A.tipo==="ia"&&!A.ia_disponivel&&e.jsx("p",{className:"text-xs mt-1 opacity-70",children:" Modo bsico (IA no configurada)"})]})},O)),e.jsx("div",{ref:h})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:A=>c(A.target.value),onKeyPress:b,placeholder:"Digite sua pergunta...",disabled:m,className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),e.jsx("button",{onClick:f,disabled:m||!l.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(o9,{className:"w-4 h-4"})})]})]})})]})}function Zo({titulo:t,icone:r,expandido:a,onToggle:s,badge:n,badgeColor:o="bg-indigo-500",children:i}){return e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:r}),e.jsx("h4",{className:"font-semibold text-gray-800",children:t}),n!==void 0&&e.jsx("span",{className:`${o} text-white text-xs px-2 py-1 rounded-full`,children:n})]}),a?e.jsx($A,{className:"text-gray-400"}):e.jsx(ec,{className:"text-gray-400"})]}),a&&e.jsx("div",{className:"px-4 pb-4",children:i})]})}const HB=({mostrar:t,onFechar:r,dados:a,carregando:s})=>{if(j.useEffect(()=>{const l=c=>{c.key==="Escape"&&t&&r()};if(t)return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[t,r]),!t)return null;const n=l=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l||0),o=l=>{switch(l){case"verde":return"bg-green-100 border-green-500 text-green-800";case"amarelo":return"bg-yellow-100 border-yellow-500 text-yellow-800";case"vermelho":return"bg-red-100 border-red-500 text-red-800";default:return"bg-gray-100 border-gray-500 text-gray-800"}},i=l=>{switch(l){case"success":return e.jsx(Pi,{className:"text-green-500"});case"error":return e.jsx(pr,{className:"text-red-500"});case"warning":return e.jsx(pr,{className:"text-yellow-500"});case"info":return e.jsx(Ml,{className:"text-blue-500"});default:return e.jsx(Ml,{className:"text-gray-500"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),e.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 flex flex-col animate-slide-in-right",children:[e.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-blue-600 to-blue-700 text-white flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lh,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-bold",children:"Anlise da Venda"})]}),e.jsx("button",{onClick:r,className:"hover:bg-white hover:bg-opacity-20 p-1 rounded transition-colors",children:e.jsx(Oi,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(rs,{className:"text-blue-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Composio Financeira"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total dos Produtos"}),e.jsx("span",{className:"font-semibold",children:n(a.composicao.total_produtos)})]}),a.composicao.desconto>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"(-) Descontos Aplicados"}),e.jsxs("span",{className:"font-semibold",children:[n(a.composicao.desconto),e.jsxs("span",{className:"text-xs ml-1",children:["(",(a.composicao.desconto/a.composicao.total_produtos*100).toFixed(1),"%)"]})]})]}),a.composicao.taxa_entrega>0&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"(-) Taxa de Entrega"}),e.jsx("span",{className:"font-semibold",children:n(a.composicao.taxa_entrega)})]}),e.jsx("div",{className:"border-t-2 border-blue-600 pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-blue-700",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:n(a.composicao.subtotal)})]})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(dg,{className:"text-orange-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Dedues"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.deducoes.comissao.valor>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Comisso do Vendedor (",a.deducoes.comissao.percentual,"%)"]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.comissao.valor)})]}),a.detalhamento_taxas&&a.detalhamento_taxas.length>0&&e.jsx(e.Fragment,{children:a.detalhamento_taxas.map((l,c)=>e.jsxs(pe.Fragment,{children:[l.taxa_percentual>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-gray-600",children:["Taxa ",l.forma," (",l.taxa_percentual,"%)"]}),e.jsx("span",{className:"text-xs text-gray-500",children:n(l.valor_pagamento)})]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(l.valor_taxa_percentual)})]}),l.taxa_fixa>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-gray-600",children:["Taxa Fixa ",l.forma]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["R$ ",l.taxa_fixa.toFixed(2)]})]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(l.valor_taxa_fixa)})]})]},c))}),(!a.detalhamento_taxas||a.detalhamento_taxas.length===0)&&a.deducoes.taxa_percentual>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa Percentual"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.taxa_percentual)})]}),(!a.detalhamento_taxas||a.detalhamento_taxas.length===0)&&a.deducoes.taxa_fixa>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa Fixa"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.taxa_fixa)})]}),a.deducoes.impostos.valor>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Impostos Estimados (",a.deducoes.impostos.percentual,"%)"]}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.impostos.valor)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Custo dos Produtos"}),e.jsx("span",{className:"font-semibold text-red-600",children:n(a.deducoes.custos)})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold text-gray-700",children:[e.jsx("span",{children:"Total de Dedues"}),e.jsx("span",{className:"text-red-600",children:n(a.deducoes.total_deducoes)})]})})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border-2 ${o(a.resultado.cor_indicador)}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lh,{className:"w-5 h-5"}),e.jsx("h4",{className:"font-bold",children:"Resultado Final"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold",children:"Lucro Lquido Estimado"}),e.jsx("span",{className:"text-2xl font-bold",children:n(a.resultado.lucro_liquido)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"Margem Lquida"}),e.jsxs("span",{className:"text-xl font-bold",children:[a.resultado.margem_liquida.toFixed(2),"%"]})]})]})]}),a.alertas&&a.alertas.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(pr,{className:"text-purple-600"}),e.jsx("h4",{className:"font-bold text-gray-700",children:"Alertas e Sugestes"})]}),e.jsx("div",{className:"space-y-2",children:a.alertas.map((l,c)=>e.jsxs("div",{className:`flex items-start gap-2 p-2 rounded text-sm ${l.tipo==="success"?"bg-green-50":l.tipo==="error"?"bg-red-50":l.tipo==="warning"?"bg-yellow-50":"bg-blue-50"}`,children:[e.jsx("span",{className:"flex-shrink-0 mt-0.5",children:i(l.tipo)}),e.jsxs("span",{className:"flex-1",children:[e.jsx("span",{className:"mr-1",children:l.icone}),l.mensagem]})]},c))})]}),a.detalhamento_comissoes&&a.detalhamento_comissoes.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:"Detalhamento de Comisses"}),e.jsx("div",{className:"space-y-2 text-sm",children:a.detalhamento_comissoes.map((l,c)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-700",children:l.produto}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.percentual,"% de comisso"]})]}),e.jsx("span",{className:"font-semibold text-blue-600",children:n(l.valor)})]},c))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pr,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Erro ao carregar anlise"})]})})}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Fechar"}),e.jsx("span",{className:"text-xs text-gray-300",children:"(ESC)"})]})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})};function KB({itensCarrinho:t=[],onClose:r=()=>{},isOpen:a=!1,racaoIdFechada:s=null}){const[n,o]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState(!1),v=t.filter(y=>XA(y));j.useEffect(()=>{a&&(console.log(" Modal: Raes encontradas:",v.length),v.forEach((y,f)=>{console.log(`  ${f+1}. ${y.produto_nome} - peso_embalagem: ${y.peso_embalagem}`)}))},[a,v.length]),j.useEffect(()=>{if(a&&v.length>0){const y=v[v.length-1];s!==y.produto_id&&(o(y.produto_id),d(null),m(null),l(!1))}},[a,v.length,s]);const p=v.find(y=>y.produto_id===n),g=async()=>{if(!p){m("Rao no selecionada");return}if(!(p.peso_embalagem||p.peso_pacote_kg)||!p.preco_unitario){console.error(" Modal: Dados da rao incompletos",{peso_embalagem:p.peso_embalagem,peso_pacote_kg:p.peso_pacote_kg,preco_unitario:p.preco_unitario}),m("Dados da rao incompletos");return}try{l(!0),m(null),d(null);const f=p.peso_embalagem||p.peso_pacote_kg||1,b={especie:"cao",peso_kg:15,fase:"adulto",porte:"medio",tipo_racao:"premium",peso_pacote_kg:parseFloat(f),preco_pacote:parseFloat(p.preco_unitario)||0};console.log(" Modal: Enviando payload:",b);const N=await U.post("/internal/racao/calcular",b);N.data?d(N.data):m("Sem resposta do servidor")}catch(f){console.error("Erro ao calcular:",f),m(null)}finally{l(!1)}};return!a||v.length===0?(a&&v.length===0&&console.warn(" Modal: isOpen=true mas racoes.length=0"),null):(console.log(" Modal: Renderizando com",v.length,"raes"),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Calculadora de Rao"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Informaes rpidas"})]})]}),e.jsx("button",{onClick:()=>{r()},className:"p-1 hover:bg-blue-400 rounded-lg transition-colors",title:"Fechar",children:e.jsx(qt,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[v.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Selecionar Rao"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(!x),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-left flex items-center justify-between hover:border-blue-500 transition-colors",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:(p==null?void 0:p.produto_nome)||"Selecione uma rao"}),e.jsx(Ll,{size:20,className:`text-gray-500 transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:v.map((y,f)=>e.jsxs("button",{onClick:()=>{o(y.produto_id),h(!1),d(null)},className:`w-full px-4 py-3 text-left border-b last:border-b-0 hover:bg-blue-50 transition-colors ${y.produto_id===n?"bg-blue-100 border-l-4 border-l-blue-600":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:y.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[y.peso_embalagem||y.peso_pacote_kg?`${y.peso_embalagem||y.peso_pacote_kg}kg`:"","  R$ ",(y.preco_unitario||0).toFixed(2)]})]},f))})]})]}),p&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-2",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:p.produto_nome}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pacote:"}),e.jsx("span",{className:"font-medium",children:p.peso_pacote_kg?`${p.peso_pacote_kg}kg`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Preo:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["R$ ",(p.preco_unitario||0).toFixed(2)]})]})]})]}),e.jsx("button",{onClick:g,disabled:i||!p,className:`w-full py-3 rounded-lg font-semibold transition-colors ${i||!p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer"}`,children:i?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Iy,{size:18,className:"animate-spin"}),"Calculando..."]}):" Calcular Consumo"}),c&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 space-y-3 border border-green-200",children:[e.jsx("h3",{className:"font-bold text-green-900 text-center",children:" Clculo Realizado"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Consumo Dirio"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(c.consumo_diario_gramas||0).toFixed(0),"g"]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Durao"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(c.duracao_pacote_dias||0).toFixed(1),"d"]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/Dia"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_diario||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/Ms"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_mensal||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-green-100 col-span-2",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold",children:"Custo/kg"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",(c.custo_por_kg||0).toFixed(2)]})]})]})]}),u&&e.jsx("div",{className:"bg-yellow-50 rounded-lg p-3 text-sm text-yellow-700 border border-yellow-200",children:" No foi possvel calcular. Tente novamente."}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 text-xs text-gray-600 border border-gray-200 italic",children:" Valores calculados com base em dados padro. Para anlises personalizadas, utilize a calculadora completa."})]}),e.jsx("div",{className:"bg-gray-50 border-t px-6 py-3 flex justify-end gap-3 flex-shrink-0",children:e.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium transition-colors",children:"Fechar"})})]})}))}function GB({isOpen:t,onClose:r,clienteId:a,produtoId:s=null,onPendenciaAdicionada:n=()=>{}}){const[o,i]=j.useState("listar"),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState(!1),[h,v]=j.useState(""),[p,g]=j.useState([]),[y,f]=j.useState(!1),[b,N]=j.useState(null),_=j.useRef(null),[w,S]=j.useState({produto_id:s||"",quantidade_desejada:1,prioridade:"media",observacoes:""});j.useEffect(()=>{t&&a&&(C(),s||E())},[t,a]),j.useEffect(()=>{if(h.trim()==="")g(d);else{const D=d.filter(K=>{var R;return K.nome.toLowerCase().includes(h.toLowerCase())||((R=K.codigo)==null?void 0:R.toLowerCase().includes(h.toLowerCase()))});g(D)}},[h,d]),j.useEffect(()=>{const D=K=>{_.current&&!_.current.contains(K.target)&&f(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const C=async()=>{try{x(!0);const K=(await U.get(`/pendencias-estoque/cliente/${a}`)).data;c(Array.isArray(K==null?void 0:K.pendencias)?K.pendencias:[])}catch(D){console.error("Erro ao carregar pendncias:",D),Ue.error("Erro ao carregar lista de espera"),c([])}finally{x(!1)}},E=async()=>{var D;try{const K=await U.get("/produtos/",{params:{page:1,page_size:1e3,ativo:!0}}),R=Array.isArray((D=K.data)==null?void 0:D.items)?K.data.items:[];console.log("Produtos carregados:",R.length,R),u(R),g(R)}catch(K){console.error("Erro ao carregar produtos:",K),Ue.error("Erro ao carregar produtos"),u([]),g([])}},T=D=>{N(D),v(D.nome),S({...w,produto_id:D.id}),f(!1)},q=()=>{N(null),v(""),S({...w,produto_id:""}),g(d)},A=async()=>{var K,R;if(!w.produto_id){Ue.error("Selecione um produto");return}const D={baixa:0,media:1,alta:2};try{x(!0),await U.post("/pendencias-estoque/",{cliente_id:a,produto_id:parseInt(w.produto_id),quantidade_desejada:parseFloat(w.quantidade_desejada),prioridade:D[w.prioridade]||1,observacoes:w.observacoes||null}),Ue.success("Cliente adicionado  lista de espera!"),S({produto_id:"",quantidade_desejada:1,prioridade:"media",observacoes:""}),q(),i("listar"),C(),n()}catch(B){console.error("Erro ao adicionar pendncia:",B),Ue.error(((R=(K=B.response)==null?void 0:K.data)==null?void 0:R.detail)||"Erro ao adicionar  lista de espera")}finally{x(!1)}},O=async D=>{if(confirm("Deseja realmente cancelar esta pendncia?"))try{await U.delete(`/pendencias-estoque/${D}`),Ue.success("Pendncia cancelada"),C()}catch(K){console.error("Erro ao cancelar pendncia:",K),Ue.error("Erro ao cancelar pendncia")}},V=async(D,K)=>{try{await U.put(`/pendencias-estoque/${D}`,{prioridade:parseInt(K)}),Ue.success("Prioridade atualizada"),C()}catch(R){console.error("Erro ao alterar prioridade:",R),Ue.error("Erro ao alterar prioridade")}};if(!t)return null;const G=D=>{switch(D){case 2:return"text-red-600 bg-red-50";case 1:return"text-yellow-600 bg-yellow-50";case 0:return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},L=D=>{switch(D){case 2:return"ALTA";case 1:return"MDIA";case 0:return"BAIXA";default:return"N/A"}},Z=D=>{switch(D){case"pendente":return e.jsx(Bl,{className:"w-4 h-4 text-yellow-500"});case"notificado":return e.jsx(LA,{className:"w-4 h-4 text-blue-500"});case"finalizado":return e.jsx(Gt,{className:"w-4 h-4 text-green-500"});default:return e.jsx(Lt,{className:"w-4 h-4 text-gray-500"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lt,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Lista de Espera - Produtos Sem Estoque"})]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-200 transition-colors",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>i("listar"),className:`flex-1 px-4 py-3 font-medium transition-colors ${o==="listar"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:["Lista de Espera (",l.length,")"]}),e.jsx("button",{onClick:()=>i("adicionar"),className:`flex-1 px-4 py-3 font-medium transition-colors ${o==="adicionar"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:"Adicionar Pendncia"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o==="listar"?e.jsx("div",{className:"space-y-3",children:m?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Carregando..."}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Lt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma pendncia registrada"}),e.jsx("button",{onClick:()=>i("adicionar"),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Adicionar primeira pendncia"})]}):l.map(D=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Z(D.status),e.jsx("h3",{className:"font-semibold text-gray-900",children:D.produto_nome||"Produto no encontrado"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${G(D.prioridade)}`,children:L(D.prioridade)})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[D.produto_codigo&&e.jsxs("p",{children:["Cdigo: ",e.jsx("span",{className:"font-medium",children:D.produto_codigo})]}),e.jsxs("p",{children:["Quantidade: ",D.quantidade_desejada," un."]}),D.valor_referencia&&e.jsxs("p",{children:["Valor ref.: R$ ",parseFloat(D.valor_referencia).toFixed(2)]}),e.jsxs("p",{children:["Status: ",e.jsx("span",{className:"font-medium",children:D.status})]}),e.jsxs("p",{children:["Registrado em: ",new Date(D.data_registro).toLocaleDateString("pt-BR")]}),D.data_notificacao&&e.jsxs("p",{children:["Notificado em: ",new Date(D.data_notificacao).toLocaleDateString("pt-BR")]}),D.observacoes&&e.jsxs("p",{className:"italic",children:["Obs: ",D.observacoes]})]})]}),e.jsx("div",{className:"flex flex-col gap-2 ml-4",children:D.status==="pendente"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:D.prioridade,onChange:K=>V(D.id,K.target.value),className:"text-xs border rounded px-2 py-1",children:[e.jsx("option",{value:"0",children:"Baixa"}),e.jsx("option",{value:"1",children:"Mdia"}),e.jsx("option",{value:"2",children:"Alta"})]}),e.jsx("button",{onClick:()=>O(D.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Cancelar pendncia",children:e.jsx(Fo,{className:"w-4 h-4"})})]})})]})},D.id))}):e.jsxs("div",{className:"space-y-4 max-w-lg mx-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produto *"}),s?e.jsx("input",{type:"text",value:"Produto selecionado",disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-50"}):e.jsxs("div",{ref:_,className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:h,onChange:D=>v(D.target.value),onFocus:()=>f(!0),placeholder:"Digite para buscar o produto...",className:"w-full pl-10 pr-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),h&&e.jsx("button",{type:"button",onClick:q,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(qt,{className:"w-4 h-4"})})]}),y&&p.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[p.slice(0,50).map(D=>e.jsxs("button",{type:"button",onClick:()=>T(D),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:D.nome}),e.jsxs("div",{className:"text-sm text-gray-500",children:[D.codigo&&`Cdigo: ${D.codigo}  `,"Estoque: ",D.estoque_atual||0,D.preco_venda&&`  R$ ${parseFloat(D.preco_venda).toFixed(2)}`]})]},D.id)),p.length>50&&e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-500 text-center bg-gray-50",children:["Mostrando 50 de ",p.length," produtos. Continue digitando para refinar."]})]}),y&&h&&p.length===0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg p-4",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Nenhum produto encontrado"})}),b&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:" Produto selecionado"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:b.nome})]})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade Desejada *"}),e.jsx("input",{type:"number",min:"1",value:w.quantidade_desejada,onChange:D=>S({...w,quantidade_desejada:parseInt(D.target.value)||1}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),e.jsxs("select",{value:w.prioridade,onChange:D=>S({...w,prioridade:D.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"baixa",children:"Baixa - No tem pressa"}),e.jsx("option",{value:"media",children:"Mdia - Normal"}),e.jsx("option",{value:"alta",children:"Alta - Urgente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:w.observacoes,onChange:D=>S({...w,observacoes:D.target.value}),rows:"3",placeholder:"Ex: Cliente pediu para avisar assim que chegar...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" O cliente ser notificado automaticamente via WhatsApp"})," quando o produto entrar no estoque."]})}),e.jsx("button",{onClick:A,disabled:m,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:m?"Adicionando...":"Adicionar  Lista de Espera"})]})})]})})}function k4(t){return t?t.variation_attributes&&typeof t.variation_attributes=="object"?Object.entries(t.variation_attributes).map(([a,s])=>`${a.charAt(0).toUpperCase()+a.slice(1)}: ${s}`).join(" | "):t.variation_signature?t.variation_signature.split("|").map(a=>{const[s,n]=a.split(":");return s&&n?`${s.charAt(0).toUpperCase()+s.slice(1)}: ${n}`:a}).join(" | "):"":""}function XB(){var dw,uw,mw,xw,pw,hw,fw,gw,bw;const t=Ht(),[r]=rg(),{user:a}=au(),s=(a==null?void 0:a.is_admin)===!0,[n,o]=j.useState({cliente:null,pet:null,itens:[],subtotal:0,desconto_valor:0,desconto_percentual:0,total:0,observacoes:"",funcionario_id:null,entregador_id:null,tem_entrega:!1,entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}}),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState([]),[x,h]=j.useState([]),[v,p]=j.useState(!1),[g,y]=j.useState(!1),[f,b]=j.useState(!1),[N,_]=j.useState(!1),[w,S]=j.useState(!1),[C,E]=j.useState(!1),[T,q]=j.useState(0),[A,O]=j.useState(null),[V,G]=j.useState([]),[L,Z]=j.useState("24h"),[D,K]=j.useState("todas"),[R,B]=j.useState(!1),[F,I]=j.useState(""),[k,M]=j.useState(!1),[z,oe]=j.useState(!1),[W,ae]=j.useState(""),[ee,ce]=j.useState(0),[ie,we]=j.useState(!1),[Se,me]=j.useState(!1),[_e,je]=j.useState(null),[lt,Ke]=j.useState(!1),[ut,Ee]=j.useState(!1),[Me,Ae]=j.useState(null),[ct,bt]=j.useState(!1),[Rt,Ct]=j.useState("valor"),[It,$t]=j.useState(0),[ge,$e]=j.useState(!1),[Ie,it]=j.useState(null),[rt,xe]=j.useState([]),[Oe,Ye]=j.useState(""),[Y,ue]=j.useState(null),[qe,le]=j.useState([]),[ve,Re]=j.useState(null),[Le,Q]=j.useState(0);j.useEffect(()=>{o(re=>({...re,funcionario_id:(Ie==null?void 0:Ie.id)||null}))},[Ie]),j.useEffect(()=>{console.log(" Sincronizando entregador_id:",(ve==null?void 0:ve.id)||null),o(re=>({...re,entregador_id:(ve==null?void 0:ve.id)||null}))},[ve]);const[Ne,Pe]=j.useState(!1),[Ve,ot]=j.useState(null),[xt,pt]=j.useState(!1),[Nt,Ge]=j.useState({}),[Dt,jr]=j.useState(()=>{const re=localStorage.getItem("pdv_painel_vendas_aberto");return re?JSON.parse(re):!1}),[J,P]=j.useState(()=>{const re=localStorage.getItem("pdv_painel_cliente_aberto");return re?JSON.parse(re):!1}),[H,te]=j.useState(!1),[ne,de]=j.useState([]),[se,fe]=j.useState({}),[he,ye]=j.useState(0),[ke,He]=j.useState(!1),[Ze,tt]=j.useState(null),Qe=j.useRef(null);j.useEffect(()=>{localStorage.setItem("pdv_painel_vendas_aberto",JSON.stringify(Dt))},[Dt]),j.useEffect(()=>{n.cliente&&rr()},[n.cliente]),j.useEffect(()=>{var re;n.itens&&n.itens.length>0?sessionStorage.setItem("pdv_calculadora_data",JSON.stringify({itens:n.itens,clienteId:((re=n.cliente)==null?void 0:re.id)||null})):sessionStorage.removeItem("pdv_calculadora_data")},[n.itens,n.cliente]),j.useEffect(()=>{localStorage.setItem("pdv_painel_cliente_aberto",JSON.stringify(J))},[J]),j.useEffect(()=>{ht();const re=setInterval(()=>{ht()},3e4);return()=>clearInterval(re)},[ee]);const ht=async()=>{try{const re=await U.get("/caixas/aberto");we(!!re.data)}catch{we(!1)}};j.useEffect(()=>{Pt()},[]);const Pt=async()=>{try{const re=await U.get("/clientes/",{params:{is_entregador:!0,incluir_inativos:!1,limit:100}});let Ce=re.data.items||re.data.clientes||re.data||[];Array.isArray(Ce)||(console.error(" Resposta da API no  um array:",Ce),Ce=[]),le(Ce);const Be=Ce.find(De=>De.entregador_padrao===!0);Be&&(Re(Be),o(De=>({...De,entregador_id:Be.id})),Qt(Be))}catch(re){console.error("Erro ao carregar entregadores:",re),Ue.error("Erro ao carregar lista de entregadores")}},Qt=async re=>{if(!re){Q(0);return}let Ce=0;if(re.modelo_custo_entrega==="taxa_fixa"&&re.taxa_fixa_entrega)Ce=Number(re.taxa_fixa_entrega);else if(re.modelo_custo_entrega==="por_km"&&re.valor_por_km_entrega)Ce=0;else if(re.modelo_custo_entrega==="rateio_rh"&&re.controla_rh)try{Ce=(await U.get(`/entregadores/${re.id}/custo-operacional`)).data.custo_por_entrega||0}catch(Be){console.error("Erro ao buscar custo RH:",Be),Ce=re.custo_rh_ajustado||0}else try{Ce=(await U.get("/configuracoes/entregas")).data.taxa_fixa||0}catch(Be){console.error("Erro ao buscar configurao de entrega:",Be),Ce=10}Q(Ce)};j.useEffect(()=>{n.tem_entrega&&ve?Qt(ve):Q(0)},[ve,n.tem_entrega]);const rr=async()=>{if(!n.cliente){q(0);return}try{const Ce=(await U.get(`/pendencias-estoque/cliente/${n.cliente.id}`)).data.filter(Be=>Be.status==="pendente"||Be.status==="notificado");q(Ce.length)}catch{q(0)}},Ur=async re=>{if(!re||!n.cliente){de([]);return}try{const Be=(await U.get(`/internal/pdv/oportunidades/${re}`)).data;Be&&Array.isArray(Be.oportunidades)?de(Be.oportunidades):de([])}catch{de([])}},Us=async(re,Ce)=>{try{const Be={opportunity_id:Ce.id,event_type:re,user_id:a==null?void 0:a.id,contexto:"PDV",extra_data:{produto_origem_id:Ce.produto_origem_id||null,produto_sugerido_id:Ce.produto_sugerido_id||null,tipo_oportunidade:Ce.tipo||null,venda_id:n.id||null}};U.post("/internal/pdv/eventos-oportunidade",Be).catch(()=>{})}catch{}};async function $n(re){try{const Ce={produto_id:re.produto_id,preco_unitario:re.preco_unitario,quantidade:re.quantidade},{data:Be}=await U.post("/pdv/fiscal/calcular",Ce);return Be}catch(Ce){return console.error("Erro ao calcular fiscal:",Ce),null}}j.useEffect(()=>{async function re(){let Ce=0;const Be={};for(const De of n.itens){const Je=await $n(De);Je&&(Be[De.produto_id]=Je,Ce+=Number(Je.total_impostos))}fe(Be),ye(Ce.toFixed(2))}n.itens&&n.itens.length>0?re():(fe({}),ye(0))},[n.itens]),j.useEffect(()=>{Ko()},[L,D,R,F]),j.useEffect(()=>{const re=r.get("venda");re&&X(parseInt(re))},[r]),j.useEffect(()=>{const re=sessionStorage.getItem("abrirVenda"),Ce=sessionStorage.getItem("abrirModalPagamento");re&&Ce==="true"&&(sessionStorage.removeItem("abrirVenda"),sessionStorage.removeItem("abrirModalPagamento"),X(parseInt(re),!0))},[]);const Rn=()=>{je({tipo:"entrega",apelido:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""}),me(!0)},is=()=>{me(!1),je(null)},Ho=async re=>{if(!(!re||re.length!==9)){Ke(!0);try{const Be=await(await fetch(`https://viacep.com.br/ws/${re.replace("-","")}/json/`)).json();if(Be.erro){alert("CEP no encontrado");return}je(De=>({...De,endereco:Be.logradouro||"",bairro:Be.bairro||"",cidade:Be.localidade||"",estado:Be.uf||""}))}catch(Ce){console.error("Erro ao buscar CEP:",Ce),alert("Erro ao buscar CEP")}finally{Ke(!1)}}},ls=async()=>{if(!_e.cep||!_e.endereco||!_e.cidade){alert("Preencha pelo menos CEP, Endereo e Cidade");return}if(!n.cliente||!n.cliente.id){alert("Selecione um cliente primeiro");return}try{const re=await $u(n.cliente.id),Ce=re.enderecos_adicionais||[];Ce.push({..._e}),await U.put(`/clientes/${n.cliente.id}`,{...re,enderecos_adicionais:Ce});const Be=await $u(n.cliente.id);o({...n,cliente:Be}),alert("Endereo adicionado com sucesso!"),is()}catch(re){console.error("Erro ao salvar endereo:",re),alert("Erro ao salvar endereo. Tente novamente.")}},p0=re=>{Ae({...re,preco:re.preco_unitario,descontoValor:re.desconto_valor||0,descontoPercentual:re.desconto_percentual||0,tipoDesconto:"valor"}),Ee(!0)},h0=()=>{const re=n.itens.map(Ce=>{if(Ce.produto_id===Me.produto_id){const Be=Me.preco,De=Ce.quantidade,Je=Be*De;let _t=0,At=0;Me.tipoDesconto==="valor"?(_t=parseFloat(Me.descontoValor)||0,At=Je>0?_t/Je*100:0):(At=parseFloat(Me.descontoPercentual)||0,_t=Je*At/100);const Kt=Be-_t/De,Er=Je-_t;return{...Ce,desconto_valor:_t,desconto_percentual:At,tipo_desconto_aplicado:Me.tipoDesconto,preco_com_desconto:Kt,subtotal:Er}}return Ce});Dr(re),Ee(!1),Ae(null)},f0=()=>{bt(!0)},g0=(re,Ce)=>{var Kt;const Be=n.subtotal;let De=0,Je=0;re==="valor"?(De=parseFloat(Ce)||0,Je=Be>0?De/Be*100:0):(Je=parseFloat(Ce)||0,De=Be*Je/100);const _t=n.tem_entrega&&((Kt=n.entrega)==null?void 0:Kt.taxa_entrega_total)||0,At=Be-De+_t;o({...n,desconto_valor:De,desconto_percentual:Je,total:At}),bt(!1)},Ko=async()=>{try{const re=new Date;let Ce;L==="24h"?Ce=new Date(re.getTime()-24*60*60*1e3):L==="7d"?Ce=new Date(re.getTime()-7*24*60*60*1e3):Ce=new Date(re.getTime()-30*24*60*60*1e3);const Be={data_inicio:Ce.toISOString().split("T")[0],data_fim:re.toISOString().split("T")[0],per_page:50};F.trim()?(Be.busca=F.trim(),delete Be.data_inicio,delete Be.data_fim):(D==="pago"?Be.status="finalizada":D==="aberta"&&(Be.status="aberta"),R===!0&&(Be.tem_entrega=!0)),console.log(" Parmetros de busca de vendas:",Be);const De=await C4(Be);G(De.vendas||[])}catch(re){console.error("Erro ao carregar vendas:",re)}},X=async(re,Ce=!1)=>{var Be;try{M(!0);const De=await q0(re);if(!De){alert("Venda no encontrada");return}let Je=null;if(De.cliente_id)try{Je=await $u(De.cliente_id)}catch(zt){console.error("Erro ao buscar cliente:",zt)}let _t=[],At=0;try{const zt=await U.get(`/vendas/${re}/pagamentos`);_t=zt.data.pagamentos||[],At=zt.data.total_pago||0}catch(zt){console.error("Erro ao buscar pagamentos:",zt)}console.log(" Venda carregada - funcionario_id:",De.funcionario_id);let Kt=null;if(De.funcionario_id)try{const oa=((Be=(await U.get("/comissoes/configuracoes/funcionarios")).data)==null?void 0:Be.data)||[];console.log(" Funcionrios disponveis:",oa),Kt=oa.find(Ss=>Ss.id===De.funcionario_id),Kt?($e(!0),it(Kt),console.log(" Funcionrio comisso carregado:",Kt)):console.warn(" Funcionrio ID",De.funcionario_id,"no encontrado na lista")}catch(zt){console.error("Erro ao carregar funcionrio de comisso:",zt)}else console.log(" Venda sem funcionario_id - limpando estados de comisso"),$e(!1),it(null),Ye("");const Er={id:De.id,numero_venda:De.numero_venda,status:De.status,data_venda:De.data_venda,cliente:Je,pet:null,itens:De.itens||[],subtotal:De.subtotal||0,desconto_valor:De.desconto_valor||0,desconto_percentual:De.desconto_percentual||0,total:De.total||0,observacoes:De.observacoes||"",funcionario_id:De.funcionario_id||null,entregador_id:De.entregador_id||null,tem_entrega:De.tem_entrega||!1,entrega:De.entrega||{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""},pagamentos:_t,total_pago:At};if(o(Er),oe(!0),De.entregador_id){console.log(" Venda tem entregador_id:",De.entregador_id);try{const oa=(await U.get(`/clientes/${De.entregador_id}`)).data;oa&&oa.is_entregador?(console.log(" Entregador carregado:",oa.nome),Re(oa),Qt(oa)):console.warn(" Cliente ID",De.entregador_id,"no  um entregador vlido")}catch(zt){console.error(" Erro ao carregar entregador:",zt);const oa=qe.find(Ss=>Ss.id===De.entregador_id);oa&&(console.log(" Entregador encontrado no array (fallback):",oa.nome),Re(oa),Qt(oa))}}else console.log(" Venda sem entregador_id - limpando entregadorSelecionado"),Re(null);Ce&&setTimeout(()=>{p(!0)},500)}catch(De){console.error("Erro ao carregar venda:",De),alert("Erro ao carregar venda: "+(De.message||"Erro desconhecido"))}finally{M(!1)}},Te=async()=>{var re;if(W.trim())try{M(!0);const Ce=W.replace(/\D/g,"");if(!Ce){alert("Digite um nmero de venda vlido"),M(!1);return}console.log(" Buscando venda com nmero:",Ce);const Be=await C4({busca:Ce,per_page:50});if(console.log(" Vendas encontradas:",(re=Be.vendas)==null?void 0:re.length),!Be.vendas||Be.vendas.length===0){alert(`Nenhuma venda encontrada com "${Ce}"`),M(!1);return}if(Be.vendas.length===1){await X(Be.vendas[0].id),ae("");return}const De=Be.vendas.slice(0,10).map((At,Kt)=>`${Kt+1}. ${At.numero_venda} - ${At.cliente_nome||"Sem cliente"} - ${At.status}`).join(`
`),Je=prompt(`Encontradas ${Be.vendas.length} vendas. Digite o nmero da opo:

${De}`),_t=parseInt(Je)-1;_t>=0&&_t<Be.vendas.length&&(await X(Be.vendas[_t].id),ae(""))}catch(Ce){console.error("Erro ao buscar venda:",Ce),alert("Erro ao buscar venda: "+(Ce.message||"Erro desconhecido"))}finally{M(!1)}};j.useEffect(()=>{if(i.length>=2){const re=setTimeout(async()=>{try{const Ce=await SB({search:i});m(Ce||[])}catch(Ce){console.error("Erro ao buscar clientes:",Ce),m([])}},300);return()=>clearTimeout(re)}else m([])},[i]),j.useEffect(()=>{if(c.length>=2){const re=setTimeout(async()=>{try{const Be=(await H9({busca:c})).data.items||[];h(Be)}catch(Ce){console.error("Erro ao buscar produtos:",Ce),h([])}},300);return()=>clearTimeout(re)}else h([])},[c]);const et=async re=>{o({...n,cliente:re,pet:null}),l(""),m([]);try{const Ce=await U.get(`/clientes/${re.id}/vendas-em-aberto`);Ce.data.resumo.total_vendas>0?O(Ce.data.resumo):O(null)}catch(Ce){console.error("Erro ao verificar vendas em aberto:",Ce),O(null)}},jt=re=>{o({...n,pet:re})},nt=re=>{var De,Je;if(!ie){alert(" No  possvel adicionar produtos sem caixa aberto. Abra um caixa primeiro.");return}console.log(" Produto sendo adicionado:",{nome:re.nome,categoria_id:re.categoria_id,categoria_nome:re.categoria_nome,peso_embalagem:re.peso_embalagem,classificacao_racao:re.classificacao_racao});const Ce=n.itens.find(_t=>_t.produto_id===re.id);let Be;Ce?Be=n.itens.map(_t=>_t.produto_id===re.id?{..._t,quantidade:_t.quantidade+1,subtotal:(_t.quantidade+1)*_t.preco_unitario}:_t):Be=[...n.itens,{tipo:"produto",produto_id:re.id,produto_nome:re.nome,quantidade:1,preco_unitario:parseFloat(re.preco_venda),desconto_item:0,subtotal:parseFloat(re.preco_venda),pet_id:((De=n.pet)==null?void 0:De.id)||null,tipo_produto:re.tipo_produto,tipo_kit:re.tipo_kit,composicao_kit:re.composicao_kit||[],categoria_id:re.categoria_id,categoria_nome:re.categoria_nome,peso_pacote_kg:re.peso_liquido||re.peso_bruto,peso_embalagem:re.peso_embalagem,classificacao_racao:re.classificacao_racao}],Dr(Be),d(""),h([]),(Je=Qe.current)==null||Je.focus()},tr=(re,Ce)=>{const Be=n.itens.map((De,Je)=>{if(Je===re){const _t=Math.max(1,De.quantidade+Ce),At=_t*De.preco_unitario;let Kt=De.desconto_valor||0;De.tipo_desconto_aplicado==="percentual"&&De.desconto_percentual>0&&(Kt=At*De.desconto_percentual/100);const Er=At-Kt;return{...De,quantidade:_t,desconto_valor:Kt,subtotal:Er}}return De});Dr(Be)},ws=re=>{const Ce=n.itens.filter((Be,De)=>De!==re);Dr(Ce)},kr=re=>{Ge(Ce=>({...Ce,[re]:!Ce[re]}))},Dr=re=>{var Kt;const Ce=re.reduce((Er,zt)=>Er+zt.subtotal,0),Be=re.reduce((Er,zt)=>Er+(zt.desconto_valor||0),0),De=Ce+Be,Je=De>0?Be/De*100:0,_t=n.tem_entrega&&((Kt=n.entrega)==null?void 0:Kt.taxa_entrega_total)||0,At=Ce+_t;o({...n,itens:re,subtotal:Ce,desconto_valor:Be,desconto_percentual:Je,total:At})},Go=async()=>{var re,Ce,Be,De,Je,_t,At,Kt,Er,zt,oa,Ss,Gi,mc,b0,vw,yw,jw,Nw,ww,_w,Sw,Cw,kw;if(n.itens.length===0){alert("Adicione pelo menos um produto ou servio");return}if(!ie){alert(" No  possvel salvar venda sem caixa aberto. Abra um caixa primeiro.");return}if(!k){M(!0);try{if(n.id){await U.put(`/vendas/${n.id}`,{cliente_id:(re=n.cliente)==null?void 0:re.id,funcionario_id:n.funcionario_id,itens:n.itens.map(Ga=>{var wu;return{tipo:Ga.tipo,produto_id:Ga.produto_id,servico_descricao:Ga.servico_descricao,quantidade:Ga.quantidade,preco_unitario:Ga.preco_unitario||Ga.preco_venda,desconto_item:0,subtotal:Ga.subtotal,lote_id:Ga.lote_id,pet_id:Ga.pet_id||((wu=n.pet)==null?void 0:wu.id)}}),desconto_valor:0,desconto_percentual:0,observacoes:n.observacoes,tem_entrega:n.tem_entrega,taxa_entrega:((Ce=n.entrega)==null?void 0:Ce.taxa_entrega_total)||0,endereco_entrega:(Be=n.entrega)==null?void 0:Be.endereco_completo,observacoes_entrega:(De=n.entrega)==null?void 0:De.observacoes_entrega,distancia_km:(Je=n.entrega)==null?void 0:Je.distancia_km,valor_por_km:(_t=n.entrega)==null?void 0:_t.valor_por_km,loja_origem:(At=n.entrega)==null?void 0:At.loja_origem,entregador_id:n.entregador_id}),console.log(" DEBUG - Payload sendo enviado:",{tem_entrega:n.tem_entrega,entregador_id:n.entregador_id,vendaAtual_completo:n});let Ma=0;try{Ma=(await U.get(`/vendas/${n.id}/pagamentos`)).data.total_pago||0}catch(Ga){console.error("Erro ao buscar pagamentos:",Ga)}const Xi=n.total;let Xo="aberta";Ma>=Xi-.01?Xo="finalizada":Ma>0&&(Xo="baixa_parcial"),n.status!==Xo&&(await U.patch(`/vendas/${n.id}/status`,{status:Xo}),console.log(` Status atualizado: ${n.status}  ${Xo}`)),alert("Venda atualizada com sucesso!"),_s()}else{console.log(" CRIANDO VENDA - Verso 2.0 - DESCONTOS ZERADOS"),console.log("Desconto valor:",0),console.log("Desconto percentual:",0),console.log(" Checkbox Venda Comissionada:",ge),console.log(" Funcionrio Comisso:",Ie),console.log(" Funcionrio ID enviado:",(Ie==null?void 0:Ie.id)||null),ge&&!Ie&&console.error(" ERRO: Checkbox marcado mas funcionrio no selecionado!");const Ma=((Kt=n.entrega)==null?void 0:Kt.taxa_entrega_total)||0,Xi=((Er=n.entrega)==null?void 0:Er.taxa_loja)||0,Xo=((zt=n.entrega)==null?void 0:zt.taxa_entregador)||0,Ga=Ma>0?Xi/Ma*100:100,wu=Ma>0?Xo/Ma*100:0,Ew={cliente_id:(oa=n.cliente)==null?void 0:oa.id,funcionario_id:n.funcionario_id,itens:n.itens.map(oo=>{var Aw;return{tipo:oo.tipo,produto_id:oo.produto_id,servico_descricao:oo.servico_descricao,quantidade:oo.quantidade,preco_unitario:oo.preco_unitario||oo.preco_venda,desconto_item:0,subtotal:oo.subtotal,lote_id:oo.lote_id,pet_id:oo.pet_id||((Aw=n.pet)==null?void 0:Aw.id)}}),desconto_valor:0,desconto_percentual:0,observacoes:n.observacoes,tem_entrega:n.tem_entrega,taxa_entrega:((Ss=n.entrega)==null?void 0:Ss.taxa_entrega_total)||0,percentual_taxa_loja:Ga,percentual_taxa_entregador:wu,endereco_entrega:(Gi=n.entrega)==null?void 0:Gi.endereco_completo,observacoes_entrega:(mc=n.entrega)==null?void 0:mc.observacoes_entrega,distancia_km:(b0=n.entrega)==null?void 0:b0.distancia_km,valor_por_km:(vw=n.entrega)==null?void 0:vw.valor_por_km,loja_origem:(yw=n.entrega)==null?void 0:yw.loja_origem,entregador_id:n.entregador_id};console.log(" PAYLOAD COMPLETO antes de enviar:",JSON.stringify(Ew,null,2)),console.log(" Dados de entrega:",{tem_entrega:n.tem_entrega,entregador_id:n.entregador_id,entregadorSelecionado:ve==null?void 0:ve.id,vendaAtual_completo:n}),console.log(" Percentuais calculados:",{taxaTotal:Ma,taxaLoja:Xi,taxaEntregador:Xo,percentualLoja:`${Ga.toFixed(2)}%`,percentualEntregador:`${wu.toFixed(2)}%`}),await rP(Ew),alert("Venda salva com sucesso!"),_s()}Ko()}catch(Ma){console.error(" Erro ao salvar venda:",Ma),console.error(" Resposta do servidor:",(jw=Ma.response)==null?void 0:jw.data),console.error(" Status:",(Nw=Ma.response)==null?void 0:Nw.status),console.error(" Headers:",(ww=Ma.response)==null?void 0:ww.headers);const Xi=((Sw=(_w=Ma.response)==null?void 0:_w.data)==null?void 0:Sw.detail)||((kw=(Cw=Ma.response)==null?void 0:Cw.data)==null?void 0:kw.message)||"Erro ao salvar venda";console.error(" Detalhes do erro:",Xi),alert(`Erro ao salvar venda: ${Xi}`)}finally{M(!1)}}},ju=async re=>{var Ce;console.log(" DEBUG formasPagamento recebidas:",re),pt(!0),Pe(!0);try{console.log(" Enviando anlise com mltiplas formas:",re);const Be=await U.post("/formas-pagamento/analisar-venda",{items:n.itens.map(De=>({produto_id:De.produto_id,quantidade:De.quantidade,preco_venda:De.preco_unitario||De.preco_venda,custo:De.custo})),desconto:n.desconto_valor||0,taxa_entrega:((Ce=n.entrega)==null?void 0:Ce.taxa_entrega_total)||0,formas_pagamento:re,vendedor_id:n.funcionario_id});console.log(" Resposta da anlise:",Be.data),ot(Be.data)}catch(Be){console.error("Erro ao buscar anlise:",Be),alert("Erro ao carregar anlise da venda"),Pe(!1)}finally{pt(!1)}},Nu=()=>{if(n.itens.length===0){alert("Adicione pelo menos um produto ou servio");return}if(n.status==="finalizada"||n.status==="pago_nf"){alert('Esta venda est finalizada. Clique em "Reabrir Venda" para modificar.');return}p(!0)},_s=()=>{o({cliente:null,pet:null,itens:[],subtotal:0,desconto_valor:0,desconto_percentual:0,total:0,observacoes:"",funcionario_id:null,entregador_id:(ve==null?void 0:ve.id)||null,tem_entrega:!1,entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}}),$e(!1),it(null),Ye(""),oe(!1)},IR=async re=>{var Ce,Be,De;try{const Je=await q0(re.id);let _t=null;Je.cliente_id&&(_t=await $u(Je.cliente_id));let At=[],Kt=0;try{const zt=await U.get(`/vendas/${re.id}/pagamentos`);At=zt.data.pagamentos||[],Kt=zt.data.total_pago||0}catch(zt){console.error("Erro ao buscar pagamentos:",zt)}if(console.log(" Venda carregada - funcionario_id:",Je.funcionario_id),Je.funcionario_id)try{const Ss=(((Ce=(await U.get("/comissoes/configuracoes/funcionarios")).data)==null?void 0:Ce.data)||[]).find(Gi=>Gi.id===Je.funcionario_id);Ss?($e(!0),it(Ss),console.log(" Funcionrio comisso carregado:",Ss)):console.warn(" Funcionrio ID",Je.funcionario_id,"no encontrado na lista")}catch(zt){console.error("Erro ao carregar funcionrio de comisso:",zt)}else console.log(" Venda sem funcionario_id - limpando estados de comisso"),$e(!1),it(null),Ye("");const Er={id:Je.id,numero_venda:Je.numero_venda,data_venda:Je.data_venda,cliente:_t,pet:null,itens:Je.itens||[],subtotal:parseFloat(Je.subtotal||Je.total),desconto_valor:parseFloat(Je.desconto_valor||0),desconto_percentual:parseFloat(Je.desconto_percentual||0),total:parseFloat(Je.total),observacoes:Je.observacoes||"",status:Je.status,tem_entrega:Je.tem_entrega||!1,entregador_id:Je.entregador_id||null,entrega:{endereco_completo:Je.endereco_entrega||"",endereco_id:Je.endereco_id||null,taxa_entrega_total:parseFloat(parseFloat(Je.taxa_entrega||0).toFixed(2)),taxa_loja:parseFloat(parseFloat(((Be=Je.entrega)==null?void 0:Be.taxa_loja)||0).toFixed(2)),taxa_entregador:parseFloat(parseFloat(((De=Je.entrega)==null?void 0:De.taxa_entregador)||0).toFixed(2)),observacoes_entrega:Je.observacoes_entrega||"",distancia_km:Je.distancia_km||0,valor_por_km:Je.valor_por_km||0,loja_origem:Je.loja_origem||"",status_entrega:Je.status_entrega||"pendente"},pagamentos:At,total_pago:Kt};o(Er),oe(!0),window.scrollTo({top:0,behavior:"smooth"})}catch(Je){console.error("Erro ao reabrir venda:",Je),alert("Erro ao carregar os dados da venda")}},LR=()=>{oe(!1)},BR=async()=>{if(!n.id){_s();return}if(Y&&n.status!==Y)try{M(!0),await U.patch(`/vendas/${n.id}/status`,{status:Y}),console.log(` Status restaurado para: ${Y} (alteraes descartadas)`)}catch(re){console.error("Erro ao restaurar status:",re)}finally{M(!1)}ue(null),_s()},zR=async()=>{var Ce,Be;if(!(!n.id||!window.confirm(`Deseja realmente excluir esta venda?

Esta ao no pode ser desfeita e o estoque ser devolvido.`)))try{M(!0),await U.delete(`/vendas/${n.id}`),_s(),Ko(),alert("Venda excluda com sucesso!")}catch(De){console.error("Erro ao excluir venda:",De);const Je=(Be=(Ce=De.response)==null?void 0:Ce.data)==null?void 0:Be.detail;if(Je&&typeof Je=="object"){let _t=` ${Je.erro||"Erro ao excluir venda"}

`;_t+=`${Je.mensagem||""}

`,Je.solucao&&(_t+=` Soluo:
${Je.solucao}

`),Je.passos&&Array.isArray(Je.passos)&&(_t+=` Passos para resolver:
`,Je.passos.forEach(At=>{_t+=`${At}
`})),Je.rota_id&&(_t+=`
 Rota ID: ${Je.rota_id}`,Je.rota_status&&(_t+=` (${Je.rota_status})`)),alert(_t)}else alert(typeof Je=="string"?Je:"Erro ao excluir venda. Verifique se no h vnculos pendentes.")}finally{M(!1)}},qR=async()=>{var Ce,Be;if(!(!n.id||!window.confirm(`Deseja reabrir esta venda?

Os pagamentos sero mantidos e o status mudar para "aberta".`))){ue(n.status);try{M(!0),await U.post(`/vendas/${n.id}/reabrir`);const De=await q0(n.id);let Je=null;De.cliente_id&&(Je=await $u(De.cliente_id)),o({id:De.id,numero_venda:De.numero_venda,data_venda:De.data_venda,cliente:Je,pet:null,itens:De.itens||[],subtotal:parseFloat(De.subtotal||De.total),desconto_valor:parseFloat(De.desconto_valor||0),desconto_percentual:parseFloat(De.desconto_percentual||0),total:parseFloat(De.total),observacoes:De.observacoes||"",status:"aberta",tem_entrega:De.tem_entrega||!1,entrega:{endereco_completo:De.endereco_entrega||"",endereco_id:De.endereco_id||null,taxa_entrega_total:parseFloat(parseFloat(De.taxa_entrega||0).toFixed(2)),taxa_loja:parseFloat(parseFloat(De.taxa_loja||0).toFixed(2)),taxa_entregador:parseFloat(parseFloat(De.taxa_entregador||0).toFixed(2)),observacoes_entrega:De.observacoes_entrega||"",distancia_km:De.distancia_km||0,valor_por_km:De.valor_por_km||0,loja_origem:De.loja_origem||"",status_entrega:De.status_entrega||"pendente"}}),oe(!1),alert(`Venda reaberta com sucesso! Agora voc pode edit-la.

ATENO: Se voc no fizer alteraes e sair, a venda voltar ao status anterior.`)}catch(De){console.error("Erro ao reabrir venda:",De),alert(((Be=(Ce=De.response)==null?void 0:Ce.data)==null?void 0:Be.detail)||"Erro ao reabrir venda")}finally{M(!1)}}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xh,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ponto de Venda"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar venda (Ex: 0011)",value:W,onChange:re=>ae(re.target.value),onKeyPress:re=>{re.key==="Enter"&&W.trim()&&Te()},className:"pl-10 pr-4 py-2 w-64 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"}),e.jsx(Nl,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]}),e.jsx("button",{onClick:Te,disabled:!W.trim()||k,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Buscar"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[n.cliente&&e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-orange-50 border-2 border-orange-400 rounded-lg transition-colors relative",title:"Lista de espera - Produtos sem estoque",children:[e.jsx(LA,{className:"w-5 h-5 text-orange-500"}),T>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:T})]}),n.cliente&&e.jsxs("button",{onClick:()=>{te(!0),n.id&&Ur(n.id)},className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-yellow-50 border-2 border-yellow-400 rounded-lg transition-colors",title:"Ver oportunidades de venda",children:[e.jsx(v4,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),ne.length>0&&e.jsx("span",{className:"font-semibold text-yellow-600",children:Math.min(ne.length,6)})]}),e.jsx(zB,{onAbrirCaixa:()=>b(!0)},ee),e.jsxs("button",{onClick:()=>t("/meus-caixas"),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg transition-colors",title:"Ver histrico de caixas",children:[e.jsx(jd,{className:"w-5 h-5"}),e.jsx("span",{children:"Meus Caixas"})]}),!z&&n.id&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:BR,disabled:k,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qt,{className:"w-5 h-5"}),e.jsx("span",{children:"Cancelar Edio"})]}),e.jsxs("button",{onClick:zR,disabled:k,className:"flex items-center space-x-2 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Fo,{className:"w-5 h-5"}),e.jsx("span",{children:"Excluir"})]})]}),e.jsxs("button",{onClick:Go,disabled:k||z||!ie,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Salvar venda atual":" Caixa fechado - Abra o caixa para salvar vendas",children:[e.jsx(Ym,{className:"w-5 h-5"}),e.jsx("span",{children:"Salvar"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs("button",{onClick:Nu,disabled:k||n.status==="finalizada"||n.status==="pago_nf"||!ie,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Registrar pagamento da venda":" Caixa fechado - Abra o caixa para registrar recebimentos",children:[e.jsx(vd,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]})]})]})}),!ie&&!z&&e.jsx("div",{className:"bg-red-50 border-b border-red-200 px-6 py-3",children:e.jsx("div",{className:"flex items-center justify-center max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-800",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-lg",children:" CAIXA FECHADO"}),e.jsx("span",{className:"text-sm",children:"-  necessrio abrir o caixa para registrar vendas e recebimentos"})]})})}),n.id&&n.numero_venda&&e.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-1.5",children:e.jsxs("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Venda:"}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-white px-2 py-0.5 rounded border border-blue-300",children:[e.jsxs("span",{className:"font-bold text-blue-700 text-sm",children:["#",n.numero_venda]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.numero_venda);const re=event.target.closest("button"),Ce=re.innerHTML;re.innerHTML="",re.classList.add("text-green-600"),setTimeout(()=>{re.innerHTML=Ce,re.classList.remove("text-green-600")},1500)},className:"text-blue-600 hover:text-blue-800 transition-colors text-xs",title:"Copiar nmero da venda",children:""})]})]}),n.data_venda&&e.jsx("span",{className:"text-xs text-blue-600",children:(()=>{const re=n.data_venda;if(typeof re=="string"&&re.includes("T")){const[Ce]=re.split("T"),[Be,De,Je]=Ce.split("-");return`${Je}/${De}/${Be}`}return new Date(re).toLocaleDateString("pt-BR")})()})]})}),z&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium",children:["Modo Visualizao - Venda ",n.status==="finalizada"?"Finalizada":n.status==="baixa_parcial"?"com Baixa Parcial":"Aberta"]}),e.jsx("span",{className:"text-sm",children:"(Clique em Editar para modificar)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qB,{venda:n}),e.jsxs("button",{onClick:()=>{oe(!1),_s()},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(qt,{className:"w-4 h-4"}),"Voltar"]}),(n.status==="finalizada"||n.status==="baixa_parcial")&&e.jsxs("button",{onClick:qR,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Reabrir Venda"]}),n.status==="aberta"&&e.jsx("button",{onClick:LR,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors",children:"Editar"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(hh,{className:"w-5 h-5 mr-2 text-blue-600"}),"Cliente"]}),n.cliente&&!z&&e.jsx("button",{onClick:()=>o({...n,cliente:null,pet:null}),className:"text-sm text-red-600 hover:text-red-700",children:"Remover"})]}),n.cliente?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-blue-900",children:n.cliente.nome}),e.jsxs("div",{className:"text-sm text-blue-700 mt-1",children:[n.cliente.cpf&&`CPF: ${n.cliente.cpf}`,n.cliente.telefone&&`  Tel: ${n.cliente.telefone}`]})]})}),n.cliente.credito>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jd,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Crdito Disponvel:"})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",parseFloat(n.cliente.credito||0).toFixed(2).replace(".",",")]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" Este crdito pode ser usado como forma de pagamento"})]}),A&&A.total_vendas>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-300",children:e.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-yellow-900",children:[A.total_vendas," venda(s) em aberto"]}),e.jsxs("div",{className:"text-xs text-yellow-700",children:["Total: R$ ",A.total_em_aberto.toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>_(!0),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs font-medium rounded transition-colors",children:"Ver Vendas"})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-300 flex gap-2",children:[e.jsxs("button",{onClick:()=>S(!0),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:[e.jsx(b9,{className:"w-4 h-4"}),"Histrico"]}),!z&&e.jsx("button",{onClick:()=>{o({...n,cliente:null,pet:null}),O(null)},className:"px-4 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Trocar"})]})]}),n.cliente.pets&&n.cliente.pets.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pet (opcional)"}),e.jsxs("select",{value:((dw=n.pet)==null?void 0:dw.id)||"",onChange:re=>{const Ce=n.cliente.pets.find(Be=>Be.id===parseInt(re.target.value));jt(Ce||null)},disabled:z,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Sem pet especfico"}),n.cliente.pets.map(re=>e.jsxs("option",{value:re.id,children:[re.codigo," - ",re.nome," (",re.especie,re.raca&&` - ${re.raca}`,")"]},re.id))]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:i,onChange:re=>l(re.target.value),placeholder:"Digite nome, CPF ou telefone do cliente...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:z}),e.jsx(Nl,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"})]}),e.jsxs("button",{onClick:()=>y(!0),disabled:z,className:"flex items-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Nn,{className:"w-5 h-5"}),e.jsx("span",{children:"Novo"})]})]}),u.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:u.map(re=>e.jsxs("button",{onClick:()=>et(re),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:re.nome}),e.jsxs("div",{className:"text-sm text-gray-500",children:[re.cpf&&`CPF: ${re.cpf}`,re.telefone&&`  ${re.telefone}`]}),re.pets&&re.pets.length>0&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[re.pets.length," pet(s)"]})]},re.id))})]}),i.length>=2&&u.length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"Nenhum cliente encontrado"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ms,{className:"w-5 h-5 mr-2 text-blue-600"}),"Produtos e Servios"]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{ref:Qe,type:"text",value:c,onChange:re=>d(re.target.value),placeholder:"Digite o nome do produto, cdigo de barras ou servio...",disabled:z,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",autoFocus:!z}),e.jsx(Nl,{className:"w-5 h-5 text-gray-400 absolute right-3"})]}),x.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(re=>e.jsx("button",{onClick:()=>nt(re),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b last:border-b-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:re.nome}),re.tipo_produto==="VARIACAO"&&k4(re)&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium mt-0.5",children:[" ",k4(re)]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[re.codigo&&`Cd: ${re.codigo}`,re.tipo_produto==="KIT"&&re.tipo_kit==="VIRTUAL"?re.estoque_virtual!==void 0&&`  Estoque: ${re.estoque_virtual}`:re.estoque_atual!==void 0&&`  Estoque: ${re.estoque_atual}`]})]}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["R$ ",parseFloat(re.preco_venda).toFixed(2)]})]})},re.id))})]}),n.itens.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Ms,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhum item adicionado"}),e.jsx("p",{className:"text-sm mt-1",children:"Busque e adicione produtos ou servios"})]}):e.jsx("div",{className:"space-y-3",children:n.itens.map((re,Ce)=>{var _t;const Be=re.tipo_produto==="KIT",De=Nt[Ce],Je=Be&&re.composicao_kit&&re.composicao_kit.length>0;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-400 space-y-3 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>!z&&p0(re),children:[e.jsxs("div",{className:"flex-1 flex items-start gap-2",children:[Je&&e.jsx("button",{onClick:At=>{At.stopPropagation(),kr(Ce)},className:"mt-1 text-gray-500 hover:text-blue-600 transition-colors",children:De?e.jsx(Ll,{className:"w-5 h-5"}):e.jsx(Jc,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:re.produto_nome}),Be&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[e.jsx(qA,{className:"w-3 h-3"}),"KIT"]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[re.quantidade," Unidade",re.quantidade!==1?"s":""," x R$ ",re.preco_unitario.toFixed(2),re.desconto_valor>0&&e.jsxs("span",{className:"text-orange-600 ml-1",children:["com R$ ",re.desconto_valor.toFixed(2)," de desconto"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",onClick:At=>At.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-white border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>tr(Ce,-1),disabled:z,className:"p-2 hover:bg-gray-100 rounded-l-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ug,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:re.quantidade,onChange:At=>{const Kt=parseFloat(At.target.value)||0,Er=n.itens.map((zt,oa)=>{if(oa===Ce){const Ss=Math.max(.001,Kt),Gi=Ss*zt.preco_unitario;let mc=zt.desconto_valor||0;zt.tipo_desconto_aplicado==="percentual"&&zt.desconto_percentual>0&&(mc=Gi*zt.desconto_percentual/100);const b0=Gi-mc;return{...zt,quantidade:Ss,desconto_valor:mc,subtotal:b0}}return zt});Dr(Er)},disabled:z,step:"0.001",min:"0.001",className:"w-20 px-2 py-1 text-center font-medium border-none focus:ring-0 disabled:bg-gray-50"}),e.jsx("button",{onClick:()=>tr(Ce,1),disabled:z,className:"p-2 hover:bg-gray-100 rounded-r-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Nn,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 w-24 text-right",children:["R$ ",re.subtotal.toFixed(2)]}),e.jsx("button",{onClick:()=>ws(Ce),disabled:z,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Fo,{className:"w-5 h-5"})})]})]}),Je&&De&&e.jsxs("div",{className:"ml-7 mt-3 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Composio do KIT"}),e.jsx("div",{className:"space-y-1.5",children:re.composicao_kit.map((At,Kt)=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-1.5 px-2 rounded hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:At.produto_nome})]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:[At.quantidade,"x"]})]},Kt))}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Componentes apenas informativos (no editveis)"})]}),((_t=n.cliente)==null?void 0:_t.pets)&&n.cliente.pets.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",onClick:At=>At.stopPropagation(),children:[e.jsx("label",{className:"text-sm font-medium text-gray-600 w-16",children:"Pet:"}),e.jsxs("select",{value:re.pet_id||"",onChange:At=>{const Kt=n.itens.map((Er,zt)=>zt===Ce?{...Er,pet_id:At.target.value?parseInt(At.target.value):null}:Er);o({...n,itens:Kt})},disabled:z,className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"No especificado"}),n.cliente.pets.map(At=>e.jsxs("option",{value:At.id,children:[At.codigo," - ",At.nome]},At.id))]})]})]},Ce)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Observaes"}),e.jsx("textarea",{value:n.observacoes||"",onChange:re=>o({...n,observacoes:re.target.value}),placeholder:"Observaes da venda (opcional)...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:3})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Entrega"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.tem_entrega,onChange:re=>{var Je;const Ce=re.target.checked,Be=Ce&&((Je=n.entrega)==null?void 0:Je.taxa_entrega_total)||0,De=n.subtotal+Be;o({...n,tem_entrega:Ce,total:De,entrega:Ce?n.entrega:{endereco_completo:"",taxa_entrega_total:0,taxa_loja:0,taxa_entregador:0,observacoes_entrega:""}})},disabled:z,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tem entrega?"})]})]}),n.tem_entrega&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo Completo *"}),n.cliente&&e.jsxs("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Endereos cadastrados:"}),e.jsxs("button",{type:"button",onClick:re=>{re.preventDefault(),re.stopPropagation(),Rn()},disabled:z,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Nn,{size:14}),"Adicionar Endereo"]})]}),e.jsxs("div",{className:"space-y-2",children:[(n.cliente.endereco||n.cliente.cidade)&&e.jsxs("button",{type:"button",onClick:re=>{re.preventDefault(),re.stopPropagation();const Ce=`${n.cliente.endereco}${n.cliente.numero?", "+n.cliente.numero:""}${n.cliente.complemento?" - "+n.cliente.complemento:""}, ${n.cliente.bairro}, ${n.cliente.cidade}/${n.cliente.estado}`;o({...n,entrega:{...n.entrega,endereco_completo:Ce}})},disabled:z,className:"w-full text-left px-3 py-2 bg-white hover:bg-blue-100 border border-blue-300 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"font-medium text-blue-700",children:" Cadastro Principal:"})," ",e.jsxs("span",{className:"text-gray-700",children:[n.cliente.endereco,", ",n.cliente.numero," - ",n.cliente.bairro]})]}),n.cliente.enderecos_adicionais&&n.cliente.enderecos_adicionais.map((re,Ce)=>e.jsxs("button",{type:"button",onClick:Be=>{Be.preventDefault(),Be.stopPropagation();const De=`${re.endereco}, ${re.numero}${re.complemento?" - "+re.complemento:""}, ${re.bairro}, ${re.cidade}/${re.estado}`;o({...n,entrega:{...n.entrega,endereco_completo:De}})},disabled:z,className:"w-full text-left px-3 py-2 bg-white hover:bg-blue-100 border border-blue-300 rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded mr-2 ${re.tipo==="entrega"?"bg-blue-100 text-blue-800":re.tipo==="cobranca"?"bg-green-100 text-green-800":re.tipo==="comercial"?"bg-purple-100 text-purple-800":re.tipo==="residencial"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:[re.tipo==="entrega"?"":re.tipo==="cobranca"?"":re.tipo==="comercial"?"":re.tipo==="residencial"?"":""," ",re.apelido||re.tipo]}),e.jsxs("span",{className:"text-gray-700",children:[re.endereco,", ",re.numero," - ",re.bairro]})]},Ce)),!n.cliente.endereco&&(!n.cliente.enderecos_adicionais||n.cliente.enderecos_adicionais.length===0)&&e.jsx("p",{className:"text-sm text-gray-600 italic",children:'Nenhum endereo cadastrado. Clique em "+ Adicionar Endereo"'})]})]}),e.jsx("textarea",{value:((uw=n.entrega)==null?void 0:uw.endereco_completo)??"",onChange:re=>o({...n,entrega:{...n.entrega,endereco_completo:re.target.value}}),placeholder:"Rua, nmero, complemento, bairro, cidade...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entregador"}),e.jsxs("select",{value:(ve==null?void 0:ve.id)||"",onChange:re=>{const Ce=qe.find(Be=>Be.id===parseInt(re.target.value));Re(Ce),o({...n,entregador_id:(Ce==null?void 0:Ce.id)||null}),Ce&&Qt(Ce)},disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Selecione um entregador"}),qe.map(re=>e.jsxs("option",{value:re.id,children:[re.nome_fantasia||re.nome,re.entregador_padrao&&" (Padro)"]},re.id))]}),ve&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Modelo: ",ve.modelo_custo_entrega==="taxa_fixa"?" Taxa Fixa":ve.modelo_custo_entrega==="por_km"?" Por KM":ve.modelo_custo_entrega==="rateio_rh"?" Rateio RH":" Configurao Global"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa de Entrega Total"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:((mw=n.entrega)==null?void 0:mw.taxa_entrega_total)??0,onChange:re=>{var Er;const Ce=parseFloat(re.target.value)||0,Be=parseFloat(Ce.toFixed(2)),De=((Er=n.entrega)==null?void 0:Er.taxa_loja)||0,Je=parseFloat((Ce-De).toFixed(2)),_t={...n,entrega:{...n.entrega,taxa_entrega_total:Be,taxa_loja:parseFloat(De.toFixed(2)),taxa_entregador:Je}},At=_t.tem_entrega?Be:0,Kt=parseFloat((_t.subtotal+At).toFixed(2));o({..._t,total:Kt})},disabled:z,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa Loja"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:((xw=n.entrega)==null?void 0:xw.taxa_entrega_total)??0,value:parseFloat((((pw=n.entrega)==null?void 0:pw.taxa_loja)??0).toFixed(2)),onChange:re=>{var _t;const Ce=parseFloat(re.target.value)||0,Be=((_t=n.entrega)==null?void 0:_t.taxa_entrega_total)||0,De=parseFloat(Ce.toFixed(2)),Je=parseFloat((Be-Ce).toFixed(2));o({...n,entrega:{...n.entrega,taxa_loja:De,taxa_entregador:Je}})},disabled:z,className:"w-full pl-12 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa Entregador"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:((hw=n.entrega)==null?void 0:hw.taxa_entrega_total)??0,value:parseFloat((((fw=n.entrega)==null?void 0:fw.taxa_entregador)??0).toFixed(2)),onChange:re=>{var _t;const Ce=parseFloat(re.target.value)||0,Be=((_t=n.entrega)==null?void 0:_t.taxa_entrega_total)||0,De=parseFloat(Ce.toFixed(2)),Je=parseFloat((Be-Ce).toFixed(2));o({...n,entrega:{...n.entrega,taxa_entregador:De,taxa_loja:Je}})},disabled:z,className:"w-full pl-12 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Preencha a taxa total e depois divida entre loja e entregador. Ao alterar uma, a outra  calculada automaticamente."}),ve&&Le>0&&e.jsxs("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600",children:""}),e.jsx("span",{className:"text-sm font-medium text-amber-900",children:"Custo Operacional"})]}),e.jsxs("span",{className:"text-sm font-semibold text-amber-700",children:["R$ ",Le.toFixed(2)]})]}),e.jsxs("p",{className:"text-xs text-amber-600 mt-1 italic",children:[ve.nome_fantasia||ve.nome," -",ve.modelo_custo_entrega==="taxa_fixa"&&" Taxa Fixa",ve.modelo_custo_entrega==="por_km"&&" Valor por KM",ve.modelo_custo_entrega==="rateio_rh"&&" Rateio de RH"," ","(no aparece no cupom)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes da Entrega"}),e.jsx("textarea",{value:((gw=n.entrega)==null?void 0:gw.observacoes_entrega)??"",onChange:re=>o({...n,entrega:{...n.entrega,observacoes_entrega:re.target.value}}),placeholder:"Horrio preferencial, ponto de referncia...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",rows:2})]})]})]}),n.itens.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total bruto:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",(n.subtotal+n.desconto_valor).toFixed(2)]})]}),n.desconto_valor>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-orange-600",children:[(n.desconto_valor/(n.subtotal+n.desconto_valor)*100).toFixed(2),"% de desconto:"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-orange-600",children:["R$ ",n.desconto_valor.toFixed(2)]}),e.jsx("button",{onClick:f0,disabled:z,className:"p-1 text-blue-600 hover:bg-blue-50 rounded disabled:opacity-50",title:"Aplicar desconto",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.tem_entrega&&e.jsxs("div",{className:"flex justify-between text-blue-600",children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["+ R$ ",(((bw=n.entrega)==null?void 0:bw.taxa_entrega_total)||0).toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total da Venda:"}),e.jsxs("span",{children:["R$ ",n.total.toFixed(2)]})]})}),he>0&&e.jsxs("div",{className:"flex justify-between text-sm text-blue-600 bg-blue-50 p-2 rounded",children:[e.jsx("span",{className:"font-medium",children:"Total de Impostos:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",he]})]}),n.total_pago>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-green-600 border-t pt-3",children:[e.jsx("span",{className:"font-medium",children:"(-) Valor Pago:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",n.total_pago.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-2xl font-bold border-t-2 pt-3",children:[e.jsx("span",{className:n.total-n.total_pago>0?"text-orange-600":"text-green-600",children:n.total-n.total_pago>0?"Saldo Restante:":"Totalmente Pago:"}),e.jsxs("span",{className:n.total-n.total_pago>0?"text-orange-600":"text-green-600",children:["R$ ",Math.max(0,n.total-n.total_pago).toFixed(2)]})]})]}),!n.total_pago&&e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-2xl font-bold text-gray-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",n.total.toFixed(2)]})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Comisso"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ge,onChange:re=>{$e(re.target.checked),re.target.checked||it(null)},disabled:z,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Venda comissionada?"})]})]}),ge&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Funcionrio/Veterinrio * ",e.jsx("span",{className:"text-xs text-gray-500",children:"(apenas com comisso configurada)"})]}),Ie?e.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-300 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:Ie.nome.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-900",children:Ie.nome}),e.jsx("div",{className:"text-sm text-green-700 capitalize",children:Ie.cargo})]})]}),e.jsx("button",{onClick:()=>{it(null),Ye("")},disabled:z,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors disabled:cursor-not-allowed",title:"Remover seleo",children:e.jsx(qt,{size:20})})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:Oe,placeholder:"Buscar funcionrio ou veterinrio...",disabled:z,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",onFocus:async()=>{if(!z)try{const re=await U.get("/comissoes/configuracoes/funcionarios");xe(re.data.data||[])}catch(re){console.error("Erro ao buscar funcionrios:",re)}},onChange:async re=>{const Ce=re.target.value;Ye(Ce);try{const De=(await U.get("/comissoes/configuracoes/funcionarios")).data.data||[],Je=Ce?De.filter(_t=>_t.nome.toLowerCase().includes(Ce.toLowerCase())):De;xe(Je)}catch(Be){console.error("Erro ao buscar funcionrios:",Be)}}}),rt.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 rounded-lg max-h-48 overflow-y-auto",children:rt.map(re=>e.jsxs("button",{onClick:()=>{it(re),xe([]),Ye("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:re.nome}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:re.cargo})]},re.id))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" A comisso ser calculada automaticamente conforme configurado no mdulo de comisses"})]})]})]}),n.itens.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[!ie&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-700",children:[e.jsx(Lt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:' Caixa fechado - Use o boto "Abrir Caixa" no topo da pgina para continuar'})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.itens.length>0&&!n.id&&e.jsxs("button",{onClick:()=>{window.confirm("Descartar venda atual sem salvar?")&&_s()},disabled:k||z,className:"flex items-center space-x-2 px-4 py-3 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed border border-red-200",title:"Descartar venda atual e comear uma nova",children:[e.jsx(qt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Nova Venda"})]}),e.jsxs("button",{onClick:Go,disabled:k||z||!ie,className:"flex items-center space-x-2 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Salvar venda atual":" Caixa fechado - Abra o caixa para salvar vendas",children:[e.jsx(Ym,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Salvar Venda"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs("button",{onClick:Nu,disabled:k||n.status==="finalizada"||n.status==="pago_nf"||!ie,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",title:ie?"Registrar pagamento da venda":" Caixa fechado - Abra o caixa para registrar recebimentos",children:[e.jsx(vd,{className:"w-5 h-5"}),e.jsx("span",{children:"Registrar Recebimento"}),!ie&&e.jsx("span",{className:"text-xs",children:""})]})]})]})]})]}),n.cliente&&J&&e.jsx("div",{className:"w-80 bg-gray-50 border-l flex flex-col overflow-hidden",children:e.jsx(WB,{clienteId:n.cliente.id})}),n.cliente&&e.jsx("button",{onClick:()=>P(!J),className:"fixed right-0 top-1/2 -translate-y-1/2 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-l-lg shadow-lg transition-all z-10",style:{right:J?"320px":"0"},title:J?"Recolher informaes do cliente":"Expandir informaes do cliente",children:J?e.jsx(Jc,{className:"w-5 h-5"}):e.jsx(hh,{className:"w-5 h-5"})}),Dt&&e.jsxs("div",{className:"w-52 bg-white border-l flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-base font-semibold text-gray-900 flex items-center",children:[e.jsx(Bl,{className:"w-4 h-4 mr-2 text-blue-600"}),"Vendas Recentes"]}),e.jsx("button",{onClick:()=>jr(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Fechar painel",children:e.jsx(qt,{className:"w-4 h-4 text-gray-500"})})]}),e.jsx("div",{className:"flex space-x-1 mb-3",children:["24h","7d","30d"].map(re=>e.jsxs("button",{onClick:()=>Z(re),className:`flex-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors ${L===re?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[re==="24h"&&"ltimas 24h",re==="7d"&&"7 dias",re==="30d"&&"30 dias"]},re))}),e.jsx("div",{className:"flex space-x-1 mb-2",children:[{id:"todas",label:"Todas"},{id:"pago",label:"Pago"},{id:"aberta",label:"Aberta"}].map(re=>e.jsx("button",{onClick:()=>K(re.id),className:`flex-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-colors ${D===re.id?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:re.label},re.id))}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-gray-50 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:re=>B(re.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Apenas com entrega"})]}),e.jsx("div",{className:"px-2 pb-2",children:e.jsx("input",{type:"text",value:F,onChange:re=>I(re.target.value),placeholder:"Buscar por nmero...",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:V.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Lt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"Nenhuma venda encontrada"})]}):V.map(re=>e.jsxs("div",{onClick:()=>IR(re),className:"bg-gray-50 rounded-lg p-2.5 border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:re.cliente_nome||"Cliente no informado"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["#",re.numero_venda]})]}),e.jsxs("div",{className:"text-right ml-2 flex-shrink-0",children:[re.status==="baixa_parcial"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[10px] text-gray-500",children:"Pago"}),e.jsxs("div",{className:"text-xs font-semibold text-green-600",children:["R$ ",(re.valor_pago||0).toFixed(2)]}),e.jsxs("div",{className:"text-[10px] text-gray-500 mt-0.5",children:["de R$ ",(re.total||0).toFixed(2)]})]}):e.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["R$ ",(re.total||0).toFixed(2)]}),e.jsxs("div",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded-full mt-1 inline-block ${re.status==="pago_nf"?"bg-emerald-100 text-emerald-700":re.status==="finalizada"?"bg-green-100 text-green-700":re.status==="baixa_parcial"?"bg-blue-100 text-blue-700":re.status==="aberta"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[re.status==="pago_nf"&&"Pago NF",re.status==="finalizada"&&"Pago",re.status==="baixa_parcial"&&"Parcial",re.status==="aberta"&&"Aberta",re.status==="cancelada"&&"Cancelada"]})]})]}),e.jsx("div",{className:"text-[10px] text-gray-500",children:(()=>{const Ce=re.data_venda;if(typeof Ce=="string"&&Ce.includes("T")){const[Be,De]=Ce.split("T"),Je=De.split("-")[0].split("+")[0],[_t,At,Kt]=Be.split("-"),[Er,zt]=Je.split(":");return`${Kt}/${At} ${Er}:${zt}`}return new Date(Ce).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})()})]},re.id))})]}),H&&n.cliente&&e.jsx("div",{className:"fixed inset-0 z-40",children:e.jsxs("div",{className:"absolute top-0 right-0 w-80 h-full bg-gray-50 border-l border-gray-300 shadow-lg flex flex-col animate-in slide-in-from-right duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-300 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v4,{className:"w-4 h-4 text-gray-600"}),e.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Oportunidades"})]}),e.jsx("button",{onClick:()=>te(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx(qt,{className:"w-4 h-4 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[ne.slice(0,5).map(re=>e.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:re.titulo}),e.jsx("p",{className:"text-xs text-gray-700 mb-2 leading-relaxed",children:re.descricao_curta}),e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs mt-2",children:[e.jsxs("button",{onClick:()=>{Us("oportunidade_convertida",re),console.log("Adicionar ao carrinho:",re.id)},className:"flex items-center gap-1 text-green-500 hover:text-green-600 transition-colors whitespace-nowrap font-medium",title:"Adicionar ao carrinho",children:[e.jsx(Nn,{className:"w-3 h-3"}),e.jsx("span",{children:"Adicionar"})]}),e.jsx("button",{onClick:()=>{Us("oportunidade_refinada",re),console.log("Buscar alternativa:",re.id)},className:"text-orange-600 hover:text-orange-700 transition-colors whitespace-nowrap flex-1 text-center font-medium",title:"Ver alternativa",children:"Alternativa"}),e.jsxs("button",{onClick:()=>{Us("oportunidade_rejeitada",re),de(Ce=>Ce.filter(Be=>Be.id!==re.id))},className:"flex items-center gap-1 text-red-500 hover:text-red-600 transition-colors whitespace-nowrap font-medium",title:"Ignorar sugesto",children:[e.jsx("span",{children:"Ignorar"}),e.jsx(qt,{className:"w-3 h-3"})]})]})]},re.id)),ne.length===0&&e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-400",children:e.jsx("p",{className:"text-xs",children:"Nenhuma oportunidade disponvel"})})]}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-white",children:e.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:ne.length>0?`${Math.min(ne.length,6)} oportunidades`:""})})]})}),e.jsx("button",{onClick:()=>jr(!Dt),className:"fixed right-0 bottom-20 bg-blue-600 hover:bg-blue-700 text-white rounded-l-lg shadow-lg transition-all z-10 flex items-center gap-1",style:{right:Dt?"208px":"0",padding:Dt?"6px":"6px 8px"},title:Dt?"Recolher vendas recentes":"Expandir vendas recentes",children:Dt?e.jsx(Jc,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(g9,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:"Vendas"})]})}),v&&e.jsx(EB,{venda:n,onClose:()=>p(!1),onAnalisarVenda:s?ju:null,onConfirmar:async()=>{if(p(!1),z&&n.id)try{const Ce=(await U.get(`/vendas/${n.id}`)).data;let Be=[],De=0;try{const Je=await U.get(`/vendas/${n.id}/pagamentos`);Be=Je.data.pagamentos||[],De=Je.data.total_pago||0}catch(Je){console.error("Erro ao buscar pagamentos:",Je)}o({...Ce,pagamentos:Be,total_pago:De}),console.log(" Venda recarregada:",Ce)}catch(re){console.error("Erro ao recarregar venda:",re)}else _s();Ko(),ce(re=>re+1)},onVendaAtualizada:async()=>{if(n.id){const re=await q0(n.id);let Ce=[],Be=0;try{const De=await U.get(`/vendas/${n.id}/pagamentos`);Ce=De.data.pagamentos||[],Be=De.data.total_pago||0}catch(De){console.error("Erro ao buscar pagamentos:",De)}o({...re,pagamentos:Ce,total_pago:Be}),oe(re.status==="finalizada"||re.status==="baixa_parcial"),Ko()}}}),f&&e.jsx($B,{onClose:()=>b(!1),onSucesso:()=>{b(!1),ce(re=>re+1),we(!0)}}),ke&&e.jsx(KB,{isOpen:ke,itensCarrinho:n.itens,racaoIdFechada:Ze,onClose:()=>{const re=n.itens.filter(Ce=>{const Be=(Ce.categoria_nome||"").toLowerCase();return Be.includes("rao")||Be.includes("racao")});re.length>0&&tt(re[re.length-1].produto_id),He(!1)}}),C&&n.cliente&&e.jsx(GB,{isOpen:C,onClose:()=>E(!1),clienteId:n.cliente.id,onPendenciaAdicionada:()=>rr()}),g&&e.jsx(YB,{onClose:()=>y(!1),onClienteCriado:re=>{et(re),y(!1)}}),Se&&_e&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Adicionar Novo Endereo ao Cliente"}),e.jsx("button",{onClick:is,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(qt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Endereo *"}),e.jsxs("select",{value:_e.tipo,onChange:re=>je({..._e,tipo:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"entrega",children:" Entrega"}),e.jsx("option",{value:"cobranca",children:" Cobrana"}),e.jsx("option",{value:"comercial",children:" Comercial"}),e.jsx("option",{value:"residencial",children:" Residencial"}),e.jsx("option",{value:"trabalho",children:" Trabalho"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apelido (opcional)"}),e.jsx("input",{type:"text",value:_e.apelido,onChange:re=>je({..._e,apelido:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Ex: Casa da me, Escritrio, Loja"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:_e.cep,onChange:re=>{const Ce=re.target.value.replace(/\D/g,""),Be=Ce.length>5?`${Ce.slice(0,5)}-${Ce.slice(5,8)}`:Ce;je({..._e,cep:Be})},onBlur:re=>Ho(re.target.value),maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"00000-000"}),lt&&e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereo *"}),e.jsx("input",{type:"text",value:_e.endereco,onChange:re=>je({..._e,endereco:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Rua, Avenida, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero"}),e.jsx("input",{type:"text",value:_e.numero,onChange:re=>je({..._e,numero:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"123"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:_e.complemento,onChange:re=>je({..._e,complemento:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Apto, Bloco, Sala..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:_e.bairro,onChange:re=>je({..._e,bairro:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Centro, Jardim..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade *"}),e.jsx("input",{type:"text",value:_e.cidade,onChange:re=>je({..._e,cidade:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"So Paulo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsx("input",{type:"text",value:_e.estado,onChange:re=>je({..._e,estado:re.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",maxLength:"2",placeholder:"SP"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"* Campos obrigatrios"})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:is,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:ls,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Endereo"})]})]})}),ut&&Me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Alterar item da venda"}),e.jsx("button",{onClick:()=>Ee(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(qt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:Me.produto_nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cdigo: ",Me.produto_codigo]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Preo ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:Me.preco,onChange:re=>Ae({...Me,preco:parseFloat(re.target.value)||0}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),e.jsx("input",{type:"number",step:"0.001",value:Me.quantidade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtotal"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"R$"}),e.jsx("input",{type:"text",value:(Me.preco*Me.quantidade).toFixed(2),readOnly:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-100"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de desconto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ae({...Me,tipoDesconto:"valor",descontoPercentual:0}),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Me.tipoDesconto==="valor"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"R$"}),e.jsx("button",{onClick:()=>Ae({...Me,tipoDesconto:"percentual",descontoValor:0}),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Me.tipoDesconto==="percentual"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor do desconto"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:Me.tipoDesconto==="valor"?"R$":"%"}),e.jsx("input",{type:"number",step:"0.01",value:Me.tipoDesconto==="valor"?Me.descontoValor:Me.descontoPercentual,onChange:re=>{const Ce=parseFloat(re.target.value)||0;Me.tipoDesconto==="valor"?Ae({...Me,descontoValor:Ce}):Ae({...Me,descontoPercentual:Ce})},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:"Total bruto"}),e.jsxs("span",{className:"font-medium",children:["R$ ",(Me.preco*Me.quantidade).toFixed(2)]})]}),(Me.descontoValor>0||Me.descontoPercentual>0)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm text-red-600 mt-1",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",Me.tipoDesconto==="valor"?Me.descontoValor.toFixed(2):(Me.preco*Me.quantidade*Me.descontoPercentual/100).toFixed(2)]})]}),e.jsx("div",{className:"flex justify-between text-sm text-orange-600 mt-1",children:e.jsxs("span",{children:[Me.tipoDesconto==="percentual"&&`${Me.descontoPercentual.toFixed(2)}% de desconto`,Me.tipoDesconto==="valor"&&`${(Me.descontoValor/(Me.preco*Me.quantidade)*100).toFixed(2)}% de desconto`]})})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2 pt-2 border-t border-blue-200",children:[e.jsx("span",{children:"Total lquido"}),e.jsxs("span",{className:"text-green-600",children:["R$ ",(Me.preco*Me.quantidade-(Me.tipoDesconto==="valor"?Me.descontoValor:Me.preco*Me.quantidade*Me.descontoPercentual/100)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-between gap-3",children:[e.jsx("button",{onClick:()=>Ee(!1),className:"flex-1 px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fechar"}),e.jsx("button",{onClick:()=>{n.itens.map(re=>(re.produto_id===Me.produto_id&&ws(n.itens.indexOf(re)),re)).filter(Boolean),Ee(!1)},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Remover"}),e.jsx("button",{onClick:h0,className:"flex-1 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Salvar"})]})]})}),ct&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" Aplicar desconto"}),e.jsx("button",{onClick:()=>bt(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(qt,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total bruto"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",n.subtotal.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de desconto"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ct("valor"),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Rt==="valor"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"R$"}),e.jsx("button",{onClick:()=>Ct("percentual"),className:`flex-1 px-4 py-2 rounded-lg border-2 transition-colors ${Rt==="percentual"?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:Rt==="valor"?"R$":"%"}),e.jsx("input",{type:"number",step:"0.01",value:It,onChange:re=>$t(parseFloat(re.target.value)||0),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-700",children:"Desconto"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["- R$ ",Rt==="valor"?It.toFixed(2):(n.subtotal*It/100).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-baseline border-t border-blue-200 pt-2 mt-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Total lquido"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",(Rt==="valor"?n.subtotal-It:n.subtotal-n.subtotal*It/100).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>bt(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Fechar"}),e.jsx("button",{onClick:()=>g0(Rt,It),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Aplicar"})]})]})}),N&&n.cliente&&e.jsx(VB,{clienteId:n.cliente.id,clienteNome:n.cliente.nome,onClose:()=>_(!1),onSucesso:()=>{U.get(`/clientes/${n.cliente.id}/vendas-em-aberto`).then(re=>{re.data.resumo.total_vendas>0?O(re.data.resumo):O(null)}).catch(()=>O(null))}}),w&&n.cliente&&e.jsx(UB,{clienteId:n.cliente.id,clienteNome:n.cliente.nome,onClose:()=>S(!1)}),s&&e.jsx(HB,{mostrar:Ne,onFechar:()=>Pe(!1),dados:Ve,carregando:xt})]})})}function YB({onClose:t,onClienteCriado:r}){const[a,s]=j.useState({nome:"",telefone:"",cpf:"",email:""}),[n,o]=j.useState(!1),[i,l]=j.useState(""),c=async d=>{if(d.preventDefault(),!a.nome||!a.telefone){l("Nome e telefone so obrigatrios");return}o(!0),l("");try{const u=await U.post("/clientes",{...a,tipo_cadastro:"cliente",tipo_pessoa:"PF"});r(u.data)}catch(u){console.error("Erro:",u),l("Erro ao cadastrar cliente")}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Cadastro Rpido"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[i&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),e.jsx("input",{type:"text",value:a.nome,onChange:d=>s({...a,nome:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:a.telefone,onChange:d=>s({...a,telefone:d.target.value}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF"}),e.jsx("input",{type:"text",value:a.cpf,onChange:d=>s({...a,cpf:d.target.value}),placeholder:"000.000.000-00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),e.jsx("input",{type:"email",value:a.email,onChange:d=>s({...a,email:d.target.value}),placeholder:"cliente@email.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Cadastrando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-5 h-5"}),e.jsx("span",{children:"Cadastrar"})]})})]})]})]})})}function QB(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({data_inicio:"",data_fim:"",status:""});j.useEffect(()=>{l()},[o]);const l=async()=>{try{n(!0);const x={};o.data_inicio&&(x.data_inicio=o.data_inicio),o.data_fim&&(x.data_fim=o.data_fim),o.status&&(x.status_filter=o.status);const h=await TB(x);a(h)}catch(x){console.error("Erro ao carregar caixas:",x),alert("Erro ao carregar histrico de caixas")}finally{n(!1)}},c=async x=>{var h,v;if(confirm("Deseja realmente reabrir este caixa?"))try{await FB(x),alert("Caixa reaberto com sucesso!"),t("/pdv")}catch(p){console.error("Erro ao reabrir caixa:",p),alert(((v=(h=p.response)==null?void 0:h.data)==null?void 0:v.detail)||"Erro ao reabrir caixa")}},d=async(x,h)=>{try{const v=localStorage.getItem("token"),p=await fetch(`http://localhost:8000/caixas/${x}/pdf`,{headers:{Authorization:`Bearer ${v}`}});if(!p.ok)throw new Error("Erro ao gerar PDF");const g=await p.blob(),y=window.URL.createObjectURL(g),f=document.createElement("a");f.href=y,f.download=`Caixa_${h}_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(y),document.body.removeChild(f),alert("PDF baixado com sucesso!")}catch(v){console.error("Erro ao baixar PDF:",v),alert("Erro ao gerar PDF do caixa")}},u=x=>{const h={aberto:{cor:"bg-green-100 text-green-800",icone:Gt,texto:"Aberto"},fechado:{cor:"bg-gray-100 text-gray-800",icone:Yn,texto:"Fechado"}},v=h[x]||h.fechado,p=v.icone;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${v.cor}`,children:[e.jsx(p,{className:"w-4 h-4"}),v.texto]})},m=(x,h)=>{const v=h-x;return{valor:Math.abs(v),tipo:v>0?"sobra":v<0?"falta":"ok"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meus Caixas"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Histrico e gesto dos seus caixas"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:o.data_inicio,onChange:x=>i({...o,data_inicio:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:o.data_fim,onChange:x=>i({...o,data_fim:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o.status,onChange:x=>i({...o,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"aberto",children:"Aberto"}),e.jsx("option",{value:"fechado",children:"Fechado"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>i({data_inicio:"",data_fim:"",status:""}),className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Limpar Filtros"})})]})}),s?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando caixas..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[e.jsx(Lt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum caixa encontrado"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.map(x=>{const h=x.status==="fechado"&&x.valor_esperado?m(x.valor_esperado,x.valor_informado):null;return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ha,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Caixa #",x.numero_caixa]}),e.jsx("p",{className:"text-sm text-gray-600",children:x.usuario_nome})]})]}),u(x.status)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(zi,{className:"w-4 h-4"}),e.jsxs("span",{children:["Abertura: ",new Date(x.data_abertura).toLocaleString("pt-BR")]})]}),x.data_fechamento&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Bl,{className:"w-4 h-4"}),e.jsxs("span",{children:["Fechamento: ",new Date(x.data_fechamento).toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Abertura"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["R$ ",x.valor_abertura.toFixed(2)]})]}),x.status==="fechado"&&x.valor_esperado&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Esperado"}),e.jsxs("div",{className:"text-lg font-semibold text-blue-900",children:["R$ ",x.valor_esperado.toFixed(2)]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Informado"}),e.jsxs("div",{className:"text-lg font-semibold text-green-900",children:["R$ ",x.valor_informado.toFixed(2)]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h.tipo==="ok"?"bg-gray-50":h.tipo==="sobra"?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Diferena"}),e.jsxs("div",{className:`text-lg font-semibold ${h.tipo==="ok"?"text-gray-900":h.tipo==="sobra"?"text-green-900":"text-red-900"}`,children:[h.tipo==="sobra"&&"+",h.tipo==="falta"&&"-","R$ ",h.valor.toFixed(2)]})]})]})]}),(x.observacoes_abertura||x.observacoes_fechamento)&&e.jsxs("div",{className:"border-t pt-4 mb-4",children:[x.observacoes_abertura&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Obs. Abertura:"})," ",x.observacoes_abertura]}),x.observacoes_fechamento&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Obs. Fechamento:"})," ",x.observacoes_fechamento]})]}),x.status==="fechado"&&e.jsxs("div",{className:"border-t pt-4 flex gap-3",children:[e.jsxs("button",{onClick:()=>c(x.id),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Kr,{className:"w-4 h-4"}),"Reabrir Caixa"]}),e.jsxs("button",{onClick:()=>d(x.id,x.numero_caixa),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Km,{className:"w-4 h-4"}),"Baixar PDF"]})]})]})},x.id)})})]})}function JB(){var G,L,Z;const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(""),[x,h]=j.useState(""),[v,p]=j.useState(null),[g,y]=j.useState(null),[f,b]=j.useState(""),[N,_]=j.useState(!1),w=[{value:"",label:"Todas"},{value:"Autorizada",label:"Autorizada"},{value:"Emitida DANFE",label:"Emitida DANFE"},{value:"Cancelada",label:"Cancelada"},{value:"Pendente",label:"Pendente"}];j.useEffect(()=>{S()},[n,i,c]);const S=async()=>{try{s(!0),h("");const D=new URLSearchParams;n&&D.append("situacao",n),i&&D.append("data_inicial",i),c&&D.append("data_final",c);const K=await U.get(`/nfe/?${D.toString()}`);r(K.data.notas||[])}catch(D){console.error("Erro ao carregar notas:",D),h("Erro ao carregar notas fiscais")}finally{s(!1)}},C=async(D,K)=>{try{const R=await U.get(`/nfe/${D}/danfe`,{responseType:"blob"}),B=window.URL.createObjectURL(new Blob([R.data])),F=document.createElement("a");F.href=B,F.setAttribute("download",`danfe_${K}.pdf`),document.body.appendChild(F),F.click(),F.remove()}catch(R){console.error("Erro ao baixar DANFE:",R),alert("Erro ao baixar DANFE")}},E=async(D,K)=>{try{const R=await U.get(`/nfe/${D}/xml`),B=new Blob([R.data.xml],{type:"application/xml"}),F=window.URL.createObjectURL(B),I=document.createElement("a");I.href=F,I.setAttribute("download",`nfe_${K}.xml`),document.body.appendChild(I),I.click(),I.remove()}catch(R){console.error("Erro ao baixar XML:",R),alert("Erro ao baixar XML")}},T=async()=>{var D,K;if(!f||f.length<15){alert("A justificativa deve ter no mnimo 15 caracteres");return}try{_(!0),await U.post(`/nfe/${g.id}/cancelar`,{justificativa:f}),alert("Nota fiscal cancelada com sucesso!"),y(null),b(""),S()}catch(R){console.error("Erro ao cancelar nota:",R),alert(((K=(D=R.response)==null?void 0:D.data)==null?void 0:K.detail)||"Erro ao cancelar nota fiscal")}finally{_(!1)}},q=async(D,K)=>{var R,B;if(confirm(`Deseja realmente excluir a nota ${K}?

Isso apenas remove os dados da nota do sistema, no cancela no Bling/SEFAZ.`))try{await U.delete(`/nfe/${D}`),alert("Nota fiscal excluda com sucesso!"),S()}catch(F){console.error("Erro ao excluir nota:",F),alert(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao excluir nota fiscal")}},A=D=>{switch(D==null?void 0:D.toLowerCase()){case"autorizada":case"emitida danfe":return"bg-green-100 text-green-800";case"cancelada":return"bg-red-100 text-red-800";case"pendente":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},O=D=>{switch(D==null?void 0:D.toLowerCase()){case"autorizada":case"emitida danfe":return e.jsx(Gt,{className:"w-4 h-4"});case"cancelada":return e.jsx(qt,{className:"w-4 h-4"});case"pendente":return e.jsx(Lt,{className:"w-4 h-4"});default:return e.jsx(bs,{className:"w-4 h-4"})}},V=t.filter(D=>{var R,B,F,I,k,M;if(!u)return!0;const K=u.toLowerCase();return((R=D.numero)==null?void 0:R.toLowerCase().includes(K))||((B=D.serie)==null?void 0:B.toLowerCase().includes(K))||((I=(F=D.cliente)==null?void 0:F.nome)==null?void 0:I.toLowerCase().includes(K))||((M=(k=D.cliente)==null?void 0:k.cpf_cnpj)==null?void 0:M.toLowerCase().includes(K))});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(bs,{className:"w-8 h-8 text-blue-600"}),"Notas Fiscais de Sada"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie suas NF-e e NFC-e emitidas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Xm,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"font-semibold text-gray-800",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nmero, cliente...",value:u,onChange:D=>m(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{children:e.jsx("input",{type:"date",value:i,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{children:e.jsx("input",{type:"date",value:c,onChange:D=>d(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("select",{value:n,onChange:D=>o(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:w.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),x]}),a?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Carregando notas fiscais..."})]}):V.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(bs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Nenhuma nota encontrada"}),e.jsx("p",{className:"text-gray-600",children:u||n||i||c?"Tente ajustar os filtros":"Emita sua primeira nota fiscal em uma venda"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Emisso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Situao"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(D=>{var K,R,B,F;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.numero}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Srie ",D.serie]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:D.data_emissao?new Date(D.data_emissao).toLocaleDateString("pt-BR"):"-"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((K=D.cliente)==null?void 0:K.nome)||"Cliente no informado"}),e.jsx("div",{className:"text-sm text-gray-500",children:((R=D.cliente)==null?void 0:R.cpf_cnpj)||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${A(D.status)}`,children:[O(D.status),D.status||"Pendente"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",D.valor.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[(((B=D.status)==null?void 0:B.toLowerCase())==="autorizada"||((F=D.status)==null?void 0:F.toLowerCase())==="emitida danfe")&&e.jsx("button",{onClick:()=>y(D),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Cancelar NF-e",children:e.jsx(Yn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>q(D.venda_id,D.numero),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Excluir nota do sistema",children:e.jsx(Fo,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C(D.id,D.numero),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Baixar DANFE",children:e.jsx(Ly,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>E(D.id,D.numero),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded",title:"Baixar XML",children:e.jsx(Km,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p(D),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Ver Detalhes",children:e.jsx(Gm,{className:"w-5 h-5"})})]})})]},D.id)})})]})}),!a&&V.length>0&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[V.length," ",V.length===1?"nota encontrada":"notas encontradas"]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Detalhes da Nota Fiscal #",v.numero]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nmero"}),e.jsx("p",{className:"text-gray-900",children:v.numero})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Srie"}),e.jsx("p",{className:"text-gray-900",children:v.serie})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Modelo"}),e.jsx("p",{className:"text-gray-900",children:v.modelo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Tipo"}),e.jsx("p",{className:"text-gray-900",children:v.tipo==="nfe"?"NF-e":"NFC-e"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Chave de Acesso"}),e.jsx("p",{className:"text-gray-900 text-xs break-all",children:v.chave||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:(G=v.cliente)==null?void 0:G.nome})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"CPF/CNPJ"}),e.jsx("p",{className:"text-gray-900",children:(L=v.cliente)==null?void 0:L.cpf_cnpj})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),e.jsxs("p",{className:"text-gray-900 text-lg font-bold",children:["R$ ",v.valor.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Situao"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${A(v.status)}`,children:[O(v.status),v.status]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs("button",{onClick:()=>C(v.id,v.numero),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(Ly,{className:"w-5 h-5"}),"Baixar DANFE"]}),e.jsxs("button",{onClick:()=>E(v.id,v.numero),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(Km,{className:"w-5 h-5"}),"Baixar XML"]})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:[e.jsxs("div",{className:"bg-red-50 border-b px-6 py-4 flex items-center gap-3",children:[e.jsx(Yn,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Cancelar Nota Fiscal"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Ateno:"})," O cancelamento de uma nota fiscal  irreversvel e ser enviado para a SEFAZ."]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Nota:"})," #",g.numero," - Srie ",g.serie]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Cliente:"})," ",(Z=g.cliente)==null?void 0:Z.nome]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Justificativa do Cancelamento *"}),e.jsx("textarea",{value:f,onChange:D=>b(D.target.value),placeholder:"Digite o motivo do cancelamento (mnimo 15 caracteres)",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.length,"/15 caracteres"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{y(null),b("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:N,children:"Voltar"}),e.jsx("button",{onClick:T,disabled:N||f.length<15,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Cancelando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Yn,{className:"w-5 h-5"}),"Confirmar Cancelamento"]})})]})]})]})})]})}const ZB=()=>{const{clienteId:t}=Zl(),r=Ht(),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState({tipo_evento:"",pet_id:""}),[u,m]=j.useState(!1);j.useEffect(()=>{x(),h()},[t]);const x=async()=>{try{const p=await U.get(`/clientes/${t}`);s(p.data)}catch(p){console.error("Erro ao carregar cliente:",p)}finally{l(!1)}},h=async()=>{try{const p=await U.get(`/pets/cliente/${t}`);o(p.data)}catch(p){console.error("Erro ao carregar pets:",p)}},v=()=>{d({tipo_evento:"",pet_id:""})};return i?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):a?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/clientes"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(gd,{}),"Voltar para clientes"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Timeline de ",a.nome]}),e.jsx("p",{className:"text-gray-600",children:"Histrico completo de eventos e interaes"})]}),e.jsxs("button",{onClick:()=>m(!u),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(k2,{}),"Filtros"]})]}),u&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),e.jsxs("select",{value:c.tipo_evento,onChange:p=>d({...c,tipo_evento:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"venda",children:" Vendas"}),e.jsx("option",{value:"conta_receber",children:" Contas a Receber"}),e.jsx("option",{value:"pet_cadastro",children:" Cadastro de Pet"}),e.jsx("option",{value:"pet_atualizacao",children:" Atualizao de Pet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pet"}),e.jsxs("select",{value:c.pet_id,onChange:p=>d({...c,pet_id:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",disabled:n.length===0,children:[e.jsx("option",{value:"",children:"Todos os pets"}),n.map(p=>e.jsxs("option",{value:p.id,children:[p.nome," - ",p.especie]},p.id))]})]}),e.jsx("div",{className:"col-span-2 flex justify-end gap-2",children:e.jsxs("button",{onClick:v,className:"px-4 py-2 text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[e.jsx(Oi,{}),"Limpar filtros"]})})]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(O2,{clienteId:parseInt(t),limit:100,showHeader:!1})})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:"Cliente no encontrado"})})};function ez(){const{id:t}=Zl(),r=Ht(),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState([]),[x,h]=j.useState(null),[v,p]=j.useState("entrada"),[g,y]=j.useState({quantidade:"",custo_unitario:"",observacao:"",lote:"",data_validade:"",data_fabricacao:""});j.useEffect(()=>{f()},[t]);const f=async()=>{var L,Z,D;try{l(!0),console.log("Carregando produto ID:",t);const K=await U.get(`/produtos/${t}`);console.log("Produto carregado:",K.data),s(K.data);const R=await U.get(`/estoque/movimentacoes/produto/${t}`);console.log("Movimentaes carregadas:",R.data),o(R.data)}catch(K){console.error("Erro ao carregar dados:",K),console.error("Detalhes do erro:",(L=K.response)==null?void 0:L.data),Ue.error(((D=(Z=K.response)==null?void 0:Z.data)==null?void 0:D.detail)||"Erro ao carregar dados do produto")}finally{l(!1)}},b=(L,Z=null)=>{var D,K;if((a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"&&!Z){Ue.error(` KIT VIRTUAL no permite movimentao manual de estoque.

O estoque deste kit  calculado automaticamente com base nos componentes.

Para alterar o estoque, movimente os produtos componentes individualmente.`,{duration:6e3});return}p(L),h(Z),y(Z?{quantidade:((D=Z.quantidade)==null?void 0:D.toString())||"",custo_unitario:((K=Z.custo_unitario)==null?void 0:K.toString())||"",observacao:Z.observacao||"",lote:Z.lote_id||"",data_validade:"",data_fabricacao:""}:{quantidade:"",custo_unitario:L==="entrada"&&(a==null?void 0:a.preco_custo)||"",observacao:"",lote:"",data_validade:"",data_fabricacao:"",retornar_componentes:!1}),d(!0)},N=()=>{u.length===n.length?m([]):m(n.map(L=>L.id))},_=L=>{u.includes(L)?m(u.filter(Z=>Z!==L)):m([...u,L])},w=async()=>{var L,Z;if(u.length===0){Ue.error("Selecione pelo menos um lanamento");return}if(confirm(`Deseja realmente excluir ${u.length} lanamento(s)?`))try{const K=(await Promise.all(u.map(R=>U.delete(`/estoque/movimentacoes/${R}`)))).flatMap(R=>R.data.componentes_estornados||[]);K.length>0?Ue.success(`${u.length} lanamento(s) excludo(s)!
 ${K.length} componente(s) estornado(s)`,{duration:5e3}):Ue.success(`${u.length} lanamento(s) excludo(s)`),m([]),f()}catch(D){console.error("Erro ao excluir:",D),Ue.error(((Z=(L=D.response)==null?void 0:L.data)==null?void 0:Z.detail)||"Erro ao excluir lanamentos")}},S=async L=>{var Z,D,K;L.preventDefault();try{if(x){const I={quantidade:parseFloat(g.quantidade),custo_unitario:g.custo_unitario?parseFloat(g.custo_unitario):null,observacao:g.observacao||null};await U.patch(`/estoque/movimentacoes/${x.id}`,I),Ue.success("Lanamento atualizado com sucesso!"),d(!1),h(null),f();return}let R="/estoque/",B={produto_id:parseInt(t),quantidade:parseFloat(g.quantidade),custo_unitario:g.custo_unitario?parseFloat(g.custo_unitario):null,observacao:g.observacao||null};if(v==="entrada")R+="entrada",B.tipo="entrada",B.motivo="compra",B.numero_lote=g.lote||null,B.data_validade=g.data_validade||null,B.data_fabricacao=g.data_fabricacao||null;else if(v==="saida")R+="saida",B.tipo="saida",B.motivo="saida_manual",B.numero_lote=g.lote||null,B.data_validade=g.data_validade||null,(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&(B.retornar_componentes=g.retornar_componentes===!0);else if(v==="balanco"){const I=parseFloat(g.quantidade),k=(a==null?void 0:a.estoque_atual)||0,M=I-k;R+=M>=0?"entrada":"saida",B.tipo=M>=0?"entrada":"saida",B.quantidade=Math.abs(M),B.motivo="balanco"}const F=await U.post(R,B);if(console.log("Response da entrada:",F.data),v==="entrada"&&F.data){const{custo_anterior:I,custo_unitario:k,variacao_preco:M}=F.data;if(M&&I!==null&&I!==void 0){let z="Lanamento registrado!";M==="aumento"?(z+=`  Custo aumentou de R$ ${I==null?void 0:I.toFixed(2)} para R$ ${k==null?void 0:k.toFixed(2)}`,Ue.error(z,{duration:5e3})):M==="reducao"?(z+=`  Custo reduziu de R$ ${I==null?void 0:I.toFixed(2)} para R$ ${k==null?void 0:k.toFixed(2)}`,Ue.success(z,{duration:5e3})):M==="estavel"&&(z+=` Custo mantido em R$ ${k==null?void 0:k.toFixed(2)}`,Ue(z,{icon:"",duration:3e3}))}else k?Ue.success(`Lanamento registrado! Custo: R$ ${k==null?void 0:k.toFixed(2)}`,{duration:3e3}):Ue.success("Lanamento registrado com sucesso!")}else if((Z=F.data)!=null&&Z.componentes_sensibilizados&&F.data.componentes_sensibilizados.length>0){const I=F.data.componentes_sensibilizados.length;Ue.success(`Lanamento registrado com sucesso!
 ${I} componente(s) sensibilizado(s)`,{duration:4e3})}else Ue.success("Lanamento registrado com sucesso!");d(!1),f()}catch(R){console.error("Erro ao registrar lanamento:",R),Ue.error(((K=(D=R.response)==null?void 0:D.data)==null?void 0:K.detail)||"Erro ao registrar lanamento")}},C=L=>{if(!L)return"-";const Z=new Date(L);return new Date(Z.getTime()-3*60*60*1e3).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"America/Sao_Paulo"})},E=L=>({compra:"Compra",venda:"Venda",venda_online:"Venda Online",ajuste:"Ajuste",saida_manual:"Sada Manual",devolucao:"Devoluo",perda:"Perda",transferencia:"Transferncia",balanco:"Balano"})[L]||L,T=L=>L.referencia_tipo==="venda"?L.documento&&(L.documento.length===44||L.documento.startsWith("NF"))?{texto:`NF ${L.documento}`,icone:"nf-venda",cor:"text-red-600",link:null}:{texto:`Pedido #${L.referencia_id}`,icone:"pedido",cor:"text-orange-600",link:`/pdv?vendaId=${L.referencia_id}`}:L.motivo==="balanco"?{texto:"Balano",icone:"balanco",cor:"text-blue-600",link:null}:L.tipo==="saida"?{texto:"Sada Manual",icone:"manual",cor:"text-red-600",link:null}:L.tipo==="entrada"&&L.documento&&L.documento.length===44?{texto:`NF ${L.documento.substring(25,34)}`,icone:"nf-entrada",cor:"text-green-600",link:null}:L.tipo==="entrada"&&L.documento?{texto:L.documento,icone:"documento",cor:"text-blue-600",link:`/pdv?vendaId=${L.documento}`}:L.tipo==="entrada"?{texto:"Entrada Manual",icone:"manual",cor:"text-green-600",link:null}:{texto:"Manual",icone:"manual",cor:"text-gray-500",link:null},q=n.filter(L=>L.tipo==="entrada").reduce((L,Z)=>L+parseFloat(Z.quantidade||0),0),A=n.filter(L=>L.tipo==="saida").reduce((L,Z)=>L+parseFloat(Z.quantidade||0),0);if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-gray-500",children:"Carregando..."})});if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-red-500",children:"Produto no encontrado"})});const O=a.estoque_atual||0,V=a.estoque_minimo||0,G=O>V?"text-green-600":O===0?"text-red-600":"text-yellow-600";return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"&&e.jsx("div",{className:"mb-6 bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-indigo-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-indigo-900 mb-1",children:" KIT VIRTUAL - Estoque Calculado Automaticamente"}),e.jsxs("p",{className:"text-sm text-indigo-800",children:["Este  um produto do tipo ",e.jsx("strong",{children:"KIT VIRTUAL"}),". O estoque  calculado automaticamente com base nos componentes que o compem.",e.jsx("br",{}),e.jsx("strong",{children:"No  possvel movimentar o estoque do kit diretamente."})," Para alterar o estoque, movimente os produtos componentes individualmente."]})]})]})}),(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:" KIT FSICO - Estoque Prprio com Sensibilizao"}),e.jsxs("p",{className:"text-sm text-green-800",children:["Este  um produto do tipo ",e.jsx("strong",{children:"KIT FSICO"}),". Possui estoque prprio e independente.",e.jsx("br",{}),e.jsx("strong",{children:"Importante:"})," Ao movimentar o estoque do kit, os estoques dos componentes tambm sero automaticamente sensibilizados na mesma proporo."]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${O>V?"bg-green-100":O===0?"bg-red-100":"bg-yellow-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${G}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>r("/produtos"),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.nome})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["Cdigo: ",e.jsx("span",{className:"font-mono",children:a.codigo||a.sku})]}),a.codigo_barras&&e.jsxs("div",{children:["EAN: ",e.jsx("span",{className:"font-mono",children:a.codigo_barras})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-green-600 font-medium mb-1",children:"Total Entradas"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:q.toFixed(2)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-red-600 font-medium mb-1",children:"Total Sadas"}),e.jsx("div",{className:"text-2xl font-bold text-red-700",children:A.toFixed(2)})]}),e.jsxs("div",{className:`rounded-lg p-3 ${O>V?"bg-blue-50":O===0?"bg-red-50":"bg-yellow-50"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${O>V?"text-blue-600":O===0?"text-red-600":"text-yellow-600"}`,children:"Saldo Atual"}),e.jsxs("div",{className:`text-2xl font-bold ${O>V?"text-blue-700":O===0?"text-red-700":"text-yellow-700"}`,children:[O.toFixed(2)," ",a.unidade||"UN"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"Estoque Mn/Mx"}),e.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[V.toFixed(0)," / ",(a.estoque_maximo||0).toFixed(0)]})]})]}),e.jsx("div",{className:"relative group",children:e.jsxs("button",{onClick:()=>{(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"?Ue.error(`KIT VIRTUAL no permite movimentao manual.

Movimente os componentes individualmente.`,{duration:4e3}):d(!0)},disabled:(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL",className:`px-6 py-2 rounded-lg transition-colors flex items-center gap-2 ${(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="VIRTUAL"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Incluir lanamento"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lanamentos"}),u.length>0&&e.jsxs("button",{onClick:w,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir (",u.length,")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 w-12",children:e.jsx("input",{type:"checkbox",checked:u.length===n.length&&n.length>0,onChange:N,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data e Hora"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entrada"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sada"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preo Venda"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preo Compra"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lote"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Origem"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Observao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma movimentao registrada"})}):n.map((L,Z)=>{const D=T(L),K=Z>0?n[Z-1]:null,R=K&&L.referencia_tipo==="venda"&&K.referencia_tipo==="venda"&&L.referencia_id===K.referencia_id;return e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${R?"border-l-4 border-l-blue-500 bg-blue-50":""}`,onClick:()=>b(L.tipo,L),children:[e.jsx("td",{className:"px-4 py-3 w-12",onClick:B=>B.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:u.includes(L.id),onChange:()=>_(L.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:C(L.created_at)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:L.tipo==="entrada"?e.jsx("span",{className:"text-green-600 font-semibold",children:parseFloat(L.quantidade).toFixed(2)}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:L.tipo==="saida"?e.jsx("span",{className:"text-red-600 font-semibold",children:parseFloat(L.quantidade).toFixed(2)}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900",children:a.preco_venda?`R$ ${a.preco_venda.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right",children:L.custo_unitario?L.variacao_custo?e.jsxs("div",{className:"relative group inline-block",title:`Custo anterior: R$ ${L.variacao_custo.custo_anterior.toFixed(2)}
Custo atual: R$ ${L.variacao_custo.custo_atual.toFixed(2)}
Diferena: R$ ${L.variacao_custo.diferenca_valor.toFixed(2)} (${L.variacao_custo.diferenca_percentual>0?"+":""}${L.variacao_custo.diferenca_percentual.toFixed(1)}%)`,children:[e.jsxs("span",{className:`font-semibold ${L.variacao_custo.tipo==="aumento"?"text-red-600":L.variacao_custo.tipo==="reducao"?"text-green-600":"text-gray-900"}`,children:["R$ ",L.custo_unitario.toFixed(2)]}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-50",children:e.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 whitespace-nowrap shadow-lg",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Variao de Custo"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Anterior: R$ ",L.variacao_custo.custo_anterior.toFixed(2)]}),e.jsxs("div",{children:["Atual: R$ ",L.variacao_custo.custo_atual.toFixed(2)]}),e.jsxs("div",{className:L.variacao_custo.tipo==="aumento"?"text-red-400":"text-green-400",children:[L.variacao_custo.tipo==="aumento"?"":""," R$ ",Math.abs(L.variacao_custo.diferenca_valor).toFixed(2)," (",L.variacao_custo.diferenca_percentual>0?"+":"",L.variacao_custo.diferenca_percentual.toFixed(1),"%)"]})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"border-4 border-transparent border-t-gray-900"})})]})})]}):e.jsxs("span",{className:"text-gray-900",children:["R$ ",L.custo_unitario.toFixed(2)]}):"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:L.lote_info?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:L.lote_info.nome}),L.lote_info.consumido_acumulado!==void 0&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",L.lote_info.consumido_acumulado.toFixed(0),"/",L.lote_info.total_lote.toFixed(0),")"]})]}):L.lote_nome?L.lote_nome:"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",onClick:B=>B.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx("span",{className:"text-blue-600",title:"Mesmo pedido/venda",children:""}),D.link?e.jsx("a",{href:D.link,onClick:B=>{B.preventDefault(),B.stopPropagation(),r(D.link)},className:`${D.cor} font-medium hover:underline cursor-pointer`,children:D.texto}):e.jsx("span",{className:`${D.cor} font-medium`,children:D.texto})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[L.motivo&&L.motivo!=="compra"&&L.motivo!=="venda"&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:E(L.motivo)}),L.observacao]})})]},L.id)})})]})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x?"Editar Lanamento":"Novo Lanamento"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[!x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p("entrada"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v==="entrada"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Entrada"}),e.jsx("button",{type:"button",onClick:()=>p("saida"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v==="saida"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sada"}),e.jsx("button",{type:"button",onClick:()=>p("balanco"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v==="balanco"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Balano"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:v==="balanco"?"Saldo Total *":"Quantidade *"}),e.jsx("input",{type:"number",step:"0.01",value:g.quantidade,onChange:L=>y({...g,quantidade:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),v==="balanco"&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Estoque atual: ",O,". Digite o novo saldo total."]})]}),v==="entrada"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preo de Compra"}),e.jsx("input",{type:"number",step:"0.01",value:g.custo_unitario,onChange:L=>y({...g,custo_unitario:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nmero do Lote ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:g.lote,onChange:L=>y({...g,lote:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-001"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Validade ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:g.data_validade,onChange:L=>y({...g,data_validade:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Fabricao ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:g.data_fabricacao,onChange:L=>y({...g,data_fabricacao:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),v==="saida"&&e.jsxs(e.Fragment,{children:[(a==null?void 0:a.tipo_produto)==="KIT"&&(a==null?void 0:a.tipo_kit)==="FISICO"&&e.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"retornar_componentes",checked:g.retornar_componentes===!0,onChange:L=>y({...g,retornar_componentes:L.target.checked}),className:"mt-1 h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"retornar_componentes",className:"block text-sm font-semibold text-gray-900 cursor-pointer",children:" Desmontar kit e retornar componentes ao estoque"}),e.jsxs("p",{className:"text-xs text-gray-700 mt-1",children:[e.jsx("strong",{children:"Marque esta opo"})," se voc desmontou o kit e quer devolver os produtos unitrios ao estoque."]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[e.jsx("strong",{children:"Deixe desmarcado"})," se houve perda, roubo ou venda do kit montado."]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nmero do Lote ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"text",value:g.lote,onChange:L=>y({...g,lote:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: LOTE-001"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe vazio para usar FIFO automtico"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Data de Validade ",e.jsx("span",{className:"text-gray-400",children:"(opcional)"})]}),e.jsx("input",{type:"date",value:g.data_validade,onChange:L=>y({...g,data_validade:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observao"}),e.jsx("textarea",{value:g.observacao,onChange:L=>y({...g,observacao:L.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes sobre este lanamento..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Incluir"})]})]})]})})]})}const tz=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState("todos"),[u,m]=j.useState("");j.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{const N=await U.get("/produtos/");r(N.data.items||[])}catch(N){console.error("Erro ao carregar produtos:",N),be.error("Erro ao carregar produtos"),r([])}finally{o(!1)}},h=async()=>{var N,_;o(!0);try{const w=u?{descricao:u}:{},S=await U.get("/bling-sync/produtos",{params:w});s(S.data||[]),be.success(` ${(S.data||[]).length} produtos encontrados no Bling`)}catch(w){console.error("Erro ao buscar no Bling:",w),be.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao buscar produtos no Bling"),s([])}finally{o(!1)}},v=async(N,_)=>{var w,S;try{await U.post("/bling-sync/vincular",{produto_id:N,bling_id:_}),be.success(" Produto vinculado ao Bling com sucesso!"),x()}catch(C){be.error(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao vincular produto")}},p=async N=>{var _,w;l(!0);try{const S=await U.post(`/bling-sync/sincronizar-estoque/${N}`,{});be.success(` Estoque sincronizado!
Sistema: ${S.data.estoque_local}  Bling: ${S.data.estoque_bling}`,{duration:4e3}),x()}catch(S){be.error(((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao sincronizar estoque")}finally{l(!1)}},g=async()=>{l(!0);const N=t.filter(S=>S.bling_id);if(N.length===0){be.error("Nenhum produto vinculado ao Bling"),l(!1);return}let _=0,w=0;for(const S of N)try{await U.post(`/bling-sync/sincronizar-estoque/${S.id}`,{}),_++}catch(C){w++,console.error(`Erro ao sincronizar produto ${S.id}:`,C)}be.success(` Sincronizao concluda!
${_} produtos atualizados${w>0?`, ${w} erros`:""}`,{duration:5e3}),carregarDados(),l(!1)},y=async()=>{var N,_;o(!0);try{const w=await U.post("/bling-sync/reconciliar",{});be.success(` Reconciliao concluda!
${w.data.total_processados} produtos processados
${w.data.diferencas_encontradas} diferenas encontradas`,{duration:5e3}),x()}catch(w){be.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao reconciliar estoques")}finally{o(!1)}},f=t.filter(N=>c==="sincronizados"?N.bling_id:c==="nao_sincronizados"?!N.bling_id:!0),b={total:t.length,sincronizados:t.filter(N=>N.bling_id).length,naoSincronizados:t.filter(N=>!N.bling_id).length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Sincronizao Bling"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie a integrao dos produtos com o Bling ERP"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.sincronizados}),e.jsx("div",{className:"text-sm text-gray-600",children:"Vinculados ao Bling"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:b.naoSincronizados}),e.jsx("div",{className:"text-sm text-gray-600",children:"No Vinculados"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[b.total>0?(b.sincronizados/b.total*100).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Taxa de Sincronizao"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:" Aes Rpidas"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:g,disabled:i||b.sincronizados===0,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:i?" Sincronizando...":` Sincronizar Todos (${b.sincronizados})`}),e.jsx("button",{onClick:y,disabled:n||b.sincronizados===0,className:"flex-1 bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:n?" Reconciliando...":" Reconciliar Estoques"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:[e.jsx("strong",{children:"Sincronizar:"})," Atualiza o estoque do Bling com os valores do sistema.",e.jsx("strong",{className:"ml-4",children:"Reconciliar:"})," Compara e identifica diferenas entre os estoques."]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:" Buscar Produtos no Bling"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:u,onChange:N=>m(N.target.value),placeholder:"Digite o nome do produto (deixe vazio para buscar todos)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyPress:N=>N.key==="Enter"&&h()}),e.jsx("button",{onClick:h,disabled:n,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400",children:n?" Buscando...":" Buscar"})]}),a.length>0&&e.jsxs("div",{className:"mt-4 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-2 font-semibold border-b",children:[a.length," produtos encontrados no Bling"]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:a.map(N=>e.jsxs("div",{className:"px-4 py-3 border-b hover:bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:N.descricao}),e.jsxs("div",{className:"text-sm text-gray-600",children:["ID Bling: ",N.id," | Cdigo: ",N.codigo," | Estoque: ",N.estoque]})]}),e.jsxs("select",{onChange:_=>_.target.value&&v(parseInt(_.target.value),N.id),className:"px-3 py-2 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Vincular ao produto..."}),t.filter(_=>!_.bling_id).map(_=>e.jsxs("option",{value:_.id,children:[_.codigo," - ",_.nome]},_.id))]})]},N.id))})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>d("todos"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="todos"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todos (",b.total,")"]}),e.jsxs("button",{onClick:()=>d("sincronizados"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="sincronizados"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Sincronizados (",b.sincronizados,")"]}),e.jsxs("button",{onClick:()=>d("nao_sincronizados"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${c==="nao_sincronizados"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" No Sincronizados (",b.naoSincronizados,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Estoque Local"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"ID Bling"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:n&&f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:" Carregando produtos..."})}):f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Nenhum produto encontrado com os filtros selecionados"})}):f.map(N=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-mono text-sm",children:N.codigo})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold",children:N.nome}),N.categoria&&e.jsx("div",{className:"text-xs text-gray-500",children:N.categoria})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`font-semibold ${(N.estoque_atual||0)<=(N.estoque_minimo||0)?"text-red-600":"text-green-600"}`,children:N.estoque_atual||0})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold",children:N.bling_id}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold",children:" VINCULADO"}):e.jsx("span",{className:"inline-block bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs font-semibold",children:" NO VINCULADO"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:N.bling_id?e.jsx("button",{onClick:()=>p(N.id),disabled:i,className:"text-blue-600 hover:text-blue-800 font-semibold text-sm disabled:text-gray-400",title:"Sincronizar estoque com Bling",children:" Sync"}):e.jsx("span",{className:"text-gray-400 text-sm",children:""})})]},N.id))})]})})]})},rz=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[x,h]=j.useState(null),[v,p]=j.useState(null),[g,y]=j.useState(!1),[f,b]=j.useState(!1),[N,_]=j.useState(null),[w,S]=j.useState({email:"",whatsapp:"",formatos:{pdf:!0,excel:!1}}),[C,E]=j.useState(!1),[T,q]=j.useState([]),[A,O]=j.useState(!1),[V,G]=j.useState(90),[L,Z]=j.useState(30),[D,K]=j.useState(!1),[R,B]=j.useState(!0),[F,I]=j.useState([]),[k,M]=j.useState({}),[z,oe]=j.useState({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),[W,ae]=j.useState({produto_id:"",quantidade_pedida:"",preco_unitario:""}),[ee,ce]=j.useState(""),[ie,we]=j.useState("");j.useEffect(()=>{Se()},[]);const Se=async()=>{try{const[le,ve]=await Promise.all([U.get("/pedidos-compra/"),U.get("/clientes/?tipo_cadastro=fornecedor&apenas_ativos=true")]),Re=Array.isArray(le.data)?le.data:le.data.items||le.data.pedidos||[],Le=Array.isArray(ve.data)?ve.data:ve.data.items||ve.data.clientes||[];r(Re),s(Le)}catch(le){console.error("Erro ao carregar dados:",le),be.error("Erro ao carregar dados")}},me=async le=>{if(!le){o([]);return}try{const ve=await U.get(`/produtos/?fornecedor_id=${le}`);let Re;Array.isArray(ve.data)?Re=ve.data:ve.data.items?Re=ve.data.items:ve.data.produtos?Re=ve.data.produtos:Re=[],Re.length===0&&be.warning(" Este fornecedor no possui produtos vinculados. Edite os produtos para vincular ao fornecedor."),o(Re)}catch(ve){console.error("Erro ao carregar produtos:",ve),be.error("Erro ao carregar produtos do fornecedor")}},_e=le=>{const ve=n.find(Re=>Re.id===parseInt(le));ve&&(we(ve.nome),ve.preco_custo?ae({...W,produto_id:le,preco_unitario:ve.preco_custo.toFixed(2)}):ae({...W,produto_id:le}))},je=()=>{if(!W.produto_id||!W.quantidade_pedida||!W.preco_unitario){be.error("Preencha todos os campos do item");return}const le=n.find(Ne=>Ne.id===parseInt(W.produto_id)),ve=parseFloat(W.quantidade_pedida),Re=parseFloat(W.preco_unitario),Le=parseInt(W.produto_id),Q=z.itens.findIndex(Ne=>Ne.produto_id===Le);if(Q!==-1){const Ne=z.itens[Q];if(window.confirm(` O produto "${le.nome}" j est no pedido!

Quantidade atual: ${Ne.quantidade_pedida}
Preo atual: R$ ${Ne.preco_unitario.toFixed(2)}

Nova quantidade: ${ve}
Novo preo: R$ ${Re.toFixed(2)}

Deseja SOMAR a quantidade ao item existente?

 OK = Somar quantidade (${Ne.quantidade_pedida} + ${ve} = ${Ne.quantidade_pedida+ve})
 CANCELAR = No adicionar`)){const Ve=[...z.itens];Ve[Q]={...Ne,quantidade_pedida:Ne.quantidade_pedida+ve,preco_unitario:Re,total:(Ne.quantidade_pedida+ve)*Re},oe({...z,itens:Ve}),be.success(` Quantidade somada! Total: ${Ne.quantidade_pedida+ve}`)}else be.info("Adio cancelada");we(""),ae({produto_id:"",quantidade_pedida:"",preco_unitario:""});return}oe({...z,itens:[...z.itens,{produto_id:Le,produto_nome:le.nome,quantidade_pedida:ve,preco_unitario:Re,desconto_item:0,total:ve*Re}]}),we(""),ae({produto_id:"",quantidade_pedida:"",preco_unitario:""})},lt=le=>{oe({...z,itens:z.itens.filter((ve,Re)=>Re!==le)})},Ke=()=>{const le=z.itens.reduce((Le,Q)=>Le+Q.total,0),ve=parseFloat(z.valor_frete||0),Re=parseFloat(z.valor_desconto||0);return le+ve-Re},ut=async()=>{if(!z.fornecedor_id){be.error("Selecione um fornecedor primeiro");return}O(!0);try{const le=await U.get(`/pedidos-compra/sugestao/${z.fornecedor_id}`,{params:{periodo_dias:V,dias_cobertura:L,apenas_criticos:D,incluir_alerta:R}});q(le.data.sugestoes||[]),I([]),M({}),le.data.sugestoes.length===0?be.info("Nenhuma sugesto encontrada com os filtros aplicados"):be.success(`${le.data.sugestoes.length} produtos analisados`)}catch(le){console.error("Erro ao buscar sugestes:",le),be.error("Erro ao gerar sugestes")}finally{O(!1)}},Ee=le=>{I(ve=>ve.includes(le)?ve.filter(Re=>Re!==le):[...ve,le])},Me=(le,ve)=>{M(Re=>({...Re,[le]:parseFloat(ve)||0}))},Ae=le=>k[le.produto_id]!==void 0?k[le.produto_id]:le.quantidade_sugerida,ct=()=>{E(!1),I([]),M({})},bt=()=>{const le=T.filter(ve=>ve.prioridade==="CRTICO"&&ve.quantidade_sugerida>0).map(ve=>ve.produto_id);I(le)},Rt=()=>{if(F.length===0){be.error("Selecione pelo menos um produto");return}const ve=T.filter(Re=>F.includes(Re.produto_id)).map(Re=>{const Le=Ae(Re);return{produto_id:Re.produto_id,produto_nome:Re.produto_nome,quantidade_pedida:Math.ceil(Le),preco_unitario:Re.preco_unitario,desconto_item:0,total:Math.ceil(Le)*Re.preco_unitario}});oe({...z,itens:[...z.itens,...ve]}),be.success(`${ve.length} produtos adicionados ao pedido`),ct()},Ct=async le=>{var ve,Re;if(le.preventDefault(),z.itens.length===0){be.error("Adicione pelo menos 1 item ao pedido");return}l(!0);try{const Le={...z,data_prevista_entrega:z.data_prevista_entrega?`${z.data_prevista_entrega}T12:00:00`:null};await U.post("/pedidos-compra/",Le),be.success(" Pedido criado com sucesso!"),d(!1),oe({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),Se()}catch(Le){be.error(((Re=(ve=Le.response)==null?void 0:ve.data)==null?void 0:Re.detail)||"Erro ao criar pedido")}finally{l(!1)}},It=async le=>{_(le),S({email:"",whatsapp:"",formatos:{pdf:!0,excel:!1}}),b(!0)},$t=async()=>{var le,ve;if(!w.email&&!w.whatsapp){be.error("Informe um e-mail ou WhatsApp");return}if(!w.formatos.pdf&&!w.formatos.excel){be.error("Selecione pelo menos um formato (PDF ou Excel)");return}try{await U.post(`/pedidos-compra/${N}/enviar`,{email:w.email,whatsapp:w.whatsapp,formatos:w.formatos}),be.success(" Pedido marcado como enviado!"),b(!1),Se()}catch(Re){be.error(((ve=(le=Re.response)==null?void 0:le.data)==null?void 0:ve.detail)||"Erro ao enviar pedido")}},ge=async()=>{var le,ve;try{await U.post(`/pedidos-compra/${N}/enviar`,{envio_manual:!0}),be.success(" Pedido marcado como enviado manualmente!"),b(!1),Se()}catch(Re){be.error(((ve=(le=Re.response)==null?void 0:le.data)==null?void 0:ve.detail)||"Erro ao marcar pedido")}},$e=async le=>{var ve,Re;try{await U.post(`/pedidos-compra/${le}/confirmar`,{}),be.success(" Pedido confirmado!"),Se()}catch(Le){be.error(((Re=(ve=Le.response)==null?void 0:ve.data)==null?void 0:Re.detail)||"Erro ao confirmar pedido")}},Ie=async le=>{try{const ve=await U.get(`/pedidos-compra/${le}/export/pdf`,{responseType:"blob"}),Re=window.URL.createObjectURL(new Blob([ve.data])),Le=document.createElement("a");Le.href=Re,Le.setAttribute("download",`pedido_${le}.pdf`),document.body.appendChild(Le),Le.click(),Le.remove(),be.success(" PDF exportado com sucesso!")}catch{be.error("Erro ao exportar PDF")}},it=async le=>{try{const ve=await U.get(`/pedidos-compra/${le}/export/excel`,{responseType:"blob"}),Re=window.URL.createObjectURL(new Blob([ve.data])),Le=document.createElement("a");Le.href=Re,Le.setAttribute("download",`pedido_${le}.xlsx`),document.body.appendChild(Le),Le.click(),Le.remove(),be.success(" Excel exportado com sucesso!")}catch{be.error("Erro ao exportar Excel")}},rt=async le=>{try{const ve=await U.get(`/pedidos-compra/${le.id}`);p(ve.data),y(!0)}catch{be.error("Erro ao carregar detalhes do pedido")}},xe=async le=>{var ve,Re;if(confirm(" Deseja reverter o status deste pedido para a etapa anterior?"))try{const Le=await U.post(`/pedidos-compra/${le}/reverter`,{});be.success(` Status revertido: ${Le.data.status_anterior}  ${Le.data.status_atual}`),Se()}catch(Le){be.error(((Re=(ve=Le.response)==null?void 0:ve.data)==null?void 0:Re.detail)||"Erro ao reverter status")}},Oe=async le=>{var ve,Re,Le;if(le.status!=="rascunho"){be.error(" Apenas pedidos em rascunho podem ser editados");return}try{const Ne=(await U.get(`/pedidos-compra/${le.id}`)).data;m(!0),h(Ne),oe({fornecedor_id:((ve=Ne.fornecedor_id)==null?void 0:ve.toString())||"",data_prevista_entrega:Ne.data_prevista_entrega?new Date(Ne.data_prevista_entrega).toISOString().split("T")[0]:"",valor_frete:((Re=Ne.valor_frete)==null?void 0:Re.toString())||"0",valor_desconto:((Le=Ne.valor_desconto)==null?void 0:Le.toString())||"0",observacoes:Ne.observacoes||"",itens:Ne.itens.map(Pe=>({produto_id:Pe.produto_id,produto_nome:Pe.produto_nome||`Produto ${Pe.produto_id}`,quantidade_pedida:Pe.quantidade_pedida,preco_unitario:Pe.preco_unitario,desconto_item:Pe.desconto_item||0,total:Pe.quantidade_pedida*Pe.preco_unitario-(Pe.desconto_item||0)}))}),Ne.fornecedor_id&&me(Ne.fornecedor_id),d(!0),be.success(" Modo de edio ativado")}catch{be.error("Erro ao carregar pedido para edio")}},Ye=async le=>{var ve,Re;if(le.preventDefault(),z.itens.length===0){be.error(" Adicione pelo menos um item ao pedido");return}try{l(!0);const Le={...z,fornecedor_id:parseInt(z.fornecedor_id),valor_frete:parseFloat(z.valor_frete),valor_desconto:parseFloat(z.valor_desconto),data_prevista_entrega:z.data_prevista_entrega?`${z.data_prevista_entrega}T12:00:00`:null,itens:z.itens.map(Q=>({produto_id:Q.produto_id,quantidade_pedida:parseFloat(Q.quantidade_pedida),preco_unitario:parseFloat(Q.preco_unitario),desconto_item:parseFloat(Q.desconto_item||0)}))};await U.put(`/pedidos-compra/${x.id}`,Le),be.success(" Pedido atualizado com sucesso!"),d(!1),m(!1),h(null),oe({fornecedor_id:"",data_prevista_entrega:"",valor_frete:"0",valor_desconto:"0",observacoes:"",itens:[]}),Se()}catch(Le){be.error(((Re=(ve=Le.response)==null?void 0:ve.data)==null?void 0:Re.detail)||"Erro ao atualizar pedido")}finally{l(!1)}},Y=async le=>{try{const ve=await U.get(`/pedidos-compra/${le.id}`);p(ve.data),y(!0)}catch{be.error("Erro ao carregar detalhes do pedido")}},ue=async le=>{var ve,Re;try{await U.post(`/pedidos-compra/${v.id}/receber`,{itens:le}),be.success(" Recebimento processado com sucesso!"),y(!1),p(null),Se()}catch(Le){be.error(((Re=(ve=Le.response)==null?void 0:ve.data)==null?void 0:Re.detail)||"Erro ao processar recebimento")}},qe=le=>{const ve={rascunho:"bg-gray-200 text-gray-800",enviado:"bg-blue-200 text-blue-800",confirmado:"bg-green-200 text-green-800",recebido_parcial:"bg-yellow-200 text-yellow-800",recebido_total:"bg-green-500 text-white",cancelado:"bg-red-200 text-red-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${ve[le]||"bg-gray-200"}`,children:le.replace("_"," ").toUpperCase()})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Pedidos de Compra"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie seus pedidos aos fornecedores"})]}),e.jsx("button",{onClick:()=>d(!c),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:c?" Cancelar":" Novo Pedido"})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:u?" Editar Pedido":"Novo Pedido de Compra"}),e.jsx("button",{type:"button",onClick:()=>{d(!1),m(!1),h(null)},className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("form",{onSubmit:u?Ye:Ct,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor *"}),e.jsx("input",{list:"fornecedores-list",value:ee,onChange:le=>{const ve=le.target.value;ce(ve);const Re=a.find(Le=>Le.nome===ve);Re?(oe({...z,fornecedor_id:Re.id.toString(),itens:[]}),ae({produto_id:"",quantidade_pedida:"",preco_unitario:""}),me(Re.id)):(oe({...z,fornecedor_id:"",itens:[]}),o([]))},placeholder:"Digite ou selecione o fornecedor",required:!!z.fornecedor_id,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),e.jsx("datalist",{id:"fornecedores-list",children:a.map(le=>e.jsx("option",{value:le.nome,children:le.cpf_cnpj?`- ${le.cpf_cnpj}`:""},le.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Digite ou selecione um fornecedor para carregar seus produtos"}),z.fornecedor_id&&e.jsx("button",{type:"button",onClick:()=>{E(!0),ut()},className:"mt-2 w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 transition-all flex items-center justify-center gap-2",children:" Sugesto Inteligente de Pedido"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Prevista Entrega"}),e.jsx("input",{type:"date",value:z.data_prevista_entrega,onChange:le=>oe({...z,data_prevista_entrega:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Itens do Pedido"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsx("input",{list:"produtos-list",value:ie,onChange:le=>{const ve=le.target.value;we(ve);const Re=n.find(Le=>Le.nome===ve);Re?_e(Re.id.toString()):ae({...W,produto_id:""})},placeholder:z.fornecedor_id?"Digite ou selecione o produto":"Selecione um fornecedor primeiro",disabled:!z.fornecedor_id,className:"col-span-2 px-4 py-2 border border-gray-300 rounded-lg disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),e.jsx("datalist",{id:"produtos-list",children:n.map(le=>e.jsx("option",{value:le.nome,children:`SKU: ${le.sku||le.codigo||"N/A"} | Barras: ${le.codigo_barras||"N/A"} | Estoque: ${le.estoque_atual||0}`},le.id))}),e.jsx("input",{type:"number",step:"0.01",placeholder:"Quantidade",value:W.quantidade_pedida,onChange:le=>ae({...W,quantidade_pedida:le.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"Preo",value:W.preco_unitario,onChange:le=>ae({...W,preco_unitario:le.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:je,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:""})]})]}),z.itens.length>0&&e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold",children:"Produto"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Preo"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Total"}),e.jsx("th",{className:"px-4 py-2"})]})}),e.jsx("tbody",{children:z.itens.map((le,ve)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2",children:le.produto_nome}),e.jsx("td",{className:"px-4 py-2 text-right",children:le.quantidade_pedida}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["R$ ",le.preco_unitario.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2 text-right font-semibold",children:["R$ ",le.total.toFixed(2)]}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{type:"button",onClick:()=>lt(ve),className:"text-red-600 hover:text-red-800",children:""})})]},ve))})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frete (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:z.valor_frete,onChange:le=>oe({...z,valor_frete:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desconto (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:z.valor_desconto,onChange:le=>oe({...z,valor_desconto:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",Ke().toFixed(2)]})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400",children:i?" Processando...":u?" Salvar Alteraes":" Criar Pedido"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Nmero"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:t.map(le=>e.jsxs("tr",{className:`border-t hover:bg-gray-50 ${le.status==="rascunho"?"cursor-pointer":""}`,onClick:()=>le.status==="rascunho"&&Oe(le),title:le.status==="rascunho"?"Clique para editar":"",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[le.numero_pedido,le.foi_alterado_apos_envio&&e.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded font-semibold",title:"Este pedido foi alterado aps o envio",children:" Alterado"})]})}),e.jsx("td",{className:"px-4 py-3",children:le.fornecedor_id}),e.jsx("td",{className:"px-4 py-3",children:new Date(le.data_pedido).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",le.valor_final.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:qe(le.status)}),e.jsx("td",{className:"px-4 py-3 text-center",onClick:ve=>ve.stopPropagation(),children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>rt(le),className:"px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-xs font-semibold",title:"Ver detalhes completos do pedido",children:" Ver"}),e.jsx("button",{onClick:()=>Ie(le.id),className:"px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-xs font-semibold",title:"Exportar PDF",children:" PDF"}),e.jsx("button",{onClick:()=>it(le.id),className:"px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 text-xs font-semibold",title:"Exportar Excel",children:" Excel"}),le.status==="rascunho"&&e.jsx("button",{onClick:()=>It(le.id),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-semibold",title:"Enviar pedido ao fornecedor",children:" Enviar"}),le.status==="enviado"&&e.jsx("button",{onClick:()=>$e(le.id),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-semibold",title:"Confirmar recebimento do pedido pelo fornecedor",children:" Confirmar"}),(le.status==="confirmado"||le.status==="recebido_parcial")&&e.jsx("button",{onClick:()=>Y(le),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-semibold",title:"Registrar entrada de produtos no estoque",children:" Receber"}),le.status!=="rascunho"&&le.status!=="recebido_total"&&e.jsx("button",{onClick:()=>xe(le.id),className:"px-2 py-1 bg-orange-100 text-orange-700 rounded hover:bg-orange-200 text-xs font-semibold",title:"Reverter para status anterior",children:" Reverter"})]})})]},le.id))})]})}),g&&v&&e.jsx(az,{pedido:v,onClose:()=>{y(!1),p(null)},onReceber:ue}),f&&e.jsx(sz,{pedidoId:N,onClose:()=>b(!1),onEnviar:$t,onEnvioManual:ge,dadosEnvio:w,setDadosEnvio:S}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:" Sugesto Inteligente de Pedido"}),e.jsx("p",{className:"text-purple-100",children:"Anlise baseada em vendas e estoque atual"})]}),e.jsx("button",{onClick:ct,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2",children:""})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-purple-100 mb-1",children:"Perodo de Anlise"}),e.jsxs("select",{value:V,onChange:le=>G(parseInt(le.target.value)),className:"w-full px-3 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-purple-300",children:[e.jsx("option",{value:30,children:"ltimos 30 dias"}),e.jsx("option",{value:60,children:"ltimos 60 dias"}),e.jsx("option",{value:90,children:"ltimos 90 dias"}),e.jsx("option",{value:180,children:"ltimos 180 dias"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-purple-100 mb-1",children:"Cobertura de Estoque"}),e.jsxs("select",{value:L,onChange:le=>Z(parseInt(le.target.value)),className:"w-full px-3 py-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-purple-300",children:[e.jsx("option",{value:15,children:"15 dias"}),e.jsx("option",{value:30,children:"30 dias"}),e.jsx("option",{value:45,children:"45 dias"}),e.jsx("option",{value:60,children:"60 dias"}),e.jsx("option",{value:90,children:"90 dias"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:le=>K(le.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Apenas Crticos"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:le=>B(le.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Incluir Alertas"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ut,disabled:A,className:"w-full bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 disabled:opacity-50",children:A?" Analisando...":" Atualizar"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Analisando produtos e calculando sugestes..."})]})}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma sugesto encontrada com os filtros aplicados"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Tente ajustar os filtros acima"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex gap-3",children:[e.jsx("button",{onClick:bt,className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold hover:bg-red-200",children:" Selecionar Todos Crticos"}),e.jsx("div",{className:"flex-1"}),e.jsxs("span",{className:"text-gray-600",children:[F.length," de ",T.length," produtos selecionados"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:e.jsx("input",{type:"checkbox",onChange:le=>{le.target.checked?I(T.map(ve=>ve.produto_id)):I([])},checked:F.length===T.length,className:"w-4 h-4 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Prioridade"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Estoque"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Consumo/dia"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Dias Restantes"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Qtd Sugerida"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Preo Unit."}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Tendncia"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(le=>e.jsxs("tr",{className:`hover:bg-gray-50 ${F.includes(le.produto_id)?"bg-purple-50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:F.includes(le.produto_id),onChange:()=>Ee(le.produto_id),className:"w-4 h-4 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${le.prioridade==="CRTICO"?"bg-red-100 text-red-700":le.prioridade==="ALERTA"?"bg-yellow-100 text-yellow-700":le.prioridade==="ATENO"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:le.prioridade})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:le.produto_nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",le.produto_sku||"N/A"," | Barras: ",le.produto_codigo_barras||"N/A"]}),le.observacao&&e.jsx("div",{className:"text-xs text-gray-600 mt-1 italic",children:le.observacao})]})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("div",{className:"font-medium",children:le.estoque_atual}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Mn: ",le.estoque_minimo]})]}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:le.consumo_diario.toFixed(2)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:`font-semibold ${le.dias_estoque&&le.dias_estoque<7?"text-red-600":le.dias_estoque&&le.dias_estoque<14?"text-yellow-600":"text-green-600"}`,children:le.dias_estoque?`${le.dias_estoque} dias`:""})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("input",{type:"number",min:"0",step:"1",value:Math.ceil(Ae(le)),onChange:ve=>Me(le.produto_id,ve.target.value),className:"w-20 px-2 py-1 text-right font-bold text-purple-600 border rounded focus:ring-2 focus:ring-purple-300"})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:["R$ ",le.preco_unitario.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",(Ae(le)*le.preco_unitario).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`text-xs ${le.tendencia==="CRESCIMENTO"?"text-green-600":le.tendencia==="QUEDA"?"text-red-600":"text-gray-600"}`,children:[le.tendencia==="CRESCIMENTO"?"":le.tendencia==="QUEDA"?"":le.tendencia==="ESTVEL"?"":"",le.tendencia]})})]},le.produto_id))})]})})]})}),!A&&T.length>0&&e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Resumo da Sugesto:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[" ",e.jsx("strong",{children:T.filter(le=>le.prioridade==="CRTICO").length})," crticos"]}),e.jsxs("div",{children:[" ",e.jsx("strong",{children:T.filter(le=>le.prioridade==="ALERTA").length})," em alerta"]}),e.jsxs("div",{children:[" Total: ",e.jsxs("strong",{children:["R$ ",T.filter(le=>F.includes(le.produto_id)).reduce((le,ve)=>le+Ae(ve)*ve.preco_unitario,0).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ct,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-100",children:"Cancelar"}),e.jsxs("button",{onClick:Rt,disabled:F.length===0,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[" Adicionar ",F.length," Produtos ao Pedido"]})]})]})})]})})]})},az=({pedido:t,onClose:r,onReceber:a})=>{const[s,n]=j.useState(t.itens.map(i=>({item_id:i.id,quantidade_recebida:i.quantidade_pedida-i.quantidade_recebida,max:i.quantidade_pedida-i.quantidade_recebida}))),o=()=>{const i=s.filter(l=>l.quantidade_recebida>0).map(l=>({item_id:l.item_id,quantidade_recebida:parseFloat(l.quantidade_recebida)}));if(i.length===0){be.error("Informe a quantidade recebida de pelo menos 1 item");return}a(i)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[" Receber Pedido ",t.numero_pedido]}),e.jsx("div",{className:"space-y-4",children:t.itens.map((i,l)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold mb-2",children:i.produto_nome}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Pedido:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.quantidade_pedida})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"J Recebido:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.quantidade_recebida})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Pendente:"}),e.jsx("span",{className:"ml-2 font-semibold text-orange-600",children:i.quantidade_pedida-i.quantidade_recebida})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade a Receber"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:s[l].max,value:s[l].quantidade_recebida,onChange:c=>{const d=parseFloat(c.target.value)||0,u=[...s];u[l].quantidade_recebida=Math.min(d,u[l].max),n(u)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]},i.id))}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:o,className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700",children:" Confirmar Recebimento"}),e.jsx("button",{onClick:r,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:" Cancelar"})]})]})})},sz=({pedidoId:t,onClose:r,onEnviar:a,onEnvioManual:s,dadosEnvio:n,setDadosEnvio:o})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Enviar Pedido ao Fornecedor"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail do Fornecedor"}),e.jsx("input",{type:"email",value:n.email,onChange:i=>o({...n,email:i.target.value}),placeholder:"fornecedor@exemplo.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["WhatsApp (futuro)",e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Em breve)"})]}),e.jsx("input",{type:"tel",value:n.whatsapp,onChange:i=>o({...n,whatsapp:i.target.value}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formatos para Envio"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.formatos.pdf,onChange:i=>o({...n,formatos:{...n.formatos,pdf:i.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm",children:" PDF"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.formatos.excel,onChange:i=>o({...n,formatos:{...n.formatos,excel:i.target.checked}}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"ml-2 text-sm",children:" Excel"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx("button",{onClick:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:" Enviar por E-mail"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou"})})]}),e.jsx("button",{onClick:s,className:"w-full bg-gray-600 text-white py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:" J enviei manualmente"}),e.jsx("button",{onClick:r,className:"w-full border border-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-50",children:" Cancelar"})]})]})]})}),nz=()=>{var Re,Le;const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,v]=j.useState(!1),[p,g]=j.useState(!1),[y,f]=j.useState(!1),[b,N]=j.useState(null),[_,w]=j.useState(!1),[S,C]=j.useState([]),[E,T]=j.useState(null),[q,A]=j.useState(!1),[O,V]=j.useState(!1),[G,L]=j.useState(null),[Z,D]=j.useState({}),[K,R]=j.useState("todos"),[B,F]=j.useState("loja"),[I,k]=j.useState({}),[M,z]=j.useState(!1),[oe,W]=j.useState(null),[ae,ee]=j.useState(null),[ce,ie]=j.useState(!1),[we,Se]=j.useState({sku:"",nome:"",descricao:"",preco_custo:"",preco_venda:"",margem_lucro:"",estoque_minimo:10,estoque_maximo:100}),[me,_e]=j.useState({});j.useEffect(()=>{console.log(" [EntradaXML] Componente montado, iniciando carregamento..."),je()},[]);const je=async()=>{var Q,Ne,Pe,Ve,ot,xt,pt,Nt,Ge;console.log(" [EntradaXML] Carregando dados...");try{const Dt=localStorage.getItem("token");console.log(" [EntradaXML] Token obtido:",Dt?"SIM":"NO");const jr={Authorization:`Bearer ${Dt}`};console.log(" [EntradaXML] Fazendo requisies para:",{notasEntrada:"/notas-entrada/",produtos:"/produtos/"});const[J,P]=await Promise.all([U.get("/notas-entrada/",{headers:jr}),U.get("/produtos/",{headers:jr,params:{ativo:null}})]);console.log(" [EntradaXML] Dados carregados:",{notasEntrada:((Q=J.data)==null?void 0:Q.length)||0,produtos:((Pe=(Ne=P.data)==null?void 0:Ne.items)==null?void 0:Pe.length)||((Ve=P.data)==null?void 0:Ve.length)||0});const H=((ot=P.data)==null?void 0:ot.items)||P.data,te=H.filter(de=>de.ativo===!0).length,ne=H.filter(de=>de.ativo===!1).length;console.log(" [EntradaXML] Produtos por status:",{ativos:te,inativos:ne,total:H.length}),a(J.data),n(H)}catch(Dt){console.error(" [EntradaXML] ERRO ao carregar dados:"),console.error("  - Mensagem:",Dt.message),console.error("  - Response:",(xt=Dt.response)==null?void 0:xt.data),console.error("  - Status:",(pt=Dt.response)==null?void 0:pt.status),console.error("  - Stack:",Dt.stack),be.error(`Erro ao carregar dados: ${((Ge=(Nt=Dt.response)==null?void 0:Nt.data)==null?void 0:Ge.detail)||Dt.message}`)}},lt=async Q=>{var Ve,ot,xt,pt,Nt;const Ne=Q.target.files[0];if(console.log(" [EntradaXML] Upload iniciado"),console.log("  - Arquivo selecionado:",Ne==null?void 0:Ne.name),console.log("  - Tamanho:",Ne==null?void 0:Ne.size,"bytes"),console.log("  - Tipo:",Ne==null?void 0:Ne.type),!Ne){console.warn(" [EntradaXML] Nenhum arquivo selecionado");return}if(!Ne.name.toLowerCase().endsWith(".xml")){console.error(" [EntradaXML] Arquivo no  XML:",Ne.name),be.error(" Por favor, selecione um arquivo XML");return}c(!0);const Pe=new FormData;Pe.append("file",Ne),console.log(" [EntradaXML] Enviando arquivo para:","/notas-entrada/upload"),console.log(" [EntradaXML] FormData preparado:",Ne.name,Ne.size,"bytes");try{const Ge=await U.post("/notas-entrada/upload",Pe,{headers:{"Content-Type":"multipart/form-data"}});console.log(" [EntradaXML] Upload bem-sucedido!"),console.log("  - Response data:",Ge.data);const Dt=Ge.data.produtos_vinculados||0,jr=Ge.data.itens_total||0;console.log(` [EntradaXML] Produtos vinculados: ${Dt}/${jr}`),Ge.data.fornecedor_criado_automaticamente&&be.success(` Novo fornecedor cadastrado: ${Ge.data.fornecedor}`,{duration:4e3}),Ge.data.produtos_reativados>0&&be.success(` ${Ge.data.produtos_reativados} produto(s) inativo(s) reativado(s) automaticamente`,{duration:4e3}),be.success(` NF-e ${Ge.data.numero_nota} processada! ${Dt}/${jr} produtos vinculados automaticamente`,{duration:5e3}),je(),Q.target.value=""}catch(Ge){console.error(" [EntradaXML] ERRO no upload:"),console.error("  - Mensagem:",Ge.message),console.error("  - Response data:",(Ve=Ge.response)==null?void 0:Ve.data),console.error("  - Status:",(ot=Ge.response)==null?void 0:ot.status),console.error("  - Headers:",(xt=Ge.response)==null?void 0:xt.headers),console.error("  - Stack completo:",Ge.stack);const Dt=((Nt=(pt=Ge.response)==null?void 0:pt.data)==null?void 0:Nt.detail)||Ge.message||"Erro ao processar XML da NF-e";console.error("  - Mensagem para usurio:",Dt),be.error(` ${Dt}`)}finally{c(!1),console.log(" [EntradaXML] Upload finalizado")}},Ke=async Q=>{var ot,xt;const Ne=Array.from(Q.target.files);if(console.log(" [EntradaXML] Upload em lote iniciado -",Ne.length,"arquivos"),Ne.length===0){console.warn(" [EntradaXML] Nenhum arquivo selecionado");return}const Pe=Ne.filter(pt=>!pt.name.toLowerCase().endsWith(".xml"));if(Pe.length>0){be.error(` ${Pe.length} arquivo(s) no so XML: ${Pe.map(pt=>pt.name).join(", ")}`);return}g(!0),f(!0),N(null);const Ve=new FormData;Ne.forEach(pt=>{Ve.append("files",pt)}),console.log(" [EntradaXML] Enviando",Ne.length,"arquivos para:","/notas-entrada/upload-lote");try{const pt=await U.post("/notas-entrada/upload-lote",Ve);console.log(" [EntradaXML] Upload em lote bem-sucedido!"),console.log("  - Response:",pt.data),N(pt.data),pt.data.sucessos>0&&be.success(` ${pt.data.sucessos}/${pt.data.total_arquivos} nota(s) processada(s) com sucesso!`,{duration:5e3}),pt.data.erros>0&&be.error(` ${pt.data.erros}/${pt.data.total_arquivos} nota(s) com erro`,{duration:5e3}),je(),Q.target.value=""}catch(pt){console.error(" [EntradaXML] ERRO no upload em lote:",pt),be.error(` Erro ao processar lote: ${((xt=(ot=pt.response)==null?void 0:ot.data)==null?void 0:xt.detail)||pt.message}`),f(!1)}finally{g(!1)}},ut=async Q=>{try{const Ne=await U.get(`/notas-entrada/${Q}`);Ne.data.itens&&Ne.data.itens.sort((Pe,Ve)=>Pe.id-Ve.id),u(Ne.data),x(!0),F(Ne.data.tipo_rateio||"loja")}catch{be.error("Erro ao carregar detalhes da nota")}},Ee=async Q=>{try{const Ne=await U.get(`/notas-entrada/${Q}`);u(Ne.data),v(!0)}catch{be.error("Erro ao carregar nota")}},Me=async(Q,Ne,Pe)=>{var Ve,ot;try{await U.post(`/notas-entrada/${Q}/itens/${Ne}/vincular?produto_id=${parseInt(Pe)}`),be.success(" Produto vinculado com sucesso!");const xt=await U.get(`/notas-entrada/${Q}`);xt.data.itens&&xt.data.itens.sort((pt,Nt)=>pt.id-Nt.id),u(xt.data)}catch(xt){console.error(" Erro ao vincular produto:",xt),be.error(((ot=(Ve=xt.response)==null?void 0:Ve.data)==null?void 0:ot.detail)||"Erro ao vincular produto")}},Ae=async(Q,Ne)=>{var Pe,Ve;try{await U.post(`/notas-entrada/${Q}/rateio`,{tipo_rateio:Ne}),be.success(` Nota configurada: ${Ne==="online"?"100% Online":Ne==="loja"?"100% Loja Fsica":"Rateio Parcial"}`);const ot=await U.get(`/notas-entrada/${Q}`);u(ot.data),F(Ne)}catch(ot){console.error(" Erro ao salvar tipo de rateio:",ot),be.error(((Ve=(Pe=ot.response)==null?void 0:Pe.data)==null?void 0:Ve.detail)||"Erro ao salvar tipo de rateio")}},ct=async(Q,Ne,Pe)=>{var Ve,ot;try{const xt=await U.post(`/notas-entrada/${Q}/itens/${Ne}/rateio`,{quantidade_online:parseFloat(Pe)||0});be.success(" Quantidade online configurada!");const pt=xt.data.nota_totais;be.success(`Nota: ${pt.percentual_online.toFixed(1)}% Online (R$ ${pt.valor_online.toFixed(2)}) | ${pt.percentual_loja.toFixed(1)}% Loja (R$ ${pt.valor_loja.toFixed(2)})`),u(Nt=>({...Nt,percentual_online:pt.percentual_online,percentual_loja:pt.percentual_loja,valor_online:pt.valor_online,valor_loja:pt.valor_loja,itens:Nt.itens.map(Ge=>Ge.id===Ne?{...Ge,quantidade_online:parseFloat(Pe)||0}:Ge)})),k(Nt=>({...Nt,[Ne]:parseFloat(Pe)||0}))}catch(xt){console.error(" Erro ao salvar quantidade online:",xt),be.error(((ot=(Ve=xt.response)==null?void 0:Ve.data)==null?void 0:ot.detail)||"Erro ao salvar")}},bt=async Q=>{var Ne,Pe;try{const Ve=await U.get(`/notas-entrada/${Q}/preview-processamento`);L(Ve.data),V(!0),x(!1);const ot={};Ve.data.itens.forEach(xt=>{xt.produto_vinculado&&(ot[xt.produto_vinculado.produto_id]={preco_venda:xt.produto_vinculado.preco_venda_atual,margem:xt.produto_vinculado.margem_atual})}),D(ot)}catch(Ve){be.error(((Pe=(Ne=Ve.response)==null?void 0:Ne.data)==null?void 0:Pe.detail)||"Erro ao carregar preview")}},Rt=bt,Ct=async()=>{var Q,Ne;i(!0);try{const Pe=[];Object.entries(Z).forEach(([ot,xt])=>{const pt=G.itens.find(Nt=>Nt.produto_vinculado&&Nt.produto_vinculado.produto_id==ot);pt&&pt.produto_vinculado&&xt.preco_venda!==pt.produto_vinculado.preco_venda_atual&&Pe.push({produto_id:parseInt(ot),preco_venda:xt.preco_venda})}),Pe.length>0&&await U.post(`/notas-entrada/${G.nota_id}/atualizar-precos`,Pe);const Ve=await U.post(`/notas-entrada/${G.nota_id}/processar`,{});be.success(` Nota processada! ${Ve.data.itens_processados} itens lanados no estoque`,{duration:5e3}),x(!1),u(null),V(!1),L(null),je()}catch(Pe){be.error(((Ne=(Q=Pe.response)==null?void 0:Q.data)==null?void 0:Ne.detail)||"Erro ao processar nota")}finally{i(!1)}},It=(Q,Ne)=>Ne>=100?Q*2:Q/(1-Ne/100),$t=(Q,Ne)=>Q<=0?0:(Q-Ne)/Q*100,ge=(Q,Ne,Pe)=>{const Ve=$t(Ne,Pe);D(ot=>({...ot,[Q]:{preco_venda:Ne,margem:Ve}}))},$e=(Q,Ne,Pe)=>{const Ve=It(Pe,Ne);D(ot=>({...ot,[Q]:{preco_venda:Ve,margem:Ne}}))},Ie=async(Q,Ne)=>{var Pe,Ve;if(confirm(`Tem certeza que deseja excluir a nota ${Ne}?`)){i(!0);try{await U.delete(`/notas-entrada/${Q}`),be.success(" Nota excluda com sucesso!"),m&&(x(!1),u(null)),je()}catch(ot){be.error(((Ve=(Pe=ot.response)==null?void 0:Pe.data)==null?void 0:Ve.detail)||"Erro ao excluir nota")}finally{i(!1)}}},it=async(Q,Ne)=>{A(!0),T({id:Q,nome:Ne}),w(!0);try{const Pe=await U.get(`/produtos/${Q}/historico-precos`);C(Pe.data)}catch{be.error("Erro ao carregar histrico de preos"),w(!1)}finally{A(!1)}},rt=async(Q,Ne)=>{var Pe,Ve;if(confirm(` Tem certeza que deseja REVERTER a entrada da nota ${Ne}?

Isso ir:
 Remover as quantidades do estoque
 Excluir os lotes criados
 Estornar as contas a pagar lanadas
 Restaurar o status da nota para pendente`)){i(!0);try{const ot=await U.post(`/notas-entrada/${Q}/reverter`,{});be.success(` Entrada revertida! ${ot.data.itens_revertidos} produtos ajustados`,{duration:5e3}),m&&(x(!1),u(null)),je()}catch(ot){be.error(((Ve=(Pe=ot.response)==null?void 0:Pe.data)==null?void 0:Ve.detail)||"Erro ao reverter entrada")}finally{i(!1)}}},xe=async(Q,Ne)=>{var Pe,Ve;try{await U.post(`/notas-entrada/${Q}/itens/${Ne}/desvincular`),be.success(" Produto desvinculado!");const ot=await U.get(`/notas-entrada/${Q}`);ot.data.itens&&ot.data.itens.sort((xt,pt)=>xt.id-pt.id),u(ot.data)}catch(ot){be.error(((Ve=(Pe=ot.response)==null?void 0:Pe.data)==null?void 0:Ve.detail)||"Erro ao desvincular produto")}},Oe=Q=>{var de;const Ne=((de=Q.produto_vinculado)==null?void 0:de.produto_nome)||Q.produto_nome;if(!Ne)return[];const Pe=[],Ve=Q.descricao_nf||Q.descricao||"",ot=Ne||"";if(!Ve||!ot)return[];const xt=Ve.toLowerCase(),pt=ot.toLowerCase(),Nt=/(\d+(?:[.,]\d+)?)\s*(kg|g|ml|l|un|und|unid)/gi,Ge=[...xt.matchAll(Nt)],Dt=[...pt.matchAll(Nt)];if(Ge.length>0&&Dt.length>0){const se=Ge[0][0],fe=Dt[0][0];se!==fe&&Pe.push(`Peso/Tamanho diferente: NF="${se}" vs Produto="${fe}"`)}const jr=["preto","branco","vermelho","azul","verde","amarelo","rosa","roxo","laranja","marrom","cinza"],J=jr.find(se=>xt.includes(se)),P=jr.find(se=>pt.includes(se));J&&P&&J!==P&&Pe.push(`Cor diferente: NF="${J}" vs Produto="${P}"`);const H=["frango","carne","peixe","cordeiro","salmao","salmo","atum","vegetais"],te=H.find(se=>xt.includes(se)),ne=H.find(se=>pt.includes(se));return te&&ne&&te!==ne&&Pe.push(`Sabor diferente: NF="${te}" vs Produto="${ne}"`),(xt.includes("cao")||xt.includes("cachorro")||xt.includes("dog"))&&(pt.includes("gato")||pt.includes("cat"))&&Pe.push(" Animal diferente: NF para CACHORRO mas produto  para GATO"),(xt.includes("gato")||xt.includes("cat"))&&(pt.includes("cao")||pt.includes("cachorro")||pt.includes("dog"))&&Pe.push(" Animal diferente: NF para GATO mas produto  para CACHORRO"),Pe},Ye=async Q=>{W(Q),z(!0),ie(!0),Se({sku:"",nome:"",descricao:"",preco_custo:"",preco_venda:"",margem_lucro:"",estoque_minimo:10,estoque_maximo:100});try{const Ne=await U.get(`/notas-entrada/${d.id}/itens/${Q.id}/sugerir-sku`);ee(Ne.data);let Pe=Ne.data.sku_proposto||Q.codigo_produto||"PROD-"+Q.id;Ne.data.ja_existe&&Ne.data.sugestoes&&Ne.data.sugestoes.length>0&&(Pe=(Ne.data.sugestoes.find(ot=>ot.padrao)||Ne.data.sugestoes[0]).sku),Se({sku:Pe,nome:Q.descricao||Q.descricao_produto||"Produto sem nome",descricao:Q.descricao||Q.descricao_produto||"",preco_custo:Q.valor_unitario.toString(),preco_venda:(Q.valor_unitario*1.5).toFixed(2),margem_lucro:"50",estoque_minimo:10,estoque_maximo:100}),console.log(" Formulrio preenchido:",{sku:Pe,nome:Q.descricao,preco_custo:Q.valor_unitario})}catch(Ne){be.error("Erro ao buscar sugestes de SKU"),console.error("Erro ao buscar SKU:",Ne),Se({sku:Q.codigo_produto||"PROD-"+Q.id,nome:Q.descricao||"Produto sem nome",descricao:Q.descricao||"",preco_custo:Q.valor_unitario.toString(),preco_venda:(Q.valor_unitario*1.5).toFixed(2),margem_lucro:"50",estoque_minimo:10,estoque_maximo:100})}finally{ie(!1)}},Y=async()=>{var Q,Ne;try{i(!0);const Pe={...we,preco_custo:parseFloat(we.preco_custo)||0,preco_venda:parseFloat(we.preco_venda)||0,margem_lucro:parseFloat(we.margem_lucro)||0,estoque_minimo:parseInt(we.estoque_minimo)||10,estoque_maximo:parseInt(we.estoque_maximo)||100},Ve=await U.post(`/notas-entrada/${d.id}/itens/${oe.id}/criar-produto`,Pe);be.success(` Produto ${Ve.data.produto.codigo} criado e vinculado!`),z(!1),W(null),ee(null),await je();const ot=await U.get(`/notas-entrada/${d.id}`);u(ot.data)}catch(Pe){be.error(((Ne=(Q=Pe.response)==null?void 0:Q.data)==null?void 0:Ne.detail)||"Erro ao criar produto"),console.error(Pe)}finally{i(!1)}},ue=async()=>{var Pe;const Q=d.itens.filter(Ve=>!Ve.produto_id);if(Q.length===0){be.success("Todos os produtos j esto vinculados!");return}if(window.confirm(`Criar ${Q.length} produto(s) automaticamente?

Padres aplicados:
 Estoque mnimo: 10
 Estoque mximo: 100
 Margem de lucro: 50%

Voc poder editar os produtos depois no cadastro.`))try{i(!0);let Ve=0,ot=0;const xt=be.loading(` Criando ${Q.length} produtos...`);for(const Nt of Q)try{const Ge=await U.get(`/notas-entrada/${d.id}/itens/${Nt.id}/sugerir-sku`);let Dt=Ge.data.sku_proposto||Nt.codigo_produto||`PROD-${Nt.id}`;Ge.data.ja_existe&&((Pe=Ge.data.sugestoes)==null?void 0:Pe.length)>0&&(Dt=(Ge.data.sugestoes.find(P=>P.padrao)||Ge.data.sugestoes[0]).sku);const jr={sku:Dt,nome:Nt.descricao||"Produto sem nome",descricao:Nt.descricao||"",preco_custo:parseFloat(Nt.valor_unitario)||0,preco_venda:parseFloat((Nt.valor_unitario*1.5).toFixed(2)),margem_lucro:50,estoque_minimo:10,estoque_maximo:100};await U.post(`/notas-entrada/${d.id}/itens/${Nt.id}/criar-produto`,jr),Ve++}catch(Ge){console.error(`Erro ao criar produto do item ${Nt.id}:`,Ge),ot++}be.dismiss(xt),Ve>0&&be.success(` ${Ve} produto(s) criado(s) com sucesso!`),ot>0&&be.error(` ${ot} erro(s) ao criar produtos`),await je();const pt=await U.get(`/notas-entrada/${d.id}`);u(pt.data)}catch(Ve){be.error("Erro ao criar produtos em lote"),console.error(Ve)}finally{i(!1)}},qe=(Q,Ne)=>Q===0?0:((Ne-Q)/Q*100).toFixed(2),le=Q=>{const Ne={pendente:"bg-yellow-200 text-yellow-800",processada:"bg-green-200 text-green-800",cancelada:"bg-red-200 text-red-800",erro:"bg-red-300 text-red-900"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${Ne[Q]||"bg-gray-200"}`,children:Q.toUpperCase()})},ve=Q=>{if(!Q)return e.jsx("span",{className:"text-gray-400 text-sm",children:"No vinculado"});const Ne=Q>=90?"alta":Q>=70?"media":"baixa",Pe={alta:"bg-green-100 text-green-800",media:"bg-yellow-100 text-yellow-800",baixa:"bg-orange-100 text-orange-800"};return e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Pe[Ne]}`,children:[Q.toFixed(1),"% ",Ne==="alta"?"":Ne==="media"?"":""]})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Entrada por NF-e (XML)"}),e.jsx("p",{className:"text-gray-600",children:"Importe notas fiscais eletrnicas e vincule produtos automaticamente"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:l?" Processando XML...":"Selecione o arquivo XML da NF-e"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"O sistema ir processar automaticamente os dados da nota fiscal"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsxs("label",{className:"inline-block",children:[e.jsx("input",{type:"file",accept:".xml",onChange:lt,disabled:l||p,className:"hidden"}),e.jsx("span",{className:`
                px-6 py-3 rounded-lg font-semibold cursor-pointer inline-block
                ${l||p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}
              `,children:l?" Processando...":" Upload nico"})]}),e.jsxs("label",{className:"inline-block",children:[e.jsx("input",{type:"file",accept:".xml",multiple:!0,onChange:Ke,disabled:l||p,className:"hidden"}),e.jsx("span",{className:`
                px-6 py-3 rounded-lg font-semibold cursor-pointer inline-block
                ${l||p?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}
              `,children:p?" Processando Lote...":" Upload Mltiplo"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Formatos aceitos: XML de NF-e (padro SEFAZ)"})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total de Notas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.filter(Q=>Q.status==="pendente").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pendentes"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(Q=>Q.status==="processada").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Processadas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["R$ ",r.filter(Q=>Q.status==="processada").reduce((Q,Ne)=>Q+(Ne.valor_total||0),0).toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Valor Processado"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Notas Fiscais Importadas"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Chave NF-e"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data Emisso"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Itens"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Aes"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma nota fiscal importada ainda. Faa o upload de um XML acima."})}):r.map(Q=>e.jsxs("tr",{onClick:()=>Ee(Q.id),className:"border-t hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"font-mono text-xs",children:[Q.chave_acesso.substring(0,20),"..."]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold",children:Q.fornecedor_nome}),e.jsx("div",{className:"text-xs text-gray-500",children:Q.fornecedor_cnpj})]}),e.jsx("td",{className:"px-4 py-3",children:new Date(Q.data_emissao).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["R$ ",(Q.valor_total||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-semibold",children:[Q.produtos_vinculados+Q.produtos_nao_vinculados," itens"]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:le(Q.status)}),e.jsx("td",{className:"px-4 py-3 text-center",onClick:Ne=>Ne.stopPropagation(),children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[Q.status==="pendente"&&e.jsx("button",{onClick:()=>ut(Q.id),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-semibold text-sm",title:"Vincular produtos",children:" Vincular"}),Q.entrada_estoque_realizada?e.jsx("button",{onClick:()=>rt(Q.id,Q.numero_nota),className:"text-orange-600 hover:text-orange-800 font-semibold text-sm",title:"Reverter entrada no estoque",children:" Reverter"}):e.jsx("button",{onClick:()=>Ie(Q.id,Q.numero_nota),className:"text-red-600 hover:text-red-800 font-semibold text-sm",title:"Excluir nota",children:" Excluir"})]})})]},Q.id))})]})})]}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:" Detalhes da NF-e"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Chave: ",d.chave_acesso]})]}),e.jsx("button",{onClick:()=>{x(!1),u(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Fornecedor:"}),e.jsx("div",{className:"font-semibold",children:d.fornecedor_nome}),e.jsx("div",{className:"text-xs text-gray-500",children:d.fornecedor_cnpj}),d.fornecedor_id&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:" Cadastrado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Emisso:"}),e.jsx("div",{className:"font-semibold",children:new Date(d.data_emissao).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),e.jsxs("div",{className:"font-bold text-lg text-green-600",children:["R$ ",(d.valor_total||0).toFixed(2)]})]})]})}),d.fornecedor_id&&d.fornecedor_criado_automaticamente&&e.jsx("div",{className:"px-6 py-2 bg-blue-50 border-b border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:d.fornecedor_nome})," foi cadastrado automaticamente."]}),e.jsx("button",{onClick:()=>t(`/clientes/${d.fornecedor_id}`),className:"px-3 py-1 bg-blue-600 text-white rounded font-medium hover:bg-blue-700 text-xs",children:" Completar Cadastro"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold text-xl text-gray-800",children:[" Produtos da Nota (",d.itens.length,")"]}),d.status==="pendente"&&d.itens.some(Q=>!Q.produto_id)&&e.jsxs("button",{onClick:ue,disabled:o,className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 flex items-center gap-2 text-sm",title:"Cria automaticamente todos os produtos no vinculados com os padres: Estoque mn: 10, mx: 100, Margem: 50%",children:[e.jsx("span",{children:" Criar Todos No Vinculados"}),e.jsx("span",{className:"text-xs bg-purple-800 px-2 py-0.5 rounded",children:d.itens.filter(Q=>!Q.produto_id).length})]})]}),e.jsx("div",{className:"space-y-3",children:d.itens.map(Q=>{const Ne=Oe(Q),Pe=Ne.length>0;return e.jsxs("div",{className:"border-2 border-gray-400 rounded-lg overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-0",children:[e.jsxs("div",{className:"bg-blue-50 border-r-2 border-gray-300 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold",children:"NF-e"}),ve(Q.confianca_vinculo)]}),e.jsx("div",{className:"font-semibold text-base mb-2 text-blue-900",children:Q.descricao}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cdigo:"}),e.jsx("span",{className:"font-mono font-semibold",children:Q.codigo_produto})]}),Q.ean&&Q.ean!=="SEM GTIN"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"EAN:"}),e.jsx("span",{className:"font-mono font-semibold",children:Q.ean})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"NCM:"}),e.jsx("span",{className:"font-mono font-semibold",children:Q.ncm})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1.5 mt-1.5",children:[e.jsx("span",{className:"text-gray-600",children:"Qtd:"}),e.jsx("span",{className:"font-semibold",children:Q.quantidade})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Unit.:"}),e.jsxs("span",{className:"font-semibold",children:["R$ ",Q.valor_unitario.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["R$ ",Q.valor_total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"CFOP:"}),e.jsx("span",{className:"font-semibold",children:Q.cfop})]})]}),(Q.lote||Q.data_validade)&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[Q.lote&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:" Lote:"}),e.jsx("div",{className:"font-semibold text-purple-800",children:Q.lote})]}),Q.data_validade&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"text-gray-600",children:" Validade:"}),e.jsx("div",{className:"font-semibold text-orange-800",children:new Date(Q.data_validade).toLocaleDateString("pt-BR")})]})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center bg-gray-100 px-2 py-4",children:Q.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>xe(d.id,Q.id),className:"text-3xl text-green-600 hover:text-red-600 transition-colors mb-2",title:" Vinculado - Clique para desvincular",children:""}),Pe&&e.jsx("div",{className:"bg-red-100 border-2 border-red-500 rounded-lg p-2 max-w-[200px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:"font-bold text-red-700 text-xs mb-1",children:"DIVERGNCIA!"}),e.jsx("div",{className:"text-[10px] text-red-600 space-y-0.5",children:Ne.map((Ve,ot)=>e.jsxs("div",{children:[" ",Ve]},ot))})]})})]}):e.jsx("div",{className:"text-3xl text-gray-400",title:" No vinculado",children:""})}),e.jsx("div",{className:`p-4 ${Q.produto_id?"bg-green-50":"bg-gray-50"}`,children:e.jsx("div",{className:`p-4 ${Q.produto_id?"bg-green-50":"bg-gray-50"}`,children:d.status==="pendente"?e.jsx(e.Fragment,{children:Q.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold",children:" PRODUTO SISTEMA"})}),e.jsx("div",{className:"font-semibold text-base mb-3 text-green-900",children:Q.produto_nome}),e.jsx("div",{className:"text-xs text-green-700 mb-3 italic",children:" Para alterar o vnculo, selecione outro produto ou clique no  para desvincular"}),e.jsxs("select",{value:Q.produto_id,onChange:Ve=>{Ve.target.value&&Ve.target.value!=Q.produto_id&&Me(d.id,Q.id,Ve.target.value)},className:"w-full px-3 py-2 border-2 border-green-400 rounded text-sm focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:Q.produto_id,children:Q.produto_nome}),Array.isArray(s)&&s.filter(Ve=>Ve.id!==Q.produto_id).map(Ve=>e.jsxs("option",{value:Ve.id,children:[Ve.codigo," - ",Ve.nome," ",Ve.descricao?`| ${Ve.descricao.substring(0,50)}...`:""," (Est: ",Ve.estoque_atual||0,")"]},Ve.id))]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("div",{className:"bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold",children:" NO VINCULADO"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:" Pesquisar produto existente:"}),e.jsx("input",{type:"text",placeholder:"Digite nome ou SKU...",value:me[Q.id]||"",onChange:Ve=>_e({...me,[Q.id]:Ve.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded focus:ring-2 focus:ring-blue-500 text-sm"})]}),me[Q.id]&&me[Q.id].length>=2&&e.jsxs("div",{className:"border-2 border-gray-300 rounded max-h-48 overflow-y-auto bg-white",children:[Array.isArray(s)&&s.filter(Ve=>{var xt,pt,Nt;const ot=me[Q.id].toLowerCase();return((xt=Ve.nome)==null?void 0:xt.toLowerCase().includes(ot))||((pt=Ve.codigo)==null?void 0:pt.toLowerCase().includes(ot))||((Nt=Ve.descricao)==null?void 0:Nt.toLowerCase().includes(ot))}).sort((Ve,ot)=>Ve.ativo===ot.ativo?0:Ve.ativo?-1:1).slice(0,15).map(Ve=>e.jsxs("button",{type:"button",onClick:()=>{Me(d.id,Q.id,Ve.id),_e({...me,[Q.id]:""})},className:`w-full text-left px-3 py-2 hover:bg-blue-50 border-b border-gray-200 last:border-b-0 text-xs ${Ve.ativo?"":"text-red-600 font-bold"}`,children:[!Ve.ativo&&" ",Ve.codigo," - ",Ve.nome,!Ve.ativo&&" [INATIVO]",e.jsxs("span",{className:"text-gray-500 ml-1",children:["(Est: ",Ve.estoque_atual||0,")"]})]},`produto-${Q.id}-${Ve.id}`)),s.filter(Ve=>{var xt,pt,Nt;const ot=me[Q.id].toLowerCase();return((xt=Ve.nome)==null?void 0:xt.toLowerCase().includes(ot))||((pt=Ve.codigo)==null?void 0:pt.toLowerCase().includes(ot))||((Nt=Ve.descricao)==null?void 0:Nt.toLowerCase().includes(ot))}).length===0&&e.jsx("div",{className:"px-3 py-4 text-center text-gray-500 text-xs",children:" Nenhum produto encontrado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"text-xs text-gray-500",children:"ou"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsx("button",{onClick:()=>Ye(Q),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 text-sm",children:" Criar Novo Produto"})]})]})}):e.jsx("div",{children:Q.produto_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold inline-block mb-2",children:" VINCULADO"}),e.jsx("div",{className:"font-semibold text-base text-green-900",children:Q.produto_nome})]}):e.jsx("div",{className:"bg-gray-600 text-white px-2 py-1 rounded text-xs font-bold inline-block",children:" NO VINCULADO"})})})}),d.status==="pendente"&&B==="parcial"&&Q.produto_id&&e.jsxs("div",{className:"col-span-3 p-4 border-t-2 border-gray-300 bg-gradient-to-r from-blue-50 via-gray-50 to-green-50",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3 flex items-center text-sm",children:" Quantidade destinada ao estoque online"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" Total NF"}),e.jsx("input",{type:"number",value:Q.quantidade,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded bg-gray-100 text-base font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" Online"}),e.jsx("input",{type:"number",min:"0",max:Q.quantidade,step:"0.01",value:I[Q.id]??Q.quantidade_online??0,onChange:Ve=>{const ot=parseFloat(Ve.target.value)||0;k({...I,[Q.id]:Math.min(ot,Q.quantidade)})},className:"w-full px-3 py-2 border-2 border-blue-400 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base font-semibold",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:" Loja"}),e.jsx("input",{type:"number",value:(Q.quantidade-(I[Q.id]??Q.quantidade_online??0)).toFixed(2),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded bg-gray-100 text-base font-semibold"})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-700 bg-white rounded-lg p-3 border border-gray-300 font-medium",children:[" Valor online: R$ ",((I[Q.id]??Q.quantidade_online??0)*Q.valor_unitario).toFixed(2)]}),I[Q.id]!==void 0&&I[Q.id]!==Q.quantidade_online?e.jsx("button",{onClick:()=>ct(d.id,Q.id,I[Q.id]),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 mt-3 text-sm",children:" Salvar Distribuio"}):Q.quantidade_online!==null&&Q.quantidade_online!==void 0&&e.jsxs("div",{className:"mt-3 text-sm text-green-700 bg-green-50 rounded-lg p-3 border border-green-200 flex items-center justify-center font-medium",children:[" Salvo: ",Q.quantidade_online," online / ",(Q.quantidade-Q.quantidade_online).toFixed(2)," loja"]})]})]}),d.status==="processada"&&Q.produto_id&&e.jsxs("div",{className:"mt-3 pt-3 border-t bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("span",{className:"text-blue-800 font-semibold",children:" Lanado no estoque:"}),e.jsx("span",{className:"ml-2",children:Q.produto_nome})]})]},Q.id)})})]}),d.status==="pendente"&&e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:" Distribuio (informativo para relatrios)"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Estoque unificado  Classificao apenas para anlises"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ae(d.id,"loja"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="loja"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Loja"}),e.jsx("button",{onClick:()=>Ae(d.id,"online"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="online"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Online"}),e.jsx("button",{onClick:()=>Ae(d.id,"parcial"),disabled:o,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${B==="parcial"?"bg-gray-800 text-white":"bg-white border border-gray-300 text-gray-600 hover:bg-gray-100"} ${o?"opacity-50 cursor-not-allowed":""}`,children:" Parcial"}),(d.percentual_online>0||d.tipo_rateio)&&e.jsxs("div",{className:"ml-auto flex gap-3 text-xs text-gray-600",children:[e.jsxs("span",{children:["Online: ",(d.percentual_online||0).toFixed(0),"%"]}),e.jsxs("span",{children:["Loja: ",(d.percentual_loja||100).toFixed(0),"%"]})]})]}),B==="parcial"&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-100 rounded p-2",children:[" Defina a quantidade destinada ao ",e.jsx("strong",{children:"estoque online"})," em cada produto acima. O sistema calcula automaticamente a % baseado nos valores."]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[d.itens.filter(Q=>Q.produto_id).length," de ",d.itens.length," produtos vinculados"]}),e.jsxs("div",{className:"flex gap-3",children:[d.entrada_estoque_realizada?e.jsx("button",{onClick:()=>rt(d.id,d.numero_nota),disabled:o,className:"px-6 py-2 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 disabled:bg-gray-400",children:o?" Revertendo...":" Reverter Entrada"}):e.jsxs(e.Fragment,{children:[!d.entrada_estoque_realizada&&e.jsx("button",{onClick:()=>Ie(d.id,d.numero_nota),disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-400",children:" Excluir Nota"}),d.itens.some(Q=>Q.produto_id)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Rt(d.id),disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400",children:" Revisar Preos"}),e.jsx("button",{onClick:()=>bt(d.id),disabled:o,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-400",children:o?" Processando...":" Processar Nota"})]})]}),e.jsx("button",{onClick:()=>{x(!1),u(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Fechar"})]})]})]})]})}),M&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:" Criar Novo Produto"}),e.jsx("p",{className:"text-sm text-gray-600",children:"A partir do item da NF-e"})]}),e.jsx("button",{onClick:()=>{z(!1),W(null),ee(null)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsx("div",{className:"px-6 py-4",children:ce?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Gerando sugestes de SKU..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:" Dados da NF-e:"}),e.jsxs("div",{className:"text-sm space-y-1 text-blue-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Descrio:"})," ",oe.descricao]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Cdigo Fornecedor:"})," ",oe.codigo_produto]}),e.jsxs("div",{children:[e.jsx("strong",{children:"NCM:"})," ",oe.ncm]}),oe.ean&&e.jsxs("div",{children:[e.jsx("strong",{children:"EAN:"})," ",oe.ean]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Valor Unitrio:"})," R$ ",oe.valor_unitario.toFixed(2)]})]})]}),(ae==null?void 0:ae.ja_existe)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-yellow-900 mb-2",children:['Cdigo do fornecedor "',ae.sku_proposto,'" j est em uso!']}),e.jsxs("div",{className:"text-sm text-yellow-800 mb-3",children:["Produto existente: ",e.jsx("strong",{children:ae.produto_existente.nome}),e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Um SKU alternativo foi sugerido automaticamente. Voc pode alterar se preferir."})]}),e.jsx("div",{className:"text-sm text-yellow-800 mb-2 font-semibold",children:"Outras opes de SKU disponveis:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ae.sugestoes.map(Q=>e.jsxs("button",{onClick:()=>Se({...we,sku:Q.sku}),className:`px-3 py-1 rounded-lg text-sm font-semibold transition-all ${we.sku===Q.sku?"bg-blue-600 text-white shadow-md":"bg-white border border-blue-300 text-blue-700 hover:bg-blue-50"} ${Q.padrao?"ring-2 ring-yellow-400":""}`,children:[Q.sku," ",Q.padrao&&""]},Q.sku))})]})]})}),ae&&!ae.ja_existe&&e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"SKU disponvel!"})," O cdigo do fornecedor pode ser usado diretamente."]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["SKU / Cdigo do Produto *",e.jsx("span",{className:"text-xs text-gray-500 font-normal ml-2",children:"(Baseado no cdigo do fornecedor)"})]}),e.jsx("input",{type:"text",value:we.sku,onChange:Q=>Se({...we,sku:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"Ex: MGZ-12345"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Voc pode editar o SKU se preferir"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Nome do Produto *"}),e.jsx("input",{type:"text",value:we.nome,onChange:Q=>Se({...we,nome:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo do produto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:we.descricao,onChange:Q=>Se({...we,descricao:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Descrio detalhada (opcional)"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Preo de Custo *"}),e.jsx("input",{type:"number",step:"0.01",value:we.preco_custo,onChange:Q=>{const Ne=Q.target.value,Pe=parseFloat(we.margem_lucro)||0;Se({...we,preco_custo:Ne,preco_venda:Ne?It(parseFloat(Ne),Pe):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Margem (%) *"}),e.jsx("input",{type:"number",step:"0.01",value:we.margem_lucro,onChange:Q=>{const Ne=Q.target.value,Pe=parseFloat(we.preco_custo)||0;Se({...we,margem_lucro:Ne,preco_venda:Pe&&Ne?It(Pe,parseFloat(Ne)):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Preo de Venda *"}),e.jsx("input",{type:"number",step:"0.01",value:we.preco_venda,onChange:Q=>{const Ne=Q.target.value,Pe=parseFloat(we.preco_custo)||0;Se({...we,preco_venda:Ne,margem_lucro:Pe&&Ne?qe(Pe,parseFloat(Ne)):""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Estoque Mnimo"}),e.jsx("input",{type:"number",value:we.estoque_minimo,onChange:Q=>Se({...we,estoque_minimo:parseInt(Q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Estoque Mximo"}),e.jsx("input",{type:"number",value:we.estoque_maximo,onChange:Q=>Se({...we,estoque_maximo:parseInt(Q.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{z(!1),W(null),ee(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{onClick:Y,disabled:o||!we.sku||!we.nome||!we.preco_custo||parseFloat(we.preco_custo)<=0||!we.preco_venda||parseFloat(we.preco_venda)<=0,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:o?" Criando...":" Criar e Vincular Produto"})]})]})}),h&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[" NF-e ",d.numero_nota]}),e.jsxs("p",{className:"text-blue-100 mt-1",children:["Srie: ",d.serie]})]}),e.jsx("button",{onClick:()=>{v(!1),u(null)},className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:""})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Dados da Nota"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data Emisso:"}),e.jsx("span",{className:"font-semibold",children:new Date(d.data_emissao).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{children:le(d.status)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",d.valor_total.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Fornecedor"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Nome:"}),e.jsx("div",{className:"font-semibold",children:d.fornecedor_nome})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"CNPJ:"}),e.jsx("div",{className:"font-mono text-xs",children:d.fornecedor_cnpj})]})]})]})]}),e.jsxs("div",{className:"mb-6 p-3 bg-gray-50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Chave de Acesso"}),e.jsx("div",{className:"font-mono text-xs break-all",children:d.chave_acesso})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((Re=d.itens)==null?void 0:Re.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Itens"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.produtos_vinculados}),e.jsx("div",{className:"text-sm text-gray-600",children:"Vinculados"})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.produtos_nao_vinculados}),e.jsx("div",{className:"text-sm text-gray-600",children:"No Vinculados"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:" Itens da Nota"}),e.jsx("div",{className:"space-y-3",children:(Le=d.itens)==null?void 0:Le.map((Q,Ne)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:Q.descricao}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cdigo: ",Q.codigo_produto," | NCM: ",Q.ncm]})]}),Q.vinculado?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded",children:" Vinculado"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-semibold rounded",children:" No Vinculado"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-sm mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Qtd:"}),e.jsx("div",{className:"font-semibold",children:Q.quantidade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unit:"}),e.jsxs("div",{className:"font-semibold",children:["R$ ",Q.valor_unitario.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("div",{className:"font-semibold text-green-600",children:["R$ ",Q.valor_total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"CFOP:"}),e.jsx("div",{className:"font-semibold",children:Q.cfop})]})]}),(Q.lote||Q.data_validade)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[Q.lote&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:" Lote:"}),e.jsx("div",{className:"font-semibold text-purple-800",children:Q.lote})]}),Q.data_validade&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:" Validade:"}),e.jsx("div",{className:"font-semibold text-orange-800",children:new Date(Q.data_validade).toLocaleDateString("pt-BR")})]})]}),Q.vinculado&&Q.produto_nome&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("span",{className:"text-xs text-gray-600",children:" Produto vinculado: "}),e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Q.produto_nome})]})]},Q.id))})]})]}),e.jsxs("div",{className:"border-t p-6 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:d.entrada_estoque_realizada?e.jsx("span",{className:"text-green-600 font-semibold",children:" Entrada realizada no estoque"}):e.jsx("span",{className:"text-orange-600 font-semibold",children:" Entrada ainda no processada"})}),e.jsxs("div",{className:"flex gap-3",children:[d.status==="pendente"&&d.produtos_vinculados>0&&!d.entrada_estoque_realizada&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{v(!1),bt(d.id)},className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold",children:" Revisar Preos e Processar"})}),d.status==="pendente"&&e.jsx("button",{onClick:()=>{v(!1),ut(d.id)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold",children:" Vincular Produtos"}),e.jsx("button",{onClick:()=>{v(!1),u(null)},className:"px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50",children:"Fechar"})]})]})]})}),O&&G&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Reviso de Preos e Custos"}),e.jsxs("p",{className:"text-purple-100 mt-1",children:["NF-e ",G.numero_nota," - ",G.fornecedor_nome]})]}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Filtrar:"}),(()=>{const Q=G.itens.filter(xt=>xt.produto_vinculado!==null||xt.produto_id!==null),Ne=Q.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)>0}).length,Pe=Q.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)<0}).length,Ve=Q.filter(xt=>{var Nt;return(((Nt=xt.produto_vinculado)==null?void 0:Nt.variacao_custo_percentual)||xt.variacao_custo_percentual||0)===0}).length,ot=Q.length;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>R("todos"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${K==="todos"?"bg-blue-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"text-base",children:""}),"Todos (",ot,")"]}),Ne>0&&e.jsxs("button",{onClick:()=>R("aumentou"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${K==="aumentou"?"bg-red-600 text-white shadow-md":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx("span",{className:"text-base",children:""}),Ne," custo",Ne>1?"s":""," maior",Ne>1?"es":""]}),Pe>0&&e.jsxs("button",{onClick:()=>R("diminuiu"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${K==="diminuiu"?"bg-green-600 text-white shadow-md":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx("span",{className:"text-base",children:""}),Pe," custo",Pe>1?"s":""," menor",Pe>1?"es":""]}),Ve>0&&e.jsxs("button",{onClick:()=>R("igual"),className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 transition-all ${K==="igual"?"bg-gray-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"text-base",children:""}),Ve," sem alterao"]})]})})()]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-6",children:G.itens.filter(Q=>{var Ve;if(!(Q.produto_vinculado!==null||Q.produto_id!==null))return!1;const Pe=((Ve=Q.produto_vinculado)==null?void 0:Ve.variacao_custo_percentual)||Q.variacao_custo_percentual||0;return K==="todos"?!0:K==="aumentou"?Pe>0:K==="diminuiu"?Pe<0:K==="igual"?Pe===0:!0}).map(Q=>{const Ne=Q.produto_vinculado||{produto_id:Q.produto_id,produto_nome:Q.produto_nome,produto_codigo:Q.produto_codigo,produto_ean:Q.produto_ean,custo_anterior:Q.custo_anterior,custo_novo:Q.custo_novo,variacao_custo_percentual:Q.variacao_custo_percentual,preco_venda_atual:Q.preco_venda_atual,margem_atual:Q.margem_atual,estoque_atual:Q.estoque_atual};if(!Ne.produto_id||!Ne.produto_id)return null;const Pe=Ne.variacao_custo_percentual||0,Ve=Pe>0,ot=Z[Ne.produto_id]||{preco_venda:Ne.preco_venda_atual||0,margem:Ne.margem_atual||0};return e.jsxs("div",{className:"border-2 border-gray-300 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl mb-1",children:Ne.produto_nome}),e.jsxs("p",{className:"text-sm text-blue-100",children:["SKU: ",Ne.produto_codigo]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("button",{onClick:()=>it(Ne.produto_id,Ne.produto_nome),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:" Histrico"}),e.jsxs("div",{className:"mt-1 text-sm",children:["Quantidade ",e.jsx("strong",{children:Q.quantidade||Q.quantidade_nf||0})]})]})]})}),e.jsxs("div",{className:"p-5 bg-white space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Custo Anterior"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:["R$ ",(Ne.custo_anterior||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Custo Novo"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["R$ ",(Ne.custo_novo||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:" Variao"}),e.jsxs("div",{className:`text-2xl font-bold ${Ve?"text-red-600":Pe<0?"text-green-600":"text-gray-600"}`,children:[Pe>0?"":Pe<0?"":""," ",Math.abs(Pe).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Preo de Venda"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",value:ot.preco_venda,onChange:xt=>ge(Ne.produto_id,parseFloat(xt.target.value)||0,Ne.custo_novo),className:"w-full pl-10 pr-3 py-3 border-2 border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Anterior: R$ ",Ne.preco_venda_atual.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Margem de Lucro"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",value:ot.margem,onChange:xt=>$e(Ne.produto_id,parseFloat(xt.target.value)||0,Ne.custo_novo),className:"w-full pr-10 pl-3 py-3 border-2 border-gray-300 rounded-lg text-xl font-bold focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Com o novo custo"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-800 mb-3",children:" Anlise Comparativa (Valores Anteriores)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Custo Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-gray-700",children:["R$ ",(Ne.custo_anterior||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Preo Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["R$ ",(Ne.preco_venda_atual||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Margem Anterior"}),e.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(Ne.margem_atual||0).toFixed(1),"%"]})]})]})]})]})]},Q.item_id)}).filter(Boolean)})}),e.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>{V(!1),L(null)},className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors",children:" Cancelar"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Valor Total da Nota"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",G.valor_total.toFixed(2)]})]}),e.jsx("button",{onClick:Ct,disabled:o,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-bold text-lg shadow-lg disabled:opacity-50 transition-all",children:o?" Processando...":" Confirmar e Processar Nota"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Histrico de Alteraes de Preos"}),E&&e.jsx("p",{className:"mt-2 text-purple-100",children:E.nome})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600"})}):S.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhuma alterao de preo registrada"})}):e.jsx("div",{className:"space-y-4",children:S.map(Q=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:Q.motivo==="nfe_entrada"?"":Q.motivo==="nfe_revisao_precos"?"":Q.motivo==="manual"?"":""}),e.jsx("span",{className:"font-semibold text-gray-800",children:Q.motivo==="nfe_entrada"?"Entrada NF-e":Q.motivo==="nfe_revisao_precos"?"Reviso de Preos":Q.motivo==="manual"?"Ajuste Manual":Q.motivo})]}),Q.referencia&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Q.referencia}),Q.nota_numero&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Nota: ",Q.nota_numero]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-500",children:[new Date(Q.data).toLocaleString("pt-BR"),Q.usuario&&e.jsx("div",{className:"text-xs mt-1",children:Q.usuario})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Q.preco_custo_anterior!==null&&Q.preco_custo_novo!==null&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" CUSTO"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",Q.preco_custo_anterior.toFixed(2)]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Novo"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:["R$ ",Q.preco_custo_novo.toFixed(2)]})]})]}),Q.variacao_custo_percentual!==null&&Q.variacao_custo_percentual!==0&&e.jsxs("div",{className:`mt-2 text-sm font-semibold text-center ${Q.variacao_custo_percentual>0?"text-red-600":"text-green-600"}`,children:[Q.variacao_custo_percentual>0?"":""," ",Math.abs(Q.variacao_custo_percentual).toFixed(2),"%"]})]}),Q.preco_venda_anterior!==null&&Q.preco_venda_novo!==null&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" PREO DE VENDA"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",Q.preco_venda_anterior.toFixed(2)]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Novo"}),e.jsxs("div",{className:"text-lg font-bold text-green-700",children:["R$ ",Q.preco_venda_novo.toFixed(2)]})]})]}),Q.variacao_venda_percentual!==null&&Q.variacao_venda_percentual!==0&&e.jsxs("div",{className:`mt-2 text-sm font-semibold text-center ${Q.variacao_venda_percentual>0?"text-green-600":"text-red-600"}`,children:[Q.variacao_venda_percentual>0?"":""," ",Math.abs(Q.variacao_venda_percentual).toFixed(2),"%"]})]})]}),Q.margem_anterior!==null&&Q.margem_nova!==null&&e.jsxs("div",{className:"mt-3 bg-purple-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 font-semibold mb-2",children:" MARGEM DE LUCRO"}),e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Anterior"}),e.jsxs("div",{className:"text-xl font-bold",children:[Q.margem_anterior.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-2xl",children:""}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Nova"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700",children:[Q.margem_nova.toFixed(1),"%"]})]})]})]}),Q.observacoes&&e.jsx("div",{className:"mt-3 text-sm text-gray-600 italic bg-gray-50 rounded p-2",children:Q.observacoes})]},Q.id))})}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsx("button",{onClick:()=>{w(!1),C([]),T(null)},className:"w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:"Fechar"})})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Resultado do Processamento em Lote"}),b&&e.jsxs("p",{className:"mt-2",children:[b.sucessos," sucesso(s) | ",b.erros," erro(s) | Total: ",b.total_arquivos]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[p&&!b&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-green-600 mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Processando arquivos..."})]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:b.total_arquivos}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:b.sucessos}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sucessos"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:b.erros}),e.jsx("div",{className:"text-sm text-gray-600",children:"Erros"})]})]}),e.jsx("div",{className:"space-y-3",children:b.resultados.map((Q,Ne)=>{var Pe;return e.jsx("div",{className:`border rounded-lg p-4 ${Q.sucesso?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:Q.sucesso?"":""}),e.jsx("span",{className:"font-semibold text-gray-800",children:Q.arquivo})]}),Q.sucesso?e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Nota:"})," ",Q.numero_nota]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Fornecedor:"})," ",Q.fornecedor]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Valor:"})," R$ ",(Pe=Q.valor_total)==null?void 0:Pe.toFixed(2)]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Produtos:"})," ",Q.produtos_vinculados," vinculados, ",Q.produtos_nao_vinculados," no vinculados"]})]}):e.jsx("p",{className:"text-sm text-red-700",children:Q.mensagem})]}),e.jsxs("span",{className:"text-sm text-gray-500 ml-4",children:["#",Q.ordem]})]})},Ne)})})]})]}),e.jsx("div",{className:"border-t p-6 bg-gray-50",children:e.jsx("button",{onClick:()=>{f(!1),N(null)},disabled:p,className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold disabled:opacity-50 transition-colors",children:p?" Processando...":"Fechar"})})]})})]})};function sP(t){var r,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=sP(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function Mt(){for(var t,r,a=0,s="",n=arguments.length;a<n;a++)(t=arguments[a])&&(r=sP(t))&&(s&&(s+=" "),s+=r);return s}var oz=Array.isArray,Ns=oz,iz=typeof po=="object"&&po&&po.Object===Object&&po,nP=iz,lz=nP,cz=typeof self=="object"&&self&&self.Object===Object&&self,dz=lz||cz||Function("return this")(),so=dz,uz=so,mz=uz.Symbol,Jx=mz,E4=Jx,oP=Object.prototype,xz=oP.hasOwnProperty,pz=oP.toString,Ru=E4?E4.toStringTag:void 0;function hz(t){var r=xz.call(t,Ru),a=t[Ru];try{t[Ru]=void 0;var s=!0}catch{}var n=pz.call(t);return s&&(r?t[Ru]=a:delete t[Ru]),n}var fz=hz,gz=Object.prototype,bz=gz.toString;function vz(t){return bz.call(t)}var yz=vz,A4=Jx,jz=fz,Nz=yz,wz="[object Null]",_z="[object Undefined]",P4=A4?A4.toStringTag:void 0;function Sz(t){return t==null?t===void 0?_z:wz:P4&&P4 in Object(t)?jz(t):Nz(t)}var qo=Sz;function Cz(t){return t!=null&&typeof t=="object"}var Vo=Cz,kz=qo,Ez=Vo,Az="[object Symbol]";function Pz(t){return typeof t=="symbol"||Ez(t)&&kz(t)==Az}var su=Pz,Tz=Ns,Oz=su,Fz=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$z=/^\w*$/;function Rz(t,r){if(Tz(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Oz(t)?!0:$z.test(t)||!Fz.test(t)||r!=null&&t in Object(r)}var R2=Rz;function Dz(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var qi=Dz;const nu=dr(qi);var Mz=qo,Iz=qi,Lz="[object AsyncFunction]",Bz="[object Function]",zz="[object GeneratorFunction]",qz="[object Proxy]";function Vz(t){if(!Iz(t))return!1;var r=Mz(t);return r==Bz||r==zz||r==Lz||r==qz}var D2=Vz;const Et=dr(D2);var Uz=so,Wz=Uz["__core-js_shared__"],Hz=Wz,Hb=Hz,T4=function(){var t=/[^.]+$/.exec(Hb&&Hb.keys&&Hb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Kz(t){return!!T4&&T4 in t}var Gz=Kz,Xz=Function.prototype,Yz=Xz.toString;function Qz(t){if(t!=null){try{return Yz.call(t)}catch{}try{return t+""}catch{}}return""}var iP=Qz,Jz=D2,Zz=Gz,eq=qi,tq=iP,rq=/[\\^$.*+?()[\]{}|]/g,aq=/^\[object .+?Constructor\]$/,sq=Function.prototype,nq=Object.prototype,oq=sq.toString,iq=nq.hasOwnProperty,lq=RegExp("^"+oq.call(iq).replace(rq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cq(t){if(!eq(t)||Zz(t))return!1;var r=Jz(t)?lq:aq;return r.test(tq(t))}var dq=cq;function uq(t,r){return t==null?void 0:t[r]}var mq=uq,xq=dq,pq=mq;function hq(t,r){var a=pq(t,r);return xq(a)?a:void 0}var rc=hq,fq=rc,gq=fq(Object,"create"),mg=gq,O4=mg;function bq(){this.__data__=O4?O4(null):{},this.size=0}var vq=bq;function yq(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var jq=yq,Nq=mg,wq="__lodash_hash_undefined__",_q=Object.prototype,Sq=_q.hasOwnProperty;function Cq(t){var r=this.__data__;if(Nq){var a=r[t];return a===wq?void 0:a}return Sq.call(r,t)?r[t]:void 0}var kq=Cq,Eq=mg,Aq=Object.prototype,Pq=Aq.hasOwnProperty;function Tq(t){var r=this.__data__;return Eq?r[t]!==void 0:Pq.call(r,t)}var Oq=Tq,Fq=mg,$q="__lodash_hash_undefined__";function Rq(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Fq&&r===void 0?$q:r,this}var Dq=Rq,Mq=vq,Iq=jq,Lq=kq,Bq=Oq,zq=Dq;function ou(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}ou.prototype.clear=Mq;ou.prototype.delete=Iq;ou.prototype.get=Lq;ou.prototype.has=Bq;ou.prototype.set=zq;var qq=ou;function Vq(){this.__data__=[],this.size=0}var Uq=Vq;function Wq(t,r){return t===r||t!==t&&r!==r}var M2=Wq,Hq=M2;function Kq(t,r){for(var a=t.length;a--;)if(Hq(t[a][0],r))return a;return-1}var xg=Kq,Gq=xg,Xq=Array.prototype,Yq=Xq.splice;function Qq(t){var r=this.__data__,a=Gq(r,t);if(a<0)return!1;var s=r.length-1;return a==s?r.pop():Yq.call(r,a,1),--this.size,!0}var Jq=Qq,Zq=xg;function eV(t){var r=this.__data__,a=Zq(r,t);return a<0?void 0:r[a][1]}var tV=eV,rV=xg;function aV(t){return rV(this.__data__,t)>-1}var sV=aV,nV=xg;function oV(t,r){var a=this.__data__,s=nV(a,t);return s<0?(++this.size,a.push([t,r])):a[s][1]=r,this}var iV=oV,lV=Uq,cV=Jq,dV=tV,uV=sV,mV=iV;function iu(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}iu.prototype.clear=lV;iu.prototype.delete=cV;iu.prototype.get=dV;iu.prototype.has=uV;iu.prototype.set=mV;var pg=iu,xV=rc,pV=so,hV=xV(pV,"Map"),I2=hV,F4=qq,fV=pg,gV=I2;function bV(){this.size=0,this.__data__={hash:new F4,map:new(gV||fV),string:new F4}}var vV=bV;function yV(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}var jV=yV,NV=jV;function wV(t,r){var a=t.__data__;return NV(r)?a[typeof r=="string"?"string":"hash"]:a.map}var hg=wV,_V=hg;function SV(t){var r=_V(this,t).delete(t);return this.size-=r?1:0,r}var CV=SV,kV=hg;function EV(t){return kV(this,t).get(t)}var AV=EV,PV=hg;function TV(t){return PV(this,t).has(t)}var OV=TV,FV=hg;function $V(t,r){var a=FV(this,t),s=a.size;return a.set(t,r),this.size+=a.size==s?0:1,this}var RV=$V,DV=vV,MV=CV,IV=AV,LV=OV,BV=RV;function lu(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var s=t[r];this.set(s[0],s[1])}}lu.prototype.clear=DV;lu.prototype.delete=MV;lu.prototype.get=IV;lu.prototype.has=LV;lu.prototype.set=BV;var L2=lu,lP=L2,zV="Expected a function";function B2(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(zV);var a=function(){var s=arguments,n=r?r.apply(this,s):s[0],o=a.cache;if(o.has(n))return o.get(n);var i=t.apply(this,s);return a.cache=o.set(n,i)||o,i};return a.cache=new(B2.Cache||lP),a}B2.Cache=lP;var cP=B2;const qV=dr(cP);var VV=cP,UV=500;function WV(t){var r=VV(t,function(s){return a.size===UV&&a.clear(),s}),a=r.cache;return r}var HV=WV,KV=HV,GV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XV=/\\(\\)?/g,YV=KV(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(GV,function(a,s,n,o){r.push(n?o.replace(XV,"$1"):s||a)}),r}),QV=YV;function JV(t,r){for(var a=-1,s=t==null?0:t.length,n=Array(s);++a<s;)n[a]=r(t[a],a,t);return n}var z2=JV,$4=Jx,ZV=z2,eU=Ns,tU=su,R4=$4?$4.prototype:void 0,D4=R4?R4.toString:void 0;function dP(t){if(typeof t=="string")return t;if(eU(t))return ZV(t,dP)+"";if(tU(t))return D4?D4.call(t):"";var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var rU=dP,aU=rU;function sU(t){return t==null?"":aU(t)}var uP=sU,nU=Ns,oU=R2,iU=QV,lU=uP;function cU(t,r){return nU(t)?t:oU(t,r)?[t]:iU(lU(t))}var mP=cU,dU=su;function uU(t){if(typeof t=="string"||dU(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var fg=uU,mU=mP,xU=fg;function pU(t,r){r=mU(r,t);for(var a=0,s=r.length;t!=null&&a<s;)t=t[xU(r[a++])];return a&&a==s?t:void 0}var q2=pU,hU=q2;function fU(t,r,a){var s=t==null?void 0:hU(t,r);return s===void 0?a:s}var xP=fU;const Is=dr(xP);function gU(t){return t==null}var bU=gU;const Ft=dr(bU);var vU=qo,yU=Ns,jU=Vo,NU="[object String]";function wU(t){return typeof t=="string"||!yU(t)&&jU(t)&&vU(t)==NU}var _U=wU;const zl=dr(_U);var pP={exports:{}},ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2=Symbol.for("react.element"),U2=Symbol.for("react.portal"),gg=Symbol.for("react.fragment"),bg=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),jg=Symbol.for("react.context"),SU=Symbol.for("react.server_context"),Ng=Symbol.for("react.forward_ref"),wg=Symbol.for("react.suspense"),_g=Symbol.for("react.suspense_list"),Sg=Symbol.for("react.memo"),Cg=Symbol.for("react.lazy"),CU=Symbol.for("react.offscreen"),hP;hP=Symbol.for("react.module.reference");function ln(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case V2:switch(t=t.type,t){case gg:case vg:case bg:case wg:case _g:return t;default:switch(t=t&&t.$$typeof,t){case SU:case jg:case Ng:case Cg:case Sg:case yg:return t;default:return r}}case U2:return r}}}ur.ContextConsumer=jg;ur.ContextProvider=yg;ur.Element=V2;ur.ForwardRef=Ng;ur.Fragment=gg;ur.Lazy=Cg;ur.Memo=Sg;ur.Portal=U2;ur.Profiler=vg;ur.StrictMode=bg;ur.Suspense=wg;ur.SuspenseList=_g;ur.isAsyncMode=function(){return!1};ur.isConcurrentMode=function(){return!1};ur.isContextConsumer=function(t){return ln(t)===jg};ur.isContextProvider=function(t){return ln(t)===yg};ur.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===V2};ur.isForwardRef=function(t){return ln(t)===Ng};ur.isFragment=function(t){return ln(t)===gg};ur.isLazy=function(t){return ln(t)===Cg};ur.isMemo=function(t){return ln(t)===Sg};ur.isPortal=function(t){return ln(t)===U2};ur.isProfiler=function(t){return ln(t)===vg};ur.isStrictMode=function(t){return ln(t)===bg};ur.isSuspense=function(t){return ln(t)===wg};ur.isSuspenseList=function(t){return ln(t)===_g};ur.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===gg||t===vg||t===bg||t===wg||t===_g||t===CU||typeof t=="object"&&t!==null&&(t.$$typeof===Cg||t.$$typeof===Sg||t.$$typeof===yg||t.$$typeof===jg||t.$$typeof===Ng||t.$$typeof===hP||t.getModuleId!==void 0)};ur.typeOf=ln;pP.exports=ur;var kU=pP.exports,EU=qo,AU=Vo,PU="[object Number]";function TU(t){return typeof t=="number"||AU(t)&&EU(t)==PU}var fP=TU;const OU=dr(fP);var FU=fP;function $U(t){return FU(t)&&t!=+t}var RU=$U;const cu=dr(RU);var Ja=function(r){return r===0?0:r>0?1:-1},xl=function(r){return zl(r)&&r.indexOf("%")===r.length-1},at=function(r){return OU(r)&&!cu(r)},DU=function(r){return Ft(r)},pa=function(r){return at(r)||zl(r)},MU=0,ac=function(r){var a=++MU;return"".concat(r||"").concat(a)},Za=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(r)&&!zl(r))return s;var o;if(xl(r)){var i=r.indexOf("%");o=a*parseFloat(r.slice(0,i))/100}else o=+r;return cu(o)&&(o=s),n&&o>a&&(o=a),o},ci=function(r){if(!r)return null;var a=Object.keys(r);return a&&a.length?r[a[0]]:null},IU=function(r){if(!Array.isArray(r))return!1;for(var a=r.length,s={},n=0;n<a;n++)if(!s[r[n]])s[r[n]]=!0;else return!0;return!1},ma=function(r,a){return at(r)&&at(a)?function(s){return r+s*(a-r)}:function(){return a}};function fh(t,r,a){return!t||!t.length?null:t.find(function(s){return s&&(typeof r=="function"?r(s):Is(s,r))===a})}var LU=function(r,a){return at(r)&&at(a)?r-a:zl(r)&&zl(a)?r.localeCompare(a):r instanceof Date&&a instanceof Date?r.getTime()-a.getTime():String(r).localeCompare(String(a))};function Zc(t,r){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(r,a)||t[a]!==r[a]))return!1;for(var s in r)if({}.hasOwnProperty.call(r,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qy(t)}var BU=["viewBox","children"],zU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],M4=["points","pathLength"],Kb={svg:BU,polygon:M4,polyline:M4},W2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gh=function(r,a){if(!r||typeof r=="function"||typeof r=="boolean")return null;var s=r;if(j.isValidElement(r)&&(s=r.props),!nu(s))return null;var n={};return Object.keys(s).forEach(function(o){W2.includes(o)&&(n[o]=a||function(i){return s[o](s,i)})}),n},qU=function(r,a,s){return function(n){return r(a,s,n),null}},ql=function(r,a,s){if(!nu(r)||qy(r)!=="object")return null;var n=null;return Object.keys(r).forEach(function(o){var i=r[o];W2.includes(o)&&typeof i=="function"&&(n||(n={}),n[o]=qU(i,a,s))}),n},VU=["children"],UU=["children"];function I4(t,r){if(t==null)return{};var a=WU(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function WU(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vy(t)}var L4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},No=function(r){return typeof r=="string"?r:r?r.displayName||r.name||"Component":""},B4=null,Gb=null,H2=function t(r){if(r===B4&&Array.isArray(Gb))return Gb;var a=[];return j.Children.forEach(r,function(s){Ft(s)||(kU.isFragment(s)?a=a.concat(t(s.props.children)):a.push(s))}),Gb=a,B4=r,a};function Ls(t,r){var a=[],s=[];return Array.isArray(r)?s=r.map(function(n){return No(n)}):s=[No(r)],H2(t).forEach(function(n){var o=Is(n,"type.displayName")||Is(n,"type.name");s.indexOf(o)!==-1&&a.push(n)}),a}function Ps(t,r){var a=Ls(t,r);return a&&a[0]}var z4=function(r){if(!r||!r.props)return!1;var a=r.props,s=a.width,n=a.height;return!(!at(s)||s<=0||!at(n)||n<=0)},HU=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],KU=function(r){return r&&r.type&&zl(r.type)&&HU.indexOf(r.type)>=0},gP=function(r){return r&&Vy(r)==="object"&&"clipDot"in r},GU=function(r,a,s,n){var o,i=(o=Kb==null?void 0:Kb[n])!==null&&o!==void 0?o:[];return a.startsWith("data-")||!Et(r)&&(n&&i.includes(a)||zU.includes(a))||s&&W2.includes(a)},St=function(r,a,s){if(!r||typeof r=="function"||typeof r=="boolean")return null;var n=r;if(j.isValidElement(r)&&(n=r.props),!nu(n))return null;var o={};return Object.keys(n).forEach(function(i){var l;GU((l=n)===null||l===void 0?void 0:l[i],i,a,s)&&(o[i]=n[i])}),o},Uy=function t(r,a){if(r===a)return!0;var s=j.Children.count(r);if(s!==j.Children.count(a))return!1;if(s===0)return!0;if(s===1)return q4(Array.isArray(r)?r[0]:r,Array.isArray(a)?a[0]:a);for(var n=0;n<s;n++){var o=r[n],i=a[n];if(Array.isArray(o)||Array.isArray(i)){if(!t(o,i))return!1}else if(!q4(o,i))return!1}return!0},q4=function(r,a){if(Ft(r)&&Ft(a))return!0;if(!Ft(r)&&!Ft(a)){var s=r.props||{},n=s.children,o=I4(s,VU),i=a.props||{},l=i.children,c=I4(i,UU);return n&&l?Zc(o,c)&&Uy(n,l):!n&&!l?Zc(o,c):!1}return!1},V4=function(r,a){var s=[],n={};return H2(r).forEach(function(o,i){if(KU(o))s.push(o);else if(o){var l=No(o.type),c=a[l]||{},d=c.handler,u=c.once;if(d&&(!u||!n[l])){var m=d(o,l,i);s.push(m),n[l]=!0}}}),s},XU=function(r){var a=r&&r.type;return a&&L4[a]?L4[a]:null},YU=function(r,a){return H2(a).indexOf(r)},QU=["children","width","height","viewBox","className","style","title","desc"];function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Wy.apply(this,arguments)}function JU(t,r){if(t==null)return{};var a=ZU(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function ZU(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Hy(t){var r=t.children,a=t.width,s=t.height,n=t.viewBox,o=t.className,i=t.style,l=t.title,c=t.desc,d=JU(t,QU),u=n||{width:a,height:s,x:0,y:0},m=Mt("recharts-surface",o);return pe.createElement("svg",Wy({},St(d,!0,"svg"),{className:m,width:a,height:s,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),pe.createElement("title",null,l),pe.createElement("desc",null,c),r)}var eW=["children","className"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Ky.apply(this,arguments)}function tW(t,r){if(t==null)return{};var a=rW(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function rW(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var Vt=pe.forwardRef(function(t,r){var a=t.children,s=t.className,n=tW(t,eW),o=Mt("recharts-layer",s);return pe.createElement("g",Ky({className:o},St(n,!0),{ref:r}),a)}),kn=function(r,a){for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o]};function aW(t,r,a){var s=-1,n=t.length;r<0&&(r=-r>n?0:n+r),a=a>n?n:a,a<0&&(a+=n),n=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(n);++s<n;)o[s]=t[s+r];return o}var sW=aW,nW=sW;function oW(t,r,a){var s=t.length;return a=a===void 0?s:a,!r&&a>=s?t:nW(t,r,a)}var iW=oW,lW="\\ud800-\\udfff",cW="\\u0300-\\u036f",dW="\\ufe20-\\ufe2f",uW="\\u20d0-\\u20ff",mW=cW+dW+uW,xW="\\ufe0e\\ufe0f",pW="\\u200d",hW=RegExp("["+pW+lW+mW+xW+"]");function fW(t){return hW.test(t)}var bP=fW;function gW(t){return t.split("")}var bW=gW,vP="\\ud800-\\udfff",vW="\\u0300-\\u036f",yW="\\ufe20-\\ufe2f",jW="\\u20d0-\\u20ff",NW=vW+yW+jW,wW="\\ufe0e\\ufe0f",_W="["+vP+"]",Gy="["+NW+"]",Xy="\\ud83c[\\udffb-\\udfff]",SW="(?:"+Gy+"|"+Xy+")",yP="[^"+vP+"]",jP="(?:\\ud83c[\\udde6-\\uddff]){2}",NP="[\\ud800-\\udbff][\\udc00-\\udfff]",CW="\\u200d",wP=SW+"?",_P="["+wW+"]?",kW="(?:"+CW+"(?:"+[yP,jP,NP].join("|")+")"+_P+wP+")*",EW=_P+wP+kW,AW="(?:"+[yP+Gy+"?",Gy,jP,NP,_W].join("|")+")",PW=RegExp(Xy+"(?="+Xy+")|"+AW+EW,"g");function TW(t){return t.match(PW)||[]}var OW=TW,FW=bW,$W=bP,RW=OW;function DW(t){return $W(t)?RW(t):FW(t)}var MW=DW,IW=iW,LW=bP,BW=MW,zW=uP;function qW(t){return function(r){r=zW(r);var a=LW(r)?BW(r):void 0,s=a?a[0]:r.charAt(0),n=a?IW(a,1).join(""):r.slice(1);return s[t]()+n}}var VW=qW,UW=VW,WW=UW("toUpperCase"),HW=WW;const kg=dr(HW);function br(t){return function(){return t}}const SP=Math.cos,bh=Math.sin,Fn=Math.sqrt,vh=Math.PI,Eg=2*vh,Yy=Math.PI,Qy=2*Yy,al=1e-6,KW=Qy-al;function CP(t){this._+=t[0];for(let r=1,a=t.length;r<a;++r)this._+=arguments[r]+t[r]}function GW(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return CP;const a=10**r;return function(s){this._+=s[0];for(let n=1,o=s.length;n<o;++n)this._+=Math.round(arguments[n]*a)/a+s[n]}}class XW{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?CP:GW(r)}moveTo(r,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,a){this._append`L${this._x1=+r},${this._y1=+a}`}quadraticCurveTo(r,a,s,n){this._append`Q${+r},${+a},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(r,a,s,n,o,i){this._append`C${+r},${+a},${+s},${+n},${this._x1=+o},${this._y1=+i}`}arcTo(r,a,s,n,o){if(r=+r,a=+a,s=+s,n=+n,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,l=this._y1,c=s-r,d=n-a,u=i-r,m=l-a,x=u*u+m*m;if(this._x1===null)this._append`M${this._x1=r},${this._y1=a}`;else if(x>al)if(!(Math.abs(m*c-d*u)>al)||!o)this._append`L${this._x1=r},${this._y1=a}`;else{let h=s-i,v=n-l,p=c*c+d*d,g=h*h+v*v,y=Math.sqrt(p),f=Math.sqrt(x),b=o*Math.tan((Yy-Math.acos((p+x-g)/(2*y*f)))/2),N=b/f,_=b/y;Math.abs(N-1)>al&&this._append`L${r+N*u},${a+N*m}`,this._append`A${o},${o},0,0,${+(m*h>u*v)},${this._x1=r+_*c},${this._y1=a+_*d}`}}arc(r,a,s,n,o,i){if(r=+r,a=+a,s=+s,i=!!i,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(n),c=s*Math.sin(n),d=r+l,u=a+c,m=1^i,x=i?n-o:o-n;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>al||Math.abs(this._y1-u)>al)&&this._append`L${d},${u}`,s&&(x<0&&(x=x%Qy+Qy),x>KW?this._append`A${s},${s},0,1,${m},${r-l},${a-c}A${s},${s},0,1,${m},${this._x1=d},${this._y1=u}`:x>al&&this._append`A${s},${s},0,${+(x>=Yy)},${m},${this._x1=r+s*Math.cos(o)},${this._y1=a+s*Math.sin(o)}`)}rect(r,a,s,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function K2(t){let r=3;return t.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);r=s}return t},()=>new XW(r)}function G2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kP(t){this._context=t}kP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function Ag(t){return new kP(t)}function EP(t){return t[0]}function AP(t){return t[1]}function PP(t,r){var a=br(!0),s=null,n=Ag,o=null,i=K2(l);t=typeof t=="function"?t:t===void 0?EP:br(t),r=typeof r=="function"?r:r===void 0?AP:br(r);function l(c){var d,u=(c=G2(c)).length,m,x=!1,h;for(s==null&&(o=n(h=i())),d=0;d<=u;++d)!(d<u&&a(m=c[d],d,c))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+t(m,d,c),+r(m,d,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:br(+c),l):t},l.y=function(c){return arguments.length?(r=typeof c=="function"?c:br(+c),l):r},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:br(!!c),l):a},l.curve=function(c){return arguments.length?(n=c,s!=null&&(o=n(s)),l):n},l.context=function(c){return arguments.length?(c==null?s=o=null:o=n(s=c),l):s},l}function V0(t,r,a){var s=null,n=br(!0),o=null,i=Ag,l=null,c=K2(d);t=typeof t=="function"?t:t===void 0?EP:br(+t),r=typeof r=="function"?r:br(r===void 0?0:+r),a=typeof a=="function"?a:a===void 0?AP:br(+a);function d(m){var x,h,v,p=(m=G2(m)).length,g,y=!1,f,b=new Array(p),N=new Array(p);for(o==null&&(l=i(f=c())),x=0;x<=p;++x){if(!(x<p&&n(g=m[x],x,m))===y)if(y=!y)h=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=x-1;v>=h;--v)l.point(b[v],N[v]);l.lineEnd(),l.areaEnd()}y&&(b[x]=+t(g,x,m),N[x]=+r(g,x,m),l.point(s?+s(g,x,m):b[x],a?+a(g,x,m):N[x]))}if(f)return l=null,f+""||null}function u(){return PP().defined(n).curve(i).context(o)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:br(+m),s=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:br(+m),d):t},d.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:br(+m),d):s},d.y=function(m){return arguments.length?(r=typeof m=="function"?m:br(+m),a=null,d):r},d.y0=function(m){return arguments.length?(r=typeof m=="function"?m:br(+m),d):r},d.y1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:br(+m),d):a},d.lineX0=d.lineY0=function(){return u().x(t).y(r)},d.lineY1=function(){return u().x(t).y(a)},d.lineX1=function(){return u().x(s).y(r)},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:br(!!m),d):n},d.curve=function(m){return arguments.length?(i=m,o!=null&&(l=i(o)),d):i},d.context=function(m){return arguments.length?(m==null?o=l=null:l=i(o=m),d):o},d}class TP{constructor(r,a){this._context=r,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,a){switch(r=+r,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,a,r,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,r,this._y0,r,a);break}}this._x0=r,this._y0=a}}function YW(t){return new TP(t,!0)}function QW(t){return new TP(t,!1)}const X2={draw(t,r){const a=Fn(r/vh);t.moveTo(a,0),t.arc(0,0,a,0,Eg)}},JW={draw(t,r){const a=Fn(r/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},OP=Fn(1/3),ZW=OP*2,eH={draw(t,r){const a=Fn(r/ZW),s=a*OP;t.moveTo(0,-a),t.lineTo(s,0),t.lineTo(0,a),t.lineTo(-s,0),t.closePath()}},tH={draw(t,r){const a=Fn(r),s=-a/2;t.rect(s,s,a,a)}},rH=.8908130915292852,FP=bh(vh/10)/bh(7*vh/10),aH=bh(Eg/10)*FP,sH=-SP(Eg/10)*FP,nH={draw(t,r){const a=Fn(r*rH),s=aH*a,n=sH*a;t.moveTo(0,-a),t.lineTo(s,n);for(let o=1;o<5;++o){const i=Eg*o/5,l=SP(i),c=bh(i);t.lineTo(c*a,-l*a),t.lineTo(l*s-c*n,c*s+l*n)}t.closePath()}},Xb=Fn(3),oH={draw(t,r){const a=-Fn(r/(Xb*3));t.moveTo(0,a*2),t.lineTo(-Xb*a,-a),t.lineTo(Xb*a,-a),t.closePath()}},Hs=-.5,Ks=Fn(3)/2,Jy=1/Fn(12),iH=(Jy/2+1)*3,lH={draw(t,r){const a=Fn(r/iH),s=a/2,n=a*Jy,o=s,i=a*Jy+a,l=-o,c=i;t.moveTo(s,n),t.lineTo(o,i),t.lineTo(l,c),t.lineTo(Hs*s-Ks*n,Ks*s+Hs*n),t.lineTo(Hs*o-Ks*i,Ks*o+Hs*i),t.lineTo(Hs*l-Ks*c,Ks*l+Hs*c),t.lineTo(Hs*s+Ks*n,Hs*n-Ks*s),t.lineTo(Hs*o+Ks*i,Hs*i-Ks*o),t.lineTo(Hs*l+Ks*c,Hs*c-Ks*l),t.closePath()}};function cH(t,r){let a=null,s=K2(n);t=typeof t=="function"?t:br(t||X2),r=typeof r=="function"?r:br(r===void 0?64:+r);function n(){let o;if(a||(a=o=s()),t.apply(this,arguments).draw(a,+r.apply(this,arguments)),o)return a=null,o+""||null}return n.type=function(o){return arguments.length?(t=typeof o=="function"?o:br(o),n):t},n.size=function(o){return arguments.length?(r=typeof o=="function"?o:br(+o),n):r},n.context=function(o){return arguments.length?(a=o??null,n):a},n}function yh(){}function jh(t,r,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+a)/6)}function $P(t){this._context=t}$P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function dH(t){return new $P(t)}function RP(t){this._context=t}RP.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:jh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function uH(t){return new RP(t)}function DP(t){this._context=t}DP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:jh(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function mH(t){return new DP(t)}function MP(t){this._context=t}MP.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function xH(t){return new MP(t)}function U4(t){return t<0?-1:1}function W4(t,r,a){var s=t._x1-t._x0,n=r-t._x1,o=(t._y1-t._y0)/(s||n<0&&-0),i=(a-t._y1)/(n||s<0&&-0),l=(o*n+i*s)/(s+n);return(U4(o)+U4(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function H4(t,r){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-r)/2:r}function Yb(t,r,a){var s=t._x0,n=t._y0,o=t._x1,i=t._y1,l=(o-s)/3;t._context.bezierCurveTo(s+l,n+l*r,o-l,i-l*a,o,i)}function Nh(t){this._context=t}Nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yb(this,this._t0,H4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var a=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Yb(this,H4(this,a=W4(this,t,r)),a);break;default:Yb(this,this._t0,a=W4(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=a}}};function IP(t){this._context=new LP(t)}(IP.prototype=Object.create(Nh.prototype)).point=function(t,r){Nh.prototype.point.call(this,r,t)};function LP(t){this._context=t}LP.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,a,s,n,o){this._context.bezierCurveTo(r,t,s,a,o,n)}};function pH(t){return new Nh(t)}function hH(t){return new IP(t)}function BP(t){this._context=t}BP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),a===2)this._context.lineTo(t[1],r[1]);else for(var s=K4(t),n=K4(r),o=0,i=1;i<a;++o,++i)this._context.bezierCurveTo(s[0][o],n[0][o],s[1][o],n[1][o],t[i],r[i]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function K4(t){var r,a=t.length-1,s,n=new Array(a),o=new Array(a),i=new Array(a);for(n[0]=0,o[0]=2,i[0]=t[0]+2*t[1],r=1;r<a-1;++r)n[r]=1,o[r]=4,i[r]=4*t[r]+2*t[r+1];for(n[a-1]=2,o[a-1]=7,i[a-1]=8*t[a-1]+t[a],r=1;r<a;++r)s=n[r]/o[r-1],o[r]-=s,i[r]-=s*i[r-1];for(n[a-1]=i[a-1]/o[a-1],r=a-2;r>=0;--r)n[r]=(i[r]-n[r+1])/o[r];for(o[a-1]=(t[a]+n[a-1])/2,r=0;r<a-1;++r)o[r]=2*t[r+1]-n[r+1];return[n,o]}function fH(t){return new BP(t)}function Pg(t,r){this._context=t,this._t=r}Pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}break}}this._x=t,this._y=r}};function gH(t){return new Pg(t,.5)}function bH(t){return new Pg(t,0)}function vH(t){return new Pg(t,1)}function wd(t,r){if((i=t.length)>1)for(var a=1,s,n,o=t[r[0]],i,l=o.length;a<i;++a)for(n=o,o=t[r[a]],s=0;s<l;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function Zy(t){for(var r=t.length,a=new Array(r);--r>=0;)a[r]=r;return a}function yH(t,r){return t[r]}function jH(t){const r=[];return r.key=t,r}function NH(){var t=br([]),r=Zy,a=wd,s=yH;function n(o){var i=Array.from(t.apply(this,arguments),jH),l,c=i.length,d=-1,u;for(const m of o)for(l=0,++d;l<c;++l)(i[l][d]=[0,+s(m,i[l].key,d,o)]).data=m;for(l=0,u=G2(r(i));l<c;++l)i[u[l]].index=l;return a(i,u),i}return n.keys=function(o){return arguments.length?(t=typeof o=="function"?o:br(Array.from(o)),n):t},n.value=function(o){return arguments.length?(s=typeof o=="function"?o:br(+o),n):s},n.order=function(o){return arguments.length?(r=o==null?Zy:typeof o=="function"?o:br(Array.from(o)),n):r},n.offset=function(o){return arguments.length?(a=o??wd,n):a},n}function wH(t,r){if((s=t.length)>0){for(var a,s,n=0,o=t[0].length,i;n<o;++n){for(i=a=0;a<s;++a)i+=t[a][n][1]||0;if(i)for(a=0;a<s;++a)t[a][n][1]/=i}wd(t,r)}}function _H(t,r){if((n=t.length)>0){for(var a=0,s=t[r[0]],n,o=s.length;a<o;++a){for(var i=0,l=0;i<n;++i)l+=t[i][a][1]||0;s[a][1]+=s[a][0]=-l/2}wd(t,r)}}function SH(t,r){if(!(!((i=t.length)>0)||!((o=(n=t[r[0]]).length)>0))){for(var a=0,s=1,n,o,i;s<o;++s){for(var l=0,c=0,d=0;l<i;++l){for(var u=t[r[l]],m=u[s][1]||0,x=u[s-1][1]||0,h=(m-x)/2,v=0;v<l;++v){var p=t[r[v]],g=p[s][1]||0,y=p[s-1][1]||0;h+=g-y}c+=m,d+=h*m}n[s-1][1]+=n[s-1][0]=a,c&&(a-=d/c)}n[s-1][1]+=n[s-1][0]=a,wd(t,r)}}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qm(t)}var CH=["type","size","sizeType"];function ej(){return ej=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},ej.apply(this,arguments)}function G4(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function X4(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?G4(Object(a),!0).forEach(function(s){kH(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G4(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function kH(t,r,a){return r=EH(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function EH(t){var r=AH(t,"string");return Qm(r)=="symbol"?r:r+""}function AH(t,r){if(Qm(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Qm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function PH(t,r){if(t==null)return{};var a=TH(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function TH(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var zP={symbolCircle:X2,symbolCross:JW,symbolDiamond:eH,symbolSquare:tH,symbolStar:nH,symbolTriangle:oH,symbolWye:lH},OH=Math.PI/180,FH=function(r){var a="symbol".concat(kg(r));return zP[a]||X2},$H=function(r,a,s){if(a==="area")return r;switch(s){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var n=18*OH;return 1.25*r*r*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},RH=function(r,a){zP["symbol".concat(kg(r))]=a},Y2=function(r){var a=r.type,s=a===void 0?"circle":a,n=r.size,o=n===void 0?64:n,i=r.sizeType,l=i===void 0?"area":i,c=PH(r,CH),d=X4(X4({},c),{},{type:s,size:o,sizeType:l}),u=function(){var g=FH(s),y=cH().type(g).size($H(o,l,s));return y()},m=d.className,x=d.cx,h=d.cy,v=St(d,!0);return x===+x&&h===+h&&o===+o?pe.createElement("path",ej({},v,{className:Mt("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(h,")"),d:u()})):null};Y2.registerSymbol=RH;function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_d(t)}function tj(){return tj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},tj.apply(this,arguments)}function Y4(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function DH(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Y4(Object(a),!0).forEach(function(s){Jm(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y4(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function MH(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function IH(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,VP(s.key),s)}}function LH(t,r,a){return r&&IH(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function BH(t,r,a){return r=wh(r),zH(t,qP()?Reflect.construct(r,a||[],wh(t).constructor):r.apply(t,a))}function zH(t,r){if(r&&(_d(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qH(t)}function qH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qP=function(){return!!t})()}function wh(t){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wh(t)}function VH(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&rj(t,r)}function rj(t,r){return rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},rj(t,r)}function Jm(t,r,a){return r=VP(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function VP(t){var r=UH(t,"string");return _d(r)=="symbol"?r:r+""}function UH(t,r){if(_d(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(_d(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gs=32,Q2=function(t){function r(){return MH(this,r),BH(this,r,arguments)}return VH(r,t),LH(r,[{key:"renderIcon",value:function(s){var n=this.props.inactiveColor,o=Gs/2,i=Gs/6,l=Gs/3,c=s.inactive?n:s.color;if(s.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:o,x2:Gs,y2:o,className:"recharts-legend-icon"});if(s.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(Gs,"M").concat(2*l,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(s.type==="rect")return pe.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(s.legendIcon)){var d=DH({},s);return delete d.legendIcon,pe.cloneElement(s.legendIcon,d)}return pe.createElement(Y2,{fill:c,cx:o,cy:o,size:Gs,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,n=this.props,o=n.payload,i=n.iconSize,l=n.layout,c=n.formatter,d=n.inactiveColor,u={x:0,y:0,width:Gs,height:Gs},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,v){var p=h.formatter||c,g=Mt(Jm(Jm({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Et(h.value)?null:h.value;kn(!Et(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var f=h.inactive?d:h.color;return pe.createElement("li",tj({className:g,style:m,key:"legend-item-".concat(v)},ql(s.props,h,v)),pe.createElement(Hy,{width:i,height:i,viewBox:u,style:x},s.renderIcon(h)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},p?p(y,h,v):y))})}},{key:"render",value:function(){var s=this.props,n=s.payload,o=s.layout,i=s.align;if(!n||!n.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Jm(Q2,"displayName","Legend");Jm(Q2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var WH=pg;function HH(){this.__data__=new WH,this.size=0}var KH=HH;function GH(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}var XH=GH;function YH(t){return this.__data__.get(t)}var QH=YH;function JH(t){return this.__data__.has(t)}var ZH=JH,eK=pg,tK=I2,rK=L2,aK=200;function sK(t,r){var a=this.__data__;if(a instanceof eK){var s=a.__data__;if(!tK||s.length<aK-1)return s.push([t,r]),this.size=++a.size,this;a=this.__data__=new rK(s)}return a.set(t,r),this.size=a.size,this}var nK=sK,oK=pg,iK=KH,lK=XH,cK=QH,dK=ZH,uK=nK;function du(t){var r=this.__data__=new oK(t);this.size=r.size}du.prototype.clear=iK;du.prototype.delete=lK;du.prototype.get=cK;du.prototype.has=dK;du.prototype.set=uK;var UP=du,mK="__lodash_hash_undefined__";function xK(t){return this.__data__.set(t,mK),this}var pK=xK;function hK(t){return this.__data__.has(t)}var fK=hK,gK=L2,bK=pK,vK=fK;function _h(t){var r=-1,a=t==null?0:t.length;for(this.__data__=new gK;++r<a;)this.add(t[r])}_h.prototype.add=_h.prototype.push=bK;_h.prototype.has=vK;var WP=_h;function yK(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}var HP=yK;function jK(t,r){return t.has(r)}var KP=jK,NK=WP,wK=HP,_K=KP,SK=1,CK=2;function kK(t,r,a,s,n,o){var i=a&SK,l=t.length,c=r.length;if(l!=c&&!(i&&c>l))return!1;var d=o.get(t),u=o.get(r);if(d&&u)return d==r&&u==t;var m=-1,x=!0,h=a&CK?new NK:void 0;for(o.set(t,r),o.set(r,t);++m<l;){var v=t[m],p=r[m];if(s)var g=i?s(p,v,m,r,t,o):s(v,p,m,t,r,o);if(g!==void 0){if(g)continue;x=!1;break}if(h){if(!wK(r,function(y,f){if(!_K(h,f)&&(v===y||n(v,y,a,s,o)))return h.push(f)})){x=!1;break}}else if(!(v===p||n(v,p,a,s,o))){x=!1;break}}return o.delete(t),o.delete(r),x}var GP=kK,EK=so,AK=EK.Uint8Array,PK=AK;function TK(t){var r=-1,a=Array(t.size);return t.forEach(function(s,n){a[++r]=[n,s]}),a}var OK=TK;function FK(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}var J2=FK,Q4=Jx,J4=PK,$K=M2,RK=GP,DK=OK,MK=J2,IK=1,LK=2,BK="[object Boolean]",zK="[object Date]",qK="[object Error]",VK="[object Map]",UK="[object Number]",WK="[object RegExp]",HK="[object Set]",KK="[object String]",GK="[object Symbol]",XK="[object ArrayBuffer]",YK="[object DataView]",Z4=Q4?Q4.prototype:void 0,Qb=Z4?Z4.valueOf:void 0;function QK(t,r,a,s,n,o,i){switch(a){case YK:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case XK:return!(t.byteLength!=r.byteLength||!o(new J4(t),new J4(r)));case BK:case zK:case UK:return $K(+t,+r);case qK:return t.name==r.name&&t.message==r.message;case WK:case KK:return t==r+"";case VK:var l=DK;case HK:var c=s&IK;if(l||(l=MK),t.size!=r.size&&!c)return!1;var d=i.get(t);if(d)return d==r;s|=LK,i.set(t,r);var u=RK(l(t),l(r),s,n,o,i);return i.delete(t),u;case GK:if(Qb)return Qb.call(t)==Qb.call(r)}return!1}var JK=QK;function ZK(t,r){for(var a=-1,s=r.length,n=t.length;++a<s;)t[n+a]=r[a];return t}var XP=ZK,eG=XP,tG=Ns;function rG(t,r,a){var s=r(t);return tG(t)?s:eG(s,a(t))}var aG=rG;function sG(t,r){for(var a=-1,s=t==null?0:t.length,n=0,o=[];++a<s;){var i=t[a];r(i,a,t)&&(o[n++]=i)}return o}var nG=sG;function oG(){return[]}var iG=oG,lG=nG,cG=iG,dG=Object.prototype,uG=dG.propertyIsEnumerable,e3=Object.getOwnPropertySymbols,mG=e3?function(t){return t==null?[]:(t=Object(t),lG(e3(t),function(r){return uG.call(t,r)}))}:cG,xG=mG;function pG(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}var hG=pG,fG=qo,gG=Vo,bG="[object Arguments]";function vG(t){return gG(t)&&fG(t)==bG}var yG=vG,t3=yG,jG=Vo,YP=Object.prototype,NG=YP.hasOwnProperty,wG=YP.propertyIsEnumerable,_G=t3(function(){return arguments}())?t3:function(t){return jG(t)&&NG.call(t,"callee")&&!wG.call(t,"callee")},Z2=_G,Sh={exports:{}};function SG(){return!1}var CG=SG;Sh.exports;(function(t,r){var a=so,s=CG,n=r&&!r.nodeType&&r,o=n&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===n,l=i?a.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;t.exports=d})(Sh,Sh.exports);var QP=Sh.exports,kG=9007199254740991,EG=/^(?:0|[1-9]\d*)$/;function AG(t,r){var a=typeof t;return r=r??kG,!!r&&(a=="number"||a!="symbol"&&EG.test(t))&&t>-1&&t%1==0&&t<r}var eN=AG,PG=9007199254740991;function TG(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PG}var tN=TG,OG=qo,FG=tN,$G=Vo,RG="[object Arguments]",DG="[object Array]",MG="[object Boolean]",IG="[object Date]",LG="[object Error]",BG="[object Function]",zG="[object Map]",qG="[object Number]",VG="[object Object]",UG="[object RegExp]",WG="[object Set]",HG="[object String]",KG="[object WeakMap]",GG="[object ArrayBuffer]",XG="[object DataView]",YG="[object Float32Array]",QG="[object Float64Array]",JG="[object Int8Array]",ZG="[object Int16Array]",eX="[object Int32Array]",tX="[object Uint8Array]",rX="[object Uint8ClampedArray]",aX="[object Uint16Array]",sX="[object Uint32Array]",wr={};wr[YG]=wr[QG]=wr[JG]=wr[ZG]=wr[eX]=wr[tX]=wr[rX]=wr[aX]=wr[sX]=!0;wr[RG]=wr[DG]=wr[GG]=wr[MG]=wr[XG]=wr[IG]=wr[LG]=wr[BG]=wr[zG]=wr[qG]=wr[VG]=wr[UG]=wr[WG]=wr[HG]=wr[KG]=!1;function nX(t){return $G(t)&&FG(t.length)&&!!wr[OG(t)]}var oX=nX;function iX(t){return function(r){return t(r)}}var JP=iX,Ch={exports:{}};Ch.exports;(function(t,r){var a=nP,s=r&&!r.nodeType&&r,n=s&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===s,i=o&&a.process,l=function(){try{var c=n&&n.require&&n.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();t.exports=l})(Ch,Ch.exports);var lX=Ch.exports,cX=oX,dX=JP,r3=lX,a3=r3&&r3.isTypedArray,uX=a3?dX(a3):cX,ZP=uX,mX=hG,xX=Z2,pX=Ns,hX=QP,fX=eN,gX=ZP,bX=Object.prototype,vX=bX.hasOwnProperty;function yX(t,r){var a=pX(t),s=!a&&xX(t),n=!a&&!s&&hX(t),o=!a&&!s&&!n&&gX(t),i=a||s||n||o,l=i?mX(t.length,String):[],c=l.length;for(var d in t)(r||vX.call(t,d))&&!(i&&(d=="length"||n&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||fX(d,c)))&&l.push(d);return l}var jX=yX,NX=Object.prototype;function wX(t){var r=t&&t.constructor,a=typeof r=="function"&&r.prototype||NX;return t===a}var _X=wX;function SX(t,r){return function(a){return t(r(a))}}var eT=SX,CX=eT,kX=CX(Object.keys,Object),EX=kX,AX=_X,PX=EX,TX=Object.prototype,OX=TX.hasOwnProperty;function FX(t){if(!AX(t))return PX(t);var r=[];for(var a in Object(t))OX.call(t,a)&&a!="constructor"&&r.push(a);return r}var $X=FX,RX=D2,DX=tN;function MX(t){return t!=null&&DX(t.length)&&!RX(t)}var Zx=MX,IX=jX,LX=$X,BX=Zx;function zX(t){return BX(t)?IX(t):LX(t)}var Tg=zX,qX=aG,VX=xG,UX=Tg;function WX(t){return qX(t,UX,VX)}var HX=WX,s3=HX,KX=1,GX=Object.prototype,XX=GX.hasOwnProperty;function YX(t,r,a,s,n,o){var i=a&KX,l=s3(t),c=l.length,d=s3(r),u=d.length;if(c!=u&&!i)return!1;for(var m=c;m--;){var x=l[m];if(!(i?x in r:XX.call(r,x)))return!1}var h=o.get(t),v=o.get(r);if(h&&v)return h==r&&v==t;var p=!0;o.set(t,r),o.set(r,t);for(var g=i;++m<c;){x=l[m];var y=t[x],f=r[x];if(s)var b=i?s(f,y,x,r,t,o):s(y,f,x,t,r,o);if(!(b===void 0?y===f||n(y,f,a,s,o):b)){p=!1;break}g||(g=x=="constructor")}if(p&&!g){var N=t.constructor,_=r.constructor;N!=_&&"constructor"in t&&"constructor"in r&&!(typeof N=="function"&&N instanceof N&&typeof _=="function"&&_ instanceof _)&&(p=!1)}return o.delete(t),o.delete(r),p}var QX=YX,JX=rc,ZX=so,eY=JX(ZX,"DataView"),tY=eY,rY=rc,aY=so,sY=rY(aY,"Promise"),nY=sY,oY=rc,iY=so,lY=oY(iY,"Set"),tT=lY,cY=rc,dY=so,uY=cY(dY,"WeakMap"),mY=uY,aj=tY,sj=I2,nj=nY,oj=tT,ij=mY,rT=qo,uu=iP,n3="[object Map]",xY="[object Object]",o3="[object Promise]",i3="[object Set]",l3="[object WeakMap]",c3="[object DataView]",pY=uu(aj),hY=uu(sj),fY=uu(nj),gY=uu(oj),bY=uu(ij),sl=rT;(aj&&sl(new aj(new ArrayBuffer(1)))!=c3||sj&&sl(new sj)!=n3||nj&&sl(nj.resolve())!=o3||oj&&sl(new oj)!=i3||ij&&sl(new ij)!=l3)&&(sl=function(t){var r=rT(t),a=r==xY?t.constructor:void 0,s=a?uu(a):"";if(s)switch(s){case pY:return c3;case hY:return n3;case fY:return o3;case gY:return i3;case bY:return l3}return r});var vY=sl,Jb=UP,yY=GP,jY=JK,NY=QX,d3=vY,u3=Ns,m3=QP,wY=ZP,_Y=1,x3="[object Arguments]",p3="[object Array]",U0="[object Object]",SY=Object.prototype,h3=SY.hasOwnProperty;function CY(t,r,a,s,n,o){var i=u3(t),l=u3(r),c=i?p3:d3(t),d=l?p3:d3(r);c=c==x3?U0:c,d=d==x3?U0:d;var u=c==U0,m=d==U0,x=c==d;if(x&&m3(t)){if(!m3(r))return!1;i=!0,u=!1}if(x&&!u)return o||(o=new Jb),i||wY(t)?yY(t,r,a,s,n,o):jY(t,r,c,a,s,n,o);if(!(a&_Y)){var h=u&&h3.call(t,"__wrapped__"),v=m&&h3.call(r,"__wrapped__");if(h||v){var p=h?t.value():t,g=v?r.value():r;return o||(o=new Jb),n(p,g,a,s,o)}}return x?(o||(o=new Jb),NY(t,r,a,s,n,o)):!1}var kY=CY,EY=kY,f3=Vo;function aT(t,r,a,s,n){return t===r?!0:t==null||r==null||!f3(t)&&!f3(r)?t!==t&&r!==r:EY(t,r,a,s,aT,n)}var rN=aT,AY=UP,PY=rN,TY=1,OY=2;function FY(t,r,a,s){var n=a.length,o=n,i=!s;if(t==null)return!o;for(t=Object(t);n--;){var l=a[n];if(i&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++n<o;){l=a[n];var c=l[0],d=t[c],u=l[1];if(i&&l[2]){if(d===void 0&&!(c in t))return!1}else{var m=new AY;if(s)var x=s(d,u,c,t,r,m);if(!(x===void 0?PY(u,d,TY|OY,s,m):x))return!1}}return!0}var $Y=FY,RY=qi;function DY(t){return t===t&&!RY(t)}var sT=DY,MY=sT,IY=Tg;function LY(t){for(var r=IY(t),a=r.length;a--;){var s=r[a],n=t[s];r[a]=[s,n,MY(n)]}return r}var BY=LY;function zY(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}var nT=zY,qY=$Y,VY=BY,UY=nT;function WY(t){var r=VY(t);return r.length==1&&r[0][2]?UY(r[0][0],r[0][1]):function(a){return a===t||qY(a,t,r)}}var HY=WY;function KY(t,r){return t!=null&&r in Object(t)}var GY=KY,XY=mP,YY=Z2,QY=Ns,JY=eN,ZY=tN,eQ=fg;function tQ(t,r,a){r=XY(r,t);for(var s=-1,n=r.length,o=!1;++s<n;){var i=eQ(r[s]);if(!(o=t!=null&&a(t,i)))break;t=t[i]}return o||++s!=n?o:(n=t==null?0:t.length,!!n&&ZY(n)&&JY(i,n)&&(QY(t)||YY(t)))}var rQ=tQ,aQ=GY,sQ=rQ;function nQ(t,r){return t!=null&&sQ(t,r,aQ)}var oQ=nQ,iQ=rN,lQ=xP,cQ=oQ,dQ=R2,uQ=sT,mQ=nT,xQ=fg,pQ=1,hQ=2;function fQ(t,r){return dQ(t)&&uQ(r)?mQ(xQ(t),r):function(a){var s=lQ(a,t);return s===void 0&&s===r?cQ(a,t):iQ(r,s,pQ|hQ)}}var gQ=fQ;function bQ(t){return t}var mu=bQ;function vQ(t){return function(r){return r==null?void 0:r[t]}}var yQ=vQ,jQ=q2;function NQ(t){return function(r){return jQ(r,t)}}var wQ=NQ,_Q=yQ,SQ=wQ,CQ=R2,kQ=fg;function EQ(t){return CQ(t)?_Q(kQ(t)):SQ(t)}var AQ=EQ,PQ=HY,TQ=gQ,OQ=mu,FQ=Ns,$Q=AQ;function RQ(t){return typeof t=="function"?t:t==null?OQ:typeof t=="object"?FQ(t)?TQ(t[0],t[1]):PQ(t):$Q(t)}var no=RQ;function DQ(t,r,a,s){for(var n=t.length,o=a+(s?1:-1);s?o--:++o<n;)if(r(t[o],o,t))return o;return-1}var oT=DQ;function MQ(t){return t!==t}var IQ=MQ;function LQ(t,r,a){for(var s=a-1,n=t.length;++s<n;)if(t[s]===r)return s;return-1}var BQ=LQ,zQ=oT,qQ=IQ,VQ=BQ;function UQ(t,r,a){return r===r?VQ(t,r,a):zQ(t,qQ,a)}var WQ=UQ,HQ=WQ;function KQ(t,r){var a=t==null?0:t.length;return!!a&&HQ(t,r,0)>-1}var GQ=KQ;function XQ(t,r,a){for(var s=-1,n=t==null?0:t.length;++s<n;)if(a(r,t[s]))return!0;return!1}var YQ=XQ;function QQ(){}var JQ=QQ,Zb=tT,ZQ=JQ,eJ=J2,tJ=1/0,rJ=Zb&&1/eJ(new Zb([,-0]))[1]==tJ?function(t){return new Zb(t)}:ZQ,aJ=rJ,sJ=WP,nJ=GQ,oJ=YQ,iJ=KP,lJ=aJ,cJ=J2,dJ=200;function uJ(t,r,a){var s=-1,n=nJ,o=t.length,i=!0,l=[],c=l;if(a)i=!1,n=oJ;else if(o>=dJ){var d=r?null:lJ(t);if(d)return cJ(d);i=!1,n=iJ,c=new sJ}else c=r?[]:l;e:for(;++s<o;){var u=t[s],m=r?r(u):u;if(u=a||u!==0?u:0,i&&m===m){for(var x=c.length;x--;)if(c[x]===m)continue e;r&&c.push(m),l.push(u)}else n(c,m,a)||(c!==l&&c.push(m),l.push(u))}return l}var mJ=uJ,xJ=no,pJ=mJ;function hJ(t,r){return t&&t.length?pJ(t,xJ(r)):[]}var fJ=hJ;const g3=dr(fJ);function iT(t,r,a){return r===!0?g3(t,a):Et(r)?g3(t,r):t}function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sd(t)}var gJ=["ref"];function b3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function lo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?b3(Object(a),!0).forEach(function(s){Og(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function bJ(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function v3(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,cT(s.key),s)}}function vJ(t,r,a){return r&&v3(t.prototype,r),a&&v3(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function yJ(t,r,a){return r=kh(r),jJ(t,lT()?Reflect.construct(r,a||[],kh(t).constructor):r.apply(t,a))}function jJ(t,r){if(r&&(Sd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NJ(t)}function NJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lT=function(){return!!t})()}function kh(t){return kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},kh(t)}function wJ(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&lj(t,r)}function lj(t,r){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},lj(t,r)}function Og(t,r,a){return r=cT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function cT(t){var r=_J(t,"string");return Sd(r)=="symbol"?r:r+""}function _J(t,r){if(Sd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Sd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SJ(t,r){if(t==null)return{};var a=CJ(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function CJ(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function kJ(t){return t.value}function EJ(t,r){if(pe.isValidElement(t))return pe.cloneElement(t,r);if(typeof t=="function")return pe.createElement(t,r);r.ref;var a=SJ(r,gJ);return pe.createElement(Q2,a)}var y3=1,Ar=function(t){function r(){var a;bJ(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=yJ(this,r,[].concat(n)),Og(a,"lastBoundingBox",{width:-1,height:-1}),a}return wJ(r,t),vJ(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>y3||Math.abs(n.height-this.lastBoundingBox.height)>y3)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,s&&s(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var n=this.props,o=n.layout,i=n.align,l=n.verticalAlign,c=n.margin,d=n.chartWidth,u=n.chartHeight,m,x;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(i==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();m={left:((d||0)-h.width)/2}}else m=i==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();x={top:((u||0)-v.height)/2}}else x=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return lo(lo({},m),x)}},{key:"render",value:function(){var s=this,n=this.props,o=n.content,i=n.width,l=n.height,c=n.wrapperStyle,d=n.payloadUniqBy,u=n.payload,m=lo(lo({position:"absolute",width:i||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return pe.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(h){s.wrapperNode=h}},EJ(o,lo(lo({},this.props),{},{payload:iT(u,d,kJ)})))}}],[{key:"getWithHeight",value:function(s,n){var o=lo(lo({},this.defaultProps),s.props),i=o.layout;return i==="vertical"&&at(s.props.height)?{height:s.props.height}:i==="horizontal"?{width:s.props.width||n}:null}}])}(j.PureComponent);Og(Ar,"displayName","Legend");Og(Ar,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var j3=Jx,AJ=Z2,PJ=Ns,N3=j3?j3.isConcatSpreadable:void 0;function TJ(t){return PJ(t)||AJ(t)||!!(N3&&t&&t[N3])}var OJ=TJ,FJ=XP,$J=OJ;function dT(t,r,a,s,n){var o=-1,i=t.length;for(a||(a=$J),n||(n=[]);++o<i;){var l=t[o];r>0&&a(l)?r>1?dT(l,r-1,a,s,n):FJ(n,l):s||(n[n.length]=l)}return n}var uT=dT;function RJ(t){return function(r,a,s){for(var n=-1,o=Object(r),i=s(r),l=i.length;l--;){var c=i[t?l:++n];if(a(o[c],c,o)===!1)break}return r}}var DJ=RJ,MJ=DJ,IJ=MJ(),LJ=IJ,BJ=LJ,zJ=Tg;function qJ(t,r){return t&&BJ(t,r,zJ)}var mT=qJ,VJ=Zx;function UJ(t,r){return function(a,s){if(a==null)return a;if(!VJ(a))return t(a,s);for(var n=a.length,o=r?n:-1,i=Object(a);(r?o--:++o<n)&&s(i[o],o,i)!==!1;);return a}}var WJ=UJ,HJ=mT,KJ=WJ,GJ=KJ(HJ),aN=GJ,XJ=aN,YJ=Zx;function QJ(t,r){var a=-1,s=YJ(t)?Array(t.length):[];return XJ(t,function(n,o,i){s[++a]=r(n,o,i)}),s}var xT=QJ;function JJ(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}var ZJ=JJ,w3=su;function eZ(t,r){if(t!==r){var a=t!==void 0,s=t===null,n=t===t,o=w3(t),i=r!==void 0,l=r===null,c=r===r,d=w3(r);if(!l&&!d&&!o&&t>r||o&&i&&c&&!l&&!d||s&&i&&c||!a&&c||!n)return 1;if(!s&&!o&&!d&&t<r||d&&a&&n&&!s&&!o||l&&a&&n||!i&&n||!c)return-1}return 0}var tZ=eZ,rZ=tZ;function aZ(t,r,a){for(var s=-1,n=t.criteria,o=r.criteria,i=n.length,l=a.length;++s<i;){var c=rZ(n[s],o[s]);if(c){if(s>=l)return c;var d=a[s];return c*(d=="desc"?-1:1)}}return t.index-r.index}var sZ=aZ,ev=z2,nZ=q2,oZ=no,iZ=xT,lZ=ZJ,cZ=JP,dZ=sZ,uZ=mu,mZ=Ns;function xZ(t,r,a){r.length?r=ev(r,function(o){return mZ(o)?function(i){return nZ(i,o.length===1?o[0]:o)}:o}):r=[uZ];var s=-1;r=ev(r,cZ(oZ));var n=iZ(t,function(o,i,l){var c=ev(r,function(d){return d(o)});return{criteria:c,index:++s,value:o}});return lZ(n,function(o,i){return dZ(o,i,a)})}var pZ=xZ;function hZ(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}var fZ=hZ,gZ=fZ,_3=Math.max;function bZ(t,r,a){return r=_3(r===void 0?t.length-1:r,0),function(){for(var s=arguments,n=-1,o=_3(s.length-r,0),i=Array(o);++n<o;)i[n]=s[r+n];n=-1;for(var l=Array(r+1);++n<r;)l[n]=s[n];return l[r]=a(i),gZ(t,this,l)}}var vZ=bZ;function yZ(t){return function(){return t}}var jZ=yZ,NZ=rc,wZ=function(){try{var t=NZ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pT=wZ,_Z=jZ,S3=pT,SZ=mu,CZ=S3?function(t,r){return S3(t,"toString",{configurable:!0,enumerable:!1,value:_Z(r),writable:!0})}:SZ,kZ=CZ,EZ=800,AZ=16,PZ=Date.now;function TZ(t){var r=0,a=0;return function(){var s=PZ(),n=AZ-(s-a);if(a=s,n>0){if(++r>=EZ)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var OZ=TZ,FZ=kZ,$Z=OZ,RZ=$Z(FZ),DZ=RZ,MZ=mu,IZ=vZ,LZ=DZ;function BZ(t,r){return LZ(IZ(t,r,MZ),t+"")}var zZ=BZ,qZ=M2,VZ=Zx,UZ=eN,WZ=qi;function HZ(t,r,a){if(!WZ(a))return!1;var s=typeof r;return(s=="number"?VZ(a)&&UZ(r,a.length):s=="string"&&r in a)?qZ(a[r],t):!1}var Fg=HZ,KZ=uT,GZ=pZ,XZ=zZ,C3=Fg,YZ=XZ(function(t,r){if(t==null)return[];var a=r.length;return a>1&&C3(t,r[0],r[1])?r=[]:a>2&&C3(r[0],r[1],r[2])&&(r=[r[0]]),GZ(t,KZ(r,1),[])}),QZ=YZ;const sN=dr(QZ);function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zm(t)}function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},cj.apply(this,arguments)}function JZ(t,r){return ree(t)||tee(t,r)||eee(t,r)||ZZ()}function ZZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eee(t,r){if(t){if(typeof t=="string")return k3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k3(t,r)}}function k3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function tee(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function ree(t){if(Array.isArray(t))return t}function E3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function tv(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?E3(Object(a),!0).forEach(function(s){aee(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function aee(t,r,a){return r=see(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function see(t){var r=nee(t,"string");return Zm(r)=="symbol"?r:r+""}function nee(t,r){if(Zm(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Zm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function oee(t){return Array.isArray(t)&&pa(t[0])&&pa(t[1])?t.join(" ~ "):t}var iee=function(r){var a=r.separator,s=a===void 0?" : ":a,n=r.contentStyle,o=n===void 0?{}:n,i=r.itemStyle,l=i===void 0?{}:i,c=r.labelStyle,d=c===void 0?{}:c,u=r.payload,m=r.formatter,x=r.itemSorter,h=r.wrapperClassName,v=r.labelClassName,p=r.label,g=r.labelFormatter,y=r.accessibilityLayer,f=y===void 0?!1:y,b=function(){if(u&&u.length){var A={padding:0,margin:0},O=(x?sN(u,x):u).map(function(V,G){if(V.type==="none")return null;var L=tv({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},l),Z=V.formatter||m||oee,D=V.value,K=V.name,R=D,B=K;if(Z&&R!=null&&B!=null){var F=Z(D,K,V,G,u);if(Array.isArray(F)){var I=JZ(F,2);R=I[0],B=I[1]}else R=F}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:L},pa(B)?pe.createElement("span",{className:"recharts-tooltip-item-name"},B):null,pa(B)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},R),pe.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:A},O)}return null},N=tv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),_=tv({margin:0},d),w=!Ft(p),S=w?p:"",C=Mt("recharts-default-tooltip",h),E=Mt("recharts-tooltip-label",v);w&&g&&u!==void 0&&u!==null&&(S=g(p,u));var T=f?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",cj({className:C,style:N},T),pe.createElement("p",{className:E,style:_},pe.isValidElement(S)?S:"".concat(S)),b())};function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ex(t)}function W0(t,r,a){return r=lee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function lee(t){var r=cee(t,"string");return ex(r)=="symbol"?r:r+""}function cee(t,r){if(ex(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(ex(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Du="recharts-tooltip-wrapper",dee={visibility:"hidden"};function uee(t){var r=t.coordinate,a=t.translateX,s=t.translateY;return Mt(Du,W0(W0(W0(W0({},"".concat(Du,"-right"),at(a)&&r&&at(r.x)&&a>=r.x),"".concat(Du,"-left"),at(a)&&r&&at(r.x)&&a<r.x),"".concat(Du,"-bottom"),at(s)&&r&&at(r.y)&&s>=r.y),"".concat(Du,"-top"),at(s)&&r&&at(r.y)&&s<r.y))}function A3(t){var r=t.allowEscapeViewBox,a=t.coordinate,s=t.key,n=t.offsetTopLeft,o=t.position,i=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(o&&at(o[s]))return o[s];var u=a[s]-l-n,m=a[s]+n;if(r[s])return i[s]?u:m;if(i[s]){var x=u,h=c[s];return x<h?Math.max(m,c[s]):Math.max(u,c[s])}var v=m+l,p=c[s]+d;return v>p?Math.max(u,c[s]):Math.max(m,c[s])}function mee(t){var r=t.translateX,a=t.translateY,s=t.useTranslate3d;return{transform:s?"translate3d(".concat(r,"px, ").concat(a,"px, 0)"):"translate(".concat(r,"px, ").concat(a,"px)")}}function xee(t){var r=t.allowEscapeViewBox,a=t.coordinate,s=t.offsetTopLeft,n=t.position,o=t.reverseDirection,i=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,m;return i.height>0&&i.width>0&&a?(u=A3({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:s,position:n,reverseDirection:o,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),m=A3({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:s,position:n,reverseDirection:o,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),d=mee({translateX:u,translateY:m,useTranslate3d:l})):d=dee,{cssProperties:d,cssClasses:uee({translateX:u,translateY:m,coordinate:a})}}function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cd(t)}function P3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function T3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?P3(Object(a),!0).forEach(function(s){uj(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function pee(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function hee(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,fT(s.key),s)}}function fee(t,r,a){return r&&hee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gee(t,r,a){return r=Eh(r),bee(t,hT()?Reflect.construct(r,a||[],Eh(t).constructor):r.apply(t,a))}function bee(t,r){if(r&&(Cd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vee(t)}function vee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hT=function(){return!!t})()}function Eh(t){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Eh(t)}function yee(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&dj(t,r)}function dj(t,r){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},dj(t,r)}function uj(t,r,a){return r=fT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function fT(t){var r=jee(t,"string");return Cd(r)=="symbol"?r:r+""}function jee(t,r){if(Cd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Cd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O3=1,Nee=function(t){function r(){var a;pee(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=gee(this,r,[].concat(n)),uj(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),uj(a,"handleKeyDown",function(i){if(i.key==="Escape"){var l,c,d,u;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=a.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=a.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),a}return yee(r,t),fee(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>O3||Math.abs(s.height-this.state.lastBoundingBox.height)>O3)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,n=this.props,o=n.active,i=n.allowEscapeViewBox,l=n.animationDuration,c=n.animationEasing,d=n.children,u=n.coordinate,m=n.hasPayload,x=n.isAnimationActive,h=n.offset,v=n.position,p=n.reverseDirection,g=n.useTranslate3d,y=n.viewBox,f=n.wrapperStyle,b=xee({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:h,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),N=b.cssClasses,_=b.cssProperties,w=T3(T3({transition:x&&o?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&m?"visible":"hidden",position:"absolute",top:0,left:0},f);return pe.createElement("div",{tabIndex:-1,className:N,style:w,ref:function(C){s.wrapperNode=C}},d)}}])}(j.PureComponent),wee=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vi={isSsr:wee()};function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kd(t)}function F3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function $3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?F3(Object(a),!0).forEach(function(s){nN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):F3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function _ee(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function See(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,bT(s.key),s)}}function Cee(t,r,a){return r&&See(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kee(t,r,a){return r=Ah(r),Eee(t,gT()?Reflect.construct(r,a||[],Ah(t).constructor):r.apply(t,a))}function Eee(t,r){if(r&&(kd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aee(t)}function Aee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gT=function(){return!!t})()}function Ah(t){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ah(t)}function Pee(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&mj(t,r)}function mj(t,r){return mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},mj(t,r)}function nN(t,r,a){return r=bT(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function bT(t){var r=Tee(t,"string");return kd(r)=="symbol"?r:r+""}function Tee(t,r){if(kd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Oee(t){return t.dataKey}function Fee(t,r){return pe.isValidElement(t)?pe.cloneElement(t,r):typeof t=="function"?pe.createElement(t,r):pe.createElement(iee,r)}var or=function(t){function r(){return _ee(this,r),kee(this,r,arguments)}return Pee(r,t),Cee(r,[{key:"render",value:function(){var s=this,n=this.props,o=n.active,i=n.allowEscapeViewBox,l=n.animationDuration,c=n.animationEasing,d=n.content,u=n.coordinate,m=n.filterNull,x=n.isAnimationActive,h=n.offset,v=n.payload,p=n.payloadUniqBy,g=n.position,y=n.reverseDirection,f=n.useTranslate3d,b=n.viewBox,N=n.wrapperStyle,_=v??[];m&&_.length&&(_=iT(v.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),p,Oee));var w=_.length>0;return pe.createElement(Nee,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:x,active:o,coordinate:u,hasPayload:w,offset:h,position:g,reverseDirection:y,useTranslate3d:f,viewBox:b,wrapperStyle:N},Fee(d,$3($3({},this.props),{},{payload:_})))}}])}(j.PureComponent);nN(or,"displayName","Tooltip");nN(or,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Vi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $ee=so,Ree=function(){return $ee.Date.now()},Dee=Ree,Mee=/\s/;function Iee(t){for(var r=t.length;r--&&Mee.test(t.charAt(r)););return r}var Lee=Iee,Bee=Lee,zee=/^\s+/;function qee(t){return t&&t.slice(0,Bee(t)+1).replace(zee,"")}var Vee=qee,Uee=Vee,R3=qi,Wee=su,D3=NaN,Hee=/^[-+]0x[0-9a-f]+$/i,Kee=/^0b[01]+$/i,Gee=/^0o[0-7]+$/i,Xee=parseInt;function Yee(t){if(typeof t=="number")return t;if(Wee(t))return D3;if(R3(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=R3(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Uee(t);var a=Kee.test(t);return a||Gee.test(t)?Xee(t.slice(2),a?2:8):Hee.test(t)?D3:+t}var vT=Yee,Qee=qi,rv=Dee,M3=vT,Jee="Expected a function",Zee=Math.max,ete=Math.min;function tte(t,r,a){var s,n,o,i,l,c,d=0,u=!1,m=!1,x=!0;if(typeof t!="function")throw new TypeError(Jee);r=M3(r)||0,Qee(a)&&(u=!!a.leading,m="maxWait"in a,o=m?Zee(M3(a.maxWait)||0,r):o,x="trailing"in a?!!a.trailing:x);function h(w){var S=s,C=n;return s=n=void 0,d=w,i=t.apply(C,S),i}function v(w){return d=w,l=setTimeout(y,r),u?h(w):i}function p(w){var S=w-c,C=w-d,E=r-S;return m?ete(E,o-C):E}function g(w){var S=w-c,C=w-d;return c===void 0||S>=r||S<0||m&&C>=o}function y(){var w=rv();if(g(w))return f(w);l=setTimeout(y,p(w))}function f(w){return l=void 0,x&&s?h(w):(s=n=void 0,i)}function b(){l!==void 0&&clearTimeout(l),d=0,s=c=n=l=void 0}function N(){return l===void 0?i:f(rv())}function _(){var w=rv(),S=g(w);if(s=arguments,n=this,c=w,S){if(l===void 0)return v(c);if(m)return clearTimeout(l),l=setTimeout(y,r),h(c)}return l===void 0&&(l=setTimeout(y,r)),i}return _.cancel=b,_.flush=N,_}var rte=tte,ate=rte,ste=qi,nte="Expected a function";function ote(t,r,a){var s=!0,n=!0;if(typeof t!="function")throw new TypeError(nte);return ste(a)&&(s="leading"in a?!!a.leading:s,n="trailing"in a?!!a.trailing:n),ate(t,r,{leading:s,maxWait:r,trailing:n})}var ite=ote;const yT=dr(ite);function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tx(t)}function I3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function H0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?I3(Object(a),!0).forEach(function(s){lte(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function lte(t,r,a){return r=cte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function cte(t){var r=dte(t,"string");return tx(r)=="symbol"?r:r+""}function dte(t,r){if(tx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(tx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ute(t,r){return hte(t)||pte(t,r)||xte(t,r)||mte()}function mte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xte(t,r){if(t){if(typeof t=="string")return L3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L3(t,r)}}function L3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function pte(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function hte(t){if(Array.isArray(t))return t}var da=j.forwardRef(function(t,r){var a=t.aspect,s=t.initialDimension,n=s===void 0?{width:-1,height:-1}:s,o=t.width,i=o===void 0?"100%":o,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,x=t.maxHeight,h=t.children,v=t.debounce,p=v===void 0?0:v,g=t.id,y=t.className,f=t.onResize,b=t.style,N=b===void 0?{}:b,_=j.useRef(null),w=j.useRef();w.current=f,j.useImperativeHandle(r,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var S=j.useState({containerWidth:n.width,containerHeight:n.height}),C=ute(S,2),E=C[0],T=C[1],q=j.useCallback(function(O,V){T(function(G){var L=Math.round(O),Z=Math.round(V);return G.containerWidth===L&&G.containerHeight===Z?G:{containerWidth:L,containerHeight:Z}})},[]);j.useEffect(function(){var O=function(K){var R,B=K[0].contentRect,F=B.width,I=B.height;q(F,I),(R=w.current)===null||R===void 0||R.call(w,F,I)};p>0&&(O=yT(O,p,{trailing:!0,leading:!1}));var V=new ResizeObserver(O),G=_.current.getBoundingClientRect(),L=G.width,Z=G.height;return q(L,Z),V.observe(_.current),function(){V.disconnect()}},[q,p]);var A=j.useMemo(function(){var O=E.containerWidth,V=E.containerHeight;if(O<0||V<0)return null;kn(xl(i)||xl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),kn(!a||a>0,"The aspect(%s) must be greater than zero.",a);var G=xl(i)?O:i,L=xl(c)?V:c;a&&a>0&&(G?L=G/a:L&&(G=L*a),x&&L>x&&(L=x)),kn(G>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,L,i,c,u,m,a);var Z=!Array.isArray(h)&&No(h.type).endsWith("Chart");return pe.Children.map(h,function(D){return pe.isValidElement(D)?j.cloneElement(D,H0({width:G,height:L},Z?{style:H0({height:"100%",width:"100%",maxHeight:L,maxWidth:G},D.props.style)}:{})):D})},[a,h,c,x,m,u,E,i]);return pe.createElement("div",{id:g?"".concat(g):void 0,className:Mt("recharts-responsive-container",y),style:H0(H0({},N),{},{width:i,height:c,minWidth:u,minHeight:m,maxHeight:x}),ref:_},A)}),_l=function(r){return null};_l.displayName="Cell";function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rx(t)}function B3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function xj(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?B3(Object(a),!0).forEach(function(s){fte(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B3(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function fte(t,r,a){return r=gte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function gte(t){var r=bte(t,"string");return rx(r)=="symbol"?r:r+""}function bte(t,r){if(rx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(rx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var pc={widthCache:{},cacheCount:0},vte=2e3,yte={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z3="recharts_measurement_span";function jte(t){var r=xj({},t);return Object.keys(r).forEach(function(a){r[a]||delete r[a]}),r}var um=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||Vi.isSsr)return{width:0,height:0};var s=jte(a),n=JSON.stringify({text:r,copyStyle:s});if(pc.widthCache[n])return pc.widthCache[n];try{var o=document.getElementById(z3);o||(o=document.createElement("span"),o.setAttribute("id",z3),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=xj(xj({},yte),s);Object.assign(o.style,i),o.textContent="".concat(r);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return pc.widthCache[n]=c,++pc.cacheCount>vte&&(pc.cacheCount=0,pc.widthCache={}),c}catch{return{width:0,height:0}}},Nte=function(r){return{top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft}};function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ax(t)}function Ph(t,r){return Cte(t)||Ste(t,r)||_te(t,r)||wte()}function wte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _te(t,r){if(t){if(typeof t=="string")return q3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q3(t,r)}}function q3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Ste(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Cte(t){if(Array.isArray(t))return t}function kte(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function V3(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,Ate(s.key),s)}}function Ete(t,r,a){return r&&V3(t.prototype,r),a&&V3(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ate(t){var r=Pte(t,"string");return ax(r)=="symbol"?r:r+""}function Pte(t,r){if(ax(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(ax(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var U3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ote=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Fte=Object.keys(jT),Lc="NaN";function $te(t,r){return t*jT[r]}var K0=function(){function t(r,a){kte(this,t),this.num=r,this.unit=a,this.num=r,this.unit=a,Number.isNaN(r)&&(this.unit=""),a!==""&&!Tte.test(a)&&(this.num=NaN,this.unit=""),Fte.includes(a)&&(this.num=$te(r,a),this.unit="px")}return Ete(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var s,n=(s=Ote.exec(a))!==null&&s!==void 0?s:[],o=Ph(n,3),i=o[1],l=o[2];return new t(parseFloat(i),l??"")}}])}();function NT(t){if(t.includes(Lc))return Lc;for(var r=t;r.includes("*")||r.includes("/");){var a,s=(a=U3.exec(r))!==null&&a!==void 0?a:[],n=Ph(s,4),o=n[1],i=n[2],l=n[3],c=K0.parse(o??""),d=K0.parse(l??""),u=i==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Lc;r=r.replace(U3,u.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var m,x=(m=W3.exec(r))!==null&&m!==void 0?m:[],h=Ph(x,4),v=h[1],p=h[2],g=h[3],y=K0.parse(v??""),f=K0.parse(g??""),b=p==="+"?y.add(f):y.subtract(f);if(b.isNaN())return Lc;r=r.replace(W3,b.toString())}return r}var H3=/\(([^()]*)\)/;function Rte(t){for(var r=t;r.includes("(");){var a=H3.exec(r),s=Ph(a,2),n=s[1];r=r.replace(H3,NT(n))}return r}function Dte(t){var r=t.replace(/\s+/g,"");return r=Rte(r),r=NT(r),r}function Mte(t){try{return Dte(t)}catch{return Lc}}function av(t){var r=Mte(t.slice(5,-1));return r===Lc?"":r}var Ite=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Lte=["dx","dy","angle","className","breakAll"];function pj(){return pj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},pj.apply(this,arguments)}function K3(t,r){if(t==null)return{};var a=Bte(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Bte(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function G3(t,r){return Ute(t)||Vte(t,r)||qte(t,r)||zte()}function zte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qte(t,r){if(t){if(typeof t=="string")return X3(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return X3(t,r)}}function X3(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Vte(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Ute(t){if(Array.isArray(t))return t}var wT=/[ \f\n\r\t\v\u2028\u2029]+/,_T=function(r){var a=r.children,s=r.breakAll,n=r.style;try{var o=[];Ft(a)||(s?o=a.toString().split(""):o=a.toString().split(wT));var i=o.map(function(c){return{word:c,width:um(c,n).width}}),l=s?0:um("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},Wte=function(r,a,s,n,o){var i=r.maxLines,l=r.children,c=r.style,d=r.breakAll,u=at(i),m=l,x=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(L,Z){var D=Z.word,K=Z.width,R=L[L.length-1];if(R&&(n==null||o||R.width+K+s<Number(n)))R.words.push(D),R.width+=K+s;else{var B={words:[D],width:K};L.push(B)}return L},[])},h=x(a),v=function(G){return G.reduce(function(L,Z){return L.width>Z.width?L:Z})};if(!u)return h;for(var p="",g=function(G){var L=m.slice(0,G),Z=_T({breakAll:d,style:c,children:L+p}).wordsWithComputedWidth,D=x(Z),K=D.length>i||v(D).width>Number(n);return[K,D]},y=0,f=m.length-1,b=0,N;y<=f&&b<=m.length-1;){var _=Math.floor((y+f)/2),w=_-1,S=g(w),C=G3(S,2),E=C[0],T=C[1],q=g(_),A=G3(q,1),O=A[0];if(!E&&!O&&(y=_+1),E&&O&&(f=_-1),!E&&O){N=T;break}b++}return N||h},Y3=function(r){var a=Ft(r)?[]:r.toString().split(wT);return[{words:a}]},Hte=function(r){var a=r.width,s=r.scaleToFit,n=r.children,o=r.style,i=r.breakAll,l=r.maxLines;if((a||s)&&!Vi.isSsr){var c,d,u=_T({breakAll:i,children:n,style:o});if(u){var m=u.wordsWithComputedWidth,x=u.spaceWidth;c=m,d=x}else return Y3(n);return Wte({breakAll:i,children:n,maxLines:l,style:o},c,d,a,s)}return Y3(n)},Q3="#808080",Vl=function(r){var a=r.x,s=a===void 0?0:a,n=r.y,o=n===void 0?0:n,i=r.lineHeight,l=i===void 0?"1em":i,c=r.capHeight,d=c===void 0?"0.71em":c,u=r.scaleToFit,m=u===void 0?!1:u,x=r.textAnchor,h=x===void 0?"start":x,v=r.verticalAnchor,p=v===void 0?"end":v,g=r.fill,y=g===void 0?Q3:g,f=K3(r,Ite),b=j.useMemo(function(){return Hte({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:m,style:f.style,width:f.width})},[f.breakAll,f.children,f.maxLines,m,f.style,f.width]),N=f.dx,_=f.dy,w=f.angle,S=f.className,C=f.breakAll,E=K3(f,Lte);if(!pa(s)||!pa(o))return null;var T=s+(at(N)?N:0),q=o+(at(_)?_:0),A;switch(p){case"start":A=av("calc(".concat(d,")"));break;case"middle":A=av("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=av("calc(".concat(b.length-1," * -").concat(l,")"));break}var O=[];if(m){var V=b[0].width,G=f.width;O.push("scale(".concat((at(G)?G/V:1)/V,")"))}return w&&O.push("rotate(".concat(w,", ").concat(T,", ").concat(q,")")),O.length&&(E.transform=O.join(" ")),pe.createElement("text",pj({},St(E,!0),{x:T,y:q,className:Mt("recharts-text",S),textAnchor:h,fill:y.includes("url")?Q3:y}),b.map(function(L,Z){var D=L.words.join(C?"":" ");return pe.createElement("tspan",{x:T,dy:Z===0?A:l,key:"".concat(D,"-").concat(Z)},D)}))};function ki(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function Kte(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function oN(t){let r,a,s;t.length!==2?(r=ki,a=(l,c)=>ki(t(l),c),s=(l,c)=>t(l)-c):(r=t===ki||t===Kte?t:Gte,a=t,s=t);function n(l,c,d=0,u=l.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<0?d=m+1:u=m}while(d<u)}return d}function o(l,c,d=0,u=l.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function i(l,c,d=0,u=l.length){const m=n(l,c,d,u-1);return m>d&&s(l[m-1],c)>-s(l[m],c)?m-1:m}return{left:n,center:i,right:o}}function Gte(){return 0}function ST(t){return t===null?NaN:+t}function*Xte(t,r){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const Yte=oN(ki),e0=Yte.right;oN(ST).center;class J3 extends Map{constructor(r,a=Zte){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[s,n]of r)this.set(s,n)}get(r){return super.get(Z3(this,r))}has(r){return super.has(Z3(this,r))}set(r,a){return super.set(Qte(this,r),a)}delete(r){return super.delete(Jte(this,r))}}function Z3({_intern:t,_key:r},a){const s=r(a);return t.has(s)?t.get(s):a}function Qte({_intern:t,_key:r},a){const s=r(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function Jte({_intern:t,_key:r},a){const s=r(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function Zte(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ere(t=ki){if(t===ki)return CT;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,a)=>{const s=t(r,a);return s||s===0?s:(t(a,a)===0)-(t(r,r)===0)}}function CT(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const tre=Math.sqrt(50),rre=Math.sqrt(10),are=Math.sqrt(2);function Th(t,r,a){const s=(r-t)/Math.max(0,a),n=Math.floor(Math.log10(s)),o=s/Math.pow(10,n),i=o>=tre?10:o>=rre?5:o>=are?2:1;let l,c,d;return n<0?(d=Math.pow(10,-n)/i,l=Math.round(t*d),c=Math.round(r*d),l/d<t&&++l,c/d>r&&--c,d=-d):(d=Math.pow(10,n)*i,l=Math.round(t/d),c=Math.round(r/d),l*d<t&&++l,c*d>r&&--c),c<l&&.5<=a&&a<2?Th(t,r,a*2):[l,c,d]}function hj(t,r,a){if(r=+r,t=+t,a=+a,!(a>0))return[];if(t===r)return[t];const s=r<t,[n,o,i]=s?Th(r,t,a):Th(t,r,a);if(!(o>=n))return[];const l=o-n+1,c=new Array(l);if(s)if(i<0)for(let d=0;d<l;++d)c[d]=(o-d)/-i;else for(let d=0;d<l;++d)c[d]=(o-d)*i;else if(i<0)for(let d=0;d<l;++d)c[d]=(n+d)/-i;else for(let d=0;d<l;++d)c[d]=(n+d)*i;return c}function fj(t,r,a){return r=+r,t=+t,a=+a,Th(t,r,a)[2]}function gj(t,r,a){r=+r,t=+t,a=+a;const s=r<t,n=s?fj(r,t,a):fj(t,r,a);return(s?-1:1)*(n<0?1/-n:n)}function eS(t,r){let a;for(const s of t)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function tS(t,r){let a;for(const s of t)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function kT(t,r,a=0,s=1/0,n){if(r=Math.floor(r),a=Math.floor(Math.max(0,a)),s=Math.floor(Math.min(t.length-1,s)),!(a<=r&&r<=s))return t;for(n=n===void 0?CT:ere(n);s>a;){if(s-a>600){const c=s-a+1,d=r-a+1,u=Math.log(c),m=.5*Math.exp(2*u/3),x=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),h=Math.max(a,Math.floor(r-d*m/c+x)),v=Math.min(s,Math.floor(r+(c-d)*m/c+x));kT(t,r,h,v,n)}const o=t[r];let i=a,l=s;for(Mu(t,a,r),n(t[s],o)>0&&Mu(t,a,s);i<l;){for(Mu(t,i,l),++i,--l;n(t[i],o)<0;)++i;for(;n(t[l],o)>0;)--l}n(t[a],o)===0?Mu(t,a,l):(++l,Mu(t,l,s)),l<=r&&(a=l+1),r<=l&&(s=l-1)}return t}function Mu(t,r,a){const s=t[r];t[r]=t[a],t[a]=s}function sre(t,r,a){if(t=Float64Array.from(Xte(t)),!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return tS(t);if(r>=1)return eS(t);var s,n=(s-1)*r,o=Math.floor(n),i=eS(kT(t,o).subarray(0,o+1)),l=tS(t.subarray(o+1));return i+(l-i)*(n-o)}}function nre(t,r,a=ST){if(!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return+a(t[0],0,t);if(r>=1)return+a(t[s-1],s-1,t);var s,n=(s-1)*r,o=Math.floor(n),i=+a(t[o],o,t),l=+a(t[o+1],o+1,t);return i+(l-i)*(n-o)}}function ore(t,r,a){t=+t,r=+r,a=(n=arguments.length)<2?(r=t,t=0,1):n<3?1:+a;for(var s=-1,n=Math.max(0,Math.ceil((r-t)/a))|0,o=new Array(n);++s<n;)o[s]=t+s*a;return o}function cn(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Uo(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const bj=Symbol("implicit");function iN(){var t=new J3,r=[],a=[],s=bj;function n(o){let i=t.get(o);if(i===void 0){if(s!==bj)return s;t.set(o,i=r.push(o)-1)}return a[i%a.length]}return n.domain=function(o){if(!arguments.length)return r.slice();r=[],t=new J3;for(const i of o)t.has(i)||t.set(i,r.push(i)-1);return n},n.range=function(o){return arguments.length?(a=Array.from(o),n):a.slice()},n.unknown=function(o){return arguments.length?(s=o,n):s},n.copy=function(){return iN(r,a).unknown(s)},cn.apply(n,arguments),n}function sx(){var t=iN().unknown(void 0),r=t.domain,a=t.range,s=0,n=1,o,i,l=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var x=r().length,h=n<s,v=h?n:s,p=h?s:n;o=(p-v)/Math.max(1,x-c+d*2),l&&(o=Math.floor(o)),v+=(p-v-o*(x-c))*u,i=o*(1-c),l&&(v=Math.round(v),i=Math.round(i));var g=ore(x).map(function(y){return v+o*y});return a(h?g.reverse():g)}return t.domain=function(x){return arguments.length?(r(x),m()):r()},t.range=function(x){return arguments.length?([s,n]=x,s=+s,n=+n,m()):[s,n]},t.rangeRound=function(x){return[s,n]=x,s=+s,n=+n,l=!0,m()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(x){return arguments.length?(l=!!x,m()):l},t.padding=function(x){return arguments.length?(c=Math.min(1,d=+x),m()):c},t.paddingInner=function(x){return arguments.length?(c=Math.min(1,x),m()):c},t.paddingOuter=function(x){return arguments.length?(d=+x,m()):d},t.align=function(x){return arguments.length?(u=Math.max(0,Math.min(1,x)),m()):u},t.copy=function(){return sx(r(),[s,n]).round(l).paddingInner(c).paddingOuter(d).align(u)},cn.apply(m(),arguments)}function ET(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ET(r())},t}function mm(){return ET(sx.apply(null,arguments).paddingInner(1))}function lN(t,r,a){t.prototype=r.prototype=a,a.constructor=t}function AT(t,r){var a=Object.create(t.prototype);for(var s in r)a[s]=r[s];return a}function t0(){}var nx=.7,Oh=1/nx,ed="\\s*([+-]?\\d+)\\s*",ox="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ire=/^#([0-9a-f]{3,8})$/,lre=new RegExp(`^rgb\\(${ed},${ed},${ed}\\)$`),cre=new RegExp(`^rgb\\(${Qn},${Qn},${Qn}\\)$`),dre=new RegExp(`^rgba\\(${ed},${ed},${ed},${ox}\\)$`),ure=new RegExp(`^rgba\\(${Qn},${Qn},${Qn},${ox}\\)$`),mre=new RegExp(`^hsl\\(${ox},${Qn},${Qn}\\)$`),xre=new RegExp(`^hsla\\(${ox},${Qn},${Qn},${ox}\\)$`),rS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lN(t0,ix,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aS,formatHex:aS,formatHex8:pre,formatHsl:hre,formatRgb:sS,toString:sS});function aS(){return this.rgb().formatHex()}function pre(){return this.rgb().formatHex8()}function hre(){return PT(this).formatHsl()}function sS(){return this.rgb().formatRgb()}function ix(t){var r,a;return t=(t+"").trim().toLowerCase(),(r=ire.exec(t))?(a=r[1].length,r=parseInt(r[1],16),a===6?nS(r):a===3?new us(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):a===8?G0(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):a===4?G0(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=lre.exec(t))?new us(r[1],r[2],r[3],1):(r=cre.exec(t))?new us(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=dre.exec(t))?G0(r[1],r[2],r[3],r[4]):(r=ure.exec(t))?G0(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=mre.exec(t))?lS(r[1],r[2]/100,r[3]/100,1):(r=xre.exec(t))?lS(r[1],r[2]/100,r[3]/100,r[4]):rS.hasOwnProperty(t)?nS(rS[t]):t==="transparent"?new us(NaN,NaN,NaN,0):null}function nS(t){return new us(t>>16&255,t>>8&255,t&255,1)}function G0(t,r,a,s){return s<=0&&(t=r=a=NaN),new us(t,r,a,s)}function fre(t){return t instanceof t0||(t=ix(t)),t?(t=t.rgb(),new us(t.r,t.g,t.b,t.opacity)):new us}function vj(t,r,a,s){return arguments.length===1?fre(t):new us(t,r,a,s??1)}function us(t,r,a,s){this.r=+t,this.g=+r,this.b=+a,this.opacity=+s}lN(us,vj,AT(t0,{brighter(t){return t=t==null?Oh:Math.pow(Oh,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nx:Math.pow(nx,t),new us(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new us(Sl(this.r),Sl(this.g),Sl(this.b),Fh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oS,formatHex:oS,formatHex8:gre,formatRgb:iS,toString:iS}));function oS(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}`}function gre(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}${pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function iS(){const t=Fh(this.opacity);return`${t===1?"rgb(":"rgba("}${Sl(this.r)}, ${Sl(this.g)}, ${Sl(this.b)}${t===1?")":`, ${t})`}`}function Fh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Sl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pl(t){return t=Sl(t),(t<16?"0":"")+t.toString(16)}function lS(t,r,a,s){return s<=0?t=r=a=NaN:a<=0||a>=1?t=r=NaN:r<=0&&(t=NaN),new yn(t,r,a,s)}function PT(t){if(t instanceof yn)return new yn(t.h,t.s,t.l,t.opacity);if(t instanceof t0||(t=ix(t)),!t)return new yn;if(t instanceof yn)return t;t=t.rgb();var r=t.r/255,a=t.g/255,s=t.b/255,n=Math.min(r,a,s),o=Math.max(r,a,s),i=NaN,l=o-n,c=(o+n)/2;return l?(r===o?i=(a-s)/l+(a<s)*6:a===o?i=(s-r)/l+2:i=(r-a)/l+4,l/=c<.5?o+n:2-o-n,i*=60):l=c>0&&c<1?0:i,new yn(i,l,c,t.opacity)}function bre(t,r,a,s){return arguments.length===1?PT(t):new yn(t,r,a,s??1)}function yn(t,r,a,s){this.h=+t,this.s=+r,this.l=+a,this.opacity=+s}lN(yn,bre,AT(t0,{brighter(t){return t=t==null?Oh:Math.pow(Oh,t),new yn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nx:Math.pow(nx,t),new yn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*r,n=2*a-s;return new us(sv(t>=240?t-240:t+120,n,s),sv(t,n,s),sv(t<120?t+240:t-120,n,s),this.opacity)},clamp(){return new yn(cS(this.h),X0(this.s),X0(this.l),Fh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fh(this.opacity);return`${t===1?"hsl(":"hsla("}${cS(this.h)}, ${X0(this.s)*100}%, ${X0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cS(t){return t=(t||0)%360,t<0?t+360:t}function X0(t){return Math.max(0,Math.min(1,t||0))}function sv(t,r,a){return(t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r)*255}const cN=t=>()=>t;function vre(t,r){return function(a){return t+a*r}}function yre(t,r,a){return t=Math.pow(t,a),r=Math.pow(r,a)-t,a=1/a,function(s){return Math.pow(t+s*r,a)}}function jre(t){return(t=+t)==1?TT:function(r,a){return a-r?yre(r,a,t):cN(isNaN(r)?a:r)}}function TT(t,r){var a=r-t;return a?vre(t,a):cN(isNaN(t)?r:t)}const dS=function t(r){var a=jre(r);function s(n,o){var i=a((n=vj(n)).r,(o=vj(o)).r),l=a(n.g,o.g),c=a(n.b,o.b),d=TT(n.opacity,o.opacity);return function(u){return n.r=i(u),n.g=l(u),n.b=c(u),n.opacity=d(u),n+""}}return s.gamma=t,s}(1);function Nre(t,r){r||(r=[]);var a=t?Math.min(r.length,t.length):0,s=r.slice(),n;return function(o){for(n=0;n<a;++n)s[n]=t[n]*(1-o)+r[n]*o;return s}}function wre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _re(t,r){var a=r?r.length:0,s=t?Math.min(a,t.length):0,n=new Array(s),o=new Array(a),i;for(i=0;i<s;++i)n[i]=xu(t[i],r[i]);for(;i<a;++i)o[i]=r[i];return function(l){for(i=0;i<s;++i)o[i]=n[i](l);return o}}function Sre(t,r){var a=new Date;return t=+t,r=+r,function(s){return a.setTime(t*(1-s)+r*s),a}}function $h(t,r){return t=+t,r=+r,function(a){return t*(1-a)+r*a}}function Cre(t,r){var a={},s={},n;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(n in r)n in t?a[n]=xu(t[n],r[n]):s[n]=r[n];return function(o){for(n in a)s[n]=a[n](o);return s}}var yj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nv=new RegExp(yj.source,"g");function kre(t){return function(){return t}}function Ere(t){return function(r){return t(r)+""}}function Are(t,r){var a=yj.lastIndex=nv.lastIndex=0,s,n,o,i=-1,l=[],c=[];for(t=t+"",r=r+"";(s=yj.exec(t))&&(n=nv.exec(r));)(o=n.index)>a&&(o=r.slice(a,o),l[i]?l[i]+=o:l[++i]=o),(s=s[0])===(n=n[0])?l[i]?l[i]+=n:l[++i]=n:(l[++i]=null,c.push({i,x:$h(s,n)})),a=nv.lastIndex;return a<r.length&&(o=r.slice(a),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?Ere(c[0].x):kre(r):(r=c.length,function(d){for(var u=0,m;u<r;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}function xu(t,r){var a=typeof r,s;return r==null||a==="boolean"?cN(r):(a==="number"?$h:a==="string"?(s=ix(r))?(r=s,dS):Are:r instanceof ix?dS:r instanceof Date?Sre:wre(r)?Nre:Array.isArray(r)?_re:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Cre:$h)(t,r)}function dN(t,r){return t=+t,r=+r,function(a){return Math.round(t*(1-a)+r*a)}}function Pre(t,r){r===void 0&&(r=t,t=xu);for(var a=0,s=r.length-1,n=r[0],o=new Array(s<0?0:s);a<s;)o[a]=t(n,n=r[++a]);return function(i){var l=Math.max(0,Math.min(s-1,Math.floor(i*=s)));return o[l](i-l)}}function Tre(t){return function(){return t}}function Rh(t){return+t}var uS=[0,1];function es(t){return t}function jj(t,r){return(r-=t=+t)?function(a){return(a-t)/r}:Tre(isNaN(r)?NaN:.5)}function Ore(t,r){var a;return t>r&&(a=t,t=r,r=a),function(s){return Math.max(t,Math.min(r,s))}}function Fre(t,r,a){var s=t[0],n=t[1],o=r[0],i=r[1];return n<s?(s=jj(n,s),o=a(i,o)):(s=jj(s,n),o=a(o,i)),function(l){return o(s(l))}}function $re(t,r,a){var s=Math.min(t.length,r.length)-1,n=new Array(s),o=new Array(s),i=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++i<s;)n[i]=jj(t[i],t[i+1]),o[i]=a(r[i],r[i+1]);return function(l){var c=e0(t,l,1,s)-1;return o[c](n[c](l))}}function r0(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $g(){var t=uS,r=uS,a=xu,s,n,o,i=es,l,c,d;function u(){var x=Math.min(t.length,r.length);return i!==es&&(i=Ore(t[0],t[x-1])),l=x>2?$re:Fre,c=d=null,m}function m(x){return x==null||isNaN(x=+x)?o:(c||(c=l(t.map(s),r,a)))(s(i(x)))}return m.invert=function(x){return i(n((d||(d=l(r,t.map(s),$h)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Rh),u()):t.slice()},m.range=function(x){return arguments.length?(r=Array.from(x),u()):r.slice()},m.rangeRound=function(x){return r=Array.from(x),a=dN,u()},m.clamp=function(x){return arguments.length?(i=x?!0:es,u()):i!==es},m.interpolate=function(x){return arguments.length?(a=x,u()):a},m.unknown=function(x){return arguments.length?(o=x,m):o},function(x,h){return s=x,n=h,u()}}function uN(){return $g()(es,es)}function Rre(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Dh(t,r){if(!isFinite(t)||t===0)return null;var a=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"),s=t.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+t.slice(a+1)]}function Ed(t){return t=Dh(Math.abs(t)),t?t[1]:NaN}function Dre(t,r){return function(a,s){for(var n=a.length,o=[],i=0,l=t[0],c=0;n>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),o.push(a.substring(n-=l,n+l)),!((c+=l+1)>s));)l=t[i=(i+1)%t.length];return o.reverse().join(r)}}function Mre(t){return function(r){return r.replace(/[0-9]/g,function(a){return t[+a]})}}var Ire=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lx(t){if(!(r=Ire.exec(t)))throw new Error("invalid format: "+t);var r;return new mN({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}lx.prototype=mN.prototype;function mN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Lre(t){e:for(var r=t.length,a=1,s=-1,n;a<r;++a)switch(t[a]){case".":s=n=a;break;case"0":s===0&&(s=a),n=a;break;default:if(!+t[a])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(n+1):t}var Mh;function Bre(t,r){var a=Dh(t,r);if(!a)return Mh=void 0,t.toPrecision(r);var s=a[0],n=a[1],o=n-(Mh=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,i=s.length;return o===i?s:o>i?s+new Array(o-i+1).join("0"):o>0?s.slice(0,o)+"."+s.slice(o):"0."+new Array(1-o).join("0")+Dh(t,Math.max(0,r+o-1))[0]}function mS(t,r){var a=Dh(t,r);if(!a)return t+"";var s=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const xS={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Rre,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>mS(t*100,r),r:mS,s:Bre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pS(t){return t}var hS=Array.prototype.map,fS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zre(t){var r=t.grouping===void 0||t.thousands===void 0?pS:Dre(hS.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?pS:Mre(hS.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m,x){m=lx(m);var h=m.fill,v=m.align,p=m.sign,g=m.symbol,y=m.zero,f=m.width,b=m.comma,N=m.precision,_=m.trim,w=m.type;w==="n"?(b=!0,w="g"):xS[w]||(N===void 0&&(N=12),_=!0,w="g"),(y||h==="0"&&v==="=")&&(y=!0,h="0",v="=");var S=(x&&x.prefix!==void 0?x.prefix:"")+(g==="$"?a:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),C=(g==="$"?s:/[%p]/.test(w)?i:"")+(x&&x.suffix!==void 0?x.suffix:""),E=xS[w],T=/[defgprs%]/.test(w);N=N===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function q(A){var O=S,V=C,G,L,Z;if(w==="c")V=E(A)+V,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),N),_&&(A=Lre(A)),D&&+A==0&&p!=="+"&&(D=!1),O=(D?p==="("?p:l:p==="-"||p==="("?"":p)+O,V=(w==="s"&&!isNaN(A)&&Mh!==void 0?fS[8+Mh/3]:"")+V+(D&&p==="("?")":""),T){for(G=-1,L=A.length;++G<L;)if(Z=A.charCodeAt(G),48>Z||Z>57){V=(Z===46?n+A.slice(G+1):A.slice(G))+V,A=A.slice(0,G);break}}}b&&!y&&(A=r(A,1/0));var K=O.length+A.length+V.length,R=K<f?new Array(f-K+1).join(h):"";switch(b&&y&&(A=r(R+A,R.length?f-V.length:1/0),R=""),v){case"<":A=O+A+V+R;break;case"=":A=O+R+A+V;break;case"^":A=R.slice(0,K=R.length>>1)+O+A+V+R.slice(K);break;default:A=R+O+A+V;break}return o(A)}return q.toString=function(){return m+""},q}function u(m,x){var h=Math.max(-8,Math.min(8,Math.floor(Ed(x)/3)))*3,v=Math.pow(10,-h),p=d((m=lx(m),m.type="f",m),{suffix:fS[8+h/3]});return function(g){return p(v*g)}}return{format:d,formatPrefix:u}}var Y0,xN,OT;qre({thousands:",",grouping:[3],currency:["$",""]});function qre(t){return Y0=zre(t),xN=Y0.format,OT=Y0.formatPrefix,Y0}function Vre(t){return Math.max(0,-Ed(Math.abs(t)))}function Ure(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ed(r)/3)))*3-Ed(Math.abs(t)))}function Wre(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Ed(r)-Ed(t))+1}function FT(t,r,a,s){var n=gj(t,r,a),o;switch(s=lx(s??",f"),s.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(r));return s.precision==null&&!isNaN(o=Ure(n,i))&&(s.precision=o),OT(s,i)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(o=Wre(n,Math.max(Math.abs(t),Math.abs(r))))&&(s.precision=o-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(o=Vre(n))&&(s.precision=o-(s.type==="%")*2);break}}return xN(s)}function Ui(t){var r=t.domain;return t.ticks=function(a){var s=r();return hj(s[0],s[s.length-1],a??10)},t.tickFormat=function(a,s){var n=r();return FT(n[0],n[n.length-1],a??10,s)},t.nice=function(a){a==null&&(a=10);var s=r(),n=0,o=s.length-1,i=s[n],l=s[o],c,d,u=10;for(l<i&&(d=i,i=l,l=d,d=n,n=o,o=d);u-- >0;){if(d=fj(i,l,a),d===c)return s[n]=i,s[o]=l,r(s);if(d>0)i=Math.floor(i/d)*d,l=Math.ceil(l/d)*d;else if(d<0)i=Math.ceil(i*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Ih(){var t=uN();return t.copy=function(){return r0(t,Ih())},cn.apply(t,arguments),Ui(t)}function $T(t){var r;function a(s){return s==null||isNaN(s=+s)?r:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(t=Array.from(s,Rh),a):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return $T(t).unknown(r)},t=arguments.length?Array.from(t,Rh):[0,1],Ui(a)}function RT(t,r){t=t.slice();var a=0,s=t.length-1,n=t[a],o=t[s],i;return o<n&&(i=a,a=s,s=i,i=n,n=o,o=i),t[a]=r.floor(n),t[s]=r.ceil(o),t}function gS(t){return Math.log(t)}function bS(t){return Math.exp(t)}function Hre(t){return-Math.log(-t)}function Kre(t){return-Math.exp(-t)}function Gre(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xre(t){return t===10?Gre:t===Math.E?Math.exp:r=>Math.pow(t,r)}function Yre(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function vS(t){return(r,a)=>-t(-r,a)}function pN(t){const r=t(gS,bS),a=r.domain;let s=10,n,o;function i(){return n=Yre(s),o=Xre(s),a()[0]<0?(n=vS(n),o=vS(o),t(Hre,Kre)):t(gS,bS),r}return r.base=function(l){return arguments.length?(s=+l,i()):s},r.domain=function(l){return arguments.length?(a(l),i()):a()},r.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let x=n(d),h=n(u),v,p;const g=l==null?10:+l;let y=[];if(!(s%1)&&h-x<g){if(x=Math.floor(x),h=Math.ceil(h),d>0){for(;x<=h;++x)for(v=1;v<s;++v)if(p=x<0?v/o(-x):v*o(x),!(p<d)){if(p>u)break;y.push(p)}}else for(;x<=h;++x)for(v=s-1;v>=1;--v)if(p=x>0?v/o(-x):v*o(x),!(p<d)){if(p>u)break;y.push(p)}y.length*2<g&&(y=hj(d,u,g))}else y=hj(x,h,Math.min(h-x,g)).map(o);return m?y.reverse():y},r.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=lx(c)).precision==null&&(c.trim=!0),c=xN(c)),l===1/0)return c;const d=Math.max(1,s*l/r.ticks().length);return u=>{let m=u/o(Math.round(n(u)));return m*s<s-.5&&(m*=s),m<=d?c(u):""}},r.nice=()=>a(RT(a(),{floor:l=>o(Math.floor(n(l))),ceil:l=>o(Math.ceil(n(l)))})),r}function DT(){const t=pN($g()).domain([1,10]);return t.copy=()=>r0(t,DT()).base(t.base()),cn.apply(t,arguments),t}function yS(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function jS(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function hN(t){var r=1,a=t(yS(r),jS(r));return a.constant=function(s){return arguments.length?t(yS(r=+s),jS(r)):r},Ui(a)}function MT(){var t=hN($g());return t.copy=function(){return r0(t,MT()).constant(t.constant())},cn.apply(t,arguments)}function NS(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function Qre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jre(t){return t<0?-t*t:t*t}function fN(t){var r=t(es,es),a=1;function s(){return a===1?t(es,es):a===.5?t(Qre,Jre):t(NS(a),NS(1/a))}return r.exponent=function(n){return arguments.length?(a=+n,s()):a},Ui(r)}function gN(){var t=fN($g());return t.copy=function(){return r0(t,gN()).exponent(t.exponent())},cn.apply(t,arguments),t}function Zre(){return gN.apply(null,arguments).exponent(.5)}function wS(t){return Math.sign(t)*t*t}function eae(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function IT(){var t=uN(),r=[0,1],a=!1,s;function n(o){var i=eae(t(o));return isNaN(i)?s:a?Math.round(i):i}return n.invert=function(o){return t.invert(wS(o))},n.domain=function(o){return arguments.length?(t.domain(o),n):t.domain()},n.range=function(o){return arguments.length?(t.range((r=Array.from(o,Rh)).map(wS)),n):r.slice()},n.rangeRound=function(o){return n.range(o).round(!0)},n.round=function(o){return arguments.length?(a=!!o,n):a},n.clamp=function(o){return arguments.length?(t.clamp(o),n):t.clamp()},n.unknown=function(o){return arguments.length?(s=o,n):s},n.copy=function(){return IT(t.domain(),r).round(a).clamp(t.clamp()).unknown(s)},cn.apply(n,arguments),Ui(n)}function LT(){var t=[],r=[],a=[],s;function n(){var i=0,l=Math.max(1,r.length);for(a=new Array(l-1);++i<l;)a[i-1]=nre(t,i/l);return o}function o(i){return i==null||isNaN(i=+i)?s:r[e0(a,i)]}return o.invertExtent=function(i){var l=r.indexOf(i);return l<0?[NaN,NaN]:[l>0?a[l-1]:t[0],l<a.length?a[l]:t[t.length-1]]},o.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ki),n()},o.range=function(i){return arguments.length?(r=Array.from(i),n()):r.slice()},o.unknown=function(i){return arguments.length?(s=i,o):s},o.quantiles=function(){return a.slice()},o.copy=function(){return LT().domain(t).range(r).unknown(s)},cn.apply(o,arguments)}function BT(){var t=0,r=1,a=1,s=[.5],n=[0,1],o;function i(c){return c!=null&&c<=c?n[e0(s,c,0,a)]:o}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*r-(c-a)*t)/(a+1);return i}return i.domain=function(c){return arguments.length?([t,r]=c,t=+t,r=+r,l()):[t,r]},i.range=function(c){return arguments.length?(a=(n=Array.from(c)).length-1,l()):n.slice()},i.invertExtent=function(c){var d=n.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,s[0]]:d>=a?[s[a-1],r]:[s[d-1],s[d]]},i.unknown=function(c){return arguments.length&&(o=c),i},i.thresholds=function(){return s.slice()},i.copy=function(){return BT().domain([t,r]).range(n).unknown(o)},cn.apply(Ui(i),arguments)}function zT(){var t=[.5],r=[0,1],a,s=1;function n(o){return o!=null&&o<=o?r[e0(t,o,0,s)]:a}return n.domain=function(o){return arguments.length?(t=Array.from(o),s=Math.min(t.length,r.length-1),n):t.slice()},n.range=function(o){return arguments.length?(r=Array.from(o),s=Math.min(t.length,r.length-1),n):r.slice()},n.invertExtent=function(o){var i=r.indexOf(o);return[t[i-1],t[i]]},n.unknown=function(o){return arguments.length?(a=o,n):a},n.copy=function(){return zT().domain(t).range(r).unknown(a)},cn.apply(n,arguments)}const ov=new Date,iv=new Date;function fa(t,r,a,s){function n(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return n.floor=o=>(t(o=new Date(+o)),o),n.ceil=o=>(t(o=new Date(o-1)),r(o,1),t(o),o),n.round=o=>{const i=n(o),l=n.ceil(o);return o-i<l-o?i:l},n.offset=(o,i)=>(r(o=new Date(+o),i==null?1:Math.floor(i)),o),n.range=(o,i,l)=>{const c=[];if(o=n.ceil(o),l=l==null?1:Math.floor(l),!(o<i)||!(l>0))return c;let d;do c.push(d=new Date(+o)),r(o,l),t(o);while(d<o&&o<i);return c},n.filter=o=>fa(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;r(i,-1),!o(i););else for(;--l>=0;)for(;r(i,1),!o(i););}),a&&(n.count=(o,i)=>(ov.setTime(+o),iv.setTime(+i),t(ov),t(iv),Math.floor(a(ov,iv))),n.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?n.filter(s?i=>s(i)%o===0:i=>n.count(0,i)%o===0):n)),n}const Lh=fa(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Lh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?fa(r=>{r.setTime(Math.floor(r/t)*t)},(r,a)=>{r.setTime(+r+a*t)},(r,a)=>(a-r)/t):Lh);Lh.range;const go=1e3,rn=go*60,bo=rn*60,$o=bo*24,bN=$o*7,_S=$o*30,lv=$o*365,hl=fa(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*go)},(t,r)=>(r-t)/go,t=>t.getUTCSeconds());hl.range;const vN=fa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*go)},(t,r)=>{t.setTime(+t+r*rn)},(t,r)=>(r-t)/rn,t=>t.getMinutes());vN.range;const yN=fa(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*rn)},(t,r)=>(r-t)/rn,t=>t.getUTCMinutes());yN.range;const jN=fa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*go-t.getMinutes()*rn)},(t,r)=>{t.setTime(+t+r*bo)},(t,r)=>(r-t)/bo,t=>t.getHours());jN.range;const NN=fa(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*bo)},(t,r)=>(r-t)/bo,t=>t.getUTCHours());NN.range;const a0=fa(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*rn)/$o,t=>t.getDate()-1);a0.range;const Rg=fa(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/$o,t=>t.getUTCDate()-1);Rg.range;const qT=fa(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/$o,t=>Math.floor(t/$o));qT.range;function sc(t){return fa(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,a)=>{r.setDate(r.getDate()+a*7)},(r,a)=>(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*rn)/bN)}const Dg=sc(0),Bh=sc(1),tae=sc(2),rae=sc(3),Ad=sc(4),aae=sc(5),sae=sc(6);Dg.range;Bh.range;tae.range;rae.range;Ad.range;aae.range;sae.range;function nc(t){return fa(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCDate(r.getUTCDate()+a*7)},(r,a)=>(a-r)/bN)}const Mg=nc(0),zh=nc(1),nae=nc(2),oae=nc(3),Pd=nc(4),iae=nc(5),lae=nc(6);Mg.range;zh.range;nae.range;oae.range;Pd.range;iae.range;lae.range;const wN=fa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wN.range;const _N=fa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_N.range;const Ro=fa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ro.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:fa(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,a)=>{r.setFullYear(r.getFullYear()+a*t)});Ro.range;const Do=fa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Do.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:fa(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCFullYear(r.getUTCFullYear()+a*t)});Do.range;function VT(t,r,a,s,n,o){const i=[[hl,1,go],[hl,5,5*go],[hl,15,15*go],[hl,30,30*go],[o,1,rn],[o,5,5*rn],[o,15,15*rn],[o,30,30*rn],[n,1,bo],[n,3,3*bo],[n,6,6*bo],[n,12,12*bo],[s,1,$o],[s,2,2*$o],[a,1,bN],[r,1,_S],[r,3,3*_S],[t,1,lv]];function l(d,u,m){const x=u<d;x&&([d,u]=[u,d]);const h=m&&typeof m.range=="function"?m:c(d,u,m),v=h?h.range(d,+u+1):[];return x?v.reverse():v}function c(d,u,m){const x=Math.abs(u-d)/m,h=oN(([,,g])=>g).right(i,x);if(h===i.length)return t.every(gj(d/lv,u/lv,m));if(h===0)return Lh.every(Math.max(gj(d,u,m),1));const[v,p]=i[x/i[h-1][2]<i[h][2]/x?h-1:h];return v.every(p)}return[l,c]}const[cae,dae]=VT(Do,_N,Mg,qT,NN,yN),[uae,mae]=VT(Ro,wN,Dg,a0,jN,vN);function cv(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dv(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Iu(t,r,a){return{y:t,m:r,d:a,H:0,M:0,S:0,L:0}}function xae(t){var r=t.dateTime,a=t.date,s=t.time,n=t.periods,o=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,d=Lu(n),u=Bu(n),m=Lu(o),x=Bu(o),h=Lu(i),v=Bu(i),p=Lu(l),g=Bu(l),y=Lu(c),f=Bu(c),b={a:Z,A:D,b:K,B:R,c:null,d:PS,e:PS,f:Dae,g:Hae,G:Gae,H:Fae,I:$ae,j:Rae,L:UT,m:Mae,M:Iae,p:B,q:F,Q:FS,s:$S,S:Lae,u:Bae,U:zae,V:qae,w:Vae,W:Uae,x:null,X:null,y:Wae,Y:Kae,Z:Xae,"%":OS},N={a:I,A:k,b:M,B:z,c:null,d:TS,e:TS,f:Zae,g:cse,G:use,H:Yae,I:Qae,j:Jae,L:HT,m:ese,M:tse,p:oe,q:W,Q:FS,s:$S,S:rse,u:ase,U:sse,V:nse,w:ose,W:ise,x:null,X:null,y:lse,Y:dse,Z:mse,"%":OS},_={a:T,A:q,b:A,B:O,c:V,d:ES,e:ES,f:Aae,g:kS,G:CS,H:AS,I:AS,j:Sae,L:Eae,m:_ae,M:Cae,p:E,q:wae,Q:Tae,s:Oae,S:kae,u:bae,U:vae,V:yae,w:gae,W:jae,x:G,X:L,y:kS,Y:CS,Z:Nae,"%":Pae};b.x=w(a,b),b.X=w(s,b),b.c=w(r,b),N.x=w(a,N),N.X=w(s,N),N.c=w(r,N);function w(ae,ee){return function(ce){var ie=[],we=-1,Se=0,me=ae.length,_e,je,lt;for(ce instanceof Date||(ce=new Date(+ce));++we<me;)ae.charCodeAt(we)===37&&(ie.push(ae.slice(Se,we)),(je=SS[_e=ae.charAt(++we)])!=null?_e=ae.charAt(++we):je=_e==="e"?" ":"0",(lt=ee[_e])&&(_e=lt(ce,je)),ie.push(_e),Se=we+1);return ie.push(ae.slice(Se,we)),ie.join("")}}function S(ae,ee){return function(ce){var ie=Iu(1900,void 0,1),we=C(ie,ae,ce+="",0),Se,me;if(we!=ce.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ee&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Se=dv(Iu(ie.y,0,1)),me=Se.getUTCDay(),Se=me>4||me===0?zh.ceil(Se):zh(Se),Se=Rg.offset(Se,(ie.V-1)*7),ie.y=Se.getUTCFullYear(),ie.m=Se.getUTCMonth(),ie.d=Se.getUTCDate()+(ie.w+6)%7):(Se=cv(Iu(ie.y,0,1)),me=Se.getDay(),Se=me>4||me===0?Bh.ceil(Se):Bh(Se),Se=a0.offset(Se,(ie.V-1)*7),ie.y=Se.getFullYear(),ie.m=Se.getMonth(),ie.d=Se.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),me="Z"in ie?dv(Iu(ie.y,0,1)).getUTCDay():cv(Iu(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(me+5)%7:ie.w+ie.U*7-(me+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,dv(ie)):cv(ie)}}function C(ae,ee,ce,ie){for(var we=0,Se=ee.length,me=ce.length,_e,je;we<Se;){if(ie>=me)return-1;if(_e=ee.charCodeAt(we++),_e===37){if(_e=ee.charAt(we++),je=_[_e in SS?ee.charAt(we++):_e],!je||(ie=je(ae,ce,ie))<0)return-1}else if(_e!=ce.charCodeAt(ie++))return-1}return ie}function E(ae,ee,ce){var ie=d.exec(ee.slice(ce));return ie?(ae.p=u.get(ie[0].toLowerCase()),ce+ie[0].length):-1}function T(ae,ee,ce){var ie=h.exec(ee.slice(ce));return ie?(ae.w=v.get(ie[0].toLowerCase()),ce+ie[0].length):-1}function q(ae,ee,ce){var ie=m.exec(ee.slice(ce));return ie?(ae.w=x.get(ie[0].toLowerCase()),ce+ie[0].length):-1}function A(ae,ee,ce){var ie=y.exec(ee.slice(ce));return ie?(ae.m=f.get(ie[0].toLowerCase()),ce+ie[0].length):-1}function O(ae,ee,ce){var ie=p.exec(ee.slice(ce));return ie?(ae.m=g.get(ie[0].toLowerCase()),ce+ie[0].length):-1}function V(ae,ee,ce){return C(ae,r,ee,ce)}function G(ae,ee,ce){return C(ae,a,ee,ce)}function L(ae,ee,ce){return C(ae,s,ee,ce)}function Z(ae){return i[ae.getDay()]}function D(ae){return o[ae.getDay()]}function K(ae){return c[ae.getMonth()]}function R(ae){return l[ae.getMonth()]}function B(ae){return n[+(ae.getHours()>=12)]}function F(ae){return 1+~~(ae.getMonth()/3)}function I(ae){return i[ae.getUTCDay()]}function k(ae){return o[ae.getUTCDay()]}function M(ae){return c[ae.getUTCMonth()]}function z(ae){return l[ae.getUTCMonth()]}function oe(ae){return n[+(ae.getUTCHours()>=12)]}function W(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ee=w(ae+="",b);return ee.toString=function(){return ae},ee},parse:function(ae){var ee=S(ae+="",!1);return ee.toString=function(){return ae},ee},utcFormat:function(ae){var ee=w(ae+="",N);return ee.toString=function(){return ae},ee},utcParse:function(ae){var ee=S(ae+="",!0);return ee.toString=function(){return ae},ee}}}var SS={"-":"",_:" ",0:"0"},Ca=/^\s*\d+/,pae=/^%/,hae=/[\\^$*+?|[\]().{}]/g;function Zt(t,r,a){var s=t<0?"-":"",n=(s?-t:t)+"",o=n.length;return s+(o<a?new Array(a-o+1).join(r)+n:n)}function fae(t){return t.replace(hae,"\\$&")}function Lu(t){return new RegExp("^(?:"+t.map(fae).join("|")+")","i")}function Bu(t){return new Map(t.map((r,a)=>[r.toLowerCase(),a]))}function gae(t,r,a){var s=Ca.exec(r.slice(a,a+1));return s?(t.w=+s[0],a+s[0].length):-1}function bae(t,r,a){var s=Ca.exec(r.slice(a,a+1));return s?(t.u=+s[0],a+s[0].length):-1}function vae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.U=+s[0],a+s[0].length):-1}function yae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.V=+s[0],a+s[0].length):-1}function jae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.W=+s[0],a+s[0].length):-1}function CS(t,r,a){var s=Ca.exec(r.slice(a,a+4));return s?(t.y=+s[0],a+s[0].length):-1}function kS(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Nae(t,r,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a,a+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function wae(t,r,a){var s=Ca.exec(r.slice(a,a+1));return s?(t.q=s[0]*3-3,a+s[0].length):-1}function _ae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.m=s[0]-1,a+s[0].length):-1}function ES(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.d=+s[0],a+s[0].length):-1}function Sae(t,r,a){var s=Ca.exec(r.slice(a,a+3));return s?(t.m=0,t.d=+s[0],a+s[0].length):-1}function AS(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.H=+s[0],a+s[0].length):-1}function Cae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.M=+s[0],a+s[0].length):-1}function kae(t,r,a){var s=Ca.exec(r.slice(a,a+2));return s?(t.S=+s[0],a+s[0].length):-1}function Eae(t,r,a){var s=Ca.exec(r.slice(a,a+3));return s?(t.L=+s[0],a+s[0].length):-1}function Aae(t,r,a){var s=Ca.exec(r.slice(a,a+6));return s?(t.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Pae(t,r,a){var s=pae.exec(r.slice(a,a+1));return s?a+s[0].length:-1}function Tae(t,r,a){var s=Ca.exec(r.slice(a));return s?(t.Q=+s[0],a+s[0].length):-1}function Oae(t,r,a){var s=Ca.exec(r.slice(a));return s?(t.s=+s[0],a+s[0].length):-1}function PS(t,r){return Zt(t.getDate(),r,2)}function Fae(t,r){return Zt(t.getHours(),r,2)}function $ae(t,r){return Zt(t.getHours()%12||12,r,2)}function Rae(t,r){return Zt(1+a0.count(Ro(t),t),r,3)}function UT(t,r){return Zt(t.getMilliseconds(),r,3)}function Dae(t,r){return UT(t,r)+"000"}function Mae(t,r){return Zt(t.getMonth()+1,r,2)}function Iae(t,r){return Zt(t.getMinutes(),r,2)}function Lae(t,r){return Zt(t.getSeconds(),r,2)}function Bae(t){var r=t.getDay();return r===0?7:r}function zae(t,r){return Zt(Dg.count(Ro(t)-1,t),r,2)}function WT(t){var r=t.getDay();return r>=4||r===0?Ad(t):Ad.ceil(t)}function qae(t,r){return t=WT(t),Zt(Ad.count(Ro(t),t)+(Ro(t).getDay()===4),r,2)}function Vae(t){return t.getDay()}function Uae(t,r){return Zt(Bh.count(Ro(t)-1,t),r,2)}function Wae(t,r){return Zt(t.getFullYear()%100,r,2)}function Hae(t,r){return t=WT(t),Zt(t.getFullYear()%100,r,2)}function Kae(t,r){return Zt(t.getFullYear()%1e4,r,4)}function Gae(t,r){var a=t.getDay();return t=a>=4||a===0?Ad(t):Ad.ceil(t),Zt(t.getFullYear()%1e4,r,4)}function Xae(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Zt(r/60|0,"0",2)+Zt(r%60,"0",2)}function TS(t,r){return Zt(t.getUTCDate(),r,2)}function Yae(t,r){return Zt(t.getUTCHours(),r,2)}function Qae(t,r){return Zt(t.getUTCHours()%12||12,r,2)}function Jae(t,r){return Zt(1+Rg.count(Do(t),t),r,3)}function HT(t,r){return Zt(t.getUTCMilliseconds(),r,3)}function Zae(t,r){return HT(t,r)+"000"}function ese(t,r){return Zt(t.getUTCMonth()+1,r,2)}function tse(t,r){return Zt(t.getUTCMinutes(),r,2)}function rse(t,r){return Zt(t.getUTCSeconds(),r,2)}function ase(t){var r=t.getUTCDay();return r===0?7:r}function sse(t,r){return Zt(Mg.count(Do(t)-1,t),r,2)}function KT(t){var r=t.getUTCDay();return r>=4||r===0?Pd(t):Pd.ceil(t)}function nse(t,r){return t=KT(t),Zt(Pd.count(Do(t),t)+(Do(t).getUTCDay()===4),r,2)}function ose(t){return t.getUTCDay()}function ise(t,r){return Zt(zh.count(Do(t)-1,t),r,2)}function lse(t,r){return Zt(t.getUTCFullYear()%100,r,2)}function cse(t,r){return t=KT(t),Zt(t.getUTCFullYear()%100,r,2)}function dse(t,r){return Zt(t.getUTCFullYear()%1e4,r,4)}function use(t,r){var a=t.getUTCDay();return t=a>=4||a===0?Pd(t):Pd.ceil(t),Zt(t.getUTCFullYear()%1e4,r,4)}function mse(){return"+0000"}function OS(){return"%"}function FS(t){return+t}function $S(t){return Math.floor(+t/1e3)}var hc,GT,XT;xse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xse(t){return hc=xae(t),GT=hc.format,hc.parse,XT=hc.utcFormat,hc.utcParse,hc}function pse(t){return new Date(t)}function hse(t){return t instanceof Date?+t:+new Date(+t)}function SN(t,r,a,s,n,o,i,l,c,d){var u=uN(),m=u.invert,x=u.domain,h=d(".%L"),v=d(":%S"),p=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),f=d("%b %d"),b=d("%B"),N=d("%Y");function _(w){return(c(w)<w?h:l(w)<w?v:i(w)<w?p:o(w)<w?g:s(w)<w?n(w)<w?y:f:a(w)<w?b:N)(w)}return u.invert=function(w){return new Date(m(w))},u.domain=function(w){return arguments.length?x(Array.from(w,hse)):x().map(pse)},u.ticks=function(w){var S=x();return t(S[0],S[S.length-1],w??10)},u.tickFormat=function(w,S){return S==null?_:d(S)},u.nice=function(w){var S=x();return(!w||typeof w.range!="function")&&(w=r(S[0],S[S.length-1],w??10)),w?x(RT(S,w)):u},u.copy=function(){return r0(u,SN(t,r,a,s,n,o,i,l,c,d))},u}function fse(){return cn.apply(SN(uae,mae,Ro,wN,Dg,a0,jN,vN,hl,GT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gse(){return cn.apply(SN(cae,dae,Do,_N,Mg,Rg,NN,yN,hl,XT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ig(){var t=0,r=1,a,s,n,o,i=es,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:i(n===0?.5:(m=(o(m)-a)*n,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,r]=m,a=o(t=+t),s=o(r=+r),n=a===s?0:1/(s-a),d):[t,r]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(i=m,d):i};function u(m){return function(x){var h,v;return arguments.length?([h,v]=x,i=m(h,v),d):[i(0),i(1)]}}return d.range=u(xu),d.rangeRound=u(dN),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return o=m,a=m(t),s=m(r),n=a===s?0:1/(s-a),d}}function Wi(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function YT(){var t=Ui(Ig()(es));return t.copy=function(){return Wi(t,YT())},Uo.apply(t,arguments)}function QT(){var t=pN(Ig()).domain([1,10]);return t.copy=function(){return Wi(t,QT()).base(t.base())},Uo.apply(t,arguments)}function JT(){var t=hN(Ig());return t.copy=function(){return Wi(t,JT()).constant(t.constant())},Uo.apply(t,arguments)}function CN(){var t=fN(Ig());return t.copy=function(){return Wi(t,CN()).exponent(t.exponent())},Uo.apply(t,arguments)}function bse(){return CN.apply(null,arguments).exponent(.5)}function ZT(){var t=[],r=es;function a(s){if(s!=null&&!isNaN(s=+s))return r((e0(t,s,1)-1)/(t.length-1))}return a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let n of s)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(ki),a},a.interpolator=function(s){return arguments.length?(r=s,a):r},a.range=function(){return t.map((s,n)=>r(n/(t.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(n,o)=>sre(t,o/s))},a.copy=function(){return ZT(r).domain(t)},Uo.apply(a,arguments)}function Lg(){var t=0,r=.5,a=1,s=1,n,o,i,l,c,d=es,u,m=!1,x;function h(p){return isNaN(p=+p)?x:(p=.5+((p=+u(p))-o)*(s*p<s*o?l:c),d(m?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,r,a]=p,n=u(t=+t),o=u(r=+r),i=u(a=+a),l=n===o?0:.5/(o-n),c=o===i?0:.5/(i-o),s=o<n?-1:1,h):[t,r,a]},h.clamp=function(p){return arguments.length?(m=!!p,h):m},h.interpolator=function(p){return arguments.length?(d=p,h):d};function v(p){return function(g){var y,f,b;return arguments.length?([y,f,b]=g,d=Pre(p,[y,f,b]),h):[d(0),d(.5),d(1)]}}return h.range=v(xu),h.rangeRound=v(dN),h.unknown=function(p){return arguments.length?(x=p,h):x},function(p){return u=p,n=p(t),o=p(r),i=p(a),l=n===o?0:.5/(o-n),c=o===i?0:.5/(i-o),s=o<n?-1:1,h}}function eO(){var t=Ui(Lg()(es));return t.copy=function(){return Wi(t,eO())},Uo.apply(t,arguments)}function tO(){var t=pN(Lg()).domain([.1,1,10]);return t.copy=function(){return Wi(t,tO()).base(t.base())},Uo.apply(t,arguments)}function rO(){var t=hN(Lg());return t.copy=function(){return Wi(t,rO()).constant(t.constant())},Uo.apply(t,arguments)}function kN(){var t=fN(Lg());return t.copy=function(){return Wi(t,kN()).exponent(t.exponent())},Uo.apply(t,arguments)}function vse(){return kN.apply(null,arguments).exponent(.5)}const RS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sx,scaleDiverging:eO,scaleDivergingLog:tO,scaleDivergingPow:kN,scaleDivergingSqrt:vse,scaleDivergingSymlog:rO,scaleIdentity:$T,scaleImplicit:bj,scaleLinear:Ih,scaleLog:DT,scaleOrdinal:iN,scalePoint:mm,scalePow:gN,scaleQuantile:LT,scaleQuantize:BT,scaleRadial:IT,scaleSequential:YT,scaleSequentialLog:QT,scaleSequentialPow:CN,scaleSequentialQuantile:ZT,scaleSequentialSqrt:bse,scaleSequentialSymlog:JT,scaleSqrt:Zre,scaleSymlog:MT,scaleThreshold:zT,scaleTime:fse,scaleUtc:gse,tickFormat:FT},Symbol.toStringTag,{value:"Module"}));var yse=su;function jse(t,r,a){for(var s=-1,n=t.length;++s<n;){var o=t[s],i=r(o);if(i!=null&&(l===void 0?i===i&&!yse(i):a(i,l)))var l=i,c=o}return c}var Bg=jse;function Nse(t,r){return t>r}var aO=Nse,wse=Bg,_se=aO,Sse=mu;function Cse(t){return t&&t.length?wse(t,Sse,_se):void 0}var kse=Cse;const pi=dr(kse);function Ese(t,r){return t<r}var sO=Ese,Ase=Bg,Pse=sO,Tse=mu;function Ose(t){return t&&t.length?Ase(t,Tse,Pse):void 0}var Fse=Ose;const zg=dr(Fse);var $se=z2,Rse=no,Dse=xT,Mse=Ns;function Ise(t,r){var a=Mse(t)?$se:Dse;return a(t,Rse(r))}var Lse=Ise,Bse=uT,zse=Lse;function qse(t,r){return Bse(zse(t,r),1)}var Vse=qse;const Use=dr(Vse);var Wse=rN;function Hse(t,r){return Wse(t,r)}var Kse=Hse;const Ul=dr(Kse);var pu=1e9,Gse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AN,Tr=!0,on="[DecimalError] ",Cl=on+"Invalid argument: ",EN=on+"Exponent out of range: ",hu=Math.floor,nl=Math.pow,Xse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$s,ga=1e7,_r=7,nO=9007199254740991,qh=hu(nO/_r),yt={};yt.absoluteValue=yt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};yt.comparedTo=yt.cmp=function(t){var r,a,s,n,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(s=o.d.length,n=t.d.length,r=0,a=s<n?s:n;r<a;++r)if(o.d[r]!==t.d[r])return o.d[r]>t.d[r]^o.s<0?1:-1;return s===n?0:s>n^o.s<0?1:-1};yt.decimalPlaces=yt.dp=function(){var t=this,r=t.d.length-1,a=(r-t.e)*_r;if(r=t.d[r],r)for(;r%10==0;r/=10)a--;return a<0?0:a};yt.dividedBy=yt.div=function(t){return wo(this,new this.constructor(t))};yt.dividedToIntegerBy=yt.idiv=function(t){var r=this,a=r.constructor;return hr(wo(r,new a(t),0,1),a.precision)};yt.equals=yt.eq=function(t){return!this.cmp(t)};yt.exponent=function(){return ta(this)};yt.greaterThan=yt.gt=function(t){return this.cmp(t)>0};yt.greaterThanOrEqualTo=yt.gte=function(t){return this.cmp(t)>=0};yt.isInteger=yt.isint=function(){return this.e>this.d.length-2};yt.isNegative=yt.isneg=function(){return this.s<0};yt.isPositive=yt.ispos=function(){return this.s>0};yt.isZero=function(){return this.s===0};yt.lessThan=yt.lt=function(t){return this.cmp(t)<0};yt.lessThanOrEqualTo=yt.lte=function(t){return this.cmp(t)<1};yt.logarithm=yt.log=function(t){var r,a=this,s=a.constructor,n=s.precision,o=n+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq($s))throw Error(on+"NaN");if(a.s<1)throw Error(on+(a.s?"NaN":"-Infinity"));return a.eq($s)?new s(0):(Tr=!1,r=wo(cx(a,o),cx(t,o),o),Tr=!0,hr(r,n))};yt.minus=yt.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?lO(r,t):oO(r,(t.s=-t.s,t))};yt.modulo=yt.mod=function(t){var r,a=this,s=a.constructor,n=s.precision;if(t=new s(t),!t.s)throw Error(on+"NaN");return a.s?(Tr=!1,r=wo(a,t,0,1).times(t),Tr=!0,a.minus(r)):hr(new s(a),n)};yt.naturalExponential=yt.exp=function(){return iO(this)};yt.naturalLogarithm=yt.ln=function(){return cx(this)};yt.negated=yt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};yt.plus=yt.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?oO(r,t):lO(r,(t.s=-t.s,t))};yt.precision=yt.sd=function(t){var r,a,s,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Cl+t);if(r=ta(n)+1,s=n.d.length-1,a=s*_r+1,s=n.d[s],s){for(;s%10==0;s/=10)a--;for(s=n.d[0];s>=10;s/=10)a++}return t&&r>a?r:a};yt.squareRoot=yt.sqrt=function(){var t,r,a,s,n,o,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(on+"NaN")}for(t=ta(l),Tr=!1,n=Math.sqrt(+l),n==0||n==1/0?(r=Wn(l.d),(r.length+t)%2==0&&(r+="0"),n=Math.sqrt(r),t=hu((t+1)/2)-(t<0||t%2),n==1/0?r="5e"+t:(r=n.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),s=new c(r)):s=new c(n.toString()),a=c.precision,n=i=a+3;;)if(o=s,s=o.plus(wo(l,o,i+2)).times(.5),Wn(o.d).slice(0,i)===(r=Wn(s.d)).slice(0,i)){if(r=r.slice(i-3,i+1),n==i&&r=="4999"){if(hr(o,a+1,0),o.times(o).eq(l)){s=o;break}}else if(r!="9999")break;i+=4}return Tr=!0,hr(s,a)};yt.times=yt.mul=function(t){var r,a,s,n,o,i,l,c,d,u=this,m=u.constructor,x=u.d,h=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,a=u.e+t.e,c=x.length,d=h.length,c<d&&(o=x,x=h,h=o,i=c,c=d,d=i),o=[],i=c+d,s=i;s--;)o.push(0);for(s=d;--s>=0;){for(r=0,n=c+s;n>s;)l=o[n]+h[s]*x[n-s-1]+r,o[n--]=l%ga|0,r=l/ga|0;o[n]=(o[n]+r)%ga|0}for(;!o[--i];)o.pop();return r?++a:o.shift(),t.d=o,t.e=a,Tr?hr(t,m.precision):t};yt.toDecimalPlaces=yt.todp=function(t,r){var a=this,s=a.constructor;return a=new s(a),t===void 0?a:(eo(t,0,pu),r===void 0?r=s.rounding:eo(r,0,8),hr(a,t+ta(a)+1,r))};yt.toExponential=function(t,r){var a,s=this,n=s.constructor;return t===void 0?a=Wl(s,!0):(eo(t,0,pu),r===void 0?r=n.rounding:eo(r,0,8),s=hr(new n(s),t+1,r),a=Wl(s,!0,t+1)),a};yt.toFixed=function(t,r){var a,s,n=this,o=n.constructor;return t===void 0?Wl(n):(eo(t,0,pu),r===void 0?r=o.rounding:eo(r,0,8),s=hr(new o(n),t+ta(n)+1,r),a=Wl(s.abs(),!1,t+ta(s)+1),n.isneg()&&!n.isZero()?"-"+a:a)};yt.toInteger=yt.toint=function(){var t=this,r=t.constructor;return hr(new r(t),ta(t)+1,r.rounding)};yt.toNumber=function(){return+this};yt.toPower=yt.pow=function(t){var r,a,s,n,o,i,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c($s);if(l=new c(l),!l.s){if(t.s<1)throw Error(on+"Infinity");return l}if(l.eq($s))return l;if(s=c.precision,t.eq($s))return hr(l,s);if(r=t.e,a=t.d.length-1,i=r>=a,o=l.s,i){if((a=u<0?-u:u)<=nO){for(n=new c($s),r=Math.ceil(s/_r+4),Tr=!1;a%2&&(n=n.times(l),MS(n.d,r)),a=hu(a/2),a!==0;)l=l.times(l),MS(l.d,r);return Tr=!0,t.s<0?new c($s).div(n):hr(n,s)}}else if(o<0)throw Error(on+"NaN");return o=o<0&&t.d[Math.max(r,a)]&1?-1:1,l.s=1,Tr=!1,n=t.times(cx(l,s+d)),Tr=!0,n=iO(n),n.s=o,n};yt.toPrecision=function(t,r){var a,s,n=this,o=n.constructor;return t===void 0?(a=ta(n),s=Wl(n,a<=o.toExpNeg||a>=o.toExpPos)):(eo(t,1,pu),r===void 0?r=o.rounding:eo(r,0,8),n=hr(new o(n),t,r),a=ta(n),s=Wl(n,t<=a||a<=o.toExpNeg,t)),s};yt.toSignificantDigits=yt.tosd=function(t,r){var a=this,s=a.constructor;return t===void 0?(t=s.precision,r=s.rounding):(eo(t,1,pu),r===void 0?r=s.rounding:eo(r,0,8)),hr(new s(a),t,r)};yt.toString=yt.valueOf=yt.val=yt.toJSON=yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=ta(t),a=t.constructor;return Wl(t,r<=a.toExpNeg||r>=a.toExpPos)};function oO(t,r){var a,s,n,o,i,l,c,d,u=t.constructor,m=u.precision;if(!t.s||!r.s)return r.s||(r=new u(t)),Tr?hr(r,m):r;if(c=t.d,d=r.d,i=t.e,n=r.e,c=c.slice(),o=i-n,o){for(o<0?(s=c,o=-o,l=d.length):(s=d,n=i,l=c.length),i=Math.ceil(m/_r),l=i>l?i+1:l+1,o>l&&(o=l,s.length=1),s.reverse();o--;)s.push(0);s.reverse()}for(l=c.length,o=d.length,l-o<0&&(o=l,s=d,d=c,c=s),a=0;o;)a=(c[--o]=c[o]+d[o]+a)/ga|0,c[o]%=ga;for(a&&(c.unshift(a),++n),l=c.length;c[--l]==0;)c.pop();return r.d=c,r.e=n,Tr?hr(r,m):r}function eo(t,r,a){if(t!==~~t||t<r||t>a)throw Error(Cl+t)}function Wn(t){var r,a,s,n=t.length-1,o="",i=t[0];if(n>0){for(o+=i,r=1;r<n;r++)s=t[r]+"",a=_r-s.length,a&&(o+=ni(a)),o+=s;i=t[r],s=i+"",a=_r-s.length,a&&(o+=ni(a))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var wo=function(){function t(s,n){var o,i=0,l=s.length;for(s=s.slice();l--;)o=s[l]*n+i,s[l]=o%ga|0,i=o/ga|0;return i&&s.unshift(i),s}function r(s,n,o,i){var l,c;if(o!=i)c=o>i?1:-1;else for(l=c=0;l<o;l++)if(s[l]!=n[l]){c=s[l]>n[l]?1:-1;break}return c}function a(s,n,o){for(var i=0;o--;)s[o]-=i,i=s[o]<n[o]?1:0,s[o]=i*ga+s[o]-n[o];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,o,i){var l,c,d,u,m,x,h,v,p,g,y,f,b,N,_,w,S,C,E=s.constructor,T=s.s==n.s?1:-1,q=s.d,A=n.d;if(!s.s)return new E(s);if(!n.s)throw Error(on+"Division by zero");for(c=s.e-n.e,S=A.length,_=q.length,h=new E(T),v=h.d=[],d=0;A[d]==(q[d]||0);)++d;if(A[d]>(q[d]||0)&&--c,o==null?f=o=E.precision:i?f=o+(ta(s)-ta(n))+1:f=o,f<0)return new E(0);if(f=f/_r+2|0,d=0,S==1)for(u=0,A=A[0],f++;(d<_||u)&&f--;d++)b=u*ga+(q[d]||0),v[d]=b/A|0,u=b%A|0;else{for(u=ga/(A[0]+1)|0,u>1&&(A=t(A,u),q=t(q,u),S=A.length,_=q.length),N=S,p=q.slice(0,S),g=p.length;g<S;)p[g++]=0;C=A.slice(),C.unshift(0),w=A[0],A[1]>=ga/2&&++w;do u=0,l=r(A,p,S,g),l<0?(y=p[0],S!=g&&(y=y*ga+(p[1]||0)),u=y/w|0,u>1?(u>=ga&&(u=ga-1),m=t(A,u),x=m.length,g=p.length,l=r(m,p,x,g),l==1&&(u--,a(m,S<x?C:A,x))):(u==0&&(l=u=1),m=A.slice()),x=m.length,x<g&&m.unshift(0),a(p,m,g),l==-1&&(g=p.length,l=r(A,p,S,g),l<1&&(u++,a(p,S<g?C:A,g))),g=p.length):l===0&&(u++,p=[0]),v[d++]=u,l&&p[0]?p[g++]=q[N]||0:(p=[q[N]],g=1);while((N++<_||p[0]!==void 0)&&f--)}return v[0]||v.shift(),h.e=c,hr(h,i?o+ta(h)+1:o)}}();function iO(t,r){var a,s,n,o,i,l,c=0,d=0,u=t.constructor,m=u.precision;if(ta(t)>16)throw Error(EN+ta(t));if(!t.s)return new u($s);for(Tr=!1,l=m,i=new u(.03125);t.abs().gte(.1);)t=t.times(i),d+=5;for(s=Math.log(nl(2,d))/Math.LN10*2+5|0,l+=s,a=n=o=new u($s),u.precision=l;;){if(n=hr(n.times(t),l),a=a.times(++c),i=o.plus(wo(n,a,l)),Wn(i.d).slice(0,l)===Wn(o.d).slice(0,l)){for(;d--;)o=hr(o.times(o),l);return u.precision=m,r==null?(Tr=!0,hr(o,m)):o}o=i}}function ta(t){for(var r=t.e*_r,a=t.d[0];a>=10;a/=10)r++;return r}function uv(t,r,a){if(r>t.LN10.sd())throw Tr=!0,a&&(t.precision=a),Error(on+"LN10 precision limit exceeded");return hr(new t(t.LN10),r)}function ni(t){for(var r="";t--;)r+="0";return r}function cx(t,r){var a,s,n,o,i,l,c,d,u,m=1,x=10,h=t,v=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(on+(h.s?"NaN":"-Infinity"));if(h.eq($s))return new p(0);if(r==null?(Tr=!1,d=g):d=r,h.eq(10))return r==null&&(Tr=!0),uv(p,d);if(d+=x,p.precision=d,a=Wn(v),s=a.charAt(0),o=ta(h),Math.abs(o)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)h=h.times(t),a=Wn(h.d),s=a.charAt(0),m++;o=ta(h),s>1?(h=new p("0."+a),o++):h=new p(s+"."+a.slice(1))}else return c=uv(p,d+2,g).times(o+""),h=cx(new p(s+"."+a.slice(1)),d-x).plus(c),p.precision=g,r==null?(Tr=!0,hr(h,g)):h;for(l=i=h=wo(h.minus($s),h.plus($s),d),u=hr(h.times(h),d),n=3;;){if(i=hr(i.times(u),d),c=l.plus(wo(i,new p(n),d)),Wn(c.d).slice(0,d)===Wn(l.d).slice(0,d))return l=l.times(2),o!==0&&(l=l.plus(uv(p,d+2,g).times(o+""))),l=wo(l,new p(m),d),p.precision=g,r==null?(Tr=!0,hr(l,g)):l;l=c,n+=2}}function DS(t,r){var a,s,n;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(a<0&&(a=s),a+=+r.slice(s+1),r=r.substring(0,s)):a<0&&(a=r.length),s=0;r.charCodeAt(s)===48;)++s;for(n=r.length;r.charCodeAt(n-1)===48;)--n;if(r=r.slice(s,n),r){if(n-=s,a=a-s-1,t.e=hu(a/_r),t.d=[],s=(a+1)%_r,a<0&&(s+=_r),s<n){for(s&&t.d.push(+r.slice(0,s)),n-=_r;s<n;)t.d.push(+r.slice(s,s+=_r));r=r.slice(s),s=_r-r.length}else s-=n;for(;s--;)r+="0";if(t.d.push(+r),Tr&&(t.e>qh||t.e<-qh))throw Error(EN+a)}else t.s=0,t.e=0,t.d=[0];return t}function hr(t,r,a){var s,n,o,i,l,c,d,u,m=t.d;for(i=1,o=m[0];o>=10;o/=10)i++;if(s=r-i,s<0)s+=_r,n=r,d=m[u=0];else{if(u=Math.ceil((s+1)/_r),o=m.length,u>=o)return t;for(d=o=m[u],i=1;o>=10;o/=10)i++;s%=_r,n=s-_r+i}if(a!==void 0&&(o=nl(10,i-n-1),l=d/o%10|0,c=r<0||m[u+1]!==void 0||d%o,c=a<4?(l||c)&&(a==0||a==(t.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?n>0?d/nl(10,i-n):0:m[u-1])%10&1||a==(t.s<0?8:7))),r<1||!m[0])return c?(o=ta(t),m.length=1,r=r-o-1,m[0]=nl(10,(_r-r%_r)%_r),t.e=hu(-r/_r)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(s==0?(m.length=u,o=1,u--):(m.length=u+1,o=nl(10,_r-s),m[u]=n>0?(d/nl(10,i-n)%nl(10,n)|0)*o:0),c)for(;;)if(u==0){(m[0]+=o)==ga&&(m[0]=1,++t.e);break}else{if(m[u]+=o,m[u]!=ga)break;m[u--]=0,o=1}for(s=m.length;m[--s]===0;)m.pop();if(Tr&&(t.e>qh||t.e<-qh))throw Error(EN+ta(t));return t}function lO(t,r){var a,s,n,o,i,l,c,d,u,m,x=t.constructor,h=x.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new x(t),Tr?hr(r,h):r;if(c=t.d,m=r.d,s=r.e,d=t.e,c=c.slice(),i=d-s,i){for(u=i<0,u?(a=c,i=-i,l=m.length):(a=m,s=d,l=c.length),n=Math.max(Math.ceil(h/_r),l)+2,i>n&&(i=n,a.length=1),a.reverse(),n=i;n--;)a.push(0);a.reverse()}else{for(n=c.length,l=m.length,u=n<l,u&&(l=n),n=0;n<l;n++)if(c[n]!=m[n]){u=c[n]<m[n];break}i=0}for(u&&(a=c,c=m,m=a,r.s=-r.s),l=c.length,n=m.length-l;n>0;--n)c[l++]=0;for(n=m.length;n>i;){if(c[--n]<m[n]){for(o=n;o&&c[--o]===0;)c[o]=ga-1;--c[o],c[n]+=ga}c[n]-=m[n]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(r.d=c,r.e=s,Tr?hr(r,h):r):new x(0)}function Wl(t,r,a){var s,n=ta(t),o=Wn(t.d),i=o.length;return r?(a&&(s=a-i)>0?o=o.charAt(0)+"."+o.slice(1)+ni(s):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(n<0?"e":"e+")+n):n<0?(o="0."+ni(-n-1)+o,a&&(s=a-i)>0&&(o+=ni(s))):n>=i?(o+=ni(n+1-i),a&&(s=a-n-1)>0&&(o=o+"."+ni(s))):((s=n+1)<i&&(o=o.slice(0,s)+"."+o.slice(s)),a&&(s=a-i)>0&&(n+1===i&&(o+="."),o+=ni(s))),t.s<0?"-"+o:o}function MS(t,r){if(t.length>r)return t.length=r,!0}function cO(t){var r,a,s;function n(o){var i=this;if(!(i instanceof n))return new n(o);if(i.constructor=n,o instanceof n){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Cl+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return DS(i,o.toString())}else if(typeof o!="string")throw Error(Cl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,Xse.test(o))DS(i,o);else throw Error(Cl+o)}if(n.prototype=yt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=cO,n.config=n.set=Yse,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(a=s[r++])||(t[a]=this[a]);return n.config(t),n}function Yse(t){if(!t||typeof t!="object")throw Error(on+"Object expected");var r,a,s,n=["precision",1,pu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<n.length;r+=3)if((s=t[a=n[r]])!==void 0)if(hu(s)===s&&s>=n[r+1]&&s<=n[r+2])this[a]=s;else throw Error(Cl+a+": "+s);if((s=t[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(Cl+a+": "+s);return this}var AN=cO(Gse);$s=new AN(1);const mr=AN;function Qse(t){return tne(t)||ene(t)||Zse(t)||Jse()}function Jse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zse(t,r){if(t){if(typeof t=="string")return Nj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Nj(t,r)}}function ene(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function tne(t){if(Array.isArray(t))return Nj(t)}function Nj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var rne=function(r){return r},dO={},uO=function(r){return r===dO},IS=function(r){return function a(){return arguments.length===0||arguments.length===1&&uO(arguments.length<=0?void 0:arguments[0])?a:r.apply(void 0,arguments)}},ane=function t(r,a){return r===1?a:IS(function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];var i=n.filter(function(l){return l!==dO}).length;return i>=r?a.apply(void 0,n):t(r-i,IS(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=n.map(function(m){return uO(m)?c.shift():m});return a.apply(void 0,Qse(u).concat(c))}))})},qg=function(r){return ane(r.length,r)},wj=function(r,a){for(var s=[],n=r;n<a;++n)s[n-r]=n;return s},sne=qg(function(t,r){return Array.isArray(r)?r.map(t):Object.keys(r).map(function(a){return r[a]}).map(t)}),nne=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];if(!a.length)return rne;var n=a.reverse(),o=n[0],i=n.slice(1);return function(){return i.reduce(function(l,c){return c(l)},o.apply(void 0,arguments))}},_j=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},mO=function(r){var a=null,s=null;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a&&o.every(function(l,c){return l===a[c]})||(a=o,s=r.apply(void 0,o)),s}};function one(t){var r;return t===0?r=1:r=Math.floor(new mr(t).abs().log(10).toNumber())+1,r}function ine(t,r,a){for(var s=new mr(t),n=0,o=[];s.lt(r)&&n<1e5;)o.push(s.toNumber()),s=s.add(a),n++;return o}var lne=qg(function(t,r,a){var s=+t,n=+r;return s+a*(n-s)}),cne=qg(function(t,r,a){var s=r-+t;return s=s||1/0,(a-t)/s}),dne=qg(function(t,r,a){var s=r-+t;return s=s||1/0,Math.max(0,Math.min(1,(a-t)/s))});const Vg={rangeStep:ine,getDigitCount:one,interpolateNumber:lne,uninterpolateNumber:cne,uninterpolateTruncation:dne};function Sj(t){return xne(t)||mne(t)||xO(t)||une()}function une(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function xne(t){if(Array.isArray(t))return Cj(t)}function dx(t,r){return fne(t)||hne(t,r)||xO(t,r)||pne()}function pne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xO(t,r){if(t){if(typeof t=="string")return Cj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cj(t,r)}}function Cj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function hne(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],s=!0,n=!1,o=void 0;try{for(var i=t[Symbol.iterator](),l;!(s=(l=i.next()).done)&&(a.push(l.value),!(r&&a.length===r));s=!0);}catch(c){n=!0,o=c}finally{try{!s&&i.return!=null&&i.return()}finally{if(n)throw o}}return a}}function fne(t){if(Array.isArray(t))return t}function pO(t){var r=dx(t,2),a=r[0],s=r[1],n=a,o=s;return a>s&&(n=s,o=a),[n,o]}function hO(t,r,a){if(t.lte(0))return new mr(0);var s=Vg.getDigitCount(t.toNumber()),n=new mr(10).pow(s),o=t.div(n),i=s!==1?.05:.1,l=new mr(Math.ceil(o.div(i).toNumber())).add(a).mul(i),c=l.mul(n);return r?c:new mr(Math.ceil(c))}function gne(t,r,a){var s=1,n=new mr(t);if(!n.isint()&&a){var o=Math.abs(t);o<1?(s=new mr(10).pow(Vg.getDigitCount(t)-1),n=new mr(Math.floor(n.div(s).toNumber())).mul(s)):o>1&&(n=new mr(Math.floor(t)))}else t===0?n=new mr(Math.floor((r-1)/2)):a||(n=new mr(Math.floor(t)));var i=Math.floor((r-1)/2),l=nne(sne(function(c){return n.add(new mr(c-i).mul(s)).toNumber()}),wj);return l(0,r)}function fO(t,r,a,s){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new mr(0),tickMin:new mr(0),tickMax:new mr(0)};var o=hO(new mr(r).sub(t).div(a-1),s,n),i;t<=0&&r>=0?i=new mr(0):(i=new mr(t).add(r).div(2),i=i.sub(new mr(i).mod(o)));var l=Math.ceil(i.sub(t).div(o).toNumber()),c=Math.ceil(new mr(r).sub(i).div(o).toNumber()),d=l+c+1;return d>a?fO(t,r,a,s,n+1):(d<a&&(c=r>0?c+(a-d):c,l=r>0?l:l+(a-d)),{step:o,tickMin:i.sub(new mr(l).mul(o)),tickMax:i.add(new mr(c).mul(o))})}function bne(t){var r=dx(t,2),a=r[0],s=r[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),l=pO([a,s]),c=dx(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(Sj(wj(0,n-1).map(function(){return 1/0}))):[].concat(Sj(wj(0,n-1).map(function(){return-1/0})),[u]);return a>s?_j(m):m}if(d===u)return gne(d,n,o);var x=fO(d,u,i,o),h=x.step,v=x.tickMin,p=x.tickMax,g=Vg.rangeStep(v,p.add(new mr(.1).mul(h)),h);return a>s?_j(g):g}function vne(t,r){var a=dx(t,2),s=a[0],n=a[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=pO([s,n]),l=dx(i,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,n];if(c===d)return[c];var u=Math.max(r,2),m=hO(new mr(d).sub(c).div(u-1),o,0),x=[].concat(Sj(Vg.rangeStep(new mr(c),new mr(d).sub(new mr(.99).mul(m)),m)),[d]);return s>n?_j(x):x}var yne=mO(bne),jne=mO(vne),Nne="Invariant failed";function Hl(t,r){throw new Error(Nne)}var wne=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Td(t)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Vh.apply(this,arguments)}function _ne(t,r){return Ene(t)||kne(t,r)||Cne(t,r)||Sne()}function Sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cne(t,r){if(t){if(typeof t=="string")return LS(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return LS(t,r)}}function LS(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function kne(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Ene(t){if(Array.isArray(t))return t}function Ane(t,r){if(t==null)return{};var a=Pne(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Pne(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Tne(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function One(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,vO(s.key),s)}}function Fne(t,r,a){return r&&One(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ne(t,r,a){return r=Uh(r),Rne(t,gO()?Reflect.construct(r,a||[],Uh(t).constructor):r.apply(t,a))}function Rne(t,r){if(r&&(Td(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dne(t)}function Dne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gO=function(){return!!t})()}function Uh(t){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Uh(t)}function Mne(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&kj(t,r)}function kj(t,r){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},kj(t,r)}function bO(t,r,a){return r=vO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function vO(t){var r=Ine(t,"string");return Td(r)=="symbol"?r:r+""}function Ine(t,r){if(Td(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Td(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s0=function(t){function r(){return Tne(this,r),$ne(this,r,arguments)}return Mne(r,t),Fne(r,[{key:"render",value:function(){var s=this.props,n=s.offset,o=s.layout,i=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,m=s.yAxis,x=Ane(s,wne),h=St(x,!1);this.props.direction==="x"&&u.type!=="number"&&Hl();var v=c.map(function(p){var g=d(p,l),y=g.x,f=g.y,b=g.value,N=g.errorVal;if(!N)return null;var _=[],w,S;if(Array.isArray(N)){var C=_ne(N,2);w=C[0],S=C[1]}else w=S=N;if(o==="vertical"){var E=u.scale,T=f+n,q=T+i,A=T-i,O=E(b-w),V=E(b+S);_.push({x1:V,y1:q,x2:V,y2:A}),_.push({x1:O,y1:T,x2:V,y2:T}),_.push({x1:O,y1:q,x2:O,y2:A})}else if(o==="horizontal"){var G=m.scale,L=y+n,Z=L-i,D=L+i,K=G(b-w),R=G(b+S);_.push({x1:Z,y1:R,x2:D,y2:R}),_.push({x1:L,y1:K,x2:L,y2:R}),_.push({x1:Z,y1:K,x2:D,y2:K})}return pe.createElement(Vt,Vh({className:"recharts-errorBar",key:"bar-".concat(_.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},h),_.map(function(B){return pe.createElement("line",Vh({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return pe.createElement(Vt,{className:"recharts-errorBars"},v)}}])}(pe.Component);bO(s0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});bO(s0,"displayName","ErrorBar");function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ux(t)}function BS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Yi(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?BS(Object(a),!0).forEach(function(s){Lne(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):BS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Lne(t,r,a){return r=Bne(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Bne(t){var r=zne(t,"string");return ux(r)=="symbol"?r:r+""}function zne(t,r){if(ux(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(ux(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var yO=function(r){var a=r.children,s=r.formattedGraphicalItems,n=r.legendWidth,o=r.legendContent,i=Ps(a,Ar);if(!i)return null;var l=Ar.defaultProps,c=l!==void 0?Yi(Yi({},l),i.props):{},d;return i.props&&i.props.payload?d=i.props&&i.props.payload:o==="children"?d=(s||[]).reduce(function(u,m){var x=m.item,h=m.props,v=h.sectors||h.data||[];return u.concat(v.map(function(p){return{type:i.props.iconType||x.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(s||[]).map(function(u){var m=u.item,x=m.type.defaultProps,h=x!==void 0?Yi(Yi({},x),m.props):{},v=h.dataKey,p=h.name,g=h.legendType,y=h.hide;return{inactive:y,dataKey:v,type:c.iconType||g||"square",color:PN(m),value:p||v,payload:h}}),Yi(Yi(Yi({},c),Ar.getWithHeight(i,n)),{},{payload:d,item:i})};function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mx(t)}function zS(t){return Wne(t)||Une(t)||Vne(t)||qne()}function qne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vne(t,r){if(t){if(typeof t=="string")return Ej(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ej(t,r)}}function Une(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wne(t){if(Array.isArray(t))return Ej(t)}function Ej(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function qS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Lr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?qS(Object(a),!0).forEach(function(s){td(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function td(t,r,a){return r=Hne(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Hne(t){var r=Kne(t,"string");return mx(r)=="symbol"?r:r+""}function Kne(t,r){if(mx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(mx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Hr(t,r,a){return Ft(t)||Ft(r)?a:pa(r)?Is(t,r,a):Et(r)?r(t):a}function xm(t,r,a,s){var n=Use(t,function(l){return Hr(l,r)});if(a==="number"){var o=n.filter(function(l){return at(l)||parseFloat(l)});return o.length?[zg(o),pi(o)]:[1/0,-1/0]}var i=s?n.filter(function(l){return!Ft(l)}):n;return i.map(function(l){return pa(l)||l instanceof Date?l:""})}var Gne=function(r){var a,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,l=(a=s==null?void 0:s.length)!==null&&a!==void 0?a:0;if(l<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,d=0;d<l;d++){var u=d>0?n[d-1].coordinate:n[l-1].coordinate,m=n[d].coordinate,x=d>=l-1?n[0].coordinate:n[d+1].coordinate,h=void 0;if(Ja(m-u)!==Ja(x-m)){var v=[];if(Ja(x-m)===Ja(c[1]-c[0])){h=x;var p=m+c[1]-c[0];v[0]=Math.min(p,(p+u)/2),v[1]=Math.max(p,(p+u)/2)}else{h=u;var g=x+c[1]-c[0];v[0]=Math.min(m,(g+m)/2),v[1]=Math.max(m,(g+m)/2)}var y=[Math.min(m,(h+m)/2),Math.max(m,(h+m)/2)];if(r>y[0]&&r<=y[1]||r>=v[0]&&r<=v[1]){i=n[d].index;break}}else{var f=Math.min(u,x),b=Math.max(u,x);if(r>(f+m)/2&&r<=(b+m)/2){i=n[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&r<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&r>(s[N].coordinate+s[N-1].coordinate)/2&&r<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&r>(s[N].coordinate+s[N-1].coordinate)/2){i=s[N].index;break}return i},PN=function(r){var a,s=r,n=s.type.displayName,o=(a=r.type)!==null&&a!==void 0&&a.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,i=o.stroke,l=o.fill,c;switch(n){case"Line":c=i;break;case"Area":case"Radar":c=i&&i!=="none"?i:l;break;default:c=l;break}return c},Xne=function(r){var a=r.barSize,s=r.totalSize,n=r.stackGroups,o=n===void 0?{}:n;if(!o)return{};for(var i={},l=Object.keys(o),c=0,d=l.length;c<d;c++)for(var u=o[l[c]].stackGroups,m=Object.keys(u),x=0,h=m.length;x<h;x++){var v=u[m[x]],p=v.items,g=v.cateAxisId,y=p.filter(function(S){return No(S.type).indexOf("Bar")>=0});if(y&&y.length){var f=y[0].type.defaultProps,b=f!==void 0?Lr(Lr({},f),y[0].props):y[0].props,N=b.barSize,_=b[g];i[_]||(i[_]=[]);var w=Ft(N)?a:N;i[_].push({item:y[0],stackList:y.slice(1),barSize:Ft(w)?void 0:Za(w,s,0)})}}return i},Yne=function(r){var a=r.barGap,s=r.barCategoryGap,n=r.bandSize,o=r.sizeList,i=o===void 0?[]:o,l=r.maxBarSize,c=i.length;if(c<1)return null;var d=Za(a,n,0,!0),u,m=[];if(i[0].barSize===+i[0].barSize){var x=!1,h=n/c,v=i.reduce(function(N,_){return N+_.barSize||0},0);v+=(c-1)*d,v>=n&&(v-=(c-1)*d,d=0),v>=n&&h>0&&(x=!0,h*=.9,v=c*h);var p=(n-v)/2>>0,g={offset:p-d,size:0};u=i.reduce(function(N,_){var w={item:_.item,position:{offset:g.offset+g.size+d,size:x?h:_.barSize}},S=[].concat(zS(N),[w]);return g=S[S.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){S.push({item:C,position:g})}),S},m)}else{var y=Za(s,n,0,!0);n-2*y-(c-1)*d<=0&&(d=0);var f=(n-2*y-(c-1)*d)/c;f>1&&(f>>=0);var b=l===+l?Math.min(f,l):f;u=i.reduce(function(N,_,w){var S=[].concat(zS(N),[{item:_.item,position:{offset:y+(f+d)*w+(f-b)/2,size:b}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},m)}return u},Qne=function(r,a,s,n){var o=s.children,i=s.width,l=s.margin,c=i-(l.left||0)-(l.right||0),d=yO({children:o,legendWidth:c});if(d){var u=n||{},m=u.width,x=u.height,h=d.align,v=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&h!=="center"&&at(r[h]))return Lr(Lr({},r),{},td({},h,r[h]+(m||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&v!=="middle"&&at(r[v]))return Lr(Lr({},r),{},td({},v,r[v]+(x||0)))}return r},Jne=function(r,a,s){return Ft(a)?!0:r==="horizontal"?a==="yAxis":r==="vertical"||s==="x"?a==="xAxis":s==="y"?a==="yAxis":!0},jO=function(r,a,s,n,o){var i=a.props.children,l=Ls(i,s0).filter(function(d){return Jne(n,o,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return r.reduce(function(d,u){var m=Hr(u,s);if(Ft(m))return d;var x=Array.isArray(m)?[zg(m),pi(m)]:[m,m],h=c.reduce(function(v,p){var g=Hr(u,p,0),y=x[0]-Math.abs(Array.isArray(g)?g[0]:g),f=x[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,v[0]),Math.max(f,v[1])]},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0])}return null},Zne=function(r,a,s,n,o){var i=a.map(function(l){return jO(r,l,s,o,n)}).filter(function(l){return!Ft(l)});return i&&i.length?i.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},NO=function(r,a,s,n,o){var i=a.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&jO(r,c,d,n)||xm(r,d,s,o)});if(s==="number")return i.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return i.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},wO=function(r,a){return r==="horizontal"&&a==="xAxis"||r==="vertical"&&a==="yAxis"||r==="centric"&&a==="angleAxis"||r==="radial"&&a==="radiusAxis"},_O=function(r,a,s,n){if(n)return r.map(function(c){return c.coordinate});var o,i,l=r.map(function(c){return c.coordinate===a&&(o=!0),c.coordinate===s&&(i=!0),c.coordinate});return o||l.push(a),i||l.push(s),l},vo=function(r,a,s){if(!r)return null;var n=r.scale,o=r.duplicateDomain,i=r.type,l=r.range,c=r.realScaleType==="scaleBand"?n.bandwidth()/2:2,d=(a||s)&&i==="category"&&n.bandwidth?n.bandwidth()/c:0;if(d=r.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ja(l[0]-l[1])*2*d:d,a&&(r.ticks||r.niceTicks)){var u=(r.ticks||r.niceTicks).map(function(m){var x=o?o.indexOf(m):m;return{coordinate:n(x)+d,value:m,offset:d}});return u.filter(function(m){return!cu(m.coordinate)})}return r.isCategorical&&r.categoricalDomain?r.categoricalDomain.map(function(m,x){return{coordinate:n(m)+d,value:m,index:x,offset:d}}):n.ticks&&!s?n.ticks(r.tickCount).map(function(m){return{coordinate:n(m)+d,value:m,offset:d}}):n.domain().map(function(m,x){return{coordinate:n(m)+d,value:o?o[m]:m,index:x,offset:d}})},mv=new WeakMap,Q0=function(r,a){if(typeof a!="function")return r;mv.has(r)||mv.set(r,new WeakMap);var s=mv.get(r);if(s.has(a))return s.get(a);var n=function(){r.apply(void 0,arguments),a.apply(void 0,arguments)};return s.set(a,n),n},SO=function(r,a,s){var n=r.scale,o=r.type,i=r.layout,l=r.axisType;if(n==="auto")return i==="radial"&&l==="radiusAxis"?{scale:sx(),realScaleType:"band"}:i==="radial"&&l==="angleAxis"?{scale:Ih(),realScaleType:"linear"}:o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!s)?{scale:mm(),realScaleType:"point"}:o==="category"?{scale:sx(),realScaleType:"band"}:{scale:Ih(),realScaleType:"linear"};if(zl(n)){var c="scale".concat(kg(n));return{scale:(RS[c]||mm)(),realScaleType:RS[c]?c:"point"}}return Et(n)?{scale:n}:{scale:mm(),realScaleType:"point"}},VS=1e-4,CO=function(r){var a=r.domain();if(!(!a||a.length<=2)){var s=a.length,n=r.range(),o=Math.min(n[0],n[1])-VS,i=Math.max(n[0],n[1])+VS,l=r(a[0]),c=r(a[s-1]);(l<o||l>i||c<o||c>i)&&r.domain([a[0],a[s-1]])}},eoe=function(r,a){if(!r)return null;for(var s=0,n=r.length;s<n;s++)if(r[s].item===a)return r[s].position;return null},toe=function(r,a){if(!a||a.length!==2||!at(a[0])||!at(a[1]))return r;var s=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),o=[r[0],r[1]];return(!at(r[0])||r[0]<s)&&(o[0]=s),(!at(r[1])||r[1]>n)&&(o[1]=n),o[0]>n&&(o[0]=n),o[1]<s&&(o[1]=s),o},roe=function(r){var a=r.length;if(!(a<=0))for(var s=0,n=r[0].length;s<n;++s)for(var o=0,i=0,l=0;l<a;++l){var c=cu(r[l][s][1])?r[l][s][0]:r[l][s][1];c>=0?(r[l][s][0]=o,r[l][s][1]=o+c,o=r[l][s][1]):(r[l][s][0]=i,r[l][s][1]=i+c,i=r[l][s][1])}},aoe=function(r){var a=r.length;if(!(a<=0))for(var s=0,n=r[0].length;s<n;++s)for(var o=0,i=0;i<a;++i){var l=cu(r[i][s][1])?r[i][s][0]:r[i][s][1];l>=0?(r[i][s][0]=o,r[i][s][1]=o+l,o=r[i][s][1]):(r[i][s][0]=0,r[i][s][1]=0)}},soe={sign:roe,expand:wH,none:wd,silhouette:_H,wiggle:SH,positive:aoe},noe=function(r,a,s){var n=a.map(function(l){return l.props.dataKey}),o=soe[s],i=NH().keys(n).value(function(l,c){return+Hr(l,c,0)}).order(Zy).offset(o);return i(r)},ooe=function(r,a,s,n,o,i){if(!r)return null;var l=i?a.reverse():a,c={},d=l.reduce(function(m,x){var h,v=(h=x.type)!==null&&h!==void 0&&h.defaultProps?Lr(Lr({},x.type.defaultProps),x.props):x.props,p=v.stackId,g=v.hide;if(g)return m;var y=v[s],f=m[y]||{hasStack:!1,stackGroups:{}};if(pa(p)){var b=f.stackGroups[p]||{numericAxisId:s,cateAxisId:n,items:[]};b.items.push(x),f.hasStack=!0,f.stackGroups[p]=b}else f.stackGroups[ac("_stackId_")]={numericAxisId:s,cateAxisId:n,items:[x]};return Lr(Lr({},m),{},td({},y,f))},c),u={};return Object.keys(d).reduce(function(m,x){var h=d[x];if(h.hasStack){var v={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,g){var y=h.stackGroups[g];return Lr(Lr({},p),{},td({},g,{numericAxisId:s,cateAxisId:n,items:y.items,stackedData:noe(r,y.items,o)}))},v)}return Lr(Lr({},m),{},td({},x,h))},u)},kO=function(r,a){var s=a.realScaleType,n=a.type,o=a.tickCount,i=a.originalDomain,l=a.allowDecimals,c=s||a.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&n==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var d=r.domain();if(!d.length)return null;var u=yne(d,o,l);return r.domain([zg(u),pi(u)]),{niceTicks:u}}if(o&&n==="number"){var m=r.domain(),x=jne(m,o,l);return{niceTicks:x}}return null};function Wh(t){var r=t.axis,a=t.ticks,s=t.bandSize,n=t.entry,o=t.index,i=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Ft(n[r.dataKey])){var l=fh(a,"value",n[r.dataKey]);if(l)return l.coordinate+s/2}return a[o]?a[o].coordinate+s/2:null}var c=Hr(n,Ft(i)?r.dataKey:i);return Ft(c)?null:r.scale(c)}var US=function(r){var a=r.axis,s=r.ticks,n=r.offset,o=r.bandSize,i=r.entry,l=r.index;if(a.type==="category")return s[l]?s[l].coordinate+n:null;var c=Hr(i,a.dataKey,a.domain[l]);return Ft(c)?null:a.scale(c)-o/2+n},ioe=function(r){var a=r.numericAxis,s=a.scale.domain();if(a.type==="number"){var n=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return n<=0&&o>=0?0:o<0?o:n}return s[0]},loe=function(r,a){var s,n=(s=r.type)!==null&&s!==void 0&&s.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,o=n.stackId;if(pa(o)){var i=a[o];if(i){var l=i.items.indexOf(r);return l>=0?i.stackedData[l]:null}}return null},coe=function(r){return r.reduce(function(a,s){return[zg(s.concat([a[0]]).filter(at)),pi(s.concat([a[1]]).filter(at))]},[1/0,-1/0])},EO=function(r,a,s){return Object.keys(r).reduce(function(n,o){var i=r[o],l=i.stackedData,c=l.reduce(function(d,u){var m=coe(u.slice(a,s+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},WS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Aj=function(r,a,s){if(Et(r))return r(a,s);if(!Array.isArray(r))return a;var n=[];if(at(r[0]))n[0]=s?r[0]:Math.min(r[0],a[0]);else if(WS.test(r[0])){var o=+WS.exec(r[0])[1];n[0]=a[0]-o}else Et(r[0])?n[0]=r[0](a[0]):n[0]=a[0];if(at(r[1]))n[1]=s?r[1]:Math.max(r[1],a[1]);else if(HS.test(r[1])){var i=+HS.exec(r[1])[1];n[1]=a[1]+i}else Et(r[1])?n[1]=r[1](a[1]):n[1]=a[1];return n},Hh=function(r,a,s){if(r&&r.scale&&r.scale.bandwidth){var n=r.scale.bandwidth();if(!s||n>0)return n}if(r&&a&&a.length>=2){for(var o=sN(a,function(m){return m.coordinate}),i=1/0,l=1,c=o.length;l<c;l++){var d=o[l],u=o[l-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return s?void 0:0},KS=function(r,a,s){return!r||!r.length||Ul(r,Is(s,"type.defaultProps.domain"))?a:r},AO=function(r,a){var s=r.type.defaultProps?Lr(Lr({},r.type.defaultProps),r.props):r.props,n=s.dataKey,o=s.name,i=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Lr(Lr({},St(r,!1)),{},{dataKey:n,unit:i,formatter:l,name:o||n,color:PN(r),value:Hr(a,n),type:c,payload:a,chartType:d,hide:u})};function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xx(t)}function GS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function mo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?GS(Object(a),!0).forEach(function(s){PO(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):GS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function PO(t,r,a){return r=doe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function doe(t){var r=uoe(t,"string");return xx(r)=="symbol"?r:r+""}function uoe(t,r){if(xx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function moe(t,r){return foe(t)||hoe(t,r)||poe(t,r)||xoe()}function xoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function poe(t,r){if(t){if(typeof t=="string")return XS(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return XS(t,r)}}function XS(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function hoe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function foe(t){if(Array.isArray(t))return t}var Kh=Math.PI/180,goe=function(r){return r*180/Math.PI},yr=function(r,a,s,n){return{x:r+Math.cos(-Kh*n)*s,y:a+Math.sin(-Kh*n)*s}},TO=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},boe=function(r,a,s,n,o){var i=r.width,l=r.height,c=r.startAngle,d=r.endAngle,u=Za(r.cx,i,i/2),m=Za(r.cy,l,l/2),x=TO(i,l,s),h=Za(r.innerRadius,x,0),v=Za(r.outerRadius,x,x*.8),p=Object.keys(a);return p.reduce(function(g,y){var f=a[y],b=f.domain,N=f.reversed,_;if(Ft(f.range))n==="angleAxis"?_=[c,d]:n==="radiusAxis"&&(_=[h,v]),N&&(_=[_[1],_[0]]);else{_=f.range;var w=_,S=moe(w,2);c=S[0],d=S[1]}var C=SO(f,o),E=C.realScaleType,T=C.scale;T.domain(b).range(_),CO(T);var q=kO(T,mo(mo({},f),{},{realScaleType:E})),A=mo(mo(mo({},f),q),{},{range:_,radius:v,realScaleType:E,scale:T,cx:u,cy:m,innerRadius:h,outerRadius:v,startAngle:c,endAngle:d});return mo(mo({},g),{},PO({},y,A))},{})},voe=function(r,a){var s=r.x,n=r.y,o=a.x,i=a.y;return Math.sqrt(Math.pow(s-o,2)+Math.pow(n-i,2))},yoe=function(r,a){var s=r.x,n=r.y,o=a.cx,i=a.cy,l=voe({x:s,y:n},{x:o,y:i});if(l<=0)return{radius:l};var c=(s-o)/l,d=Math.acos(c);return n>i&&(d=2*Math.PI-d),{radius:l,angle:goe(d),angleInRadian:d}},joe=function(r){var a=r.startAngle,s=r.endAngle,n=Math.floor(a/360),o=Math.floor(s/360),i=Math.min(n,o);return{startAngle:a-i*360,endAngle:s-i*360}},Noe=function(r,a){var s=a.startAngle,n=a.endAngle,o=Math.floor(s/360),i=Math.floor(n/360),l=Math.min(o,i);return r+l*360},YS=function(r,a){var s=r.x,n=r.y,o=yoe({x:s,y:n},a),i=o.radius,l=o.angle,c=a.innerRadius,d=a.outerRadius;if(i<c||i>d)return!1;if(i===0)return!0;var u=joe(a),m=u.startAngle,x=u.endAngle,h=l,v;if(m<=x){for(;h>x;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=x}else{for(;h>m;)h-=360;for(;h<x;)h+=360;v=h>=x&&h<=m}return v?mo(mo({},a),{},{radius:i,angle:Noe(h,a)}):null},OO=function(r){return!j.isValidElement(r)&&!Et(r)&&typeof r!="boolean"?r.className:""};function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},px(t)}var woe=["offset"];function _oe(t){return Eoe(t)||koe(t)||Coe(t)||Soe()}function Soe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Coe(t,r){if(t){if(typeof t=="string")return Pj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pj(t,r)}}function koe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Eoe(t){if(Array.isArray(t))return Pj(t)}function Pj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Aoe(t,r){if(t==null)return{};var a=Poe(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Poe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function QS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function la(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QS(Object(a),!0).forEach(function(s){Toe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Toe(t,r,a){return r=Ooe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ooe(t){var r=Foe(t,"string");return px(r)=="symbol"?r:r+""}function Foe(t,r){if(px(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(px(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},hx.apply(this,arguments)}var $oe=function(r){var a=r.value,s=r.formatter,n=Ft(r.children)?a:r.children;return Et(s)?s(n):n},Roe=function(r,a){var s=Ja(a-r),n=Math.min(Math.abs(a-r),360);return s*n},Doe=function(r,a,s){var n=r.position,o=r.viewBox,i=r.offset,l=r.className,c=o,d=c.cx,u=c.cy,m=c.innerRadius,x=c.outerRadius,h=c.startAngle,v=c.endAngle,p=c.clockWise,g=(m+x)/2,y=Roe(h,v),f=y>=0?1:-1,b,N;n==="insideStart"?(b=h+f*i,N=p):n==="insideEnd"?(b=v-f*i,N=!p):n==="end"&&(b=v+f*i,N=p),N=y<=0?N:!N;var _=yr(d,u,g,b),w=yr(d,u,g,b+(N?1:-1)*359),S="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(w.x,",").concat(w.y),C=Ft(r.id)?ac("recharts-radial-line-"):r.id;return pe.createElement("text",hx({},s,{dominantBaseline:"central",className:Mt("recharts-radial-bar-label",l)}),pe.createElement("defs",null,pe.createElement("path",{id:C,d:S})),pe.createElement("textPath",{xlinkHref:"#".concat(C)},a))},Moe=function(r){var a=r.viewBox,s=r.offset,n=r.position,o=a,i=o.cx,l=o.cy,c=o.innerRadius,d=o.outerRadius,u=o.startAngle,m=o.endAngle,x=(u+m)/2;if(n==="outside"){var h=yr(i,l,d+s,x),v=h.x,p=h.y;return{x:v,y:p,textAnchor:v>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,y=yr(i,l,g,x),f=y.x,b=y.y;return{x:f,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Ioe=function(r){var a=r.viewBox,s=r.parentViewBox,n=r.offset,o=r.position,i=a,l=i.x,c=i.y,d=i.width,u=i.height,m=u>=0?1:-1,x=m*n,h=m>0?"end":"start",v=m>0?"start":"end",p=d>=0?1:-1,g=p*n,y=p>0?"end":"start",f=p>0?"start":"end";if(o==="top"){var b={x:l+d/2,y:c-m*n,textAnchor:"middle",verticalAnchor:h};return la(la({},b),s?{height:Math.max(c-s.y,0),width:d}:{})}if(o==="bottom"){var N={x:l+d/2,y:c+u+x,textAnchor:"middle",verticalAnchor:v};return la(la({},N),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(o==="left"){var _={x:l-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return la(la({},_),s?{width:Math.max(_.x-s.x,0),height:u}:{})}if(o==="right"){var w={x:l+d+g,y:c+u/2,textAnchor:f,verticalAnchor:"middle"};return la(la({},w),s?{width:Math.max(s.x+s.width-w.x,0),height:u}:{})}var S=s?{width:d,height:u}:{};return o==="insideLeft"?la({x:l+g,y:c+u/2,textAnchor:f,verticalAnchor:"middle"},S):o==="insideRight"?la({x:l+d-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},S):o==="insideTop"?la({x:l+d/2,y:c+x,textAnchor:"middle",verticalAnchor:v},S):o==="insideBottom"?la({x:l+d/2,y:c+u-x,textAnchor:"middle",verticalAnchor:h},S):o==="insideTopLeft"?la({x:l+g,y:c+x,textAnchor:f,verticalAnchor:v},S):o==="insideTopRight"?la({x:l+d-g,y:c+x,textAnchor:y,verticalAnchor:v},S):o==="insideBottomLeft"?la({x:l+g,y:c+u-x,textAnchor:f,verticalAnchor:h},S):o==="insideBottomRight"?la({x:l+d-g,y:c+u-x,textAnchor:y,verticalAnchor:h},S):nu(o)&&(at(o.x)||xl(o.x))&&(at(o.y)||xl(o.y))?la({x:l+Za(o.x,d),y:c+Za(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):la({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},Loe=function(r){return"cx"in r&&at(r.cx)};function ya(t){var r=t.offset,a=r===void 0?5:r,s=Aoe(t,woe),n=la({offset:a},s),o=n.viewBox,i=n.position,l=n.value,c=n.children,d=n.content,u=n.className,m=u===void 0?"":u,x=n.textBreakAll;if(!o||Ft(l)&&Ft(c)&&!j.isValidElement(d)&&!Et(d))return null;if(j.isValidElement(d))return j.cloneElement(d,n);var h;if(Et(d)){if(h=j.createElement(d,n),j.isValidElement(h))return h}else h=$oe(n);var v=Loe(o),p=St(n,!0);if(v&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Doe(n,h,p);var g=v?Moe(n):Ioe(n);return pe.createElement(Vl,hx({className:Mt("recharts-label",m)},p,g,{breakAll:x}),h)}ya.displayName="Label";var FO=function(r){var a=r.cx,s=r.cy,n=r.angle,o=r.startAngle,i=r.endAngle,l=r.r,c=r.radius,d=r.innerRadius,u=r.outerRadius,m=r.x,x=r.y,h=r.top,v=r.left,p=r.width,g=r.height,y=r.clockWise,f=r.labelViewBox;if(f)return f;if(at(p)&&at(g)){if(at(m)&&at(x))return{x:m,y:x,width:p,height:g};if(at(h)&&at(v))return{x:h,y:v,width:p,height:g}}return at(m)&&at(x)?{x:m,y:x,width:0,height:0}:at(a)&&at(s)?{cx:a,cy:s,startAngle:o||n||0,endAngle:i||n||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:y}:r.viewBox?r.viewBox:{}},Boe=function(r,a){return r?r===!0?pe.createElement(ya,{key:"label-implicit",viewBox:a}):pa(r)?pe.createElement(ya,{key:"label-implicit",viewBox:a,value:r}):j.isValidElement(r)?r.type===ya?j.cloneElement(r,{key:"label-implicit",viewBox:a}):pe.createElement(ya,{key:"label-implicit",content:r,viewBox:a}):Et(r)?pe.createElement(ya,{key:"label-implicit",content:r,viewBox:a}):nu(r)?pe.createElement(ya,hx({viewBox:a},r,{key:"label-implicit"})):null:null},zoe=function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&s&&!r.label)return null;var n=r.children,o=FO(r),i=Ls(n,ya).map(function(c,d){return j.cloneElement(c,{viewBox:a||o,key:"label-".concat(d)})});if(!s)return i;var l=Boe(r.label,a||o);return[l].concat(_oe(i))};ya.parseViewBox=FO;ya.renderCallByParent=zoe;function qoe(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var Voe=qoe;const Uoe=dr(Voe);function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fx(t)}var Woe=["valueAccessor"],Hoe=["data","dataKey","clockWise","id","textBreakAll"];function Koe(t){return Qoe(t)||Yoe(t)||Xoe(t)||Goe()}function Goe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xoe(t,r){if(t){if(typeof t=="string")return Tj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Tj(t,r)}}function Yoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qoe(t){if(Array.isArray(t))return Tj(t)}function Tj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Gh.apply(this,arguments)}function JS(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ZS(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?JS(Object(a),!0).forEach(function(s){Joe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):JS(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Joe(t,r,a){return r=Zoe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Zoe(t){var r=eie(t,"string");return fx(r)=="symbol"?r:r+""}function eie(t,r){if(fx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(fx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function eC(t,r){if(t==null)return{};var a=tie(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function tie(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var rie=function(r){return Array.isArray(r.value)?Uoe(r.value):r.value};function Jn(t){var r=t.valueAccessor,a=r===void 0?rie:r,s=eC(t,Woe),n=s.data,o=s.dataKey,i=s.clockWise,l=s.id,c=s.textBreakAll,d=eC(s,Hoe);return!n||!n.length?null:pe.createElement(Vt,{className:"recharts-label-list"},n.map(function(u,m){var x=Ft(o)?a(u,m):Hr(u&&u.payload,o),h=Ft(l)?{}:{id:"".concat(l,"-").concat(m)};return pe.createElement(ya,Gh({},St(u,!0),d,h,{parentViewBox:u.parentViewBox,value:x,textBreakAll:c,viewBox:ya.parseViewBox(Ft(i)?u:ZS(ZS({},u),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}Jn.displayName="LabelList";function aie(t,r){return t?t===!0?pe.createElement(Jn,{key:"labelList-implicit",data:r}):pe.isValidElement(t)||Et(t)?pe.createElement(Jn,{key:"labelList-implicit",data:r,content:t}):nu(t)?pe.createElement(Jn,Gh({data:r},t,{key:"labelList-implicit"})):null:null}function sie(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,n=Ls(s,Jn).map(function(i,l){return j.cloneElement(i,{data:r,key:"labelList-".concat(l)})});if(!a)return n;var o=aie(t.label,r);return[o].concat(Koe(n))}Jn.renderCallByParent=sie;function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gx(t)}function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Oj.apply(this,arguments)}function tC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function rC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?tC(Object(a),!0).forEach(function(s){nie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function nie(t,r,a){return r=oie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function oie(t){var r=iie(t,"string");return gx(r)=="symbol"?r:r+""}function iie(t,r){if(gx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(gx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var lie=function(r,a){var s=Ja(a-r),n=Math.min(Math.abs(a-r),359.999);return s*n},J0=function(r){var a=r.cx,s=r.cy,n=r.radius,o=r.angle,i=r.sign,l=r.isExternal,c=r.cornerRadius,d=r.cornerIsExternal,u=c*(l?1:-1)+n,m=Math.asin(c/u)/Kh,x=d?o:o+i*m,h=yr(a,s,u,x),v=yr(a,s,n,x),p=d?o-i*m:o,g=yr(a,s,u*Math.cos(m*Kh),p);return{center:h,circleTangency:v,lineTangency:g,theta:m}},$O=function(r){var a=r.cx,s=r.cy,n=r.innerRadius,o=r.outerRadius,i=r.startAngle,l=r.endAngle,c=lie(i,l),d=i+c,u=yr(a,s,o,i),m=yr(a,s,o,d),x="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(n>0){var h=yr(a,s,n,i),v=yr(a,s,n,d);x+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else x+="L ".concat(a,",").concat(s," Z");return x},cie=function(r){var a=r.cx,s=r.cy,n=r.innerRadius,o=r.outerRadius,i=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,u=r.endAngle,m=Ja(u-d),x=J0({cx:a,cy:s,radius:o,angle:d,sign:m,cornerRadius:i,cornerIsExternal:c}),h=x.circleTangency,v=x.lineTangency,p=x.theta,g=J0({cx:a,cy:s,radius:o,angle:u,sign:-m,cornerRadius:i,cornerIsExternal:c}),y=g.circleTangency,f=g.lineTangency,b=g.theta,N=c?Math.abs(d-u):Math.abs(d-u)-p-b;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):$O({cx:a,cy:s,innerRadius:n,outerRadius:o,startAngle:d,endAngle:u});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(f.x,",").concat(f.y,`
  `);if(n>0){var w=J0({cx:a,cy:s,radius:n,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),S=w.circleTangency,C=w.lineTangency,E=w.theta,T=J0({cx:a,cy:s,radius:n,angle:u,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),q=T.circleTangency,A=T.lineTangency,O=T.theta,V=c?Math.abs(d-u):Math.abs(d-u)-E-O;if(V<0&&i===0)return"".concat(_,"L").concat(a,",").concat(s,"Z");_+="L".concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(V>180),",").concat(+(m>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(a,",").concat(s,"Z");return _},die={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},RO=function(r){var a=rC(rC({},die),r),s=a.cx,n=a.cy,o=a.innerRadius,i=a.outerRadius,l=a.cornerRadius,c=a.forceCornerRadius,d=a.cornerIsExternal,u=a.startAngle,m=a.endAngle,x=a.className;if(i<o||u===m)return null;var h=Mt("recharts-sector",x),v=i-o,p=Za(l,v,0,!0),g;return p>0&&Math.abs(u-m)<360?g=cie({cx:s,cy:n,innerRadius:o,outerRadius:i,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):g=$O({cx:s,cy:n,innerRadius:o,outerRadius:i,startAngle:u,endAngle:m}),pe.createElement("path",Oj({},St(a,!0),{className:h,d:g,role:"img"}))};function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bx(t)}function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Fj.apply(this,arguments)}function aC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function sC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?aC(Object(a),!0).forEach(function(s){uie(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):aC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function uie(t,r,a){return r=mie(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function mie(t){var r=xie(t,"string");return bx(r)=="symbol"?r:r+""}function xie(t,r){if(bx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(bx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var nC={curveBasisClosed:uH,curveBasisOpen:mH,curveBasis:dH,curveBumpX:YW,curveBumpY:QW,curveLinearClosed:xH,curveLinear:Ag,curveMonotoneX:pH,curveMonotoneY:hH,curveNatural:fH,curveStep:gH,curveStepAfter:vH,curveStepBefore:bH},Z0=function(r){return r.x===+r.x&&r.y===+r.y},zu=function(r){return r.x},qu=function(r){return r.y},pie=function(r,a){if(Et(r))return r;var s="curve".concat(kg(r));return(s==="curveMonotone"||s==="curveBump")&&a?nC["".concat(s).concat(a==="vertical"?"Y":"X")]:nC[s]||Ag},hie=function(r){var a=r.type,s=a===void 0?"linear":a,n=r.points,o=n===void 0?[]:n,i=r.baseLine,l=r.layout,c=r.connectNulls,d=c===void 0?!1:c,u=pie(s,l),m=d?o.filter(function(p){return Z0(p)}):o,x;if(Array.isArray(i)){var h=d?i.filter(function(p){return Z0(p)}):i,v=m.map(function(p,g){return sC(sC({},p),{},{base:h[g]})});return l==="vertical"?x=V0().y(qu).x1(zu).x0(function(p){return p.base.x}):x=V0().x(zu).y1(qu).y0(function(p){return p.base.y}),x.defined(Z0).curve(u),x(v)}return l==="vertical"&&at(i)?x=V0().y(qu).x1(zu).x0(i):at(i)?x=V0().x(zu).y1(qu).y0(i):x=PP().x(zu).y(qu),x.defined(Z0).curve(u),x(m)},kl=function(r){var a=r.className,s=r.points,n=r.path,o=r.pathRef;if((!s||!s.length)&&!n)return null;var i=s&&s.length?hie(r):n;return j.createElement("path",Fj({},St(r,!1),gh(r),{className:Mt("recharts-curve",a),d:i,ref:o}))};const{getOwnPropertyNames:fie,getOwnPropertySymbols:gie}=Object,{hasOwnProperty:bie}=Object.prototype;function xv(t,r){return function(s,n,o){return t(s,n,o)&&r(s,n,o)}}function ep(t){return function(a,s,n){if(!a||!s||typeof a!="object"||typeof s!="object")return t(a,s,n);const{cache:o}=n,i=o.get(a),l=o.get(s);if(i&&l)return i===s&&l===a;o.set(a,s),o.set(s,a);const c=t(a,s,n);return o.delete(a),o.delete(s),c}}function vie(t){return t!=null?t[Symbol.toStringTag]:void 0}function oC(t){return fie(t).concat(gie(t))}const yie=Object.hasOwn||((t,r)=>bie.call(t,r));function oc(t,r){return t===r||!t&&!r&&t!==t&&r!==r}const jie="__v",Nie="__o",wie="_owner",{getOwnPropertyDescriptor:iC,keys:lC}=Object;function _ie(t,r){return t.byteLength===r.byteLength&&Xh(new Uint8Array(t),new Uint8Array(r))}function Sie(t,r,a){let s=t.length;if(r.length!==s)return!1;for(;s-- >0;)if(!a.equals(t[s],r[s],s,s,t,r,a))return!1;return!0}function Cie(t,r){return t.byteLength===r.byteLength&&Xh(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}function kie(t,r){return oc(t.getTime(),r.getTime())}function Eie(t,r){return t.name===r.name&&t.message===r.message&&t.cause===r.cause&&t.stack===r.stack}function Aie(t,r){return t===r}function cC(t,r,a){const s=t.size;if(s!==r.size)return!1;if(!s)return!0;const n=new Array(s),o=t.entries();let i,l,c=0;for(;(i=o.next())&&!i.done;){const d=r.entries();let u=!1,m=0;for(;(l=d.next())&&!l.done;){if(n[m]){m++;continue}const x=i.value,h=l.value;if(a.equals(x[0],h[0],c,m,t,r,a)&&a.equals(x[1],h[1],x[0],h[0],t,r,a)){u=n[m]=!0;break}m++}if(!u)return!1;c++}return!0}const Pie=oc;function Tie(t,r,a){const s=lC(t);let n=s.length;if(lC(r).length!==n)return!1;for(;n-- >0;)if(!DO(t,r,a,s[n]))return!1;return!0}function Vu(t,r,a){const s=oC(t);let n=s.length;if(oC(r).length!==n)return!1;let o,i,l;for(;n-- >0;)if(o=s[n],!DO(t,r,a,o)||(i=iC(t,o),l=iC(r,o),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function Oie(t,r){return oc(t.valueOf(),r.valueOf())}function Fie(t,r){return t.source===r.source&&t.flags===r.flags}function dC(t,r,a){const s=t.size;if(s!==r.size)return!1;if(!s)return!0;const n=new Array(s),o=t.values();let i,l;for(;(i=o.next())&&!i.done;){const c=r.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!n[u]&&a.equals(i.value,l.value,i.value,l.value,t,r,a)){d=n[u]=!0;break}u++}if(!d)return!1}return!0}function Xh(t,r){let a=t.byteLength;if(r.byteLength!==a||t.byteOffset!==r.byteOffset)return!1;for(;a-- >0;)if(t[a]!==r[a])return!1;return!0}function $ie(t,r){return t.hostname===r.hostname&&t.pathname===r.pathname&&t.protocol===r.protocol&&t.port===r.port&&t.hash===r.hash&&t.username===r.username&&t.password===r.password}function DO(t,r,a,s){return(s===wie||s===Nie||s===jie)&&(t.$$typeof||r.$$typeof)?!0:yie(r,s)&&a.equals(t[s],r[s],s,s,t,r,a)}const Rie="[object ArrayBuffer]",Die="[object Arguments]",Mie="[object Boolean]",Iie="[object DataView]",Lie="[object Date]",Bie="[object Error]",zie="[object Map]",qie="[object Number]",Vie="[object Object]",Uie="[object RegExp]",Wie="[object Set]",Hie="[object String]",Kie={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Gie="[object URL]",Xie=Object.prototype.toString;function Yie({areArrayBuffersEqual:t,areArraysEqual:r,areDataViewsEqual:a,areDatesEqual:s,areErrorsEqual:n,areFunctionsEqual:o,areMapsEqual:i,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:h,unknownTagComparators:v}){return function(g,y,f){if(g===y)return!0;if(g==null||y==null)return!1;const b=typeof g;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?l(g,y,f):b==="function"?o(g,y,f):!1;const N=g.constructor;if(N!==y.constructor)return!1;if(N===Object)return c(g,y,f);if(Array.isArray(g))return r(g,y,f);if(N===Date)return s(g,y,f);if(N===RegExp)return u(g,y,f);if(N===Map)return i(g,y,f);if(N===Set)return m(g,y,f);const _=Xie.call(g);if(_===Lie)return s(g,y,f);if(_===Uie)return u(g,y,f);if(_===zie)return i(g,y,f);if(_===Wie)return m(g,y,f);if(_===Vie)return typeof g.then!="function"&&typeof y.then!="function"&&c(g,y,f);if(_===Gie)return h(g,y,f);if(_===Bie)return n(g,y,f);if(_===Die)return c(g,y,f);if(Kie[_])return x(g,y,f);if(_===Rie)return t(g,y,f);if(_===Iie)return a(g,y,f);if(_===Mie||_===qie||_===Hie)return d(g,y,f);if(v){let w=v[_];if(!w){const S=vie(g);S&&(w=v[S])}if(w)return w(g,y,f)}return!1}}function Qie({circular:t,createCustomConfig:r,strict:a}){let s={areArrayBuffersEqual:_ie,areArraysEqual:a?Vu:Sie,areDataViewsEqual:Cie,areDatesEqual:kie,areErrorsEqual:Eie,areFunctionsEqual:Aie,areMapsEqual:a?xv(cC,Vu):cC,areNumbersEqual:Pie,areObjectsEqual:a?Vu:Tie,arePrimitiveWrappersEqual:Oie,areRegExpsEqual:Fie,areSetsEqual:a?xv(dC,Vu):dC,areTypedArraysEqual:a?xv(Xh,Vu):Xh,areUrlsEqual:$ie,unknownTagComparators:void 0};if(r&&(s=Object.assign({},s,r(s))),t){const n=ep(s.areArraysEqual),o=ep(s.areMapsEqual),i=ep(s.areObjectsEqual),l=ep(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:n,areMapsEqual:o,areObjectsEqual:i,areSetsEqual:l})}return s}function Jie(t){return function(r,a,s,n,o,i,l){return t(r,a,l)}}function Zie({circular:t,comparator:r,createState:a,equals:s,strict:n}){if(a)return function(l,c){const{cache:d=t?new WeakMap:void 0,meta:u}=a();return r(l,c,{cache:d,equals:s,meta:u,strict:n})};if(t)return function(l,c){return r(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:n})};const o={cache:void 0,equals:s,meta:void 0,strict:n};return function(l,c){return r(l,c,o)}}const ele=Hi();Hi({strict:!0});Hi({circular:!0});Hi({circular:!0,strict:!0});Hi({createInternalComparator:()=>oc});Hi({strict:!0,createInternalComparator:()=>oc});Hi({circular:!0,createInternalComparator:()=>oc});Hi({circular:!0,createInternalComparator:()=>oc,strict:!0});function Hi(t={}){const{circular:r=!1,createInternalComparator:a,createState:s,strict:n=!1}=t,o=Qie(t),i=Yie(o),l=a?a(i):Jie(i);return Zie({circular:r,comparator:i,createState:s,equals:l,strict:n})}function tle(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function uC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,s=function n(o){a<0&&(a=o),o-a>r?(t(o),a=-1):tle(n)};requestAnimationFrame(s)}function $j(t){"@babel/helpers - typeof";return $j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$j(t)}function rle(t){return ole(t)||nle(t)||sle(t)||ale()}function ale(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sle(t,r){if(t){if(typeof t=="string")return mC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mC(t,r)}}function mC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function nle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ole(t){if(Array.isArray(t))return t}function ile(){var t={},r=function(){return null},a=!1,s=function n(o){if(!a){if(Array.isArray(o)){if(!o.length)return;var i=o,l=rle(i),c=l[0],d=l.slice(1);if(typeof c=="number"){uC(n.bind(null,d),c);return}n(c),uC(n.bind(null,d));return}$j(o)==="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:function(){a=!0},start:function(o){a=!1,s(o)},subscribe:function(o){return r=o,function(){r=function(){return null}}}}}function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vx(t)}function xC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function pC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xC(Object(a),!0).forEach(function(s){MO(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function MO(t,r,a){return r=lle(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function lle(t){var r=cle(t,"string");return vx(r)==="symbol"?r:String(r)}function cle(t,r){if(vx(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(vx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var dle=function(r,a){return[Object.keys(r),Object.keys(a)].reduce(function(s,n){return s.filter(function(o){return n.includes(o)})})},ule=function(r){return r},mle=function(r){return r.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},pm=function(r,a){return Object.keys(a).reduce(function(s,n){return pC(pC({},s),{},MO({},n,r(n,a[n])))},{})},hC=function(r,a,s){return r.map(function(n){return"".concat(mle(n)," ").concat(a,"ms ").concat(s)}).join(",")};function xle(t,r){return fle(t)||hle(t,r)||IO(t,r)||ple()}function ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hle(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function fle(t){if(Array.isArray(t))return t}function gle(t){return yle(t)||vle(t)||IO(t)||ble()}function ble(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IO(t,r){if(t){if(typeof t=="string")return Rj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Rj(t,r)}}function vle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yle(t){if(Array.isArray(t))return Rj(t)}function Rj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var Yh=1e-4,LO=function(r,a){return[0,3*r,3*a-6*r,3*r-3*a+1]},BO=function(r,a){return r.map(function(s,n){return s*Math.pow(a,n)}).reduce(function(s,n){return s+n})},fC=function(r,a){return function(s){var n=LO(r,a);return BO(n,s)}},jle=function(r,a){return function(s){var n=LO(r,a),o=[].concat(gle(n.map(function(i,l){return i*l}).slice(1)),[0]);return BO(o,s)}},gC=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var n=a[0],o=a[1],i=a[2],l=a[3];if(a.length===1)switch(a[0]){case"linear":n=0,o=0,i=1,l=1;break;case"ease":n=.25,o=.1,i=.25,l=1;break;case"ease-in":n=.42,o=0,i=1,l=1;break;case"ease-out":n=.42,o=0,i=.58,l=1;break;case"ease-in-out":n=0,o=0,i=.58,l=1;break;default:{var c=a[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=xle(d,4);n=u[0],o=u[1],i=u[2],l=u[3]}}}var m=fC(n,i),x=fC(o,l),h=jle(n,i),v=function(y){return y>1?1:y<0?0:y},p=function(y){for(var f=y>1?1:y,b=f,N=0;N<8;++N){var _=m(b)-f,w=h(b);if(Math.abs(_-f)<Yh||w<Yh)return x(b);b=v(b-_/w)}return x(b)};return p.isStepper=!1,p},Nle=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.stiff,s=a===void 0?100:a,n=r.damping,o=n===void 0?8:n,i=r.dt,l=i===void 0?17:i,c=function(u,m,x){var h=-(u-m)*s,v=x*o,p=x+(h-v)*l/1e3,g=x*l/1e3+u;return Math.abs(g-m)<Yh&&Math.abs(p)<Yh?[m,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},wle=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var n=a[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gC(n);case"spring":return Nle();default:if(n.split("(")[0]==="cubic-bezier")return gC(n)}return typeof n=="function"?n:null};function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},yx(t)}function bC(t){return Cle(t)||Sle(t)||zO(t)||_le()}function _le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cle(t){if(Array.isArray(t))return Mj(t)}function vC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Ea(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?vC(Object(a),!0).forEach(function(s){Dj(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Dj(t,r,a){return r=kle(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function kle(t){var r=Ele(t,"string");return yx(r)==="symbol"?r:String(r)}function Ele(t,r){if(yx(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(yx(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ale(t,r){return Ole(t)||Tle(t,r)||zO(t,r)||Ple()}function Ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zO(t,r){if(t){if(typeof t=="string")return Mj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mj(t,r)}}function Mj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Tle(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Ole(t){if(Array.isArray(t))return t}var Qh=function(r,a,s){return r+(a-r)*s},Ij=function(r){var a=r.from,s=r.to;return a!==s},Fle=function t(r,a,s){var n=pm(function(o,i){if(Ij(i)){var l=r(i.from,i.to,i.velocity),c=Ale(l,2),d=c[0],u=c[1];return Ea(Ea({},i),{},{from:d,velocity:u})}return i},a);return s<1?pm(function(o,i){return Ij(i)?Ea(Ea({},i),{},{velocity:Qh(i.velocity,n[o].velocity,s),from:Qh(i.from,n[o].from,s)}):i},a):t(r,n,s-1)};const $le=function(t,r,a,s,n){var o=dle(t,r),i=o.reduce(function(g,y){return Ea(Ea({},g),{},Dj({},y,[t[y],r[y]]))},{}),l=o.reduce(function(g,y){return Ea(Ea({},g),{},Dj({},y,{from:t[y],velocity:0,to:r[y]}))},{}),c=-1,d,u,m=function(){return null},x=function(){return pm(function(y,f){return f.from},l)},h=function(){return!Object.values(l).filter(Ij).length},v=function(y){d||(d=y);var f=y-d,b=f/a.dt;l=Fle(a,l,b),n(Ea(Ea(Ea({},t),r),x())),d=y,h()||(c=requestAnimationFrame(m))},p=function(y){u||(u=y);var f=(y-u)/s,b=pm(function(_,w){return Qh.apply(void 0,bC(w).concat([a(f)]))},i);if(n(Ea(Ea(Ea({},t),r),b)),f<1)c=requestAnimationFrame(m);else{var N=pm(function(_,w){return Qh.apply(void 0,bC(w).concat([a(1)]))},i);n(Ea(Ea(Ea({},t),r),N))}};return m=a.isStepper?v:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Od(t)}var Rle=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Dle(t,r){if(t==null)return{};var a=Mle(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Mle(t,r){if(t==null)return{};var a={},s=Object.keys(t),n,o;for(o=0;o<s.length;o++)n=s[o],!(r.indexOf(n)>=0)&&(a[n]=t[n]);return a}function pv(t){return zle(t)||Ble(t)||Lle(t)||Ile()}function Ile(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lle(t,r){if(t){if(typeof t=="string")return Lj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lj(t,r)}}function Ble(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zle(t){if(Array.isArray(t))return Lj(t)}function Lj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function yC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function mn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?yC(Object(a),!0).forEach(function(s){Qu(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Qu(t,r,a){return r=qO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function qle(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Vle(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,qO(s.key),s)}}function Ule(t,r,a){return r&&Vle(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qO(t){var r=Wle(t,"string");return Od(r)==="symbol"?r:String(r)}function Wle(t,r){if(Od(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Od(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Hle(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Bj(t,r)}function Bj(t,r){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Bj(t,r)}function Kle(t){var r=Gle();return function(){var s=Jh(t),n;if(r){var o=Jh(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return zj(this,n)}}function zj(t,r){if(r&&(Od(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qj(t)}function qj(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jh(t){return Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jh(t)}var Pn=function(t){Hle(a,t);var r=Kle(a);function a(s,n){var o;qle(this,a),o=r.call(this,s,n);var i=o.props,l=i.isActive,c=i.attributeName,d=i.from,u=i.to,m=i.steps,x=i.children,h=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(qj(o)),o.changeStyle=o.changeStyle.bind(qj(o)),!l||h<=0)return o.state={style:{}},typeof x=="function"&&(o.state={style:u}),zj(o);if(m&&m.length)o.state={style:m[0].style};else if(d){if(typeof x=="function")return o.state={style:d},zj(o);o.state={style:c?Qu({},c,d):d}}else o.state={style:{}};return o}return Ule(a,[{key:"componentDidMount",value:function(){var n=this.props,o=n.isActive,i=n.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var o=this.props,i=o.isActive,l=o.canBegin,c=o.attributeName,d=o.shouldReAnimate,u=o.to,m=o.from,x=this.state.style;if(l){if(!i){var h={style:c?Qu({},c,u):u};this.state&&x&&(c&&x[c]!==u||!c&&x!==u)&&this.setState(h);return}if(!(ele(n.to,u)&&n.canBegin&&n.isActive)){var v=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||d?m:n.to;if(this.state&&x){var g={style:c?Qu({},c,p):p};(c&&x[c]!==p||!c&&x!==p)&&this.setState(g)}this.runAnimation(mn(mn({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var o=this,i=n.from,l=n.to,c=n.duration,d=n.easing,u=n.begin,m=n.onAnimationEnd,x=n.onAnimationStart,h=$le(i,l,wle(d),c,this.changeStyle),v=function(){o.stopJSAnimation=h()};this.manager.start([x,u,v,c,m])}},{key:"runStepAnimation",value:function(n){var o=this,i=n.steps,l=n.begin,c=n.onAnimationStart,d=i[0],u=d.style,m=d.duration,x=m===void 0?0:m,h=function(p,g,y){if(y===0)return p;var f=g.duration,b=g.easing,N=b===void 0?"ease":b,_=g.style,w=g.properties,S=g.onAnimationEnd,C=y>0?i[y-1]:g,E=w||Object.keys(_);if(typeof N=="function"||N==="spring")return[].concat(pv(p),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:f,easing:N}),f]);var T=hC(E,f,N),q=mn(mn(mn({},C.style),_),{},{transition:T});return[].concat(pv(p),[q,f,S]).filter(ule)};return this.manager.start([c].concat(pv(i.reduce(h,[u,Math.max(x,l)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=ile());var o=n.begin,i=n.duration,l=n.attributeName,c=n.to,d=n.easing,u=n.onAnimationStart,m=n.onAnimationEnd,x=n.steps,h=n.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof h=="function"||d==="spring"){this.runJSAnimation(n);return}if(x.length>1){this.runStepAnimation(n);return}var p=l?Qu({},l,c):c,g=hC(Object.keys(p),i,d);v.start([u,o,mn(mn({},p),{},{transition:g}),i,m])}},{key:"render",value:function(){var n=this.props,o=n.children;n.begin;var i=n.duration;n.attributeName,n.easing;var l=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var c=Dle(n,Rle),d=j.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!l||d===0||i<=0)return o;var m=function(h){var v=h.props,p=v.style,g=p===void 0?{}:p,y=v.className,f=j.cloneElement(h,mn(mn({},c),{},{style:mn(mn({},g),u),className:y}));return f};return d===1?m(j.Children.only(o)):pe.createElement("div",null,j.Children.map(o,function(x){return m(x)}))}}]),a}(j.PureComponent);Pn.displayName="Animate";Pn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Pn.propTypes={from:Wt.oneOfType([Wt.object,Wt.string]),to:Wt.oneOfType([Wt.object,Wt.string]),attributeName:Wt.string,duration:Wt.number,begin:Wt.number,easing:Wt.oneOfType([Wt.string,Wt.func]),steps:Wt.arrayOf(Wt.shape({duration:Wt.number.isRequired,style:Wt.object.isRequired,easing:Wt.oneOfType([Wt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Wt.func]),properties:Wt.arrayOf("string"),onAnimationEnd:Wt.func})),children:Wt.oneOfType([Wt.node,Wt.func]),isActive:Wt.bool,canBegin:Wt.bool,onAnimationEnd:Wt.func,shouldReAnimate:Wt.bool,onAnimationStart:Wt.func,onAnimationReStart:Wt.func};function jx(t){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jx(t)}function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Zh.apply(this,arguments)}function Xle(t,r){return Zle(t)||Jle(t,r)||Qle(t,r)||Yle()}function Yle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qle(t,r){if(t){if(typeof t=="string")return jC(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jC(t,r)}}function jC(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function Jle(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function Zle(t){if(Array.isArray(t))return t}function NC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function wC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?NC(Object(a),!0).forEach(function(s){ece(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):NC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function ece(t,r,a){return r=tce(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function tce(t){var r=rce(t,"string");return jx(r)=="symbol"?r:r+""}function rce(t,r){if(jx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(jx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var _C=function(r,a,s,n,o){var i=Math.min(Math.abs(s)/2,Math.abs(n)/2),l=n>=0?1:-1,c=s>=0?1:-1,d=n>=0&&s>=0||n<0&&s<0?1:0,u;if(i>0&&o instanceof Array){for(var m=[0,0,0,0],x=0,h=4;x<h;x++)m[x]=o[x]>i?i:o[x];u="M".concat(r,",").concat(a+l*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(r+c*m[0],",").concat(a)),u+="L ".concat(r+s-c*m[1],",").concat(a),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(r+s,",").concat(a+l*m[1])),u+="L ".concat(r+s,",").concat(a+n-l*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(r+s-c*m[2],",").concat(a+n)),u+="L ".concat(r+c*m[3],",").concat(a+n),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(r,",").concat(a+n-l*m[3])),u+="Z"}else if(i>0&&o===+o&&o>0){var v=Math.min(i,o);u="M ".concat(r,",").concat(a+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(r+c*v,",").concat(a,`
            L `).concat(r+s-c*v,",").concat(a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(r+s,",").concat(a+l*v,`
            L `).concat(r+s,",").concat(a+n-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(r+s-c*v,",").concat(a+n,`
            L `).concat(r+c*v,",").concat(a+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(r,",").concat(a+n-l*v," Z")}else u="M ".concat(r,",").concat(a," h ").concat(s," v ").concat(n," h ").concat(-s," Z");return u},ace=function(r,a){if(!r||!a)return!1;var s=r.x,n=r.y,o=a.x,i=a.y,l=a.width,c=a.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(o,o+l),u=Math.max(o,o+l),m=Math.min(i,i+c),x=Math.max(i,i+c);return s>=d&&s<=u&&n>=m&&n<=x}return!1},sce={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TN=function(r){var a=wC(wC({},sce),r),s=j.useRef(),n=j.useState(-1),o=Xle(n,2),i=o[0],l=o[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=a.x,d=a.y,u=a.width,m=a.height,x=a.radius,h=a.className,v=a.animationEasing,p=a.animationDuration,g=a.animationBegin,y=a.isAnimationActive,f=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var b=Mt("recharts-rectangle",h);return f?pe.createElement(Pn,{canBegin:i>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:v,isActive:f},function(N){var _=N.width,w=N.height,S=N.x,C=N.y;return pe.createElement(Pn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:y,easing:v},pe.createElement("path",Zh({},St(a,!0),{className:b,d:_C(S,C,_,w,x),ref:s})))}):pe.createElement("path",Zh({},St(a,!0),{className:b,d:_C(c,d,u,m,x)}))},nce=["points","className","baseLinePoints","connectNulls"];function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Bc.apply(this,arguments)}function oce(t,r){if(t==null)return{};var a=ice(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function ice(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function SC(t){return uce(t)||dce(t)||cce(t)||lce()}function lce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cce(t,r){if(t){if(typeof t=="string")return Vj(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vj(t,r)}}function dce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uce(t){if(Array.isArray(t))return Vj(t)}function Vj(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var CC=function(r){return r&&r.x===+r.x&&r.y===+r.y},mce=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return r.forEach(function(s){CC(s)?a[a.length-1].push(s):a[a.length-1].length>0&&a.push([])}),CC(r[0])&&a[a.length-1].push(r[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},hm=function(r,a){var s=mce(r);a&&(s=[s.reduce(function(o,i){return[].concat(SC(o),SC(i))},[])]);var n=s.map(function(o){return o.reduce(function(i,l,c){return"".concat(i).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(n,"Z"):n},xce=function(r,a,s){var n=hm(r,s);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(hm(a.reverse(),s).slice(1))},pce=function(r){var a=r.points,s=r.className,n=r.baseLinePoints,o=r.connectNulls,i=oce(r,nce);if(!a||!a.length)return null;var l=Mt("recharts-polygon",s);if(n&&n.length){var c=i.stroke&&i.stroke!=="none",d=xce(a,n,o);return pe.createElement("g",{className:l},pe.createElement("path",Bc({},St(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",stroke:"none",d})),c?pe.createElement("path",Bc({},St(i,!0),{fill:"none",d:hm(a,o)})):null,c?pe.createElement("path",Bc({},St(i,!0),{fill:"none",d:hm(n,o)})):null)}var u=hm(a,o);return pe.createElement("path",Bc({},St(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",className:l,d:u}))};function Uj(){return Uj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Uj.apply(this,arguments)}var n0=function(r){var a=r.cx,s=r.cy,n=r.r,o=r.className,i=Mt("recharts-dot",o);return a===+a&&s===+s&&n===+n?j.createElement("circle",Uj({},St(r,!1),gh(r),{className:i,cx:a,cy:s,r:n})):null};function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nx(t)}var hce=["x","y","top","left","width","height","className"];function Wj(){return Wj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Wj.apply(this,arguments)}function kC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function fce(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?kC(Object(a),!0).forEach(function(s){gce(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function gce(t,r,a){return r=bce(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function bce(t){var r=vce(t,"string");return Nx(r)=="symbol"?r:r+""}function vce(t,r){if(Nx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Nx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function yce(t,r){if(t==null)return{};var a=jce(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function jce(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var Nce=function(r,a,s,n,o,i){return"M".concat(r,",").concat(o,"v").concat(n,"M").concat(i,",").concat(a,"h").concat(s)},wce=function(r){var a=r.x,s=a===void 0?0:a,n=r.y,o=n===void 0?0:n,i=r.top,l=i===void 0?0:i,c=r.left,d=c===void 0?0:c,u=r.width,m=u===void 0?0:u,x=r.height,h=x===void 0?0:x,v=r.className,p=yce(r,hce),g=fce({x:s,y:o,top:l,left:d,width:m,height:h},p);return!at(s)||!at(o)||!at(m)||!at(h)||!at(l)||!at(d)?null:pe.createElement("path",Wj({},St(g,!0),{className:Mt("recharts-cross",v),d:Nce(s,o,m,h,l,d)}))},_ce=Bg,Sce=aO,Cce=no;function kce(t,r){return t&&t.length?_ce(t,Cce(r),Sce):void 0}var Ece=kce;const Ace=dr(Ece);var Pce=Bg,Tce=no,Oce=sO;function Fce(t,r){return t&&t.length?Pce(t,Tce(r),Oce):void 0}var $ce=Fce;const Rce=dr($ce);var Dce=["cx","cy","angle","ticks","axisLine"],Mce=["ticks","tick","angle","tickFormatter","stroke"];function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fd(t)}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},fm.apply(this,arguments)}function EC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Qi(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?EC(Object(a),!0).forEach(function(s){Ug(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):EC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function AC(t,r){if(t==null)return{};var a=Ice(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Ice(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Lce(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function PC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,UO(s.key),s)}}function Bce(t,r,a){return r&&PC(t.prototype,r),a&&PC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function zce(t,r,a){return r=ef(r),qce(t,VO()?Reflect.construct(r,a||[],ef(t).constructor):r.apply(t,a))}function qce(t,r){if(r&&(Fd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vce(t)}function Vce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VO=function(){return!!t})()}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ef(t)}function Uce(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Hj(t,r)}function Hj(t,r){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Hj(t,r)}function Ug(t,r,a){return r=UO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function UO(t){var r=Wce(t,"string");return Fd(r)=="symbol"?r:r+""}function Wce(t,r){if(Fd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Fd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Wg=function(t){function r(){return Lce(this,r),zce(this,r,arguments)}return Uce(r,t),Bce(r,[{key:"getTickValueCoord",value:function(s){var n=s.coordinate,o=this.props,i=o.angle,l=o.cx,c=o.cy;return yr(l,c,n,i)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,n;switch(s){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=Ace(l,function(u){return u.coordinate||0}),d=Rce(l,function(u){return u.coordinate||0});return{cx:n,cy:o,startAngle:i,endAngle:i,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.angle,l=s.ticks,c=s.axisLine,d=AC(s,Dce),u=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),m=yr(n,o,u[0],i),x=yr(n,o,u[1],i),h=Qi(Qi(Qi({},St(d,!1)),{},{fill:"none"},St(c,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return pe.createElement("line",fm({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var s=this,n=this.props,o=n.ticks,i=n.tick,l=n.angle,c=n.tickFormatter,d=n.stroke,u=AC(n,Mce),m=this.getTickTextAnchor(),x=St(u,!1),h=St(i,!1),v=o.map(function(p,g){var y=s.getTickValueCoord(p),f=Qi(Qi(Qi(Qi({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},x),{},{stroke:"none",fill:d},h),{},{index:g},y),{},{payload:p});return pe.createElement(Vt,fm({className:Mt("recharts-polar-radius-axis-tick",OO(i)),key:"tick-".concat(p.coordinate)},ql(s.props,p,g)),r.renderTickItem(i,f,c?c(p.value,g):p.value))});return pe.createElement(Vt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var s=this.props,n=s.ticks,o=s.axisLine,i=s.tick;return!n||!n.length?null:pe.createElement(Vt,{className:Mt("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),ya.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,n,o){var i;return pe.isValidElement(s)?i=pe.cloneElement(s,n):Et(s)?i=s(n):i=pe.createElement(Vl,fm({},n,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(j.PureComponent);Ug(Wg,"displayName","PolarRadiusAxis");Ug(Wg,"axisType","radiusAxis");Ug(Wg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$d(t)}function il(){return il=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},il.apply(this,arguments)}function TC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Ji(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?TC(Object(a),!0).forEach(function(s){Hg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):TC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Hce(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function OC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,HO(s.key),s)}}function Kce(t,r,a){return r&&OC(t.prototype,r),a&&OC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gce(t,r,a){return r=tf(r),Xce(t,WO()?Reflect.construct(r,a||[],tf(t).constructor):r.apply(t,a))}function Xce(t,r){if(r&&($d(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yce(t)}function Yce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WO=function(){return!!t})()}function tf(t){return tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},tf(t)}function Qce(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Kj(t,r)}function Kj(t,r){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Kj(t,r)}function Hg(t,r,a){return r=HO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function HO(t){var r=Jce(t,"string");return $d(r)=="symbol"?r:r+""}function Jce(t,r){if($d(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if($d(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Zce=Math.PI/180,FC=1e-5,Kg=function(t){function r(){return Hce(this,r),Gce(this,r,arguments)}return Qce(r,t),Kce(r,[{key:"getTickLineCoord",value:function(s){var n=this.props,o=n.cx,i=n.cy,l=n.radius,c=n.orientation,d=n.tickSize,u=d||8,m=yr(o,i,l,s.coordinate),x=yr(o,i,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(s){var n=this.props.orientation,o=Math.cos(-s.coordinate*Zce),i;return o>FC?i=n==="outer"?"start":"end":o<-FC?i=n==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.cx,o=s.cy,i=s.radius,l=s.axisLine,c=s.axisLineType,d=Ji(Ji({},St(this.props,!1)),{},{fill:"none"},St(l,!1));if(c==="circle")return pe.createElement(n0,il({className:"recharts-polar-angle-axis-line"},d,{cx:n,cy:o,r:i}));var u=this.props.ticks,m=u.map(function(x){return yr(n,o,i,x.coordinate)});return pe.createElement(pce,il({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var s=this,n=this.props,o=n.ticks,i=n.tick,l=n.tickLine,c=n.tickFormatter,d=n.stroke,u=St(this.props,!1),m=St(i,!1),x=Ji(Ji({},u),{},{fill:"none"},St(l,!1)),h=o.map(function(v,p){var g=s.getTickLineCoord(v),y=s.getTickTextAnchor(v),f=Ji(Ji(Ji({textAnchor:y},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:v,x:g.x2,y:g.y2});return pe.createElement(Vt,il({className:Mt("recharts-polar-angle-axis-tick",OO(i)),key:"tick-".concat(v.coordinate)},ql(s.props,v,p)),l&&pe.createElement("line",il({className:"recharts-polar-angle-axis-tick-line"},x,g)),i&&r.renderTickItem(i,f,c?c(v.value,p):v.value))});return pe.createElement(Vt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var s=this.props,n=s.ticks,o=s.radius,i=s.axisLine;return o<=0||!n||!n.length?null:pe.createElement(Vt,{className:Mt("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,n,o){var i;return pe.isValidElement(s)?i=pe.cloneElement(s,n):Et(s)?i=s(n):i=pe.createElement(Vl,il({},n,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(j.PureComponent);Hg(Kg,"displayName","PolarAngleAxis");Hg(Kg,"axisType","angleAxis");Hg(Kg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ede=eT,tde=ede(Object.getPrototypeOf,Object),rde=tde,ade=qo,sde=rde,nde=Vo,ode="[object Object]",ide=Function.prototype,lde=Object.prototype,KO=ide.toString,cde=lde.hasOwnProperty,dde=KO.call(Object);function ude(t){if(!nde(t)||ade(t)!=ode)return!1;var r=sde(t);if(r===null)return!0;var a=cde.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&KO.call(a)==dde}var mde=ude;const xde=dr(mde);var pde=qo,hde=Vo,fde="[object Boolean]";function gde(t){return t===!0||t===!1||hde(t)&&pde(t)==fde}var bde=gde;const vde=dr(bde);function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wx(t)}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},rf.apply(this,arguments)}function yde(t,r){return _de(t)||wde(t,r)||Nde(t,r)||jde()}function jde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nde(t,r){if(t){if(typeof t=="string")return $C(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $C(t,r)}}function $C(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function wde(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function _de(t){if(Array.isArray(t))return t}function RC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function DC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?RC(Object(a),!0).forEach(function(s){Sde(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):RC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Sde(t,r,a){return r=Cde(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Cde(t){var r=kde(t,"string");return wx(r)=="symbol"?r:r+""}function kde(t,r){if(wx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(wx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var MC=function(r,a,s,n,o){var i=s-n,l;return l="M ".concat(r,",").concat(a),l+="L ".concat(r+s,",").concat(a),l+="L ".concat(r+s-i/2,",").concat(a+o),l+="L ".concat(r+s-i/2-n,",").concat(a+o),l+="L ".concat(r,",").concat(a," Z"),l},Ede={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ade=function(r){var a=DC(DC({},Ede),r),s=j.useRef(),n=j.useState(-1),o=yde(n,2),i=o[0],l=o[1];j.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var b=s.current.getTotalLength();b&&l(b)}catch{}},[]);var c=a.x,d=a.y,u=a.upperWidth,m=a.lowerWidth,x=a.height,h=a.className,v=a.animationEasing,p=a.animationDuration,g=a.animationBegin,y=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||x!==+x||u===0&&m===0||x===0)return null;var f=Mt("recharts-trapezoid",h);return y?pe.createElement(Pn,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:x,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:x,x:c,y:d},duration:p,animationEasing:v,isActive:y},function(b){var N=b.upperWidth,_=b.lowerWidth,w=b.height,S=b.x,C=b.y;return pe.createElement(Pn,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},pe.createElement("path",rf({},St(a,!0),{className:f,d:MC(S,C,N,_,w),ref:s})))}):pe.createElement("g",null,pe.createElement("path",rf({},St(a,!0),{className:f,d:MC(c,d,u,m,x)})))},Pde=["option","shapeType","propTransformer","activeClassName","isActive"];function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_x(t)}function Tde(t,r){if(t==null)return{};var a=Ode(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Ode(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function IC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function af(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?IC(Object(a),!0).forEach(function(s){Fde(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Fde(t,r,a){return r=$de(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function $de(t){var r=Rde(t,"string");return _x(r)=="symbol"?r:r+""}function Rde(t,r){if(_x(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(_x(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Dde(t,r){return af(af({},r),t)}function Mde(t,r){return t==="symbols"}function LC(t){var r=t.shapeType,a=t.elementProps;switch(r){case"rectangle":return pe.createElement(TN,a);case"trapezoid":return pe.createElement(Ade,a);case"sector":return pe.createElement(RO,a);case"symbols":if(Mde(r))return pe.createElement(Y2,a);break;default:return null}}function Ide(t){return j.isValidElement(t)?t.props:t}function GO(t){var r=t.option,a=t.shapeType,s=t.propTransformer,n=s===void 0?Dde:s,o=t.activeClassName,i=o===void 0?"recharts-active-shape":o,l=t.isActive,c=Tde(t,Pde),d;if(j.isValidElement(r))d=j.cloneElement(r,af(af({},c),Ide(r)));else if(Et(r))d=r(c);else if(xde(r)&&!vde(r)){var u=n(r,c);d=pe.createElement(LC,{shapeType:a,elementProps:u})}else{var m=c;d=pe.createElement(LC,{shapeType:a,elementProps:m})}return l?pe.createElement(Vt,{className:i},d):d}function Gg(t,r){return r!=null&&"trapezoids"in t.props}function Xg(t,r){return r!=null&&"sectors"in t.props}function Sx(t,r){return r!=null&&"points"in t.props}function Lde(t,r){var a,s,n=t.x===(r==null||(a=r.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===r.x,o=t.y===(r==null||(s=r.labelViewBox)===null||s===void 0?void 0:s.y)||t.y===r.y;return n&&o}function Bde(t,r){var a=t.endAngle===r.endAngle,s=t.startAngle===r.startAngle;return a&&s}function zde(t,r){var a=t.x===r.x,s=t.y===r.y,n=t.z===r.z;return a&&s&&n}function qde(t,r){var a;return Gg(t,r)?a=Lde:Xg(t,r)?a=Bde:Sx(t,r)&&(a=zde),a}function Vde(t,r){var a;return Gg(t,r)?a="trapezoids":Xg(t,r)?a="sectors":Sx(t,r)&&(a="points"),a}function Ude(t,r){if(Gg(t,r)){var a;return(a=r.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(Xg(t,r)){var s;return(s=r.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Sx(t,r)?r.payload:{}}function Wde(t){var r=t.activeTooltipItem,a=t.graphicalItem,s=t.itemData,n=Vde(a,r),o=Ude(a,r),i=s.filter(function(c,d){var u=Ul(o,c),m=a.props[n].filter(function(v){var p=qde(a,r);return p(v,r)}),x=a.props[n].indexOf(m[m.length-1]),h=d===x;return u&&h}),l=s.indexOf(i[i.length-1]);return l}var Pp;function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rd(t)}function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},zc.apply(this,arguments)}function BC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function fr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?BC(Object(a),!0).forEach(function(s){en(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):BC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Hde(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function zC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,YO(s.key),s)}}function Kde(t,r,a){return r&&zC(t.prototype,r),a&&zC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gde(t,r,a){return r=sf(r),Xde(t,XO()?Reflect.construct(r,a||[],sf(t).constructor):r.apply(t,a))}function Xde(t,r){if(r&&(Rd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yde(t)}function Yde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XO=function(){return!!t})()}function sf(t){return sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},sf(t)}function Qde(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Gj(t,r)}function Gj(t,r){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Gj(t,r)}function en(t,r,a){return r=YO(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function YO(t){var r=Jde(t,"string");return Rd(r)=="symbol"?r:r+""}function Jde(t,r){if(Rd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Rd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tn=function(t){function r(a){var s;return Hde(this,r),s=Gde(this,r,[a]),en(s,"pieRef",null),en(s,"sectorRefs",[]),en(s,"id",ac("recharts-pie-")),en(s,"handleAnimationEnd",function(){var n=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Et(n)&&n()}),en(s,"handleAnimationStart",function(){var n=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Et(n)&&n()}),s.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},s}return Qde(r,t),Kde(r,[{key:"isActiveIndex",value:function(s){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(s)!==-1:s===n}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,l=o.labelLine,c=o.dataKey,d=o.valueKey,u=St(this.props,!1),m=St(i,!1),x=St(l,!1),h=i&&i.offsetRadius||20,v=s.map(function(p,g){var y=(p.startAngle+p.endAngle)/2,f=yr(p.cx,p.cy,p.outerRadius+h,y),b=fr(fr(fr(fr({},u),p),{},{stroke:"none"},m),{},{index:g,textAnchor:r.getTextAnchor(f.x,p.cx)},f),N=fr(fr(fr(fr({},u),p),{},{fill:"none",stroke:p.fill},x),{},{index:g,points:[yr(p.cx,p.cy,p.outerRadius,y),f]}),_=c;return Ft(c)&&Ft(d)?_="value":Ft(c)&&(_=d),pe.createElement(Vt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&r.renderLabelLineItem(l,N,"line"),r.renderLabelItem(i,b,Hr(p,_)))});return pe.createElement(Vt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(s){var n=this,o=this.props,i=o.activeShape,l=o.blendStroke,c=o.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var m=n.isActiveIndex(u),x=c&&n.hasActiveIndex()?c:null,h=m?i:x,v=fr(fr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return pe.createElement(Vt,zc({ref:function(g){g&&!n.sectorRefs.includes(g)&&n.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},ql(n.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),pe.createElement(GO,zc({option:h,isActive:m,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,n=this.props,o=n.sectors,i=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,m=this.state,x=m.prevSectors,h=m.prevIsAnimationActive;return pe.createElement(Pn,{begin:l,duration:c,isActive:i,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],y=o&&o[0],f=y.startAngle;return o.forEach(function(b,N){var _=x&&x[N],w=N>0?Is(b,"paddingAngle",0):0;if(_){var S=ma(_.endAngle-_.startAngle,b.endAngle-b.startAngle),C=fr(fr({},b),{},{startAngle:f+w,endAngle:f+S(p)+w});g.push(C),f=C.endAngle}else{var E=b.endAngle,T=b.startAngle,q=ma(0,E-T),A=q(p),O=fr(fr({},b),{},{startAngle:f+w,endAngle:f+A+w});g.push(O),f=O.endAngle}}),pe.createElement(Vt,null,s.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(s){var n=this;s.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[i].focus(),n.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[l].focus(),n.setState({sectorToFocus:l});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,n=s.sectors,o=s.isAnimationActive,i=this.state.prevSectors;return o&&n&&n.length&&(!i||!Ul(i,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,n=this.props,o=n.hide,i=n.sectors,l=n.className,c=n.label,d=n.cx,u=n.cy,m=n.innerRadius,x=n.outerRadius,h=n.isAnimationActive,v=this.state.isAnimationFinished;if(o||!i||!i.length||!at(d)||!at(u)||!at(m)||!at(x))return null;var p=Mt("recharts-pie",l);return pe.createElement(Vt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(y){s.pieRef=y}},this.renderSectors(),c&&this.renderLabels(i),ya.renderCallByParent(this.props,null,!1),(!h||v)&&Jn.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return n.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:s.sectors!==n.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,n){return s>n?"start":s<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,n,o){if(pe.isValidElement(s))return pe.cloneElement(s,n);if(Et(s))return s(n);var i=Mt("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return pe.createElement(kl,zc({},n,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(s,n,o){if(pe.isValidElement(s))return pe.cloneElement(s,n);var i=o;if(Et(s)&&(i=s(n),pe.isValidElement(i)))return i;var l=Mt("recharts-pie-label-text",typeof s!="boolean"&&!Et(s)?s.className:"");return pe.createElement(Vl,zc({},n,{alignmentBaseline:"middle",className:l}),i)}}])}(j.PureComponent);Pp=Tn;en(Tn,"displayName","Pie");en(Tn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Vi.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});en(Tn,"parseDeltaAngle",function(t,r){var a=Ja(r-t),s=Math.min(Math.abs(r-t),360);return a*s});en(Tn,"getRealPieData",function(t){var r=t.data,a=t.children,s=St(t,!1),n=Ls(a,_l);return r&&r.length?r.map(function(o,i){return fr(fr(fr({payload:o},s),o),n&&n[i]&&n[i].props)}):n&&n.length?n.map(function(o){return fr(fr({},s),o.props)}):[]});en(Tn,"parseCoordinateOfPie",function(t,r){var a=r.top,s=r.left,n=r.width,o=r.height,i=TO(n,o),l=s+Za(t.cx,n,n/2),c=a+Za(t.cy,o,o/2),d=Za(t.innerRadius,i,0),u=Za(t.outerRadius,i,i*.8),m=t.maxRadius||Math.sqrt(n*n+o*o)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});en(Tn,"getComposedData",function(t){var r=t.item,a=t.offset,s=r.type.defaultProps!==void 0?fr(fr({},r.type.defaultProps),r.props):r.props,n=Pp.getRealPieData(s);if(!n||!n.length)return null;var o=s.cornerRadius,i=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,m=s.valueKey,x=s.tooltipType,h=Math.abs(s.minAngle),v=Pp.parseCoordinateOfPie(s,a),p=Pp.parseDeltaAngle(i,l),g=Math.abs(p),y=d;Ft(d)&&Ft(m)?(kn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ft(d)&&(kn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=m);var f=n.filter(function(C){return Hr(C,y,0)!==0}).length,b=(g>=360?f:f-1)*c,N=g-f*h-b,_=n.reduce(function(C,E){var T=Hr(E,y,0);return C+(at(T)?T:0)},0),w;if(_>0){var S;w=n.map(function(C,E){var T=Hr(C,y,0),q=Hr(C,u,E),A=(at(T)?T:0)/_,O;E?O=S.endAngle+Ja(p)*c*(T!==0?1:0):O=i;var V=O+Ja(p)*((T!==0?h:0)+A*N),G=(O+V)/2,L=(v.innerRadius+v.outerRadius)/2,Z=[{name:q,value:T,payload:C,dataKey:y,type:x}],D=yr(v.cx,v.cy,L,G);return S=fr(fr(fr({percent:A,cornerRadius:o,name:q,tooltipPayload:Z,midAngle:G,middleRadius:L,tooltipPosition:D},C),v),{},{value:Hr(C,y),startAngle:O,endAngle:V,payload:C,paddingAngle:Ja(p)*c}),S})}return fr(fr({},v),{},{sectors:w,data:n})});var Zde=Math.ceil,eue=Math.max;function tue(t,r,a,s){for(var n=-1,o=eue(Zde((r-t)/(a||1)),0),i=Array(o);o--;)i[s?o:++n]=t,t+=a;return i}var rue=tue,aue=vT,qC=1/0,sue=17976931348623157e292;function nue(t){if(!t)return t===0?t:0;if(t=aue(t),t===qC||t===-qC){var r=t<0?-1:1;return r*sue}return t===t?t:0}var QO=nue,oue=rue,iue=Fg,hv=QO;function lue(t){return function(r,a,s){return s&&typeof s!="number"&&iue(r,a,s)&&(a=s=void 0),r=hv(r),a===void 0?(a=r,r=0):a=hv(a),s=s===void 0?r<a?1:-1:hv(s),oue(r,a,s,t)}}var cue=lue,due=cue,uue=due(),mue=uue;const nf=dr(mue);function Cx(t){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cx(t)}function VC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function UC(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?VC(Object(a),!0).forEach(function(s){JO(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):VC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function JO(t,r,a){return r=xue(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function xue(t){var r=pue(t,"string");return Cx(r)=="symbol"?r:r+""}function pue(t,r){if(Cx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Cx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var hue=["Webkit","Moz","O","ms"],fue=function(r,a){var s=r.replace(/(\w)/,function(o){return o.toUpperCase()}),n=hue.reduce(function(o,i){return UC(UC({},o),{},JO({},i+s,a))},{});return n[r]=a,n};function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dd(t)}function of(){return of=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},of.apply(this,arguments)}function WC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function fv(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?WC(Object(a),!0).forEach(function(s){ks(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):WC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function gue(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function HC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,eF(s.key),s)}}function bue(t,r,a){return r&&HC(t.prototype,r),a&&HC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function vue(t,r,a){return r=lf(r),yue(t,ZO()?Reflect.construct(r,a||[],lf(t).constructor):r.apply(t,a))}function yue(t,r){if(r&&(Dd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jue(t)}function jue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZO=function(){return!!t})()}function lf(t){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},lf(t)}function Nue(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Xj(t,r)}function Xj(t,r){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Xj(t,r)}function ks(t,r,a){return r=eF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function eF(t){var r=wue(t,"string");return Dd(r)=="symbol"?r:r+""}function wue(t,r){if(Dd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Dd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _ue=function(r){var a=r.data,s=r.startIndex,n=r.endIndex,o=r.x,i=r.width,l=r.travellerWidth;if(!a||!a.length)return{};var c=a.length,d=mm().domain(nf(0,c)).range([o,o+i-l]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(n),scale:d,scaleValues:u}},KC=function(r){return r.changedTouches&&!!r.changedTouches.length},Md=function(t){function r(a){var s;return gue(this,r),s=vue(this,r,[a]),ks(s,"handleDrag",function(n){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(n):s.state.isSlideMoving&&s.handleSlideDrag(n)}),ks(s,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&s.handleDrag(n.changedTouches[0])}),ks(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=s.props,o=n.endIndex,i=n.onDragEnd,l=n.startIndex;i==null||i({endIndex:o,startIndex:l})}),s.detachDragEndListener()}),ks(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),ks(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),ks(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),ks(s,"handleSlideDragStart",function(n){var o=KC(n)?n.changedTouches[0]:n;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return Nue(r,t),bue(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var n=s.startX,o=s.endX,i=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,m=Math.min(n,o),x=Math.max(n,o),h=r.getIndexInRange(i,m),v=r.getIndexInRange(i,x);return{startIndex:h-h%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(s){var n=this.props,o=n.data,i=n.tickFormatter,l=n.dataKey,c=Hr(o[s],l,s);return Et(i)?i(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var n=this.state,o=n.slideMoveStartX,i=n.startX,l=n.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,x=c.startIndex,h=c.endIndex,v=c.onChange,p=s.pageX-o;p>0?p=Math.min(p,d+u-m-l,d+u-m-i):p<0&&(p=Math.max(p,d-i,d-l));var g=this.getIndex({startX:i+p,endX:l+p});(g.startIndex!==x||g.endIndex!==h)&&v&&v(g),this.setState({startX:i+p,endX:l+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,n){var o=KC(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var n=this.state,o=n.brushMoveStartX,i=n.movingTravellerId,l=n.endX,c=n.startX,d=this.state[i],u=this.props,m=u.x,x=u.width,h=u.travellerWidth,v=u.onChange,p=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},f=s.pageX-o;f>0?f=Math.min(f,m+x-h-d):f<0&&(f=Math.max(f,m-d)),y[i]=d+f;var b=this.getIndex(y),N=b.startIndex,_=b.endIndex,w=function(){var C=g.length-1;return i==="startX"&&(l>c?N%p===0:_%p===0)||l<c&&_===C||i==="endX"&&(l>c?_%p===0:N%p===0)||l>c&&_===C};this.setState(ks(ks({},i,d+f),"brushMoveStartX",s.pageX),function(){v&&w()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(s,n){var o=this,i=this.state,l=i.scaleValues,c=i.startX,d=i.endX,u=this.state[n],m=l.indexOf(u);if(m!==-1){var x=m+s;if(!(x===-1||x>=l.length)){var h=l[x];n==="startX"&&h>=d||n==="endX"&&h<=c||this.setState(ks({},n,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.fill,d=s.stroke;return pe.createElement("rect",{stroke:d,fill:c,x:n,y:o,width:i,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,m=j.Children.only(d);return m?pe.cloneElement(m,{x:n,y:o,width:i,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,n){var o,i,l=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,x=c.traveller,h=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,y=Math.max(s,this.props.x),f=fv(fv({},St(this.props,!1)),{},{x:y,y:d,width:u,height:m}),b=h||"Min value: ".concat((o=v[p])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=v[g])===null||i===void 0?void 0:i.name);return pe.createElement(Vt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,n))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(x,f))}},{key:"renderSlide",value:function(s,n){var o=this.props,i=o.y,l=o.height,c=o.stroke,d=o.travellerWidth,u=Math.min(s,n)+d,m=Math.max(Math.abs(n-s)-d,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:i,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,n=s.startIndex,o=s.endIndex,i=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,m=u.startX,x=u.endX,h=5,v={pointerEvents:"none",fill:d};return pe.createElement(Vt,{className:"recharts-brush-texts"},pe.createElement(Vl,of({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-h,y:i+l/2},v),this.getTextOfTick(n)),pe.createElement(Vl,of({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+c+h,y:i+l/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var s=this.props,n=s.data,o=s.className,i=s.children,l=s.x,c=s.y,d=s.width,u=s.height,m=s.alwaysShowText,x=this.state,h=x.startX,v=x.endX,p=x.isTextActive,g=x.isSlideMoving,y=x.isTravellerMoving,f=x.isTravellerFocused;if(!n||!n.length||!at(l)||!at(c)||!at(d)||!at(u)||d<=0||u<=0)return null;var b=Mt("recharts-brush",o),N=pe.Children.count(i)===1,_=fue("userSelect","none");return pe.createElement(Vt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(h,v),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||y||f||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var n=s.x,o=s.y,i=s.width,l=s.height,c=s.stroke,d=Math.floor(o+l/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:n,y:o,width:i,height:l,fill:c,stroke:"none"}),pe.createElement("line",{x1:n+1,y1:d,x2:n+i-1,y2:d,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:n+1,y1:d+2,x2:n+i-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,n){var o;return pe.isValidElement(s)?o=pe.cloneElement(s,n):Et(s)?o=s(n):o=r.renderDefaultTraveller(n),o}},{key:"getDerivedStateFromProps",value:function(s,n){var o=s.data,i=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,m=s.endIndex;if(o!==n.prevData||d!==n.prevUpdateId)return fv({prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i},o&&o.length?_ue({data:o,width:i,x:l,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(n.scale&&(i!==n.prevWidth||l!==n.prevX||c!==n.prevTravellerWidth)){n.scale.range([l,l+i-c]);var x=n.scale.domain().map(function(h){return n.scale(h)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:i,startX:n.scale(s.startIndex),endX:n.scale(s.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(s,n){for(var o=s.length,i=0,l=o-1;l-i>1;){var c=Math.floor((i+l)/2);s[c]>n?l=c:i=c}return n>=s[l]?l:i}}])}(j.PureComponent);ks(Md,"displayName","Brush");ks(Md,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Sue=aN;function Cue(t,r){var a;return Sue(t,function(s,n,o){return a=r(s,n,o),!a}),!!a}var kue=Cue,Eue=HP,Aue=no,Pue=kue,Tue=Ns,Oue=Fg;function Fue(t,r,a){var s=Tue(t)?Eue:Pue;return a&&Oue(t,r,a)&&(r=void 0),s(t,Aue(r))}var $ue=Fue;const Rue=dr($ue);var Zn=function(r,a){var s=r.alwaysShow,n=r.ifOverflow;return s&&(n="extendDomain"),n===a},GC=pT;function Due(t,r,a){r=="__proto__"&&GC?GC(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a}var Mue=Due,Iue=Mue,Lue=mT,Bue=no;function zue(t,r){var a={};return r=Bue(r),Lue(t,function(s,n,o){Iue(a,n,r(s,n,o))}),a}var que=zue;const Vue=dr(que);function Uue(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}var Wue=Uue,Hue=aN;function Kue(t,r){var a=!0;return Hue(t,function(s,n,o){return a=!!r(s,n,o),a}),a}var Gue=Kue,Xue=Wue,Yue=Gue,Que=no,Jue=Ns,Zue=Fg;function eme(t,r,a){var s=Jue(t)?Xue:Yue;return a&&Zue(t,r,a)&&(r=void 0),s(t,Que(r))}var tme=eme;const tF=dr(tme);var rme=["x","y"];function kx(t){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kx(t)}function Yj(){return Yj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Yj.apply(this,arguments)}function XC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Uu(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?XC(Object(a),!0).forEach(function(s){ame(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):XC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function ame(t,r,a){return r=sme(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function sme(t){var r=nme(t,"string");return kx(r)=="symbol"?r:r+""}function nme(t,r){if(kx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(kx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ome(t,r){if(t==null)return{};var a=ime(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function ime(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function lme(t,r){var a=t.x,s=t.y,n=ome(t,rme),o="".concat(a),i=parseInt(o,10),l="".concat(s),c=parseInt(l,10),d="".concat(r.height||n.height),u=parseInt(d,10),m="".concat(r.width||n.width),x=parseInt(m,10);return Uu(Uu(Uu(Uu(Uu({},r),n),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:x,name:r.name,radius:r.radius})}function YC(t){return pe.createElement(GO,Yj({shapeType:"rectangle",propTransformer:lme,activeClassName:"recharts-active-bar"},t))}var cme=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,n){if(typeof r=="number")return r;var o=at(s)||DU(s);return o?r(s,n):(o||Hl(),a)}},dme=["value","background"],rF;function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Id(t)}function ume(t,r){if(t==null)return{};var a=mme(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function mme(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},cf.apply(this,arguments)}function QC(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Qr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?QC(Object(a),!0).forEach(function(s){hi(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):QC(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function xme(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function JC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,sF(s.key),s)}}function pme(t,r,a){return r&&JC(t.prototype,r),a&&JC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hme(t,r,a){return r=df(r),fme(t,aF()?Reflect.construct(r,a||[],df(t).constructor):r.apply(t,a))}function fme(t,r){if(r&&(Id(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gme(t)}function gme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!t})()}function df(t){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},df(t)}function bme(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Qj(t,r)}function Qj(t,r){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Qj(t,r)}function hi(t,r,a){return r=sF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function sF(t){var r=vme(t,"string");return Id(r)=="symbol"?r:r+""}function vme(t,r){if(Id(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Id(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mr=function(t){function r(){var a;xme(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=hme(this,r,[].concat(n)),hi(a,"state",{isAnimationFinished:!1}),hi(a,"id",ac("recharts-bar-")),hi(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),i&&i()}),hi(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),i&&i()}),a}return bme(r,t),pme(r,[{key:"renderRectanglesStatically",value:function(s){var n=this,o=this.props,i=o.shape,l=o.dataKey,c=o.activeIndex,d=o.activeBar,u=St(this.props,!1);return s&&s.map(function(m,x){var h=x===c,v=h?d:i,p=Qr(Qr(Qr({},u),m),{},{isActive:h,option:v,index:x,dataKey:l,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return pe.createElement(Vt,cf({className:"recharts-bar-rectangle"},ql(n.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),pe.createElement(YC,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,n=this.props,o=n.data,i=n.layout,l=n.isAnimationActive,c=n.animationBegin,d=n.animationDuration,u=n.animationEasing,m=n.animationId,x=this.state.prevData;return pe.createElement(Pn,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var v=h.t,p=o.map(function(g,y){var f=x&&x[y];if(f){var b=ma(f.x,g.x),N=ma(f.y,g.y),_=ma(f.width,g.width),w=ma(f.height,g.height);return Qr(Qr({},g),{},{x:b(v),y:N(v),width:_(v),height:w(v)})}if(i==="horizontal"){var S=ma(0,g.height),C=S(v);return Qr(Qr({},g),{},{y:g.y+g.height-C,height:C})}var E=ma(0,g.width),T=E(v);return Qr(Qr({},g),{},{width:T})});return pe.createElement(Vt,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,n=s.data,o=s.isAnimationActive,i=this.state.prevData;return o&&n&&n.length&&(!i||!Ul(i,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var s=this,n=this.props,o=n.data,i=n.dataKey,l=n.activeIndex,c=St(this.props.background,!1);return o.map(function(d,u){d.value;var m=d.background,x=ume(d,dme);if(!m)return null;var h=Qr(Qr(Qr(Qr(Qr({},x),{},{fill:"#eee"},m),c),ql(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:i,index:u,className:"recharts-bar-background-rectangle"});return pe.createElement(YC,cf({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},h))})}},{key:"renderErrorBar",value:function(s,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=Ls(u,s0);if(!m)return null;var x=d==="vertical"?i[0].height/2:i[0].width/2,h=function(g,y){var f=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:f,errorVal:Hr(g,y)}},v={clipPath:s?"url(#clipPath-".concat(n,")"):null};return pe.createElement(Vt,v,m.map(function(p){return pe.cloneElement(p,{key:"error-bar-".concat(n,"-").concat(p.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,offset:x,dataPointFormatter:h})}))}},{key:"render",value:function(){var s=this.props,n=s.hide,o=s.data,i=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,m=s.width,x=s.height,h=s.isAnimationActive,v=s.background,p=s.id;if(n||!o||!o.length)return null;var g=this.state.isAnimationFinished,y=Mt("recharts-bar",i),f=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,N=f||b,_=Ft(p)?this.id:p;return pe.createElement(Vt,{className:y},f||b?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(_)},pe.createElement("rect",{x:f?d:d-m/2,y:b?u:u-x/2,width:f?m:m*2,height:b?x:x*2}))):null,pe.createElement(Vt,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(_,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,_),(!h||g)&&Jn.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:n.curData}:s.data!==n.curData?{curData:s.data}:null}}])}(j.PureComponent);rF=Mr;hi(Mr,"displayName","Bar");hi(Mr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Vi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});hi(Mr,"getComposedData",function(t){var r=t.props,a=t.item,s=t.barPosition,n=t.bandSize,o=t.xAxis,i=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,x=t.offset,h=eoe(s,a);if(!h)return null;var v=r.layout,p=a.type.defaultProps,g=p!==void 0?Qr(Qr({},p),a.props):a.props,y=g.dataKey,f=g.children,b=g.minPointSize,N=v==="horizontal"?i:o,_=d?N.scale.domain():null,w=ioe({numericAxis:N}),S=Ls(f,_l),C=m.map(function(E,T){var q,A,O,V,G,L;d?q=toe(d[u+T],_):(q=Hr(E,y),Array.isArray(q)||(q=[w,q]));var Z=cme(b,rF.defaultProps.minPointSize)(q[1],T);if(v==="horizontal"){var D,K=[i.scale(q[0]),i.scale(q[1])],R=K[0],B=K[1];A=US({axis:o,ticks:l,bandSize:n,offset:h.offset,entry:E,index:T}),O=(D=B??R)!==null&&D!==void 0?D:void 0,V=h.size;var F=R-B;if(G=Number.isNaN(F)?0:F,L={x:A,y:i.y,width:V,height:i.height},Math.abs(Z)>0&&Math.abs(G)<Math.abs(Z)){var I=Ja(G||Z)*(Math.abs(Z)-Math.abs(G));O-=I,G+=I}}else{var k=[o.scale(q[0]),o.scale(q[1])],M=k[0],z=k[1];if(A=M,O=US({axis:i,ticks:c,bandSize:n,offset:h.offset,entry:E,index:T}),V=z-M,G=h.size,L={x:o.x,y:O,width:o.width,height:G},Math.abs(Z)>0&&Math.abs(V)<Math.abs(Z)){var oe=Ja(V||Z)*(Math.abs(Z)-Math.abs(V));V+=oe}}return Qr(Qr(Qr({},E),{},{x:A,y:O,width:V,height:G,value:d?q:q[1],payload:E,background:L},S&&S[T]&&S[T].props),{},{tooltipPayload:[AO(a,E)],tooltipPosition:{x:A+V/2,y:O+G/2}})});return Qr({data:C,layout:v},x)});function Ex(t){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ex(t)}function yme(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ZC(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,nF(s.key),s)}}function jme(t,r,a){return r&&ZC(t.prototype,r),a&&ZC(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ek(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function gn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ek(Object(a),!0).forEach(function(s){Yg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ek(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Yg(t,r,a){return r=nF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function nF(t){var r=Nme(t,"string");return Ex(r)=="symbol"?r:r+""}function Nme(t,r){if(Ex(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ex(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ON=function(r,a,s,n,o){var i=r.width,l=r.height,c=r.layout,d=r.children,u=Object.keys(a),m={left:s.left,leftMirror:s.left,right:i-s.right,rightMirror:i-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},x=!!Ps(d,Mr);return u.reduce(function(h,v){var p=a[v],g=p.orientation,y=p.domain,f=p.padding,b=f===void 0?{}:f,N=p.mirror,_=p.reversed,w="".concat(g).concat(N?"Mirror":""),S,C,E,T,q;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var A=y[1]-y[0],O=1/0,V=p.categoricalDomain.sort(LU);if(V.forEach(function(k,M){M>0&&(O=Math.min((k||0)-(V[M-1]||0),O))}),Number.isFinite(O)){var G=O/A,L=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(S=G*L/2),p.padding==="no-gap"){var Z=Za(r.barCategoryGap,G*L),D=G*L/2;S=D-Z-(D-Z)/L*Z}}}n==="xAxis"?C=[s.left+(b.left||0)+(S||0),s.left+s.width-(b.right||0)-(S||0)]:n==="yAxis"?C=c==="horizontal"?[s.top+s.height-(b.bottom||0),s.top+(b.top||0)]:[s.top+(b.top||0)+(S||0),s.top+s.height-(b.bottom||0)-(S||0)]:C=p.range,_&&(C=[C[1],C[0]]);var K=SO(p,o,x),R=K.scale,B=K.realScaleType;R.domain(y).range(C),CO(R);var F=kO(R,gn(gn({},p),{},{realScaleType:B}));n==="xAxis"?(q=g==="top"&&!N||g==="bottom"&&N,E=s.left,T=m[w]-q*p.height):n==="yAxis"&&(q=g==="left"&&!N||g==="right"&&N,E=m[w]-q*p.width,T=s.top);var I=gn(gn(gn({},p),F),{},{realScaleType:B,x:E,y:T,scale:R,width:n==="xAxis"?s.width:p.width,height:n==="yAxis"?s.height:p.height});return I.bandSize=Hh(I,F),!p.hide&&n==="xAxis"?m[w]+=(q?-1:1)*I.height:p.hide||(m[w]+=(q?-1:1)*I.width),gn(gn({},h),{},Yg({},v,I))},{})},oF=function(r,a){var s=r.x,n=r.y,o=a.x,i=a.y;return{x:Math.min(s,o),y:Math.min(n,i),width:Math.abs(o-s),height:Math.abs(i-n)}},wme=function(r){var a=r.x1,s=r.y1,n=r.x2,o=r.y2;return oF({x:a,y:s},{x:n,y:o})},iF=function(){function t(r){yme(this,t),this.scale=r}return jme(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.bandAware,o=s.position;if(a!==void 0){if(o)switch(o){case"start":return this.scale(a);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(a)+l}default:return this.scale(a)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}return this.scale(a)}}},{key:"isInRange",value:function(a){var s=this.range(),n=s[0],o=s[s.length-1];return n<=o?a>=n&&a<=o:a>=o&&a<=n}}],[{key:"create",value:function(a){return new t(a)}}])}();Yg(iF,"EPS",1e-4);var FN=function(r){var a=Object.keys(r).reduce(function(s,n){return gn(gn({},s),{},Yg({},n,iF.create(r[n])))},{});return gn(gn({},a),{},{apply:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,l=o.position;return Vue(n,function(c,d){return a[d].apply(c,{bandAware:i,position:l})})},isInRange:function(n){return tF(n,function(o,i){return a[i].isInRange(o)})}})};function _me(t){return(t%180+180)%180}var Sme=function(r){var a=r.width,s=r.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=_me(n),i=o*Math.PI/180,l=Math.atan(s/a),c=i>l&&i<Math.PI-l?s/Math.sin(i):a/Math.cos(i);return Math.abs(c)},Cme=no,kme=Zx,Eme=Tg;function Ame(t){return function(r,a,s){var n=Object(r);if(!kme(r)){var o=Cme(a);r=Eme(r),a=function(l){return o(n[l],l,n)}}var i=t(r,a,s);return i>-1?n[o?r[i]:i]:void 0}}var Pme=Ame,Tme=QO;function Ome(t){var r=Tme(t),a=r%1;return r===r?a?r-a:r:0}var Fme=Ome,$me=oT,Rme=no,Dme=Fme,Mme=Math.max;function Ime(t,r,a){var s=t==null?0:t.length;if(!s)return-1;var n=a==null?0:Dme(a);return n<0&&(n=Mme(s+n,0)),$me(t,Rme(r),n)}var Lme=Ime,Bme=Pme,zme=Lme,qme=Bme(zme),Vme=qme;const Ume=dr(Vme);var Wme=qV(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),$N=j.createContext(void 0),RN=j.createContext(void 0),lF=j.createContext(void 0),cF=j.createContext({}),dF=j.createContext(void 0),uF=j.createContext(0),mF=j.createContext(0),tk=function(r){var a=r.state,s=a.xAxisMap,n=a.yAxisMap,o=a.offset,i=r.clipPathId,l=r.children,c=r.width,d=r.height,u=Wme(o);return pe.createElement($N.Provider,{value:s},pe.createElement(RN.Provider,{value:n},pe.createElement(cF.Provider,{value:o},pe.createElement(lF.Provider,{value:u},pe.createElement(dF.Provider,{value:i},pe.createElement(uF.Provider,{value:d},pe.createElement(mF.Provider,{value:c},l)))))))},Hme=function(){return j.useContext(dF)},xF=function(r){var a=j.useContext($N);a==null&&Hl();var s=a[r];return s==null&&Hl(),s},Kme=function(){var r=j.useContext($N);return ci(r)},Gme=function(){var r=j.useContext(RN),a=Ume(r,function(s){return tF(s.domain,Number.isFinite)});return a||ci(r)},pF=function(r){var a=j.useContext(RN);a==null&&Hl();var s=a[r];return s==null&&Hl(),s},Xme=function(){var r=j.useContext(lF);return r},Yme=function(){return j.useContext(cF)},DN=function(){return j.useContext(mF)},MN=function(){return j.useContext(uF)};function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ld(t)}function Qme(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Jme(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,fF(s.key),s)}}function Zme(t,r,a){return r&&Jme(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function exe(t,r,a){return r=uf(r),txe(t,hF()?Reflect.construct(r,a||[],uf(t).constructor):r.apply(t,a))}function txe(t,r){if(r&&(Ld(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rxe(t)}function rxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hF=function(){return!!t})()}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},uf(t)}function axe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Jj(t,r)}function Jj(t,r){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Jj(t,r)}function rk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ak(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?rk(Object(a),!0).forEach(function(s){IN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function IN(t,r,a){return r=fF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function fF(t){var r=sxe(t,"string");return Ld(r)=="symbol"?r:r+""}function sxe(t,r){if(Ld(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ld(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nxe(t,r){return cxe(t)||lxe(t,r)||ixe(t,r)||oxe()}function oxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ixe(t,r){if(t){if(typeof t=="string")return sk(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sk(t,r)}}function sk(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function lxe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function cxe(t){if(Array.isArray(t))return t}function Zj(){return Zj=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Zj.apply(this,arguments)}var dxe=function(r,a){var s;return pe.isValidElement(r)?s=pe.cloneElement(r,a):Et(r)?s=r(a):s=pe.createElement("line",Zj({},a,{className:"recharts-reference-line-line"})),s},uxe=function(r,a,s,n,o,i,l,c,d){var u=o.x,m=o.y,x=o.width,h=o.height;if(s){var v=d.y,p=r.y.apply(v,{position:i});if(Zn(d,"discard")&&!r.y.isInRange(p))return null;var g=[{x:u+x,y:p},{x:u,y:p}];return c==="left"?g.reverse():g}if(a){var y=d.x,f=r.x.apply(y,{position:i});if(Zn(d,"discard")&&!r.x.isInRange(f))return null;var b=[{x:f,y:m+h},{x:f,y:m}];return l==="top"?b.reverse():b}if(n){var N=d.segment,_=N.map(function(w){return r.apply(w,{position:i})});return Zn(d,"discard")&&Rue(_,function(w){return!r.isInRange(w)})?null:_}return null};function mxe(t){var r=t.x,a=t.y,s=t.segment,n=t.xAxisId,o=t.yAxisId,i=t.shape,l=t.className,c=t.alwaysShow,d=Hme(),u=xF(n),m=pF(o),x=Xme();if(!d||!x)return null;kn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=FN({x:u.scale,y:m.scale}),v=pa(r),p=pa(a),g=s&&s.length===2,y=uxe(h,v,p,g,x,t.position,u.orientation,m.orientation,t);if(!y)return null;var f=nxe(y,2),b=f[0],N=b.x,_=b.y,w=f[1],S=w.x,C=w.y,E=Zn(t,"hidden")?"url(#".concat(d,")"):void 0,T=ak(ak({clipPath:E},St(t,!0)),{},{x1:N,y1:_,x2:S,y2:C});return pe.createElement(Vt,{className:Mt("recharts-reference-line",l)},dxe(i,T),ya.renderCallByParent(t,wme({x1:N,y1:_,x2:S,y2:C})))}var LN=function(t){function r(){return Qme(this,r),exe(this,r,arguments)}return axe(r,t),Zme(r,[{key:"render",value:function(){return pe.createElement(mxe,this.props)}}])}(pe.Component);IN(LN,"displayName","ReferenceLine");IN(LN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function e1(){return e1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},e1.apply(this,arguments)}function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bd(t)}function nk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ok(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nk(Object(a),!0).forEach(function(s){Qg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function xxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function pxe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,bF(s.key),s)}}function hxe(t,r,a){return r&&pxe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fxe(t,r,a){return r=mf(r),gxe(t,gF()?Reflect.construct(r,a||[],mf(t).constructor):r.apply(t,a))}function gxe(t,r){if(r&&(Bd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bxe(t)}function bxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gF=function(){return!!t})()}function mf(t){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},mf(t)}function vxe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&t1(t,r)}function t1(t,r){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},t1(t,r)}function Qg(t,r,a){return r=bF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function bF(t){var r=yxe(t,"string");return Bd(r)=="symbol"?r:r+""}function yxe(t,r){if(Bd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Bd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jxe=function(r){var a=r.x,s=r.y,n=r.xAxis,o=r.yAxis,i=FN({x:n.scale,y:o.scale}),l=i.apply({x:a,y:s},{bandAware:!0});return Zn(r,"discard")&&!i.isInRange(l)?null:l},Jg=function(t){function r(){return xxe(this,r),fxe(this,r,arguments)}return vxe(r,t),hxe(r,[{key:"render",value:function(){var s=this.props,n=s.x,o=s.y,i=s.r,l=s.alwaysShow,c=s.clipPathId,d=pa(n),u=pa(o);if(kn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=jxe(this.props);if(!m)return null;var x=m.x,h=m.y,v=this.props,p=v.shape,g=v.className,y=Zn(this.props,"hidden")?"url(#".concat(c,")"):void 0,f=ok(ok({clipPath:y},St(this.props,!0)),{},{cx:x,cy:h});return pe.createElement(Vt,{className:Mt("recharts-reference-dot",g)},r.renderDot(p,f),ya.renderCallByParent(this.props,{x:x-i,y:h-i,width:2*i,height:2*i}))}}])}(pe.Component);Qg(Jg,"displayName","ReferenceDot");Qg(Jg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Qg(Jg,"renderDot",function(t,r){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,r):Et(t)?a=t(r):a=pe.createElement(n0,e1({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),a});function r1(){return r1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},r1.apply(this,arguments)}function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zd(t)}function ik(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function lk(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ik(Object(a),!0).forEach(function(s){Zg(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ik(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Nxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function wxe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,yF(s.key),s)}}function _xe(t,r,a){return r&&wxe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sxe(t,r,a){return r=xf(r),Cxe(t,vF()?Reflect.construct(r,a||[],xf(t).constructor):r.apply(t,a))}function Cxe(t,r){if(r&&(zd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(t)}function kxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vF=function(){return!!t})()}function xf(t){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},xf(t)}function Exe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&a1(t,r)}function a1(t,r){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},a1(t,r)}function Zg(t,r,a){return r=yF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function yF(t){var r=Axe(t,"string");return zd(r)=="symbol"?r:r+""}function Axe(t,r){if(zd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pxe=function(r,a,s,n,o){var i=o.x1,l=o.x2,c=o.y1,d=o.y2,u=o.xAxis,m=o.yAxis;if(!u||!m)return null;var x=FN({x:u.scale,y:m.scale}),h={x:r?x.x.apply(i,{position:"start"}):x.x.rangeMin,y:s?x.y.apply(c,{position:"start"}):x.y.rangeMin},v={x:a?x.x.apply(l,{position:"end"}):x.x.rangeMax,y:n?x.y.apply(d,{position:"end"}):x.y.rangeMax};return Zn(o,"discard")&&(!x.isInRange(h)||!x.isInRange(v))?null:oF(h,v)},eb=function(t){function r(){return Nxe(this,r),Sxe(this,r,arguments)}return Exe(r,t),_xe(r,[{key:"render",value:function(){var s=this.props,n=s.x1,o=s.x2,i=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;kn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=pa(n),x=pa(o),h=pa(i),v=pa(l),p=this.props.shape;if(!m&&!x&&!h&&!v&&!p)return null;var g=Pxe(m,x,h,v,this.props);if(!g&&!p)return null;var y=Zn(this.props,"hidden")?"url(#".concat(u,")"):void 0;return pe.createElement(Vt,{className:Mt("recharts-reference-area",c)},r.renderRect(p,lk(lk({clipPath:y},St(this.props,!0)),g)),ya.renderCallByParent(this.props,g))}}])}(pe.Component);Zg(eb,"displayName","ReferenceArea");Zg(eb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Zg(eb,"renderRect",function(t,r){var a;return pe.isValidElement(t)?a=pe.cloneElement(t,r):Et(t)?a=t(r):a=pe.createElement(TN,r1({},r,{className:"recharts-reference-area-rect"})),a});function jF(t,r,a){if(r<1)return[];if(r===1&&a===void 0)return t;for(var s=[],n=0;n<t.length;n+=r)s.push(t[n]);return s}function Txe(t,r,a){var s={width:t.width+r.width,height:t.height+r.height};return Sme(s,a)}function Oxe(t,r,a){var s=a==="width",n=t.x,o=t.y,i=t.width,l=t.height;return r===1?{start:s?n:o,end:s?n+i:o+l}:{start:s?n+i:o+l,end:s?n:o}}function pf(t,r,a,s,n){if(t*r<t*s||t*r>t*n)return!1;var o=a();return t*(r-t*o/2-s)>=0&&t*(r+t*o/2-n)<=0}function Fxe(t,r){return jF(t,r+1)}function $xe(t,r,a,s,n){for(var o=(s||[]).slice(),i=r.start,l=r.end,c=0,d=1,u=i,m=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:jF(s,d)};var p=c,g,y=function(){return g===void 0&&(g=a(v,p)),g},f=v.coordinate,b=c===0||pf(t,f,y,u,l);b||(c=0,u=i,d+=1),b&&(u=f+t*(y()/2+n),c+=d)},x;d<=o.length;)if(x=m(),x)return x.v;return[]}function Ax(t){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ax(t)}function ck(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function za(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ck(Object(a),!0).forEach(function(s){Rxe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ck(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Rxe(t,r,a){return r=Dxe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Dxe(t){var r=Mxe(t,"string");return Ax(r)=="symbol"?r:r+""}function Mxe(t,r){if(Ax(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ax(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ixe(t,r,a,s,n){for(var o=(s||[]).slice(),i=o.length,l=r.start,c=r.end,d=function(x){var h=o[x],v,p=function(){return v===void 0&&(v=a(h,x)),v};if(x===i-1){var g=t*(h.coordinate+t*p()/2-c);o[x]=h=za(za({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else o[x]=h=za(za({},h),{},{tickCoord:h.coordinate});var y=pf(t,h.tickCoord,p,l,c);y&&(c=h.tickCoord-t*(p()/2+n),o[x]=za(za({},h),{},{isShow:!0}))},u=i-1;u>=0;u--)d(u);return o}function Lxe(t,r,a,s,n,o){var i=(s||[]).slice(),l=i.length,c=r.start,d=r.end;if(o){var u=s[l-1],m=a(u,l-1),x=t*(u.coordinate+t*m/2-d);i[l-1]=u=za(za({},u),{},{tickCoord:x>0?u.coordinate-x*t:u.coordinate});var h=pf(t,u.tickCoord,function(){return m},c,d);h&&(d=u.tickCoord-t*(m/2+n),i[l-1]=za(za({},u),{},{isShow:!0}))}for(var v=o?l-1:l,p=function(f){var b=i[f],N,_=function(){return N===void 0&&(N=a(b,f)),N};if(f===0){var w=t*(b.coordinate-t*_()/2-c);i[f]=b=za(za({},b),{},{tickCoord:w<0?b.coordinate-w*t:b.coordinate})}else i[f]=b=za(za({},b),{},{tickCoord:b.coordinate});var S=pf(t,b.tickCoord,_,c,d);S&&(c=b.tickCoord+t*(_()/2+n),i[f]=za(za({},b),{},{isShow:!0}))},g=0;g<v;g++)p(g);return i}function BN(t,r,a){var s=t.tick,n=t.ticks,o=t.viewBox,i=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!n||!n.length||!s)return[];if(at(c)||Vi.isSsr)return Fxe(n,typeof c=="number"&&at(c)?c:0);var x=[],h=l==="top"||l==="bottom"?"width":"height",v=u&&h==="width"?um(u,{fontSize:r,letterSpacing:a}):{width:0,height:0},p=function(b,N){var _=Et(d)?d(b.value,N):b.value;return h==="width"?Txe(um(_,{fontSize:r,letterSpacing:a}),v,m):um(_,{fontSize:r,letterSpacing:a})[h]},g=n.length>=2?Ja(n[1].coordinate-n[0].coordinate):1,y=Oxe(o,g,h);return c==="equidistantPreserveStart"?$xe(g,y,p,n,i):(c==="preserveStart"||c==="preserveStartEnd"?x=Lxe(g,y,p,n,i,c==="preserveStartEnd"):x=Ixe(g,y,p,n,i),x.filter(function(f){return f.isShow}))}var Bxe=["viewBox"],zxe=["viewBox"],qxe=["ticks"];function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qd(t)}function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},qc.apply(this,arguments)}function dk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ia(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?dk(Object(a),!0).forEach(function(s){zN(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function gv(t,r){if(t==null)return{};var a=Vxe(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function Vxe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Uxe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function uk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,wF(s.key),s)}}function Wxe(t,r,a){return r&&uk(t.prototype,r),a&&uk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hxe(t,r,a){return r=hf(r),Kxe(t,NF()?Reflect.construct(r,a||[],hf(t).constructor):r.apply(t,a))}function Kxe(t,r){if(r&&(qd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gxe(t)}function Gxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NF=function(){return!!t})()}function hf(t){return hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},hf(t)}function Xxe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s1(t,r)}function s1(t,r){return s1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},s1(t,r)}function zN(t,r,a){return r=wF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function wF(t){var r=Yxe(t,"string");return qd(r)=="symbol"?r:r+""}function Yxe(t,r){if(qd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(qd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fu=function(t){function r(a){var s;return Uxe(this,r),s=Hxe(this,r,[a]),s.state={fontSize:"",letterSpacing:""},s}return Xxe(r,t),Wxe(r,[{key:"shouldComponentUpdate",value:function(s,n){var o=s.viewBox,i=gv(s,Bxe),l=this.props,c=l.viewBox,d=gv(l,zxe);return!Zc(o,c)||!Zc(i,d)||!Zc(n,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var n=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var n=this.props,o=n.x,i=n.y,l=n.width,c=n.height,d=n.orientation,u=n.tickSize,m=n.mirror,x=n.tickMargin,h,v,p,g,y,f,b=m?-1:1,N=s.tickSize||u,_=at(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":h=v=s.coordinate,g=i+ +!m*c,p=g-b*N,f=p-b*x,y=_;break;case"left":p=g=s.coordinate,v=o+ +!m*l,h=v-b*N,y=h-b*x,f=_;break;case"right":p=g=s.coordinate,v=o+ +m*l,h=v+b*N,y=h+b*x,f=_;break;default:h=v=s.coordinate,g=i+ +m*c,p=g+b*N,f=p+b*x,y=_;break}return{line:{x1:h,y1:p,x2:v,y2:g},tick:{x:y,y:f}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,n=s.orientation,o=s.mirror,i;switch(n){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,n=s.orientation,o=s.mirror,i="end";switch(n){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var s=this.props,n=s.x,o=s.y,i=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,m=ia(ia(ia({},St(this.props,!1)),St(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var x=+(c==="top"&&!d||c==="bottom"&&d);m=ia(ia({},m),{},{x1:n,y1:o+x*l,x2:n+i,y2:o+x*l})}else{var h=+(c==="left"&&!d||c==="right"&&d);m=ia(ia({},m),{},{x1:n+h*i,y1:o,x2:n+h*i,y2:o+l})}return pe.createElement("line",qc({},m,{className:Mt("recharts-cartesian-axis-line",Is(u,"className"))}))}},{key:"renderTicks",value:function(s,n,o){var i=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,m=l.tickFormatter,x=l.unit,h=BN(ia(ia({},this.props),{},{ticks:s}),n,o),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=St(this.props,!1),y=St(u,!1),f=ia(ia({},g),{},{fill:"none"},St(c,!1)),b=h.map(function(N,_){var w=i.getTickLineCoord(N),S=w.line,C=w.tick,E=ia(ia(ia(ia({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:d},y),C),{},{index:_,payload:N,visibleTicksCount:h.length,tickFormatter:m});return pe.createElement(Vt,qc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},ql(i.props,N,_)),c&&pe.createElement("line",qc({},f,S,{className:Mt("recharts-cartesian-axis-tick-line",Is(c,"className"))})),u&&r.renderTickItem(u,E,"".concat(Et(m)?m(N.value,_):N.value).concat(x||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var s=this,n=this.props,o=n.axisLine,i=n.width,l=n.height,c=n.ticksGenerator,d=n.className,u=n.hide;if(u)return null;var m=this.props,x=m.ticks,h=gv(m,qxe),v=x;return Et(c)&&(v=x&&x.length>0?c(this.props):c(h)),i<=0||l<=0||!v||!v.length?null:pe.createElement(Vt,{className:Mt("recharts-cartesian-axis",d),ref:function(g){s.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ya.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,n,o){var i,l=Mt(n.className,"recharts-cartesian-axis-tick-value");return pe.isValidElement(s)?i=pe.cloneElement(s,ia(ia({},n),{},{className:l})):Et(s)?i=s(ia(ia({},n),{},{className:l})):i=pe.createElement(Vl,qc({},n,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(j.Component);zN(fu,"displayName","CartesianAxis");zN(fu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Qxe=["x1","y1","x2","y2","key"],Jxe=["offset"];function Kl(t){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Kl(t)}function mk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Va(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?mk(Object(a),!0).forEach(function(s){Zxe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function Zxe(t,r,a){return r=e0e(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function e0e(t){var r=t0e(t,"string");return Kl(r)=="symbol"?r:r+""}function t0e(t,r){if(Kl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Kl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},fl.apply(this,arguments)}function xk(t,r){if(t==null)return{};var a=r0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function r0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}var a0e=function(r){var a=r.fill;if(!a||a==="none")return null;var s=r.fillOpacity,n=r.x,o=r.y,i=r.width,l=r.height,c=r.ry;return pe.createElement("rect",{x:n,y:o,ry:c,width:i,height:l,stroke:"none",fill:a,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function _F(t,r){var a;if(pe.isValidElement(t))a=pe.cloneElement(t,r);else if(Et(t))a=t(r);else{var s=r.x1,n=r.y1,o=r.x2,i=r.y2,l=r.key,c=xk(r,Qxe),d=St(c,!1);d.offset;var u=xk(d,Jxe);a=pe.createElement("line",fl({},u,{x1:s,y1:n,x2:o,y2:i,fill:"none",key:l}))}return a}function s0e(t){var r=t.x,a=t.width,s=t.horizontal,n=s===void 0?!0:s,o=t.horizontalPoints;if(!n||!o||!o.length)return null;var i=o.map(function(l,c){var d=Va(Va({},t),{},{x1:r,y1:l,x2:r+a,y2:l,key:"line-".concat(c),index:c});return _F(n,d)});return pe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function n0e(t){var r=t.y,a=t.height,s=t.vertical,n=s===void 0?!0:s,o=t.verticalPoints;if(!n||!o||!o.length)return null;var i=o.map(function(l,c){var d=Va(Va({},t),{},{x1:l,y1:r,x2:l,y2:r+a,key:"line-".concat(c),index:c});return _F(n,d)});return pe.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function o0e(t){var r=t.horizontalFill,a=t.fillOpacity,s=t.x,n=t.y,o=t.width,i=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!r||!r.length)return null;var u=l.map(function(x){return Math.round(x+n-n)}).sort(function(x,h){return x-h});n!==u[0]&&u.unshift(0);var m=u.map(function(x,h){var v=!u[h+1],p=v?n+i-x:u[h+1]-x;if(p<=0)return null;var g=h%r.length;return pe.createElement("rect",{key:"react-".concat(h),y:x,x:s,height:p,width:o,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function i0e(t){var r=t.vertical,a=r===void 0?!0:r,s=t.verticalFill,n=t.fillOpacity,o=t.x,i=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!a||!s||!s.length)return null;var u=d.map(function(x){return Math.round(x+o-o)}).sort(function(x,h){return x-h});o!==u[0]&&u.unshift(0);var m=u.map(function(x,h){var v=!u[h+1],p=v?o+l-x:u[h+1]-x;if(p<=0)return null;var g=h%s.length;return pe.createElement("rect",{key:"react-".concat(h),x,y:i,width:p,height:c,stroke:"none",fill:s[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var l0e=function(r,a){var s=r.xAxis,n=r.width,o=r.height,i=r.offset;return _O(BN(Va(Va(Va({},fu.defaultProps),s),{},{ticks:vo(s,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.left,i.left+i.width,a)},c0e=function(r,a){var s=r.yAxis,n=r.width,o=r.height,i=r.offset;return _O(BN(Va(Va(Va({},fu.defaultProps),s),{},{ticks:vo(s,!0),viewBox:{x:0,y:0,width:n,height:o}})),i.top,i.top+i.height,a)},fc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function va(t){var r,a,s,n,o,i,l=DN(),c=MN(),d=Yme(),u=Va(Va({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:fc.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:fc.fill,horizontal:(s=t.horizontal)!==null&&s!==void 0?s:fc.horizontal,horizontalFill:(n=t.horizontalFill)!==null&&n!==void 0?n:fc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:fc.vertical,verticalFill:(i=t.verticalFill)!==null&&i!==void 0?i:fc.verticalFill,x:at(t.x)?t.x:d.left,y:at(t.y)?t.y:d.top,width:at(t.width)?t.width:d.width,height:at(t.height)?t.height:d.height}),m=u.x,x=u.y,h=u.width,v=u.height,p=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,f=Kme(),b=Gme();if(!at(h)||h<=0||!at(v)||v<=0||!at(m)||m!==+m||!at(x)||x!==+x)return null;var N=u.verticalCoordinatesGenerator||l0e,_=u.horizontalCoordinatesGenerator||c0e,w=u.horizontalPoints,S=u.verticalPoints;if((!w||!w.length)&&Et(_)){var C=g&&g.length,E=_({yAxis:b?Va(Va({},b),{},{ticks:C?g:b.ticks}):void 0,width:l,height:c,offset:d},C?!0:p);kn(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Kl(E),"]")),Array.isArray(E)&&(w=E)}if((!S||!S.length)&&Et(N)){var T=y&&y.length,q=N({xAxis:f?Va(Va({},f),{},{ticks:T?y:f.ticks}):void 0,width:l,height:c,offset:d},T?!0:p);kn(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Kl(q),"]")),Array.isArray(q)&&(S=q)}return pe.createElement("g",{className:"recharts-cartesian-grid"},pe.createElement(a0e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),pe.createElement(s0e,fl({},u,{offset:d,horizontalPoints:w,xAxis:f,yAxis:b})),pe.createElement(n0e,fl({},u,{offset:d,verticalPoints:S,xAxis:f,yAxis:b})),pe.createElement(o0e,fl({},u,{horizontalPoints:w})),pe.createElement(i0e,fl({},u,{verticalPoints:S})))}va.displayName="CartesianGrid";var d0e=["type","layout","connectNulls","ref"],u0e=["key"];function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vd(t)}function pk(t,r){if(t==null)return{};var a=m0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function m0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function gm(){return gm=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},gm.apply(this,arguments)}function hk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function Cs(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?hk(Object(a),!0).forEach(function(s){bn(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):hk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function gc(t){return f0e(t)||h0e(t)||p0e(t)||x0e()}function x0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p0e(t,r){if(t){if(typeof t=="string")return n1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n1(t,r)}}function h0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function f0e(t){if(Array.isArray(t))return n1(t)}function n1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function g0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,CF(s.key),s)}}function b0e(t,r,a){return r&&fk(t.prototype,r),a&&fk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function v0e(t,r,a){return r=ff(r),y0e(t,SF()?Reflect.construct(r,a||[],ff(t).constructor):r.apply(t,a))}function y0e(t,r){if(r&&(Vd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j0e(t)}function j0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SF=function(){return!!t})()}function ff(t){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ff(t)}function N0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&o1(t,r)}function o1(t,r){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},o1(t,r)}function bn(t,r,a){return r=CF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function CF(t){var r=w0e(t,"string");return Vd(r)=="symbol"?r:r+""}function w0e(t,r){if(Vd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Vd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var as=function(t){function r(){var a;g0e(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=v0e(this,r,[].concat(n)),bn(a,"state",{isAnimationFinished:!0,totalLength:0}),bn(a,"generateSimpleStrokeDasharray",function(i,l){return"".concat(l,"px ").concat(i-l,"px")}),bn(a,"getStrokeDasharray",function(i,l,c){var d=c.reduce(function(y,f){return y+f});if(!d)return a.generateSimpleStrokeDasharray(l,i);for(var u=Math.floor(i/d),m=i%d,x=l-i,h=[],v=0,p=0;v<c.length;p+=c[v],++v)if(p+c[v]>m){h=[].concat(gc(c.slice(0,v)),[m-p]);break}var g=h.length%2===0?[0,x]:[x];return[].concat(gc(r.repeat(c,u)),gc(h),g).map(function(y){return"".concat(y,"px")}).join(", ")}),bn(a,"id",ac("recharts-line-")),bn(a,"pathRef",function(i){a.mainCurve=i}),bn(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),bn(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return N0e(r,t),b0e(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,l=o.xAxis,c=o.yAxis,d=o.layout,u=o.children,m=Ls(u,s0);if(!m)return null;var x=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:Hr(p.payload,g)}},h={clipPath:s?"url(#clipPath-".concat(n,")"):null};return pe.createElement(Vt,h,m.map(function(v){return pe.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:i,xAxis:l,yAxis:c,layout:d,dataPointFormatter:x})}))}},{key:"renderDots",value:function(s,n,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,m=St(this.props,!1),x=St(c,!0),h=d.map(function(p,g){var y=Cs(Cs(Cs({key:"dot-".concat(g),r:3},m),x),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return r.renderDotItem(c,y)}),v={clipPath:s?"url(#clipPath-".concat(n?"":"dots-").concat(o,")"):null};return pe.createElement(Vt,gm({className:"recharts-line-dots",key:"dots"},v),h)}},{key:"renderCurveStatically",value:function(s,n,o,i){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var m=pk(l,d0e),x=Cs(Cs(Cs({},St(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(o,")"):null,points:s},i),{},{type:c,layout:d,connectNulls:u});return pe.createElement(kl,gm({},x,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,n){var o=this,i=this.props,l=i.points,c=i.strokeDasharray,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,x=i.animationEasing,h=i.animationId,v=i.animateNewValues,p=i.width,g=i.height,y=this.state,f=y.prevPoints,b=y.totalLength;return pe.createElement(Pn,{begin:u,duration:m,isActive:d,easing:x,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var _=N.t;if(f){var w=f.length/l.length,S=l.map(function(A,O){var V=Math.floor(O*w);if(f[V]){var G=f[V],L=ma(G.x,A.x),Z=ma(G.y,A.y);return Cs(Cs({},A),{},{x:L(_),y:Z(_)})}if(v){var D=ma(p*2,A.x),K=ma(g/2,A.y);return Cs(Cs({},A),{},{x:D(_),y:K(_)})}return Cs(Cs({},A),{},{x:A.x,y:A.y})});return o.renderCurveStatically(S,s,n)}var C=ma(0,b),E=C(_),T;if(c){var q="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});T=o.getStrokeDasharray(E,b,q)}else T=o.generateSimpleStrokeDasharray(b,E);return o.renderCurveStatically(l,s,n,{strokeDasharray:T})})}},{key:"renderCurve",value:function(s,n){var o=this.props,i=o.points,l=o.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&i&&i.length&&(!d&&u>0||!Ul(d,i))?this.renderCurveWithAnimation(s,n):this.renderCurveStatically(i,s,n)}},{key:"render",value:function(){var s,n=this.props,o=n.hide,i=n.dot,l=n.points,c=n.className,d=n.xAxis,u=n.yAxis,m=n.top,x=n.left,h=n.width,v=n.height,p=n.isAnimationActive,g=n.id;if(o||!l||!l.length)return null;var y=this.state.isAnimationFinished,f=l.length===1,b=Mt("recharts-line",c),N=d&&d.allowDataOverflow,_=u&&u.allowDataOverflow,w=N||_,S=Ft(g)?this.id:g,C=(s=St(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},E=C.r,T=E===void 0?3:E,q=C.strokeWidth,A=q===void 0?2:q,O=gP(i)?i:{},V=O.clipDot,G=V===void 0?!0:V,L=T*2+A;return pe.createElement(Vt,{className:b},N||_?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:N?x:x-h/2,y:_?m:m-v/2,width:N?h:h*2,height:_?v:v*2})),!G&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},pe.createElement("rect",{x:x-L/2,y:m-L/2,width:h+L,height:v+L}))):null,!f&&this.renderCurve(w,S),this.renderErrorBar(w,S),(f||i)&&this.renderDots(w,G,S),(!p||y)&&Jn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:n.curPoints}:s.points!==n.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,n){for(var o=s.length%2!==0?[].concat(gc(s),[0]):s,i=[],l=0;l<n;++l)i=[].concat(gc(i),gc(o));return i}},{key:"renderDotItem",value:function(s,n){var o;if(pe.isValidElement(s))o=pe.cloneElement(s,n);else if(Et(s))o=s(n);else{var i=n.key,l=pk(n,u0e),c=Mt("recharts-line-dot",typeof s!="boolean"?s.className:"");o=pe.createElement(n0,gm({key:i},l,{className:c}))}return o}}])}(j.PureComponent);bn(as,"displayName","Line");bn(as,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Vi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});bn(as,"getComposedData",function(t){var r=t.props,a=t.xAxis,s=t.yAxis,n=t.xAxisTicks,o=t.yAxisTicks,i=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=r.layout,m=c.map(function(x,h){var v=Hr(x,i);return u==="horizontal"?{x:Wh({axis:a,ticks:n,bandSize:l,entry:x,index:h}),y:Ft(v)?null:s.scale(v),value:v,payload:x}:{x:Ft(v)?null:a.scale(v),y:Wh({axis:s,ticks:o,bandSize:l,entry:x,index:h}),value:v,payload:x}});return Cs({points:m,layout:u},d)});var _0e=["layout","type","stroke","connectNulls","isRange","ref"],S0e=["key"],kF;function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ud(t)}function EF(t,r){if(t==null)return{};var a=C0e(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function C0e(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function gl(){return gl=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},gl.apply(this,arguments)}function gk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function ri(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?gk(Object(a),!0).forEach(function(s){Hn(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function k0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function bk(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,PF(s.key),s)}}function E0e(t,r,a){return r&&bk(t.prototype,r),a&&bk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,r,a){return r=gf(r),P0e(t,AF()?Reflect.construct(r,a||[],gf(t).constructor):r.apply(t,a))}function P0e(t,r){if(r&&(Ud(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0e(t)}function T0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AF=function(){return!!t})()}function gf(t){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},gf(t)}function O0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&i1(t,r)}function i1(t,r){return i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},i1(t,r)}function Hn(t,r,a){return r=PF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function PF(t){var r=F0e(t,"string");return Ud(r)=="symbol"?r:r+""}function F0e(t,r){if(Ud(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Ud(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mo=function(t){function r(){var a;k0e(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=A0e(this,r,[].concat(n)),Hn(a,"state",{isAnimationFinished:!0}),Hn(a,"id",ac("recharts-area-")),Hn(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Et(i)&&i()}),Hn(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Et(i)&&i()}),a}return O0e(r,t),E0e(r,[{key:"renderDots",value:function(s,n,o){var i=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(i&&!l)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,x=St(this.props,!1),h=St(d,!0),v=u.map(function(g,y){var f=ri(ri(ri({key:"dot-".concat(y),r:3},x),h),{},{index:y,cx:g.x,cy:g.y,dataKey:m,value:g.value,payload:g.payload,points:u});return r.renderDotItem(d,f)}),p={clipPath:s?"url(#clipPath-".concat(n?"":"dots-").concat(o,")"):null};return pe.createElement(Vt,gl({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(s){var n=this.props,o=n.baseLine,i=n.points,l=n.strokeWidth,c=i[0].x,d=i[i.length-1].x,u=s*Math.abs(c-d),m=pi(i.map(function(x){return x.y||0}));return at(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(pi(o.map(function(x){return x.y||0})),m)),at(m)?pe.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var n=this.props,o=n.baseLine,i=n.points,l=n.strokeWidth,c=i[0].y,d=i[i.length-1].y,u=s*Math.abs(c-d),m=pi(i.map(function(x){return x.x||0}));return at(o)&&typeof o=="number"?m=Math.max(o,m):o&&Array.isArray(o)&&o.length&&(m=Math.max(pi(o.map(function(x){return x.x||0})),m)),at(m)?pe.createElement("rect",{x:0,y:c<d?c:c-u,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,n,o,i){var l=this.props,c=l.layout,d=l.type,u=l.stroke,m=l.connectNulls,x=l.isRange;l.ref;var h=EF(l,_0e);return pe.createElement(Vt,{clipPath:o?"url(#clipPath-".concat(i,")"):null},pe.createElement(kl,gl({},St(h,!0),{points:s,connectNulls:m,type:d,baseLine:n,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&pe.createElement(kl,gl({},St(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})),u!=="none"&&x&&pe.createElement(kl,gl({},St(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(s,n){var o=this,i=this.props,l=i.points,c=i.baseLine,d=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,x=i.animationEasing,h=i.animationId,v=this.state,p=v.prevPoints,g=v.prevBaseLine;return pe.createElement(Pn,{begin:u,duration:m,isActive:d,easing:x,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var f=y.t;if(p){var b=p.length/l.length,N=l.map(function(C,E){var T=Math.floor(E*b);if(p[T]){var q=p[T],A=ma(q.x,C.x),O=ma(q.y,C.y);return ri(ri({},C),{},{x:A(f),y:O(f)})}return C}),_;if(at(c)&&typeof c=="number"){var w=ma(g,c);_=w(f)}else if(Ft(c)||cu(c)){var S=ma(g,0);_=S(f)}else _=c.map(function(C,E){var T=Math.floor(E*b);if(g[T]){var q=g[T],A=ma(q.x,C.x),O=ma(q.y,C.y);return ri(ri({},C),{},{x:A(f),y:O(f)})}return C});return o.renderAreaStatically(N,_,s,n)}return pe.createElement(Vt,null,pe.createElement("defs",null,pe.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.renderClipRect(f))),pe.createElement(Vt,{clipPath:"url(#animationClipPath-".concat(n,")")},o.renderAreaStatically(l,c,s,n)))})}},{key:"renderArea",value:function(s,n){var o=this.props,i=o.points,l=o.baseLine,c=o.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,x=d.totalLength;return c&&i&&i.length&&(!u&&x>0||!Ul(u,i)||!Ul(m,l))?this.renderAreaWithAnimation(s,n):this.renderAreaStatically(i,l,s,n)}},{key:"render",value:function(){var s,n=this.props,o=n.hide,i=n.dot,l=n.points,c=n.className,d=n.top,u=n.left,m=n.xAxis,x=n.yAxis,h=n.width,v=n.height,p=n.isAnimationActive,g=n.id;if(o||!l||!l.length)return null;var y=this.state.isAnimationFinished,f=l.length===1,b=Mt("recharts-area",c),N=m&&m.allowDataOverflow,_=x&&x.allowDataOverflow,w=N||_,S=Ft(g)?this.id:g,C=(s=St(i,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},E=C.r,T=E===void 0?3:E,q=C.strokeWidth,A=q===void 0?2:q,O=gP(i)?i:{},V=O.clipDot,G=V===void 0?!0:V,L=T*2+A;return pe.createElement(Vt,{className:b},N||_?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(S)},pe.createElement("rect",{x:N?u:u-h/2,y:_?d:d-v/2,width:N?h:h*2,height:_?v:v*2})),!G&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},pe.createElement("rect",{x:u-L/2,y:d-L/2,width:h+L,height:v+L}))):null,f?null:this.renderArea(w,S),(i||f)&&this.renderDots(w,G,S),(!p||y)&&Jn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,n){return s.animationId!==n.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:s.points!==n.curPoints||s.baseLine!==n.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(j.PureComponent);kF=Mo;Hn(Mo,"displayName","Area");Hn(Mo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Vi.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Hn(Mo,"getBaseValue",function(t,r,a,s){var n=t.layout,o=t.baseValue,i=r.props.baseValue,l=i??o;if(at(l)&&typeof l=="number")return l;var c=n==="horizontal"?s:a,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Hn(Mo,"getComposedData",function(t){var r=t.props,a=t.item,s=t.xAxis,n=t.yAxis,o=t.xAxisTicks,i=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,x=t.offset,h=r.layout,v=d&&d.length,p=kF.getBaseValue(r,a,s,n),g=h==="horizontal",y=!1,f=m.map(function(N,_){var w;v?w=d[u+_]:(w=Hr(N,c),Array.isArray(w)?y=!0:w=[p,w]);var S=w[1]==null||v&&Hr(N,c)==null;return g?{x:Wh({axis:s,ticks:o,bandSize:l,entry:N,index:_}),y:S?null:n.scale(w[1]),value:w,payload:N}:{x:S?null:s.scale(w[1]),y:Wh({axis:n,ticks:i,bandSize:l,entry:N,index:_}),value:w,payload:N}}),b;return v||y?b=f.map(function(N){var _=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:_!=null&&N.y!=null?n.scale(_):null}:{x:_!=null?s.scale(_):null,y:N.y}}):b=g?n.scale(p):s.scale(p),ri({points:f,baseLine:b,layout:h,isRange:y},x)});Hn(Mo,"renderDotItem",function(t,r){var a;if(pe.isValidElement(t))a=pe.cloneElement(t,r);else if(Et(t))a=t(r);else{var s=Mt("recharts-area-dot",typeof t!="boolean"?t.className:""),n=r.key,o=EF(r,S0e);a=pe.createElement(n0,gl({},o,{key:n,className:s}))}return a});function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wd(t)}function $0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function R0e(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,FF(s.key),s)}}function D0e(t,r,a){return r&&R0e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function M0e(t,r,a){return r=bf(r),I0e(t,TF()?Reflect.construct(r,a||[],bf(t).constructor):r.apply(t,a))}function I0e(t,r){if(r&&(Wd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L0e(t)}function L0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TF=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},bf(t)}function B0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&l1(t,r)}function l1(t,r){return l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},l1(t,r)}function OF(t,r,a){return r=FF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function FF(t){var r=z0e(t,"string");return Wd(r)=="symbol"?r:r+""}function z0e(t,r){if(Wd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Wd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},c1.apply(this,arguments)}function q0e(t){var r=t.xAxisId,a=DN(),s=MN(),n=xF(r);return n==null?null:j.createElement(fu,c1({},n,{className:Mt("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(i){return vo(i,!0)}}))}var zr=function(t){function r(){return $0e(this,r),M0e(this,r,arguments)}return B0e(r,t),D0e(r,[{key:"render",value:function(){return j.createElement(q0e,this.props)}}])}(j.Component);OF(zr,"displayName","XAxis");OF(zr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hd(t)}function V0e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function U0e(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,DF(s.key),s)}}function W0e(t,r,a){return r&&U0e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function H0e(t,r,a){return r=vf(r),K0e(t,$F()?Reflect.construct(r,a||[],vf(t).constructor):r.apply(t,a))}function K0e(t,r){if(r&&(Hd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G0e(t)}function G0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($F=function(){return!!t})()}function vf(t){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},vf(t)}function X0e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d1(t,r)}function d1(t,r){return d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},d1(t,r)}function RF(t,r,a){return r=DF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function DF(t){var r=Y0e(t,"string");return Hd(r)=="symbol"?r:r+""}function Y0e(t,r){if(Hd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Hd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function u1(){return u1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},u1.apply(this,arguments)}var Q0e=function(r){var a=r.yAxisId,s=DN(),n=MN(),o=pF(a);return o==null?null:j.createElement(fu,u1({},o,{className:Mt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:s,height:n},ticksGenerator:function(l){return vo(l,!0)}}))},Fr=function(t){function r(){return V0e(this,r),H0e(this,r,arguments)}return X0e(r,t),W0e(r,[{key:"render",value:function(){return j.createElement(Q0e,this.props)}}])}(j.Component);RF(Fr,"displayName","YAxis");RF(Fr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function vk(t){return tpe(t)||epe(t)||Z0e(t)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(t,r){if(t){if(typeof t=="string")return m1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m1(t,r)}}function epe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tpe(t){if(Array.isArray(t))return m1(t)}function m1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}var x1=function(r,a,s,n,o){var i=Ls(r,LN),l=Ls(r,Jg),c=[].concat(vk(i),vk(l)),d=Ls(r,eb),u="".concat(n,"Id"),m=n[0],x=a;if(c.length&&(x=c.reduce(function(p,g){if(g.props[u]===s&&Zn(g.props,"extendDomain")&&at(g.props[m])){var y=g.props[m];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},x)),d.length){var h="".concat(m,"1"),v="".concat(m,"2");x=d.reduce(function(p,g){if(g.props[u]===s&&Zn(g.props,"extendDomain")&&at(g.props[h])&&at(g.props[v])){var y=g.props[h],f=g.props[v];return[Math.min(p[0],y,f),Math.max(p[1],y,f)]}return p},x)}return o&&o.length&&(x=o.reduce(function(p,g){return at(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},x)),x},MF={exports:{}};(function(t){var r=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function n(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function o(c,d,u,m,x){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new n(u,m||c,x),v=a?a+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],h]:c._events[v].push(h):(c._events[v]=h,c._eventsCount++),c}function i(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)r.call(u,m)&&d.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,h=m.length,v=new Array(h);x<h;x++)v[x]=m[x].fn;return v},l.prototype.listenerCount=function(d){var u=a?a+d:d,m=this._events[u];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,u,m,x,h,v){var p=a?a+d:d;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,f,b;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,m),!0;case 4:return g.fn.call(g.context,u,m,x),!0;case 5:return g.fn.call(g.context,u,m,x,h),!0;case 6:return g.fn.call(g.context,u,m,x,h,v),!0}for(b=1,f=new Array(y-1);b<y;b++)f[b-1]=arguments[b];g.fn.apply(g.context,f)}else{var N=g.length,_;for(b=0;b<N;b++)switch(g[b].once&&this.removeListener(d,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,m);break;case 4:g[b].fn.call(g[b].context,u,m,x);break;default:if(!f)for(_=1,f=new Array(y-1);_<y;_++)f[_-1]=arguments[_];g[b].fn.apply(g[b].context,f)}}return!0},l.prototype.on=function(d,u,m){return o(this,d,u,m,!1)},l.prototype.once=function(d,u,m){return o(this,d,u,m,!0)},l.prototype.removeListener=function(d,u,m,x){var h=a?a+d:d;if(!this._events[h])return this;if(!u)return i(this,h),this;var v=this._events[h];if(v.fn)v.fn===u&&(!x||v.once)&&(!m||v.context===m)&&i(this,h);else{for(var p=0,g=[],y=v.length;p<y;p++)(v[p].fn!==u||x&&!v[p].once||m&&v[p].context!==m)&&g.push(v[p]);g.length?this._events[h]=g.length===1?g[0]:g:i(this,h)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&i(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,t.exports=l})(MF);var rpe=MF.exports;const ape=dr(rpe);var bv=new ape,vv="recharts.syncMouseEvents";function Px(t){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Px(t)}function spe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function npe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,IF(s.key),s)}}function ope(t,r,a){return r&&npe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yv(t,r,a){return r=IF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function IF(t){var r=ipe(t,"string");return Px(r)=="symbol"?r:r+""}function ipe(t,r){if(Px(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Px(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lpe=function(){function t(){spe(this,t),yv(this,"activeIndex",0),yv(this,"coordinateList",[]),yv(this,"layout","horizontal")}return ope(t,[{key:"setDetails",value:function(a){var s,n=a.coordinateList,o=n===void 0?null:n,i=a.container,l=i===void 0?null:i,c=a.layout,d=c===void 0?null:c,u=a.offset,m=u===void 0?null:u,x=a.mouseHandlerCallback,h=x===void 0?null:x;this.coordinateList=(s=o??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),o=n.x,i=n.y,l=n.height,c=this.coordinateList[this.activeIndex].coordinate,d=((a=window)===null||a===void 0?void 0:a.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=o+c+d,x=i+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])}();function cpe(t,r,a){if(a==="number"&&r===!0&&Array.isArray(t)){var s=t==null?void 0:t[0],n=t==null?void 0:t[1];if(s&&n&&at(s)&&at(n))return!0}return!1}function dpe(t,r,a,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-n:a.left+.5,y:t==="horizontal"?a.top+.5:r.y-n,width:t==="horizontal"?s:a.width-1,height:t==="horizontal"?a.height-1:s}}function LF(t){var r=t.cx,a=t.cy,s=t.radius,n=t.startAngle,o=t.endAngle,i=yr(r,a,s,n),l=yr(r,a,s,o);return{points:[i,l],cx:r,cy:a,radius:s,startAngle:n,endAngle:o}}function upe(t,r,a){var s,n,o,i;if(t==="horizontal")s=r.x,o=s,n=a.top,i=a.top+a.height;else if(t==="vertical")n=r.y,i=n,s=a.left,o=a.left+a.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var l=r.cx,c=r.cy,d=r.innerRadius,u=r.outerRadius,m=r.angle,x=yr(l,c,d,m),h=yr(l,c,u,m);s=x.x,n=x.y,o=h.x,i=h.y}else return LF(r);return[{x:s,y:n},{x:o,y:i}]}function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tx(t)}function yk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function tp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?yk(Object(a),!0).forEach(function(s){mpe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function mpe(t,r,a){return r=xpe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function xpe(t){var r=ppe(t,"string");return Tx(r)=="symbol"?r:r+""}function ppe(t,r){if(Tx(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Tx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hpe(t){var r,a,s=t.element,n=t.tooltipEventType,o=t.isActive,i=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,h=(r=s.props.cursor)!==null&&r!==void 0?r:(a=s.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!s||!h||!o||!i||x!=="ScatterChart"&&n!=="axis")return null;var v,p=kl;if(x==="ScatterChart")v=i,p=wce;else if(x==="BarChart")v=dpe(m,i,c,u),p=TN;else if(m==="radial"){var g=LF(i),y=g.cx,f=g.cy,b=g.radius,N=g.startAngle,_=g.endAngle;v={cx:y,cy:f,startAngle:N,endAngle:_,innerRadius:b,outerRadius:b},p=RO}else v={points:upe(m,i,c)},p=kl;var w=tp(tp(tp(tp({stroke:"#ccc",pointerEvents:"none"},c),v),St(h,!1)),{},{payload:l,payloadIndex:d,className:Mt("recharts-tooltip-cursor",h.className)});return j.isValidElement(h)?j.cloneElement(h,w):j.createElement(p,w)}var fpe=["item"],gpe=["children","className","width","height","style","compact","title","desc"];function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Kd(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},Vc.apply(this,arguments)}function jk(t,r){return ype(t)||vpe(t,r)||zF(t,r)||bpe()}function bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vpe(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var s,n,o,i,l=[],c=!0,d=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(c=(s=o.call(a)).done)&&(l.push(s.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw n}}return l}}function ype(t){if(Array.isArray(t))return t}function Nk(t,r){if(t==null)return{};var a=jpe(t,r),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)s=o[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function jpe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function Npe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function wpe(t,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,qF(s.key),s)}}function _pe(t,r,a){return r&&wpe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Spe(t,r,a){return r=yf(r),Cpe(t,BF()?Reflect.construct(r,a||[],yf(t).constructor):r.apply(t,a))}function Cpe(t,r){if(r&&(Kd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kpe(t)}function kpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BF=function(){return!!t})()}function yf(t){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},yf(t)}function Epe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&p1(t,r)}function p1(t,r){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},p1(t,r)}function Gd(t){return Tpe(t)||Ppe(t)||zF(t)||Ape()}function Ape(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zF(t,r){if(t){if(typeof t=="string")return h1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h1(t,r)}}function Ppe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tpe(t){if(Array.isArray(t))return h1(t)}function h1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=t[a];return s}function wk(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function We(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wk(Object(a),!0).forEach(function(s){kt(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wk(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function kt(t,r,a){return r=qF(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function qF(t){var r=Ope(t,"string");return Kd(r)=="symbol"?r:r+""}function Ope(t,r){if(Kd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(Kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Fpe={xAxis:["bottom","top"],yAxis:["left","right"]},$pe={width:"100%",height:"100%"},VF={x:0,y:0};function rp(t){return t}var Rpe=function(r,a){return a==="horizontal"?r.x:a==="vertical"?r.y:a==="centric"?r.angle:r.radius},Dpe=function(r,a,s,n){var o=a.find(function(u){return u&&u.index===s});if(o){if(r==="horizontal")return{x:o.coordinate,y:n.y};if(r==="vertical")return{x:n.x,y:o.coordinate};if(r==="centric"){var i=o.coordinate,l=n.radius;return We(We(We({},n),yr(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var c=o.coordinate,d=n.angle;return We(We(We({},n),yr(n.cx,n.cy,c,d)),{},{angle:d,radius:c})}return VF},tb=function(r,a){var s=a.graphicalItems,n=a.dataStartIndex,o=a.dataEndIndex,i=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Gd(l),Gd(d)):l},[]);return i.length>0?i:r&&r.length&&at(n)&&at(o)?r.slice(n,o+1):[]};function UF(t){return t==="number"?[0,"auto"]:void 0}var f1=function(r,a,s,n){var o=r.graphicalItems,i=r.tooltipAxis,l=tb(a,r);return s<0||!o||!o.length||s>=l.length?null:o.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:a;m&&r.dataStartIndex+r.dataEndIndex!==0&&r.dataEndIndex-r.dataStartIndex>=s&&(m=m.slice(r.dataStartIndex,r.dataEndIndex+1));var x;if(i.dataKey&&!i.allowDuplicatedCategory){var h=m===void 0?l:m;x=fh(h,i.dataKey,n)}else x=m&&m[s]||l[s];return x?[].concat(Gd(c),[AO(d,x)]):c},[])},_k=function(r,a,s,n){var o=n||{x:r.chartX,y:r.chartY},i=Rpe(o,s),l=r.orderedTooltipTicks,c=r.tooltipAxis,d=r.tooltipTicks,u=Gne(i,l,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,x=f1(r,a,u,m),h=Dpe(s,l,u,o);return{activeTooltipIndex:u,activeLabel:m,activePayload:x,activeCoordinate:h}}return null},Mpe=function(r,a){var s=a.axes,n=a.graphicalItems,o=a.axisType,i=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.layout,m=r.children,x=r.stackOffset,h=wO(u,o);return s.reduce(function(v,p){var g,y=p.type.defaultProps!==void 0?We(We({},p.type.defaultProps),p.props):p.props,f=y.type,b=y.dataKey,N=y.allowDataOverflow,_=y.allowDuplicatedCategory,w=y.scale,S=y.ticks,C=y.includeHidden,E=y[i];if(v[E])return v;var T=tb(r.data,{graphicalItems:n.filter(function(F){var I,k=i in F.props?F.props[i]:(I=F.type.defaultProps)===null||I===void 0?void 0:I[i];return k===E}),dataStartIndex:c,dataEndIndex:d}),q=T.length,A,O,V;cpe(y.domain,N,f)&&(A=Aj(y.domain,null,N),h&&(f==="number"||w!=="auto")&&(V=xm(T,b,"category")));var G=UF(f);if(!A||A.length===0){var L,Z=(L=y.domain)!==null&&L!==void 0?L:G;if(b){if(A=xm(T,b,f),f==="category"&&h){var D=IU(A);_&&D?(O=A,A=nf(0,q)):_||(A=KS(Z,A,p).reduce(function(F,I){return F.indexOf(I)>=0?F:[].concat(Gd(F),[I])},[]))}else if(f==="category")_?A=A.filter(function(F){return F!==""&&!Ft(F)}):A=KS(Z,A,p).reduce(function(F,I){return F.indexOf(I)>=0||I===""||Ft(I)?F:[].concat(Gd(F),[I])},[]);else if(f==="number"){var K=Zne(T,n.filter(function(F){var I,k,M=i in F.props?F.props[i]:(I=F.type.defaultProps)===null||I===void 0?void 0:I[i],z="hide"in F.props?F.props.hide:(k=F.type.defaultProps)===null||k===void 0?void 0:k.hide;return M===E&&(C||!z)}),b,o,u);K&&(A=K)}h&&(f==="number"||w!=="auto")&&(V=xm(T,b,"category"))}else h?A=nf(0,q):l&&l[E]&&l[E].hasStack&&f==="number"?A=x==="expand"?[0,1]:EO(l[E].stackGroups,c,d):A=NO(T,n.filter(function(F){var I=i in F.props?F.props[i]:F.type.defaultProps[i],k="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return I===E&&(C||!k)}),f,u,!0);if(f==="number")A=x1(m,A,E,o,S),Z&&(A=Aj(Z,A,N));else if(f==="category"&&Z){var R=Z,B=A.every(function(F){return R.indexOf(F)>=0});B&&(A=R)}}return We(We({},v),{},kt({},E,We(We({},y),{},{axisType:o,domain:A,categoricalDomain:V,duplicateDomain:O,originalDomain:(g=y.domain)!==null&&g!==void 0?g:G,isCategorical:h,layout:u})))},{})},Ipe=function(r,a){var s=a.graphicalItems,n=a.Axis,o=a.axisType,i=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.layout,m=r.children,x=tb(r.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),h=x.length,v=wO(u,o),p=-1;return s.reduce(function(g,y){var f=y.type.defaultProps!==void 0?We(We({},y.type.defaultProps),y.props):y.props,b=f[i],N=UF("number");if(!g[b]){p++;var _;return v?_=nf(0,h):l&&l[b]&&l[b].hasStack?(_=EO(l[b].stackGroups,c,d),_=x1(m,_,b,o)):(_=Aj(N,NO(x,s.filter(function(w){var S,C,E=i in w.props?w.props[i]:(S=w.type.defaultProps)===null||S===void 0?void 0:S[i],T="hide"in w.props?w.props.hide:(C=w.type.defaultProps)===null||C===void 0?void 0:C.hide;return E===b&&!T}),"number",u),n.defaultProps.allowDataOverflow),_=x1(m,_,b,o)),We(We({},g),{},kt({},b,We(We({axisType:o},n.defaultProps),{},{hide:!0,orientation:Is(Fpe,"".concat(o,".").concat(p%2),null),domain:_,originalDomain:N,isCategorical:v,layout:u})))}return g},{})},Lpe=function(r,a){var s=a.axisType,n=s===void 0?"xAxis":s,o=a.AxisComp,i=a.graphicalItems,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=r.children,m="".concat(n,"Id"),x=Ls(u,o),h={};return x&&x.length?h=Mpe(r,{axes:x,graphicalItems:i,axisType:n,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):i&&i.length&&(h=Ipe(r,{Axis:o,graphicalItems:i,axisType:n,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),h},Bpe=function(r){var a=ci(r),s=vo(a,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:sN(s,function(n){return n.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Hh(a,s)}},Sk=function(r){var a=r.children,s=r.defaultShowTooltip,n=Ps(a,Md),o=0,i=0;return r.data&&r.data.length!==0&&(i=r.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(o=n.props.startIndex),n.props.endIndex>=0&&(i=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!s}},zpe=function(r){return!r||!r.length?!1:r.some(function(a){var s=No(a&&a.type);return s&&s.indexOf("Bar")>=0})},Ck=function(r){return r==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:r==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:r==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qpe=function(r,a){var s=r.props,n=r.graphicalItems,o=r.xAxisMap,i=o===void 0?{}:o,l=r.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,m=s.children,x=s.margin||{},h=Ps(m,Md),v=Ps(m,Ar),p=Object.keys(c).reduce(function(_,w){var S=c[w],C=S.orientation;return!S.mirror&&!S.hide?We(We({},_),{},kt({},C,_[C]+S.width)):_},{left:x.left||0,right:x.right||0}),g=Object.keys(i).reduce(function(_,w){var S=i[w],C=S.orientation;return!S.mirror&&!S.hide?We(We({},_),{},kt({},C,Is(_,"".concat(C))+S.height)):_},{top:x.top||0,bottom:x.bottom||0}),y=We(We({},g),p),f=y.bottom;h&&(y.bottom+=h.props.height||Md.defaultProps.height),v&&a&&(y=Qne(y,n,s,a));var b=d-y.left-y.right,N=u-y.top-y.bottom;return We(We({brushBottom:f},y),{},{width:Math.max(b,0),height:Math.max(N,0)})},Vpe=function(r,a){if(a==="xAxis")return r[a].width;if(a==="yAxis")return r[a].height},rb=function(r){var a=r.chartName,s=r.GraphicalChild,n=r.defaultTooltipEventType,o=n===void 0?"axis":n,i=r.validateTooltipEventTypes,l=i===void 0?["axis"]:i,c=r.axisComponents,d=r.legendContent,u=r.formatAxisMap,m=r.defaultProps,x=function(y,f){var b=f.graphicalItems,N=f.stackGroups,_=f.offset,w=f.updateId,S=f.dataStartIndex,C=f.dataEndIndex,E=y.barSize,T=y.layout,q=y.barGap,A=y.barCategoryGap,O=y.maxBarSize,V=Ck(T),G=V.numericAxisName,L=V.cateAxisName,Z=zpe(b),D=[];return b.forEach(function(K,R){var B=tb(y.data,{graphicalItems:[K],dataStartIndex:S,dataEndIndex:C}),F=K.type.defaultProps!==void 0?We(We({},K.type.defaultProps),K.props):K.props,I=F.dataKey,k=F.maxBarSize,M=F["".concat(G,"Id")],z=F["".concat(L,"Id")],oe={},W=c.reduce(function(Ee,Me){var Ae=f["".concat(Me.axisType,"Map")],ct=F["".concat(Me.axisType,"Id")];Ae&&Ae[ct]||Me.axisType==="zAxis"||Hl();var bt=Ae[ct];return We(We({},Ee),{},kt(kt({},Me.axisType,bt),"".concat(Me.axisType,"Ticks"),vo(bt)))},oe),ae=W[L],ee=W["".concat(L,"Ticks")],ce=N&&N[M]&&N[M].hasStack&&loe(K,N[M].stackGroups),ie=No(K.type).indexOf("Bar")>=0,we=Hh(ae,ee),Se=[],me=Z&&Xne({barSize:E,stackGroups:N,totalSize:Vpe(W,L)});if(ie){var _e,je,lt=Ft(k)?O:k,Ke=(_e=(je=Hh(ae,ee,!0))!==null&&je!==void 0?je:lt)!==null&&_e!==void 0?_e:0;Se=Yne({barGap:q,barCategoryGap:A,bandSize:Ke!==we?Ke:we,sizeList:me[z],maxBarSize:lt}),Ke!==we&&(Se=Se.map(function(Ee){return We(We({},Ee),{},{position:We(We({},Ee.position),{},{offset:Ee.position.offset-Ke/2})})}))}var ut=K&&K.type&&K.type.getComposedData;ut&&D.push({props:We(We({},ut(We(We({},W),{},{displayedData:B,props:y,dataKey:I,item:K,bandSize:we,barPosition:Se,offset:_,stackedData:ce,layout:T,dataStartIndex:S,dataEndIndex:C}))),{},kt(kt(kt({key:K.key||"item-".concat(R)},G,W[G]),L,W[L]),"animationId",w)),childIndex:YU(K,y.children),item:K})}),D},h=function(y,f){var b=y.props,N=y.dataStartIndex,_=y.dataEndIndex,w=y.updateId;if(!z4({props:b}))return null;var S=b.children,C=b.layout,E=b.stackOffset,T=b.data,q=b.reverseStackOrder,A=Ck(C),O=A.numericAxisName,V=A.cateAxisName,G=Ls(S,s),L=ooe(T,G,"".concat(O,"Id"),"".concat(V,"Id"),E,q),Z=c.reduce(function(F,I){var k="".concat(I.axisType,"Map");return We(We({},F),{},kt({},k,Lpe(b,We(We({},I),{},{graphicalItems:G,stackGroups:I.axisType===O&&L,dataStartIndex:N,dataEndIndex:_}))))},{}),D=qpe(We(We({},Z),{},{props:b,graphicalItems:G}),f==null?void 0:f.legendBBox);Object.keys(Z).forEach(function(F){Z[F]=u(b,Z[F],D,F.replace("Map",""),a)});var K=Z["".concat(V,"Map")],R=Bpe(K),B=x(b,We(We({},Z),{},{dataStartIndex:N,dataEndIndex:_,updateId:w,graphicalItems:G,stackGroups:L,offset:D}));return We(We({formattedGraphicalItems:B,graphicalItems:G,offset:D,stackGroups:L},R),Z)},v=function(g){function y(f){var b,N,_;return Npe(this,y),_=Spe(this,y,[f]),kt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),kt(_,"accessibilityManager",new lpe),kt(_,"handleLegendBBoxUpdate",function(w){if(w){var S=_.state,C=S.dataStartIndex,E=S.dataEndIndex,T=S.updateId;_.setState(We({legendBBox:w},h({props:_.props,dataStartIndex:C,dataEndIndex:E,updateId:T},We(We({},_.state),{},{legendBBox:w}))))}}),kt(_,"handleReceiveSyncEvent",function(w,S,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(S)}}),kt(_,"handleBrushChange",function(w){var S=w.startIndex,C=w.endIndex;if(S!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var E=_.state.updateId;_.setState(function(){return We({dataStartIndex:S,dataEndIndex:C},h({props:_.props,dataStartIndex:S,dataEndIndex:C,updateId:E},_.state))}),_.triggerSyncEvent({dataStartIndex:S,dataEndIndex:C})}}),kt(_,"handleMouseEnter",function(w){var S=_.getMouseInfo(w);if(S){var C=We(We({},S),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var E=_.props.onMouseEnter;Et(E)&&E(C,w)}}),kt(_,"triggeredAfterMouseMove",function(w){var S=_.getMouseInfo(w),C=S?We(We({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var E=_.props.onMouseMove;Et(E)&&E(C,w)}),kt(_,"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),kt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),kt(_,"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),kt(_,"handleMouseLeave",function(w){_.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};_.setState(S),_.triggerSyncEvent(S);var C=_.props.onMouseLeave;Et(C)&&C(S,w)}),kt(_,"handleOuterEvent",function(w){var S=XU(w),C=Is(_.props,"".concat(S));if(S&&Et(C)){var E,T;/.*touch.*/i.test(S)?T=_.getMouseInfo(w.changedTouches[0]):T=_.getMouseInfo(w),C((E=T)!==null&&E!==void 0?E:{},w)}}),kt(_,"handleClick",function(w){var S=_.getMouseInfo(w);if(S){var C=We(We({},S),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var E=_.props.onClick;Et(E)&&E(C,w)}}),kt(_,"handleMouseDown",function(w){var S=_.props.onMouseDown;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleMouseUp",function(w){var S=_.props.onMouseUp;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),kt(_,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),kt(_,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),kt(_,"handleDoubleClick",function(w){var S=_.props.onDoubleClick;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"handleContextMenu",function(w){var S=_.props.onContextMenu;if(Et(S)){var C=_.getMouseInfo(w);S(C,w)}}),kt(_,"triggerSyncEvent",function(w){_.props.syncId!==void 0&&bv.emit(vv,_.props.syncId,w,_.eventEmitterSymbol)}),kt(_,"applySyncEvent",function(w){var S=_.props,C=S.layout,E=S.syncMethod,T=_.state.updateId,q=w.dataStartIndex,A=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(We({dataStartIndex:q,dataEndIndex:A},h({props:_.props,dataStartIndex:q,dataEndIndex:A,updateId:T},_.state)));else if(w.activeTooltipIndex!==void 0){var O=w.chartX,V=w.chartY,G=w.activeTooltipIndex,L=_.state,Z=L.offset,D=L.tooltipTicks;if(!Z)return;if(typeof E=="function")G=E(D,w);else if(E==="value"){G=-1;for(var K=0;K<D.length;K++)if(D[K].value===w.activeLabel){G=K;break}}var R=We(We({},Z),{},{x:Z.left,y:Z.top}),B=Math.min(O,R.x+R.width),F=Math.min(V,R.y+R.height),I=D[G]&&D[G].value,k=f1(_.state,_.props.data,G),M=D[G]?{x:C==="horizontal"?D[G].coordinate:B,y:C==="horizontal"?F:D[G].coordinate}:VF;_.setState(We(We({},w),{},{activeLabel:I,activeCoordinate:M,activePayload:k,activeTooltipIndex:G}))}else _.setState(w)}),kt(_,"renderCursor",function(w){var S,C=_.state,E=C.isTooltipActive,T=C.activeCoordinate,q=C.activePayload,A=C.offset,O=C.activeTooltipIndex,V=C.tooltipAxisBandSize,G=_.getTooltipEventType(),L=(S=w.props.active)!==null&&S!==void 0?S:E,Z=_.props.layout,D=w.key||"_recharts-cursor";return pe.createElement(hpe,{key:D,activeCoordinate:T,activePayload:q,activeTooltipIndex:O,chartName:a,element:w,isActive:L,layout:Z,offset:A,tooltipAxisBandSize:V,tooltipEventType:G})}),kt(_,"renderPolarAxis",function(w,S,C){var E=Is(w,"type.axisType"),T=Is(_.state,"".concat(E,"Map")),q=w.type.defaultProps,A=q!==void 0?We(We({},q),w.props):w.props,O=T&&T[A["".concat(E,"Id")]];return j.cloneElement(w,We(We({},O),{},{className:Mt(E,O.className),key:w.key||"".concat(S,"-").concat(C),ticks:vo(O,!0)}))}),kt(_,"renderPolarGrid",function(w){var S=w.props,C=S.radialLines,E=S.polarAngles,T=S.polarRadius,q=_.state,A=q.radiusAxisMap,O=q.angleAxisMap,V=ci(A),G=ci(O),L=G.cx,Z=G.cy,D=G.innerRadius,K=G.outerRadius;return j.cloneElement(w,{polarAngles:Array.isArray(E)?E:vo(G,!0).map(function(R){return R.coordinate}),polarRadius:Array.isArray(T)?T:vo(V,!0).map(function(R){return R.coordinate}),cx:L,cy:Z,innerRadius:D,outerRadius:K,key:w.key||"polar-grid",radialLines:C})}),kt(_,"renderLegend",function(){var w=_.state.formattedGraphicalItems,S=_.props,C=S.children,E=S.width,T=S.height,q=_.props.margin||{},A=E-(q.left||0)-(q.right||0),O=yO({children:C,formattedGraphicalItems:w,legendWidth:A,legendContent:d});if(!O)return null;var V=O.item,G=Nk(O,fpe);return j.cloneElement(V,We(We({},G),{},{chartWidth:E,chartHeight:T,margin:q,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),kt(_,"renderTooltip",function(){var w,S=_.props,C=S.children,E=S.accessibilityLayer,T=Ps(C,or);if(!T)return null;var q=_.state,A=q.isTooltipActive,O=q.activeCoordinate,V=q.activePayload,G=q.activeLabel,L=q.offset,Z=(w=T.props.active)!==null&&w!==void 0?w:A;return j.cloneElement(T,{viewBox:We(We({},L),{},{x:L.left,y:L.top}),active:Z,label:G,payload:Z?V:[],coordinate:O,accessibilityLayer:E})}),kt(_,"renderBrush",function(w){var S=_.props,C=S.margin,E=S.data,T=_.state,q=T.offset,A=T.dataStartIndex,O=T.dataEndIndex,V=T.updateId;return j.cloneElement(w,{key:w.key||"_recharts-brush",onChange:Q0(_.handleBrushChange,w.props.onChange),data:E,x:at(w.props.x)?w.props.x:q.left,y:at(w.props.y)?w.props.y:q.top+q.height+q.brushBottom-(C.bottom||0),width:at(w.props.width)?w.props.width:q.width,startIndex:A,endIndex:O,updateId:"brush-".concat(V)})}),kt(_,"renderReferenceElement",function(w,S,C){if(!w)return null;var E=_,T=E.clipPathId,q=_.state,A=q.xAxisMap,O=q.yAxisMap,V=q.offset,G=w.type.defaultProps||{},L=w.props,Z=L.xAxisId,D=Z===void 0?G.xAxisId:Z,K=L.yAxisId,R=K===void 0?G.yAxisId:K;return j.cloneElement(w,{key:w.key||"".concat(S,"-").concat(C),xAxis:A[D],yAxis:O[R],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:T})}),kt(_,"renderActivePoints",function(w){var S=w.item,C=w.activePoint,E=w.basePoint,T=w.childIndex,q=w.isRange,A=[],O=S.props.key,V=S.item.type.defaultProps!==void 0?We(We({},S.item.type.defaultProps),S.item.props):S.item.props,G=V.activeDot,L=V.dataKey,Z=We(We({index:T,dataKey:L,cx:C.x,cy:C.y,r:4,fill:PN(S.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},St(G,!1)),gh(G));return A.push(y.renderActiveDot(G,Z,"".concat(O,"-activePoint-").concat(T))),E?A.push(y.renderActiveDot(G,We(We({},Z),{},{cx:E.x,cy:E.y}),"".concat(O,"-basePoint-").concat(T))):q&&A.push(null),A}),kt(_,"renderGraphicChild",function(w,S,C){var E=_.filterFormatItem(w,S,C);if(!E)return null;var T=_.getTooltipEventType(),q=_.state,A=q.isTooltipActive,O=q.tooltipAxis,V=q.activeTooltipIndex,G=q.activeLabel,L=_.props.children,Z=Ps(L,or),D=E.props,K=D.points,R=D.isRange,B=D.baseLine,F=E.item.type.defaultProps!==void 0?We(We({},E.item.type.defaultProps),E.item.props):E.item.props,I=F.activeDot,k=F.hide,M=F.activeBar,z=F.activeShape,oe=!!(!k&&A&&Z&&(I||M||z)),W={};T!=="axis"&&Z&&Z.props.trigger==="click"?W={onClick:Q0(_.handleItemMouseEnter,w.props.onClick)}:T!=="axis"&&(W={onMouseLeave:Q0(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:Q0(_.handleItemMouseEnter,w.props.onMouseEnter)});var ae=j.cloneElement(w,We(We({},E.props),W));function ee(Me){return typeof O.dataKey=="function"?O.dataKey(Me.payload):null}if(oe)if(V>=0){var ce,ie;if(O.dataKey&&!O.allowDuplicatedCategory){var we=typeof O.dataKey=="function"?ee:"payload.".concat(O.dataKey.toString());ce=fh(K,we,G),ie=R&&B&&fh(B,we,G)}else ce=K==null?void 0:K[V],ie=R&&B&&B[V];if(z||M){var Se=w.props.activeIndex!==void 0?w.props.activeIndex:V;return[j.cloneElement(w,We(We(We({},E.props),W),{},{activeIndex:Se})),null,null]}if(!Ft(ce))return[ae].concat(Gd(_.renderActivePoints({item:E,activePoint:ce,basePoint:ie,childIndex:V,isRange:R})))}else{var me,_e=(me=_.getItemByXY(_.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:ae},je=_e.graphicalItem,lt=je.item,Ke=lt===void 0?w:lt,ut=je.childIndex,Ee=We(We(We({},E.props),W),{},{activeIndex:ut});return[j.cloneElement(Ke,Ee),null,null]}return R?[ae,null,null]:[ae,null]}),kt(_,"renderCustomized",function(w,S,C){return j.cloneElement(w,We(We({key:"recharts-customized-".concat(C)},_.props),_.state))}),kt(_,"renderMap",{CartesianGrid:{handler:rp,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:rp},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:rp},YAxis:{handler:rp},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((b=f.id)!==null&&b!==void 0?b:ac("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=yT(_.triggeredAfterMouseMove,(N=f.throttleDelay)!==null&&N!==void 0?N:1e3/60),_.state={},_}return Epe(y,g),_pe(y,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,_=b.data,w=b.height,S=b.layout,C=Ps(N,or);if(C){var E=C.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,q=f1(this.state,_,E,T),A=this.state.tooltipTicks[E].coordinate,O=(this.state.offset.top+w)/2,V=S==="horizontal",G=V?{x:A,y:O}:{y:A,x:O},L=this.state.formattedGraphicalItems.find(function(D){var K=D.item;return K.type.name==="Scatter"});L&&(G=We(We({},G),L.props.points[E].tooltipPosition),q=L.props.points[E].tooltipPayload);var Z={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:T,activePayload:q,activeCoordinate:G};this.setState(Z),this.renderCursor(C),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){Uy([Ps(b.children,or)],[Ps(this.props.children,or)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Ps(this.props.children,or);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return l.indexOf(N)>=0?N:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,_=N.getBoundingClientRect(),w=Nte(_),S={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},C=_.width/N.offsetWidth||1,E=this.inRange(S.chartX,S.chartY,C);if(!E)return null;var T=this.state,q=T.xAxisMap,A=T.yAxisMap,O=this.getTooltipEventType(),V=_k(this.state,this.props.data,this.props.layout,E);if(O!=="axis"&&q&&A){var G=ci(q).scale,L=ci(A).scale,Z=G&&G.invert?G.invert(S.chartX):null,D=L&&L.invert?L.invert(S.chartY):null;return We(We({},S),{},{xValue:Z,yValue:D},V)}return V?We(We({},S),V):null}},{key:"inRange",value:function(b,N){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=b/_,C=N/_;if(w==="horizontal"||w==="vertical"){var E=this.state.offset,T=S>=E.left&&S<=E.left+E.width&&C>=E.top&&C<=E.top+E.height;return T?{x:S,y:C}:null}var q=this.state,A=q.angleAxisMap,O=q.radiusAxisMap;if(A&&O){var V=ci(A);return YS({x:S,y:C},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),_=Ps(b,or),w={};_&&N==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=gh(this.props,this.handleOuterEvent);return We(We({},S),w)}},{key:"addListener",value:function(){bv.on(vv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){bv.removeListener(vv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,_){for(var w=this.state.formattedGraphicalItems,S=0,C=w.length;S<C;S++){var E=w[S];if(E.item===b||E.props.key===b.key||N===No(E.item.type)&&_===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,_=N.left,w=N.top,S=N.height,C=N.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:b},pe.createElement("rect",{x:_,y:w,height:S,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,_){var w=jk(_,2),S=w[0],C=w[1];return We(We({},N),{},kt({},S,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,_){var w=jk(_,2),S=w[0],C=w[1];return We(We({},N),{},kt({},S,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,_=N.formattedGraphicalItems,w=N.activeItem;if(_&&_.length)for(var S=0,C=_.length;S<C;S++){var E=_[S],T=E.props,q=E.item,A=q.type.defaultProps!==void 0?We(We({},q.type.defaultProps),q.props):q.props,O=No(q.type);if(O==="Bar"){var V=(T.data||[]).find(function(D){return ace(b,D)});if(V)return{graphicalItem:E,payload:V}}else if(O==="RadialBar"){var G=(T.data||[]).find(function(D){return YS(b,D)});if(G)return{graphicalItem:E,payload:G}}else if(Gg(E,w)||Xg(E,w)||Sx(E,w)){var L=Wde({graphicalItem:E,activeTooltipItem:w,itemData:A.data}),Z=A.activeIndex===void 0?L:A.activeIndex;return{graphicalItem:We(We({},E),{},{childIndex:Z}),payload:Sx(E,w)?A.data[L]:E.props.data[L]}}}return null}},{key:"render",value:function(){var b=this;if(!z4(this))return null;var N=this.props,_=N.children,w=N.className,S=N.width,C=N.height,E=N.style,T=N.compact,q=N.title,A=N.desc,O=Nk(N,gpe),V=St(O,!1);if(T)return pe.createElement(tk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(Hy,Vc({},V,{width:S,height:C,title:q,desc:A}),this.renderClipPath(),V4(_,this.renderMap)));if(this.props.accessibilityLayer){var G,L;V.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,V.role=(L=this.props.role)!==null&&L!==void 0?L:"application",V.onKeyDown=function(D){b.accessibilityManager.keyboardEvent(D)},V.onFocus=function(){b.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return pe.createElement(tk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",Vc({className:Mt("recharts-wrapper",w),style:We({position:"relative",cursor:"default",width:S,height:C},E)},Z,{ref:function(K){b.container=K}}),pe.createElement(Hy,Vc({},V,{width:S,height:C,title:q,desc:A,style:$pe}),this.renderClipPath(),V4(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);kt(v,"displayName",a),kt(v,"defaultProps",We({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),kt(v,"getDerivedStateFromProps",function(g,y){var f=g.dataKey,b=g.data,N=g.children,_=g.width,w=g.height,S=g.layout,C=g.stackOffset,E=g.margin,T=y.dataStartIndex,q=y.dataEndIndex;if(y.updateId===void 0){var A=Sk(g);return We(We(We({},A),{},{updateId:0},h(We(We({props:g},A),{},{updateId:0}),y)),{},{prevDataKey:f,prevData:b,prevWidth:_,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:E,prevChildren:N})}if(f!==y.prevDataKey||b!==y.prevData||_!==y.prevWidth||w!==y.prevHeight||S!==y.prevLayout||C!==y.prevStackOffset||!Zc(E,y.prevMargin)){var O=Sk(g),V={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},G=We(We({},_k(y,b,S)),{},{updateId:y.updateId+1}),L=We(We(We({},O),V),G);return We(We(We({},L),h(We({props:g},L),y)),{},{prevDataKey:f,prevData:b,prevWidth:_,prevHeight:w,prevLayout:S,prevStackOffset:C,prevMargin:E,prevChildren:N})}if(!Uy(N,y.prevChildren)){var Z,D,K,R,B=Ps(N,Md),F=B&&(Z=(D=B.props)===null||D===void 0?void 0:D.startIndex)!==null&&Z!==void 0?Z:T,I=B&&(K=(R=B.props)===null||R===void 0?void 0:R.endIndex)!==null&&K!==void 0?K:q,k=F!==T||I!==q,M=!Ft(b),z=M&&!k?y.updateId:y.updateId+1;return We(We({updateId:z},h(We(We({props:g},y),{},{updateId:z,dataStartIndex:F,dataEndIndex:I}),y)),{},{prevChildren:N,dataStartIndex:F,dataEndIndex:I})}return null}),kt(v,"renderActiveDot",function(g,y,f){var b;return j.isValidElement(g)?b=j.cloneElement(g,y):Et(g)?b=g(y):b=pe.createElement(n0,y),pe.createElement(Vt,{className:"recharts-active-dot",key:f},b)});var p=j.forwardRef(function(y,f){return pe.createElement(v,Vc({},y,{ref:f}))});return p.displayName=v.displayName,p},Xd=rb({chartName:"LineChart",GraphicalChild:as,axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Fr}],formatAxisMap:ON}),Bn=rb({chartName:"BarChart",GraphicalChild:Mr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Fr}],formatAxisMap:ON}),g1=rb({chartName:"PieChart",GraphicalChild:Tn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Kg},{axisType:"radiusAxis",AxisComp:Wg}],formatAxisMap:boe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Upe=rb({chartName:"AreaChart",GraphicalChild:Mo,axisComponents:[{axisType:"xAxis",AxisComp:zr},{axisType:"yAxis",AxisComp:Fr}],formatAxisMap:ON});const Wpe=({isOpen:t,onClose:r,onSuccess:a})=>{const[s,n]=j.useState(!1),[o,i]=j.useState(!1),[l,c]=j.useState({contas_pagar:[],contas_receber:[]}),[d,u]=j.useState({}),[m,x]=j.useState(new Set),[h,v]=j.useState("todos"),[p,g]=j.useState(!1),[y,f]=j.useState([]),[b,N]=j.useState({});j.useEffect(()=>{t&&(w(),_())},[t]);const _=async()=>{try{const D=await U.get("/dre/subcategorias");f(D.data)}catch(D){console.error("Erro ao carregar categorias DRE:",D)}},w=async()=>{n(!0);try{const D=await U.get("/dre/classificar/pendentes",{params:{limit:100}});c(D.data),await S(D.data),be.success(`${D.data.total_pendentes} lanamentos pendentes encontrados`)}catch(D){console.error("Erro ao carregar pendentes:",D),be.error("Erro ao carregar lanamentos pendentes")}finally{n(!1)}},S=async D=>{const K={};for(const R of D.contas_pagar)try{const B=await U.post("/dre/classificar/sugerir",{tipo:"pagar",lancamento_id:R.id});K[`pagar_${R.id}`]=B.data}catch(B){console.error(`Erro ao buscar sugestes para pagar #${R.id}:`,B),K[`pagar_${R.id}`]=[]}for(const R of D.contas_receber)try{const B=await U.post("/dre/classificar/sugerir",{tipo:"receber",lancamento_id:R.id});K[`receber_${R.id}`]=B.data}catch(B){console.error(`Erro ao buscar sugestes para receber #${R.id}:`,B),K[`receber_${R.id}`]=[]}u(K)},C=async(D,K,R)=>{i(!0);try{await U.post("/dre/classificar/aplicar",{tipo:D,lancamento_id:K,dre_subcategoria_id:R.dre_subcategoria_id,canal:null,regra_id:R.regra_id,forma_classificacao:"sugestao_aceita"}),x(B=>new Set([...B,`${D}_${K}`])),be.success(` Classificado: ${R.subcategoria_nome}`)}catch(B){console.error("Erro ao aplicar classificao:",B),be.error("Erro ao aplicar classificao")}finally{i(!1)}},E=async()=>{g(!0);try{const D=await U.post("/dre/classificar/auto-classificar-pendentes",null,{params:{apenas_alta_confianca:!0}});be.success(` Auto-classificao concluda!
${D.data.total_classificado} de ${D.data.total_processado} lanamentos classificados`,{duration:5e3}),await w(),a&&a()}catch(D){console.error("Erro ao auto-classificar:",D),be.error("Erro ao executar auto-classificao")}finally{g(!1)}},T=async(D,K,R)=>{if(!R){be.error("Selecione uma categoria DRE");return}i(!0);try{const B=y.find(F=>F.id===parseInt(R));await U.post("/dre/classificar/aplicar",{tipo:D,lancamento_id:K,dre_subcategoria_id:parseInt(R),canal:null,regra_id:null,forma_classificacao:"manual"}),x(F=>new Set([...F,`${D}_${K}`])),N(F=>{const I={...F};return delete I[`${D}_${K}`],I}),be.success(` Classificado manualmente: ${(B==null?void 0:B.nome)||"Categoria"}`)}catch(B){console.error("Erro ao aplicar classificao manual:",B),be.error("Erro ao aplicar classificao manual")}finally{i(!1)}},q=async(D,K)=>{i(!0);try{x(R=>new Set([...R,`${D}_${K}`])),be.success(' Marcado como "No Controla DRE" (Estoque/Produtos)')}catch(R){console.error("Erro ao marcar como no-DRE:",R),be.error("Erro ao processar")}finally{i(!1)}},A=async(D,K,R,B,F)=>{if(!R){be.error("Lanamento sem fornecedor/cliente vinculado");return}const I=B||F;if(!I){be.error("ID do fornecedor/cliente no encontrado");return}if(window.confirm(`Deseja marcar "${R}" como fornecedor de produtos (No Controla DRE)?

Todos os lanamentos deste fornecedor sero automaticamente ignorados no DRE.`)){i(!0);try{await U.patch(`/clientes/${I}/controla-dre?controla_dre=false`),x(k=>new Set([...k,`${D}_${K}`])),be.success(` Fornecedor "${R}" marcado como "No Controla DRE"

Todos os lanamentos futuros sero ignorados automaticamente.`,{duration:6e3}),setTimeout(()=>w(),1e3)}catch(k){console.error("Erro ao marcar fornecedor:",k),be.error("Erro ao marcar fornecedor como No DRE")}finally{i(!1)}}},O=D=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(D||0),V=D=>D?new Date(D).toLocaleDateString("pt-BR"):"-",G=D=>D>=90?"text-green-600 bg-green-100":D>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",Z=(h==="pagar"?l.contas_pagar.map(D=>({...D,tipo:"pagar"})):h==="receber"?l.contas_receber.map(D=>({...D,tipo:"receber"})):[...l.contas_pagar.map(D=>({...D,tipo:"pagar"})),...l.contas_receber.map(D=>({...D,tipo:"receber"}))]).filter(D=>!m.has(`${D.tipo}_${D.id}`));return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2",children:" Classificar Lanamentos Pendentes"}),e.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[Z.length," lanamentos aguardando classificao DRE"]})]}),e.jsx("button",{onClick:r,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:e.jsx(Oi,{size:24})})]}),e.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>v("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="todos"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" Todos (",l.contas_pagar.length+l.contas_receber.length,")"]}),e.jsxs("button",{onClick:()=>v("pagar"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="pagar"?"bg-red-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" A Pagar (",l.contas_pagar.length,")"]}),e.jsxs("button",{onClick:()=>v("receber"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="receber"?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[" A Receber (",l.contas_receber.length,")"]})]}),e.jsx("button",{onClick:E,disabled:p||Z.length===0,className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-2 rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:p?e.jsxs(e.Fragment,{children:[e.jsx(p4,{className:"animate-spin",size:20}),"Auto-Classificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(cm,{size:20}),"Auto-Classificar (Alta Confiana)"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(p4,{className:"animate-spin text-purple-600",size:48})}):Z.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(Pi,{size:64,className:"text-green-500 mb-4"}),e.jsx("p",{className:"text-xl font-semibold",children:"Nenhum lanamento pendente!"}),e.jsx("p",{className:"text-sm mt-2",children:"Todos os lanamentos foram classificados."})]}):e.jsx("div",{className:"space-y-4",children:Z.map(D=>{const K=`${D.tipo}_${D.id}`,R=d[K]||[];return R[0],e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${D.tipo==="pagar"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:D.tipo==="pagar"?" A Pagar":" A Receber"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",D.id]})]}),e.jsx("h3",{className:"font-semibold text-gray-800 text-lg mb-1",children:D.descricao}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[D.beneficiario&&e.jsxs("span",{className:"flex items-center gap-1",children:[" ",D.beneficiario]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rs,{size:14}),O(D.valor)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Cn,{size:14}),V(D.data_vencimento)]}),D.tipo_documento&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:D.tipo_documento})]})]})}),R.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(pr,{className:"text-yellow-600",size:20}),e.jsx("span",{className:"text-sm text-yellow-700 font-semibold",children:"Nenhuma sugesto automtica. Classifique manualmente."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:b[K]||"",onChange:B=>N(F=>({...F,[K]:B.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"",children:"Selecione uma categoria DRE..."}),y.map(B=>e.jsxs("option",{value:B.id,children:[B.categoria_nome,"  ",B.nome]},B.id))]}),e.jsxs("button",{onClick:()=>T(D.tipo,D.id,b[K]),disabled:o||!b[K],className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:[e.jsx(Vm,{size:18}),"Classificar"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>q(D.tipo,D.id),disabled:o,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Marca apenas ESTE lanamento como No DRE",children:" Este Lanamento"}),D.beneficiario&&e.jsxs("button",{onClick:()=>A(D.tipo,D.id,D.beneficiario,D.fornecedor_id,D.cliente_id),disabled:o,className:"flex-1 flex items-center justify-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`Marca TODOS os lanamentos de ${D.beneficiario} como No DRE`,children:[' Todo Fornecedor "',D.beneficiario,'"']})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:" Sugestes de Classificao:"}),R.slice(0,3).map((B,F)=>e.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg border-2 ${F===0?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:B.subcategoria_nome}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${G(B.confianca)}`,children:[B.confianca,"% confiana"]}),F===0&&e.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white rounded-full text-xs font-bold",children:" Melhor"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:B.motivo}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Regra: ",B.regra_nome]})]}),e.jsxs("button",{onClick:()=>C(D.tipo,D.id,B),disabled:o,className:"ml-4 flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Vm,{size:18}),"Aceitar"]})]},F))]})]},K)})})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center rounded-b-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:m.size})," classificados nesta sesso"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m.size>0&&a&&a(),r()},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Fechar"}),m.size>0&&e.jsx("button",{onClick:w,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Atualizar Lista"})]})]})]})}):null},kk=()=>{const t=Ht(),[r,a]=j.useState(!0),[s,n]=j.useState(30),[o,i]=j.useState(!1),[l,c]=j.useState({saldo_atual:0,contas_receber:{total:0,vencidas:0},contas_pagar:{total:0,vencidas:0},vendas_periodo:{quantidade:0,valor_total:0,finalizadas:0,ticket_medio:0},fluxo_periodo:{entradas:0,saidas:0,lucro:0}}),[d,u]=j.useState([]),[m,x]=j.useState({contas_receber:[],contas_pagar:[]}),h=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f||0),v=f=>new Date(f).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),p=async()=>{a(!0);try{const f=await U.get(`/dashboard/resumo?periodo_dias=${s}`);c(f.data)}catch(f){console.error("Erro ao carregar resumo:",f)}try{const f=await U.get(`/dashboard/entradas-saidas?periodo_dias=${s}`);u(f.data)}catch(f){console.error("Erro ao carregar entradas/sadas:",f)}try{const f=await U.get("/dashboard/contas-vencidas?limite=5");x(f.data)}catch(f){console.error("Erro ao carregar contas vencidas:",f)}a(!1)};if(j.useEffect(()=>{p()},[s]),r)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"})});const g=[{nome:"Loja Fsica",valor:l.vendas_periodo.valor_total||0,margem:35.5,lucro:(l.vendas_periodo.valor_total||0)*.355,icon:_9,color:"blue",isMock:!1,onClick:()=>t("/financeiro/relatorio-vendas")},{nome:"Mercado Livre",valor:8450,margem:18.2,lucro:1537.9,icon:Ms,color:"yellow",isMock:!0,onClick:()=>be("Integrao com Mercado Livre em breve",{icon:""})},{nome:"Shopee",valor:5230,margem:22.5,lucro:1176.75,icon:xh,color:"orange",isMock:!0,onClick:()=>be("Integrao com Shopee em breve",{icon:""})},{nome:"Amazon",valor:12890,margem:15.8,lucro:2036.62,icon:Ms,color:"purple",isMock:!0,onClick:()=>be("Integrao com Amazon em breve",{icon:""})}],y=f=>{const b={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",red:"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",yellow:"from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"};return b[f]||b.blue};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Gerencial"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Viso consolidada do seu negcio"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-5 py-2.5 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("span",{className:"text-xl",children:""}),"Classificar DRE"]}),e.jsx("div",{className:"flex gap-2",children:[7,15,30,60,90].map(f=>e.jsxs("button",{onClick:()=>n(f),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s===f?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:[f," dias"]},f))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{onClick:()=>t("/financeiro/fluxo-caixa"),className:`bg-gradient-to-br ${y("blue")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(ha,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:"Atual"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.saldo_atual)}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver fluxo de caixa"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/contas-receber"),className:`bg-gradient-to-br ${y("green")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(aa,{className:"w-6 h-6"})}),l.contas_receber.vencidas>0&&e.jsx(Lt,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Receber"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.contas_receber.total)}),l.contas_receber.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:[" Vencidas: ",h(l.contas_receber.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/contas-pagar"),className:`bg-gradient-to-br ${y("red")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(Sa,{className:"w-6 h-6"})}),l.contas_pagar.vencidas>0&&e.jsx(Lt,{className:"w-5 h-5 text-yellow-300"})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"A Pagar"}),e.jsx("p",{className:"text-2xl font-bold",children:h(l.contas_pagar.total)}),l.contas_pagar.vencidas>0?e.jsxs("p",{className:"text-xs mt-2 opacity-90",children:[" Vencidas: ",h(l.contas_pagar.vencidas)]}):e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para gerenciar"})]}),e.jsxs("div",{onClick:()=>t("/financeiro/dre"),className:`bg-gradient-to-br ${l.fluxo_periodo.lucro>=0?y("purple"):y("orange")} rounded-xl p-6 text-white shadow-lg cursor-pointer transition-all transform hover:scale-105`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(bs,{className:"w-6 h-6"})}),e.jsxs("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded",children:[s," dias"]})]}),e.jsx("p",{className:"text-sm opacity-90 mb-1",children:l.fluxo_periodo.lucro>=0?"Lucro":"Prejuzo"}),e.jsx("p",{className:"text-2xl font-bold",children:h(Math.abs(l.fluxo_periodo.lucro))}),e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Clique para ver DRE completo"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Vendas por Canal"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance de cada canal de vendas"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-medium",children:"Marketplaces em preparao"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map((f,b)=>e.jsxs("div",{onClick:f.onClick,className:"bg-gray-50 rounded-lg p-5 border border-gray-200 hover:shadow-md transition-all cursor-pointer transform hover:scale-105 relative",children:[f.isMock&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded",children:"Mock"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${y(f.color)} p-3 rounded-lg`,children:e.jsx(f.icon,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:f.nome})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Valor Vendido"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:h(f.valor)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Margem"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[f.margem,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Lucro Est."}),e.jsx("p",{className:"text-sm font-semibold text-green-600",children:h(f.lucro)})]})]})]})]},b))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Total consolidado:"})," ",h(g.reduce((f,b)=>f+b.valor,0))," "," | ",e.jsx("strong",{children:"Lucro total:"})," ",h(g.reduce((f,b)=>f+b.lucro,0))]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:e.jsx(jo,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Insights Inteligentes"}),e.jsx("p",{className:"text-sm opacity-90",children:"Alertas e sugestes automticas"})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 text-center",children:[e.jsx(jo,{className:"w-12 h-12 mx-auto mb-3 opacity-75"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Em breve a IA mostrar aqui:"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm opacity-90",children:[e.jsx("p",{children:" Problemas urgentes detectados"}),e.jsx("p",{children:" Oportunidades de lucro identificadas"}),e.jsx("p",{children:" Aes recomendadas para hoje"})]}),e.jsx("p",{className:"text-xs mt-4 opacity-75",children:"Sem mgica. Apenas anlise inteligente dos seus dados reais."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>t("/pdv"),className:"bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(xh,{className:"w-5 h-5"}),"Nova Venda"]}),e.jsxs("button",{onClick:()=>t("/financeiro/contas-receber"),className:"bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(aa,{className:"w-5 h-5"}),"Registrar Recebimento"]}),e.jsxs("button",{onClick:()=>t("/financeiro/contas-pagar"),className:"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(Sa,{className:"w-5 h-5"}),"Registrar Despesa"]}),e.jsxs("button",{onClick:()=>t("/ia/fluxo-caixa"),className:"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-3",children:[e.jsx(jo,{className:"w-5 h-5"}),"Revises IA"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg mb-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:["Fluxo Financeiro (",s," dias)"]}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Xd,{data:d,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tickFormatter:v,style:{fontSize:"12px"}}),e.jsx(Fr,{tickFormatter:f=>`R$ ${(f/1e3).toFixed(0)}k`,style:{fontSize:"12px"}}),e.jsx(or,{formatter:f=>h(f),labelFormatter:v}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"entradas",stroke:"#10B981",strokeWidth:2,name:"Entradas"}),e.jsx(as,{type:"monotone",dataKey:"saidas",stroke:"#EF4444",strokeWidth:2,name:"Sadas"})]})})]}),(m.contas_receber.length>0||m.contas_pagar.length>0)&&e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-500"}),"Ateno: Contas Vencidas"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[m.contas_receber.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Receber (",m.contas_receber.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_receber.slice(0,3).map(f=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:f.cliente||"Sem cliente"}),e.jsx("p",{className:"font-bold text-red-600 text-sm",children:h(f.saldo)})]}),e.jsxs("p",{className:"text-xs text-red-600",children:["Venceu h ",f.dias_vencido," dias"]})]},f.id))})]}),m.contas_pagar.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["A Pagar (",m.contas_pagar.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.contas_pagar.slice(0,3).map(f=>e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:f.fornecedor||"Sem fornecedor"}),e.jsx("p",{className:"font-bold text-orange-600 text-sm",children:h(f.saldo)})]}),e.jsxs("p",{className:"text-xs text-orange-600",children:["Venceu h ",f.dias_vencido," dias"]})]},f.id))})]})]})]}),e.jsx(Wpe,{isOpen:o,onClose:()=>i(!1)})]})},bc=[{value:"banco",label:"Banco",icon:BA,cor_padrao:"#dc2626"},{value:"caixa",label:"Caixa Fsico",icon:jd,cor_padrao:"#16a34a"},{value:"digital",label:"Carteira Digital",icon:vd,cor_padrao:"#2563eb"}],Hpe=["","","","","","","","","","","","","","","","","","","","","","","",""];function Kpe(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(""),[u,m]=j.useState({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:"#dc2626",icone:"",instituicao_bancaria:!1,ativa:!0});j.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const g=await U.get("/contas-bancarias");r(g.data)}catch(g){console.error("Erro:",g),d("Erro ao carregar contas bancrias")}finally{s(!1)}},h=(g=null)=>{if(g)m({nome:g.nome,tipo:g.tipo,banco:g.banco||"",saldo_inicial:g.saldo_inicial,cor:g.cor||"#dc2626",icone:g.icone||"",instituicao_bancaria:g.instituicao_bancaria||!1,ativa:g.ativa}),l(g);else{const y=bc[0];m({nome:"",tipo:"banco",banco:"",saldo_inicial:0,cor:y.cor_padrao,icone:"",instituicao_bancaria:!1,ativa:!0}),l(null)}o(!0),d("")},v=async g=>{var y,f,b;g.preventDefault();try{const N={nome:u.nome.trim(),tipo:u.tipo,banco:((y=u.banco)==null?void 0:y.trim())||null,saldo_inicial:Number(u.saldo_inicial)||0,cor:u.cor,icone:u.icone||"",instituicao_bancaria:!!u.instituicao_bancaria,ativa:!!u.ativa};console.log("Enviando dados:",N),i?await U.put(`/contas-bancarias/${i.id}`,N):await U.post("/contas-bancarias",N),await x(),o(!1),d("")}catch(N){console.error("Erro completo:",N),console.error("Response:",N.response),d(((b=(f=N.response)==null?void 0:f.data)==null?void 0:b.detail)||N.message||"Erro ao salvar conta")}},p=async g=>{var y,f;if(confirm("Deseja realmente excluir esta conta?"))try{await U.delete(`/contas-bancarias/${g}`),await x()}catch(b){console.error("Erro:",b),d(((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao excluir conta")}};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastro de Bancos"}),e.jsx("p",{className:"text-gray-600",children:"Configure as contas bancrias, caixas e carteiras digitais do sistema"})]}),e.jsxs("button",{onClick:()=>h(),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Nova Conta"]})]})}),c&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800",children:c})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(g=>{var f,b,N;const y=((f=bc.find(_=>_.value===g.tipo))==null?void 0:f.icon)||BA;return e.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition ${g.ativa?"border-gray-200 hover:border-blue-300":"border-gray-100 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:`${g.cor}20`},children:g.icone}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:g.nome}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),(b=bc.find(_=>_.value===g.tipo))==null?void 0:b.label]})]})]}),!g.ativa&&e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Inativa"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tipo de Conta"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:(N=bc.find(_=>_.value===g.tipo))==null?void 0:N.label}),g.banco&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:g.banco})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(g),className:"flex items-center justify-center bg-gray-100 text-gray-700 p-2 rounded-lg hover:bg-gray-200 transition",children:e.jsx(T2,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(g.id),className:"flex items-center justify-center bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-100 transition",children:e.jsx(Fo,{className:"w-4 h-4"})})]})]},g.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Nenhuma conta cadastrada"}),e.jsx("button",{onClick:()=>h(),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Cadastrar primeira conta"})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:i?"Editar Conta":"Nova Conta"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-800 text-sm",children:c}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:u.nome,onChange:g=>m({...u,nome:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsx("select",{value:u.tipo,onChange:g=>{const y=bc.find(f=>f.value===g.target.value);m({...u,tipo:g.target.value,cor:(y==null?void 0:y.cor_padrao)||u.cor})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:bc.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),u.tipo==="banco"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Banco"}),e.jsx("input",{type:"text",value:u.banco,onChange:g=>m({...u,banco:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Santander, Bradesco..."})]}),!i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:u.saldo_inicial,onChange:g=>m({...u,saldo_inicial:parseFloat(g.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:u.cor,onChange:g=>m({...u,cor:g.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone Atual"}),e.jsx("div",{className:"w-full h-10 border border-gray-300 rounded-lg flex items-center justify-center text-2xl bg-white",style:{backgroundColor:`${u.cor}10`},children:u.icone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escolher cone"}),e.jsx("div",{className:"grid grid-cols-8 gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 max-h-32 overflow-y-auto",children:Hpe.map((g,y)=>e.jsx("button",{type:"button",onClick:()=>m({...u,icone:g}),className:`w-10 h-10 rounded-lg flex items-center justify-center text-xl transition hover:scale-110 ${u.icone===g?"bg-blue-100 border-2 border-blue-500 ring-2 ring-blue-200":"bg-white border border-gray-200 hover:border-blue-300"}`,children:g},y))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"instituicao_bancaria",checked:u.instituicao_bancaria,onChange:g=>m({...u,instituicao_bancaria:g.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"instituicao_bancaria",className:"text-sm text-gray-700",children:" Instituio Bancria (para conciliao OFX)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativa",checked:u.ativa,onChange:g=>m({...u,ativa:g.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"ativa",className:"text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:[e.jsx(Ym,{className:"w-4 h-4"}),"Salvar"]})]})]})]})})]})}const Gpe=({isOpen:t,onClose:r,onSave:a})=>{const[s,n]=j.useState(!1),[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState([]),[m,x]=j.useState([]),[h,v]=j.useState(30),[p,g]=j.useState(!1),[y,f]=j.useState({nome:"",tipo:"despesa",cor:"#ef4444",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),[b,N]=j.useState({descricao:"",fornecedor_id:null,categoria_id:null,dre_subcategoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null});j.useEffect(()=>{t&&_()},[t]);const _=async()=>{var L;try{const[Z,D,K]=await Promise.all([U.get("/clientes/?tipo_cadastro=fornecedor"),U.get("/categorias-financeiras/"),U.get("/dre/subcategorias")]);console.log(" Categorias recebidas:",D.data),i(Z.data);const R=D.data.filter(B=>{const F=B.tipo?B.tipo.toLowerCase():"",I=B.nome?B.nome.toLowerCase():"",k=F==="receita"||F==="entrada",M=I.includes("receita")||I.includes("venda");return!k&&!M});c(R),u(K.data||[]),console.log(" Categorias de DESPESA setadas:",R.length),console.log(" Lista completa:",R),console.log(" Subcategorias DRE carregadas:",(L=K.data)==null?void 0:L.length)}catch(Z){console.error(" Erro ao carregar dados:",Z),be.error("Erro ao carregar formulrio")}},w=()=>{if(!b.eh_parcelado||!b.total_parcelas||!b.data_vencimento||!b.valor_original){x([]);return}const L=parseFloat(b.valor_original),Z=parseInt(b.total_parcelas),D=L/Z,K=[];let R=new Date(b.data_vencimento);for(let I=0;I<Z;I++){const k=new Date(R);k.setDate(R.getDate()+I*h),K.push({numero:I+1,valor:I===Z-1?L-D*(Z-1):D,data_vencimento:k.toISOString().split("T")[0]})}const B=K.reduce((I,k)=>I+k.valor,0),F=L-B;Math.abs(F)>.01&&(K[K.length-1].valor+=F),x(K)},S=()=>{f({...y,novasSubcategorias:[...y.novasSubcategorias,{nome:"",descricao:"",ativo:!0}]})},C=(L,Z,D)=>{const K=[...y.novasSubcategorias];K[L][Z]=D,f({...y,novasSubcategorias:K})},E=L=>{const Z=y.novasSubcategorias.filter((D,K)=>K!==L);f({...y,novasSubcategorias:Z})},T=(L,Z)=>{L.key==="Tab"&&!L.shiftKey&&Z===y.novasSubcategorias.length-1&&(L.preventDefault(),S())},q=async L=>{var Z,D;if(L.preventDefault(),!y.nome){be.error("Preencha o nome da categoria");return}try{const R=(await U.post("/categorias-financeiras/",{nome:y.nome,tipo:y.tipo,cor:y.cor,icone:y.icone,descricao:y.descricao,ativo:y.ativo})).data.id;if(be.success("Categoria criada com sucesso!"),y.novasSubcategorias.length>0){const B=y.novasSubcategorias.filter(F=>F.nome.trim());for(const F of B)try{await U.post("/subcategorias/",{categoria_id:R,nome:F.nome,descricao:F.descricao,ativo:F.ativo})}catch(I){console.error("Erro ao criar subcategoria:",I)}B.length>0&&be.success(`${B.length} subcategoria(s) criada(s)!`)}await _(),N({...b,categoria_id:R}),g(!1),f({nome:"",tipo:"despesa",cor:"#ef4444",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]})}catch(K){console.error("Erro ao salvar categoria:",K),be.error(((D=(Z=K.response)==null?void 0:Z.data)==null?void 0:D.detail)||"Erro ao salvar categoria")}},A=(L,Z)=>{const D=[...m];D[L].data_vencimento=Z,x(D)},O=(L,Z)=>{const D=[...m];D[L].valor=parseFloat(Z)||0,x(D)},V=async L=>{var Z,D;if(L.preventDefault(),!b.descricao||!b.valor_original||!b.data_vencimento){be.error("Preencha todos os campos obrigatrios");return}n(!0);try{await U.post("/contas-pagar/",{...b,valor_original:parseFloat(b.valor_original),total_parcelas:b.eh_parcelado?parseInt(b.total_parcelas):1,intervalo_dias:b.tipo_recorrencia==="personalizado"?parseInt(b.intervalo_dias):null,numero_repeticoes:b.numero_repeticoes?parseInt(b.numero_repeticoes):null}),be.success(b.eh_recorrente?"Conta recorrente criada com sucesso!":"Conta criada com sucesso!"),a(),r(),G()}catch(K){console.error("Erro ao criar conta:",K),be.error(((D=(Z=K.response)==null?void 0:Z.data)==null?void 0:D.detail)||"Erro ao criar conta a pagar")}finally{n(!1)}},G=()=>{N({descricao:"",fornecedor_id:null,categoria_id:null,valor_original:"",data_emissao:new Date().toISOString().split("T")[0],data_vencimento:new Date().toISOString().split("T")[0],documento:"",observacoes:"",eh_parcelado:!1,total_parcelas:1,eh_recorrente:!1,tipo_recorrencia:"mensal",intervalo_dias:null,data_inicio_recorrencia:null,data_fim_recorrencia:null,numero_repeticoes:null})};return t?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full m-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b sticky top-0 bg-white",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Nn,{className:"text-red-600"}),"Nova Conta a Pagar"]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(qt,{size:24})})]}),e.jsxs("form",{onSubmit:V,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(bs,{size:20,className:"text-blue-600"}),"Informaes Bsicas"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio *"}),e.jsx("input",{type:"text",value:b.descricao,onChange:L=>N({...b,descricao:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Aluguel, Conta de luz, Fornecedor XYZ...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(hh,{size:16,className:"inline mr-1"}),"Fornecedor"]}),e.jsxs("select",{value:b.fornecedor_id||"",onChange:L=>N({...b,fornecedor_id:L.target.value?parseInt(L.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),o.map(L=>e.jsx("option",{value:L.id,children:L.nome},L.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(S9,{size:16,className:"inline mr-1"}),"Categoria"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:b.categoria_id||"",onChange:L=>N({...b,categoria_id:L.target.value?parseInt(L.target.value):null}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),l.map(L=>e.jsx("option",{value:L.id,children:L.nome},L.id))]}),e.jsxs("button",{type:"button",onClick:()=>g(!0),className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1 whitespace-nowrap",title:"Adicionar nova categoria",children:[e.jsx(Nn,{size:16})," Adicionar"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Subcategoria DRE (Demonstrativo de Resultado)"}),e.jsxs("select",{value:b.dre_subcategoria_id||"",onChange:L=>N({...b,dre_subcategoria_id:L.target.value?parseInt(L.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sem classificao DRE"}),d.map(L=>e.jsx("option",{value:L.id,children:L.nome},L.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Classifique para melhor anlise gerencial"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(ha,{size:16,className:"inline mr-1"}),"Valor *"]}),e.jsx("input",{type:"number",step:"0.01",value:b.valor_original,onChange:L=>N({...b,valor_original:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(zi,{size:16,className:"inline mr-1"}),"Data Vencimento *"]}),e.jsx("input",{type:"date",value:b.data_vencimento,onChange:L=>N({...b,data_vencimento:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Documento/NF"}),e.jsx("input",{type:"text",value:b.documento,onChange:L=>N({...b,documento:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"Nmero do documento"})]})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_recorrente",checked:b.eh_recorrente,onChange:L=>N({...b,eh_recorrente:L.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("label",{htmlFor:"eh_recorrente",className:"text-lg font-semibold text-gray-700 flex items-center gap-2 cursor-pointer",children:[e.jsx(w9,{size:20,className:"text-purple-600"}),"Despesa Recorrente"]})]}),b.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recorrncia *"}),e.jsxs("select",{value:b.tipo_recorrencia,onChange:L=>N({...b,tipo_recorrencia:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"semanal",children:" Semanal (7 em 7 dias)"}),e.jsx("option",{value:"quinzenal",children:" Quinzenal (15 em 15 dias)"}),e.jsx("option",{value:"mensal",children:" Mensal"}),e.jsx("option",{value:"personalizado",children:" Personalizado"})]})]}),b.tipo_recorrencia==="personalizado"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (em dias) *"}),e.jsx("input",{type:"number",min:"1",value:b.intervalo_dias||"",onChange:L=>N({...b,intervalo_dias:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 10, 20, 45...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Repeties"}),e.jsx("input",{type:"number",min:"1",value:b.numero_repeticoes||"",onChange:L=>N({...b,numero_repeticoes:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500",placeholder:"Ex: 12 (deixe vazio para infinito)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantas vezes deve se repetir (opcional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Trmino (alternativa)"}),e.jsx("input",{type:"date",value:b.data_fim_recorrencia||"",onChange:L=>N({...b,data_fim_recorrencia:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"At quando deve repetir (opcional)"})]})]}),e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Como funciona:"})," Esta conta ser criada agora e o sistema ir gerar automaticamente novas contas nos prximos perodos conforme a recorrncia configurada."]})})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"eh_parcelado",checked:b.eh_parcelado,onChange:L=>{N({...b,eh_parcelado:L.target.checked}),L.target.checked||x([])},disabled:b.eh_recorrente,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),e.jsx("label",{htmlFor:"eh_parcelado",className:"text-lg font-semibold text-gray-700 cursor-pointer",children:" Parcelar esta conta"})]}),b.eh_parcelado&&!b.eh_recorrente&&e.jsxs("div",{className:"ml-6 space-y-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Parcelas *"}),e.jsx("input",{type:"number",min:"2",max:"120",value:b.total_parcelas,onChange:L=>N({...b,total_parcelas:L.target.value}),onBlur:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intervalo (dias)"}),e.jsxs("select",{value:h,onChange:L=>{v(parseInt(L.target.value)),setTimeout(w,100)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7",children:"7 dias (semanal)"}),e.jsx("option",{value:"14",children:"14 dias (quinzenal)"}),e.jsx("option",{value:"15",children:"15 dias"}),e.jsx("option",{value:"21",children:"21 dias"}),e.jsx("option",{value:"30",children:"30 dias (mensal)"}),e.jsx("option",{value:"60",children:"60 dias (bimestral)"}),e.jsx("option",{value:"90",children:"90 dias (trimestral)"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:w,className:"mt-6 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:" Gerar Preview"})})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:" Preview das Parcelas"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:m.map((L,Z)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded border",children:[e.jsxs("span",{className:"font-semibold text-gray-600 min-w-[80px]",children:["Parcela ",L.numero,"/",m.length]}),e.jsx("input",{type:"number",step:"0.01",value:L.valor,onChange:D=>O(Z,D.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"}),e.jsx("input",{type:"date",value:L.data_vencimento,onChange:D=>A(Z,D.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"})]},Z))}),e.jsx("div",{className:"mt-3 p-2 bg-gray-100 rounded",children:e.jsxs("strong",{children:["Total: R$ ",m.reduce((L,Z)=>L+Z.valor,0).toFixed(2)]})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:b.observacoes,onChange:L=>N({...b,observacoes:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Informaes adicionais..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{r(),G()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:s?"Salvando...":"Salvar Conta"})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Nova Categoria Financeira"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(qt,{size:24})})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Categoria *"}),e.jsx("input",{type:"text",value:y.nome,onChange:L=>f({...y,nome:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Ex: Fornecedores, Aluguel, Salrios..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone"}),e.jsx("select",{value:y.icone,onChange:L=>f({...y,icone:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:["","","","","","","","","","","",""].map(L=>e.jsx("option",{value:L,children:L},L))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsx("input",{type:"color",value:y.cor,onChange:L=>f({...y,cor:L.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:y.descricao,onChange:L=>f({...y,descricao:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"2"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategorias DRE (opcional)"}),e.jsxs("button",{type:"button",onClick:S,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(Nn,{size:14})," Adicionar"]})]}),y.novasSubcategorias.length>0&&e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:y.novasSubcategorias.map((L,Z)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("input",{type:"text",value:L.nome,onChange:D=>C(Z,"nome",D.target.value),onKeyDown:D=>T(D,Z),placeholder:"Nome (Tab para adicionar mais)",className:"flex-1 px-2 py-1 border border-gray-300 rounded-md text-sm"}),e.jsx("button",{type:"button",onClick:()=>E(Z),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx(qt,{size:16})})]},Z))}),y.novasSubcategorias.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aperte Tab no ltimo campo para adicionar mais subcategorias"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Criar Categoria"})]})]})]})})]}):null},gr=t=>Array.isArray(t)?t:[],Xpe=()=>{var I;const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({status:"todos",fornecedor_id:null,data_inicio:"",data_fim:"",apenas_vencidas:!1,apenas_vencer:!1,numero_nf:""}),[l,c]=j.useState([]),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,v]=j.useState(!1),[p,g]=j.useState(!1),[y,f]=j.useState([]),[b,N]=j.useState([]),[_,w]=j.useState(!1),[S,C]=j.useState({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),[E,T]=j.useState({valor_pago:0,data_pagamento:new Date().toISOString().split("T")[0],forma_pagamento_id:"",conta_bancaria_id:"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""});j.useEffect(()=>{q()},[]);const q=async()=>{try{const[k,M,z,oe]=await Promise.all([U.get(`/contas-pagar/?_t=${Date.now()}`),U.get("/clientes/?tipo_cadastro=fornecedor"),U.get("/financeiro/formas-pagamento/"),U.get("/contas-bancarias?apenas_ativas=true")]);a(gr(k.data)),c(gr(M.data)),f(gr(z.data)),N(gr(oe.data))}catch(k){console.error("Erro ao carregar dados:",k),be.error("Erro ao carregar contas a pagar")}finally{n(!1)}},A=async()=>{try{n(!0);const k=new URLSearchParams;o.status!=="todos"&&k.append("status",o.status),o.fornecedor_id&&k.append("fornecedor_id",o.fornecedor_id),o.data_inicio&&k.append("data_inicio",o.data_inicio),o.data_fim&&k.append("data_fim",o.data_fim),o.apenas_vencidas&&k.append("apenas_vencidas","true"),o.apenas_vencer&&k.append("apenas_vencer","true"),o.numero_nf&&k.append("numero_nf",o.numero_nf);const M=await U.get(`/contas-pagar/?${k}`);a(M.data)}catch(k){console.error("Erro ao filtrar:",k),be.error("Erro ao aplicar filtros")}finally{n(!1)}},O=k=>{u(k);const M=y.find(z=>z.id===k.forma_pagamento_id);T({valor_pago:k.valor_final-k.valor_pago,forma_pagamento_id:k.forma_pagamento_id||"",conta_bancaria_id:(M==null?void 0:M.conta_bancaria_destino_id)||"",valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""}),x(!0)},V=k=>{u(k),g(!0)},G=k=>{k.nota_entrada_id?t(`/compras?nota_id=${k.nota_entrada_id}`):k.nfe_numero?t(`/compras?numero=${k.nfe_numero}`):be.error("Nota fiscal no encontrada")},L=k=>{const M=new URLSearchParams;k.fornecedor_nome&&M.append("busca",k.fornecedor_nome),k.documento&&M.append("documento",k.documento),t(`/financeiro/fluxo-caixa?${M.toString()}`),be.success("Redirecionando para o Fluxo de Caixa...")},Z=k=>{const M=y.find(z=>z.id===parseInt(k));T({...E,forma_pagamento_id:parseInt(k)||"",conta_bancaria_id:(M==null?void 0:M.conta_bancaria_destino_id)||E.conta_bancaria_id||""})},D=async()=>{try{await U.post("/financeiro/formas-pagamento",{...S,taxa_percentual:0,taxa_fixa:0,prazo_dias:0,ativo:!0,permite_parcelamento:!1,parcelas_maximas:1}),be.success("Forma de pagamento criada!"),w(!1),C({nome:"",tipo:"dinheiro",conta_bancaria_destino_id:null}),q()}catch(k){console.error("Erro:",k),be.error("Erro ao criar forma de pagamento")}},K=async()=>{var k,M;try{await U.post(`/contas-pagar/${d.id}/pagar`,E),be.success("Pagamento registrado com sucesso!"),x(!1),q()}catch(z){console.error("Erro ao registrar pagamento:",z),be.error(((M=(k=z.response)==null?void 0:k.data)==null?void 0:M.detail)||"Erro ao registrar pagamento")}},R=k=>{if(!k)return"-";const M=k.split("T")[0].split("-");return new Date(parseInt(M[0]),parseInt(M[1])-1,parseInt(M[2])).toLocaleDateString("pt-BR")},B=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k),F=k=>{const M=new Date,z=new Date(k.data_vencimento);return k.status==="pago"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:" Pago"}):z<M?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800",children:" Vencida"}):k.status==="parcial"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:" Parcial"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:" Pendente"})};return s?e.jsx("div",{className:"text-center p-8",children:"Carregando contas a pagar..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Contas a Pagar"}),e.jsx("button",{onClick:()=>v(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:" Nova Conta"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4",children:" Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.status,onChange:k=>i({...o,status:k.target.value}),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"parcial",children:"Parcial"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"vencido",children:"Vencido"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fornecedor"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.fornecedor_id||"",onChange:k=>i({...o,fornecedor_id:k.target.value||null}),children:[e.jsx("option",{value:"",children:"Todos"}),gr(l).map(k=>e.jsx("option",{value:k.id,children:k.nome},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nmero NF"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Ex: 12345",value:o.numero_nf,onChange:k=>i({...o,numero_nf:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_inicio,onChange:k=>i({...o,data_inicio:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_fim,onChange:k=>i({...o,data_fim:k.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencidas,onChange:k=>i({...o,apenas_vencidas:k.target.checked,apenas_vencer:!1})}),e.jsx("span",{className:"text-sm",children:"S Vencidas"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencer,onChange:k=>i({...o,apenas_vencer:k.target.checked,apenas_vencidas:!1})}),e.jsx("span",{className:"text-sm",children:"A Vencer"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",onClick:A,children:"Filtrar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Fornecedor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Original"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Pago"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma conta encontrada"})}):gr(r).map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:k.id}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[k.descricao,k.eh_parcelado&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:[k.numero_parcela,"/",k.total_parcelas]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:k.fornecedor_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:R(k.data_vencimento)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(k.valor_original)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(k.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold",children:B(k.valor_final-k.valor_pago)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:F(k)}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[k.status!=="pago"&&e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>O(k),title:"Registrar Pagamento",children:" Pagar"}),e.jsx("button",{className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs",onClick:()=>V(k),title:"Ver Detalhes",children:""})]})]},k.id))})]})}),r.length>0&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 px-4 py-3",children:[e.jsx("strong",{children:"Total:"})," ",r.length," conta(s) |",e.jsx("strong",{className:"ml-3",children:"Saldo a Pagar:"})," ",B(r.reduce((k,M)=>k+(M.valor_final-M.valor_pago),0))]})]}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[e.jsx("h5",{className:"text-xl font-bold",children:" Registrar Pagamento"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>x(!1),children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Conta:"})," ",d.descricao,e.jsx("br",{}),e.jsx("strong",{children:"Valor Total:"})," ",B(d.valor_final),e.jsx("br",{}),e.jsx("strong",{children:"J Pago:"})," ",B(d.valor_pago),e.jsx("br",{}),e.jsx("strong",{children:"Saldo Restante:"})," ",B(d.valor_final-d.valor_pago)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor a Pagar *"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_pago,onChange:k=>T({...E,valor_pago:parseFloat(k.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data do Pagamento *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:E.data_pagamento,onChange:k=>T({...E,data_pagamento:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"flex-1 border border-gray-300 rounded px-3 py-2",value:E.forma_pagamento_id||"",onChange:k=>Z(k.target.value),children:[e.jsx("option",{value:"",children:"Selecione..."}),gr(y).map(k=>e.jsxs("option",{value:k.id,children:[k.icone||""," ",k.nome]},k.id))]}),e.jsx("button",{type:"button",className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>w(!0),title:"Adicionar nova forma de pagamento",children:"+"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Conta Bancria *",E.forma_pagamento_id&&((I=y.find(k=>k.id===E.forma_pagamento_id))==null?void 0:I.conta_bancaria_destino_id)&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Padro da forma selecionada)"})]}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:E.conta_bancaria_id||"",onChange:k=>T({...E,conta_bancaria_id:parseInt(k.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione a conta..."}),gr(b).map(k=>e.jsxs("option",{value:k.id,children:[k.nome," - ",B(k.saldo_atual||0)]},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Juros"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_juros,onChange:k=>T({...E,valor_juros:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Multa"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_multa,onChange:k=>T({...E,valor_multa:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Desconto"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_desconto,onChange:k=>T({...E,valor_desconto:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2",rows:"3",value:E.observacoes,onChange:k=>T({...E,observacoes:k.target.value})})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 mt-4",children:[e.jsx("strong",{children:"Valor Final do Pagamento:"})," ",B((E.valor_pago||0)+(E.valor_juros||0)+(E.valor_multa||0)-(E.valor_desconto||0))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>x(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:K,children:" Confirmar Pagamento"})]})]})}),p&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Detalhes da Conta"}),e.jsx("button",{onClick:()=>g(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Parcela"}),e.jsx("p",{className:"mt-1 text-lg",children:d.numero_parcela&&d.total_parcelas?`${d.numero_parcela}/${d.total_parcelas}`:d.documento||"nica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fornecedor"}),e.jsx("p",{className:"mt-1 text-lg",children:d.fornecedor_nome||"N/A"})]})]}),d.nfe_numero&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nota Fiscal"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>G(d),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:d.nfe_numero})]}),e.jsxs("button",{onClick:()=>L(d),className:"flex items-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",title:"Ver no Fluxo de Caixa",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"text-sm",children:"Fluxo"})]})]})]}),!d.nfe_numero&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>L(d),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:"Ver no Fluxo de Caixa"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Emisso"}),e.jsx("p",{className:"mt-1",children:R(d.data_emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1",children:R(d.data_vencimento)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Original"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:B(d.valor_final||d.valor_total||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Pago"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:B(d.valor_pago||0)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Restante"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-red-600",children:B((d.valor_final||d.valor_total||0)-(d.valor_pago||0))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${d.status==="pago"?"bg-green-100 text-green-800":d.status==="parcial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status==="pago"?"Pago":d.status==="parcial"?"Parcial":"Pendente"})})]})]}),d.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-gray-600",children:d.observacoes})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Nova Forma de Pagamento"}),e.jsx("button",{onClick:()=>w(!1),className:"text-white hover:bg-green-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:S.nome,onChange:k=>C({...S,nome:k.target.value}),placeholder:"Ex: PIX Santander, Dinheiro..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:S.tipo,onChange:k=>C({...S,tipo:k.target.value}),children:[e.jsx("option",{value:"dinheiro",children:" Dinheiro"}),e.jsx("option",{value:"pix",children:" PIX"}),e.jsx("option",{value:"cartao_debito",children:" Carto Dbito"}),e.jsx("option",{value:"cartao_credito",children:" Carto Crdito"}),e.jsx("option",{value:"transferencia",children:" Transferncia"}),e.jsx("option",{value:"boleto",children:" Boleto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria Padro"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:S.conta_bancaria_destino_id||"",onChange:k=>C({...S,conta_bancaria_destino_id:parseInt(k.target.value)||null}),children:[e.jsx("option",{value:"",children:"Nenhuma (selecionar manualmente)"}),gr(b).map(k=>e.jsx("option",{value:k.id,children:k.nome},k.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta conta ser pr-selecionada automaticamente ao usar esta forma"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>w(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:D,children:" Criar"})]})]})}),e.jsx(Gpe,{isOpen:h,onClose:()=>v(!1),onSave:q})]})},Ype=()=>{var I;const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState({status:"todos",cliente_id:null,data_inicio:"",data_fim:"",apenas_vencidas:!1,apenas_vencer:!1}),[l,c]=j.useState(""),[d,u]=j.useState("desc"),[m,x]=j.useState([]),[h,v]=j.useState(null),[p,g]=j.useState(null),[y,f]=j.useState(!1),[b,N]=j.useState(!1),[_,w]=j.useState([]),[S,C]=j.useState([]),[E,T]=j.useState({valor_recebido:0,data_recebimento:new Date().toISOString().split("T")[0],forma_pagamento_id:null,conta_bancaria_id:null,valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""});j.useEffect(()=>{q()},[]),j.useEffect(()=>{if(l.trim().length>0){const k=setTimeout(()=>{A()},500);return()=>clearTimeout(k)}else l===""&&q()},[l]);const q=async()=>{try{const M={Authorization:`Bearer ${localStorage.getItem("token")}`},[z,oe,W,ae]=await Promise.all([U.get("/contas-receber/",{headers:M}),U.get("/clientes/",{headers:M}),U.get("/financeiro/formas-pagamento/",{headers:M}),U.get("/contas-bancarias?apenas_ativas=true",{headers:M})]);console.log(" Contas carregadas:",z.data.length,"contas"),console.log(" Status das contas:",gr(z.data).map(ce=>({id:ce.id,status:ce.status,descricao:ce.descricao}))),console.log(" Todas as vendas nos contas:",gr(z.data).map(ce=>ce.numero_venda).filter(ce=>ce)),console.log(" Procurando venda 202601100007:",z.data.find(ce=>{var ie;return ce.numero_venda==="202601100007"||((ie=ce.descricao)==null?void 0:ie.includes("202601100007"))})),console.log(" Antes de setContas:",z.data);const ee=[...gr(z.data)].sort((ce,ie)=>ie.id-ce.id);a(ee),console.log(" Contas setadas no estado"),x(gr(oe.data)),x(gr(oe.data)),w(gr(W.data)),C(gr(ae.data))}catch(k){console.error("Erro ao carregar dados:",k),be.error("Erro ao carregar contas a receber")}finally{n(!1)}},A=async()=>{try{n(!0);const k=new URLSearchParams;o.status!=="todos"&&k.append("status",o.status),o.cliente_id&&k.append("cliente_id",o.cliente_id),o.data_inicio&&k.append("data_inicio",o.data_inicio),o.data_fim&&k.append("data_fim",o.data_fim),o.apenas_vencidas&&k.append("apenas_vencidas","true"),o.apenas_vencer&&k.append("apenas_vencer","true"),l&&k.append("numero_venda",l);const M=await U.get(`/contas-receber/?${k}`);a(M.data)}catch(k){console.error("Erro ao filtrar:",k),be.error("Erro ao aplicar filtros")}finally{n(!1)}},O=k=>{sessionStorage.setItem("abrirVenda",k),sessionStorage.setItem("abrirModalPagamento","true"),be.success("Redirecionando para o PDV..."),t("/pdv")},V=k=>{const M=new URLSearchParams;k.cliente_nome&&M.append("busca",k.cliente_nome),k.documento&&M.append("documento",k.documento),t(`/financeiro/fluxo-caixa?${M.toString()}`),be.success("Redirecionando para o Fluxo de Caixa...")},G=()=>{const k=d==="desc"?"asc":"desc";u(k);const M=[...r].sort((z,oe)=>k==="desc"?oe.id-z.id:z.id-oe.id);a(M),be.success(k==="desc"?" Ordenado: Mais recentes primeiro":" Ordenado: Mais antigas primeiro")},L=k=>{v(k),T({valor_recebido:parseFloat((k.valor_final-k.valor_recebido).toFixed(2)),data_recebimento:new Date().toISOString().split("T")[0],forma_pagamento_id:k.forma_pagamento_id||null,conta_bancaria_id:null,valor_juros:0,valor_multa:0,valor_desconto:0,observacoes:""}),f(!0)},Z=async k=>{try{const M=await U.get(`/contas-receber/${k.id}`);v(k),g(M.data),N(!0)}catch(M){console.error("Erro ao carregar detalhes:",M),be.error("Erro ao carregar detalhes da conta")}},D=k=>{t(`/pdv?venda=${k}`)},K=async()=>{var k,M;try{await U.post(`/contas-receber/${h.id}/receber`,E),be.success("Recebimento registrado com sucesso!"),f(!1),q()}catch(z){console.error("Erro ao registrar recebimento:",z),be.error(((M=(k=z.response)==null?void 0:k.data)==null?void 0:M.detail)||"Erro ao registrar recebimento")}},R=k=>{if(!k)return"-";const M=k.split("T")[0].split("-");return new Date(parseInt(M[0]),parseInt(M[1])-1,parseInt(M[2])).toLocaleDateString("pt-BR")},B=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k),F=k=>{const M=new Date,z=new Date(k.data_vencimento);return k.status==="recebido"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:" Recebido"}):z<M?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-red-100 text-red-800",children:" Vencida"}):k.status==="parcial"?e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:" Parcial"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:" Pendente"})};return s?e.jsx("div",{className:"text-center p-8",children:"Carregando contas a receber..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:" Contas a Receber"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:G,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",title:d==="desc"?"Clique para ver mais antigas primeiro":"Clique para ver mais recentes primeiro",children:d==="desc"?" Mais Recentes":" Mais Antigas"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:" Nova Conta"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h5",{className:"text-lg font-semibold mb-4",children:" Filtros"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:" Buscar por Nmero da Venda"}),e.jsx("input",{type:"text",placeholder:"Digite o nmero da venda (ex: 202601100003) e pressione Enter",className:"w-full border border-gray-300 rounded px-3 py-2",value:l,onChange:k=>{const M=k.target.value.replace("#","");c(M)},onKeyPress:k=>{k.key==="Enter"&&A()}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.status,onChange:k=>i({...o,status:k.target.value}),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"parcial",children:"Parcial"}),e.jsx("option",{value:"recebido",children:"Recebido"}),e.jsx("option",{value:"vencido",children:"Vencido"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cliente"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:o.cliente_id||"",onChange:k=>i({...o,cliente_id:k.target.value||null}),children:[e.jsx("option",{value:"",children:"Todos"}),gr(m).map(k=>e.jsx("option",{value:k.id,children:k.nome},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_inicio,onChange:k=>i({...o,data_inicio:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:o.data_fim,onChange:k=>i({...o,data_fim:k.target.value})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencidas,onChange:k=>i({...o,apenas_vencidas:k.target.checked,apenas_vencer:!1})}),e.jsx("span",{className:"text-sm",children:"S Vencidas"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:o.apenas_vencer,onChange:k=>i({...o,apenas_vencer:k.target.checked,apenas_vencidas:!1})}),e.jsx("span",{className:"text-sm",children:"A Vencer"})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",onClick:A,children:"Filtrar"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Original"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Valor Recebido"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:gr(r).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma conta encontrada"})}):gr(r).filter(k=>{if(!l)return!0;const M=String(k.numero_venda||""),z=String(k.descricao||""),oe=l.toLowerCase();return M.toLowerCase().includes(oe)||z.toLowerCase().includes(oe)}).map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:k.id}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[k.descricao,k.eh_parcelado&&e.jsxs("span",{className:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:[k.numero_parcela,"/",k.total_parcelas]})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:k.cliente_nome||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:R(k.data_vencimento)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(k.valor_original)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:B(k.valor_recebido)}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold",children:B(k.valor_final-k.valor_recebido)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:F(k)}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[k.status!=="recebido"&&e.jsx(e.Fragment,{children:k.nsu&&!k.conciliado?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>t(`/conciliacao-cartao?nsu=${k.nsu}`),title:`Conciliar NSU ${k.nsu} com extrato da operadora`,children:" Conciliar"}),e.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>L(k),title:"Receber manual (caso no consiga conciliar)",children:" Manual"})]}):k.venda_id&&!k.nsu?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>{console.log("Conta:",k),k.venda_id?O(k.venda_id):L(k)},title:"Receber no PDV (movimenta caixa)",children:" PDV"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>L(k),title:"Receber manual (sem PDV)",children:" Manual"})]}):e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs mr-2",onClick:()=>L(k),title:"Registrar recebimento manual",children:" Receber Manual"})}),k.conciliado&&e.jsx("span",{className:"text-xs text-green-600 font-semibold mr-2",title:`Conciliado em ${k.data_conciliacao}`,children:" Conciliado"}),e.jsx("button",{className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs",title:"Ver Detalhes",onClick:()=>Z(k),children:""})]})]},k.id))})]})}),r.length>0&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 px-4 py-3",children:[e.jsx("strong",{children:"Total:"})," ",r.length," conta(s) |",e.jsx("strong",{className:"ml-3",children:"Saldo a Receber:"})," ",B(r.reduce((k,M)=>k+(M.valor_final-M.valor_recebido),0))]})]}),y&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-4",children:[e.jsx("h5",{className:"text-xl font-bold",children:" Registrar Recebimento"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-2xl",onClick:()=>f(!1),children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"Conta:"})," ",h.descricao,e.jsx("br",{}),e.jsx("strong",{children:"Valor Total:"})," ",B(h.valor_final),e.jsx("br",{}),e.jsx("strong",{children:"J Recebido:"})," ",B(h.valor_recebido),e.jsx("br",{}),e.jsx("strong",{children:"Saldo Restante:"})," ",B(h.valor_final-h.valor_recebido)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Valor a Receber *"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_recebido,onChange:k=>T({...E,valor_recebido:parseFloat(k.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data do Recebimento *"}),e.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded px-3 py-2",value:E.data_recebimento,onChange:k=>T({...E,data_recebimento:k.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Forma de Pagamento"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:E.forma_pagamento_id||"",onChange:k=>T({...E,forma_pagamento_id:parseInt(k.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione..."}),gr(_).map(k=>e.jsx("option",{value:k.id,children:k.nome},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:E.conta_bancaria_id||"",onChange:k=>T({...E,conta_bancaria_id:parseInt(k.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione a conta..."}),gr(S).map(k=>e.jsxs("option",{value:k.id,children:[k.nome," - ",B(k.saldo_atual||0)]},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Juros"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_juros,onChange:k=>T({...E,valor_juros:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Multa"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_multa,onChange:k=>T({...E,valor_multa:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Desconto"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:E.valor_desconto,onChange:k=>T({...E,valor_desconto:parseFloat(k.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observaes"}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded px-3 py-2",rows:"3",value:E.observacoes,onChange:k=>T({...E,observacoes:k.target.value})})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 mt-4",children:[e.jsx("strong",{children:"Valor Final do Recebimento:"})," ",B((E.valor_recebido||0)+(E.valor_juros||0)+(E.valor_multa||0)-(E.valor_desconto||0))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>f(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:K,children:" Confirmar Recebimento"})]})]})}),b&&h&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Detalhes da Conta"}),e.jsx("button",{onClick:()=>N(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nmero da Conta"}),e.jsx("p",{className:"mt-1 text-lg",children:h.numero_documento||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),e.jsx("p",{className:"mt-1 text-lg",children:((I=p.cliente)==null?void 0:I.nome)||"N/A"})]})]}),p.venda&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pedido/Venda"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>D(p.venda.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-semibold",children:p.venda.numero_venda})]}),e.jsxs("button",{onClick:()=>V(h),className:"flex items-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",title:"Ver no Fluxo de Caixa",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"text-sm",children:"Fluxo"})]})]})]}),!p.venda&&e.jsx("div",{children:e.jsxs("button",{onClick:()=>V(h),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-colors",children:[e.jsx("span",{className:"text-xl",children:""}),e.jsx("span",{className:"font-medium",children:"Ver no Fluxo de Caixa"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Emisso"}),e.jsx("p",{className:"mt-1",children:R(p.datas.emissao)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Vencimento"}),e.jsx("p",{className:"mt-1",children:R(p.datas.vencimento)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Original"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-600",children:B(p.valores.final)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor Recebido"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-green-600",children:B(p.valores.recebido)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Restante"}),e.jsx("p",{className:"mt-1 text-lg font-semibold text-red-600",children:B(p.valores.saldo)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${p.status==="recebido"?"bg-green-100 text-green-800":p.status==="parcial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:p.status==="recebido"?" Recebido":p.status==="parcial"?" Parcial":" Pendente"})})]})]}),p.recebimentos&&p.recebimentos.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Histrico de Recebimentos"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Data"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Valor"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Conta Bancria"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:gr(p==null?void 0:p.recebimentos).map((k,M)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm",children:R(k.data)}),e.jsx("td",{className:"px-3 py-2 text-sm font-semibold text-green-600",children:B(k.valor)}),e.jsx("td",{className:"px-3 py-2 text-sm",children:k.conta_bancaria_nome?e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:[" ",k.conta_bancaria_nome]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No informada"})})]},M))})]})})]}),p.observacoes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-gray-600",children:p.observacoes})]})]})]})})]})};function Qpe({onConcluida:t,status:r}){const a=Ht(),[s,n]=j.useState([]),[o,i]=j.useState([]),[l,c]=j.useState(!1),[d,u]=j.useState(null),[m,x]=j.useState(!1),[h,v]=j.useState(null),[p,g]=j.useState(!1),[y,f]=j.useState([]),[b,N]=j.useState([]),[_,w]=j.useState(!1),[S,C]=j.useState(!1),[E,T]=j.useState("pendentes"),[q,A]=j.useState([]),[O,V]=j.useState(null),[G,L]=j.useState(!0),[Z,D]=j.useState(1),[K,R]=j.useState(1);j.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("access_token")){u("Voc precisa estar logado."),setTimeout(()=>a("/login"),2e3);return}const ie=await U.get("/operadoras-cartao?apenas_ativas=true");A(ie.data);const we=ie.data.find(Se=>Se.padrao);we&&V(we)}catch(ce){console.error("Erro ao carregar operadoras:",ce),u("Erro ao carregar operadoras")}finally{L(!1)}})()},[a]),j.useEffect(()=>{O&&(B(),I())},[Z,O,E]),j.useEffect(()=>{if(E==="conciliadas"&&s.length>0&&o.length>0){const ee=[];s.forEach(ce=>{var _e;const ie=ce.pagamento||((_e=ce.pagamentos)==null?void 0:_e.find(je=>je.nsu||je.nsu_cartao)),we=(ie==null?void 0:ie.nsu)||(ie==null?void 0:ie.nsu_cartao)||ce.nsu;if(!we)return;const Se=o.find(je=>je.nsu===we);if(!Se)return;const me={...ce,numero:ce.numero||ce.numero_venda,nsu:we,bandeira:ie==null?void 0:ie.bandeira,parcelas:ie==null?void 0:ie.parcelas,valor:(ie==null?void 0:ie.valor)??ce.total};ee.push({venda_id:ce.id,status:"ok",venda_pdv:me,venda_stone:Se})}),N(ee)}else N([])},[E,s,o]),j.useEffect(()=>{const ee=ce=>{ce.key==="Escape"&&S&&(C(!1),f([]),w(!1))};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[S]),j.useEffect(()=>{O&&(I(),B())},[O]);const B=async()=>{try{if(c(!0),!localStorage.getItem("access_token")){u("Voc precisa estar logado."),setTimeout(()=>a("/login"),2e3);return}const ce=await U.get("/conciliacao/aba1/vendas-pdv",{params:{status:E,operadora_id:(O==null?void 0:O.id)==="legacy"?"legacy":O==null?void 0:O.id,page:Z,limit:50}});ce.data.success&&(n(ce.data.vendas),R(ce.data.total_pages))}catch(ee){console.error("Erro ao carregar vendas PDV:",ee),u("Erro ao carregar vendas do PDV")}finally{c(!1)}},F=async ee=>{var Se,me;const ce=ee.target.files[0];if(!ce)return;if(!O){alert(` Selecione uma operadora primeiro!

As vendas da planilha sero importadas com a tag da operadora selecionada.
Isso  importante para o processo de conciliao.`),ee.target.value="";return}if(O.id==="legacy"){alert(` Vendas Legacy no tm planilha!

Vendas sem operadora devem ter a operadora preenchida manualmente usando o boto "Preencher Operadora".`),ee.target.value="";return}if(!window.confirm(` Confirmar Upload

Operadora selecionada: ${O.nome}

Todas as vendas da planilha "${ce.name}" sero marcadas com esta operadora.

Deseja continuar?`)){ee.target.value="";return}v(ce),g(!0),u(null);const we=new FormData;we.append("arquivo",ce),we.append("operadora_id",O.id);try{const _e=await U.post("/conciliacao/aba1/upload-stone",we,{headers:{"Content-Type":"multipart/form-data"}});_e.data.success&&(await I(),await B(),alert(` Planilha importada com sucesso!

 ${_e.data.total_nsus||0} NSUs carregados
Operadora: ${O.nome}

Clique em "Processar Matches" para conciliar automaticamente.`),ee.target.value="")}catch(_e){console.error("Erro no upload:",_e),u(((me=(Se=_e.response)==null?void 0:Se.data)==null?void 0:me.detail)||"Erro ao importar planilha"),ee.target.value=""}finally{g(!1)}},I=async()=>{if(O){if(O.id==="legacy"){i([]);return}try{const ee=await U.get("/conciliacao/aba1/stone-nao-conciliadas",{params:{operadora_id:O.id,status:E}});ee.data.success&&i(ee.data.nsus)}catch(ee){console.error("Erro ao carregar NSUs:",ee)}}},k=async()=>{var ee,ce;if(!O){alert("Selecione uma operadora primeiro!");return}g(!0),u(null);try{const ie=await U.post("/conciliacao/aba1/processar-matches");ie.data.success&&(f(ie.data.matches||[]),C(!0),alert(` Matches encontrados!

 Resumo:
 ${ie.data.conferidas||0} vendas OK
 ${ie.data.corrigidas||0} com divergncias
 ${ie.data.sem_nsu||0} sem NSU
 ${ie.data.orfaos||0} NSUs rfos

 Visualize os matches abaixo e confirme para conciliar.`))}catch(ie){console.error("Erro ao processar matches:",ie),u(((ce=(ee=ie.response)==null?void 0:ee.data)==null?void 0:ce.detail)||"Erro ao processar matches automticos")}finally{g(!1)}},M=async()=>{var ce,ie;if(y.length===0)return;const ee=y.filter(we=>we.status==="ok");if(ee.length===0){alert(` Nenhum match OK para confirmar!

Apenas matches perfeitos (sem divergncias) podem ser conciliados.`);return}g(!0);try{const Se=(await U.get("/conciliacao/aba1/stone-nao-conciliadas",{params:{operadora_id:O==null?void 0:O.id}})).data.importacao_id,me=await U.post("/conciliacao/aba1/confirmar-matches",{importacao_id:Se,matches_confirmados:ee});me.data.success&&(alert(" "+me.data.message),f([]),C(!1),await B(),await I())}catch(we){console.error("Erro ao confirmar matches:",we),u(((ie=(ce=we.response)==null?void 0:ce.data)==null?void 0:ie.detail)||"Erro ao confirmar matches")}finally{g(!1)}},z=async(ee,ce)=>{var ie,we;try{const Se=await U.put("/conciliacao/aba1/atualizar-operadora",{pagamento_id:ee,operadora_id:ce});if(Se.data.success)return await B(),alert(`Operadora atualizada para ${Se.data.operadora_nome}`),!0}catch(Se){return console.error("Erro ao atualizar operadora:",Se),alert(((we=(ie=Se.response)==null?void 0:ie.data)==null?void 0:we.detail)||"Erro ao atualizar operadora"),!1}},oe=({venda:ee,expandir:ce})=>{var ct;const[ie,we]=j.useState(m),[Se,me]=j.useState(!1),[_e,je]=j.useState(""),[lt,Ke]=j.useState(!1),[ut,Ee]=j.useState(""),Me=async()=>{var bt,Rt;if(!_e||_e.trim()===""){alert("Digite um NSU vlido");return}try{(await U.patch(`/vendas/${ee.id}/pagamento/${ee.pagamento.id}/nsu`,{nsu_cartao:_e.trim()})).data&&(me(!1),je(""),await B(),alert("NSU atualizado com sucesso!"))}catch(Ct){console.error("Erro ao salvar NSU:",Ct),alert(((Rt=(bt=Ct.response)==null?void 0:bt.data)==null?void 0:Rt.detail)||"Erro ao salvar NSU")}},Ae=async()=>{if(!ut||ut===""){alert("Selecione uma operadora");return}await z(ee.pagamento.id,parseInt(ut))&&(Ke(!1),Ee(""))};return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 mb-2 hover:bg-gray-50 cursor-pointer",onClick:bt=>{bt.target.tagName==="INPUT"||bt.target.tagName==="BUTTON"||m||we(!ie)},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Venda ",ee.numero_venda]}),ee.pagamento.operadora_id&&!lt?e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:((ct=q.find(bt=>bt.id===ee.pagamento.operadora_id))==null?void 0:ct.nome)||"N/A"}):lt?e.jsxs("div",{className:"flex items-center gap-1",onClick:bt=>bt.stopPropagation(),children:[e.jsxs("select",{value:ut,onChange:bt=>Ee(bt.target.value),className:"border border-purple-300 rounded px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-purple-500",autoFocus:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),q.map(bt=>e.jsx("option",{value:bt.id,children:bt.nome},bt.id))]}),e.jsx("button",{onClick:Ae,className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:""}),e.jsx("button",{onClick:()=>{Ke(!1),Ee("")},className:"bg-gray-400 text-white px-2 py-1 rounded text-xs hover:bg-gray-500",children:""})]}):e.jsx("button",{onClick:bt=>{bt.stopPropagation(),Ke(!0)},className:"text-xs text-purple-600 hover:text-purple-700 underline font-medium px-2 py-1 bg-purple-50 rounded",children:" Sem Operadora - Clique aqui"}),ee.pagamento.nsu?e.jsxs("span",{className:"text-sm text-green-600",children:["NSU: ",ee.pagamento.nsu]}):Se?e.jsxs("div",{className:"flex items-center gap-1",onClick:bt=>bt.stopPropagation(),children:[e.jsx("input",{type:"text",value:_e,onChange:bt=>je(bt.target.value),placeholder:"Digite o NSU",className:"border border-orange-300 rounded px-2 py-1 text-xs w-32 focus:outline-none focus:ring-1 focus:ring-orange-500",autoFocus:!0}),e.jsx("button",{onClick:Me,className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:""}),e.jsx("button",{onClick:()=>{me(!1),je("")},className:"bg-gray-400 text-white px-2 py-1 rounded text-xs hover:bg-gray-500",children:""})]}):e.jsx("button",{onClick:bt=>{bt.stopPropagation(),me(!0)},className:"text-sm text-orange-600 hover:text-orange-700 underline font-medium",children:"SEM NSU - Clique para preencher"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",ee.total.toFixed(2)]}),!m&&e.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ie?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(ie||m)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{children:new Date(ee.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tipo:"}),e.jsx("span",{className:"capitalize",children:ee.pagamento.forma})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Operadora:"}),e.jsx("span",{className:"font-medium text-blue-600",children:(O==null?void 0:O.nome)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bandeira:"}),e.jsx("span",{children:ee.pagamento.bandeira||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas:"}),e.jsxs("span",{children:[ee.pagamento.parcelas,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor:"}),e.jsxs("span",{className:"font-medium",children:["R$ ",ee.pagamento.valor.toFixed(2)]})]})]})]})},W=({nsu:ee,expandir:ce})=>{var Se,me,_e;const[ie,we]=j.useState(m);return e.jsxs("div",{className:"border border-blue-200 rounded-lg p-3 mb-2 hover:bg-blue-50 cursor-pointer",onClick:()=>!m&&we(!ie),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("span",{className:"font-medium text-blue-900",children:["NSU: ",ee.nsu]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["R$ ",(Se=ee.valor_liquido)==null?void 0:Se.toFixed(2)]}),!m&&e.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ie?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(ie||m)&&ee.data_venda&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{children:new Date(ee.data_venda).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bandeira:"}),e.jsx("span",{children:ee.bandeira})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas:"}),e.jsxs("span",{children:[ee.parcelas,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Bruto:"}),e.jsxs("span",{children:["R$ ",(me=ee.valor_bruto)==null?void 0:me.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor Lquido:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["R$ ",(_e=ee.valor_liquido)==null?void 0:_e.toFixed(2)]})]})]})]})},ae=({match:ee,isConciliado:ce=!1})=>{var we,Se,me;const ie={ok:"bg-green-50 border-green-300",divergencia:"bg-yellow-50 border-yellow-300",orfao:"bg-red-50 border-red-300",sem_nsu:"bg-orange-50 border-orange-300"};return e.jsxs("div",{className:`border-2 rounded-lg p-4 mb-3 ${ie[ee.status]} relative`,children:[ce&&e.jsx("div",{className:"absolute top-2 right-2 px-3 py-1 bg-green-600 text-white text-xs font-bold rounded-full",children:" CONCILIADO"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"bg-white p-3 rounded border",children:ee.venda_pdv?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:["Venda #",ee.venda_pdv.numero]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["NSU: ",ee.venda_pdv.nsu||e.jsx("span",{className:"text-orange-600",children:"SEM NSU"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[ee.venda_pdv.bandeira," - ",ee.venda_pdv.parcelas,"x"]}),e.jsxs("div",{className:"text-xs font-semibold text-gray-800 mt-1",children:["R$ ",(we=ee.venda_pdv.valor)==null?void 0:we.toFixed(2)]})]}):e.jsx("div",{className:"text-sm text-gray-400 italic",children:"Sem venda no PDV"})}),e.jsxs("div",{className:"flex items-center justify-center",children:[ee.status==="ok"&&e.jsx("div",{className:"text-green-600 text-2xl",children:""}),ee.status==="divergencia"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-yellow-600 text-xl",children:""}),e.jsx("div",{className:"text-xs text-yellow-700 font-semibold mt-1",children:(Se=ee.divergencia)==null?void 0:Se.tipo})]}),ee.status==="orfao"&&e.jsx("div",{className:"text-red-600 text-2xl",children:""}),ee.status==="sem_nsu"&&e.jsx("div",{className:"text-orange-600 text-2xl",children:""})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:ee.venda_stone?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-blue-800",children:"Planilha Operadora"}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["NSU: ",ee.venda_stone.nsu]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[ee.venda_stone.bandeira," - ",ee.venda_stone.parcelas,"x"]}),e.jsxs("div",{className:"text-xs font-semibold text-blue-800 mt-1",children:["R$ ",(me=ee.venda_stone.valor_bruto)==null?void 0:me.toFixed(2)]})]}):e.jsx("div",{className:"text-sm text-blue-300 italic",children:"Sem NSU na planilha"})})]}),ee.divergencia&&e.jsx("div",{className:"mt-3 pt-3 border-t border-yellow-300",children:e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("span",{className:"font-semibold",children:"PDV:"})," ",ee.divergencia.pdv," "," ",e.jsx("span",{className:"font-semibold",children:"Stone:"})," ",ee.divergencia.stone]})})]})};return e.jsxs("div",{className:"flex flex-col h-full p-6 bg-gray-50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Conciliao de Vendas - Stone"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Compare vendas do PDV com a planilha da operadora"})]}),e.jsxs("div",{className:"flex gap-4 mb-4 items-center bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1",children:"Exibir:"}),e.jsxs("select",{value:E,onChange:ee=>T(ee.target.value),className:"border border-gray-300 rounded px-3 py-2 text-sm min-w-[180px] focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pendentes",children:" Pendentes (No Conciliadas)"}),e.jsx("option",{value:"todas",children:" Todas as Vendas"}),e.jsx("option",{value:"conciliadas",children:" Conciliadas"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1",children:"Operadora de Carto:"}),e.jsxs("select",{value:(O==null?void 0:O.id)||"",onChange:ee=>{const ce=ee.target.value;if(ce==="legacy")V({id:"legacy",nome:"Legacy (Sem Operadora)"});else{const ie=q.find(we=>we.id===parseInt(ce));V(ie)}},disabled:G,className:"border border-gray-300 rounded px-3 py-2 text-sm min-w-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"legacy",className:"text-orange-600 font-semibold",children:" Legacy (Sem Operadora)"}),q.map(ee=>e.jsxs("option",{value:ee.id,children:[ee.nome," ",ee.padrao?"(Padro)":""]},ee.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`px-4 py-2 rounded-md ${O&&O.id!=="legacy"?"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[" Upload Planilha",e.jsx("input",{type:"file",accept:".csv",onChange:F,className:"hidden",disabled:!O||O.id==="legacy"})]}),(O==null?void 0:O.id)==="legacy"&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:'Vendas Legacy no tm planilha. Use o campo "Preencher Operadora".'})]}),o.length>0&&!S&&(O==null?void 0:O.id)!=="legacy"&&e.jsx("button",{onClick:k,disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400",children:" Processar Matches"}),S&&y.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 animate-pulse",children:" Confirmar Matches OK"}),e.jsx("button",{onClick:()=>{C(!1),f([]),w(!1)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:" Cancelar"})]}),e.jsxs("label",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:()=>x(!m),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar Expandido"})]})]}),d&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:d}),S&&y.length>0||E==="conciliadas"&&b.length>0?e.jsxs("div",{className:"flex-1 overflow-hidden bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100 to-green-100 border-b",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:E==="conciliadas"?" Vendas Conciliadas":" Matches Encontrados - Revise e Confirme"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E==="conciliadas"?"Vendas PDV conciliadas com NSUs da planilha":"Matches OK no topo  Divergncias  Sem match"})]}),e.jsx("div",{className:"overflow-y-auto p-6",style:{maxHeight:"calc(100vh - 300px)"},children:E==="conciliadas"?b.length>0?b.map((ee,ce)=>e.jsx(ae,{match:ee,isConciliado:!0},ce)):e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Nenhuma venda conciliada ainda"}):y.sort((ee,ce)=>{const ie={ok:1,divergencia:2,orfao:3,sem_nsu:4};return ie[ee.status]-ie[ce.status]}).map((ee,ce)=>e.jsx(ae,{match:ee},ce))})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-100 border-b border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-800",children:[" Vendas PDV (",s.length,")"]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Vendas com carto pendentes"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Carregando..."}):s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Nenhuma venda pendente"}):s.map(ee=>e.jsx(oe,{venda:ee},ee.id))}),K>1&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>D(ee=>Math.max(1,ee-1)),disabled:Z===1,className:"px-3 py-1 text-sm bg-white border rounded disabled:opacity-50",children:" Anterior"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Pgina ",Z," de ",K]}),e.jsx("button",{onClick:()=>D(ee=>Math.min(K,ee+1)),disabled:Z===K,className:"px-3 py-1 text-sm bg-white border rounded disabled:opacity-50",children:"Prxima "})]})]}),e.jsxs("div",{className:"flex flex-col bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-blue-100 border-b border-blue-200",children:[e.jsxs("h3",{className:"font-semibold text-blue-900",children:[O?`${O.nome} Planilha`:"Planilha","  (",o.length,")"]}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"NSUs no conciliados"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:(O==null?void 0:O.id)==="legacy"?e.jsxs("div",{className:"text-center text-orange-600 py-8 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("h4",{className:"font-bold text-lg mb-2",children:"Vendas Legacy"}),e.jsx("p",{className:"text-sm max-w-md mx-auto",children:"Vendas sem operadora no possuem planilha para conciliao automtica."}),e.jsxs("p",{className:"text-sm max-w-md mx-auto mt-2",children:["Use o boto ",e.jsx("strong",{children:'" Preencher Operadora"'})," nas vendas do lado esquerdo para associ-las a uma operadora."]})]}):o.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:h?"Processando...":`Faa upload da planilha ${(O==null?void 0:O.nome)||""}`}):o.map((ee,ce)=>e.jsx(W,{nsu:ee},ce))})]})]})]})}function Jpe({onConcluida:t,status:r}){var R,B,F;const[a,s]=j.useState(!1),[n,o]=j.useState({recebimentos:null,recibo:null,ofx:null}),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),[x,h]=j.useState([]),[v,p]=j.useState(null),[g,y]=j.useState(!0),[f,b]=j.useState(!1),[N,_]=j.useState(!1),[w,S]=j.useState(null),[C,E]=j.useState(0),[T,q]=j.useState(!1),A=()=>{console.log(" Tentando avanar para Aba 3..."),console.log("onConcluida existe?",typeof t),typeof t=="function"?(console.log(" Chamando onConcluida()"),t(),console.log(" onConcluida() foi chamado com sucesso")):(console.error(" onConcluida no  uma funo!",t),alert("Erro: Funo de callback no encontrada. Recarregue a pgina."))},O=()=>{o({recebimentos:null,recibo:null,ofx:null}),d(null),m(null),l(!1),q(!1),S(null),E(0),b(!1),_(!1),console.log(" Estado resetado")};j.useEffect(()=>{(async()=>{try{const k=await U.get("/operadoras-cartao?apenas_ativas=true");h(k.data);const M=k.data.find(z=>z.padrao);M&&p(M)}catch(k){console.error("Erro ao carregar operadoras:",k),m("Erro ao carregar operadoras")}finally{y(!1)}})()},[]),j.useEffect(()=>{const I=localStorage.getItem("conciliacao_aba2_aviso_ate");if(!I)return;const k=Number(I);Number.isFinite(k)&&Date.now()<k&&s(!0)},[]);const V=I=>{const k=Date.now()+I*24*60*60*1e3;localStorage.setItem("conciliacao_aba2_aviso_ate",String(k)),s(!0)},G=(I,k)=>{var z;const M=(z=k.target.files)==null?void 0:z[0];if(!M){console.warn(`Nenhum arquivo selecionado para ${I}`);return}console.log(` Arquivo selecionado para ${I}:`,{name:M.name,size:M.size,type:M.type,lastModified:new Date(M.lastModified).toISOString()}),o(oe=>({...oe,[I]:M})),m(null),d(null)},L=()=>{if(!v){m("Por favor, selecione uma operadora antes de validar.");return}if(!n.recebimentos||!n.recibo||!n.ofx){m("Por favor, faa upload dos 3 arquivos antes de validar.");return}b(!0)},Z=async()=>{var I,k,M,z,oe,W,ae,ee,ce,ie,we,Se;if(b(!1),console.log(" Iniciando validao...",{arquivos_estado:{recebimentos:!!n.recebimentos,recibo:!!n.recibo,ofx:!!n.ofx}}),!n.recebimentos||!n.recibo||!n.ofx){m("Voc precisa enviar os 3 arquivos para continuar");return}if(console.log(" Validando tipos de arquivo...",{recebimentos_isFile:n.recebimentos instanceof File,recibo_isFile:n.recibo instanceof File,ofx_isFile:n.ofx instanceof File}),!(n.recebimentos instanceof File)){console.error(" Arquivo de recebimentos no  um File vlido:",n.recebimentos),m("Arquivo de recebimentos invlido. Por favor, selecione novamente."),o(me=>({...me,recebimentos:null}));return}if(!(n.recibo instanceof File)){console.error(" Arquivo de recibo no  um File vlido:",n.recibo),m("Arquivo de recibo invlido. Por favor, selecione novamente."),o(me=>({...me,recibo:null}));return}if(!(n.ofx instanceof File)){console.error(" Arquivo OFX no  um File vlido:",n.ofx),m("Arquivo OFX invlido. Por favor, selecione novamente."),o(me=>({...me,ofx:null}));return}l(!0),m(null);try{let me,_e,je;console.log(" Lendo arquivos:",{recebimentos:n.recebimentos.name,recibo:n.recibo.name,ofx:n.ofx.name});try{if(me=await n.recebimentos.text(),!me||me.trim().length===0)throw new Error("Arquivo de recebimentos est vazio")}catch(ge){throw console.error("Erro ao ler recebimentos:",ge),new Error(`Erro ao ler arquivo de recebimentos: ${ge.message}`)}try{if(_e=await n.recibo.text(),!_e||_e.trim().length===0)throw new Error("Arquivo de recibo est vazio")}catch(ge){throw console.error("Erro ao ler recibo:",ge),new Error(`Erro ao ler arquivo de recibo: ${ge.message}`)}try{if(je=await n.ofx.text(),!je||je.trim().length===0)throw new Error("Arquivo OFX est vazio")}catch(ge){throw console.error("Erro ao ler OFX:",ge),new Error(`Erro ao ler arquivo OFX: ${ge.message}`)}console.log(" Arquivos carregados:",{recebimentos_length:me.length,recibo_length:_e.length,ofx_length:je.length});const lt=me.split(`
`);console.log(" Primeiras 3 linhas do arquivo de recebimentos:"),console.log("Linha 0 (header):",lt[0]),console.log("Linha 1:",lt[1]),console.log("Linha 2:",lt[2]);const Ke=_e.split(`
`);console.log(" Primeiras 3 linhas do arquivo de recibo:"),console.log("Linha 0 (header):",Ke[0]),console.log("Linha 1:",Ke[1]),console.log("Linha 2:",Ke[2]);const ut=(I=lt[0])!=null&&I.includes(";")?";":",";console.log(" Separador detectado:",ut);let Ee,Me,Ae;try{Ee=me.split(`
`).slice(1).filter(ge=>ge.trim()).map((ge,$e)=>{var Ie,it,rt,xe,Oe,Ye;try{const Y=ge.split(ut);$e===0&&(console.log(" DEBUG - Primeira linha parseada:"),console.log("Total de campos:",Y.length),console.log("Campos relevantes:"),console.log("  Campo 8 (STONE ID/NSU):",Y[8]),console.log("  Campo 4 (DATA DE VENCIMENTO):",Y[4]),console.log("  Campo 12 (VALOR LQUIDO):",Y[12]),console.log("  Campo 10 (N DA PARCELA):",Y[10]),console.log("  Campo 9 (QTD DE PARCELAS):",Y[9]),console.log("  Campo 16 (LTIMO STATUS):",Y[16]));const ue=(Ie=Y[8])==null?void 0:Ie.trim(),qe=(it=Y[4])==null?void 0:it.trim(),le=(rt=Y[12])==null?void 0:rt.trim(),ve=(xe=Y[10])==null?void 0:xe.trim(),Re=(Oe=Y[9])==null?void 0:Oe.trim(),Le=(Ye=Y[16])==null?void 0:Ye.trim(),Q=le==null?void 0:le.replace(",","."),Ne=parseFloat(Q||0);return $e===0&&(console.log(" Converso de valor:"),console.log("  Original:",le),console.log("  Limpo:",Q),console.log("  Final:",Ne),console.log("  Is NaN?",isNaN(Ne))),{nsu:ue,data_recebimento:qe,valor:Ne,parcela_numero:parseInt(ve||1),total_parcelas:parseInt(Re||1),tipo_recebimento:Le||"Pago",lote_id:null}}catch(Y){throw console.error(`Erro ao parsear linha ${$e+1} de recebimentos:`,ge,Y),new Error(`Erro na linha ${$e+1} do arquivo de recebimentos detalhados`)}})}catch(ge){m(` Erro ao processar arquivo de recebimentos: ${ge.message}`);return}try{const ge=(k=Ke[0])!=null&&k.includes(";")?";":",";console.log(" Primeira linha do recibo:",Ke[0]),console.log(" Segunda linha do recibo:",Ke[1]),Me=_e.split(`
`).slice(1).filter($e=>$e.trim()).map(($e,Ie)=>{var it,rt,xe;try{const Oe=$e.split(ge);Ie===0&&(console.log(" DEBUG - Recibo primeira linha parseada:"),console.log("Total de campos:",Oe.length),console.log("  Campo 0 (Valor):",Oe[0]),console.log("  Campo 13 (ID Rastrevel):",Oe[13]),console.log("  Campo 18 (Status):",Oe[18]));const Ye=(it=Oe[0])==null?void 0:it.trim(),Y=(rt=Oe[13])==null?void 0:rt.trim(),ue=(xe=Oe[18])==null?void 0:xe.trim(),qe=Ye==null?void 0:Ye.replace(",","."),le=parseFloat(qe||0);return Ie===0&&(console.log(" Converso recibo:"),console.log("  Original:",Ye),console.log("  Limpo:",qe),console.log("  Final:",le)),{lote_id:Y,valor:le,status:ue}}catch(Oe){throw console.error(`Erro ao parsear linha ${Ie+1} de recibo:`,$e,Oe),new Error(`Erro na linha ${Ie+1} do arquivo de recibo de lote`)}})}catch(ge){m(` Erro ao processar arquivo de recibo: ${ge.message}`);return}try{console.log(" Primeiras linhas do OFX:",je.split(`
`).slice(0,30).join(`
`));const ge=[],$e=je.split(`
`);let Ie=null;for(let it=0;it<$e.length;it++){const rt=$e[it].trim();if(rt==="<STMTTRN>")Ie={};else if(rt==="</STMTTRN>"&&Ie)(Ie.type==="CREDIT"||Ie.valor&&Ie.valor>0)&&ge.push(Ie),Ie=null;else if(Ie)if(rt.startsWith("<TRNTYPE>"))Ie.type=rt.replace("<TRNTYPE>","").replace("</TRNTYPE>","");else if(rt.startsWith("<DTPOSTED>"))Ie.data=rt.replace("<DTPOSTED>","").replace("</DTPOSTED>","");else if(rt.startsWith("<TRNAMT>")){const xe=rt.replace("<TRNAMT>","").replace("</TRNAMT>","");Ie.valor=parseFloat(xe)}else rt.startsWith("<FITID>")?Ie.id=rt.replace("<FITID>","").replace("</FITID>",""):rt.startsWith("<MEMO>")&&(Ie.memo=rt.replace("<MEMO>","").replace("</MEMO>",""))}Ae=ge,console.log(" OFX parseado:",Ae.length,"transaes encontradas"),Ae.length>0&&console.log("Primeira transao:",Ae[0])}catch(ge){console.error("Erro ao parsear OFX:",ge),m(` Erro ao processar arquivo OFX: ${ge.message}`);return}if(Ee.length===0){m(" Arquivo de recebimentos detalhados est vazio ou mal formatado. Verifique o formato CSV.");return}if(Me.length===0){m(" Arquivo de recibo de lote est vazio ou mal formatado. Verifique o formato CSV.");return}if(Ae.length===0){m(" Arquivo OFX est vazio ou mal formatado. Verifique o formato.");return}const ct=Ee.filter(ge=>isNaN(ge.valor)||ge.valor===null);if(ct.length>0){console.error(" Recebimentos com valores invlidos:",ct),console.error(" Primeiras 5 linhas RAW do arquivo:"),lt.slice(0,6).forEach((ge,$e)=>{console.error(`Linha ${$e}:`,ge)}),m(` ${ct.length} recebimentos tm valores invlidos. Verifique o formato dos valores no CSV (use vrgula ou ponto decimal). Veja o console para mais detalhes.`);return}const bt=Me.filter(ge=>isNaN(ge.valor)||ge.valor===null);if(bt.length>0){console.error(" Lotes com valores invlidos:",bt),m(` ${bt.length} lotes tm valores invlidos. Verifique o formato dos valores no CSV.`);return}console.log(" Todos os valores validados! Enviando para API..."),console.log(" Enviando dados para API:",{recebimentos_count:Ee.length,recibo_count:Me.length,ofx_count:Ae.length,sample_recebimento:Ee[0],sample_recebimento_2:Ee[1],sample_recibo:Me[0],sample_ofx:Ae[0]}),console.log(" Valores parseados (primeiros 3):"),console.log("Recebimento 1:",(M=Ee[0])==null?void 0:M.valor),console.log("Recebimento 2:",(z=Ee[1])==null?void 0:z.valor),console.log("Recibo 1:",(oe=Me[0])==null?void 0:oe.valor),console.log("OFX 1:",(W=Ae[0])==null?void 0:W.valor);const Ct=(ge=>{var it;const $e={};return ge.forEach(rt=>{const xe=["data","data_recebimento","data_pagamento","Data de Pagamento","Data do Pagamento"];for(const Oe of xe)if(rt[Oe]){let Ye=rt[Oe];if(Ye.match(/^\d{2}\/\d{2}\/\d{4}$/)){const[Y,ue,qe]=Ye.split("/");Ye=`${qe}-${ue}-${Y}`}$e[Ye]=($e[Ye]||0)+1;break}}),((it=Object.entries($e).sort((rt,xe)=>xe[1]-rt[1])[0])==null?void 0:it[0])||null})(Ee);console.log(" Data de referncia detectada:",Ct);const It=[{nome:n.recebimentos.name,tamanho:n.recebimentos.size,tipo:"recebimentos_detalhados"},{nome:n.recibo.name,tamanho:n.recibo.size,tipo:"recibo_lote"},{nome:n.ofx.name,tamanho:n.ofx.size,tipo:"extrato_ofx"}],$t=await U.post("/conciliacao/aba2/validar-recebimentos",{recebimentos_detalhados:Ee,recibo_lote:Me,ofx_creditos:Ae,data_referencia:Ct,arquivos_info:It,operadora:v==null?void 0:v.nome});if(!T){const ge=v.nome,$e=$t.data.operadora_detectada,Ie=$t.data.confianca_deteccao||0;if(console.log(" Comparao de operadoras:",{selecionada:ge,detectada:$e,confianca:Ie,ignorar:T}),$e&&ge!==$e&&Ie>=.7){S($e),E(Ie),d($t.data),_(!0),l(!1);return}}d($t.data),console.log(" Resultado da validao:",{success:$t.data.success,tem_divergencias:$t.data.tem_divergencias,validado:$t.data.validado,historico_id:$t.data.historico_id,operadora_detectada:$t.data.operadora_detectada,ja_conciliado:$t.data.ja_conciliado}),$t.data.ja_conciliado&&$t.data.aviso_reprocessamento&&console.warn(" Reprocessamento detectado:",$t.data.aviso_reprocessamento),$t.data.success&&($t.data.tem_divergencias?console.log(" Tem divergncias, aguardando deciso do usurio..."):(console.log(" Validao perfeita, avanando automaticamente em 1.5s..."),setTimeout(()=>{A()},1500)))}catch(me){console.error("Erro ao validar:",me),console.error("Detalhes do erro:",(ae=me.response)==null?void 0:ae.data);const _e=((ce=(ee=me.response)==null?void 0:ee.data)==null?void 0:ce.detail)||((we=(ie=me.response)==null?void 0:ie.data)==null?void 0:we.message)||JSON.stringify((Se=me.response)==null?void 0:Se.data)||"Erro ao validar recebimentos";m(_e)}finally{l(!1)}},D=n.recebimentos&&n.recibo&&n.ofx,K=Ht();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Aba 2: Conciliao de Recebimentos"}),e.jsx("p",{className:"text-gray-600",children:"Valide que dinheiro entrou na conta (3 arquivos: detalhados, recibo, OFX)"})]}),e.jsxs("button",{onClick:()=>K("/financeiro/historico-conciliacoes"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-semibold",children:" Ver Histrico"})]})]}),a?e.jsx("button",{onClick:()=>s(!1),className:"text-xs text-blue-700 hover:text-blue-900",children:"Mostrar aviso de sequencia"}):e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Ordem recomendada:"})," Aba 1 prepara os NSUs; esta Aba 2 valida os recebimentos; a Aba 3 baixa as parcelas com seguranca."]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>V(30),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 30 dias"}),e.jsx("button",{onClick:()=>V(365),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 1 ano"})]})]})}),e.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm text-purple-700 mb-2",children:[e.jsx("strong",{children:"Esta aba NO conhece vendas."})," Apenas valida que o dinheiro entrou na conta. Validao em cascata: Recebimentos  Recibo  OFX (todos precisam bater)."]}),e.jsxs("details",{className:"text-xs text-purple-600 mt-2",children:[e.jsx("summary",{className:"cursor-pointer font-semibold hover:text-purple-800",children:" Formato esperado dos arquivos"}),e.jsxs("div",{className:"mt-2 space-y-2 pl-4",children:[e.jsx("p",{children:e.jsx("strong",{children:"Recebimentos Detalhados CSV da Stone:"})}),e.jsx("p",{className:"text-xs font-mono",children:"DOCUMENTO;STONECODE;CATEGORIA;DATA DA VENDA;DATA DE VENCIMENTO;DATA DE VENCIMENTO ORIGINAL;BANDEIRA;PRODUTO;STONE ID;QTD DE PARCELAS;N DA PARCELA;VALOR BRUTO;VALOR LQUIDO;DESCONTO DE MDR;DESCONTO DE ANTECIPAO;DESCONTO UNIFICADO;LTIMO STATUS;DATA DO LTIMO STATUS"}),e.jsx("p",{className:"text-xs text-purple-500",children:"Separador: ponto-e-vrgula (;) | Valores com vrgula decimal (21,012265)"}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Comprovante de Pagamentos CSV da Stone:"})}),e.jsx("p",{className:"text-xs font-mono",children:"Valor;Bandeira;Modalidade;...;Identificador Rastrevel do Pagamento;...;Status do Pagamento (19 colunas)"}),e.jsx("p",{className:"text-xs text-purple-500",children:"Separador: ponto-e-vrgula (;) | Valores com vrgula decimal (202,11)"}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"OFX:"})}),e.jsx("p",{className:"text-xs",children:"Arquivo bancrio padro OFX com tags <STMTTRN>, <TRNAMT>, <TRNTYPE>"})]})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-900 mb-2",children:" Operadora de Carto:"}),e.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:I=>{const k=x.find(M=>M.id===parseInt(I.target.value));p(k),d(null),m(null),q(!1),S(null)},disabled:g||i,className:"w-full border-2 border-blue-300 rounded-lg px-4 py-3 text-base font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),x.map(I=>e.jsxs("option",{value:I.id,children:[I.nome," ",I.padrao?" (Padro)":""]},I.id))]}),v&&e.jsxs("p",{className:"mt-2 text-xs text-blue-700",children:[" Operadora selecionada: ",e.jsx("strong",{children:v.nome})]}),!v&&e.jsx("p",{className:"mt-2 text-xs text-orange-600 font-medium",children:" Selecione a operadora antes de fazer upload dos arquivos"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-blue-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-recebimentos",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"1 Recebimentos Detalhados"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:"Arquivo CSV da Stone (18 colunas)"}),e.jsx("input",{id:"file-recebimentos",type:"file",accept:".csv",onChange:I=>G("recebimentos",I),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar CSV"})]}),n.recebimentos&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.recebimentos.name]})]})]})}),e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-green-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-recibo",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"2 Recibo de Lote"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:'CSV "Comprovante de Pagamentos" (19 colunas)'}),e.jsx("input",{id:"file-recibo",type:"file",accept:".csv",onChange:I=>G("recibo",I),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar CSV"})]}),n.recibo&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.recibo.name]})]})]})}),e.jsx("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-purple-400 flex items-center justify-center",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-full w-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{htmlFor:"file-ofx",className:"cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 mb-1",children:"3 Extrato OFX"}),e.jsx("span",{className:"block text-xs text-gray-500 mb-3",children:"Extrato bancrio"}),e.jsx("input",{id:"file-ofx",type:"file",accept:".ofx,.xml",onChange:I=>G("ofx",I),className:"sr-only"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:"Selecionar OFX"})]}),n.ofx&&e.jsxs("p",{className:"mt-2 text-xs text-green-600 font-medium truncate",children:[" ",n.ofx.name]})]})]})})]}),D&&!c&&e.jsx("button",{onClick:L,disabled:i||!v,className:`
            w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white
            ${i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}
          `,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Validando recebimentos..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{children:"Validar Cascata (3 arquivos)"})]})}),u&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:u})})]}),e.jsx("button",{onClick:O,className:"ml-4 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 text-xs font-medium rounded",children:"Limpar e Tentar Novamente"})]})}),c&&c.success&&e.jsxs("div",{className:"space-y-4",children:[c.ja_conciliado&&c.aviso_reprocessamento&&e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-orange-800",children:" REPROCESSAMENTO DETECTADO"}),e.jsxs("div",{className:"mt-2 text-sm text-orange-700",children:[e.jsx("p",{children:c.aviso_reprocessamento.mensagem}),c.aviso_reprocessamento.usuario_anterior&&e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Processado anteriormente por:"})," ",c.aviso_reprocessamento.usuario_anterior]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Data: ",c.data_referencia," | Operadora: ",c.operadora_detectada]})})]})]})}),(c.operadora_detectada||c.data_referencia)&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Informaes da Conciliao"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[c.operadora_detectada&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Operadora:"})," ",c.operadora_detectada,c.confianca_deteccao&&e.jsxs("span",{className:"ml-2 text-xs",children:["(Confiana: ",(c.confianca_deteccao*100).toFixed(0),"%)"]})]}),c.data_referencia&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Data de Referncia:"})," ",new Date(c.data_referencia+"T00:00:00").toLocaleDateString("pt-BR")]}),c.historico_id&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ID do Histrico:"})," #",c.historico_id]})]})]})]})}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Resumo da Validao em Cascata"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"1 Recebimentos Detalhados"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["R$ ",(R=c.valor_total_recebimentos)==null?void 0:R.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[c.recebimentos_salvos," transaes"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"2 Comprovante (Lotes)"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["R$ ",(B=c.valor_total_lotes)==null?void 0:B.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[c.lotes_count," lotes"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"3 Extrato Bancrio (OFX)"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["R$ ",(F=c.valor_total_ofx)==null?void 0:F.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:[c.ofx_count," crditos"]})]})]})]}),!c.tem_divergencias&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:" Validao Perfeita! Nenhuma divergncia encontrada."}),e.jsxs("p",{className:"mt-1 text-sm text-green-700",children:["Todas as 3 somas esto idnticas. As ",c.recebimentos_salvos," vendas foram confirmadas na conta."]})]})]})}),c.tem_divergencias&&c.divergencias&&c.divergencias.length>0&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:" Divergncias Detectadas"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Foram encontradas diferenas entre os arquivos. Analise abaixo e decida se aceita ou no."}),e.jsx("div",{className:"mt-4 space-y-3",children:c.divergencias.map((I,k)=>{var ae,ee,ce;const M=I.nivel==="arredondamento",z=M?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200",oe=M?"text-blue-900":"text-orange-900",W=M?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800";return e.jsxs("div",{className:`border rounded-lg p-4 ${z}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${W}`,children:M?" Arredondamento":" Ateno"}),e.jsx("p",{className:`text-sm font-medium ${oe}`,children:I.tipo==="recebimentos_vs_lotes"?"Recebimentos  Lotes":"Lotes  OFX"})]}),e.jsxs("div",{className:`text-right ${oe}`,children:[e.jsxs("p",{className:"text-lg font-bold",children:["R$ ",Math.abs(I.diferenca).toFixed(2)]}),e.jsxs("p",{className:"text-xs",children:[(ae=I.percentual)==null?void 0:ae.toFixed(3),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:I.tipo==="recebimentos_vs_lotes"?"Recebimentos:":"Lotes:"}),e.jsxs("p",{className:`font-semibold ${oe}`,children:["R$ ",(ee=I.tipo==="recebimentos_vs_lotes"?I.soma_recebimentos:I.soma_lotes)==null?void 0:ee.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:I.tipo==="recebimentos_vs_lotes"?"Lotes:":"OFX:"}),e.jsxs("p",{className:`font-semibold ${oe}`,children:["R$ ",(ce=I.tipo==="recebimentos_vs_lotes"?I.soma_lotes:I.soma_ofx)==null?void 0:ce.toFixed(2)]})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 italic",children:I.mensagem})]},k)})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:c.tem_divergencias?e.jsx("p",{children:" Analise as divergncias e decida se aceita a validao"}):e.jsx("p",{children:" Validao perfeita! Pode avanar para a Aba 3."})}),e.jsxs("div",{className:"flex gap-3",children:[c.tem_divergencias&&e.jsx("button",{onClick:O,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:" Cancelar e Recomear"}),e.jsx("button",{onClick:()=>{console.log(" Boto Aceitar e Avanar clicado"),A()},className:`px-6 py-2 rounded-md font-medium transition-colors ${c.tem_divergencias?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:c.tem_divergencias?" Aceitar e Avanar ":"Avanar para Aba 3 "})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>b(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Confirmar Operadora"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Voc est prestes a validar recebimentos para a operadora:"}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-200",children:e.jsxs("p",{className:"text-lg font-bold text-blue-900",children:[" ",v==null?void 0:v.nome]})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:[" ",e.jsx("strong",{children:"Todos os lanamentos sero vinculados a esta operadora."})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"O sistema detectar automaticamente se os arquivos correspondem a esta operadora e alertar se houver divergncia."})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:Z,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:" Confirmar e Validar"}),e.jsx("button",{type:"button",onClick:()=>b(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[e.jsx("h3",{className:"text-lg leading-6 font-bold text-orange-900",children:" Divergncia de Operadora Detectada"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:e.jsx("strong",{children:"Os arquivos enviados parecem ser de uma operadora diferente da selecionada."})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 border-2 border-red-300 rounded-lg",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Operadora Selecionada:"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:v==null?void 0:v.nome})]}),e.jsxs("div",{className:"p-3 bg-green-50 border-2 border-green-300 rounded-lg",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Operadora Detectada nos Arquivos:"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:w}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["Confiana da deteco: ",(C*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:e.jsx("strong",{children:"O que voc deseja fazer?"})}),e.jsxs("ul",{className:"text-xs text-yellow-700 mt-2 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsxs("strong",{children:["Mudar para ",w,":"]})," Recomendado se os arquivos esto corretos"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:["Manter ",v==null?void 0:v.nome,":"]})," Use se voc tem certeza da operadora"]})]})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const I=x.find(k=>k.nome===w);I&&p(I),_(!1),setTimeout(()=>{Z()},100)},className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:text-sm",children:[" Mudar para ",w]}),e.jsxs("button",{type:"button",onClick:()=>{q(!0),_(!1),setTimeout(()=>{Z()},100)},className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm",children:["Manter ",v==null?void 0:v.nome]}),e.jsx("button",{type:"button",onClick:()=>{_(!1),l(!1),O()},className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm",children:" Cancelar Tudo"})]})]})]})})]})}function Zpe({onConcluida:t,status:r}){var E,T,q,A;const a=Ht(),[s,n]=j.useState(!1),[o,i]=j.useState(""),[l,c]=j.useState(null),[d,u]=j.useState(!1),[m,x]=j.useState(null),[h,v]=j.useState(null),[p,g]=j.useState([]),[y,f]=j.useState(null),[b,N]=j.useState(!0);j.useEffect(()=>{(async()=>{try{const V=await U.get("/operadoras-cartao?apenas_ativas=true");g(V.data);const G=V.data.find(L=>L.padrao);G&&f(G)}catch(V){console.error("Erro ao carregar operadoras:",V),v("Erro ao carregar operadoras")}finally{N(!1)}})()},[]),j.useEffect(()=>{const O=localStorage.getItem("conciliacao_aba3_aviso_ate");if(!O)return;const V=Number(O);Number.isFinite(V)&&Date.now()<V&&n(!0)},[]);const _=O=>{const V=Date.now()+O*24*60*60*1e3;localStorage.setItem("conciliacao_aba3_aviso_ate",String(V)),n(!0)};j.useEffect(()=>{o&&y?w():c(null)},[o,y]);const w=async()=>{try{const O=await U.get("/conciliacao/aba3/preview-amarracao",{params:{data_recebimento:o,operadora:y==null?void 0:y.nome}});c(O.data)}catch(O){console.error("Erro ao buscar preview:",O),c(null)}},S=async()=>{var O,V;if(!y||!o){v("Selecione a operadora e a data primeiro");return}u(!0),v(null);try{const G=await U.post("/conciliacao/aba3/amarrar-automatico",{data_recebimento:o,operadora:y==null?void 0:y.nome});x(G.data)}catch(G){console.error("Erro ao processar:",G),v(((V=(O=G.response)==null?void 0:O.data)==null?void 0:V.detail)||"Erro ao processar amarrao")}finally{u(!1)}},C=()=>{var O,V;if(m){const G=` Conciliao finalizada com sucesso!

 Resumo:
 ${m.parcelas_liquidadas} parcelas baixadas
 Valor total: R$ ${(O=m.valor_total_liquidado)==null?void 0:O.toFixed(2)}
 Taxa de amarrao: ${(V=m.taxa_amarracao_automatica)==null?void 0:V.toFixed(1)}%`;alert(G)}t&&t(),a("/financeiro/historico-conciliacoes")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Aba 3: Amarrao Automtica"}),e.jsx("p",{className:"text-gray-600",children:"Amarrao 98% automtica: recebimentos  vendas  baixa de parcelas"})]}),s?e.jsx("button",{onClick:()=>n(!1),className:"text-xs text-blue-700 hover:text-blue-900",children:"Mostrar aviso de sequencia"}):e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Ordem recomendada:"})," Execute a Aba 1 e Aba 2 antes para garantir que a amarracao encontre todos os recebimentos."]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(30),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 30 dias"}),e.jsx("button",{onClick:()=>_(365),className:"text-xs text-blue-700 hover:text-blue-900",children:"Ocultar 1 ano"})]})]})}),e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"98% automtico!"})," Se as Abas 1 e 2 foram bem feitas, esta etapa  quase instantnea. Sistema vincula recebimentos s vendas pelo NSU e baixa as parcelas automaticamente."]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operadora:"}),e.jsxs("select",{value:(y==null?void 0:y.id)||"",onChange:O=>{const V=p.find(G=>String(G.id)===O.target.value);f(V||null)},disabled:b,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Selecione a operadora"}),p.map(O=>e.jsx("option",{value:O.id,children:O.nome},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data dos recebimentos:"}),e.jsx("input",{type:"date",value:o,onChange:O=>i(O.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Selecione a operadora e a data dos recebimentos validados na Aba 2"})]}),l&&l.recebimentos_validados>0&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:" Preview da Amarrao"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Recebimentos validados:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:l.recebimentos_validados})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-100 rounded border-2 border-blue-400",children:[e.jsx("span",{className:"text-sm font-semibold text-blue-900",children:" Parcelas que sero baixadas:"}),e.jsx("span",{className:"text-xl font-bold text-blue-900",children:l.parcelas_a_baixar})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-100 rounded border-2 border-green-400",children:[e.jsx("span",{className:"text-sm font-semibold text-green-900",children:" Valor total a liquidar:"}),e.jsxs("span",{className:"text-xl font-bold text-green-900",children:["R$ ",(E=l.valor_total)==null?void 0:E.toFixed(2)]})]})]})]})]})}),l&&l.recebimentos_validados===0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:" Nenhum recebimento validado encontrado para esta data. Verifique se a Aba 2 foi processada corretamente."})}),l&&l.parcelas_a_baixar>0&&!m&&e.jsx("button",{onClick:S,disabled:d,className:`
            w-full flex justify-center items-center gap-3 py-4 px-6 border-2 border-transparent rounded-lg shadow-lg text-base font-bold
            ${d?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white"}
          `,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Processando amarrao..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:[" Processar  baixar ",l.parcelas_a_baixar," parcelas"]})]})}),h&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:h})})]})}),m&&m.success&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`border-l-4 p-6 rounded-lg ${m.alerta_saude==="OK"?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:m.alerta_saude==="OK"?e.jsx("svg",{className:"h-8 w-8 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-8 w-8 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h3",{className:`text-xl font-bold mb-2 ${m.alerta_saude==="OK"?"text-green-900":"text-red-900"}`,children:m.alerta_saude==="OK"?" Amarrao Concluda com Sucesso!":" Amarrao Concluda com Alertas"}),e.jsxs("p",{className:"text-sm text-gray-700 font-medium mb-4 bg-green-100 border border-green-300 rounded px-3 py-2",children:[" ",m.parcelas_liquidadas," conta(s) a receber foi(ram) baixada(s) com sucesso! Valor total: R$ ",(T=m.valor_total_liquidado)==null?void 0:T.toFixed(2)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Amarrados"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m.amarrados})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"rfos"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:m.orfaos})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Parcelas Liquidadas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.parcelas_liquidadas})]}),e.jsxs("div",{className:"bg-white rounded p-4 shadow",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1",children:"Valor Liquidado"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["R$ ",(q=m.valor_total_liquidado)==null?void 0:q.toFixed(2)]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 ${m.alerta_saude==="OK"?"bg-green-100 border-green-400":"bg-red-100 border-red-400"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Sade do Sistema"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Taxa de amarrao automtica"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-4xl font-bold ${m.alerta_saude==="OK"?"text-green-700":"text-red-700"}`,children:[(A=m.taxa_amarracao_automatica)==null?void 0:A.toFixed(1),"%"]}),e.jsx("p",{className:`text-sm font-medium mt-1 ${m.alerta_saude==="OK"?"text-green-700":"text-red-700"}`,children:m.alerta_saude==="OK"?" SAUDVEL":" CRTICO"})]})]}),m.alerta_saude!=="OK"&&e.jsx("p",{className:"mt-3 text-xs text-red-700 font-medium",children:" Taxa abaixo de 90% indica problema na operao. Revise a Aba 1 (conferncia de vendas)."})]})]})]})}),m.orfaos>0&&m.lista_orfaos&&e.jsxs("div",{className:"bg-white border-2 border-red-300 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-red-900",children:[" Recebimentos rfos (",m.orfaos,")"]}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Estes recebimentos no tm venda correspondente. Precisa resolver na Aba 1."})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:m.lista_orfaos.map((O,V)=>{var G;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-red-900",children:["NSU: ",O.nsu]}),e.jsxs("p",{className:"text-xs text-red-700",children:["Data: ",O.data,"  Valor: R$ ",(G=O.valor)==null?void 0:G.toFixed(2)]})]}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700",children:"Resolver na Aba 1"})]},V)})})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx("p",{children:" Conciliao completa! Todas as 3 abas foram processadas."})}),e.jsxs("button",{onClick:C,className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-semibold flex items-center gap-2 shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Concluir e Ver Histrico"})]})]})]})]})}function ehe(){const[t,r]=j.useState(1),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState(!1),[c,d]=j.useState("pendente"),[u,m]=j.useState("pendente"),[x,h]=j.useState("pendente");j.useEffect(()=>{const _=localStorage.getItem("conciliacao_tabs_skip_aviso");l(_==="true")},[]),j.useEffect(()=>{console.log(" abaAtiva MUDOU PARA:",t)},[t]);const v=()=>{console.log(" Aba 1 concluda, marcando como processado"),d("processado")},p=()=>{console.log(" Aba 2 concluda, marcando como processado e avanando para Aba 3"),m("processado"),console.log(" Mudando para Aba 3 imediatamente..."),console.log(" abaAtiva ANTES de setAbaAtiva:",t),r(_=>(console.log(" abaAtiva ANTERIOR (dentro do setState):",_),console.log(" Retornando novo valor:",3),3)),console.log(" setAbaAtiva(3) executado")},g=()=>{console.log(" Aba 3 concluda, marcando como processado"),h("processado")},y=_=>{if(i||_===1){r(_);return}o(_),s(!0)},f=()=>{n&&r(n),s(!1)},b=()=>{localStorage.setItem("conciliacao_tabs_skip_aviso","true"),l(!0),n&&r(n),s(!1)},N=_=>{switch(_){case"processado":return e.jsx("span",{className:"text-green-600 text-xl",children:""});case"pendente":return e.jsx("span",{className:"text-yellow-600 text-xl",children:""});case"bloqueado":return e.jsx("span",{className:"text-gray-400 text-xl",children:""});case"erro":return e.jsx("span",{className:"text-red-600 text-xl",children:""});default:return null}};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Conciliao de Cartes - 3 Etapas"}),e.jsx("p",{className:"text-gray-600",children:"Processo completo: Vendas  Recebimentos  Amarrao (baixa automtica)"})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700 font-medium",children:["Ordem recomendada: ",e.jsx("strong",{children:"Aba 1"}),"  ",e.jsx("strong",{children:"Aba 2"}),"  ",e.jsx("strong",{children:"Aba 3"}),". As abas ficam abertas, mas a sequencia evita divergencias."]})})]})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"flex -mb-px space-x-8",children:[e.jsxs("button",{onClick:()=>y(1),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===1?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"1"}),e.jsx("span",{children:"Conciliao de Vendas"}),N(c),c==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Obrigatria"})]}),e.jsxs("button",{onClick:()=>y(2),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===2?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"2"}),e.jsx("span",{children:"Conciliao de Recebimentos"}),N(u),u==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Recomendada apos Aba 1"})]}),e.jsxs("button",{onClick:()=>y(3),disabled:!1,className:`
              flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${t===3?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:[e.jsx("span",{className:"text-lg",children:"3"}),e.jsx("span",{children:"Amarrao Automtica"}),N(x),x==="pendente"&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Recomendada apos Aba 2"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t===1&&e.jsx(Qpe,{onConcluida:v,status:c}),t===2&&e.jsx(Jpe,{onConcluida:p,status:u}),t===3&&e.jsx(Zpe,{onConcluida:g,status:x})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ordem recomendada das etapas"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["A sequencia ",e.jsx("strong",{children:"Aba 1  Aba 2  Aba 3"})," reduz divergencias e garante que a amarracao automatica encontre todos os recebimentos."]}),e.jsxs("div",{className:"bg-gray-50 rounded-md p-3 text-sm text-gray-700 mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 1:"})," prepara vendas e NSUs."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 2:"})," valida que o dinheiro entrou."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aba 3:"})," baixa parcelas automaticamente."]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancelar"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:b,className:"px-3 py-2 text-sm text-blue-700 hover:text-blue-900",children:"Nao mostrar novamente"}),e.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Continuar"})]})]})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Como funciona:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 1:"})," Confere NSU, bandeira, parcelas, taxa (prepara dados)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 2:"})," Valida que dinheiro entrou na conta (3 arquivos: detalhados, recibo, OFX)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Aba 3:"})," Vincula recebimentos s vendas e baixa parcelas automaticamente (98%!)"]})]})]})]})}function the(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!1),[o,i]=j.useState({operadora:"",status:"",data_inicio:"",data_fim:""});j.useEffect(()=>{l()},[]);const l=async()=>{n(!0);try{const m=new URLSearchParams;o.operadora&&m.append("operadora",o.operadora),o.status&&m.append("status",o.status),o.data_inicio&&m.append("data_inicio",o.data_inicio),o.data_fim&&m.append("data_fim",o.data_fim);const x=await U.get(`/conciliacao/historico?${m.toString()}`);x.data&&x.data.items&&a(x.data.items)}catch(m){console.error("Erro ao carregar histrico:",m)}finally{n(!1)}},c=m=>{if(!m)return"-";const[x,h,v]=m.split("T")[0].split("-");return`${v}/${h}/${x}`},d=(m,x)=>{var p,g;if((g=(p=x==null?void 0:x.abas)==null?void 0:p.aba2)!=null&&g.concluida&&m==="em_andamento")return e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:" Aba 2 Concluda"});const v={concluida:{cor:"bg-green-100 text-green-800",texto:" Concluda"},em_andamento:{cor:"bg-yellow-100 text-yellow-800",texto:" Em Andamento"},reprocessada:{cor:"bg-blue-100 text-blue-800",texto:" Reprocessada"},cancelada:{cor:"bg-gray-100 text-gray-800",texto:" Cancelada"}}[m]||{cor:"bg-gray-100 text-gray-800",texto:m};return e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${v.cor}`,children:v.texto})},u=m=>m?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m):"-";return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Histrico de Conciliaes"}),e.jsx("p",{className:"text-gray-600",children:"Consulte todas as conciliaes j realizadas"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>t("/financeiro/conciliacao-3abas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium transition-colors flex items-center gap-2",title:"Voltar para Conciliao",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Voltar para Conciliao"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operadora"}),e.jsxs("select",{value:o.operadora,onChange:m=>i({...o,operadora:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas"}),e.jsx("option",{value:"Stone",children:"Stone"}),e.jsx("option",{value:"PagSeguro",children:"PagSeguro"}),e.jsx("option",{value:"Rede",children:"Rede"}),e.jsx("option",{value:"Cielo",children:"Cielo"}),e.jsx("option",{value:"Getnet",children:"Getnet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:o.status,onChange:m=>i({...o,status:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"concluida",children:"Concluda"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"reprocessada",children:"Reprocessada"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:o.data_inicio,onChange:m=>i({...o,data_inicio:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:o.data_fim,onChange:m=>i({...o,data_fim:m.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:" Filtrar"}),e.jsx("button",{onClick:()=>{i({operadora:"",status:"",data_inicio:"",data_fim:""}),l()},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-medium",children:" Limpar Filtros"})]})]}),s&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!s&&r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[e.jsx("span",{style:{padding:"8px 10px"},children:"ID"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Data"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Operadora"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Status"}),e.jsx("span",{style:{padding:"8px 10px",textAlign:"right"},children:"Valor"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Processado"}),e.jsx("span",{style:{padding:"8px 10px"},children:"Usurio"})]}),r.map((m,x)=>{var h,v,p,g,y;return e.jsxs("div",{className:"hover:bg-blue-50 transition-colors",style:{display:"grid",gridTemplateColumns:"minmax(48px, 0.6fr) minmax(90px, 1fr) minmax(100px, 1.1fr) minmax(140px, 1.6fr) minmax(120px, 1.4fr) minmax(130px, 1.5fr) minmax(180px, 2.4fr)",columnGap:"8px",alignItems:"center",borderBottom:"1px solid #f0f0f0",background:x%2===0?"#fff":"#fafbfc"},children:[e.jsxs("span",{style:{padding:"8px 10px"},className:"text-sm font-mono text-gray-400",children:["#",m.id]}),e.jsx("span",{style:{padding:"8px 10px"},className:"text-sm font-medium text-gray-900",children:c(m.data_referencia)}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:m.operadora,children:m.operadora}),e.jsx("span",{style:{padding:"8px 10px"},children:d(m.status,m)}),e.jsxs("span",{style:{padding:"8px 10px",textAlign:"right"},children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u((v=(h=m.totais)==null?void 0:h.recebimentos)==null?void 0:v.valor_total)}),((g=(p=m.totais)==null?void 0:p.recebimentos)==null?void 0:g.quantidade)&&e.jsxs("div",{className:"text-xs text-gray-400",children:[m.totais.recebimentos.quantidade," trans."]})]}),e.jsxs("span",{style:{padding:"8px 10px"},children:[e.jsx("div",{className:"text-sm text-gray-700",children:c((y=m.created_at)==null?void 0:y.split("T")[0])}),e.jsx("div",{className:"text-xs text-gray-400",children:m.created_at?new Date(m.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"-"})]}),e.jsx("span",{style:{padding:"8px 10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"text-sm text-gray-700",title:m.usuario_responsavel,children:m.usuario_responsavel||"-"})]},m.id)})]}),!s&&r.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma conciliao encontrada"}),e.jsx("p",{className:"text-gray-500",children:"No h conciliaes registradas com os filtros selecionados."})]})]})}const Ot=Vr.create({baseURL:"/api"});Ot.interceptors.request.use(t=>{const r=localStorage.getItem("access_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));Ot.interceptors.response.use(t=>t,t=>{var a;const r=(a=t.response)==null?void 0:a.status;return r===401&&(console.warn("Sesso invlida ou tenant no selecionado"),localStorage.removeItem("access_token"),localStorage.removeItem("tenants"),window.location.href="/login"),r===403&&console.warn("Acesso negado para este tenant"),Promise.reject(t)});function rhe(){var R;const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[x,h]=j.useState(null),[v,p]=j.useState("todos"),[g,y]=j.useState(!0),[f,b]=j.useState(""),[N,_]=j.useState(""),[w,S]=j.useState(null),[C,E]=j.useState(!1);j.useEffect(()=>{T(),O()},[]),j.useEffect(()=>{i.length>0&&x&&(q(),A())},[x,v,g,f,N]);const T=async()=>{var B;try{const F=await Ot.get("/contas-bancarias",{params:{apenas_ativas:!0}});console.log(" Contas bancrias carregadas:",F.data);const I=F.data.filter(k=>k.instituicao_bancaria);l(I)}catch(F){console.error(" Erro ao carregar contas bancrias:",F),console.error("Detalhes:",(B=F.response)==null?void 0:B.data)}},q=async()=>{try{d(!0);const B={};x&&(B.conta_bancaria_id=x),v!=="todos"&&(B.status=v),B.ocultar_conciliadas=g,f&&(B.data_inicio=f),N&&(B.data_fim=N),B.limit=200;const F=await Ot.get("/conciliacao/movimentacoes",{params:B});r(F.data)}catch(B){console.error("Erro ao carregar movimentaes:",B)}finally{d(!1)}},A=async()=>{try{const B={};x&&(B.conta_bancaria_id=x);const F=await Ot.get("/conciliacao/estatisticas",{params:B});s(F.data)}catch(B){console.error("Erro ao carregar estatsticas:",B)}},O=async()=>{try{const B=await Ot.get("/conciliacao/regras");o(B.data)}catch(B){console.error("Erro ao carregar regras:",B)}},V=async B=>{var I,k;const F=B.target.files[0];if(console.log(" Upload OFX iniciado:",{file:F,contaSelecionada:x}),!!F){if(!x){alert("Selecione uma conta bancria primeiro");return}try{m(!0);const M=new FormData;M.append("arquivo",F),console.log(" Enviando arquivo para API...");const z=await Ot.post(`/api/conciliacao/upload-ofx?conta_bancaria_id=${x}`,M,{headers:{"Content-Type":"multipart/form-data"}});console.log(" Upload concludo:",z.data),alert(` OFX importado com sucesso!

 Total de transaes: ${z.data.total_transacoes}
 Pendentes: ${z.data.pendentes}
 Perodo: ${z.data.periodo_inicio||"N/A"} a ${z.data.periodo_fim||"N/A"}`),q(),A()}catch(M){console.error(" Erro ao fazer upload:",M),alert(" Erro ao processar OFX: "+(((k=(I=M.response)==null?void 0:I.data)==null?void 0:k.detail)||M.message))}finally{m(!1),B.target.value=""}}},G=async(B,F)=>{try{await Ot.post(`/api/conciliacao/movimentacoes/${B.id}/classificar`,F),q(),A(),O(),S(null)}catch(I){console.error("Erro ao classificar:",I),alert(" Erro ao classificar movimentao")}},L=(B,F)=>{const I={conciliado:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 flex items-center gap-1",children:[e.jsx(Gt,{size:12})," Conciliado"]}),sugerido:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 flex items-center gap-1",children:[e.jsx(Lt,{size:12})," Sugerido (",F,"%)"]}),pendente:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 flex items-center gap-1",children:[e.jsx(Bl,{size:12})," Pendente"]}),manual:e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 flex items-center gap-1",children:[e.jsx(mh,{size:12})," Manual"]})};return I[B]||I.pendente},Z=B=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(B),D=B=>B?new Date(B).toLocaleDateString("pt-BR"):"-",K=()=>{h(null)};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Conciliao Bancria"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema inteligente de classificao automtica"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(mh,{size:18}),"Regras (",n.length,")"]}),e.jsxs("label",{className:`px-4 py-2 rounded-lg flex items-center gap-2 ${u||!x?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 cursor-pointer"} text-white`,children:[u?e.jsxs(e.Fragment,{children:[e.jsx(Kr,{size:18,className:"animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ph,{size:18}),"Upload OFX"]}),e.jsx("input",{type:"file",accept:".ofx,.OFX",onChange:V,className:"hidden",disabled:u||!x})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Gt,{size:20,className:"text-blue-600"}),"Selecione a Conta Bancria"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Escolha a conta para visualizar movimentaes e fazer upload de extrato OFX"})]}),x&&e.jsx("button",{onClick:K,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Limpar Seleo"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.map(B=>{const F=x===B.id,I=B.cor||"#3B82F6",k=F?{backgroundColor:I,borderColor:I,color:"#ffffff"}:{backgroundColor:`${I}15`,borderColor:`${I}40`,color:I};return e.jsxs("button",{onClick:()=>h(B.id),style:k,className:`border-2 rounded-lg p-4 transition-all duration-200 transform font-medium ${F?"scale-105 shadow-lg":"hover:scale-102 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[B.icone&&e.jsx("span",{className:"text-xl",children:B.icone}),e.jsx("span",{className:"font-semibold text-sm",children:B.nome})]}),F&&e.jsx(Gt,{size:20,className:"flex-shrink-0"})]}),B.banco&&e.jsx("div",{className:`text-xs mt-1 ${F?"opacity-90":"opacity-70"}`,children:B.banco})]},B.id)})}),i.length===0&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Lt,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("span",{className:"font-semibold",children:"Nenhuma instituio bancria cadastrada."})," ",'V em Financeiro  Contas Bancrias e marque o checkbox " Instituio Bancria" nas contas que so bancos reais (no caixa fsico).']})]})}),!x&&i.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Lt,{size:18,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("span",{className:"font-semibold",children:"Nenhuma conta selecionada."})," ","Clique em uma conta acima para visualizar movimentaes e fazer upload de extrato OFX."]})]})}),x&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Gt,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("span",{className:"font-semibold",children:[(R=i.find(B=>B.id===x))==null?void 0:R.nome," selecionada."]})," ","Visualizando movimentaes desta conta. Pronto para upload de extrato OFX."]})]})})]}),a&&x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total_movimentacoes})]}),e.jsx(bs,{className:"text-gray-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conciliadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.conciliadas})]}),e.jsx(Gt,{className:"text-green-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sugeridas"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.sugeridas})]}),e.jsx(Lt,{className:"text-yellow-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.pendentes})]}),e.jsx(Bl,{className:"text-red-400",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Automao"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[a.taxa_automacao,"%"]})]}),e.jsx(aa,{className:"text-blue-400",size:24})]})})]}),x&&e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xm,{size:18,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros:"})]}),e.jsxs("select",{value:v,onChange:B=>p(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"todos",children:"Todos os status"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"sugerido",children:"Sugerido"}),e.jsx("option",{value:"conciliado",children:"Conciliado"}),e.jsx("option",{value:"manual",children:"Manual"})]}),e.jsx("input",{type:"date",value:f,onChange:B=>b(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Data incio"}),e.jsx("input",{type:"date",value:N,onChange:B=>_(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Data fim"}),e.jsxs("button",{onClick:()=>y(!g),className:`px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${g?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[g?e.jsx(uh,{size:16}):e.jsx(Gm,{size:16}),g?"Ocultar":"Mostrar"," Conciliadas"]}),e.jsxs("button",{onClick:q,className:"ml-auto px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Kr,{size:16}),"Atualizar"]})]})}),x&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descrio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vinculado"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:[e.jsx(Kr,{className:"animate-spin mx-auto mb-2",size:24}),"Carregando..."]})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada. Faa upload de um arquivo OFX."})}):t.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:D(B.data_movimento)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:B.memo||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${B.tipo==="CREDIT"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B.tipo==="CREDIT"?"Crdito":"Dbito"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:e.jsxs("span",{className:B.tipo==="CREDIT"?"text-green-600":"text-red-600",children:[B.tipo==="CREDIT"?"+":"-"," ",Z(Math.abs(B.valor))]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:L(B.status_conciliacao,B.confianca_sugestao)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:B.fornecedor_nome||B.tipo_vinculo||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:B.status_conciliacao!=="conciliado"&&e.jsx("button",{onClick:()=>S(B),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Classificar"})})]},B.id))})]})})}),w&&e.jsx(ahe,{movimentacao:w,onClose:()=>S(null),onClassificar:G}),C&&e.jsx(she,{regras:n,onClose:()=>E(!1),onAtualizar:O})]})})}function ahe({movimentacao:t,onClose:r,onClassificar:a}){const[s,n]=j.useState(t.tipo_vinculo||"fornecedor"),[o,i]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState("mensal"),m=x=>{x.preventDefault(),a(t,{tipo_vinculo:s,criar_regra:o,recorrente:l,periodicidade:l?d:null})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Classificar Movimentao"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data:"}),e.jsx("span",{className:"text-sm font-medium",children:new Date(t.data_movimento).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor:"}),e.jsx("span",{className:"text-sm font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.valor)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Descrio:"}),e.jsx("span",{className:"text-sm font-medium truncate ml-4",children:t.memo})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Vnculo"}),e.jsxs("select",{value:s,onChange:x=>n(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"fornecedor",children:"Pagamento a Fornecedor"}),e.jsx("option",{value:"taxa",children:"Taxa Bancria"}),e.jsx("option",{value:"transferencia",children:"Transferncia Entre Contas"}),e.jsx("option",{value:"recebimento",children:"Recebimento de Cliente"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"criar_regra",checked:o,onChange:x=>i(x.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"criar_regra",className:"text-sm text-gray-700",children:"Criar regra automtica para movimentaes similares"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"recorrente",checked:l,onChange:x=>c(x.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"recorrente",className:"text-sm text-gray-700",children:"Movimentao recorrente (criar provises futuras)"})]}),l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periodicidade"}),e.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"mensal",children:"Mensal"}),e.jsx("option",{value:"anual",children:"Anual"}),e.jsx("option",{value:"trimestral",children:"Trimestral"}),e.jsx("option",{value:"semestral",children:"Semestral"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Classificar"})]})]})]})]})})}function she({regras:t,onClose:r,onAtualizar:a}){const[s,n]=j.useState(t),o=async i=>{if(confirm("Deseja realmente desativar esta regra?"))try{await Ot.delete(`/conciliacao/regras/${i}`),a();const l=s.filter(c=>c.id!==i);n(l)}catch(l){console.error("Erro ao excluir regra:",l)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Regras de Aprendizado"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sistema aprende com suas classificaes"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"p-6",children:s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(mh,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Nenhuma regra criada ainda."}),e.jsx("p",{className:"text-sm mt-2",children:"Classifique movimentaes para criar regras automticas."})]}):e.jsx("div",{className:"space-y-3",children:s.map(i=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:i.padrao_memo}),i.tipo_operacao&&e.jsx("span",{className:"text-xs text-gray-600",children:i.tipo_operacao})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confiana:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${i.confianca>=80?"bg-green-500":i.confianca>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${i.confianca}%`}})}),e.jsxs("span",{className:"font-medium",children:[i.confianca,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Aplicada:"}),e.jsxs("p",{className:"font-medium mt-1",children:[i.vezes_aplicada,"x"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confirmada:"}),e.jsxs("p",{className:"font-medium mt-1",children:[i.vezes_confirmada,"x"]})]})]}),i.fornecedor_nome&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" ",i.fornecedor_nome]})]}),e.jsx("button",{onClick:()=>o(i.id),className:"ml-4 px-3 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Desativar"})]})},i.id))})})]})})}const nhe=()=>{var b,N,_;const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState({nome:"",tipo:"dinheiro",taxa_percentual:0,taxa_fixa:0,prazo_dias:0,operadora:"",operadora_id:null,gera_contas_receber:!1,split_parcelas:!1,conta_bancaria_destino_id:null,requer_nsu:!1,tipo_cartao:"",bandeira:"",ativo:!0,permite_parcelamento:!1,parcelas_maximas:1,taxas_por_parcela:{},permite_antecipacao:!1,dias_recebimento_antecipado:null,taxa_antecipacao_percentual:null,icone:"",cor:"#3B82F6"});j.useEffect(()=>{v()},[]);const v=async()=>{try{const[w,S,C]=await Promise.all([U.get("/financeiro/formas-pagamento?apenas_ativas=false"),U.get("/contas-bancarias?apenas_ativas=true"),U.get("/operadoras-cartao?apenas_ativas=true")]);r(w.data),s(S.data),o(C.data)}catch(w){console.error("Erro ao carregar dados:",w),be.error("Erro ao carregar formas de pagamento")}finally{l(!1)}},p=(w=null)=>{if(w){m(w.id);let S={};if(w.taxas_por_parcela)try{S=typeof w.taxas_por_parcela=="string"?JSON.parse(w.taxas_por_parcela):w.taxas_por_parcela}catch(C){console.error("Erro ao parsear taxas_por_parcela:",C)}h({nome:w.nome,tipo:w.tipo,taxa_percentual:w.taxa_percentual,taxa_fixa:w.taxa_fixa,prazo_dias:w.prazo_dias,operadora:w.operadora||"",operadora_id:w.operadora_id||null,gera_contas_receber:w.gera_contas_receber,split_parcelas:w.split_parcelas,conta_bancaria_destino_id:w.conta_bancaria_destino_id,requer_nsu:w.requer_nsu,tipo_cartao:w.tipo_cartao||"",bandeira:w.bandeira||"",ativo:w.ativo,permite_parcelamento:w.permite_parcelamento,parcelas_maximas:w.parcelas_maximas,taxas_por_parcela:S,permite_antecipacao:w.permite_antecipacao||!1,dias_recebimento_antecipado:w.dias_recebimento_antecipado||null,taxa_antecipacao_percentual:w.taxa_antecipacao_percentual||null,icone:w.icone||"",cor:w.cor||"#3B82F6"})}else m(null),h({nome:"",tipo:"dinheiro",taxa_percentual:0,taxa_fixa:0,prazo_dias:0,operadora:"",operadora_id:null,gera_contas_receber:!1,split_parcelas:!1,conta_bancaria_destino_id:null,requer_nsu:!1,tipo_cartao:"",bandeira:"",ativo:!0,permite_parcelamento:!1,parcelas_maximas:1,taxas_por_parcela:{},permite_antecipacao:!1,dias_recebimento_antecipado:null,taxa_antecipacao_percentual:null,icone:"",cor:"#3B82F6"});d(!0)},g=async()=>{try{const w={...x,taxas_por_parcela:Object.keys(x.taxas_por_parcela).length>0?JSON.stringify(x.taxas_por_parcela):null};u?(await U.put(`/financeiro/formas-pagamento/${u}`,w),be.success("Forma de pagamento atualizada!")):(await U.post("/financeiro/formas-pagamento",w),be.success("Forma de pagamento criada!")),d(!1),v()}catch(w){console.error("Erro ao salvar:",w),be.error("Erro ao salvar forma de pagamento")}},y=async w=>{if(confirm("Deseja realmente excluir esta forma de pagamento?"))try{await U.delete(`/financeiro/formas-pagamento/${w}`),be.success("Forma de pagamento excluda!"),v()}catch(S){console.error("Erro ao excluir:",S),be.error("Erro ao excluir forma de pagamento")}},f=[{value:"dinheiro",label:"Dinheiro",icone:""},{value:"cartao_credito",label:"Carto de Crdito",icone:""},{value:"cartao_debito",label:"Carto de Dbito",icone:""},{value:"pix",label:"PIX",icone:""},{value:"boleto",label:"Boleto",icone:""},{value:"transferencia",label:"Transferncia",icone:""}];return i?e.jsx("div",{className:"flex justify-center items-center h-64",children:"Carregando..."}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Formas de Pagamento/Recebimento"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>p(),children:"+ Nova Forma"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Taxa %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Taxa Fixa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prazo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Conta Destino"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aes"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"Nenhuma forma de pagamento cadastrada"})}):t.map(w=>{var S,C,E,T;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:w.icone}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.nome}),w.operadora_id&&e.jsx("div",{className:"text-xs text-gray-500",children:((S=n.find(q=>q.id===w.operadora_id))==null?void 0:S.nome)||w.operadora||"Operadora no encontrada"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:((C=f.find(q=>q.value===w.tipo))==null?void 0:C.label)||w.tipo}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:[w.taxa_percentual,"%"]}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:["R$ ",((E=w.taxa_fixa)==null?void 0:E.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 text-sm",children:[w.prazo_dias," dias"]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:w.conta_bancaria_destino_id?((T=a.find(q=>q.id===w.conta_bancaria_destino_id))==null?void 0:T.nome)||"N/A":e.jsx("span",{className:"text-gray-400",children:"Nenhuma"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.ativo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.ativo?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>p(w),children:""}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>y(w.id),children:""})]})})]},w.id)})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center sticky top-0",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:[u?"Editar":"Nova"," Forma de Pagamento"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-white hover:bg-blue-700 px-3 py-1 rounded",children:""})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome *"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.nome,onChange:w=>h({...x,nome:w.target.value}),placeholder:"Ex: Dinheiro, PIX, Stone Crdito..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo *"}),e.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.tipo,onChange:w=>h({...x,tipo:w.target.value}),children:f.map(w=>e.jsxs("option",{value:w.value,children:[w.icone," ",w.label]},w.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"cone"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.icone,onChange:w=>h({...x,icone:w.target.value}),placeholder:"",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa % (Ex: 2.5%)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:x.taxa_percentual,onChange:w=>h({...x,taxa_percentual:parseFloat(w.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa Fixa (R$)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",step:"0.01",value:x.taxa_fixa,onChange:w=>h({...x,taxa_fixa:parseFloat(w.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prazo (dias)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.prazo_dias,onChange:w=>h({...x,prazo_dias:parseInt(w.target.value)||0})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Conta Bancria Destino"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.conta_bancaria_destino_id||"",onChange:w=>h({...x,conta_bancaria_destino_id:parseInt(w.target.value)||null}),children:[e.jsx("option",{value:"",children:"Selecione..."}),a.map(w=>e.jsx("option",{value:w.id,children:w.nome},w.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Esta conta ser usada automaticamente quando esta forma for selecionada em pagamentos/recebimentos"})]}),(x.tipo==="cartao_credito"||x.tipo==="cartao_debito")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Operadora *"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.operadora_id||"",onChange:w=>{const S=parseInt(w.target.value)||null,C=n.find(T=>T.id===S);let E=(C==null?void 0:C.max_parcelas)||x.parcelas_maximas;h({...x,operadora_id:S,operadora:(C==null?void 0:C.nome)||"",parcelas_maximas:E})},children:[e.jsx("option",{value:"",children:"Selecione a operadora..."}),n.map(w=>e.jsxs("option",{value:w.id,children:[w.icone," ",w.nome," (at ",w.max_parcelas,"x)"]},w.id))]}),x.operadora_id&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Limite de parcelas desta operadora: ",(b=n.find(w=>w.id===x.operadora_id))==null?void 0:b.max_parcelas,"x"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bandeira"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded px-3 py-2",value:x.bandeira,onChange:w=>h({...x,bandeira:w.target.value}),children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"visa",children:"Visa"}),e.jsx("option",{value:"master",children:"Mastercard"}),e.jsx("option",{value:"elo",children:"Elo"}),e.jsx("option",{value:"amex",children:"American Express"}),e.jsx("option",{value:"hipercard",children:"Hipercard"})]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.ativo,onChange:w=>h({...x,ativo:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Ativo"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.gera_contas_receber,onChange:w=>h({...x,gera_contas_receber:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Gera Contas a Receber (para cartes com prazo)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.requer_nsu,onChange:w=>h({...x,requer_nsu:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Requer NSU (nmero de transao)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.permite_parcelamento,onChange:w=>h({...x,permite_parcelamento:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Permite Parcelamento"})]}),x.permite_parcelamento&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mximo de Parcelas"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",min:"1",max:x.operadora_id&&((N=n.find(w=>w.id===x.operadora_id))==null?void 0:N.max_parcelas)||24,value:x.parcelas_maximas,onChange:w=>{const S=parseInt(w.target.value)||1,C=n.find(T=>T.id===x.operadora_id),E=(C==null?void 0:C.max_parcelas)||24;if(S>E){be.error(` Esta operadora permite no mximo ${E}x`);return}h({...x,parcelas_maximas:S})}}),x.operadora_id&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" Limitado a ",(_=n.find(w=>w.id===x.operadora_id))==null?void 0:_.max_parcelas,"x pela operadora selecionada"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Taxas Especficas por Nmero de Parcelas"}),e.jsxs("p",{className:"text-xs text-blue-700 mb-3",children:["Configure taxas diferentes para cada quantidade de parcelas. Se no informado, usa a taxa base (",x.taxa_percentual,"%)."]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:Array.from({length:x.parcelas_maximas},(w,S)=>S+1).map(w=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-xs font-medium text-gray-700 w-10",children:[w,"x:"]}),e.jsx("input",{type:"number",step:"0.01",className:"flex-1 border border-gray-300 rounded px-2 py-1 text-sm",placeholder:x.taxa_percentual,value:x.taxas_por_parcela[w]||"",onChange:S=>{const C={...x.taxas_por_parcela};S.target.value?C[w]=parseFloat(S.target.value):delete C[w],h({...x,taxas_por_parcela:C})}}),e.jsx("span",{className:"text-xs text-gray-500",children:"%"})]},w))})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.permite_antecipacao,onChange:w=>h({...x,permite_antecipacao:w.target.checked})}),e.jsx("span",{className:"text-sm",children:"Permite Antecipao de Recebveis"})]}),x.permite_antecipacao&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dias para Recebimento Antecipado"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2",min:"0",max:"30",value:x.dias_recebimento_antecipado||"",onChange:w=>h({...x,dias_recebimento_antecipado:parseInt(w.target.value)||null}),placeholder:"Ex: 1 (cai em D+1)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantos dias aps a venda o dinheiro cai na conta com antecipao (geralmente D+1)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taxa de Antecipao (%) - OPCIONAL"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border border-gray-300 rounded px-3 py-2",value:x.taxa_antecipacao_percentual||"",onChange:w=>h({...x,taxa_antecipacao_percentual:parseFloat(w.target.value)||null}),placeholder:"Ex: 0.50"}),e.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded",children:[e.jsx("p",{className:"text-xs text-amber-800 font-semibold mb-1",children:" Duas formas de configurar:"}),e.jsxs("p",{className:"text-xs text-amber-700 mb-1",children:[e.jsx("strong",{children:"1. Com taxa de antecipao:"})," Preencha este campo e a taxa ser somada automaticamente s taxas por parcela configuradas acima"]}),e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"2. Sem taxa de antecipao:"})," Deixe vazio e configure nos campos 1x a 12x acima j com o valor final (taxa normal + antecipao somadas)"]})]})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 border-t p-4",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",onClick:()=>d(!1),children:"Cancelar"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:g,children:" Salvar"})]})]})})]})},ohe=["","","","","","","","","","","","","","","","","",""];function ihe(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState({nome:"",codigo:"",max_parcelas:12,padrao:!1,ativo:!0,api_enabled:!1,api_endpoint:"",api_token_encrypted:"",cor:"#00A868",icone:""});j.useEffect(()=>{v()},[]);const v=async()=>{try{s(!0);const b=await U.get("/operadoras-cartao");r(b.data)}catch(b){console.error("Erro ao carregar operadoras:",b),be.error("Erro ao carregar operadoras de carto")}finally{s(!1)}},p=(b=null)=>{b?(h({nome:b.nome,codigo:b.codigo||"",max_parcelas:b.max_parcelas,padrao:b.padrao,ativo:b.ativo,api_enabled:b.api_enabled,api_endpoint:b.api_endpoint||"",api_token_encrypted:b.api_token_encrypted||"",cor:b.cor||"#00A868",icone:b.icone||""}),l(b)):(h({nome:"",codigo:"",max_parcelas:12,padrao:!1,ativo:!0,api_enabled:!1,api_endpoint:"",api_token_encrypted:"",cor:"#00A868",icone:""}),l(null)),o(!0),d(""),m(!1)},g=async b=>{var N,_,w,S,C,E;if(b.preventDefault(),!x.nome.trim()){be.error("Nome da operadora  obrigatrio");return}if(x.max_parcelas<1||x.max_parcelas>24){be.error("Parcelas devem estar entre 1 e 24");return}try{const T={...x,nome:x.nome.trim(),codigo:((_=(N=x.codigo)==null?void 0:N.trim())==null?void 0:_.toUpperCase())||null,api_endpoint:((w=x.api_endpoint)==null?void 0:w.trim())||null,api_token_encrypted:((S=x.api_token_encrypted)==null?void 0:S.trim())||null};i?(await U.put(`/operadoras-cartao/${i.id}`,T),be.success("Operadora atualizada com sucesso!")):(await U.post("/operadoras-cartao",T),be.success("Operadora criada com sucesso!")),o(!1),v()}catch(T){console.error("Erro ao salvar:",T);const q=((E=(C=T.response)==null?void 0:C.data)==null?void 0:E.detail)||"Erro ao salvar operadora";be.error(q),d(q)}},y=async b=>{var N,_;if(window.confirm("Deseja realmente excluir esta operadora? Ela ser desativada se houver vendas vinculadas."))try{await U.delete(`/operadoras-cartao/${b}`),be.success("Operadora removida com sucesso!"),v()}catch(w){console.error("Erro ao excluir:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao excluir operadora";be.error(S)}},f=()=>{const b=t.find(N=>N.padrao&&N.ativo);return b?e.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(zA,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-emerald-900",children:"Operadora Padro"}),e.jsxs("p",{className:"text-sm text-emerald-700",children:[e.jsx("span",{className:"font-medium",children:b.nome})," ser pr-selecionada no PDV"]})]})]})}):null};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Operadoras de Carto"}),e.jsx("p",{className:"text-gray-600",children:"Configure as operadoras de carto disponveis (Stone, Cielo, Rede, Getnet, etc)"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ea,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-amber-900 mb-1",children:"Importante"}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:" Pelo menos uma operadora deve estar marcada como padro e ativa"}),e.jsx("li",{children:" O PDV usar a operadora padro automaticamente para vendas com carto"}),e.jsx("li",{children:" Operadoras com vendas vinculadas no podem ser excludas (apenas desativadas)"})]})]})]})}),f(),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>p(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(Nn,{className:"w-4 h-4"}),"Nova Operadora"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(b=>{const N=b.icone&&!b.icone.startsWith("Fi")&&!b.icone.startsWith("Bi")?b.icone:"";return e.jsxs("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow ${b.ativo?"bg-white border-gray-200":"bg-gray-50 border-gray-300"} ${b.padrao?"ring-2 ring-emerald-500":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:`${b.cor}20`},children:N}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[b.nome,b.padrao&&e.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full",children:"Padro"})]}),b.codigo&&e.jsx("p",{className:"text-xs text-gray-500 font-mono",children:b.codigo})]})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${b.ativo?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:b.ativo?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Parcelas mximas:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[b.max_parcelas,"x"]})]}),b.api_enabled&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"API Integrada"]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(b),className:"flex-1 bg-blue-50 text-blue-600 px-3 py-2 rounded hover:bg-blue-100 flex items-center justify-center gap-2 transition-colors text-sm",children:[e.jsx(T2,{className:"w-4 h-4"}),"Editar"]}),e.jsxs("button",{onClick:()=>y(b.id),className:"flex-1 bg-red-50 text-red-600 px-3 py-2 rounded hover:bg-red-100 flex items-center justify-center gap-2 transition-colors text-sm",children:[e.jsx(Fo,{className:"w-4 h-4"}),"Excluir"]})]})]},b.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(vd,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Nenhuma operadora cadastrada"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Clique em "Nova Operadora" para comear'})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i?"Editar Operadora":"Nova Operadora"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6",children:[c&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:c})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes Bsicas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Operadora *"}),e.jsx("input",{type:"text",value:x.nome,onChange:b=>h({...x,nome:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Stone, Cielo, Rede",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cdigo (sigla)"}),e.jsx("input",{type:"text",value:x.codigo,onChange:b=>h({...x,codigo:b.target.value.toUpperCase()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"Ex: STONE, CIELO",maxLength:50})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mximo de Parcelas *"}),e.jsx("input",{type:"number",value:x.max_parcelas,onChange:b=>h({...x,max_parcelas:parseInt(b.target.value)||1}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"24",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Entre 1 e 24 parcelas"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.padrao,onChange:b=>h({...x,padrao:b.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Operadora Padro"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.ativo,onChange:b=>h({...x,ativo:b.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Interface"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:x.cor,onChange:b=>h({...x,cor:b.target.value}),className:"w-16 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:x.cor,onChange:b=>h({...x,cor:b.target.value}),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"#00A868"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"cone"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ohe.map(b=>e.jsx("button",{type:"button",onClick:()=>h({...x,icone:b}),className:`w-10 h-10 rounded flex items-center justify-center text-xl transition-colors ${x.icone===b?"bg-blue-100 ring-2 ring-blue-500":"bg-gray-100 hover:bg-gray-200"}`,children:b},b))})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Integrao API (Opcional)"}),e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.api_enabled,onChange:b=>h({...x,api_enabled:b.target.checked}),className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Habilitar integrao via API"})]}),x.api_enabled&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint da API"}),e.jsx("input",{type:"url",value:x.api_endpoint,onChange:b=>h({...x,api_endpoint:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"https://api.operadora.com/v1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Token de Acesso"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:x.api_token_encrypted,onChange:b=>h({...x,api_token_encrypted:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Token ser criptografado ao salvar"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(uh,{className:"w-4 h-4"}):e.jsx(Gm,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[e.jsx(Ym,{className:"w-4 h-4"}),i?"Salvar Alteraes":"Criar Operadora"]})]})]})]})})]})}const lhe=({isOpen:t,onClose:r,contexto:a})=>{const[s,n]=j.useState([]),[o,i]=j.useState(""),[l,c]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{t&&s.length===0&&n([{tipo:"ia",conteudo:`Ol! Sou seu especialista financeiro com IA. Analisando seu ${(a==null?void 0:a.tipo)||"relatrio"}...

Posso ajudar com:
 Anlise de resultados
 Sugestes de melhoria
 Comparaes de perodos
 Projees financeiras

O que deseja saber?`,timestamp:new Date}])},[t,s.length,a]),j.useEffect(()=>{u()},[s]);const u=()=>{var p;(p=d.current)==null||p.scrollIntoView({behavior:"smooth"})},m=async()=>{if(!o.trim())return;const p={tipo:"usuario",conteudo:o,timestamp:new Date};n(g=>[...g,p]),i(""),c(!0);try{const y={tipo:"ia",conteudo:(await U.post("/ia/chat",{mensagem:o,contexto:a})).data.resposta,timestamp:new Date};n(f=>[...f,y])}catch(g){console.error("Erro ao enviar mensagem:",g);const y={tipo:"ia",conteudo:"Desculpe, houve um erro ao processar sua mensagem. Tente novamente.",timestamp:new Date};n(f=>[...f,y])}finally{c(!1)}},x=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),m())},h=["Como melhorar minha margem de lucro?","Quais so os principais gastos?","Compare com o ms anterior","H despesas atpicas?"],v=p=>{i(p)};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl h-[600px] flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(jo,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Especialista Financeiro IA"}),e.jsx("p",{className:"text-sm text-purple-100",children:"Anlise inteligente dos seus dados"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(qt,{size:24})})]}),a&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-indigo-200 p-3",children:e.jsxs("div",{className:"text-sm text-indigo-800",children:[" Analisando: ",e.jsx("span",{className:"font-semibold",children:a.tipo}),a.periodo&&e.jsxs("span",{className:"ml-2",children:[" ",a.periodo]}),a.valor&&e.jsxs("span",{className:"ml-2",children:[" Valor: R$ ",a.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map((p,g)=>e.jsx("div",{className:`flex ${p.tipo==="usuario"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-2xl p-4 ${p.tipo==="usuario"?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-100 text-gray-800"}`,children:[p.tipo==="ia"&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(UA,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-semibold text-purple-600",children:"IA Especialista"})]}),e.jsx("p",{className:"whitespace-pre-wrap",children:p.conteudo}),e.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:p.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})},g)),l&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"animate-spin text-purple-600",size:20}),e.jsx("span",{className:"text-gray-600",children:"Analisando..."})]})})}),e.jsx("div",{ref:d})]}),s.length<=1&&e.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:" Sugestes de perguntas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((p,g)=>e.jsx("button",{onClick:()=>v(p),className:"text-xs px-3 py-1.5 bg-white border border-purple-200 text-purple-700 rounded-full hover:bg-purple-50 transition-colors",children:p},g))})]}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-white rounded-b-2xl",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:p=>i(p.target.value),onKeyPress:x,placeholder:"Digite sua pergunta...",disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"}),e.jsx("button",{onClick:m,disabled:!o.trim()||l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:e.jsx(KA,{size:20})})]})})]})}):null},che=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(30),[i,l]=j.useState({media:0,desvio:0});j.useEffect(()=>{c()},[n]);const c=async()=>{s(!0);try{const p=await d();r(p)}catch(p){console.error("Erro ao carregar projees:",p)}finally{s(!1)}},d=async()=>{const p=new Date,g=new Date;g.setDate(g.getDate()-90);try{const f=(await U.get("/financeiro/movimentacoes",{params:{data_inicio:g.toISOString().split("T")[0],data_fim:p.toISOString().split("T")[0]}})).data,b=u(f,"entrada"),N=u(f,"saida"),_=await m(),w=[];let S=_;for(let C=1;C<=n;C++){const E=new Date;E.setDate(E.getDate()+C);const T=b*(.8+Math.random()*.4),q=N*(.8+Math.random()*.4),A=T,O=q;S=S+A-O;const V=Math.max(95-C*1.5,50);w.push({data:E.toISOString().split("T")[0],dataFormatada:E.toLocaleDateString("pt-BR"),entradasProjetadas:A,saidasProjetadas:O,saldoProjetado:S,nivelConfianca:V,diaSemana:E.toLocaleDateString("pt-BR",{weekday:"short"}),alerta:S<1e3?"crtico":S<5e3?"ateno":null})}return w}catch(y){return console.error("Erro ao gerar projees:",y),[]}},u=(p,g)=>{const y=p.filter(b=>b.tipo===g);return y.length===0?0:y.reduce((b,N)=>b+N.valor,0)/90},m=async()=>{try{return(await U.get("/financeiro/saldo-atual")).data.saldo||1e4}catch(p){return console.error("Erro ao buscar saldo:",p),1e4}},x=p=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p),h=p=>p==="crtico"?"bg-red-100 border-red-300 text-red-800":p==="ateno"?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-green-50 border-green-200",v=()=>{var g,y,f;const p=[];for(let b=0;b<t.length;b+=7){const N=t.slice(b,b+7),_=N.reduce((C,E)=>C+E.entradasProjetadas,0),w=N.reduce((C,E)=>C+E.saidasProjetadas,0),S=((g=N[N.length-1])==null?void 0:g.saldoProjetado)||0;p.push({numero:Math.floor(b/7)+1,dataInicio:(y=N[0])==null?void 0:y.dataFormatada,dataFim:(f=N[N.length-1])==null?void 0:f.dataFormatada,entradas:_,saidas:w,saldo:w-_,saldoFinal:S})}return p};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jo,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Calculando projees..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(aa,{className:"w-6 h-6"}),"Projees de Fluxo de Caixa"]}),e.jsx("p",{className:"text-purple-100 mt-1",children:"Previses baseadas em padres histricos e tendncias"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o(15),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===15?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"15 dias"}),e.jsx("button",{onClick:()=>o(30),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===30?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"30 dias"}),e.jsx("button",{onClick:()=>o(60),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===60?"bg-white text-purple-600":"bg-purple-500 text-white hover:bg-purple-400"}`,children:"60 dias"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(zi,{className:"w-5 h-5 text-indigo-600"}),"Resumo Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v().map(p=>e.jsxs("div",{className:`border rounded-lg p-4 ${p.saldoFinal<5e3?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"text-sm font-medium text-gray-600 mb-2",children:["Semana ",p.numero]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:[p.dataInicio," - ",p.dataFim]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Entradas:"}),e.jsx("span",{className:"font-medium",children:x(p.entradas)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-red-600",children:"Sadas:"}),e.jsx("span",{className:"font-medium",children:x(p.saidas)})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[e.jsx("span",{children:"Saldo Final:"}),e.jsx("span",{className:p.saldoFinal<5e3?"text-yellow-600":"text-gray-800",children:x(p.saldoFinal)})]})]})]},p.numero))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ha,{className:"w-5 h-5 text-green-600"}),"Projees Dirias Detalhadas"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Data"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Dia"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Entradas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Sadas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Saldo Projetado"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Confiana"})]})}),e.jsx("tbody",{children:t.map((p,g)=>e.jsxs("tr",{className:`border-b border-gray-100 hover:bg-gray-50 ${p.alerta?h(p.alerta):""}`,children:[e.jsx("td",{className:"py-3 px-4 text-sm",children:p.dataFormatada}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:p.diaSemana}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-green-600 font-medium",children:x(p.entradasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right text-red-600 font-medium",children:x(p.saidasProjetadas)}),e.jsx("td",{className:"py-3 px-4 text-sm text-right font-semibold",children:x(p.saldoProjetado)}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.nivelConfianca>=80?"bg-green-100 text-green-800":p.nivelConfianca>=65?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:[p.nivelConfianca.toFixed(0),"%"]})})]},g))})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Sobre as Projees"}),e.jsx("p",{children:"As projees so calculadas com base em padres histricos dos ltimos 90 dias. O nvel de confiana diminui com o tempo, pois eventos futuros podem alterar as tendncias."})]})]})]})},dhe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState("todos");j.useEffect(()=>{i()},[]);const i=async()=>{s(!0);try{const f=await l();r(f)}catch(f){console.error("Erro ao carregar alertas:",f)}finally{s(!1)}},l=async()=>{const f=[],b=new Date;try{const N=await c();N<1e3?f.push({id:"saldo-critico",tipo:"saldo",severidade:"crtico",titulo:"Saldo Crtico",mensagem:`Seu saldo est abaixo de R$ 1.000,00. Saldo atual: ${v(N)}`,recomendacao:"Considere adiar pagamentos no essenciais ou antecipar recebimentos.",icone:ea,data:b.toISOString()}):N<5e3&&f.push({id:"saldo-atencao",tipo:"saldo",severidade:"ateno",titulo:"Saldo Baixo",mensagem:`Seu saldo est em nvel de ateno: ${v(N)}`,recomendacao:"Monitore suas despesas e prepare-se para possveis necessidades de caixa.",icone:Lt,data:b.toISOString()});const _=await d(7);if(_.length>0){const T=_.reduce((q,A)=>q+A.valor,0);f.push({id:"vencimentos-proximos",tipo:"vencimento",severidade:"ateno",titulo:`${_.length} Pagamentos Vencendo`,mensagem:`Voc tem ${_.length} pagamentos vencendo nos prximos 7 dias, totalizando ${v(T)}`,recomendacao:"Verifique se h saldo suficiente para cobrir estes pagamentos.",icone:zi,data:b.toISOString(),detalhes:_})}const w=await u();if(w.length>0){const T=w.reduce((q,A)=>q+A.valor,0);f.push({id:"vencimentos-atrasados",tipo:"atraso",severidade:"crtico",titulo:`${w.length} Pagamentos Atrasados`,mensagem:`Voc tem ${w.length} pagamentos em atraso, totalizando ${v(T)}`,recomendacao:"Priorize a quitao destes dbitos para evitar juros e multas.",icone:ea,data:b.toISOString(),detalhes:w})}const S=await m();S.variacao>30&&f.push({id:"gastos-anormais",tipo:"anomalia",severidade:"ateno",titulo:"Gastos Acima do Normal",mensagem:`Suas despesas aumentaram ${S.variacao.toFixed(0)}% em relao  mdia histrica`,recomendacao:"Revise seus gastos recentes e identifique possveis despesas extraordinrias.",icone:aa,data:b.toISOString(),detalhes:S});const C=await x();C.length>0&&f.push({id:"recorrencias-pendentes",tipo:"recorrencia",severidade:"info",titulo:"Despesas Recorrentes Prximas",mensagem:`${C.length} despesas recorrentes vencero em breve`,recomendacao:"Certifique-se de que h saldo para cobrir estas despesas automticas.",icone:Bl,data:b.toISOString(),detalhes:C});const E=await h(15);return E.diasAteNegativo>0&&f.push({id:"projecao-negativa",tipo:"projecao",severidade:"crtico",titulo:"Risco de Saldo Negativo",mensagem:`Com o padro atual, seu saldo pode ficar negativo em ${E.diasAteNegativo} dias`,recomendacao:"Tome medidas urgentes para aumentar receitas ou reduzir despesas.",icone:Sa,data:b.toISOString(),detalhes:E}),f.sort((T,q)=>{const A={crtico:0,ateno:1,info:2};return A[T.severidade]-A[q.severidade]})}catch(N){return console.error("Erro ao gerar alertas:",N),[]}},c=async()=>{try{return(await U.get("/financeiro/saldo-atual")).data.saldo||1e4}catch{return 1e4}},d=async f=>{try{const b=new Date,N=new Date;return N.setDate(N.getDate()+f),(await U.get("/financeiro/contas-pagar",{params:{data_inicio:b.toISOString().split("T")[0],data_fim:N.toISOString().split("T")[0],status:"pendente"}})).data||[]}catch{return[]}},u=async()=>{try{return(await U.get("/financeiro/contas-pagar",{params:{atrasadas:!0}})).data||[]}catch{return[]}},m=async()=>{try{const f=new Date,b=new Date;return b.setDate(b.getDate()-30),(await U.get("/financeiro/analise-gastos",{params:{data_inicio:b.toISOString().split("T")[0],data_fim:f.toISOString().split("T")[0]}})).data||{variacao:0}}catch{return{variacao:0}}},x=async()=>{try{return(await U.get("/financeiro/recorrencias-proximas")).data||[]}catch{return[]}},h=async f=>{try{return(await U.get("/ia/fluxo/projecao-saldo",{params:{dias:f}})).data||{diasAteNegativo:0}}catch{return{diasAteNegativo:0}}},v=f=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(f),p=f=>{r(t.filter(b=>b.id!==f))},g=f=>{switch(f){case"crtico":return{bg:"bg-red-50",border:"border-red-300",text:"text-red-800",badge:"bg-red-100 text-red-800"};case"ateno":return{bg:"bg-yellow-50",border:"border-yellow-300",text:"text-yellow-800",badge:"bg-yellow-100 text-yellow-800"};case"info":return{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-800",badge:"bg-blue-100 text-blue-800"};default:return{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-800",badge:"bg-gray-100 text-gray-800"}}},y=t.filter(f=>n==="todos"?!0:f.severidade===n);return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(jo,{className:"w-6 h-6 text-purple-600 animate-spin"}),e.jsx("span",{className:"text-gray-600",children:"Analisando alertas..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ea,{className:"w-6 h-6"}),"Alertas Inteligentes"]}),e.jsx("p",{className:"text-orange-100 mt-1",children:"Avisos automticos sobre situaes que requerem ateno"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>o("todos"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="todos"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["Todos (",t.length,")"]}),e.jsxs("button",{onClick:()=>o("crtico"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="crtico"?"bg-white text-orange-600":"bg-orange-500 text-white hover:bg-orange-400"}`,children:["Crticos (",t.filter(f=>f.severidade==="crtico").length,")"]})]})]})}),y.length===0?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx(Gt,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Tudo em ordem!"}),e.jsx("p",{className:"text-green-700",children:"No h alertas no momento. Seu fluxo de caixa est saudvel."})]}):e.jsx("div",{className:"space-y-4",children:y.map(f=>{const b=g(f.severidade),N=f.icone;return e.jsx("div",{className:`${b.bg} border ${b.border} rounded-lg p-5 transition-all hover:shadow-md`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`${b.text} mt-1`,children:e.jsx(N,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:`font-semibold ${b.text}`,children:f.titulo}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.badge}`,children:f.severidade})]}),e.jsx("p",{className:`text-sm mb-3 ${b.text}`,children:f.mensagem}),e.jsxs("div",{className:"bg-white bg-opacity-50 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:" Recomendao:"}),e.jsx("p",{className:"text-sm text-gray-600",children:f.recomendacao})]}),f.detalhes&&e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 hover:text-gray-900",children:"Ver detalhes"}),e.jsx("div",{className:"mt-2 pl-4 border-l-2 border-gray-300",children:e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:JSON.stringify(f.detalhes,null,2)})})]})]})]}),e.jsx("button",{onClick:()=>p(f.id),className:"ml-4 text-gray-400 hover:text-gray-600 transition-colors",title:"Marcar como resolvido",children:e.jsx(qt,{className:"w-5 h-5"})})]})},f.id)})})]})},uhe=()=>{Ht();const[t,r]=j.useState(!1),[a,s]=j.useState(null),[n,o]=j.useState("movimentacoes"),[i,l]=j.useState(!1),c=()=>{const O=new Date,V=O.getFullYear(),G=String(O.getMonth()+1).padStart(2,"0"),L=String(O.getDate()).padStart(2,"0");return`${V}-${G}-${L}`},d=()=>{const O=new Date,V=O.getFullYear(),G=String(O.getMonth()+1).padStart(2,"0");return`${V}-${G}-01`},[u,m]=j.useState({data_inicio:d(),data_fim:c(),conta_bancaria_id:null,agrupamento:"dia"}),[x,h]=j.useState("todos"),[v,p]=j.useState("todos"),[g,y]=j.useState([]),[f,b]=j.useState(null),[N,_]=j.useState(!1),[w,S]=j.useState("");j.useEffect(()=>{C(),E()},[]);const C=async()=>{try{const O=await U.get("/contas-bancarias");y(O.data)}catch(O){console.error("Erro ao carregar contas bancrias:",O)}},E=async()=>{var O,V;r(!0);try{const G=new URLSearchParams({data_inicio:u.data_inicio,data_fim:u.data_fim,agrupamento:u.agrupamento});u.conta_bancaria_id&&G.append("conta_bancaria_id",u.conta_bancaria_id),w&&G.append("numero_venda",w);const L=await U.get(`/financeiro/fluxo-caixa?${G}`);s(L.data)}catch(G){console.error("Erro ao carregar fluxo de caixa:",G),alert("Erro ao carregar fluxo de caixa: "+(((V=(O=G.response)==null?void 0:O.data)==null?void 0:V.detail)||G.message))}finally{r(!1)}},T=O=>{const V=new Date;let G,L;switch(O){case"7dias":G=new Date(V.setDate(V.getDate()-7)),L=new Date;break;case"30dias":G=new Date(V.setDate(V.getDate()-30)),L=new Date;break;case"mes_atual":G=new Date(V.getFullYear(),V.getMonth(),1),L=new Date(V.getFullYear(),V.getMonth()+1,0);break;case"proximo_mes":G=new Date(V.getFullYear(),V.getMonth()+1,1),L=new Date(V.getFullYear(),V.getMonth()+2,0);break;default:return}const Z={...u,data_inicio:G.toISOString().split("T")[0],data_fim:L.toISOString().split("T")[0]};m(Z),setTimeout(()=>E(),100)},q=O=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(O||0),A=O=>a?a.movimentacoes.filter(V=>{const G=new Date(V.data),L=new Date(O.data_inicio),Z=new Date(O.data_fim);if(!(G>=L&&G<=Z)||x==="entradas"&&V.tipo!=="credito"||x==="saidas"&&V.tipo!=="debito"||v==="realizado"&&V.status!=="realizado"||v==="previsto"&&V.status!=="previsto")return!1;if(w){const K=V.descricao||"",R=V.numero_venda||"",B=w.toLowerCase();return R.toLowerCase().includes(B)||K.toLowerCase().includes(B)}return!0}):[];return t&&!a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Kr,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando fluxo de caixa..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" Fluxo de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Viso completa: Previsto vs Realizado"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:" Os lanamentos so criados automaticamente a partir de Contas a Pagar e Contas a Receber"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar por Nmero da Venda"}),e.jsx("input",{type:"text",placeholder:"Digite o nmero da venda (ex: 202601100007) e pressione Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:w,onChange:O=>S(O.target.value),onKeyPress:O=>{O.key==="Enter"&&E()}})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visualizao"}),e.jsxs("select",{value:u.agrupamento,onChange:O=>m({...u,agrupamento:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"dia",children:" Dirio"}),e.jsx("option",{value:"semana",children:" Semanal"}),e.jsx("option",{value:"mes",children:" Mensal"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Movimentao"}),e.jsxs("select",{value:x,onChange:O=>h(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:" Todas"}),e.jsx("option",{value:"entradas",children:" Apenas Entradas"}),e.jsx("option",{value:"saidas",children:" Apenas Sadas"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:v,onChange:O=>p(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"todos",children:" Todos"}),e.jsx("option",{value:"realizado",children:" Apenas Realizados"}),e.jsx("option",{value:"previsto",children:" Apenas Previstos"})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:u.data_inicio,onChange:O=>m({...u,data_inicio:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:u.data_fim,onChange:O=>m({...u,data_fim:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conta Bancria"}),e.jsxs("select",{value:u.conta_bancaria_id||"",onChange:O=>m({...u,conta_bancaria_id:O.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Todas as Contas"}),gr(g).map(O=>e.jsx("option",{value:O.id,children:O.nome},O.id))]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Kr,{size:18}),"Atualizar"]})})]}),(x!=="todos"||v!=="todos")&&e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-blue-800 font-medium",children:" Filtros ativos:"}),x!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:x==="entradas"?" Apenas Entradas":" Apenas Sadas"}),v!=="todos"&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:v==="realizado"?" Apenas Realizados":" Apenas Previstos"})]}),e.jsx("button",{onClick:()=>{h("todos"),p("todos")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Limpar filtros"})]}),e.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap items-center",children:[e.jsx("button",{onClick:()=>T("7dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"ltimos 7 dias"}),e.jsx("button",{onClick:()=>T("30dias"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"ltimos 30 dias"}),e.jsx("button",{onClick:()=>T("mes_atual"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Ms Atual"}),e.jsx("button",{onClick:()=>T("proximo_mes"),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded",children:"Prximo Ms"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 bg-blue-50 px-3 py-2 rounded border border-blue-200",children:[e.jsx("input",{type:"checkbox",id:"apenasComLancamentos",checked:N,onChange:O=>_(O.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"apenasComLancamentos",className:"text-sm font-medium text-blue-700 cursor-pointer",children:" Apenas dias com lanamentos"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>o("movimentacoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="movimentacoes"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(ha,{className:"w-5 h-5"}),"Movimentaes"]}),e.jsxs("button",{onClick:()=>o("projecoes"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="projecoes"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(Hm,{className:"w-5 h-5"}),"Projees IA",e.jsx(jo,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>o("alertas"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium transition-colors ${n==="alertas"?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:[e.jsx(ea,{className:"w-5 h-5"}),"Alertas IA",e.jsx(jo,{className:"w-4 h-4"})]})]})})}),n==="projecoes"&&e.jsx(che,{}),n==="alertas"&&e.jsx(dhe,{}),n==="movimentacoes"&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Saldo Inicial"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:q(a.saldo_inicial)})]}),e.jsx(ha,{className:"text-blue-500",size:32})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Realizado (Entradas)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:q(a.total_realizado_entradas)}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Previsto: ",q(a.total_previsto_entradas)]})]}),e.jsx(aa,{className:"text-green-500",size:32})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Realizado (Sadas)"}),e.jsx("p",{className:"text-2xl font-bold text-red-700",children:q(a.total_realizado_saidas)}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Previsto: ",q(a.total_previsto_saidas)]})]}),e.jsx(Sa,{className:"text-red-500",size:32})]})}),e.jsx("div",{className:`rounded-lg p-4 border-l-4 ${a.saldo_final>=0?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:a.saldo_final>=0?"#2563eb":"#dc2626"},children:"Saldo Final Realizado"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:a.saldo_final>=0?"#1d4ed8":"#b91c1c"},children:q(a.saldo_final)}),e.jsxs("p",{className:"text-xs mt-1",style:{color:a.saldo_final>=0?"#2563eb":"#dc2626"},children:["Previsto: ",q(a.saldo_previsto_final)]})]}),e.jsx(ha,{className:a.saldo_final>=0?"text-blue-500":"text-red-500",size:32})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsxs("thead",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perodo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",colSpan:"2",children:" Entradas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-red-50",colSpan:"2",children:" Sadas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:" Saldo Final"}),e.jsx("th",{className:"px-6 py-3"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-6 py-2"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-green-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-50",children:"Previsto"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-red-100",children:"Realizado"}),e.jsx("th",{className:"px-4 py-2 text-xs text-gray-600 bg-blue-50",children:"Real / Previsto"}),e.jsx("th",{className:"px-4 py-2"})]})]}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:gr(a==null?void 0:a.periodos).length>0?gr(a==null?void 0:a.periodos).filter(O=>N?O.realizado_entradas>0||O.realizado_saidas>0||O.previsto_entradas>0||O.previsto_saidas>0:!0).map((O,V)=>{const G=A(O),L=O.data,Z=f===L;return e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.data}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-green-50",children:q(O.previsto_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-green-700 text-right bg-green-100",children:q(O.realizado_entradas)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 text-right bg-red-50",children:q(O.previsto_saidas)}),e.jsx("td",{className:"px-4 py-4 text-sm font-bold text-red-700 text-right bg-red-100",children:q(O.realizado_saidas)}),e.jsxs("td",{className:"px-4 py-4 text-sm text-center bg-blue-50",children:[e.jsx("div",{className:`font-bold ${O.realizado_saldo>=0?"text-green-700":"text-red-700"}`,children:q(O.realizado_saldo)}),e.jsxs("div",{className:`text-xs ${O.previsto_saldo>=0?"text-green-600":"text-red-600"}`,children:["Prev: ",q(O.previsto_saldo)]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>b(Z?null:L),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Jc,{size:20,className:`transform transition-transform ${Z?"rotate-90":""}`})})})]}),Z&&G.length>0&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:" Movimentaes Detalhadas"}),gr(G).map((D,K)=>e.jsxs("div",{className:`flex justify-between items-center p-2 rounded ${D.status==="previsto"?"bg-yellow-50 border-l-2 border-yellow-400":"bg-white border-l-2 border-blue-400"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:D.descricao}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.categoria,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${D.status==="previsto"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:D.status==="previsto"?" Previsto":" Realizado"}),e.jsxs("span",{className:`font-bold ${D.tipo==="entrada"?"text-green-600":"text-red-600"}`,children:[D.tipo==="entrada"?"+":"-"," ",q(D.valor)]})]})]},K))]})})})]},L)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma movimentao encontrada para o perodo selecionado"})})})]})})})]})]})};function mhe(){const[t,r]=j.useState(!0),[a,s]=j.useState("resumo"),[n,o]=j.useState(new Date().toISOString().split("T")[0]),[i,l]=j.useState(new Date().toISOString().split("T")[0]),[c,d]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[u,m]=j.useState([]),[x,h]=j.useState([]),[v,p]=j.useState([]),[g,y]=j.useState([]),[f,b]=j.useState([]),[N,_]=j.useState([]),[w,S]=j.useState([]),C=()=>localStorage.getItem("access_token"),E=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A||0),T=A=>new Date(A).toLocaleDateString("pt-BR"),q=async()=>{var V,G;r(!0);const O={headers:{Authorization:`Bearer ${C()}`},params:{data_inicio:n,data_fim:i}};try{const Z=(await U.get("/vendas/relatorio",O)).data;d(Z.resumo||{}),m(Z.vendas_por_data||[]),h(Z.formas_recebimento||[]),p(Z.vendas_por_funcionario||[]),y(Z.vendas_por_tipo||[]),b(Z.vendas_por_grupo||[]),_(Z.produtos_detalhados||[]),S(Z.lista_vendas||[]),console.log(" Dados carregados:",{vendasPorData:((V=Z.vendas_por_data)==null?void 0:V.length)||0,formasRecebimento:((G=Z.formas_recebimento)==null?void 0:G.length)||0})}catch(L){console.error("Erro ao carregar relatrio:",L)}finally{r(!1)}};return j.useEffect(()=>{q()},[n,i]),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{style:{backgroundColor:"red",color:"white",padding:"20px",fontSize:"24px",fontWeight:"bold"},children:" TESTE: ARQUIVO EST SENDO CARREGADO CORRETAMENTE"}),e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:n,onChange:A=>o(A.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"self-center",children:"at"}),e.jsx("input",{type:"date",value:i,onChange:A=>l(A.target.value),className:"border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>s("resumo"),className:`px-4 py-2 font-medium ${a==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>s("produtos"),className:`px-4 py-2 font-medium ${a==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/servio"}),e.jsx("button",{onClick:()=>s("lista"),className:`px-4 py-2 font-medium ${a==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"})]})]}),a==="resumo"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:E(c.venda_bruta)}),e.jsx("div",{className:"text-sm",children:"Venda bruta"})]}),e.jsxs("div",{className:"bg-gray-400 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:E(c.taxa_entrega)}),e.jsx("div",{className:"text-sm",children:"Taxa de entrega"})]}),e.jsxs("div",{className:"bg-yellow-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:E(c.desconto)}),e.jsxs("div",{className:"text-sm",children:[c.percentual_desconto,"% de desconto"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:E(c.venda_liquida)}),e.jsx("div",{className:"text-sm",children:"Venda Lquida"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:E(c.em_aberto)}),e.jsx("div",{className:"text-sm",children:"Em aberto"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. Mdio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[u.map((A,O)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:T(A.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[A.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.saldo_aberto)})]},O)),u.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:u.reduce((A,O)=>A+O.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(u.reduce((A,O)=>A+O.saldo_aberto,0))})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[x.map((A,O)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_total)})]},O)),x.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(x.reduce((A,O)=>A+O.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Funcionrio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[v.map((A,O)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_liquido)})]},O)),v.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:v.reduce((A,O)=>A+O.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(v.reduce((A,O)=>A+O.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(v.reduce((A,O)=>A+O.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(v.reduce((A,O)=>A+O.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[g.map((A,O)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_liquido)})]},O)),g.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:g.reduce((A,O)=>A+O.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(g.reduce((A,O)=>A+O.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(g.reduce((A,O)=>A+O.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(g.reduce((A,O)=>A+O.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[f.map((A,O)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:A.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[A.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.valor_liquido)})]},O)),f.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(f.reduce((A,O)=>A+O.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(f.reduce((A,O)=>A+O.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(f.reduce((A,O)=>A+O.valor_liquido,0))})]})]})]})]})]})]}),a==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/Servios"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/Servios"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Lquido"})]})}),e.jsxs("tbody",{children:[N.map((A,O)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold border-b-2 border-blue-300",children:[e.jsx("td",{className:"px-4 py-2",children:A.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:A.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.total_liquido)})]},`cat-${O}`),A.subcategorias&&A.subcategorias.map((V,G)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium border-b",children:[e.jsxs("td",{className:"px-4 py-2 pl-8",children:[" ",V.subcategoria]}),e.jsx("td",{className:"px-4 py-2 text-right",children:V.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(V.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(V.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(V.total_liquido)})]},`subcat-${O}-${G}`),V.produtos.map((L,Z)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:L.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:L.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(L.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(L.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(L.valor_liquido)})]},`prod-${O}-${G}-${Z}`))]})),A.produtos&&A.produtos.map((V,G)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:V.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:V.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(V.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(V.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:E(V.valor_liquido)})]},`prod-${O}-${G}`))]})),N.length>0&&e.jsxs("tr",{style:{backgroundColor:"#374151",color:"white",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:N.reduce((A,O)=>A+O.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(N.reduce((A,O)=>A+O.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(N.reduce((A,O)=>A+O.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:E(N.reduce((A,O)=>A+O.total_liquido,0))})]})]})]})})]}),a==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Cd."}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Data e hora"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Animal"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:w.map(A=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:A.numero_venda||A.id}),e.jsx("td",{className:"px-4 py-2",children:T(A.data_venda)}),e.jsx("td",{className:"px-4 py-2",children:A.cliente_nome}),e.jsx("td",{className:"px-4 py-2",children:A.pet_nome||"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:E(A.total)}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${A.status==="finalizada"?"bg-green-100 text-green-800":A.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:A.status==="finalizada"?"Baixada":A.status==="baixa_parcial"?"Parcial":"Em aberto"})})]},A.id))})]})})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var jf={};jf.version="0.18.5";var WF=1252,xhe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],HF=function(t){xhe.indexOf(t)!=-1&&(WF=t)};function phe(){HF(1252)}var Ox=function(t){HF(t)};function hhe(){Ox(1200),phe()}var ap=function(r){return String.fromCharCode(r)},Ek=function(r){return String.fromCharCode(r)},Nf,fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fx(t){for(var r="",a=0,s=0,n=0,o=0,i=0,l=0,c=0,d=0;d<t.length;)a=t.charCodeAt(d++),o=a>>2,s=t.charCodeAt(d++),i=(a&3)<<4|s>>4,n=t.charCodeAt(d++),l=(s&15)<<2|n>>6,c=n&63,isNaN(s)?l=c=64:isNaN(n)&&(c=64),r+=fi.charAt(o)+fi.charAt(i)+fi.charAt(l)+fi.charAt(c);return r}function Io(t){var r="",a=0,s=0,n=0,o=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)o=fi.indexOf(t.charAt(d++)),i=fi.indexOf(t.charAt(d++)),a=o<<2|i>>4,r+=String.fromCharCode(a),l=fi.indexOf(t.charAt(d++)),s=(i&15)<<4|l>>2,l!==64&&(r+=String.fromCharCode(s)),c=fi.indexOf(t.charAt(d++)),n=(l&3)<<6|c,c!==64&&(r+=String.fromCharCode(n));return r}var er=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Wo=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(r,a){return a?new Buffer(r,a):new Buffer(r)}:Buffer.from.bind(Buffer)}return function(){}}();function Gl(t){return er?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Ak(t){return er?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var jn=function(r){return er?Wo(r,"binary"):r.split("").map(function(a){return a.charCodeAt(0)&255})};function ab(t){if(typeof ArrayBuffer>"u")return jn(t);for(var r=new ArrayBuffer(t.length),a=new Uint8Array(r),s=0;s!=t.length;++s)a[s]=t.charCodeAt(s)&255;return r}function o0(t){if(Array.isArray(t))return t.map(function(s){return String.fromCharCode(s)}).join("");for(var r=[],a=0;a<t.length;++a)r[a]=String.fromCharCode(t[a]);return r.join("")}function fhe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Ta=er?function(t){return Buffer.concat(t.map(function(r){return Buffer.isBuffer(r)?r:Wo(r)}))}:function(t){if(typeof Uint8Array<"u"){var r=0,a=0;for(r=0;r<t.length;++r)a+=t[r].length;var s=new Uint8Array(a),n=0;for(r=0,a=0;r<t.length;a+=n,++r)if(n=t[r].length,t[r]instanceof Uint8Array)s.set(t[r],a);else{if(typeof t[r]=="string")throw"wtf";s.set(new Uint8Array(t[r]),a)}return s}return[].concat.apply([],t.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))};function ghe(t){for(var r=[],a=0,s=t.length+250,n=Gl(t.length+255),o=0;o<t.length;++o){var i=t.charCodeAt(o);if(i<128)n[a++]=i;else if(i<2048)n[a++]=192|i>>6&31,n[a++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++o)&1023;n[a++]=240|i>>8&7,n[a++]=128|i>>2&63,n[a++]=128|l>>6&15|(i&3)<<4,n[a++]=128|l&63}else n[a++]=224|i>>12&15,n[a++]=128|i>>6&63,n[a++]=128|i&63;a>s&&(r.push(n.slice(0,a)),a=0,n=Gl(65535),s=65530)}return r.push(n.slice(0,a)),Ta(r)}var bm=/\u0000/g,sp=/[\u0001-\u0006]/g;function rd(t){for(var r="",a=t.length-1;a>=0;)r+=t.charAt(a--);return r}function wn(t,r){var a=""+t;return a.length>=r?a:Br("0",r-a.length)+a}function qN(t,r){var a=""+t;return a.length>=r?a:Br(" ",r-a.length)+a}function wf(t,r){var a=""+t;return a.length>=r?a:a+Br(" ",r-a.length)}function bhe(t,r){var a=""+Math.round(t);return a.length>=r?a:Br("0",r-a.length)+a}function vhe(t,r){var a=""+t;return a.length>=r?a:Br("0",r-a.length)+a}var Pk=Math.pow(2,32);function vc(t,r){if(t>Pk||t<-Pk)return bhe(t,r);var a=Math.round(t);return vhe(a,r)}function _f(t,r){return r=r||0,t.length>=7+r&&(t.charCodeAt(r)|32)===103&&(t.charCodeAt(r+1)|32)===101&&(t.charCodeAt(r+2)|32)===110&&(t.charCodeAt(r+3)|32)===101&&(t.charCodeAt(r+4)|32)===114&&(t.charCodeAt(r+5)|32)===97&&(t.charCodeAt(r+6)|32)===108}var Tk=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],jv=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function yhe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Ok={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},jhe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Sf(t,r,a){for(var s=t<0?-1:1,n=t*s,o=0,i=1,l=0,c=1,d=0,u=0,m=Math.floor(n);d<r&&(m=Math.floor(n),l=m*i+o,u=m*d+c,!(n-m<5e-8));)n=1/(n-m),o=i,i=l,c=d,d=u;if(u>r&&(d>r?(u=c,l=o):(u=d,l=i)),!a)return[0,s*l,u];var x=Math.floor(s*l/u);return[x,s*l-x*u,u]}function np(t,r,a){if(t>2958465||t<0)return null;var s=t|0,n=Math.floor(86400*(t-s)),o=0,i=[],l={D:s,T:n,u:86400*(t-s)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),r&&r.date1904&&(s+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++s,++l.D)),s===60)i=a?[1317,10,29]:[1900,2,29],o=3;else if(s===0)i=a?[1317,8,29]:[1900,1,0],o=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],o=c.getDay(),s<60&&(o=(o+6)%7),a&&(o=Ehe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=o,l}var KF=new Date(1899,11,31,0,0,0),Nhe=KF.getTime(),whe=new Date(1900,2,1,0,0,0);function GF(t,r){var a=t.getTime();return r?a-=1461*24*60*60*1e3:t>=whe&&(a+=24*60*60*1e3),(a-(Nhe+(t.getTimezoneOffset()-KF.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function VN(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _he(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function She(t){var r=t<0?12:11,a=VN(t.toFixed(12));return a.length<=r||(a=t.toPrecision(10),a.length<=r)?a:t.toExponential(5)}function Che(t){var r=VN(t.toFixed(11));return r.length>(t<0?12:11)||r==="0"||r==="-0"?t.toPrecision(6):r}function khe(t){var r=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return r>=-4&&r<=-1?a=t.toPrecision(10+r):Math.abs(r)<=9?a=She(t):r===10?a=t.toFixed(10).substr(0,12):a=Che(t),VN(_he(a.toUpperCase()))}function b1(t,r){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):khe(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fi(14,GF(t,r&&r.date1904),r)}throw new Error("unsupported value in General format: "+t)}function Ehe(t,r){r[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function Ahe(t,r,a,s){var n="",o=0,i=0,l=a.y,c,d=0;switch(t){case 98:l=a.y+543;case 121:switch(r.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(r.length){case 1:case 2:c=a.m,d=r.length;break;case 3:return jv[a.m-1][1];case 5:return jv[a.m-1][0];default:return jv[a.m-1][2]}break;case 100:switch(r.length){case 1:case 2:c=a.d,d=r.length;break;case 3:return Tk[a.q][0];default:return Tk[a.q][1]}break;case 104:switch(r.length){case 1:case 2:c=1+(a.H+11)%12,d=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:c=a.H,d=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:c=a.M,d=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000")throw"bad second format: "+r;return a.u===0&&(r=="s"||r=="ss")?wn(a.S,r.length):(s>=2?i=s===3?1e3:100:i=s===1?10:1,o=Math.round(i*(a.S+a.u)),o>=60*i&&(o=0),r==="s"?o===0?"0":""+o/i:(n=wn(o,2+s),r==="ss"?n.substr(0,2):"."+n.substr(2,r.length-1)));case 90:switch(r){case"[h]":case"[hh]":c=a.D*24+a.H;break;case"[m]":case"[mm]":c=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":c=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+r}d=r.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?wn(c,d):"";return u}function gi(t){var r=3;if(t.length<=r)return t;for(var a=t.length%r,s=t.substr(0,a);a!=t.length;a+=r)s+=(s.length>0?",":"")+t.substr(a,r);return s}var XF=/%/g;function Phe(t,r,a){var s=r.replace(XF,""),n=r.length-s.length;return _o(t,s,a*Math.pow(10,2*n))+Br("%",n)}function The(t,r,a){for(var s=r.length-1;r.charCodeAt(s-1)===44;)--s;return _o(t,r.substr(0,s),a/Math.pow(10,3*(r.length-s)))}function YF(t,r){var a,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+YF(t,-r);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var o=Math.floor(Math.log(r)*Math.LOG10E)%n;if(o<0&&(o+=n),a=(r/Math.pow(10,o)).toPrecision(s+1+(n+o)%n),a.indexOf("e")===-1){var i=Math.floor(Math.log(r)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+o):a+="E+"+(i-o);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+o)%n)+"."+u.substr(o)+"E"})}else a=r.toExponential(s);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var QF=/# (\?+)( ?)\/( ?)(\d+)/;function Ohe(t,r,a){var s=parseInt(t[4],10),n=Math.round(r*s),o=Math.floor(n/s),i=n-o*s,l=s;return a+(o===0?"":""+o)+" "+(i===0?Br(" ",t[1].length+1+t[4].length):qN(i,t[1].length)+t[2]+"/"+t[3]+wn(l,t[4].length))}function Fhe(t,r,a){return a+(r===0?"":""+r)+Br(" ",t[1].length+2+t[4].length)}var JF=/^#*0*\.([0#]+)/,ZF=/\).*[0#]/,e$=/\(###\) ###\\?-####/;function Ya(t){for(var r="",a,s=0;s!=t.length;++s)switch(a=t.charCodeAt(s)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(a)}return r}function Fk(t,r){var a=Math.pow(10,r);return""+Math.round(t*a)/a}function $k(t,r){var a=t-Math.floor(t),s=Math.pow(10,r);return r<(""+Math.round(a*s)).length?0:Math.round(a*s)}function $he(t,r){return r<(""+Math.round((t-Math.floor(t))*Math.pow(10,r))).length?1:0}function Rhe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Xs(t,r,a){if(t.charCodeAt(0)===40&&!r.match(ZF)){var s=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Xs("n",s,a):"("+Xs("n",s,-a)+")"}if(r.charCodeAt(r.length-1)===44)return The(t,r,a);if(r.indexOf("%")!==-1)return Phe(t,r,a);if(r.indexOf("E")!==-1)return YF(r,a);if(r.charCodeAt(0)===36)return"$"+Xs(t,r.substr(r.charAt(1)==" "?2:1),a);var n,o,i,l,c=Math.abs(a),d=a<0?"-":"";if(r.match(/^00+$/))return d+vc(c,r.length);if(r.match(/^[#?]+$/))return n=vc(a,0),n==="0"&&(n=""),n.length>r.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(QF))return Ohe(o,c,d);if(r.match(/^#+0+$/))return d+vc(c,r.length-r.indexOf("0"));if(o=r.match(JF))return n=Fk(a,o[1].length).replace(/^([^\.]+)$/,"$1."+Ya(o[1])).replace(/\.$/,"."+Ya(o[1])).replace(/\.(\d*)$/,function(v,p){return"."+p+Br("0",Ya(o[1]).length-p.length)}),r.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),o=r.match(/^(0*)\.(#*)$/))return d+Fk(c,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=r.match(/^#{1,3},##0(\.?)$/))return d+gi(vc(c,0));if(o=r.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Xs(t,r,-a):gi(""+(Math.floor(a)+$he(a,o[1].length)))+"."+wn($k(a,o[1].length),o[1].length);if(o=r.match(/^#,#*,#0/))return Xs(t,r.replace(/^#,#*,/,""),a);if(o=r.match(/^([0#]+)(\\?-([0#]+))+$/))return n=rd(Xs(t,r.replace(/[\\-]/g,""),a)),i=0,rd(rd(r.replace(/\\/g,"")).replace(/[0#]/g,function(v){return i<n.length?n.charAt(i++):v==="0"?"0":""}));if(r.match(e$))return n=Xs(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(o=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(o[4].length,7),l=Sf(c,Math.pow(10,i)-1,!1),n=""+d,u=_o("n",o[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+o[2]+"/"+o[3],u=wf(l[2],i),u.length<o[4].length&&(u=Ya(o[4].substr(o[4].length-u.length))+u),n+=u,n;if(o=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(o[1].length,o[4].length),7),l=Sf(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?qN(l[1],i)+o[2]+"/"+o[3]+wf(l[2],i):Br(" ",2*i+1+o[2].length+o[3].length));if(o=r.match(/^[#0?]+$/))return n=vc(a,0),r.length<=n.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var m=r.indexOf(".")-i,x=r.length-n.length-m;return Ya(r.substr(0,m)+n+r.substr(r.length-x))}if(o=r.match(/^00,000\.([#0]*0)$/))return i=$k(a,o[1].length),a<0?"-"+Xs(t,r,-a):gi(Rhe(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?wn(0,3-v.length):"")+v})+"."+wn(i,o[1].length);switch(r){case"###,##0.00":return Xs(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var h=gi(vc(c,0));return h!=="0"?d+h:"";case"###,###.00":return Xs(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return Xs(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+r+"|")}function Dhe(t,r,a){for(var s=r.length-1;r.charCodeAt(s-1)===44;)--s;return _o(t,r.substr(0,s),a/Math.pow(10,3*(r.length-s)))}function Mhe(t,r,a){var s=r.replace(XF,""),n=r.length-s.length;return _o(t,s,a*Math.pow(10,2*n))+Br("%",n)}function t$(t,r){var a,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+t$(t,-r);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var o=Math.floor(Math.log(r)*Math.LOG10E)%n;if(o<0&&(o+=n),a=(r/Math.pow(10,o)).toPrecision(s+1+(n+o)%n),!a.match(/[Ee]/)){var i=Math.floor(Math.log(r)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+o):a+="E+"+(i-o),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+o)%n)+"."+u.substr(o)+"E"})}else a=r.toExponential(s);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function Mn(t,r,a){if(t.charCodeAt(0)===40&&!r.match(ZF)){var s=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Mn("n",s,a):"("+Mn("n",s,-a)+")"}if(r.charCodeAt(r.length-1)===44)return Dhe(t,r,a);if(r.indexOf("%")!==-1)return Mhe(t,r,a);if(r.indexOf("E")!==-1)return t$(r,a);if(r.charCodeAt(0)===36)return"$"+Mn(t,r.substr(r.charAt(1)==" "?2:1),a);var n,o,i,l,c=Math.abs(a),d=a<0?"-":"";if(r.match(/^00+$/))return d+wn(c,r.length);if(r.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>r.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(QF))return Fhe(o,c,d);if(r.match(/^#+0+$/))return d+wn(c,r.length-r.indexOf("0"));if(o=r.match(JF))return n=(""+a).replace(/^([^\.]+)$/,"$1."+Ya(o[1])).replace(/\.$/,"."+Ya(o[1])),n=n.replace(/\.(\d*)$/,function(v,p){return"."+p+Br("0",Ya(o[1]).length-p.length)}),r.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),o=r.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=r.match(/^#{1,3},##0(\.?)$/))return d+gi(""+c);if(o=r.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Mn(t,r,-a):gi(""+a)+"."+Br("0",o[1].length);if(o=r.match(/^#,#*,#0/))return Mn(t,r.replace(/^#,#*,/,""),a);if(o=r.match(/^([0#]+)(\\?-([0#]+))+$/))return n=rd(Mn(t,r.replace(/[\\-]/g,""),a)),i=0,rd(rd(r.replace(/\\/g,"")).replace(/[0#]/g,function(v){return i<n.length?n.charAt(i++):v==="0"?"0":""}));if(r.match(e$))return n=Mn(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(o=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(o[4].length,7),l=Sf(c,Math.pow(10,i)-1,!1),n=""+d,u=_o("n",o[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+o[2]+"/"+o[3],u=wf(l[2],i),u.length<o[4].length&&(u=Ya(o[4].substr(o[4].length-u.length))+u),n+=u,n;if(o=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(o[1].length,o[4].length),7),l=Sf(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?qN(l[1],i)+o[2]+"/"+o[3]+wf(l[2],i):Br(" ",2*i+1+o[2].length+o[3].length));if(o=r.match(/^[#0?]+$/))return n=""+a,r.length<=n.length?n:Ya(r.substr(0,r.length-n.length))+n;if(o=r.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var m=r.indexOf(".")-i,x=r.length-n.length-m;return Ya(r.substr(0,m)+n+r.substr(r.length-x))}if(o=r.match(/^00,000\.([#0]*0)$/))return a<0?"-"+Mn(t,r,-a):gi(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?wn(0,3-v.length):"")+v})+"."+wn(0,o[1].length);switch(r){case"###,###":case"##,###":case"#,###":var h=gi(""+c);return h!=="0"?d+h:"";default:if(r.match(/\.[0#?]*$/))return Mn(t,r.slice(0,r.lastIndexOf(".")),a)+Ya(r.slice(r.lastIndexOf(".")))}throw new Error("unsupported format |"+r+"|")}function _o(t,r,a){return(a|0)===a?Mn(t,r,a):Xs(t,r,a)}function Ihe(t){for(var r=[],a=!1,s=0,n=0;s<t.length;++s)switch(t.charCodeAt(s)){case 34:a=!a;break;case 95:case 42:case 92:++s;break;case 59:r[r.length]=t.substr(n,s-n),n=s+1}if(r[r.length]=t.substr(n),a===!0)throw new Error("Format |"+t+"| unterminated string ");return r}var r$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function a$(t){for(var r=0,a="",s="";r<t.length;)switch(a=t.charAt(r)){case"G":_f(t,r)&&(r+=6),r++;break;case'"':for(;t.charCodeAt(++r)!==34&&r<t.length;);++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(t.charAt(r+1)==="1"||t.charAt(r+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(r,3).toUpperCase()==="A/P"||t.substr(r,5).toUpperCase()==="AM/PM"||t.substr(r,5).toUpperCase()==="/")return!0;++r;break;case"[":for(s=a;t.charAt(r++)!=="]"&&r<t.length;)s+=t.charAt(r);if(s.match(r$))return!0;break;case".":case"0":case"#":for(;r<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++r))>-1||a=="\\"&&t.charAt(r+1)=="-"&&"0#".indexOf(t.charAt(r+2))>-1););break;case"?":for(;t.charAt(++r)===a;);break;case"*":++r,(t.charAt(r)==" "||t.charAt(r)=="*")&&++r;break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;r<t.length&&"0123456789".indexOf(t.charAt(++r))>-1;);break;case" ":++r;break;default:++r;break}return!1}function Lhe(t,r,a,s){for(var n=[],o="",i=0,l="",c="t",d,u,m,x="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!_f(t,i))throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"G",v:"General"},i+=7;break;case'"':for(o="";(m=t.charCodeAt(++i))!==34&&i<t.length;)o+=String.fromCharCode(m);n[n.length]={t:"t",v:o},++i;break;case"\\":var h=t.charAt(++i),v=h==="("||h===")"?h:"t";n[n.length]={t:v,v:h},++i;break;case"_":n[n.length]={t:"t",v:" "},i+=2;break;case"@":n[n.length]={t:"T",v:r},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(d==null&&(d=np(r,a,t.charAt(i+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0||d==null&&(d=np(r,a),d==null))return"";for(o=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)o+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=x),n[n.length]={t:l,v:o},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(d==null&&(d=np(r,a)),t.substr(i,3).toUpperCase()==="A/P"?(d!=null&&(p.v=d.H>=12?"P":"A"),p.t="T",x="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(d!=null&&(p.v=d.H>=12?"PM":"AM"),p.t="T",i+=5,x="h"):t.substr(i,5).toUpperCase()==="/"?(d!=null&&(p.v=d.H>=12?"":""),p.t="T",i+=5,x="h"):(p.t="t",++i),d==null&&p.t==="T")return"";n[n.length]=p,c=l;break;case"[":for(o=l;t.charAt(i++)!=="]"&&i<t.length;)o+=t.charAt(i);if(o.slice(-1)!=="]")throw'unterminated "[" block: |'+o+"|";if(o.match(r$)){if(d==null&&(d=np(r,a),d==null))return"";n[n.length]={t:"Z",v:o.toLowerCase()},c=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",a$(t)||(n[n.length]={t:"t",v:o}));break;case".":if(d!=null){for(o=l;++i<t.length&&(l=t.charAt(i))==="0";)o+=l;n[n.length]={t:"s",v:o};break}case"0":case"#":for(o=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)o+=l;n[n.length]={t:"n",v:o};break;case"?":for(o=l;t.charAt(++i)===l;)o+=l;n[n.length]={t:l,v:o},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":n[n.length]={t:s===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)o+=t.charAt(i);n[n.length]={t:"D",v:o};break;case" ":n[n.length]={t:l,v:l},++i;break;case"$":n[n.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"t",v:l},++i;break}var g=0,y=0,f;for(i=n.length-1,c="t";i>=0;--i)switch(n[i].t){case"h":case"H":n[i].t=x,c="h",g<1&&(g=1);break;case"s":(f=n[i].v.match(/\.0+$/))&&(y=Math.max(y,f[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=n[i].t;break;case"m":c==="s"&&(n[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&n[i].v.match(/[Hh]/)&&(g=1),g<2&&n[i].v.match(/[Mm]/)&&(g=2),g<3&&n[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var b="",N;for(i=0;i<n.length;++i)switch(n[i].t){case"t":case"T":case" ":case"D":break;case"X":n[i].v="",n[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[i].v=Ahe(n[i].t.charCodeAt(0),n[i].v,d,y),n[i].t="t";break;case"n":case"?":for(N=i+1;n[N]!=null&&((l=n[N].t)==="?"||l==="D"||(l===" "||l==="t")&&n[N+1]!=null&&(n[N+1].t==="?"||n[N+1].t==="t"&&n[N+1].v==="/")||n[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[N].v==="/"||n[N].v===" "&&n[N+1]!=null&&n[N+1].t=="?"));)n[i].v+=n[N].v,n[N]={v:"",t:";"},++N;b+=n[i].v,i=N-1;break;case"G":n[i].t="t",n[i].v=b1(r,a);break}var _="",w,S;if(b.length>0){b.charCodeAt(0)==40?(w=r<0&&b.charCodeAt(0)===45?-r:r,S=_o("n",b,w)):(w=r<0&&s>1?-r:r,S=_o("n",b,w),w<0&&n[0]&&n[0].t=="t"&&(S=S.substr(1),n[0].v="-"+n[0].v)),N=S.length-1;var C=n.length;for(i=0;i<n.length;++i)if(n[i]!=null&&n[i].t!="t"&&n[i].v.indexOf(".")>-1){C=i;break}var E=n.length;if(C===n.length&&S.indexOf("E")===-1){for(i=n.length-1;i>=0;--i)n[i]==null||"n?".indexOf(n[i].t)===-1||(N>=n[i].v.length-1?(N-=n[i].v.length,n[i].v=S.substr(N+1,n[i].v.length)):N<0?n[i].v="":(n[i].v=S.substr(0,N+1),N=-1),n[i].t="t",E=i);N>=0&&E<n.length&&(n[E].v=S.substr(0,N+1)+n[E].v)}else if(C!==n.length&&S.indexOf("E")===-1){for(N=S.indexOf(".")-1,i=C;i>=0;--i)if(!(n[i]==null||"n?".indexOf(n[i].t)===-1)){for(u=n[i].v.indexOf(".")>-1&&i===C?n[i].v.indexOf(".")-1:n[i].v.length-1,_=n[i].v.substr(u+1);u>=0;--u)N>=0&&(n[i].v.charAt(u)==="0"||n[i].v.charAt(u)==="#")&&(_=S.charAt(N--)+_);n[i].v=_,n[i].t="t",E=i}for(N>=0&&E<n.length&&(n[E].v=S.substr(0,N+1)+n[E].v),N=S.indexOf(".")+1,i=C;i<n.length;++i)if(!(n[i]==null||"n?(".indexOf(n[i].t)===-1&&i!==C)){for(u=n[i].v.indexOf(".")>-1&&i===C?n[i].v.indexOf(".")+1:0,_=n[i].v.substr(0,u);u<n[i].v.length;++u)N<S.length&&(_+=S.charAt(N++));n[i].v=_,n[i].t="t",E=i}}}for(i=0;i<n.length;++i)n[i]!=null&&"n?".indexOf(n[i].t)>-1&&(w=s>1&&r<0&&i>0&&n[i-1].v==="-"?-r:r,n[i].v=_o(n[i].t,n[i].v,w),n[i].t="t");var T="";for(i=0;i!==n.length;++i)n[i]!=null&&(T+=n[i].v);return T}var Rk=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Dk(t,r){if(r==null)return!1;var a=parseFloat(r[2]);switch(r[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function Bhe(t,r){var a=Ihe(t),s=a.length,n=a[s-1].indexOf("@");if(s<4&&n>-1&&--s,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof r!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var o=r>0?a[0]:r<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[s,o];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var i=a[0].match(Rk),l=a[1].match(Rk);return Dk(r,i)?[s,a[0]]:Dk(r,l)?[s,a[1]]:[s,a[i!=null&&l!=null?2:1]]}return[s,o]}function Fi(t,r,a){a==null&&(a={});var s="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?s=a.dateNF:s=t;break;case"number":t==14&&a.dateNF?s=a.dateNF:s=(a.table!=null?a.table:qr)[t],s==null&&(s=a.table&&a.table[Ok[t]]||qr[Ok[t]]),s==null&&(s=jhe[t]||"General");break}if(_f(s,0))return b1(r,a);r instanceof Date&&(r=GF(r,a.date1904));var n=Bhe(s,r);if(_f(n[1]))return b1(r,a);if(r===!0)r="TRUE";else if(r===!1)r="FALSE";else if(r===""||r==null)return"";return Lhe(n[1],r,a,n[0])}function s$(t,r){if(typeof r!="number"){r=+r||-1;for(var a=0;a<392;++a){if(qr[a]==null){r<0&&(r=a);continue}if(qr[a]==t){r=a;break}}r<0&&(r=391)}return qr[r]=t,r}function sb(t){for(var r=0;r!=392;++r)t[r]!==void 0&&s$(t[r],r)}function nb(){qr=yhe()}var n$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function zhe(t){var r=typeof t=="number"?qr[t]:t;return r=r.replace(n$,"(\\d+)"),new RegExp("^"+r+"$")}function qhe(t,r,a){var s=-1,n=-1,o=-1,i=-1,l=-1,c=-1;(r.match(n$)||[]).forEach(function(m,x){var h=parseInt(a[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":s=h;break;case"d":o=h;break;case"h":i=h;break;case"s":c=h;break;case"m":i>=0?l=h:n=h;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?d:s==-1&&n==-1&&o==-1?u:d+"T"+u}var Vhe=function(){var t={};t.version="1.2.0";function r(){for(var S=0,C=new Array(256),E=0;E!=256;++E)S=E,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,C[E]=S;return typeof Int32Array<"u"?new Int32Array(C):C}var a=r();function s(S){var C=0,E=0,T=0,q=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)q[T]=S[T];for(T=0;T!=256;++T)for(E=S[T],C=256+T;C<4096;C+=256)E=q[C]=E>>>8^S[E&255];var A=[];for(T=1;T!=16;++T)A[T-1]=typeof Int32Array<"u"?q.subarray(T*256,T*256+256):q.slice(T*256,T*256+256);return A}var n=s(a),o=n[0],i=n[1],l=n[2],c=n[3],d=n[4],u=n[5],m=n[6],x=n[7],h=n[8],v=n[9],p=n[10],g=n[11],y=n[12],f=n[13],b=n[14];function N(S,C){for(var E=C^-1,T=0,q=S.length;T<q;)E=E>>>8^a[(E^S.charCodeAt(T++))&255];return~E}function _(S,C){for(var E=C^-1,T=S.length-15,q=0;q<T;)E=b[S[q++]^E&255]^f[S[q++]^E>>8&255]^y[S[q++]^E>>16&255]^g[S[q++]^E>>>24]^p[S[q++]]^v[S[q++]]^h[S[q++]]^x[S[q++]]^m[S[q++]]^u[S[q++]]^d[S[q++]]^c[S[q++]]^l[S[q++]]^i[S[q++]]^o[S[q++]]^a[S[q++]];for(T+=15;q<T;)E=E>>>8^a[(E^S[q++])&255];return~E}function w(S,C){for(var E=C^-1,T=0,q=S.length,A=0,O=0;T<q;)A=S.charCodeAt(T++),A<128?E=E>>>8^a[(E^A)&255]:A<2048?(E=E>>>8^a[(E^(192|A>>6&31))&255],E=E>>>8^a[(E^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,O=S.charCodeAt(T++)&1023,E=E>>>8^a[(E^(240|A>>8&7))&255],E=E>>>8^a[(E^(128|A>>2&63))&255],E=E>>>8^a[(E^(128|O>>6&15|(A&3)<<4))&255],E=E>>>8^a[(E^(128|O&63))&255]):(E=E>>>8^a[(E^(224|A>>12&15))&255],E=E>>>8^a[(E^(128|A>>6&63))&255],E=E>>>8^a[(E^(128|A&63))&255]);return~E}return t.table=a,t.bstr=N,t.buf=_,t.str=w,t}(),xr=function(){var r={};r.version="1.2.1";function a(J,P){for(var H=J.split("/"),te=P.split("/"),ne=0,de=0,se=Math.min(H.length,te.length);ne<se;++ne){if(de=H[ne].length-te[ne].length)return de;if(H[ne]!=te[ne])return H[ne]<te[ne]?-1:1}return H.length-te.length}function s(J){if(J.charAt(J.length-1)=="/")return J.slice(0,-1).indexOf("/")===-1?J:s(J.slice(0,-1));var P=J.lastIndexOf("/");return P===-1?J:J.slice(0,P+1)}function n(J){if(J.charAt(J.length-1)=="/")return n(J.slice(0,-1));var P=J.lastIndexOf("/");return P===-1?J:J.slice(P+1)}function o(J,P){typeof P=="string"&&(P=new Date(P));var H=P.getHours();H=H<<6|P.getMinutes(),H=H<<5|P.getSeconds()>>>1,J.write_shift(2,H);var te=P.getFullYear()-1980;te=te<<4|P.getMonth()+1,te=te<<5|P.getDate(),J.write_shift(2,te)}function i(J){var P=J.read_shift(2)&65535,H=J.read_shift(2)&65535,te=new Date,ne=H&31;H>>>=5;var de=H&15;H>>>=4,te.setMilliseconds(0),te.setFullYear(H+1980),te.setMonth(de-1),te.setDate(ne);var se=P&31;P>>>=5;var fe=P&63;return P>>>=6,te.setHours(P),te.setMinutes(fe),te.setSeconds(se<<1),te}function l(J){Ts(J,0);for(var P={},H=0;J.l<=J.length-4;){var te=J.read_shift(2),ne=J.read_shift(2),de=J.l+ne,se={};switch(te){case 21589:H=J.read_shift(1),H&1&&(se.mtime=J.read_shift(4)),ne>5&&(H&2&&(se.atime=J.read_shift(4)),H&4&&(se.ctime=J.read_shift(4))),se.mtime&&(se.mt=new Date(se.mtime*1e3));break}J.l=de,P[te]=se}return P}var c;function d(){return c||(c={})}function u(J,P){if(J[0]==80&&J[1]==75)return qe(J,P);if((J[0]|32)==109&&(J[1]|32)==105)return ot(J,P);if(J.length<512)throw new Error("CFB file size "+J.length+" < 512");var H=3,te=512,ne=0,de=0,se=0,fe=0,he=0,ye=[],ke=J.slice(0,512);Ts(ke,0);var He=m(ke);switch(H=He[0],H){case 3:te=512;break;case 4:te=4096;break;case 0:if(He[1]==0)return qe(J,P);default:throw new Error("Major Version: Expected 3 or 4 saw "+H)}te!==512&&(ke=J.slice(0,te),Ts(ke,28));var Ze=J.slice(0,te);x(ke,H);var tt=ke.read_shift(4,"i");if(H===3&&tt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+tt);ke.l+=4,se=ke.read_shift(4,"i"),ke.l+=4,ke.chk("00100000","Mini Stream Cutoff Size: "),fe=ke.read_shift(4,"i"),ne=ke.read_shift(4,"i"),he=ke.read_shift(4,"i"),de=ke.read_shift(4,"i");for(var Qe=-1,ht=0;ht<109&&(Qe=ke.read_shift(4,"i"),!(Qe<0));++ht)ye[ht]=Qe;var Pt=h(J,te);g(he,de,Pt,te,ye);var Qt=f(Pt,se,ye,te);Qt[se].name="!Directory",ne>0&&fe!==O&&(Qt[fe].name="!MiniFAT"),Qt[ye[0]].name="!FAT",Qt.fat_addrs=ye,Qt.ssz=te;var rr={},Ur=[],Us=[],$n=[];b(se,Qt,Pt,Ur,ne,rr,Us,fe),v(Us,$n,Ur),Ur.shift();var Rn={FileIndex:Us,FullPaths:$n};return P&&P.raw&&(Rn.raw={header:Ze,sectors:Pt}),Rn}function m(J){if(J[J.l]==80&&J[J.l+1]==75)return[0,0];J.chk(V,"Header Signature: "),J.l+=16;var P=J.read_shift(2,"u");return[J.read_shift(2,"u"),P]}function x(J,P){var H=9;switch(J.l+=2,H=J.read_shift(2)){case 9:if(P!=3)throw new Error("Sector Shift: Expected 9 saw "+H);break;case 12:if(P!=4)throw new Error("Sector Shift: Expected 12 saw "+H);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+H)}J.chk("0600","Mini Sector Shift: "),J.chk("000000000000","Reserved: ")}function h(J,P){for(var H=Math.ceil(J.length/P)-1,te=[],ne=1;ne<H;++ne)te[ne-1]=J.slice(ne*P,(ne+1)*P);return te[H-1]=J.slice(H*P),te}function v(J,P,H){for(var te=0,ne=0,de=0,se=0,fe=0,he=H.length,ye=[],ke=[];te<he;++te)ye[te]=ke[te]=te,P[te]=H[te];for(;fe<ke.length;++fe)te=ke[fe],ne=J[te].L,de=J[te].R,se=J[te].C,ye[te]===te&&(ne!==-1&&ye[ne]!==ne&&(ye[te]=ye[ne]),de!==-1&&ye[de]!==de&&(ye[te]=ye[de])),se!==-1&&(ye[se]=te),ne!==-1&&te!=ye[te]&&(ye[ne]=ye[te],ke.lastIndexOf(ne)<fe&&ke.push(ne)),de!==-1&&te!=ye[te]&&(ye[de]=ye[te],ke.lastIndexOf(de)<fe&&ke.push(de));for(te=1;te<he;++te)ye[te]===te&&(de!==-1&&ye[de]!==de?ye[te]=ye[de]:ne!==-1&&ye[ne]!==ne&&(ye[te]=ye[ne]));for(te=1;te<he;++te)if(J[te].type!==0){if(fe=te,fe!=ye[fe])do fe=ye[fe],P[te]=P[fe]+"/"+P[te];while(fe!==0&&ye[fe]!==-1&&fe!=ye[fe]);ye[te]=-1}for(P[0]+="/",te=1;te<he;++te)J[te].type!==2&&(P[te]+="/")}function p(J,P,H){for(var te=J.start,ne=J.size,de=[],se=te;H&&ne>0&&se>=0;)de.push(P.slice(se*A,se*A+A)),ne-=A,se=ll(H,se*4);return de.length===0?ze(0):Ta(de).slice(0,J.size)}function g(J,P,H,te,ne){var de=O;if(J===O){if(P!==0)throw new Error("DIFAT chain shorter than expected")}else if(J!==-1){var se=H[J],fe=(te>>>2)-1;if(!se)return;for(var he=0;he<fe&&(de=ll(se,he*4))!==O;++he)ne.push(de);g(ll(se,te-4),P-1,H,te,ne)}}function y(J,P,H,te,ne){var de=[],se=[];ne||(ne=[]);var fe=te-1,he=0,ye=0;for(he=P;he>=0;){ne[he]=!0,de[de.length]=he,se.push(J[he]);var ke=H[Math.floor(he*4/te)];if(ye=he*4&fe,te<4+ye)throw new Error("FAT boundary crossed: "+he+" 4 "+te);if(!J[ke])break;he=ll(J[ke],ye)}return{nodes:de,data:Uk([se])}}function f(J,P,H,te){var ne=J.length,de=[],se=[],fe=[],he=[],ye=te-1,ke=0,He=0,Ze=0,tt=0;for(ke=0;ke<ne;++ke)if(fe=[],Ze=ke+P,Ze>=ne&&(Ze-=ne),!se[Ze]){he=[];var Qe=[];for(He=Ze;He>=0;){Qe[He]=!0,se[He]=!0,fe[fe.length]=He,he.push(J[He]);var ht=H[Math.floor(He*4/te)];if(tt=He*4&ye,te<4+tt)throw new Error("FAT boundary crossed: "+He+" 4 "+te);if(!J[ht]||(He=ll(J[ht],tt),Qe[He]))break}de[Ze]={nodes:fe,data:Uk([he])}}return de}function b(J,P,H,te,ne,de,se,fe){for(var he=0,ye=te.length?2:0,ke=P[J].data,He=0,Ze=0,tt;He<ke.length;He+=128){var Qe=ke.slice(He,He+128);Ts(Qe,64),Ze=Qe.read_shift(2),tt=GN(Qe,0,Ze-ye),te.push(tt);var ht={name:tt,type:Qe.read_shift(1),color:Qe.read_shift(1),L:Qe.read_shift(4,"i"),R:Qe.read_shift(4,"i"),C:Qe.read_shift(4,"i"),clsid:Qe.read_shift(16),state:Qe.read_shift(4,"i"),start:0,size:0},Pt=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);Pt!==0&&(ht.ct=N(Qe,Qe.l-8));var Qt=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);Qt!==0&&(ht.mt=N(Qe,Qe.l-8)),ht.start=Qe.read_shift(4,"i"),ht.size=Qe.read_shift(4,"i"),ht.size<0&&ht.start<0&&(ht.size=ht.type=0,ht.start=O,ht.name=""),ht.type===5?(he=ht.start,ne>0&&he!==O&&(P[he].name="!StreamData")):ht.size>=4096?(ht.storage="fat",P[ht.start]===void 0&&(P[ht.start]=y(H,ht.start,P.fat_addrs,P.ssz)),P[ht.start].name=ht.name,ht.content=P[ht.start].data.slice(0,ht.size)):(ht.storage="minifat",ht.size<0?ht.size=0:he!==O&&ht.start!==O&&P[he]&&(ht.content=p(ht,P[he].data,(P[fe]||{}).data))),ht.content&&Ts(ht.content,0),de[tt]=ht,se.push(ht)}}function N(J,P){return new Date((Fs(J,P+4)/1e7*Math.pow(2,32)+Fs(J,P)/1e7-11644473600)*1e3)}function _(J,P){return d(),u(c.readFileSync(J),P)}function w(J,P){var H=P&&P.type;switch(H||er&&Buffer.isBuffer(J)&&(H="buffer"),H||"base64"){case"file":return _(J,P);case"base64":return u(jn(Io(J)),P);case"binary":return u(jn(J),P)}return u(J,P)}function S(J,P){var H=P||{},te=H.root||"Root Entry";if(J.FullPaths||(J.FullPaths=[]),J.FileIndex||(J.FileIndex=[]),J.FullPaths.length!==J.FileIndex.length)throw new Error("inconsistent CFB structure");J.FullPaths.length===0&&(J.FullPaths[0]=te+"/",J.FileIndex[0]={name:te,type:5}),H.CLSID&&(J.FileIndex[0].clsid=H.CLSID),C(J)}function C(J){var P="Sh33tJ5";if(!xr.find(J,"/"+P)){var H=ze(4);H[0]=55,H[1]=H[3]=50,H[2]=54,J.FileIndex.push({name:P,type:2,content:H,size:4,L:69,R:69,C:69}),J.FullPaths.push(J.FullPaths[0]+P),E(J)}}function E(J,P){S(J);for(var H=!1,te=!1,ne=J.FullPaths.length-1;ne>=0;--ne){var de=J.FileIndex[ne];switch(de.type){case 0:te?H=!0:(J.FileIndex.pop(),J.FullPaths.pop());break;case 1:case 2:case 5:te=!0,isNaN(de.R*de.L*de.C)&&(H=!0),de.R>-1&&de.L>-1&&de.R==de.L&&(H=!0);break;default:H=!0;break}}if(!(!H&&!P)){var se=new Date(1987,1,19),fe=0,he=Object.create?Object.create(null):{},ye=[];for(ne=0;ne<J.FullPaths.length;++ne)he[J.FullPaths[ne]]=!0,J.FileIndex[ne].type!==0&&ye.push([J.FullPaths[ne],J.FileIndex[ne]]);for(ne=0;ne<ye.length;++ne){var ke=s(ye[ne][0]);te=he[ke],te||(ye.push([ke,{name:n(ke).replace("/",""),type:1,clsid:L,ct:se,mt:se,content:null}]),he[ke]=!0)}for(ye.sort(function(tt,Qe){return a(tt[0],Qe[0])}),J.FullPaths=[],J.FileIndex=[],ne=0;ne<ye.length;++ne)J.FullPaths[ne]=ye[ne][0],J.FileIndex[ne]=ye[ne][1];for(ne=0;ne<ye.length;++ne){var He=J.FileIndex[ne],Ze=J.FullPaths[ne];if(He.name=n(Ze).replace("/",""),He.L=He.R=He.C=-(He.color=1),He.size=He.content?He.content.length:0,He.start=0,He.clsid=He.clsid||L,ne===0)He.C=ye.length>1?1:-1,He.size=0,He.type=5;else if(Ze.slice(-1)=="/"){for(fe=ne+1;fe<ye.length&&s(J.FullPaths[fe])!=Ze;++fe);for(He.C=fe>=ye.length?-1:fe,fe=ne+1;fe<ye.length&&s(J.FullPaths[fe])!=s(Ze);++fe);He.R=fe>=ye.length?-1:fe,He.type=1}else s(J.FullPaths[ne+1]||"")==s(Ze)&&(He.R=ne+1),He.type=2}}}function T(J,P){var H=P||{};if(H.fileType=="mad")return xt(J,H);switch(E(J),H.fileType){case"zip":return ve(J,H)}var te=function(tt){for(var Qe=0,ht=0,Pt=0;Pt<tt.FileIndex.length;++Pt){var Qt=tt.FileIndex[Pt];if(Qt.content){var rr=Qt.content.length;rr>0&&(rr<4096?Qe+=rr+63>>6:ht+=rr+511>>9)}}for(var Ur=tt.FullPaths.length+3>>2,Us=Qe+7>>3,$n=Qe+127>>7,Rn=Us+ht+Ur+$n,is=Rn+127>>7,Ho=is<=109?0:Math.ceil((is-109)/127);Rn+is+Ho+127>>7>is;)Ho=++is<=109?0:Math.ceil((is-109)/127);var ls=[1,Ho,is,$n,Ur,ht,Qe,0];return tt.FileIndex[0].size=Qe<<6,ls[7]=(tt.FileIndex[0].start=ls[0]+ls[1]+ls[2]+ls[3]+ls[4]+ls[5])+(ls[6]+7>>3),ls}(J),ne=ze(te[7]<<9),de=0,se=0;{for(de=0;de<8;++de)ne.write_shift(1,G[de]);for(de=0;de<8;++de)ne.write_shift(2,0);for(ne.write_shift(2,62),ne.write_shift(2,3),ne.write_shift(2,65534),ne.write_shift(2,9),ne.write_shift(2,6),de=0;de<3;++de)ne.write_shift(2,0);for(ne.write_shift(4,0),ne.write_shift(4,te[2]),ne.write_shift(4,te[0]+te[1]+te[2]+te[3]-1),ne.write_shift(4,0),ne.write_shift(4,4096),ne.write_shift(4,te[3]?te[0]+te[1]+te[2]-1:O),ne.write_shift(4,te[3]),ne.write_shift(-4,te[1]?te[0]-1:O),ne.write_shift(4,te[1]),de=0;de<109;++de)ne.write_shift(-4,de<te[2]?te[1]+de:-1)}if(te[1])for(se=0;se<te[1];++se){for(;de<236+se*127;++de)ne.write_shift(-4,de<te[2]?te[1]+de:-1);ne.write_shift(-4,se===te[1]-1?O:se+1)}var fe=function(tt){for(se+=tt;de<se-1;++de)ne.write_shift(-4,de+1);tt&&(++de,ne.write_shift(-4,O))};for(se=de=0,se+=te[1];de<se;++de)ne.write_shift(-4,Z.DIFSECT);for(se+=te[2];de<se;++de)ne.write_shift(-4,Z.FATSECT);fe(te[3]),fe(te[4]);for(var he=0,ye=0,ke=J.FileIndex[0];he<J.FileIndex.length;++he)ke=J.FileIndex[he],ke.content&&(ye=ke.content.length,!(ye<4096)&&(ke.start=se,fe(ye+511>>9)));for(fe(te[6]+7>>3);ne.l&511;)ne.write_shift(-4,Z.ENDOFCHAIN);for(se=de=0,he=0;he<J.FileIndex.length;++he)ke=J.FileIndex[he],ke.content&&(ye=ke.content.length,!(!ye||ye>=4096)&&(ke.start=se,fe(ye+63>>6)));for(;ne.l&511;)ne.write_shift(-4,Z.ENDOFCHAIN);for(de=0;de<te[4]<<2;++de){var He=J.FullPaths[de];if(!He||He.length===0){for(he=0;he<17;++he)ne.write_shift(4,0);for(he=0;he<3;++he)ne.write_shift(4,-1);for(he=0;he<12;++he)ne.write_shift(4,0);continue}ke=J.FileIndex[de],de===0&&(ke.start=ke.size?ke.start-1:O);var Ze=de===0&&H.root||ke.name;if(ye=2*(Ze.length+1),ne.write_shift(64,Ze,"utf16le"),ne.write_shift(2,ye),ne.write_shift(1,ke.type),ne.write_shift(1,ke.color),ne.write_shift(-4,ke.L),ne.write_shift(-4,ke.R),ne.write_shift(-4,ke.C),ke.clsid)ne.write_shift(16,ke.clsid,"hex");else for(he=0;he<4;++he)ne.write_shift(4,0);ne.write_shift(4,ke.state||0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,ke.start),ne.write_shift(4,ke.size),ne.write_shift(4,0)}for(de=1;de<J.FileIndex.length;++de)if(ke=J.FileIndex[de],ke.size>=4096)if(ne.l=ke.start+1<<9,er&&Buffer.isBuffer(ke.content))ke.content.copy(ne,ne.l,0,ke.size),ne.l+=ke.size+511&-512;else{for(he=0;he<ke.size;++he)ne.write_shift(1,ke.content[he]);for(;he&511;++he)ne.write_shift(1,0)}for(de=1;de<J.FileIndex.length;++de)if(ke=J.FileIndex[de],ke.size>0&&ke.size<4096)if(er&&Buffer.isBuffer(ke.content))ke.content.copy(ne,ne.l,0,ke.size),ne.l+=ke.size+63&-64;else{for(he=0;he<ke.size;++he)ne.write_shift(1,ke.content[he]);for(;he&63;++he)ne.write_shift(1,0)}if(er)ne.l=ne.length;else for(;ne.l<ne.length;)ne.write_shift(1,0);return ne}function q(J,P){var H=J.FullPaths.map(function(he){return he.toUpperCase()}),te=H.map(function(he){var ye=he.split("/");return ye[ye.length-(he.slice(-1)=="/"?2:1)]}),ne=!1;P.charCodeAt(0)===47?(ne=!0,P=H[0].slice(0,-1)+P):ne=P.indexOf("/")!==-1;var de=P.toUpperCase(),se=ne===!0?H.indexOf(de):te.indexOf(de);if(se!==-1)return J.FileIndex[se];var fe=!de.match(sp);for(de=de.replace(bm,""),fe&&(de=de.replace(sp,"!")),se=0;se<H.length;++se)if((fe?H[se].replace(sp,"!"):H[se]).replace(bm,"")==de||(fe?te[se].replace(sp,"!"):te[se]).replace(bm,"")==de)return J.FileIndex[se];return null}var A=64,O=-2,V="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],L="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:L,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function D(J,P,H){d();var te=T(J,H);c.writeFileSync(P,te)}function K(J){for(var P=new Array(J.length),H=0;H<J.length;++H)P[H]=String.fromCharCode(J[H]);return P.join("")}function R(J,P){var H=T(J,P);switch(P&&P.type||"buffer"){case"file":return d(),c.writeFileSync(P.filename,H),H;case"binary":return typeof H=="string"?H:K(H);case"base64":return Fx(typeof H=="string"?H:K(H));case"buffer":if(er)return Buffer.isBuffer(H)?H:Wo(H);case"array":return typeof H=="string"?jn(H):H}return H}var B;function F(J){try{var P=J.InflateRaw,H=new P;if(H._processChunk(new Uint8Array([3,0]),H._finishFlushFlag),H.bytesRead)B=J;else throw new Error("zlib does not expose bytesRead")}catch(te){console.error("cannot use native zlib: "+(te.message||te))}}function I(J,P){if(!B)return Y(J,P);var H=B.InflateRaw,te=new H,ne=te._processChunk(J.slice(J.l),te._finishFlushFlag);return J.l+=te.bytesRead,ne}function k(J){return B?B.deflateRawSync(J):ge(J)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function W(J){var P=(J<<1|J<<11)&139536|(J<<5|J<<15)&558144;return(P>>16|P>>8|P)&255}for(var ae=typeof Uint8Array<"u",ee=ae?new Uint8Array(256):[],ce=0;ce<256;++ce)ee[ce]=W(ce);function ie(J,P){var H=ee[J&255];return P<=8?H>>>8-P:(H=H<<8|ee[J>>8&255],P<=16?H>>>16-P:(H=H<<8|ee[J>>16&255],H>>>24-P))}function we(J,P){var H=P&7,te=P>>>3;return(J[te]|(H<=6?0:J[te+1]<<8))>>>H&3}function Se(J,P){var H=P&7,te=P>>>3;return(J[te]|(H<=5?0:J[te+1]<<8))>>>H&7}function me(J,P){var H=P&7,te=P>>>3;return(J[te]|(H<=4?0:J[te+1]<<8))>>>H&15}function _e(J,P){var H=P&7,te=P>>>3;return(J[te]|(H<=3?0:J[te+1]<<8))>>>H&31}function je(J,P){var H=P&7,te=P>>>3;return(J[te]|(H<=1?0:J[te+1]<<8))>>>H&127}function lt(J,P,H){var te=P&7,ne=P>>>3,de=(1<<H)-1,se=J[ne]>>>te;return H<8-te||(se|=J[ne+1]<<8-te,H<16-te)||(se|=J[ne+2]<<16-te,H<24-te)||(se|=J[ne+3]<<24-te),se&de}function Ke(J,P,H){var te=P&7,ne=P>>>3;return te<=5?J[ne]|=(H&7)<<te:(J[ne]|=H<<te&255,J[ne+1]=(H&7)>>8-te),P+3}function ut(J,P,H){var te=P&7,ne=P>>>3;return H=(H&1)<<te,J[ne]|=H,P+1}function Ee(J,P,H){var te=P&7,ne=P>>>3;return H<<=te,J[ne]|=H&255,H>>>=8,J[ne+1]=H,P+8}function Me(J,P,H){var te=P&7,ne=P>>>3;return H<<=te,J[ne]|=H&255,H>>>=8,J[ne+1]=H&255,J[ne+2]=H>>>8,P+16}function Ae(J,P){var H=J.length,te=2*H>P?2*H:P+5,ne=0;if(H>=P)return J;if(er){var de=Ak(te);if(J.copy)J.copy(de);else for(;ne<J.length;++ne)de[ne]=J[ne];return de}else if(ae){var se=new Uint8Array(te);if(se.set)se.set(J);else for(;ne<H;++ne)se[ne]=J[ne];return se}return J.length=te,J}function ct(J){for(var P=new Array(J),H=0;H<J;++H)P[H]=0;return P}function bt(J,P,H){var te=1,ne=0,de=0,se=0,fe=0,he=J.length,ye=ae?new Uint16Array(32):ct(32);for(de=0;de<32;++de)ye[de]=0;for(de=he;de<H;++de)J[de]=0;he=J.length;var ke=ae?new Uint16Array(he):ct(he);for(de=0;de<he;++de)ye[ne=J[de]]++,te<ne&&(te=ne),ke[de]=0;for(ye[0]=0,de=1;de<=te;++de)ye[de+16]=fe=fe+ye[de-1]<<1;for(de=0;de<he;++de)fe=J[de],fe!=0&&(ke[de]=ye[fe+16]++);var He=0;for(de=0;de<he;++de)if(He=J[de],He!=0)for(fe=ie(ke[de],te)>>te-He,se=(1<<te+4-He)-1;se>=0;--se)P[fe|se<<He]=He&15|de<<4;return te}var Rt=ae?new Uint16Array(512):ct(512),Ct=ae?new Uint16Array(32):ct(32);if(!ae){for(var It=0;It<512;++It)Rt[It]=0;for(It=0;It<32;++It)Ct[It]=0}(function(){for(var J=[],P=0;P<32;P++)J.push(5);bt(J,Ct,32);var H=[];for(P=0;P<=143;P++)H.push(8);for(;P<=255;P++)H.push(9);for(;P<=279;P++)H.push(7);for(;P<=287;P++)H.push(8);bt(H,Rt,288)})();var $t=function(){for(var P=ae?new Uint8Array(32768):[],H=0,te=0;H<oe.length-1;++H)for(;te<oe[H+1];++te)P[te]=H;for(;te<32768;++te)P[te]=29;var ne=ae?new Uint8Array(259):[];for(H=0,te=0;H<z.length-1;++H)for(;te<z[H+1];++te)ne[te]=H;function de(fe,he){for(var ye=0;ye<fe.length;){var ke=Math.min(65535,fe.length-ye),He=ye+ke==fe.length;for(he.write_shift(1,+He),he.write_shift(2,ke),he.write_shift(2,~ke&65535);ke-- >0;)he[he.l++]=fe[ye++]}return he.l}function se(fe,he){for(var ye=0,ke=0,He=ae?new Uint16Array(32768):[];ke<fe.length;){var Ze=Math.min(65535,fe.length-ke);if(Ze<10){for(ye=Ke(he,ye,+(ke+Ze==fe.length)),ye&7&&(ye+=8-(ye&7)),he.l=ye/8|0,he.write_shift(2,Ze),he.write_shift(2,~Ze&65535);Ze-- >0;)he[he.l++]=fe[ke++];ye=he.l*8;continue}ye=Ke(he,ye,+(ke+Ze==fe.length)+2);for(var tt=0;Ze-- >0;){var Qe=fe[ke];tt=(tt<<5^Qe)&32767;var ht=-1,Pt=0;if((ht=He[tt])&&(ht|=ke&-32768,ht>ke&&(ht-=32768),ht<ke))for(;fe[ht+Pt]==fe[ke+Pt]&&Pt<250;)++Pt;if(Pt>2){Qe=ne[Pt],Qe<=22?ye=Ee(he,ye,ee[Qe+1]>>1)-1:(Ee(he,ye,3),ye+=5,Ee(he,ye,ee[Qe-23]>>5),ye+=3);var Qt=Qe<8?0:Qe-4>>2;Qt>0&&(Me(he,ye,Pt-z[Qe]),ye+=Qt),Qe=P[ke-ht],ye=Ee(he,ye,ee[Qe]>>3),ye-=3;var rr=Qe<4?0:Qe-2>>1;rr>0&&(Me(he,ye,ke-ht-oe[Qe]),ye+=rr);for(var Ur=0;Ur<Pt;++Ur)He[tt]=ke&32767,tt=(tt<<5^fe[ke])&32767,++ke;Ze-=Pt-1}else Qe<=143?Qe=Qe+48:ye=ut(he,ye,1),ye=Ee(he,ye,ee[Qe]),He[tt]=ke&32767,++ke}ye=Ee(he,ye,0)-1}return he.l=(ye+7)/8|0,he.l}return function(he,ye){return he.length<8?de(he,ye):se(he,ye)}}();function ge(J){var P=ze(50+Math.floor(J.length*1.1)),H=$t(J,P);return P.slice(0,H)}var $e=ae?new Uint16Array(32768):ct(32768),Ie=ae?new Uint16Array(32768):ct(32768),it=ae?new Uint16Array(128):ct(128),rt=1,xe=1;function Oe(J,P){var H=_e(J,P)+257;P+=5;var te=_e(J,P)+1;P+=5;var ne=me(J,P)+4;P+=4;for(var de=0,se=ae?new Uint8Array(19):ct(19),fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],he=1,ye=ae?new Uint8Array(8):ct(8),ke=ae?new Uint8Array(8):ct(8),He=se.length,Ze=0;Ze<ne;++Ze)se[M[Ze]]=de=Se(J,P),he<de&&(he=de),ye[de]++,P+=3;var tt=0;for(ye[0]=0,Ze=1;Ze<=he;++Ze)ke[Ze]=tt=tt+ye[Ze-1]<<1;for(Ze=0;Ze<He;++Ze)(tt=se[Ze])!=0&&(fe[Ze]=ke[tt]++);var Qe=0;for(Ze=0;Ze<He;++Ze)if(Qe=se[Ze],Qe!=0){tt=ee[fe[Ze]]>>8-Qe;for(var ht=(1<<7-Qe)-1;ht>=0;--ht)it[tt|ht<<Qe]=Qe&7|Ze<<3}var Pt=[];for(he=1;Pt.length<H+te;)switch(tt=it[je(J,P)],P+=tt&7,tt>>>=3){case 16:for(de=3+we(J,P),P+=2,tt=Pt[Pt.length-1];de-- >0;)Pt.push(tt);break;case 17:for(de=3+Se(J,P),P+=3;de-- >0;)Pt.push(0);break;case 18:for(de=11+je(J,P),P+=7;de-- >0;)Pt.push(0);break;default:Pt.push(tt),he<tt&&(he=tt);break}var Qt=Pt.slice(0,H),rr=Pt.slice(H);for(Ze=H;Ze<286;++Ze)Qt[Ze]=0;for(Ze=te;Ze<30;++Ze)rr[Ze]=0;return rt=bt(Qt,$e,286),xe=bt(rr,Ie,30),P}function Ye(J,P){if(J[0]==3&&!(J[1]&3))return[Gl(P),2];for(var H=0,te=0,ne=Ak(P||1<<18),de=0,se=ne.length>>>0,fe=0,he=0;!(te&1);){if(te=Se(J,H),H+=3,te>>>1)te>>1==1?(fe=9,he=5):(H=Oe(J,H),fe=rt,he=xe);else{H&7&&(H+=8-(H&7));var ye=J[H>>>3]|J[(H>>>3)+1]<<8;if(H+=32,ye>0)for(!P&&se<de+ye&&(ne=Ae(ne,de+ye),se=ne.length);ye-- >0;)ne[de++]=J[H>>>3],H+=8;continue}for(;;){!P&&se<de+32767&&(ne=Ae(ne,de+32767),se=ne.length);var ke=lt(J,H,fe),He=te>>>1==1?Rt[ke]:$e[ke];if(H+=He&15,He>>>=4,!(He>>>8&255))ne[de++]=He;else{if(He==256)break;He-=257;var Ze=He<8?0:He-4>>2;Ze>5&&(Ze=0);var tt=de+z[He];Ze>0&&(tt+=lt(J,H,Ze),H+=Ze),ke=lt(J,H,he),He=te>>>1==1?Ct[ke]:Ie[ke],H+=He&15,He>>>=4;var Qe=He<4?0:He-2>>1,ht=oe[He];for(Qe>0&&(ht+=lt(J,H,Qe),H+=Qe),!P&&se<tt&&(ne=Ae(ne,tt+100),se=ne.length);de<tt;)ne[de]=ne[de-ht],++de}}}return P?[ne,H+7>>>3]:[ne.slice(0,de),H+7>>>3]}function Y(J,P){var H=J.slice(J.l||0),te=Ye(H,P);return J.l+=te[1],te[0]}function ue(J,P){if(J)typeof console<"u"&&console.error(P);else throw new Error(P)}function qe(J,P){var H=J;Ts(H,0);var te=[],ne=[],de={FileIndex:te,FullPaths:ne};S(de,{root:P.root});for(var se=H.length-4;(H[se]!=80||H[se+1]!=75||H[se+2]!=5||H[se+3]!=6)&&se>=0;)--se;H.l=se+4,H.l+=4;var fe=H.read_shift(2);H.l+=6;var he=H.read_shift(4);for(H.l=he,se=0;se<fe;++se){H.l+=20;var ye=H.read_shift(4),ke=H.read_shift(4),He=H.read_shift(2),Ze=H.read_shift(2),tt=H.read_shift(2);H.l+=8;var Qe=H.read_shift(4),ht=l(H.slice(H.l+He,H.l+He+Ze));H.l+=He+Ze+tt;var Pt=H.l;H.l=Qe+4,le(H,ye,ke,de,ht),H.l=Pt}return de}function le(J,P,H,te,ne){J.l+=2;var de=J.read_shift(2),se=J.read_shift(2),fe=i(J);if(de&8257)throw new Error("Unsupported ZIP encryption");for(var he=J.read_shift(4),ye=J.read_shift(4),ke=J.read_shift(4),He=J.read_shift(2),Ze=J.read_shift(2),tt="",Qe=0;Qe<He;++Qe)tt+=String.fromCharCode(J[J.l++]);if(Ze){var ht=l(J.slice(J.l,J.l+Ze));(ht[21589]||{}).mt&&(fe=ht[21589].mt),((ne||{})[21589]||{}).mt&&(fe=ne[21589].mt)}J.l+=Ze;var Pt=J.slice(J.l,J.l+ye);switch(se){case 8:Pt=I(J,ke);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+se)}var Qt=!1;de&8&&(he=J.read_shift(4),he==134695760&&(he=J.read_shift(4),Qt=!0),ye=J.read_shift(4),ke=J.read_shift(4)),ye!=P&&ue(Qt,"Bad compressed size: "+P+" != "+ye),ke!=H&&ue(Qt,"Bad uncompressed size: "+H+" != "+ke),Nt(te,tt,Pt,{unsafe:!0,mt:fe})}function ve(J,P){var H=P||{},te=[],ne=[],de=ze(1),se=H.compression?8:0,fe=0,he=0,ye=0,ke=0,He=0,Ze=J.FullPaths[0],tt=Ze,Qe=J.FileIndex[0],ht=[],Pt=0;for(he=1;he<J.FullPaths.length;++he)if(tt=J.FullPaths[he].slice(Ze.length),Qe=J.FileIndex[he],!(!Qe.size||!Qe.content||tt=="Sh33tJ5")){var Qt=ke,rr=ze(tt.length);for(ye=0;ye<tt.length;++ye)rr.write_shift(1,tt.charCodeAt(ye)&127);rr=rr.slice(0,rr.l),ht[He]=Vhe.buf(Qe.content,0);var Ur=Qe.content;se==8&&(Ur=k(Ur)),de=ze(30),de.write_shift(4,67324752),de.write_shift(2,20),de.write_shift(2,fe),de.write_shift(2,se),Qe.mt?o(de,Qe.mt):de.write_shift(4,0),de.write_shift(-4,ht[He]),de.write_shift(4,Ur.length),de.write_shift(4,Qe.content.length),de.write_shift(2,rr.length),de.write_shift(2,0),ke+=de.length,te.push(de),ke+=rr.length,te.push(rr),ke+=Ur.length,te.push(Ur),de=ze(46),de.write_shift(4,33639248),de.write_shift(2,0),de.write_shift(2,20),de.write_shift(2,fe),de.write_shift(2,se),de.write_shift(4,0),de.write_shift(-4,ht[He]),de.write_shift(4,Ur.length),de.write_shift(4,Qe.content.length),de.write_shift(2,rr.length),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(4,0),de.write_shift(4,Qt),Pt+=de.l,ne.push(de),Pt+=rr.length,ne.push(rr),++He}return de=ze(22),de.write_shift(4,101010256),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,He),de.write_shift(2,He),de.write_shift(4,Pt),de.write_shift(4,ke),de.write_shift(2,0),Ta([Ta(te),Ta(ne),de])}var Re={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Le(J,P){if(J.ctype)return J.ctype;var H=J.name||"",te=H.match(/\.([^\.]+)$/);return te&&Re[te[1]]||P&&(te=(H=P).match(/[\.\\]([^\.\\])+$/),te&&Re[te[1]])?Re[te[1]]:"application/octet-stream"}function Q(J){for(var P=Fx(J),H=[],te=0;te<P.length;te+=76)H.push(P.slice(te,te+76));return H.join(`\r
`)+`\r
`}function Ne(J){var P=J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ye){var ke=ye.charCodeAt(0).toString(16).toUpperCase();return"="+(ke.length==1?"0"+ke:ke)});P=P.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),P.charAt(0)==`
`&&(P="=0D"+P.slice(1)),P=P.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var H=[],te=P.split(`\r
`),ne=0;ne<te.length;++ne){var de=te[ne];if(de.length==0){H.push("");continue}for(var se=0;se<de.length;){var fe=76,he=de.slice(se,se+fe);he.charAt(fe-1)=="="?fe--:he.charAt(fe-2)=="="?fe-=2:he.charAt(fe-3)=="="&&(fe-=3),he=de.slice(se,se+fe),se+=fe,se<de.length&&(he+="="),H.push(he)}}return H.join(`\r
`)}function Pe(J){for(var P=[],H=0;H<J.length;++H){for(var te=J[H];H<=J.length&&te.charAt(te.length-1)=="=";)te=te.slice(0,te.length-1)+J[++H];P.push(te)}for(var ne=0;ne<P.length;++ne)P[ne]=P[ne].replace(/[=][0-9A-Fa-f]{2}/g,function(de){return String.fromCharCode(parseInt(de.slice(1),16))});return jn(P.join(`\r
`))}function Ve(J,P,H){for(var te="",ne="",de="",se,fe=0;fe<10;++fe){var he=P[fe];if(!he||he.match(/^\s*$/))break;var ye=he.match(/^(.*?):\s*([^\s].*)$/);if(ye)switch(ye[1].toLowerCase()){case"content-location":te=ye[2].trim();break;case"content-type":de=ye[2].trim();break;case"content-transfer-encoding":ne=ye[2].trim();break}}switch(++fe,ne.toLowerCase()){case"base64":se=jn(Io(P.slice(fe).join("")));break;case"quoted-printable":se=Pe(P.slice(fe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ne)}var ke=Nt(J,te.slice(H.length),se,{unsafe:!0});de&&(ke.ctype=de)}function ot(J,P){if(K(J.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var H=P&&P.root||"",te=(er&&Buffer.isBuffer(J)?J.toString("binary"):K(J)).split(`\r
`),ne=0,de="";for(ne=0;ne<te.length;++ne)if(de=te[ne],!!/^Content-Location:/i.test(de)&&(de=de.slice(de.indexOf("file")),H||(H=de.slice(0,de.lastIndexOf("/")+1)),de.slice(0,H.length)!=H))for(;H.length>0&&(H=H.slice(0,H.length-1),H=H.slice(0,H.lastIndexOf("/")+1),de.slice(0,H.length)!=H););var se=(te[1]||"").match(/boundary="(.*?)"/);if(!se)throw new Error("MAD cannot find boundary");var fe="--"+(se[1]||""),he=[],ye=[],ke={FileIndex:he,FullPaths:ye};S(ke);var He,Ze=0;for(ne=0;ne<te.length;++ne){var tt=te[ne];tt!==fe&&tt!==fe+"--"||(Ze++&&Ve(ke,te.slice(He,ne),H),He=ne)}return ke}function xt(J,P){var H=P||{},te=H.boundary||"SheetJS";te="------="+te;for(var ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+te.slice(2)+'"',"","",""],de=J.FullPaths[0],se=de,fe=J.FileIndex[0],he=1;he<J.FullPaths.length;++he)if(se=J.FullPaths[he].slice(de.length),fe=J.FileIndex[he],!(!fe.size||!fe.content||se=="Sh33tJ5")){se=se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var ye=fe.content,ke=er&&Buffer.isBuffer(ye)?ye.toString("binary"):K(ye),He=0,Ze=Math.min(1024,ke.length),tt=0,Qe=0;Qe<=Ze;++Qe)(tt=ke.charCodeAt(Qe))>=32&&tt<128&&++He;var ht=He>=Ze*4/5;ne.push(te),ne.push("Content-Location: "+(H.root||"file:///C:/SheetJS/")+se),ne.push("Content-Transfer-Encoding: "+(ht?"quoted-printable":"base64")),ne.push("Content-Type: "+Le(fe,se)),ne.push(""),ne.push(ht?Ne(ke):Q(ke))}return ne.push(te+`--\r
`),ne.join(`\r
`)}function pt(J){var P={};return S(P,J),P}function Nt(J,P,H,te){var ne=te&&te.unsafe;ne||S(J);var de=!ne&&xr.find(J,P);if(!de){var se=J.FullPaths[0];P.slice(0,se.length)==se?se=P:(se.slice(-1)!="/"&&(se+="/"),se=(se+P).replace("//","/")),de={name:n(P),type:2},J.FileIndex.push(de),J.FullPaths.push(se),ne||xr.utils.cfb_gc(J)}return de.content=H,de.size=H?H.length:0,te&&(te.CLSID&&(de.clsid=te.CLSID),te.mt&&(de.mt=te.mt),te.ct&&(de.ct=te.ct)),de}function Ge(J,P){S(J);var H=xr.find(J,P);if(H){for(var te=0;te<J.FileIndex.length;++te)if(J.FileIndex[te]==H)return J.FileIndex.splice(te,1),J.FullPaths.splice(te,1),!0}return!1}function Dt(J,P,H){S(J);var te=xr.find(J,P);if(te){for(var ne=0;ne<J.FileIndex.length;++ne)if(J.FileIndex[ne]==te)return J.FileIndex[ne].name=n(H),J.FullPaths[ne]=H,!0}return!1}function jr(J){E(J,!0)}return r.find=q,r.read=w,r.parse=u,r.write=R,r.writeFile=D,r.utils={cfb_new:pt,cfb_add:Nt,cfb_del:Ge,cfb_mov:Dt,cfb_gc:jr,ReadShift:ym,CheckField:w$,prep_blob:Ts,bconcat:Ta,use_zlib:F,_deflateRaw:ge,_inflateRaw:Y,consts:Z},r}();function Uhe(t){return typeof t=="string"?ab(t):Array.isArray(t)?fhe(t):t}function i0(t,r,a){if(typeof Deno<"u"){if(a&&typeof r=="string")switch(a){case"utf8":r=new TextEncoder(a).encode(r);break;case"binary":r=ab(r);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,r)}var s=a=="utf8"?Rx(r):r;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,t);if(typeof Blob<"u"){var n=new Blob([Uhe(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,t);if(typeof saveAs<"u")return saveAs(n,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=o,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(r)&&(r=o0(r)),l.write(r),l.close(),r}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Da(t){for(var r=Object.keys(t),a=[],s=0;s<r.length;++s)Object.prototype.hasOwnProperty.call(t,r[s])&&a.push(r[s]);return a}function Mk(t,r){for(var a=[],s=Da(t),n=0;n!==s.length;++n)a[t[s[n]][r]]==null&&(a[t[s[n]][r]]=s[n]);return a}function UN(t){for(var r=[],a=Da(t),s=0;s!==a.length;++s)r[t[a[s]]]=a[s];return r}function ob(t){for(var r=[],a=Da(t),s=0;s!==a.length;++s)r[t[a[s]]]=parseInt(a[s],10);return r}function Whe(t){for(var r=[],a=Da(t),s=0;s!==a.length;++s)r[t[a[s]]]==null&&(r[t[a[s]]]=[]),r[t[a[s]]].push(a[s]);return r}var Cf=new Date(1899,11,30,0,0,0);function ys(t,r){var a=t.getTime(),s=Cf.getTime()+(t.getTimezoneOffset()-Cf.getTimezoneOffset())*6e4;return(a-s)/(24*60*60*1e3)}var o$=new Date,Hhe=Cf.getTime()+(o$.getTimezoneOffset()-Cf.getTimezoneOffset())*6e4,Ik=o$.getTimezoneOffset();function i$(t){var r=new Date;return r.setTime(t*24*60*60*1e3+Hhe),r.getTimezoneOffset()!==Ik&&r.setTime(r.getTime()+(r.getTimezoneOffset()-Ik)*6e4),r}var Lk=new Date("2017-02-19T19:06:09.000Z"),l$=isNaN(Lk.getFullYear())?new Date("2/19/17"):Lk,Khe=l$.getFullYear()==2017;function ss(t,r){var a=new Date(t);if(Khe)return r>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):r<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(l$.getFullYear()==1917&&!isNaN(a.getFullYear())){var s=a.getFullYear();return t.indexOf(""+s)>-1||a.setFullYear(a.getFullYear()+100),a}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(o=new Date(o.getTime()-o.getTimezoneOffset()*60*1e3)),o}function ib(t,r){if(er&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(o){return a[o]||o})}catch{}for(var s=[],n=0;n!=t.length;++n)s.push(String.fromCharCode(t[n]));return s.join("")}function js(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=js(t[a]));return r}function Br(t,r){for(var a="";a.length<r;)a+=t;return a}function So(t){var r=Number(t);if(!isNaN(r))return isFinite(r)?r:NaN;if(!/\d/.test(t))return r;var a=1,s=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(r=Number(s))||(s=s.replace(/[(](.*)[)]/,function(n,o){return a=-a,o}),!isNaN(r=Number(s)))?r/a:r}var Ghe=["january","february","march","april","may","june","july","august","september","october","november","december"];function $x(t){var r=new Date(t),a=new Date(NaN),s=r.getYear(),n=r.getMonth(),o=r.getDate();if(isNaN(o))return a;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ghe.indexOf(i)==-1)return a}else if(i.match(/[a-z]/))return a;return s<0||s>8099?a:(n>0||o>1)&&s!=101?r:t.match(/[^-0-9:,\/\\]/)?a:r}function Bt(t,r,a){if(t.FullPaths){if(typeof a=="string"){var s;return er?s=Wo(a):s=ghe(a),xr.utils.cfb_add(t,r,s)}xr.utils.cfb_add(t,r,a)}else t.file(r,a)}function WN(){return xr.utils.cfb_new()}var na=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Xhe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},HN=UN(Xhe),KN=/[&<>'"]/g,Yhe=/[\u0000-\u0008\u000b-\u001f]/g;function ir(t){var r=t+"";return r.replace(KN,function(a){return HN[a]}).replace(Yhe,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Bk(t){return ir(t).replace(/ /g,"_x0020_")}var c$=/[\u0000-\u001f]/g;function Qhe(t){var r=t+"";return r.replace(KN,function(a){return HN[a]}).replace(/\n/g,"<br/>").replace(c$,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function Jhe(t){var r=t+"";return r.replace(KN,function(a){return HN[a]}).replace(c$,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function Zhe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function efe(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Nv(t){for(var r="",a=0,s=0,n=0,o=0,i=0,l=0;a<t.length;){if(s=t.charCodeAt(a++),s<128){r+=String.fromCharCode(s);continue}if(n=t.charCodeAt(a++),s>191&&s<224){i=(s&31)<<6,i|=n&63,r+=String.fromCharCode(i);continue}if(o=t.charCodeAt(a++),s<240){r+=String.fromCharCode((s&15)<<12|(n&63)<<6|o&63);continue}i=t.charCodeAt(a++),l=((s&7)<<18|(n&63)<<12|(o&63)<<6|i&63)-65536,r+=String.fromCharCode(55296+(l>>>10&1023)),r+=String.fromCharCode(56320+(l&1023))}return r}function zk(t){var r=Gl(2*t.length),a,s,n=1,o=0,i=0,l;for(s=0;s<t.length;s+=n)n=1,(l=t.charCodeAt(s))<128?a=l:l<224?(a=(l&31)*64+(t.charCodeAt(s+1)&63),n=2):l<240?(a=(l&15)*4096+(t.charCodeAt(s+1)&63)*64+(t.charCodeAt(s+2)&63),n=3):(n=4,a=(l&7)*262144+(t.charCodeAt(s+1)&63)*4096+(t.charCodeAt(s+2)&63)*64+(t.charCodeAt(s+3)&63),a-=65536,i=55296+(a>>>10&1023),a=56320+(a&1023)),i!==0&&(r[o++]=i&255,r[o++]=i>>>8,i=0),r[o++]=a%256,r[o++]=a>>>8;return r.slice(0,o).toString("ucs2")}function qk(t){return Wo(t,"binary").toString("utf8")}var op="foo bar baz",vm=er&&(qk(op)==Nv(op)&&qk||zk(op)==Nv(op)&&zk)||Nv,Rx=er?function(t){return Wo(t,"utf8").toString("binary")}:function(t){for(var r=[],a=0,s=0,n=0;a<t.length;)switch(s=t.charCodeAt(a++),!0){case s<128:r.push(String.fromCharCode(s));break;case s<2048:r.push(String.fromCharCode(192+(s>>6))),r.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,n=t.charCodeAt(a++)-56320+(s<<10),r.push(String.fromCharCode(240+(n>>18&7))),r.push(String.fromCharCode(144+(n>>12&63))),r.push(String.fromCharCode(128+(n>>6&63))),r.push(String.fromCharCode(128+(n&63)));break;default:r.push(String.fromCharCode(224+(s>>12))),r.push(String.fromCharCode(128+(s>>6&63))),r.push(String.fromCharCode(128+(s&63)))}return r.join("")},tfe=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(r){return[new RegExp("&"+r[0]+";","ig"),r[1]]});return function(a){for(var s=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)s=s.replace(t[n][0],t[n][1]);return s}}(),d$=/(^\s|\s$|\n)/;function Oa(t,r){return"<"+t+(r.match(d$)?' xml:space="preserve"':"")+">"+r+"</"+t+">"}function Dx(t){return Da(t).map(function(r){return" "+r+'="'+t[r]+'"'}).join("")}function dt(t,r,a){return"<"+t+(a!=null?Dx(a):"")+(r!=null?(r.match(d$)?' xml:space="preserve"':"")+">"+r+"</"+t:"/")+">"}function v1(t,r){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(r)throw a}return""}function rfe(t,r){switch(typeof t){case"string":var a=dt("vt:lpwstr",ir(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return dt((t|0)==t?"vt:i4":"vt:r8",ir(String(t)));case"boolean":return dt("vt:bool",t?"true":"false")}if(t instanceof Date)return dt("vt:filetime",v1(t));throw new Error("Unable to serialize "+t)}var ja={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},gu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Os={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function afe(t,r){for(var a=1-2*(t[r+7]>>>7),s=((t[r+7]&127)<<4)+(t[r+6]>>>4&15),n=t[r+6]&15,o=5;o>=0;--o)n=n*256+t[r+o];return s==2047?n==0?a*(1/0):NaN:(s==0?s=-1022:(s-=1023,n+=Math.pow(2,52)),a*Math.pow(2,s-52)*n)}function sfe(t,r,a){var s=(r<0||1/r==-1/0?1:0)<<7,n=0,o=0,i=s?-r:r;isFinite(i)?i==0?n=o=0:(n=Math.floor(Math.log(i)/Math.LN2),o=i*Math.pow(2,52-n),n<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?n=-1022:(o-=Math.pow(2,52),n+=1023)):(n=2047,o=isNaN(r)?26985:0);for(var l=0;l<=5;++l,o/=256)t[a+l]=o&255;t[a+6]=(n&15)<<4|o&15,t[a+7]=n>>4|s}var Vk=function(t){for(var r=[],a=10240,s=0;s<t[0].length;++s)if(t[0][s])for(var n=0,o=t[0][s].length;n<o;n+=a)r.push.apply(r,t[0][s].slice(n,n+a));return r},Uk=er?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(r){return Buffer.isBuffer(r)?r:Wo(r)})):Vk(t)}:Vk,Wk=function(t,r,a){for(var s=[],n=r;n<a;n+=2)s.push(String.fromCharCode(Ju(t,n)));return s.join("").replace(bm,"")},GN=er?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf16le",r,a).replace(bm,""):Wk(t,r,a)}:Wk,Hk=function(t,r,a){for(var s=[],n=r;n<r+a;++n)s.push(("0"+t[n].toString(16)).slice(-2));return s.join("")},u$=er?function(t,r,a){return Buffer.isBuffer(t)?t.toString("hex",r,r+a):Hk(t,r,a)}:Hk,Kk=function(t,r,a){for(var s=[],n=r;n<a;n++)s.push(String.fromCharCode(Sc(t,n)));return s.join("")},l0=er?function(r,a,s){return Buffer.isBuffer(r)?r.toString("utf8",a,s):Kk(r,a,s)}:Kk,m$=function(t,r){var a=Fs(t,r);return a>0?l0(t,r+4,r+4+a-1):""},x$=m$,p$=function(t,r){var a=Fs(t,r);return a>0?l0(t,r+4,r+4+a-1):""},h$=p$,f$=function(t,r){var a=2*Fs(t,r);return a>0?l0(t,r+4,r+4+a-1):""},g$=f$,b$=function(r,a){var s=Fs(r,a);return s>0?GN(r,a+4,a+4+s):""},v$=b$,y$=function(t,r){var a=Fs(t,r);return a>0?l0(t,r+4,r+4+a):""},j$=y$,N$=function(t,r){return afe(t,r)},kf=N$,XN=function(r){return Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array};er&&(x$=function(r,a){if(!Buffer.isBuffer(r))return m$(r,a);var s=r.readUInt32LE(a);return s>0?r.toString("utf8",a+4,a+4+s-1):""},h$=function(r,a){if(!Buffer.isBuffer(r))return p$(r,a);var s=r.readUInt32LE(a);return s>0?r.toString("utf8",a+4,a+4+s-1):""},g$=function(r,a){if(!Buffer.isBuffer(r))return f$(r,a);var s=2*r.readUInt32LE(a);return r.toString("utf16le",a+4,a+4+s-1)},v$=function(r,a){if(!Buffer.isBuffer(r))return b$(r,a);var s=r.readUInt32LE(a);return r.toString("utf16le",a+4,a+4+s)},j$=function(r,a){if(!Buffer.isBuffer(r))return y$(r,a);var s=r.readUInt32LE(a);return r.toString("utf8",a+4,a+4+s)},kf=function(r,a){return Buffer.isBuffer(r)?r.readDoubleLE(a):N$(r,a)},XN=function(r){return Buffer.isBuffer(r)||Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array});var Sc=function(t,r){return t[r]},Ju=function(t,r){return t[r+1]*256+t[r]},nfe=function(t,r){var a=t[r+1]*256+t[r];return a<32768?a:(65535-a+1)*-1},Fs=function(t,r){return t[r+3]*(1<<24)+(t[r+2]<<16)+(t[r+1]<<8)+t[r]},ll=function(t,r){return t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]},ofe=function(t,r){return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]};function ym(t,r){var a="",s,n,o=[],i,l,c,d;switch(r){case"dbcs":if(d=this.l,er&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)a+=String.fromCharCode(Ju(this,d)),d+=2;t*=2;break;case"utf8":a=l0(this,this.l,this.l+t);break;case"utf16le":t*=2,a=GN(this,this.l,this.l+t);break;case"wstr":return ym.call(this,t,"dbcs");case"lpstr-ansi":a=x$(this,this.l),t=4+Fs(this,this.l);break;case"lpstr-cp":a=h$(this,this.l),t=4+Fs(this,this.l);break;case"lpwstr":a=g$(this,this.l),t=4+2*Fs(this,this.l);break;case"lpp4":t=4+Fs(this,this.l),a=v$(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Fs(this,this.l),a=j$(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(i=Sc(this,this.l+t++))!==0;)o.push(ap(i));a=o.join("");break;case"_wstr":for(t=0,a="";(i=Ju(this,this.l+t))!==0;)o.push(ap(i)),t+=2;t+=2,a=o.join("");break;case"dbcs-cont":for(a="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Sc(this,d),this.l=d+1,l=ym.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),o.join("")+l;o.push(ap(Ju(this,d))),d+=2}a=o.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Sc(this,d),this.l=d+1,l=ym.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),o.join("")+l;o.push(ap(Sc(this,d))),d+=1}a=o.join("");break;default:switch(t){case 1:return s=Sc(this,this.l),this.l++,s;case 2:return s=(r==="i"?nfe:Ju)(this,this.l),this.l+=2,s;case 4:case-4:return r==="i"||!(this[this.l+3]&128)?(s=(t>0?ll:ofe)(this,this.l),this.l+=4,s):(n=Fs(this,this.l),this.l+=4,n);case 8:case-8:if(r==="f")return t==8?n=kf(this,this.l):n=kf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:a=u$(this,this.l,t);break}}return this.l+=t,a}var ife=function(t,r,a){t[a]=r&255,t[a+1]=r>>>8&255,t[a+2]=r>>>16&255,t[a+3]=r>>>24&255},lfe=function(t,r,a){t[a]=r&255,t[a+1]=r>>8&255,t[a+2]=r>>16&255,t[a+3]=r>>24&255},cfe=function(t,r,a){t[a]=r&255,t[a+1]=r>>>8&255};function dfe(t,r,a){var s=0,n=0;if(a==="dbcs"){for(n=0;n!=r.length;++n)cfe(this,r.charCodeAt(n),this.l+2*n);s=2*r.length}else if(a==="sbcs"){for(r=r.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=r.length;++n)this[this.l+n]=r.charCodeAt(n)&255;s=r.length}else if(a==="hex"){for(;n<t;++n)this[this.l++]=parseInt(r.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var o=Math.min(this.l+t,this.length);for(n=0;n<Math.min(r.length,t);++n){var i=r.charCodeAt(n);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(t){case 1:s=1,this[this.l]=r&255;break;case 2:s=2,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255;break;case 3:s=3,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255,r>>>=8,this[this.l+2]=r&255;break;case 4:s=4,ife(this,r,this.l);break;case 8:if(s=8,a==="f"){sfe(this,r,this.l);break}case 16:break;case-4:s=4,lfe(this,r,this.l);break}return this.l+=s,this}function w$(t,r){var a=u$(this,this.l,t.length>>1);if(a!==t)throw new Error(r+"Expected "+t+" saw "+a);this.l+=t.length>>1}function Ts(t,r){t.l=r,t.read_shift=ym,t.chk=w$,t.write_shift=dfe}function to(t,r){t.l+=r}function ze(t){var r=Gl(t);return Ts(r,0),r}function vs(){var t=[],r=er?256:2048,a=function(d){var u=ze(d);return Ts(u,0),u},s=a(r),n=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&t.push(s),s=null)},o=function(d){return s&&d<s.length-s.l?s:(n(),s=a(Math.max(d+1,r)))},i=function(){return n(),Ta(t)},l=function(d){n(),s=d,s.l==null&&(s.l=s.length),o(r)};return{next:o,push:l,end:i,_bufs:t}}function Xe(t,r,a,s){var n=+r,o;if(!isNaN(n)){s||(s=a1e[n].p||(a||[]).length||0),o=1+(n>=128?1:0)+1,s>=128&&++o,s>=16384&&++o,s>=2097152&&++o;var i=t.next(o);n<=127?i.write_shift(1,n):(i.write_shift(1,(n&127)+128),i.write_shift(1,n>>7));for(var l=0;l!=4;++l)if(s>=128)i.write_shift(1,(s&127)+128),s>>=7;else{i.write_shift(1,s);break}s>0&&XN(a)&&t.push(a)}}function jm(t,r,a){var s=js(t);if(r.s?(s.cRel&&(s.c+=r.s.c),s.rRel&&(s.r+=r.s.r)):(s.cRel&&(s.c+=r.c),s.rRel&&(s.r+=r.r)),!a||a.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function Gk(t,r,a){var s=js(t);return s.s=jm(s.s,r.s,a),s.e=jm(s.e,r.s,a),s}function Nm(t,r){if(t.cRel&&t.c<0)for(t=js(t);t.c<0;)t.c+=r>8?16384:256;if(t.rRel&&t.r<0)for(t=js(t);t.r<0;)t.r+=r>8?1048576:r>5?65536:16384;var a=cr(t);return!t.cRel&&t.cRel!=null&&(a=xfe(a)),!t.rRel&&t.rRel!=null&&(a=ufe(a)),a}function wv(t,r){return t.s.r==0&&!t.s.rRel&&t.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Wa(t.s.c)+":"+(t.e.cRel?"":"$")+Wa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(r.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+$a(t.s.r)+":"+(t.e.rRel?"":"$")+$a(t.e.r):Nm(t.s,r.biff)+":"+Nm(t.e,r.biff)}function YN(t){return parseInt(mfe(t),10)-1}function $a(t){return""+(t+1)}function ufe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function mfe(t){return t.replace(/\$(\d+)$/,"$1")}function QN(t){for(var r=pfe(t),a=0,s=0;s!==r.length;++s)a=26*a+r.charCodeAt(s)-64;return a-1}function Wa(t){if(t<0)throw new Error("invalid column "+t);var r="";for(++t;t;t=Math.floor((t-1)/26))r=String.fromCharCode((t-1)%26+65)+r;return r}function xfe(t){return t.replace(/^([A-Z])/,"$$$1")}function pfe(t){return t.replace(/^\$([A-Z])/,"$1")}function hfe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Na(t){for(var r=0,a=0,s=0;s<t.length;++s){var n=t.charCodeAt(s);n>=48&&n<=57?r=10*r+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:r-1}}function cr(t){for(var r=t.c+1,a="";r;r=(r-1)/26|0)a=String.fromCharCode((r-1)%26+65)+a;return a+(t.r+1)}function zs(t){var r=t.indexOf(":");return r==-1?{s:Na(t),e:Na(t)}:{s:Na(t.slice(0,r)),e:Na(t.slice(r+1))}}function ra(t,r){return typeof r>"u"||typeof r=="number"?ra(t.s,t.e):(typeof t!="string"&&(t=cr(t)),typeof r!="string"&&(r=cr(r)),t==r?t:t+":"+r)}function Cr(t){var r={s:{c:0,r:0},e:{c:0,r:0}},a=0,s=0,n=0,o=t.length;for(a=0;s<o&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)a=26*a+n;for(r.s.c=--a,a=0;s<o&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)a=10*a+n;if(r.s.r=--a,s===o||n!=10)return r.e.c=r.s.c,r.e.r=r.s.r,r;for(++s,a=0;s!=o&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)a=26*a+n;for(r.e.c=--a,a=0;s!=o&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)a=10*a+n;return r.e.r=--a,r}function Xk(t,r){var a=t.t=="d"&&r instanceof Date;if(t.z!=null)try{return t.w=Fi(t.z,a?ys(r):r)}catch{}try{return t.w=Fi((t.XF||{}).numFmtId||(a?14:0),a?ys(r):r)}catch{return""+r}}function Lo(t,r,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?c0[t.v]||t.v:r==null?Xk(t,t.v):Xk(t,r))}function ic(t,r){var a=r&&r.sheet?r.sheet:"Sheet1",s={};return s[a]=t,{SheetNames:[a],Sheets:s}}function _$(t,r,a){var s=a||{},n=t?Array.isArray(t):s.dense,o=t||(n?[]:{}),i=0,l=0;if(o&&s.origin!=null){if(typeof s.origin=="number")i=s.origin;else{var c=typeof s.origin=="string"?Na(s.origin):s.origin;i=c.r,l=c.c}o["!ref"]||(o["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var u=Cr(o["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),i==-1&&(d.e.r=i=u.e.r+1)}for(var m=0;m!=r.length;++m)if(r[m]){if(!Array.isArray(r[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=r[m].length;++x)if(!(typeof r[m][x]>"u")){var h={v:r[m][x]},v=i+m,p=l+x;if(d.s.r>v&&(d.s.r=v),d.s.c>p&&(d.s.c=p),d.e.r<v&&(d.e.r=v),d.e.c<p&&(d.e.c=p),r[m][x]&&typeof r[m][x]=="object"&&!Array.isArray(r[m][x])&&!(r[m][x]instanceof Date))h=r[m][x];else if(Array.isArray(h.v)&&(h.f=r[m][x][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(s.nullError)h.t="e",h.v=0;else if(s.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=s.dateNF||qr[14],s.cellDates?(h.t="d",h.w=Fi(h.z,ys(h.v))):(h.t="n",h.v=ys(h.v),h.w=Fi(h.z,h.v))):h.t="s";if(n)o[v]||(o[v]=[]),o[v][p]&&o[v][p].z&&(h.z=o[v][p].z),o[v][p]=h;else{var g=cr({c:p,r:v});o[g]&&o[g].z&&(h.z=o[g].z),o[g]=h}}}return d.s.c<1e7&&(o["!ref"]=ra(d)),o}function bu(t,r){return _$(null,t,r)}function ffe(t){return t.read_shift(4,"i")}function En(t,r){return r||(r=ze(4)),r.write_shift(4,t),r}function Ha(t){var r=t.read_shift(4);return r===0?"":t.read_shift(r,"dbcs")}function wa(t,r){var a=!1;return r==null&&(a=!0,r=ze(4+2*t.length)),r.write_shift(4,t.length),t.length>0&&r.write_shift(0,t,"dbcs"),a?r.slice(0,r.l):r}function gfe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function bfe(t,r){return r||(r=ze(4)),r.write_shift(2,0),r.write_shift(2,0),r}function JN(t,r){var a=t.l,s=t.read_shift(1),n=Ha(t),o=[],i={t:n,h:n};if(s&1){for(var l=t.read_shift(4),c=0;c!=l;++c)o.push(gfe(t));i.r=o}else i.r=[{ich:0,ifnt:0}];return t.l=a+r,i}function vfe(t,r){var a=!1;return r==null&&(a=!0,r=ze(15+4*t.t.length)),r.write_shift(1,0),wa(t.t,r),a?r.slice(0,r.l):r}var yfe=JN;function jfe(t,r){var a=!1;return r==null&&(a=!0,r=ze(23+4*t.t.length)),r.write_shift(1,1),wa(t.t,r),r.write_shift(4,1),bfe({},r),a?r.slice(0,r.l):r}function dn(t){var r=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:r,iStyleRef:a}}function lc(t,r){return r==null&&(r=ze(8)),r.write_shift(-4,t.c),r.write_shift(3,t.iStyleRef||t.s),r.write_shift(1,0),r}function cc(t){var r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:r}}function dc(t,r){return r==null&&(r=ze(4)),r.write_shift(3,t.iStyleRef||t.s),r.write_shift(1,0),r}var Nfe=Ha,S$=wa;function ZN(t){var r=t.read_shift(4);return r===0||r===4294967295?"":t.read_shift(r,"dbcs")}function Ef(t,r){var a=!1;return r==null&&(a=!0,r=ze(127)),r.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&r.write_shift(0,t,"dbcs"),a?r.slice(0,r.l):r}var wfe=Ha,y1=ZN,ew=Ef;function C$(t){var r=t.slice(t.l,t.l+4),a=r[0]&1,s=r[0]&2;t.l+=4;var n=s===0?kf([0,0,0,0,r[0]&252,r[1],r[2],r[3]],0):ll(r,0)>>2;return a?n/100:n}function k$(t,r){r==null&&(r=ze(4));var a=0,s=0,n=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?s=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(s=1,a=1),s)r.write_shift(-4,((a?n:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function E$(t){var r={s:{},e:{}};return r.s.r=t.read_shift(4),r.e.r=t.read_shift(4),r.s.c=t.read_shift(4),r.e.c=t.read_shift(4),r}function _fe(t,r){return r||(r=ze(16)),r.write_shift(4,t.s.r),r.write_shift(4,t.e.r),r.write_shift(4,t.s.c),r.write_shift(4,t.e.c),r}var uc=E$,vu=_fe;function yu(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Xl(t,r){return(r||ze(8)).write_shift(8,t,"f")}function Sfe(t){var r={},a=t.read_shift(1),s=a>>>1,n=t.read_shift(1),o=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,s){case 0:r.auto=1;break;case 1:r.index=n;var d=$fe[n];d&&(r.rgb=o6(d));break;case 2:r.rgb=o6([i,l,c]);break;case 3:r.theme=n;break}return o!=0&&(r.tint=o>0?o/32767:o/32768),r}function Af(t,r){if(r||(r=ze(8)),!t||t.auto)return r.write_shift(4,0),r.write_shift(4,0),r;t.index!=null?(r.write_shift(1,2),r.write_shift(1,t.index)):t.theme!=null?(r.write_shift(1,6),r.write_shift(1,t.theme)):(r.write_shift(1,5),r.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),r.write_shift(2,a),!t.rgb||t.theme!=null)r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);else{var s=t.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),r.write_shift(1,parseInt(s.slice(0,2),16)),r.write_shift(1,parseInt(s.slice(2,4),16)),r.write_shift(1,parseInt(s.slice(4,6),16)),r.write_shift(1,255)}return r}function Cfe(t){var r=t.read_shift(1);t.l++;var a={fBold:r&1,fItalic:r&2,fUnderline:r&4,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return a}function kfe(t,r){r||(r=ze(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return r.write_shift(1,a),r.write_shift(1,0),r}var A$=2,Es=3,ip=11,Pf=19,lp=64,Efe=65,Afe=71,Pfe=4108,Tfe=4126,Pa=80,Yk={1:{n:"CodePage",t:A$},2:{n:"Category",t:Pa},3:{n:"PresentationFormat",t:Pa},4:{n:"ByteCount",t:Es},5:{n:"LineCount",t:Es},6:{n:"ParagraphCount",t:Es},7:{n:"SlideCount",t:Es},8:{n:"NoteCount",t:Es},9:{n:"HiddenCount",t:Es},10:{n:"MultimediaClipCount",t:Es},11:{n:"ScaleCrop",t:ip},12:{n:"HeadingPairs",t:Pfe},13:{n:"TitlesOfParts",t:Tfe},14:{n:"Manager",t:Pa},15:{n:"Company",t:Pa},16:{n:"LinksUpToDate",t:ip},17:{n:"CharacterCount",t:Es},19:{n:"SharedDoc",t:ip},22:{n:"HyperlinksChanged",t:ip},23:{n:"AppVersion",t:Es,p:"version"},24:{n:"DigSig",t:Efe},26:{n:"ContentType",t:Pa},27:{n:"ContentStatus",t:Pa},28:{n:"Language",t:Pa},29:{n:"Version",t:Pa},255:{},2147483648:{n:"Locale",t:Pf},2147483651:{n:"Behavior",t:Pf},1919054434:{}},Qk={1:{n:"CodePage",t:A$},2:{n:"Title",t:Pa},3:{n:"Subject",t:Pa},4:{n:"Author",t:Pa},5:{n:"Keywords",t:Pa},6:{n:"Comments",t:Pa},7:{n:"Template",t:Pa},8:{n:"LastAuthor",t:Pa},9:{n:"RevNumber",t:Pa},10:{n:"EditTime",t:lp},11:{n:"LastPrinted",t:lp},12:{n:"CreatedDate",t:lp},13:{n:"ModifiedDate",t:lp},14:{n:"PageCount",t:Es},15:{n:"WordCount",t:Es},16:{n:"CharCount",t:Es},17:{n:"Thumbnail",t:Afe},18:{n:"Application",t:Pa},19:{n:"DocSecurity",t:Es},255:{},2147483648:{n:"Locale",t:Pf},2147483651:{n:"Behavior",t:Pf},1919054434:{}};function Ofe(t){return t.map(function(r){return[r>>16&255,r>>8&255,r&255]})}var Ffe=Ofe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),$fe=js(Ffe),c0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Rfe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},cp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function P$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function T$(t,r){var a=Whe(Rfe),s=[],n;s[s.length]=na,s[s.length]=dt("Types",null,{xmlns:ja.CT,"xmlns:xsd":ja.xsd,"xmlns:xsi":ja.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return dt("Default",null,{Extension:c[0],ContentType:c[1]})}));var o=function(c){t[c]&&t[c].length>0&&(n=t[c][0],s[s.length]=dt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:cp[c][r.bookType]||cp[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(d){s[s.length]=dt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:cp[c][r.bookType]||cp[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(d){s[s.length]=dt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:a[c][0]})})};return o("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var Jt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function O$(t){var r=t.lastIndexOf("/");return t.slice(0,r+1)+"_rels/"+t.slice(r+1)+".rels"}function ad(t){var r=[na,dt("Relationships",null,{xmlns:ja.RELS})];return Da(t["!id"]).forEach(function(a){r[r.length]=dt("Relationship",null,t["!id"][a])}),r.length>2&&(r[r.length]="</Relationships>",r[1]=r[1].replace("/>",">")),r.join("")}function nr(t,r,a,s,n,o){if(n||(n={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),r<0)for(r=t["!idx"];t["!id"]["rId"+r];++r);if(t["!idx"]=r+1,n.Id="rId"+r,n.Type=s,n.Target=a,[Jt.HLINK,Jt.XPATH,Jt.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),t["!id"][n.Id])throw new Error("Cannot rewrite rId "+r);return t["!id"][n.Id]=n,t[("/"+n.Target).replace("//","/")]=n,r}function Dfe(t){var r=[na];r.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),r.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)r.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return r.push("</manifest:manifest>"),r.join("")}function Jk(t,r,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+r+`"/>
`,`  </rdf:Description>
`].join("")}function Mfe(t,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+`"/>
`,`  </rdf:Description>
`].join("")}function Ife(t){var r=[na];r.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)r.push(Jk(t[a][0],t[a][1])),r.push(Mfe("",t[a][0]));return r.push(Jk("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}function F$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+jf.version+"</meta:generator></office:meta></office:document-meta>"}var El=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function _v(t,r,a,s,n){n[t]!=null||r==null||r===""||(n[t]=r,r=ir(r),s[s.length]=a?dt(t,r,a):Oa(t,r))}function $$(t,r){var a=r||{},s=[na,dt("cp:coreProperties",null,{"xmlns:cp":ja.CORE_PROPS,"xmlns:dc":ja.dc,"xmlns:dcterms":ja.dcterms,"xmlns:dcmitype":ja.dcmitype,"xmlns:xsi":ja.xsi})],n={};if(!t&&!a.Props)return s.join("");t&&(t.CreatedDate!=null&&_v("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:v1(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},s,n),t.ModifiedDate!=null&&_v("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:v1(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},s,n));for(var o=0;o!=El.length;++o){var i=El[o],l=a.Props&&a.Props[i[1]]!=null?a.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&_v(i[0],l,null,s,n)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var sd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],R$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function D$(t){var r=[],a=dt;return t||(t={}),t.Application="SheetJS",r[r.length]=na,r[r.length]=dt("Properties",null,{xmlns:ja.EXT_PROPS,"xmlns:vt":ja.vt}),sd.forEach(function(s){if(t[s[1]]!==void 0){var n;switch(s[2]){case"string":n=ir(String(t[s[1]]));break;case"bool":n=t[s[1]]?"true":"false";break}n!==void 0&&(r[r.length]=a(s[0],n))}}),r[r.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),r[r.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(s){return"<vt:lpstr>"+ir(s)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}function M$(t){var r=[na,dt("Properties",null,{xmlns:ja.CUST_PROPS,"xmlns:vt":ja.vt})];if(!t)return r.join("");var a=1;return Da(t).forEach(function(n){++a,r[r.length]=dt("property",rfe(t[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:ir(n)})}),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var Zk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Lfe(t,r){var a=[];return Da(Zk).map(function(s){for(var n=0;n<El.length;++n)if(El[n][1]==s)return El[n];for(n=0;n<sd.length;++n)if(sd[n][1]==s)return sd[n];throw s}).forEach(function(s){if(t[s[1]]!=null){var n=r&&r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:t[s[1]];switch(s[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),a.push(Oa(Zk[s[1]]||s[1],n))}}),dt("DocumentProperties",a.join(""),{xmlns:Os.o})}function Bfe(t,r){var a=["Worksheets","SheetNames"],s="CustomDocumentProperties",n=[];return t&&Da(t).forEach(function(o){if(Object.prototype.hasOwnProperty.call(t,o)){for(var i=0;i<El.length;++i)if(o==El[i][1])return;for(i=0;i<sd.length;++i)if(o==sd[i][1])return;for(i=0;i<a.length;++i)if(o==a[i])return;var l=t[o],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),n.push(dt(Bk(o),l,{"dt:dt":c}))}}),r&&Da(r).forEach(function(o){if(Object.prototype.hasOwnProperty.call(r,o)&&!(t&&Object.prototype.hasOwnProperty.call(t,o))){var i=r[o],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),n.push(dt(Bk(o),i,{"dt:dt":l}))}}),"<"+s+' xmlns="'+Os.o+'">'+n.join("")+"</"+s+">"}function zfe(t){var r=typeof t=="string"?new Date(Date.parse(t)):t,a=r.getTime()/1e3+11644473600,s=a%Math.pow(2,32),n=(a-s)/Math.pow(2,32);s*=1e7,n*=1e7;var o=s/Math.pow(2,32)|0;o>0&&(s=s%Math.pow(2,32),n+=o);var i=ze(8);return i.write_shift(4,s),i.write_shift(4,n),i}function e6(t,r){var a=ze(4),s=ze(4);switch(a.write_shift(4,t==80?31:t),t){case 3:s.write_shift(-4,r);break;case 5:s=ze(8),s.write_shift(8,r,"f");break;case 11:s.write_shift(4,r?1:0);break;case 64:s=zfe(r);break;case 31:case 80:for(s=ze(4+2*(r.length+1)+(r.length%2?0:2)),s.write_shift(4,r.length+1),s.write_shift(0,r,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+r)}return Ta([a,s])}var I$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function qfe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function t6(t,r,a){var s=ze(8),n=[],o=[],i=8,l=0,c=ze(8),d=ze(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),o.push(c),n.push(d),i+=8+c.length,!r){d=ze(8),d.write_shift(4,0),n.unshift(d);var u=[ze(4)];for(u[0].write_shift(4,t.length),l=0;l<t.length;++l){var m=t[l][0];for(c=ze(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Ta(u),o.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(r&&!r[t[l][0]])&&!(I$.indexOf(t[l][0])>-1||R$.indexOf(t[l][0])>-1)&&t[l][1]!=null){var x=t[l][1],h=0;if(r){h=+r[t[l][0]];var v=a[h];if(v.p=="version"&&typeof x=="string"){var p=x.split(".");x=(+p[0]<<16)+(+p[1]||0)}c=e6(v.t,x)}else{var g=qfe(x);g==-1&&(g=31,x=String(x)),c=e6(g,x)}o.push(c),d=ze(8),d.write_shift(4,r?h:2+l),n.push(d),i+=8+c.length}var y=8*(o.length+1);for(l=0;l<o.length;++l)n[l].write_shift(4,y),y+=o[l].length;return s.write_shift(4,i),s.write_shift(4,o.length),Ta([s].concat(n).concat(o))}function r6(t,r,a,s,n,o){var i=ze(n?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,xr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,n?2:1),i.write_shift(16,r,"hex"),i.write_shift(4,n?68:48);var c=t6(t,a,s);if(l.push(c),n){var d=t6(n,null,null);i.write_shift(16,o,"hex"),i.write_shift(4,68+c.length),l.push(d)}return Ta(l)}function Vfe(t,r){r||(r=ze(t));for(var a=0;a<t;++a)r.write_shift(1,0);return r}function Ufe(t,r){return t.read_shift(r)===1}function Qa(t,r){return r||(r=ze(2)),r.write_shift(2,+!!t),r}function L$(t){return t.read_shift(2,"u")}function Qs(t,r){return r||(r=ze(2)),r.write_shift(2,t),r}function B$(t,r,a){return a||(a=ze(2)),a.write_shift(1,r=="e"?+t:+!!t),a.write_shift(1,r=="e"?1:0),a}function z$(t,r,a){var s=t.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var o=t.read_shift(1);o&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var i=s?t.read_shift(s,n):"";return i}function Wfe(t){var r=t.t||"",a=ze(3);a.write_shift(2,r.length),a.write_shift(1,1);var s=ze(2*r.length);s.write_shift(2*r.length,r,"utf16le");var n=[a,s];return Ta(n)}function Hfe(t,r,a){var s;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(r,"cpstr");if(a.biff>=12)return t.read_shift(r,"dbcs-cont")}var n=t.read_shift(1);return n===0?s=t.read_shift(r,"sbcs-cont"):s=t.read_shift(r,"dbcs-cont"),s}function Kfe(t,r,a){var s=t.read_shift(a&&a.biff==2?1:2);return s===0?(t.l++,""):Hfe(t,s,a)}function Gfe(t,r,a){if(a.biff>5)return Kfe(t,r,a);var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function q$(t,r,a){return a||(a=ze(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function a6(t,r){r||(r=ze(6+t.length*2)),r.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Xfe(t){var r=ze(512),a=0,s=t.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var n=s.indexOf("#"),o=n>-1?31:23;switch(s.charAt(0)){case"#":o=28;break;case".":o&=-3;break}r.write_shift(4,2),r.write_shift(4,o);var i=[8,6815827,6619237,4849780,83];for(a=0;a<i.length;++a)r.write_shift(4,i[a]);if(o==28)s=s.slice(1),a6(s,r);else if(o&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<i.length;++a)r.write_shift(1,parseInt(i[a],16));var l=n>-1?s.slice(0,n):s;for(r.write_shift(4,2*(l.length+1)),a=0;a<l.length;++a)r.write_shift(2,l.charCodeAt(a));r.write_shift(2,0),o&8&&a6(n>-1?s.slice(n+1):"",r)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<i.length;++a)r.write_shift(1,parseInt(i[a],16));for(var c=0;s.slice(c*3,c*3+3)=="../"||s.slice(c*3,c*3+3)=="..\\";)++c;for(r.write_shift(2,c),r.write_shift(4,s.length-3*c+1),a=0;a<s.length-3*c;++a)r.write_shift(1,s.charCodeAt(a+3*c)&255);for(r.write_shift(1,0),r.write_shift(2,65535),r.write_shift(2,57005),a=0;a<6;++a)r.write_shift(4,0)}return r.slice(0,r.l)}function Yl(t,r,a,s){return s||(s=ze(6)),s.write_shift(2,t),s.write_shift(2,r),s.write_shift(2,a||0),s}function Yfe(t,r,a){var s=a.biff>8?4:2,n=t.read_shift(s),o=t.read_shift(s,"i"),i=t.read_shift(s,"i");return[n,o,i]}function Qfe(t){var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),n=t.read_shift(2);return{s:{c:s,r},e:{c:n,r:a}}}function V$(t,r){return r||(r=ze(8)),r.write_shift(2,t.s.r),r.write_shift(2,t.e.r),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c),r}function tw(t,r,a){var s=1536,n=16;switch(a.bookType){case"biff8":break;case"biff5":s=1280,n=8;break;case"biff4":s=4,n=6;break;case"biff3":s=3,n=6;break;case"biff2":s=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var o=ze(n);return o.write_shift(2,s),o.write_shift(2,r),n>4&&o.write_shift(2,29282),n>6&&o.write_shift(2,1997),n>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function Jfe(t,r){var a=!r||r.biff==8,s=ze(a?112:54);for(s.write_shift(r.biff==8?2:1,7),a&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(a?0:536870912));s.l<s.length;)s.write_shift(1,a?0:32);return s}function Zfe(t,r){var a=!r||r.biff>=8?2:1,s=ze(8+a*t.name.length);s.write_shift(4,t.pos),s.write_shift(1,t.hs||0),s.write_shift(1,t.dt),s.write_shift(1,t.name.length),r.biff>=8&&s.write_shift(1,1),s.write_shift(a*t.name.length,t.name,r.biff<8?"sbcs":"utf16le");var n=s.slice(0,s.l);return n.l=s.l,n}function ege(t,r){var a=ze(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var s=[],n=0;n<t.length;++n)s[n]=Wfe(t[n]);var o=Ta([a].concat(s));return o.parts=[a.length].concat(s.map(function(i){return i.length})),o}function tge(){var t=ze(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function rge(t){var r=ze(18),a=1718;return t&&t.RTL&&(a|=64),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,64),r.write_shift(4,0),r.write_shift(4,0),r}function age(t,r){var a=t.name||"Arial",s=r&&r.biff==5,n=s?15+a.length:16+2*a.length,o=ze(n);return o.write_shift(2,t.sz*20),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,a.length),s||o.write_shift(1,1),o.write_shift((s?1:2)*a.length,a,s?"sbcs":"utf16le"),o}function sge(t,r,a,s){var n=ze(10);return Yl(t,r,s,n),n.write_shift(4,a),n}function nge(t,r,a,s,n){var o=!n||n.biff==8,i=ze(8+ +o+(1+o)*a.length);return Yl(t,r,s,i),i.write_shift(2,a.length),o&&i.write_shift(1,1),i.write_shift((1+o)*a.length,a,o?"utf16le":"sbcs"),i}function oge(t,r,a,s){var n=a&&a.biff==5;s||(s=ze(n?3+r.length:5+2*r.length)),s.write_shift(2,t),s.write_shift(n?1:2,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le");var o=s.length>s.l?s.slice(0,s.l):s;return o.l==null&&(o.l=o.length),o}function ige(t,r){var a=r.biff==8||!r.biff?4:2,s=ze(2*a+6);return s.write_shift(a,t.s.r),s.write_shift(a,t.e.r+1),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c+1),s.write_shift(2,0),s}function s6(t,r,a,s){var n=a&&a.biff==5;s||(s=ze(n?16:20)),s.write_shift(2,0),t.style?(s.write_shift(2,t.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,t.numFmtId||0),s.write_shift(2,r<<4));var o=0;return t.numFmtId>0&&n&&(o|=1024),s.write_shift(4,o),s.write_shift(4,0),n||s.write_shift(4,0),s.write_shift(2,0),s}function lge(t){var r=ze(8);return r.write_shift(4,0),r.write_shift(2,0),r.write_shift(2,0),r}function cge(t,r,a,s,n,o){var i=ze(8);return Yl(t,r,s,i),B$(a,o,i),i}function dge(t,r,a,s){var n=ze(14);return Yl(t,r,s,n),Xl(a,n),n}function uge(t,r,a){if(a.biff<8)return mge(t,r,a);for(var s=[],n=t.l+r,o=t.read_shift(a.biff>8?4:2);o--!==0;)s.push(Yfe(t,a.biff>8?12:6,a));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return s}function mge(t,r,a){t[t.l+1]==3&&t[t.l]++;var s=z$(t,r,a);return s.charCodeAt(0)==3?s.slice(1):s}function xge(t){var r=ze(2+t.length*8);r.write_shift(2,t.length);for(var a=0;a<t.length;++a)V$(t[a],r);return r}function pge(t){var r=ze(24),a=Na(t[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)r.write_shift(1,parseInt(s[n],16));return Ta([r,Xfe(t[1])])}function hge(t){var r=t[1].Tooltip,a=ze(10+2*(r.length+1));a.write_shift(2,2048);var s=Na(t[0]);a.write_shift(2,s.r),a.write_shift(2,s.r),a.write_shift(2,s.c),a.write_shift(2,s.c);for(var n=0;n<r.length;++n)a.write_shift(2,r.charCodeAt(n));return a.write_shift(2,0),a}function fge(t){return t||(t=ze(4)),t.write_shift(2,1),t.write_shift(2,1),t}function gge(t,r,a){if(!a.cellStyles)return to(t,r);var s=a&&a.biff>=12?4:2,n=t.read_shift(s),o=t.read_shift(s),i=t.read_shift(s),l=t.read_shift(s),c=t.read_shift(2);s==2&&(t.l+=2);var d={s:n,e:o,w:i,ixfe:l,flags:c};return(a.biff>=5||!a.biff)&&(d.level=c>>8&7),d}function bge(t,r){var a=ze(12);a.write_shift(2,r),a.write_shift(2,r),a.write_shift(2,t.width*256),a.write_shift(2,0);var s=0;return t.hidden&&(s|=1),a.write_shift(1,s),s=t.level||0,a.write_shift(1,s),a.write_shift(2,0),a}function vge(t){for(var r=ze(2*t),a=0;a<t;++a)r.write_shift(2,a+1);return r}function yge(t,r,a){var s=ze(15);return u0(s,t,r),s.write_shift(8,a,"f"),s}function jge(t,r,a){var s=ze(9);return u0(s,t,r),s.write_shift(2,a),s}var Nge=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},r=UN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(l,c){var d=[],u=Gl(1);switch(c.type){case"base64":u=jn(Io(l));break;case"binary":u=jn(l);break;case"buffer":case"array":u=l;break}Ts(u,0);var m=u.read_shift(1),x=!!(m&136),h=!1,v=!1;switch(m){case 2:break;case 3:break;case 48:h=!0,x=!0;break;case 49:h=!0,x=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var p=0,g=521;m==2&&(p=u.read_shift(2)),u.l+=3,m!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),m!=2&&(g=u.read_shift(2));var y=u.read_shift(2),f=c.codepage||1252;m!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(f=t[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var b=[],N={},_=Math.min(u.length,m==2?521:g-10-(h?264:0)),w=v?32:11;u.l<_&&u[u.l]!=13;)switch(N={},N.name=Nf.utils.decode(f,u.slice(u.l,u.l+w)).replace(/[\u0000\r\n].*$/g,""),u.l+=w,N.type=String.fromCharCode(u.read_shift(1)),m!=2&&!v&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),m==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&b.push(N),m!=2&&(u.l+=v?13:14),N.type){case"B":(!h||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var S=0,C=0;for(d[0]=[],C=0;C!=b.length;++C)d[0][C]=b[C].name;for(;p-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++S]=[],C=0,C=0;C!=b.length;++C){var E=u.slice(u.l,u.l+b[C].len);u.l+=b[C].len,Ts(E,0);var T=Nf.utils.decode(f,E);switch(b[C].type){case"C":T.trim().length&&(d[S][C]=T.replace(/\s+$/,""));break;case"D":T.length===8?d[S][C]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):d[S][C]=T;break;case"F":d[S][C]=parseFloat(T.trim());break;case"+":case"I":d[S][C]=v?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":d[S][C]=!0;break;case"N":case"F":d[S][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));d[S][C]="##MEMO##"+(v?parseInt(T.trim(),10):E.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(d[S][C]=+T||0);break;case"@":d[S][C]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":d[S][C]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":d[S][C]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[S][C]=-E.read_shift(-8,"f");break;case"B":if(h&&b[C].len==8){d[S][C]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[C].len;break;case"0":if(b[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[C].type)}}}if(m!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=b,d}function s(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=bu(a(l,d),d);return u["!cols"]=d.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete d.DBF,u}function n(l,c){try{return ic(s(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var o={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var d=c||{};if(+d.codepage>=0&&Ox(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=vs(),m=Rf(l,{header:1,raw:!0,cellDates:!0}),x=m[0],h=m.slice(1),v=l["!cols"]||[],p=0,g=0,y=0,f=1;for(p=0;p<x.length;++p){if(((v[p]||{}).DBF||{}).name){x[p]=v[p].DBF.name,++y;continue}if(x[p]!=null){if(++y,typeof x[p]=="number"&&(x[p]=x[p].toString(10)),typeof x[p]!="string")throw new Error("DBF Invalid column name "+x[p]+" |"+typeof x[p]+"|");if(x.indexOf(x[p])!==p){for(g=0;g<1024;++g)if(x.indexOf(x[p]+"_"+g)==-1){x[p]+="_"+g;break}}}}var b=Cr(l["!ref"]),N=[],_=[],w=[];for(p=0;p<=b.e.c-b.s.c;++p){var S="",C="",E=0,T=[];for(g=0;g<h.length;++g)h[g][p]!=null&&T.push(h[g][p]);if(T.length==0||x[p]==null){N[p]="?";continue}for(g=0;g<T.length;++g){switch(typeof T[g]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=T[g]instanceof Date?"D":"C";break;default:C="C"}E=Math.max(E,String(T[g]).length),S=S&&S!=C?"C":C}E>250&&(E=250),C=((v[p]||{}).DBF||{}).type,C=="C"&&v[p].DBF.len>E&&(E=v[p].DBF.len),S=="B"&&C=="N"&&(S="N",w[p]=v[p].DBF.dec,E=v[p].DBF.len),_[p]=S=="C"||C=="N"?E:o[S]||0,f+=_[p],N[p]=S}var q=u.next(32);for(q.write_shift(4,318902576),q.write_shift(4,h.length),q.write_shift(2,296+32*y),q.write_shift(2,f),p=0;p<4;++p)q.write_shift(4,0);for(q.write_shift(4,0|(+r[WF]||3)<<8),p=0,g=0;p<x.length;++p)if(x[p]!=null){var A=u.next(32),O=(x[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,O,"sbcs"),A.write_shift(1,N[p]=="?"?"C":N[p],"sbcs"),A.write_shift(4,g),A.write_shift(1,_[p]||o[N[p]]||0),A.write_shift(1,w[p]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),g+=_[p]||o[N[p]]||0}var V=u.next(264);for(V.write_shift(4,13),p=0;p<65;++p)V.write_shift(4,0);for(p=0;p<h.length;++p){var G=u.next(f);for(G.write_shift(1,0),g=0;g<x.length;++g)if(x[g]!=null)switch(N[g]){case"L":G.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":G.write_shift(8,h[p][g]||0,"f");break;case"N":var L="0";for(typeof h[p][g]=="number"&&(L=h[p][g].toFixed(w[g]||0)),y=0;y<_[g]-L.length;++y)G.write_shift(1,32);G.write_shift(1,L,"sbcs");break;case"D":h[p][g]?(G.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(h[p][g]!=null?h[p][g]:"").slice(0,_[g]);for(G.write_shift(1,Z,"sbcs"),y=0;y<_[g]-Z.length;++y)G.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:s,from_sheet:i}}(),wge=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},r=new RegExp("\x1BN("+Da(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(x,h){var v=t[h];return typeof v=="number"?Ek(v):v},s=function(x,h,v){var p=h.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return p==59?x:Ek(p)};t["|"]=254;function n(x,h){switch(h.type){case"base64":return o(Io(x),h);case"binary":return o(x,h);case"buffer":return o(er&&Buffer.isBuffer(x)?x.toString("binary"):o0(x),h);case"array":return o(ib(x),h)}throw new Error("Unrecognized type "+h.type)}function o(x,h){var v=x.split(/[\n\r]+/),p=-1,g=-1,y=0,f=0,b=[],N=[],_=null,w={},S=[],C=[],E=[],T=0,q;for(+h.codepage>=0&&Ox(+h.codepage);y!==v.length;++y){T=0;var A=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(r,a),O=A.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),V=O[0],G;if(A.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&N.push(A.slice(3).replace(/;;/g,";"));break;case"C":var L=!1,Z=!1,D=!1,K=!1,R=-1,B=-1;for(f=1;f<O.length;++f)switch(O[f].charAt(0)){case"A":break;case"X":g=parseInt(O[f].slice(1))-1,Z=!0;break;case"Y":for(p=parseInt(O[f].slice(1))-1,Z||(g=0),q=b.length;q<=p;++q)b[q]=[];break;case"K":G=O[f].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(So(G))?isNaN($x(G).getDate())||(G=ss(G)):(G=So(G),_!==null&&a$(_)&&(G=i$(G))),L=!0;break;case"E":K=!0;var F=jbe(O[f].slice(1),{r:p,c:g});b[p][g]=[b[p][g],F];break;case"S":D=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":R=parseInt(O[f].slice(1))-1;break;case"C":B=parseInt(O[f].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}if(L&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=G:b[p][g]=G,_=null),D){if(K)throw new Error("SYLK shared formula cannot have own formula");var I=R>-1&&b[R][B];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Nbe(I[1],{r:p-R,c:g-B})}break;case"F":var k=0;for(f=1;f<O.length;++f)switch(O[f].charAt(0)){case"X":g=parseInt(O[f].slice(1))-1,++k;break;case"Y":for(p=parseInt(O[f].slice(1))-1,q=b.length;q<=p;++q)b[q]=[];break;case"M":T=parseInt(O[f].slice(1))/20;break;case"F":break;case"G":break;case"P":_=N[parseInt(O[f].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=O[f].slice(1).split(" "),q=parseInt(E[0],10);q<=parseInt(E[1],10);++q)T=parseInt(E[2],10),C[q-1]=T===0?{hidden:!0}:{wch:T},rw(C[q-1]);break;case"C":g=parseInt(O[f].slice(1))-1,C[g]||(C[g]={});break;case"R":p=parseInt(O[f].slice(1))-1,S[p]||(S[p]={}),T>0?(S[p].hpt=T,S[p].hpx=G$(T)):T===0&&(S[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}k<1&&(_=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+A)}}return S.length>0&&(w["!rows"]=S),C.length>0&&(w["!cols"]=C),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,w]}function i(x,h){var v=n(x,h),p=v[0],g=v[1],y=bu(p,h);return Da(g).forEach(function(f){y[f]=g[f]}),y}function l(x,h){return ic(i(x,h),h)}function c(x,h,v,p){var g="C;Y"+(v+1)+";X"+(p+1)+";K";switch(x.t){case"n":g+=x.v||0,x.f&&!x.F&&(g+=";E"+sw(x.f,{r:v,c:p}));break;case"b":g+=x.v?"TRUE":"FALSE";break;case"e":g+=x.w||x.v;break;case"d":g+='"'+(x.w||x.v)+'"';break;case"s":g+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(x,h){h.forEach(function(v,p){var g="F;W"+(p+1)+" "+(p+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Tf(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Of(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&x.push(g)})}function u(x,h){h.forEach(function(v,p){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*Ff(v.hpx)+";"),g.length>2&&x.push(g+"R"+(p+1))})}function m(x,h){var v=["ID;PWXL;N;E"],p=[],g=Cr(x["!ref"]),y,f=Array.isArray(x),b=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),x["!cols"]&&d(v,x["!cols"]),x["!rows"]&&u(v,x["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var _=g.s.c;_<=g.e.c;++_){var w=cr({r:N,c:_});y=f?(x[N]||[])[_]:x[w],!(!y||y.v==null&&(!y.f||y.F))&&p.push(c(y,x,N,_))}return v.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:m}}(),_ge=function(){function t(o,i){switch(i.type){case"base64":return r(Io(o),i);case"binary":return r(o,i);case"buffer":return r(er&&Buffer.isBuffer(o)?o.toString("binary"):o0(o),i);case"array":return r(ib(o),i)}throw new Error("Unrecognized type "+i.type)}function r(o,i){for(var l=o.split(`
`),c=-1,d=-1,u=0,m=[];u!==l.length;++u){if(l[u].trim()==="BOT"){m[++c]=[],d=0;continue}if(!(c<0)){var x=l[u].trim().split(","),h=x[0],v=x[1];++u;for(var p=l[u]||"";(p.match(/["]/g)||[]).length&1&&u<l.length-1;)p+=`
`+l[++u];switch(p=p.trim(),+h){case-1:if(p==="BOT"){m[++c]=[],d=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?m[c][d]=!0:p==="FALSE"?m[c][d]=!1:isNaN(So(v))?isNaN($x(v).getDate())?m[c][d]=v:m[c][d]=ss(v):m[c][d]=So(v),++d;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),m[c][d++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(m=m.slice(0,i.sheetRows)),m}function a(o,i){return bu(t(o,i),i)}function s(o,i){return ic(a(o,i),i)}var n=function(){var o=function(c,d,u,m,x){c.push(d),c.push(u+","+m),c.push('"'+x.replace(/"/g,'""')+'"')},i=function(c,d,u,m){c.push(d+","+u),c.push(d==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var d=[],u=Cr(c["!ref"]),m,x=Array.isArray(c);o(d,"TABLE",0,1,"sheetjs"),o(d,"VECTORS",0,u.e.r-u.s.r+1,""),o(d,"TUPLES",0,u.e.c-u.s.c+1,""),o(d,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){i(d,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var p=cr({r:h,c:v});if(m=x?(c[h]||[])[v]:c[p],!m){i(d,1,0,"");continue}switch(m.t){case"n":var g=m.w;!g&&m.v!=null&&(g=m.v),g==null?m.f&&!m.F?i(d,1,0,"="+m.f):i(d,1,0,""):i(d,0,g,"V");break;case"b":i(d,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":i(d,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Fi(m.z||qr[14],ys(ss(m.v)))),i(d,0,m.w,"V");break;default:i(d,1,0,"")}}}i(d,-1,0,"EOD");var y=`\r
`,f=d.join(y);return f}}();return{to_workbook:s,to_sheet:a,from_sheet:n}}(),U$=function(){function t(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function r(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(m,x){for(var h=m.split(`
`),v=-1,p=-1,g=0,y=[];g!==h.length;++g){var f=h[g].trim().split(":");if(f[0]==="cell"){var b=Na(f[1]);if(y.length<=b.r)for(v=y.length;v<=b.r;++v)y[v]||(y[v]=[]);switch(v=b.r,p=b.c,f[2]){case"t":y[v][p]=t(f[3]);break;case"v":y[v][p]=+f[3];break;case"vtf":var N=f[f.length-1];case"vtc":switch(f[3]){case"nl":y[v][p]=!!+f[4];break;default:y[v][p]=+f[4];break}f[2]=="vtf"&&(y[v][p]=[y[v][p],N])}}}return x&&x.sheetRows&&(y=y.slice(0,x.sheetRows)),y}function s(m,x){return bu(a(m,x),x)}function n(m,x){return ic(s(m,x),x)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(m){if(!m||!m["!ref"])return"";for(var x=[],h=[],v,p="",g=zs(m["!ref"]),y=Array.isArray(m),f=g.s.r;f<=g.e.r;++f)for(var b=g.s.c;b<=g.e.c;++b)if(p=cr({r:f,c:b}),v=y?(m[f]||[])[b]:m[p],!(!v||v.v==null||v.t==="z")){switch(h=["cell",p,"t"],v.t){case"s":case"str":h.push(r(v.v));break;case"n":v.f?(h[2]="vtf",h[3]="n",h[4]=v.v,h[5]=r(v.f)):(h[2]="v",h[3]=v.v);break;case"b":h[2]="vt"+(v.f?"f":"c"),h[3]="nl",h[4]=v.v?"1":"0",h[5]=r(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var N=ys(ss(v.v));h[2]="vtc",h[3]="nd",h[4]=""+N,h[5]=v.w||Fi(v.z||qr[14],N);break;case"e":continue}x.push(h.join(":"))}return x.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function u(m){return[o,i,l,i,d(m),c].join(`
`)}return{to_workbook:n,to_sheet:s,from_sheet:u}}(),Sge=function(){function t(u,m,x,h,v){v.raw?m[x][h]=u:u===""||(u==="TRUE"?m[x][h]=!0:u==="FALSE"?m[x][h]=!1:isNaN(So(u))?isNaN($x(u).getDate())?m[x][h]=u:m[x][h]=ss(u):m[x][h]=So(u))}function r(u,m){var x=m||{},h=[];if(!u||u.length===0)return h;for(var v=u.split(/[\r\n]/),p=v.length-1;p>=0&&v[p].length===0;)--p;for(var g=10,y=0,f=0;f<=p;++f)y=v[f].indexOf(" "),y==-1?y=v[f].length:y++,g=Math.max(g,y);for(f=0;f<=p;++f){h[f]=[];var b=0;for(t(v[f].slice(0,g).trim(),h,f,b,x),b=1;b<=(v[f].length-g)/10+1;++b)t(v[f].slice(g+(b-1)*10,g+b*10).trim(),h,f,b,x)}return x.sheetRows&&(h=h.slice(0,x.sheetRows)),h}var a={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function n(u){for(var m={},x=!1,h=0,v=0;h<u.length;++h)(v=u.charCodeAt(h))==34?x=!x:!x&&v in a&&(m[v]=(m[v]||0)+1);v=[];for(h in m)Object.prototype.hasOwnProperty.call(m,h)&&v.push([m[h],h]);if(!v.length){m=s;for(h in m)Object.prototype.hasOwnProperty.call(m,h)&&v.push([m[h],h])}return v.sort(function(p,g){return p[0]-g[0]||s[p[1]]-s[g[1]]}),a[v.pop()[1]]||44}function o(u,m){var x=m||{},h="",v=x.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=n(u.slice(0,1024)):x&&x.FS?h=x.FS:h=n(u.slice(0,1024));var g=0,y=0,f=0,b=0,N=0,_=h.charCodeAt(0),w=!1,S=0,C=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var E=x.dateNF!=null?zhe(x.dateNF):null;function T(){var q=u.slice(b,N),A={};if(q.charAt(0)=='"'&&q.charAt(q.length-1)=='"'&&(q=q.slice(1,-1).replace(/""/g,'"')),q.length===0)A.t="z";else if(x.raw)A.t="s",A.v=q;else if(q.trim().length===0)A.t="s",A.v=q;else if(q.charCodeAt(0)==61)q.charCodeAt(1)==34&&q.charCodeAt(q.length-1)==34?(A.t="s",A.v=q.slice(2,-1).replace(/""/g,'"')):wbe(q)?(A.t="n",A.f=q.slice(1)):(A.t="s",A.v=q);else if(q=="TRUE")A.t="b",A.v=!0;else if(q=="FALSE")A.t="b",A.v=!1;else if(!isNaN(f=So(q)))A.t="n",x.cellText!==!1&&(A.w=q),A.v=f;else if(!isNaN($x(q).getDate())||E&&q.match(E)){A.z=x.dateNF||qr[14];var O=0;E&&q.match(E)&&(q=qhe(q,x.dateNF,q.match(E)||[]),O=1),x.cellDates?(A.t="d",A.v=ss(q,O)):(A.t="n",A.v=ys(ss(q,O))),x.cellText!==!1&&(A.w=Fi(A.z,A.v instanceof Date?ys(A.v):A.v)),x.cellNF||delete A.z}else A.t="s",A.v=q;if(A.t=="z"||(x.dense?(v[g]||(v[g]=[]),v[g][y]=A):v[cr({c:y,r:g})]=A),b=N+1,C=u.charCodeAt(b),p.e.c<y&&(p.e.c=y),p.e.r<g&&(p.e.r=g),S==_)++y;else if(y=0,++g,x.sheetRows&&x.sheetRows<=g)return!0}e:for(;N<u.length;++N)switch(S=u.charCodeAt(N)){case 34:C===34&&(w=!w);break;case _:case 10:case 13:if(!w&&T())break e;break}return N-b>0&&T(),v["!ref"]=ra(p),v}function i(u,m){return!(m&&m.PRN)||m.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?o(u,m):bu(r(u,m),m)}function l(u,m){var x="",h=m.type=="string"?[0,0,0,0]:M1e(u,m);switch(m.type){case"base64":x=Io(u);break;case"binary":x=u;break;case"buffer":m.codepage==65001?x=u.toString("utf8"):m.codepage&&typeof Nf<"u"||(x=er&&Buffer.isBuffer(u)?u.toString("binary"):o0(u));break;case"array":x=ib(u);break;case"string":x=u;break;default:throw new Error("Unrecognized type "+m.type)}return h[0]==239&&h[1]==187&&h[2]==191?x=vm(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=vm(x):m.type=="binary"&&typeof Nf<"u",x.slice(0,19)=="socialcalc:version:"?U$.to_sheet(m.type=="string"?x:vm(x),m):i(x,m)}function c(u,m){return ic(l(u,m),m)}function d(u){for(var m=[],x=Cr(u["!ref"]),h,v=Array.isArray(u),p=x.s.r;p<=x.e.r;++p){for(var g=[],y=x.s.c;y<=x.e.c;++y){var f=cr({r:p,c:y});if(h=v?(u[p]||[])[y]:u[f],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(Lo(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(y===0?" ":""))}m.push(g.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}(),n6=function(){function t(F,I,k){if(F){Ts(F,F.l||0);for(var M=k.Enum||R;F.l<F.length;){var z=F.read_shift(2),oe=M[z]||M[65535],W=F.read_shift(2),ae=F.l+W,ee=oe.f&&oe.f(F,W,k);if(F.l=ae,I(ee,oe,z))return}}}function r(F,I){switch(I.type){case"base64":return a(jn(Io(F)),I);case"binary":return a(jn(F),I);case"buffer":case"array":return a(F,I)}throw"Unsupported type "+I.type}function a(F,I){if(!F)return F;var k=I||{},M=k.dense?[]:{},z="Sheet1",oe="",W=0,ae={},ee=[],ce=[],ie={s:{r:0,c:0},e:{r:0,c:0}},we=k.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)k.Enum=R,t(F,function(je,lt,Ke){switch(Ke){case 0:k.vers=je,je>=4096&&(k.qpro=!0);break;case 6:ie=je;break;case 204:je&&(oe=je);break;case 222:oe=je;break;case 15:case 51:k.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:Ke==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=k.dateNF||qr[14],k.cellDates&&(je[1].t="d",je[1].v=i$(je[1].v))),k.qpro&&je[3]>W&&(M["!ref"]=ra(ie),ae[z]=M,ee.push(z),M=k.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},W=je[3],z=oe||"Sheet"+(W+1),oe="");var ut=k.dense?(M[je[0].r]||[])[je[0].c]:M[cr(je[0])];if(ut){ut.t=je[1].t,ut.v=je[1].v,je[1].z!=null&&(ut.z=je[1].z),je[1].f!=null&&(ut.f=je[1].f);break}k.dense?(M[je[0].r]||(M[je[0].r]=[]),M[je[0].r][je[0].c]=je[1]):M[cr(je[0])]=je[1];break}},k);else if(F[2]==26||F[2]==14)k.Enum=B,F[2]==14&&(k.qpro=!0,F.l=0),t(F,function(je,lt,Ke){switch(Ke){case 204:z=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>W&&(M["!ref"]=ra(ie),ae[z]=M,ee.push(z),M=k.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},W=je[3],z="Sheet"+(W+1)),we>0&&je[0].r>=we)break;k.dense?(M[je[0].r]||(M[je[0].r]=[]),M[je[0].r][je[0].c]=je[1]):M[cr(je[0])]=je[1],ie.e.c<je[0].c&&(ie.e.c=je[0].c),ie.e.r<je[0].r&&(ie.e.r=je[0].r);break;case 27:je[14e3]&&(ce[je[14e3][0]]=je[14e3][1]);break;case 1537:ce[je[0]]=je[1],je[0]==W&&(z=je[1]);break}},k);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(M["!ref"]=ra(ie),ae[oe||z]=M,ee.push(oe||z),!ce.length)return{SheetNames:ee,Sheets:ae};for(var Se={},me=[],_e=0;_e<ce.length;++_e)ae[ee[_e]]?(me.push(ce[_e]||ee[_e]),Se[ce[_e]]=ae[ce[_e]]||ae[ee[_e]]):(me.push(ce[_e]),Se[ce[_e]]={"!ref":"A1"});return{SheetNames:me,Sheets:Se}}function s(F,I){var k=I||{};if(+k.codepage>=0&&Ox(+k.codepage),k.type=="string")throw new Error("Cannot write WK1 to JS string");var M=vs(),z=Cr(F["!ref"]),oe=Array.isArray(F),W=[];mt(M,0,o(1030)),mt(M,6,c(z));for(var ae=Math.min(z.e.r,8191),ee=z.s.r;ee<=ae;++ee)for(var ce=$a(ee),ie=z.s.c;ie<=z.e.c;++ie){ee===z.s.r&&(W[ie]=Wa(ie));var we=W[ie]+ce,Se=oe?(F[ee]||[])[ie]:F[we];if(!(!Se||Se.t=="z"))if(Se.t=="n")(Se.v|0)==Se.v&&Se.v>=-32768&&Se.v<=32767?mt(M,13,h(ee,ie,Se.v)):mt(M,14,p(ee,ie,Se.v));else{var me=Lo(Se);mt(M,15,m(ee,ie,me.slice(0,239)))}}return mt(M,1),M.end()}function n(F,I){var k=I||{};if(+k.codepage>=0&&Ox(+k.codepage),k.type=="string")throw new Error("Cannot write WK3 to JS string");var M=vs();mt(M,0,i(F));for(var z=0,oe=0;z<F.SheetNames.length;++z)(F.Sheets[F.SheetNames[z]]||{})["!ref"]&&mt(M,27,K(F.SheetNames[z],oe++));var W=0;for(z=0;z<F.SheetNames.length;++z){var ae=F.Sheets[F.SheetNames[z]];if(!(!ae||!ae["!ref"])){for(var ee=Cr(ae["!ref"]),ce=Array.isArray(ae),ie=[],we=Math.min(ee.e.r,8191),Se=ee.s.r;Se<=we;++Se)for(var me=$a(Se),_e=ee.s.c;_e<=ee.e.c;++_e){Se===ee.s.r&&(ie[_e]=Wa(_e));var je=ie[_e]+me,lt=ce?(ae[Se]||[])[_e]:ae[je];if(!(!lt||lt.t=="z"))if(lt.t=="n")mt(M,23,T(Se,_e,W,lt.v));else{var Ke=Lo(lt);mt(M,22,S(Se,_e,W,Ke.slice(0,239)))}}++W}}return mt(M,1),M.end()}function o(F){var I=ze(2);return I.write_shift(2,F),I}function i(F){var I=ze(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var k=0,M=0,z=0,oe=0;oe<F.SheetNames.length;++oe){var W=F.SheetNames[oe],ae=F.Sheets[W];if(!(!ae||!ae["!ref"])){++z;var ee=zs(ae["!ref"]);k<ee.e.r&&(k=ee.e.r),M<ee.e.c&&(M=ee.e.c)}}return k>8191&&(k=8191),I.write_shift(2,k),I.write_shift(1,z),I.write_shift(1,M),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function l(F,I,k){var M={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&k.qpro?(M.s.c=F.read_shift(1),F.l++,M.s.r=F.read_shift(2),M.e.c=F.read_shift(1),F.l++,M.e.r=F.read_shift(2),M):(M.s.c=F.read_shift(2),M.s.r=F.read_shift(2),I==12&&k.qpro&&(F.l+=2),M.e.c=F.read_shift(2),M.e.r=F.read_shift(2),I==12&&k.qpro&&(F.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(F){var I=ze(8);return I.write_shift(2,F.s.c),I.write_shift(2,F.s.r),I.write_shift(2,F.e.c),I.write_shift(2,F.e.r),I}function d(F,I,k){var M=[{c:0,r:0},{t:"n",v:0},0,0];return k.qpro&&k.vers!=20768?(M[0].c=F.read_shift(1),M[3]=F.read_shift(1),M[0].r=F.read_shift(2),F.l+=2):(M[2]=F.read_shift(1),M[0].c=F.read_shift(2),M[0].r=F.read_shift(2)),M}function u(F,I,k){var M=F.l+I,z=d(F,I,k);if(z[1].t="s",k.vers==20768){F.l++;var oe=F.read_shift(1);return z[1].v=F.read_shift(oe,"utf8"),z}return k.qpro&&F.l++,z[1].v=F.read_shift(M-F.l,"cstr"),z}function m(F,I,k){var M=ze(7+k.length);M.write_shift(1,255),M.write_shift(2,I),M.write_shift(2,F),M.write_shift(1,39);for(var z=0;z<M.length;++z){var oe=k.charCodeAt(z);M.write_shift(1,oe>=128?95:oe)}return M.write_shift(1,0),M}function x(F,I,k){var M=d(F,I,k);return M[1].v=F.read_shift(2,"i"),M}function h(F,I,k){var M=ze(7);return M.write_shift(1,255),M.write_shift(2,I),M.write_shift(2,F),M.write_shift(2,k,"i"),M}function v(F,I,k){var M=d(F,I,k);return M[1].v=F.read_shift(8,"f"),M}function p(F,I,k){var M=ze(13);return M.write_shift(1,255),M.write_shift(2,I),M.write_shift(2,F),M.write_shift(8,k,"f"),M}function g(F,I,k){var M=F.l+I,z=d(F,I,k);if(z[1].v=F.read_shift(8,"f"),k.qpro)F.l=M;else{var oe=F.read_shift(2);N(F.slice(F.l,F.l+oe),z),F.l+=oe}return z}function y(F,I,k){var M=I&32768;return I&=-32769,I=(M?F:0)+(I>=8192?I-16384:I),(M?"":"$")+(k?Wa(I):$a(I))}var f={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(F,I){Ts(F,0);for(var k=[],M=0,z="",oe="",W="",ae="";F.l<F.length;){var ee=F[F.l++];switch(ee){case 0:k.push(F.read_shift(8,"f"));break;case 1:oe=y(I[0].c,F.read_shift(2),!0),z=y(I[0].r,F.read_shift(2),!1),k.push(oe+z);break;case 2:{var ce=y(I[0].c,F.read_shift(2),!0),ie=y(I[0].r,F.read_shift(2),!1);oe=y(I[0].c,F.read_shift(2),!0),z=y(I[0].r,F.read_shift(2),!1),k.push(ce+ie+":"+oe+z)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:k.push("("+k.pop()+")");break;case 5:k.push(F.read_shift(2));break;case 6:{for(var we="";ee=F[F.l++];)we+=String.fromCharCode(ee);k.push('"'+we.replace(/"/g,'""')+'"')}break;case 8:k.push("-"+k.pop());break;case 23:k.push("+"+k.pop());break;case 22:k.push("NOT("+k.pop()+")");break;case 20:case 21:ae=k.pop(),W=k.pop(),k.push(["AND","OR"][ee-20]+"("+W+","+ae+")");break;default:if(ee<32&&b[ee])ae=k.pop(),W=k.pop(),k.push(W+b[ee]+ae);else if(f[ee]){if(M=f[ee][1],M==69&&(M=F[F.l++]),M>k.length){console.error("WK1 bad formula parse 0x"+ee.toString(16)+":|"+k.join("|")+"|");return}var Se=k.slice(-M);k.length-=M,k.push(f[ee][0]+"("+Se.join(",")+")")}else return ee<=7?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=24?console.error("WK1 unsupported op "+ee.toString(16)):ee<=30?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=115?console.error("WK1 unsupported function opcode "+ee.toString(16)):console.error("WK1 unrecognized opcode "+ee.toString(16))}}k.length==1?I[1].f=""+k[0]:console.error("WK1 bad formula parse |"+k.join("|")+"|")}function _(F){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=F.read_shift(2),I[3]=F[F.l++],I[0].c=F[F.l++],I}function w(F,I){var k=_(F);return k[1].t="s",k[1].v=F.read_shift(I-4,"cstr"),k}function S(F,I,k,M){var z=ze(6+M.length);z.write_shift(2,F),z.write_shift(1,k),z.write_shift(1,I),z.write_shift(1,39);for(var oe=0;oe<M.length;++oe){var W=M.charCodeAt(oe);z.write_shift(1,W>=128?95:W)}return z.write_shift(1,0),z}function C(F,I){var k=_(F);k[1].v=F.read_shift(2);var M=k[1].v>>1;if(k[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return k[1].v=M,k}function E(F,I){var k=_(F),M=F.read_shift(4),z=F.read_shift(4),oe=F.read_shift(2);if(oe==65535)return M===0&&z===3221225472?(k[1].t="e",k[1].v=15):M===0&&z===3489660928?(k[1].t="e",k[1].v=42):k[1].v=0,k;var W=oe&32768;return oe=(oe&32767)-16446,k[1].v=(1-W*2)*(z*Math.pow(2,oe+32)+M*Math.pow(2,oe)),k}function T(F,I,k,M){var z=ze(14);if(z.write_shift(2,F),z.write_shift(1,k),z.write_shift(1,I),M==0)return z.write_shift(4,0),z.write_shift(4,0),z.write_shift(2,65535),z;var oe=0,W=0,ae=0,ee=0;return M<0&&(oe=1,M=-M),W=Math.log2(M)|0,M/=Math.pow(2,W-31),ee=M>>>0,ee&2147483648||(M/=2,++W,ee=M>>>0),M-=ee,ee|=2147483648,ee>>>=0,M*=Math.pow(2,32),ae=M>>>0,z.write_shift(4,ae),z.write_shift(4,ee),W+=16383+(oe?32768:0),z.write_shift(2,W),z}function q(F,I){var k=E(F);return F.l+=I-14,k}function A(F,I){var k=_(F),M=F.read_shift(4);return k[1].v=M>>6,k}function O(F,I){var k=_(F),M=F.read_shift(8,"f");return k[1].v=M,k}function V(F,I){var k=O(F);return F.l+=I-10,k}function G(F,I){return F[F.l+I-1]==0?F.read_shift(I,"cstr"):""}function L(F,I){var k=F[F.l++];k>I-1&&(k=I-1);for(var M="";M.length<k;)M+=String.fromCharCode(F[F.l++]);return M}function Z(F,I,k){if(!(!k.qpro||I<21)){var M=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var z=F.read_shift(I-21,"cstr");return[M,z]}}function D(F,I){for(var k={},M=F.l+I;F.l<M;){var z=F.read_shift(2);if(z==14e3){for(k[z]=[0,""],k[z][0]=F.read_shift(2);F[F.l];)k[z][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return k}function K(F,I){var k=ze(5+F.length);k.write_shift(2,14e3),k.write_shift(2,I);for(var M=0;M<F.length;++M){var z=F.charCodeAt(M);k[k.l++]=z>127?95:z}return k[k.l++]=0,k}var R={0:{n:"BOF",f:L$},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:L},65535:{n:""}},B={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:w},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:q},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:D},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:n,to_workbook:r}}(),Cge=/^\s|\s$|[\t\n\r]/;function W$(t,r){if(!r.bookSST)return"";var a=[na];a[a.length]=dt("sst",null,{xmlns:gu[0],count:t.Count,uniqueCount:t.Unique});for(var s=0;s!=t.length;++s)if(t[s]!=null){var n=t[s],o="<si>";n.r?o+=n.r:(o+="<t",n.t||(n.t=""),n.t.match(Cge)&&(o+=' xml:space="preserve"'),o+=">"+ir(n.t)+"</t>"),o+="</si>",a[a.length]=o}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function kge(t){return[t.read_shift(4),t.read_shift(4)]}function Ege(t,r){return r||(r=ze(8)),r.write_shift(4,t.Count),r.write_shift(4,t.Unique),r}var Age=vfe;function Pge(t){var r=vs();Xe(r,159,Ege(t));for(var a=0;a<t.length;++a)Xe(r,19,Age(t[a]));return Xe(r,160),r.end()}function Tge(t){for(var r=[],a=t.split(""),s=0;s<a.length;++s)r[s]=a[s].charCodeAt(0);return r}function H$(t){var r=0,a,s=Tge(t),n=s.length+1,o,i,l,c,d;for(a=Gl(n),a[0]=s.length,o=1;o!=n;++o)a[o]=s[o-1];for(o=n-1;o>=0;--o)i=a[o],l=r&16384?1:0,c=r<<1&32767,d=l|c,r=d^i;return r^52811}var Oge=function(){function t(n,o){switch(o.type){case"base64":return r(Io(n),o);case"binary":return r(n,o);case"buffer":return r(er&&Buffer.isBuffer(n)?n.toString("binary"):o0(n),o);case"array":return r(ib(n),o)}throw new Error("Unrecognized type "+o.type)}function r(n,o){var i=o||{},l=i.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,m){Array.isArray(l)&&(l[m]=[]);for(var x=/\\\w+\b/g,h=0,v,p=-1;v=x.exec(u);){switch(v[0]){case"\\cell":var g=u.slice(h,x.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var y={v:g,t:"s"};Array.isArray(l)?l[m][p]=y:l[cr({r:m,c:p})]=y}break}h=x.lastIndex}p>d.e.c&&(d.e.c=p)}),l["!ref"]=ra(d),l}function a(n,o){return ic(t(n,o),o)}function s(n){for(var o=["{\\rtf1\\ansi"],i=Cr(n["!ref"]),l,c=Array.isArray(n),d=i.s.r;d<=i.e.r;++d){o.push("\\trowd\\trautofit1");for(var u=i.s.c;u<=i.e.c;++u)o.push("\\cellx"+(u+1));for(o.push("\\pard\\intbl"),u=i.s.c;u<=i.e.c;++u){var m=cr({r:d,c:u});l=c?(n[d]||[])[u]:n[m],!(!l||l.v==null&&(!l.f||l.F))&&(o.push(" "+(l.w||(Lo(l),l.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:s}}();function o6(t){for(var r=0,a=1;r!=3;++r)a=a*256+(t[r]>255?255:t[r]<0?0:t[r]);return a.toString(16).toUpperCase().slice(1)}var Fge=6,Co=Fge;function Tf(t){return Math.floor((t+Math.round(128/Co)/256)*Co)}function Of(t){return Math.floor((t-5)/Co*100+.5)/100}function j1(t){return Math.round((t*Co+5)/Co*256)/256}function rw(t){t.width?(t.wpx=Tf(t.width),t.wch=Of(t.wpx),t.MDW=Co):t.wpx?(t.wch=Of(t.wpx),t.width=j1(t.wch),t.MDW=Co):typeof t.wch=="number"&&(t.width=j1(t.wch),t.wpx=Tf(t.width),t.MDW=Co),t.customWidth&&delete t.customWidth}var $ge=96,K$=$ge;function Ff(t){return t*96/K$}function G$(t){return t*K$/96}function Rge(t){var r=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&(r[r.length]=dt("numFmt",null,{numFmtId:s,formatCode:ir(t[s])}))}),r.length===1?"":(r[r.length]="</numFmts>",r[0]=dt("numFmts",null,{count:r.length-2}).replace("/>",">"),r.join(""))}function Dge(t){var r=[];return r[r.length]=dt("cellXfs",null),t.forEach(function(a){r[r.length]=dt("xf",null,a)}),r[r.length]="</cellXfs>",r.length===2?"":(r[0]=dt("cellXfs",null,{count:r.length-2}).replace("/>",">"),r.join(""))}function X$(t,r){var a=[na,dt("styleSheet",null,{xmlns:gu[0],"xmlns:vt":ja.vt})],s;return t.SSF&&(s=Rge(t.SSF))!=null&&(a[a.length]=s),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=Dge(r.cellXfs))&&(a[a.length]=s),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Mge(t,r){var a=t.read_shift(2),s=Ha(t);return[a,s]}function Ige(t,r,a){a||(a=ze(6+4*r.length)),a.write_shift(2,t),wa(r,a);var s=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),s}function Lge(t,r,a){var s={};s.sz=t.read_shift(2)/20;var n=Cfe(t);n.fItalic&&(s.italic=1),n.fCondense&&(s.condense=1),n.fExtend&&(s.extend=1),n.fShadow&&(s.shadow=1),n.fOutline&&(s.outline=1),n.fStrikeout&&(s.strike=1);var o=t.read_shift(2);switch(o===700&&(s.bold=1),t.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(s.underline=i);var l=t.read_shift(1);l>0&&(s.family=l);var c=t.read_shift(1);switch(c>0&&(s.charset=c),t.l++,s.color=Sfe(t),t.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Ha(t),s}function Bge(t,r){r||(r=ze(25+4*32)),r.write_shift(2,t.sz*20),kfe(t,r),r.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),r.write_shift(2,a),r.write_shift(1,t.underline||0),r.write_shift(1,t.family||0),r.write_shift(1,t.charset||0),r.write_shift(1,0),Af(t.color,r);var s=0;return s=2,r.write_shift(1,s),wa(t.name,r),r.length>r.l?r.slice(0,r.l):r}var zge=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Sv,qge=to;function i6(t,r){r||(r=ze(4*3+8*7+16*1)),Sv||(Sv=UN(zge));var a=Sv[t.patternType];a==null&&(a=40),r.write_shift(4,a);var s=0;if(a!=40)for(Af({auto:1},r),Af({auto:1},r);s<12;++s)r.write_shift(4,0);else{for(;s<4;++s)r.write_shift(4,0);for(;s<12;++s)r.write_shift(4,0)}return r.length>r.l?r.slice(0,r.l):r}function Vge(t,r){var a=t.l+r,s=t.read_shift(2),n=t.read_shift(2);return t.l=a,{ixfe:s,numFmtId:n}}function Y$(t,r,a){a||(a=ze(16)),a.write_shift(2,r||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var s=0;return a.write_shift(1,s),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function Wu(t,r){return r||(r=ze(10)),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(4,0),r}var Uge=to;function Wge(t,r){return r||(r=ze(51)),r.write_shift(1,0),Wu(null,r),Wu(null,r),Wu(null,r),Wu(null,r),Wu(null,r),r.length>r.l?r.slice(0,r.l):r}function Hge(t,r){return r||(r=ze(12+4*10)),r.write_shift(4,t.xfId),r.write_shift(2,1),r.write_shift(1,0),r.write_shift(1,0),Ef(t.name||"",r),r.length>r.l?r.slice(0,r.l):r}function Kge(t,r,a){var s=ze(2052);return s.write_shift(4,t),Ef(r,s),Ef(a,s),s.length>s.l?s.slice(0,s.l):s}function Gge(t,r){if(r){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&++a}),a!=0&&(Xe(t,615,En(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&Xe(t,44,Ige(n,r[n]))}),Xe(t,616))}}function Xge(t){var r=1;Xe(t,611,En(r)),Xe(t,43,Bge({sz:12,color:{theme:1},name:"Calibri",family:2})),Xe(t,612)}function Yge(t){var r=2;Xe(t,603,En(r)),Xe(t,45,i6({patternType:"none"})),Xe(t,45,i6({patternType:"gray125"})),Xe(t,604)}function Qge(t){var r=1;Xe(t,613,En(r)),Xe(t,46,Wge()),Xe(t,614)}function Jge(t){var r=1;Xe(t,626,En(r)),Xe(t,47,Y$({numFmtId:0},65535)),Xe(t,627)}function Zge(t,r){Xe(t,617,En(r.length)),r.forEach(function(a){Xe(t,47,Y$(a,0))}),Xe(t,618)}function ebe(t){var r=1;Xe(t,619,En(r)),Xe(t,48,Hge({xfId:0,name:"Normal"})),Xe(t,620)}function tbe(t){var r=0;Xe(t,505,En(r)),Xe(t,506)}function rbe(t){var r=0;Xe(t,508,Kge(r,"TableStyleMedium9","PivotStyleMedium4")),Xe(t,509)}function abe(t,r){var a=vs();return Xe(a,278),Gge(a,t.SSF),Xge(a),Yge(a),Qge(a),Jge(a),Zge(a,r.cellXfs),ebe(a),tbe(a),rbe(a),Xe(a,279),a.end()}function Q$(t,r){if(r&&r.themeXLSX)return r.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[na];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function sbe(t,r){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ha(t)}}function nbe(t){var r=ze(12+2*t.name.length);return r.write_shift(4,t.flags),r.write_shift(4,t.version),wa(t.name,r),r.slice(0,r.l)}function obe(t){for(var r=[],a=t.read_shift(4);a-- >0;)r.push([t.read_shift(4),t.read_shift(4)]);return r}function ibe(t){var r=ze(4+8*t.length);r.write_shift(4,t.length);for(var a=0;a<t.length;++a)r.write_shift(4,t[a][0]),r.write_shift(4,t[a][1]);return r}function lbe(t,r){var a=ze(8+2*r.length);return a.write_shift(4,t),wa(r,a),a.slice(0,a.l)}function cbe(t){return t.l+=4,t.read_shift(4)!=0}function dbe(t,r){var a=ze(8);return a.write_shift(4,t),a.write_shift(4,1),a}function ube(){var t=vs();return Xe(t,332),Xe(t,334,En(1)),Xe(t,335,nbe({name:"XLDAPR",version:12e4,flags:3496657072})),Xe(t,336),Xe(t,339,lbe(1,"XLDAPR")),Xe(t,52),Xe(t,35,En(514)),Xe(t,4096,En(0)),Xe(t,4097,Qs(1)),Xe(t,36),Xe(t,53),Xe(t,340),Xe(t,337,dbe(1)),Xe(t,51,ibe([[1,0]])),Xe(t,338),Xe(t,333),t.end()}function J$(){var t=[na];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function mbe(t){var r={};r.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),r.r=cr(a);var s=t.read_shift(1);return s&2&&(r.l="1"),s&8&&(r.a="1"),r}var Uc=1024;function Z$(t,r){for(var a=[21600,21600],s=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),n=[dt("xml",null,{"xmlns:v":Os.v,"xmlns:o":Os.o,"xmlns:x":Os.x,"xmlns:mv":Os.mv}).replace(/\/>/,">"),dt("o:shapelayout",dt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),dt("v:shapetype",[dt("v:stroke",null,{joinstyle:"miter"}),dt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:s})];Uc<t*1e3;)Uc+=1e3;return r.forEach(function(o){var i=Na(o[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?dt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=dt("v:fill",c,l),u={on:"t",obscured:"t"};++Uc,n=n.concat(["<v:shape"+Dx({id:"_x0000_s"+Uc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,dt("v:shadow",null,u),dt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Oa("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Oa("x:AutoFill","False"),Oa("x:Row",String(i.r)),Oa("x:Column",String(i.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function eR(t){var r=[na,dt("comments",null,{xmlns:gu[0]})],a=[];return r.push("<authors>"),t.forEach(function(s){s[1].forEach(function(n){var o=ir(n.a);a.indexOf(o)==-1&&(a.push(o),r.push("<author>"+o+"</author>")),n.T&&n.ID&&a.indexOf("tc="+n.ID)==-1&&(a.push("tc="+n.ID),r.push("<author>tc="+n.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),r.push("<author>SheetJ5</author>")),r.push("</authors>"),r.push("<commentList>"),t.forEach(function(s){var n=0,o=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?n=a.indexOf("tc="+s[1][0].ID):s[1].forEach(function(c){c.a&&(n=a.indexOf(ir(c.a))),o.push(c.t||"")}),r.push('<comment ref="'+s[0]+'" authorId="'+n+'"><text>'),o.length<=1)r.push(Oa("t",ir(o[0]||"")));else{for(var i=`Comment:
    `+o[0]+`
`,l=1;l<o.length;++l)i+=`Reply:
    `+o[l]+`
`;r.push(Oa("t",ir(i)))}r.push("</text></comment>")}),r.push("</commentList>"),r.length>2&&(r[r.length]="</comments>",r[1]=r[1].replace("/>",">")),r.join("")}function xbe(t,r,a){var s=[na,dt("ThreadedComments",null,{xmlns:ja.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(n){var o="";(n[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&r.indexOf(i.a)==-1&&r.push(i.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};l==0?o=c.id:c.parentId=o,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+r.indexOf(i.a)).slice(-12)+"}"),s.push(dt("threadedComment",Oa("text",i.t||""),c))})}),s.push("</ThreadedComments>"),s.join("")}function pbe(t){var r=[na,dt("personList",null,{xmlns:ja.TCMNT,"xmlns:x":gu[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,s){r.push(dt("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:a,providerId:"None"}))}),r.push("</personList>"),r.join("")}function hbe(t){var r={};r.iauthor=t.read_shift(4);var a=uc(t);return r.rfx=a.s,r.ref=cr(a.s),t.l+=16,r}function fbe(t,r){return r==null&&(r=ze(36)),r.write_shift(4,t[1].iauthor),vu(t[0],r),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r}var gbe=Ha;function bbe(t){return wa(t.slice(0,54))}function vbe(t){var r=vs(),a=[];return Xe(r,628),Xe(r,630),t.forEach(function(s){s[1].forEach(function(n){a.indexOf(n.a)>-1||(a.push(n.a.slice(0,54)),Xe(r,632,bbe(n.a)))})}),Xe(r,631),Xe(r,633),t.forEach(function(s){s[1].forEach(function(n){n.iauthor=a.indexOf(n.a);var o={s:Na(s[0]),e:Na(s[0])};Xe(r,635,fbe([o,n])),n.t&&n.t.length>0&&Xe(r,637,jfe(n)),Xe(r,636),delete n.iauthor})}),Xe(r,634),Xe(r,629),r.end()}function ybe(t,r){r.FullPaths.forEach(function(a,s){if(s!=0){var n=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&xr.utils.cfb_add(t,n,r.FileIndex[s].content)}})}var tR=["xlsb","xlsm","xlam","biff8","xla"],jbe=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,r={r:0,c:0};function a(s,n,o,i){var l=!1,c=!1;o.length==0?c=!0:o.charAt(0)=="["&&(c=!0,o=o.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var d=o.length>0?parseInt(o,10)|0:0,u=i.length>0?parseInt(i,10)|0:0;return l?u+=r.c:--u,c?d+=r.r:--d,n+(l?"":"$")+Wa(u)+(c?"":"$")+$a(d)}return function(n,o){return r=o,n.replace(t,a)}}(),aw=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,sw=function(){return function(r,a){return r.replace(aw,function(s,n,o,i,l,c){var d=QN(i)-(o?0:a.c),u=YN(c)-(l?0:a.r),m=u==0?"":l?u+1:"["+u+"]",x=d==0?"":o?d+1:"["+d+"]";return n+"R"+m+"C"+x})}}();function Nbe(t,r){return t.replace(aw,function(a,s,n,o,i,l){return s+(n=="$"?n+o:Wa(QN(o)+r.c))+(i=="$"?i+l:$a(YN(l)+r.r))})}function wbe(t){return t.length!=1}function Xr(t){t.l+=1}function $i(t,r){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function rR(t,r,a){var s=2;if(a){if(a.biff>=2&&a.biff<=5)return aR(t);a.biff==12&&(s=4)}var n=t.read_shift(s),o=t.read_shift(s),i=$i(t),l=$i(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:o,c:l[0],cRel:l[1],rRel:l[2]}}}function aR(t){var r=$i(t),a=$i(t),s=t.read_shift(1),n=t.read_shift(1);return{s:{r:r[0],c:s,cRel:r[1],rRel:r[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function _be(t,r,a){if(a.biff<8)return aR(t);var s=t.read_shift(a.biff==12?4:2),n=t.read_shift(a.biff==12?4:2),o=$i(t),i=$i(t);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:n,c:i[0],cRel:i[1],rRel:i[2]}}}function sR(t,r,a){if(a&&a.biff>=2&&a.biff<=5)return Sbe(t);var s=t.read_shift(a&&a.biff==12?4:2),n=$i(t);return{r:s,c:n[0],cRel:n[1],rRel:n[2]}}function Sbe(t){var r=$i(t),a=t.read_shift(1);return{r:r[0],c:a,cRel:r[1],rRel:r[2]}}function Cbe(t){var r=t.read_shift(2),a=t.read_shift(2);return{r,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function kbe(t,r,a){var s=a&&a.biff?a.biff:8;if(s>=2&&s<=5)return Ebe(t);var n=t.read_shift(s>=12?4:2),o=t.read_shift(2),i=(o&16384)>>14,l=(o&32768)>>15;if(o&=16383,l==1)for(;n>524287;)n-=1048576;if(i==1)for(;o>8191;)o=o-16384;return{r:n,c:o,cRel:i,rRel:l}}function Ebe(t){var r=t.read_shift(2),a=t.read_shift(1),s=(r&32768)>>15,n=(r&16384)>>14;return r&=16383,s==1&&r>=8192&&(r=r-16384),n==1&&a>=128&&(a=a-256),{r,c:a,cRel:n,rRel:s}}function Abe(t,r,a){var s=(t[t.l++]&96)>>5,n=rR(t,a.biff>=2&&a.biff<=5?6:8,a);return[s,n]}function Pbe(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}var i=rR(t,o,a);return[s,n,i]}function Tbe(t,r,a){var s=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[s]}function Obe(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),o=8;if(a)switch(a.biff){case 5:t.l+=12,o=6;break;case 12:o=12;break}return t.l+=o,[s,n]}function Fbe(t,r,a){var s=(t[t.l++]&96)>>5,n=_be(t,r-1,a);return[s,n]}function $be(t,r,a){var s=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[s]}function l6(t){var r=t[t.l+1]&1,a=1;return t.l+=4,[r,a]}function Rbe(t,r,a){t.l+=2;for(var s=t.read_shift(a&&a.biff==2?1:2),n=[],o=0;o<=s;++o)n.push(t.read_shift(a&&a.biff==2?1:2));return n}function Dbe(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(a&&a.biff==2?1:2)]}function Mbe(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(a&&a.biff==2?1:2)]}function Ibe(t){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(2)]}function Lbe(t,r,a){var s=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[s]}function nR(t){var r=t.read_shift(1),a=t.read_shift(1);return[r,a]}function Bbe(t){return t.read_shift(2),nR(t)}function zbe(t){return t.read_shift(2),nR(t)}function qbe(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=sR(t,0,a);return[s,n]}function Vbe(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=kbe(t,0,a);return[s,n]}function Ube(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var o=sR(t,0,a);return[s,n,o]}function Wbe(t,r,a){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(a&&a.biff<=3?1:2);return[Wve[n],lR[n],s]}function Hbe(t,r,a){var s=t[t.l++],n=t.read_shift(1),o=a&&a.biff<=3?[s==88?-1:0,t.read_shift(1)]:Kbe(t);return[n,(o[0]===0?lR:Uve)[o[1]]]}function Kbe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Gbe(t,r,a){t.l+=a&&a.biff==2?3:4}function Xbe(t,r,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var s=t.read_shift(2),n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function Ybe(t){return t.l++,c0[t.read_shift(1)]}function Qbe(t){return t.l++,t.read_shift(2)}function Jbe(t){return t.l++,t.read_shift(1)!==0}function Zbe(t){return t.l++,yu(t)}function eve(t,r,a){return t.l++,z$(t,r-1,a)}function tve(t,r){var a=[t.read_shift(1)];if(r==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=Ufe(t,1)?"TRUE":"FALSE",r!=12&&(t.l+=7);break;case 37:case 16:a[1]=c0[t[t.l]],t.l+=r==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=yu(t);break;case 2:a[1]=Gfe(t,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function rve(t,r,a){for(var s=t.read_shift(a.biff==12?4:2),n=[],o=0;o!=s;++o)n.push((a.biff==12?uc:Qfe)(t));return n}function ave(t,r,a){var s=0,n=0;a.biff==12?(s=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),s=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--s,--n==0&&(n=256));for(var o=0,i=[];o!=s&&(i[o]=[]);++o)for(var l=0;l!=n;++l)i[o][l]=tve(t,a.biff);return i}function sve(t,r,a){var s=t.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,o=t.read_shift(n);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[s,0,o]}function nve(t,r,a){if(a.biff==5)return ove(t);var s=t.read_shift(1)>>>5&3,n=t.read_shift(2),o=t.read_shift(4);return[s,n,o]}function ove(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var s=t.read_shift(2);return t.l+=12,[r,a,s]}function ive(t,r,a){var s=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function lve(t,r,a){var s=t.read_shift(1)>>>5&3,n=t.read_shift(a&&a.biff==2?1:2);return[s,n]}function cve(t,r,a){var s=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[s]}function dve(t,r,a){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),o=4;if(a)switch(a.biff){case 5:o=15;break;case 12:o=6;break}return t.l+=o,[s,n]}var uve=to,mve=to,xve=to;function d0(t,r,a){return t.l+=2,[Cbe(t)]}function nw(t){return t.l+=6,[]}var pve=d0,hve=nw,fve=nw,gve=d0;function oR(t){return t.l+=2,[L$(t),t.read_shift(2)&1]}var bve=d0,vve=oR,yve=nw,jve=d0,Nve=d0,wve=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function _ve(t){t.l+=2;var r=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(4),n=t.read_shift(2),o=t.read_shift(2),i=wve[a>>2&31];return{ixti:r,coltype:a&3,rt:i,idx:s,c:n,C:o}}function Sve(t){return t.l+=2,[t.read_shift(4)]}function Cve(t,r,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function kve(t,r,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function Eve(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[r,a]}function Ave(t){var r=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[r,a]}function Pve(t){return t.l+=4,[0,0]}var c6={1:{n:"PtgExp",f:Xbe},2:{n:"PtgTbl",f:xve},3:{n:"PtgAdd",f:Xr},4:{n:"PtgSub",f:Xr},5:{n:"PtgMul",f:Xr},6:{n:"PtgDiv",f:Xr},7:{n:"PtgPower",f:Xr},8:{n:"PtgConcat",f:Xr},9:{n:"PtgLt",f:Xr},10:{n:"PtgLe",f:Xr},11:{n:"PtgEq",f:Xr},12:{n:"PtgGe",f:Xr},13:{n:"PtgGt",f:Xr},14:{n:"PtgNe",f:Xr},15:{n:"PtgIsect",f:Xr},16:{n:"PtgUnion",f:Xr},17:{n:"PtgRange",f:Xr},18:{n:"PtgUplus",f:Xr},19:{n:"PtgUminus",f:Xr},20:{n:"PtgPercent",f:Xr},21:{n:"PtgParen",f:Xr},22:{n:"PtgMissArg",f:Xr},23:{n:"PtgStr",f:eve},26:{n:"PtgSheet",f:Cve},27:{n:"PtgEndSheet",f:kve},28:{n:"PtgErr",f:Ybe},29:{n:"PtgBool",f:Jbe},30:{n:"PtgInt",f:Qbe},31:{n:"PtgNum",f:Zbe},32:{n:"PtgArray",f:$be},33:{n:"PtgFunc",f:Wbe},34:{n:"PtgFuncVar",f:Hbe},35:{n:"PtgName",f:sve},36:{n:"PtgRef",f:qbe},37:{n:"PtgArea",f:Abe},38:{n:"PtgMemArea",f:ive},39:{n:"PtgMemErr",f:uve},40:{n:"PtgMemNoMem",f:mve},41:{n:"PtgMemFunc",f:lve},42:{n:"PtgRefErr",f:cve},43:{n:"PtgAreaErr",f:Tbe},44:{n:"PtgRefN",f:Vbe},45:{n:"PtgAreaN",f:Fbe},46:{n:"PtgMemAreaN",f:Eve},47:{n:"PtgMemNoMemN",f:Ave},57:{n:"PtgNameX",f:nve},58:{n:"PtgRef3d",f:Ube},59:{n:"PtgArea3d",f:Pbe},60:{n:"PtgRefErr3d",f:dve},61:{n:"PtgAreaErr3d",f:Obe},255:{}},Tve={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ove={1:{n:"PtgElfLel",f:oR},2:{n:"PtgElfRw",f:jve},3:{n:"PtgElfCol",f:pve},6:{n:"PtgElfRwV",f:Nve},7:{n:"PtgElfColV",f:gve},10:{n:"PtgElfRadical",f:bve},11:{n:"PtgElfRadicalS",f:yve},13:{n:"PtgElfColS",f:hve},15:{n:"PtgElfColSV",f:fve},16:{n:"PtgElfRadicalLel",f:vve},25:{n:"PtgList",f:_ve},29:{n:"PtgSxName",f:Sve},255:{}},Fve={0:{n:"PtgAttrNoop",f:Pve},1:{n:"PtgAttrSemi",f:Lbe},2:{n:"PtgAttrIf",f:Mbe},4:{n:"PtgAttrChoose",f:Rbe},8:{n:"PtgAttrGoto",f:Dbe},16:{n:"PtgAttrSum",f:Gbe},32:{n:"PtgAttrBaxcel",f:l6},33:{n:"PtgAttrBaxcel",f:l6},64:{n:"PtgAttrSpace",f:Bbe},65:{n:"PtgAttrSpaceSemi",f:zbe},128:{n:"PtgAttrIfError",f:Ibe},255:{}};function $ve(t,r,a,s){if(s.biff<8)return to(t,r);for(var n=t.l+r,o=[],i=0;i!==a.length;++i)switch(a[i][0]){case"PtgArray":a[i][1]=ave(t,0,s),o.push(a[i][1]);break;case"PtgMemArea":a[i][2]=rve(t,a[i][1],s),o.push(a[i][2]);break;case"PtgExp":s&&s.biff==12&&(a[i][1][1]=t.read_shift(4),o.push(a[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[i][0]}return r=n-t.l,r!==0&&o.push(to(t,r)),o}function Rve(t,r,a){for(var s=t.l+r,n,o,i=[];s!=t.l;)r=s-t.l,o=t[t.l],n=c6[o]||c6[Tve[o]],(o===24||o===25)&&(n=(o===24?Ove:Fve)[t[t.l+1]]),!n||!n.f?to(t,r):i.push([n.n,n.f(t,r,a)]);return i}function Dve(t){for(var r=[],a=0;a<t.length;++a){for(var s=t[a],n=[],o=0;o<s.length;++o){var i=s[o];if(i)switch(i[0]){case 2:n.push('"'+i[1].replace(/"/g,'""')+'"');break;default:n.push(i[1])}else n.push("")}r.push(n.join(","))}return r.join(";")}var Mve={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ive(t,r){if(!t&&!(r&&r.biff<=5&&r.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function iR(t,r,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[r]))return t.SheetNames[r];if(!t.XTI)return"SH33TJSERR6";var s=t.XTI[r];if(a.biff<8)return r>1e4&&(r-=65536),r<0&&(r=-r),r==0?"":t.XTI[r-1];if(!s)return"SH33TJSERR1";var n="";if(a.biff>8)switch(t[s[0]][0]){case 357:return n=s[1]==-1?"#REF":t.SheetNames[s[1]],s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[s[0]][0];case 355:default:return"SH33TJSSRC"+t[s[0]][0]}switch(t[s[0]][0][0]){case 1025:return n=s[1]==-1?"#REF":t.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 14849:return t[s[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return t[s[0]][0][3]?(n=s[1]==-1?"#REF":t[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?n:n+":"+t[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function d6(t,r,a){var s=iR(t,r,a);return s=="#REF"?s:Ive(s,a)}function Yd(t,r,a,s,n){var o=n&&n.biff||8,i={s:{c:0,r:0}},l=[],c,d,u,m=0,x=0,h,v="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",y=0,f=t[0].length;y<f;++y){var b=t[0][y];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Br(" ",t[0][p][1][1]);break;case 1:g=Br("\r",t[0][p][1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}d=d+g,p=-1}l.push(d+Mve[b[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=jm(b[1][1],i,n),l.push(Nm(u,o));break;case"PtgRefN":u=a?jm(b[1][1],a,n):b[1][1],l.push(Nm(u,o));break;case"PtgRef3d":m=b[1][1],u=jm(b[1][2],i,n),v=d6(s,m,n),l.push(v+"!"+Nm(u,o));break;case"PtgFunc":case"PtgFuncVar":var N=b[1][0],_=b[1][1];N||(N=0),N&=127;var w=N==0?[]:l.slice(-N);l.length-=N,_==="User"&&(_=w.shift()),l.push(_+"("+w.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=Gk(b[1][1],a?{s:a}:i,n),l.push(wv(h,n));break;case"PtgArea":h=Gk(b[1][1],i,n),l.push(wv(h,n));break;case"PtgArea3d":m=b[1][1],h=b[1][2],v=d6(s,m,n),l.push(v+"!"+wv(h,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=b[1][2];var S=(s.names||[])[x-1]||(s[0]||[])[x],C=S?S.Name:"SH33TJSNAME"+String(x);C&&C.slice(0,6)=="_xlfn."&&!n.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var E=b[1][1];x=b[1][2];var T;if(n.biff<=5)E<0&&(E=-E),s[E]&&(T=s[E][x]);else{var q="";if(((s[E]||[])[0]||[])[0]==14849||(((s[E]||[])[0]||[])[0]==1025?s[E][x]&&s[E][x].itab>0&&(q=s.SheetNames[s[E][x].itab-1]+"!"):q=s.SheetNames[x-1]+"!"),s[E]&&s[E][x])q+=s[E][x].Name;else if(s[0]&&s[0][x])q+=s[0][x].Name;else{var A=(iR(s,E,n)||"").split(";;");A[x-1]?q=A[x-1]:q+="SH33TJSERRX"}l.push(q);break}T||(T={Name:"SH33TJSERRY"}),l.push(T.Name);break;case"PtgParen":var O="(",V=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:O=Br(" ",t[0][p][1][1])+O;break;case 3:O=Br("\r",t[0][p][1][1])+O;break;case 4:V=Br(" ",t[0][p][1][1])+V;break;case 5:V=Br("\r",t[0][p][1][1])+V;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(O+l.pop()+V);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:b[1][1],r:b[1][0]};var G={c:a.c,r:a.r};if(s.sharedf[cr(u)]){var L=s.sharedf[cr(u)];l.push(Yd(L,i,G,s,n))}else{var Z=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(Yd(d[1],i,G,s,n)),Z=!0;break}Z||l.push(b[1])}break;case"PtgArray":l.push("{"+Dve(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var D=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&p>=0&&D.indexOf(t[0][y][0])==-1){b=t[0][p];var K=!0;switch(b[1][0]){case 4:K=!1;case 0:g=Br(" ",b[1][1]);break;case 5:K=!1;case 1:g=Br("\r",b[1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((K?g:"")+l.pop()+(K?"":g)),p=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function Lve(t){if(t==null){var r=ze(8);return r.write_shift(1,3),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,65535),r}else if(typeof t=="number")return Xl(t);return Xl(0)}function Bve(t,r,a,s,n){var o=Yl(r,a,n),i=Lve(t.v),l=ze(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=ze(t.bf.length),u=0;u<t.bf.length;++u)d[u]=t.bf[u];var m=Ta([o,i,l,d]);return m}function lb(t,r,a){var s=t.read_shift(4),n=Rve(t,s,a),o=t.read_shift(4),i=o>0?$ve(t,o,n,a):null;return[n,i]}var zve=lb,cb=lb,qve=lb,Vve=lb,Uve={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},lR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wve={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Hve(t){var r="of:="+t.replace(aw,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function Kve(t){return t.replace(/\./,"!")}var wm=typeof Map<"u";function ow(t,r,a){var s=0,n=t.length;if(a){if(wm?a.has(r):Object.prototype.hasOwnProperty.call(a,r)){for(var o=wm?a.get(r):a[r];s<o.length;++s)if(t[o[s]].t===r)return t.Count++,o[s]}}else for(;s<n;++s)if(t[s].t===r)return t.Count++,s;return t[n]={t:r},t.Count++,t.Unique++,a&&(wm?(a.has(r)||a.set(r,[]),a.get(r).push(n)):(Object.prototype.hasOwnProperty.call(a,r)||(a[r]=[]),a[r].push(n))),n}function db(t,r){var a={min:t+1,max:t+1},s=-1;return r.MDW&&(Co=r.MDW),r.width!=null?a.customWidth=1:r.wpx!=null?s=Of(r.wpx):r.wch!=null&&(s=r.wch),s>-1?(a.width=j1(s),a.customWidth=1):r.width!=null&&(a.width=r.width),r.hidden&&(a.hidden=!0),r.level!=null&&(a.outlineLevel=a.level=r.level),a}function cR(t,r){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Ki(t,r,a){var s=a.revssf[r.z!=null?r.z:"General"],n=60,o=t.length;if(s==null&&a.ssf){for(;n<392;++n)if(a.ssf[n]==null){s$(r.z,n),a.ssf[n]=r.z,a.revssf[r.z]=s=n;break}}for(n=0;n!=o;++n)if(t[n].numFmtId===s)return n;return t[o]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function Gve(t,r,a){if(t&&t["!ref"]){var s=Cr(t["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function Xve(t){if(t.length===0)return"";for(var r='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)r+='<mergeCell ref="'+ra(t[a])+'"/>';return r+"</mergeCells>"}function Yve(t,r,a,s,n){var o=!1,i={},l=null;if(s.bookType!=="xlsx"&&r.vbaraw){var c=r.SheetNames[a];try{r.Workbook&&(c=r.Workbook.Sheets[a].CodeName||c)}catch{}o=!0,i.codeName=Rx(ir(c))}if(t&&t["!outline"]){var d={summaryBelow:1,summaryRight:1};t["!outline"].above&&(d.summaryBelow=0),t["!outline"].left&&(d.summaryRight=0),l=(l||"")+dt("outlinePr",null,d)}!o&&!l||(n[n.length]=dt("sheetPr",l,i))}var Qve=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Jve=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Zve(t){var r={sheet:1};return Qve.forEach(function(a){t[a]!=null&&t[a]&&(r[a]="1")}),Jve.forEach(function(a){t[a]!=null&&!t[a]&&(r[a]="0")}),t.password&&(r.password=H$(t.password).toString(16).toUpperCase()),dt("sheetProtection",null,r)}function eye(t){return cR(t),dt("pageMargins",null,t)}function tye(t,r){for(var a=["<cols>"],s,n=0;n!=r.length;++n)(s=r[n])&&(a[a.length]=dt("col",null,db(n,s)));return a[a.length]="</cols>",a.join("")}function rye(t,r,a,s){var n=typeof t.ref=="string"?t.ref:ra(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var o=a.Workbook.Names,i=zs(n);i.s.r==i.e.r&&(i.e.r=zs(r["!ref"]).e.r,n=ra(i));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==s){c.Ref="'"+a.SheetNames[s]+"'!"+n;break}}return l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+a.SheetNames[s]+"'!"+n}),dt("autoFilter",null,{ref:n})}function aye(t,r,a,s){var n={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),dt("sheetViews",dt("sheetView",null,n),{})}function sye(t,r,a,s){if(t.c&&a["!comments"].push([r,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var n="",o=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":n=t.v?"1":"0";break;case"n":n=""+t.v;break;case"e":n=c0[t.v];break;case"d":s&&s.cellDates?n=ss(t.v,-1).toISOString():(t=js(t),t.t="n",n=""+(t.v=ys(ss(t.v)))),typeof t.z>"u"&&(t.z=qr[14]);break;default:n=t.v;break}var l=Oa("v",ir(n)),c={r},d=Ki(s.cellXfs,t,s);switch(d!==0&&(c.s=d),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){l=Oa("v",""+ow(s.Strings,t.v,s.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=o&&(t.t=o,t.v=i),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,r.length)==r?{t:"array",ref:t.F}:null;l=dt("f",ir(t.f),u)+(t.v!=null?l:"")}return t.l&&a["!links"].push([r,t.l]),t.D&&(c.cm=1),dt("c",l,c)}function nye(t,r,a,s){var n=[],o=[],i=Cr(t["!ref"]),l="",c,d="",u=[],m=0,x=0,h=t["!rows"],v=Array.isArray(t),p={r:d},g,y=-1;for(x=i.s.c;x<=i.e.c;++x)u[x]=Wa(x);for(m=i.s.r;m<=i.e.r;++m){for(o=[],d=$a(m),x=i.s.c;x<=i.e.c;++x){c=u[x]+d;var f=v?(t[m]||[])[x]:t[c];f!==void 0&&(l=sye(f,c,t,r))!=null&&o.push(l)}(o.length>0||h&&h[m])&&(p={r:d},h&&h[m]&&(g=h[m],g.hidden&&(p.hidden=1),y=-1,g.hpx?y=Ff(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(p.ht=y,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),n[n.length]=dt("row",o.join(""),p))}if(h)for(;m<h.length;++m)h&&h[m]&&(p={r:m+1},g=h[m],g.hidden&&(p.hidden=1),y=-1,g.hpx?y=Ff(g.hpx):g.hpt&&(y=g.hpt),y>-1&&(p.ht=y,p.customHeight=1),g.level&&(p.outlineLevel=g.level),n[n.length]=dt("row","",p));return n.join("")}function dR(t,r,a,s){var n=[na,dt("worksheet",null,{xmlns:gu[0],"xmlns:r":ja.r})],o=a.SheetNames[t],i=0,l="",c=a.Sheets[o];c==null&&(c={});var d=c["!ref"]||"A1",u=Cr(d);if(u.e.c>16383||u.e.r>1048575){if(r.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=ra(u)}s||(s={}),c["!comments"]=[];var m=[];Yve(c,a,t,r,n),n[n.length]=dt("dimension",null,{ref:d}),n[n.length]=aye(c,r,t,a),r.sheetFormat&&(n[n.length]=dt("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=tye(c,c["!cols"])),n[i=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=nye(c,r),l.length>0&&(n[n.length]=l)),n.length>i+1&&(n[n.length]="</sheetData>",n[i]=n[i].replace("/>",">")),c["!protect"]&&(n[n.length]=Zve(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=rye(c["!autofilter"],c,a,t)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=Xve(c["!merges"]));var x=-1,h,v=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(v=nr(s,-1,ir(p[1].Target).replace(/#.*$/,""),Jt.HLINK),h["r:id"]="rId"+v),(x=p[1].Target.indexOf("#"))>-1&&(h.location=ir(p[1].Target.slice(x+1))),p[1].Tooltip&&(h.tooltip=ir(p[1].Tooltip)),n[n.length]=dt("hyperlink",null,h))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=eye(c["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&(n[n.length]=Oa("ignoredErrors",dt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),m.length>0&&(v=nr(s,-1,"../drawings/drawing"+(t+1)+".xml",Jt.DRAW),n[n.length]=dt("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=m),c["!comments"].length>0&&(v=nr(s,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jt.VML),n[n.length]=dt("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function oye(t,r){var a={},s=t.l+r;a.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var o=t.read_shift(1);return t.l=s,o&7&&(a.level=o&7),o&16&&(a.hidden=!0),o&32&&(a.hpt=n/20),a}function iye(t,r,a){var s=ze(145),n=(a["!rows"]||[])[t]||{};s.write_shift(4,t),s.write_shift(4,0);var o=320;n.hpx?o=Ff(n.hpx)*20:n.hpt&&(o=n.hpt*20),s.write_shift(2,o),s.write_shift(1,0);var i=0;n.level&&(i|=n.level),n.hidden&&(i|=16),(n.hpx||n.hpt)&&(i|=32),s.write_shift(1,i),s.write_shift(1,0);var l=0,c=s.l;s.l+=4;for(var d={r:t,c:0},u=0;u<16;++u)if(!(r.s.c>u+1<<10||r.e.c<u<<10)){for(var m=-1,x=-1,h=u<<10;h<u+1<<10;++h){d.c=h;var v=Array.isArray(a)?(a[d.r]||[])[d.c]:a[cr(d)];v&&(m<0&&(m=h),x=h)}m<0||(++l,s.write_shift(4,m),s.write_shift(4,x))}var p=s.l;return s.l=c,s.write_shift(4,l),s.l=p,s.length>s.l?s.slice(0,s.l):s}function lye(t,r,a,s){var n=iye(s,a,r);(n.length>17||(r["!rows"]||[])[s])&&Xe(t,0,n)}var cye=uc,dye=vu;function uye(){}function mye(t,r){var a={},s=t[t.l];return++t.l,a.above=!(s&64),a.left=!(s&128),t.l+=18,a.name=Nfe(t),a}function xye(t,r,a){a==null&&(a=ze(84+4*t.length));var s=192;r&&(r.above&&(s&=-65),r.left&&(s&=-129)),a.write_shift(1,s);for(var n=1;n<3;++n)a.write_shift(1,0);return Af({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),S$(t,a),a.slice(0,a.l)}function pye(t){var r=dn(t);return[r]}function hye(t,r,a){return a==null&&(a=ze(8)),lc(r,a)}function fye(t){var r=cc(t);return[r]}function gye(t,r,a){return a==null&&(a=ze(4)),dc(r,a)}function bye(t){var r=dn(t),a=t.read_shift(1);return[r,a,"b"]}function vye(t,r,a){return a==null&&(a=ze(9)),lc(r,a),a.write_shift(1,t.v?1:0),a}function yye(t){var r=cc(t),a=t.read_shift(1);return[r,a,"b"]}function jye(t,r,a){return a==null&&(a=ze(5)),dc(r,a),a.write_shift(1,t.v?1:0),a}function Nye(t){var r=dn(t),a=t.read_shift(1);return[r,a,"e"]}function wye(t,r,a){return a==null&&(a=ze(9)),lc(r,a),a.write_shift(1,t.v),a}function _ye(t){var r=cc(t),a=t.read_shift(1);return[r,a,"e"]}function Sye(t,r,a){return a==null&&(a=ze(8)),dc(r,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function Cye(t){var r=dn(t),a=t.read_shift(4);return[r,a,"s"]}function kye(t,r,a){return a==null&&(a=ze(12)),lc(r,a),a.write_shift(4,r.v),a}function Eye(t){var r=cc(t),a=t.read_shift(4);return[r,a,"s"]}function Aye(t,r,a){return a==null&&(a=ze(8)),dc(r,a),a.write_shift(4,r.v),a}function Pye(t){var r=dn(t),a=yu(t);return[r,a,"n"]}function Tye(t,r,a){return a==null&&(a=ze(16)),lc(r,a),Xl(t.v,a),a}function Oye(t){var r=cc(t),a=yu(t);return[r,a,"n"]}function Fye(t,r,a){return a==null&&(a=ze(12)),dc(r,a),Xl(t.v,a),a}function $ye(t){var r=dn(t),a=C$(t);return[r,a,"n"]}function Rye(t,r,a){return a==null&&(a=ze(12)),lc(r,a),k$(t.v,a),a}function Dye(t){var r=cc(t),a=C$(t);return[r,a,"n"]}function Mye(t,r,a){return a==null&&(a=ze(8)),dc(r,a),k$(t.v,a),a}function Iye(t){var r=dn(t),a=JN(t);return[r,a,"is"]}function Lye(t){var r=dn(t),a=Ha(t);return[r,a,"str"]}function Bye(t,r,a){return a==null&&(a=ze(12+4*t.v.length)),lc(r,a),wa(t.v,a),a.length>a.l?a.slice(0,a.l):a}function zye(t){var r=cc(t),a=Ha(t);return[r,a,"str"]}function qye(t,r,a){return a==null&&(a=ze(8+4*t.v.length)),dc(r,a),wa(t.v,a),a.length>a.l?a.slice(0,a.l):a}function Vye(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=t.read_shift(1),i=[n,o,"b"];if(a.cellFormula){t.l+=2;var l=cb(t,s-t.l,a);i[3]=Yd(l,null,n,a.supbooks,a)}else t.l=s;return i}function Uye(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=t.read_shift(1),i=[n,o,"e"];if(a.cellFormula){t.l+=2;var l=cb(t,s-t.l,a);i[3]=Yd(l,null,n,a.supbooks,a)}else t.l=s;return i}function Wye(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=yu(t),i=[n,o,"n"];if(a.cellFormula){t.l+=2;var l=cb(t,s-t.l,a);i[3]=Yd(l,null,n,a.supbooks,a)}else t.l=s;return i}function Hye(t,r,a){var s=t.l+r,n=dn(t);n.r=a["!row"];var o=Ha(t),i=[n,o,"str"];if(a.cellFormula){t.l+=2;var l=cb(t,s-t.l,a);i[3]=Yd(l,null,n,a.supbooks,a)}else t.l=s;return i}var Kye=uc,Gye=vu;function Xye(t,r){return r==null&&(r=ze(4)),r.write_shift(4,t),r}function Yye(t,r){var a=t.l+r,s=uc(t),n=ZN(t),o=Ha(t),i=Ha(t),l=Ha(t);t.l=a;var c={rfx:s,relId:n,loc:o,display:l};return i&&(c.Tooltip=i),c}function Qye(t,r){var a=ze(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));vu({s:Na(t[0]),e:Na(t[0])},a),ew("rId"+r,a);var s=t[1].Target.indexOf("#"),n=s==-1?"":t[1].Target.slice(s+1);return wa(n||"",a),wa(t[1].Tooltip||"",a),wa("",a),a.slice(0,a.l)}function Jye(){}function Zye(t,r,a){var s=t.l+r,n=E$(t),o=t.read_shift(1),i=[n];if(i[2]=o,a.cellFormula){var l=zve(t,s-t.l,a);i[1]=l}else t.l=s;return i}function eje(t,r,a){var s=t.l+r,n=uc(t),o=[n];if(a.cellFormula){var i=Vve(t,s-t.l,a);o[1]=i,t.l=s}else t.l=s;return o}function tje(t,r,a){a==null&&(a=ze(18));var s=db(t,r);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(s.width||10)*256),a.write_shift(4,0);var n=0;return r.hidden&&(n|=1),typeof s.width=="number"&&(n|=2),r.level&&(n|=r.level<<8),a.write_shift(2,n),a}var uR=["left","right","top","bottom","header","footer"];function rje(t){var r={};return uR.forEach(function(a){r[a]=yu(t)}),r}function aje(t,r){return r==null&&(r=ze(6*8)),cR(t),uR.forEach(function(a){Xl(t[a],r)}),r}function sje(t){var r=t.read_shift(2);return t.l+=28,{RTL:r&32}}function nje(t,r,a){a==null&&(a=ze(30));var s=924;return(((r||{}).Views||[])[0]||{}).RTL&&(s|=32),a.write_shift(2,s),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function oje(t){var r=ze(24);return r.write_shift(4,4),r.write_shift(4,1),vu(t,r),r}function ije(t,r){return r==null&&(r=ze(16*4+2)),r.write_shift(2,t.password?H$(t.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?r.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):r.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),r}function lje(){}function cje(){}function dje(t,r,a,s,n,o,i){if(r.v===void 0)return!1;var l="";switch(r.t){case"b":l=r.v?"1":"0";break;case"d":r=js(r),r.z=r.z||qr[14],r.v=ys(ss(r.v)),r.t="n";break;case"n":case"e":l=""+r.v;break;default:l=r.v;break}var c={r:a,c:s};switch(c.s=Ki(n.cellXfs,r,n),r.l&&o["!links"].push([cr(c),r.l]),r.c&&o["!comments"].push([cr(c),r.c]),r.t){case"s":case"str":return n.bookSST?(l=ow(n.Strings,r.v,n.revStrings),c.t="s",c.v=l,i?Xe(t,18,Aye(r,c)):Xe(t,7,kye(r,c))):(c.t="str",i?Xe(t,17,qye(r,c)):Xe(t,6,Bye(r,c))),!0;case"n":return r.v==(r.v|0)&&r.v>-1e3&&r.v<1e3?i?Xe(t,13,Mye(r,c)):Xe(t,2,Rye(r,c)):i?Xe(t,16,Fye(r,c)):Xe(t,5,Tye(r,c)),!0;case"b":return c.t="b",i?Xe(t,15,jye(r,c)):Xe(t,4,vye(r,c)),!0;case"e":return c.t="e",i?Xe(t,14,Sye(r,c)):Xe(t,3,wye(r,c)),!0}return i?Xe(t,12,gye(r,c)):Xe(t,1,hye(r,c)),!0}function uje(t,r,a,s){var n=Cr(r["!ref"]||"A1"),o,i="",l=[];Xe(t,145);var c=Array.isArray(r),d=n.e.r;r["!rows"]&&(d=Math.max(n.e.r,r["!rows"].length-1));for(var u=n.s.r;u<=d;++u){i=$a(u),lye(t,r,n,u);var m=!1;if(u<=n.e.r)for(var x=n.s.c;x<=n.e.c;++x){u===n.s.r&&(l[x]=Wa(x)),o=l[x]+i;var h=c?(r[u]||[])[x]:r[o];if(!h){m=!1;continue}m=dje(t,h,u,x,s,r,m)}}Xe(t,146)}function mje(t,r){!r||!r["!merges"]||(Xe(t,177,Xye(r["!merges"].length)),r["!merges"].forEach(function(a){Xe(t,176,Gye(a))}),Xe(t,178))}function xje(t,r){!r||!r["!cols"]||(Xe(t,390),r["!cols"].forEach(function(a,s){a&&Xe(t,60,tje(s,a))}),Xe(t,391))}function pje(t,r){!r||!r["!ref"]||(Xe(t,648),Xe(t,649,oje(Cr(r["!ref"]))),Xe(t,650))}function hje(t,r,a){r["!links"].forEach(function(s){if(s[1].Target){var n=nr(a,-1,s[1].Target.replace(/#.*$/,""),Jt.HLINK);Xe(t,494,Qye(s,n))}}),delete r["!links"]}function fje(t,r,a,s){if(r["!comments"].length>0){var n=nr(s,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Jt.VML);Xe(t,551,ew("rId"+n)),r["!legacy"]=n}}function gje(t,r,a,s){if(r["!autofilter"]){var n=r["!autofilter"],o=typeof n.ref=="string"?n.ref:ra(n.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var i=a.Workbook.Names,l=zs(o);l.s.r==l.e.r&&(l.e.r=zs(r["!ref"]).e.r,o=ra(l));for(var c=0;c<i.length;++c){var d=i[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==s){d.Ref="'"+a.SheetNames[s]+"'!"+o;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+a.SheetNames[s]+"'!"+o}),Xe(t,161,vu(Cr(o))),Xe(t,162)}}function bje(t,r,a){Xe(t,133),Xe(t,137,nje(r,a)),Xe(t,138),Xe(t,134)}function vje(t,r){r["!protect"]&&Xe(t,535,ije(r["!protect"]))}function yje(t,r,a,s){var n=vs(),o=a.SheetNames[t],i=a.Sheets[o]||{},l=o;try{a&&a.Workbook&&(l=a.Workbook.Sheets[t].CodeName||l)}catch{}var c=Cr(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(r.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Xe(n,129),(a.vbaraw||i["!outline"])&&Xe(n,147,xye(l,i["!outline"])),Xe(n,148,dye(c)),bje(n,i,a.Workbook),xje(n,i),uje(n,i,t,r),vje(n,i),gje(n,i,a,t),mje(n,i),hje(n,i,s),i["!margins"]&&Xe(n,476,aje(i["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&pje(n,i),fje(n,i,t,s),Xe(n,130),n.end()}function jje(t,r){t.l+=10;var a=Ha(t);return{name:a}}var Nje=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function wje(t){return!t.Workbook||!t.Workbook.WBProps?"false":efe(t.Workbook.WBProps.date1904)?"true":"false"}var _je="][*?/\\".split("");function mR(t,r){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return _je.forEach(function(s){if(t.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function Sje(t,r,a){t.forEach(function(s,n){mR(s);for(var o=0;o<n;++o)if(s==t[o])throw new Error("Duplicate Sheet Name: "+s);if(a){var i=r&&r[n]&&r[n].CodeName||s;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Cje(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var r=t.Workbook&&t.Workbook.Sheets||[];Sje(t.SheetNames,r,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)Gve(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function xR(t){var r=[na];r[r.length]=dt("workbook",null,{xmlns:gu[0],"xmlns:r":ja.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Nje.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(s[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(s.codeName=t.Workbook.WBProps.CodeName,delete s.CodeName)),r[r.length]=dt("workbookPr",null,s);var n=t.Workbook&&t.Workbook.Sheets||[],o=0;if(n&&n[0]&&n[0].Hidden){for(r[r.length]="<bookViews>",o=0;o!=t.SheetNames.length&&!(!n[o]||!n[o].Hidden);++o);o==t.SheetNames.length&&(o=0),r[r.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',r[r.length]="</bookViews>"}for(r[r.length]="<sheets>",o=0;o!=t.SheetNames.length;++o){var i={name:ir(t.SheetNames[o].slice(0,31))};if(i.sheetId=""+(o+1),i["r:id"]="rId"+(o+1),n[o])switch(n[o].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}r[r.length]=dt("sheet",null,i)}return r[r.length]="</sheets>",a&&(r[r.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(r[r.length]=dt("definedName",ir(l.Ref),c))}),r[r.length]="</definedNames>"),r.length>2&&(r[r.length]="</workbook>",r[1]=r[1].replace("/>",">")),r.join("")}function kje(t,r){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=y1(t),a.name=Ha(t),a}function Eje(t,r){return r||(r=ze(127)),r.write_shift(4,t.Hidden),r.write_shift(4,t.iTabID),ew(t.strRelID,r),wa(t.name.slice(0,31),r),r.length>r.l?r.slice(0,r.l):r}function Aje(t,r){var a={},s=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var n=r>8?Ha(t):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(s&65536),a.backupFile=!!(s&64),a.checkCompatibility=!!(s&4096),a.date1904=!!(s&1),a.filterPrivacy=!!(s&8),a.hidePivotFieldList=!!(s&1024),a.promptedSolutions=!!(s&16),a.publishItems=!!(s&2048),a.refreshAllConnections=!!(s&262144),a.saveExternalLinkValues=!!(s&128),a.showBorderUnselectedTables=!!(s&4),a.showInkAnnotation=!!(s&32),a.showObjects=["all","placeholders","none"][s>>13&3],a.showPivotChartFilter=!!(s&32768),a.updateLinks=["userSet","never","always"][s>>8&3],a}function Pje(t,r){r||(r=ze(72));var a=0;return t&&t.filterPrivacy&&(a|=8),r.write_shift(4,a),r.write_shift(4,0),S$(t&&t.CodeName||"ThisWorkbook",r),r.slice(0,r.l)}function Tje(t,r,a){var s=t.l+r;t.l+=4,t.l+=1;var n=t.read_shift(4),o=wfe(t),i=qve(t,0,a),l=ZN(t);t.l=s;var c={Name:o,Ptg:i};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function Oje(t,r){Xe(t,143);for(var a=0;a!=r.SheetNames.length;++a){var s=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a]&&r.Workbook.Sheets[a].Hidden||0,n={Hidden:s,iTabID:a+1,strRelID:"rId"+(a+1),name:r.SheetNames[a]};Xe(t,156,Eje(n))}Xe(t,144)}function Fje(t,r){r||(r=ze(127));for(var a=0;a!=4;++a)r.write_shift(4,0);return wa("SheetJS",r),wa(jf.version,r),wa(jf.version,r),wa("7262",r),r.length>r.l?r.slice(0,r.l):r}function $je(t,r){r||(r=ze(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,t),r.write_shift(4,t);var a=120;return r.write_shift(1,a),r.length>r.l?r.slice(0,r.l):r}function Rje(t,r){if(!(!r.Workbook||!r.Workbook.Sheets)){for(var a=r.Workbook.Sheets,s=0,n=-1,o=-1;s<a.length;++s)!a[s]||!a[s].Hidden&&n==-1?n=s:a[s].Hidden==1&&o==-1&&(o=s);o>n||(Xe(t,135),Xe(t,158,$je(n)),Xe(t,136))}}function Dje(t,r){var a=vs();return Xe(a,131),Xe(a,128,Fje()),Xe(a,153,Pje(t.Workbook&&t.Workbook.WBProps||null)),Rje(a,t),Oje(a,t),Xe(a,132),a.end()}function Mje(t,r,a){return(r.slice(-4)===".bin"?Dje:xR)(t)}function Ije(t,r,a,s,n){return(r.slice(-4)===".bin"?yje:dR)(t,a,s,n)}function Lje(t,r,a){return(r.slice(-4)===".bin"?abe:X$)(t,a)}function Bje(t,r,a){return(r.slice(-4)===".bin"?Pge:W$)(t,a)}function zje(t,r,a){return(r.slice(-4)===".bin"?vbe:eR)(t)}function qje(t){return(t.slice(-4)===".bin"?ube:J$)()}function Vje(t,r){var a=[];return t.Props&&a.push(Lfe(t.Props,r)),t.Custprops&&a.push(Bfe(t.Props,t.Custprops)),a.join("")}function Uje(){return""}function Wje(t,r){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return r.cellXfs.forEach(function(s,n){var o=[];o.push(dt("NumberFormat",null,{"ss:Format":ir(qr[s.numFmtId])}));var i={"ss:ID":"s"+(21+n)};a.push(dt("Style",o.join(""),i))}),dt("Styles",a.join(""))}function pR(t){return dt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+sw(t.Ref,{r:0,c:0})})}function Hje(t){if(!((t||{}).Workbook||{}).Names)return"";for(var r=t.Workbook.Names,a=[],s=0;s<r.length;++s){var n=r[s];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||a.push(pR(n)))}return dt("Names",a.join(""))}function Kje(t,r,a,s){if(!t||!((s||{}).Workbook||{}).Names)return"";for(var n=s.Workbook.Names,o=[],i=0;i<n.length;++i){var l=n[i];l.Sheet==a&&(l.Name.match(/^_xlfn\./)||o.push(pR(l)))}return o.join("")}function Gje(t,r,a,s){if(!t)return"";var n=[];if(t["!margins"]&&(n.push("<PageSetup>"),t["!margins"].header&&n.push(dt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&n.push(dt("Footer",null,{"x:Margin":t["!margins"].footer})),n.push(dt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),n.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a])if(s.Workbook.Sheets[a].Hidden)n.push(dt("Visible",s.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<a&&!(s.Workbook.Sheets[o]&&!s.Workbook.Sheets[o].Hidden);++o);o==a&&n.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),t["!protect"]&&(n.push(Oa("ProtectContents","True")),t["!protect"].objects&&n.push(Oa("ProtectObjects","True")),t["!protect"].scenarios&&n.push(Oa("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?n.push(Oa("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&n.push(Oa("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&n.push("<"+i[1]+"/>")})),n.length==0?"":dt("WorksheetOptions",n.join(""),{xmlns:Os.x})}function Xje(t){return t.map(function(r){var a=Zhe(r.t||""),s=dt("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return dt("Comment",s,{"ss:Author":r.a})}).join("")}function Yje(t,r,a,s,n,o,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ir(sw(t.f,i))),t.F&&t.F.slice(0,r.length)==r){var c=Na(t.F.slice(r.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ir(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ir(t.l.Tooltip))),a["!merges"])for(var d=a["!merges"],u=0;u!=d.length;++u)d[u].s.c!=i.c||d[u].s.r!=i.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var m="",x="";switch(t.t){case"z":if(!s.sheetStubs)return"";break;case"n":m="Number",x=String(t.v);break;case"b":m="Boolean",x=t.v?"1":"0";break;case"e":m="Error",x=c0[t.v];break;case"d":m="DateTime",x=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||qr[14]);break;case"s":m="String",x=Jhe(t.v||"");break}var h=Ki(s.cellXfs,t,s);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=i.c+1;var v=t.v!=null?x:"",p=t.t=="z"?"":'<Data ss:Type="'+m+'">'+v+"</Data>";return(t.c||[]).length>0&&(p+=Xje(t.c)),dt("Cell",p,l)}function Qje(t,r){var a='<Row ss:Index="'+(t+1)+'"';return r&&(r.hpt&&!r.hpx&&(r.hpx=G$(r.hpt)),r.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'),r.hidden&&(a+=' ss:Hidden="1"')),a+">"}function Jje(t,r,a,s){if(!t["!ref"])return"";var n=Cr(t["!ref"]),o=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,y){rw(g);var f=!!g.width,b=db(y,g),N={"ss:Index":y+1};f&&(N["ss:Width"]=Tf(b.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(dt("Column",null,N))});for(var c=Array.isArray(t),d=n.s.r;d<=n.e.r;++d){for(var u=[Qje(d,(t["!rows"]||[])[d])],m=n.s.c;m<=n.e.c;++m){var x=!1;for(i=0;i!=o.length;++i)if(!(o[i].s.c>m)&&!(o[i].s.r>d)&&!(o[i].e.c<m)&&!(o[i].e.r<d)){(o[i].s.c!=m||o[i].s.r!=d)&&(x=!0);break}if(!x){var h={r:d,c:m},v=cr(h),p=c?(t[d]||[])[m]:t[v];u.push(Yje(p,v,t,r,a,s,h))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function Zje(t,r,a){var s=[],n=a.SheetNames[t],o=a.Sheets[n],i=o?Kje(o,r,t,a):"";return i.length>0&&s.push("<Names>"+i+"</Names>"),i=o?Jje(o,r,t,a):"",i.length>0&&s.push("<Table>"+i+"</Table>"),s.push(Gje(o,r,t,a)),s.join("")}function e1e(t,r){r||(r={}),t.SSF||(t.SSF=js(qr)),t.SSF&&(nb(),sb(t.SSF),r.revssf=ob(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF,r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(Vje(t,r)),a.push(Uje()),a.push(""),a.push("");for(var s=0;s<t.SheetNames.length;++s)a.push(dt("Worksheet",Zje(s,r,t),{"ss:Name":ir(t.SheetNames[s])}));return a[2]=Wje(t,r),a[3]=Hje(t),na+dt("Workbook",a.join(""),{xmlns:Os.ss,"xmlns:o":Os.o,"xmlns:x":Os.x,"xmlns:ss":Os.ss,"xmlns:dt":Os.dt,"xmlns:html":Os.html})}var Cv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function t1e(t,r){var a=[],s=[],n=[],o=0,i,l=Mk(Yk,"n"),c=Mk(Qk,"n");if(t.Props)for(i=Da(t.Props),o=0;o<i.length;++o)(Object.prototype.hasOwnProperty.call(l,i[o])?a:Object.prototype.hasOwnProperty.call(c,i[o])?s:n).push([i[o],t.Props[i[o]]]);if(t.Custprops)for(i=Da(t.Custprops),o=0;o<i.length;++o)Object.prototype.hasOwnProperty.call(t.Props||{},i[o])||(Object.prototype.hasOwnProperty.call(l,i[o])?a:Object.prototype.hasOwnProperty.call(c,i[o])?s:n).push([i[o],t.Custprops[i[o]]]);var d=[];for(o=0;o<n.length;++o)I$.indexOf(n[o][0])>-1||R$.indexOf(n[o][0])>-1||n[o][1]!=null&&d.push(n[o]);s.length&&xr.utils.cfb_add(r,"/SummaryInformation",r6(s,Cv.SI,c,Qk)),(a.length||d.length)&&xr.utils.cfb_add(r,"/DocumentSummaryInformation",r6(a,Cv.DSI,l,Yk,d.length?d:null,Cv.UDI))}function r1e(t,r){var a=r||{},s=xr.utils.cfb_new({root:"R"}),n="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":n="/Workbook",a.biff=8;break;case"biff5":n="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return xr.utils.cfb_add(s,n,hR(t,a)),a.biff==8&&(t.Props||t.Custprops)&&t1e(t,s),a.biff==8&&t.vbaraw&&ybe(s,xr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),s}var a1e={0:{f:oye},1:{f:pye},2:{f:$ye},3:{f:Nye},4:{f:bye},5:{f:Pye},6:{f:Lye},7:{f:Cye},8:{f:Hye},9:{f:Wye},10:{f:Vye},11:{f:Uye},12:{f:fye},13:{f:Dye},14:{f:_ye},15:{f:yye},16:{f:Oye},17:{f:zye},18:{f:Eye},19:{f:JN},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Tje},40:{},42:{},43:{f:Lge},44:{f:Mge},45:{f:qge},46:{f:Uge},47:{f:Vge},48:{},49:{f:ffe},50:{},51:{f:obe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:gge},62:{f:Iye},63:{f:mbe},64:{f:lje},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:to,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:sje},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:mye},148:{f:cye,p:16},151:{f:Jye},152:{},153:{f:Aje},154:{},155:{},156:{f:kje},157:{},158:{},159:{T:1,f:kge},160:{T:-1},161:{T:1,f:uc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kye},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sbe},336:{T:-1},337:{f:cbe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:y1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:uge},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Zye},427:{f:eje},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:rje},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:uye},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Yye},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:y1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:gbe},633:{T:1},634:{T:-1},635:{T:1,f:hbe},636:{T:-1},637:{f:yfe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:jje},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:cje},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function mt(t,r,a,s){var n=r;if(!isNaN(n)){var o=s||(a||[]).length||0,i=t.next(4);i.write_shift(2,n),i.write_shift(2,o),o>0&&XN(a)&&t.push(a)}}function s1e(t,r,a,s){var n=(a||[]).length||0;if(n<=8224)return mt(t,r,a,n);var o=r;if(!isNaN(o)){for(var i=a.parts||[],l=0,c=0,d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;var u=t.next(4);for(u.write_shift(2,o),u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d;c<n;){for(u=t.next(4),u.write_shift(2,60),d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d}}}function u0(t,r,a){return t||(t=ze(7)),t.write_shift(2,r),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function n1e(t,r,a,s){var n=ze(9);return u0(n,t,r),B$(a,s||"b",n),n}function o1e(t,r,a){var s=ze(8+2*a.length);return u0(s,t,r),s.write_shift(1,a.length),s.write_shift(a.length,a,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function i1e(t,r,a,s){if(r.v!=null)switch(r.t){case"d":case"n":var n=r.t=="d"?ys(ss(r.v)):r.v;n==(n|0)&&n>=0&&n<65536?mt(t,2,jge(a,s,n)):mt(t,3,yge(a,s,n));return;case"b":case"e":mt(t,5,n1e(a,s,r.v,r.t));return;case"s":case"str":mt(t,4,o1e(a,s,(r.v||"").slice(0,255)));return}mt(t,1,u0(null,a,s))}function l1e(t,r,a,s){var n=Array.isArray(r),o=Cr(r["!ref"]||"A1"),i,l="",c=[];if(o.e.c>255||o.e.r>16383){if(s.WTF)throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),i=ra(o)}for(var d=o.s.r;d<=o.e.r;++d){l=$a(d);for(var u=o.s.c;u<=o.e.c;++u){d===o.s.r&&(c[u]=Wa(u)),i=c[u]+l;var m=n?(r[d]||[])[u]:r[i];m&&i1e(t,m,d,u)}}}function c1e(t,r){for(var a=r||{},s=vs(),n=0,o=0;o<t.SheetNames.length;++o)t.SheetNames[o]==a.sheet&&(n=o);if(n==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return mt(s,a.biff==4?1033:a.biff==3?521:9,tw(t,16,a)),l1e(s,t.Sheets[t.SheetNames[n]],n,a),mt(s,10),s.end()}function d1e(t,r,a){mt(t,49,age({sz:12,name:"Arial"},a))}function u1e(t,r,a){r&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var n=s[0];n<=s[1];++n)r[n]!=null&&mt(t,1054,oge(n,r[n],a))})}function m1e(t,r){var a=ze(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),mt(t,2151,a),a=ze(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),V$(Cr(r["!ref"]||"A1"),a),a.write_shift(4,4),mt(t,2152,a)}function x1e(t,r){for(var a=0;a<16;++a)mt(t,224,s6({numFmtId:0,style:!0},0,r));r.cellXfs.forEach(function(s){mt(t,224,s6(s,0,r))})}function p1e(t,r){for(var a=0;a<r["!links"].length;++a){var s=r["!links"][a];mt(t,440,pge(s)),s[1].Tooltip&&mt(t,2048,hge(s))}delete r["!links"]}function h1e(t,r){if(r){var a=0;r.forEach(function(s,n){++a<=256&&s&&mt(t,125,bge(db(n,s),n))})}}function f1e(t,r,a,s,n){var o=16+Ki(n.cellXfs,r,n);if(r.v==null&&!r.bf){mt(t,513,Yl(a,s,o));return}if(r.bf)mt(t,6,Bve(r,a,s,n,o));else switch(r.t){case"d":case"n":var i=r.t=="d"?ys(ss(r.v)):r.v;mt(t,515,dge(a,s,i,o));break;case"b":case"e":mt(t,517,cge(a,s,r.v,o,n,r.t));break;case"s":case"str":if(n.bookSST){var l=ow(n.Strings,r.v,n.revStrings);mt(t,253,sge(a,s,l,o))}else mt(t,516,nge(a,s,(r.v||"").slice(0,255),o,n));break;default:mt(t,513,Yl(a,s,o))}}function g1e(t,r,a){var s=vs(),n=a.SheetNames[t],o=a.Sheets[n]||{},i=(a||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(o),d=r.biff==8,u,m="",x=[],h=Cr(o["!ref"]||"A1"),v=d?65536:16384;if(h.e.c>255||h.e.r>=v){if(r.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,v-1)}mt(s,2057,tw(a,16,r)),mt(s,13,Qs(1)),mt(s,12,Qs(100)),mt(s,15,Qa(!0)),mt(s,17,Qa(!1)),mt(s,16,Xl(.001)),mt(s,95,Qa(!0)),mt(s,42,Qa(!1)),mt(s,43,Qa(!1)),mt(s,130,Qs(1)),mt(s,128,lge()),mt(s,131,Qa(!1)),mt(s,132,Qa(!1)),d&&h1e(s,o["!cols"]),mt(s,512,ige(h,r)),d&&(o["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){m=$a(p);for(var g=h.s.c;g<=h.e.c;++g){p===h.s.r&&(x[g]=Wa(g)),u=x[g]+m;var y=c?(o[p]||[])[g]:o[u];y&&(f1e(s,y,p,g,r),d&&y.l&&o["!links"].push([u,y.l]))}}var f=l.CodeName||l.name||n;return d&&mt(s,574,rge((i.Views||[])[0])),d&&(o["!merges"]||[]).length&&mt(s,229,xge(o["!merges"])),d&&p1e(s,o),mt(s,442,q$(f)),d&&m1e(s,o),mt(s,10),s.end()}function b1e(t,r,a){var s=vs(),n=(t||{}).Workbook||{},o=n.Sheets||[],i=n.WBProps||{},l=a.biff==8,c=a.biff==5;if(mt(s,2057,tw(t,5,a)),a.bookType=="xla"&&mt(s,135),mt(s,225,l?Qs(1200):null),mt(s,193,Vfe(2)),c&&mt(s,191),c&&mt(s,192),mt(s,226),mt(s,92,Jfe("SheetJS",a)),mt(s,66,Qs(l?1200:1252)),l&&mt(s,353,Qs(0)),l&&mt(s,448),mt(s,317,vge(t.SheetNames.length)),l&&t.vbaraw&&mt(s,211),l&&t.vbaraw){var d=i.CodeName||"ThisWorkbook";mt(s,442,q$(d))}mt(s,156,Qs(17)),mt(s,25,Qa(!1)),mt(s,18,Qa(!1)),mt(s,19,Qs(0)),l&&mt(s,431,Qa(!1)),l&&mt(s,444,Qs(0)),mt(s,61,tge()),mt(s,64,Qa(!1)),mt(s,141,Qs(0)),mt(s,34,Qa(wje(t)=="true")),mt(s,14,Qa(!0)),l&&mt(s,439,Qa(!1)),mt(s,218,Qs(0)),d1e(s,t,a),u1e(s,t.SSF,a),x1e(s,a),l&&mt(s,352,Qa(!1));var u=s.end(),m=vs();l&&mt(m,140,fge()),l&&a.Strings&&s1e(m,252,ege(a.Strings)),mt(m,10);var x=m.end(),h=vs(),v=0,p=0;for(p=0;p<t.SheetNames.length;++p)v+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=u.length+v+x.length;for(p=0;p<t.SheetNames.length;++p){var y=o[p]||{};mt(h,133,Zfe({pos:g,hs:y.Hidden||0,dt:0,name:t.SheetNames[p]},a)),g+=r[p].length}var f=h.end();if(v!=f.length)throw new Error("BS8 "+v+" != "+f.length);var b=[];return u.length&&b.push(u),f.length&&b.push(f),x.length&&b.push(x),Ta(b)}function v1e(t,r){var a=r||{},s=[];t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(nb(),sb(t.SSF),a.revssf=ob(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,iw(a),a.cellXfs=[],Ki(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var n=0;n<t.SheetNames.length;++n)s[s.length]=g1e(n,a,t);return s.unshift(b1e(t,s,a)),Ta(s)}function hR(t,r){for(var a=0;a<=t.SheetNames.length;++a){var s=t.Sheets[t.SheetNames[a]];if(!(!s||!s["!ref"])){var n=zs(s["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var o=r||{};switch(o.biff||2){case 8:case 5:return v1e(t,r);case 4:case 3:case 2:return c1e(t,r)}throw new Error("invalid type "+o.bookType+" for BIFF")}function y1e(t,r,a,s){for(var n=t["!merges"]||[],o=[],i=r.s.c;i<=r.e.c;++i){for(var l=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>a||n[d].s.c>i)&&!(n[d].e.r<a||n[d].e.c<i)){if(n[d].s.r<a||n[d].s.c<i){l=-1;break}l=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(l<0)){var u=cr({r:a,c:i}),m=s.dense?(t[a]||[])[i]:t[u],x=m&&m.v!=null&&(m.h||Qhe(m.w||(Lo(m),m.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),s.editable?x='<span contenteditable="true">'+x+"</span>":m&&(h["data-t"]=m&&m.t||"z",m.v!=null&&(h["data-v"]=m.v),m.z!=null&&(h["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),h.id=(s.id||"sjs")+"-"+u,o.push(dt("td",x,h))}}var v="<tr>";return v+o.join("")+"</tr>"}var j1e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',N1e="</body></html>";function w1e(t,r,a){var s=[];return s.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function fR(t,r){var a=r||{},s=a.header!=null?a.header:j1e,n=a.footer!=null?a.footer:N1e,o=[s],i=zs(t["!ref"]);a.dense=Array.isArray(t),o.push(w1e(t,i,a));for(var l=i.s.r;l<=i.e.r;++l)o.push(y1e(t,i,l,a));return o.push("</table>"+n),o.join("")}function gR(t,r,a){var s=a||{},n=0,o=0;if(s.origin!=null)if(typeof s.origin=="number")n=s.origin;else{var i=typeof s.origin=="string"?Na(s.origin):s.origin;n=i.r,o=i.c}var l=r.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:n,c:o}};if(t["!ref"]){var u=zs(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var m=[],x=0,h=t["!rows"]||(t["!rows"]=[]),v=0,p=0,g=0,y=0,f=0,b=0;for(t["!cols"]||(t["!cols"]=[]);v<l.length&&p<c;++v){var N=l[v];if(u6(N)){if(s.display)continue;h[p]={hidden:!0}}var _=N.children;for(g=y=0;g<_.length;++g){var w=_[g];if(!(s.display&&u6(w))){var S=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):tfe(w.innerHTML),C=w.getAttribute("data-z")||w.getAttribute("z");for(x=0;x<m.length;++x){var E=m[x];E.s.c==y+o&&E.s.r<p+n&&p+n<=E.e.r&&(y=E.e.c+1-o,x=-1)}b=+w.getAttribute("colspan")||1,((f=+w.getAttribute("rowspan")||1)>1||b>1)&&m.push({s:{r:p+n,c:y+o},e:{r:p+n+(f||1)-1,c:y+o+(b||1)-1}});var T={t:"s",v:S},q=w.getAttribute("data-t")||w.getAttribute("t")||"";S!=null&&(S.length==0?T.t=q||"z":s.raw||S.trim().length==0||q=="s"||(S==="TRUE"?T={t:"b",v:!0}:S==="FALSE"?T={t:"b",v:!1}:isNaN(So(S))?isNaN($x(S).getDate())||(T={t:"d",v:ss(S)},s.cellDates||(T={t:"n",v:ys(T.v)}),T.z=s.dateNF||qr[14]):T={t:"n",v:So(S)})),T.z===void 0&&C!=null&&(T.z=C);var A="",O=w.getElementsByTagName("A");if(O&&O.length)for(var V=0;V<O.length&&!(O[V].hasAttribute("href")&&(A=O[V].getAttribute("href"),A.charAt(0)!="#"));++V);A&&A.charAt(0)!="#"&&(T.l={Target:A}),s.dense?(t[p+n]||(t[p+n]=[]),t[p+n][y+o]=T):t[cr({c:y+o,r:p+n})]=T,d.e.c<y+o&&(d.e.c=y+o),y+=b}}++p}return m.length&&(t["!merges"]=(t["!merges"]||[]).concat(m)),d.e.r=Math.max(d.e.r,p-1+n),t["!ref"]=ra(d),p>=c&&(t["!fullref"]=ra((d.e.r=l.length-v+p-1+n,d))),t}function bR(t,r){var a=r||{},s=a.dense?[]:{};return gR(s,t,r)}function _1e(t,r){return ic(bR(t,r),r)}function u6(t){var r="",a=S1e(t);return a&&(r=a(t).getPropertyValue("display")),r||(r=t.style&&t.style.display),r==="none"}function S1e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var C1e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),r="<office:document-styles "+Dx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return na+r}}(),m6=function(){var t=function(o){return ir(o).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},r=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,s=function(o,i,l){var c=[];c.push('      <table:table table:name="'+ir(i.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,m=zs(o["!ref"]||"A1"),x=o["!merges"]||[],h=0,v=Array.isArray(o);if(o["!cols"])for(u=0;u<=m.e.c;++u)c.push("        <table:table-column"+(o["!cols"][u]?' table:style-name="co'+o["!cols"][u].ods+'"':"")+`></table:table-column>
`);var p="",g=o["!rows"]||[];for(d=0;d<m.s.r;++d)p=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;d<=m.e.r;++d){for(p=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+p+`>
`),u=0;u<m.s.c;++u)c.push(r);for(;u<=m.e.c;++u){var y=!1,f={},b="";for(h=0;h!=x.length;++h)if(!(x[h].s.c>u)&&!(x[h].s.r>d)&&!(x[h].e.c<u)&&!(x[h].e.r<d)){(x[h].s.c!=u||x[h].s.r!=d)&&(y=!0),f["table:number-columns-spanned"]=x[h].e.c-x[h].s.c+1,f["table:number-rows-spanned"]=x[h].e.r-x[h].s.r+1;break}if(y){c.push(a);continue}var N=cr({r:d,c:u}),_=v?(o[d]||[])[u]:o[N];if(_&&_.f&&(f["table:formula"]=ir(Hve(_.f)),_.F&&_.F.slice(0,N.length)==N)){var w=zs(_.F);f["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,f["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(!_){c.push(r);continue}switch(_.t){case"b":b=_.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=_.v?"true":"false";break;case"n":b=_.w||String(_.v||0),f["office:value-type"]="float",f["office:value"]=_.v||0;break;case"s":case"str":b=_.v==null?"":_.v,f["office:value-type"]="string";break;case"d":b=_.w||ss(_.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=ss(_.v).toISOString(),f["table:style-name"]="ce1";break;default:c.push(r);continue}var S=t(b);if(_.l&&_.l.Target){var C=_.l.Target;C=C.charAt(0)=="#"?"#"+Kve(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),S=dt("text:a",S,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+dt("table:table-cell",dt("text:p",S,{}),f)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(o,i){o.push(` <office:automatic-styles>
`),o.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),o.push(`   <number:month number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:day number:style="long"/>
`),o.push(`   <number:text>/</number:text>
`),o.push(`   <number:year/>
`),o.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var m=d["!cols"][u];if(m.width==null&&m.wpx==null&&m.wch==null)continue;rw(m),m.ods=l;var x=d["!cols"][u].wpx+"px";o.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),o.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var m=d["!rows"][u].hpx+"px";o.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),o.push(`  </style:style>
`),++c}}}),o.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),o.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),o.push(`  </style:style>
`),o.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),o.push(` </office:automatic-styles>
`)};return function(i,l){var c=[na],d=Dx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Dx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(F$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),n(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=i.SheetNames.length;++m)c.push(s(i.Sheets[i.SheetNames[m]],i,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function vR(t,r){if(r.bookType=="fods")return m6(t,r);var a=WN(),s="",n=[],o=[];return s="mimetype",Bt(a,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",Bt(a,s,m6(t,r)),n.push([s,"text/xml"]),o.push([s,"ContentFile"]),s="styles.xml",Bt(a,s,C1e(t,r)),n.push([s,"text/xml"]),o.push([s,"StylesFile"]),s="meta.xml",Bt(a,s,na+F$()),n.push([s,"text/xml"]),o.push([s,"MetadataFile"]),s="manifest.rdf",Bt(a,s,Ife(o)),n.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",Bt(a,s,Dfe(n)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function $f(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function k1e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):jn(Rx(t))}function E1e(t,r){e:for(var a=0;a<=t.length-r.length;++a){for(var s=0;s<r.length;++s)if(t[a+s]!=r[s])continue e;return!0}return!1}function Ri(t){var r=t.reduce(function(n,o){return n+o.length},0),a=new Uint8Array(r),s=0;return t.forEach(function(n){a.set(n,s),s+=n.length}),a}function A1e(t,r,a){var s=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,n=a/Math.pow(10,s-6176);t[r+15]|=s>>7,t[r+14]|=(s&127)<<1;for(var o=0;n>=1;++o,n/=256)t[r+o]=n&255;t[r+15]|=a>=0?0:128}function Mx(t,r){var a=r?r[0]:0,s=t[a]&127;e:if(t[a++]>=128&&(s|=(t[a]&127)<<7,t[a++]<128||(s|=(t[a]&127)<<14,t[a++]<128)||(s|=(t[a]&127)<<21,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(s+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return r&&(r[0]=a),s}function ar(t){var r=new Uint8Array(7);r[0]=t&127;var a=1;e:if(t>127){if(r[a-1]|=128,r[a]=t>>7&127,++a,t<=16383||(r[a-1]|=128,r[a]=t>>14&127,++a,t<=2097151)||(r[a-1]|=128,r[a]=t>>21&127,++a,t<=268435455)||(r[a-1]|=128,r[a]=t/256>>>21&127,++a,t<=34359738367)||(r[a-1]|=128,r[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;r[a-1]|=128,r[a]=t/16777216>>>21&127,++a}return r.slice(0,a)}function nd(t){var r=0,a=t[r]&127;e:if(t[r++]>=128){if(a|=(t[r]&127)<<7,t[r++]<128||(a|=(t[r]&127)<<14,t[r++]<128)||(a|=(t[r]&127)<<21,t[r++]<128))break e;a|=(t[r]&127)<<28}return a}function ca(t){for(var r=[],a=[0];a[0]<t.length;){var s=a[0],n=Mx(t,a),o=n&7;n=Math.floor(n/8);var i=0,l;if(n==0)break;switch(o){case 0:{for(var c=a[0];t[a[0]++]>=128;);l=t.slice(c,a[0])}break;case 5:i=4,l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 1:i=8,l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 2:i=Mx(t,a),l=t.slice(a[0],a[0]+i),a[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(o," for Field ").concat(n," at offset ").concat(s))}var d={data:l,type:o};r[n]==null?r[n]=[d]:r[n].push(d)}return r}function ka(t){var r=[];return t.forEach(function(a,s){a.forEach(function(n){n.data&&(r.push(ar(s*8+n.type)),n.type==2&&r.push(ar(n.data.length)),r.push(n.data))})}),Ri(r)}function xn(t){for(var r,a=[],s=[0];s[0]<t.length;){var n=Mx(t,s),o=ca(t.slice(s[0],s[0]+n));s[0]+=n;var i={id:nd(o[1][0].data),messages:[]};o[2].forEach(function(l){var c=ca(l.data),d=nd(c[3][0].data);i.messages.push({meta:c,data:t.slice(s[0],s[0]+d)}),s[0]+=d}),(r=o[3])!=null&&r[0]&&(i.merge=nd(o[3][0].data)>>>0>0),a.push(i)}return a}function yc(t){var r=[];return t.forEach(function(a){var s=[];s[1]=[{data:ar(a.id),type:0}],s[2]=[],a.merge!=null&&(s[3]=[{data:ar(+!!a.merge),type:0}]);var n=[];a.messages.forEach(function(i){n.push(i.data),i.meta[3]=[{type:0,data:ar(i.data.length)}],s[2].push({data:ka(i.meta),type:2})});var o=ka(s);r.push(ar(o.length)),r.push(o),n.forEach(function(i){return r.push(i)})}),Ri(r)}function P1e(t,r){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],s=Mx(r,a),n=[];a[0]<r.length;){var o=r[a[0]]&3;if(o==0){var i=r[a[0]++]>>2;if(i<60)++i;else{var l=i-59;i=r[a[0]],l>1&&(i|=r[a[0]+1]<<8),l>2&&(i|=r[a[0]+2]<<16),l>3&&(i|=r[a[0]+3]<<24),i>>>=0,i++,a[0]+=l}n.push(r.slice(a[0],a[0]+i)),a[0]+=i;continue}else{var c=0,d=0;if(o==1?(d=(r[a[0]]>>2&7)+4,c=(r[a[0]++]&224)<<3,c|=r[a[0]++]):(d=(r[a[0]++]>>2)+1,o==2?(c=r[a[0]]|r[a[0]+1]<<8,a[0]+=2):(c=(r[a[0]]|r[a[0]+1]<<8|r[a[0]+2]<<16|r[a[0]+3]<<24)>>>0,a[0]+=4)),n=[Ri(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=Ri(n);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function pn(t){for(var r=[],a=0;a<t.length;){var s=t[a++],n=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,r.push(P1e(s,t.slice(a,a+n))),a+=n}if(a!==t.length)throw new Error("data is not a valid framed stream!");return Ri(r)}function jc(t){for(var r=[],a=0;a<t.length;){var s=Math.min(t.length-a,268435455),n=new Uint8Array(4);r.push(n);var o=ar(s),i=o.length;r.push(o),s<=60?(i++,r.push(new Uint8Array([s-1<<2]))):s<=256?(i+=2,r.push(new Uint8Array([240,s-1&255]))):s<=65536?(i+=3,r.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(i+=4,r.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(i+=5,r.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),r.push(t.slice(a,a+s)),i+=s,n[0]=0,n[1]=i&255,n[2]=i>>8&255,n[3]=i>>16&255,a+=s}return Ri(r)}function kv(t,r){var a=new Uint8Array(32),s=$f(a),n=12,o=0;switch(a[0]=5,t.t){case"n":a[1]=2,A1e(a,n,t.v),o|=1,n+=16;break;case"b":a[1]=6,s.setFloat64(n,t.v?1:0,!0),o|=2,n+=8;break;case"s":if(r.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,s.setUint32(n,r.indexOf(t.v),!0),o|=8,n+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(8,o,!0),a.slice(0,n)}function Ev(t,r){var a=new Uint8Array(32),s=$f(a),n=12,o=0;switch(a[0]=3,t.t){case"n":a[2]=2,s.setFloat64(n,t.v,!0),o|=32,n+=8;break;case"b":a[2]=6,s.setFloat64(n,t.v?1:0,!0),o|=32,n+=8;break;case"s":if(r.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,s.setUint32(n,r.indexOf(t.v),!0),o|=16,n+=4;break;default:throw"unsupported cell type "+t.t}return s.setUint32(4,o,!0),a.slice(0,n)}function ei(t){var r=ca(t);return Mx(r[1][0].data)}function T1e(t,r,a){var s,n,o,i;if(!((s=t[6])!=null&&s[0])||!((n=t[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(o=t[8])==null?void 0:o[0])==null?void 0:i.data)&&nd(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=$f(t[7][0].data),u=0,m=[],x=$f(t[4][0].data),h=0,v=[],p=0;p<r.length;++p){if(r[p]==null){d.setUint16(p*2,65535,!0),x.setUint16(p*2,65535);continue}d.setUint16(p*2,u,!0),x.setUint16(p*2,h,!0);var g,y;switch(typeof r[p]){case"string":g=kv({t:"s",v:r[p]},a),y=Ev({t:"s",v:r[p]},a);break;case"number":g=kv({t:"n",v:r[p]},a),y=Ev({t:"n",v:r[p]},a);break;case"boolean":g=kv({t:"b",v:r[p]},a),y=Ev({t:"b",v:r[p]},a);break;default:throw new Error("Unsupported value "+r[p])}m.push(g),u+=g.length,v.push(y),h+=y.length,++c}for(t[2][0].data=ar(c);p<t[7][0].data.length/2;++p)d.setUint16(p*2,65535,!0),x.setUint16(p*2,65535,!0);return t[6][0].data=Ri(m),t[3][0].data=Ri(v),c}function O1e(t,r){if(!r||!r.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=zs(a["!ref"]);s.s.r=s.s.c=0;var n=!1;s.e.c>9&&(n=!0,s.e.c=9),s.e.r>49&&(n=!0,s.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(ra(s)));var o=Rf(a,{range:s,header:1}),i=["~Sh33tJ5~"];o.forEach(function(I){return I.forEach(function(k){typeof k=="string"&&i.push(k)})});var l={},c=[],d=xr.read(r.numbers,{type:"base64"});d.FileIndex.map(function(I,k){return[I,d.FullPaths[k]]}).forEach(function(I){var k=I[0],M=I[1];if(k.type==2&&k.name.match(/\.iwa/)){var z=k.content,oe=pn(z),W=xn(oe);W.forEach(function(ae){c.push(ae.id),l[ae.id]={deps:[],location:M,type:nd(ae.messages[0].meta[1][0].data)}})}}),c.sort(function(I,k){return I-k});var u=c.filter(function(I){return I>1}).map(function(I){return[I,ar(I)]});d.FileIndex.map(function(I,k){return[I,d.FullPaths[k]]}).forEach(function(I){var k=I[0];if(I[1],!!k.name.match(/\.iwa/)){var M=xn(pn(k.content));M.forEach(function(z){z.messages.forEach(function(oe){u.forEach(function(W){z.messages.some(function(ae){return nd(ae.meta[1][0].data)!=11006&&E1e(ae.data,W[1])})&&l[W[0]].deps.push(z.id)})})})}});for(var m=xr.find(d,l[1].location),x=xn(pn(m.content)),h,v=0;v<x.length;++v){var p=x[v];p.id==1&&(h=p)}var g=ei(ca(h.messages[0].data)[1][0].data);for(m=xr.find(d,l[g].location),x=xn(pn(m.content)),v=0;v<x.length;++v)p=x[v],p.id==g&&(h=p);for(g=ei(ca(h.messages[0].data)[2][0].data),m=xr.find(d,l[g].location),x=xn(pn(m.content)),v=0;v<x.length;++v)p=x[v],p.id==g&&(h=p);for(g=ei(ca(h.messages[0].data)[2][0].data),m=xr.find(d,l[g].location),x=xn(pn(m.content)),v=0;v<x.length;++v)p=x[v],p.id==g&&(h=p);var y=ca(h.messages[0].data);{y[6][0].data=ar(s.e.r+1),y[7][0].data=ar(s.e.c+1);var f=ei(y[46][0].data),b=xr.find(d,l[f].location),N=xn(pn(b.content));{for(var _=0;_<N.length&&N[_].id!=f;++_);if(N[_].id!=f)throw"Bad ColumnRowUIDMapArchive";var w=ca(N[_].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var S=0;S<=s.e.c;++S){var C=[];C[1]=C[2]=[{type:0,data:ar(S+420690)}],w[1].push({type:2,data:ka(C)}),w[2].push({type:0,data:ar(S)}),w[3].push({type:0,data:ar(S)})}w[4]=[],w[5]=[],w[6]=[];for(var E=0;E<=s.e.r;++E)C=[],C[1]=C[2]=[{type:0,data:ar(E+726270)}],w[4].push({type:2,data:ka(C)}),w[5].push({type:0,data:ar(E)}),w[6].push({type:0,data:ar(E)});N[_].messages[0].data=ka(w)}b.content=jc(yc(N)),b.size=b.content.length,delete y[46];var T=ca(y[4][0].data);{T[7][0].data=ar(s.e.r+1);var q=ca(T[1][0].data),A=ei(q[2][0].data);b=xr.find(d,l[A].location),N=xn(pn(b.content));{if(N[0].id!=A)throw"Bad HeaderStorageBucket";var O=ca(N[0].messages[0].data);for(E=0;E<o.length;++E){var V=ca(O[2][0].data);V[1][0].data=ar(E),V[4][0].data=ar(o[E].length),O[2][E]={type:O[2][0].type,data:ka(V)}}N[0].messages[0].data=ka(O)}b.content=jc(yc(N)),b.size=b.content.length;var G=ei(T[2][0].data);b=xr.find(d,l[G].location),N=xn(pn(b.content));{if(N[0].id!=G)throw"Bad HeaderStorageBucket";for(O=ca(N[0].messages[0].data),S=0;S<=s.e.c;++S)V=ca(O[2][0].data),V[1][0].data=ar(S),V[4][0].data=ar(s.e.r+1),O[2][S]={type:O[2][0].type,data:ka(V)};N[0].messages[0].data=ka(O)}b.content=jc(yc(N)),b.size=b.content.length;var L=ei(T[4][0].data);(function(){for(var I=xr.find(d,l[L].location),k=xn(pn(I.content)),M,z=0;z<k.length;++z){var oe=k[z];oe.id==L&&(M=oe)}var W=ca(M.messages[0].data);{W[3]=[];var ae=[];i.forEach(function(ie,we){ae[1]=[{type:0,data:ar(we)}],ae[2]=[{type:0,data:ar(1)}],ae[3]=[{type:2,data:k1e(ie)}],W[3].push({type:2,data:ka(ae)})})}M.messages[0].data=ka(W);var ee=yc(k),ce=jc(ee);I.content=ce,I.size=I.content.length})();var Z=ca(T[3][0].data);{var D=Z[1][0];delete Z[2];var K=ca(D.data);{var R=ei(K[2][0].data);(function(){for(var I=xr.find(d,l[R].location),k=xn(pn(I.content)),M,z=0;z<k.length;++z){var oe=k[z];oe.id==R&&(M=oe)}var W=ca(M.messages[0].data);{delete W[6],delete Z[7];var ae=new Uint8Array(W[5][0].data);W[5]=[];for(var ee=0,ce=0;ce<=s.e.r;++ce){var ie=ca(ae);ee+=T1e(ie,o[ce],i),ie[1][0].data=ar(ce),W[5].push({data:ka(ie),type:2})}W[1]=[{type:0,data:ar(s.e.c+1)}],W[2]=[{type:0,data:ar(s.e.r+1)}],W[3]=[{type:0,data:ar(ee)}],W[4]=[{type:0,data:ar(s.e.r+1)}]}M.messages[0].data=ka(W);var we=yc(k),Se=jc(we);I.content=Se,I.size=I.content.length})()}D.data=ka(K)}T[3][0].data=ka(Z)}y[4][0].data=ka(T)}h.messages[0].data=ka(y);var B=yc(x),F=jc(B);return m.content=F,m.size=m.content.length,d}function F1e(t){return function(a){for(var s=0;s!=t.length;++s){var n=t[s];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function iw(t){F1e([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function $1e(t,r){return r.bookType=="ods"?vR(t,r):r.bookType=="numbers"?O1e(t,r):r.bookType=="xlsb"?R1e(t,r):D1e(t,r)}function R1e(t,r){Uc=1024,t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(nb(),sb(t.SSF),r.revssf=ob(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wm?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var a=r.bookType=="xlsb"?"bin":"xml",s=tR.indexOf(r.bookType)>-1,n=P$();iw(r=r||{});var o=WN(),i="",l=0;if(r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Bt(o,i,$$(t.Props,r)),n.coreprops.push(i),nr(r.rels,2,i,Jt.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Bt(o,i,D$(t.Props)),n.extprops.push(i),nr(r.rels,3,i,Jt.EXT_PROPS),t.Custprops!==t.Props&&Da(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Bt(o,i,M$(t.Custprops)),n.custprops.push(i),nr(r.rels,4,i,Jt.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var u={"!id":{}},m=t.Sheets[t.SheetNames[l-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:i="xl/worksheets/sheet"+l+"."+a,Bt(o,i,Ije(l-1,i,r,t,u)),n.sheets.push(i),nr(r.wbrels,-1,"worksheets/sheet"+l+"."+a,Jt.WS[0])}if(m){var h=m["!comments"],v=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+a,Bt(o,p,zje(h,p)),n.comments.push(p),nr(u,-1,"../comments"+l+"."+a,Jt.CMNT),v=!0),m["!legacy"]&&v&&Bt(o,"xl/drawings/vmlDrawing"+l+".vml",Z$(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&Bt(o,O$(i),ad(u))}return r.Strings!=null&&r.Strings.length>0&&(i="xl/sharedStrings."+a,Bt(o,i,Bje(r.Strings,i,r)),n.strs.push(i),nr(r.wbrels,-1,"sharedStrings."+a,Jt.SST)),i="xl/workbook."+a,Bt(o,i,Mje(t,i)),n.workbooks.push(i),nr(r.rels,1,i,Jt.WB),i="xl/theme/theme1.xml",Bt(o,i,Q$(t.Themes,r)),n.themes.push(i),nr(r.wbrels,-1,"theme/theme1.xml",Jt.THEME),i="xl/styles."+a,Bt(o,i,Lje(t,i,r)),n.styles.push(i),nr(r.wbrels,-1,"styles."+a,Jt.STY),t.vbaraw&&s&&(i="xl/vbaProject.bin",Bt(o,i,t.vbaraw),n.vba.push(i),nr(r.wbrels,-1,"vbaProject.bin",Jt.VBA)),i="xl/metadata."+a,Bt(o,i,qje(i)),n.metadata.push(i),nr(r.wbrels,-1,"metadata."+a,Jt.XLMETA),Bt(o,"[Content_Types].xml",T$(n,r)),Bt(o,"_rels/.rels",ad(r.rels)),Bt(o,"xl/_rels/workbook."+a+".rels",ad(r.wbrels)),delete r.revssf,delete r.ssf,o}function D1e(t,r){Uc=1024,t&&!t.SSF&&(t.SSF=js(qr)),t&&t.SSF&&(nb(),sb(t.SSF),r.revssf=ob(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wm?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var a="xml",s=tR.indexOf(r.bookType)>-1,n=P$();iw(r=r||{});var o=WN(),i="",l=0;if(r.cellXfs=[],Ki(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Bt(o,i,$$(t.Props,r)),n.coreprops.push(i),nr(r.rels,2,i,Jt.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Bt(o,i,D$(t.Props)),n.extprops.push(i),nr(r.rels,3,i,Jt.EXT_PROPS),t.Custprops!==t.Props&&Da(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Bt(o,i,M$(t.Custprops)),n.custprops.push(i),nr(r.rels,4,i,Jt.CUST_PROPS));var u=["SheetJ5"];for(r.tcid=0,l=1;l<=t.SheetNames.length;++l){var m={"!id":{}},x=t.Sheets[t.SheetNames[l-1]],h=(x||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+a,Bt(o,i,dR(l-1,r,t,m)),n.sheets.push(i),nr(r.wbrels,-1,"worksheets/sheet"+l+"."+a,Jt.WS[0])}if(x){var v=x["!comments"],p=!1,g="";if(v&&v.length>0){var y=!1;v.forEach(function(f){f[1].forEach(function(b){b.T==!0&&(y=!0)})}),y&&(g="xl/threadedComments/threadedComment"+l+"."+a,Bt(o,g,xbe(v,u,r)),n.threadedcomments.push(g),nr(m,-1,"../threadedComments/threadedComment"+l+"."+a,Jt.TCMNT)),g="xl/comments"+l+"."+a,Bt(o,g,eR(v)),n.comments.push(g),nr(m,-1,"../comments"+l+"."+a,Jt.CMNT),p=!0}x["!legacy"]&&p&&Bt(o,"xl/drawings/vmlDrawing"+l+".vml",Z$(l,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&Bt(o,O$(i),ad(m))}return r.Strings!=null&&r.Strings.length>0&&(i="xl/sharedStrings."+a,Bt(o,i,W$(r.Strings,r)),n.strs.push(i),nr(r.wbrels,-1,"sharedStrings."+a,Jt.SST)),i="xl/workbook."+a,Bt(o,i,xR(t)),n.workbooks.push(i),nr(r.rels,1,i,Jt.WB),i="xl/theme/theme1.xml",Bt(o,i,Q$(t.Themes,r)),n.themes.push(i),nr(r.wbrels,-1,"theme/theme1.xml",Jt.THEME),i="xl/styles."+a,Bt(o,i,X$(t,r)),n.styles.push(i),nr(r.wbrels,-1,"styles."+a,Jt.STY),t.vbaraw&&s&&(i="xl/vbaProject.bin",Bt(o,i,t.vbaraw),n.vba.push(i),nr(r.wbrels,-1,"vbaProject.bin",Jt.VBA)),i="xl/metadata."+a,Bt(o,i,J$()),n.metadata.push(i),nr(r.wbrels,-1,"metadata."+a,Jt.XLMETA),u.length>1&&(i="xl/persons/person.xml",Bt(o,i,pbe(u)),n.people.push(i),nr(r.wbrels,-1,"persons/person.xml",Jt.PEOPLE)),Bt(o,"[Content_Types].xml",T$(n,r)),Bt(o,"_rels/.rels",ad(r.rels)),Bt(o,"xl/_rels/workbook."+a+".rels",ad(r.wbrels)),delete r.revssf,delete r.ssf,o}function M1e(t,r){var a="";switch((r||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Io(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function yR(t,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return i0(r.file,xr.write(t,{type:er?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return xr.write(t,r)}function I1e(t,r){var a=js(r||{}),s=$1e(t,a);return L1e(s,a)}function L1e(t,r){var a={},s=er?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(r.compression&&(a.compression="DEFLATE"),r.password)a.type=s;else switch(r.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");case"buffer":case"file":a.type=s;break;default:throw new Error("Unrecognized type "+r.type)}var n=t.FullPaths?xr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!r.compression}):t.generate(a);if(typeof Deno<"u"&&typeof n=="string"){if(r.type=="binary"||r.type=="base64")return n;n=new Uint8Array(ab(n))}return r.password&&typeof encrypt_agile<"u"?yR(encrypt_agile(n,r.password),r):r.type==="file"?i0(r.file,n):r.type=="string"?vm(n):n}function B1e(t,r){var a=r||{},s=r1e(t,a);return yR(s,a)}function In(t,r,a){a||(a="");var s=a+t;switch(r.type){case"base64":return Fx(Rx(s));case"binary":return Rx(s);case"string":return t;case"file":return i0(r.file,s,"utf8");case"buffer":return er?Wo(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):In(s,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function z1e(t,r){switch(r.type){case"base64":return Fx(t);case"binary":return t;case"string":return t;case"file":return i0(r.file,t,"binary");case"buffer":return er?Wo(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function dp(t,r){switch(r.type){case"string":case"base64":case"binary":for(var a="",s=0;s<t.length;++s)a+=String.fromCharCode(t[s]);return r.type=="base64"?Fx(a):r.type=="string"?vm(a):a;case"file":return i0(r.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+r.type)}}function jR(t,r){hhe(),Cje(t);var a=js(r||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var s=jR(t,a);return a.type="array",ab(s)}var n=0;if(a.sheet&&(typeof a.sheet=="number"?n=a.sheet:n=t.SheetNames.indexOf(a.sheet),!t.SheetNames[n]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return In(e1e(t,a),a);case"slk":case"sylk":return In(wge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"htm":case"html":return In(fR(t.Sheets[t.SheetNames[n]],a),a);case"txt":return z1e(NR(t.Sheets[t.SheetNames[n]],a),a);case"csv":return In(lw(t.Sheets[t.SheetNames[n]],a),a,"\uFEFF");case"dif":return In(_ge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"dbf":return dp(Nge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"prn":return In(Sge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"rtf":return In(Oge.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"eth":return In(U$.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"fods":return In(vR(t,a),a);case"wk1":return dp(n6.sheet_to_wk1(t.Sheets[t.SheetNames[n]],a),a);case"wk3":return dp(n6.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),dp(hR(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),B1e(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return I1e(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function q1e(t,r,a,s,n,o,i,l){var c=$a(a),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,x=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:a,enumerable:!1})}catch{x.__rowNum__=a}else x.__rowNum__=a;if(!i||t[a])for(var h=r.s.c;h<=r.e.c;++h){var v=i?t[a][h]:t[s[h]+c];if(v===void 0||v.t===void 0){if(d===void 0)continue;o[h]!=null&&(x[o[h]]=d);continue}var p=v.v;switch(v.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(o[h]!=null){if(p==null)if(v.t=="e"&&p===null)x[o[h]]=null;else if(d!==void 0)x[o[h]]=d;else if(u&&p===null)x[o[h]]=null;else continue;else x[o[h]]=u&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?p:Lo(v,p,l);p!=null&&(m=!1)}}return{row:x,isempty:m}}function Rf(t,r){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},s=0,n=1,o=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=r||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=Cr(u);break;case"number":c=Cr(t["!ref"]),c.s.r=u;break;default:c=u}s>0&&(n=0);var m=$a(c.s.r),x=[],h=[],v=0,p=0,g=Array.isArray(t),y=c.s.r,f=0,b={};g&&!t[y]&&(t[y]=[]);var N=d.skipHidden&&t["!cols"]||[],_=d.skipHidden&&t["!rows"]||[];for(f=c.s.c;f<=c.e.c;++f)if(!(N[f]||{}).hidden)switch(x[f]=Wa(f),a=g?t[y][f]:t[x[f]+m],s){case 1:o[f]=f-c.s.c;break;case 2:o[f]=x[f];break;case 3:o[f]=d.header[f-c.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),l=i=Lo(a,null,d),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}o[f]=l}for(y=c.s.r+n;y<=c.e.r;++y)if(!(_[y]||{}).hidden){var w=q1e(t,c,y,x,s,o,g,d);(w.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(h[v++]=w.row)}return h.length=v,h}var x6=/"/g;function V1e(t,r,a,s,n,o,i,l){for(var c=!0,d=[],u="",m=$a(a),x=r.s.c;x<=r.e.c;++x)if(s[x]){var h=l.dense?(t[a]||[])[x]:t[s[x]+m];if(h==null)u="";else if(h.v!=null){c=!1,u=""+(l.rawNumbers&&h.t=="n"?h.v:Lo(h,null,l));for(var v=0,p=0;v!==u.length;++v)if((p=u.charCodeAt(v))===n||p===o||p===34||l.forceQuotes){u='"'+u.replace(x6,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(c=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(x6,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(i)}function lw(t,r){var a=[],s=r??{};if(t==null||t["!ref"]==null)return"";var n=Cr(t["!ref"]),o=s.FS!==void 0?s.FS:",",i=o.charCodeAt(0),l=s.RS!==void 0?s.RS:`
`,c=l.charCodeAt(0),d=new RegExp((o=="|"?"\\|":o)+"+$"),u="",m=[];s.dense=Array.isArray(t);for(var x=s.skipHidden&&t["!cols"]||[],h=s.skipHidden&&t["!rows"]||[],v=n.s.c;v<=n.e.c;++v)(x[v]||{}).hidden||(m[v]=Wa(v));for(var p=0,g=n.s.r;g<=n.e.r;++g)(h[g]||{}).hidden||(u=V1e(t,n,g,m,i,c,o,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&a.push((p++?l:"")+u)));return delete s.dense,a.join("")}function NR(t,r){r||(r={}),r.FS="	",r.RS=`
`;var a=lw(t,r);return a}function U1e(t){var r="",a,s="";if(t==null||t["!ref"]==null)return[];var n=Cr(t["!ref"]),o="",i=[],l,c=[],d=Array.isArray(t);for(l=n.s.c;l<=n.e.c;++l)i[l]=Wa(l);for(var u=n.s.r;u<=n.e.r;++u)for(o=$a(u),l=n.s.c;l<=n.e.c;++l)if(r=i[l]+o,a=d?(t[u]||[])[l]:t[r],s="",a!==void 0){if(a.F!=null){if(r=a.F,!a.f)continue;s=a.f,r.indexOf(":")==-1&&(r=r+":"+r)}if(a.f!=null)s=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)s=""+a.v;else if(a.t=="b")s=a.v?"TRUE":"FALSE";else if(a.w!==void 0)s="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?s="'"+a.v:s=""+a.v}}c[c.length]=r+"="+s}return c}function wR(t,r,a){var s=a||{},n=+!s.skipHeader,o=t||{},i=0,l=0;if(o&&s.origin!=null)if(typeof s.origin=="number")i=s.origin;else{var c=typeof s.origin=="string"?Na(s.origin):s.origin;i=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:i+r.length-1+n}};if(o["!ref"]){var m=Cr(o["!ref"]);u.e.c=Math.max(u.e.c,m.e.c),u.e.r=Math.max(u.e.r,m.e.r),i==-1&&(i=m.e.r+1,u.e.r=i+r.length-1+n)}else i==-1&&(i=0,u.e.r=r.length-1+n);var x=s.header||[],h=0;r.forEach(function(p,g){Da(p).forEach(function(y){(h=x.indexOf(y))==-1&&(x[h=x.length]=y);var f=p[y],b="z",N="",_=cr({c:l+h,r:i+g+n});d=Ix(o,_),f&&typeof f=="object"&&!(f instanceof Date)?o[_]=f:(typeof f=="number"?b="n":typeof f=="boolean"?b="b":typeof f=="string"?b="s":f instanceof Date?(b="d",s.cellDates||(b="n",f=ys(f)),N=s.dateNF||qr[14]):f===null&&s.nullError&&(b="e",f=0),d?(d.t=b,d.v=f,delete d.w,delete d.R,N&&(d.z=N)):o[_]=d={t:b,v:f},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+x.length-1);var v=$a(i);if(n)for(h=0;h<x.length;++h)o[Wa(h+l)+v]={t:"s",v:x[h]};return o["!ref"]=ra(u),o}function W1e(t,r){return wR(null,t,r)}function Ix(t,r,a){if(typeof r=="string"){if(Array.isArray(t)){var s=Na(r);return t[s.r]||(t[s.r]=[]),t[s.r][s.c]||(t[s.r][s.c]={t:"z"})}return t[r]||(t[r]={t:"z"})}return typeof r!="number"?Ix(t,cr(r)):Ix(t,cr({r,c:a||0}))}function H1e(t,r){if(typeof r=="number"){if(r>=0&&t.SheetNames.length>r)return r;throw new Error("Cannot find sheet # "+r)}else if(typeof r=="string"){var a=t.SheetNames.indexOf(r);if(a>-1)return a;throw new Error("Cannot find sheet name |"+r+"|")}else throw new Error("Cannot find sheet |"+r+"|")}function K1e(){return{SheetNames:[],Sheets:{}}}function G1e(t,r,a,s){var n=1;if(!a)for(;n<=65535&&t.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&t.SheetNames.indexOf(a)>=0){var o=a.match(/(^.*?)(\d+)$/);n=o&&+o[2]||0;var i=o&&o[1]||a;for(++n;n<=65535&&t.SheetNames.indexOf(a=i+n)!=-1;++n);}if(mR(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=r,a}function X1e(t,r,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var s=H1e(t,r);switch(t.Workbook.Sheets[s]||(t.Workbook.Sheets[s]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[s].Hidden=a}function Y1e(t,r){return t.z=r,t}function _R(t,r,a){return r?(t.l={Target:r},a&&(t.l.Tooltip=a)):delete t.l,t}function Q1e(t,r,a){return _R(t,"#"+r,a)}function J1e(t,r,a){t.c||(t.c=[]),t.c.push({t:r,a:a||"SheetJS"})}function Z1e(t,r,a,s){for(var n=typeof r!="string"?r:Cr(r),o=typeof r=="string"?r:ra(r),i=n.s.r;i<=n.e.r;++i)for(var l=n.s.c;l<=n.e.c;++l){var c=Ix(t,i,l);c.t="n",c.F=o,delete c.v,i==n.s.r&&l==n.s.c&&(c.f=a,s&&(c.D=!0))}return t}var Zi={encode_col:Wa,encode_row:$a,encode_cell:cr,encode_range:ra,decode_col:QN,decode_row:YN,split_cell:hfe,decode_cell:Na,decode_range:zs,format_cell:Lo,sheet_add_aoa:_$,sheet_add_json:wR,sheet_add_dom:gR,aoa_to_sheet:bu,json_to_sheet:W1e,table_to_sheet:bR,table_to_book:_1e,sheet_to_csv:lw,sheet_to_txt:NR,sheet_to_json:Rf,sheet_to_html:fR,sheet_to_formulae:U1e,sheet_to_row_object_array:Rf,sheet_get_cell:Ix,book_new:K1e,book_append_sheet:G1e,book_set_sheet_visibility:X1e,cell_set_number_format:Y1e,cell_set_hyperlink:_R,cell_set_internal_link:Q1e,cell_add_comment:J1e,sheet_set_array_formula:Z1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},SR={exports:{}};(function(t,r){(function(a,s){s()})(po,function(){function a(d,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,u,m){var x=new XMLHttpRequest;x.open("GET",d),x.responseType="blob",x.onload=function(){c(x.response,u,m)},x.onerror=function(){console.error("could not download file")},x.send()}function n(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof po=="object"&&po.global===po?po:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,u,m){var x=i.URL||i.webkitURL,h=document.createElement("a");u=u||d.name||"download",h.download=u,h.rel="noopener",typeof d=="string"?(h.href=d,h.origin===location.origin?o(h):n(h.href)?s(d,u,m):o(h,h.target="_blank")):(h.href=x.createObjectURL(d),setTimeout(function(){x.revokeObjectURL(h.href)},4e4),setTimeout(function(){o(h)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,m){if(u=u||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(a(d,m),u);else if(n(d))s(d,u,m);else{var x=document.createElement("a");x.href=d,x.target="_blank",setTimeout(function(){o(x)})}}:function(d,u,m,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof d=="string")return s(d,u,m);var h=d.type==="application/octet-stream",v=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&v||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var b=g.result;b=p?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=b:location=b,x=null},g.readAsDataURL(d)}else{var y=i.URL||i.webkitURL,f=y.createObjectURL(d);x?x.location=f:location.href=f,x=null,setTimeout(function(){y.revokeObjectURL(f)},4e4)}});i.saveAs=c.saveAs=c,t.exports=c})})(SR);var e2e=SR.exports;function t2e(){const[t,r]=j.useState(!1),[a,s]=j.useState("resumo"),[n,o]=j.useState(""),[i,l]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(!1),[x,h]=j.useState("mes_anterior"),[v,p]=j.useState(""),[g,y]=j.useState(""),[f,b]=j.useState(""),[N,_]=j.useState(!0),[w,S]=j.useState("financeiro"),[C,E]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[T,q]=j.useState({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0}),[A,O]=j.useState([]),[V,G]=j.useState([]),[L,Z]=j.useState([]),[D,K]=j.useState([]),[R,B]=j.useState([]),[F,I]=j.useState([]),[k,M]=j.useState([]),[z,oe]=j.useState(new Set),[W,ae]=j.useState([]),[ee,ce]=j.useState([]),[ie,we]=j.useState([]),[Se,me]=j.useState([]),[_e,je]=j.useState({}),[lt,Ke]=j.useState([]),ut=Y=>{const ue=new Set(z);ue.has(Y)?ue.delete(Y):ue.add(Y),oe(ue)},Ee=Y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Y||0),Me=Y=>Y==null||isNaN(Y)||!isFinite(Y)?0:Y,Ae=Y=>{if(!Y)return"N/A";try{if(Y instanceof Date)return Y.toLocaleDateString("pt-BR");if(typeof Y=="string"&&Y.includes("T")){const qe=Y.split("T")[0],[le,ve,Re]=qe.split("-");return`${Re}/${ve}/${le}`}const ue=new Date(Y);return isNaN(ue.getTime())?"N/A":ue.toLocaleDateString("pt-BR")}catch{return"N/A"}},ct=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],bt=(Y,ue)=>{if(!Y||Y.length===0)return Y;let qe=[...Y];return v&&ue==="funcionario"&&(qe=qe.filter(le=>le.funcionario===v)),g&&ue==="formaPagamento"&&(qe=qe.filter(le=>le.forma_pagamento===g)),f&&ue==="categoria"&&(qe=qe.filter(le=>le.categoria===f)),qe},Rt=bt(V,"formaPagamento"),Ct=bt(L,"funcionario"),It=bt(F,"categoria"),$t=({titulo:Y,valor:ue,icone:qe,cor:le,valorAnterior:ve})=>{const Re=xe(ue,ve),Le=Re.percentual>0,Q=Re.percentual===0;return e.jsxs("div",{className:`${le} text-white p-4 rounded-lg shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:Y}),e.jsx(qe,{className:"w-5 h-5 opacity-80"})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:Ee(ue)}),u&&ve!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${Q?"opacity-70":""}`,children:[Le&&e.jsx(Jo,{className:"w-4 h-4"}),!Le&&!Q&&e.jsx(Qo,{className:"w-4 h-4"}),Q&&e.jsx(ug,{className:"w-4 h-4"}),e.jsxs("span",{children:[Math.abs(Re.percentual),"%"]})]})]})},ge=()=>{switch(x){case"periodo_anterior":return"mesmo perodo anterior";case"mes_anterior":return"mesmo perodo do ms anterior";case"ano_anterior":return"mesmo perodo do ano anterior";default:return"perodo anterior"}},$e=async()=>{if(!n||!i){Ue.error("Selecione um perodo para gerar o relatrio");return}try{Ue.loading("Gerando PDF...",{id:"pdf"});const Y=new URLSearchParams({data_inicio:n,data_fim:i});v&&Y.append("funcionario",v),g&&Y.append("forma_pagamento",g),f&&Y.append("categoria",f);const ue=await U.get(`/relatorios/vendas/export/pdf?${Y.toString()}`,{responseType:"blob"}),qe=window.URL.createObjectURL(new Blob([ue.data])),le=document.createElement("a");le.href=qe,le.setAttribute("download",`relatorio_vendas_${n}_${i}.pdf`),document.body.appendChild(le),le.click(),le.remove(),Ue.success(" PDF exportado com sucesso!",{id:"pdf"})}catch(Y){console.error("Erro ao exportar PDF:",Y),Ue.error("Erro ao exportar PDF",{id:"pdf"})}},Ie=()=>{const Y=Zi.book_new(),ue=[["RELATRIO DE VENDAS"],["Perodo:",`${Ae(n)} at ${Ae(i)}`],[""],["Mtrica","Valor"],["Venda Bruta",C.venda_bruta],["Taxa de Entrega",C.taxa_entrega],["Desconto",C.desconto],["Venda Lquida",C.venda_liquida],["Em Aberto",C.em_aberto],["Quantidade de Vendas",C.quantidade_vendas]],qe=Zi.aoa_to_sheet(ue);if(Zi.book_append_sheet(Y,qe,"Resumo"),A.length>0){const Q=[["Data","Qtd","Tkt. Mdio","Vl. bruto","Taxa entrega","Desconto","(%)","Vl. lquido","Vl. recebido","Saldo aberto"],...A.map(Pe=>[Ae(Pe.data),Pe.quantidade,Pe.ticket_medio,Pe.valor_bruto,Pe.taxa_entrega,Pe.desconto,Pe.percentual_desconto,Pe.valor_liquido,Pe.valor_recebido,Pe.saldo_aberto])],Ne=Zi.aoa_to_sheet(Q);Zi.book_append_sheet(Y,Ne,"Vendas por Data")}if(Rt.length>0){const Q=[["Forma","Valor pago"],...Rt.map(Pe=>[Pe.forma_pagamento,Pe.valor_total])],Ne=Zi.aoa_to_sheet(Q);Zi.book_append_sheet(Y,Ne,"Formas Pagamento")}const le=jR(Y,{bookType:"xlsx",type:"binary"}),ve=new ArrayBuffer(le.length),Re=new Uint8Array(ve);for(let Q=0;Q<le.length;Q++)Re[Q]=le.charCodeAt(Q)&255;const Le=`relatorio_vendas_${n}_${i}.xlsx`;e2e.saveAs(new Blob([ve],{type:"application/octet-stream"}),Le)},it=Y=>{const ue=new Date,qe=ue.getFullYear(),le=String(ue.getMonth()+1).padStart(2,"0"),ve=String(ue.getDate()).padStart(2,"0"),Re=`${qe}-${le}-${ve}`;let Le,Q;switch(Y){case"hoje":Le=Q=Re;break;case"ontem":const Ne=new Date(ue);Ne.setDate(ue.getDate()-1);const Pe=Ne.getFullYear(),Ve=String(Ne.getMonth()+1).padStart(2,"0"),ot=String(Ne.getDate()).padStart(2,"0");Le=Q=`${Pe}-${Ve}-${ot}`;break;case"esta_semana":const xt=ue.getDay(),pt=xt===0?6:xt-1,Nt=new Date(ue);Nt.setDate(ue.getDate()-pt);const Ge=Nt.getFullYear(),Dt=String(Nt.getMonth()+1).padStart(2,"0"),jr=String(Nt.getDate()).padStart(2,"0");Le=`${Ge}-${Dt}-${jr}`,Q=Re;break;case"este_mes":Le=`${qe}-${le}-01`,Q=Re;break;case"mes_anterior":const J=new Date(ue.getFullYear(),ue.getMonth()-1,1),P=new Date(ue.getFullYear(),ue.getMonth(),0),H=J.getFullYear(),te=String(J.getMonth()+1).padStart(2,"0"),ne=P.getFullYear(),de=String(P.getMonth()+1).padStart(2,"0"),se=String(P.getDate()).padStart(2,"0");Le=`${H}-${te}-01`,Q=`${ne}-${de}-${se}`;break;case"ultimos_7_dias":const fe=new Date(ue);fe.setDate(ue.getDate()-7);const he=fe.getFullYear(),ye=String(fe.getMonth()+1).padStart(2,"0"),ke=String(fe.getDate()).padStart(2,"0");Le=`${he}-${ye}-${ke}`,Q=Re;break;case"ultimos_30_dias":const He=new Date(ue);He.setDate(ue.getDate()-30);const Ze=He.getFullYear(),tt=String(He.getMonth()+1).padStart(2,"0"),Qe=String(He.getDate()).padStart(2,"0");Le=`${Ze}-${tt}-${Qe}`,Q=Re;break;case"este_ano":Le=`${qe}-01-01`,Q=Re;break;default:return}o(Le),l(Q),d(Y)},rt=()=>{const[Y,ue,qe]=n.split("-").map(Number),[le,ve,Re]=i.split("-").map(Number),Le=new Date(Y,ue-1,qe),Q=new Date(le,ve-1,Re),Ne=Math.floor((Q-Le)/(1e3*60*60*24))+1;let Pe,Ve;switch(x){case"periodo_anterior":Pe=new Date(Le),Pe.setDate(Le.getDate()-Ne),Ve=new Date(Le),Ve.setDate(Le.getDate()-1);break;case"mes_anterior":Pe=new Date(Le),Pe.setMonth(Le.getMonth()-1),Ve=new Date(Q),Ve.setMonth(Q.getMonth()-1);break;case"ano_anterior":Pe=new Date(Le),Pe.setFullYear(Le.getFullYear()-1),Ve=new Date(Q),Ve.setFullYear(Q.getFullYear()-1);break;default:return{data_inicio:"",data_fim:""}}const ot=Pe.getFullYear(),xt=String(Pe.getMonth()+1).padStart(2,"0"),pt=String(Pe.getDate()).padStart(2,"0"),Nt=Ve.getFullYear(),Ge=String(Ve.getMonth()+1).padStart(2,"0"),Dt=String(Ve.getDate()).padStart(2,"0");return{data_inicio:`${ot}-${xt}-${pt}`,data_fim:`${Nt}-${Ge}-${Dt}`}},xe=(Y,ue)=>{if(!ue||ue===0)return{valor:0,percentual:0};const qe=Y-ue,le=(qe/ue*100).toFixed(1);return{valor:qe,percentual:parseFloat(le)}},Oe=async()=>{if(!(!n||!i)){r(!0);try{const ue=(await U.get("/relatorios/vendas/relatorio",{params:{data_inicio:n,data_fim:i}})).data;if(E(ue.resumo||{}),O(ue.vendas_por_data||[]),G(ue.formas_recebimento||[]),Z(ue.vendas_por_funcionario||[]),K(ue.vendas_por_tipo||[]),B(ue.vendas_por_grupo||[]),I(ue.produtos_detalhados||[]),Ke(ue.produtos_analise||[]),M(ue.lista_vendas||[]),u||a==="comparacao"){const qe=rt(),le=await U.get("/relatorios/vendas/relatorio",{params:qe});q(le.data.resumo||{}),ae(le.data.formas_recebimento||[]),ce(le.data.vendas_por_grupo||[]),we(le.data.vendas_por_funcionario||[])}else q({venda_bruta:0,taxa_entrega:0,desconto:0,venda_liquida:0,em_aberto:0,quantidade_vendas:0})}catch(Y){console.error("Erro ao carregar relatrio:",Y)}finally{r(!1)}}},Ye=()=>{if(!lt||lt.length===0){me([]),je({});return}const Y=lt.map(le=>{const ve=Me(le.custo_total),Re=Me(le.valor_total),Le=Me(le.quantidade)||1,Q=Re-ve,Ne=ve>0?Q/ve*100:0;return{nome:le.nome||le.produto||"Produto sem nome",marca:le.marca||"-",quantidade:Le,custo:Me(ve/Le),preco:Me(Re/Le),lucro_total:Me(Q),margem:Me(Ne),categoria:le.categoria||"Sem Categoria"}}),ue=Y.sort((le,ve)=>ve.lucro_total-le.lucro_total).slice(0,20);me(ue);const qe={};Y.forEach(le=>{const ve=le.categoria||"Sem Categoria";qe[ve]||(qe[ve]={quantidade:0,total:0,margens:[]}),qe[ve].quantidade+=le.quantidade,qe[ve].total+=le.preco*le.quantidade,qe[ve].margens.push(le.margem)}),Object.keys(qe).forEach(le=>{const ve=qe[le].margens,Re=ve.reduce((Le,Q)=>Me(Le)+Me(Q),0);qe[le].margem_media=Me(ve.length>0?Re/ve.length:0),delete qe[le].margens}),je(qe)};return j.useEffect(()=>{a==="analise"&&Ye()},[lt,a]),j.useEffect(()=>{Oe()},[n,i,u,x,a]),j.useEffect(()=>{it("este_mes")},[]),t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Consulta de Vendas"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:$e,disabled:!n||!i,title:n&&i?`Exportar PDF de ${Ae(n)} at ${Ae(i)}`:"Selecione um perodo",className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar PDF"}),n&&i&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",Ae(n)," - ",Ae(i),")"]})]})]}),e.jsxs("button",{onClick:Ie,disabled:!n||!i,title:n&&i?`Exportar dados de ${Ae(n)} at ${Ae(i)}`:"Selecione um perodo",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Km,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Exportar Excel"}),n&&i&&e.jsxs("span",{className:"text-xs opacity-90",children:["(",Ae(n)," - ",Ae(i),")"]})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:Y=>m(Y.target.checked),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Comparar com:"})]}),u&&e.jsxs("select",{value:x,onChange:Y=>h(Y.target.value),className:"border rounded px-3 py-2 text-sm bg-blue-50 font-medium",children:[e.jsx("option",{value:"periodo_anterior",children:"Perodo imediatamente anterior (mesmo n de dias)"}),e.jsx("option",{value:"mes_anterior",children:"Mesmo perodo do ms passado"}),e.jsx("option",{value:"ano_anterior",children:"Mesmo perodo do ano passado"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"hoje",label:"Hoje"},{id:"ontem",label:"Ontem"},{id:"esta_semana",label:"Esta semana"},{id:"este_mes",label:"Este ms"},{id:"mes_anterior",label:"Ms anterior"},{id:"ultimos_7_dias",label:"ltimos 7 dias"},{id:"ultimos_30_dias",label:"ltimos 30 dias"},{id:"este_ano",label:"Este ano"},{id:"personalizado",label:"Personalizado"}].map(Y=>e.jsx("button",{onClick:()=>{Y.id==="personalizado"?d("personalizado"):it(Y.id)},className:`px-3 py-1 rounded text-sm font-medium transition-colors ${c===Y.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Y.label},Y.id))}),c==="personalizado"&&e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-gray-50 rounded",children:[e.jsx(zi,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"date",value:n,onChange:Y=>o(Y.target.value),className:"border rounded px-3 py-2"}),e.jsx("span",{className:"text-gray-600",children:"at"}),e.jsx("input",{type:"date",value:i,onChange:Y=>l(Y.target.value),className:"border rounded px-3 py-2"})]}),e.jsxs("div",{className:"flex gap-2 items-center mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:[e.jsx(Xm,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtros Avanados:"}),e.jsxs("select",{value:v,onChange:Y=>p(Y.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todos os funcionrios"}),L.map((Y,ue)=>e.jsx("option",{value:Y.funcionario,children:Y.funcionario},ue))]}),e.jsxs("select",{value:g,onChange:Y=>y(Y.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as formas"}),V.map((Y,ue)=>e.jsx("option",{value:Y.forma_pagamento,children:Y.forma_pagamento},ue))]}),e.jsxs("select",{value:f,onChange:Y=>b(Y.target.value),className:"border rounded px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),F.map((Y,ue)=>e.jsx("option",{value:Y.categoria,children:Y.categoria},ue))]}),e.jsx("button",{onClick:()=>{p(""),y(""),b("")},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300 transition-colors",children:"Limpar Filtros"}),e.jsxs("button",{onClick:()=>_(!N),className:"ml-auto px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Wm,{className:"w-4 h-4"}),N?"Ocultar":"Mostrar"," Grficos"]})]}),e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsx("button",{onClick:()=>s("resumo"),className:`px-4 py-2 font-medium ${a==="resumo"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Resumo"}),e.jsx("button",{onClick:()=>s("produtos"),className:`px-4 py-2 font-medium ${a==="produtos"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Totais por produto/servio"}),e.jsx("button",{onClick:()=>s("lista"),className:`px-4 py-2 font-medium ${a==="lista"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Lista de Vendas"}),e.jsx("button",{onClick:()=>s("comparacao"),className:`px-4 py-2 font-medium ${a==="comparacao"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Comparao de Perodos"}),e.jsx("button",{onClick:()=>s("analise"),className:`px-4 py-2 font-medium ${a==="analise"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Anlise Inteligente"})]})]}),a==="resumo"&&e.jsxs("div",{children:[u&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold text-blue-800",children:"Modo Comparao Ativo:"}),e.jsxs("span",{className:"text-blue-700 ml-2",children:["Comparando ",e.jsxs("span",{className:"font-medium",children:[Ae(n)," at ",Ae(i)]})," com ",e.jsx("span",{className:"font-medium",children:ge()})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsx($t,{titulo:"Venda Bruta",valor:C.venda_bruta,icone:ha,cor:"bg-green-500",valorAnterior:T.venda_bruta}),e.jsx($t,{titulo:"Taxa de Entrega",valor:C.taxa_entrega,icone:Ms,cor:"bg-gray-400",valorAnterior:T.taxa_entrega}),e.jsx($t,{titulo:"Desconto",valor:C.desconto,icone:aa,cor:"bg-yellow-500",valorAnterior:T.desconto}),e.jsx($t,{titulo:"Venda Lquida",valor:C.venda_liquida,icone:ha,cor:"bg-blue-500",valorAnterior:T.venda_liquida}),e.jsx($t,{titulo:"Em Aberto",valor:C.em_aberto,icone:vd,cor:"bg-red-500",valorAnterior:T.em_aberto})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-orange-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:Ee(C.custo_total||0)}),e.jsx("div",{className:"text-sm",children:"Custo Total"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:Ee(C.taxa_cartao_total||0)}),e.jsx("div",{className:"text-sm",children:"Taxas de Carto"})]}),e.jsxs("div",{className:"bg-green-600 text-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-3xl font-bold",children:Ee(C.lucro_total||0)}),e.jsx("div",{className:"text-sm",children:"Lucro Total"})]}),e.jsxs("div",{className:"bg-teal-500 text-white p-4 rounded-lg shadow",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[C.margem_media||0,"%"]}),e.jsx("div",{className:"text-sm",children:"Margem Mdia"})]})]}),N&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Vendas no Perodo"}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Xd,{data:A,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tickFormatter:Y=>new Date(Y).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx(Fr,{tickFormatter:Y=>`R$ ${(Y/1e3).toFixed(0)}k`}),e.jsx(or,{formatter:Y=>Ee(Y),labelFormatter:Y=>Ae(Y)}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"valor_bruto",stroke:"#3B82F6",strokeWidth:2,name:"Venda Bruta"}),e.jsx(as,{type:"monotone",dataKey:"valor_liquido",stroke:"#10B981",strokeWidth:2,name:"Venda Lquida"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Formas de Pagamento"}),e.jsx(da,{width:"100%",height:350,children:e.jsxs(Bn,{data:Rt,layout:"vertical",margin:{top:5,right:30,left:120,bottom:5},children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{type:"number",tickFormatter:Y=>Ee(Y)}),e.jsx(Fr,{type:"category",dataKey:"forma_pagamento",width:110,style:{fontSize:"12px"}}),e.jsx(or,{formatter:(Y,ue,qe)=>{const le=Rt.reduce((Re,Le)=>Re+Le.valor_total,0),ve=(Y/le*100).toFixed(1);return[`${Ee(Y)} (${ve}%)`,"Valor"]},contentStyle:{backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),e.jsx(Mr,{dataKey:"valor_total",fill:"#3B82F6",radius:[0,8,8,0],label:{position:"right",formatter:Y=>{const ue=Rt.reduce((le,ve)=>le+ve.valor_total,0);return`${(Y/ue*100).toFixed(1)}%`},style:{fontSize:"11px",fontWeight:"bold"}},children:Rt.map((Y,ue)=>e.jsx(_l,{fill:ct[ue%ct.length]},`cell-${ue}`))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top 10 Categorias de Produtos"}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Bn,{data:It.slice(0,10),children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"categoria"}),e.jsx(Fr,{tickFormatter:Y=>`R$ ${(Y/1e3).toFixed(0)}k`}),e.jsx(or,{formatter:Y=>Ee(Y)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_liquido",fill:"#3B82F6",name:"Valor Lquido"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Vendas por data"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Tkt. Mdio"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Taxa entrega"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"(%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. recebido"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Saldo aberto"})]})}),e.jsxs("tbody",{children:[A.map((Y,ue)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:Ae(Y.data)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Y.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.ticket_medio)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.taxa_entrega)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.desconto)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[Y.percentual_desconto,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_liquido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_recebido)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.saldo_aberto)})]},ue)),A.length>0&&(()=>{const Y=A.reduce((Re,Le)=>Re+Le.quantidade,0),ue=A.reduce((Re,Le)=>Re+Le.valor_bruto,0),qe=A.reduce((Re,Le)=>Re+Le.desconto,0),le=Y>0?ue/Y:0,ve=ue>0?(qe/ue*100).toFixed(1):0;return e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:Y}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(le)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(ue)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(A.reduce((Re,Le)=>Re+Le.taxa_entrega,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(qe)}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[ve,"%"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(A.reduce((Re,Le)=>Re+Le.valor_liquido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(A.reduce((Re,Le)=>Re+Le.valor_recebido,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(A.reduce((Re,Le)=>Re+Le.saldo_aberto,0))})]})})()]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Formas de recebimento"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Forma"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valor pago"})]})}),e.jsxs("tbody",{children:[V.map((Y,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:Y.forma_pagamento}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_total)})]},ue)),V.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(V.reduce((Y,ue)=>Y+ue.valor_total,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Funcionrio"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[Ct.map((Y,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:Y.funcionario}),e.jsx("td",{className:"px-4 py-2 text-right",children:Y.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_liquido)})]},ue)),Ct.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ct.reduce((Y,ue)=>Y+ue.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(Ct.reduce((Y,ue)=>Y+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(Ct.reduce((Y,ue)=>Y+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(Ct.reduce((Y,ue)=>Y+ue.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Tipo"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Tipo"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[D.map((Y,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:Y.tipo}),e.jsx("td",{className:"px-4 py-2 text-right",children:Y.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_liquido)})]},ue)),D.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:D.reduce((Y,ue)=>Y+ue.quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(D.reduce((Y,ue)=>Y+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(D.reduce((Y,ue)=>Y+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(D.reduce((Y,ue)=>Y+ue.valor_liquido,0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Grupo de produto"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nome"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Percentual"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Vl. lquido"})]})}),e.jsxs("tbody",{children:[R.map((Y,ue)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:Y.grupo}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[Y.percentual,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.valor_liquido)})]},ue)),R.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(R.reduce((Y,ue)=>Y+ue.valor_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(R.reduce((Y,ue)=>Y+ue.desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(R.reduce((Y,ue)=>Y+ue.valor_liquido,0))})]})]})]})]})]})]}),a==="produtos"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Produtos/Servios"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Produtos/Servios"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Itens"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Bruto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Lquido"})]})}),e.jsxs("tbody",{children:[It.map((Y,ue)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-blue-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-2",children:Y.categoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:Y.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(Y.total_liquido)})]},`cat-${ue}`),Y.subcategorias&&Y.subcategorias.map((qe,le)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"bg-gray-50 font-medium",children:[e.jsx("td",{className:"px-4 py-2 pl-8",children:qe.subcategoria}),e.jsx("td",{className:"px-4 py-2 text-right",children:qe.total_quantidade}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(qe.total_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(qe.total_desconto)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Ee(qe.total_liquido)})]},`sub-${ue}-${le}`),qe.produtos&&qe.produtos.map((ve,Re)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-12 text-gray-700",children:ve.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:ve.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(ve.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(ve.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(ve.valor_liquido)})]},`prod-${ue}-${le}-${Re}`))]})),Y.produtos&&Y.produtos.map((qe,le)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 pl-8 text-gray-700",children:qe.produto}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:qe.quantidade}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(qe.valor_bruto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(qe.desconto)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-700",children:Ee(qe.valor_liquido)})]},`prod-${ue}-${le}`))]})),F.length>0&&e.jsxs("tr",{style:{backgroundColor:"#E5E7EB",color:"#1F2937",fontWeight:"bold"},children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL GERAL"}),e.jsx("td",{className:"px-4 py-3 text-right",children:F.reduce((Y,ue)=>Y+ue.total_quantidade,0)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(F.reduce((Y,ue)=>Y+ue.total_bruto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(F.reduce((Y,ue)=>Y+ue.total_desconto,0))}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(F.reduce((Y,ue)=>Y+ue.total_liquido,0))})]})]})]})})]}),a==="lista"&&e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-600 text-white px-4 py-2 rounded-t-lg font-semibold",children:"Lista de Vendas com Anlise de Rentabilidade"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left w-8"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Data"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cdigo"}),e.jsx("th",{className:"px-2 py-2 text-left",children:"Cliente"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Entrega"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Operac."}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Taxa Carto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Comisso"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Custo"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lquida"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"MG Custo"}),e.jsx("th",{className:"px-2 py-2 text-center",children:"Status"})]})}),e.jsx("tbody",{children:k.map(Y=>e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50 cursor-pointer",onClick:()=>ut(Y.id),children:[e.jsx("td",{className:"px-2 py-2",children:z.has(Y.id)?e.jsx(Ll,{className:"w-4 h-4 text-gray-600"}):e.jsx(Jc,{className:"w-4 h-4 text-gray-600"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ae(Y.data_venda)}),e.jsx("td",{className:"px-2 py-2",children:Y.numero_venda}),e.jsx("td",{className:"px-2 py-2",children:Y.cliente_nome}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:Ee(Y.venda_bruta)}),e.jsxs("td",{className:"px-2 py-2 text-right text-red-600",children:["-",Ee(Y.desconto)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",title:"Comisso repassada ao entregador",children:["-",Ee(Y.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-500",title:"Custo operacional da entrega (empresa)",children:["-",Ee(Y.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-purple-600",children:["-",Ee(Y.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-blue-600",children:["-",Ee(Y.comissao)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-pink-600",title:"Impostos sobre faturamento",children:["-",Ee(Y.imposto||0)]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-600",children:["-",Ee(Y.custo_produtos)]}),e.jsx("td",{className:"px-2 py-2 text-right font-medium",children:Ee(Y.venda_liquida)}),e.jsx("td",{className:`px-2 py-2 text-right font-bold ${Y.lucro>=0?"text-green-600":"text-red-600"}`,children:Ee(Y.lucro)}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[Y.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-2 text-right",children:[Y.margem_sobre_custo,"%"]}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${Y.status==="finalizada"?"bg-green-100 text-green-800":Y.status==="baixa_parcial"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:Y.status==="finalizada"?"Baixada":Y.status==="baixa_parcial"?"Parcial":"Aberta"})})]}),z.has(Y.id)&&Y.itens&&Y.itens.length>0&&e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"17",className:"px-4 py-3",children:e.jsxs("div",{className:"pl-8",children:[e.jsx("div",{className:"font-semibold text-gray-700 mb-2",children:"Produtos desta venda:"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Produto"}),e.jsx("th",{className:"px-2 py-1 text-center",children:"Qtd"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Preo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Venda Bruta"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Desconto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Entr."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Oper."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Taxa Carto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Comisso"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Imposto"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Unit."}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Custo Total"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lquido"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Lucro"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Venda"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"MG Custo"})]})}),e.jsx("tbody",{children:Y.itens.map((ue,qe)=>e.jsxs("tr",{className:"border-b border-blue-200 hover:bg-blue-100",children:[e.jsx("td",{className:"px-2 py-1",children:ue.produto_nome}),e.jsx("td",{className:"px-2 py-1 text-center",children:ue.quantidade}),e.jsx("td",{className:"px-2 py-1 text-right",children:Ee(ue.preco_unitario)}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:Ee(ue.venda_bruta)}),e.jsxs("td",{className:"px-2 py-1 text-right text-red-600",children:["-",Ee(ue.desconto)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",Ee(ue.taxa_entrega)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-500",children:["-",Ee(ue.taxa_operacional||0)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-purple-600",children:["-",Ee(ue.taxa_cartao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-blue-600",children:["-",Ee(ue.comissao)]}),e.jsxs("td",{className:"px-2 py-1 text-right text-pink-600",children:["-",Ee(ue.imposto||0)]}),e.jsx("td",{className:"px-2 py-1 text-right text-orange-600",children:Ee(ue.custo_unitario)}),e.jsxs("td",{className:"px-2 py-1 text-right text-orange-600 font-medium",children:["-",Ee(ue.custo_total)]}),e.jsx("td",{className:"px-2 py-1 text-right font-medium",children:Ee(ue.valor_liquido)}),e.jsx("td",{className:`px-2 py-1 text-right font-bold ${ue.lucro>=0?"text-green-600":"text-red-600"} cursor-help`,title:`Lucro unitrio: ${Ee(ue.lucro_unitario)}`,children:Ee(ue.lucro)}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Margem unitria: ${ue.margem_sobre_venda}%`,children:[ue.margem_sobre_venda,"%"]}),e.jsxs("td",{className:"px-2 py-1 text-right cursor-help",title:`Markup unitrio: ${ue.margem_sobre_custo}%`,children:[ue.margem_sobre_custo,"%"]})]},qe))})]})]})})},`${Y.id}-detalhes`)]},Y.id))})]})})]}),a==="comparacao"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tipo de Anlise:"}),e.jsxs("select",{value:w,onChange:Y=>S(Y.target.value),className:"border rounded px-4 py-2 text-sm bg-blue-50 font-medium min-w-[250px]",children:[e.jsx("option",{value:"financeiro",children:" Comparao Financeira"}),e.jsx("option",{value:"formas_pagamento",children:" Por Forma de Pagamento"}),e.jsx("option",{value:"produtos",children:" Por Grupo de Produtos"}),e.jsx("option",{value:"funcionarios",children:" Por Funcionrio"})]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Perodo Atual:"})," ",Ae(n)," - ",Ae(i)]})]})}),w==="financeiro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-300",children:[e.jsxs("div",{className:"bg-gray-500 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Perodo Anterior"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:ge()})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:T.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:Ee(T.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:Ee(T.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:Ee(T.venda_liquida-T.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-blue-500",children:[e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Perodo Atual"}),e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[Ae(n)," - ",Ae(i)]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Quantidade de Vendas"}),e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:C.quantidade_vendas||0})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsx("div",{className:"text-xl font-bold text-gray-700",children:Ee(C.venda_bruta)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:Ee(C.venda_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:Ee(C.venda_liquida-C.em_aberto||0)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-green-500",children:[e.jsxs("div",{className:"bg-green-600 text-white px-4 py-3 rounded-t-lg",children:[e.jsx("h3",{className:"font-bold text-lg",children:" Diferena"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Variao vs perodo anterior"})]}),e.jsx("div",{className:"p-4 space-y-3",children:(()=>{const Y=xe(C.quantidade_vendas,T.quantidade_vendas),ue=xe(C.venda_bruta,T.venda_bruta),qe=xe(C.venda_liquida,T.venda_liquida),le=C.venda_liquida-C.em_aberto,ve=T.venda_liquida-T.em_aberto,Re=xe(le,ve);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qtd de Vendas"}),e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${Y.percentual>=0?"text-green-600":"text-red-600"}`,children:[Y.percentual>=0?e.jsx(Jo,{className:"w-6 h-6"}):e.jsx(Qo,{className:"w-6 h-6"}),Math.abs(Y.percentual),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Y.valor>=0?"+":"",Y.valor.toFixed(0)," vendas"]})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Bruto"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${ue.percentual>=0?"text-green-600":"text-red-600"}`,children:[ue.percentual>=0?e.jsx(Jo,{className:"w-5 h-5"}):e.jsx(Qo,{className:"w-5 h-5"}),Math.abs(ue.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Ee(ue.valor)})]}),e.jsxs("div",{className:"border-b pb-2",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Lquido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${qe.percentual>=0?"text-green-600":"text-red-600"}`,children:[qe.percentual>=0?e.jsx(Jo,{className:"w-5 h-5"}):e.jsx(Qo,{className:"w-5 h-5"}),Math.abs(qe.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Ee(qe.valor)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Valor Recebido"}),e.jsxs("div",{className:`text-xl font-bold flex items-center gap-2 ${Re.percentual>=0?"text-green-600":"text-red-600"}`,children:[Re.percentual>=0?e.jsx(Jo,{className:"w-5 h-5"}):e.jsx(Qo,{className:"w-5 h-5"}),Math.abs(Re.percentual),"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Ee(Re.valor)})]})]})})()})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual"}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Bn,{data:[{nome:"Qtd Vendas",Anterior:T.quantidade_vendas||0,Atual:C.quantidade_vendas||0},{nome:"Vl. Bruto (mil)",Anterior:(T.venda_bruta||0)/1e3,Atual:(C.venda_bruta||0)/1e3},{nome:"Vl. Lquido (mil)",Anterior:(T.venda_liquida||0)/1e3,Atual:(C.venda_liquida||0)/1e3},{nome:"Vl. Recebido (mil)",Anterior:(T.venda_liquida-T.em_aberto||0)/1e3,Atual:(C.venda_liquida-C.em_aberto||0)/1e3}],children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome"}),e.jsx(Fr,{}),e.jsx(or,{formatter:(Y,ue)=>[ue.includes("mil")?`R$ ${Y.toFixed(1)}k`:Y.toFixed(0),ue]}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#3B82F6",name:"Perodo Atual"})]})})]})]}),w==="formas_pagamento"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Forma de Pagamento"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Forma de Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Diferena"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao %"})]})}),e.jsx("tbody",{children:V.map((Y,ue)=>{const qe=W.find(ve=>ve.forma_pagamento===Y.forma_pagamento)||{valor_total:0},le=xe(Y.valor_total,qe.valor_total);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:Y.forma_pagamento}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Ee(qe.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Ee(Y.valor_total)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(le.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${le.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[le.percentual>=0?e.jsx(Jo,{className:"w-4 h-4"}):e.jsx(Qo,{className:"w-4 h-4"}),Math.abs(le.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual"}),e.jsx(da,{width:"100%",height:350,children:e.jsxs(Bn,{data:V.map(Y=>{var ue;return{nome:Y.forma_pagamento,Anterior:(((ue=W.find(qe=>qe.forma_pagamento===Y.forma_pagamento))==null?void 0:ue.valor_total)||0)/1e3,Atual:Y.valor_total/1e3}}),children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(Fr,{tickFormatter:Y=>`R$ ${Y.toFixed(0)}k`}),e.jsx(or,{formatter:Y=>`R$ ${Y.toFixed(1)}k`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#10B981",name:"Perodo Atual"})]})})]})]}),w==="produtos"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Grupo de Produtos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Grupo"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Anterior"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Diferena"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao %"})]})}),e.jsx("tbody",{children:R.map((Y,ue)=>{const qe=ee.find(ve=>ve.grupo===Y.grupo)||{valor_liquido:0},le=xe(Y.valor_liquido,qe.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:Y.grupo}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Ee(qe.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Ee(Y.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right",children:Ee(le.valor)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${le.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[le.percentual>=0?e.jsx(Jo,{className:"w-4 h-4"}):e.jsx(Qo,{className:"w-4 h-4"}),Math.abs(le.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Perodo Anterior"}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(g1,{children:[e.jsx(Tn,{data:ee,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:Y=>{const ue=(Y.valor_liquido/ee.reduce((qe,le)=>qe+le.valor_liquido,0)*100).toFixed(1);return ue>5?`${ue}%`:""},children:ee.map((Y,ue)=>e.jsx(_l,{fill:ct[ue%ct.length]},`cell-${ue}`))}),e.jsx(or,{formatter:Y=>Ee(Y)}),e.jsx(Ar,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Perodo Atual"}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(g1,{children:[e.jsx(Tn,{data:R,dataKey:"valor_liquido",nameKey:"grupo",cx:"50%",cy:"50%",outerRadius:80,label:Y=>{const ue=(Y.valor_liquido/R.reduce((qe,le)=>qe+le.valor_liquido,0)*100).toFixed(1);return ue>5?`${ue}%`:""},children:R.map((Y,ue)=>e.jsx(_l,{fill:ct[ue%ct.length]},`cell-${ue}`))}),e.jsx(or,{formatter:Y=>Ee(Y)}),e.jsx(Ar,{verticalAlign:"bottom",height:36})]})})]})]})]}),w==="funcionarios"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao por Funcionrio"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Funcionrio"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Qtd Atual"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Ant."}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Vl. Atual"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Variao"})]})}),e.jsx("tbody",{children:L.map((Y,ue)=>{const qe=ie.find(ve=>ve.funcionario===Y.funcionario)||{quantidade:0,valor_liquido:0},le=xe(Y.valor_liquido,qe.valor_liquido);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:Y.funcionario}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:qe.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Y.quantidade}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Ee(qe.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Ee(Y.valor_liquido)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded font-medium ${le.percentual>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[le.percentual>=0?e.jsx(Jo,{className:"w-4 h-4"}):e.jsx(Qo,{className:"w-4 h-4"}),Math.abs(le.percentual),"%"]})})]},ue)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comparao Visual - Valor Lquido"}),e.jsx(da,{width:"100%",height:350,children:e.jsxs(Bn,{data:L.map(Y=>{var ue;return{nome:Y.funcionario,Anterior:(((ue=ie.find(qe=>qe.funcionario===Y.funcionario))==null?void 0:ue.valor_liquido)||0)/1e3,Atual:Y.valor_liquido/1e3}}),children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-15,textAnchor:"end",height:80}),e.jsx(Fr,{tickFormatter:Y=>`R$ ${Y.toFixed(0)}k`}),e.jsx(or,{formatter:Y=>`R$ ${Y.toFixed(1)}k`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Anterior",fill:"#9CA3AF",name:"Perodo Anterior"}),e.jsx(Mr,{dataKey:"Atual",fill:"#8B5CF6",name:"Perodo Atual"})]})})]})]})]}),a==="analise"&&e.jsxs("div",{className:"space-y-6",children:[t&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Anlise Inteligente de Produtos"})]}),e.jsx("p",{className:"text-blue-100",children:"Identifique os produtos mais lucrativos e oportunidades de melhoria no seu mix de produtos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Top Produtos por Lucro"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"#"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Produto"}),e.jsx("th",{className:"text-left py-2 px-2",children:"Marca"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Qtd"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Custo Unit."}),e.jsx("th",{className:"text-right py-2 px-2",children:"Preo Venda"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Margem %"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Lucro Total"})]})}),e.jsx("tbody",{children:Se.map((Y,ue)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-bold ${ue===0?"bg-yellow-100 text-yellow-800":ue===1?"bg-gray-100 text-gray-800":ue===2?"bg-orange-100 text-orange-800":"bg-blue-50 text-blue-800"}`,children:ue+1})}),e.jsx("td",{className:"py-3 px-2 font-medium",children:Y.nome}),e.jsx("td",{className:"py-3 px-2 text-gray-600",children:Y.marca||"-"}),e.jsx("td",{className:"py-3 px-2 text-right",children:Me(Y.quantidade)}),e.jsx("td",{className:"py-3 px-2 text-right text-red-600",children:Ee(Me(Y.custo))}),e.jsx("td",{className:"py-3 px-2 text-right text-green-600",children:Ee(Me(Y.preco))}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${Me(Y.margem)>=50?"bg-green-100 text-green-800":Me(Y.margem)>=30?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Me(Y.margem).toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 px-2 text-right font-bold text-green-600",children:Ee(Me(Y.lucro_total))})]},ue))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Desempenho por Categoria"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(_e).map(([Y,ue])=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"font-semibold text-gray-800 mb-2",children:Y}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vendas:"}),e.jsx("span",{className:"font-semibold",children:Me(ue.quantidade)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Faturamento:"}),e.jsx("span",{className:"font-semibold text-green-600",children:Ee(Me(ue.total))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Margem Mdia:"}),e.jsxs("span",{className:`font-semibold ${Me(ue.margem_media)>=40?"text-green-600":Me(ue.margem_media)>=25?"text-yellow-600":"text-red-600"}`,children:[Me(ue.margem_media).toFixed(1),"%"]})]})]})]},Y))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Ateno: Margens Baixas"})]}),e.jsxs("div",{className:"space-y-2",children:[Se.filter(Y=>Me(Y.margem)<25).slice(0,5).map((Y,ue)=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border-l-4 border-red-500",children:[e.jsx("div",{className:"font-medium text-sm",children:Y.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Margem: ",e.jsxs("span",{className:"font-semibold text-red-600",children:[Me(Y.margem).toFixed(1),"%"]})," - ","Revisar preo de custo ou venda"]})]},ue)),Se.filter(Y=>Me(Y.margem)<25).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:" Nenhum produto com margem crtica"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"text-lg font-semibold",children:" Oportunidades"})]}),e.jsxs("div",{className:"space-y-3",children:[Se.filter(Y=>Me(Y.margem)>=40&&Me(Y.quantidade)<10).slice(0,3).map((Y,ue)=>e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("div",{className:"font-medium text-sm",children:Y.nome}),e.jsxs("div",{className:"text-xs text-blue-800 mt-1",children:[e.jsxs("strong",{children:["Alta margem (",Me(Y.margem).toFixed(1),"%)"]})," mas poucas vendas (",Me(Y.quantidade)," un.)",e.jsx("br",{})," Considere promover este produto"]})]},ue)),Se.filter(Y=>Me(Y.margem)>=40).slice(0,2).map((Y,ue)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border-l-4 border-green-500",children:[e.jsx("div",{className:"font-medium text-sm",children:Y.nome}),e.jsxs("div",{className:"text-xs text-green-800 mt-1",children:[e.jsx("strong",{children:" Campeo de vendas"})," com excelente margem",e.jsx("br",{})," Mantenha em destaque"]})]},`camp-${ue}`))]})]})]}),N&&Se.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Margem vs Volume de Vendas"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(Bn,{data:Se.slice(0,15).map(Y=>({...Y,margem:Me(Y.margem),quantidade:Me(Y.quantidade)})),children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"nome",angle:-45,textAnchor:"end",height:120,interval:0,tick:{fontSize:11}}),e.jsx(Fr,{yAxisId:"left",orientation:"left",stroke:"#10B981",label:{value:"Margem %",angle:-90,position:"insideLeft"}}),e.jsx(Fr,{yAxisId:"right",orientation:"right",stroke:"#3B82F6",label:{value:"Quantidade",angle:90,position:"insideRight"}}),e.jsx(or,{}),e.jsx(Ar,{}),e.jsx(Mr,{yAxisId:"left",dataKey:"margem",fill:"#10B981",name:"Margem %"}),e.jsx(Mr,{yAxisId:"right",dataKey:"quantidade",fill:"#3B82F6",name:"Qtd Vendida"})]})})]})]})]}),"    "]})}const r2e=()=>{const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState([]),[v,p]=j.useState({campo:null,direcao:"asc"}),[g,y]=j.useState({especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[],marca_ids:[],categoria_ids:[],margem_min:null,margem_max:null,data_inicio:null,data_fim:null}),[f,b]=j.useState({marcas:[],categorias:[],especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[]}),[N,_]=j.useState("porte"),[w,S]=j.useState(!0),[C,E]=j.useState("comparacao");j.useEffect(()=>{T()},[]);const T=async()=>{var W,ae,ee;try{r(!0);const ce=localStorage.getItem("access_token");console.log(" [DashboardAnaliseRacoes] Iniciando carregamento de dados",{hasToken:!!ce,tokenPreview:ce?`${ce.substring(0,20)}...`:"NO TOKEN"}),console.log(" [DashboardAnaliseRacoes] Chamando: /racoes/analises/opcoes-filtros");const ie=await U.get("/racoes/analises/opcoes-filtros");console.log(" [DashboardAnaliseRacoes] Opes carregadas:",ie.data),b(ie.data),await q(),r(!1)}catch(ce){console.error(" [DashboardAnaliseRacoes] Erro ao carregar dados:",{message:ce.message,status:(W=ce.response)==null?void 0:W.status,data:(ae=ce.response)==null?void 0:ae.data,config:ce.config}),((ee=ce.response)==null?void 0:ee.status)===403?be.error("Acesso negado. Verifique suas permisses ou faa login novamente."):be.error("Erro ao carregar dados do dashboard"),r(!1)}},q=async(W=null,ae=null)=>{try{const ee={};W&&(ee.data_inicio=W),ae&&(ee.data_fim=ae);const ce=await U.get("/racoes/analises/resumo",{params:ee});o(ce.data)}catch(ee){console.error("Erro ao carregar resumo:",ee),be.error("Erro ao carregar resumo")}},A=async()=>{try{s(!0);const W=await U.post(`/racoes/analises/margem-por-segmento?tipo_segmento=${N}`,g);l(W.data),s(!1)}catch(W){console.error("Erro ao carregar anlise:",W),be.error("Erro ao carregar anlise de segmento"),s(!1)}},O=async()=>{try{s(!0);const W=await U.post("/racoes/analises/comparacao-marcas",g);d(W.data),s(!1)}catch(W){console.error("Erro ao carregar comparao:",W),be.error("Erro ao carregar comparao de marcas"),s(!1)}},V=async()=>{try{if(!g.data_inicio||!g.data_fim){be.error("Selecione um perodo para ver o ranking de vendas");return}s(!0);const W=await U.get("/racoes/analises/ranking-vendas",{params:{data_inicio:g.data_inicio,data_fim:g.data_fim,limite:20}});m(W.data),s(!1)}catch(W){console.error("Erro ao carregar ranking:",W),be.error("Erro ao carregar ranking de vendas"),s(!1)}},G=async()=>{try{s(!0);const W=await U.post("/racoes/analises/produtos-comparacao",g);h(W.data),p({campo:null,direcao:"asc"}),s(!1)}catch(W){console.error("Erro ao carregar produtos para comparao:",W),be.error("Erro ao carregar produtos"),s(!1)}},L=W=>{const ae=v.campo===W&&v.direcao==="asc"?"desc":"asc";p({campo:W,direcao:ae});const ee=[...x].sort((ce,ie)=>{let we,Se;switch(W){case"nome":we=ce.nome,Se=ie.nome;break;case"custo":we=ce.preco_custo||0,Se=ie.preco_custo||0;break;case"venda":we=ce.preco_venda||0,Se=ie.preco_venda||0;break;case"lucro":we=(ce.preco_venda||0)-(ce.preco_custo||0),Se=(ie.preco_venda||0)-(ie.preco_custo||0);break;case"margem":we=calcularMargem(ce.preco_custo,ce.preco_venda),Se=calcularMargem(ie.preco_custo,ie.preco_venda);break;case"roi":we=calcularROI(ce.preco_custo,ce.preco_venda),Se=calcularROI(ie.preco_custo,ie.preco_venda);break;case"custokg":we=(ce.preco_custo||0)/(ce.peso_embalagem||1),Se=(ie.preco_custo||0)/(ie.peso_embalagem||1);break;case"vendakg":we=(ce.preco_venda||0)/(ce.peso_embalagem||1),Se=(ie.preco_venda||0)/(ie.peso_embalagem||1);break;default:return 0}return typeof we=="string"?ae==="asc"?we.localeCompare(Se):Se.localeCompare(we):ae==="asc"?we-Se:Se-we});h(ee)},Z=(W,ae)=>{y(ee=>({...ee,[W]:ae}))},D=(W,ae)=>{y(ee=>{const ce=ee[W]||[],ie=ce.includes(ae);return{...ee,[W]:ie?ce.filter(we=>we!==ae):[...ce,ae]}})},K=()=>{C==="segmento"?A():C==="marcas"?O():C==="ranking"?V():C==="comparacao"&&G(),g.data_inicio&&g.data_fim&&q(g.data_inicio,g.data_fim)},R=()=>{y({especies:[],linhas:[],portes:[],fases:[],tratamentos:[],sabores:[],pesos:[],marca_ids:[],categoria_ids:[],margem_min:null,margem_max:null,data_inicio:null,data_fim:null})},B=W=>{E(W),W==="segmento"&&i.length===0?A():W==="marcas"&&c.length===0?O():W==="ranking"&&u.length===0?g.data_inicio&&g.data_fim&&V():W==="comparacao"&&x.length===0&&G()},F=()=>n?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Raes Cadastradas"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.total_racoes}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[n.total_classificadas," classificadas (",n.percentual_classificadas,"%)"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(WA,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Margem Mdia"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.margem_media_geral,"%"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["em ",n.total_racoes," produtos"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ha,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Faturamento Perodo"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",n.faturamento_periodo.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[n.marcas_cadastradas," marcas ativas"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(f9,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Mais Vendido"})]}),n.produto_mais_vendido?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:n.produto_mais_vendido.nome}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[n.produto_mais_vendido.quantidade," unidades"]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Sem dados de vendas"})]})]}):null,I=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xm,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Clique para selecionar/desmarcar"})]}),e.jsx("button",{onClick:()=>S(!w),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:w?"Ocultar ":"Mostrar "})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marcas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.marcas.map(W=>e.jsx("button",{onClick:()=>D("marca_ids",W.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.marca_ids.includes(W.id)?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W.nome},W.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Linha de Rao"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.linhas.map(W=>e.jsx("button",{onClick:()=>D("linhas",W.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.linhas.includes(W.id)?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W.nome},W.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Porte do Animal"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.portes.map(W=>e.jsx("button",{onClick:()=>D("portes",W.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.portes.includes(W.id)?"bg-green-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W.nome},W.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Fase/Pblico"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.fases.map(W=>e.jsx("button",{onClick:()=>D("fases",W.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.fases.includes(W.id)?"bg-amber-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W.nome},W.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sabor/Protena"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.sabores.map(W=>e.jsx("button",{onClick:()=>D("sabores",W),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.sabores.includes(W)?"bg-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W},W))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Peso da Embalagem"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.pesos.map(W=>e.jsxs("button",{onClick:()=>D("pesos",W),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${g.pesos.includes(W)?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[W," kg"]},W))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem Mnima (%)"}),e.jsx("input",{type:"number",step:"0.01",value:g.margem_min||"",onChange:W=>Z("margem_min",parseFloat(W.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Ex: 25"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem Mxima (%)"}),e.jsx("input",{type:"number",step:"0.01",value:g.margem_max||"",onChange:W=>Z("margem_max",parseFloat(W.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"Ex: 50"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:g.data_inicio||"",onChange:W=>Z("data_inicio",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:g.data_fim||"",onChange:W=>Z("data_fim",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs("button",{onClick:K,className:"px-6 py-2.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2 font-medium",children:[e.jsx(Xm,{className:"h-4 w-4"}),"Aplicar Filtros"]}),e.jsx("button",{onClick:R,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 font-medium",children:"Limpar Tudo"}),g.marca_ids.length+g.linhas.length+g.portes.length+g.fases.length+g.sabores.length+g.pesos.length>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:g.marca_ids.length+g.linhas.length+g.portes.length+g.fases.length+g.sabores.length+g.pesos.length}),"filtros ativos"]})]})]})]}),k=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando anlise..."}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Lt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Nenhum dado encontrado. Aplique filtros e clique em "Aplicar Filtros"']}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Analisar por:"}),e.jsxs("select",{value:N,onChange:W=>{_(W.target.value),setTimeout(()=>A(),0)},className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"porte",children:"Porte"}),e.jsx("option",{value:"fase",children:"Fase"}),e.jsx("option",{value:"sabor",children:"Sabor"}),e.jsx("option",{value:"linha",children:"Linha"}),e.jsx("option",{value:"especie",children:"Espcie"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Segmento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Produtos"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Min/Max"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo/Kg Mdio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Faturamento"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map((W,ae)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:W.segmento}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:W.total_produtos}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${W.margem_media>=30?"text-green-600":W.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[W.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:[W.margem_minima,"% - ",W.margem_maxima,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:["R$ ",W.preco_medio_kg.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:["R$ ",W.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},ae))})]})})]}),M=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando comparao..."}):c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Lt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Nenhum dado encontrado. Aplique filtros e clique em "Aplicar Filtros"']}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Marca"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Produtos"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo/Kg Mdio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Mais Barato"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Mais Caro"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(W=>{var ae,ee,ce,ie,we,Se;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:W.marca_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:W.total_produtos}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:["R$ ",W.preco_medio_kg.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${W.margem_media>=30?"text-green-600":W.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[W.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-xs text-gray-700",children:[((ee=(ae=W.produto_mais_barato)==null?void 0:ae.nome)==null?void 0:ee.substring(0,30))||"-",((ce=W.produto_mais_barato)==null?void 0:ce.preco_kg)&&e.jsxs("div",{className:"text-green-600 font-semibold",children:["R$ ",W.produto_mais_barato.preco_kg,"/kg"]})]}),e.jsxs("td",{className:"px-4 py-3 text-xs text-gray-700",children:[((we=(ie=W.produto_mais_caro)==null?void 0:ie.nome)==null?void 0:we.substring(0,30))||"-",((Se=W.produto_mais_caro)==null?void 0:Se.preco_kg)&&e.jsxs("div",{className:"text-red-600 font-semibold",children:["R$ ",W.produto_mais_caro.preco_kg,"/kg"]})]})]},W.marca_id)})})]})}),z=()=>a?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando ranking..."}):u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Lt,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),'Selecione um perodo nos filtros e clique em "Aplicar Filtros"']}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Marca"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Qtd Vendida"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Faturamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Margem Mdia"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Preo Mdio"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((W,ae)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${ae===0?"bg-yellow-100 text-yellow-700":ae===1?"bg-gray-200 text-gray-700":ae===2?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:ae+1})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:W.nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:W.marca}),e.jsx("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-900",children:W.quantidade_vendida}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center font-semibold text-green-600",children:["R$ ",W.faturamento.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("span",{className:`font-semibold ${W.margem_media>=30?"text-green-600":W.margem_media>=20?"text-yellow-600":"text-red-600"}`,children:[W.margem_media,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-center text-gray-900",children:["R$ ",W.preco_medio_venda.toFixed(2)]})]},W.produto_id))})]})}),oe=()=>{if(a)return e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Kr,{className:"h-8 w-8 animate-spin text-blue-500 mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Carregando produtos..."})]});if(x.length===0)return e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Lt,{className:"h-16 w-16 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-sm",children:'Selecione filtros acima e clique em "Aplicar Filtros"'})]});const W=(Ae,ct)=>!ct||ct===0?0:parseFloat(((ct-Ae)/ct*100).toFixed(2)),ae=(Ae,ct)=>!Ae||Ae===0?0:parseFloat(((ct-Ae)/Ae*100).toFixed(2)),ee=(Ae,ct)=>parseFloat((ct-Ae).toFixed(2)),ce=(Ae,ct)=>!Ae||Ae===0?0:parseFloat(((ct-Ae)/Ae*100).toFixed(2)),ie=x.map(Ae=>Ae.preco_custo||0),we=x.map(Ae=>W(Ae.preco_custo,Ae.preco_venda)),Se=x.map(Ae=>ee(Ae.preco_custo||0,Ae.preco_venda||0)),me=x.map(Ae=>ce(Ae.preco_custo,Ae.preco_venda)),_e=Math.min(...ie.filter(Ae=>Ae>0)),je=Math.max(...we),lt=Math.max(...Se),Ke=Math.max(...me),ut=(Ae,ct,bt,Rt=!1)=>{if(bt===ct)return"bg-gray-50";const Ct=(Ae-ct)/(bt-ct)*100;return Rt?Ct<=20?"bg-green-50 text-green-800 font-semibold":Ct<=40?"bg-green-50 text-green-700":Ct<=60?"bg-yellow-50 text-yellow-700":Ct<=80?"bg-orange-50 text-orange-700":"bg-red-50 text-red-700":Ct>=80?"bg-green-50 text-green-800 font-semibold":Ct>=60?"bg-green-50 text-green-700":Ct>=40?"bg-yellow-50 text-yellow-700":Ct>=20?"bg-orange-50 text-orange-700":"bg-red-50 text-red-700"},Ee=Ae=>Ae>=40?"text-green-700 bg-green-100 border-green-300":Ae>=30?"text-green-600 bg-green-50 border-green-200":Ae>=20?"text-yellow-600 bg-yellow-50 border-yellow-200":Ae>=10?"text-orange-600 bg-orange-50 border-orange-200":"text-red-600 bg-red-50 border-red-200",Me=({campo:Ae,children:ct,className:bt=""})=>e.jsx("th",{onClick:()=>L(Ae),className:`px-3 py-3 text-xs font-bold text-gray-700 uppercase cursor-pointer hover:bg-gray-200 transition-colors ${bt}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[ct,v.campo===Ae&&e.jsx("span",{className:"text-blue-600",children:v.direcao==="asc"?"":""})]})});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase",children:"Menor Custo"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["R$ ",_e.toFixed(2)]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Melhor preo de compra"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase",children:"Melhor Margem"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[je.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Maior percentual de lucro"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-purple-700 uppercase",children:"Melhor ROI"})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[Ke.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Retorno sobre investimento"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4 border-2 border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-xs font-semibold text-amber-700 uppercase",children:"Maior Lucro"})]}),e.jsxs("p",{className:"text-2xl font-bold text-amber-900",children:["R$ ",lt.toFixed(2)]}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Lucro absoluto por unidade"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total de Produtos Encontrados"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:x.length})]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Margem Mdia"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(we.reduce((Ae,ct)=>Ae+ct,0)/we.length).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custo Mdio/kg"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",(x.reduce((Ae,ct)=>Ae+(ct.preco_custo||0)/(ct.peso_embalagem||1),0)/x.length).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Preo Venda Mdio/kg"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",(x.reduce((Ae,ct)=>Ae+(ct.preco_venda||0)/(ct.peso_embalagem||1),0)/x.length).toFixed(2)]})]})]})]})}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Lt,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:" Dica:"})," Clique nos cabealhos das colunas para ordenar. As cores indicam valores melhores (verde) e piores (vermelho). Produtos destacados com badges so os melhores em cada categoria."]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border-2 border-gray-300 shadow-lg",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-gray-200 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase sticky left-0 bg-gray-100 border-r border-gray-300",children:"Produto / Marca"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase border-r border-gray-300",children:"Linha"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase border-r border-gray-300",children:"Peso"}),e.jsx(Me,{campo:"custo",className:"border-r border-gray-300",children:" Custo"}),e.jsx(Me,{campo:"venda",className:"border-r border-gray-300",children:" Venda"}),e.jsx(Me,{campo:"lucro",className:"border-r border-gray-300",children:"Lucro R$"}),e.jsx(Me,{campo:"margem",className:"border-r border-gray-300",children:" Margem %"}),e.jsx(Me,{campo:"roi",className:"border-r border-gray-300",children:" ROI %"}),e.jsx(Me,{campo:"custokg",className:"border-r border-gray-300",children:"Custo/kg"}),e.jsx(Me,{campo:"vendakg",className:"border-r border-gray-300",children:"Venda/kg"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-bold text-gray-700 uppercase",children:"Estoque"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(Ae=>{var rt;const ct=W(Ae.preco_custo,Ae.preco_venda);ae(Ae.preco_custo,Ae.preco_venda);const bt=ee(Ae.preco_custo||0,Ae.preco_venda||0),Rt=ce(Ae.preco_custo,Ae.preco_venda),Ct=(Ae.preco_custo||0)/(Ae.peso_embalagem||1),It=(Ae.preco_venda||0)/(Ae.peso_embalagem||1),$t=(Ae.preco_custo||0)===_e&&_e>0,ge=ct===je&&je>0,$e=bt===lt&&lt>0,Ie=Rt===Ke&&Ke>0,it=$t||ge||$e||Ie;return e.jsxs("tr",{className:`hover:bg-blue-50 transition-colors ${it?"bg-yellow-50 border-l-4 border-yellow-400":""}`,children:[e.jsx("td",{className:"px-4 py-3 sticky left-0 bg-white border-r border-gray-200",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:Ae.nome}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[((rt=Ae.marca)==null?void 0:rt.nome)||"Sem marca","  Cd: ",Ae.codigo]}),e.jsxs("div",{className:"flex gap-1 mt-1.5 flex-wrap",children:[Ae.porte_animal&&Array.isArray(Ae.porte_animal)&&Ae.porte_animal.map(xe=>e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:xe},xe)),Ae.fase_publico&&Array.isArray(Ae.fase_publico)&&Ae.fase_publico.map(xe=>e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:xe},xe)),Ae.sabor_proteina&&e.jsx("span",{className:"text-xs bg-pink-100 text-pink-700 px-1.5 py-0.5 rounded",children:Ae.sabor_proteina})]}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[$t&&e.jsx("span",{className:"text-xs bg-green-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MENOR CUSTO"}),ge&&e.jsx("span",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MELHOR MARGEM"}),Ie&&e.jsx("span",{className:"text-xs bg-purple-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MELHOR ROI"}),$e&&e.jsx("span",{className:"text-xs bg-amber-600 text-white px-2 py-1 rounded-full font-bold flex items-center gap-1",children:" MAIOR LUCRO"})]})]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:Ae.classificacao_racao||"-"})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center font-medium text-gray-900 border-r border-gray-200",children:Ae.peso_embalagem?e.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded font-bold",children:[Ae.peso_embalagem," kg"]}):"-"}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${ut(Ae.preco_custo||0,_e,Math.max(...ie),!0)}`,children:["R$ ",(Ae.preco_custo||0).toFixed(2)]}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${ut(Ae.preco_venda||0,Math.min(...x.map(xe=>xe.preco_venda||0)),Math.max(...x.map(xe=>xe.preco_venda||0)))}`,children:["R$ ",(Ae.preco_venda||0).toFixed(2)]}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${ut(bt,Math.min(...Se),Math.max(...Se))}`,children:["R$ ",bt.toFixed(2)]}),e.jsx("td",{className:"px-3 py-3 text-center border-r border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-lg font-bold text-sm border-2 ${Ee(ct)}`,children:[ct.toFixed(2),"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${ct>=40?"bg-green-500":ct>=30?"bg-green-400":ct>=20?"bg-yellow-400":ct>=10?"bg-orange-400":"bg-red-400"}`,style:{width:`${Math.min(ct,100)}%`}})})]})}),e.jsxs("td",{className:`px-3 py-3 text-sm text-center font-bold border-r border-gray-200 ${ut(Rt,Math.min(...me),Math.max(...me))}`,children:[Rt.toFixed(2),"%"]}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsxs("span",{className:`px-2 py-1 rounded font-semibold ${ut(Ct,Math.min(...x.map(xe=>(xe.preco_custo||0)/(xe.peso_embalagem||1))),Math.max(...x.map(xe=>(xe.preco_custo||0)/(xe.peso_embalagem||1))),!0)}`,children:["R$ ",Ct.toFixed(2)]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center text-gray-700 border-r border-gray-200",children:e.jsxs("span",{className:`px-2 py-1 rounded font-semibold ${ut(It,Math.min(...x.map(xe=>(xe.preco_venda||0)/(xe.peso_embalagem||1))),Math.max(...x.map(xe=>(xe.preco_venda||0)/(xe.peso_embalagem||1))))}`,children:["R$ ",It.toFixed(2)]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${(Ae.estoque_atual||0)>10?"bg-green-100 text-green-700 border border-green-300":(Ae.estoque_atual||0)>0?"bg-yellow-100 text-yellow-700 border border-yellow-300":"bg-red-100 text-red-700 border border-red-300"}`,children:Ae.estoque_atual||0})})]},Ae.id)})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[e.jsxs("p",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""})," Legenda e Dicas de Interpretao:"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-green-700",children:" Verde:"}),e.jsx("span",{className:"text-gray-700",children:"Valores melhores (menor custo, maior margem/lucro)"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-red-700",children:" Vermelho:"}),e.jsx("span",{className:"text-gray-700",children:"Valores piores (maior custo, menor margem/lucro)"})]}),e.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"font-bold text-yellow-700",children:" Amarelo:"}),e.jsx("span",{className:"text-gray-700",children:"Destaque na linha = um dos melhores produtos"})]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Margem %:"})," (Venda - Custo) / Venda  100"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ROI %:"})," (Lucro / Custo)  100"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lucro R$:"})," Venda - Custo (valor absoluto)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Custo/Venda por kg:"})," Preo dividido pelo peso"]})]})]})]})]})};return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Kr,{className:"h-8 w-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Wm,{className:"h-7 w-7 text-blue-600"}),"Anlise Inteligente de Raes"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Dashboard dinmico com anlises avanadas de margem e vendas"})]}),e.jsxs("button",{onClick:()=>T(),className:"px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Kr,{className:"h-4 w-4"}),"Atualizar"]})]}),F(),I(),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>B("comparacao"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="comparacao"?"bg-blue-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(GA,{className:"h-4 w-4 inline mr-2"})," Comparao Detalhada"]}),e.jsxs("button",{onClick:()=>B("segmento"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="segmento"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(aa,{className:"h-4 w-4 inline mr-2"}),"Margem por Segmento"]}),e.jsxs("button",{onClick:()=>B("marcas"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="marcas"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Ms,{className:"h-4 w-4 inline mr-2"}),"Comparao de Marcas"]}),e.jsxs("button",{onClick:()=>B("ranking"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${C==="ranking"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(xh,{className:"h-4 w-4 inline mr-2"}),"Ranking de Vendas"]})]})}),e.jsxs("div",{className:"p-4",children:[C==="comparacao"&&oe(),C==="resumo"&&F(),C==="segmento"&&k(),C==="marcas"&&M(),C==="ranking"&&z()]})]})]})},a2e=()=>{var Z,D,K;const[t,r]=j.useState(!0),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState([]),[c,d]=j.useState([]),[u,m]=j.useState("resumo"),[x,h]=j.useState(.8),[v,p]=j.useState("porte"),[g,y]=j.useState({}),[f,b]=j.useState({});j.useEffect(()=>{N()},[]);const N=async()=>{try{r(!0);const R=await U.get("/racoes/sugestoes/relatorio-completo");s(R.data),r(!1)}catch(R){console.error("Erro ao carregar relatrio:",R),be.error("Erro ao carregar relatrio de sugestes"),r(!1)}},_=async()=>{try{r(!0);const R=await U.get(`/racoes/sugestoes/duplicatas?threshold_similaridade=${x}`);o(R.data),r(!1)}catch(R){console.error("Erro ao carregar duplicatas:",R),be.error("Erro ao carregar duplicatas"),r(!1)}},w=async()=>{try{r(!0);const R=await U.get("/racoes/sugestoes/padronizar-nomes?limite=50");l(R.data),r(!1)}catch(R){console.error("Erro ao carregar padronizaes:",R),be.error("Erro ao carregar sugestes de padronizao"),r(!1)}},S=async()=>{try{r(!0);const R=await U.get(`/racoes/sugestoes/gaps-estoque?tipo_segmento=${v}`);d(R.data),r(!1)}catch(R){console.error("Erro ao carregar gaps:",R),be.error("Erro ao carregar gaps de estoque"),r(!1)}},C=R=>{m(R),R==="duplicatas"&&n.length===0?_():R==="padronizacao"&&i.length===0?w():R==="gaps"&&c.length===0&&S()},E=async R=>{try{const B=f[R.produto_id],F=(B==null?void 0:B.nome)||R.nome_sugerido;await U.patch(`/produtos/${R.produto_id}`,{nome:F}),be.success("Nome atualizado com sucesso!"),l(I=>I.filter(k=>k.produto_id!==R.produto_id)),b(I=>{const k={...I};return delete k[R.produto_id],k}),N()}catch(B){console.error("Erro ao aplicar padronizao:",B),be.error("Erro ao atualizar nome do produto")}},T=async R=>{try{await U.post("/racoes/sugestoes/duplicatas/ignorar",null,{params:{produto_id_1:R.produto_1.id,produto_id_2:R.produto_2.id}}),be.success("Duplicata ignorada com sucesso!"),o(B=>B.filter(F=>!(F.produto_1.id===R.produto_1.id&&F.produto_2.id===R.produto_2.id))),N()}catch(B){console.error("Erro ao ignorar duplicata:",B),be.error("Erro ao ignorar duplicata")}},q=(R,B)=>{y(F=>({...F,[R]:B}))},A=async(R,B)=>{const F=g[B];if(!F){be.error("Selecione qual produto deseja manter antes de confirmar");return}const I=F==="produto_1"?R.produto_1.id:R.produto_2.id,k=F==="produto_1"?R.produto_2.id:R.produto_1.id;F==="produto_1"?R.produto_1.nome:R.produto_2.nome,F==="produto_1"?R.produto_2.nome:R.produto_1.nome;try{const M=await U.post("/racoes/sugestoes/duplicatas/mesclar",null,{params:{produto_id_manter:I,produto_id_remover:k,transferir_estoque:!0}});be.success(M.data.mensagem),o(z=>z.filter(oe=>!(oe.produto_1.id===R.produto_1.id&&oe.produto_2.id===R.produto_2.id))),y(z=>{const oe={...z};return delete oe[B],oe}),N()}catch(M){console.error("Erro ao mesclar produtos:",M),be.error("Erro ao mesclar produtos")}},O=()=>{if(!a)return null;const{score_saude:R,classificacao:B,cor:F,resumo:I,recomendacoes:k}=a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Score de Sade do Cadastro"}),e.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-700",children:e.jsx(Kr,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center border-8 ${F==="green"?"border-green-500":F==="blue"?"border-blue-500":F==="yellow"?"border-yellow-500":"border-red-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:R}),e.jsx("div",{className:"text-xs text-gray-600",children:"pontos"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-white font-semibold mb-3 ${F==="green"?"bg-green-500":F==="blue"?"bg-blue-500":F==="yellow"?"bg-yellow-500":"bg-red-500"}`,children:B}),e.jsxs("p",{className:"text-gray-700 mb-4",children:[R>=90&&"Parabns! Seu cadastro de raes est excelente.",R>=70&&R<90&&"Seu cadastro est em bom estado, mas h algumas melhorias possveis.",R>=50&&R<70&&"Ateno! Existem vrios pontos de melhoria no cadastro.",R<50&&"CRTICO!  necessrio realizar melhorias urgentes no cadastro."]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(I0,{className:"h-5 w-5 text-orange-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:I.duplicatas_detectadas})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Duplicatas Detectadas"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ap,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:I.nomes_padronizar})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Nomes para Padronizar"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g4,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:I.gaps_criticos})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gaps de Estoque Crticos"})]})]}),k&&k.filter(Boolean).length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"Recomendaes Prioritrias"]}),e.jsx("ul",{className:"space-y-2",children:k.filter(Boolean).map((M,z)=>e.jsxs("li",{className:"flex items-center gap-2 text-blue-800",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),M]},z))})]})]})},V=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Nenhuma duplicata detectada!"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Seu cadastro est livre de produtos duplicados"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"Threshold de Similaridade:"}),e.jsx("input",{type:"range",min:"0.5",max:"1",step:"0.05",value:x,onChange:R=>h(parseFloat(R.target.value)),className:"w-32"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[(x*100).toFixed(0),"%"]})]}),e.jsxs("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Nl,{className:"h-4 w-4"}),"Buscar Duplicatas"]})]}),n.map((R,B)=>e.jsxs("div",{className:"bg-white border-2 border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I0,{className:"h-5 w-5 text-orange-500"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["Similaridade: ",(R.score_similaridade*100).toFixed(0),"%"]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${R.score_similaridade>=.9?"bg-red-100 text-red-700":R.score_similaridade>=.8?"bg-orange-100 text-orange-700":"bg-yellow-100 text-yellow-700"}`,children:R.sugestao_acao})]}),e.jsxs("div",{className:"mb-3 text-sm text-gray-700 bg-blue-50 p-2 rounded",children:[" ",e.jsx("strong",{children:"Clique no produto que deseja MANTER"})," (o outro ser inativado e ter o estoque transferido)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{onClick:()=>q(B,"produto_1"),className:`rounded p-3 cursor-pointer transition-all border-2 ${g[B]==="produto_1"?"bg-green-50 border-green-500 shadow-lg":g[B]==="produto_2"?"bg-red-50 border-red-300 opacity-60":"bg-gray-50 border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Produto 1 (ID: ",R.produto_1.id,")"]}),g[B]==="produto_1"&&e.jsx(Gt,{className:"h-5 w-5 text-green-600"})]}),e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:R.produto_1.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Marca: ",R.produto_1.marca]}),e.jsxs("div",{children:["Preo: R$ ",R.produto_1.preco.toFixed(2)]}),e.jsxs("div",{children:["Estoque: ",R.produto_1.estoque]})]}),g[B]==="produto_1"&&e.jsx("div",{className:"mt-2 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded",children:" ESTE PRODUTO SER MANTIDO"}),g[B]==="produto_2"&&e.jsx("div",{className:"mt-2 text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:" Este produto ser inativado"})]}),e.jsxs("div",{onClick:()=>q(B,"produto_2"),className:`rounded p-3 cursor-pointer transition-all border-2 ${g[B]==="produto_2"?"bg-green-50 border-green-500 shadow-lg":g[B]==="produto_1"?"bg-red-50 border-red-300 opacity-60":"bg-gray-50 border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Produto 2 (ID: ",R.produto_2.id,")"]}),g[B]==="produto_2"&&e.jsx(Gt,{className:"h-5 w-5 text-green-600"})]}),e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:R.produto_2.nome}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["Marca: ",R.produto_2.marca]}),e.jsxs("div",{children:["Preo: R$ ",R.produto_2.preco.toFixed(2)]}),e.jsxs("div",{children:["Estoque: ",R.produto_2.estoque]})]}),g[B]==="produto_2"&&e.jsx("div",{className:"mt-2 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded",children:" ESTE PRODUTO SER MANTIDO"}),g[B]==="produto_1"&&e.jsx("div",{className:"mt-2 text-xs text-red-700 bg-red-100 px-2 py-1 rounded",children:" Este produto ser inativado"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:R.razoes.map((F,I)=>e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:F},I))}),e.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>T(R),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 flex items-center gap-2 text-sm",children:[e.jsx(Yn,{className:"h-4 w-4"}),"Ignorar (No  Duplicata)"]}),g[B]?e.jsxs("button",{onClick:()=>A(R,B),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2 text-sm font-semibold shadow-md",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Confirmar Mesclagem"]}):e.jsxs("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 rounded-md flex items-center gap-2 text-sm cursor-not-allowed",children:[e.jsx(I0,{className:"h-4 w-4"}),"Selecione um Produto"]})]})]},B))]}),G=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Todos os nomes esto padronizados!"})]}):e.jsx("div",{className:"space-y-3",children:i.map((R,B)=>{var F,I,k,M,z;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["ID: ",R.produto_id]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Nome Atual:"}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 p-2 rounded",children:R.nome_atual})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-green-700 mb-1",children:"Nome Sugerido:"}),(F=f[R.produto_id])!=null&&F.editando?e.jsx("input",{type:"text",value:((I=f[R.produto_id])==null?void 0:I.nome)||R.nome_sugerido,onChange:oe=>b(W=>({...W,[R.produto_id]:{editando:!0,nome:oe.target.value}})),className:"w-full text-sm text-green-900 bg-green-50 p-2 rounded font-medium border-2 border-blue-400 focus:outline-none focus:border-blue-600",autoFocus:!0}):e.jsx("div",{className:"text-sm text-green-900 bg-green-50 p-2 rounded font-medium",children:((k=f[R.produto_id])==null?void 0:k.nome)||R.nome_sugerido})]})]}),e.jsx("div",{className:"ml-4 flex items-center gap-2",children:e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[(R.confianca*100).toFixed(0),"% confiana"]})})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-3",children:[e.jsx("strong",{children:"Razo:"})," ",R.razao]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>E(R),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm flex items-center gap-1",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Aplicar ",(M=f[R.produto_id])!=null&&M.nome?"Edio":"Sugesto"]}),(z=f[R.produto_id])!=null&&z.editando?e.jsxs("button",{onClick:()=>b(oe=>{const W={...oe};return delete W[R.produto_id],W}),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 text-sm flex items-center gap-1",children:[e.jsx(Yn,{className:"h-4 w-4"}),"Cancelar Edio"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(oe=>{var W;return{...oe,[R.produto_id]:{editando:!0,nome:((W=f[R.produto_id])==null?void 0:W.nome)||R.nome_sugerido}}}),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center gap-1",children:[e.jsx(Ap,{className:"h-4 w-4"}),"Editar"]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm flex items-center gap-1",children:[e.jsx(Yn,{className:"h-4 w-4"}),"Ignorar"]})]})]})]},B)})}),L=()=>t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Carregando..."}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 font-semibold",children:"Nenhum gap crtico de estoque!"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mr-2",children:"Analisar por:"}),e.jsxs("select",{value:v,onChange:R=>p(R.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"porte",children:"Porte"}),e.jsx("option",{value:"fase",children:"Fase"}),e.jsx("option",{value:"sabor",children:"Sabor"}),e.jsx("option",{value:"linha",children:"Linha"}),e.jsx("option",{value:"especie",children:"Espcie"})]})]}),e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Nl,{className:"h-4 w-4"}),"Analisar"]})]}),c.map((R,B)=>e.jsxs("div",{className:`rounded-lg p-4 border-2 ${R.importancia==="Alta"?"bg-red-50 border-red-300":R.importancia==="Mdia"?"bg-yellow-50 border-yellow-300":"bg-gray-50 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Sa,{className:`h-5 w-5 ${R.importancia==="Alta"?"text-red-600":R.importancia==="Mdia"?"text-yellow-600":"text-gray-600"}`}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:R.segmento_valor})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[R.produtos_sem_estoque," de ",R.total_produtos," produtos sem estoque (",R.percentual_sem_estoque,"%)"]})]}),e.jsx("span",{className:`px-3 py-1 rounded text-xs font-semibold ${R.importancia==="Alta"?"bg-red-600 text-white":R.importancia==="Mdia"?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:R.importancia})]}),e.jsx("div",{className:"bg-white bg-opacity-50 rounded p-3 mb-3",children:e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Faturamento Histrico (90 dias):"})," R$ ",R.faturamento_historico.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsxs("div",{className:`text-sm font-medium ${R.importancia==="Alta"?"text-red-800":R.importancia==="Mdia"?"text-yellow-800":"text-gray-800"}`,children:[" ",R.sugestao]})]},B))]});return t&&u==="resumo"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Kr,{className:"h-8 w-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Lt,{className:"h-7 w-7 text-blue-600"}),"Sugestes Inteligentes"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Otimize seu cadastro de raes com sugestes automticas"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2",children:[e.jsxs("button",{onClick:()=>C("resumo"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="resumo"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Gt,{className:"h-4 w-4 inline mr-2"}),"Resumo Geral"]}),e.jsxs("button",{onClick:()=>C("duplicatas"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="duplicatas"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(I0,{className:"h-4 w-4 inline mr-2"}),"Duplicatas",((Z=a==null?void 0:a.resumo)==null?void 0:Z.duplicatas_detectadas)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-orange-500 text-white text-xs rounded-full",children:a.resumo.duplicatas_detectadas})]}),e.jsxs("button",{onClick:()=>C("padronizacao"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="padronizacao"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(Ap,{className:"h-4 w-4 inline mr-2"}),"Padronizao",((D=a==null?void 0:a.resumo)==null?void 0:D.nomes_padronizar)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:a.resumo.nomes_padronizar})]}),e.jsxs("button",{onClick:()=>C("gaps"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${u==="gaps"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(g4,{className:"h-4 w-4 inline mr-2"}),"Gaps de Estoque",((K=a==null?void 0:a.resumo)==null?void 0:K.gaps_criticos)>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:a.resumo.gaps_criticos})]})]})}),e.jsxs("div",{className:"p-4",children:[u==="resumo"&&O(),u==="duplicatas"&&V(),u==="padronizacao"&&G(),u==="gaps"&&L()]})]})]})};function s2e(){const t=Ht(),[r,a]=j.useState("dashboard"),[s,n]=j.useState([]),[o,i]=j.useState(!1),[l,c]=j.useState(new Set),[d,u]=j.useState({total:0,limite:50,offset:0}),[m,x]=j.useState(""),h=[{value:"",label:"Todas as espcies"},{value:"dog",label:"Ces"},{value:"cat",label:"Gatos"},{value:"bird",label:"Pssaros"},{value:"rodent",label:"Roedores"},{value:"fish",label:"Peixes"}];j.useEffect(()=>{v()},[]),j.useEffect(()=>{r==="alertas"&&p()},[m,r]);const v=async()=>{try{const N=await U.get("/produtos/racao/alertas",{params:{limite:1,offset:0}});u(_=>({..._,total:N.data.total}))}catch(N){console.error("Erro ao carregar contagem de alertas:",N)}},p=async()=>{var N,_,w,S;i(!0);try{const C=localStorage.getItem("access_token");console.log(" [AlertasRacao] Iniciando carregamento de alertas",{hasToken:!!C,tokenPreview:C?`${C.substring(0,20)}...`:"NO TOKEN",especieFiltro:m});const E={limite:50,offset:0};m&&(E.especie=m),console.log(" [AlertasRacao] Chamando: /produtos/racao/alertas",E);const T=await U.get("/produtos/racao/alertas",{params:E});console.log(" [AlertasRacao] Alertas carregados:",{total:T.data.total,items:(N=T.data.items)==null?void 0:N.length}),n(T.data.items||[]),u({total:T.data.total,limite:T.data.limite,offset:T.data.offset})}catch(C){console.error(" [AlertasRacao] Erro ao carregar alertas:",{message:C.message,status:(_=C.response)==null?void 0:_.status,data:(w=C.response)==null?void 0:w.data,config:C.config}),((S=C.response)==null?void 0:S.status)===403?Ue.error("Acesso negado. Verifique suas permisses ou faa login novamente."):Ue.error("Erro ao carregar alertas de raes")}finally{i(!1)}},g=async N=>{c(_=>new Set(_).add(N));try{const _=await U.post(`/produtos/${N}/classificar-ia`,null,{params:{forcar:!0}});Ue.success(`${_.data.campos_atualizados.length} campos classificados! Score: ${_.data.confianca.score}%`,{duration:4e3}),n(w=>w.filter(S=>S.id!==N)),u(w=>({...w,total:w.total-1}))}catch(_){console.error("Erro ao classificar produto:",_),Ue.error("Erro ao classificar produto")}finally{c(_=>{const w=new Set(_);return w.delete(N),w})}},y=async()=>{i(!0);try{const N=await U.post("/produtos/classificar-lote",null,{params:{apenas_sem_classificacao:!0}});Ue.success(`${N.data.sucessos} produtos classificados com sucesso!`,{duration:5e3}),N.data.erros>0&&Ue.error(`${N.data.erros} produtos com erro na classificao`),await p()}catch(N){console.error("Erro ao classificar lote:",N),Ue.error("Erro ao classificar produtos em lote")}finally{i(!1)}},f=N=>N>=75?{cor:"text-yellow-600 bg-yellow-50",texto:"Quase completo"}:N>=50?{cor:"text-orange-600 bg-orange-50",texto:"Incompleto"}:{cor:"text-red-600 bg-red-50",texto:"Muito incompleto"},b=N=>({porte_animal:"Porte",fase_publico:"Fase",sabor_proteina:"Sabor/Protena",peso_embalagem:"Peso"})[N]||N;return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ea,{className:"w-8 h-8 text-amber-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Sistema Inteligente de Raes"})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>a("dashboard"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="dashboard"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wm,{className:"w-4 h-4"}),"Dashboard de Anlise"]})}),e.jsx("button",{onClick:()=>a("alertas"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="alertas"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4"}),"Alertas de Classificao",d.total>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:d.total})]})}),e.jsx("button",{onClick:()=>a("sugestoes"),className:`px-6 py-3 font-medium text-sm transition-colors relative ${r==="sugestoes"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(VA,{className:"w-4 h-4"}),"Sugestes Inteligentes"]})})]})]}),r==="dashboard"&&e.jsx(r2e,{}),r==="sugestoes"&&e.jsx(a2e,{}),r==="alertas"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-gray-600",children:"Produtos classificados como rao mas sem informaes completas"}),e.jsxs("button",{onClick:y,disabled:o||s.length===0,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:[e.jsx(Kr,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Classificar Todos"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por:"}),e.jsx("select",{value:m,onChange:N=>x(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:h.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))}),m&&e.jsx("button",{onClick:()=>x(""),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Limpar filtro"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Alertas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:d.total})]}),e.jsx(ea,{className:"w-10 h-10 text-red-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-amber-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nesta Pgina"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.length})]}),e.jsx(x9,{className:"w-10 h-10 text-amber-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completude Mdia"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[s.length>0?Math.round(s.reduce((N,_)=>N+_.completude,0)/s.length):0,"%"]})]}),e.jsx(Gt,{className:"w-10 h-10 text-green-500 opacity-20"})]})})]}),o&&s.length===0&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Kr,{className:"w-8 h-8 animate-spin text-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando alertas..."})]}),!o&&s.length===0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx(Gt,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Nenhum alerta encontrado!"}),e.jsx("p",{className:"text-green-700",children:"Todas as raes cadastradas possuem informaes completas."})]}),s.length>0&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria / Marca"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campos Faltantes"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completude"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(N=>{var S;const _=f(N.completude),w=l.has(N.id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 font-mono",children:N.codigo}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("p",{className:"font-medium",children:N.nome}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[N.classificacao_racao&&e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:N.classificacao_racao}),N.especies_indicadas&&e.jsx("span",{className:"text-xs text-white bg-indigo-600 px-2 py-1 rounded",children:((S=h.find(C=>C.value===N.especies_indicadas))==null?void 0:S.label)||N.especies_indicadas})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700",children:N.categoria||"-"}),e.jsx("div",{className:"text-xs text-gray-500",children:N.marca||"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:N.campos_faltantes.map(C=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:[e.jsx(Yn,{className:"w-3 h-3"}),b(C)]},C))})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_.cor}`,children:[N.completude,"%"]})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>g(N.id),disabled:w||!N.auto_classificar_ativo,className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"w-4 h-4 animate-spin"}),"Classificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kr,{className:"w-4 h-4"}),"Classificar IA"]})}),e.jsxs("button",{onClick:()=>t(`/produtos/${N.id}/editar?aba=7`),className:"inline-flex items-center gap-2 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition",title:"Editar produto manualmente",children:[e.jsx(Ap,{className:"w-4 h-4"}),"Editar"]})]}),!N.auto_classificar_ativo&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-class. desativada"})]})]},N.id)})})]})})})]})]})}function n2e(){const[t,r]=j.useState("linhas"),[a,s]=j.useState({}),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState({nome:"",descricao:"",ordem:0,ativo:!0}),[u,m]=j.useState({peso_kg:0,descricao:"",ordem:0,ativo:!0}),x=[{id:"linhas",nome:"Linhas de Rao",endpoint:"/opcoes-racao/linhas",icon:""},{id:"portes",nome:"Portes",endpoint:"/opcoes-racao/portes",icon:""},{id:"fases",nome:"Fases/Pblico",endpoint:"/opcoes-racao/fases",icon:""},{id:"tratamentos",nome:"Tratamentos",endpoint:"/opcoes-racao/tratamentos",icon:""},{id:"sabores",nome:"Sabores/Protenas",endpoint:"/opcoes-racao/sabores",icon:""},{id:"apresentacoes",nome:"Apresentaes (Peso)",endpoint:"/opcoes-racao/apresentacoes",icon:""}],h=x.find(N=>N.id===t);j.useEffect(()=>{v()},[t]);const v=async()=>{o(!0);try{const N=await U.get(h.endpoint,{params:{apenas_ativos:!1}});s(_=>({..._,[t]:N.data}))}catch(N){console.error("Erro ao carregar dados:",N),Ue.error(`Erro ao carregar ${h.nome.toLowerCase()}`)}finally{o(!1)}},p=()=>{d({nome:"",descricao:"",ordem:0,ativo:!0}),m({peso_kg:0,descricao:"",ordem:0,ativo:!0}),l(null)},g=N=>{l(N.id),t==="apresentacoes"?m({peso_kg:N.peso_kg,descricao:N.descricao||"",ordem:N.ordem||0,ativo:N.ativo}):d({nome:N.nome,descricao:N.descricao||"",ordem:N.ordem||0,ativo:N.ativo})},y=async()=>{var N,_;try{const w=t==="apresentacoes"?u:c;i?(await U.put(`${h.endpoint}/${i}`,w),Ue.success("Atualizado com sucesso!")):(await U.post(h.endpoint,w),Ue.success("Criado com sucesso!")),p(),v()}catch(w){console.error("Erro ao salvar:",w),Ue.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao salvar")}},f=async N=>{if(confirm("Tem certeza que deseja inativar este item?"))try{await U.delete(`${h.endpoint}/${N}`),Ue.success("Inativado com sucesso!"),v()}catch(_){console.error("Erro ao deletar:",_),Ue.error("Erro ao inativar")}},b=a[t]||[];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(mh,{className:"w-8 h-8 text-indigo-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Opes de Classificao de Raes"})]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie os valores disponveis para classificao de produtos de rao"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex overflow-x-auto",children:x.map(N=>e.jsxs("button",{onClick:()=>{r(N.id),p()},className:`
                  flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 whitespace-nowrap
                  ${t===N.id?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx("span",{className:"text-xl",children:N.icon}),N.nome]},N.id))})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:i?"Editar":"Adicionar Novo"}),t==="apresentacoes"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (kg) *"}),e.jsx("input",{type:"number",step:"0.001",value:u.peso_kg,onChange:N=>m({...u,peso_kg:parseFloat(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("input",{type:"text",value:u.descricao,onChange:N=>m({...u,descricao:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ex: 15kg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:u.ordem,onChange:N=>m({...u,ordem:parseInt(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo-peso",checked:u.ativo,onChange:N=>m({...u,ativo:N.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo-peso",className:"text-sm text-gray-700",children:"Ativo"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:c.nome,onChange:N=>d({...c,nome:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Ex: ${t==="linhas"?"Premium":t==="portes"?"Pequeno":"Filhote"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:c.descricao,onChange:N=>d({...c,descricao:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"2",placeholder:"Descrio opcional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:c.ordem,onChange:N=>d({...c,ordem:parseInt(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:c.ativo,onChange:N=>d({...c,ativo:N.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs("button",{onClick:y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[e.jsx(Ym,{className:"w-4 h-4"}),i?"Atualizar":"Adicionar"]}),i&&e.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:e.jsx(qt,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:[h.nome," Cadastrados (",b.length,")"]}),n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(Nn,{className:"w-16 h-16 mx-auto"})}),e.jsx("p",{className:"text-gray-600",children:"Nenhum item cadastrado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Use o formulrio ao lado para adicionar"})]}):e.jsx("div",{className:"space-y-2",children:b.map(N=>e.jsxs("div",{className:`
                        flex items-center justify-between p-4 border rounded-lg transition
                        ${i===N.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}
                        ${!N.ativo&&"opacity-50"}
                      `,children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:h.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t==="apresentacoes"?`${N.peso_kg}kg${N.descricao?` - ${N.descricao}`:""}`:N.nome}),N.descricao&&t!=="apresentacoes"&&e.jsx("p",{className:"text-sm text-gray-500",children:N.descricao})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["Ordem: ",N.ordem]}),!N.ativo&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Inativo"}),e.jsx("button",{onClick:()=>g(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Editar",children:e.jsx(T2,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Inativar",children:e.jsx(Fo,{className:"w-4 h-4"})})]})]},N.id))})]})})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jc,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Dica"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Os valores cadastrados aqui sero usados no cadastro de produtos e na classificao automtica por IA. Mantenha ativos apenas os valores que voc utiliza no seu negcio."})]})]})})]})}const o2e=()=>{const[t,r]=j.useState(null),[a,s]=j.useState(!1),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState(!1),[u,m]=j.useState([]),[x,h]=j.useState(null),[v,p]=j.useState("upload"),g=S=>{var E;const C=(E=S.target.files)==null?void 0:E[0];C&&r(C)},y=async()=>{var C,E;if(!t){alert("Selecione um arquivo primeiro");return}const S=new FormData;S.append("arquivo",t),s(!0);try{const T=await U.post("/ia/extrato/upload",S,{headers:{"Content-Type":"multipart/form-data"}});o(T.data),alert(`Upload concludo! ${T.data.categorias_aplicadas} categorias aplicadas automaticamente.`)}catch(T){console.error("Erro no upload:",T);const q=((E=(C=T.response)==null?void 0:C.data)==null?void 0:E.detail)||T.message;alert("Erro ao processar arquivo: "+q)}finally{s(!1)}},f=async()=>{d(!0);try{const S=await U.get("/ia/extrato/pendentes");l(S.data)}catch(S){console.error("Erro ao carregar pendentes:",S),alert("Erro ao carregar lanamentos pendentes")}finally{d(!1)}},b=async S=>{try{await U.post("/ia/extrato/validar",{lancamento_id:S,aprovado:!0}),alert("Lanamento aprovado!"),f()}catch(C){console.error("Erro ao aprovar:",C),alert("Erro ao aprovar lanamento")}},N=async(S,C)=>{try{await U.post("/ia/extrato/validar",{lancamento_id:S,aprovado:!1,categoria_correta_id:C}),alert("Lanamento corrigido e padro aprendido!"),f()}catch(E){console.error("Erro ao corrigir:",E),alert("Erro ao corrigir lanamento")}},_=async()=>{try{const S=await U.get("/ia/extrato/padroes");m(S.data)}catch(S){console.error("Erro ao carregar padres:",S),alert("Erro ao carregar padres aprendidos")}},w=async()=>{try{const S=await U.get("/ia/extrato/estatisticas");h(S.data)}catch(S){console.error("Erro ao carregar estatsticas:",S),alert("Erro ao carregar estatsticas")}};return pe.useEffect(()=>{v==="validacao"?f():v==="padroes"?_():v==="estatisticas"&&w()},[v]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>p("upload"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="upload"?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ph,{size:18}),"Upload de Extrato"]}),e.jsxs("button",{onClick:()=>p("validacao"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="validacao"?"bg-orange-100 text-orange-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Lt,{size:18}),"Validao (",i.length,")"]}),e.jsxs("button",{onClick:()=>p("padroes"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="padroes"?"bg-blue-100 text-blue-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Hm,{size:18}),"Padres IA"]}),e.jsxs("button",{onClick:()=>p("estatisticas"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="estatisticas"?"bg-purple-100 text-purple-700 font-medium":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(aa,{size:18}),"Estatsticas"]})]})}),v==="upload"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ph,{className:"text-green-600"}),"Upload de Extrato Bancrio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(bs,{className:"mx-auto mb-4 text-gray-400",size:48}),e.jsx("p",{className:"mb-2 text-gray-600",children:"Arraste um arquivo ou clique para selecionar"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:" Formatos: Excel (.xlsx, .xls), CSV (.csv), PDF (.pdf), OFX (.ofx)"}),e.jsx("input",{type:"file",onChange:g,accept:".xlsx,.xls,.csv,.pdf,.ofx",className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer",children:"Selecionar Arquivo"}),t&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-green-700 font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-green-600",children:[(t.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{onClick:y,disabled:!t||a,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:a?"Processando...":"Processar Extrato"}),n&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:" Resultado do Processamento"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[" Total de lanamentos: ",e.jsx("span",{className:"font-bold",children:n.total_lancamentos})]}),e.jsxs("p",{children:[" Categorizados automaticamente: ",e.jsx("span",{className:"font-bold text-green-700",children:n.categorias_aplicadas})]}),e.jsxs("p",{children:[" Pendentes de validao: ",e.jsx("span",{className:"font-bold text-orange-700",children:n.pendentes_validacao})]})]})]})]})]}),v==="validacao"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"text-orange-600"}),"Lanamentos Pendentes de Validao (",i.length,")"]}),c?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando..."}):i.length===0?e.jsxs("div",{className:"text-center text-gray-600 py-8",children:[e.jsx(Gt,{className:"mx-auto mb-2 text-green-500",size:48}),e.jsx("p",{children:"Nenhum lanamento pendente! "})]}):e.jsx("div",{className:"space-y-3",children:i.map(S=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:S.descricao}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Data: ",new Date(S.data).toLocaleDateString("pt-BR")," | Valor: R$ ",Math.abs(S.valor).toFixed(2)]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Sugesto IA: ",S.categoria_sugerida]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Confiana: ",(S.confianca*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>b(S.id),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",title:"Aprovar categoria sugerida",children:e.jsx(Gt,{size:16})}),e.jsx("button",{onClick:()=>{const C=prompt("Digite a categoria correta:");C&&N(S.id,C)},className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 text-sm",title:"Corrigir categoria",children:e.jsx(Yn,{size:16})})]})]})},S.id))})]}),v==="padroes"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Hm,{className:"text-blue-600"}),"Padres Aprendidos pela IA"]}),u.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Nenhum padro aprendido ainda"}):e.jsx("div",{className:"space-y-3",children:u.map((S,C)=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["Padro: ",S.descricao_padrao]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Categoria: ",S.categoria]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:[" ",S.vezes_usado," vezes usado"]}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:["Confiana: ",(S.confianca*100).toFixed(0),"%"]})]})]})})},C))})]}),v==="estatisticas"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(aa,{className:"text-purple-600"}),"Estatsticas do Sistema IA"]}),x?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Padres"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:x.total_padroes})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taxa de Acerto"}),e.jsxs("p",{className:"text-3xl font-bold text-green-900 mt-1",children:[(x.taxa_acerto*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Confiana Mdia"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:[(x.confianca_media*100).toFixed(0),"%"]})]})]}):e.jsx("p",{className:"text-center text-gray-600 py-8",children:"Carregando estatsticas..."})]})})]})},i2e=({dados:t,periodo:r})=>{const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null),[c,d]=j.useState(null);j.useEffect(()=>{t&&(m(),u())},[t,r]);const u=async()=>{try{const y=await U.get("/ia/dre/indices-mercado",{params:{setor:"pet_shop"}});d(y.data)}catch(y){console.error("Erro ao carregar ndices:",y)}},m=async()=>{o(!0);try{await new Promise(f=>setTimeout(f,1e3));const y=v(t);if(s(y),r.mes>1){const f=await x(r);f&&l(h(t,f))}}catch(y){console.error("Erro ao carregar anlise:",y)}finally{o(!1)}},x=async y=>{try{const f=y.mes===1?12:y.mes-1,b=y.mes===1?y.ano-1:y.ano;return(await U.get("/financeiro/dre",{params:{ano:b,mes:f}})).data}catch{return null}},h=(y,f)=>{const b=(N,_)=>!_||_===0?null:(N-_)/Math.abs(_)*100;return{receita:{atual:y.receita_bruta||0,anterior:f.receita_bruta||0,variacao:b(y.receita_bruta,f.receita_bruta)},lucro:{atual:y.lucro_liquido||0,anterior:f.lucro_liquido||0,variacao:b(y.lucro_liquido,f.lucro_liquido)},despesas:{atual:y.total_despesas||0,anterior:f.total_despesas||0,variacao:b(y.total_despesas,f.total_despesas)},margem:{atual:y.margem_liquida||0,anterior:f.margem_liquida||0,variacao:b(y.margem_liquida,f.margem_liquida)}}},v=y=>{const f=[],b=[],N=[],_=y.margem_liquida||0;_<5?(N.push({tipo:"critico",titulo:"Margem lquida crtica",descricao:`Margem de apenas ${_.toFixed(1)}%. Ideal: acima de 10%`,icon:ea}),b.push({prioridade:"alta",titulo:"Urgente: Revisar estrutura de custos",descricao:"Margem muito baixa. Considere: aumentar preos, reduzir custos fixos, ou renegociar com fornecedores."})):_<10?f.push({tipo:"atencao",titulo:"Margem lquida abaixo do ideal",descricao:`${_.toFixed(1)}% - H espao para melhoria`,icon:Sa}):f.push({tipo:"positivo",titulo:"Margem lquida saudvel",descricao:`${_.toFixed(1)}% - Acima da mdia do setor`,icon:Gt});const w=y.receita_bruta||0,S=y.total_despesas||0;S>w*.8&&N.push({tipo:"atencao",titulo:"Despesas elevadas",descricao:`Despesas representam ${(S/w*100).toFixed(0)}% da receita`,icon:ea});const C=y.cmv||0,E=(w-C)/w*100;E<30&&b.push({prioridade:"media",titulo:"Revisar custo dos produtos",descricao:`Margem bruta de ${E.toFixed(1)}%. Considere negociar com fornecedores ou ajustar preos.`});const T=y.lucro_liquido||0;T>0?f.push({tipo:"positivo",titulo:"Resultado positivo",descricao:`Lucro de R$ ${T.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:aa}):(N.push({tipo:"critico",titulo:"Prejuzo no perodo",descricao:`Resultado negativo de R$ ${Math.abs(T).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:Sa}),b.push({prioridade:"alta",titulo:"Plano de recuperao necessrio",descricao:"Anlise detalhada de custos e reviso de estratgia de precificao urgente."}));let q=50;return _>10&&(q+=20),_>5&&_<=10&&(q+=10),T>0&&(q+=15),E>30&&(q+=15),S<w*.7&&(q+=10),{insights:f,recomendacoes:b,alertas:N,score:Math.min(q,100)}},p=y=>{let f="red",b="Crtico";return y>=80?(f="green",b="Excelente"):y>=60?(f="yellow",b="Bom"):y>=40&&(f="orange",b="Regular"),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(GA,{className:"text-purple-600"}),"Score de Sade Financeira"]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:f==="green"?"#10b981":f==="yellow"?"#fbbf24":f==="orange"?"#f59e0b":"#ef4444",strokeWidth:"12",fill:"none",strokeDasharray:`${y/100*351.86} 351.86`,className:"transition-all duration-1000"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:y})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800 mb-1",children:b}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y>=80&&"Sua sade financeira est tima! Continue assim.",y>=60&&y<80&&"Boa sade financeira. Pequenos ajustes podem melhorar.",y>=40&&y<60&&"Situao estvel, mas requer ateno.",y<40&&"Ateno! Medidas corretivas so necessrias."]})]})]})]})},g=()=>{if(!c||!t)return null;const y=c.benchmarks,f=t.receita_liquida||0,b=f>0?(t.cmv||0)/f*100:0,N=t.margem_bruta||0,_=t.margem_liquida||0,w=f>0?(t.despesas_admin||0)/f*100:0,S=f>0?(t.total_despesas||0)/f*100:0,C=[{nome:"CMV",seu:b,idealMin:y.cmv.min,idealMax:y.cmv.max,inverter:!0,unidade:"%",cor:b<=y.cmv.max?"green":b<=y.cmv.max*1.1?"yellow":"red"},{nome:"Margem Bruta",seu:N,idealMin:y.margem_bruta.min,idealMax:y.margem_bruta.max,inverter:!1,unidade:"%",cor:N>=y.margem_bruta.min?"green":N>=y.margem_bruta.min*.9?"yellow":"red"},{nome:"Margem Lquida",seu:_,idealMin:y.margem_liquida.min,idealMax:y.margem_liquida.max,inverter:!1,unidade:"%",cor:_>=y.margem_liquida.min?"green":_>=y.margem_liquida.min*.8?"yellow":"red"},{nome:"Despesas Admin",seu:w,idealMin:0,idealMax:y.despesas_admin.max,inverter:!0,unidade:"%",cor:w<=y.despesas_admin.max?"green":w<=y.despesas_admin.max*1.2?"yellow":"red"},{nome:"Despesas Totais",seu:S,idealMin:0,idealMax:y.despesas_totais.max,inverter:!0,unidade:"%",cor:S<=y.despesas_totais.max?"green":S<=y.despesas_totais.max*1.2?"yellow":"red"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Wm,{className:"text-indigo-600"}),"Seus Indicadores vs Mercado Pet Shop"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(P2,{size:16}),e.jsxs("span",{children:["Fonte: ",c.fonte]})]})]}),e.jsx("div",{className:"space-y-4",children:C.map((E,T)=>{const q=E.idealMax-E.idealMin;E.idealMin+q/2;const A=E.seu>=E.idealMin&&E.seu<=E.idealMax;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:E.nome}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`text-lg font-bold ${E.cor==="green"?"text-green-600":E.cor==="yellow"?"text-yellow-600":"text-red-600"}`,children:[E.seu.toFixed(1),E.unidade]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Ideal: ",E.idealMin>0?`${E.idealMin.toFixed(0)}-`:"",E.idealMax.toFixed(0),E.unidade]})]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-200 rounded-full overflow-hidden",children:[e.jsx("div",{className:"absolute h-full bg-green-200",style:{left:`${E.idealMin/100*100}%`,width:`${q/100*100}%`}}),e.jsx("div",{className:"absolute h-full w-2 bg-gray-800 shadow-lg z-10",style:{left:`${Math.min(Math.max(E.seu/100*100,0),100)}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Voc"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm",children:A?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Dentro da faixa ideal!"})]}):E.seu<E.idealMin?e.jsxs(e.Fragment,{children:[e.jsx(Sa,{size:16,className:"text-orange-600"}),e.jsxs("span",{className:"text-orange-600",children:["Abaixo do ideal (",(E.idealMin-E.seu).toFixed(1),E.unidade," a menos)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{size:16,className:"text-red-600"}),e.jsxs("span",{className:"text-red-600",children:["Acima do ideal (+",(E.seu-E.idealMax).toFixed(1),E.unidade,")"]})]})})]},T)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:" Faixa verde = Ideal para pet shops | Barra preta = Seu valor atual"})})]})};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Gerando anlise inteligente..."})]})}):a?e.jsxs("div",{className:"space-y-6",children:[p(a.score),g(),i&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(zi,{className:"text-blue-600"}),"Comparao com Perodo Anterior"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i).map(([y,f])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1 capitalize",children:y}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 mb-2",children:["R$ ",f.atual.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),f.variacao!==null&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${f.variacao>0?"text-green-600":"text-red-600"}`,children:[f.variacao>0?e.jsx(h9,{size:16}):e.jsx(p9,{size:16}),e.jsxs("span",{className:"font-semibold",children:[Math.abs(f.variacao).toFixed(1),"%"]})]})]},y))})]}),a.alertas.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ea,{className:"text-orange-600"}),"Pontos de Ateno"]}),e.jsx("div",{className:"space-y-3",children:a.alertas.map((y,f)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${y.tipo==="critico"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y.icon,{size:20,className:y.tipo==="critico"?"text-red-600":"text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:y.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.descricao})]})]})},f))})]}),a.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Wm,{className:"text-indigo-600"}),"Insights Inteligentes"]}),e.jsx("div",{className:"space-y-3",children:a.insights.map((y,f)=>e.jsx("div",{className:`p-4 rounded-lg ${y.tipo==="positivo"?"bg-green-50":y.tipo==="atencao"?"bg-yellow-50":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y.icon,{size:20,className:y.tipo==="positivo"?"text-green-600":y.tipo==="atencao"?"text-yellow-600":"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:y.titulo}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.descricao})]})]})},f))})]}),a.recomendacoes.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(VA,{className:"text-yellow-600"}),"Recomendaes Estratgicas"]}),e.jsx("div",{className:"space-y-3",children:a.recomendacoes.map((y,f)=>e.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${y.prioridade==="alta"?"bg-red-100 text-red-700":y.prioridade==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:y.prioridade.toUpperCase()}),e.jsx("p",{className:"font-semibold text-gray-800",children:y.titulo})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y.descricao})]}),e.jsx(ha,{className:"text-purple-600 flex-shrink-0 ml-3",size:24})]})},f))})]})]}):e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(Brain,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600",children:"No h dados suficientes para anlise"})]})},l2e=()=>{var S,C,E,T,q,A,O;const[t,r]=j.useState("demonstrativo"),[a,s]=j.useState(!1),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c]=j.useState([{id:"loja_fisica",nome:"Loja Fsica",cor:"blue"},{id:"mercado_livre",nome:"Mercado Livre",cor:"yellow"},{id:"shopee",nome:"Shopee",cor:"orange"},{id:"amazon",nome:"Amazon",cor:"green"}]),[d,u]=j.useState(["loja_fisica"]),m=()=>{const V=new Date,G=V.getFullYear(),L=String(V.getMonth()+1).padStart(2,"0");return`${G}-${L}`},[x,h]=j.useState(m());j.useEffect(()=>{v()},[]);const v=async()=>{var V,G;o(!0);try{const[L,Z]=x.split("-"),D=d.join(","),K=await U.get("/financeiro/dre/canais",{params:{ano:L,mes:Z,canais:D}});l(K.data)}catch(L){console.error("Erro ao carregar DRE:",L),Ue.error("Erro ao carregar DRE: "+(((G=(V=L.response)==null?void 0:V.data)==null?void 0:G.detail)||L.message))}finally{o(!1)}},p=V=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(V||0),g=V=>`${(V||0).toFixed(2)}%`,y=(V,G)=>!G||G===0?0:V/G*100,f=V=>{u(G=>G.includes(V)?G.filter(Z=>Z!==V):[...G,V])},b=()=>{u([])};j.useEffect(()=>{i&&v()},[d]);const N=V=>{const G=new Date;let L;switch(V){case"mes_atual":L=m();break;case"mes_anterior":const Z=new Date(G.getFullYear(),G.getMonth()-1,1);L=`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`;break;case"ano_atual":L=`${G.getFullYear()}-01`;break;default:return}h(L),setTimeout(()=>v(),100)},_=async()=>{try{const[V,G]=x.split("-");Ue.loading("Gerando PDF...",{id:"pdf"});const L=await U.get("/financeiro/dre/export/pdf",{params:{ano:V,mes:G},responseType:"blob"}),Z=window.URL.createObjectURL(new Blob([L.data])),D=document.createElement("a");D.href=Z,D.setAttribute("download",`dre_${G}_${V}.pdf`),document.body.appendChild(D),D.click(),D.remove(),Ue.success(" PDF exportado com sucesso!",{id:"pdf"})}catch(V){console.error("Erro ao exportar PDF:",V),Ue.error("Erro ao exportar PDF",{id:"pdf"})}},w=async()=>{try{const[V,G]=x.split("-");Ue.loading("Gerando Excel...",{id:"excel"});const L=await U.get("/financeiro/dre/export/excel",{params:{ano:V,mes:G},responseType:"blob"}),Z=window.URL.createObjectURL(new Blob([L.data])),D=document.createElement("a");D.href=Z,D.setAttribute("download",`dre_${G}_${V}.xlsx`),document.body.appendChild(D),D.click(),D.remove(),Ue.success(" Excel exportado com sucesso!",{id:"excel"})}catch(V){console.error("Erro ao exportar Excel:",V),Ue.error("Erro ao exportar Excel",{id:"excel"})}};return n&&!i?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Kr,{className:"animate-spin mx-auto mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"Carregando DRE..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" DRE - Demonstrao do Resultado"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Anlise gerencial de receitas, custos e lucro"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl",title:"Consultar Especialista IA",children:[e.jsx(UA,{size:20}),e.jsx("span",{className:"font-medium",children:"Chat IA"}),e.jsx(jo,{size:16,className:"animate-pulse"})]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",title:"Exportar para PDF",children:[e.jsx(bs,{size:18}),"PDF"]}),e.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",title:"Exportar para Excel",children:[e.jsx(Km,{size:18}),"Excel"]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("demonstrativo"),className:`${t==="demonstrativo"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(bs,{size:18}),"Demonstrativo"]}),e.jsxs("button",{onClick:()=>r("extrato"),className:`${t==="extrato"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(ph,{size:18}),"Extrato Bancrio",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full font-bold",children:"IA"})]}),e.jsxs("button",{onClick:()=>r("analise"),className:`${t==="analise"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors`,children:[e.jsx(Hm,{size:18}),"Anlise Inteligente",e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded-full font-bold",children:"EM BREVE"})]})]})}),t==="demonstrativo"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N("mes_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ms Atual"}),e.jsx("button",{onClick:()=>N("mes_anterior"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ms Anterior"}),e.jsx("button",{onClick:()=>N("ano_atual"),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Ano Atual"})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perodo (Ms/Ano)"}),e.jsx("input",{type:"month",value:x,onChange:V=>h(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Kr,{size:18}),"Atualizar"]})})]})}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Receita Bruta"}),e.jsx(aa,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((S=i.totais)==null?void 0:S.receita_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Base de clculo"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"CMV"}),e.jsx(Sa,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((C=i.totais)==null?void 0:C.cmv)||0)}),e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:[g(y((E=i.totais)==null?void 0:E.cmv,(T=i.totais)==null?void 0:T.receita_bruta))," da receita"]})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Lucro Bruto"}),e.jsx(ha,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:p(((q=i.totais)==null?void 0:q.lucro_bruto)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Aps custos"})]}),e.jsxs("div",{className:"bg-purple-500 text-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm opacity-90",children:"Margem Bruta"}),e.jsx(WA,{className:"w-5 h-5"})]}),e.jsx("div",{className:"text-3xl font-bold",children:g(((A=i.totais)==null?void 0:A.margem_bruta)||0)}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Rentabilidade"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Gt,{size:20,className:"text-blue-600"}),"Anlise por Canal de Vendas"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Selecione os canais para adicionar suas mtricas na tabela DRE"})]}),d.length>0&&e.jsx("button",{onClick:b,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Limpar Seleo"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:c.map(V=>{const G=d.includes(V.id),L={blue:G?"bg-blue-600 text-white border-blue-600":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",yellow:G?"bg-yellow-500 text-white border-yellow-500":"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100",orange:G?"bg-orange-500 text-white border-orange-500":"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100",green:G?"bg-green-600 text-white border-green-600":"bg-green-50 text-green-700 border-green-200 hover:bg-green-100"};return e.jsxs("button",{onClick:()=>f(V.id),className:`${L[V.cor]} border-2 rounded-lg p-4 transition-all duration-200 transform ${G?"scale-105 shadow-lg":"hover:scale-102"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:V.nome}),G&&e.jsx(Gt,{size:20,className:"flex-shrink-0"})]}),G&&e.jsx("div",{className:"text-xs mt-1 opacity-90",children:"Ativo na tabela"})]},V.id)})}),d.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Hm,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("span",{className:"font-semibold",children:[d.length," canal(is) selecionado(s)."]})," ","As mtricas de cada canal sero adicionadas na tabela DRE abaixo com suas respectivas receitas, custos e lucros."]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Receita"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(O=i==null?void 0:i.linhas)==null?void 0:O.map((V,G)=>{const L=V.nivel===0,Z=V.nivel===1,D=V.cor_bg!=="#ffffff"?{backgroundColor:V.cor_bg}:{},K={color:V.cor};return e.jsxs("tr",{style:D,className:L?"font-bold":"",children:[e.jsx("td",{className:`px-6 py-3 ${Z?"pl-12":""} ${L?"font-bold":""}`,style:K,children:V.descricao}),e.jsx("td",{className:`px-6 py-3 text-right ${L?"font-bold":""}`,style:K,children:p(V.valor)}),e.jsx("td",{className:`px-6 py-3 text-right ${L?"font-bold":""}`,style:K,children:g(V.percentual)})]},G)})})]})}),d.length===0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:" A DRE agora mostra automaticamente todos os canais com vendas no perodo selecionado."})})]}),!i&&!n&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(bs,{className:"mx-auto mb-4 text-gray-400",size:64}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Selecione um perodo e clique em Atualizar para visualizar o DRE"})]})]}),t==="extrato"&&e.jsx(o2e,{}),t==="analise"&&e.jsx(i2e,{dados:i,periodo:{mes:x.mes,ano:x.ano}}),e.jsx(lhe,{isOpen:a,onClose:()=>s(!1),contexto:{tipo:"DRE",periodo:`${x.mes}/${x.ano}`,valor:i==null?void 0:i.lucro_liquido,dados:i}})]})},c2e=t=>{const r={critico:"bg-red-100 text-red-800 border-red-200",alerta:"bg-yellow-100 text-yellow-800 border-yellow-200",ok:"bg-green-100 text-green-800 border-green-200"};return r[t]||r.ok},d2e=t=>t==="critico"?e.jsx(ea,{className:"w-5 h-5"}):t==="alerta"?e.jsx(ea,{className:"w-5 h-5"}):e.jsx(Gt,{className:"w-5 h-5"}),u2e=t=>t==="melhorando"?e.jsx(aa,{className:"w-5 h-5 text-green-600"}):t==="piorando"?e.jsx(Sa,{className:"w-5 h-5 text-red-600"}):e.jsx(ug,{className:"w-5 h-5 text-gray-600"});function m2e({indices:t}){const[r,a]=j.useState(null);if(!t)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum ndice disponvel"});const{saldo_atual:s,dias_de_caixa:n,status:o,tendencia:i,score_saude:l,receita_mensal_estimada:c,despesa_mensal_estimada:d,percentual_variacao_7d:u}=t;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ha,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"relative",children:[u2e(i),e.jsx("button",{onMouseEnter:()=>a("saldo"),onMouseLeave:()=>a(null),className:"ml-2 text-gray-400 hover:text-gray-600",children:e.jsx(L0,{className:"w-4 h-4"})}),r==="saldo"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Saldo Atual"}),e.jsx("p",{children:"Seu saldo de caixa real neste momento. O nmero verde ao lado mostra a variao dos ltimos 7 dias."})]})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Saldo Atual"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s||0)}),u&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u>0?"+":"",u.toFixed(1),"% em 7 dias"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(zi,{className:"w-6 h-6 text-purple-600"})}),e.jsx("button",{onMouseEnter:()=>a("dias"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L0,{className:"w-4 h-4"})}),r==="dias"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Dias de Caixa"}),e.jsx("p",{children:"Quantos dias voc consegue pagar as despesas com seu saldo atual. Se tem R$ 10.000 e gasta R$ 1.000/dia = 10 dias."})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Dias de Caixa"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(n==null?void 0:n.toFixed(1))||"0.0"," dias"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n<7?"Crtico - menos de 1 semana":n<15?"Alerta - menos de 2 semanas":"Saudvel"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${c2e(o)}`,children:d2e(o)}),e.jsx("button",{onMouseEnter:()=>a("status"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L0,{className:"w-4 h-4"})}),r==="status"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Status"}),e.jsxs("p",{children:[e.jsx("strong",{children:"CRITICO:"})," <7 dias (risco iminente). ",e.jsx("strong",{children:"ALERTA:"})," 7-15 dias. ",e.jsx("strong",{children:"OK:"})," >15 dias."]})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Status"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:o||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 capitalize",children:["Tendncia: ",i||"estvel"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(m9,{className:"w-6 h-6 text-green-600"})}),e.jsx("button",{onMouseEnter:()=>a("score"),onMouseLeave:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L0,{className:"w-4 h-4"})}),r==="score"&&e.jsxs("div",{className:"absolute -right-40 top-8 bg-gray-900 text-white text-xs rounded p-2 w-48 z-10 whitespace-normal",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Score de Sade"}),e.jsx("p",{children:"Nota de 0-100 que resume a sade financeira. Considera dias de caixa, tendncia e volatilidade."})]})]}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Score de Sade"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(l==null?void 0:l.toFixed(0))||"0","/100"]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l>=70?"bg-green-600":l>=40?"bg-yellow-600":"bg-red-600"}`,style:{width:`${l||0}%`}})})]}),c&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(aa,{className:"w-6 h-6 text-green-600"})})}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Receita Mensal"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Estimativa"})]}),d&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(Sa,{className:"w-6 h-6 text-red-600"})})}),e.jsx("h3",{className:"text-gray-600 text-sm font-medium mb-1",children:"Despesa Mensal"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d)}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Estimativa"})]})]})}const CR=6048e5,x2e=864e5,kR=6e4,ER=36e5,up=43200,p6=1440,h6=Symbol.for("constructDateFrom");function ro(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&h6 in t?t[h6](r):t instanceof Date?new t.constructor(r):new Date(r)}function sa(t,r){return ro(r||t,t)}let p2e={};function m0(){return p2e}function Lx(t,r){var l,c,d,u;const a=m0(),s=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=sa(t,r==null?void 0:r.in),o=n.getDay(),i=(o<s?7:0)+o-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function Df(t,r){return Lx(t,{...r,weekStartsOn:1})}function AR(t,r){const a=sa(t,r==null?void 0:r.in),s=a.getFullYear(),n=ro(a,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const o=Df(n),i=ro(a,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const l=Df(i);return a.getTime()>=o.getTime()?s+1:a.getTime()>=l.getTime()?s:s-1}function Mf(t){const r=sa(t),a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return a.setUTCFullYear(r.getFullYear()),+t-+a}function ub(t,...r){const a=ro.bind(null,t||r.find(s=>typeof s=="object"));return r.map(a)}function f6(t,r){const a=sa(t,r==null?void 0:r.in);return a.setHours(0,0,0,0),a}function h2e(t,r,a){const[s,n]=ub(a==null?void 0:a.in,t,r),o=f6(s),i=f6(n),l=+o-Mf(o),c=+i-Mf(i);return Math.round((l-c)/x2e)}function f2e(t,r){const a=AR(t,r),s=ro(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),Df(s)}function Tp(t,r){const a=+sa(t)-+sa(r);return a<0?-1:a>0?1:a}function g2e(t){return ro(t,Date.now())}function b2e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function v2e(t){return!(!b2e(t)&&typeof t!="number"||isNaN(+sa(t)))}function y2e(t,r,a){const[s,n]=ub(a==null?void 0:a.in,t,r),o=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return o*12+i}function j2e(t){return r=>{const s=(t?Math[t]:Math.trunc)(r);return s===0?0:s}}function N2e(t,r){return+sa(t)-+sa(r)}function w2e(t,r){const a=sa(t,r==null?void 0:r.in);return a.setHours(23,59,59,999),a}function _2e(t,r){const a=sa(t,r==null?void 0:r.in),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}function S2e(t,r){const a=sa(t,r==null?void 0:r.in);return+w2e(a,r)==+_2e(a,r)}function C2e(t,r,a){const[s,n,o]=ub(a==null?void 0:a.in,t,t,r),i=Tp(n,o),l=Math.abs(y2e(n,o));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*l);let c=Tp(n,o)===-i;S2e(s)&&l===1&&Tp(s,o)===1&&(c=!1);const d=i*(l-+c);return d===0?0:d}function k2e(t,r,a){const s=N2e(t,r)/1e3;return j2e(a==null?void 0:a.roundingMethod)(s)}function E2e(t,r){const a=sa(t,r==null?void 0:r.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const A2e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},P2e=(t,r,a)=>{let s;const n=A2e[t];return typeof n=="string"?s=n:r===1?s=n.one:s=n.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function od(t){return(r={})=>{const a=r.width?String(r.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const T2e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O2e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},F2e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$2e={date:od({formats:T2e,defaultWidth:"full"}),time:od({formats:O2e,defaultWidth:"full"}),dateTime:od({formats:F2e,defaultWidth:"full"})},R2e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},D2e=(t,r,a,s)=>R2e[t];function qn(t){return(r,a)=>{const s=a!=null&&a.context?String(a.context):"standalone";let n;if(s==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=a!=null&&a.width?String(a.width):i;n=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=a!=null&&a.width?String(a.width):t.defaultWidth;n=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(r):r;return n[o]}}const M2e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},I2e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},L2e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B2e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},z2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q2e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V2e=(t,r)=>{const a=Number(t),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},U2e={ordinalNumber:V2e,era:qn({values:M2e,defaultWidth:"wide"}),quarter:qn({values:I2e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qn({values:L2e,defaultWidth:"wide"}),day:qn({values:B2e,defaultWidth:"wide"}),dayPeriod:qn({values:z2e,defaultWidth:"wide",formattingValues:q2e,defaultFormattingWidth:"wide"})};function Vn(t){return(r,a={})=>{const s=a.width,n=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],o=r.match(n);if(!o)return null;const i=o[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?H2e(l,m=>m.test(i)):W2e(l,m=>m.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const u=r.slice(i.length);return{value:d,rest:u}}}function W2e(t,r){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&r(t[a]))return a}function H2e(t,r){for(let a=0;a<t.length;a++)if(r(t[a]))return a}function PR(t){return(r,a={})=>{const s=r.match(t.matchPattern);if(!s)return null;const n=s[0],o=r.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=a.valueCallback?a.valueCallback(i):i;const l=r.slice(n.length);return{value:i,rest:l}}}const K2e=/^(\d+)(th|st|nd|rd)?/i,G2e=/\d+/i,X2e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y2e={any:[/^b/i,/^(a|c)/i]},Q2e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J2e={any:[/1/i,/2/i,/3/i,/4/i]},Z2e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eNe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tNe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rNe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aNe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nNe={ordinalNumber:PR({matchPattern:K2e,parsePattern:G2e,valueCallback:t=>parseInt(t,10)}),era:Vn({matchPatterns:X2e,defaultMatchWidth:"wide",parsePatterns:Y2e,defaultParseWidth:"any"}),quarter:Vn({matchPatterns:Q2e,defaultMatchWidth:"wide",parsePatterns:J2e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vn({matchPatterns:Z2e,defaultMatchWidth:"wide",parsePatterns:eNe,defaultParseWidth:"any"}),day:Vn({matchPatterns:tNe,defaultMatchWidth:"wide",parsePatterns:rNe,defaultParseWidth:"any"}),dayPeriod:Vn({matchPatterns:aNe,defaultMatchWidth:"any",parsePatterns:sNe,defaultParseWidth:"any"})},TR={code:"en-US",formatDistance:P2e,formatLong:$2e,formatRelative:D2e,localize:U2e,match:nNe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oNe(t,r){const a=sa(t,r==null?void 0:r.in);return h2e(a,E2e(a))+1}function iNe(t,r){const a=sa(t,r==null?void 0:r.in),s=+Df(a)-+f2e(a);return Math.round(s/CR)+1}function OR(t,r){var u,m,x,h;const a=sa(t,r==null?void 0:r.in),s=a.getFullYear(),n=m0(),o=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(x=n.locale)==null?void 0:x.options)==null?void 0:h.firstWeekContainsDate)??1,i=ro((r==null?void 0:r.in)||t,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Lx(i,r),c=ro((r==null?void 0:r.in)||t,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=Lx(c,r);return+a>=+l?s+1:+a>=+d?s:s-1}function lNe(t,r){var l,c,d,u;const a=m0(),s=(r==null?void 0:r.firstWeekContainsDate)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??a.firstWeekContainsDate??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=OR(t,r),o=ro((r==null?void 0:r.in)||t,0);return o.setFullYear(n,0,s),o.setHours(0,0,0,0),Lx(o,r)}function cNe(t,r){const a=sa(t,r==null?void 0:r.in),s=+Lx(a,r)-+lNe(a,r);return Math.round(s/CR)+1}function sr(t,r){const a=t<0?"-":"",s=Math.abs(t).toString().padStart(r,"0");return a+s}const ti={y(t,r){const a=t.getFullYear(),s=a>0?a:1-a;return sr(r==="yy"?s%100:s,r.length)},M(t,r){const a=t.getMonth();return r==="M"?String(a+1):sr(a+1,2)},d(t,r){return sr(t.getDate(),r.length)},a(t,r){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,r){return sr(t.getHours()%12||12,r.length)},H(t,r){return sr(t.getHours(),r.length)},m(t,r){return sr(t.getMinutes(),r.length)},s(t,r){return sr(t.getSeconds(),r.length)},S(t,r){const a=r.length,s=t.getMilliseconds(),n=Math.trunc(s*Math.pow(10,a-3));return sr(n,r.length)}},Nc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g6={G:function(t,r,a){const s=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(t,r,a){if(r==="yo"){const s=t.getFullYear(),n=s>0?s:1-s;return a.ordinalNumber(n,{unit:"year"})}return ti.y(t,r)},Y:function(t,r,a,s){const n=OR(t,s),o=n>0?n:1-n;if(r==="YY"){const i=o%100;return sr(i,2)}return r==="Yo"?a.ordinalNumber(o,{unit:"year"}):sr(o,r.length)},R:function(t,r){const a=AR(t);return sr(a,r.length)},u:function(t,r){const a=t.getFullYear();return sr(a,r.length)},Q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return sr(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return sr(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,a){const s=t.getMonth();switch(r){case"M":case"MM":return ti.M(t,r);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,a){const s=t.getMonth();switch(r){case"L":return String(s+1);case"LL":return sr(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,a,s){const n=cNe(t,s);return r==="wo"?a.ordinalNumber(n,{unit:"week"}):sr(n,r.length)},I:function(t,r,a){const s=iNe(t);return r==="Io"?a.ordinalNumber(s,{unit:"week"}):sr(s,r.length)},d:function(t,r,a){return r==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):ti.d(t,r)},D:function(t,r,a){const s=oNe(t);return r==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):sr(s,r.length)},E:function(t,r,a){const s=t.getDay();switch(r){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,a,s){const n=t.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return sr(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,r,a,s){const n=t.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return sr(o,r.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,r,a){const s=t.getDay(),n=s===0?7:s;switch(r){case"i":return String(n);case"ii":return sr(n,r.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,a){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,r,a){const s=t.getHours();let n;switch(s===12?n=Nc.noon:s===0?n=Nc.midnight:n=s/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,r,a){const s=t.getHours();let n;switch(s>=17?n=Nc.evening:s>=12?n=Nc.afternoon:s>=4?n=Nc.morning:n=Nc.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,r,a){if(r==="ho"){let s=t.getHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return ti.h(t,r)},H:function(t,r,a){return r==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):ti.H(t,r)},K:function(t,r,a){const s=t.getHours()%12;return r==="Ko"?a.ordinalNumber(s,{unit:"hour"}):sr(s,r.length)},k:function(t,r,a){let s=t.getHours();return s===0&&(s=24),r==="ko"?a.ordinalNumber(s,{unit:"hour"}):sr(s,r.length)},m:function(t,r,a){return r==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):ti.m(t,r)},s:function(t,r,a){return r==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):ti.s(t,r)},S:function(t,r){return ti.S(t,r)},X:function(t,r,a){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return v6(s);case"XXXX":case"XX":return ol(s);case"XXXXX":case"XXX":default:return ol(s,":")}},x:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"x":return v6(s);case"xxxx":case"xx":return ol(s);case"xxxxx":case"xxx":default:return ol(s,":")}},O:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+b6(s,":");case"OOOO":default:return"GMT"+ol(s,":")}},z:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+b6(s,":");case"zzzz":default:return"GMT"+ol(s,":")}},t:function(t,r,a){const s=Math.trunc(+t/1e3);return sr(s,r.length)},T:function(t,r,a){return sr(+t,r.length)}};function b6(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=Math.trunc(s/60),o=s%60;return o===0?a+String(n):a+String(n)+r+sr(o,2)}function v6(t,r){return t%60===0?(t>0?"-":"+")+sr(Math.abs(t)/60,2):ol(t,r)}function ol(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=sr(Math.trunc(s/60),2),o=sr(s%60,2);return a+n+r+o}const y6=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},FR=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},dNe=(t,r)=>{const a=t.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return y6(t,r);let o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",y6(s,r)).replace("{{time}}",FR(n,r))},uNe={p:FR,P:dNe},mNe=/^D+$/,xNe=/^Y+$/,pNe=["D","DD","YY","YYYY"];function hNe(t){return mNe.test(t)}function fNe(t){return xNe.test(t)}function gNe(t,r,a){const s=bNe(t,r,a);if(console.warn(s),pNe.includes(t))throw new RangeError(s)}function bNe(t,r,a){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${s} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vNe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yNe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jNe=/^'([^]*?)'?$/,NNe=/''/g,wNe=/[a-zA-Z]/;function $R(t,r,a){var u,m,x,h,v,p,g,y;const s=m0(),n=(a==null?void 0:a.locale)??s.locale??TR,o=(a==null?void 0:a.firstWeekContainsDate)??((m=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(x=s.locale)==null?void 0:x.options)==null?void 0:h.firstWeekContainsDate)??1,i=(a==null?void 0:a.weekStartsOn)??((p=(v=a==null?void 0:a.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??s.weekStartsOn??((y=(g=s.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,l=sa(t,a==null?void 0:a.in);if(!v2e(l))throw new RangeError("Invalid time value");let c=r.match(yNe).map(f=>{const b=f[0];if(b==="p"||b==="P"){const N=uNe[b];return N(f,n.formatLong)}return f}).join("").match(vNe).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const b=f[0];if(b==="'")return{isToken:!1,value:_Ne(f)};if(g6[b])return{isToken:!0,value:f};if(b.match(wNe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:f}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return c.map(f=>{if(!f.isToken)return f.value;const b=f.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&fNe(b)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&hNe(b))&&gNe(b,r,String(t));const N=g6[b[0]];return N(l,b,n.localize,d)}).join("")}function _Ne(t){const r=t.match(jNe);return r?r[1].replace(NNe,"'"):t}function SNe(t,r,a){const s=m0(),n=(a==null?void 0:a.locale)??s.locale??TR,o=2520,i=Tp(t,r);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:i}),[c,d]=ub(a==null?void 0:a.in,...i>0?[r,t]:[t,r]),u=k2e(d,c),m=(Mf(d)-Mf(c))/1e3,x=Math.round((u-m)/60);let h;if(x<2)return a!=null&&a.includeSeconds?u<5?n.formatDistance("lessThanXSeconds",5,l):u<10?n.formatDistance("lessThanXSeconds",10,l):u<20?n.formatDistance("lessThanXSeconds",20,l):u<40?n.formatDistance("halfAMinute",0,l):u<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):x===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",x,l);if(x<45)return n.formatDistance("xMinutes",x,l);if(x<90)return n.formatDistance("aboutXHours",1,l);if(x<p6){const v=Math.round(x/60);return n.formatDistance("aboutXHours",v,l)}else{if(x<o)return n.formatDistance("xDays",1,l);if(x<up){const v=Math.round(x/p6);return n.formatDistance("xDays",v,l)}else if(x<up*2)return h=Math.round(x/up),n.formatDistance("aboutXMonths",h,l)}if(h=C2e(d,c),h<12){const v=Math.round(x/up);return n.formatDistance("xMonths",v,l)}else{const v=h%12,p=Math.trunc(h/12);return v<3?n.formatDistance("aboutXYears",p,l):v<9?n.formatDistance("overXYears",p,l):n.formatDistance("almostXYears",p+1,l)}}function CNe(t,r){return SNe(t,g2e(t),r)}function kNe(t,r){const a=()=>ro(r==null?void 0:r.in,NaN),n=TNe(t);let o;if(n.date){const d=ONe(n.date,2);o=FNe(d.restDateString,d.year)}if(!o||isNaN(+o))return a();const i=+o;let l=0,c;if(n.time&&(l=$Ne(n.time),isNaN(l)))return a();if(n.timezone){if(c=RNe(n.timezone),isNaN(c))return a()}else{const d=new Date(i+l),u=sa(0,r==null?void 0:r.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return sa(i+l+c,r==null?void 0:r.in)}const mp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ENe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ANe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,PNe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function TNe(t){const r={},a=t.split(mp.dateTimeDelimiter);let s;if(a.length>2)return r;if(/:/.test(a[0])?s=a[0]:(r.date=a[0],s=a[1],mp.timeZoneDelimiter.test(r.date)&&(r.date=t.split(mp.timeZoneDelimiter)[0],s=t.substr(r.date.length,t.length))),s){const n=mp.timezone.exec(s);n?(r.time=s.replace(n[1],""),r.timezone=n[1]):r.time=s}return r}function ONe(t,r){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((s[1]||s[2]).length)}}function FNe(t,r){if(r===null)return new Date(NaN);const a=t.match(ENe);if(!a)return new Date(NaN);const s=!!a[4],n=Hu(a[1]),o=Hu(a[2])-1,i=Hu(a[3]),l=Hu(a[4]),c=Hu(a[5])-1;if(s)return BNe(r,l,c)?DNe(r,l,c):new Date(NaN);{const d=new Date(0);return!INe(r,o,i)||!LNe(r,n)?new Date(NaN):(d.setUTCFullYear(r,o,Math.max(n,i)),d)}}function Hu(t){return t?parseInt(t):1}function $Ne(t){const r=t.match(ANe);if(!r)return NaN;const a=Av(r[1]),s=Av(r[2]),n=Av(r[3]);return zNe(a,s,n)?a*ER+s*kR+n*1e3:NaN}function Av(t){return t&&parseFloat(t.replace(",","."))||0}function RNe(t){if(t==="Z")return 0;const r=t.match(PNe);if(!r)return 0;const a=r[1]==="+"?-1:1,s=parseInt(r[2]),n=r[3]&&parseInt(r[3])||0;return qNe(s,n)?a*(s*ER+n*kR):NaN}function DNe(t,r,a){const s=new Date(0);s.setUTCFullYear(t,0,4);const n=s.getUTCDay()||7,o=(r-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const MNe=[31,null,31,30,31,30,31,31,30,31,30,31];function RR(t){return t%400===0||t%4===0&&t%100!==0}function INe(t,r,a){return r>=0&&r<=11&&a>=1&&a<=(MNe[r]||(RR(t)?29:28))}function LNe(t,r){return r>=1&&r<=(RR(t)?366:365)}function BNe(t,r,a){return r>=1&&r<=53&&a>=0&&a<=6}function zNe(t,r,a){return t===24?r===0&&a===0:a>=0&&a<60&&r>=0&&r<60&&t>=0&&t<25}function qNe(t,r){return r>=0&&r<=59}const VNe={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},UNe=(t,r,a)=>{let s;const n=VNe[t];return typeof n=="string"?s=n:r===1?s=n.one:s=n.other.replace("{{count}}",String(r)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+s:"h "+s:s},WNe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},HNe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},KNe={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GNe={date:od({formats:WNe,defaultWidth:"full"}),time:od({formats:HNe,defaultWidth:"full"}),dateTime:od({formats:KNe,defaultWidth:"full"})},XNe={lastWeek:t=>{const r=t.getDay();return"'"+(r===0||r===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},YNe=(t,r,a,s)=>{const n=XNe[t];return typeof n=="function"?n(r):n},QNe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},JNe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},ZNe={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},ewe={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},twe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},rwe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},awe=(t,r)=>{const a=Number(t);return(r==null?void 0:r.unit)==="week"?a+"":a+""},swe={ordinalNumber:awe,era:qn({values:QNe,defaultWidth:"wide"}),quarter:qn({values:JNe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qn({values:ZNe,defaultWidth:"wide"}),day:qn({values:ewe,defaultWidth:"wide"}),dayPeriod:qn({values:twe,defaultWidth:"wide",formattingValues:rwe,defaultFormattingWidth:"wide"})},nwe=/^(\d+)[o]?/i,owe=/\d+/i,iwe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},lwe={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},cwe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},dwe={any:[/1/i,/2/i,/3/i,/4/i]},uwe={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},mwe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},xwe={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},pwe={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},hwe={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},fwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},gwe={ordinalNumber:PR({matchPattern:nwe,parsePattern:owe,valueCallback:t=>parseInt(t,10)}),era:Vn({matchPatterns:iwe,defaultMatchWidth:"wide",parsePatterns:lwe,defaultParseWidth:"any"}),quarter:Vn({matchPatterns:cwe,defaultMatchWidth:"wide",parsePatterns:dwe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vn({matchPatterns:uwe,defaultMatchWidth:"wide",parsePatterns:mwe,defaultParseWidth:"any"}),day:Vn({matchPatterns:xwe,defaultMatchWidth:"wide",parsePatterns:pwe,defaultParseWidth:"any"}),dayPeriod:Vn({matchPatterns:hwe,defaultMatchWidth:"any",parsePatterns:fwe,defaultParseWidth:"any"})},cw={code:"pt-BR",formatDistance:UNe,formatLong:GNe,formatRelative:YNe,localize:swe,match:gwe,options:{weekStartsOn:0,firstWeekContainsDate:1}},id=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0}).format(t),DR=t=>{try{const r=kNe(t);return $R(r,"dd/MMM",{locale:cw})}catch{return t}},j6=({active:t,payload:r})=>{if(!t||!r||!r.length)return null;const a=r[0].payload;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-2",children:DR(a.data_projetada)}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-blue-600",children:["Saldo: ",e.jsx("strong",{children:id(a.saldo_estimado)})]}),a.limite_superior&&e.jsxs("p",{className:"text-green-600",children:["Otimista: ",id(a.limite_superior)]}),a.limite_inferior&&e.jsxs("p",{className:"text-red-600",children:["Pessimista: ",id(a.limite_inferior)]}),a.alerta_nivel&&e.jsxs("p",{className:`font-medium ${a.alerta_nivel==="critico"?"text-red-600":a.alerta_nivel==="alerta"?"text-yellow-600":"text-green-600"}`,children:["Status: ",a.alerta_nivel]})]})]})};function If({projecoes:t,titulo:r="Projeo de Fluxo de Caixa",detalhado:a=!1}){var o,i,l,c,d,u;if(!t||t.length===0)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r}),e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Nenhuma projeo disponvel. Clique em "Atualizar Projeo" para gerar.'})]});const s=t.map(m=>({...m,data_formatada:DR(m.data_projetada),saldo:m.saldo_estimado||0,superior:m.limite_superior||null,inferior:m.limite_inferior||null})),n=s.some(m=>m.superior!==null||m.inferior!==null);return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:r}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo Inicial"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:id(((o=s[0])==null?void 0:o.saldo)||0)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:id(((i=s[s.length-1])==null?void 0:i.saldo)||0)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("p",{className:`text-lg font-bold ${((l=s[s.length-1])==null?void 0:l.saldo)-((c=s[0])==null?void 0:c.saldo)>=0?"text-green-600":"text-red-600"}`,children:id((((d=s[s.length-1])==null?void 0:d.saldo)||0)-(((u=s[0])==null?void 0:u.saldo)||0))})]})]}),e.jsx(da,{width:"100%",height:a?400:300,children:n?e.jsxs(Upe,{data:s,children:[e.jsx(va,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(zr,{dataKey:"data_formatada",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(Fr,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:m=>`R$ ${(m/1e3).toFixed(0)}k`}),e.jsx(or,{content:e.jsx(j6,{})}),e.jsx(Ar,{}),e.jsx(Mo,{type:"monotone",dataKey:"superior",stroke:"#10b981",fill:"#d1fae5",fillOpacity:.3,name:"Cenrio Otimista"}),e.jsx(Mo,{type:"monotone",dataKey:"inferior",stroke:"#ef4444",fill:"#fee2e2",fillOpacity:.3,name:"Cenrio Pessimista"}),e.jsx(as,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:3,dot:{r:4,fill:"#3b82f6"},name:"Saldo Estimado"})]}):e.jsxs(Xd,{data:s,children:[e.jsx(va,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(zr,{dataKey:"data_formatada",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(Fr,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:m=>`R$ ${(m/1e3).toFixed(0)}k`}),e.jsx(or,{content:e.jsx(j6,{})}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"saldo",stroke:"#3b82f6",strokeWidth:3,dot:{r:4,fill:"#3b82f6"},name:"Saldo Estimado"})]})}),s.some(m=>m.vai_faltar_caixa)&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:" Ateno: Projeo indica que o caixa pode ficar negativo nos prximos dias!"})})]})}const bwe=t=>{const r={critico:{icon:ea,bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",iconColor:"text-red-600"},alerta:{icon:Lt,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"},aviso:{icon:P2,bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-800",iconColor:"text-blue-600"},info:{icon:Gt,bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"}};return r[t]||r.info};function N6({alertas:t}){if(!t||t.length===0)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alertas do Caixa"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gt,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum alerta no momento"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Seu caixa est saudvel! "})]})]});const r={critico:0,alerta:1,aviso:2,info:3},a=[...t].sort((s,n)=>(r[s.tipo]||3)-(r[n.tipo]||3));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alertas do Caixa"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:a.length})]}),e.jsx("div",{className:"space-y-3",children:a.map((s,n)=>{const o=bwe(s.tipo),i=o.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${o.bgColor} ${o.borderColor}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${o.iconColor}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${o.textColor} mb-1`,children:s.titulo}),e.jsx("p",{className:`text-sm ${o.textColor} opacity-90`,children:s.mensagem}),s.data&&e.jsx("p",{className:`text-xs ${o.textColor} opacity-70 mt-2`,children:new Date(s.data).toLocaleString("pt-BR")})]})]})},n)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(s=>s.tipo==="critico").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Crticos"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.filter(s=>s.tipo==="alerta").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Alertas"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.filter(s=>s.tipo==="aviso").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Avisos"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(s=>s.tipo==="info").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Infos"})]})]})]})}const w6=[{id:"otimista",nome:"Otimista",descricao:"Aumento de 20% nas receitas e reduo de 10% nas despesas",icon:aa,color:"green"},{id:"realista",nome:"Realista",descricao:"Mantm o padro atual de receitas e despesas",icon:ug,color:"blue"},{id:"pessimista",nome:"Pessimista",descricao:"Reduo de 20% nas receitas e aumento de 10% nas despesas",icon:Sa,color:"red"}];function vwe({userId:t,projecoesBase:r=[]}){var u,m,x,h,v,p,g,y,f,b,N,_,w,S,C,E,T,q,A;const[a,s]=j.useState("realista"),[n,o]=j.useState(!1),[i,l]=j.useState(null),c=async()=>{o(!0);try{const V={Authorization:`Bearer ${localStorage.getItem("token")}`},G=await U.post(`/api/ia/fluxo/simular-cenario/${t}`,{cenario:a},{headers:V});l(G.data),be.success(`Cenrio ${a} simulado com sucesso!`)}catch(O){console.error("Erro ao simular cenrio:",O),be.error("Erro ao simular cenrio")}finally{o(!1)}},d=w6.find(O=>O.id===a);return d==null||d.icon,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Simulador de Cenrios"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Simule diferentes cenrios para entender o impacto no seu fluxo de caixa"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:w6.map(O=>{const V=O.icon,G=a===O.id;return e.jsxs("button",{onClick:()=>s(O.id),className:`p-4 rounded-lg border-2 transition-all text-left ${G?`border-${O.color}-500 bg-${O.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(V,{className:`w-6 h-6 ${G?`text-${O.color}-600`:"text-gray-400"}`}),e.jsx("h4",{className:`font-semibold ${G?`text-${O.color}-900`:"text-gray-900"}`,children:O.nome})]}),e.jsx("p",{className:`text-sm ${G?`text-${O.color}-700`:"text-gray-600"}`,children:O.descricao})]},O.id)})}),e.jsx("button",{onClick:c,disabled:n,className:"w-full md:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Simulando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N9,{className:"w-5 h-5"}),"Simular Cenrio"]})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Comparao: Base vs ",d==null?void 0:d.nome]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Cenrio Atual"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(((u=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:u.saldo_estimado)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((m=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:m.saldo_estimado)||0)-(((x=r==null?void 0:r[0])==null?void 0:x.saldo_estimado)||0))})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-700 mb-3",children:["Cenrio ",d==null?void 0:d.nome]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Saldo Final"}),e.jsx("span",{className:`font-semibold ${a==="otimista"?"text-green-600":a==="pessimista"?"text-red-600":"text-blue-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(((p=(v=i==null?void 0:i.projecoes_ajustadas)==null?void 0:v[((h=i==null?void 0:i.projecoes_ajustadas)==null?void 0:h.length)-1])==null?void 0:p.saldo_ajustado)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Variao"}),e.jsx("span",{className:`font-semibold ${a==="otimista"?"text-green-600":a==="pessimista"?"text-red-600":"text-blue-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((f=(y=i==null?void 0:i.projecoes_ajustadas)==null?void 0:y[((g=i==null?void 0:i.projecoes_ajustadas)==null?void 0:g.length)-1])==null?void 0:f.saldo_ajustado)||0)-(((N=(b=i==null?void 0:i.projecoes_ajustadas)==null?void 0:b[0])==null?void 0:N.saldo_ajustado)||0))})]})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Diferena no Saldo Final"}),e.jsx("span",{className:`text-xl font-bold ${(((S=(w=i==null?void 0:i.projecoes_ajustadas)==null?void 0:w[((_=i==null?void 0:i.projecoes_ajustadas)==null?void 0:_.length)-1])==null?void 0:S.saldo_ajustado)||0)>(((C=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:C.saldo_estimado)||0)?"text-green-600":"text-red-600"}`,children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format((((q=(T=i==null?void 0:i.projecoes_ajustadas)==null?void 0:T[((E=i==null?void 0:i.projecoes_ajustadas)==null?void 0:E.length)-1])==null?void 0:q.saldo_ajustado)||0)-(((A=r==null?void 0:r[(r==null?void 0:r.length)-1])==null?void 0:A.saldo_estimado)||0))})]})})]}),e.jsx(If,{projecoes:(i==null?void 0:i.projecoes_ajustadas)||[],titulo:`Projeo - Cenrio ${d==null?void 0:d.nome}`,detalhado:!0})]}),!i&&r&&r.length>0&&e.jsx(If,{projecoes:r,titulo:"Projeo Atual (Cenrio Base)",detalhado:!0})]})}function ywe(){const[t,r]=j.useState(!1),a=[{titulo:"Dias de Caixa",descricao:"Quantos dias seu caixa consegue cobrir as despesas com o saldo atual. Se tem R$ 10.000 e gasta R$ 1.000/dia, ter 10 dias de caixa.",formula:"Saldo Atual  Despesa Mdia Diria",referencia:"ltimos 30 dias"},{titulo:"Saldo Estimado (Projeo)",descricao:"Previso do saldo do caixa para os prximos 15 dias, calculada usando inteligncia artificial (Prophet) baseada em histrico de 30+ dias.",formula:"Saldo Atual + Receitas Previstas - Despesas Previstas",referencia:"Prximos 15 dias"},{titulo:"Entrada/Sada Estimada",descricao:"Previso diria de quanto voc deve receber (entradas) e gastar (sadas) nos prximos dias.",formula:"Mdia histrica  30 dias  fator sazonalidade",referencia:"Prximos 15 dias"},{titulo:"Status do Caixa",descricao:"Classificao da sade financeira: CRITICO (<7 dias), ALERTA (7-15 dias) ou OK (>15 dias)",formula:'Status = IF(dias_caixa < 7) "CRITICO" ELSE IF(dias_caixa < 15) "ALERTA" ELSE "OK"',referencia:"Dados em tempo real"}],s=[{nome:"Viso Geral",conteudo:"Mostra os ndices principais de sade do caixa: quanto tempo de saldo voc tem, a tendncia (melhorando/piorando), despesa mdia diria e score geral de sade.",periodo:"ltimos 30 dias de histrico"},{nome:"Projees 15 Dias",conteudo:"Grfico e tabela com a previso de saldo dirio para os prximos 15 dias. Usa algoritmo Prophet com inteligncia artificial.",periodo:"Prximos 15 dias a partir de hoje"},{nome:"Alertas",conteudo:"Lista automtica de avisos: se o caixa est crtico, se h risco de falta de saldo, ou se a tendncia est piorando.",periodo:"Monitoramento contnuo"},{nome:"Simulador",conteudo:"Permite simular 3 cenrios: OTIMISTA (+20% receita, -10% despesa), REALISTA (sem mudanas) e PESSIMISTA (-20% receita, +10% despesa).",periodo:"Prximos 15 dias com mudanas aplicadas"}];return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-6",children:[e.jsxs("button",{onClick:()=>r(!t),className:"w-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P2,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Entenda os Dados"})]}),e.jsx(Ll,{className:`w-5 h-5 text-blue-600 transition-transform ${t?"rotate-180":""}`})]}),t&&e.jsxs("div",{className:"mt-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"O que cada aba mostra?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((n,o)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.nome}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:n.conteudo}),e.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:[" ",n.periodo]})]},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"Mtricas Explicadas"}),e.jsx("div",{className:"space-y-4",children:a.map((n,o)=>e.jsx("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:o+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.titulo}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:n.descricao}),e.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Clculo:"})," ",n.formula]}),e.jsxs("p",{className:"text-blue-600",children:[e.jsx("strong",{children:"Perodo:"})," ",n.referencia]})]})]})]})},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-4",children:"Perguntas Frequentes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Qual perodo a "Viso Geral" est analisando?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Os ltimos ",e.jsx("strong",{children:"30 dias"})," de movimentaes realizadas. Ela calcula a despesa mdia desse perodo para determinar quantos dias de caixa voc tem."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:" O grfico de Projees  confivel?"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Usa algoritmo Prophet (inteligncia artificial) que aprende com os ltimos ",e.jsx("strong",{children:"30+ dias"})," de dados. Quanto mais histrico, mais preciso. Funciona bem para tendncias, mas no prev eventos inesperados."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:" O Simulador altera meus dados reais?"}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"NO!"}),'  apenas uma simulao. Mostra "E se..." ocorressem essas mudanas. Seus dados permanecem intactos.']})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Como interpretar "Dias de Caixa"?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"10 dias"})," = voc pode cobrir ",e.jsx("strong",{children:"10 dias de despesas"})," com saldo atual. Se ",e.jsx("strong",{children:"<7 dias"}),"  crtico (risco iminente). Se ",e.jsx("strong",{children:"7-15"}),"  alerta. Se ",e.jsx("strong",{children:">15"})," est ok."]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm mb-1",children:' Qual  a diferena entre "Saldo Atual" e "Saldo Estimado"?'}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Saldo Atual"})," = saldo real hoje. ",e.jsx("strong",{children:"Saldo Estimado"})," = previso do saldo daqui a X dias (levando em conta receitas/despesas esperadas)."]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Dicas Importantes:"}),e.jsxs("ul",{className:"text-sm text-blue-900 space-y-1",children:[e.jsxs("li",{children:[" Clique em ",e.jsx("strong",{children:'"Atualizar Projeo"'})," para recalcular com dados mais recentes"]}),e.jsx("li",{children:" Os Alertas aparecem automaticamente quando h risco (caixa <7 dias ou tendncia negativa)"}),e.jsx("li",{children:' Use o Simulador para planejar: "E se aumentar despesas de marketing em 20%?"'}),e.jsx("li",{children:" Se tiver menos de 30 dias de histrico, as projees sero mais conservadoras"})]})]})]})]})}function jwe({userId:t}){const[r,a]=j.useState(!0),[s,n]=j.useState(null),[o,i]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState("visao-geral");j.useEffect(()=>{m()},[t]);const m=async()=>{a(!0);try{const v={Authorization:`Bearer ${localStorage.getItem("token")}`},[p,g,y]=await Promise.all([U.get(`/ia/fluxo/indices-saude/${t}`,{headers:v}),U.get(`/ia/fluxo/projecoes/${t}?dias=15`,{headers:v}),U.get(`/ia/fluxo/alertas/${t}`,{headers:v})]);n(p.data),i(g.data||[]),c(y.data||[])}catch(h){console.error("Erro ao carregar dados IA:",h),be.error("Erro ao carregar dados da IA")}finally{a(!1)}},x=async()=>{const h=be.loading("Gerando projeo com Prophet...");try{const p={Authorization:`Bearer ${localStorage.getItem("token")}`};await U.post(`/ia/fluxo/projetar-15-dias/${t}`,{},{headers:p}),be.success("Projeo gerada com sucesso!",{id:h}),m()}catch(v){console.error("Erro ao gerar projeo:",v),be.error("Erro ao gerar projeo",{id:h})}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ywe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Fluxo de Caixa Preditivo"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Inteligncia artificial analisando seu caixa"})]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Kr,{className:"w-4 h-4"}),"Atualizar Projeo"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>u("visao-geral"),className:`px-4 py-2 font-medium transition-colors ${d==="visao-geral"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Viso Geral"}),e.jsx("button",{onClick:()=>u("projecoes"),className:`px-4 py-2 font-medium transition-colors ${d==="projecoes"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Projees 15 Dias"}),e.jsxs("button",{onClick:()=>u("alertas"),className:`px-4 py-2 font-medium transition-colors relative ${d==="alertas"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Alertas",l.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.length})]}),e.jsx("button",{onClick:()=>u("simulador"),className:`px-4 py-2 font-medium transition-colors ${d==="simulador"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Simulador"})]}),e.jsxs("div",{className:"space-y-6",children:[d==="visao-geral"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Viso Geral:"})," Anlise dos ltimos ",e.jsx("strong",{children:"30 dias"})," para calcular a sade do caixa. Mostra quanto tempo voc consegue manter o negcio com saldo atual."]})}),e.jsx(m2e,{indices:s}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(If,{projecoes:o.slice(0,7),titulo:"Prximos 7 Dias"}),e.jsx(N6,{alertas:l.slice(0,3)})]})]}),d==="projecoes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Projeo 15 Dias:"})," Previso usando inteligncia artificial (Prophet). Baseada em ",e.jsx("strong",{children:"30+ dias de histrico"})," para prever entradas e sadas dos prximos ",e.jsx("strong",{children:"15 dias"}),". Quanto mais histrico, mais precisa a previso."]})}),e.jsx(If,{projecoes:o,titulo:"Projeo 15 Dias com Prophet",detalhado:!0})]}),d==="alertas"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Alertas:"})," Avisos automticos gerados em tempo real.",e.jsx("strong",{children:" Crtico"})," = menos de 7 dias de caixa (risco iminente).",e.jsx("strong",{children:" Alerta"})," = 7-15 dias (ateno necessria).",e.jsx("strong",{children:" OK"})," = mais de 15 dias (situao confortvel)."]})}),e.jsx(N6,{alertas:l})]}),d==="simulador"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Simulador:"})," Teste 3 cenrios para os ",e.jsx("strong",{children:"prximos 15 dias"}),".",e.jsx("strong",{children:" Otimista:"})," +20% receita, -10% despesa.",e.jsx("strong",{children:" Realista:"})," sem mudanas.",e.jsx("strong",{children:" Pessimista:"})," -20% receita, +10% despesa.",e.jsx("strong",{children:"Seus dados reais no so alterados!"})]})}),e.jsx(vwe,{userId:t,projecoesBase:o})]})]})]})}function Nwe(){const{user:t}=au();return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(jwe,{userId:(t==null?void 0:t.id)||1})})}function wwe(){const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState([]),[i,l]=j.useState(""),[c,d]=j.useState(!1),[u,m]=j.useState(!1),x=j.useRef(null);j.useEffect(()=>{v()},[]),j.useEffect(()=>{a&&p(a)},[a]),j.useEffect(()=>{h()},[n]);const h=()=>{var b;(b=x.current)==null||b.scrollIntoView({behavior:"smooth"})},v=async()=>{try{const b=await U.get("/chat/conversas");r(b.data)}catch(b){console.error("Erro ao carregar conversas:",b)}},p=async b=>{d(!0);try{const N=await U.get(`/chat/conversa/${b}/mensagens`);o(N.data)}catch(N){console.error("Erro ao carregar mensagens:",N),be.error("Erro ao carregar mensagens")}finally{d(!1)}},g=async()=>{try{const b=await U.post("/chat/nova-conversa",{});r([b.data,...t]),s(b.data.id),o([]),be.success("Nova conversa criada!")}catch(b){console.error("Erro ao criar conversa:",b),be.error("Erro ao criar conversa")}},y=async b=>{if(b.preventDefault(),!i.trim()||!a)return;m(!0);const N=i;l("");try{const _=await U.post("/chat/enviar",{conversa_id:a,mensagem:N});o([...n,{id:_.data.mensagem_usuario.id,tipo:"usuario",conteudo:_.data.mensagem_usuario.conteudo,criado_em:_.data.mensagem_usuario.criado_em},{id:_.data.mensagem_ia.id,tipo:"assistente",conteudo:_.data.mensagem_ia.conteudo,criado_em:_.data.mensagem_ia.criado_em}]),v()}catch(_){console.error("Erro ao enviar mensagem:",_),be.error("Erro ao enviar mensagem"),l(N)}finally{m(!1)}},f=async b=>{if(confirm("Deseja deletar esta conversa?"))try{await U.delete(`/chat/conversa/${b}`),r(t.filter(N=>N.id!==b)),a===b&&(s(null),o([])),be.success("Conversa deletada")}catch(N){console.error("Erro ao deletar conversa:",N),be.error("Erro ao deletar conversa")}};return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(qb,{className:"w-8 h-8 text-blue-600"}),"Chat IA Financeiro"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pergunte sobre seu fluxo de caixa, projees e sade financeira"})]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Nova Conversa"]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Conversas Recentes"}),t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(f4,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Nenhuma conversa ainda"}),e.jsx("button",{onClick:g,className:"mt-3 text-blue-600 text-sm hover:underline",children:"Criar primeira conversa"})]}):e.jsx("div",{className:"space-y-2",children:t.map(b=>e.jsx("div",{onClick:()=>s(b.id),className:`p-3 rounded-lg cursor-pointer transition-colors group ${a===b.id?"bg-blue-50 border-2 border-blue-200":"bg-gray-50 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:b.titulo||"Nova conversa"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[b.total_mensagens," mensagens"]})]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),f(b.id)},className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 transition-opacity",children:e.jsx(Fo,{className:"w-4 h-4"})})]})},b.id))})]})}),e.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(yd,{className:"w-8 h-8 animate-spin text-blue-600"})}):n.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f4,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Inicie a conversa fazendo uma pergunta"}),e.jsxs("div",{className:"mt-4 text-sm space-y-1",children:[e.jsx("p",{className:"text-gray-400",children:"Exemplos:"}),e.jsx("p",{className:"text-blue-600",children:'"Qual  meu saldo atual?"'}),e.jsx("p",{className:"text-blue-600",children:'"Como est minha situao financeira?"'}),e.jsx("p",{className:"text-blue-600",children:'"H algum alerta?"'})]})]})}):n.map(b=>e.jsx("div",{className:`flex ${b.tipo==="usuario"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-3 max-w-3xl ${b.tipo==="usuario"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${b.tipo==="usuario"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:b.tipo==="usuario"?e.jsx(hh,{className:"w-5 h-5"}):e.jsx(qb,{className:"w-5 h-5"})}),e.jsx("div",{className:`px-4 py-3 rounded-lg ${b.tipo==="usuario"?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:b.conteudo})})]})},b.id)),e.jsx("div",{ref:x})]}),e.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:e.jsxs("form",{onSubmit:y,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:b=>l(b.target.value),placeholder:"Digite sua pergunta...",disabled:u,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),e.jsx("button",{type:"submit",disabled:u||!i.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:u?e.jsx(yd,{className:"w-5 h-5 animate-spin"}):e.jsx(KA,{className:"w-5 h-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qb,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione ou crie uma conversa"}),e.jsx("p",{className:"text-sm mt-2",children:"Faa perguntas sobre seu fluxo de caixa e receba anlises inteligentes"})]})})})]})]})}const _6=t=>{let r;const a=new Set,s=(d,u)=>{const m=typeof d=="function"?d(r):d;if(!Object.is(m,r)){const x=r;r=u??(typeof m!="object"||m===null)?m:Object.assign({},r,m),a.forEach(h=>h(r,x))}},n=()=>r,l={setState:s,getState:n,getInitialState:()=>c,subscribe:d=>(a.add(d),()=>a.delete(d))},c=r=t(s,n,l);return l},_we=t=>t?_6(t):_6,Swe=t=>t;function Cwe(t,r=Swe){const a=pe.useSyncExternalStore(t.subscribe,pe.useCallback(()=>r(t.getState()),[t,r]),pe.useCallback(()=>r(t.getInitialState()),[t,r]));return pe.useDebugValue(a),a}const kwe=t=>{const r=_we(t),a=s=>Cwe(r,s);return Object.assign(a,r),a},Ewe=t=>kwe,Yr="/whatsapp",Ys={async getConfig(){return(await Ot.get(`${Yr}/config`)).data},async getStats(){return(await Ot.get(`${Yr}/analytics/dashboard`)).data},async getAgents(){return(await Ot.get(`${Yr}/agents`)).data},async createAgent(t){return(await Ot.post(`${Yr}/agents`,t)).data},async getAgent(t){return(await Ot.get(`${Yr}/agents/${t}`)).data},async updateAgent(t,r){return(await Ot.put(`${Yr}/agents/${t}`,r)).data},async deleteAgent(t){await Ot.delete(`${Yr}/agents/${t}`)},async getHandoffs(t){const r=t?{status:t}:{};return(await Ot.get(`${Yr}/handoffs/pending`,{params:r})).data},async createHandoff(t){return(await Ot.post(`${Yr}/handoffs`,t)).data},async getHandoff(t){return(await Ot.get(`${Yr}/handoffs/${t}`)).data},async assignHandoff(t,r){return(await Ot.post(`${Yr}/handoffs/${t}/assign`,{agent_id:r})).data},async resolveHandoff(t,r){await Ot.post(`${Yr}/handoffs/${t}/resolve`,{resolution_notes:r})},async cancelHandoff(t){await Ot.post(`${Yr}/handoffs/${t}/cancel`)},async getNotes(t){return(await Ot.get(`${Yr}/handoffs/${t}/notes`)).data},async addNote(t,r){return(await Ot.post(`${Yr}/handoffs/${t}/notes`,{content:r})).data},async getMessages(t){return(await Ot.get(`${Yr}/sessions/${t}/messages`)).data},async sendMessage(t,r){return(await Ot.post(`${Yr}/messages`,{session_id:t,message:r})).data},async createSession(t){return(await Ot.post(`${Yr}/sessions`,t)).data},async getSession(t){return(await Ot.get(`${Yr}/sessions/${t}`)).data},async testSentiment(t){return(await Ot.post(`${Yr}/sentiment/test`,{text:t})).data}},x0=Ewe()((t,r)=>({stats:null,isLoadingStats:!1,agents:[],currentAgent:null,isLoadingAgents:!1,handoffs:[],activeHandoff:null,isLoadingHandoffs:!1,filterStatus:"all",messages:{},isLoadingMessages:{},isConnected:!1,isSidebarOpen:!0,isBotAssistOpen:!1,notifications:[],fetchStats:async()=>{if(r().isLoadingStats){console.log(" Stats already loading, skipping...");return}console.log(" Fetching stats..."),t({isLoadingStats:!0});const s=new Promise((n,o)=>setTimeout(()=>o(new Error("Stats timeout")),1e4));try{const n=await Promise.race([Ys.getStats(),s]);console.log(" Stats received:",n),t({stats:n,isLoadingStats:!1})}catch(n){console.error(" Error fetching stats:",n),t({isLoadingStats:!1})}},fetchAgents:async()=>{t({isLoadingAgents:!0});try{const a=await Ys.getAgents();t({agents:a,isLoadingAgents:!1})}catch(a){console.error("Error fetching agents:",a),t({isLoadingAgents:!1})}},initializeCurrentAgent:async()=>{try{console.log(" Initializing current agent...");const a=localStorage.getItem("user");if(!a){console.warn(" No user found in localStorage");return}const s=JSON.parse(a);console.log(" User loaded:",s.email);const n=await Ys.getAgents();console.log(" Agents fetched:",n.length);let o=n.find(i=>i.user_id===s.id);o?(console.log(" Updating existing agent to online..."),o=await Ys.updateAgent(o.id,{status:"online"}),console.log(" Agent set to online:",o.id)):(console.log(" Creating new agent..."),o=await Ys.createAgent({name:s.name||s.email,email:s.email,status:"online",max_concurrent_chats:5,auto_assign:!0,receive_notifications:!0}),console.log(" Created new agent:",o.id)),t({currentAgent:o}),console.log(" Current agent initialized")}catch(a){console.error(" Error initializing current agent:",a)}},updateAgentStatus:async a=>{const{currentAgent:s}=r();if(s)try{const n=await Ys.updateAgent(s.id,{status:a});t({currentAgent:n}),t(o=>({agents:o.agents.map(i=>i.id===n.id?n:i)}))}catch(n){console.error("Error updating agent status:",n)}},fetchHandoffs:async a=>{t({isLoadingHandoffs:!0});try{const s=await Ys.getHandoffs(a);t({handoffs:s,isLoadingHandoffs:!1})}catch(s){console.error("Error fetching handoffs:",s),t({isLoadingHandoffs:!1})}},setFilterStatus:a=>{t({filterStatus:a});const s={all:void 0,pending:"pending",active:"active",my:"active"};r().fetchHandoffs(s[a])},takeHandoff:async a=>{const{currentAgent:s}=r();if(s)try{const n=await Ys.assignHandoff(a,s.id);t(o=>({handoffs:o.handoffs.map(i=>i.id===n.id?n:i)})),t({activeHandoff:n}),r().addNotification({type:"success",title:"Conversa assumida",message:`Voc assumiu a conversa com ${n.customer_name||n.phone_number}`,timestamp:new Date().toISOString()})}catch(n){console.error("Error taking handoff:",n),r().addNotification({type:"error",title:"Erro",message:"No foi possvel assumir a conversa",timestamp:new Date().toISOString()})}},resolveHandoff:async(a,s)=>{try{await Ys.resolveHandoff(a,s),t(n=>{var o;return{handoffs:n.handoffs.filter(i=>i.id!==a),activeHandoff:((o=n.activeHandoff)==null?void 0:o.id)===a?null:n.activeHandoff}}),r().addNotification({type:"success",title:"Conversa resolvida",message:"A conversa foi finalizada com sucesso",timestamp:new Date().toISOString()}),r().fetchStats()}catch(n){console.error("Error resolving handoff:",n),r().addNotification({type:"error",title:"Erro",message:"No foi possvel resolver a conversa",timestamp:new Date().toISOString()})}},setActiveHandoff:a=>{t({activeHandoff:a})},fetchMessages:async a=>{t(s=>({isLoadingMessages:{...s.isLoadingMessages,[a]:!0}}));try{const s=await Ys.getMessages(a);t(n=>({messages:{...n.messages,[a]:s},isLoadingMessages:{...n.isLoadingMessages,[a]:!1}}))}catch(s){console.error("Error fetching messages:",s),t(n=>({isLoadingMessages:{...n.isLoadingMessages,[a]:!1}}))}},sendMessage:async(a,s)=>{try{const n=await Ys.sendMessage(a,s);t(o=>({messages:{...o.messages,[a]:[...o.messages[a]||[],n]}}))}catch(n){console.error("Error sending message:",n),r().addNotification({type:"error",title:"Erro ao enviar",message:"No foi possvel enviar a mensagem",timestamp:new Date().toISOString()})}},addMessage:(a,s)=>{t(n=>({messages:{...n.messages,[a]:[...n.messages[a]||[],s]}}))},setConnected:a=>t({isConnected:a}),toggleSidebar:()=>t(a=>({isSidebarOpen:!a.isSidebarOpen})),toggleBotAssist:()=>t(a=>({isBotAssistOpen:!a.isBotAssistOpen})),addNotification:a=>{const s=Math.random().toString(36).substring(7);t(n=>({notifications:[...n.notifications,{...a,id:s}]})),setTimeout(()=>{r().removeNotification(s)},5e3)},removeNotification:a=>{t(s=>({notifications:s.notifications.filter(n=>n.id!==a)}))}}));class Awe{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.reconnectTimeout=null,this.pingInterval=null,this.agentId=null,this.token=null,this.handlers={},this.onConnectionChange=null,this.onMaxReconnectAttemptsReached=null}connect(r,a){var i;if(((i=this.ws)==null?void 0:i.readyState)===WebSocket.OPEN){console.log("WebSocket already connected");return}this.token=r,this.agentId=a;const o=`${"/api".replace("http://","ws://").replace("https://","wss://")}/ws/whatsapp/${a}?token=${r}`;console.log(" Connecting to WebSocket:",o);try{this.ws=new WebSocket(o),this.setupEventListeners()}catch(l){console.error("Error creating WebSocket:",l),this.handleReconnect()}}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.ws&&(this.ws.readyState===WebSocket.OPEN&&this.send({event:"leave_agent_room"}),this.ws.close(),this.ws=null),this.reconnectAttempts=0,this.token=null,this.agentId=null}setupEventListeners(){this.ws&&(this.ws.onopen=()=>{console.log(" WebSocket connected"),this.reconnectAttempts=0,this.onConnectionChange&&this.onConnectionChange(!0),this.send({event:"join_agent_room"}),this.pingInterval=window.setInterval(()=>{var r;((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN&&this.send({event:"ping"})},3e4)},this.ws.onclose=r=>{console.log(" WebSocket disconnected:",r.code,r.reason),this.onConnectionChange&&this.onConnectionChange(!1),r.code!==1e3&&this.handleReconnect()},this.ws.onerror=r=>{console.error("WebSocket error:",r)},this.ws.onmessage=r=>{try{const a=JSON.parse(r.data);this.handleMessage(a)}catch(a){console.error("Error parsing WebSocket message:",a)}})}handleMessage(r){const{event:a,data:s}=r;switch(console.log(" WebSocket message:",a,s),a){case"connected":console.log("Connection confirmed:",s);break;case"new_handoff":this.handlers.onNewHandoff&&this.handlers.onNewHandoff(s);break;case"handoff_assigned":this.handlers.onHandoffAssigned&&this.handlers.onHandoffAssigned(s);break;case"handoff_resolved":this.handlers.onHandoffResolved&&this.handlers.onHandoffResolved(s.handoff_id);break;case"new_message":this.handlers.onNewMessage&&this.handlers.onNewMessage(s.session_id,s.message);break;case"agent_status_change":this.handlers.onAgentStatusChange&&this.handlers.onAgentStatusChange(s);break;case"typing_indicator":this.handlers.onTypingIndicator&&this.handlers.onTypingIndicator(s.session_id,s.is_typing);break;default:console.warn("Unknown WebSocket event:",a)}}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached"),this.onMaxReconnectAttemptsReached&&this.onMaxReconnectAttemptsReached();return}this.reconnectAttempts++;const r=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Reconnecting in ${r}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),this.reconnectTimeout=setTimeout(()=>{this.token&&this.agentId&&this.connect(this.token,this.agentId)},r)}send(r){var a;((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(r)):console.warn("WebSocket is not open. Cannot send message:",r)}registerHandlers(r){this.handlers=r}joinAgentRoom(r){this.send({event:"join_agent_room",data:{agent_id:r}})}leaveAgentRoom(r){this.send({event:"leave_agent_room",data:{agent_id:r}})}sendTypingIndicator(r,a){this.send({event:"typing",data:{session_id:r,is_typing:a}})}isConnected(){var r;return((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN}getSocketId(){return this.agentId}}const co=new Awe,Pwe=(t,r)=>{const[a,s]=j.useState(!1),{addNotification:n,fetchHandoffs:o,setConnected:i,addMessage:l,fetchStats:c}=x0();return j.useEffect(()=>{if(!(!t||!r||a))return s(!0),console.log(" useSocket: Initializing WebSocket connection..."),co.onConnectionChange=d=>{i(d),n(d?{type:"success",title:"Conectado",message:"Conexo com servidor estabelecida",timestamp:new Date().toISOString()}:{type:"warning",title:"Desconectado",message:"Tentando reconectar ao servidor...",timestamp:new Date().toISOString()})},co.onMaxReconnectAttemptsReached=()=>{n({type:"error",title:"Erro de Conexo",message:"No foi possvel conectar ao servidor. Recarregue a pgina.",timestamp:new Date().toISOString()})},co.registerHandlers({onNewHandoff:d=>{console.log(" New handoff received:",d),o(),n({type:"info",title:"Nova Conversa",message:`${d.customer_name||d.phone_number} precisa de ajuda`,timestamp:new Date().toISOString()}),MR("Nova Conversa - WhatsApp",`${d.customer_name||d.phone_number} - ${d.reason}`,d.priority),(d.priority==="urgent"||d.priority==="high")&&S6()},onHandoffAssigned:d=>{console.log(" Handoff assigned:",d),o(),d.assigned_agent_id===r&&n({type:"success",title:"Conversa Atribuda",message:`Voc foi atribudo  conversa com ${d.customer_name||d.phone_number}`,timestamp:new Date().toISOString()})},onHandoffResolved:d=>{console.log(" Handoff resolved:",d),o(),c()},onNewMessage:(d,u)=>{console.log(" New message:",d,u),l(d,u),u.sender_type==="customer"&&(n({type:"info",title:"Nova Mensagem",message:u.content.substring(0,50)+"...",timestamp:new Date().toISOString()}),S6("message"))},onAgentStatusChange:d=>{console.log(" Agent status changed:",d),c()},onTypingIndicator:(d,u)=>{console.log(" Typing indicator:",d,u)}}),co.connect(t,r),()=>{co.disconnect()}},[t,r]),{isConnected:co.isConnected(),socketId:co.getSocketId(),sendTypingIndicator:co.sendTypingIndicator.bind(co)}};function MR(t,r,a){if(!("Notification"in window)){console.warn("Browser does not support notifications");return}if(Notification.permission==="granted"){const s=new Notification(t,{body:r,icon:"/logo192.png",badge:"/logo192.png",tag:"whatsapp-notification",requireInteraction:a==="urgent",silent:!1});s.onclick=()=>{window.focus(),s.close()},setTimeout(()=>s.close(),1e4)}else Notification.permission!=="denied"&&Notification.requestPermission().then(s=>{s==="granted"&&MR(t,r,a)})}function S6(t="handoff"){try{const r=new Audio(t==="handoff"?"/sounds/notification-handoff.mp3":"/sounds/notification-message.mp3");r.volume=.5,r.play().catch(a=>{console.warn("Could not play notification sound:",a)})}catch(r){console.warn("Error playing sound:",r)}}class Twe extends j.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){console.error("ErrorBoundary caught an error:",r,a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Algo deu errado"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Ocorreu um erro inesperado. Por favor, recarregue a pgina."}),this.state.error&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded border border-gray-200",children:e.jsx("p",{className:"text-xs font-mono text-gray-700 break-words",children:this.state.error.message})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Recarregar Pgina"})]})}):this.props.children}}const Owe=j.memo(({stats:t,isLoading:r})=>{if(r)return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[...Array(6)].map((s,n)=>e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},n))});if(!t)return null;const a=[{label:"Total",value:t.total_handoffs,icon:"",color:"bg-blue-50 text-blue-700"},{label:"Aguardando",value:t.pending_count,icon:"",color:"bg-yellow-50 text-yellow-700"},{label:"Ativas",value:t.active_count,icon:"",color:"bg-green-50 text-green-700"},{label:"Resolvidas",value:t.resolved_count,icon:"",color:"bg-gray-50 text-gray-700"},{label:"Agentes Online",value:t.available_agents||0,icon:"",color:"bg-purple-50 text-purple-700"},{label:"Tempo Mdio",value:t.avg_response_time_seconds?Math.round(t.avg_response_time_seconds/60)+"min":"0min",icon:"",color:"bg-orange-50 text-orange-700"}];return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:a.map((s,n)=>e.jsxs("div",{className:`rounded-lg p-4 ${s.color}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("p",{className:"text-xs font-medium opacity-75",children:s.label})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.value})]},n))})}),Fwe=j.memo(({agents:t,isLoading:r})=>{const{currentAgent:a,updateAgentStatus:s}=x0(),n={online:"bg-green-500",busy:"bg-yellow-500",away:"bg-orange-500",offline:"bg-gray-400"},o={online:"Online",busy:"Ocupado",away:"Ausente",offline:"Offline"};return r?e.jsx("div",{className:"space-y-2",children:[...Array(3)].map((i,l)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-1"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]},l))}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:["Agentes (",t.length,")"]}),t.map(i=>e.jsxs("div",{className:`
            flex items-center gap-3 p-2 rounded-lg transition-colors
            ${(a==null?void 0:a.id)===i.id?"bg-blue-50":"hover:bg-gray-50"}
          `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n[i.status]}`}),i.status==="online"&&e.jsx("div",{className:`absolute inset-0 w-2 h-2 rounded-full ${n[i.status]} animate-ping opacity-75`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:o[i.status]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[i.current_chats,"/",i.max_concurrent_chats]})]})]}),(a==null?void 0:a.id)===i.id&&e.jsxs("select",{value:i.status,onChange:l=>s(l.target.value),className:"text-xs border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"busy",children:"Ocupado"}),e.jsx("option",{value:"away",children:"Ausente"}),e.jsx("option",{value:"offline",children:"Offline"})]})]},i.id)),t.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum agente disponvel"})]})}),$we=j.memo(({handoffs:t,activeHandoff:r,isLoading:a})=>{const{setActiveHandoff:s,takeHandoff:n}=x0(),o={urgent:"bg-red-100 text-red-700 border-red-200",high:"bg-orange-100 text-orange-700 border-orange-200",medium:"bg-yellow-100 text-yellow-700 border-yellow-200",low:"bg-gray-100 text-gray-700 border-gray-200"},i={urgent:" Urgente",high:" Alta",medium:" Mdia",low:" Baixa"},l={pending:"",active:"",resolved:"",cancelled:""};return a?e.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((c,d)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})},d))}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma conversa"})]})}):e.jsx("div",{className:"p-4 space-y-3",children:t.map(c=>{const d=(r==null?void 0:r.id)===c.id,u=c.status==="pending";return e.jsx("div",{onClick:()=>s(c),className:`
              border rounded-lg p-3 cursor-pointer transition-all
              ${d?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}
            `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center text-lg font-semibold
                ${o[c.priority]}
              `,children:c.customer_name?c.customer_name.charAt(0).toUpperCase():""}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:c.customer_name||"Cliente"}),e.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:CNe(new Date(c.created_at),{addSuffix:!0,locale:cw})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:c.phone_number}),e.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:c.reason_details||c.reason}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`
                    text-xs px-2 py-1 rounded border
                    ${o[c.priority]}
                  `,children:i[c.priority]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:l[c.status]}),u&&e.jsx("button",{onClick:m=>{m.stopPropagation(),n(c.id)},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Assumir"})]})]})]})]})},c.id)})})}),Rwe=({handoff:t})=>{const{messages:r,isLoadingMessages:a,fetchMessages:s,sendMessage:n,resolveHandoff:o,toggleBotAssist:i}=x0(),[l,c]=j.useState(""),[d,u]=j.useState(!1),[m,x]=j.useState(""),h=j.useRef(null),v=r[t.session_id]||[],p=a[t.session_id]||!1;j.useEffect(()=>{t.session_id&&s(t.session_id)},[t.session_id]),j.useEffect(()=>{var N;(N=h.current)==null||N.scrollIntoView({behavior:"smooth"})},[v]);const g=async()=>{l.trim()&&(await n(t.session_id,l),c(""))},y=async()=>{if(!m.trim()){alert("Por favor, adicione notas de resoluo");return}await o(t.id,m),u(!1),x("")},f=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),g())},b={urgent:"border-red-500 bg-red-50",high:"border-orange-500 bg-orange-50",medium:"border-yellow-500 bg-yellow-50",low:"border-gray-500 bg-gray-50"};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`border-b-4 ${b[t.priority]} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-lg font-semibold",children:t.customer_name?t.customer_name.charAt(0).toUpperCase():""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.customer_name||"Cliente"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.phone_number})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white hover:shadow transition-all",title:"Bot Assist",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),t.status==="active"&&e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Resolver"})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Motivo:"})," ",t.reason]}),t.reason_details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.reason_details})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:p?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando mensagens..."})]})}):v.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-sm font-medium",children:"Nenhuma mensagem ainda"})]})}):e.jsxs(e.Fragment,{children:[v.map(N=>{const _=N.sender_type==="agent";return N.sender_type==="system"?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full",children:N.content})},N.id):e.jsx("div",{className:`flex ${_?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${_?"order-2":"order-1"}`,children:[e.jsx("div",{className:`
                      rounded-lg px-4 py-2
                      ${_?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}
                    `,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:N.content})}),e.jsx("p",{className:`text-xs text-gray-500 mt-1 ${_?"text-right":"text-left"}`,children:$R(new Date(N.timestamp),"HH:mm",{locale:cw})})]})},N.id)}),e.jsx("div",{ref:h})]})}),t.status==="active"&&!d&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:l,onChange:N=>c(N.target.value),onKeyPress:f,placeholder:"Digite sua mensagem...",rows:3,className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:g,disabled:!l.trim(),className:"px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:"Enviar"})]})}),d&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resolver Conversa"}),e.jsx("textarea",{value:m,onChange:N=>x(N.target.value),placeholder:"Descreva como foi resolvido o atendimento...",rows:4,className:"w-full border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>{u(!1),x("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:y,disabled:!m.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Confirmar Resoluo"})]})]})})]})},Dwe=({handoff:t})=>{const[r,a]=j.useState(""),[s,n]=j.useState(null),[o,i]=j.useState(!1),l=async()=>{if(r.trim()){i(!0);try{const d=await Ys.testSentiment(r);n(d)}catch(d){console.error("Error analyzing sentiment:",d)}finally{i(!1)}}},c=["Entendo sua frustrao. Vou verificar isso imediatamente.","Obrigado por aguardar. Estou analisando sua solicitao.","Vou encaminhar para o setor responsvel e retorno em breve.","Consegui resolver! Precisa de mais alguma coisa?"];return t?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bot Assist "}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Anlise de sentimento e sugestes"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Analisar Sentimento"}),e.jsx("textarea",{value:r,onChange:d=>a(d.target.value),placeholder:"Cole uma mensagem do cliente...",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:l,disabled:!r.trim()||o,className:"mt-2 w-full px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:o?"Analisando...":"Analisar"}),s&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Score:"}),e.jsx("span",{className:`text-sm font-bold ${s.score>0?"text-green-600":s.score<0?"text-red-600":"text-gray-600"}`,children:s.score.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Label:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.label})]}),s.emotions.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Emoes:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.emotions.map((d,u)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:d},u))})]}),s.triggers.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Gatilhos:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.triggers.map((d,u)=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded",children:d},u))})]}),s.should_handoff&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:" Recomenda handoff humano"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Respostas Sugeridas"}),e.jsx("div",{className:"space-y-2",children:c.map((d,u)=>e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(d)},className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 text-sm text-gray-700 transition-colors",children:d},u))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Aes Rpidas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full px-4 py-2 bg-orange-50 text-orange-700 border border-orange-200 rounded-lg text-sm font-medium hover:bg-orange-100 transition-colors",children:" Ver histrico completo"}),e.jsx("button",{className:"w-full px-4 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded-lg text-sm font-medium hover:bg-purple-100 transition-colors",children:" Anlise de perfil"}),e.jsx("button",{className:"w-full px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors",children:" Criar ticket"})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Selecione uma conversa para ver sugestes"})})},Mwe=({notification:t,onClose:r})=>{const[a,s]=j.useState(!1);j.useEffect(()=>{const i=setTimeout(()=>{s(!0),setTimeout(r,300)},5e3);return()=>clearTimeout(i)},[r]);const n={info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800"},o={info:"",success:"",warning:"",error:""};return e.jsx("div",{className:`
        max-w-sm w-full bg-white border-2 rounded-lg shadow-lg p-4
        transform transition-all duration-300 ease-out
        ${a?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
        ${n[t.type]}
      `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:o[t.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-sm opacity-90",children:t.message})]}),e.jsx("button",{onClick:()=>{s(!0),setTimeout(r,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},Iwe=j.memo(({isConnected:t,socketId:r})=>e.jsxs("div",{className:`
      flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium
      ${t?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
    `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`
          w-2 h-2 rounded-full
          ${t?"bg-green-500":"bg-red-500"}
        `}),t&&e.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-green-500 rounded-full animate-ping opacity-75"})]}),e.jsx("span",{children:t?"Online":"Desconectado"}),t&&r&&e.jsxs("span",{className:"text-[10px] opacity-50 font-mono",title:`Socket ID: ${r}`,children:[" ",r.substring(0,6)]})]})),Lwe=()=>{const[t,r]=j.useState("default"),[a,s]=j.useState(!1);j.useEffect(()=>{"Notification"in window&&(r(Notification.permission),Notification.permission==="default"&&s(!0))},[]);const n=async()=>{if("Notification"in window){const o=await Notification.requestPermission();r(o),o==="granted"&&(s(!1),new Notification("Notificaes Ativadas",{body:"Voc receber alertas de novas conversas",icon:"/logo192.png"}))}};return!a||t==="granted"?null:e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Ativar Notificaes"}),e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Receba alertas instantneos quando novas conversas precisarem de atendimento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Ativar Notificaes"}),e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-white text-blue-700 text-sm font-medium rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors",children:"Agora No"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"flex-shrink-0 text-blue-400 hover:text-blue-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},Bwe=()=>{const[t,r]=pe.useState(!0);console.log(" WhatsAppDashboard component rendering...");const{stats:a,agents:s,handoffs:n,activeHandoff:o,filterStatus:i,isLoadingStats:l,isLoadingAgents:c,isLoadingHandoffs:d,isSidebarOpen:u,isBotAssistOpen:m,isConnected:x,notifications:h,currentAgent:v,fetchStats:p,fetchAgents:g,fetchHandoffs:y,initializeCurrentAgent:f,setFilterStatus:b,toggleSidebar:N,removeNotification:_}=x0(),w=localStorage.getItem("access_token"),{socketId:S}=Pwe(w,(v==null?void 0:v.id)||null);return j.useEffect(()=>{let C=!0,E=!1,T=null,q=!1;const A=async()=>{if(!(!C||E)){E=!0;try{console.log(" Initializing WhatsApp Dashboard...");const G=new Promise((L,Z)=>setTimeout(()=>Z(new Error("Initialization timeout")),15e3));try{await Promise.race([Promise.all([f(),p(),g(),y()]),G])}catch(L){console.warn(" Initialization timeout, continuing anyway:",L)}console.log(" Dashboard initialized")}catch(G){console.error(" Error initializing dashboard:",G)}finally{C&&r(!1)}}},O=async()=>{if(!(q||!C)){if(document.hidden){console.log(" Page hidden, skipping refresh");return}q=!0,console.log(" Refreshing dashboard data...");try{await Promise.all([p(),y(i==="all"?void 0:i)])}catch(G){console.error("Error refreshing data:",G)}finally{q=!1}}};A(),T=setInterval(O,6e4);const V=()=>{!document.hidden&&C&&(console.log(" Page visible again, refreshing data"),O())};return document.addEventListener("visibilitychange",V),()=>{C=!1,T&&clearInterval(T),document.removeEventListener("visibilitychange",V)}},[]),t?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando WhatsApp Dashboard..."})]})}):e.jsx(Twe,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50",role:"main","aria-label":"WhatsApp Dashboard",children:[e.jsx("div",{className:`
        transition-all duration-300 ease-in-out
        ${u?"w-80":"w-0"}
        border-r border-gray-200 bg-white overflow-hidden
      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Atendimento WhatsApp"}),e.jsx("div",{className:"mt-2",children:e.jsx(Iwe,{isConnected:x,socketId:S})})]}),e.jsx("button",{onClick:N,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Recolher painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","active","my"].map(C=>e.jsxs("button",{onClick:()=>b(C),className:`
                    px-3 py-1.5 rounded-lg text-sm font-medium transition-colors
                    ${i===C?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                  `,children:[C==="all"&&"Todas",C==="pending"&&"Aguardando",C==="active"&&"Ativas",C==="my"&&"Minhas"]},C))})]}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx(Fwe,{agents:s,isLoading:c})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx($we,{handoffs:n,activeHandoff:o,isLoading:d})})]})}),!u&&e.jsx("button",{onClick:N,className:"absolute top-4 left-4 z-10 p-2 bg-white rounded-lg shadow-lg hover:bg-gray-50 transition-colors",title:"Expandir painel",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(Lwe,{})}),e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsx(Owe,{stats:a,isLoading:l})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1",children:o?e.jsx(Rwe,{handoff:o}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Selecione uma conversa"}),e.jsx("p",{className:"text-sm mt-1",children:"Escolha uma conversa da fila para comear"})]})})}),m&&e.jsx("div",{className:"w-80 border-l border-gray-200 bg-white",children:e.jsx(Dwe,{handoff:o})})]})]}),e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:h.map(C=>e.jsx(Mwe,{notification:C,onClose:()=>_(C.id)},C.id))})]})})},zwe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState([]),[u,m]=j.useState([]),[x,h]=j.useState(!1),[v,p]=j.useState(null);j.useEffect(()=>{g()},[]);const g=async()=>{try{s(!0);const N=await U.get("/comissoes/configuracoes/funcionarios");N.data.success&&r(N.data.data)}catch(N){console.error("Erro ao carregar funcionrios:",N),p("Erro ao carregar funcionrios com comisses")}finally{s(!1)}},y=async(N=null)=>{l(N),o(!0),h(!0);try{const _=await U.get("/comissoes/arvore-produtos");if(_.data.success&&m(_.data.data),N){const w=await U.get(`/comissoes/configuracoes/funcionario/${N}`);w.data.success&&d(w.data.data)}}catch(_){console.error("Erro ao carregar dados:",_),p("Erro ao carregar dados de configurao")}finally{h(!1)}},f=()=>{o(!1),l(null),d([]),m([]),g()},b=async N=>{const _=prompt("Digite o ID do funcionrio de destino:");if(_)try{const w=await U.post("/comissoes/configuracoes/duplicar",{funcionario_origem_id:parseInt(N),funcionario_destino_id:parseInt(_)});w.data.success&&(alert(w.data.message),g())}catch(w){console.error("Erro ao duplicar configurao:",w),alert("Erro ao duplicar configurao")}};return a?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Cadastro de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie as comisses dos funcionrios"})]}),e.jsxs("button",{onClick:()=>y(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx("span",{children:"+"}),"Nova Comisso"]})]})}),v&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:v}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:"Nenhuma comisso configurada"}),e.jsx("p",{className:"text-sm",children:'Clique em "Nova Comisso" para comear'})]}):e.jsx("div",{className:"divide-y",children:t.map(N=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>y(N.id),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:N.nome.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:N.nome}),e.jsx("p",{className:"text-sm text-gray-500",children:N.cargo})]})]}),e.jsxs("div",{className:"mt-2 flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[e.jsx("strong",{children:N.categorias})," categorias"]}),e.jsxs("span",{children:[e.jsx("strong",{children:N.subcategorias})," subcategorias"]}),e.jsxs("span",{children:[e.jsx("strong",{children:N.produtos})," produtos especficos"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),y(N.id)},className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded",children:"Editar"}),e.jsx("button",{onClick:_=>{_.stopPropagation(),b(N.id)},className:"px-3 py-1 text-gray-600 hover:bg-gray-100 rounded",title:"Duplicar configurao para outro funcionrio",children:"Duplicar"})]})]})},N.id))})}),n&&e.jsx(qwe,{funcionarioId:i,configuracoes:c,arvoreProdutos:u,loading:x,onClose:f,onSave:()=>{g(),f()}})]})},qwe=({funcionarioId:t,configuracoes:r,arvoreProdutos:a,loading:s,onClose:n,onSave:o})=>{const[i,l]=j.useState([]),[c,d]=j.useState(t||""),[u,m]=j.useState(""),[x,h]=j.useState({desconta_taxa_cartao:!0,desconta_impostos:!0,desconta_taxa_entrega:!1,comissao_venda_parcial:!0}),[v,p]=j.useState({}),[g,y]=j.useState({}),[f,b]=j.useState(null),[N,_]=j.useState([]),[w,S]=j.useState(!1),[C,E]=j.useState({atual:0,total:0}),[T,q]=j.useState(null);j.useEffect(()=>{A()},[]),j.useEffect(()=>{const I={};if(r.forEach(k=>{const M=`${k.tipo}-${k.referencia_id}`;I[M]=k}),y(I),r.length>0){const k=r[0],M={desconta_taxa_cartao:k.desconta_taxa_cartao??!0,desconta_impostos:k.desconta_impostos??!0,desconta_taxa_entrega:k.desconta_custo_entrega??!1,comissao_venda_parcial:k.comissao_venda_parcial??!0};h(M),q(M)}},[r]);const A=async()=>{try{const I=await U.get("/comissoes/funcionarios");if(I.data.success&&(l(I.data.data),t)){const k=I.data.data.find(M=>M.id===parseInt(t));k&&k.data_fechamento_comissao&&m(String(k.data_fechamento_comissao))}}catch(I){console.error("Erro ao carregar funcionrios:",I)}},O=I=>{p(k=>({...k,[I]:!k[I]}))},V=(I,k,M)=>{const z=`${I}-${k}`,oe=g[z];b({tipo:I,id:k,nome:M,tipo_calculo:(oe==null?void 0:oe.tipo_calculo)||"percentual",percentual:(oe==null?void 0:oe.percentual)||10,percentual_loja:(oe==null?void 0:oe.percentual_loja)||50,permite_edicao_venda:(oe==null?void 0:oe.permite_edicao_venda)||!1,observacoes:(oe==null?void 0:oe.observacoes)||""})},G=()=>{if(!c){alert("Selecione um funcionrio");return}if(!f){alert("Selecione um item para configurar");return}if(N.some(M=>M.tipo===f.tipo&&M.referencia_id===f.id)){alert("Este item j foi adicionado  lista!");return}if(f.tipo==="categoria"&&N.some(z=>(z.tipo==="subcategoria"||z.tipo==="produto")&&z.nome.includes(f.nome))&&!confirm(` ATENO: Voc j configurou produtos/subcategorias desta categoria.

HIERARQUIA: Produto > Subcategoria > Categoria

A configurao mais especfica tem prioridade.

Deseja adicionar mesmo assim?`))return;const k={tipo:f.tipo,referencia_id:f.id,nome:f.nome,tipo_calculo:f.tipo_calculo,percentual:parseFloat(f.percentual)||0,percentual_loja:f.tipo_calculo==="lucro"?parseFloat(f.percentual_loja)||0:null,permite_edicao_venda:f.permite_edicao_venda||!1,observacoes:f.observacoes||""};_([...N,k]),b(null),alert('Configurao adicionada! Configure mais itens ou clique em "Salvar Todas"')},L=I=>{_(N.filter((k,M)=>M!==I))},Z=async()=>{var I,k,M;if(!c){alert("Selecione um funcionrio");return}if(N.length===0){alert("Adicione pelo menos uma configurao");return}S(!0);try{u&&await U.put(`/funcionarios/${c}`,{data_fechamento_comissao:parseInt(u)});const z=N.map(W=>({funcionario_id:parseInt(c),tipo:W.tipo,referencia_id:W.referencia_id,tipo_calculo:W.tipo_calculo,percentual:parseFloat(W.percentual)||0,percentual_loja:W.percentual_loja?parseFloat(W.percentual_loja):null,permite_edicao_venda:W.permite_edicao_venda||!1,observacoes:W.observacoes||"",desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_taxa_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial}));console.log("Enviando configuraes em batch:",z);const oe=await U.post("/comissoes/configuracoes/batch",{configuracoes:z});if(console.log("Resposta do servidor:",oe.data),oe.data.success){if(alert(` ${oe.data.total} configuraes salvas com sucesso!`),_([]),c)try{const W=await U.get(`/comissoes/configuracoes/funcionario/${c}`);if(W.data.success){const ae={};W.data.data.forEach(ee=>{const ce=`${ee.tipo}-${ee.referencia_id}`;ae[ce]=ee}),y(ae)}}catch(W){console.error("Erro ao recarregar configuraes:",W)}o()}}catch(z){console.error("Erro ao salvar configuraes:",z),console.error("Resposta do servidor:",(I=z.response)==null?void 0:I.data);const oe=((M=(k=z.response)==null?void 0:k.data)==null?void 0:M.detail)||z.message||"Erro desconhecido";alert(` Erro ao salvar configuraes:

${oe}`)}finally{S(!1),E({atual:0,total:0})}},D=async()=>{if(!c){alert("Selecione um funcionrio");return}if(!f){if(Object.keys(g).length===0){alert("Nenhuma configurao encontrada para atualizar as regras.");return}if(!(T&&(x.desconta_taxa_cartao!==T.desconta_taxa_cartao||x.desconta_impostos!==T.desconta_impostos||x.desconta_taxa_entrega!==T.desconta_taxa_entrega||x.comissao_venda_parcial!==T.comissao_venda_parcial))){alert("Nenhuma alterao detectada nas regras.");return}if(!confirm("Deseja atualizar as regras de clculo em TODAS as configuraes deste funcionrio?"))return;try{console.log(" SALVANDO REGRAS - Estado atual:",x);for(const[k,M]of Object.entries(g)){const z={funcionario_id:parseInt(c),tipo:M.tipo,referencia_id:M.referencia_id,tipo_calculo:M.tipo_calculo,percentual:parseFloat(M.percentual),percentual_loja:M.percentual_loja?parseFloat(M.percentual_loja):null,desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_custo_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial,permite_edicao_venda:M.permite_edicao_venda,observacoes:M.observacoes||""};console.log(" Dados sendo enviados ao backend:",z),await U.post("/comissoes/configuracoes",z)}alert(" Regras atualizadas com sucesso em todas as configuraes!"),q(x)}catch(k){console.error("Erro ao atualizar regras:",k),alert("Erro ao atualizar regras")}return}if(!f){alert("Selecione um item para configurar");return}try{const I={funcionario_id:parseInt(c),tipo:f.tipo,referencia_id:f.id,tipo_calculo:f.tipo_calculo,percentual:parseFloat(f.percentual),percentual_loja:f.tipo_calculo==="lucro"?parseFloat(f.percentual_loja):null,desconta_taxa_cartao:x.desconta_taxa_cartao,desconta_impostos:x.desconta_impostos,desconta_custo_entrega:x.desconta_taxa_entrega,comissao_venda_parcial:x.comissao_venda_parcial,permite_edicao_venda:f.permite_edicao_venda,observacoes:f.observacoes},k=await U.post("/comissoes/configuracoes",I);if(k.data.success){alert("Configurao salva com sucesso!");const M=`${f.tipo}-${f.id}`;y(z=>({...z,[M]:{...I,id:k.data.config_id,nome_item:f.nome}})),b(null)}}catch(I){console.error("Erro ao salvar configurao:",I),alert("Erro ao salvar configurao")}},K=(I,k)=>{const M=`${I}-${k}`;return g[M]},R=(I,k)=>!!K(I,k),B=(I,k)=>N.some(M=>M.tipo===I&&M.referencia_id===k),F=(I,k=0)=>{const M="  ".repeat(k),z=k===0?"":"",oe=I.filhas&&I.filhas.length>0,W=I.produtos&&I.produtos.length>0;return R("categoria",I.id)?v[I.id]?e.jsxs(pe.Fragment,{children:[oe&&I.filhas.map(ee=>F(ee,k+1)),W&&e.jsx("div",{className:"pl-6",style:{paddingLeft:`${24+k*20}px`},children:I.produtos.map(ee=>{const ce=R("produto",ee.id),ie=B("produto",ee.id);return ce?null:e.jsxs("div",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${ie?"bg-yellow-50":""}`,onClick:()=>V("produto",ee.id,ee.nome),children:[e.jsxs("span",{className:"text-sm",children:[" ",ee.nome]}),ie&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]},`prod-${ee.id}`)})})]},`cat-${I.id}`):null:e.jsxs("div",{className:"border-b last:border-b-0",children:[e.jsxs("div",{className:`p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${B("categoria",I.id)?"bg-yellow-50":""}`,style:{paddingLeft:`${12+k*20}px`},onClick:()=>V("categoria",I.id,`${M}${I.nome}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(oe||W)&&e.jsx("button",{onClick:ee=>{ee.stopPropagation(),O(I.id)},className:"text-gray-500",children:v[I.id]?"":""}),e.jsxs("span",{className:k===0?"font-medium":"text-sm",children:[z," ",I.nome,k>0&&e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Nvel ",k+1,")"]})]})]}),B("categoria",I.id)&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]}),v[I.id]&&e.jsxs("div",{children:[oe&&e.jsx("div",{children:I.filhas.map(ee=>F(ee,k+1))}),W&&e.jsx("div",{className:"pl-6",style:{paddingLeft:`${24+k*20}px`},children:I.produtos.map(ee=>{const ce=R("produto",ee.id),ie=B("produto",ee.id);return ce?null:e.jsxs("div",{className:`p-2 flex items-center justify-between cursor-pointer hover:bg-gray-50 ${ie?"bg-yellow-50":""}`,onClick:()=>V("produto",ee.id,ee.nome),children:[e.jsxs("span",{className:"text-sm",children:[" ",ee.nome]}),ie&&e.jsx("span",{className:"text-xs text-yellow-600",children:" Na lista"})]},`prod-${ee.id}`)})})]})]},`cat-${I.id}`)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Configurao de Comisso"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio"}),e.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"w-full border rounded-lg px-3 py-2",disabled:!!t,children:[e.jsx("option",{value:"",children:"Selecione um funcionrio"}),i.map(I=>e.jsxs("option",{value:I.id,children:[I.nome," - ",I.cargo]},I.id))]}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded text-xs",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600",children:""}),e.jsxs("div",{className:"text-blue-700",children:[e.jsx("strong",{children:"Apenas parceiros podem receber comisses."}),e.jsx("br",{}),'Se a pessoa no aparecer na lista, marque-a como "Parceiro" no cadastro de pessoas primeiro.']})]})})]}),c&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Dia do ms para fechamento de comisso"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"31",value:u,onChange:I=>m(I.target.value),placeholder:"Ex: 5 (paga dia 5 de cada ms)",className:"flex-1 border rounded-lg px-3 py-2"}),e.jsx("button",{onClick:async()=>{try{await U.put(`/clientes/${c}`,{data_fechamento_comissao:u?parseInt(u):null}),alert(" Data de fechamento salva com sucesso!")}catch(I){console.error("Erro ao salvar data:",I),alert(" Erro ao salvar data de fechamento")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 whitespace-nowrap",children:" Salvar Data"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe em branco para pagamento 30 dias aps a venda (padro)"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Regras de Clculo"}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded text-sm",children:[e.jsx("div",{className:"font-semibold text-blue-800 mb-1",children:" Hierarquia de Configuraes"}),e.jsxs("div",{className:"text-blue-700 text-xs",children:[e.jsx("strong",{children:"Produto"})," (prioridade mxima)  ",e.jsx("strong",{children:"Subcategoria"}),"  ",e.jsx("strong",{children:"Categoria"})," (prioridade mnima)",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600",children:"Ao vender um produto, o sistema busca a configurao mais especfica."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_taxa_cartao,onChange:I=>{console.log(" Checkbox TAXA CARTO alterado para:",I.target.checked),h({...x,desconta_taxa_cartao:I.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta taxa de carto"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_impostos,onChange:I=>{console.log(" Checkbox IMPOSTOS alterado para:",I.target.checked),h({...x,desconta_impostos:I.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta impostos"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.desconta_taxa_entrega,onChange:I=>{console.log(" Checkbox TAXA ENTREGA alterado para:",I.target.checked),h({...x,desconta_taxa_entrega:I.target.checked})},className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Desconta taxa de entrega"})]}),e.jsx("div",{className:"border-t pt-2 mt-3",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.comissao_venda_parcial,onChange:I=>{console.log(" Checkbox VENDA PARCIAL alterado para:",I.target.checked),h({...x,comissao_venda_parcial:I.target.checked})},className:"rounded"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"Gerar comisso em vendas parciais"}),e.jsx("span",{className:"text-xs text-gray-500",children:x.comissao_venda_parcial?"Comisso gerada proporcionalmente a cada pagamento recebido":"Comisso gerada somente quando a venda estiver 100% paga"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Seleo de Produtos"}),Object.keys(g).length>0&&e.jsxs("div",{className:"mb-4 border rounded-lg p-3 bg-green-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:[" Itens J Configurados (",Object.keys(g).length,")"]}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(g).map(([I,k])=>e.jsxs("div",{className:"w-full flex items-center justify-between text-xs bg-white p-2 rounded hover:bg-gray-50 transition-colors group",children:[e.jsxs("button",{onClick:()=>V(k.tipo,k.referencia_id,k.nome_item||"Item"),className:"flex-1 flex items-center gap-2 text-left",children:[k.tipo==="categoria"&&"",k.tipo==="subcategoria"&&"",k.tipo==="produto"&&"",e.jsx("span",{className:"text-gray-700",children:k.nome_item||"Item"}),e.jsx("span",{className:"text-green-600 font-medium ml-auto",children:k.tipo_calculo==="percentual"?`${k.percentual}%`:`Lucro ${k.percentual}%`})]}),e.jsx("button",{onClick:async()=>{if(confirm(`Deseja remover a configurao de "${k.nome_item||"Item"}"?`))try{await U.delete(`/comissoes/configuracoes/${k.id}`),alert("Configurao removida com sucesso!");const M={...g};delete M[I],y(M)}catch(M){console.error("Erro ao remover:",M),alert("Erro ao remover configurao")}},className:"ml-2 text-red-600 hover:text-red-800 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},I))}),e.jsx("p",{className:"text-xs text-green-700 mt-2 italic",children:" Clique em um item para editar"})]}),s?e.jsx("div",{className:"text-center py-8",children:"Carregando..."}):e.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:a.map(I=>F(I,0))},Object.keys(g).length)]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Configurao"}),f?e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:[f.tipo==="categoria"&&" ",f.tipo==="subcategoria"&&" ",f.tipo==="produto"&&" ",f.nome]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Tipo: ",f.tipo]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Comisso"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"percentual",checked:f.tipo_calculo==="percentual",onChange:I=>b({...f,tipo_calculo:I.target.value})}),e.jsx("span",{className:"text-sm",children:"Percentual fixo sobre venda"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",value:"lucro",checked:f.tipo_calculo==="lucro",onChange:I=>b({...f,tipo_calculo:I.target.value})}),e.jsx("span",{className:"text-sm",children:"Diviso de lucro"})]})]})]}),f.tipo_calculo==="percentual"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Percentual"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:f.percentual,onChange:I=>b({...f,percentual:I.target.value}),className:"border rounded px-3 py-2 w-24"}),e.jsx("span",{children:"%"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Diviso do Lucro"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Funcionrio"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:f.percentual,onChange:I=>{const k=parseFloat(I.target.value);b({...f,percentual:k,percentual_loja:100-k})},className:"border rounded px-2 py-1 w-20"}),e.jsx("span",{className:"text-sm",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loja"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"number",value:f.percentual_loja,readOnly:!0,className:"border rounded px-2 py-1 w-20 bg-gray-100"}),e.jsx("span",{className:"text-sm",children:"%"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Clculo: Preo Venda - Desconto - Taxas - Impostos - Custo = Lucro"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:f.permite_edicao_venda,onChange:I=>b({...f,permite_edicao_venda:I.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Permite editar percentual na venda"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Observaes"}),e.jsx("textarea",{value:f.observacoes,onChange:I=>b({...f,observacoes:I.target.value}),className:"border rounded px-3 py-2 w-full",rows:"3"})]}),e.jsx("button",{onClick:G,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded mb-2",children:" Adicionar  Lista"}),e.jsx("button",{onClick:D,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:" Salvar Agora"})]}):e.jsx("div",{className:"border rounded-lg p-8 text-center text-gray-500",children:e.jsx("p",{children:"Selecione uma categoria, subcategoria ou produto ao lado para configurar"})}),N.length>0&&e.jsxs("div",{className:"mt-6 border rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Configuraes a Salvar (",N.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:N.map((I,k)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:I.nome}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",I.tipo_calculo==="percentual"?`${I.percentual}%`:`Lucro ${I.percentual}%`,")"]})]}),e.jsx("button",{onClick:()=>L(k),className:"text-red-600 hover:text-red-800",children:""})]},k))}),e.jsx("button",{onClick:Z,disabled:w,className:`w-full py-2 rounded mt-4 text-white ${w?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:w?e.jsxs("span",{children:[" Salvando ",C.atual,"/",C.total,"..."]}):" Salvar Todas as Configuraes"})]})]})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[" As configuraes se aplicam ",e.jsx("strong",{children:"apenas s comisses futuras"}),". Comisses j geradas no so alteradas."]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-50 bg-white",children:"Fechar"}),e.jsxs("button",{onClick:D,disabled:!f&&(!T||x.desconta_taxa_cartao===T.desconta_taxa_cartao&&x.desconta_impostos===T.desconta_impostos&&x.desconta_taxa_entrega===T.desconta_taxa_entrega&&x.comissao_venda_parcial===T.comissao_venda_parcial),className:`px-6 py-2 rounded font-medium ${f||T&&(x.desconta_taxa_cartao!==T.desconta_taxa_cartao||x.desconta_impostos!==T.desconta_impostos||x.desconta_taxa_entrega!==T.desconta_taxa_entrega||x.comissao_venda_parcial!==T.comissao_venda_parcial)?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[" ",f?"Salvar Alteraes":"Atualizar Regras"]})]})]})})]})})},Vwe=({comissaoId:t,onClose:r})=>{var p,g,y,f,b;const[a,s]=j.useState(null),[n,o]=j.useState(!0),[i,l]=j.useState(null);j.useEffect(()=>{t&&c()},[t]),j.useEffect(()=>{const N=_=>{_.key==="Escape"&&r()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[r]);const c=async()=>{var N,_;try{o(!0),l(null);const w=await U.get(`/comissoes/comissao/${t}`);w.data.success?s(w.data.comissao):l("Erro ao carregar detalhes da comisso")}catch(w){console.error("Erro ao carregar detalhe:",w),l(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao conectar com o servidor")}finally{o(!1)}},d=N=>N?new Date(N).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",u=N=>N==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N),m=N=>N==null?"0%":`${N.toFixed(1)}%`,x=N=>{const w={pendente:"bg-yellow-100 text-yellow-800",pago:"bg-green-100 text-green-800",estornado:"bg-red-100 text-red-800"}[N]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w}`,children:N.toUpperCase()})},h=({label:N,valor:_,destaque:w=!1})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-1",children:N}),e.jsx("div",{className:`text-sm ${w?"text-lg font-bold text-gray-900":"text-gray-900"}`,children:_})]}),v=({titulo:N,children:_,cor:w="blue"})=>{const S={blue:"border-blue-500 bg-blue-50",green:"border-green-500 bg-green-50",purple:"border-purple-500 bg-purple-50",yellow:"border-yellow-500 bg-yellow-50",red:"border-red-500 bg-red-50"};return e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:`border-l-4 ${S[w]} px-4 py-2 mb-3`,children:e.jsx("h3",{className:"font-semibold text-gray-800",children:N})}),e.jsx("div",{className:"px-4",children:_})]})};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:r}),e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-2/3 lg:w-1/2 bg-white shadow-xl z-50 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Detalhes da Comisso"}),e.jsxs("p",{className:"text-sm text-blue-100",children:["Snapshot Imutvel #",t]})]}),e.jsx("button",{onClick:r,className:"text-white hover:bg-blue-500 rounded-full p-2 transition",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando detalhes..."})]})}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-red-600",children:i}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Tentar Novamente"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(v,{titulo:" Identificao",cor:"blue",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"ID da Comisso",valor:`#${a.id}`}),e.jsx(h,{label:"Venda",valor:a.numero_venda||`#${a.venda_id}`}),e.jsx(h,{label:"ID do Produto",valor:`#${a.produto_id}`}),e.jsx(h,{label:"ID do Funcionrio",valor:`#${a.funcionario_id}`}),e.jsx(h,{label:"Data da Venda",valor:d(a.data_venda)}),e.jsx(h,{label:"Nmero da Parcela",valor:a.parcela_numero}),e.jsx(h,{label:"Quantidade",valor:a.quantidade})]})}),e.jsxs(v,{titulo:" Valores Financeiros (Snapshot)",cor:"green",children:[e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-300 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Contexto do Pagamento"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-blue-200",children:[e.jsx("span",{className:"text-xs text-gray-600 block mb-1",children:"Valor Total da Venda (Produtos)"}),e.jsx("span",{className:"text-lg font-bold text-blue-700",children:u(a.total_venda||0)})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-green-200",children:[e.jsxs("span",{className:"text-xs text-gray-600 block mb-1",children:["Valor Pago (Parcela ",a.parcela_numero,")"]}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:u(((p=a.pagamento)==null?void 0:p.valor_pago_referencia)||0)}),((g=a.pagamento)==null?void 0:g.forma_pagamento)&&e.jsxs("span",{className:"text-xs text-gray-500 block mt-1",children:["via ",a.pagamento.forma_pagamento]})]})]}),((y=a.pagamento)==null?void 0:y.percentual_pago)<100&&e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[" Comisso calculada proporcionalmente (",m(a.pagamento.percentual_pago)," do total)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Valor de Venda",valor:u(a.valores_financeiros.valor_venda)}),e.jsx(h,{label:"Valor de Custo",valor:u(a.valores_financeiros.valor_custo)}),e.jsx(h,{label:"Base Original (Lucro)",valor:u(a.valores_financeiros.valor_base_original)}),e.jsx(h,{label:"Base Comissionada",valor:u(a.valores_financeiros.valor_base_comissionada)})]}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Como chegamos na Base de Clculo?"]}),e.jsxs("div",{className:"space-y-2 text-sm font-mono bg-white p-4 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between pb-2 border-b border-gray-200",children:[e.jsxs("span",{className:"text-gray-700 font-semibold",children:["Valor Pago (Parcela ",a.parcela_numero||1,"):"]}),e.jsx("span",{className:"font-bold text-blue-600",children:u(((f=a.pagamento)==null?void 0:f.valor_pago_referencia)||a.valores_financeiros.valor_venda)})]}),a.deducoes&&a.deducoes.receita_taxa_entrega>0&&e.jsxs("div",{className:"flex justify-between text-green-600 pl-4",children:[e.jsx("span",{children:"(+) Taxa de Entrega (Receita):"}),e.jsxs("span",{className:"font-medium",children:["+ ",u(a.deducoes.receita_taxa_entrega)]})]}),a.deducoes&&e.jsxs(e.Fragment,{children:[a.deducoes.taxa_cartao>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsxs("span",{children:["(-) ",(()=>{const N=a.deducoes.forma_pagamento||"Carto",_=a.deducoes.numero_parcelas||1;let w=a.deducoes.taxa_percentual;if(_>1&&a.deducoes.taxas_por_parcela)try{w=JSON.parse(a.deducoes.taxas_por_parcela)[_.toString()]||w}catch{}let S="Taxa ";return N.includes("Crdito")?_>1?S+=`Carto Crdito ${_}x`:S+="Carto Crdito  Vista":N.includes("Dbito")?S+="Carto Dbito":S+=N,w&&(S+=` (${w}%)`),S+":"})()]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_cartao)]})]}),a.deducoes.imposto>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsxs("span",{children:["(-) Impostos (",a.deducoes.percentual_impostos?a.deducoes.percentual_impostos.toFixed(1)+"%":"","):"]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.imposto)]})]}),a.deducoes.taxa_entregador>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Taxa paga ao Entregador:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_entregador)]})]}),a.deducoes.custo_operacional>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Custo Operacional de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.custo_operacional)]})]}),a.deducoes.desconto>0&&e.jsxs("div",{className:"flex justify-between text-red-600 pl-4",children:[e.jsx("span",{children:"(-) Desconto:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.desconto)]})]})]}),e.jsxs("div",{className:"border-t-2 border-blue-400 pt-2 mt-2 flex justify-between font-bold",children:[e.jsx("span",{className:"text-blue-900",children:"(=) Base de Clculo:"}),e.jsx("span",{className:"text-blue-900 text-lg",children:u(a.calculo.valor_base_calculo)})]})]})]})]}),e.jsxs(v,{titulo:" Clculo da Comisso",cor:"purple",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Tipo de Clculo",valor:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.calculo.tipo_calculo==="percentual"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:a.calculo.tipo_calculo.toUpperCase()})}),e.jsx(h,{label:"Percentual da Comisso",valor:m(a.calculo.percentual_comissao)}),e.jsx(h,{label:"Percentual Aplicado (Pago)",valor:m(a.calculo.percentual_aplicado)}),e.jsx(h,{label:"Valor Base de Clculo",valor:u(a.calculo.valor_base_calculo),destaque:!0}),e.jsx(h,{label:"Valor da Comisso (Total)",valor:u(a.calculo.valor_comissao)}),e.jsx(h,{label:"Valor Efetivamente Gerado",valor:u(a.calculo.valor_comissao_gerada),destaque:!0})]}),e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:" Frmula Aplicada:"}),e.jsxs("div",{className:"space-y-2 text-sm font-mono",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-purple-200",children:[e.jsx("div",{className:"text-gray-700 mb-2",children:"Base de Clculo  Percentual = Comisso"}),e.jsxs("div",{className:"text-purple-900 font-bold",children:[u(a.calculo.valor_base_calculo),"  ",m(a.calculo.percentual_comissao)," = ",u(a.calculo.valor_comissao)]})]}),a.calculo.percentual_aplicado<100&&e.jsxs("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200",children:[e.jsx("div",{className:"text-gray-700 mb-2",children:" Venda parcial - Comisso proporcional ao valor pago:"}),e.jsxs("div",{className:"text-yellow-900 font-bold",children:[u(a.calculo.valor_comissao),"  ",m(a.calculo.percentual_aplicado)," = ",u(a.calculo.valor_comissao_gerada)]})]})]})]})]}),e.jsxs(v,{titulo:" Controle de Pagamento",cor:"yellow",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{label:"Percentual Pago da Venda",valor:m(a.pagamento.percentual_pago)}),e.jsx(h,{label:"Valor Pago de Referncia",valor:u(a.pagamento.valor_pago_referencia)}),e.jsx(h,{label:"Valor Pago da Comisso",valor:u(a.pagamento.valor_pago)}),e.jsx(h,{label:"Saldo Restante",valor:u(a.pagamento.saldo_restante)}),a.pagamento.data_pagamento&&e.jsxs(e.Fragment,{children:[e.jsx(h,{label:"Data do Pagamento",valor:d(a.pagamento.data_pagamento)}),e.jsx(h,{label:"Forma de Pagamento",valor:a.pagamento.forma_pagamento||"No informado"})]})]}),a.pagamento.percentual_pago<100&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[" Esta comisso foi gerada proporcionalmente ao pagamento parcial da venda. Apenas ",m(a.pagamento.percentual_pago)," do valor total foi pago."]})})]}),e.jsxs(v,{titulo:" Status e Controle",cor:a.status.status==="estornado"?"red":"blue",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase mb-2",children:"Status Atual"}),x(a.status.status)]}),a.status.status==="estornado"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Informaes do Estorno"}),e.jsx(h,{label:"Data do Estorno",valor:d(a.status.data_estorno)}),e.jsx(h,{label:"Motivo do Estorno",valor:a.status.motivo_estorno||"No informado"})]}),a.status.observacao_pagamento&&e.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Observaes"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.status.observacao_pagamento})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Resumo do Clculo Completo"]}),e.jsxs("div",{className:"space-y-3 font-mono text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[e.jsxs("span",{className:"text-blue-100",children:["Valor Pago (Parcela ",a.parcela_numero||1,"):"]}),e.jsx("span",{className:"font-bold text-lg",children:u(((b=a.pagamento)==null?void 0:b.valor_pago_referencia)||a.valores_financeiros.valor_venda)})]}),a.deducoes&&e.jsxs(e.Fragment,{children:[a.deducoes.taxa_cartao>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsxs("span",{children:["(-) ",(()=>{const N=a.deducoes.forma_pagamento||"Carto",_=a.deducoes.numero_parcelas||1;let w=a.deducoes.taxa_percentual;if(_>1&&a.deducoes.taxas_por_parcela)try{w=JSON.parse(a.deducoes.taxas_por_parcela)[_.toString()]||w}catch{}let S="Taxa ";return N.includes("Crdito")?_>1?S+=`Carto Crdito ${_}x`:S+="Carto Crdito  Vista":N.includes("Dbito")?S+="Carto Dbito":S+=N,w&&(S+=` (${w}%)`),S+":"})()]}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.taxa_cartao)]})]}),a.deducoes.imposto>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Impostos:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.imposto)]})]}),a.deducoes.custo_entrega>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Custo de Entrega:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.custo_entrega)]})]}),a.deducoes.desconto>0&&e.jsxs("div",{className:"flex justify-between items-center pl-4 text-red-200",children:[e.jsx("span",{children:"(-) Desconto:"}),e.jsxs("span",{className:"font-medium",children:["- ",u(a.deducoes.desconto)]})]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t-2 border-white/40 pt-2",children:[e.jsx("span",{className:"text-blue-100 font-semibold",children:"(=) Base de Clculo:"}),e.jsx("span",{className:"font-bold text-lg",children:u(a.calculo.valor_base_calculo)})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-white/20 pb-2",children:[e.jsx("span",{className:"text-blue-100",children:"() Percentual:"}),e.jsx("span",{className:"font-bold text-lg",children:m(a.calculo.percentual_comissao)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/10 rounded-lg p-3 border-2 border-yellow-300",children:[e.jsx("span",{className:"text-xl font-bold",children:"Comisso Gerada:"}),e.jsx("span",{className:"font-bold text-3xl text-yellow-300",children:u(a.calculo.valor_comissao_gerada)})]})]})]})]})]}),a&&e.jsx("div",{className:"bg-blue-50 border-t border-blue-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Snapshot Financeiro Imutvel"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Este  um snapshot financeiro imutvel. Os valores refletem exatamente o momento da venda e no podem ser alterados. Qualquer discrepncia deve ser tratada atravs de ajustes ou estornos, nunca por edio direta."})]})]})})]})]}):null},Uwe=()=>{const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null),[l,c]=j.useState(null),[d,u]=j.useState(!0),[m,x]=j.useState(null),[h,v]=j.useState(null),[p,g]=j.useState({funcionario_id:"",status:"",data_inicio:"",data_fim:"",venda_id:"",produto_id:"",grupo_id:""}),[y,f]=j.useState("ate_hoje"),[b,N]=j.useState([]),[_,w]=j.useState([]),[S,C]=j.useState(null),[E,T]=j.useState(null),[q,A]=j.useState(""),[O,V]=j.useState(""),[G,L]=j.useState(!1),[Z,D]=j.useState(!1),[K,R]=j.useState([]),[B,F]=j.useState(null),[I,k]=j.useState(!1),[M,z]=j.useState(""),[oe,W]=j.useState(!1),[ae,ee]=j.useState([]),[ce,ie]=j.useState(!1),[we,Se]=j.useState(""),[me,_e]=j.useState(""),[je,lt]=j.useState(!1),[Ke,ut]=j.useState("sem_pagar"),[Ee,Me]=j.useState(""),[Ae,ct]=j.useState(""),[bt,Rt]=j.useState(0),[Ct,It]=j.useState([]),[$t,ge]=j.useState([]),$e=1;j.useEffect(()=>{console.log("[ComissoesListagem] Iniciando carregamento..."),(async()=>{try{await Ie(),await it(),await rt(),await xe(),await Oe(),await Ye(),await Y()}catch(he){console.error("[ComissoesListagem] Erro no carregamento inicial:",he)}})();const fe=new Date().toISOString().split("T")[0];g(he=>({...he,data_fim:fe}))},[]),j.useEffect(()=>{const se=fe=>{oe&&!fe.target.closest(".autocomplete-container")&&W(!1)};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[oe]);const Ie=async()=>{var se,fe;console.log("[carregarComissoes] Iniciando...");try{n(!0),i(null);const he=new URLSearchParams;p.funcionario_id&&he.append("funcionario_id",p.funcionario_id),p.status&&he.append("status",p.status),p.data_inicio&&he.append("data_inicio",p.data_inicio),p.data_fim&&he.append("data_fim",p.data_fim),p.venda_id&&he.append("venda_id",p.venda_id);const ye=he.toString(),ke=ye?`/comissoes?${ye}`:"/comissoes",He=await U.get(ke);He.data.success?a(He.data.lista):i("Erro ao carregar comisses")}catch(he){console.error("Erro ao carregar comisses:",he),i(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||"Erro ao conectar com o servidor")}finally{n(!1),console.log("[carregarComissoes] Finalizado")}},it=async()=>{var se,fe;try{u(!0),x(null);const he=await U.get(`/comissoes/resumo?funcionario_id=${$e}`);he.data.success?c(he.data.resumo):x("Erro ao carregar resumo")}catch(he){console.error("Erro ao carregar resumo:",he),x(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||"Erro ao carregar resumo")}finally{u(!1)}},rt=async()=>{try{k(!0);const se=await U.get("/comissoes/funcionarios");if(se.data.success){const fe=Array.isArray(se.data.lista)?se.data.lista:Array.isArray(se.data.data)?se.data.data:[];R(fe)}}catch(se){console.error("Erro ao carregar funcionrios:",se),R([])}finally{k(!1)}},xe=async()=>{try{const se=await U.get("/produtos/");se.data&&N(Array.isArray(se.data)?se.data:[])}catch(se){console.error("Erro ao carregar produtos:",se),N([])}},Oe=async()=>{try{const se=await U.get("/categorias-financeiras");se.data&&w(Array.isArray(se.data)?se.data:[])}catch(se){console.error("Erro ao carregar grupos:",se),w([])}},Ye=async()=>{console.log("[carregarFormasPagamento] Iniciando...");try{const se=await U.get("/comissoes/formas-pagamento");se.data&&It(Array.isArray(se.data)?se.data:[])}catch(se){console.error("[carregarFormasPagamento] Erro:",se)}finally{console.log("[carregarFormasPagamento] Finalizado")}},Y=async()=>{try{const se=await U.get("/contas-bancarias");se.data&&ge(Array.isArray(se.data)?se.data.filter(fe=>fe.ativa):[])}catch(se){console.error("Erro ao carregar contas bancrias:",se)}},ue=()=>r.filter(fe=>fe.status==="pendente").reduce((fe,he)=>fe+(he.valor_comissao_gerada||0),0),qe=()=>r.filter(fe=>ae.includes(fe.id)).reduce((fe,he)=>fe+(he.valor_comissao_gerada||0),0),le=se=>se?new Date(se).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ve=se=>se==null?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(se),Re=se=>se==null?"0%":`${se.toFixed(1)}%`,Le=se=>{const he={pendente:"bg-yellow-100 text-yellow-800",pago:"bg-green-100 text-green-800",estornado:"bg-red-100 text-red-800"}[se]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he}`,children:se.toUpperCase()})},Q=se=>{const he={percentual:"bg-blue-100 text-blue-800",lucro:"bg-purple-100 text-purple-800"}[se]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he}`,children:se.toUpperCase()})},Ne=()=>{if(d)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(fe=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32"})]},fe))});if(m)return e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:" No foi possvel carregar o resumo financeiro"})});if(!l)return null;const se=[{titulo:"Total Gerado",valor:l.total_gerado,cor:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-600"},{titulo:"Total Pago",valor:l.total_pago,cor:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-600"},{titulo:"Total Pendente",valor:l.total_pendente,cor:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-600"},{titulo:"Saldo a Pagar",valor:l.saldo_a_pagar,cor:"purple",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-600"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:se.map((fe,he)=>e.jsxs("div",{className:`${fe.bgColor} border ${fe.borderColor} rounded-lg shadow-sm p-6 transition hover:shadow-md`,children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:fe.titulo}),e.jsx("p",{className:`text-2xl font-bold ${fe.textColor}`,children:ve(fe.valor)})]},he))})},Pe=se=>{v(se)},Ve=()=>{v(null)},ot=(se,fe)=>{g(he=>({...he,[se]:fe}))},xt=()=>{Ie()},pt=()=>{g({funcionario_id:"",status:"",data_inicio:"",data_fim:"",venda_id:"",produto_id:"",grupo_id:""}),F(null),C(null),T(null),z(""),A(""),V(""),f("ate_hoje");const fe=new Date().toISOString().split("T")[0];setTimeout(()=>{(async()=>{try{n(!0);const ye=await U.get(`/comissoes?data_fim=${fe}`);ye.data.success&&a(ye.data.lista)}catch(ye){console.error("Erro:",ye)}finally{n(!1)}})()},100)},Nt=se=>{C(se),A(se.nome),L(!1),g(fe=>({...fe,produto_id:se.id}))},Ge=se=>{T(se),V(se.nome),D(!1),g(fe=>({...fe,grupo_id:se.id}))},Dt=se=>{F(se),z(se.nome),W(!1),g(fe=>({...fe,funcionario_id:se.id}))},jr=(K||[]).filter(se=>{var fe;return(fe=se==null?void 0:se.nome)==null?void 0:fe.toLowerCase().includes(M.toLowerCase())}),J=(se,fe)=>{fe==="pendente"&&ee(he=>he.includes(se)?he.filter(ye=>ye!==se):[...he,se])},P=()=>{const se=r.filter(fe=>fe.status==="pendente");ae.length===se.length?ee([]):ee(se.map(fe=>fe.id))},H=()=>{const se=new Date().toISOString().split("T")[0];Se(se),_e(""),ut("sem_pagar"),Me(""),ct("");const fe=qe();Rt(fe),ie(!0)},te=()=>{ie(!1),Se(""),_e("")},ne=async()=>{var se,fe;if(!we){alert("Por favor, informe a data de pagamento");return}if(Ke==="com_pagamento"&&!Ae){alert("Por favor, selecione a conta bancria para o pagamento");return}try{lt(!0);let he;if(Ke==="sem_pagar")he=await U.post("/comissoes/fechar",{comissoes_ids:ae,data_pagamento:we,observacao:me||null});else{const ye=new URLSearchParams({valor_pago:bt.toString(),forma_pagamento:Ee||"nao_informado",data_pagamento:we});Ae&&ye.append("conta_bancaria_id",Ae),me&&ye.append("observacoes",me),ae.forEach(ke=>{ye.append("comissoes_ids",ke)}),he=await U.post(`/comissoes/fechar-com-pagamento?${ye.toString()}`)}if(he.data.success){const ye=Ke==="sem_pagar"?he.data.valor_total_fechamento:he.data.valor_total_pago;alert(` ${he.data.total_processadas} comisso(es) fechada(s) com sucesso!

Valor total: ${ve(ye)}
Modo: ${Ke==="sem_pagar"?"Sem pagamento (para pagar depois)":"Com pagamento no ato"}`),await Ie(),await it(),ee([]),te()}}catch(he){console.error("Erro ao fechar comisses:",he),alert(" Erro ao fechar comisses: "+(((fe=(se=he.response)==null?void 0:se.data)==null?void 0:fe.detail)||he.message))}finally{lt(!1)}},de=()=>{const se=(b||[]).filter(he=>{var ye;return(ye=he==null?void 0:he.nome)==null?void 0:ye.toLowerCase().includes(q.toLowerCase())}),fe=(_||[]).filter(he=>{var ye;return(ye=he==null?void 0:he.nome)==null?void 0:ye.toLowerCase().includes(O.toLowerCase())});return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Filtros"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," registro",r.length!==1?"s":""," encontrado",r.length!==1?"s":""]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Perodo"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"ate_hoje",checked:y==="ate_hoje",onChange:he=>{f(he.target.value);const ye=new Date().toISOString().split("T")[0];g(ke=>({...ke,data_inicio:"",data_fim:ye}))},className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"At hoje"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"personalizado",checked:y==="personalizado",onChange:he=>f(he.target.value),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Perodo personalizado"})]})]}),y==="personalizado"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:p.data_inicio,onChange:he=>ot("data_inicio",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:p.data_fim,onChange:he=>ot("data_fim",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funcionrio"}),e.jsx("input",{type:"text",value:M,onChange:he=>{z(he.target.value),W(!0),he.target.value===""&&(F(null),g(ye=>({...ye,funcionario_id:""})))},onFocus:()=>W(!0),disabled:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",placeholder:I?"Carregando...":"Digite o nome"}),oe&&M&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:jr.length>0?jr.map(he=>e.jsxs("div",{onClick:()=>Dt(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum funcionrio encontrado"})})]}),e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Produto"}),e.jsx("input",{type:"text",value:q,onChange:he=>{A(he.target.value),L(!0),he.target.value===""&&(C(null),g(ye=>({...ye,produto_id:""})))},onFocus:()=>L(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Digite o nome do produto"}),G&&q&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:se.length>0?se.map(he=>e.jsxs("div",{onClick:()=>Nt(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum produto encontrado"})})]}),e.jsxs("div",{className:"relative autocomplete-container",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grupo/Categoria"}),e.jsx("input",{type:"text",value:O,onChange:he=>{V(he.target.value),D(!0),he.target.value===""&&(T(null),g(ye=>({...ye,grupo_id:""})))},onFocus:()=>D(!0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Digite o nome do grupo"}),Z&&O&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:fe.length>0?fe.map(he=>e.jsxs("div",{onClick:()=>Ge(he),className:"px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:he.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",he.id]})]},he.id)):e.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhum grupo encontrado"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:p.status,onChange:he=>ot("status",he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"estornado",children:"Estornado"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:xt,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtrar"]}),e.jsxs("button",{onClick:pt,disabled:s,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpar Filtros"]})]})]})};return s?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando comisses..."})]})}):o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Erro ao carregar comisses"}),e.jsx("p",{className:"text-red-600",children:o}),e.jsx("button",{onClick:Ie,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Tentar Novamente"})]})}):r.length===0?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Demonstrativo de Comisses"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Nenhuma comisso encontrada"}),e.jsx("p",{className:"text-gray-600",children:"Ainda no h registros de comisses no sistema."})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Demonstrativo de Comisses"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Total de registros: ",r.length]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>t("/comissoes/relatorios"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})," Relatrios"]}),e.jsxs("button",{onClick:()=>t("/comissoes/fechamentos"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Histrico"]})]})]}),Ne(),de(),ae.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-blue-800 font-medium",children:[ae.length," comisso(es) selecionada(s)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ee([]),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Limpar Seleo"}),e.jsxs("button",{onClick:H,disabled:je,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Fechar Comisses"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:ae.length>0&&ae.length===r.filter(se=>se.status==="pendente").length,onChange:P,disabled:r.filter(se=>se.status==="pendente").length===0,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer",title:"Selecionar todas pendentes"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data da Venda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero da Venda"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parcela"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo de Clculo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base de Clculo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Comisso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(se=>e.jsxs("tr",{className:"hover:bg-blue-50 transition",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:fe=>fe.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:ae.includes(se.id),onChange:()=>J(se.id,se.status),disabled:se.status!=="pendente",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed",title:se.status!=="pendente"?`Comisso ${se.status}`:"Selecionar para fechamento"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:le(se.data_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 font-medium cursor-pointer",onClick:()=>Pe(se.id),title:`ID interno: #${se.venda_id}`,children:se.numero_venda||`#${se.venda_id}`}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:["#",se.produto_id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 cursor-pointer",onClick:()=>Pe(se.id),children:se.parcela_numero}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm cursor-pointer",onClick:()=>Pe(se.id),children:Q(se.tipo_calculo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium cursor-pointer",onClick:()=>Pe(se.id),children:ve(se.valor_base_calculo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right cursor-pointer",onClick:()=>Pe(se.id),children:Re(se.percentual_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-bold cursor-pointer",onClick:()=>Pe(se.id),children:ve(se.valor_comissao_gerada)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm cursor-pointer",onClick:()=>Pe(se.id),children:Le(se.status)})]},se.id))})]})})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Informao:"})," Os valores exibidos so snapshots imutveis do momento da venda. Eles no so recalculados e refletem exatamente como a comisso foi gerada.",e.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:"Clique em qualquer linha para ver mais detalhes."})]})}),r.length>0&&e.jsx("div",{className:"fixed bottom-0 left-64 right-0 bg-gradient-to-r from-indigo-600 via-blue-600 to-indigo-600 text-white shadow-lg z-40 border-t border-indigo-300/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-3.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Perodo"}),e.jsx("div",{className:"text-sm font-bold text-white",children:y==="ate_hoje"?"At hoje":e.jsxs(e.Fragment,{children:[p.data_inicio?new Date(p.data_inicio).toLocaleDateString("pt-BR"):"Incio","  ",p.data_fim?new Date(p.data_fim).toLocaleDateString("pt-BR"):"Fim"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Filtros"}),e.jsxs("div",{className:"text-sm font-bold text-white",children:[B&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",B.nome]}),S&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",S.nome]}),E&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",E.nome]}),p.status&&e.jsxs("span",{className:"mr-2 bg-white/10 px-2 py-0.5 rounded",children:[" ",p.status]}),!B&&!S&&!E&&!p.status&&e.jsx("span",{className:"text-indigo-200",children:"Sem filtros"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-200 mb-0.5 tracking-wide uppercase",children:" Total Pendente (Filtrado)"}),e.jsx("div",{className:"text-3xl font-bold text-white drop-shadow-sm",children:ve(ue())}),e.jsxs("div",{className:"text-[11px] text-indigo-100 mt-0.5 font-medium",children:[r.filter(se=>se.status==="pendente").length," comisso(es) pendente(s)"]})]})]})})}),r.length>0&&e.jsx("div",{className:"h-24"}),h&&e.jsx(Vwe,{comissaoId:h,onClose:Ve}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fechar Comisses Selecionadas"}),e.jsx("button",{onClick:te,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 font-medium",children:[ae.length," comisso(es) selecionada(s)"]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ve(qe())})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:" Tipo de Fechamento"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>ut("sem_pagar"),className:`p-4 border-2 rounded-lg transition-all ${Ke==="sem_pagar"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-blue-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"font-bold text-gray-800",children:"Fechar sem Pagar"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Apenas registrar fechamento"})]})}),e.jsx("button",{type:"button",onClick:()=>ut("com_pagamento"),className:`p-4 border-2 rounded-lg transition-all ${Ke==="com_pagamento"?"border-green-500 bg-green-50 shadow-md":"border-gray-300 hover:border-green-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"font-bold text-gray-800",children:"Fechar e Pagar"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Com lanamento financeiro"})]})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Data do Fechamento/Pagamento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:we,onChange:se=>Se(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),Ke==="com_pagamento"&&e.jsxs("div",{className:"space-y-4 mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-bold text-green-800 mb-3",children:" Dados do Pagamento"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Valor a Pagar (editvel)"}),e.jsx("input",{type:"number",step:"0.01",value:bt,onChange:se=>Rt(parseFloat(se.target.value)),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Valor original: ",ve(qe())]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Forma de Pagamento ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:Ee,onChange:se=>Me(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),formasPagamento.map(se=>e.jsx("option",{value:se.id,children:se.nome},se.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Conta Bancria ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:Ae,onChange:se=>ct(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),$t.map(se=>e.jsxs("option",{value:se.id,children:[se.nome," (",se.banco,") - Saldo: ",ve(se.saldo||0)]},se.id))]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Observaes"}),e.jsx("textarea",{value:me,onChange:se=>_e(se.target.value),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observaes sobre o fechamento..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:te,disabled:je,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:ne,disabled:je||!we||Ke==="com_pagamento"&&(!Ee||!Ae),className:`flex-1 px-4 py-2 rounded-lg transition disabled:opacity-50 flex items-center justify-center gap-2 ${Ke==="com_pagamento"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} text-white`,children:je?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ke==="com_pagamento"?" Fechar e Pagar":" Fechar sem Pagar"]})})]})]})})]})},Wwe=()=>{const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null);j.useEffect(()=>{l()},[]);const l=async()=>{var m,x;try{n(!0),i(null);const h=await U.get("/comissoes/abertas");h.data.success?a(h.data.funcionarios||[]):i("Erro ao carregar comisses em aberto")}catch(h){console.error("Erro ao carregar comisses abertas:",h),i(((x=(m=h.response)==null?void 0:m.data)==null?void 0:x.detail)||"Erro ao carregar comisses em aberto")}finally{n(!1)}},c=m=>{t(`/comissoes/fechamento/${m}`)},d=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),u=m=>m?new Date(m+"T00:00:00").toLocaleDateString("pt-BR"):"-";return s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando comisses em aberto..."})]})})}):o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]})]}),e.jsx("button",{onClick:l,className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"})]})}):r.length===0?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Comisses em Aberto"}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Nenhuma comisso pendente"}),e.jsx("p",{className:"text-green-600",children:"No h funcionrios com comisses em aberto no momento."})]})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Comisses em Aberto"}),e.jsx("p",{className:"text-gray-600",children:"Funcionrios com comisses pendentes de pagamento"})]}),e.jsxs("button",{onClick:()=>t("/comissoes/fechamentos"),className:"inline-flex items-center px-4 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Histrico"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Funcionrios"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:r.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Pendente"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:d(r.reduce((m,x)=>m+x.total_pendente,0))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:r.reduce((m,x)=>m+x.quantidade_comissoes,0)})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Pendente"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde de Comisses"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima Venda"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:m.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.nome_funcionario}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",m.funcionario_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-semibold text-green-600",children:d(m.total_pendente)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:m.quantidade_comissoes})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:u(m.data_ultima_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>c(m.funcionario_id),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Conferir"]})})]},m.funcionario_id))})]})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:'Clique em "Conferir" para visualizar os detalhes das comisses de cada funcionrio'})})]})})},Hwe=()=>{const{funcionario_id:t}=Zl(),r=Ht(),[a,s]=j.useState(!0),[n,o]=j.useState(null),[i,l]=j.useState(null),[c,d]=j.useState([]),[u,m]=j.useState(null),[x,h]=j.useState(null),[v,p]=j.useState([]),[g,y]=j.useState([]),[f,b]=j.useState([]),[N,_]=j.useState(""),[w,S]=j.useState(""),[C,E]=j.useState(""),[T,q]=j.useState(""),[A,O]=j.useState(!1),[V,G]=j.useState(new Set),[L,Z]=j.useState(""),[D,K]=j.useState("nao_informado"),[R,B]=j.useState(new Date().toISOString().split("T")[0]),[F,I]=j.useState(""),[k,M]=j.useState(!1),[z,oe]=j.useState(null);j.useEffect(()=>{W()},[t]);const W=async()=>{var je,lt;try{s(!0),o(null);const Ke=await U.get(`/comissoes/conferencia-avancada/${t}`);Ke.data.success&&(l(Ke.data.funcionario),d(Ke.data.comissoes),m(Ke.data.resumo),h(Ke.data.periodo_selecionado));const ut=await U.get("/comissoes/formas-pagamento");ut.data.success&&b(ut.data.formas);const Ee=await U.get("/produtos/categorias");Ee.data.data&&p(Ee.data.data)}catch(Ke){o(((lt=(je=Ke.response)==null?void 0:je.data)==null?void 0:lt.detail)||"Erro ao carregar dados"),console.error("Erro:",Ke)}finally{s(!1)}},ae=async()=>{var je,lt;try{s(!0);const Ke={grupo_produto:N?parseInt(N):void 0,produto_id:w?parseInt(w):void 0,data_inicio:C||void 0,data_fim:T||void 0},ut=await U.get(`/comissoes/conferencia-avancada/${t}`,{params:Object.fromEntries(Object.entries(Ke).filter(([Ee,Me])=>Me!==void 0))});ut.data.success&&(d(ut.data.comissoes),m(ut.data.resumo),h(ut.data.periodo_selecionado))}catch(Ke){o(((lt=(je=Ke.response)==null?void 0:je.data)==null?void 0:lt.detail)||"Erro ao aplicar filtros")}finally{s(!1)}},ee=()=>{_(""),S(""),E(""),q(""),setTimeout(()=>W(),100)},ce=je=>{const lt=new Set(V);lt.has(je)?lt.delete(je):lt.add(je),G(lt)},ie=()=>{V.size===c.length?G(new Set):G(new Set(c.map(je=>je.id)))},we=()=>{if(V.size===0){alert("Selecione pelo menos uma comisso");return}B(new Date().toISOString().split("T")[0]),Z(""),K("nao_informado"),I(""),oe(null),O(!0)},Se=async()=>{var je,lt;try{if(!L||parseFloat(L)<=0){oe("Valor a pagar deve ser maior que zero");return}M(!0),oe(null);const Ke={comissoes_ids:Array.from(V),valor_pago:parseFloat(L),forma_pagamento:D,data_pagamento:R,observacoes:F||null},ut=await U.post("/comissoes/fechar-com-pagamento",Ke);ut.data.success&&(alert(` Fechamento realizado com sucesso!

Processadas: ${ut.data.total_processadas}
Valor total: R$ ${ut.data.valor_total_fechado.toFixed(2)}
Valor pago: R$ ${ut.data.valor_total_pago.toFixed(2)}
Saldo restante: R$ ${ut.data.saldo_total_restante.toFixed(2)}
Comisses com saldo: ${ut.data.comissoes_com_saldo}`),O(!1),G(new Set),W())}catch(Ke){oe(((lt=(je=Ke.response)==null?void 0:je.data)==null?void 0:lt.detail)||"Erro ao fechar comisses")}finally{M(!1)}};if(a)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});const me=Array.from(V).reduce((je,lt)=>{const Ke=c.find(ut=>ut.id===lt);return je+(Ke?Ke.valor_comissao:0)},0),_e=me-(parseFloat(L)||0);return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Conferncia de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:i?`${i.nome} (ID: ${i.id})`:"Carregando..."})]}),e.jsx("button",{onClick:()=>r("/comissoes/abertas"),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:" Voltar"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Filtros Avanados"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grupo de Produto"}),e.jsxs("select",{value:N,onChange:je=>_(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Todos"}),v.map(je=>e.jsx("option",{value:je.id,children:je.nome},je.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produto"}),e.jsx("input",{type:"text",placeholder:"Buscar produto...",value:w,onChange:je=>S(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Incio"}),e.jsx("input",{type:"date",value:C,onChange:je=>E(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Fim"}),e.jsx("input",{type:"date",value:T,onChange:je=>q(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Aplicar Filtros"}),e.jsx("button",{onClick:ee,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Limpar"})]})]}),x&&u&&e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 border border-blue-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Perodo Selecionado"}),e.jsx("p",{className:"text-gray-600",children:x.data_inicio&&x.data_fim?`${new Date(x.data_inicio).toLocaleDateString("pt-BR")} at ${new Date(x.data_fim).toLocaleDateString("pt-BR")}`:"Sem perodo especfico"}),x.grupo_produto_nome&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Grupo: ",x.grupo_produto_nome]}),x.produto_nome&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Produto: ",x.produto_nome]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Resumo do Perodo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Quantidade"}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:u.quantidade_comissoes})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",u.valor_total.toFixed(2)]})]}),u.valor_pago_total>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pago"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["R$ ",u.valor_pago_total.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Saldo"}),e.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["R$ ",u.saldo_restante_total.toFixed(2)]})]})]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:V.size===c.length&&c.length>0,onChange:ie})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Quantidade"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Base"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"%"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Valor"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Pago"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Saldo"})]})}),e.jsx("tbody",{children:c.map(je=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:V.has(je.id),onChange:()=>ce(je.id)})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(je.data_venda).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:je.nome_produto}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:je.cliente_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:je.quantidade.toFixed(2)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["R$ ",je.valor_base_calculo.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:[je.percentual_comissao.toFixed(2),"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold text-green-600",children:["R$ ",je.valor_comissao.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600",children:je.valor_pago?`R$ ${je.valor_pago.toFixed(2)}`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:je.saldo_restante?`R$ ${je.saldo_restante.toFixed(2)}`:"-"})]},je.id))})]})})}),e.jsx("div",{className:"bg-gray-900 text-white rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-300",children:[V.size," de ",c.length," comisses selecionadas"]})}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Total Selecionado"}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R$ ",me.toFixed(2)]})]}),parseFloat(L)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Ser Pago"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["R$ ",parseFloat(L).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Saldo Restante"}),e.jsxs("p",{className:`text-2xl font-bold ${_e>0?"text-orange-400":"text-green-400"}`,children:["R$ ",_e.toFixed(2)]})]})]}),e.jsx("button",{onClick:we,disabled:V.size===0,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-500 rounded-lg font-semibold transition",children:"Fechar e Pagar"})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Fechamento com Pagamento"}),z&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:z}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded border border-blue-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Comisses a processar: ",V.size]}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Valor Total: R$ ",me.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsx("select",{value:D,onChange:je=>K(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:f.map(je=>e.jsx("option",{value:je.nome,children:je.descricao},je.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor a Pagar *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"flex items-center bg-gray-100 px-3 py-2 rounded-lg border border-gray-300",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:me,value:L,onChange:je=>Z(je.target.value),placeholder:"0.00",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mximo: R$ ",me.toFixed(2),parseFloat(L)<me&&parseFloat(L)>0&&e.jsxs("span",{className:"text-orange-600 font-semibold ml-2",children:["(Pagamento Parcial - Saldo: R$ ",(me-parseFloat(L)).toFixed(2),")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Pagamento *"}),e.jsx("input",{type:"date",value:R,onChange:je=>B(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:F,onChange:je=>I(je.target.value),placeholder:"Observaes opcionais...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>O(!1),disabled:k,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:Se,disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin",children:""}),"Processando..."]}):"Confirmar Fechamento"})]})]})})]})},Kwe=()=>{const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(null),[l,c]=j.useState(null),[d,u]=j.useState(""),[m,x]=j.useState(""),[h,v]=j.useState("");j.useEffect(()=>{p()},[]);const p=async()=>{var w,S;try{n(!0),i(null);const C=new URLSearchParams;d&&C.append("data_inicio",d),m&&C.append("data_fim",m),h&&C.append("funcionario_id",h);const E=`/comissoes/fechamentos${C.toString()?"?"+C.toString():""}`,T=await U.get(E);T.data.success?(a(T.data.fechamentos||[]),c(T.data.resumo)):i("Erro ao carregar histrico")}catch(C){console.error("Erro ao carregar histrico:",C),i(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao carregar histrico de fechamentos")}finally{n(!1)}},g=()=>{p()},y=()=>{u(""),x(""),v(""),setTimeout(()=>p(),100)},f=w=>{t(`/comissoes/fechamentos/detalhe?funcionario_id=${w.funcionario_id}&data_pagamento=${w.data_pagamento}`)},b=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),N=w=>w?new Date(w+"T00:00:00").toLocaleDateString("pt-BR"):"-",_=w=>w?new Date(w).toLocaleString("pt-BR"):"-";return s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando histrico..."})]})})}):o?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o})]})]}),e.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Histrico de Fechamentos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Auditoria de comisses fechadas - somente leitura"})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Filtros"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Incio"}),e.jsx("input",{type:"date",value:d,onChange:w=>u(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:m,onChange:w=>x(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1 min-w-[180px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID do Funcionrio"}),e.jsx("input",{type:"number",value:h,onChange:w=>v(w.target.value),placeholder:"Deixe vazio para todos",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Aplicar"}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors",children:"Limpar"})]})]})]}),l&&e.jsx("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total de Fechamentos"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.total_fechamentos})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Valor Total Pago"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:b(l.valor_total_geral)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Total de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.quantidade_total_geral})]})]})}),r.length===0?e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-yellow-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Nenhum fechamento encontrado"}),e.jsx("p",{className:"text-yellow-600",children:"No h fechamentos registrados no perodo selecionado."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Fechamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ao"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((w,S)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>f(w),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:w.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.nome_funcionario}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",w.funcionario_id]})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:_(w.data_fechamento)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm font-medium text-gray-900",children:N(w.data_pagamento)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:w.quantidade_comissoes})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-semibold text-green-600",children:b(w.valor_total)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("button",{onClick:C=>{C.stopPropagation(),f(w)},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:"Ver Detalhes"})})]},`${w.funcionario_id}_${w.data_pagamento}_${S}`))})]})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500 text-center",children:" Clique em uma linha para ver os detalhes do fechamento"})})]})]})})},Gwe=()=>{const t=Ht(),[r]=rg(),a=r.get("funcionario_id"),s=r.get("data_pagamento"),[n,o]=j.useState(null),[i,l]=j.useState(!0),[c,d]=j.useState(null);j.useEffect(()=>{if(!a||!s){d("Parmetros invlidos: funcionario_id e data_pagamento so obrigatrios"),l(!1);return}u()},[a,s]);const u=async()=>{var y,f;try{l(!0),d(null);const b=await U.get("/comissoes/fechamentos/detalhe",{params:{funcionario_id:a,data_pagamento:s}});b.data.success?o(b.data):d("Erro ao carregar detalhes do fechamento")}catch(b){console.error("Erro ao carregar detalhes:",b),d(((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao carregar detalhes do fechamento")}finally{l(!1)}},m=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y),x=y=>y?new Date(y+"T00:00:00").toLocaleDateString("pt-BR"):"-",h=y=>y?new Date(y).toLocaleString("pt-BR"):"-",v=()=>{t("/comissoes/fechamentos")};if(i)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando detalhes..."})]})})});if(c||!n)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c||"Fechamento no encontrado"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors",children:"Tentar Novamente"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors",children:"Voltar"})]})]})});const{fechamento:p,comissoes:g}=n;return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"mb-6 border-b border-gray-200 pb-4",children:[e.jsxs("button",{onClick:v,className:"mb-4 inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Detalhes do Fechamento"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visualizao completa das comisses includas neste fechamento"}),e.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-yellow-100 border border-yellow-300",children:[e.jsx("svg",{className:"h-4 w-4 text-yellow-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Somente Leitura - Registro de Auditoria"})]})]}),e.jsxs("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informaes do Fechamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Funcionrio"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-purple-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-700 font-semibold text-sm",children:p.nome_funcionario.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.nome_funcionario}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",p.funcionario_id]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data do Fechamento"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:h(p.data_fechamento)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data de Pagamento"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:x(p.data_pagamento)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Quantidade de Comisses"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:p.quantidade_comissoes})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Valor Total"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(p.valor_total)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Perodo das Vendas"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:p.periodo_vendas})]})]}),p.observacao_pagamento&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Observaes"}),e.jsx("p",{className:"text-sm text-gray-800 italic",children:p.observacao_pagamento})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Comisses Includas"}),g&&g.length>0?e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Venda"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qtde"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Venda"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Comisso"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comisso"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((y,f)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:y.nome_cliente||"Cliente no identificado"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:y.nome_produto||"Produto no identificado"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:x(y.data_venda)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:y.quantidade}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm text-gray-900",children:m(y.valor_venda_snapshot)}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:[y.percentual_snapshot,"%"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-semibold text-green-600",children:m(y.valor_comissao)})]},y.id||f))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"6",className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"TOTAL:"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-base font-bold text-green-700",children:m(p.valor_total)})]})})]})}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:e.jsx("p",{className:"text-yellow-800",children:"Nenhuma comisso encontrada para este fechamento."})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Informaes Importantes"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Este  um registro imutvel de auditoria"}),e.jsx("li",{children:"No  possvel editar ou reverter fechamentos realizados"}),e.jsx("li",{children:"Os valores foram capturados no momento do fechamento (snapshot)"}),e.jsx("li",{children:"Para questes sobre este fechamento, entre em contato com a administrao"})]})]})]})})]})})},Xwe=()=>{const t=Ht(),[r,a]=j.useState("margem-produto"),[s,n]=j.useState(!1),[o,i]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(null),[m,x]=j.useState(null),[h,v]=j.useState(null),[p,g]=j.useState(null),[y,f]=j.useState(null),[b,N]=j.useState(null),_=async R=>{n(!0);try{const B={};o&&(B.data_inicio=o),l&&(B.data_fim=l);let F="",I=null;switch(R){case"margem-produto":F="/relatorios-comissoes/margem-produto",I=u;break;case"produtos-prejudiciais":F="/relatorios-comissoes/produtos-prejudiciais",I=x;break;case"ranking-funcionarios":F="/relatorios-comissoes/ranking-funcionarios",I=v;break;case"ranking-produtos":F="/relatorios-comissoes/ranking-produtos",I=g;break;case"ranking-categorias":F="/relatorios-comissoes/ranking-categorias",I=f;break;case"dre":F="/relatorios-comissoes/visao-dre",B.ano=2026,I=N;break;default:n(!1);return}const k=await U.get(F,{params:B,timeout:1e4});I(k.data)}catch(B){console.error(`Erro ao carregar relatrio ${R}:`,B),B.code==="ECONNABORTED"||B.message.includes("timeout")?alert(" Tempo de resposta excedido. Verifique se o backend est rodando."):alert(" Erro ao carregar relatrio. Verifique o console para detalhes.")}finally{n(!1)}};j.useEffect(()=>{_(r)},[r]);const w=()=>{_(r)},S=R=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R),C=R=>`${R.toFixed(2)}%`,E=async()=>{try{const R={tipo:r,data_inicio:o,data_fim:l},B=await U.get("/relatorios-comissoes/exportar-csv",{params:R,responseType:"blob"}),F=window.URL.createObjectURL(new Blob([B.data])),I=document.createElement("a");I.href=F,I.setAttribute("download",`relatorio_${r}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(I),I.click(),I.remove()}catch(R){console.error("Erro ao exportar CSV:",R),alert("Erro ao exportar arquivo")}},T=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#a28bd4","#f48fb1"],q=R=>R===3?"text-red-700 bg-red-100 border-red-300":R===2?"text-orange-700 bg-orange-100 border-orange-300":"text-yellow-700 bg-yellow-100 border-yellow-300",A=()=>{const R=[{id:"margem-produto",label:" Margem por Produto",icone:""},{id:"produtos-prejudiciais",label:" Produtos Prejudiciais",icone:""},{id:"ranking-funcionarios",label:" Ranking Funcionrios",icone:""},{id:"ranking-produtos",label:" Ranking Produtos",icone:""},{id:"ranking-categorias",label:" Ranking Categorias",icone:""},{id:"dre",label:" Viso DRE",icone:""}];return e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:R.map(B=>e.jsxs("button",{onClick:()=>a(B.id),className:`px-4 py-3 rounded-lg font-medium whitespace-nowrap transition-all ${r===B.id?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"text-xl mr-2",children:B.icone}),B.label]},B.id))})},O=()=>e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Data Incio"}),e.jsx("input",{type:"date",value:o,onChange:R=>i(R.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Data Fim"}),e.jsx("input",{type:"date",value:l,onChange:R=>c(R.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition mt-6",children:" Buscar"}),e.jsx("button",{onClick:()=>{i(""),c(""),_(r)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition mt-6",children:" Limpar"}),["margem-produto","produtos-prejudiciais","ranking-funcionarios","ranking-produtos"].includes(r)&&e.jsx("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition mt-6",children:" Exportar CSV"})]})]})}),V=()=>{if(!d)return e.jsx("div",{className:"text-center py-12",children:"Carregando..."});const R=d.dados.slice(0,10);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total de Produtos"}),e.jsx("div",{className:"text-3xl font-bold text-blue-800",children:d.total_produtos})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Produtos com Margem Negativa"}),e.jsx("div",{className:"text-3xl font-bold text-red-800",children:d.produtos_com_alerta})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Produtos Saudveis"}),e.jsx("div",{className:"text-3xl font-bold text-green-800",children:d.total_produtos-d.produtos_com_alerta})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Top 10 Produtos por Margem Lquida"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(Bn,{data:R,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"produto_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Fr,{}),e.jsx(or,{formatter:B=>S(B)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"margem_liquida",fill:"#82ca9d",name:"Margem Lquida"}),e.jsx(Mr,{dataKey:"valor_comissao",fill:"#ff7c7c",name:"Comisso"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Venda"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Lquida"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Margem"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.dados.map((B,F)=>e.jsxs("tr",{className:B.alerta_margem_negativa?"bg-red-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:B.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:B.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(B.valor_venda)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(B.valor_custo)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:S(B.valor_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold",children:e.jsx("span",{className:B.margem_liquida<0?"text-red-600":"text-green-600",children:S(B.margem_liquida)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:C(B.percentual_margem)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:B.alerta_margem_negativa?e.jsx("span",{className:"px-2 py-1 text-xs font-bold text-red-700 bg-red-100 rounded",children:" NEGATIVA"}):e.jsx("span",{className:"px-2 py-1 text-xs font-bold text-green-700 bg-green-100 rounded",children:" OK"})})]},F))})]})})})]})},G=()=>m?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em vendas j realizadas. Os dados no alteram comisses, preos ou histricos e no devem ser usados para ajustes retroativos."]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Produtos Analisados"}),e.jsx("div",{className:"text-3xl font-bold text-blue-800",children:m.total_produtos_analisados})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Crticos"}),e.jsx("div",{className:"text-3xl font-bold text-red-800",children:m.produtos_criticos})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Prejudiciais"}),e.jsx("div",{className:"text-3xl font-bold text-orange-800",children:m.total_produtos_prejudiciais})]})]}),e.jsx("div",{className:"space-y-4",children:m.dados.map((R,B)=>e.jsxs("div",{className:`border-2 rounded-lg p-6 ${q(R.nivel_gravidade)}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:[R.nivel_gravidade===3&&"",R.nivel_gravidade===2&&"",R.nivel_gravidade===1&&""," ",R.produto_nome]}),e.jsx("p",{className:"text-sm opacity-75",children:R.categoria_nome})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:"Impacto Financeiro"}),e.jsx("div",{className:"text-2xl font-bold",children:S(R.impacto_financeiro)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"Margem Lquida"}),e.jsx("div",{className:"text-lg font-bold",children:S(R.margem_liquida)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"% Margem"}),e.jsx("div",{className:"text-lg font-bold",children:C(R.percentual_margem)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"Comisso"}),e.jsx("div",{className:"text-lg font-bold",children:S(R.valor_comissao)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium opacity-75",children:"% Comisso"}),e.jsx("div",{className:"text-lg font-bold",children:C(R.percentual_comissao)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold mb-2",children:" Alertas:"}),e.jsx("ul",{className:"list-disc list-inside text-sm space-y-1",children:R.alertas.map((F,I)=>e.jsx("li",{children:F},I))})]})]},B))})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),L=()=>h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Funcionrios por Volume de Comisses (10 maiores)"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(Bn,{data:h.ranking,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"funcionario_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Fr,{}),e.jsx(or,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_comissao",fill:"#8884d8",name:"Total de Comisses"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Mdia"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.ranking.map(R=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-700",children:[R.posicao,""]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.funcionario_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_comissoes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(R.media_comissao)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),Z=()=>p?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Produtos por Volume de Comisses (10 maiores)"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(Bn,{data:p.ranking,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"produto_nome",angle:-45,textAnchor:"end",height:100}),e.jsx(Fr,{}),e.jsx(or,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"total_comissao",fill:"#82ca9d",name:"Total de Comisses"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Vendas"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Venda"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.ranking.map(R=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-lg font-bold text-gray-700",children:[R.posicao,""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.produto_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:R.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_vendas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(R.total_venda)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),D=()=>y?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Relatrio informativo"})," baseado em volume histrico. No representa meta, desempenho ou poltica de incentivo."]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Distribuio de Comisses por Categoria"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(g1,{children:[e.jsx(Tn,{data:y.ranking,dataKey:"total_comissao",nameKey:"categoria_nome",cx:"50%",cy:"50%",outerRadius:120,label:R=>`${R.categoria_nome}: ${R.percentual_total}%`,children:y.ranking.map((R,B)=>e.jsx(_l,{fill:T[B%T.length]},`cell-${B}`))}),e.jsx(or,{formatter:R=>S(R)})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Posio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% do Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qtd Comisses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Vendas"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.ranking.map(R=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-lg font-bold text-gray-700",children:[R.posicao,""]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.categoria_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.total_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600 font-medium",children:C(R.percentual_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:R.quantidade_comissoes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:S(R.total_venda)})]},R.posicao))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."}),K=()=>b?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{className:"font-semibold",children:"Regime de competncia:"})," as comisses so reconhecidas como despesa na data da venda, independentemente do pagamento. Inclui comisses pendentes e pagas."]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Receita Bruta (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:S(b.total_ano.receita_bruta)})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Despesa Comisso (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-orange-800",children:S(b.total_ano.despesa_comissao)})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Margem Lquida (Ano)"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:S(b.total_ano.margem_liquida)})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"% Comisso sobre Receita"}),e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:C(b.total_ano.percentual_comissao)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Evoluo Mensal - DRE"}),e.jsx(da,{width:"100%",height:400,children:e.jsxs(Xd,{data:b.dados_mensais,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"mes_nome"}),e.jsx(Fr,{}),e.jsx(or,{formatter:R=>S(R)}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"receita_bruta",stroke:"#8884d8",name:"Receita Bruta",strokeWidth:2}),e.jsx(as,{type:"monotone",dataKey:"despesa_comissao",stroke:"#ff7c7c",name:"Despesa Comisso",strokeWidth:2}),e.jsx(as,{type:"monotone",dataKey:"margem_liquida",stroke:"#82ca9d",name:"Margem Lquida",strokeWidth:2})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Receita Bruta"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Custo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Bruta"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margem Lquida"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% Comisso"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.dados_mensais.map(R=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R.mes_nome}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600 font-medium",children:S(R.receita_bruta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:S(R.custo_total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-medium",children:S(R.despesa_comissao)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-700",children:S(R.margem_bruta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-green-600",children:S(R.margem_liquida)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-purple-600",children:C(R.percentual_comissao_sobre_receita)})]},R.mes))})]})})]}):e.jsx("div",{className:"text-center py-12",children:"Carregando..."});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>t("/comissoes-listagem"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar para Demonstrativo"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:" Relatrios Analticos de Comisses"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Anlise de rentabilidade, margem e tomada de deciso estratgica"})]}),A(),O(),s?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"})}):e.jsxs(e.Fragment,{children:[r==="margem-produto"&&V(),r==="produtos-prejudiciais"&&G(),r==="ranking-funcionarios"&&L(),r==="ranking-produtos"&&Z(),r==="ranking-categorias"&&D(),r==="dre"&&K()]})]})};function C6(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!1),[i,l]=j.useState(!1),[c,d]=j.useState({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0});j.useEffect(()=>{u(),m()},[]);const u=async()=>{try{const y=await U.get("/categorias-financeiras");r(y.data.filter(f=>f.ativo))}catch(y){console.error("Erro ao carregar categorias:",y),alert("Erro ao carregar categorias")}},m=async()=>{o(!0);try{const y=await U.get("/subcategorias");s(y.data)}catch(y){console.error("Erro ao carregar subcategorias:",y),alert("Erro ao carregar subcategorias")}finally{o(!1)}},x=async y=>{if(y.preventDefault(),!c.categoria_id||!c.nome){alert("Preencha categoria e nome");return}try{c.id?await U.put(`/subcategorias/${c.id}`,c):await U.post("/subcategorias",c),l(!1),d({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0}),m()}catch(f){console.error("Erro ao salvar:",f),alert("Erro ao salvar subcategoria")}},h=y=>{d(y),l(!0)},v=async y=>{if(confirm("Deseja realmente excluir esta subcategoria?"))try{await U.delete(`/subcategorias/${y}`),m()}catch(f){console.error("Erro ao excluir:",f),alert("Erro ao excluir subcategoria")}},p=y=>{const f=t.find(b=>b.id===y);return f?f.nome:"-"},g=a.reduce((y,f)=>{const b=f.categoria_id;return y[b]||(y[b]={categoria:p(b),itens:[]}),y[b].itens.push(f),y},{});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Subcategorias"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gerencie as subcategorias de produtos"})]}),e.jsxs("button",{onClick:()=>{d({id:null,categoria_id:"",nome:"",descricao:"",ativo:!0}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("span",{children:"+"}),"Nova Subcategoria"]})]}),n?e.jsx("div",{className:"text-center py-8",children:"Carregando..."}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(g).map(([y,f])=>e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:e.jsx("h2",{className:"font-semibold text-lg text-gray-800",children:f.categoria})}),e.jsx("div",{className:"divide-y",children:f.itens.map(b=>e.jsxs("div",{className:"px-4 py-3 flex justify-between items-center hover:bg-gray-50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:b.nome}),b.descricao&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:b.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.ativo?"Ativo":"Inativo"}),e.jsx("button",{onClick:()=>h(b),className:"text-blue-600 hover:text-blue-800 px-3 py-1",children:"Editar"}),e.jsx("button",{onClick:()=>v(b.id),className:"text-red-600 hover:text-red-800 px-3 py-1",children:"Excluir"})]})]},b.id))})]},y)),Object.keys(g).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma subcategoria cadastrada"})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[c.id?"Editar":"Nova"," Subcategoria"]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),e.jsxs("select",{value:c.categoria_id,onChange:y=>d({...c,categoria_id:parseInt(y.target.value)}),className:"w-full border rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),t.map(y=>e.jsx("option",{value:y.id,children:y.nome},y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:c.nome,onChange:y=>d({...c,nome:y.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:c.descricao,onChange:y=>d({...c,descricao:y.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:"3"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.ativo,onChange:y=>d({...c,ativo:y.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm text-gray-700",children:"Ativo"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Salvar"})]})]})]})})]})}const Ywe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(!1),[i,l]=j.useState(null),[c,d]=j.useState(new Set),[u,m]=j.useState({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),x=4;j.useEffect(()=>{h()},[]);const h=async()=>{try{s(!0);const S=await U.get("/produtos/categorias");r(S.data)}catch(S){console.error("Erro ao carregar categorias:",S),alert("Erro ao carregar categorias")}finally{s(!1)}},v=S=>{const C=new Set(c);C.has(S)?C.delete(S):C.add(S),d(C)},p=async S=>{var C,E;S.preventDefault();try{i?await U.put(`/produtos/categorias/${i}`,u):await U.post("/produtos/categorias",u),o(!1),l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),h()}catch(T){console.error("Erro ao salvar categoria:",T),(E=(C=T.response)==null?void 0:C.data)!=null&&E.detail?alert(T.response.data.detail):alert("Erro ao salvar categoria")}},g=S=>{l(S.id),m({nome:S.nome,descricao:S.descricao||"",categoria_pai_id:S.categoria_pai_id,ordem:S.ordem}),o(!0)},y=async S=>{var C,E;if(S.total_filhos>0){alert(`Esta categoria possui ${S.total_filhos} subcategoria(s). Remova-as primeiro.`);return}if(!(S.total_produtos>0&&!confirm(`Esta categoria possui ${S.total_produtos} produto(s). Deseja realmente excluir?`)))try{await U.delete(`/produtos/categorias/${S.id}`),h()}catch(T){console.error("Erro ao excluir categoria:",T),alert(((E=(C=T.response)==null?void 0:C.data)==null?void 0:E.detail)||"Erro ao excluir categoria")}},f=S=>{if(S.nivel>=x){alert(`Limite de ${x} nveis de categorias atingido.`);return}l(null),m({nome:"",descricao:"",categoria_pai_id:S.id,ordem:0}),o(!0)},b=()=>{l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0}),o(!0)},N=(S=null,C=1)=>t.filter(E=>E.categoria_pai_id===S).sort((E,T)=>E.ordem-T.ordem||E.nome.localeCompare(T.nome)).map(E=>({...E,nivel:C,filhos:N(E.id,C+1)})),_=(S,C=1)=>{const E=S.filhos&&S.filhos.length>0,T=c.has(S.id),q=C<x,A=(C-1)*30;return e.jsxs(pe.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white hover:bg-gray-50 border-b",style:{paddingLeft:`${20+A}px`},children:[e.jsx("div",{className:"w-5 flex items-center justify-center",children:E?e.jsx("button",{onClick:()=>v(S.id),className:"text-gray-500 hover:text-gray-700 transition-colors",children:T?e.jsx(ec,{size:18}):e.jsx(Rl,{size:18})}):e.jsx("span",{className:"text-gray-300",children:""})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800",children:S.nome}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Nvel ",C]}),S.total_filhos>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:[S.total_filhos," sub"]}),S.total_produtos>0&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:[S.total_produtos," produtos"]})]}),S.descricao&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[q&&e.jsx("button",{onClick:()=>f(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Adicionar subcategoria",children:e.jsx(gs,{size:18})}),!q&&e.jsx("span",{className:"p-2 text-gray-300 cursor-not-allowed",title:`Limite de ${x} nveis atingido`,children:e.jsx(pr,{size:18})}),e.jsx("button",{onClick:()=>g(S),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded transition-colors",title:"Editar",children:e.jsx(Ti,{size:18})}),e.jsx("button",{onClick:()=>y(S),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:e.jsx(Oo,{size:18})})]})]}),E&&T&&e.jsx("div",{children:S.filhos.map(O=>_(O,C+1))})]},S.id)},w=N();return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Carregando categorias..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Categorias"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Gerencie suas categorias hierarquicamente (at ",x," nveis)"]})]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:[e.jsx(gs,{size:20}),"Nova Categoria"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(pr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Nenhuma categoria cadastrada"}),e.jsx("button",{onClick:b,className:"mt-4 text-blue-600 hover:text-blue-700",children:"Criar primeira categoria"})]}):e.jsx("div",{children:w.map(S=>_(S))})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Editar Categoria":u.categoria_pai_id?"Nova Subcategoria":"Nova Categoria"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:u.nome,onChange:S=>m({...u,nome:S.target.value}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:u.descricao,onChange:S=>m({...u,descricao:S.target.value}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:u.ordem,onChange:S=>m({...u,ordem:parseInt(S.target.value)||0}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Menor valor aparece primeiro"})]}),u.categoria_pai_id&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx(pr,{className:"inline mr-1"}),"Esta ser uma subcategoria"]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),l(null),m({nome:"",descricao:"",categoria_pai_id:null,ordem:0})},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:i?"Salvar":"Criar"})]})]})]})})]})},Qwe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState(null),[v,p]=j.useState(new Set),[g,y]=j.useState("todos"),[f,b]=j.useState({nome:"",tipo:"despesa",cor:"#6366f1",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),[N,_]=j.useState({categoria_id:null,nome:"",descricao:"",ativo:!0}),w=["","","","","","","","","","","","","","","","","","","",""],S=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899"];j.useEffect(()=>{C()},[]);const C=async()=>{await Promise.all([E(),T()])},E=async()=>{try{o(!0);const z=await U.get("/categorias-financeiras/");console.log(" Categorias carregadas:",z.data.length),console.log(" Primeira categoria:",z.data[0]),r(z.data)}catch(z){console.error("Erro ao carregar categorias:",z),be.error("Erro ao carregar categorias financeiras")}finally{o(!1)}},T=async()=>{var z,oe;try{console.log(" Iniciando carregamento de subcategorias DRE...");const W=await U.get("/dre/subcategorias");console.log(" Resposta recebida:",W),console.log(" Subcategorias DRE carregadas:",W.data.length),console.log(" Primeira subcategoria:",W.data[0]),console.log(" Todas as subcategorias:",W.data),s(W.data)}catch(W){console.error(" ERRO ao carregar subcategorias DRE:",W),console.error(" Erro completo:",((z=W.response)==null?void 0:z.data)||W.message),console.error(" Status:",(oe=W.response)==null?void 0:oe.status),s([])}},q=z=>{const oe=new Set(v);oe.has(z)?oe.delete(z):oe.add(z),p(oe)},A=z=>{if(!z.dre_subcategoria_id)return[];const oe=a.find(ae=>ae.id===z.dre_subcategoria_id);if(!oe)return console.log(` Categoria "${z.nome}" tem dre_subcategoria_id=${z.dre_subcategoria_id} mas no encontrada`),[];const W=a.filter(ae=>ae.categoria_id===oe.categoria_id);return console.log(` Categoria "${z.nome}"  ${W.length} subcategorias DRE`),W},O=async z=>{var oe,W;if(z.preventDefault(),!f.nome||!f.tipo){be.error("Preencha nome e tipo");return}try{let ae;if(u)await U.put(`/categorias-financeiras/${u}`,{nome:f.nome,tipo:f.tipo,cor:f.cor,icone:f.icone,descricao:f.descricao,ativo:f.ativo}),ae=u,be.success("Categoria atualizada com sucesso!");else if(ae=(await U.post("/categorias-financeiras/",{nome:f.nome,tipo:f.tipo,cor:f.cor,icone:f.icone,descricao:f.descricao,ativo:f.ativo})).data.id,be.success("Categoria criada com sucesso!"),f.novasSubcategorias.length>0){const ce=f.novasSubcategorias.filter(ie=>ie.nome.trim());for(const ie of ce)try{await U.post("/subcategorias/",{categoria_id:ae,nome:ie.nome,descricao:ie.descricao,ativo:ie.ativo})}catch(we){console.error("Erro ao criar subcategoria:",we),be.error(`Erro ao criar subcategoria: ${ie.nome}`)}ce.length>0&&be.success(`${ce.length} subcategoria(s) criada(s)!`)}l(!1),L(),C()}catch(ae){console.error("Erro ao salvar:",ae),be.error(((W=(oe=ae.response)==null?void 0:oe.data)==null?void 0:W.detail)||"Erro ao salvar categoria")}},V=async z=>{console.log(` Editando categoria "${z.nome}" (ID: ${z.id})`);const oe=A(z);console.log(` Subcategorias DRE encontradas: ${oe.length}`,oe);const W=oe.map(ae=>({id:ae.id,nome:ae.nome,descricao:ae.descricao||"",ativo:ae.ativo,tipo_custo:ae.tipo_custo,escopo_rateio:ae.escopo_rateio}));b({nome:z.nome,tipo:z.tipo,cor:z.cor||"#6366f1",icone:z.icone||"",descricao:z.descricao||"",ativo:z.ativo,novasSubcategorias:W}),m(z.id),l(!0)},G=async z=>{var oe,W;if(window.confirm("Deseja realmente excluir esta categoria?"))try{await U.delete(`/categorias-financeiras/${z}`),be.success("Categoria excluda com sucesso!"),C()}catch(ae){console.error("Erro ao excluir:",ae),be.error(((W=(oe=ae.response)==null?void 0:oe.data)==null?void 0:W.detail)||"Erro ao excluir categoria")}},L=()=>{b({nome:"",tipo:"despesa",cor:"#6366f1",icone:"",descricao:"",ativo:!0,novasSubcategorias:[]}),m(null)},Z=(z="")=>{b({...f,novasSubcategorias:[...f.novasSubcategorias,{nome:z,descricao:"",ativo:!0}]})},D=(z,oe,W)=>{const ae=[...f.novasSubcategorias];ae[z][oe]=W,b({...f,novasSubcategorias:ae})},K=z=>{const oe=f.novasSubcategorias.filter((W,ae)=>ae!==z);b({...f,novasSubcategorias:oe})},R=(z,oe)=>{z.key==="Tab"&&!z.shiftKey&&oe===f.novasSubcategorias.length-1&&(z.preventDefault(),Z())},B=()=>{_({categoria_id:null,nome:"",descricao:"",ativo:!0}),h(null)},F=async z=>{var oe,W;if(z.preventDefault(),!N.categoria_id||!N.nome){be.error("Preencha categoria e nome");return}try{x?(await U.put(`/subcategorias/${x}`,N),be.success("Subcategoria atualizada!")):(await U.post("/subcategorias",N),be.success("Subcategoria criada!")),d(!1),B(),carregarSubcategorias()}catch(ae){console.error("Erro ao salvar:",ae),be.error(((W=(oe=ae.response)==null?void 0:oe.data)==null?void 0:W.detail)||"Erro ao salvar subcategoria")}},I=t.filter(z=>g==="todos"?!0:z.tipo===g),k=t.filter(z=>z.tipo==="despesa").length,M=t.filter(z=>z.tipo==="receita").length;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Categorias Financeiras"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Organize suas receitas e despesas |",e.jsxs("span",{className:"text-red-600 ml-2",children:[" ",k," despesas"]}),e.jsxs("span",{className:"text-green-600 ml-2",children:[" ",M," receitas"]})]})]}),e.jsxs("button",{onClick:()=>{L(),l(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:[e.jsx(gs,{})," Nova Categoria"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>y("todos"),className:`px-4 py-2 rounded-lg ${g==="todos"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Todas (",t.length,")"]}),e.jsxs("button",{onClick:()=>y("despesa"),className:`px-4 py-2 rounded-lg ${g==="despesa"?"bg-red-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Despesas (",k,")"]}),e.jsxs("button",{onClick:()=>y("receita"),className:`px-4 py-2 rounded-lg ${g==="receita"?"bg-green-600 text-white":"bg-gray-200 text-gray-700"}`,children:[" Receitas (",M,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n?e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"Carregando..."}):I.length===0?e.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:"Nenhuma categoria encontrada"}):e.jsx("div",{className:"divide-y divide-gray-200",children:I.map(z=>{const oe=A(z),W=v.has(z.id),ae=oe.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("button",{onClick:()=>q(z.id),className:`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 transform hover:scale-105 ${ae?W?"text-white bg-gradient-to-r from-purple-600 to-purple-700 shadow-lg hover:shadow-xl":"text-purple-600 bg-purple-100 hover:bg-purple-200 hover:text-purple-700 shadow-md hover:shadow-lg":"text-gray-300 cursor-not-allowed bg-gray-50"}`,disabled:!ae,title:ae?W?"Recolher subcategorias":"Expandir subcategorias":"Sem subcategorias DRE",children:ae?W?e.jsx(ec,{size:22,strokeWidth:2.5}):e.jsx(Rl,{size:22,strokeWidth:2.5}):e.jsx(Rl,{size:22})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{style:{backgroundColor:z.cor},className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-lg",children:z.icone||""}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:z.nome}),z.descricao&&e.jsx("div",{className:"text-sm text-gray-500",children:z.descricao})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z.tipo==="receita"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.tipo==="receita"?" Receita":" Despesa"}),ae&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx("span",{children:" DRE"}),e.jsx("span",{className:"bg-purple-200 text-purple-900 px-1.5 rounded-full font-bold",children:oe.length})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>V(z),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-md",title:"Editar",children:e.jsx(Ti,{size:18})}),e.jsx("button",{onClick:()=>G(z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Excluir",children:e.jsx(Oo,{size:18})})]})]}),W&&e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-t border-purple-100",children:ae?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-6 py-2 bg-purple-100/50 border-b border-purple-200",children:e.jsxs("span",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:[" Subcategorias DRE (",oe.length,")"]})}),oe.map(ee=>e.jsxs("div",{className:"px-6 py-3 flex items-center gap-4 ml-9",children:[e.jsx("span",{className:"text-purple-400 text-lg",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:ee.nome}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded",children:ee.tipo_custo}),ee.escopo_rateio&&e.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded",children:ee.escopo_rateio})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee.ativo?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:ee.ativo?" Ativo":" Inativo"})]},ee.id))]}):e.jsx("div",{className:"px-6 py-4 ml-9 text-center",children:e.jsxs("div",{className:"text-gray-400 text-sm",children:[e.jsx("div",{className:"mb-2",children:""}),e.jsx("div",{className:"font-medium",children:"Nenhuma subcategoria DRE cadastrada"}),e.jsx("div",{className:"text-xs mt-1",children:"Configure subcategorias no mdulo DRE"})]})})})]},z.id)})})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-bold",children:u?"Editar Categoria":"Nova Categoria"}),e.jsx("button",{onClick:()=>{l(!1),L()},className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:f.nome,onChange:z=>b({...f,nome:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),e.jsxs("select",{value:f.tipo,onChange:z=>b({...f,tipo:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"despesa",children:" Despesa"}),e.jsx("option",{value:"receita",children:" Receita"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"cone"}),e.jsx("select",{value:f.icone,onChange:z=>b({...f,icone:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:w.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:f.cor,onChange:z=>b({...f,cor:z.target.value}),className:"w-12 h-10 border border-gray-300 rounded-md"}),e.jsx("select",{value:f.cor,onChange:z=>b({...f,cor:z.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:S.map(z=>e.jsx("option",{value:z,children:z},z))})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:f.descricao,onChange:z=>b({...f,descricao:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:"3"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ativo",checked:f.ativo,onChange:z=>b({...f,ativo:z.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"ativo",className:"text-sm text-gray-700",children:"Categoria ativa"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subcategorias DRE (opcional)"}),e.jsxs("button",{type:"button",onClick:()=>Z(),className:"text-sm text-purple-600 hover:text-purple-800 flex items-center gap-1",children:[e.jsx(gs,{size:14})," Adicionar"]})]}),f.novasSubcategorias.length>0&&e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:f.novasSubcategorias.map((z,oe)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("input",{type:"text",value:z.nome,onChange:W=>D(oe,"nome",W.target.value),onKeyDown:W=>R(W,oe),placeholder:"Nome da subcategoria (Tab para adicionar mais)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>K(oe),className:"text-red-600 hover:text-red-800 p-1",title:"Remover",children:e.jsx(Oo,{size:16})})]},oe))}),f.novasSubcategorias.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:'Clique em "Adicionar" ou crie a categoria primeiro e depois adicione subcategorias'})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),L()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:u?"Atualizar":"Criar"})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:x?"Editar Subcategoria DRE":"Nova Subcategoria DRE"}),N.categoria_id&&t.find(z=>z.id===N.categoria_id)&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Categoria: "}),e.jsx("span",{className:"font-semibold text-gray-800",children:t.find(z=>z.id===N.categoria_id).nome})]}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Subcategoria *"}),e.jsx("input",{type:"text",value:N.nome,onChange:z=>_({...N,nome:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:N.descricao,onChange:z=>_({...N,descricao:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.ativo,onChange:z=>_({...N,ativo:z.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),B()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:x?"Atualizar":"Criar"})]})]})]})})]})},Jwe=()=>{const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(new Set),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[x,h]=j.useState(null),[v,p]=j.useState(null),[g,y]=j.useState(""),[f,b]=j.useState(""),[N,_]=j.useState({nome:"",ativo:!0}),[w,S]=j.useState({nome:"",especie_id:"",ativo:!0});j.useEffect(()=>{C()},[]);const C=async()=>{try{s(!0);const[K,R]=await Promise.all([U.get("/cadastros/especies"),U.get("/cadastros/racas")]),B=K.data.map(I=>({...I,racas:R.data.filter(k=>k.especie_id===I.id)}));r(B);const F=new Set(B.map(I=>I.id));o(F)}catch(K){console.error("Erro ao carregar dados:",K),y("Erro ao carregar dados")}finally{s(!1)}},E=K=>{const R=new Set(n);R.has(K)?R.delete(K):R.add(K),o(R)},T=(K=null)=>{K?(m(K),_({nome:K.nome,ativo:K.ativo})):(m(null),_({nome:"",ativo:!0})),y(""),l(!0)},q=()=>{l(!1),m(null),_({nome:"",ativo:!0}),y("")},A=async K=>{var R,B;if(K.preventDefault(),y(""),!N.nome||N.nome.trim()===""){y("O nome da espcie  obrigatrio");return}try{u?await U.put(`/cadastros/especies/${u.id}`,N):await U.post("/cadastros/especies",N),C(),q()}catch(F){console.error("Erro ao salvar espcie:",F),y(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao salvar espcie")}},O=async K=>{var R,B;if(window.confirm(`Deseja realmente desativar a espcie "${K.nome}"?

Isso tambm desativar todas as raas vinculadas.`))try{await U.delete(`/cadastros/especies/${K.id}`),C()}catch(F){console.error("Erro ao desativar espcie:",F),alert(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao desativar espcie")}},V=(K,R=null)=>{p(K),R?(h(R),S({nome:R.nome,especie_id:R.especie_id,ativo:R.ativo})):(h(null),S({nome:"",especie_id:K.id,ativo:!0})),y(""),d(!0)},G=()=>{d(!1),h(null),p(null),S({nome:"",especie_id:"",ativo:!0}),y("")},L=async K=>{var R,B;if(K.preventDefault(),y(""),!w.nome||w.nome.trim()===""){y("O nome da raa  obrigatrio");return}try{const F={nome:w.nome,especie_id:parseInt(w.especie_id),ativo:w.ativo};x?await U.put(`/cadastros/racas/${x.id}`,F):await U.post("/cadastros/racas",F),C(),G()}catch(F){console.error("Erro ao salvar raa:",F),y(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao salvar raa")}},Z=async K=>{var R,B;if(window.confirm(`Deseja realmente desativar a raa "${K.nome}"?`))try{await U.delete(`/cadastros/racas/${K.id}`),C()}catch(F){console.error("Erro ao desativar raa:",F),alert(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao desativar raa")}},D=t.filter(K=>K.nome.toLowerCase().includes(f.toLowerCase())||K.racas.some(R=>R.nome.toLowerCase().includes(f.toLowerCase())));return a?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Carregando espcies e raas..."})]}):e.jsxs("div",{className:"cadastros-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Espcies e Raas"}),e.jsx("p",{className:"page-subtitle",children:"Gerencie as espcies de animais e suas raas"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>T(),children:[e.jsx(gs,{})," Nova Espcie"]})]}),e.jsxs("div",{className:"filters-bar",children:[e.jsx("input",{type:"text",placeholder:"Buscar espcie ou raa...",value:f,onChange:K=>b(K.target.value),className:"search-input"}),e.jsxs("div",{className:"filter-info",children:[D.length," espcie",D.length!==1?"s":""]})]}),e.jsx("div",{className:"especies-list",children:D.length===0?e.jsx("div",{className:"empty-state",children:f?"Nenhuma espcie ou raa encontrada":"Nenhuma espcie cadastrada"}):D.map(K=>{const R=n.has(K.id),B=K.racas.filter(F=>F.ativo);return e.jsxs("div",{className:`especie-card ${K.ativo?"":"inactive"}`,children:[e.jsxs("div",{className:"especie-header",children:[e.jsxs("div",{className:"especie-info",onClick:()=>E(K.id),children:[e.jsx("button",{className:"expand-btn",children:R?e.jsx(ec,{size:20}):e.jsx(Rl,{size:20})}),e.jsx(Zr,{className:"especie-icon",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"especie-nome",children:K.nome}),e.jsxs("span",{className:"racas-count",children:[B.length," raa",B.length!==1?"s":""," ativa",B.length!==1?"s":""]})]}),!K.ativo&&e.jsx("span",{className:"badge badge-danger",children:"Inativa"})]}),e.jsxs("div",{className:"especie-actions",children:[e.jsx("button",{className:"btn-icon btn-success",onClick:()=>V(K),title:"Adicionar Raa",children:e.jsx(gs,{})}),e.jsx("button",{className:"btn-icon btn-edit",onClick:()=>T(K),title:"Editar Espcie",children:e.jsx(Ti,{})}),K.ativo&&e.jsx("button",{className:"btn-icon btn-delete",onClick:()=>O(K),title:"Desativar Espcie",children:e.jsx(Oo,{})})]})]}),R&&e.jsx("div",{className:"racas-list",children:K.racas.length===0?e.jsxs("div",{className:"empty-racas",children:[e.jsx("p",{children:"Nenhuma raa cadastrada ainda"}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>V(K),children:[e.jsx(gs,{})," Adicionar Primeira Raa"]})]}):e.jsx(e.Fragment,{children:K.racas.map(F=>e.jsxs("div",{className:`raca-item ${F.ativo?"":"inactive"}`,children:[e.jsxs("div",{className:"raca-info",children:[e.jsx(Vm,{className:"raca-icon",size:16}),e.jsx("span",{className:"raca-nome",children:F.nome}),!F.ativo&&e.jsx("span",{className:"badge badge-sm badge-danger",children:"Inativa"})]}),e.jsxs("div",{className:"raca-actions",children:[e.jsx("button",{className:"btn-icon-sm btn-edit",onClick:()=>V(K,F),title:"Editar Raa",children:e.jsx(Ti,{size:14})}),F.ativo&&e.jsx("button",{className:"btn-icon-sm btn-delete",onClick:()=>Z(F),title:"Desativar Raa",children:e.jsx(Oo,{size:14})})]})]},F.id))})})]},K.id)})}),i&&e.jsx("div",{className:"modal-overlay",onClick:q,children:e.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:u?"Editar Espcie":"Nova Espcie"}),e.jsx("button",{className:"btn-close",onClick:q,children:e.jsx(Oi,{})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"modal-body",children:[g&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(pr,{})," ",g]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nome da Espcie *"}),e.jsx("input",{type:"text",value:N.nome,onChange:K=>_({...N,nome:K.target.value}),placeholder:"Ex: Co, Gato, Ave, Rptil...",required:!0,autoFocus:!0}),e.jsx("small",{children:"Exemplos: Co, Gato, Ave, Rptil, Coelho, Peixe, Hamster"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:N.ativo,onChange:K=>_({...N,ativo:K.target.checked})}),e.jsx("span",{children:"Espcie ativa"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:q,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(Il,{})," Salvar"]})]})]})]})}),c&&e.jsx("div",{className:"modal-overlay",onClick:G,children:e.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[x?"Editar Raa":"Nova Raa",v&&e.jsxs("span",{className:"subtitle",children:[" - ",v.nome]})]}),e.jsx("button",{className:"btn-close",onClick:G,children:e.jsx(Oi,{})})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"modal-body",children:[g&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx(pr,{})," ",g]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nome da Raa *"}),e.jsx("input",{type:"text",value:w.nome,onChange:K=>S({...w,nome:K.target.value}),placeholder:"Ex: Labrador, Siams, SRD...",required:!0,autoFocus:!0}),e.jsx("small",{children:"Exemplos: Labrador, Golden Retriever, SRD (Sem Raa Definida)"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:w.ativo,onChange:K=>S({...w,ativo:K.target.checked})}),e.jsx("span",{children:"Raa ativa"})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:G,children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(Il,{})," Salvar"]})]})]})]})})]})},Zwe=()=>{var L,Z,D,K;const{clienteId:t}=Zl(),r=Ht(),[a,s]=j.useState(null),[n,o]=j.useState(null),[i,l]=j.useState([]),[c,d]=j.useState(null),[u,m]=j.useState(!0),[x,h]=j.useState(""),[v,p]=j.useState({}),[g,y]=j.useState({}),[f,b]=j.useState({}),[N,_]=j.useState({page:1,per_page:20,data_inicio:"",data_fim:"",tipo:"",status:""});j.useEffect(()=>{t&&w()},[t,N]);const w=async()=>{var R,B;try{m(!0),h("");const F=new URLSearchParams;F.append("page",N.page),F.append("per_page",N.per_page),N.data_inicio&&F.append("data_inicio",N.data_inicio),N.data_fim&&F.append("data_fim",N.data_fim),N.tipo&&F.append("tipo",N.tipo),N.status&&F.append("status",N.status);const I=await U.get(`/financeiro/cliente/${t}?${F.toString()}`);s(I.data.cliente),o(I.data.resumo),l(I.data.historico),d(I.data.paginacao)}catch(F){console.error("Erro ao carregar histrico financeiro:",F),h(((B=(R=F.response)==null?void 0:R.data)==null?void 0:B.detail)||"Erro ao carregar histrico financeiro")}finally{m(!1)}},S=R=>{_({...N,page:R})},C=R=>{_({...N,...R,page:1})},E=()=>{_({page:1,per_page:20,data_inicio:"",data_fim:"",tipo:"",status:""})},T=async(R,B)=>{var I,k;const F=`${R.tipo}-${B}`;if(v[F]){p({...v,[F]:!1});return}p({...v,[F]:!0}),R.tipo==="venda"&&!g[(I=R.detalhes)==null?void 0:I.venda_id]&&await q((k=R.detalhes)==null?void 0:k.venda_id)},q=async R=>{if(R)try{b({...f,[R]:!0});const B=await U.get(`/vendas/${R}`);y({...g,[R]:B.data})}catch(B){console.error("Erro ao carregar detalhes da venda:",B)}finally{b({...f,[R]:!1})}},A=R=>{R&&r(`/pdv?venda=${R}`)},O=R=>{switch(R){case"venda":return"";case"devolucao":return"";case"conta_receber":return"";case"recebimento":return"";case"credito":return"";default:return""}},V=R=>{switch(R){case"venda":return"Venda";case"devolucao":return"Devoluo";case"conta_receber":return"Conta a Receber";case"recebimento":return"Recebimento";case"credito":return"Crdito";default:return R}},G=R=>({finalizada:"bg-green-100 text-green-700",concluida:"bg-green-100 text-green-700",pendente:"bg-yellow-100 text-yellow-700",paga:"bg-blue-100 text-blue-700",cancelada:"bg-red-100 text-red-700",devolvida:"bg-red-100 text-red-700",efetivado:"bg-green-100 text-green-700"})[R]||"bg-gray-100 text-gray-700";return u&&!i.length?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando histrico financeiro..."})]})}):x?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-xl p-6 text-center",children:[e.jsx(pr,{className:"text-red-600 text-4xl mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao Carregar Dados"}),e.jsx("p",{className:"text-red-600 mb-4",children:x}),e.jsx("button",{onClick:()=>r("/clientes"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Voltar para Clientes"})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r("/clientes"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(gd,{}),e.jsx("span",{className:"font-medium",children:"Voltar para Clientes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ch,{className:"text-purple-600"}),"Histrico Financeiro"]}),a&&e.jsxs("p",{className:"text-lg text-gray-600 mt-2 flex items-center gap-2",children:[e.jsx(Xn,{className:"text-gray-400"}),a.nome,e.jsxs("span",{className:"text-sm text-gray-400",children:["(",a.codigo,")"]})]})]}),n&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Crdito Disponvel"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",((L=a.credito_atual)==null?void 0:L.toFixed(2).replace(".",","))||"0,00"]})]})]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total Vendas (90d)"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",((Z=n.total_vendas_90d)==null?void 0:Z.toFixed(2).replace(".",","))||"0,00"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total em Aberto"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["R$ ",((D=n.total_em_aberto)==null?void 0:D.toFixed(2).replace(".",","))||"0,00"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"ltima Compra"}),n.ultima_compra?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",((K=n.ultima_compra.valor)==null?void 0:K.toFixed(2).replace(".",","))||"0,00"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(n.ultima_compra.data).toLocaleDateString("pt-BR")})]}):e.jsx("p",{className:"text-sm text-gray-400",children:"Nenhuma compra"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Total Transaes"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:n.total_transacoes_historico||0})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 mb-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-md font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(k2,{}),"Filtros"]}),e.jsx("button",{onClick:E,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Limpar filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(Cn,{className:"inline mr-1"}),"Data Incio"]}),e.jsx("input",{type:"date",value:N.data_inicio,onChange:R=>C({data_inicio:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(Cn,{className:"inline mr-1"}),"Data Fim"]}),e.jsx("input",{type:"date",value:N.data_fim,onChange:R=>C({data_fim:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:N.tipo,onChange:R=>C({tipo:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todas as transaes"}),e.jsx("option",{value:"venda",children:" Vendas"}),e.jsx("option",{value:"devolucao",children:" Devolues"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:N.status,onChange:R=>C({status:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"aberta",children:" Em Aberto"}),e.jsx("option",{value:"finalizada",children:" Finalizada (Paga)"}),e.jsx("option",{value:"cancelada",children:" Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Por pgina"}),e.jsxs("select",{value:N.per_page,onChange:R=>C({per_page:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Atualizando..."})]}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((R,B)=>{var z,oe,W,ae,ee;const F=`${R.tipo}-${B}`,I=v[F],k=(z=R.detalhes)==null?void 0:z.venda_id,M=k?g[k]:null;return e.jsxs(pe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>T(R,B),className:"text-gray-600 hover:text-purple-600 transition-colors",children:I?e.jsx($A,{size:18}):e.jsx(ec,{size:18})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R.data?new Date(R.data).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm font-medium",children:[e.jsx("span",{className:"text-xl",children:O(R.tipo)}),V(R.tipo)]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-md",children:[e.jsx("div",{className:"truncate",children:R.descricao}),((oe=R.detalhes)==null?void 0:oe.numero_venda)&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["#",R.detalhes.numero_venda]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:e.jsxs("span",{className:`font-bold ${R.valor<0?"text-red-600":"text-green-600"}`,children:[R.valor<0?"- ":"+ ","R$ ",Math.abs(R.valor).toFixed(2).replace(".",",")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${G(R.status)}`,children:R.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:R.tipo==="venda"&&k&&e.jsxs("button",{onClick:()=>A(k),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded-lg transition-colors flex items-center gap-1 mx-auto",children:[e.jsx(bd,{size:14}),"Ver no PDV"]})})]}),I&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 bg-gray-50",children:R.tipo==="venda"&&k?f[k]?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Carregando detalhes..."})]}):M?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(bd,{className:"text-blue-600"}),"Detalhes da Venda #",M.numero_venda]}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(M.data_venda).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Total da Venda"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["R$ ",(W=M.total)==null?void 0:W.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Total de Itens"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:((ae=M.itens)==null?void 0:ae.length)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" Desconto Total"}),e.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["R$ ",(M.desconto||0).toFixed(2).replace(".",",")]})]})]}),M.itens&&M.itens.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-50 px-4 py-2 border-b border-gray-200",children:e.jsxs("h5",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Qx,{className:"text-blue-600"}),"Produtos Vendidos"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Produto"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500",children:"Qtd"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Preo Unit."}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Desc. %"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Desc. R$"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Subtotal"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.itens.map((ce,ie)=>{var we,Se;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ce.produto_nome}),e.jsx("td",{className:"px-4 py-3 text-sm text-center font-semibold text-gray-700",children:ce.quantidade}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:["R$ ",(we=ce.preco_unitario)==null?void 0:we.toFixed(2).replace(".",",")]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:[ce.desconto_percentual||0,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600",children:["R$ ",(ce.desconto||0).toFixed(2).replace(".",",")]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:["R$ ",(Se=ce.subtotal)==null?void 0:Se.toFixed(2).replace(".",",")]})]},ie)})}),e.jsx("tfoot",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Total Geral:"}),e.jsxs("td",{className:"px-4 py-3 text-right text-lg font-bold text-green-600",children:["R$ ",(ee=M.total)==null?void 0:ee.toFixed(2).replace(".",",")]})]})})]})})]}),M.observacoes&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:" Observaes:"}),e.jsx("p",{className:"text-sm text-gray-700",children:M.observacoes})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{children:"No foi possvel carregar os detalhes da venda"})}):e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-3",children:"Detalhes da Transao"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 text-sm",children:Object.entries(R.detalhes||{}).map(([ce,ie])=>e.jsxs("div",{className:"flex justify-between border-b border-gray-100 pb-2",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[ce.replace(/_/g," "),":"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:typeof ie=="number"?`R$ ${ie.toFixed(2).replace(".",",")}`:(ie==null?void 0:ie.toString())||"N/A"})]},ce))})]})})})]},F)})})]})}),c&&c.total_paginas>1&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",(c.pagina_atual-1)*c.itens_por_pagina+1," a"," ",Math.min(c.pagina_atual*c.itens_por_pagina,c.total_itens)," de"," ",c.total_itens," transaes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>S(c.pagina_atual-1),disabled:!c.tem_anterior,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${c.tem_anterior?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(FA,{}),"Anterior"]}),e.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Pgina ",c.pagina_atual," de ",c.total_paginas]}),e.jsxs("button",{onClick:()=>S(c.pagina_atual+1),disabled:!c.tem_proxima,className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${c.tem_proxima?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:["Prxima",e.jsx(Rl,{})]})]})]})})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(rs,{className:"text-gray-300 text-6xl mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Nenhuma transao encontrada"}),e.jsx("p",{className:"text-gray-500 mb-6",children:N.tipo||N.status||N.data_inicio||N.data_fim?"Tente ajustar os filtros para ver mais resultados":"Ainda no h transaes financeiras para este cliente"}),(N.tipo||N.status||N.data_inicio||N.data_fim)&&e.jsx("button",{onClick:E,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Limpar Filtros"})]})})]})})},e_e={vips_inativos:{titulo:"VIPs em Risco",descricao:"Clientes VIP sem compra h mais de 20 dias",icone:TA,cor:"red",bgGradient:"from-red-500 to-red-600",bgLight:"bg-red-50",borderLight:"border-red-200",textColor:"text-red-700"},clientes_inativos:{titulo:"Clientes Inativos",descricao:"Sem compra h mais de 90 dias",icone:Dl,cor:"orange",bgGradient:"from-orange-500 to-orange-600",bgLight:"bg-orange-50",borderLight:"border-orange-200",textColor:"text-orange-700"},clientes_endividados:{titulo:"Alto Endividamento",descricao:"Clientes com saldo devedor significativo",icone:rs,cor:"yellow",bgGradient:"from-yellow-500 to-yellow-600",bgLight:"bg-yellow-50",borderLight:"border-yellow-200",textColor:"text-yellow-700"},oportunidades_novos:{titulo:"Novos Promissores",descricao:"Clientes novos com ticket alto",icone:tc,cor:"green",bgGradient:"from-green-500 to-green-600",bgLight:"bg-green-50",borderLight:"border-green-200",textColor:"text-green-700"},pets_sem_eventos:{titulo:"Pets Inativos",descricao:"Sem consulta h mais de 60 dias",icone:E2,cor:"purple",bgGradient:"from-purple-500 to-purple-600",bgLight:"bg-purple-50",borderLight:"border-purple-200",textColor:"text-purple-700"},whatsapp_inativo:{titulo:"WhatsApp Faltando",descricao:"Clientes sem nmero cadastrado",icone:xi,cor:"blue",bgGradient:"from-blue-500 to-blue-600",bgLight:"bg-blue-50",borderLight:"border-blue-200",textColor:"text-blue-700"}};function wc({tipo:t,dados:r,onClick:a}){const s=e_e[t],n=(s==null?void 0:s.icone)||Ml,o=r||{quantidade:0,impacto:null};return e.jsxs("div",{className:`${s.bgLight} border-2 ${s.borderLight} rounded-xl p-6 hover:shadow-lg transition-all cursor-pointer`,onClick:a,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 bg-gradient-to-br ${s.bgGradient} rounded-lg`,children:e.jsx(n,{className:"text-white",size:24})}),e.jsx(ih,{className:s.textColor,size:20})]}),e.jsx("h3",{className:`text-2xl font-bold ${s.textColor} mb-1`,children:(o==null?void 0:o.quantidade)??0}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:s.titulo}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:s.descricao}),(o==null?void 0:o.impacto)&&e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impacto estimado:"}),e.jsx("span",{className:`font-bold ${s.textColor}`,children:o.impacto})]})}),e.jsxs("button",{className:`mt-3 w-full py-2 text-sm font-medium ${s.textColor} hover:bg-white rounded-lg transition-colors flex items-center justify-center gap-2`,children:["Ver detalhes",e.jsx(ih,{size:14})]})]})}function t_e(){var m,x,h,v,p;const t=Ht(),[r,a]=j.useState(!0),[s,n]=j.useState(null),[o,i]=j.useState(null);j.useEffect(()=>{l()},[]);const l=async()=>{var g;try{a(!0);const[y,f]=await Promise.all([U.get("/clientes/"),U.get("/segmentacao/estatisticas")]),b=y==null?void 0:y.data,N=Array.isArray(b)?b:Array.isArray(b==null?void 0:b.data)?b.data:[],w=(f==null?void 0:f.data)||{};console.log(" [Dashboard] Clientes carregados:",N.length);const S=c(N,w);n(S),i(new Date)}catch(y){console.error("Erro ao carregar dashboard:",y),n({vips_inativos:{quantidade:0,clientes:[],impacto:"R$ 0"},clientes_inativos:{quantidade:0,clientes:[],diasMedia:0},clientes_novos:{quantidade:0,clientes:[]},oportunidades_upsell:{quantidade:0,clientes:[],potencial:"R$ 0"},clientes_risco_churn:{quantidade:0,clientes:[],diasMedia:0}}),((g=y.response)==null?void 0:g.status)===403?alert("Voc no tem permisso para acessar o dashboard gerencial"):alert("Erro ao carregar dashboard gerencial")}finally{a(!1)}},c=(g,y)=>{const f=new Date,N=(Array.isArray(g)?g:[]).filter(Z=>(Z==null?void 0:Z.tipo_cadastro)==="cliente"),_=N.filter(Z=>{const D=(Z==null?void 0:Z.segmento)||"Regular",K=(Z==null?void 0:Z.dias_desde_ultima_compra)??999;return D==="VIP"&&K>20}),w=_.reduce((Z,D)=>Z+((D==null?void 0:D.total_90d)??0),0),S=N.filter(Z=>((Z==null?void 0:Z.dias_desde_ultima_compra)??0)>90),C=S.reduce((Z,D)=>Z+((D==null?void 0:D.total_historico)??0),0),E=N.filter(Z=>((Z==null?void 0:Z.saldo_devedor)??0)>0),T=E.reduce((Z,D)=>Z+((D==null?void 0:D.saldo_devedor)??0),0),q=N.filter(Z=>{const D=(Z==null?void 0:Z.segmento)||"Regular",K=(Z==null?void 0:Z.ticket_medio)??0;return D==="Novo"&&K>200}),A=q.reduce((Z,D)=>Z+((D==null?void 0:D.ticket_medio)??0),0),O=N.filter(Z=>Array.isArray(Z==null?void 0:Z.pets)&&Z.pets.length>0);let V=0,G=[];O.forEach(Z=>{const D=Array.isArray(Z==null?void 0:Z.pets)?Z.pets:[];if(D.length>0){const K=D.filter(R=>{if(!(R!=null&&R.ultima_consulta))return!0;const B=new Date(R.ultima_consulta);return Math.floor((f-B)/(1e3*60*60*24))>60});K.length>0&&(V+=K.length,G.push(Z))}});const L=N.filter(Z=>!(Z!=null&&Z.celular)||Z.celular.trim()==="");return{vips_inativos:{quantidade:(_==null?void 0:_.length)??0,impacto:`R$ ${(w??0).toFixed(2)}`,clientes:_},clientes_inativos:{quantidade:(S==null?void 0:S.length)??0,impacto:`R$ ${((C??0)/12).toFixed(2)}/ms`,clientes:S},clientes_endividados:{quantidade:(E==null?void 0:E.length)??0,impacto:`R$ ${(T??0).toFixed(2)}`,clientes:E},oportunidades_novos:{quantidade:(q==null?void 0:q.length)??0,impacto:`~R$ ${(A??0).toFixed(0)}/ms`,clientes:q},pets_sem_eventos:{quantidade:V??0,impacto:`${(G==null?void 0:G.length)??0} donos`,clientes:G},whatsapp_inativo:{quantidade:(L==null?void 0:L.length)??0,impacto:"Canal perdido",clientes:L},total_clientes:(N==null?void 0:N.length)??0,estatisticas:y??{}}},d=g=>{t("/pessoas",{state:{filtro:g}})},u=()=>{l()};return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Carregando dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:[e.jsx("div",{className:"max-w-7xl mx-auto mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:" Dashboard Gerencial"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Viso executiva do negcio  ",(s==null?void 0:s.total_clientes)||0," clientes ativos"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Atualizado s ",o.toLocaleTimeString("pt-BR")]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(Um,{size:18}),"Atualizar"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(wc,{tipo:"vips_inativos",dados:(s==null?void 0:s.vips_inativos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("vips_inativos")}),e.jsx(wc,{tipo:"clientes_inativos",dados:(s==null?void 0:s.clientes_inativos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("clientes_inativos")}),e.jsx(wc,{tipo:"clientes_endividados",dados:(s==null?void 0:s.clientes_endividados)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("clientes_endividados")}),e.jsx(wc,{tipo:"oportunidades_novos",dados:(s==null?void 0:s.oportunidades_novos)||{quantidade:0,impacto:"R$ 0",clientes:[]},onClick:()=>d("oportunidades_novos")}),e.jsx(wc,{tipo:"pets_sem_eventos",dados:(s==null?void 0:s.pets_sem_eventos)||{quantidade:0,impacto:"0 donos",clientes:[]},onClick:()=>d("pets_sem_eventos")}),e.jsx(wc,{tipo:"whatsapp_inativo",dados:(s==null?void 0:s.whatsapp_inativo)||{quantidade:0,impacto:"Canal perdido",clientes:[]},onClick:()=>d("whatsapp_inativo")})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ml,{className:"text-blue-600",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Resumo Executivo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-red-700 mb-2",children:" Ao Urgente"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((m=s==null?void 0:s.vips_inativos)==null?void 0:m.quantidade)??0})," clientes VIP em risco de churn"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Contate imediatamente para evitar perda de ",((x=s==null?void 0:s.vips_inativos)==null?void 0:x.impacto)??"R$ 0"," em receita"]})]}),e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-yellow-700 mb-2",children:" Ateno"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((h=s==null?void 0:s.clientes_endividados)==null?void 0:h.quantidade)??0})," clientes endividados"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Total de ",((v=s==null?void 0:s.clientes_endividados)==null?void 0:v.impacto)??"R$ 0"," em aberto  Avaliar condies"]})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-semibold text-green-700 mb-2",children:" Oportunidade"}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:((p=s==null?void 0:s.oportunidades_novos)==null?void 0:p.quantidade)??0})," novos clientes promissores"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Potencial de fidelizao  Ticket mdio alto"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Ml,{size:12}),"Dados calculados em tempo real com base em regras de negcio pr-definidas"]})})]})]})]})}function r_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState({email:"",password:"",role_id:null});async function x(){try{o(!0);const g=await U.get("/usuarios");r(g.data)}catch(g){console.error("Erro ao carregar usurios:",g),alert("Erro ao carregar usurios")}finally{o(!1)}}async function h(){try{const g=await U.get("/roles");s(g.data)}catch(g){console.error("Erro ao carregar roles:",g)}}async function v(g,y){try{await U.patch(`/usuarios/${g}/status`,{is_active:!y}),x()}catch(f){console.error("Erro ao alterar status:",f),alert("Erro ao alterar status do usurio")}}async function p(g){var y,f;g.preventDefault();try{await U.post("/usuarios",u),alert("Usurio criado com sucesso!"),l(!1),m({email:"",password:"",role_id:null}),x()}catch(b){console.error("Erro ao criar usurio:",b),alert(((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao criar usurio")}}return j.useEffect(()=>{x(),h()},[]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Usurios"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie os usurios do sistema"})]}),e.jsxs("button",{onClick:()=>{m({email:"",password:"",role_id:null}),d(!1),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Usurio"]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando..."})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-gray-500",children:"Nenhum usurio encontrado"})}):t.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:g.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsx("button",{onClick:()=>v(g.user_id,g.is_active),className:`px-3 py-1 rounded text-white transition-colors ${g.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:g.is_active?"Desativar":"Ativar"})})]},g.user_id))})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Novo Usurio"}),e.jsx("button",{onClick:()=>{l(!1),m({email:"",password:"",role:"user"})},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:u.email,onChange:g=>m({...u,email:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"usuario@exemplo.com",autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",required:!0,value:u.password,onChange:g=>m({...u,password:g.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mnimo 6 caracteres",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:c?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),e.jsx("select",{value:u.role_id||"",onChange:g=>m({...u,role_id:parseInt(g.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:a.length===0?e.jsx("option",{value:"",children:"Carregando..."}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Selecione uma role..."}),a.map(g=>e.jsx("option",{value:g.role_id,children:g.nome},g.role_id))]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),m({email:"",password:"",role_id:null})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Criar Usurio"})]})]})]})})})]})}function a_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(!0),[i,l]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState({}),[x,h]=j.useState({nome:"",descricao:"",permissions:[]});async function v(){try{o(!0);const[E,T]=await Promise.all([U.get("/roles"),U.get("/permissions")]);r(E.data),s(T.data)}catch(E){console.error("Erro ao carregar dados:",E),alert("Erro ao carregar dados")}finally{o(!1)}}async function p(E){var T,q;E.preventDefault();try{c?(await U.put(`/roles/${c.role_id}`,x),alert("Role atualizada com sucesso!")):(await U.post("/roles",x),alert("Role criada com sucesso!")),l(!1),d(null),h({nome:"",descricao:"",permissions:[]}),v()}catch(A){console.error("Erro ao salvar role:",A),alert(((q=(T=A.response)==null?void 0:T.data)==null?void 0:q.detail)||"Erro ao salvar role")}}function g(E){d(E),h({nome:E.nome,descricao:E.descricao||"",permissions:E.permissions.map(T=>T.permission_id)}),l(!0)}function y(E){h(T=>({...T,permissions:T.permissions.includes(E)?T.permissions.filter(q=>q!==E):[...T.permissions,E]}))}function f(){const E={};return a.forEach(T=>{const q=T.nome&&T.nome.includes(".")?T.nome.split(".")[0]:"outras";E[q]||(E[q]=[]),E[q].push(T)}),E}function b(E){return{financeiro:"Financeiro",comissoes:"Comisses",entregas:"Entregas",compras:"Compras",cadastros:"Cadastros",configuracoes:"Configuraes",rh:"Recursos Humanos",vendas:"Vendas",usuarios:"Usurios",relatorios:"Relatrios",ia:"Inteligncia Artificial",outras:"Outras"}[E]||E.charAt(0).toUpperCase()+E.slice(1)}function N(E){m(T=>({...T,[E]:!T[E]}))}function _(E,T){const q=T.map(O=>O.permission_id),A=q.every(O=>x.permissions.includes(O));h(O=>({...O,permissions:A?O.permissions.filter(V=>!q.includes(V)):[...new Set([...O.permissions,...q])]}))}function w(E){return E.every(T=>x.permissions.includes(T.permission_id))}function S(E){const T=E.filter(q=>x.permissions.includes(q.permission_id));return T.length>0&&T.length<E.length}async function C(E){if(confirm("Tem certeza que deseja excluir esta role?"))try{await U.delete(`/roles/${E}`),alert("Role excluda com sucesso!"),v()}catch(T){console.error("Erro ao excluir role:",T),alert("Erro ao excluir role")}}return j.useEffect(()=>{v()},[]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Permisses (Roles)"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie roles e suas permisses"})]}),e.jsxs("button",{onClick:()=>{d(null),h({nome:"",descricao:"",permissions:[]}),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Role"]})]}),n?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando..."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.length===0?e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Nenhuma role encontrada"}):t.map(E=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.nome}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.descricao})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(E),className:"text-blue-600 hover:text-blue-700",title:"Editar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>C(E.role_id),className:"text-red-600 hover:text-red-700",title:"Excluir",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"Permisses:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.permissions.length===0?e.jsx("span",{className:"text-sm text-gray-400",children:"Nenhuma permisso"}):E.permissions.map(T=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:T.nome},T.permission_id))})]})]},E.role_id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:c?"Editar Role":"Nova Role"}),e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Role *"}),e.jsx("input",{type:"text",required:!0,value:x.nome,onChange:E=>h({...x,nome:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Gerente, Vendedor, etc"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{value:x.descricao||"",onChange:E=>h({...x,descricao:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Descrio da role"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permisses *"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 max-h-96 overflow-y-auto",children:a.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma permisso disponvel"}):e.jsx("div",{className:"space-y-1",children:Object.entries(f()).map(([E,T])=>{const q=u[E],A=w(T),O=S(T);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center p-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>N(E),className:"text-gray-600 hover:text-gray-900 transition-colors",children:q?e.jsx(ec,{className:"w-5 h-5"}):e.jsx(Rl,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center flex-1 cursor-pointer",onClick:()=>_(E,T),children:[e.jsx("input",{type:"checkbox",checked:A,ref:V=>{V&&(V.indeterminate=O)},onChange:()=>{},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900",children:b(E)}),e.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["(",T.filter(V=>x.permissions.includes(V.permission_id)).length,"/",T.length,")"]})]})]})}),q&&e.jsx("div",{className:"bg-white p-3 space-y-1 border-t border-gray-200",children:T.map(V=>e.jsxs("label",{className:"flex items-start cursor-pointer hover:bg-gray-50 p-2 rounded ml-4",children:[e.jsx("input",{type:"checkbox",checked:x.permissions.includes(V.permission_id),onChange:()=>y(V.permission_id),className:"mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:V.nome.split(".")[1]||V.nome}),V.descricao&&e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:V.descricao})]})]},V.permission_id))})]},E)})})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),d(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[c?"Atualizar":"Criar"," Role"]})]})]})]})})})]})}function s_e(){console.log(" Configuracoes carregou - Total de cards:",7);const t=[{title:"Usurios",description:"Gerenciar usurios do sistema",icon:IA,link:"/admin/usuarios",color:"blue"},{title:"Permisses",description:"Gerenciar roles e permisses",icon:MA,link:"/admin/roles",color:"purple"},{title:"Configuraes Fiscais",description:"Configurar tributao padro da empresa",icon:lm,link:"/configuracoes/fiscal",color:"green"},{title:"Entregas",description:"Configurar entregadores e ponto inicial de rotas",icon:Qc,link:"/configuracoes/entregas",color:"blue"},{title:"Custos da Moto",description:"Configurar custos operacionais da moto de entregas",icon:lm,link:"/configuracoes/custos-moto",color:"orange"},{title:"Estoque",description:"Configurar comportamento do controle de estoque",icon:Qx,link:"/configuracoes/estoque",color:"indigo"},{title:"Sistema",description:"Configuraes gerais do sistema",icon:lm,link:"#",color:"gray",disabled:!0}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraes"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie usurios, permisses e configuraes do sistema"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>{const a=r.icon,s={blue:"bg-blue-50 text-blue-600 hover:bg-blue-100",purple:"bg-purple-50 text-purple-600 hover:bg-purple-100",green:"bg-green-50 text-green-600 hover:bg-green-100",orange:"bg-orange-50 text-orange-600 hover:bg-orange-100",indigo:"bg-indigo-50 text-indigo-600 hover:bg-indigo-100",gray:"bg-gray-50 text-gray-400"};return r.disabled?e.jsxs("div",{className:`p-6 rounded-lg border-2 border-gray-200 ${s[r.color]} cursor-not-allowed opacity-60`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(a,{className:"text-2xl"}),e.jsx("h3",{className:"text-lg font-semibold",children:r.title})]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.description}),e.jsx("span",{className:"text-xs text-gray-400 mt-2 block",children:"Em breve"})]},r.title):e.jsxs(hd,{to:r.link,className:`p-6 rounded-lg border-2 border-gray-200 ${s[r.color]} transition-all hover:shadow-lg`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(a,{className:"text-2xl"}),e.jsx("h3",{className:"text-lg font-semibold",children:r.title})]}),e.jsx("p",{className:"text-sm opacity-80",children:r.description}),e.jsxs("div",{className:"mt-4 flex items-center text-sm font-medium",children:["Acessar",e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},r.title)})})]})}function n_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1),i=N=>{if(!N)return[];if(Array.isArray(N))return N;if(typeof N=="string")try{const _=JSON.parse(N);return Array.isArray(_)?_:[]}catch{return[]}return[]},[l,c]=j.useState(""),[d,u]=j.useState([]),[m,x]=j.useState({cnpj:"",razao_social:"",nome_fantasia:"",inscricao_estadual:"",inscricao_municipal:"",email:"",telefone:"",cep:"",endereco:"",numero:"",complemento:"",bairro:"",cidade:"",uf:""}),[h,v]=j.useState({regime_tributario:"",simples_anexo:"I",aliquota_simples_vigente:0,aliquota_simples_sugerida:0,cnae_principal:"",cnae_descricao:"",cnaes_secundarios:[],uf:""});j.useEffect(()=>{async function N(){try{const _=await Ot.get("/empresa/fiscal");console.log(" Dados fiscais carregados:",_.data);const w=i(_.data.cnaes_secundarios);v({regime_tributario:_.data.regime_tributario||"",simples_anexo:_.data.simples_anexo||"I",aliquota_simples_vigente:_.data.aliquota_simples_vigente??0,aliquota_simples_sugerida:_.data.aliquota_simples_sugerida??0,cnae_principal:_.data.cnae_principal||"",cnae_descricao:_.data.cnae_descricao||"",cnaes_secundarios:w,uf:_.data.uf||""}),_.data.cnae_descricao&&c(_.data.cnae_descricao),w.length>0&&u(w);try{const S=await Ot.get("/empresa/dados-cadastrais");S.data&&x({cnpj:S.data.cnpj||"",razao_social:S.data.razao_social||"",nome_fantasia:S.data.nome_fantasia||"",inscricao_estadual:S.data.inscricao_estadual||"",inscricao_municipal:S.data.inscricao_municipal||"",email:S.data.email||"",telefone:S.data.telefone||"",cep:S.data.cep||"",endereco:S.data.endereco||"",numero:S.data.numero||"",complemento:S.data.complemento||"",bairro:S.data.bairro||"",cidade:S.data.cidade||"",uf:S.data.uf||""})}catch{console.log("Endpoint de dados cadastrais no existe ainda")}}catch(_){console.error("Erro ao carregar configuraes",_),Ue.error("Erro ao carregar configuraes da empresa")}finally{r(!1)}}N()},[]);function p(N){const{name:_,value:w}=N.target;v(S=>{const C={...S,[_]:w};return _==="regime_tributario"&&w==="Simples Nacional"&&((!C.simples_anexo||C.simples_anexo==="")&&(C.simples_anexo="I"),(!C.aliquota_simples_vigente||C.aliquota_simples_vigente===0)&&(C.aliquota_simples_vigente=4)),C})}function g(N){const{name:_,value:w}=N.target;x(S=>({...S,[_]:w}))}async function y(){const N=m.cnpj.replace(/[^0-9]/g,"");if(N.length!==14){Ue.error("CNPJ deve ter 14 dgitos");return}o(!0);try{const _=await fetch(`https://brasilapi.com.br/api/cnpj/v1/${N}`);if(!_.ok)throw new Error("CNPJ no encontrado");const w=await _.json();console.log(" Dados completos da API:",w),console.log(" CNAE Fiscal:",w.cnae_fiscal),console.log(" CNAE Descrio:",w.cnae_fiscal_descricao),console.log(" CNAEs Secundrios:",w.cnaes_secundarios);const S={...m};w.razao_social&&(S.razao_social=w.razao_social),w.nome_fantasia&&(S.nome_fantasia=w.nome_fantasia),w.email&&(S.email=w.email),w.inscricao_estadual&&(S.inscricao_estadual=w.inscricao_estadual);const C=w.ddd_telefone_1||w.telefone;if(C&&(S.telefone=C),w.cep&&(S.cep=w.cep.replace(/[^0-9]/g,"")),w.logradouro&&(S.endereco=w.logradouro),w.numero&&(S.numero=w.numero),w.complemento&&(S.complemento=w.complemento),w.bairro&&(S.bairro=w.bairro),w.municipio&&(S.cidade=w.municipio),w.uf&&(S.uf=w.uf),x(S),w.cnae_fiscal){const E=w.cnae_fiscal.toString();console.log(" CNAE encontrado:",E);const T=i(w.cnaes_secundarios);v(q=>({...q,cnae_principal:E,cnae_descricao:w.cnae_fiscal_descricao||"",cnaes_secundarios:T})),w.cnae_fiscal_descricao&&c(w.cnae_fiscal_descricao),T.length>0&&(u(T),console.log(` Encontrados ${T.length} CNAEs secundrios`))}Ue.success(" Dados preenchidos com sucesso!")}catch(_){console.error("Erro ao buscar CNPJ:",_),Ue.error(" Erro ao buscar CNPJ. Verifique o nmero.")}finally{o(!1)}}async function f(){var N,_;s(!0);try{const w={...h,cnaes_secundarios:i(h.cnaes_secundarios)};console.log(" Salvando dados fiscais:",w),console.log(" CNAE Descrio no form:",h.cnae_descricao),console.log(" CNAEs Secundrios no form:",h.cnaes_secundarios);const S=await Ot.put("/empresa/fiscal",w);console.log(" Resposta do servidor (fiscal):",S.data);try{console.log(" Salvando dados cadastrais:",m),await Ot.put("/empresa/dados-cadastrais",m)}catch{console.log("Endpoint de dados cadastrais no implementado ainda")}Ue.success("Configuraes salvas com sucesso!")}catch(w){console.error("Erro ao salvar:",w),Ue.error(((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao salvar configuraes")}finally{s(!1)}}if(t)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando configuraes..."})]})});const b=h.regime_tributario==="Simples Nacional";return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configurao da Empresa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure os dados cadastrais, fiscais e tributrios da sua empresa"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"bg-blue-50 px-6 py-4 border-b border-blue-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:" Dados Cadastrais"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-2",children:[" ",e.jsx("strong",{children:"Dica:"})," Digite o CNPJ e clique no boto  para preencher automaticamente os dados da empresa (razo social, endereo, CNAEs, etc.) consultando a Receita Federal."]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNPJ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"cnpj",value:m.cnpj,onChange:g,placeholder:"00.000.000/0000-00",maxLength:"18",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:y,disabled:n||!m.cnpj,title:"Buscar dados da Receita Federal pelo CNPJ",className:"px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200",children:n?e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Razo Social ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"razao_social",value:m.razao_social,onChange:g,placeholder:"Nome empresarial completo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Fantasia"}),e.jsx("input",{type:"text",name:"nome_fantasia",value:m.nome_fantasia,onChange:g,placeholder:"Nome comercial",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inscrio Estadual"}),e.jsx("input",{type:"text",name:"inscricao_estadual",value:m.inscricao_estadual,onChange:g,placeholder:"000.000.000.000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inscrio Municipal"}),e.jsx("input",{type:"text",name:"inscricao_municipal",value:m.inscricao_municipal,onChange:g,placeholder:"000000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),e.jsx("input",{type:"email",name:"email",value:m.email,onChange:g,placeholder:"contato@empresa.com.br",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"text",name:"telefone",value:m.telefone,onChange:g,placeholder:"(00) 0000-0000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CEP"}),e.jsx("input",{type:"text",name:"cep",value:m.cep,onChange:g,placeholder:"00000-000",maxLength:"9",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),e.jsx("input",{type:"text",name:"endereco",value:m.endereco,onChange:g,placeholder:"Rua, Avenida, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nmero"}),e.jsx("input",{type:"text",name:"numero",value:m.numero,onChange:g,placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complemento"}),e.jsx("input",{type:"text",name:"complemento",value:m.complemento,onChange:g,placeholder:"Sala, Apto, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bairro"}),e.jsx("input",{type:"text",name:"bairro",value:m.bairro,onChange:g,placeholder:"Centro",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UF"}),e.jsxs("select",{name:"uf",value:m.uf,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-"}),e.jsx("option",{value:"SP",children:"SP"}),e.jsx("option",{value:"RJ",children:"RJ"}),e.jsx("option",{value:"MG",children:"MG"}),e.jsx("option",{value:"RS",children:"RS"}),e.jsx("option",{value:"PR",children:"PR"}),e.jsx("option",{value:"SC",children:"SC"}),e.jsx("option",{value:"BA",children:"BA"}),e.jsx("option",{value:"PE",children:"PE"}),e.jsx("option",{value:"CE",children:"CE"}),e.jsx("option",{value:"GO",children:"GO"}),e.jsx("option",{value:"DF",children:"DF"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",name:"cidade",value:m.cidade,onChange:g,placeholder:"Nome da cidade",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"bg-green-50 px-6 py-4 border-b border-green-100",children:e.jsx("h2",{className:"text-lg font-semibold text-green-900",children:" Configurao Fiscal e Tributria"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNAE Principal"}),e.jsx("input",{type:"text",name:"cnae_principal",value:h.cnae_principal,onChange:p,placeholder:"0000-0/00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),l&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-900 font-medium",children:[" ",l]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cdigo da Classificao Nacional de Atividades Econmicas"})]}),d.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CNAEs Secundrios (",d.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:d.map((N,_)=>e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:N.codigo}),e.jsxs("span",{className:"text-gray-600",children:[" - ",N.descricao]})]},_))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Regime Tributrio ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"regime_tributario",value:h.regime_tributario,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"Simples Nacional",children:"Simples Nacional"}),e.jsx("option",{value:"Lucro Presumido",children:"Lucro Presumido"}),e.jsx("option",{value:"Lucro Real",children:"Lucro Real"})]})]}),b&&e.jsxs("div",{className:"border-l-4 border-blue-500 bg-blue-50 p-4 space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold text-blue-900",children:"Parmetros do Simples Nacional"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anexo"}),e.jsxs("select",{name:"simples_anexo",value:h.simples_anexo||"I",onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"I",children:"Anexo I - Comrcio"}),e.jsx("option",{value:"II",children:"Anexo II - Indstria"}),e.jsx("option",{value:"III",children:"Anexo III - Servios"}),e.jsx("option",{value:"IV",children:"Anexo IV - Servios (Construo)"}),e.jsx("option",{value:"V",children:"Anexo V - Servios (Intelectual)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alquota Vigente (%)"}),e.jsx("input",{type:"number",name:"aliquota_simples_vigente",value:h.aliquota_simples_vigente||"",onChange:p,step:"0.01",min:"0",max:"100",placeholder:"Ex: 4.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Alquota atual utilizada para calcular provises"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alquota Sugerida (%)"}),e.jsx("input",{type:"number",name:"aliquota_simples_sugerida",value:h.aliquota_simples_sugerida||"",onChange:p,step:"0.01",min:"0",max:"100",placeholder:"Ex: 4.50",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugesto baseada no histrico de fechamentos (informativo)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("button",{type:"button",onClick:f,disabled:a,className:"px-8 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:a?"Salvando...":"Salvar Todas as Configuraes"})})]})]})}function o_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1),[i,l]=j.useState([]),[c,d]=j.useState({entregador_padrao_id:"",ponto_inicial_rota:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""});j.useEffect(()=>{async function x(){try{const[h,v]=await Promise.all([Ot.get("/configuracoes/entregas"),Ot.get("/clientes/",{params:{is_entregador:!0,entregador_ativo:!0}})]);d({entregador_padrao_id:h.data.entregador_padrao_id??"",ponto_inicial_rota:"",cep:h.data.cep??"",logradouro:h.data.logradouro??"",numero:h.data.numero??"",complemento:h.data.complemento??"",bairro:h.data.bairro??"",cidade:h.data.cidade??"",estado:h.data.estado??""}),l(v.data??[])}catch(h){console.error(h),alert("Erro ao carregar configuraes de entrega")}finally{r(!1)}}x()},[]);async function u(){const x=c.cep.replace(/\D/g,"");if(x.length!==8){alert("CEP invlido. Digite 8 dgitos.");return}o(!0);try{const v=await(await fetch(`https://viacep.com.br/ws/${x}/json/`)).json();if(v.erro){alert("CEP no encontrado");return}d({...c,logradouro:v.logradouro||"",bairro:v.bairro||"",cidade:v.localidade||"",estado:v.uf||""})}catch(h){console.error(h),alert("Erro ao buscar CEP")}finally{o(!1)}}async function m(x){x.preventDefault(),s(!0);try{await Ot.put("/configuracoes/entregas",{entregador_padrao_id:c.entregador_padrao_id||null,cep:c.cep||null,logradouro:c.logradouro||null,numero:c.numero||null,complemento:c.complemento||null,bairro:c.bairro||null,cidade:c.cidade||null,estado:c.estado||null}),alert("Configuraes salvas com sucesso")}catch(h){console.error(h),alert("Erro ao salvar configuraes")}finally{s(!1)}}return t?e.jsx("div",{children:"Carregando..."}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Configuraes de Entregas"}),e.jsxs("form",{onSubmit:m,style:{maxWidth:600},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Entregador padro"}),e.jsxs("select",{value:c.entregador_padrao_id,onChange:x=>d({...c,entregador_padrao_id:x.target.value}),children:[e.jsx("option",{value:"",children:"Nenhum (escolher manualmente)"}),i.map(x=>e.jsx("option",{value:x.id,children:x.nome},x.id))]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:5},children:"Este entregador ser pr-selecionado ao criar novas rotas."})]}),e.jsx("hr",{style:{margin:"30px 0",border:"none",borderTop:"1px solid #ddd"}}),e.jsx("h3",{style:{marginBottom:20},children:"Ponto Inicial Padro da Rota"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CEP *"}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("input",{type:"text",value:c.cep.replace(/(\d{5})(\d)/,"$1-$2"),onChange:x=>{const h=x.target.value.replace(/\D/g,"");d({...c,cep:h.slice(0,8)})},placeholder:"00000-000",maxLength:9,style:{flex:1}}),e.jsx("button",{type:"button",onClick:u,disabled:n||c.cep.length<8,style:{padding:"0 20px",display:"flex",alignItems:"center",gap:5},children:n?"Buscando...":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),"Buscar"]})})]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:5},children:"Digite o CEP e clique em Buscar para preencher automaticamente."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Logradouro (Rua/Avenida) *"}),e.jsx("input",{type:"text",value:c.logradouro,onChange:x=>d({...c,logradouro:x.target.value}),placeholder:"Ex: Rua das Flores"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:15},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nmero *"}),e.jsx("input",{type:"text",value:c.numero,onChange:x=>d({...c,numero:x.target.value}),placeholder:"123"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Complemento"}),e.jsx("input",{type:"text",value:c.complemento,onChange:x=>d({...c,complemento:x.target.value}),placeholder:"Ex: Loja 1"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bairro *"}),e.jsx("input",{type:"text",value:c.bairro,onChange:x=>d({...c,bairro:x.target.value}),placeholder:"Ex: Centro"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:15},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cidade *"}),e.jsx("input",{type:"text",value:c.cidade,onChange:x=>d({...c,cidade:x.target.value}),placeholder:"Ex: So Paulo"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estado *"}),e.jsx("input",{type:"text",value:c.estado,onChange:x=>{const h=x.target.value.toUpperCase().slice(0,2);d({...c,estado:h})},placeholder:"SP",maxLength:2})]})]}),e.jsx("p",{style:{fontSize:12,color:"#666",marginTop:15,marginBottom:20},children:"Este endereo ser usado como ponto de partida para calcular as rotas de entrega."}),e.jsx("button",{type:"submit",disabled:a,style:{backgroundColor:"#2563eb",color:"white",padding:"12px 24px",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"500",cursor:a?"not-allowed":"pointer",opacity:a?.6:1,transition:"all 0.2s"},onMouseOver:x=>{a||(x.target.style.backgroundColor="#1d4ed8")},onMouseOut:x=>{a||(x.target.style.backgroundColor="#2563eb")},children:a?"Salvando...":"Salvar Configuraes"})]})]})}function i_e(){const[t,r]=j.useState({preco_combustivel:"",km_por_litro:"",km_troca_oleo:"",custo_troca_oleo:"",km_troca_pneu_dianteiro:"",custo_pneu_dianteiro:"",km_troca_pneu_traseiro:"",custo_pneu_traseiro:"",km_troca_kit_traseiro:"",custo_kit_traseiro:"",km_manutencao_geral:"",custo_manutencao_geral:"",seguro_mensal:"",licenciamento_mensal:"",ipva_mensal:"",outros_custos_mensais:"",km_medio_mensal:""}),[a,s]=j.useState(!1),n=()=>{const p=parseFloat(t.preco_combustivel)||0,g=parseFloat(t.km_por_litro)||1;return g>0?(p/g).toFixed(4):"0.0000"},o=()=>{const p=parseFloat(t.custo_troca_oleo)||0,g=parseFloat(t.km_troca_oleo)||1;return g>0?(p/g).toFixed(4):"0.0000"},i=()=>{const p=parseFloat(t.custo_pneu_dianteiro)||0,g=parseFloat(t.km_troca_pneu_dianteiro)||1;return g>0?(p/g).toFixed(4):"0.0000"},l=()=>{const p=parseFloat(t.custo_pneu_traseiro)||0,g=parseFloat(t.km_troca_pneu_traseiro)||1;return g>0?(p/g).toFixed(4):"0.0000"},c=()=>{const p=parseFloat(t.custo_kit_traseiro)||0,g=parseFloat(t.km_troca_kit_traseiro)||1;return g>0?(p/g).toFixed(4):"0.0000"},d=()=>{const p=parseFloat(t.custo_manutencao_geral)||0,g=parseFloat(t.km_manutencao_geral)||1;return g>0?(p/g).toFixed(4):"0.0000"},u=()=>{const p=parseFloat(t.seguro_mensal)||0,g=parseFloat(t.licenciamento_mensal)||0,y=parseFloat(t.ipva_mensal)||0,f=parseFloat(t.outros_custos_mensais)||0,b=p+g+y+f,N=parseFloat(t.km_medio_mensal)||1;return N>0?(b/N).toFixed(4):"0.0000"};j.useEffect(()=>{m()},[]);async function m(){const g=(await Ot.get("/configuracoes/custo-moto")).data;Object.keys(g).forEach(y=>{g[y]===null&&(g[y]="")}),r(g)}function x(p){r({...t,[p.target.name]:p.target.value})}function h(){confirm("Preencher com valores sugeridos baseados em uma moto de entrega tpica (CG 160, Biz 125, Pop 110)? Os valores atuais sero substitudos.")&&r({preco_combustivel:"6.30",km_por_litro:"38",km_troca_oleo:"3000",custo_troca_oleo:"95.00",km_troca_pneu_dianteiro:"14000",custo_pneu_dianteiro:"210.00",km_troca_pneu_traseiro:"10000",custo_pneu_traseiro:"240.00",km_troca_kit_traseiro:"18000",custo_kit_traseiro:"420.00",km_manutencao_geral:"5000",custo_manutencao_geral:"180.00",seguro_mensal:"110.00",licenciamento_mensal:"32.00",ipva_mensal:"55.00",outros_custos_mensais:"75.00",km_medio_mensal:"1200"})}async function v(){s(!0),await Ot.put("/configuracoes/custo-moto",t),s(!1),alert("Custos da moto salvos com sucesso")}return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:" Custos da Moto"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure os custos operacionais da moto de entregas"}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:[" ",e.jsx("strong",{children:"Dica:"}),' No sabe por onde comear? Clique em "Preencher com Valores Sugeridos" para usar custos tpicos de uma moto de entrega (CG 160, Biz 125, Pop 110 na faixa de R$ 15 mil). Depois ajuste conforme sua realidade.']}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:h,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors shadow-sm flex items-center gap-2",children:[e.jsx("span",{children:""})," Preencher com Valores Sugeridos"]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Combustvel"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preo por Litro (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"preco_combustivel",placeholder:"Ex: 6.50",value:t.preco_combustivel,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consumo Mdio (KM/Litro)"}),e.jsx("input",{type:"number",step:"0.1",name:"km_por_litro",placeholder:"Ex: 35",value:t.km_por_litro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-blue-50 border border-blue-200 rounded-md text-blue-900 font-semibold text-lg",children:["R$ ",n()]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Manuteno (Custos Variveis por KM)"]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Troca de leo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"KM para Troca"}),e.jsx("input",{type:"number",name:"km_troca_oleo",placeholder:"Ex: 3000",value:t.km_troca_oleo,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Custo por Troca (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_troca_oleo",placeholder:"Ex: 150.00",value:t.custo_troca_oleo,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",o()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pneu Dianteiro"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til (KM)"}),e.jsx("input",{type:"number",name:"km_troca_pneu_dianteiro",placeholder:"Ex: 15000",value:t.km_troca_pneu_dianteiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Pneu (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_pneu_dianteiro",placeholder:"Ex: 250.00",value:t.custo_pneu_dianteiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",i()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Pneu Traseiro"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til (KM)"}),e.jsx("input",{type:"number",name:"km_troca_pneu_traseiro",placeholder:"Ex: 12000",value:t.km_troca_pneu_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Pneu (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_pneu_traseiro",placeholder:"Ex: 280.00",value:t.custo_pneu_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",l()]})]})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Kit Transmisso (Corrente, Coroa, Pinho)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Vida til do Kit (KM)"}),e.jsx("input",{type:"number",name:"km_troca_kit_traseiro",placeholder:"Ex: 20000",value:t.km_troca_kit_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Preo do Kit (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_kit_traseiro",placeholder:"Ex: 450.00",value:t.custo_kit_traseiro,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",c()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Manuteno Geral"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Frequncia (KM)"}),e.jsx("input",{type:"number",name:"km_manutencao_geral",placeholder:"Ex: 5000",value:t.km_manutencao_geral,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Custo por Manuteno (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"custo_manutencao_geral",placeholder:"Ex: 200.00",value:t.custo_manutencao_geral,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:" Custo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-200 rounded-md text-green-900 font-semibold",children:["R$ ",d()]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Custos Fixos Mensais"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seguro Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"seguro_mensal",placeholder:"Ex: 120.00",value:t.seguro_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Licenciamento Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"licenciamento_mensal",placeholder:"Ex: 30.00",value:t.licenciamento_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IPVA Mensal (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"ipva_mensal",placeholder:"Ex: 50.00",value:t.ipva_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outros Custos Mensais (R$)"}),e.jsx("input",{type:"number",step:"0.01",name:"outros_custos_mensais",placeholder:"Ex: 100.00",value:t.outros_custos_mensais,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""})," Controle"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"KM Mdio Mensal (para clculo de custos fixos)"}),e.jsx("input",{type:"number",step:"0.01",name:"km_medio_mensal",placeholder:"Ex: 1000",value:t.km_medio_mensal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usado para ratear os custos fixos mensais por KM rodado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Custo Fixo por KM"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-purple-50 border border-purple-200 rounded-md text-purple-900 font-semibold text-lg",children:["R$ ",u()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total dos custos fixos  KM mdio mensal"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:v,disabled:a,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm",children:a?"Salvando...":" Salvar Configuraes"})})]})}function l_e(){const[t,r]=j.useState(!0),[a,s]=j.useState(!1),[n,o]=j.useState(!1);j.useEffect(()=>{async function l(){try{const c=await Ot.get("/empresa/config-estoque");o(c.data.permite_estoque_negativo)}catch(c){console.error("Erro ao carregar configuraes de estoque",c),Ue.error("Erro ao carregar configuraes")}finally{r(!1)}}l()},[]);async function i(){s(!0);try{await Ot.put("/empresa/config-estoque",{permite_estoque_negativo:n}),Ue.success("Configuraes de estoque atualizadas com sucesso!")}catch(l){console.error("Erro ao salvar configuraes",l),Ue.error("Erro ao salvar configuraes")}finally{s(!1)}}return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando configuraes..."})]})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(hd,{to:"/configuracoes",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[e.jsx(FA,{className:"mr-1"}),"Voltar para Configuraes"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraes de Estoque"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure o comportamento do controle de estoque do sistema"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Controle de Estoque Negativo"}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(PA,{className:"text-yellow-600 mt-1 mr-3 flex-shrink-0"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Ateno:"})," Esta configurao afeta diretamente o controle de vendas e estoque."]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"estoque-negativo",checked:!n,onChange:()=>o(!1),className:"mt-1 mr-3 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" Bloquear vendas sem estoque (Recomendado)"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"O sistema impedir finalizar vendas quando no houver estoque suficiente. Ideal para controle rigoroso de estoque."})]})]}),e.jsxs("label",{className:"flex items-start p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"estoque-negativo",checked:n,onChange:()=>o(!0),className:"mt-1 mr-3 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:" Permitir estoque negativo"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"O sistema permitir vendas mesmo sem estoque disponvel. til para negcios que trabalham com encomendas ou reposio rpida."}),e.jsx("div",{className:"text-xs text-red-600 mt-2 font-medium",children:" Use com cuidado: pode gerar descontinuidade no controle de estoque"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs("button",{onClick:i,disabled:a,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(Il,{className:"mr-2"}),a?"Salvando...":"Salvar Configuraes"]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Como funciona?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Estoque Bloqueado:"})," Ao tentar vender um produto sem estoque, o sistema exibir um erro e impedir a finalizao da venda."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Estoque Negativo:"})," O sistema permite a venda e o estoque ficar com valor negativo at a prxima reposio."]}),e.jsx("li",{children:"Esta configurao  global e afeta todas as vendas realizadas no PDV e outros pontos de venda."})]})]})]})}function c_e(){const t=new Date,[r,a]=j.useState(t.getMonth()+1),[s,n]=j.useState(t.getFullYear()),[o,i]=j.useState(!1),[l,c]=j.useState(null);j.useEffect(()=>{d()},[]);const d=async()=>{if(!r||!s){Ue.error("Informe ms e ano");return}i(!0);try{const v=await U.get(`/auditoria/provisoes/mensal?mes=${r}&ano=${s}`);c(v.data)}catch(v){console.error("Erro ao buscar auditoria:",v),Ue.error("Erro ao buscar auditoria de provises")}finally{i(!1)}},u=v=>!v&&v!==0?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Math.abs(v)),m=v=>!v&&v!==0?"0,0%":`${v.toFixed(1)}%`,x=(v,p)=>{const g={OK:"bg-green-100 text-green-800 border-green-300",AJUSTE:"bg-yellow-100 text-yellow-800 border-yellow-300",ACUMULANDO:"bg-blue-100 text-blue-800 border-blue-300",SEM_DADOS:"bg-gray-100 text-gray-600 border-gray-300"};return e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g[v]||g.SEM_DADOS}`,children:[p," ",v.replace("_"," ")]})},h=[{valor:1,nome:"Janeiro"},{valor:2,nome:"Fevereiro"},{valor:3,nome:"Maro"},{valor:4,nome:"Abril"},{valor:5,nome:"Maio"},{valor:6,nome:"Junho"},{valor:7,nome:"Julho"},{valor:8,nome:"Agosto"},{valor:9,nome:"Setembro"},{valor:10,nome:"Outubro"},{valor:11,nome:"Novembro"},{valor:12,nome:"Dezembro"}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Auditoria Mensal  Proviso  Realizado"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Compare valores provisionados com valores pagos para controle fiscal e trabalhista"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ms"}),e.jsx("select",{value:r,onChange:v=>a(Number(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:h.map(v=>e.jsx("option",{value:v.valor,children:v.nome},v.valor))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano"}),e.jsx("input",{type:"number",value:s,onChange:v=>n(Number(v.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"2026"})]}),e.jsx("div",{children:e.jsx("button",{onClick:d,disabled:o,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Buscando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Buscar"]})})})]})}),l&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Interpretao dos Status:"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" OK:"})," Proviso igual ao realizado - situao perfeita"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" AJUSTE:"})," Tem pagamento mas valores divergem - revisar"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" ACUMULANDO:"})," Provisionado mas no pago ainda - normal para frias e 13"]}),e.jsxs("p",{children:[e.jsx("strong",{children:" SEM DADOS:"})," Sem proviso e sem pagamento no perodo"]})]})]})]})}),l&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proviso"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Realizado"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diferena"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Real."}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.itens.map((v,p)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.item})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-900",children:u(v.provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:u(v.realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-medium ${v.diferenca===0?"text-green-600":v.diferenca>0?"text-blue-600":"text-red-600"}`,children:[v.diferenca>0&&"+",u(v.diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm text-gray-600",children:m(v.percentual_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:x(v.status,v.status_emoji)})]},p))}),e.jsx("tfoot",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:"TOTAL"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u(l.total_provisao)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:u(l.total_realizado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:`text-sm font-bold ${l.total_diferenca===0?"text-green-600":l.total_diferenca>0?"text-blue-600":"text-red-600"}`,children:[l.total_diferenca>0&&"+",u(l.total_diferenca)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:m(l.total_provisao>0?l.total_realizado/l.total_provisao*100:0)})}),e.jsx("td",{className:"px-6 py-4"})]})})]})})}),!o&&!l&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("p",{className:"text-gray-600",children:'Selecione um ms e ano e clique em "Buscar" para visualizar a auditoria'})]})]})}function d_e(){const[t,r]=j.useState(3),[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(!1),c=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];j.useEffect(()=>{d()},[t]);const d=async()=>{l(!0);try{const[h,v]=await Promise.all([U.get(`/projecao-caixa/?meses_a_frente=${t}`),U.get(`/projecao-caixa/resumo?meses_a_frente=${t}`)]);h.data.sucesso&&s(h.data.projecao||[]),v.data.sucesso&&o(v.data.resumo||null)}catch(h){console.error("Erro ao buscar projeo:",h),Ue.error("Erro ao carregar projeo de caixa")}finally{l(!1)}},u=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h),m=h=>{const v={POSITIVO:"bg-green-100 text-green-800",NEGATIVO:"bg-red-100 text-red-800",MISTO:"bg-yellow-100 text-yellow-800",NEUTRO:"bg-gray-100 text-gray-800"},p={POSITIVO:" Todos os meses positivos",NEGATIVO:" Todos os meses negativos",MISTO:" Meses positivos e negativos",NEUTRO:" Sem dados"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${v[h]||v.NEUTRO}`,children:p[h]||p.NEUTRO})},x=h=>h>0?e.jsx("span",{className:"text-green-600 font-bold",children:u(h)}):h<0?e.jsx("span",{className:"text-red-600 font-bold",children:u(h)}):e.jsx("span",{className:"text-gray-600 font-bold",children:u(h)});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Projeo de Caixa"}),e.jsx("p",{className:"text-gray-600",children:"Projeo futura baseada em histrico real + provises obrigatrias"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Projetar para:"}),e.jsxs("select",{value:t,onChange:h=>r(Number(h.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:3,children:"3 meses"}),e.jsx("option",{value:6,children:"6 meses"}),e.jsx("option",{value:12,children:"12 meses"})]})]})}),n&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Resumo da Projeo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Receita Total Projetada"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:u(n.receita_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Despesas Totais Projetadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:u(n.despesas_totais)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Saldo Total Projetado"}),e.jsx("p",{className:`text-2xl font-bold ${n.saldo_total>=0?"text-green-600":"text-red-600"}`,children:u(n.saldo_total)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Meses Positivos / Negativos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.jsx("span",{className:"text-green-600",children:n.meses_positivos})," / ",e.jsx("span",{className:"text-red-600",children:n.meses_negativos})]})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:m(n.tendencia)})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" Projeo Ms a Ms"})}),i?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Calculando projeo..."})]}):a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:" Sem dados suficientes"}),e.jsx("p",{className:"text-sm",children:" necessrio ter pelo menos 3 meses de histrico para gerar projees."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receita Prevista"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imposto Simples"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Folha + Encargos"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Despesas Totais"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo Previsto"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[c[h.mes-1],"/",h.ano]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["+",h.mes_futuro," ",h.mes_futuro===1?"ms":"meses"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-green-600 font-semibold",children:u(h.receita_prevista)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-orange-600",children:u(h.imposto_simples_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-blue-600",children:u(h.folha_encargos_previstos)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-red-600",children:u(h.despesas_previstas)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:x(h.saldo_previsto)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:h.saldo_positivo?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:" Positivo"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:" Negativo"})})]},h.mes_futuro))})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:" Como funciona a projeo:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Mdia de receitas dos ltimos 3 meses (valores reais)"}),e.jsx("li",{children:"Mdia de despesas fixas (custos + operacionais)"}),e.jsx("li",{children:"Alquota atual do Simples Nacional aplicada sobre receita projetada"}),e.jsx("li",{children:"Folha de pagamento + encargos (INSS + FGTS ~28%)"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sem chutes"}),"  Apenas dados reais + regras contbeis"]})]})]})]})}function u_e(){const[t,r]=j.useState({salario_base:"",inss_percentual:"20",fgts_percentual:"8",meses:"6",cargo:""}),[a,s]=j.useState(null),[n,o]=j.useState(!1),[i,l]=j.useState(!0),c=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d=v=>{const{name:p,value:g}=v.target;r(y=>({...y,[p]:g}))},u=async v=>{if(v.preventDefault(),!t.salario_base||parseFloat(t.salario_base)<=0){Ue.error("Informe um salrio vlido");return}o(!0);try{const p={salario_base:parseFloat(t.salario_base),inss_percentual:parseFloat(t.inss_percentual),fgts_percentual:parseFloat(t.fgts_percentual),meses:parseInt(t.meses),cargo:t.cargo||null},g=await U.post("/simulacao-contratacao/",p);g.data.sucesso&&(s(g.data.simulacao),Ue.success("Simulao realizada com sucesso!"))}catch(p){console.error("Erro ao simular contratao:",p),Ue.error("Erro ao realizar simulao")}finally{o(!1)}},m=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),x=v=>new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(v/100),h=()=>{s(null),r({salario_base:"",inss_percentual:"20",fgts_percentual:"8",meses:"6",cargo:""})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Simulao de Contratao"}),e.jsx("p",{className:"text-gray-600",children:"Calcule o impacto real de contratar um funcionrio no seu negcio"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Dados da Contratao"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cargo (opcional)"}),e.jsx("input",{type:"text",name:"cargo",value:t.cargo,onChange:d,placeholder:"Ex: Atendente, Veterinrio...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Salrio Base ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"salario_base",value:t.salario_base,onChange:d,placeholder:"Ex: 2000.00",step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"INSS Patronal (%)"}),e.jsx("input",{type:"number",name:"inss_percentual",value:t.inss_percentual,onChange:d,step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FGTS (%)"}),e.jsx("input",{type:"number",name:"fgts_percentual",value:t.fgts_percentual,onChange:d,step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Simular por quantos meses?"}),e.jsxs("select",{name:"meses",value:t.meses,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"3",children:"3 meses"}),e.jsx("option",{value:"6",children:"6 meses"}),e.jsx("option",{value:"12",children:"12 meses (1 ano)"}),e.jsx("option",{value:"24",children:"24 meses (2 anos)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Calculando...":" Simular Contratao"}),a&&e.jsx("button",{type:"button",onClick:h,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:" Nova Simulao"})]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Resumo Executivo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custo Mensal Mdio"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m(a.totais.media_mensal)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.custo_total_vs_salario)," do salrio base"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Custo Total (",a.parametros.meses_simulados," meses)"]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:m(a.totais.total_geral)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Encargos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m(a.totais.total_inss+a.totais.total_fgts)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.percentual_encargos)," do salrio"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Provises Totais"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(a.totais.total_provisao_ferias+a.totais.total_provisao_1_3+a.totais.total_provisao_13)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x(a.analise.percentual_provisoes)," do salrio"]})]})]}),e.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900",children:[e.jsx("strong",{children:" Ateno:"})," O custo real mensal "," ",e.jsx("strong",{children:m(a.totais.media_mensal)}),", no apenas"," ",e.jsx("strong",{children:m(a.parametros.salario_base)}),". Isso representa um aumento de"," ",e.jsx("strong",{children:x(a.analise.custo_total_vs_salario-100)})," ","devido a encargos e provises obrigatrias."]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" Detalhamento Mensal"}),e.jsx("button",{onClick:()=>l(!i),className:"text-sm text-blue-600 hover:text-blue-700",children:i?" Ocultar detalhes":" Mostrar detalhes"})]}),i&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ms"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salrio"}),e.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["INSS (",a.parametros.inss_percentual,"%)"]}),e.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["FGTS (",a.parametros.fgts_percentual,"%)"]}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frias (1/12)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"1/3 Const."}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"13 (1/12)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Custo Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.resultado_mensal.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c[v.mes_calendario-1],"/",v.ano]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:m(v.salario)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600",children:m(v.inss)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:m(v.fgts)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(v.provisao_ferias)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(v.provisao_1_3)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:m(v.provisao_13)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-bold text-gray-900",children:m(v.custo_total)})]},v.mes))}),e.jsx("tfoot",{className:"bg-gray-100 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"TOTAL"}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:m(a.totais.total_salarios)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-orange-600",children:m(a.totais.total_inss)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-blue-600",children:m(a.totais.total_fgts)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_ferias)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_1_3)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-green-600",children:m(a.totais.total_provisao_13)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:m(a.totais.total_geral)})]})})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-900",children:e.jsx("strong",{children:" Como funciona esta simulao:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Nada  gravado no banco"})," -  apenas uma projeo"]}),e.jsx("li",{children:"Custos diretos: Salrio + INSS patronal + FGTS"}),e.jsx("li",{children:"Provises obrigatrias: Frias (1/12) + 1/3 constitucional + 13 (1/12)"}),e.jsx("li",{children:"No considera: Vale-transporte, Vale-refeio, Plano de sade"}),e.jsx("li",{children:"Baseado nas mesmas regras do motor de provises real"})]})]})]})]})}function m_e(){const[t,r]=j.useState([]),[a,s]=j.useState(null),[n,o]=j.useState(!0),i=async()=>{try{o(!0);const m=await U.get("/cargos");r(m.data)}catch(m){console.error("Erro ao carregar cargos:",m),Ue.error("Erro ao carregar cargos")}finally{o(!1)}};j.useEffect(()=>{i()},[]);const l=()=>{s({nome:"",descricao:"",salario_base:"",inss_patronal_percentual:20,fgts_percentual:8,gera_ferias:!0,gera_decimo_terceiro:!0,ativo:!0})},c=async()=>{var m,x;if(!a.nome||!a.salario_base){Ue.error("Nome e salrio so obrigatrios");return}try{a.id?(await U.put(`/cargos/${a.id}`,a),Ue.success("Cargo atualizado com sucesso!")):(await U.post("/cargos",a),Ue.success("Cargo cadastrado com sucesso!")),s(null),i()}catch(h){console.error("Erro ao salvar cargo:",h),Ue.error(((x=(m=h.response)==null?void 0:m.data)==null?void 0:x.detail)||"Erro ao salvar cargo")}},d=async m=>{var x,h;try{await U.patch(`/cargos/${m.id}/status?ativo=${!m.ativo}`),Ue.success(`Cargo ${m.ativo?"inativado":"ativado"} com sucesso!`),i()}catch(v){console.error("Erro ao alterar status:",v),Ue.error(((h=(x=v.response)==null?void 0:x.data)==null?void 0:h.detail)||"Erro ao alterar status")}},u=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Cadastro de Cargos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie cargos, defina salrios e encargos que alimentam provises, DRE e simulaes"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",onClick:l,children:[e.jsx("span",{className:"text-xl",children:"+"})," Novo Cargo"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salrio Base"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"INSS %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FGTS %"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frias"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"13"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ativo"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(m=>e.jsxs("tr",{className:m.ativo?"":"bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.nome}),m.descricao&&e.jsx("div",{className:"text-sm text-gray-500",children:m.descricao})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium text-green-600",children:u(m.salario_base)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(m.inss_patronal_percentual).toFixed(2),"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(m.fgts_percentual).toFixed(2),"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.gera_ferias?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.gera_ferias?"Sim":"No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.gera_decimo_terceiro?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.gera_decimo_terceiro?"Sim":"No"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.ativo?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:m.ativo?"Sim":"No"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-4",onClick:()=>s(m),children:"Editar"}),e.jsx("button",{className:`${m.ativo?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"}`,onClick:()=>d(m),children:m.ativo?"Inativar":"Ativar"})]})]},m.id))})]}),t.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum cargo cadastrado"})})]}),a&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:a.id?"Editar Cargo":"Novo Cargo"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Cargo *"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: Vendedor, Tosador, Gerente",value:a.nome,onChange:m=>s({...a,nome:m.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrio"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Descrio das responsabilidades...",rows:2,value:a.descricao,onChange:m=>s({...a,descricao:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salrio Base (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"0.00",value:a.salario_base,onChange:m=>s({...a,salario_base:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"INSS Patronal (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:a.inss_patronal_percentual,onChange:m=>s({...a,inss_patronal_percentual:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FGTS (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:a.fgts_percentual,onChange:m=>s({...a,fgts_percentual:m.target.value})})]}),e.jsxs("div",{className:"md:col-span-2 flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.gera_ferias,onChange:m=>s({...a,gera_ferias:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gera frias"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.gera_decimo_terceiro,onChange:m=>s({...a,gera_decimo_terceiro:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Gera 13"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.ativo,onChange:m=>s({...a,ativo:m.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Ativo"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",onClick:c,children:"Salvar"}),e.jsx("button",{className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",onClick:()=>s(null),children:"Cancelar"})]})]})]})}function x_e({funcionario:t,onClose:r}){const[a,s]=j.useState(null),[n,o]=j.useState(!1),i=async()=>{const d=await Ot.get(`/funcionarios/${t.id}/provisoes`);s(d.data)};j.useEffect(()=>{i()},[]);const l=async()=>{var d,u;if(window.confirm("Confirmar concesso de frias?")){o(!0);try{const m=new Date,x={mes:m.getMonth()+1,ano:m.getFullYear(),dias_ferias:30,data_pagamento:null};await Ot.post(`/funcionarios/${t.id}/ferias`,x),await i(),alert("Frias concedidas com sucesso")}catch(m){console.error("Erro ao conceder frias:",m),alert(((u=(d=m.response)==null?void 0:d.data)==null?void 0:u.detail)||"Erro ao conceder frias")}finally{o(!1)}}},c=async d=>{var u,m;if(window.confirm(`Confirmar pagamento da ${d} parcela do 13?`)){o(!0);try{const x=new Date,h={mes:x.getMonth()+1,ano:x.getFullYear(),percentual:d===1?50:100,descricao_parcela:d===1?"1 Parcela":"2 Parcela",data_pagamento:null};await Ot.post(`/funcionarios/${t.id}/decimo-terceiro`,h),await i(),alert("13 registrado com sucesso")}catch(x){console.error("Erro ao pagar 13:",x),alert(((m=(u=x.response)==null?void 0:u.data)==null?void 0:m.detail)||"Erro ao pagar 13")}finally{o(!1)}}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded p-6 w-[500px]",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Eventos  ",t.nome]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Provises"}),e.jsxs("p",{children:["Frias: R$ ",Number(a.ferias||0).toFixed(2)]}),e.jsxs("p",{children:["13: R$ ",Number(a.decimo_terceiro||0).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{disabled:n,onClick:l,className:"w-full bg-blue-600 text-white py-2 rounded",children:"Conceder Frias"}),e.jsx("button",{disabled:n,onClick:()=>c(1),className:"w-full bg-green-600 text-white py-2 rounded",children:"Pagar 1 Parcela do 13"}),e.jsx("button",{disabled:n,onClick:()=>c(2),className:"w-full bg-green-700 text-white py-2 rounded",children:"Pagar 2 Parcela do 13"})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:r,className:"text-gray-600 underline",children:"Fechar"})})]})}):null}function p_e(){const[t,r]=j.useState([]),[a,s]=j.useState([]),[n,o]=j.useState(null),[i,l]=j.useState(""),[c,d]=j.useState("todos"),[u,m]=j.useState(null),x=async()=>{const f=await U.get("/funcionarios");r(f.data)},h=async()=>{const f=await U.get("/cargos");s(f.data.filter(b=>b.ativo))};j.useEffect(()=>{x(),h()},[]);const v=()=>{o({nome:"",cpf:"",email:"",telefone:"",cargo_id:"",ativo:!0})},p=async()=>{var b,N,_,w,S;if(!n.nome||!n.cargo_id){alert("Nome e cargo so obrigatrios");return}const f={nome:n.nome,cargo_id:Number(n.cargo_id),ativo:n.ativo,email:((b=n.email)==null?void 0:b.trim())||null,telefone:((N=n.telefone)==null?void 0:N.trim())||null,cpf:((_=n.cpf)==null?void 0:_.trim())||null};try{n.id?await U.put(`/funcionarios/${n.id}`,f):await U.post("/funcionarios",f),o(null),x()}catch(C){console.error("Erro ao salvar funcionrio:",C),alert(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.detail)||"Erro ao salvar funcionrio")}},g=async f=>{window.confirm("Deseja inativar este funcionrio?")&&(await U.delete(`/funcionarios/${f}`),x())},y=t.filter(f=>{const b=f.nome.toLowerCase().includes(i.toLowerCase())||(f.cpf||"").includes(i),N=c==="todos"||c==="ativos"&&f.ativo||c==="inativos"&&!f.ativo;return b&&N});return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Funcionrios"}),e.jsxs("div",{className:"flex justify-between items-center mb-4 gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"border p-2 w-64",placeholder:"Buscar por nome ou CPF",value:i,onChange:f=>l(f.target.value)}),e.jsxs("select",{className:"border p-2 bg-white",value:c,onChange:f=>d(f.target.value),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"ativos",children:"Ativos"}),e.jsx("option",{value:"inativos",children:"Inativos"})]})]}),e.jsx("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Novo Funcionrio"})]}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Nome"}),e.jsx("th",{className:"border p-2",children:"Cargo"}),e.jsx("th",{className:"border p-2",children:"Salrio"}),e.jsx("th",{className:"border p-2",children:"Status"}),e.jsx("th",{className:"border p-2",children:"Aes"})]})}),e.jsx("tbody",{children:y.map(f=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:f.nome}),e.jsx("td",{className:"border p-2",children:f.cargo?f.cargo.nome:"-"}),e.jsx("td",{className:"border p-2",children:f.cargo?`R$ ${Number(f.cargo.salario_base).toFixed(2)}`:"-"}),e.jsx("td",{className:"border p-2",children:f.ativo?"Ativo":"Inativo"}),e.jsxs("td",{className:"border p-2 space-x-2",children:[e.jsx("button",{className:"text-purple-600",onClick:()=>m(f),children:"Eventos"}),e.jsx("button",{className:"text-blue-600",onClick:()=>{var b;return o({...f,cargo_id:(b=f.cargo)==null?void 0:b.id})},children:"Editar"}),f.ativo&&e.jsx("button",{className:"text-red-600",onClick:()=>g(f.id),children:"Inativar"})]})]},f.id))})]}),n&&e.jsxs("div",{className:"border rounded p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:n.id?"Editar Funcionrio":"Novo Funcionrio"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{className:"border p-2",placeholder:"Nome",value:n.nome,onChange:f=>o({...n,nome:f.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"CPF",value:n.cpf||"",onChange:f=>o({...n,cpf:f.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"Email",value:n.email||"",onChange:f=>o({...n,email:f.target.value})}),e.jsx("input",{className:"border p-2",placeholder:"Telefone",value:n.telefone||"",onChange:f=>o({...n,telefone:f.target.value})}),e.jsxs("select",{className:"border p-2 col-span-2",value:n.cargo_id,onChange:f=>o({...n,cargo_id:f.target.value}),children:[e.jsx("option",{value:"",children:"Selecione o cargo"}),a.map(f=>e.jsx("option",{value:f.id,children:f.nome},f.id))]})]}),e.jsxs("div",{className:"mt-4 space-x-2",children:[e.jsx("button",{onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Salvar"}),e.jsx("button",{onClick:()=>o(null),className:"bg-gray-400 text-white px-4 py-2 rounded",children:"Cancelar"})]})]}),u&&e.jsx(x_e,{funcionario:u,onClose:()=>m(null)})]})}function h_e(){const[t,r]=j.useState(!0),[a,s]=j.useState([]),[n,o]=j.useState([]),[i,l]=j.useState(null),[c,d]=j.useState(!1);j.useEffect(()=>{u()},[]);async function u(){r(!0);try{const[v,p]=await Promise.all([Ot.get("/rotas-entrega/vendas-pendentes/listar"),Ot.get("/configuracoes/entregas").catch(()=>({data:null}))]);s(Array.isArray(v.data)?v.data:[]),l(p.data)}catch(v){console.error(v),alert("Erro ao carregar vendas pendentes"),s([])}finally{r(!1)}}async function m(){var g,y,f;if(a.length===0){alert("No h vendas para otimizar");return}if(!i||!i.logradouro){alert(" Configure o endereo da loja em Configuraes > Entregas antes de otimizar rotas");return}if(confirm(` ATENO - ESTA OPERAO TEM CUSTO!

 Custo estimado: 5 centavos
 Entregas a otimizar: ${a.length}
 Ser feita 1 chamada ao Google Maps API
 A ordem ser salva no banco (no cobra novamente)

Deseja continuar?`)){d(!0);try{console.log(" Chamando endpoint de otimizao...");const b=await Ot.post("/rotas-entrega/vendas-pendentes/otimizar");console.log(" Resposta da otimizao:",b.data),alert(` ROTAS OTIMIZADAS COM SUCESSO!

${b.data.message}

Total otimizado: ${b.data.total_otimizado||a.length} entregas`),await u()}catch(b){console.error(" Erro ao otimizar:",b),console.error("Detalhes:",(g=b.response)==null?void 0:g.data);const N=((f=(y=b.response)==null?void 0:y.data)==null?void 0:f.detail)||"Erro ao otimizar rotas. Verifique se o Google Maps est configurado.";alert(` ERRO AO OTIMIZAR ROTAS

${N}`)}finally{d(!1)}}}function x(v){o(p=>p.includes(v)?p.filter(g=>g!==v):[...p,v])}async function h(){var v,p;if(n.length===0){alert("Selecione pelo menos uma entrega");return}if(confirm(`Deseja criar uma rota com ${n.length} entrega(s)?`))try{r(!0);const g=a.filter(f=>n.includes(f.id)),y=g.filter(f=>!f.entregador_id);if(y.length>0){alert(` As seguintes vendas no tm entregador atribudo:
${y.map(f=>f.numero_venda).join(", ")}

Atribua um entregador antes de criar a rota.`),r(!1);return}await Ot.post("/rotas-entrega/",{vendas_ids:n,entregador_id:g[0].entregador_id,moto_da_loja:!1}),alert(` Rota criada com ${n.length} entrega(s)!

As entregas foram movidas para "Rotas de Entrega"`),o([]),u()}catch(g){console.error(g),alert(((p=(v=g.response)==null?void 0:v.data)==null?void 0:p.detail)||"Erro ao criar rota. Verifique se todas as entregas tm entregador atribudo.")}finally{r(!1)}}return t?e.jsx("div",{className:"page",children:"Carregando..."}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Entregas em Aberto"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Vendas com entrega que esto aguardando iniciar a rota"}),!Array.isArray(a)||a.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:" No h entregas pendentes"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:[e.jsx("button",{onClick:m,disabled:c||t,className:"btn-secondary",title:"Reorganizar entregas usando Google Maps para menor distncia",children:c?" Otimizando...":" Otimizar Rotas"}),e.jsxs("span",{style:{color:"#666",fontSize:"0.9em"},children:[" ",a.filter(v=>v.ordem_otimizada).length>0?`${a.filter(v=>v.ordem_otimizada).length} entregas j otimizadas. `:"","Clique para ordenar pela rota mais eficiente"]})]}),e.jsxs("table",{className:"table-entregas",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:e.jsx("input",{type:"checkbox",checked:n.length===a.length&&a.length>0,onChange:v=>o(v.target.checked?a.map(p=>p.id):[])})}),e.jsx("th",{children:"Ordem"}),e.jsx("th",{children:"Venda"}),e.jsx("th",{children:"Data da Venda"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Entregador"}),e.jsx("th",{children:"Endereo"}),e.jsx("th",{children:"Taxa Entrega"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:a.map((v,p)=>e.jsxs("tr",{style:{backgroundColor:n.includes(v.id)?"#e3f2fd":v.ordem_otimizada?"#f0f8ff":"white"},children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:n.includes(v.id),onChange:()=>x(v.id)})}),e.jsx("td",{children:e.jsxs("strong",{style:{color:v.ordem_otimizada?"#007bff":"#999",fontSize:"1.1em"},children:[p+1,v.ordem_otimizada&&" "]})}),e.jsx("td",{children:v.numero_venda}),e.jsx("td",{style:{fontSize:"0.9em"},children:v.data_venda?new Date(v.data_venda).toLocaleDateString("pt-BR"):"N/A"}),e.jsx("td",{children:v.cliente_nome}),e.jsx("td",{children:e.jsx("span",{style:{color:v.entregador_nome?"#28a745":"#999",fontWeight:v.entregador_nome?"600":"normal"},children:v.entregador_nome||"No atribudo"})}),e.jsx("td",{style:{maxWidth:300,fontSize:"0.9em"},children:v.endereco_entrega||"N/A"}),e.jsxs("td",{children:["R$ ",parseFloat(v.taxa_entrega||0).toFixed(2)]}),e.jsxs("td",{children:["R$ ",parseFloat(v.total||0).toFixed(2)]}),e.jsx("td",{children:e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,fontWeight:"bold",color:"#fff",backgroundColor:"#ffa500"},children:"AGUARDANDO"})})]},v.id))})]}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:10},children:[e.jsxs("button",{onClick:h,disabled:n.length===0||t,className:"btn-primary",style:{backgroundColor:n.length>0?"#28a745":"#ccc",cursor:n.length>0?"pointer":"not-allowed"},children:[" Criar Rota (",n.length," selecionada",n.length!==1?"s":"",")"]}),e.jsx("span",{style:{color:"#666",fontSize:"0.9em",alignSelf:"center"},children:" Selecione as entregas e clique para criar uma rota"})]})]})]})}function f_e(){const t=Ht(),[r,a]=j.useState([]),[s,n]=j.useState(!0),[o,i]=j.useState(""),[l,c]=j.useState(null);j.useEffect(()=>{d()},[o]);async function d(){try{n(!0);const b=new URLSearchParams;o&&b.append("status",o);const N=await U.get(`/rotas-entrega/?${b.toString()}`);a(N.data)}catch(b){console.error("Erro ao carregar rotas:",b),alert("Erro ao carregar rotas de entrega")}finally{n(!1)}}function u(b){c(l===b?null:b)}async function m(b,N){try{const _=N.map(w=>w.id);await U.put(`/rotas-entrega/${b}/paradas/reordenar`,_),a(w=>w.map(S=>S.id===b?{...S,paradas:N.map((C,E)=>({...C,ordem:E+1}))}:S)),alert("Ordem das paradas atualizada!")}catch(_){console.error("Erro ao reordenar paradas:",_),alert("Erro ao reordenar paradas")}}async function x(b){var _,w;if(!confirm("Deseja iniciar esta rota? Uma mensagem ser enviada ao primeiro cliente."))return;const N=prompt(` Digite o KM atual da moto (opcional):

Deixe em branco se no quiser registrar.`);try{const S={};N&&!isNaN(N)&&parseFloat(N)>0&&(S.km_inicial=parseFloat(N)),await U.post(`/rotas-entrega/${b}/iniciar`,null,{params:S}),alert(" Rota iniciada! Mensagem enviada ao primeiro cliente."),d()}catch(S){console.error("Erro ao iniciar rota:",S);const C=((w=(_=S.response)==null?void 0:_.data)==null?void 0:w.detail)||"Erro ao iniciar rota";alert(` ${C}`)}}async function h(b){var N,_;if(confirm(` Tem certeza que deseja excluir esta rota?

As vendas voltaro para a listagem de entregas pendentes.`))try{const w=await U.delete(`/rotas-entrega/${b}`),{total_vendas:S}=w.data;alert(` Rota excluda com sucesso!
${S} venda(s) voltaram para entregas pendentes.`),d()}catch(w){console.error("Erro ao excluir rota:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao excluir rota";alert(` ${S}`)}}async function v(b){var N,_;if(confirm(` Reverter incio desta rota?

A rota voltar para status pendente e voc poder adicionar mais entregas.`))try{await U.post(`/rotas-entrega/${b}/reverter-inicio`),alert(" Rota revertida para pendente! Agora voc pode adicionar mais entregas."),d()}catch(w){console.error("Erro ao reverter rota:",w);const S=((_=(N=w.response)==null?void 0:N.data)==null?void 0:_.detail)||"Erro ao reverter incio da rota";alert(` ${S}`)}}function p(b){if(!b.paradas||b.paradas.length===0)return null;const N=b.paradas[b.paradas.length-1];return N.tempo_acumulado?N.tempo_acumulado:null}function g(b){if(!b)return"N/A";const N=Math.floor(b/60),_=Math.floor(N/60),w=N%60;return _>0?`${_}h${w}min`:`${w}min`}function y(b){switch(b){case"pendente":return"#FFA500";case"em_andamento":return"#007BFF";case"em_rota":return"#007BFF";case"concluida":return"#28A745";case"cancelada":return"#DC3545";default:return"#6C757D"}}function f(b){switch(b){case"pendente":return" Pendente";case"em_andamento":return" Em Andamento";case"em_rota":return" Em Rota";case"concluida":return" Concluda";case"cancelada":return" Cancelada";default:return b}}return s?e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{children:"Carregando rotas..."})]}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Rotas criadas e em andamento"}),e.jsxs("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:[e.jsxs("label",{children:["Filtrar por status:",e.jsxs("select",{value:o,onChange:b=>i(b.target.value),style:{marginLeft:10,padding:"5px 10px"},children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"concluida",children:"Concluda"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsx("button",{onClick:d,className:"btn-secondary",style:{marginLeft:"auto"},children:" Atualizar"})]}),!Array.isArray(r)||r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"Nenhuma rota encontrada"}),e.jsx("button",{onClick:()=>t("/entregas/abertas"),className:"btn-primary",style:{marginTop:10},children:"Criar Nova Rota"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:r.map(b=>e.jsx(g_e,{rota:b,expandida:l===b.id,onToggleExpand:()=>u(b.id),onReordenar:m,onIniciarRota:x,onExcluirRota:h,onReverterInicio:v,getStatusColor:y,getStatusLabel:f,calcularTempoEstimado:p,formatarTempo:g},b.id))})]})}function g_e({rota:t,expandida:r,onToggleExpand:a,onReordenar:s,onIniciarRota:n,onExcluirRota:o,onReverterInicio:i,getStatusColor:l,getStatusLabel:c,calcularTempoEstimado:d,formatarTempo:u}){var I,k;const[m,x]=j.useState(t.paradas||[]),[h,v]=j.useState(null),[p,g]=j.useState(null),[y,f]=j.useState(null),[b,N]=j.useState(!1),[_,w]=j.useState(null),[S,C]=j.useState(null),[E,T]=j.useState(!1);j.useEffect(()=>{x(t.paradas||[])},[t.paradas]);const q=d(t),A=m.filter(M=>M.status!=="entregue").length,O=m.length>0&&A===0;async function V(M,z){var oe,W,ae;try{N(!0),g(M);const ee=await U.get(`/vendas/${z}`);console.log(" Detalhes da venda carregados:",ee.data),console.log(" Telefones do cliente:",{telefone:(oe=ee.data.cliente)==null?void 0:oe.telefone,celular:(W=ee.data.cliente)==null?void 0:W.celular,email:(ae=ee.data.cliente)==null?void 0:ae.email}),f(ee.data)}catch(ee){console.error("Erro ao carregar detalhes da venda:",ee),alert("Erro ao carregar detalhes da venda"),g(null)}finally{N(!1)}}function G(){g(null),f(null)}async function L(M,z){var W,ae;if(!confirm(` Confirmar entrega realizada?

Uma mensagem ser enviada automaticamente para o prximo cliente da rota.`))return;const oe=prompt(` Digite o KM atual da moto (opcional):

Deixe em branco se no quiser registrar.`);try{w(M);const ee={};oe&&!isNaN(oe)&&parseFloat(oe)>0&&(ee.km_entrega=parseFloat(oe));const ce=await U.post(`/rotas-entrega/${z}/paradas/${M}/marcar-entregue`,null,{params:ee});alert(" "+ce.data.message),x(ie=>ie.map(we=>we.id===M?{...we,status:"entregue",data_entrega:new Date().toISOString(),km_entrega:oe?parseFloat(oe):null}:we)),window.location.reload()}catch(ee){console.error("Erro ao marcar entrega:",ee);const ce=((ae=(W=ee.response)==null?void 0:W.data)==null?void 0:ae.detail)||"Erro ao marcar entrega como concluda";alert(" "+ce)}finally{w(null)}}async function Z(M,z){const oe=prompt(` Digite a observao sobre esta entrega:

(Ex: 'Sempre entregar no vizinho', 'Chamar na casa da frente')`);if(!(!oe||oe.trim()===""))try{await U.put(`/rotas-entrega/${z}/paradas/${M}/observacao`,null,{params:{observacao:oe.trim()}}),alert(" Observao salva com sucesso!"),x(W=>W.map(ae=>ae.id===M?{...ae,observacoes:oe.trim()}:ae))}catch(W){console.error("Erro ao salvar observao:",W),alert(" Erro ao salvar observao")}}async function D(M,z,oe){const W=prompt(` Por que a entrega no foi realizada?

(Ex: 'Cliente ausente', 'Carto recusado', 'Endereo no encontrado')`);if(!(!W||W.trim()==="")&&confirm(` Confirmar que a entrega NO foi realizada?

A venda voltar para entregas em aberto.`))try{C(M),await U.post(`/rotas-entrega/${z}/paradas/${M}/nao-entregue`,null,{params:{motivo:W.trim()}}),alert(" Entrega marcada como no realizada. Venda #"+oe+" voltou para entregas em aberto."),window.location.reload()}catch(ae){console.error("Erro ao marcar como no entregue:",ae),alert(" Erro ao processar")}finally{C(null)}}async function K(M,z){var ee,ce;const oe=prompt(` Digite o KM final da moto (opcional):

Deixe em branco se no quiser registrar.`);let W=null;if(z&&oe&&!isNaN(oe)&&parseFloat(oe)>parseFloat(z)){const ie=(parseFloat(oe)-parseFloat(z)).toFixed(2);confirm(` Distncia calculada: ${ie} km

KM Inicial: ${z}
KM Final: ${oe}

Deseja usar esta distncia?`)&&(W=parseFloat(ie))}if(!W){const ie=prompt(` Digite a distncia percorrida em km (opcional):

Deixe em branco se no souber.`);ie&&!isNaN(ie)&&parseFloat(ie)>0&&(W=parseFloat(ie))}const ae=prompt(" Observaes sobre a rota (opcional):")||"";if(confirm(` Finalizar esta rota?

Esta ao no pode ser desfeita.`))try{T(!0);const ie={observacoes:ae.trim()};oe&&!isNaN(oe)&&parseFloat(oe)>0&&(ie.km_final=parseFloat(oe)),W&&(ie.distancia_real=W),await U.post(`/rotas-entrega/${M}/fechar`,ie),alert(" Rota finalizada com sucesso!"),window.location.reload()}catch(ie){console.error("Erro ao finalizar rota:",ie);const we=((ce=(ee=ie.response)==null?void 0:ee.data)==null?void 0:ce.detail)||"Erro ao finalizar rota";alert(" "+we)}finally{T(!1)}}const R=(M,z)=>{v(z),M.dataTransfer.effectAllowed="move"},B=(M,z)=>{if(M.preventDefault(),h===null||h===z)return;const oe=[...m],W=oe[h];oe.splice(h,1),oe.splice(z,0,W),x(oe),v(z)},F=()=>{h!==null&&s(t.id,m),v(null)};return e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:15,backgroundColor:"#fff"},children:[e.jsxs("div",{style:{cursor:"pointer",transition:"all 0.2s"},onClick:a,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:0,marginBottom:10},children:[" ",t.numero||`Rota #${t.id}`,r?" ":" "]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5,color:"#555"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Entregador:"})," ",((I=t.entregador)==null?void 0:I.nome)||"No informado"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Paradas:"})," ",((k=t.paradas)==null?void 0:k.length)||0," entrega(s)"]}),t.distancia_prevista&&e.jsxs("div",{children:[e.jsx("strong",{children:"Distncia Prevista:"})," ",t.distancia_prevista," km"]}),q&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tempo Estimado:"})," ",u(q)]}),t.km_inicial&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Inicial:"})," ",parseFloat(t.km_inicial).toFixed(1)," km"]}),t.km_final&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Final:"})," ",parseFloat(t.km_final).toFixed(1)," km"]}),t.km_inicial&&t.km_final&&e.jsxs("div",{style:{color:"#007BFF",fontWeight:"600"},children:[e.jsx("strong",{children:" Total Rodado:"})," ",(parseFloat(t.km_final)-parseFloat(t.km_inicial)).toFixed(1)," km",t.distancia_prevista&&(()=>{const M=parseFloat(t.km_final)-parseFloat(t.km_inicial),z=parseFloat(t.distancia_prevista),oe=M-z,W=(oe/z*100).toFixed(1);return e.jsxs("span",{style:{marginLeft:10,color:oe>0?"#DC3545":"#28A745",fontSize:13},children:["(",oe>0?"+":"",oe.toFixed(1)," km / ",W>0?"+":"",W,"% vs projetado)"]})})()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Criada em:"})," ",new Date(t.created_at).toLocaleString("pt-BR")]}),t.data_conclusao&&e.jsxs("div",{children:[e.jsx("strong",{children:"Concluda em:"})," ",new Date(t.data_conclusao).toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[t.status==="pendente"&&e.jsx("button",{onClick:M=>{M.stopPropagation(),n(t.id)},style:{padding:"8px 16px",backgroundColor:"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Iniciar Rota"}),(t.status==="em_rota"||t.status==="em_andamento")&&O&&e.jsx("button",{onClick:M=>{M.stopPropagation(),K(t.id,t.km_inicial)},disabled:E,style:{padding:"8px 16px",backgroundColor:E?"#ccc":"#007BFF",color:"#fff",border:"none",borderRadius:6,cursor:E?"not-allowed":"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:E?" Processando...":" Finalizar Rota"}),(t.status==="em_rota"||t.status==="em_andamento")&&A===m.length&&e.jsx("button",{onClick:M=>{M.stopPropagation(),i(t.id)},style:{padding:"8px 16px",backgroundColor:"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Reverter Incio"}),(t.status==="pendente"||t.status==="em_rota"||t.status==="em_andamento")&&e.jsx("button",{onClick:M=>{M.stopPropagation(),o(t.id)},style:{padding:"8px 16px",backgroundColor:"#DC3545",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:" Excluir"}),e.jsx("div",{style:{padding:"5px 15px",borderRadius:20,backgroundColor:l(t.status),color:"#fff",fontWeight:"bold",fontSize:14,whiteSpace:"nowrap"},children:c(t.status)})]})]}),t.observacoes&&e.jsxs("div",{style:{marginTop:10,padding:10,backgroundColor:"#f8f9fa",borderRadius:5,fontSize:14,color:"#666"},children:[e.jsx("strong",{children:"Observaes:"})," ",t.observacoes]})]}),r&&m.length>0&&e.jsxs("div",{style:{marginTop:20,borderTop:"2px solid #eee",paddingTop:15},children:[e.jsx("h4",{style:{marginBottom:15},children:" Paradas da Rota (arraste para reordenar)"}),m.map((M,z)=>{var oe,W,ae,ee;return e.jsxs("div",{children:[e.jsxs("div",{draggable:!0,onDragStart:ce=>R(ce,z),onDragOver:ce=>B(ce,z),onDragEnd:F,style:{padding:12,marginBottom:10,border:"1px solid #ddd",borderRadius:6,backgroundColor:h===z?"#f0f8ff":"#fafafa",cursor:"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[e.jsxs("span",{style:{fontWeight:"bold",marginRight:10,fontSize:18,color:"#007BFF"},children:[M.ordem,""]}),e.jsxs("span",{style:{color:"#666",fontSize:14},children:["Venda #",M.venda_id]}),M.status&&e.jsx("span",{style:{marginLeft:10,padding:"2px 8px",borderRadius:12,fontSize:12,backgroundColor:M.status==="entregue"?"#d4edda":M.status==="tentativa"?"#fff3cd":"#e2e3e5",color:M.status==="entregue"?"#155724":M.status==="tentativa"?"#856404":"#383d41"},children:M.status==="entregue"?" Entregue":M.status==="tentativa"?" Tentativa":"Pendente"})]}),e.jsxs("div",{style:{fontSize:13,color:"#333",lineHeight:1.6},children:[M.cliente_nome&&e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("strong",{style:{color:"#1565C0"},children:[" ",M.cliente_nome]}),M.cliente_telefone&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",M.cliente_telefone]}),M.cliente_celular&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",M.cliente_celular]})]}),e.jsxs("div",{style:{color:"#555"},children:[" ",M.endereco,M.distancia_acumulada&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Dist: ",M.distancia_acumulada," km"]}),M.tempo_acumulado&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Tempo aprox: ",u(M.tempo_acumulado)]})]})]}),M.data_entrega&&e.jsxs("div",{style:{color:"#28a745",fontSize:12,marginTop:3},children:[" Entregue em: ",new Date(M.data_entrega).toLocaleString("pt-BR")]}),M.observacoes&&e.jsxs("div",{style:{marginTop:6,padding:6,backgroundColor:"#fff3cd",borderRadius:4,fontSize:12,color:"#856404",border:"1px solid #ffc107"},children:[" ",M.observacoes]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"flex-end"},children:[M.status!=="entregue"&&t.status==="em_rota"&&e.jsx("button",{onClick:ce=>{ce.stopPropagation(),L(M.id,t.id)},disabled:_===M.id,style:{padding:"8px 12px",backgroundColor:_===M.id?"#ccc":"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:_===M.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:_===M.id?"...":" Entregue"}),M.status!=="entregue"&&(t.status==="em_rota"||t.status==="em_andamento")&&e.jsx("button",{onClick:ce=>{ce.stopPropagation(),D(M.id,t.id,M.venda_id)},disabled:S===M.id,style:{padding:"8px 12px",backgroundColor:S===M.id?"#ccc":"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:S===M.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:S===M.id?"...":" Falta Entregar"}),e.jsx("button",{onClick:ce=>{ce.stopPropagation(),Z(M.id,t.id)},style:{padding:"8px 12px",backgroundColor:"#6C757D",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:" Observao"}),e.jsx("button",{onClick:ce=>{ce.stopPropagation(),p===M.id?G():V(M.id,M.venda_id)},style:{padding:"8px 12px",backgroundColor:"#17A2B8",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:" Detalhes"})]})]}),p===M.id&&e.jsx("div",{style:{marginTop:0,marginBottom:15,padding:15,backgroundColor:"#f8f9fa",borderRadius:8,border:"2px solid #007BFF",boxShadow:"0 2px 8px rgba(0,123,255,0.2)"},children:b?e.jsx("div",{style:{textAlign:"center",color:"#666",padding:20},children:"Carregando detalhes da venda..."}):y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15,borderBottom:"2px solid #007BFF",paddingBottom:10},children:[e.jsxs("h4",{style:{margin:0,color:"#007BFF"},children:[" Detalhes da Venda #",y.id]}),e.jsx("button",{onClick:ce=>{ce.stopPropagation(),G()},style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",cursor:"pointer",fontWeight:"bold",fontSize:13},children:" Fechar"})]}),e.jsx("div",{style:{backgroundColor:"#e7f3ff",padding:12,borderRadius:6,marginBottom:15,border:"1px solid #007BFF"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:" Cliente:"})," ",((oe=y.cliente)==null?void 0:oe.nome)||y.nome_cliente||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:" Data:"})," ",y.data_venda?new Date(y.data_venda).toLocaleString("pt-BR"):"N/A"]}),((W=y.cliente)==null?void 0:W.telefone)&&e.jsxs("div",{children:[e.jsx("strong",{children:" Telefone:"})," ",y.cliente.telefone]}),((ae=y.cliente)==null?void 0:ae.celular)&&e.jsxs("div",{children:[e.jsx("strong",{children:" Celular:"})," ",y.cliente.celular]}),((ee=y.cliente)==null?void 0:ee.email)&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:" Email:"})," ",y.cliente.email]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,fontSize:14,marginBottom:15},children:[e.jsxs("div",{style:{padding:10,backgroundColor:"#d4edda",borderRadius:4,border:"1px solid #28a745"},children:[e.jsx("div",{style:{fontSize:11,color:"#155724",marginBottom:3},children:"VALOR TOTAL"}),e.jsxs("div",{style:{fontWeight:"bold",fontSize:16,color:"#155724"},children:["R$ ",parseFloat(y.valor_total||y.total||0).toFixed(2)]})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"PAGAMENTO"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:y.forma_pagamento||"N/A"})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"STATUS"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:y.status_pagamento||"N/A"})]})]}),y.endereco_entrega&&e.jsxs("div",{style:{padding:12,backgroundColor:"#e3f2fd",borderRadius:6,marginBottom:15,border:"1px solid #2196F3"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#1976D2"},children:" Endereo de Entrega"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:y.endereco_entrega})]}),y.observacoes&&e.jsxs("div",{style:{padding:12,backgroundColor:"#fff3cd",borderRadius:6,marginBottom:15,border:"1px solid #ffc107"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#f57c00"},children:" Observaes"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:y.observacoes})]}),y.itens&&y.itens.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:15,marginBottom:10,color:"#424242"},children:[" Itens da Venda (",y.itens.length,")"]}),e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:6,border:"1px solid #ddd",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[y.itens.map((ce,ie)=>{var we,Se,me,_e;return e.jsxs("div",{style:{padding:12,borderBottom:ie<y.itens.length-1?"1px solid #eee":"none",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:ie%2===0?"#fafafa":"#fff"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:3,color:"#333"},children:((we=ce.produto)==null?void 0:we.nome)||((Se=ce.servico)==null?void 0:Se.nome)||ce.produto_nome||ce.servico_descricao||"Item"}),(((me=ce.produto)==null?void 0:me.codigo)||ce.produto_codigo)&&e.jsxs("div",{style:{fontSize:12,color:"#999"},children:["Cd: ",((_e=ce.produto)==null?void 0:_e.codigo)||ce.produto_codigo]})]}),e.jsxs("div",{style:{textAlign:"right",minWidth:120},children:[e.jsxs("div",{style:{color:"#666",fontSize:13,marginBottom:2},children:[ce.quantidade,"  R$ ",parseFloat(ce.valor_unitario||ce.preco_unitario||0).toFixed(2)]}),e.jsxs("div",{style:{fontSize:15,color:"#28a745",fontWeight:"bold"},children:["R$ ",parseFloat((ce.quantidade||0)*(ce.valor_unitario||ce.preco_unitario||0)).toFixed(2)]})]})]},ie)}),e.jsxs("div",{style:{padding:14,backgroundColor:"#1976D2",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#fff"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:16},children:"TOTAL DA VENDA"}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:18},children:["R$ ",parseFloat(y.valor_total||y.total||0).toFixed(2)]})]})]})]})]}):null})]},M.id)})]})]})}function b_e(){const[t,r]=j.useState([]),[a,s]=j.useState(!0),[n,o]=j.useState(null);j.useEffect(()=>{i()},[]);async function i(){try{s(!0);const c=await U.get("/rotas-entrega/?status=concluida");r(c.data)}catch(c){console.error("Erro ao carregar histrico:",c),alert("Erro ao carregar histrico de entregas")}finally{s(!1)}}function l(c){o(n===c?null:c)}return a?e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:" Histrico de Entregas"}),e.jsx("p",{children:"Carregando histrico..."})]}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:" Histrico de Entregas"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Rotas finalizadas e conferidas"}),e.jsx("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:e.jsx("button",{onClick:i,className:"btn-secondary",style:{marginLeft:"auto"},children:" Atualizar"})}),!Array.isArray(t)||t.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"Nenhuma rota finalizada encontrada"})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:t.map(c=>{var d,u;return e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:15,backgroundColor:"#fff"},children:[e.jsx("div",{style:{cursor:"pointer"},onClick:()=>l(c.id),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:0,marginBottom:10},children:[" ",c.numero||`Rota #${c.id}`,n===c.id?" ":" "]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:10,color:"#555",fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Entregador:"})," ",((d=c.entregador)==null?void 0:d.nome)||"No informado"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Paradas:"})," ",((u=c.paradas)==null?void 0:u.length)||0," entrega(s)"]}),c.distancia_prevista&&e.jsxs("div",{children:[e.jsx("strong",{children:" Previsto:"})," ",parseFloat(c.distancia_prevista).toFixed(1)," km"]}),c.km_inicial&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Inicial:"})," ",parseFloat(c.km_inicial).toFixed(1)]}),c.km_final&&e.jsxs("div",{children:[e.jsx("strong",{children:" KM Final:"})," ",parseFloat(c.km_final).toFixed(1)]}),c.km_inicial&&c.km_final&&e.jsxs("div",{style:{color:"#007BFF",fontWeight:"600"},children:[e.jsx("strong",{children:" Total:"})," ",(parseFloat(c.km_final)-parseFloat(c.km_inicial)).toFixed(1)," km",c.distancia_prevista&&(()=>{const m=parseFloat(c.km_final)-parseFloat(c.km_inicial),x=parseFloat(c.distancia_prevista),h=m-x,v=(h/x*100).toFixed(1);return e.jsxs("div",{style:{fontSize:12,color:h>0?"#DC3545":"#28A745",marginTop:2},children:[h>0?"":""," ",Math.abs(h).toFixed(1)," km (",h>0?"+":"",v,"%)"]})})()]}),c.distancia_real&&!(c.km_inicial&&c.km_final)&&e.jsxs("div",{children:[e.jsx("strong",{children:"Distncia:"})," ",parseFloat(c.distancia_real).toFixed(1)," km"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Concluda em:"})," ",new Date(c.data_conclusao).toLocaleString("pt-BR")]}),c.custo_real&&e.jsxs("div",{children:[e.jsx("strong",{children:"Custo:"})," R$ ",parseFloat(c.custo_real).toFixed(2)]})]}),c.observacoes&&e.jsxs("div",{style:{marginTop:10,padding:10,backgroundColor:"#f8f9fa",borderRadius:5,fontSize:14,color:"#666"},children:[e.jsx("strong",{children:"Observaes:"})," ",c.observacoes]})]}),e.jsx("div",{style:{padding:"5px 15px",borderRadius:20,backgroundColor:"#28A745",color:"#fff",fontWeight:"bold",fontSize:14,whiteSpace:"nowrap"},children:" Concluda"})]})}),n===c.id&&c.paradas&&c.paradas.length>0&&e.jsxs("div",{style:{marginTop:20,borderTop:"2px solid #eee",paddingTop:15},children:[e.jsx("h4",{style:{marginBottom:15},children:" Entregas da Rota"}),c.paradas.map(m=>e.jsx("div",{style:{padding:12,marginBottom:10,border:"1px solid #ddd",borderRadius:6,backgroundColor:m.status==="entregue"?"#f0fff4":"#fafafa"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[e.jsxs("span",{style:{fontWeight:"bold",marginRight:10,fontSize:18,color:"#007BFF"},children:[m.ordem,""]}),e.jsxs("span",{style:{color:"#666",fontSize:14},children:["Venda #",m.venda_id]}),e.jsx("span",{style:{marginLeft:10,padding:"2px 8px",borderRadius:12,fontSize:12,backgroundColor:m.status==="entregue"?"#d4edda":"#e2e3e5",color:m.status==="entregue"?"#155724":"#383d41"},children:m.status==="entregue"?" Entregue":m.status})]}),e.jsxs("div",{style:{fontSize:13,color:"#333",lineHeight:1.6},children:[m.cliente_nome&&e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("strong",{style:{color:"#1565C0"},children:[" ",m.cliente_nome]}),m.cliente_telefone&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",m.cliente_telefone]}),m.cliente_celular&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:[" ",m.cliente_celular]})]}),e.jsxs("div",{style:{color:"#555"},children:[" ",m.endereco,m.distancia_acumulada&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" Dist: ",m.distancia_acumulada," km"]}),m.km_entrega&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:[" KM: ",m.km_entrega]})]})]}),m.data_entrega&&e.jsxs("div",{style:{color:"#28a745",fontSize:12,marginTop:3},children:[" Entregue em: ",new Date(m.data_entrega).toLocaleString("pt-BR")]}),m.observacoes&&e.jsxs("div",{style:{marginTop:6,padding:6,backgroundColor:"#fff3cd",borderRadius:4,fontSize:12,color:"#856404",border:"1px solid #ffc107"},children:[" ",m.observacoes]})]})})},m.id))]})]},c.id)})})]})}function v_e(){const[t,r]=j.useState(""),[a,s]=j.useState(""),[n,o]=j.useState(null),[i,l]=j.useState(null),[c,d]=j.useState(null),[u,m]=j.useState(!1),[x,h]=j.useState(null);async function v(){var g,y;if(!t||!a){h("Selecione o perodo para consulta");return}m(!0),h(null);try{const[f,b,N]=await Promise.all([U.get("/dashboard/entregas/financeiro",{params:{data_inicio:t,data_fim:a}}),U.get("/dashboard/entregas/financeiro/graficos",{params:{data_inicio:t,data_fim:a}}),U.get("/dashboard/entregas/financeiro/ia",{params:{data_inicio:t,data_fim:a}}).catch(()=>null)]);o(f.data),l(b.data),d((N==null?void 0:N.data)||{alertas:[],sugestoes:[]})}catch(f){console.error("Erro ao carregar dados:",f),h(((y=(g=f.response)==null?void 0:g.data)==null?void 0:y.detail)||"Erro ao carregar dados do dashboard")}finally{m(!1)}}j.useEffect(()=>{const g=new Date,y=new Date(g.getFullYear(),g.getMonth(),1);r(y.toISOString().slice(0,10)),s(g.toISOString().slice(0,10))},[]),j.useEffect(()=>{t&&a&&v()},[t,a]);const p=()=>{if(!n||n.total_entregas===0)return null;const g=n.margem_media,y=g>=0?"text-green-600":"text-red-600",f=g>=0?"":"";return e.jsxs("div",{className:`p-4 border rounded-lg ${g>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:f}),e.jsx("h3",{className:"font-semibold text-gray-700",children:"Anlise de Margem"})]}),e.jsx("p",{className:`text-sm ${y}`,children:g>=0?e.jsxs(e.Fragment,{children:["A taxa de entrega est ",e.jsx("strong",{children:"cobrindo os custos"})," com uma margem mdia de ",e.jsx("strong",{children:el(g)})," por entrega."]}):e.jsxs(e.Fragment,{children:[" A taxa de entrega est ",e.jsx("strong",{children:"abaixo dos custos"}),". Dficit mdio de ",e.jsx("strong",{children:el(Math.abs(g))})," por entrega."]})})]})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Qc,{className:"text-blue-600"}),"Dashboard Financeiro de Entregas"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visualize os custos e receitas das entregas realizadas no perodo"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cn,{className:"text-gray-500"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Perodo:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"De:"}),e.jsx("input",{type:"date",value:t,onChange:g=>r(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"At:"}),e.jsx("input",{type:"date",value:a,onChange:g=>s(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:v,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Um,{className:u?"animate-spin":""}),u?"Carregando...":"Atualizar"]})]})}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx(pr,{}),e.jsx("span",{children:x})]}),u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(k6,{}),e.jsx(k6,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((g,y)=>e.jsx(y_e,{},y))}),e.jsx(Pv,{}),e.jsx(Pv,{}),e.jsx(Pv,{})]}),!u&&n&&e.jsxs(e.Fragment,{children:[c&&c.alertas&&c.alertas.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(cm,{className:"text-yellow-600"}),"Alertas Automticos"]}),e.jsx("div",{className:"space-y-3",children:c.alertas.map((g,y)=>e.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:g})},y))})]}),c&&c.sugestoes&&c.sugestoes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:""}),"Sugestes Prticas"]}),e.jsx("div",{className:"space-y-3",children:c.sugestoes.map((g,y)=>e.jsx("div",{className:"p-4 border border-blue-200 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:g})},y))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx(_c,{titulo:"Total de Entregas",valor:n.total_entregas,icon:e.jsx(Qc,{className:"text-blue-600"}),colorClasse:"border-blue-200 bg-blue-50"}),e.jsx(_c,{titulo:"Custo Total",valor:el(n.custo_total_entregas),icon:e.jsx(rs,{className:"text-red-600"}),colorClasse:"border-red-200 bg-red-50",subtitulo:"Entregadores + Moto"}),e.jsx(_c,{titulo:"Custo Entregadores",valor:el(n.custo_total_entregadores),icon:e.jsx(Xn,{className:"text-purple-600"}),colorClasse:"border-purple-200 bg-purple-50"}),e.jsx(_c,{titulo:"Custo da Moto",valor:el(n.custo_total_moto),icon:e.jsx(l9,{className:"text-orange-600"}),colorClasse:"border-orange-200 bg-orange-50"}),e.jsx(_c,{titulo:"Repasse aos Entregadores",valor:el(n.total_repasse_taxa),icon:e.jsx(ch,{className:"text-green-600"}),colorClasse:"border-green-200 bg-green-50"}),e.jsx(_c,{titulo:"Custo Mdio por Entrega",valor:el(n.custo_medio_por_entrega),icon:e.jsx(dg,{className:"text-indigo-600"}),colorClasse:"border-indigo-200 bg-indigo-50"})]}),p(),i&&e.jsxs("div",{className:"space-y-6 mt-6",children:[i.por_dia&&i.por_dia.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Custo Total por Dia"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "Estou gastando mais?"'}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Xd,{data:i.por_dia,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tick:{fontSize:12},tickFormatter:g=>{const[y,f,b]=g.split("-");return`${b}/${f}`}}),e.jsx(Fr,{tick:{fontSize:12}}),e.jsx(or,{formatter:g=>`R$ ${Number(g).toFixed(2)}`,labelFormatter:g=>{const[y,f,b]=g.split("-");return`${b}/${f}/${y}`}}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"custo",stroke:"#ef4444",strokeWidth:2,name:"Custo Total (R$)"})]})})]}),i.custo_medio&&i.custo_medio.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Custo Mdio por Entrega"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "Entregar est ficando caro?"'}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Xd,{data:i.custo_medio,children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"data",tick:{fontSize:12},tickFormatter:g=>{const[y,f,b]=g.split("-");return`${b}/${f}`}}),e.jsx(Fr,{tick:{fontSize:12}}),e.jsx(or,{formatter:g=>`R$ ${Number(g).toFixed(2)}`,labelFormatter:g=>{const[y,f,b]=g.split("-");return`${b}/${f}/${y}`}}),e.jsx(Ar,{}),e.jsx(as,{type:"monotone",dataKey:"valor",stroke:"#8b5cf6",strokeWidth:2,name:"Custo Mdio (R$)"})]})})]}),i.taxa_vs_custo&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Taxa Cobrada  Custo Real"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Responde: "A taxa cobre o custo?"'}),e.jsx(da,{width:"100%",height:300,children:e.jsxs(Bn,{data:[{name:"Mdia","Taxa Cobrada":i.taxa_vs_custo.taxa_media,"Custo Real":i.taxa_vs_custo.custo_medio}],children:[e.jsx(va,{strokeDasharray:"3 3"}),e.jsx(zr,{dataKey:"name"}),e.jsx(Fr,{}),e.jsx(or,{formatter:g=>`R$ ${Number(g).toFixed(2)}`}),e.jsx(Ar,{}),e.jsx(Mr,{dataKey:"Taxa Cobrada",fill:"#10b981"}),e.jsx(Mr,{dataKey:"Custo Real",fill:"#ef4444"})]})}),e.jsx("div",{className:"mt-4 text-center",children:i.taxa_vs_custo.taxa_media>=i.taxa_vs_custo.custo_medio?e.jsxs("p",{className:"text-green-600 font-medium",children:[" Taxa mdia (R$ ",i.taxa_vs_custo.taxa_media.toFixed(2),") cobre o custo mdio (R$ ",i.taxa_vs_custo.custo_medio.toFixed(2),")"]}):e.jsxs("p",{className:"text-red-600 font-medium",children:[" Taxa mdia (R$ ",i.taxa_vs_custo.taxa_media.toFixed(2),") est abaixo do custo mdio (R$ ",i.taxa_vs_custo.custo_medio.toFixed(2),")"]})})]})]}),e.jsxs("div",{className:"mt-6 text-sm text-gray-500 text-center",children:["Dados do perodo: ",E6(n.periodo.data_inicio)," at ",E6(n.periodo.data_fim)]})]}),!u&&n&&n.total_entregas===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qc,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Nenhuma entrega encontrada"}),e.jsx("p",{className:"text-gray-500",children:"No h entregas concludas no perodo selecionado"})]})]})}function _c({titulo:t,valor:r,icon:a,colorClasse:s,subtitulo:n}){return e.jsxs("div",{className:`p-5 rounded-lg border shadow-sm ${s||"border-gray-200 bg-white"}`,children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("div",{className:"text-2xl",children:a})}),e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),n&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:n}),e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:r})]})}function y_e(){return e.jsx("div",{style:{height:110,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}function Pv(){return e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{style:{height:20,width:"40%",borderRadius:4,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",marginBottom:16}}),e.jsx("div",{style:{height:300,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})}function k6(){return e.jsx("div",{style:{height:80,borderRadius:8,background:"linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})}function el(t){return t==null?"R$ 0,00":t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function E6(t){if(!t)return"";const[r,a,s]=t.split("-");return`${s}/${a}/${r}`}function j_e(){return e.jsx(VL,{children:e.jsxs(vM,{children:[e.jsx(dI,{position:"top-right"}),e.jsxs(uM,{children:[e.jsx(ft,{path:"/login",element:e.jsx(A9,{})}),e.jsx(ft,{path:"/register",element:e.jsx(P9,{})}),e.jsxs(ft,{path:"/",element:e.jsx(Xt,{children:e.jsx(E9,{})}),children:[e.jsx(ft,{index:!0,element:e.jsx(Sy,{to:"/lembretes",replace:!0})}),e.jsx(ft,{path:"dashboard",element:e.jsx(Xt,{permission:"relatorios.gerencial",children:e.jsx(kk,{})})}),e.jsx(ft,{path:"dashboard-gerencial",element:e.jsx(Xt,{permission:"relatorios.gerencial",children:e.jsx(t_e,{})})}),e.jsx(ft,{path:"clientes",element:e.jsx(Xt,{permission:"clientes.visualizar",children:e.jsx(U9,{})})}),e.jsx(ft,{path:"clientes/:clienteId/financeiro",element:e.jsx(Xt,{permission:"clientes.visualizar",children:e.jsx(Zwe,{})})}),e.jsx(ft,{path:"clientes/:clienteId/timeline",element:e.jsx(Xt,{permission:"clientes.visualizar",children:e.jsx(ZB,{})})}),e.jsx(ft,{path:"pets",element:e.jsx(bB,{})}),e.jsx(ft,{path:"pets/novo",element:e.jsx(S4,{})}),e.jsx(ft,{path:"pets/:petId",element:e.jsx(jB,{})}),e.jsx(ft,{path:"pets/:petId/editar",element:e.jsx(S4,{})}),e.jsx(ft,{path:"produtos",element:e.jsx(Xt,{permission:"produtos.visualizar",children:e.jsx(iB,{})})}),e.jsx(ft,{path:"produtos/novo",element:e.jsx(Xt,{permission:"produtos.criar",children:e.jsx(_4,{})})}),e.jsx(ft,{path:"produtos/:id/editar",element:e.jsx(Xt,{permission:"produtos.editar",children:e.jsx(_4,{})})}),e.jsx(ft,{path:"produtos/:id/movimentacoes",element:e.jsx(ez,{})}),e.jsx(ft,{path:"produtos/relatorio",element:e.jsx(cB,{})}),e.jsx(ft,{path:"estoque/alertas",element:e.jsx(Xt,{permission:"produtos.visualizar",children:e.jsx(hB,{})})}),e.jsx(ft,{path:"lembretes",element:e.jsx(fB,{})}),e.jsx(ft,{path:"calculadora-racao",element:e.jsx(gB,{})}),e.jsx(ft,{path:"pdv",element:e.jsx(Xt,{permission:"vendas.criar",children:e.jsx(XB,{})})}),e.jsx(ft,{path:"meus-caixas",element:e.jsx(QB,{})}),e.jsx(ft,{path:"notas-fiscais",element:e.jsx(JB,{})}),e.jsx(ft,{path:"compras/pedidos",element:e.jsx(Xt,{permission:"compras.gerenciar",children:e.jsx(rz,{})})}),e.jsx(ft,{path:"compras/entrada-xml",element:e.jsx(Xt,{permission:"compras.gerenciar",children:e.jsx(nz,{})})}),e.jsx(ft,{path:"compras/bling",element:e.jsx(Xt,{permission:"compras.gerenciar",children:e.jsx(tz,{})})}),e.jsx(ft,{path:"financeiro",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(kk,{})})}),e.jsx(ft,{path:"financeiro/vendas",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(t2e,{})})}),e.jsx(ft,{path:"financeiro/relatorio-vendas",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(mhe,{})})}),e.jsx(ft,{path:"financeiro/contas-pagar",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(Xpe,{})})}),e.jsx(ft,{path:"financeiro/contas-receber",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(Ype,{})})}),e.jsx(ft,{path:"financeiro/conciliacao-3abas",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(ehe,{})})}),e.jsx(ft,{path:"financeiro/historico-conciliacoes",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(the,{})})}),e.jsx(ft,{path:"financeiro/conciliacao-bancaria",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(rhe,{})})}),e.jsx(ft,{path:"financeiro/fluxo-caixa",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(uhe,{})})}),e.jsx(ft,{path:"financeiro/dre",element:e.jsx(Xt,{permission:"relatorios.financeiro",children:e.jsx(l2e,{})})}),e.jsx(ft,{path:"comissoes",element:e.jsx(zwe,{})}),e.jsx(ft,{path:"comissoes/demonstrativo",element:e.jsx(Uwe,{})}),e.jsx(ft,{path:"comissoes/relatorios",element:e.jsx(Xwe,{})}),e.jsx(ft,{path:"comissoes/abertas",element:e.jsx(Wwe,{})}),e.jsx(ft,{path:"comissoes/fechamento/:funcionario_id",element:e.jsx(Hwe,{})}),e.jsx(ft,{path:"comissoes/fechamentos",element:e.jsx(Kwe,{})}),e.jsx(ft,{path:"comissoes/fechamentos/detalhe",element:e.jsx(Gwe,{})}),e.jsx(ft,{path:"subcategorias",element:e.jsx(C6,{})}),e.jsx(ft,{path:"cadastros/categorias",element:e.jsx(Ywe,{})}),e.jsx(ft,{path:"cadastros/categorias-financeiras",element:e.jsx(Qwe,{})}),e.jsx(ft,{path:"cadastros/especies-racas",element:e.jsx(Jwe,{})}),e.jsx(ft,{path:"cadastros/cargos",element:e.jsx(m_e,{})}),e.jsx(ft,{path:"cadastros/financeiro/bancos",element:e.jsx(Xt,{permission:"configuracoes.editar",children:e.jsx(Kpe,{})})}),e.jsx(ft,{path:"cadastros/financeiro/formas-pagamento",element:e.jsx(Xt,{permission:"configuracoes.editar",children:e.jsx(nhe,{})})}),e.jsx(ft,{path:"cadastros/financeiro/operadoras",element:e.jsx(Xt,{permission:"configuracoes.editar",children:e.jsx(ihe,{})})}),e.jsx(ft,{path:"subcategorias",element:e.jsx(C6,{})}),e.jsx(ft,{path:"admin/usuarios",element:e.jsx(Xt,{permission:"usuarios.manage",children:e.jsx(r_e,{})})}),e.jsx(ft,{path:"configuracoes",element:e.jsx(Xt,{permission:"configuracoes.editar",children:e.jsx(s_e,{})})}),e.jsx(ft,{path:"configuracoes/fiscal",element:e.jsx(n_e,{})}),e.jsx(ft,{path:"configuracoes/entregas",element:e.jsx(o_e,{})}),e.jsx(ft,{path:"configuracoes/custos-moto",element:e.jsx(i_e,{})}),e.jsx(ft,{path:"configuracoes/estoque",element:e.jsx(l_e,{})}),e.jsx(ft,{path:"auditoria/provisoes",element:e.jsx(c_e,{})}),e.jsx(ft,{path:"projecao-caixa",element:e.jsx(d_e,{})}),e.jsx(ft,{path:"simulacao-contratacao",element:e.jsx(u_e,{})}),e.jsx(ft,{path:"rh/funcionarios",element:e.jsx(p_e,{})}),e.jsx(ft,{path:"admin/roles",element:e.jsx(a_e,{})}),e.jsx(ft,{path:"entregas/abertas",element:e.jsx(h_e,{})}),e.jsx(ft,{path:"entregas/rotas",element:e.jsx(f_e,{})}),e.jsx(ft,{path:"entregas/historico",element:e.jsx(b_e,{})}),e.jsx(ft,{path:"entregas/financeiro",element:e.jsx(v_e,{})}),e.jsx(ft,{path:"ia/fluxo-caixa",element:e.jsx(Xt,{permission:"ia.fluxo_caixa",children:e.jsx(Nwe,{})})}),e.jsx(ft,{path:"ia/chat",element:e.jsx(wwe,{})}),e.jsx(ft,{path:"ia/whatsapp",element:e.jsx(Xt,{permission:"ia.whatsapp",children:e.jsx(Bwe,{})})}),e.jsx(ft,{path:"ia/alertas-racao",element:e.jsx(Xt,{permission:"produtos.editar",children:e.jsx(s2e,{})})}),e.jsx(ft,{path:"cadastros/opcoes-racao",element:e.jsx(Xt,{permission:"produtos.editar",children:e.jsx(n2e,{})})})]}),e.jsx(ft,{path:"*",element:e.jsx(Sy,{to:"/",replace:!0})})]})]})})}Tv.createRoot(document.getElementById("root")).render(e.jsx(pe.StrictMode,{children:e.jsx(j_e,{})}));
