import{S as oe,r as x,j as e}from"./vendor-react-1772214481029.js";import{a as h}from"./index-1772214481029.js";function se(){const o=oe(),[C,D]=x.useState([]),[T,w]=x.useState(!0),[_,$]=x.useState(""),[z,B]=x.useState(null);x.useEffect(()=>{y()},[_]);async function y(){try{w(!0);const n=new URLSearchParams;_&&n.append("status",_);const d=await h.get(`/rotas-entrega/?${n.toString()}`);D(d.data)}catch(n){console.error("Erro ao carregar rotas:",n),alert("Erro ao carregar rotas de entrega")}finally{w(!1)}}function A(n){B(z===n?null:n)}async function v(n,d){try{const c=d.map(g=>g.id);await h.put(`/rotas-entrega/${n}/paradas/reordenar`,c),D(g=>g.map(u=>u.id===n?{...u,paradas:d.map((S,R)=>({...S,ordem:R+1}))}:u)),alert("Ordem das paradas atualizada!")}catch(c){console.error("Erro ao reordenar paradas:",c),alert("Erro ao reordenar paradas")}}async function F(n){var c,g;if(!confirm("Deseja iniciar esta rota? Uma mensagem serÃ¡ enviada ao primeiro cliente."))return;const d=prompt(`ðŸï¸ Digite o KM atual da moto (opcional):

Deixe em branco se nÃ£o quiser registrar.`);try{const u={};d&&!isNaN(d)&&parseFloat(d)>0&&(u.km_inicial=parseFloat(d)),await h.post(`/rotas-entrega/${n}/iniciar`,null,{params:u}),alert("âœ… Rota iniciada! Mensagem enviada ao primeiro cliente."),y()}catch(u){console.error("Erro ao iniciar rota:",u);const S=((g=(c=u.response)==null?void 0:c.data)==null?void 0:g.detail)||"Erro ao iniciar rota";alert(`âŒ ${S}`)}}async function j(n){var d,c;if(confirm(`âš ï¸ Tem certeza que deseja excluir esta rota?

As vendas voltarÃ£o para a listagem de entregas pendentes.`))try{const g=await h.delete(`/rotas-entrega/${n}`),{total_vendas:u}=g.data;alert(`âœ… Rota excluÃ­da com sucesso!
${u} venda(s) voltaram para entregas pendentes.`),y()}catch(g){console.error("Erro ao excluir rota:",g);const u=((c=(d=g.response)==null?void 0:d.data)==null?void 0:c.detail)||"Erro ao excluir rota";alert(`âŒ ${u}`)}}async function E(n){var d,c;if(confirm(`â†©ï¸ Reverter inÃ­cio desta rota?

A rota voltarÃ¡ para status pendente e vocÃª poderÃ¡ adicionar mais entregas.`))try{await h.post(`/rotas-entrega/${n}/reverter-inicio`),alert("âœ… Rota revertida para pendente! Agora vocÃª pode adicionar mais entregas."),y()}catch(g){console.error("Erro ao reverter rota:",g);const u=((c=(d=g.response)==null?void 0:d.data)==null?void 0:c.detail)||"Erro ao reverter inÃ­cio da rota";alert(`âŒ ${u}`)}}function N(n){if(!n.paradas||n.paradas.length===0)return null;const d=n.paradas[n.paradas.length-1];return d.tempo_acumulado?d.tempo_acumulado:null}function k(n){if(!n)return"N/A";const d=Math.floor(n/60),c=Math.floor(d/60),g=d%60;return c>0?`${c}h${g}min`:`${g}min`}function s(n){switch(n){case"pendente":return"#FFA500";case"em_andamento":return"#007BFF";case"em_rota":return"#007BFF";case"concluida":return"#28A745";case"cancelada":return"#DC3545";default:return"#6C757D"}}function P(n){switch(n){case"pendente":return"ðŸŸ  Pendente";case"em_andamento":return"ðŸ”µ Em Andamento";case"em_rota":return"ðŸ”µ Em Rota";case"concluida":return"âœ… ConcluÃ­da";case"cancelada":return"âŒ Cancelada";default:return n}}return T?e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{children:"Carregando rotas..."})]}):e.jsxs("div",{className:"page",children:[e.jsx("h1",{children:"Rotas de Entrega"}),e.jsx("p",{style:{color:"#666",marginBottom:20},children:"Rotas criadas e em andamento"}),e.jsxs("div",{style:{marginBottom:20,display:"flex",gap:10,alignItems:"center"},children:[e.jsxs("label",{children:["Filtrar por status:",e.jsxs("select",{value:_,onChange:n=>$(n.target.value),style:{marginLeft:10,padding:"5px 10px"},children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendente",children:"Pendente"}),e.jsx("option",{value:"em_andamento",children:"Em Andamento"}),e.jsx("option",{value:"concluida",children:"ConcluÃ­da"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsx("button",{onClick:y,className:"btn-secondary",style:{marginLeft:"auto"},children:"ðŸ”„ Atualizar"})]}),!Array.isArray(C)||C.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"Nenhuma rota encontrada"}),e.jsx("button",{onClick:()=>o("/entregas/abertas"),className:"btn-primary",style:{marginTop:10},children:"Criar Nova Rota"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:15},children:C.map(n=>e.jsx(te,{rota:n,expandida:z===n.id,onToggleExpand:()=>A(n.id),onReordenar:v,onIniciarRota:F,onExcluirRota:j,onReverterInicio:E,getStatusColor:s,getStatusLabel:P,calcularTempoEstimado:N,formatarTempo:k},n.id))})]})}function te({rota:o,expandida:C,onToggleExpand:D,onReordenar:T,onIniciarRota:w,onExcluirRota:_,onReverterInicio:$,getStatusColor:z,getStatusLabel:B,calcularTempoEstimado:y,formatarTempo:A}){var M,q;const[v,F]=x.useState(o.paradas||[]),[j,E]=x.useState(null),[N,k]=x.useState(null),[s,P]=x.useState(null),[n,d]=x.useState(!1),[c,g]=x.useState(null),[u,S]=x.useState(null),[R,W]=x.useState(!1);x.useEffect(()=>{F(o.paradas||[])},[o.paradas]);const L=y(o),I=v.filter(a=>a.status!=="entregue").length,G=v.length>0&&I===0;async function H(a,l){var t,i,m;try{d(!0),k(a);const f=await h.get(`/vendas/${l}`);console.log("ðŸ“¦ Detalhes da venda carregados:",f.data),console.log("ðŸ“ž Telefones do cliente:",{telefone:(t=f.data.cliente)==null?void 0:t.telefone,celular:(i=f.data.cliente)==null?void 0:i.celular,email:(m=f.data.cliente)==null?void 0:m.email}),P(f.data)}catch(f){console.error("Erro ao carregar detalhes da venda:",f),alert("Erro ao carregar detalhes da venda"),k(null)}finally{d(!1)}}function O(){k(null),P(null)}async function J(a,l){var i,m;if(!confirm(`âœ… Confirmar entrega realizada?

Uma mensagem serÃ¡ enviada automaticamente para o prÃ³ximo cliente da rota.`))return;const t=prompt(`ðŸï¸ Digite o KM atual da moto (opcional):

Deixe em branco se nÃ£o quiser registrar.`);try{g(a);const f={};t&&!isNaN(t)&&parseFloat(t)>0&&(f.km_entrega=parseFloat(t));const r=await h.post(`/rotas-entrega/${l}/paradas/${a}/marcar-entregue`,null,{params:f});alert("âœ… "+r.data.message),F(p=>p.map(b=>b.id===a?{...b,status:"entregue",data_entrega:new Date().toISOString(),km_entrega:t?parseFloat(t):null}:b)),window.location.reload()}catch(f){console.error("Erro ao marcar entrega:",f);const r=((m=(i=f.response)==null?void 0:i.data)==null?void 0:m.detail)||"Erro ao marcar entrega como concluÃ­da";alert("âŒ "+r)}finally{g(null)}}async function Q(a,l){const t=prompt(`ðŸ“‹ Digite a observaÃ§Ã£o sobre esta entrega:

(Ex: 'Sempre entregar no vizinho', 'Chamar na casa da frente')`);if(!(!t||t.trim()===""))try{await h.put(`/rotas-entrega/${l}/paradas/${a}/observacao`,null,{params:{observacao:t.trim()}}),alert("âœ… ObservaÃ§Ã£o salva com sucesso!"),F(i=>i.map(m=>m.id===a?{...m,observacoes:t.trim()}:m))}catch(i){console.error("Erro ao salvar observaÃ§Ã£o:",i),alert("âŒ Erro ao salvar observaÃ§Ã£o")}}async function X(a,l,t){const i=prompt(`âš ï¸ Por que a entrega nÃ£o foi realizada?

(Ex: 'Cliente ausente', 'CartÃ£o recusado', 'EndereÃ§o nÃ£o encontrado')`);if(!(!i||i.trim()==="")&&confirm(`âš ï¸ Confirmar que a entrega NÃƒO foi realizada?

A venda voltarÃ¡ para entregas em aberto.`))try{S(a),await h.post(`/rotas-entrega/${l}/paradas/${a}/nao-entregue`,null,{params:{motivo:i.trim()}}),alert("âœ… Entrega marcada como nÃ£o realizada. Venda #"+t+" voltou para entregas em aberto."),window.location.reload()}catch(m){console.error("Erro ao marcar como nÃ£o entregue:",m),alert("âŒ Erro ao processar")}finally{S(null)}}async function Y(a,l){var f,r;const t=prompt(`ðŸï¸ Digite o KM final da moto (opcional):

Deixe em branco se nÃ£o quiser registrar.`);let i=null;if(l&&t&&!isNaN(t)&&parseFloat(t)>parseFloat(l)){const p=(parseFloat(t)-parseFloat(l)).toFixed(2);confirm(`ðŸ“ DistÃ¢ncia calculada: ${p} km

KM Inicial: ${l}
KM Final: ${t}

Deseja usar esta distÃ¢ncia?`)&&(i=parseFloat(p))}if(!i){const p=prompt(`ðŸ“ Digite a distÃ¢ncia percorrida em km (opcional):

Deixe em branco se nÃ£o souber.`);p&&!isNaN(p)&&parseFloat(p)>0&&(i=parseFloat(p))}const m=prompt("ðŸ“‹ ObservaÃ§Ãµes sobre a rota (opcional):")||"";if(confirm(`âœ… Finalizar esta rota?

Esta aÃ§Ã£o nÃ£o pode ser desfeita.`))try{W(!0);const p={observacoes:m.trim()};t&&!isNaN(t)&&parseFloat(t)>0&&(p.km_final=parseFloat(t)),i&&(p.distancia_real=i),await h.post(`/rotas-entrega/${a}/fechar`,p),alert("âœ… Rota finalizada com sucesso!"),window.location.reload()}catch(p){console.error("Erro ao finalizar rota:",p);const b=((r=(f=p.response)==null?void 0:f.data)==null?void 0:r.detail)||"Erro ao finalizar rota";alert("âŒ "+b)}finally{W(!1)}}const Z=(a,l)=>{E(l),a.dataTransfer.effectAllowed="move"},ee=(a,l)=>{if(a.preventDefault(),j===null||j===l)return;const t=[...v],i=t[j];t.splice(j,1),t.splice(l,0,i),F(t),E(l)},ae=()=>{j!==null&&T(o.id,v),E(null)};return e.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:15,backgroundColor:"#fff"},children:[e.jsxs("div",{style:{cursor:"pointer",transition:"all 0.2s"},onClick:D,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("h3",{style:{margin:0,marginBottom:10},children:["ðŸšš ",o.numero||`Rota #${o.id}`,C?" ðŸ”½":" â–¶ï¸"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:5,color:"#555"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Entregador:"})," ",((M=o.entregador)==null?void 0:M.nome)||"NÃ£o informado"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Paradas:"})," ",((q=o.paradas)==null?void 0:q.length)||0," entrega(s)"]}),o.distancia_prevista&&e.jsxs("div",{children:[e.jsx("strong",{children:"DistÃ¢ncia Prevista:"})," ",o.distancia_prevista," km"]}),L&&e.jsxs("div",{children:[e.jsx("strong",{children:"Tempo Estimado:"})," ",A(L)]}),o.km_inicial&&e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ KM Inicial:"})," ",parseFloat(o.km_inicial).toFixed(1)," km"]}),o.km_final&&e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ KM Final:"})," ",parseFloat(o.km_final).toFixed(1)," km"]}),o.km_inicial&&o.km_final&&e.jsxs("div",{style:{color:"#007BFF",fontWeight:"600"},children:[e.jsx("strong",{children:"ðŸ“ Total Rodado:"})," ",(parseFloat(o.km_final)-parseFloat(o.km_inicial)).toFixed(1)," km",o.distancia_prevista&&(()=>{const a=parseFloat(o.km_final)-parseFloat(o.km_inicial),l=parseFloat(o.distancia_prevista),t=a-l,i=(t/l*100).toFixed(1);return e.jsxs("span",{style:{marginLeft:10,color:t>0?"#DC3545":"#28A745",fontSize:13},children:["(",t>0?"+":"",t.toFixed(1)," km / ",i>0?"+":"",i,"% vs projetado)"]})})()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Criada em:"})," ",new Date(o.created_at).toLocaleString("pt-BR")]}),o.data_conclusao&&e.jsxs("div",{children:[e.jsx("strong",{children:"ConcluÃ­da em:"})," ",new Date(o.data_conclusao).toLocaleString("pt-BR")]})]})]}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[o.status==="pendente"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),w(o.id)},style:{padding:"8px 16px",backgroundColor:"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:"ðŸš€ Iniciar Rota"}),(o.status==="em_rota"||o.status==="em_andamento")&&G&&e.jsx("button",{onClick:a=>{a.stopPropagation(),Y(o.id,o.km_inicial)},disabled:R,style:{padding:"8px 16px",backgroundColor:R?"#ccc":"#007BFF",color:"#fff",border:"none",borderRadius:6,cursor:R?"not-allowed":"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:R?"â³ Processando...":"âœ… Finalizar Rota"}),(o.status==="em_rota"||o.status==="em_andamento")&&I===v.length&&e.jsx("button",{onClick:a=>{a.stopPropagation(),$(o.id)},style:{padding:"8px 16px",backgroundColor:"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:"â†©ï¸ Reverter InÃ­cio"}),(o.status==="pendente"||o.status==="em_rota"||o.status==="em_andamento")&&e.jsx("button",{onClick:a=>{a.stopPropagation(),_(o.id)},style:{padding:"8px 16px",backgroundColor:"#DC3545",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontWeight:"bold",fontSize:14,display:"flex",alignItems:"center",gap:5},children:"ðŸ—‘ï¸ Excluir"}),e.jsx("div",{style:{padding:"5px 15px",borderRadius:20,backgroundColor:z(o.status),color:"#fff",fontWeight:"bold",fontSize:14,whiteSpace:"nowrap"},children:B(o.status)})]})]}),o.observacoes&&e.jsxs("div",{style:{marginTop:10,padding:10,backgroundColor:"#f8f9fa",borderRadius:5,fontSize:14,color:"#666"},children:[e.jsx("strong",{children:"ObservaÃ§Ãµes:"})," ",o.observacoes]})]}),C&&v.length>0&&e.jsxs("div",{style:{marginTop:20,borderTop:"2px solid #eee",paddingTop:15},children:[e.jsx("h4",{style:{marginBottom:15},children:"ðŸ“ Paradas da Rota (arraste para reordenar)"}),v.map((a,l)=>{var t,i,m,f;return e.jsxs("div",{children:[e.jsxs("div",{draggable:!0,onDragStart:r=>Z(r,l),onDragOver:r=>ee(r,l),onDragEnd:ae,style:{padding:12,marginBottom:10,border:"1px solid #ddd",borderRadius:6,backgroundColor:j===l?"#f0f8ff":"#fafafa",cursor:"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[e.jsxs("span",{style:{fontWeight:"bold",marginRight:10,fontSize:18,color:"#007BFF"},children:[a.ordem,"Âº"]}),e.jsxs("span",{style:{color:"#666",fontSize:14},children:["Venda #",a.venda_id]}),a.status&&e.jsx("span",{style:{marginLeft:10,padding:"2px 8px",borderRadius:12,fontSize:12,backgroundColor:a.status==="entregue"?"#d4edda":a.status==="tentativa"?"#fff3cd":"#e2e3e5",color:a.status==="entregue"?"#155724":a.status==="tentativa"?"#856404":"#383d41"},children:a.status==="entregue"?"âœ“ Entregue":a.status==="tentativa"?"âš  Tentativa":"Pendente"})]}),e.jsxs("div",{style:{fontSize:13,color:"#333",lineHeight:1.6},children:[a.cliente_nome&&e.jsxs("div",{style:{marginBottom:4},children:[e.jsxs("strong",{style:{color:"#1565C0"},children:["ðŸ‘¤ ",a.cliente_nome]}),a.cliente_telefone&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:["ðŸ“ž ",a.cliente_telefone]}),a.cliente_celular&&e.jsxs("span",{style:{marginLeft:12,color:"#555"},children:["ðŸ“± ",a.cliente_celular]})]}),e.jsxs("div",{style:{color:"#555"},children:["ðŸ“ ",a.endereco,a.distancia_acumulada&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:["â€¢ Dist: ",a.distancia_acumulada," km"]}),a.tempo_acumulado&&e.jsxs("span",{style:{marginLeft:12,color:"#777"},children:["â€¢ Tempo aprox: ",A(a.tempo_acumulado)]})]})]}),a.data_entrega&&e.jsxs("div",{style:{color:"#28a745",fontSize:12,marginTop:3},children:["âœ“ Entregue em: ",new Date(a.data_entrega).toLocaleString("pt-BR")]}),a.observacoes&&e.jsxs("div",{style:{marginTop:6,padding:6,backgroundColor:"#fff3cd",borderRadius:4,fontSize:12,color:"#856404",border:"1px solid #ffc107"},children:["ðŸ“‹ ",a.observacoes]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"flex-end"},children:[a.status!=="entregue"&&o.status==="em_rota"&&e.jsx("button",{onClick:r=>{r.stopPropagation(),J(a.id,o.id)},disabled:c===a.id,style:{padding:"8px 12px",backgroundColor:c===a.id?"#ccc":"#28A745",color:"#fff",border:"none",borderRadius:6,cursor:c===a.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:c===a.id?"â³...":"âœ… Entregue"}),a.status!=="entregue"&&(o.status==="em_rota"||o.status==="em_andamento")&&e.jsx("button",{onClick:r=>{r.stopPropagation(),X(a.id,o.id,a.venda_id)},disabled:u===a.id,style:{padding:"8px 12px",backgroundColor:u===a.id?"#ccc":"#FFC107",color:"#000",border:"none",borderRadius:6,cursor:u===a.id?"not-allowed":"pointer",fontWeight:"600",fontSize:12,whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:u===a.id?"â³...":"âš ï¸ Falta Entregar"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),Q(a.id,o.id)},style:{padding:"8px 12px",backgroundColor:"#6C757D",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:"ðŸ“ ObservaÃ§Ã£o"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),N===a.id?O():H(a.id,a.venda_id)},style:{padding:"8px 12px",backgroundColor:"#17A2B8",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:"600",whiteSpace:"nowrap",width:"130px",textAlign:"center"},children:"ðŸ“„ Detalhes"})]})]}),N===a.id&&e.jsx("div",{style:{marginTop:0,marginBottom:15,padding:15,backgroundColor:"#f8f9fa",borderRadius:8,border:"2px solid #007BFF",boxShadow:"0 2px 8px rgba(0,123,255,0.2)"},children:n?e.jsx("div",{style:{textAlign:"center",color:"#666",padding:20},children:"Carregando detalhes da venda..."}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15,borderBottom:"2px solid #007BFF",paddingBottom:10},children:[e.jsxs("h4",{style:{margin:0,color:"#007BFF"},children:["ðŸ§¾ Detalhes da Venda #",s.id]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),O()},style:{background:"#dc3545",color:"#fff",border:"none",borderRadius:4,padding:"6px 12px",cursor:"pointer",fontWeight:"bold",fontSize:13},children:"âœ• Fechar"})]}),e.jsx("div",{style:{backgroundColor:"#e7f3ff",padding:12,borderRadius:6,marginBottom:15,border:"1px solid #007BFF"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,fontSize:14},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ‘¤ Cliente:"})," ",((t=s.cliente)==null?void 0:t.nome)||s.nome_cliente||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ“… Data:"})," ",s.data_venda?new Date(s.data_venda).toLocaleString("pt-BR"):"N/A"]}),((i=s.cliente)==null?void 0:i.telefone)&&e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ“ž Telefone:"})," ",s.cliente.telefone]}),((m=s.cliente)==null?void 0:m.celular)&&e.jsxs("div",{children:[e.jsx("strong",{children:"ðŸ“± Celular:"})," ",s.cliente.celular]}),((f=s.cliente)==null?void 0:f.email)&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:"ðŸ“§ Email:"})," ",s.cliente.email]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,fontSize:14,marginBottom:15},children:[e.jsxs("div",{style:{padding:10,backgroundColor:"#d4edda",borderRadius:4,border:"1px solid #28a745"},children:[e.jsx("div",{style:{fontSize:11,color:"#155724",marginBottom:3},children:"VALOR TOTAL"}),e.jsxs("div",{style:{fontWeight:"bold",fontSize:16,color:"#155724"},children:["R$ ",parseFloat(s.valor_total||s.total||0).toFixed(2)]})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"PAGAMENTO"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:s.forma_pagamento||"N/A"})]}),e.jsxs("div",{style:{padding:10,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:3},children:"STATUS"}),e.jsx("div",{style:{fontWeight:"bold",fontSize:14},children:s.status_pagamento||"N/A"})]})]}),s.endereco_entrega&&e.jsxs("div",{style:{padding:12,backgroundColor:"#e3f2fd",borderRadius:6,marginBottom:15,border:"1px solid #2196F3"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#1976D2"},children:"ðŸ“ EndereÃ§o de Entrega"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:s.endereco_entrega})]}),s.observacoes&&e.jsxs("div",{style:{padding:12,backgroundColor:"#fff3cd",borderRadius:6,marginBottom:15,border:"1px solid #ffc107"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:5,color:"#f57c00"},children:"ðŸ’¬ ObservaÃ§Ãµes"}),e.jsx("div",{style:{color:"#424242",fontSize:14},children:s.observacoes})]}),s.itens&&s.itens.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:15,marginBottom:10,color:"#424242"},children:["ðŸ›’ Itens da Venda (",s.itens.length,")"]}),e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:6,border:"1px solid #ddd",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.itens.map((r,p)=>{var b,V,K,U;return e.jsxs("div",{style:{padding:12,borderBottom:p<s.itens.length-1?"1px solid #eee":"none",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:p%2===0?"#fafafa":"#fff"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:3,color:"#333"},children:((b=r.produto)==null?void 0:b.nome)||((V=r.servico)==null?void 0:V.nome)||r.produto_nome||r.servico_descricao||"Item"}),(((K=r.produto)==null?void 0:K.codigo)||r.produto_codigo)&&e.jsxs("div",{style:{fontSize:12,color:"#999"},children:["CÃ³d: ",((U=r.produto)==null?void 0:U.codigo)||r.produto_codigo]})]}),e.jsxs("div",{style:{textAlign:"right",minWidth:120},children:[e.jsxs("div",{style:{color:"#666",fontSize:13,marginBottom:2},children:[r.quantidade," Ã— R$ ",parseFloat(r.valor_unitario||r.preco_unitario||0).toFixed(2)]}),e.jsxs("div",{style:{fontSize:15,color:"#28a745",fontWeight:"bold"},children:["R$ ",parseFloat((r.quantidade||0)*(r.valor_unitario||r.preco_unitario||0)).toFixed(2)]})]})]},p)}),e.jsxs("div",{style:{padding:14,backgroundColor:"#1976D2",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#fff"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:16},children:"TOTAL DA VENDA"}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:18},children:["R$ ",parseFloat(s.valor_total||s.total||0).toFixed(2)]})]})]})]})]}):null})]},a.id)})]})]})}export{se as default};
