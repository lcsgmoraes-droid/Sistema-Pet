import{r as t,j as e}from"./vendor-react-1772195894556.js";import{a as x}from"./api-1772195894556.js";import"./index-1772195894556.js";const w=[{key:"logo",label:"Logo da Loja",desc:"Aparece no cabeÃ§alho da loja virtual (recomendado: 200Ã—80 px)"},{key:"banner_1",label:"Banner 1",desc:"Primeiro slide do banner rotativo (recomendado: 1200Ã—400 px)"},{key:"banner_2",label:"Banner 2",desc:"Segundo slide (opcional)"},{key:"banner_3",label:"Banner 3",desc:"Terceiro slide (opcional)"}];function k({url:i,label:l,cacheBuster:u}){if(!i)return e.jsx("div",{style:{width:"100%",minHeight:120,background:"#f3f4f6",border:"2px dashed #d1d5db",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:14},children:"Sem imagem"});const m=i.startsWith("/uploads/")?`${i}?t=${u}`:i;return e.jsx("img",{src:m,alt:l,style:{width:"100%",maxHeight:200,objectFit:"contain",borderRadius:8,border:"1px solid #e5e7eb"}})}function z(){const[i,l]=t.useState({logo_url:null,banner_1_url:null,banner_2_url:null,banner_3_url:null}),[u,m]=t.useState(!0),[j,c]=t.useState({}),[s,g]=t.useState(null),[y,b]=t.useState(Date.now()),h=t.useRef({});t.useEffect(()=>{x.get("/ecommerce-aparencia").then(a=>l(a.data)).catch(()=>g({tipo:"erro",texto:"NÃ£o foi possÃ­vel carregar as configuraÃ§Ãµes."})).finally(()=>m(!1))},[]);function p(a,o){g({tipo:a,texto:o}),setTimeout(()=>g(null),4e3)}async function v(a,o){c(r=>({...r,[a]:!0}));const f=new FormData;f.append("file",o);try{const r=await x.post(`/ecommerce-aparencia/upload/${a}`,f,{headers:{"Content-Type":"multipart/form-data"}});l(r.data),b(Date.now()),p("ok","Imagem salva com sucesso!")}catch{p("erro","Erro ao enviar a imagem. Verifique o formato e o tamanho (mÃ¡x. 5 MB).")}finally{c(r=>({...r,[a]:!1}))}}async function S(a){c(o=>({...o,[a]:!0}));try{const o=await x.delete(`/ecommerce-aparencia/${a}`);l(o.data),b(Date.now()),p("ok","Imagem removida.")}catch{p("erro","Erro ao remover a imagem.")}finally{c(o=>({...o,[a]:!1}))}}return u?e.jsx("div",{style:{padding:40,textAlign:"center",color:"#6b7280"},children:"Carregando..."}):e.jsxs("div",{style:{maxWidth:800,margin:"0 auto",padding:"32px 24px"},children:[e.jsx("h1",{style:{fontSize:24,fontWeight:700,color:"#111827",marginBottom:4},children:"ðŸ–¼ï¸ AparÃªncia da Loja"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:32},children:"Configure o logo e os banners que aparecem na sua loja virtual."}),s&&e.jsxs("div",{style:{padding:"12px 16px",borderRadius:8,marginBottom:24,background:s.tipo==="ok"?"#f0fdf4":"#fef2f2",color:s.tipo==="ok"?"#166534":"#991b1b",border:`1px solid ${s.tipo==="ok"?"#bbf7d0":"#fecaca"}`,fontWeight:500},children:[s.tipo==="ok"?"âœ… ":"âŒ ",s.texto]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:24},children:w.map(({key:a,label:o,desc:f})=>{const r=i[`${a}_url`],d=j[a];return e.jsxs("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:24,boxShadow:"0 1px 3px rgba(0,0,0,0.06)"},children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("span",{style:{fontWeight:600,fontSize:16,color:"#111827"},children:o}),e.jsx("span",{style:{marginLeft:10,fontSize:13,color:"#9ca3af"},children:f})]}),e.jsx(k,{url:r,label:o,cacheBuster:y}),e.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap",alignItems:"center"},children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",style:{display:"none"},ref:n=>h.current[a]=n,onChange:n=>n.target.files[0]&&v(a,n.target.files[0])}),e.jsx("button",{onClick:()=>{var n;return(n=h.current[a])==null?void 0:n.click()},disabled:d,style:{padding:"8px 18px",background:d?"#d1d5db":"#2e7d32",color:"#fff",border:"none",borderRadius:7,fontWeight:600,cursor:d?"not-allowed":"pointer",fontSize:14},children:d?"Enviando...":r?"ðŸ”„ Trocar imagem":"ðŸ“¤ Fazer upload"}),r&&e.jsx("button",{onClick:()=>S(a),disabled:d,style:{padding:"8px 14px",background:"#fff",color:"#dc2626",border:"1px solid #fca5a5",borderRadius:7,fontWeight:500,cursor:d?"not-allowed":"pointer",fontSize:14},children:"ðŸ—‘ Remover"})]})]},a)})}),e.jsxs("div",{style:{marginTop:32,padding:16,background:"#fffbeb",borderRadius:10,border:"1px solid #fde68a",fontSize:13,color:"#92400e"},children:[e.jsx("strong",{children:"ðŸ’¡ Dica:"})," As imagens sÃ£o atualizadas imediatamente na loja apÃ³s o upload. Para ver o resultado, acesse a ",e.jsx("a",{href:"/ecommerce",style:{color:"#c41c1c"},children:"prÃ©via da loja"}),"."]})]})}export{z as default};
